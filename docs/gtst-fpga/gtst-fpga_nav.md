# 目录

1.  标题页

1.  版权

1.  致谢

1.  关于作者和技术审阅人

1.  致谢

1.  **介绍**

    1.  本书适合谁阅读？

    1.  本书不包含什么内容

    1.  本书内容

    1.  你需要的工具

    1.  在线资源

1.  **1. 认识 FPGA**

    1.  FPGA 的简短历史

    1.  流行的 FPGA 应用

    1.  比较常见的数字逻辑元件

        1.  FPGA 与微控制器

        1.  FPGA 与 ASIC

        1.  FPGA 与微控制器与 ASIC

    1.  Verilog 和 VHDL

    1.  总结

1.  **2. 设置你的硬件和工具**

    1.  选择 FPGA 开发板

    1.  本书的要求

    1.  设置你的开发环境

        1.  iCEcube2

        1.  钻石程序员

    1.  **项目 #1: 将开关接入 LED**

        1.  编写代码

        1.  创建新的 iCEcube2 项目

        1.  添加引脚约束

        1.  运行构建

        1.  连接你的开发板

        1.  编程 FPGA

    1.  总结

1.  **3. 布尔代数与查找表**

    1.  逻辑门及其真值表

        1.  与门

        1.  或门

        1.  非门

        1.  异或门

        1.  与非门

        1.  其他门

    1.  结合布尔代数与逻辑门

    1.  查找表

    1.  **项目 #2: 使用逻辑门点亮 LED**

        1.  编写代码

        1.  构建和编程 FPGA

    1.  总结

1.  **4. 使用翻转触发器存储状态**

    1.  翻转触发器的工作原理

        1.  时钟信号

        1.  翻转触发器的实际应用

        1.  一链翻转触发器

    1.  **项目 #3: 让 LED 闪烁**

        1.  编写代码

        1.  添加约束

        1.  构建和编程 FPGA

    1.  组合逻辑与时序逻辑

    1.  锁存器的危险

    1.  重置触发器

    1.  真实 FPGA 上的查找表和触发器

    1.  总结

1.  **5. 使用仿真测试你的代码**

    1.  为什么仿真很重要

    1.  FPGA 仿真工具

    1.  测试平台

        1.  编写测试平台

        1.  运行测试平台并查看波形

    1.  **项目 #4: 消除开关抖动**

        1.  在 FPGA 上测量时间

        1.  编写代码

        1.  创建测试平台和仿真

        1.  构建和编程 FPGA

    1.  自检测试平台

    1.  初始信号条件

    1.  在 FPGA 上的调试

    1.  验证

    1.  总结

1.  **6. 常见的 FPGA 模块**

    1.  多路复用器和解复用器

        1.  实现多路复用器

        1.  实现解复用器

    1.  移位寄存器

        1.  延迟数据

        1.  串行与并行数据转换

        1.  创建线性反馈移位寄存器

    1.  **项目 #5: 有选择地闪烁 LED**

        1.  编写代码

        1.  尝试另一种方法

        1.  比较两种方法

    1.  随机存取内存

        1.  RAM 实现

        1.  FPGA 上的 RAM

    1.  FIFO: 先进先出

        1.  输入输出信号

        1.  FIFO 实现

    1.  总结

1.  **7. 综合、布局与布线及时钟域跨越**

    1.  综合

        1.  笔记、警告和错误

        1.  不可综合代码

    1.  布局与布线

        1.  约束条件

        1.  时序错误

    1.  时钟域跨越

        1.  从慢到快的跨越

        1.  从更快到更慢的跨越

        1.  使用 FIFO

        1.  解决时序错误

    1.  总结

1.  **8. 状态机**

    1.  状态、转移和事件

    1.  实现状态机

        1.  使用两个始终或处理模块

        1.  使用一个始终或处理模块

        1.  测试设计

    1.  状态机最佳实践

    1.  **项目#6: 创建记忆游戏**

        1.  规划状态机

        1.  组织设计

        1.  使用七段显示器

        1.  编码顶层模块

        1.  编码状态机

        1.  测试记忆游戏

        1.  添加引脚约束

        1.  构建并编程 FPGA

    1.  总结

1.  **9. 有用的 FPGA 原语**

    1.  如何创建原语

        1.  实例化

        1.  GUI 方法

    1.  块 RAM

        1.  特性与局限

        1.  创建

    1.  数字信号处理模块

        1.  模拟信号与数字信号

        1.  常见的 DSP 任务

        1.  特性

        1.  创建

    1.  锁相环

        1.  它是如何工作的

        1.  创建

    1.  总结

1.  **10. 数字与数学**

    1.  数值数据类型

        1.  表示有符号与无符号值

        1.  取二进制补码

        1.  适当调整信号大小

        1.  在 VHDL 中转换类型

    1.  执行数学运算

        1.  加法

        1.  减法

        1.  乘法

        1.  按 2 的幂进行乘法运算

        1.  除法

    1.  FPGA 如何实现数学运算

    1.  与小数的工作

        1.  使用定点数进行加减运算

        1.  使用定点数进行乘法运算

    1.  总结

1.  **11. 使用 I/O 和 Serdes 实现数据进出**

    1.  与 GPIO 引脚的工作

        1.  I/O 缓冲区

        1.  电气特性

        1.  通过双倍数据率实现更快的数据传输

    1.  SerDes

        1.  并行通信与串行通信

        1.  自时钟信号

        1.  SerDes 工作原理

    1.  摘要

1.  **A. FPGA 开发板**

    1.  Nandland Go 板

    1.  Lattice iCEstick

    1.  Alchitry Cu

    1.  切换板卡

1.  **B. FPGA 工程师职业建议**

    1.  简历

    1.  面试

    1.  工作机会和谈判

    1.  摘要

1.  词汇表

1.  索引

# 图表列表

1.  图 1-1: 选择的国家中 Verilog 与 VHDL 的搜索量

1.  图 2-1: iCEcube2 主窗口

1.  图 2-2: 项目 #1 块图

1.  图 2-3: FPGA 构建过程

1.  图 2-4: iCEcube2 新项目窗口

1.  图 2-5: 将 Verilog 或 VHDL 源文件添加到项目中

1.  图 2-6: 在设备管理器中查看板卡连接

1.  图 2-7: Diamond Programmer 对话框

1.  图 2-8: Diamond Programmer 设备选择屏幕

1.  图 2-9: Diamond Programmer 设备属性窗口

1.  图 2-10: 故障排除 CHECK_ID 错误

1.  图 3-1: AND 门符号

1.  图 3-2: OR 门符号

1.  图 3-3: NOT 门符号

1.  图 3-4: XOR 门符号

1.  图 3-5: NAND 门符号

1.  图 3-6: A * B + A’ 的电路图

1.  图 3-7: A + (C * B’) 的电路图

1.  图 3-8: 三输入 LUT

1.  图 3-9: 项目 #2 块图

1.  图 4-1: D 触发器图示

1.  图 4-2: 时钟信号

1.  图 4-3: 触发器行为示例

1.  图 4-4: 另一个触发器行为示例

1.  图 4-5: 带时钟使能信号的触发器行为

1.  图 4-6: 四个触发器的链条

1.  图 4-7: 输入变化通过触发器链传播

1.  图 4-8: 使用触发器进行下降沿检测

1.  图 4-9: 项目 #3 块图

1.  图 4-10：实际 FPGA 中的 LUT 和触发器

1.  图 5-1：盒子里有什么？

1.  图 5-2：EDA Playground 主屏幕

1.  图 5-3：测试平台测试一个被测单元（UUT），以便你进行分析。

1.  图 5-4：与与门（AND gate）测试平台波形输出

1.  图 5-5：机械开关中的抖动

1.  图 5-6：项目 #4 块图

1.  图 5-7：去抖动仿真波形

1.  图 6-1：4-1 多路复用器（mux）

1.  图 6-2：1-4 解复用器（demux）

1.  图 6-3：移位寄存器

1.  图 6-4：3 位 LFSR

1.  图 6-5：项目 #5 块图

1.  图 6-6：修订后的项目 #5 块图

1.  图 6-7：双端口 RAM 块图

1.  图 6-8：FIFO 的高层块图

1.  图 6-9：详细的 FIFO 块图

1.  图 6-10：FIFO 标志示例

1.  图 7-1：设置时间（tsu）和保持时间（th）

1.  图 7-2：亚稳态条件

1.  图 7-3：亚稳态

1.  图 7-4：两个触发器之间的传播延迟

1.  图 7-5：通过流水线技术减少传播延迟

1.  图 7-6：通过双触发器解决亚稳态问题

1.  图 7-7：从较慢时钟域到较快时钟域的交叉

1.  图 7-8：从较快时钟域到较慢时钟域的失败交叉

1.  图 7-9：从较快时钟域到较慢时钟域的成功交叉

1.  图 8-1：旋转门的状态机

1.  图 8-2：具有两个 always 或过程块的状态机块图

1.  图 8-3：记忆游戏状态机图

1.  图 8-4：项目 #6 块图

1.  图 8-5：七段显示器

1.  图 8-6：在七段显示器上点亮数字 7

1.  图 9-1：通过 GUI 实例化块 RAM

1.  图 9-2：Cyclone V 产品线上的块 RAM

1.  图 9-3：模拟信号的数字采样

1.  图 9-4：DSP 原语的块图

1.  图 9-5：Cyclone V FPGA 上的 DSP 块

1.  图 9-6：使用 GUI 创建 DSP 块

1.  图 9-7：Cyclone V 产品线上的 PLL

1.  图 9-8：常见 PLL 信号

1.  图 9-9：常见的相位偏移

1.  图 9-10：使用 GUI 创建 PLL

1.  图 9-11：无效 PLL 设置的可操作反馈

1.  图 11-1：简化的 GPIO 块图

1.  图 11-2：标记的双向接口

1.  图 11-3：单端与差分接口的对比

1.  图 11-4：单倍数据率与双倍数据率

1.  图 11-5：并行接口与串行接口的对比

1.  图 11-6：使用曼彻斯特编码将时钟嵌入数据中

1.  图 11-7：简化的 SerDes 块图

1.  图 A-1：Nandland Go 开发板

1.  图 B-1：简历示例

1.  图 B-2：改进后的简历示例

# 表格列表

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 1-1：</samp> <samp class="SANS_Futura_Std_Book_11">FPGA、微控制器与 ASIC 的比较</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-1：</samp> <samp class="SANS_Futura_Std_Book_11">两输入与门的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-2：</samp> <samp class="SANS_Futura_Std_Book_11">OR 门的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-3：</samp> <samp class="SANS_Futura_Std_Book_11">NOT 门的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-4：</samp> <samp class="SANS_Futura_Std_Book_11">XOR 门的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-5：</samp> <samp class="SANS_Futura_Std_Book_11">NAND 门的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-6：</samp> <samp class="SANS_Futura_Std_Book_11">布尔代数符号</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-7：</samp> <samp class="SANS_Futura_Std_Book_11">A * B 的真值表</samp> + <samp class="SANS_Futura_Std_Book_11">A’</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-8：</samp> <samp class="SANS_Futura_Std_Book_11">A 的真值表</samp> + <samp class="SANS_Futura_Std_Book_11">(C * B’)</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 3-9：</samp> <samp class="SANS_Futura_Std_Book_11">项目 #2 的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 4-1：</samp> <samp class="SANS_Futura_Std_Book_11">创建锁存器的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 6-1：</samp> <samp class="SANS_Futura_Std_Book_11">4-1 多路选择器的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 6-2：</samp> <samp class="SANS_Futura_Std_Book_11">1-4 解复用器的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 6-3：</samp> <samp class="SANS_Futura_Std_Book_11">通过 UART 接收一个字节的数据</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 6-4：</samp> <samp class="SANS_Futura_Std_Book_11">通过 UART 发送一个字节的数据</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 6-5：</samp> <samp class="SANS_Futura_Std_Book_11">3 位 LFSR 的伪随机输出</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 6-6：</samp> <samp class="SANS_Futura_Std_Book_11">LED 选择</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 8-1：</samp> <samp class="SANS_Futura_Std_Book_11">模式存储示例</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 10-1：</samp> <samp class="SANS_Futura_Std_Book_11">3 位无符号与有符号十进制值</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 10-2：</samp> <samp class="SANS_Futura_Std_Book_11">无符号与有符号数据类型的 N 位大小</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 10-3：</samp> <samp class="SANS_Futura_Std_Book_11">全范围除法输入的预计算表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 10-4：</samp> <samp class="SANS_Futura_Std_Book_11">3 位无符号定点数的可能性</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 10-5：</samp> <samp class="SANS_Futura_Std_Book_11">3 位有符号定点数的可能性</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 11-1：</samp> <samp class="SANS_Futura_Std_Book_11">输出缓冲区的真值表</samp>

1.  <samp class="SANS_Futura_Std_Heavy_B_11">表 11-2：</samp> <samp class="SANS_Futura_Std_Book_11">曼彻斯特编码的真值表</samp>

# 指南

1.  封面

1.  标题页

1.  版权

1.  献词

1.  致谢

1.  介绍

1.  1. 认识 FPGA

1.  术语表

1.  索引

1.  内容开始

# 打印版的分页

1.  Cover Page

1.  xi

1.  xii

1.  xiii

1.  xiv

1.  xv

1.  iii

1.  iv

1.  v

1.  vii

1.  xvii

1.  xviii

1.  xix

1.  xx

1.  xxi

1.  xxii

1.  xxiii

1.  1

1.  2

1.  3

1.  4

1.  5

1.  6

1.  7

1.  8

1.  9

1.  10

1.  11

1.  12

1.  13

1.  14

1.  15

1.  16

1.  17

1.  18

1.  19

1.  20

1.  21

1.  22

1.  23

1.  24

1.  25

1.  26

1.  27

1.  28

1.  29

1.  31

1.  32

1.  33

1.  34

1.  35

1.  36

1.  37

1.  38

1.  39

1.  40

1.  41

1.  42

1.  43

1.  45

1.  46

1.  47

1.  48

1.  49

1.  50

1.  51

1.  52

1.  53

1.  54

1.  55

1.  56

1.  57

1.  58

1.  59

1.  60

1.  61

1.  62

1.  63

1.  64

1.  65

1.  67

1.  68

1.  69

1.  70

1.  71

1.  72

1.  73

1.  74

1.  75

1.  76

1.  77

1.  78

1.  79

1.  80

1.  81

1.  82

1.  83

1.  84

1.  85

1.  86

1.  87

1.  88

1.  89

1.  90

1.  91

1.  92

1.  93

1.  94

1.  95

1.  96

1.  97

1.  98

1.  99

1.  100

1.  101

1.  102

1.  103

1.  104

1.  105

1.  106

1.  107

1.  108

1.  109

1.  110

1.  111

1.  112

1.  113

1.  114

1.  115

1.  116

1.  117

1.  118

1.  119

1.  120

1.  121

1.  122

1.  123

1.  124

1.  125

1.  126

1.  127

1.  128

1.  129

1.  130

1.  131

1.  132

1.  133

1.  134

1.  135

1.  136

1.  137

1.  138

1.  139

1.  140

1.  141

1.  142

1.  143

1.  144

1.  145

1.  146

1.  147

1.  148

1.  149

1.  150

1.  152

1.  153

1.  154

1.  155

1.  156

1.  157

1.  158

1.  159

1.  160

1.  161

1.  162

1.  163

1.  164

1.  165

1.  166

1.  167

1.  168

1.  169

1.  170

1.  171

1.  172

1.  173

1.  174

1.  175

1.  177

1.  178

1.  179

1.  180

1.  181

1.  182

1.  183

1.  184

1.  185

1.  186

1.  187

1.  188

1.  189

1.  190

1.  191

1.  192

1.  193

1.  194

1.  195

1.  196

1.  197

1.  198

1.  199

1.  200

1.  201

1.  202

1.  203

1.  204

1.  205

1.  206

1.  207

1.  208

1.  209

1.  210

1.  211

1.  212

1.  213

1.  214

1.  215

1.  216

1.  217

1.  218

1.  219

1.  220

1.  221

1.  222

1.  223

1.  224

1.  225

1.  226

1.  227

1.  228

1.  229

1.  230

1.  231

1.  232

1.  233

1.  234

1.  235

1.  236

1.  237

1.  238

1.  239

1.  240

1.  241

1.  242

1.  243

1.  244

1.  245

1.  246

1.  247

1.  248

1.  249

1.  250

1.  251

1.  252

1.  253

1.  254

1.  255

1.  256

1.  257

1.  259

1.  260

1.  261

1.  262

1.  263

1.  264

1.  265

1.  266

1.  267

1.  269

1.  270

1.  271

1.  272

1.  273

1.  274

1.  275

1.  277

1.  278

1.  279

1.  280

1.  281

1.  282

1.  283
