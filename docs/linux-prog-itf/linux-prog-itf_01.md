## 第一章 历史与标准

Linux 是 UNIX 系列操作系统的成员。从计算的角度来看，UNIX 有着悠久的历史。本章的第一部分简要概述了这一历史。我们首先介绍了 UNIX 系统和 C 编程语言的起源，然后讨论了两股关键潮流，它们促成了今天的 Linux 系统的形成：GNU 项目和 Linux 内核的发展。

UNIX 系统的一个显著特点是它的开发并未由单一的供应商或组织控制。相反，许多商业和非商业团体共同推动了它的发展。这段历史导致了 UNIX 系统中加入了许多创新特性，但也带来了一个负面后果，即 UNIX 实现随着时间的推移逐渐分化，因此编写能在所有 UNIX 实现中运行的应用程序变得越来越困难。这促使了 UNIX 实现的标准化进程，我们将在本章的第二部分讨论这一点。

### 注意

UNIX 术语有两种常见的定义。其中一种定义指通过了单一 UNIX 规范的官方一致性测试的操作系统，因此被 The Open Group（UNIX 商标的持有者）官方授予“UNIX”品牌的权利。写作时，尚无自由 UNIX 实现（如 Linux 和 FreeBSD）获得这一品牌。

另一个常见的 UNIX 术语含义指的是那些看起来和行为像经典 UNIX 系统的操作系统（即原始的贝尔实验室 UNIX 及其后来的主要分支，如 System V 和 BSD）。根据这个定义，Linux 通常被认为是 UNIX 系统（现代的 BSD 系统也是如此）。尽管我们在本书中密切关注单一 UNIX 规范，但我们将采用第二种 UNIX 定义，因此我们通常会说类似于“Linux，像其他 UNIX 实现一样……”的话。

## UNIX 和 C 的简史

第一个 UNIX 实现由 Ken Thompson 于 1969 年在贝尔实验室（电话公司 AT&T 的一个部门）开发。它是用汇编语言为数字公司（Digital）的 PDP-7 小型计算机编写的。UNIX 这个名字是对 MULTICS（*Multiplexed Information and Computing Service*）的双关语，后者是 AT&T 与麻省理工学院（MIT）和通用电气公司（General Electric）合作的早期操作系统项目的名称。（AT&T 在项目初期未能开发出有经济价值的系统后已退出该项目。）Thompson 从 MULTICS 中借鉴了若干概念，包括树状文件系统、一个用于解释命令的独立程序（shell），以及文件作为无结构字节流的概念。

1970 年，UNIX 在新购置的数字 PDP-11 迷你计算机上用汇编语言重写，当时这是一台新型且强大的机器。今天，大多数 UNIX 实现中仍能找到一些 PDP-11 遗留的痕迹，包括 Linux。

不久之后，丹尼斯·里奇（Dennis Ritchie），汤普森在贝尔实验室的同事之一，也是 UNIX 的早期合作者，设计并实现了 C 编程语言。这是一个渐进的过程；C 语言继承了早期的解释型语言 B。B 最初由汤普森实现，并从一个更早的编程语言 BCPL 中汲取了许多思想。到 1973 年，C 语言已经成熟到足以将 UNIX 内核几乎完全用这种新语言重写。于是，UNIX 成为最早使用高级语言编写的操作系统之一，这一事实使得后续向其他硬件架构的移植成为可能。

C 语言的起源解释了为什么它及其后代 C++今天成为广泛使用的系统编程语言。之前广泛使用的语言是为了其他目的设计的：FORTRAN 用于工程师和科学家执行的数学任务；COBOL 用于处理流式记录数据的商业系统。C 填补了一个此前空白的市场，并且与 FORTRAN 和 COBOL（后者是由大型委员会设计的）不同，C 的设计源于几个为实现一个共同目标而工作的个人的想法和需求：开发一个用于实现 UNIX 内核和相关软件的高级语言。与 UNIX 操作系统本身一样，C 是由专业程序员为自己的使用设计的。最终的语言是小巧、有效、强大、简洁、模块化、务实并且在设计上保持一致。

#### UNIX 第一版到第六版

在 1969 年到 1979 年间，UNIX 经历了多个版本发布，称为*版本*。这些发布本质上是 AT&T 不断发展中的开发版本的快照。[Salus, 1994]记录了 UNIX 前六个版本的日期：

+   第一版，1971 年 11 月：此时，UNIX 已经在 PDP-11 上运行，并且已经有了 FORTRAN 编译器以及许多今天仍在使用的程序版本，包括*ar*、*cat*、*chmod*、*chown*、*cp*、*dc*、*ed*、*find*、*ln*、*ls*、*mail*、*mkdir*、*mv*、*rm*、*sh*、*su*和*who*。

+   第二版，1972 年 6 月：此时，UNIX 已经在 AT&T 的十台机器上安装运行。

+   第三版，1973 年 2 月：这一版包括了 C 编译器和管道的首次实现。

+   第四版，1973 年 11 月：这是第一版几乎完全用 C 语言编写的版本。

+   第五版，1974 年 6 月：此时，UNIX 已经在超过 50 个系统上安装运行。

+   第六版，1975 年 5 月：这是第一版被广泛应用于 AT&T 之外的版本。

在这些发布的过程中，UNIX 的使用和声誉开始传播，首先是在 AT&T 内部，然后扩展到外部。对这种日益增长的认知做出重要贡献的是在广泛阅读的期刊《ACM 通讯》中发表的关于 UNIX 的论文（[Ritchie & Thompson, 1974]）。

此时，AT&T 拥有美国电话系统的政府授权垄断。AT&T 与美国政府的协议条款禁止其销售软件，这意味着它不能将 UNIX 作为产品出售。从 1974 年第五版开始，尤其是第六版，AT&T 将 UNIX 许可给大学使用，收取象征性的分发费用。大学版包括文档和内核源代码（当时约 10,000 行）。

AT&T 将 UNIX 发布到大学极大地促进了该操作系统的普及和使用，到 1977 年，UNIX 已经在约 500 个站点上运行，包括美国的 125 所大学以及其他几个国家。UNIX 为大学提供了一种互动式的多用户操作系统，它便宜且强大，而当时商业操作系统非常昂贵。它还为大学计算机科学系提供了一个真实操作系统的源代码，学生们可以修改这些代码并进行学习和实验。这些学生中，一些人掌握了 UNIX 知识，成为了 UNIX 的布道者，另一些人则创办或加入了出售便宜计算机工作站的初创公司，这些工作站运行的是容易移植的 UNIX 操作系统。

#### BSD 和 System V 的诞生

1979 年 1 月发布了第七版 UNIX，它提高了系统的可靠性，并提供了增强的文件系统。此版本还包含许多新工具，包括 *awk*、*make*、*sed*、*tar*、*uucp*、Bourne shell 以及 FORTRAN 77 编译器。第七版的发布也具有重要意义，因为从这一点开始，UNIX 分化为两个重要的变种：BSD 和 System V，我们现在简要描述其起源。

汤普森于 1975/1976 学年作为访问教授在加利福尼亚大学伯克利分校工作，这是他毕业的大学。在那里，他与几位研究生合作，为 UNIX 添加了许多新功能。（其中一位学生，比尔·乔伊，后来共同创办了 Sun Microsystems，这是 UNIX 工作站市场的早期参与者。）随着时间的推移，伯克利开发了许多新工具和功能，包括 *C shell*、*vi* 编辑器、改进的文件系统（*伯克利快速文件系统*）、*sendmail*、Pascal 编译器以及在新款 Digital VAX 架构上实现的虚拟内存管理。

在伯克利软件发行版（BSD）这个名称下，这个版本的 UNIX 及其源代码开始广泛分发。第一个完整的发行版是 1979 年 12 月的 3BSD。（伯克利之前的版本——BSD 和 2BSD——是伯克利制作的新工具的发行版，而不是完整的 UNIX 发行版。）

1983 年，加利福尼亚大学伯克利分校的*计算机系统研究小组*发布了 4.2BSD。这个版本之所以重要，是因为它包含了完整的 TCP/IP 实现，包括套接字应用程序编程接口（API）和各种网络工具。4.2BSD 及其前身 4.1BSD 在世界各地的大学中得到了广泛分发。它们也成为了 SunOS（1983 年首次发布）的基础，SunOS 是 Sun 公司销售的 UNIX 变种。其他重要的 BSD 发行版包括 1986 年的 4.3BSD，以及 1993 年的最终版本 4.4BSD。

### 注

UNIX 系统首次移植到 PDP-11 以外的硬件发生在 1977 年和 1978 年，当时 Dennis Ritchie 和 Steve Johnson 将其移植到 Interdata 8/32，而澳大利亚卧龙岗大学的 Richard Miller 同时将其移植到 Interdata 7/32。伯克利的数字 VAX 移植基于 John Reiser 和 Tom London 早期（1978 年）的移植。这个版本被称为 32V，本质上与 PDP-11 的第七版相同，唯一的区别是更大的地址空间和更宽的数据类型。

与此同时，美国的反垄断法迫使 AT&T 解体（法律程序始于 1970 年代中期，解体在 1982 年生效），结果是，AT&T 不再垄断电话系统，允许其销售 UNIX。这导致了 1981 年 System III（三）的发布。System III 是由 AT&T 的 UNIX 支持小组（USG）制作的，该小组雇佣了数百名开发者来增强 UNIX 并开发 UNIX 应用程序（特别是文档处理软件和软件开发工具）。System V（五）的第一个版本于 1983 年发布，一系列的版本最终导致了 1989 年的最终版本 System V Release 4（SVR4），到那时，System V 已经融入了来自 BSD 的许多特性，包括网络功能。System V 被许多商业厂商授权使用，成为它们 UNIX 实现的基础。

因此，除了各种在学术界流传的 BSD 发行版外，到 1980 年代末，UNIX 已经出现在各种硬件上的多个商业实现中。这些实现包括 Sun 的 SunOS 和后来的 Solaris、Digital 的 Ultrix 和 OSF/1（如今经过一系列更名和收购后，变成了 HP Tru64 UNIX）、IBM 的 AIX、惠普（HP）的 HP-UX、NeXT 的 NeXTStep、苹果 Macintosh 的 A/UX 以及微软和 SCO 为 Intel x86-32 架构推出的 XENIX。（在本书中，Linux 在 x86-32 上的实现被称为 Linux/x86-32。）这种情况与当时典型的专有硬件/操作系统场景形成了鲜明对比，在这些场景中，每个厂商通常只生产一种或几种专有计算机芯片架构，并在这些架构上销售自家的专有操作系统。大多数厂商系统的专有性质意味着购买者被绑定于一个厂商。由于需要移植现有的应用程序并重新培训员工，切换到另一个专有操作系统和硬件平台可能会非常昂贵。这一因素，加上来自多家厂商的廉价单用户 UNIX 工作站的出现，从商业角度看，使得便携式 UNIX 系统越来越具有吸引力。

## Linux 简史

*Linux* 这个术语通常用来指代整个类 UNIX 操作系统，其中 Linux 内核是其一部分。然而，这实际上是一个误用，因为许多典型商业 Linux 发行版中的关键组件实际上来自一个早于 Linux 创立几年的项目。

### GNU 项目

1984 年，理查德·斯托曼（Richard Stallman），一位在 MIT 工作的极具才华的程序员，开始着手创建一个“自由”的 UNIX 实现。斯托曼的观点是道德上的，*自由* 是从法律意义上定义的，而非经济意义上的（见 [`www.gnu.org/philosophy/free-sw.html`](http://www.gnu.org/philosophy/free-sw.html)）。然而，斯托曼所描述的法律自由带来的隐含后果是，像操作系统这样的软件将以零成本或非常低的成本提供。

斯托曼反对计算机厂商对专有操作系统施加的法律限制。这些限制意味着，计算机软件的购买者通常无法看到他们所购买软件的源代码，当然也无法复制、修改或重新分发它。他指出，这样的框架鼓励程序员相互竞争并囤积他们的作品，而不是合作和共享。 

为了应对这一点，斯塔尔曼启动了 GNU 项目（这是一个递归定义的首字母缩写，代表“GNU 不是 UNIX”），旨在开发一个完整的、自由可用的类 UNIX 系统，包含内核和所有相关的软件包，并鼓励其他人加入。1985 年，斯塔尔曼成立了自由软件基金会（FSF），这是一个支持 GNU 项目以及自由软件开发的非营利组织。

### 注意

当 GNU 项目启动时，BSD 并不像斯塔尔曼所指的那样是自由的。使用 BSD 仍然需要 AT&T 的许可，用户不能自由修改和再分发作为 BSD 一部分的 AT&T 代码。

GNU 项目的一个重要成果是开发了 GNU *通用公共许可证*（GPL），它是斯塔尔曼关于自由软件的理念的法律体现。许多 Linux 发行版中的软件，包括内核，都是在 GPL 或其他类似许可证下授权的。根据 GPL 许可的软件下载后，必须以源代码形式提供，并且根据 GPL 条款自由分发。对 GPL 授权软件的修改是被允许的，但任何修改后的软件分发也必须遵守 GPL 条款。如果修改后的软件以可执行文件形式分发，作者还必须允许任何接收者以不高于分发成本的费用获得修改后的源代码。GPL 的第一个版本于 1989 年发布。目前的许可证版本 3 于 2007 年发布，许可证版本 2 于 1991 年发布，仍在广泛使用，并且是 Linux 内核使用的许可证。（关于各种自由软件许可证的讨论可以参考 [St. Laurent, 2004] 和 [Rosen, 2005]。）

GNU 项目最初并没有生产一个可用的 UNIX 内核，但确实生产了大量其他程序。由于这些程序是为了在类 UNIX 操作系统上运行而设计的，它们可以，也确实被用于现有的 UNIX 实现，并且在某些情况下，甚至被移植到其他操作系统上。GNU 项目生产的一些较为著名的程序包括 *Emacs* 文本编辑器、*GCC*（最初是 GNU C 编译器，现在已更名为 GNU 编译器集合，包含 C、C++ 及其他语言的编译器）、*bash* shell 和 *glibc*（GNU C 库）。

到 1990 年代初期，GNU 项目几乎已完成了一个系统，唯一缺少的就是一个可用的 UNIX 内核。GNU 项目开始了一个雄心勃勃的内核设计工作，称为 GNU/HURD，基于 Mach 微内核。然而，HURD 离能够发布的状态还远远不够。（截至目前，HURD 仍在开发中，目前仅能在 x86-32 架构上运行。）

### 注意

因为构成通常所称的 Linux 系统的大部分程序代码实际上源自 GNU 项目，斯托曼更倾向于使用术语 *GNU/Linux* 来指代整个系统。关于命名（Linux 与 GNU/Linux）的问题在自由软件社区中引发了一些争论。由于本书主要关注 Linux 内核的 API，我们通常使用术语 *Linux*。

舞台已经搭建完毕。所需要的只是一个可用的内核，与 GNU 项目已完成的其他 UNIX 系统相配合。

### Linux 内核

1991 年，芬兰赫尔辛基大学的学生林纳斯·托瓦尔兹受到启发，为他的英特尔 80386 PC 编写一个操作系统。在学习过程中，托瓦尔兹接触到了 Minix，这是一个由荷兰大学教授安德鲁·塔能鲍姆在 1980 年代中期开发的小型 UNIX 类操作系统内核。塔能鲍姆将 Minix（包含源代码）作为教学工具提供，用于大学课程中的操作系统设计教学。Minix 内核可以在 386 系统上构建和运行。然而，由于其主要目的是作为教学工具，它被设计为尽可能独立于硬件架构，并未充分利用 386 处理器的能力。

因此，托瓦尔兹开始着手一个项目，旨在创建一个高效、功能齐全的 UNIX 内核，以便在 386 上运行。几个月后，托瓦尔兹开发了一个基本的内核，使他能够编译并运行各种 GNU 程序。然后，在 1991 年 10 月 5 日，托瓦尔兹请求其他程序员的帮助，并在 *comp.os.minix* Usenet 新闻组中发布了以下现在广为引用的版本 0.02 的内核公告：

> 你是否怀念 Minix-1.1 的美好时光，那时的男儿汉都能编写自己的设备驱动程序？你是否没有一个合适的项目，正急于在一个可以修改以适应自己需求的操作系统上动手？当 Minix 一切顺利时，你是否感到沮丧？不再需要熬夜才能让一个炫酷的程序正常工作？那么这篇帖子或许正适合你。正如我一个月前提到的，我正在为 AT-386 计算机开发一个免费的 Minix 类似操作系统。它终于达到了一个可用的阶段（虽然根据你的需求可能会有所不同），并且我愿意公开源代码，供更广泛的分发。这只是版本 0.02 ……但我已经成功运行了 bash、gcc、gnu-make、gnu-sed、compress 等程序。

按照 UNIX 克隆系统通常以 *X* 结尾的命名传统，内核最终被命名为 Linux。最初，Linux 采用了更为严格的许可协议，但托瓦尔兹很快将其改为基于 GNU GPL 许可协议。

支持的呼声证明是有效的。其他程序员加入了 Torvalds，参与了 Linux 的开发，增加了各种功能，如改进的文件系统、网络支持、设备驱动程序和多处理器支持。到 1994 年 3 月，开发人员已经能够发布版本 1.0。Linux 1.2 于 1995 年 3 月发布，Linux 2.0 于 1996 年 6 月发布，Linux 2.2 于 1999 年 1 月发布，Linux 2.4 于 2001 年 1 月发布。2.5 开发内核的工作始于 2001 年 11 月，并于 2003 年 12 月发布了 Linux 2.6。

#### 插曲：BSD

值得注意的是，在 1990 年代早期，另一个免费的 UNIX 已经可以在 x86-32 上使用。Bill 和 Lynne Jolitz 开发了一个已经成熟的 BSD 系统的 x86-32 移植版本，称为 386/BSD。这个移植版基于 BSD Net/2 版本（1991 年 6 月），它是 4.3BSD 源代码的一个版本，其中所有剩余的 AT&T 专有源代码要么已被替换，要么在六个无法轻易重写的源文件的情况下已被移除。Jolitz 夫妇将 Net/2 代码移植到 x86-32 上，重写了缺失的源文件，并于 1992 年 2 月发布了 386/BSD 的第一个版本（版本 0.0）。

在初期的成功和流行浪潮之后，386/BSD 的开发因各种原因滞后。面对日益增加的补丁积压，两个替代的开发小组很快出现，他们基于 386/BSD 创建了自己的发行版：NetBSD，强调对广泛硬件平台的移植性；FreeBSD，强调性能，是现代 BSD 中最为广泛使用的版本。NetBSD 的第一个版本是 0.8，于 1993 年 4 月发布。FreeBSD 的第一个 CD-ROM（版本 1.0）于 1993 年 12 月发布。另一个 BSD，OpenBSD，于 1996 年出现（作为初始版本 2.0），并从 NetBSD 项目中分支出来。OpenBSD 强调安全性。2003 年中期，一个新的 BSD——DragonFly BSD 出现，它从 FreeBSD 4.*x*分裂出来。DragonFly BSD 与 FreeBSD 5.*x*在对称多处理（SMP）架构的设计上采取了不同的方法。

大概没有关于 1990 年代早期 BSD 的讨论会完整，不提到 UNIX 系统实验室（USL，AT&T 子公司，成立开发和营销 UNIX）与伯克利之间的诉讼。1992 年初，伯克利软件设计公司（BSDi，现在是 Wind River 的一部分）开始分发基于 Net/2 版本和 Jolitzes 的 386/BSD 扩展的商业支持 BSD UNIX——BSD/OS。BSDi 以 995 美元的价格分发二进制文件和源代码，并建议潜在客户拨打他们的电话号码 1-800-ITS-UNIX。

1992 年 4 月，USL 对 BSDi 提起诉讼，试图阻止 BSDi 销售 USL 声称仍然受到其专有源代码和商业机密约束的产品。USL 还要求 BSDi 停止使用误导性的电话号码。诉讼最终扩展至加利福尼亚大学，法院最终驳回了 USL 的除两个之外的所有诉讼请求，随后加利福尼亚大学对 USL 提出反诉，大学声称 USL 未对其在 System V 中使用 BSD 代码给予应有的认可。

在这些诉讼尚未解决期间，USL 被 Novell 收购，Novell 的 CEO 已故的 Ray Noorda 公开表示，他更愿意在市场上竞争，而不是在法庭上竞争。最终，1994 年 1 月达成了和解协议，要求加利福尼亚大学从 Net/2 版本中删除 18,000 个文件中的 3 个文件，对其他一些文件做出一些小的修改，并在大约 70 个文件中添加 USL 的版权声明，而这些文件大学仍然可以继续自由分发。经过修改的系统于 1994 年 6 月作为 4.4BSD-Lite 发布。（大学的最后一个版本是 1995 年 6 月发布的 4.4BSD-Lite 版本 2。）此时，法律和解协议的条款要求 BSDi、FreeBSD 和 NetBSD 将其 Net/2 基础替换为修改后的 4.4BSD-Lite 源代码。正如[McKusick 等，1996]所指出的，尽管这导致 BSD 衍生版本的开发出现了一些延迟，但也有一个积极的效果，那就是这些系统重新与大学计算机系统研究小组自 Net/2 发布以来三年的开发工作进行了同步。

#### Linux 内核版本号

和大多数自由软件项目一样，Linux 遵循"尽早发布，频繁发布"的模式，因此新的内核版本会频繁出现（有时甚至是每天）。随着 Linux 用户基础的增加，发布模式也进行了调整，以减少对现有用户的干扰。具体来说，在 Linux 1.0 发布后，内核开发者采用了一个版本编号方案，每次发布的版本号格式为*x.y.z*：*x*代表主版本，*y*代表该主版本中的次版本，*z*代表次版本的修订（次要改进和错误修复）。

在这一模型下，总是有两个内核版本在开发中：一个是用于生产系统的 *稳定* 分支，具有偶数次要版本号；另一个是更为波动的 *开发* 分支，具有下一个更高的奇数次要版本号。这一理论——尽管在实际操作中并不总是严格遵循——是所有新特性应当添加到当前的开发内核系列中，而稳定内核系列中的新修订应当仅限于次要改进和漏洞修复。当当前的开发分支被认为适合发布时，它会成为新的稳定分支并分配一个偶数次要版本号。例如，2.3.*z* 开发内核分支导致了 2.4 稳定内核分支的发布。

在 2.6 内核发布后，开发模型发生了变化。这一变化的主要动因源自于稳定内核发布之间较长间隔所带来的问题和挫折。（从 Linux 2.4.0 发布到 2.6.0 发布几乎经历了三年的时间。）关于如何调整这一模型的讨论时常发生，但核心细节保持不变，如下所示：

+   不再区分稳定内核和开发内核。每个新的 2.6.*z* 版本都可能包含新特性，并经历一个生命周期，首先是新特性的添加，然后通过多个候选发布版本的过程中进行稳定化。当一个候选版本被认为足够稳定时，它将作为 2.6.*z* 内核发布。发布周期通常约为三个月。

+   有时，稳定的 2.6.*z* 版本可能需要小的补丁来修复漏洞或安全问题。如果这些修复具有足够高的优先级，并且补丁被认为是简单且“显然”正确的，那么，开发团队将不会等待下一个 2.6.*z* 发布版本，而是应用补丁以创建一个形式为 2.6.*z.r* 的版本，其中 *r* 是该 2.6.*z* 内核的一个次要修订版本的顺序号。

+   额外的责任被转移到发行版供应商身上，以确保与发行版一起提供的内核的稳定性。

后续章节有时会注明某个特定 API 变更（例如新的或修改过的系统调用）发生的内核版本。虽然在 2.6.*z* 系列之前，大多数内核更改发生在奇数编号的开发分支中，但我们通常会引用该变更首次出现在的稳定内核版本，因为大多数应用开发人员通常会使用稳定内核，而不是开发内核。在许多情况下，手册页会注明某个特性首次出现或发生变化的确切开发内核版本。

对于出现在 2.6.*z* 内核系列中的更改，我们会注明具体的内核版本。当我们说某个特性在 2.6 内核中是新的时，若没有指定 *z* 修订版本号，我们指的是该特性已在 2.5 开发内核系列中实现，并且首次出现在 2.6.0 稳定内核版本中。

### 注：

截至写作时，2.4 稳定版的 Linux 内核仍然得到维护者的支持，维护者会将重要的补丁和错误修复集成进来，并定期发布新版本。这使得已经安装的系统能够继续使用 2.4 内核，而无需强制升级到新的内核系列（这在某些情况下可能需要进行大量工作）。

#### 移植到其他硬件架构

在 Linux 初期的开发过程中，高效地在 Intel 80386 上实现是主要目标，而不是移植到其他处理器架构。然而，随着 Linux 的日益流行，针对其他处理器架构的移植开始出现，最早是对 Digital Alpha 芯片的移植。Linux 移植的硬件架构列表不断增长，包括 x86-64、摩托罗拉/IBM PowerPC 和 PowerPC64、Sun SPARC 和 SPARC64（UltraSPARC）、MIPS、ARM（Acorn）、IBM zSeries（以前的 System/390）、Intel IA-64（Itanium；见 [Mosberger & Eranian, 2002]）、日立 SuperH、HP PA-RISC 和摩托罗拉 68000。

#### Linux 发行版

精确地说，*Linux* 一词仅指由 Linus Torvalds 和其他人开发的内核。然而，*Linux* 这个术语通常用来指代内核，以及一系列其他软件（工具和库），这些软件共同构成一个完整的操作系统。在 Linux 的早期，用户需要自行组装所有这些软件，创建文件系统，并正确地将所有软件放置和配置到该文件系统上。这要求用户花费大量的时间和专业知识。因此，Linux 发行商市场应运而生，他们创建了软件包（*发行版*）来自动化大部分安装过程，创建文件系统并安装内核和其他必要的软件。

最早的发行版出现在 1992 年，包括 MCC Interim Linux（曼彻斯特计算中心，英国）、TAMU（德州农工大学）和 SLS（SoftLanding Linux System）。最古老的存活商业发行版 Slackware 出现于 1993 年。非商业的 Debian 发行版大约在同一时间出现，SUSE 和 Red Hat 很快跟进。现在非常流行的 Ubuntu 发行版首次出现于 2004 年。如今，许多发行版公司也雇佣程序员，积极贡献现有的自由软件项目或发起新的项目。

## 标准化

到 1980 年代末期，广泛的 UNIX 实现种类也带来了缺点。一些 UNIX 实现基于 BSD，另一些基于 System V，还有一些则从这两种变体中汲取特性。此外，每个商业供应商都为其自己的实现添加了额外的功能。结果是，将软件和人员从一个 UNIX 实现迁移到另一个实现变得越来越困难。这个情况导致了强烈的标准化压力，旨在对 C 编程语言和 UNIX 系统进行标准化，以便更容易地将应用程序从一个系统移植到另一个系统。接下来我们将介绍最终形成的标准。

### C 程序设计语言

到 1980 年代初期，C 语言已经存在了十年，并且在各种 UNIX 系统和其他操作系统上得到了实现。由于一些语言功能的细节在现有的事实标准《C 程序设计语言》中没有明确说明，因此不同实现之间出现了小的差异。（这本书的较旧 C 语法有时被称为*传统 C*或*K&R C*。）此外，1985 年 C++的出现突显了可以对 C 进行的一些改进和添加，而不会破坏现有的程序，特别是函数原型、结构赋值、类型限定符（*const*和*volatile*）、枚举类型和*void*关键字。

这些因素推动了 C 标准化的进程，最终在 1989 年达成了美国国家标准协会（ANSI）C 标准（X3.159-1989）的批准，随后于 1990 年作为国际标准组织（ISO）标准（ISO/IEC 9899:1990）获得通过。除了定义 C 语言的语法和语义外，这一标准还描述了标准 C 库的操作，包括*stdio*函数、字符串处理函数、数学函数、各种头文件等。这个版本的 C 通常被称为*C89*或（较少称为）*ISO C90*，并且在 Kernighan 和 Ritchie 的《C 程序设计语言》第二版（1988 年）中有详细描述。

C 标准的修订版于 1999 年由 ISO 通过（ISO/IEC 9899:1999；见[`www.open-std.org/jtc1/sc22/wg14/www/standards`](http://www.open-std.org/jtc1/sc22/wg14/www/standards)）并获得批准。这个标准通常被称为 C99，包含了对语言及其标准库的一系列更改。这些更改包括添加*long long*和布尔数据类型、C++风格的（//）注释、限制指针以及可变长度数组。（在写作时，C 标准的进一步修订工作正在进行中，非正式地称为 C1X。预计新标准将在 2011 年获得批准。）

C 标准与任何操作系统的细节是独立的；也就是说，它们与 UNIX 系统没有绑定。这意味着，使用标准 C 库编写的 C 程序应该能够移植到任何提供 C 实现的计算机和操作系统上。

### 注意

历史上，C89 通常被称为*ANSI C*，这个术语有时仍然以这种含义使用。例如，*gcc*就使用了这个含义；它的-*ansi*限定符意味着“支持所有 ISO C90 程序”。然而，我们避免使用这个术语，因为它现在有些模糊。自从 ANSI 委员会采纳了 C99 修订版后，严格来说，ANSI C 现在指的是 C99。

### 第一个 POSIX 标准

POSIX 这个术语（即*可移植操作系统接口*的缩写）指的是在电气和电子工程师学会（IEEE）的支持下开发的一组标准，特别是其可移植应用标准委员会（PASC，[`www.pasc.org/`](http://www.pasc.org/)）。PASC 标准的目标是促进源代码级别的应用程序可移植性。

### 注意

POSIX 这个名字是由理查德·斯托尔曼（Richard Stallman）建议的。最后的*X*是因为大多数 UNIX 变种的名称以*X*结尾。标准指出，这个名字应该发音为“pahz-icks”，类似于“positive”。

对我们来说，最有趣的 POSIX 标准是第一个 POSIX 标准，称为 POSIX.1（或者更完整地说，POSIX 1003.1），以及随后的 POSIX.2 标准。

#### POSIX.1 和 POSIX.2

POSIX.1 在 1988 年成为 IEEE 标准，并在 1990 年经过小幅修订后被采纳为 ISO 标准（ISO/IEC 9945-1:1990）。(原始的 POSIX 标准无法在线获取，但可以从 IEEE 购买，网址为[`www.ieee.org/`](http://www.ieee.org/)。)

### 注意

POSIX.1 最初基于一个较早的（1984 年）由 UNIX 厂商协会*/usr/group*制定的非官方标准。

POSIX.1 文档定义了一组服务的 API，这些服务应该由符合标准的操作系统提供给程序。实现这一点的操作系统可以获得*POSIX.1 符合性认证*。

POSIX.1 基于 UNIX 系统调用和 C 库函数 API，但它并不要求任何特定的实现与这个接口相关联。这意味着，任何操作系统都可以实现这个接口，而不仅仅是 UNIX 操作系统。事实上，一些厂商已经在其专有操作系统中添加了 API，使其符合 POSIX.1 标准，同时在很大程度上保持底层操作系统不变。

对原始 POSIX.1 标准的若干扩展也非常重要。IEEE POSIX 1003.1b（POSIX.1b，前称 POSIX.4 或 POSIX 1003.4）于 1993 年获得批准，包含了一系列对基础 POSIX 标准的实时扩展。IEEE POSIX 1003.1c（POSIX.1c）于 1995 年获得批准，定义了 POSIX 线程。1996 年，发布了修订版的 POSIX.1 标准（ISO/IEC 9945-1:1996），核心文本保持不变，但纳入了实时和线程扩展。IEEE POSIX 1003.1g（POSIX.1g）定义了网络 API，包括套接字。IEEE POSIX 1003.1d（POSIX.1d）于 1999 年获得批准，POSIX.1j 于 2000 年获得批准，定义了 POSIX 基础标准的附加实时扩展。

### 注释

POSIX.1b 的实时扩展包括文件同步、异步 I/O、进程调度、高精度时钟和定时器、以及使用信号量、共享内存和消息队列的进程间通信。前缀*POSIX*常用于三种进程间通信方法，以区别于类似但较老的 System V 信号量、共享内存和消息队列。

相关标准 POSIX.2（1992 年，ISO/IEC 9945-2:1993）对 Shell 和各种 UNIX 工具进行了标准化，包括 C 编译器的命令行界面。

#### FIPS 151-1 和 FIPS 151-2

FIPS 是“联邦信息处理标准”（Federal Information Processing Standard）的缩写，指的是美国政府为其计算机系统采购所制定的一系列标准。1989 年，FIPS 151-1 标准发布。该标准基于 1988 年的 IEEE POSIX.1 标准和草案中的 ANSI C 标准。FIPS 151-1 与 POSIX.1（1988 年版）之间的主要区别在于，FIPS 标准要求一些 POSIX.1 中作为可选项的特性。由于美国政府是计算机系统的主要采购方，大多数计算机供应商确保其 UNIX 系统符合 FIPS 151-1 版的 POSIX.1 标准。

FIPS 151-2 与 1990 年版的 ISO POSIX.1 标准对齐，但其他方面没有变化。现已过时的 FIPS 151-2 在 2000 年 2 月被撤销作为标准。

### X/Open 公司和 The Open Group

X/Open 公司是由一组国际计算机供应商组成的联合体，旨在采用和改进现有标准，制定一套全面、一致的开放系统标准。它发布了*X/Open 可移植性指南*，该系列指南基于 POSIX 标准，主要用于指导系统的可移植性。该指南的第一次重要发布是 1989 年的 Issue 3（XPG3），随后是 1992 年的 XPG4。XPG4 在 1994 年进行了修订，发布了 XPG4 版本 2，该标准还纳入了 AT&T 的 System V 接口定义第 3 版的关键部分，详见实现标准。这一修订也被称为*Spec 1170*，其中 1170 指的是标准所定义的*接口*—函数、头文件和命令的数量。

当 Novell 于 1993 年初收购了 AT&T 的 UNIX 系统业务，并在之后将其出售时，它将 UNIX 商标的使用权转交给了 X/Open。（这项转让计划在 1993 年宣布，但由于法律要求，转让推迟到了 1994 年初。）XPG4 版本 2 随后重新包装为*单一 UNIX 规范*（SUS，有时也称为 SUSv1），并且也被称为*UNIX 95*。这次重新包装包括了 XPG4 版本 2、X/Open Curses 第 4 版第 2 版规范以及 X/Open 网络服务（XNS）第 4 版规范。单一 UNIX 规范的版本 2（SUSv2， [`www.unix.org/version2/online.html`](http://www.unix.org/version2/online.html)）于 1997 年发布，符合此规范的 UNIX 实现可以自称为*UNIX 98*。（该标准有时也被称为 XPG5。）

1996 年，X/Open 与*开放软件基金会*（OSF）合并，成立了*The Open Group*。几乎所有参与 UNIX 系统的公司或组织现在都是 The Open Group 的成员，The Open Group 继续开发 API 标准。

### 注意

OSF 是 1980 年代末 UNIX 战争期间形成的两个供应商联盟之一。OSF 包括了 Digital、IBM、HP、Apollo、Bull、Nixdorf 和 Siemens 等公司。OSF 的成立主要是响应 AT&T（UNIX 的创始者）和 Sun（UNIX 工作站市场中最强大的参与者）之间的商业联盟所带来的威胁。因此，AT&T、Sun 及其他公司组成了竞争对手*UNIX 国际*联盟。

### SUSv3 与 POSIX.1-2001

从 1999 年开始，IEEE、The Open Group 和 ISO/IEC 联合技术委员会 1（JTC1）在*奥斯汀公共标准修订小组*（CSRG， [`www.opengroup.org/austin/`](http://www.opengroup.org/austin/)）的合作下，旨在修订和整合 POSIX 标准和单一 UNIX 规范。（奥斯汀小组之所以得名，是因为它的首次会议于 1998 年 9 月在德克萨斯州奥斯汀举行。）这导致了 POSIX 1003.1-2001 的通过，有时简称为 POSIX.1-2001，且于 2001 年 12 月正式批准（随后作为 ISO 标准，ISO/IEC 9945:2002 也被批准）。

POSIX 1003.1-2001 替代了 SUSv2、POSIX.1、POSIX.2 以及其他一系列早期的 POSIX 标准。该标准也被称为单一 UNIX 规范版本 3，在本书余下的部分中，我们通常将其称为*SUSv3*。

SUSv3 基础规范由大约 3700 页组成，分为以下四个部分：

+   *基本定义*（XBD）：此部分包含了定义、术语、概念以及头文件内容的规范。共提供了 84 个头文件规范。

+   *系统接口*（XSH）：这一部分开始时提供了各种有用的背景信息。其主体部分包括对各种函数的规范（这些函数在特定的 UNIX 实现中作为系统调用或库函数实现）。这一部分包括了 1123 个系统接口。

+   *Shell 和工具*（XCU）：这一部分规定了 shell 和各种 UNIX 命令的操作。此部分规范了 160 个工具。

+   *理由*（XRAT）：这一部分包含了与前面部分相关的信息性文本和理由说明。

此外，SUSv3 包括了*X/Open CURSES Issue 4 Version 2*（XCURSES）规范，该规范指定了 372 个函数和 3 个头文件，用于*curses*屏幕处理 API。

总计有 1742 个接口在 SUSv3 中进行了规范。相比之下，POSIX.1-1990（带 FIPS 151-2）规范了 199 个接口，而 POSIX.2-1992 规范了 130 个工具。

SUSv3 可以在[`www.unix.org/version3/online.html`](http://www.unix.org/version3/online.html)在线访问。符合 SUSv3 标准的 UNIX 实现可以自称为*UNIX 03*。

自原始 SUSv3 文本批准以来，已经对发现的问题进行了各种小修复和改进。这些改进导致了*技术更正第 1 号*的发布，其改进已被纳入 SUSv3 的 2003 年修订版，以及*技术更正第 2 号*，其改进已被纳入 2004 年的修订版。

#### POSIX 符合性、XSI 符合性和 XSI 扩展

历史上，SUS（和 XPG）标准通常依赖于相应的 POSIX 标准，并且被结构化为 POSIX 的功能超集。除了规范附加接口外，SUS 标准还强制实施了许多在 POSIX 中被认为是可选的接口和行为。

这种区别在 POSIX 1003.1-2001 中仍然有所体现，该标准既是 IEEE 标准，也是开放组技术标准（即，如前所述，它是早期 POSIX 和 SUS 标准的整合）。该文档定义了两种符合性级别：

+   *POSIX 符合性*：这定义了符合性实现必须提供的接口基准。它允许实现提供其他可选接口。

+   *X/Open 系统接口*（XSI）*符合性*：要符合 XSI 标准，实施必须满足所有 POSIX 符合性要求，还必须提供一些仅在 POSIX 符合性中可选的接口和行为。实施必须达到这个符合性级别，才能获得开放组的*UNIX 03*认证。

为了 XSI 符合性所要求的附加接口和行为统称为*XSI 扩展*。它们包括对线程、*mmap()*和*munmap()*、*dlopen* API、资源限制、伪终端、System V IPC、*syslog* API、*poll()*和登录记账等特性的支持。

在后续章节中，当我们谈论 SUSv3 兼容性时，我们指的是 XSI 兼容性。

### 注

由于 POSIX 和 SUSv3 现在是同一文档的一部分，SUSv3 所需的附加接口和强制性选项，通过文档文本中的阴影和边距标记来指示。

#### 未指定和弱指定

有时，我们会在 SUSv3 中提到某个接口是“未指定的”或“弱指定的”。

所谓*未指定的接口*，是指在正式标准中完全没有定义的接口，尽管在少数情况下，标准中可能有背景说明或理由文本提到该接口。

说一个接口是*弱指定的*，简而言之，就是说，尽管该接口被包含在标准中，但重要细节未被指定（通常是因为委员会成员因现有实现的差异未能达成一致）。

当使用未指定或弱指定的接口时，我们在将应用程序移植到其他 UNIX 实现时，几乎没有保证。然而，在少数情况下，这样的接口在各个实现之间非常一致，若是如此，我们通常会特别标注出来。

#### LEGACY 特性

有时，我们指出 SUSv3 将某个指定特性标记为*LEGACY*。该术语表示为了与旧应用程序兼容，保留某个特性，但其局限性意味着在新应用程序中应避免使用该特性。在许多情况下，存在提供等效功能的其他 API。

### SUSv4 和 POSIX.1-2008

2008 年，奥斯汀小组完成了 POSIX.1 和单一 UNIX 规范的修订。与前一个版本的标准一样，它由基本规范和 XSI 扩展组成。我们将这一修订称为 SUSv4。

SUSv4 中的变化比 SUSv3 发生的变化范围小。最重要的变化如下：

+   SUSv4 为一系列函数增加了新的规范。在本书中提到的几个新增函数包括*dirfd()*、*fdopendir()*、*fexecve()*、*futimens()*、*mkdtemp()*、*psignal()*、*strsignal()*和*utimensat()*。另一些新的文件相关函数（例如*openat()*，详见相对于目录文件描述符的操作）是现有函数（例如*open()*）的类似物，但它们的不同之处在于，它们根据通过打开的文件描述符所指示的目录来解释相对路径，而不是相对于进程的当前工作目录。

+   在 SUSv3 中作为选项指定的一些功能，在 SUSv4 中变成了基础标准的一部分。例如，许多曾属于 SUSv3 中 XSI 扩展的功能，变成了 SUSv4 中的基础标准的一部分。在 SUSv4 中变为强制性标准的功能包括*dlopen* API（动态加载库）、实时信号 API（实时信号）、POSIX 信号量 API（第五十三章）和 POSIX 定时器 API（POSIX 间隔定时器）。

+   在 SUSv3 中，一些函数在 SUSv4 中被标记为废弃。这些函数包括*asctime()*、*ctime()*、*ftw()*、*gettimeofday()*、*getitimer()*、*setitimer()*和*siginterrupt()*。

+   在 SUSv4 中，一些在 SUSv3 中被标记为废弃的函数的规范被移除。这些函数包括*gethostbyname()*、*gethostbyaddr()*和*vfork()*。

+   在 SUSv4 中，对 SUSv3 中现有规范的多个细节进行了更改。例如，多个函数被添加到要求异步信号安全的函数列表中（表 21-1，在标准异步信号安全函数中）。

在本书的其余部分，我们将注明与正在讨论的主题相关的 SUSv4 中的变化。

### UNIX 标准时间线

图 1-1 总结了前述各标准之间的关系，并将这些标准按时间顺序排列。在这个图中，实线表示标准之间的直接继承关系，虚线箭头表示一个标准影响了另一个标准，或者作为另一个标准的一部分被纳入，或简单地推迟到另一个标准。

网络标准的情况有些复杂。该领域的标准化工作始于 1980 年代后期，当时成立了 POSIX 1003.12 委员会，旨在标准化套接字 API、X/Open 传输接口（XTI）API（基于 System V 传输层接口的另一种网络编程 API）以及各种相关 API。这个标准的酝酿过程持续了几年，在此期间，POSIX 1003.12 被更名为 POSIX 1003.1g，并在 2000 年获得批准。

与 POSIX 1003.1g 的开发并行，X/Open 也在开发其 X/Open 网络规范（XNS）。该规范的第一个版本，即 XNS Issue 4，是单一 UNIX 规范第一版的一部分。随后是 XNS Issue 5，它构成了 SUSv2 的一部分。XNS Issue 5 本质上与当时 POSIX.1g 的草案（6.6 版）相同。接下来是 XNS Issue 5.2，它与 XNS Issue 5 和已通过的 POSIX.1g 标准不同，标志着 XTI API 的过时，并包含了互联网协议第 6 版（IPv6）的内容，IPv6 在 1990 年代中期正在设计中。XNS Issue 5.2 构成了 SUSv3 中包含的网络材料的基础，因此现在被取代。出于类似原因，POSIX.1g 在被批准后不久就被撤销为标准。

![各种 UNIX 和 C 标准之间的关系](img/01-1_HIST-standards-timeline.png.jpg)图 1-1. 各种 UNIX 和 C 标准之间的关系

### 实现标准

除了独立或多方组织制定的标准，有时还会提到由最终的 BSD 版本（4.4BSD）和 AT&T 的 System V Release 4（SVR4）定义的两种实现标准。后者的实现标准由 AT&T 通过发布 System V 接口定义（SVID）正式化。1989 年，AT&T 发布了 SVID 的第 3 版，定义了一个 UNIX 实现必须提供的接口，以便能够称自己为 System V Release 4（该 SVID 可在线获取，网址为[`www.sco.com/developers/devspecs/`](http://www.sco.com/developers/devspecs/)）。

### 注意

由于一些系统调用和库函数在 SVR4 和 BSD 之间的行为有所不同，许多 UNIX 实现提供兼容库和条件编译功能，模拟未作为该特定实现基础的 UNIX 版本的行为（参见特性测试宏）。这减少了将应用程序从另一个 UNIX 实现移植的负担。

### Linux、标准和 Linux 标准基础

作为一般目标，Linux（即内核、*glibc*和工具）开发旨在遵循各种 UNIX 标准，特别是 POSIX 和单一 UNIX 规范。然而，在写作时，没有任何 Linux 发行版被 The Open Group 品牌化为“UNIX”。问题在于时间和费用。每个厂商的发行版需要经过合规性测试以获得此品牌，并且每次发布新版本时都需要重复此测试。尽管如此，正是对各种标准的事实性近似遵循，使得 Linux 在 UNIX 市场中取得了如此成功。

对于大多数商业 UNIX 实现，通常同一家公司既开发又分发操作系统。而 Linux 则有所不同，其实现和分发是分开的，多个组织——包括商业和非商业组织——负责 Linux 的分发。

Linus Torvalds 并未参与或支持任何特定的 Linux 发行版。然而，关于其他个人进行 Linux 开发的情况则更为复杂。许多在 Linux 内核和其他自由软件项目上工作的开发人员，受雇于各个 Linux 发行公司，或为对 Linux 有浓厚兴趣的公司（如 IBM 和 HP）工作。尽管这些公司可以通过分配程序员时间来影响 Linux 发展的方向，但没有任何公司能完全控制 Linux。而且，当然，Linux 内核和 GNU 项目的许多其他贡献者都是自愿工作的。

### 注意

截至写作时，Torvalds 受雇于 Linux 基金会（[`www.linux-foundation.org/`](http://www.linux-foundation.org/)；前身为开放源代码开发实验室 OSDL），这是一个由商业和非商业组织组成的非营利性联盟，旨在促进 Linux 的发展。

由于存在多个 Linux 发行商，并且内核实现者无法控制发行版的内容，因此没有所谓的“标准”商业 Linux。每个 Linux 发行商提供的内核通常是基于主线内核（即 Torvalds 内核）在某一特定时间点的快照，并应用了多个补丁。

这些补丁通常提供了一些商业上被认为具有价值的功能，因此能够在市场上提供竞争性差异化。在某些情况下，这些补丁后来被接受到主线内核中。事实上，一些新的内核功能最初是由某个发行公司开发的，并在其发行版中出现，最终被整合进主线。例如，*Reiserfs*日志文件系统的第 3 版在其被接受到 2.4 主线内核之前，已经是一些 Linux 发行版的一部分。

上述几点的结果是，各个 Linux 发行公司提供的系统存在（大多数是小的）差异。从更小的规模来看，这让人想起了 UNIX 早期实现中出现的分裂。Linux 标准基础（LSB）是一项旨在确保不同 Linux 发行版之间兼容性的努力。为了实现这一目标，LSB ([`www.linux-foundation.org/en/LSB`](http://www.linux-foundation.org/en/LSB)) 制定并推广了一套适用于 Linux 系统的标准，目的是确保二进制应用程序（即已编译的程序）可以在任何符合 LSB 标准的系统上运行。

### 注意

LSB 推动的二进制可移植性与 POSIX 推动的源代码可移植性形成对比。源代码可移植性意味着我们可以编写一个 C 程序，然后在任何符合 POSIX 标准的系统上成功编译和运行它。而二进制兼容性要求更高，通常在不同的硬件平台之间是不可行的。它允许我们为特定的硬件平台编译一次程序，然后在该硬件平台上运行任何符合标准的实现中的已编译程序。二进制可移植性是独立软件供应商（ISV）为 Linux 构建应用程序的商业可行性的必要要求。

## 总结

UNIX 系统最初于 1969 年由 Ken Thompson 在贝尔实验室（AT&T 的一部分）在数字 PDP-7 微型计算机上实现。该操作系统借鉴了早期 MULTICS 系统的许多想法，以及它那有双关意义的名称。到 1973 年，UNIX 已经被移植到 PDP-11 微型计算机，并用 C 语言重写，C 语言是由 Dennis Ritchie 在贝尔实验室设计和实现的。由于法律原因，AT&T 无法出售 UNIX，因此它将完整的系统以象征性的费用分发给大学。这些分发版本包括源代码，并在大学中非常流行，因为它提供了一种便宜的操作系统，计算机科学的学者和学生可以研究和修改其代码。

加利福尼亚大学伯克利分校在 UNIX 系统的开发中发挥了关键作用。在那里，Ken Thompson 和一些研究生扩展了操作系统。到 1979 年，该大学开始制作自己的 UNIX 发行版——BSD。这个发行版在学术界得到了广泛传播，并为多个商业实现奠定了基础。

与此同时，AT&T 垄断的解体使得该公司能够销售 UNIX 系统。这导致了另一个主要的 UNIX 变体——System V，它也成为多个商业实现的基础。

有两股不同的潮流促成了 (GNU/) Linux 的发展。其中之一是由理查德·斯托尔曼创办的 GNU 项目。到了 1980 年代末，GNU 项目已经开发出了几乎完整的、可自由分发的 UNIX 实现。唯一缺少的部分是一个可用的内核。1991 年，受到 Andrew Tanenbaum 编写的 Minix 内核的启发，林纳斯·托瓦兹为英特尔 x86-32 架构开发了一个可用的 UNIX 内核。托瓦兹邀请其他程序员加入他一起改进内核。许多程序员加入了，并且随着时间的推移，Linux 被扩展并移植到多种硬件架构上。

1980 年代末，UNIX 和 C 实现的变异所带来的可移植性问题，促使了对标准化的强烈需求。C 语言在 1989 年标准化（C89），并于 1999 年修订（C99）。首次尝试标准化操作系统接口产生了 POSIX.1，该标准于 1988 年被 IEEE 批准，并于 1990 年成为 ISO 标准。在 1990 年代，进一步的标准草案相继提出，包括单一 UNIX 规范的不同版本。2001 年，合并的 POSIX 1003.1-2001 和 SUSv3 标准被批准。这一标准整合并扩展了早期的 POSIX 标准和单一 UNIX 规范的早期版本。2008 年，标准的一个较小范围的修订完成，产生了合并的 POSIX 1003.1-2008 和 SUSv4 标准。

与大多数商业 UNIX 实现不同，Linux 将实现和发行版分开。因此，没有单一的“官方” Linux 发行版。每个 Linux 发行商提供的产品都包含当前稳定内核的快照，并应用了各种补丁。LSB 开发并推广一套 Linux 系统的标准，旨在确保 Linux 发行版之间的二进制应用兼容性，这样已编译的应用程序应该能够在任何符合 LSB 标准的系统上运行，只要它们使用相同的硬件。

#### 更多信息

关于 UNIX 历史和标准的更多信息，可以参考 [Ritchie, 1984]、[McKusick 等, 1996]、[McKusick & Neville-Neil, 2005]、[Libes & Ressler, 1989]、[Garfinkel 等, 2003]、[Stevens & Rago, 2005]、[Stevens, 1999]、[Quartermann & Wilhelm, 1993]、[Goodheart & Cox, 1994] 和 [McKusick, 1999]。

[Salus, 1994] 是一本详细的 UNIX 历史书籍，书中的许多信息来自本章开头的内容。[Salus, 2008] 提供了 Linux 和其他自由软件项目的简短历史。UNIX 历史的许多细节也可以在 Ronda Hauben 编写的在线书籍 *History of UNIX* 中找到。该书可以在 [`www.dei.isep.ipp.pt/~acc/docs/unix.html`](http://www.dei.isep.ipp.pt/~acc/docs/unix.html) 上查阅。一个非常详细的时间线，展示了各种 UNIX 实现的发布情况，可以在 [`www.levenez.com/unix/`](http://www.levenez.com/unix/) 上找到。

[Josey, 2004] 提供了 UNIX 系统历史和 SUSv3 发展概况，指导如何使用规范，SUSv3 中接口的总结表，以及从 SUSv2 到 SUSv3 和从 C89 到 C99 的迁移指南。

除了提供软件和文档外，GNU 网站（[`www.gnu.org/`](http://www.gnu.org/)）还包含许多关于自由软件的哲学论文。[Williams, 2002] 是一本理查德·斯托尔曼的传记。

Torvalds 在 [Torvalds & Diamond, 2001] 中提供了自己对 Linux 开发的叙述。
