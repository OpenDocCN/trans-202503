# 第一章：时间是一个平坦的圆圈

2016 年夏天，我坐在了作为软件工程师所遇到的最奇怪的系统面前。那是一个用 Java 编写的相当普通的 Web 应用程序，它连接到我最终会弄明白的是一台大型机。大型机本身并不奇怪。当你进入遗留系统现代化的领域时，你很快会意识到大型机仍然*无处不在*——在银行、政府机构中，深藏于民间社会的基础设施中。让一个 Web 应用程序向大型机发送请求并不奇怪。我曾难以接受一项为大宗交易设计的技术能够足够快速地响应，以满足一个网站在合理规模下的需求，但尽管我有担忧，它似乎还是能做得不错。

不，不奇怪的是，这台大型机是 1960 年代的产物，并且将数据存储在磁带上。那台*大型机*根本不可能响应得足够快，因此当我看到架构图时，我注意到中间有一组神秘的机器；一边是现代的 Web 应用程序，另一边是古老的主机。

我对这组机器唯一了解的信息是组织用来表示它的缩写。与我合作的工程师团队中没有人似乎知道这些机器是做什么的。在深入研究了几十年的文档后，我才搞清楚它们的用途：*Unisys ClearPath Dorados*。换句话说，它们是更现代的大型机，实际上像缓存一样配置在老旧大型机前面。这就是 60 年历史的代码为何能快速响应现代互联网的请求。该组织有一台新机器位于其中，存储了相关数据的临时副本。大约每周一次，新的大型机会从旧的主机请求更新。

当我问一位参与该系统开发的工程师，关于他对这种安排的看法时，他说了一句话，至今让我记忆犹新，并最终改变了我对现代化遗留计算机系统的理解：“那么，云计算和老旧的大型机时分共享系统有什么不同？”

答案是，这两者实际上并没有什么不同。这两种方法都为你在由更大的机构维护的共享资源上花费的时间收费。你通过相同的通信线路连接，有时使用相同的协议。客户端/服务器模型基本相同；唯一不同的是接口和编程语言。工程师还补充了另一个有趣的观察：“我们从瘦客户端的大型机绿色屏幕终端应用程序开始，然后他们要求我们迁移到 PC 上的胖客户端，现在他们又想要使用瘦客户端的 API。”

软件工程师在进行遗留系统现代化时，常犯的第一个错误就是假设技术进步是线性的。在这种思维框架下，任何采用旧设计模式或旧架构哲学构建的东西，都比不上更新的选择。提升旧系统性能的唯一方法，就是将其重新排列成一种新的模式。

我处理像所描述的“弗兰肯斯坦系统”的经验让我明白，技术进步不是线性的，而是循环性的。我们在前进，但进展缓慢，且是在切线方向上推进。我们放弃了某些模式，却又重新发明它们，并以全新的方式出售。

技术的进步不是在前人基础上建立的，而是通过从中*转变*而来的。我们从现有的核心概念出发，对其进行修改，以填补市场的空白；然后我们围绕这个空白进行优化，直到这种优化将所有未被新技术覆盖的人群和使用案例聚集在一起，形成了一个独立的市场，而另一个“进步”将会抓住这个市场。

换句话说，围绕数据中心的军备竞赛让小型组织被甩在了后面，并催生了商业云的需求。为了定制化和控制性优化云平台，创造了托管平台的市场，最终催生了无服务器计算。无服务器模型将不断为其用户提供更多基于其最具吸引力特性的开发功能，直到无服务器方法不完全适用的边缘案例开始在彼此之间找到共同点。然后，一种新的产品将应运而生，解决这些需求。

## 利用现有的技术

大多数人意识到，技术可能在发明时并不流行，直到很久之后才变得流行，但他们通常将这种现象归因于发明者的缺乏远见，或者是营销部门技能的不足，或是技术本身的成熟度问题。

经济学家对新技术采用率有不同的解释。他们通常将其描述为可对齐差异和不可对齐差异之间的对比。*可对齐差异*是指消费者已有参照点的差异。例如，*这*辆车比*那*辆车更快，或者*这*部手机的摄像头比*那*部手机更好。

*不可对齐的差异*是那些完全独特且具有创新性的特征；没有可以进行对比的参考点。你可能会认为不可对齐的差异更能吸引潜在消费者。毕竟，没有竞争！你正在以不同的方式做事。但当需要做出购买决定时，如果没有对比，就没有明确的价值感。如何评判一件没有等同物的商品的价值——进而评估以某个价格购买它的权衡？为了让不可对齐的差异产生影响，它所带来的估计价值必须大于所有可对齐的差异以及所有其他不可对齐的差异加起来的总和。^(1)

消费者对于必须进行这样的猜测并不自信。^(2) 这增加了买家后悔的风险，且关于需求和效用的推理让消费者感到不舒服。因此，各种产品通过寻找能够标榜与现有解决方案不同的特定特征来在市场上实现差异化。这推动了技术的循环发展。人们从相同的产品中获得的体验并不完全相同。当一家公司在不断迭代并改善产品的某个特征时，最终却使得该产品对现有客户群体的吸引力下降。公司这样做是希望通过吸引更多的新客户来使这一损失变得无关紧要。

大多数时候，这种渐进式优化只会产生一些烦恼，这些烦恼在社交媒体上上演，最终会平息。偶尔，也会有足够多的人因为优化而经历了效用的下降，进而成为一个潜在的市场，值得被捕捉。包括那些最初从未购买过该产品，但如果它以某种其他方式优化过，他们会考虑购买的消费者。利用可对齐的差异实际上是在将产品推得更远离这些消费者的购买需求，但却为另一家公司提供了机会来解决这个问题。

请考虑以下问题：是拥有一部小型手机更好，还是拥有一部大型手机更好？

世界上第一款商业化的手机是摩托罗拉的 DynaTAC 800。那是一款巨大的砖块手机，现在常用来作为讽刺作品中 1980 年代的象征。它超过 10 英寸高，根本不是那种可以轻松放进口袋的东西。显然，市场需求促使手机变得越来越小。到 1994 年，IBM 的 Simon 将手机缩小到 8 英寸高，并增加了行业首次尝试智能功能，如发送传真和电子邮件、维护日历、记笔记、阅读新闻和查看股价。尽管这些进步令人印象深刻，但 Simon 很快被翻盖手机所取代，翻盖手机将 8 英寸的手机尺寸折叠成一半，变得和普通裤子口袋的宽度和深度差不多。^(3) 各大公司开始从销售数万部设备到数百万部设备。

我那时还在高中，尽管现在手机无处不在，但在 1990 年代，手机对我们这些孩子来说并不是一个值得购买的物品。我只有一个朋友拥有手机，它主要有两个功能：一是当他的车在往返 Taco Bell 兼职工作时出现故障时使用，二是课上玩一个灰度版的*Snake*。对于我和我的同龄人来说，我们更可能在课间的走廊里碰到我们可能想要打电话给的人，或者通过父母支付的其他方式与他们沟通。我们并没有把短信作为手机的主要功能。寻呼机同样能起到作用。

事实上，一项皮尤研究发现，*座机*在 2009 年仍是美国青少年首选的通信方式，距今已有近十年。^(4) 超过一半的青少年甚至从未发送过短信。到那时，iPhone 已经上市两年，并且是其第三代产品。又过了一年，皮尤的跟踪报告呈现出截然不同的画面：美国青少年中的手机使用迅速增长，超越了所有其他通信方式。^(5)

发生了什么变化？

每隔一段时间就会有一个网络迷因，指出手机尺寸的转折点大约发生在 2005 年，并附上“在这里我们意识到可以在手机上看色情”的话。实际上，直到 2010 年，屏幕尺寸仍然在变化，市场上有很多选择，从全面触摸屏外观到更为简朴的界面，后者配有物理键盘，专为商务用途优化。青少年群体在此之前一直是一个未得到充分满足的市场，直到屏幕尺寸开始增大，摄像头成为手机的核心功能之一。青少年们使用手机的主要目的就是相互分享图片和视频。^(6) 一旦清楚地意识到通过将手机作为娱乐设备来销售可以捕捉到一个市场，手机的缩小趋势就突然停止，开始变大。关于分辨率、显示效果和相机质量的创新加速了这一进程。

看起来我们可以简单地认为这些趋势意味着技术已经成熟到能够找到并抓住市场的地步。但数据实际上并不支持这一点。诺基亚的 N95 在 2007 年就提供了 500 万像素（MP）的相机。随之而来的是第一代 iPhone 发布时配备了 200 万像素相机，而 HTC Dream 则于 2008 年推出，配备了 315 万像素相机。2010 年，iPhone 和 HTC 分别推出了前置摄像头，分辨率分别为 30 万像素和 130 万像素。市场上的技术并没有变得更好；它一度变得更差了。^(7)

单纯生产面向 1990 年代或 2000 年代初期青少年的手机，并不会导致市场的爆发性增长。青少年对手机没有强烈的参照点。从他们的角度来看，手机并没有足够吸引人的特点来证明其价值。只有当他们父母的设备在文化参照和日常生活中变得普及时，青少年市场的潜力才得以释放，并且吸引他们兴趣所需的大屏幕也得以出现。

每个在年轻美国用户中受欢迎的功能，在 2010 年之前就已经存在了。自 2000 年以来，手机上就有摄像头，并且销售情况不错。我在日本生活时，2004 年就已有能直播的手机。并不是某种令人印象深刻的技术进步改变了市场。手机在日常生活中的日益普及为一个新的、更有利可图的市场铺平了道路，迫使手机设计发生了彻底的改变。

技术历史充满了这种转变。一种特定的方式或技术变得流行，但并不适合每个人的使用需求。公司开始进行实验，并将这种新兴的热技术应用到越来越多的领域，直到这种方法无法适应或不理想的情况增加，成为改变势头的力量。行业重新发现了一种不同的做事方式，并朝着那个方向反弹。

工程师们称 Kafka 的发布/订阅模型优于企业服务总线（ESB）的中心与辐射模型。ESB 是一个单点故障，是面向服务架构的反模式。然后 Kafka 增加了其 Connect 框架（0.9 版本）和 Streams API（0.10 版本），重新引入了许多 ESB 的核心概念。谷歌开发了加速移动页面，以通过 JavaScript 推进异步加载，然后将服务器端渲染加入其中——突破了自己的规范，回到了 HTML 已建立的模式。

市场变化是复杂的事件。我们可以看到技术在同样的方式和结构中反复循环，但这些变化更多地不是关于某个特征的优越性，而是关于潜在消费者如何组织自己。

## 用户作为市场共同创造者

总体而言，这类复杂的复合性变化被称为*服务主导逻辑**(S-D Logic*)。S-D 逻辑认为，消费者的价值不是由公司生产产品所创造，而是通过多个参与者之间的积极合作。根据 S-D 逻辑，消费者不是被行业设计出需求和欲望的被动、无思考的“羊群”。相反，消费者积极参与创造市场，这些市场被用来向他们销售商品。

消费者和公司主要通过相互作用创造价值。任何曾经尝试创办自己企业的人都会告诉你，问题的存在并不意味着有市场可以解决它。2004 年，从手持设备轻松流式传输电视和电影并不是消费者有兴趣解决的问题。那时已经有相关技术，但没有人愿意把辛苦赚来的钱投入到解决每个人都面临的问题上。一旦手机解决了在移动中保持与办公室联系的实际问题，它们便出现在了大量其他消费者的视野中。这促使其他需求开始整合为可销售的问题。你可能不会太在意在横跨国家飞行时无法观看自己喜欢的电视节目的最新一集这个问题。但如果你知道其他人有这样的选择，而你却错过了，这个解决方案突然间变得更具市场潜力。

## 大型主机与云计算

然而，有时，推动进步的离心力要更加基础和根本。让我们回到本章开始时的故事：为什么我们从大型机的时间共享迁移到个人计算机上的庞大应用程序，再到商业云中的时间共享？例如，我们本可以继续开发大型机，直到它们变成云计算。那为什么我们没这么做呢？为什么我们花费数百万美元将成千上万的应用程序迁移到新范式，最终又不得不在一两十年后将它们迁移回更轻量的客户端？

技术是任何组织运营模式中，且可能永远是一个昂贵的元素。技术的许多进步和市场共创可以理解为硬件成本和网络成本之间的相互作用。计算机是数据处理器。它们处理数据并将其重新排列成不同的格式和显示方式。无论我们用它们来玩电子游戏还是处理电子表格，它们的作用基本上就是这些。

所有与数据处理器相关的进展归结为两件事：要么让机器更快，要么让传输数据到机器的管道更快。这两者的力量不能独立增长。如果传输数据的管道远远超前于处理数据的芯片，机器就会崩溃。如果机器远远超前于网络，用户就无法从速度提升中获得实际的附加值。

当通过解锁网络速度或硬件速度方面的可用改进，能够创造可对齐的差异时，整个行业往往会改变范式以优化这种改进。这样做会通过将一些潜在客户和使用案例抛在后面，从而为下一次变化创造市场。

在黄金时代，主机存在于一个处理器能力有限的世界里。为了将计算卸载到机器上，足够的处理能力需要投资一个充满设备和专业操作员的房间，这些都非常昂贵。市场在加速硬件提升上投入了大量资金。在这一过程中，最简单的办法其实是让芯片变得更小，这样你就可以在同一台机器上塞入更多的芯片。这样做并没有立即导致主机变得更小，而是将市场扩展到不同的价格区间，让大型组织仍然愿意支付数百万美元，而小型组织则能够被说服支付几万美元来拥有属于自己的主机。这让计算机接触到了更广泛的受众，并刺激了最终变成个人电脑的市场。即便如此，仍然没有必要提升网络速度，因为计算机很慢，存储能力也有限。举个例子，1985 年的超级计算机的处理能力大致相当于早期的 iPhone。一台那个时代的典型计算机可能只有几百 KB 的 RAM 和存储空间。国家科学基金会网络，后来成为早期互联网的骨干，在 1980 年代提供 56kbps 的速度。以这个速度，传输一台计算机的全部数据大约只需要一个小时。

最终，几十年的工程工作改变了这种关系。现在，更快、更强大的计算机正在等待通过网络传输数据。越来越多的这些机器变得更小、更便宜，且存储容量不断增长。随着机器数量的增加，网络负载也随之增加。连接到同一网络的计算机越多，网络速度就越慢。更多速度需求要花时间才能引起市场反应，因此行业通过转向那些将更多数据本地存储在机器上的应用程序进行了优化。我们放弃了那些运行在集中式计算机上的应用程序，而这些计算机是通过网络与我们连接的。如果我们不需要通过网络传输数据，那么网络速度就不会成为我们的瓶颈。

## 固定费用互联网

在这个时候，我们没有周期；我们有的是过渡。行业的偏好从在大型集中式计算机上处理转向了更小、更便宜的本地工作站。说互联网变得更快更便宜之后回到之前的状态并不算剧透，但这真的是不可避免的吗？

一旦个人计算市场解锁，私营部门不太可能自己建设互联网。当时，计算机制造商从他们的专有标准中获得的财务收益要大得多。互联网的核心创新是将许多不同类型的网络连接成一个互联网络（因此得名*互联网*），这需要对所有制造商开放的共同标准。构建一个可以跨越单一国家的网络本身就是一个重大的工程挑战。事实上，许多国家级计算机网络项目在互联网诞生的同时也在尝试中。英国有一个；法国有两个；苏联有三个失败的尝试。美国最终成功，因为它并不是在试图建立一个国家级网络，而只是试图解决计算机制造商推行的所有专有标准所导致的兼容性问题。美国军方资助了大量昂贵的计算机，并希望让彼此相距数百英里的研究机构能够共享这些资源。如果由计算机制造商来决定，他们显然会更希望所有的研究机构都购买自己的机器。

然而，互联网最终还是建成了。最初它既慢又笨重，且没有明确的商业实现，充斥着学者、爱好者、未来学家和怪人。与商业市场的饱和激发了消费者将手机作为个人娱乐设备的需求，主机计算机市场的饱和促使资源较少的小型组织寻求更小的机器一样，互联网是通过一个略带无政府主义色彩的创意社区渗透到商业市场中的。到 2000 年，76%的在线用户是从家庭连接的，而 41%则是从企业连接的。到 2014 年，家庭互联网使用激增至 90%，而工作互联网使用则停滞在 44%。^(8)

关于互联网，令人感兴趣的是它是唯一一种历史上实行统一费率定价的现代通信媒介。^(9) 互联网中的所有数据包几乎都是以相同的方式计费的，无论它们是什么，或者它们要去哪里。^(10) 相比之下，长途电话比本地电话贵，或者在国外连接到移动网络时比在国内使用更贵。在互联网中，消费者为更快的速度支付更多费用。这给电信公司带来了压力，迫使它们通过提高连接速度来竞争。互联网变得越快，越多的人涌入互联网。互联网上的内容越多，消费者登录的次数就越多。试图访问互联网上某一资源的人越多，自己机器上托管这些资源的成本就越高。最终，这反转了计算机行业的价值主张，使得“云端”处理数据比本地处理数据更便宜。我们重新回到了租用别人拥有的昂贵计算机的时间，而不是自己承担购买、维护和升级这些昂贵计算机的成本这一概念。

人们可以通过处理能力和存储容量是否比网络速度增长得更快来大致跟踪架构范式的兴衰变化；然而，更快的处理器往往是电信公司用来提高网络速度的一个组成部分。这种相互依赖性在几乎任何市场中都是成立的。产品开发改变消费者行为，而消费者行为又改变了产品开发。技术进步并非沿着直线发展，因为直线实际上并不高效。经济并不是一个平坦的平面，而是一个具有山脊和山谷的丰富地形，需要绕过。

影响变动的因素本质上也是分形的、跨学科的。美国互联网服务提供商（ISP）早期选择固定费用定价结构的原因在于，市场环境提供了两种选择来建立通信线路网络，这对于他们开展业务至关重要：要么自己建设线路，要么租用他人的线路。在后者这一类别中，存在多种选择，不仅包括像 AT&T 这样的为电话服务建立的现有电信网络，还包括大型机构为连接其数据中心而维护的专线。像 90 年代的 AOL 这样的公司，既与电信公司竞争出售互联网接入服务，又是这些电信公司的客户。这使得 ISP 对客户反馈更加敏感，而简单、固定定价的心理吸引力变得必不可少^(11)。其中，按使用量收费意味着服务在变差时变得更加昂贵。更多用户的活跃最终会导致拥塞，进而影响网络性能。用户难以准确估算自己的使用量，而大多数用户在固定价格下支付的费用更高，这进一步刺激了该行业。如果你想快速验证这一点，可以查看你实际的手机数据使用量，并与每月支付的流量限制进行对比。大多数用户从未接近耗尽流量。

在欧洲，电信通常是由政府运营的，这意味着竞争较少，从而推动了更简单的定价模式。欧洲联盟最终在 90 年代末期放开了互联网市场，而美国则允许宽带行业进行整合。结果，欧洲的更多竞争推动了网络速度的提升和价格的下降。今天，许多地方的互联网速度比美国更快。这对未来技术行业的变革意味着什么尚不明确。任何因素都有可能改变被推崇为最佳实践的范式。接触新技术可以创造一个新市场，这个市场可能与主机和个人电脑并行运行，或者它可能完全超越另一个市场，就像娱乐优化的手机淘汰了黑莓和其他商务手机一样。价格可能会下降，资源可能变得稀缺。这些变化很少，甚至从未单纯由技术优势推动。

## 为了价值而迁移，而非追逐趋势

这些与遗留系统现代化有什么关系呢？当人们认为技术以线性方式进步时，他们通常也认为任何新技术都比当前使用的技术更先进、更好。采纳新实践并不一定使技术变得更好，但几乎总是使技术变得更复杂，而更复杂的技术不仅难以维护，最终也更容易失败。

然而，信息技术如果永远不变，就注定失败。理解我们是以周期性方式进步的非常重要，因为这是我们学会如何避免不必要的重写和部分迁移的唯一途径。技术变革应该关注真正的价值和权衡，而不是错误的假设——即更新的技术默认更先进。

有时候，将你的使用案例与其他看似相似的组织的使用案例进行比较是很困难的。在这方面，最大的误导来自商业云，正因为它为如此广泛的使用案例增加了价值。人们往往认为这意味着它是适用于所有使用案例的更先进技术，然而事实并非如此。我有个朋友，她运营着一个 Hadoop 集群，用于处理财政部的金融数据。她的首席信息官（CIO）坚持认为，他们需要关闭他们维护的服务器，把这个处理过程迁移到云端。CIO 没有意识到的是，尽管迁移数据比 1980 年代便宜且更容易，但依然是昂贵的。毫无疑问，如果你在存储数据的地方处理数据，速度和性能会更好——在这种情况下，就是在现场。大数据即服务是否能为你节省开支，取决于你的大数据实际有多大，数据集中在哪里，以及它最初是多长时间才变得如此庞大。五年收集的 PB 级数据与几小时内产生的 PB 级数据是完全不同的情况。

价值主张常常是一个复杂的问题，正因为如此。对于纯粹的技术型组织来说，正确把握这一点已经足够困难；对于那些只有供应商拥有足够知识来提供建议的组织来说，这更加困难。
