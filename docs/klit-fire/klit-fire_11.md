# 第十一章：结论

传统现代化的难点在于围绕系统的系统。组织、其沟通结构、政治和激励机制与技术产品交织在一起，以至于要推动产品发展，必须通过转动这个复杂且未记录的系统的齿轮来实现。

传统现代化失败的部分原因是，人类往往被激励去静音或去除建立责任制的反馈循环。我们通常无法停止这种行为，因为我们坚持将这个问题看作道德上的失败，而非无意识的偏见。例如，保持运维与开发之间分离的工程组织，最终发现他们的开发团队会设计出这样的解决方案：当出问题时，首先且最严重地影响到运维团队。与此同时，运维团队则构建了会阻碍开发的流程，将负面后果传递给开发团队。这些都是静音反馈循环的例子。决策的实施者无法像其他团队那样直接感受到决策的影响。

DevOps 和 SRE 运动对软件开发产生如此有益影响的原因之一是它们旨在重新确立责任制。如果产品工程团队参与运行和维护自己的基础设施，他们就是那些感受到自己决策影响的人。当他们构建的东西无法扩展时，他们会在凌晨 3 点收到警报。让软件工程师负责基础设施的健康，而不是由独立的运维团队负责，这样可以让反馈循环变得更加清晰。

但任何曾经尝试运营 SRE 或 DevOps 团队的人都会告诉你，让产品工程团队对其基础设施负责的期望，确实说起来容易做起来难。基础设施方面始终需要专业人才——无论是因为组织自己运营数据中心并需要硬件专长，还是因为工程师在维护基础设施时使用的工具本身也需要维护——因此，总会有人把责任推给他们。

人们并不是因为不在乎而静音反馈环路。人们之所以静音反馈环路，是因为人类一次只能在大脑中处理有限的信息。保持反馈环路开启意味着要倾听来自它的信息，这意味着首先要考虑可能回传的信息以及如何解读这些信息。开发人员静音操作通常是因为他们通常不了解基础设施如何运作的细节。工程师通常会静音来自业务方面的反馈环路，因为这些反馈以他们没有接受过培训的指标形式传递，他们很难从中提取洞察力。每个群体都有能力学习另一方的语言，但一个人应该掌握多少学科才能完成她的工作呢？在运行系统时，工程师必须考虑资源使用、容量预测、测试覆盖率、继承结构、代码行数等更多因素。难怪大多数人将自己的工作范围限制在与其实际工作直接相关的庞大技术复杂性之内。

一个高效运作的组织不能始终保持所有反馈环路开启。它必须决定哪些反馈环路对运营卓越的影响最大。在本书中，我强调了从增值的角度来思考现代化项目，而非从技术正确性的角度，因为这重新建立了最重要的反馈环路：这项技术是否服务于用户的需求？

会议、报告和对话是效率最低的反馈环路。反馈环路最有效的方式是当操作员*感受到*其影响时，而不仅仅是听说其影响。这是因为人们天生倾向于误解信息，以符合他们已经想要相信的东西。当反馈以不便、干扰、打断和额外工作等形式传递时，人们更难做出这种曲解。

尽管如此，由于我们不能始终保持所有反馈环路开启，传统沟通可以在影响不足以需要开启环路时起到填补作用。设计现代化工作是一个迭代的过程，而迭代本身就是关于反馈的。因此，遗留系统现代化的真正挑战并不是技术任务，而是确保在关键地方保持反馈环路开启，并且在其他地方确保沟通有序。

一般而言，决策的裁量权应该委托给那些必须执行这些决策的人。如果你不是在贡献代码或在深夜被叫醒回答故障警报，请记住，不论你的工作有多重要，你都不是实施者。你不操作系统，但你可以找到操作员，并确保他们有成功所需的支持。授权操作员。

这应该不言而喻，这需要信任。团队最终是由信任所主导的。大组织的领导者不喜欢听到这一点，因为这意味着他们将对超出自己控制范围的结果负责。依附于提供保证的流行策略更容易。这样，如果失败了，可以将其归结为不可避免的偶然事件，没有任何领导者能预防。这是遗留系统现代化的现实，没有灵丹妙药；本书中的每一种技术在不适当的条件下都可能失败。我已经尽力描述了正确的条件和每种方法的脆弱性，但我的知识和经验是有限的（并且永远不会是无限的）。最有可能找到有效策略的人，是那些在现场观察系统运转的人。

接受失败后，面对这种现实会变得更容易。试图改变生产中的复杂系统时，失败是不可避免的。系统中有太多的移动部分，太多未知的因素，太多需要修复的地方。让每一个决策都正确是不可能的。现代工程团队使用服务水平目标、错误预算和平均恢复时间等统计数据，将重点从避免失败转移到快速恢复上。不要忘记：完美的记录总是会被打破，但韧性是一项持久的成就。作为一个组织接受失败，能够减少赋能操作员的风险，并能从工程师那里获得更好的表现。

我们无法完全消除失败，因为在某个复杂度级别上，一个人——无论多么聪明——都无法理解整个系统。对于遗留系统，我们还有一个额外的复杂性，那就是系统的一些上下文已经丢失。需求、假设和当时的技术限制都没有文档化。平台中可能有一些抽象层次会让我们绊倒。现代化团队需要重新发现原系统的需求和假设，并将其更新到新系统中，但即使是最优秀的现代化团队，也有限制于能够挖掘出多少理解。归根结底，旧的软件不能作为新版本的规格说明。

技术，本质上，是人类思维的产物。因此，在现代化旧技术时，人类的思维至关重要。软件工程师很聪明，但他们和其他职业一样，会受到趋势和时尚的影响。要关注他们的激励机制。是什么让他们获得同行的认可？是什么让他们被关注，他们最终会优先考虑这些，即使这些行为与管理层的正式指示公开冲突。技术发展是一个周期过程，旧的范式不断被翻新以捕捉被忽视的市场细分。更新不一定意味着更好。好的技术并不是拥有最现代、最具可扩展性、最快或最安全的实现，而是服务于用户的需求。

但是，我们也希望有一个软件工程师努力让技术变得更快、更好、更安全的世界。我们获得既能服务用户又不断追求改进的技术的唯一方式，是事先定义成功的标准。什么是创造价值，如何知道价值何时增加？

最终，技术从未完成建设。今天的遗留现代化项目是昨天的已完成系统。计算机系统不能期望几十年不发生变化，因为计算机很少能够与外界隔离。输入会变化，输出方式会变化，网络和协议会变化，而不变化的程序最终会变成定时炸弹。

处理遗留现代化项目的最佳方法是，首先不需要它们。如果为此预算了适当的时间和资源，系统可以以这样的方式进行维护，使其随行业发展而演进。那些成功做到这一点的组织最终明白，组织的规模是系统复杂度的上限。那些比团队所能维护的更复杂的系统会被忽视，最终崩溃。

对大多数软件工程师来说，遗留系统可能看起来像是令人痛苦的死胡同工作，但现实是，不再使用的系统会被关闭。处理遗留系统意味着处理一些最关键的系统——这些计算机以无数种方式影响着数百万人的生活。这不是技术清洁工的工作，而是战场外科医生的工作。能在他们中间服务，是我最大的荣幸。
