# 第九章：如何完成

当我在联合国（UN）工作时，我的老板常常以“当网站完成时……”开始对话，我会回答，“网站永远不会完成。”我认为自己的一项成就就是，在我离开联合国时，大家已经接受了敏捷、迭代的过程，将软件视为一个需要不断维护和改进的活的东西。大家不再说“当网站完成时……”

技术永远不会完成，但现代化项目是可以完成的。本章将介绍如何定义成功，以清楚地了解何时完成现代化工作以及下一步该做什么。在项目初期，成功的样子可能看起来显而易见，但通常组织中的某些人对成功的理解与其他人的假设不同。让所有人达成共识并始终保持一致，对于确保项目成功完成至关重要。

## 揭示假设

很多破碎的系统最终是这样形成的，因为参与实施的组织单元对自己的角色以及它们如何为更大的图景做出贡献的理解不一致。任何形式的现代化、重新架构或重新思考现有技术系统都是一场持久战。工作将持续几个月甚至几年。因此，在这些项目中工作时，团队中的每个人都必须能够回答这个问题：我们如何知道它在变得更好？

团队应该知道长期的答案，但他们也应该知道，在从现在起的几天或几周内，什么是更好的。这种工作是一个长期的过程。要做好它，你必须保持自己的韧性。你必须注意当人们认为项目进展不顺利时他们的行为。管理自己的怀疑比处理来自不理解进展的同事的破坏行为要难得多，因为他们对改进的期望与团队其他成员的期望不同。

## 方法 1：成功标准

成功不会迅速或一次性地发生，这就提出了一个问题：你如何知道一个项目是否朝着正确的方向发展？当我与我的团队（通常还有我的老板或其他重要利益相关者）设定成功标准时，我们首先确定评估的时间框架。如果两个人都同意发布一个功能是成功的标志，他们仍然可能在时间表上产生冲突。三个月内发布和一周内发布是不同的。对于认为功能应该在一周内发布的人来说，部署的时间推迟到很晚会像一个警告信号。对于认为应该在一年内发布的人来说，相同的部署则是验证。

如果你熟悉*目标与关键成果（OKRs）*，那么成功标准可能会呈现类似的形式。首先，你定义你的目标，然后定义你如何知道自己已经达成目标。不同的是，OKRs 通常侧重于目标已完成的迹象，而成功标准应该侧重于你朝着正确方向前进的迹象。

这个策略的价值在于，所选择的标准明确了将要采取的方式，避免了对方法的争论。如果成功标准全部聚焦于实施新功能，那么团队可能不会优先解决技术债务。如果成功标准关注的是减少错误数量或加快最小恢复时间，那么团队就必须专注于改进现有代码。只要能够避免人们争论原则、理念和其他有关好工程与差工程的普遍性问题，就应该抓住这个机会。

同样的目标根据团队的模型可以有非常不同的成功标准。例如，咨询模型会关注客户吸收和采纳过程及最佳实践的能力，而非部署次数。顾问无法对部署有太多控制，而唯一能获得控制的方式就是不再做顾问。作为软件工程师，我们很容易陷入一个误区，认为有效的工作总是像写代码一样，但有时，通过教别人如何完成工作，而不是自己做，往往能更接近你期望的结果。

### 示例：添加持续集成/持续部署

1.  目标：将服务迁移到自己的部署流水线。

1.  时间表：一个季度。

1.  成功标准：

+   部署时间减少了 20%。

+   服务团队中的任何人都可以发起并管理一次部署。

+   每周的部署次数增加。

## 方法 2：诊断-政策-行动

由理查德·鲁梅尔特（Richard Rumelt）开发，这种方法与成功标准使用相同的信息，但呈现方式略有不同。^(1) 信息分为三个部分：诊断、政策和行动。*诊断*是对待解决问题的定义。*政策*指的是潜在解决方案的边界——即关于解决方案应做什么或不应做什么的规则。最后，*行动*是团队在不违反政策的情况下为解决问题而采取的步骤。

Rumelt 方法的有用之处在于，它更加专注于你要做什么以及如何做。当关于成功的定义没有达成广泛共识，且没有单一权威做出决定时，这种方法可能会更有效；但如果你的团队在路线图上遇到困难，可能会觉得这种方法更难实施。遗留系统现代化的挑战可能是多种多样的，交织在一起，且政治复杂。团队可能无法就成功的定义达成一致，他们也可能对解决问题需要执行的任务有不同意见。Rumelt 方法更适用于那些在步骤和顺序上易于达成一致，但在改善标志的定义上较难达成共识的情况。

### 示例：升级数据库

1.  诊断：我们的数据库软件版本已经过时好几版了，供应商将不再提供支持。

1.  政策：我们希望使用蓝绿部署。我们绝不会一次性关闭一个数据库版本并开启另一个版本。

1.  行动：

+   我们将在每次升级前备份数据。

+   我们将在此日期升级到 3.2 版本。

+   我们将在此日期升级到 3.3 版本。

## 比较

在定义成功方面，成功标准与诊断-政策-行动方法各有优缺点。成功标准能更直接地将现代化活动与其能够展示的附加价值联系起来。它在团队具体做什么上提供了更多灵活性，因为它不规定具体的做法或任务集。这是一个与上司和其他可能倾向于过度管理团队的监管者进行的极好的练习。做某事的方式应该由被信任执行任务的人来决定。因此，诊断-政策-行动方法过于注重细节，不利于团队向上管理。如果后续需要更改行动集，团队可能会不情愿这样做，并且在高级领导面前显得不一致。自由裁量权对于成功至关重要；如果没有被要求提供反馈，切勿通过呈现实施细节来放弃团队的自由裁量权。领导层需要知道的是你正在推动的成果。

另一方面，有时候你知道更好的结果是什么样子，但却不知道采取哪一组行动才能实现它。研究和实验可能无法在竞争的路线图中指出明确的赢家。组织的一方可能会说，首先需要解决这个问题，而另一方则可能争论完全不同的解决方案应该优先。若问题只能通过高层决策解决，诊断-政策-行动方法会更合适。正是这种使成功标准能够有效适应新信息和变化策略的灵活性，反而会在团队对日常工作犹豫不决时带来混乱。

## 标记时间

定义什么是成功有助于保持团队的统一，但由于成功标准和诊断—政策—行动的方法把挑战切分成更小的成就，你还需要防止团队失去对这些小成就的信心。如果团队觉得他们所取得的成就不值得他们投入的时间，那么你定义的成功就会失去效果。

对你有利的是，时间的感知和风险的感知一样是可变的。找到标记时间的方式，就是找到一种方法帮助人们脱离那些让时间变慢的日常挫折，帮助他们集中注意力于更大的图景。我最喜欢的标记时间的方法是子弹日记。我有一本书，每天我都会写下五件我打算做的事情，以及我认为它们需要多长时间。在一天中，我会在完成这些任务后打勾，并记下一些带有重要细节的小笔记。在工作进展缓慢的时候，我常常在边缘涂鸦或者用从供应商那得到的贴纸装饰页面。

每当我翻开子弹日记中两三周前的页面时，我都惊讶于事情变化的如此之大。我完成的任务比我想象的要多得多。这些完成的任务感觉像是几个月的工作。有时候，回顾仅仅一周前的事情，我都会感到震惊。

正如人类在判断概率时常常很糟糕，我们在判断时间时同样也很糟糕。感觉像是过去了很久的事情，可能实际上只不过是几天而已。通过标记时间，我们可以重新调整对事情进展的情感认知。找一种方式记录你工作的内容和时间，这样团队就可以轻松地回顾，全面了解他们的进展。

你可能会想说：“哦，他们可以通过我们的项目管理系统来做到这一点。”但是，项目管理工具通常是一次展示一项工作的流。标记时间更为有效，因为它能呈现出更完整的图景，展示人们生活中某个特定时刻的情况。知道某个任务是在某天关闭的，并不一定能让我回到那个时刻。有时候，一个日期就是一个日期。当你标记时间时，要用一种能唤起记忆的方式，突出那个时刻和现在团队所在位置之间的距离感。

对我来说，子弹日记很有效，因为每一页都是当时我脑海中的所有内容的快照。我记录工作项目、个人项目、事件和社交活动、假期以及疾病。任何预计会占据大部分时间的事情，我都会写下来。回顾项目进展时，凭借这些信息，我能为它赋予一些我之前没有考虑过的背景。一旦我考虑到这一点，我就意识到自己并没有在一个地方无意识地撞墙。一点一滴，逐步地，我让事情变得更好。

## 成功的事后分析

对于软件工程师来说，*事后总结*是在发生故障后进行的回顾，详细探讨故障的时间线、影响因素以及最终的解决方案。我们通常在提到事后总结时，会加上“无责”前缀，强调进行事后总结的目的是理解问题出在哪里，而不是将责任归咎于某个犯错的团队或个人。

但事后总结并不限于失败。如果你的现代化计划包括以另一个成功项目为模范，考虑对该项目的成功进行事后总结。记住，我们倾向于将失败视为运气不好，而将成功视为能力的体现。我们对失败进行事后总结，因为我们通常认为失败是复杂的，涉及多种因素。而成功则发生于简单、直接的原因。

实际上，成功和失败一样复杂。你应该采用与从失败中学习相同的方法来从成功中学习。

### 事后总结与回顾会议

现在你可能会想，你的组织确实会对成功进行事后总结，只不过你们叫它*回顾会议*。

没错。每次冲刺或上线后的回顾会议确实会问一些和事后总结相似的问题。然而，我还没有和任何一家技术组织合作过，他们会把回顾会议和事后总结看作同一回事。实际上，回顾会议要更加非正式。它们不会生成报告供其他人阅读——至少，至少我没见过。我不知道有哪个组织会把回顾会议的内容公开发布到网上供公众阅读。我参加过很多回顾会议，我们捕捉到了一些很有价值的信息并进行了深入的自我反思，但我很少见到这些成果会从白板上离开，并且被分享给其他团队。

作为一个行业，我们*反思*成功，但*研究*失败。有时候甚至过度研究。我建议，如果你是以另一个团队或另一个组织的成功为模范，你应该花一些时间真正去研究该成功是如何产生的。

### 进行事后总结

在讨论如何写关于成功的事后总结之前，先概述一下技术组织中事后总结的常规流程可能会更有帮助。传统的事后总结格式有一些特征，除了事故响应之外不太适用。例如，故障发生得很快，并且理想情况下在几小时内解决，因此为其创建详细的事件时间线比起持续几个月的项目更为简单。

传统的事后分析描述了故障的影响。团队会讨论并记录做得好的地方、做得不好的地方，以及在哪些地方人们认为自己得到了幸运。如前所述，事后分析通常会包括关于事件响应的详细时间线。这些时间线会分解发生了什么、何时发生以及谁做了什么。事后分析通常不会通过名字提到个人，以保护他们免受责备。相反，会使用“运维工程师 1”或“软件工程师 2”等别名来识别个人及其采取的行动。事后分析以可执行的改进步骤作为结束。组织如何改进做得不好的地方，或如何在做得好的地方进一步加强？

事后分析是通过回顾通讯记录和访谈团队成员来撰写的。然后，举行最终的回顾会议，向整个团队展示并验证所收集的信息。

在对成功进行事后分析时，你必须权衡需要投入多少时间和精力才能获得如此详细的信息，尤其是在时间线跨越几个月而非几小时的情况下。这种努力很快就会变得繁琐且官僚化。传统的事后分析通常是由应对事件的软件工程师撰写的。这些人是你希望投入到软件开发中的，而不是用来写报告的。

基于这个原因，成功的事后分析应该像它的轻量级版本回顾一样进行，但文档记录时应遵循传统事后分析的理念。事后分析的价值不在于其详细程度，而在于它在知识共享中所扮演的角色。事后分析是为了帮助未参与事件的人避免犯同样的错误。最好的事后分析还应当传播到组织外部，以通过透明度来培养信任。

事后分析建立了一个关于实际发生了什么以及具体行动如何影响结果的记录。它们并不记录失败；而是提供了背景。成功的事后分析应当发挥类似的作用。为什么某种特定的方法或技巧能够成功？最终的策略是否与团队最初的计划一致？在成功的事后分析中，你的时间线应该围绕以下问题展开：组织是如何执行原始策略的，策略发生了哪些变化，这些变化发生了何时，以及是什么促发了这些变化？

即使是最大的成功，也有一些本可以做得更好的挑战和幸运的时刻。记录这些内容有助于人们评估你的方法是否适用于他们自己的问题，并最终复制你的成功。

如果你确信另一家组织的策略对你的问题有效，不要等那些工程师开始做事后分析。你可以通过和人们喝咖啡来收集你所需的大部分信息。如果有一个你想复制成功的组织，花几周时间采访他们的人员，了解他们的策略，并使用事后分析的关键问题来引导你的访谈。

1.  什么做得好？

1.  有什么可以改进的地方吗？

1.  你们在哪儿运气好？

## 两个战情室的故事

在最终确定战略之前，我会分析成功的各种因素，因为我曾看到过组织从成功中学到错误的教训。例如，我曾与一个项目严重滞后的组织合作。团队成员不仅没有对项目的任何一部分设定一个现实的结束日期，他们甚至不知道为什么项目一开始就一直在延误。这是一个需要多个不同组织单位共同合作和共享信息的大型项目。我的咨询团队刚刚结束了一个成功的项目，该项目面临类似的挑战。这个组织听说我们的项目中，我们安排了来自各个组织单位的代表在同一个房间里工作。几个月来，除了每天不再回到他们的办公室或工作区，这些人一起坐在一个大会议室里，带着他们的笔记本电脑。这就是一个战情室，而不是一个会议室。随着时间的推移，这个会议室看起来更像一个开放式的共享工作空间。

这个项目失败的组织决定在没有与我们沟通或了解我们如何运作的情况下，复制我们的战略。一个大型会议室被预定了一个月，来自各个受影响的运营单位的代表们被召集进来，并告诉他们必须一起在那个会议室里工作。

这个组织没有看到我们所取得的相同结果，最终领导层的代表们主动联系了我们，问我们为什么会这样。由于没有研究我们的成功，他们只好再次研究自己的失败。

我理解他们的沮丧。毕竟，他们完全按照我们的流程进行操作，却得到了不同的结果。至少从他们的角度来看是这样的，但当他们征求我的意见时，我注意到他们错过了战情室中的一个关键因素。

他们把错误的人放了进去。

## 工作小组与委员会

在本书中，我提到过一些结构，它们涉及一小群人，为更大的团队提供建议、制定计划，并在某些时候将工作委派出去。这些就是工作小组。近年来，*工作小组*这个词变得流行，取代了*委员会*一词，因为对大多数人来说，委员会听起来有些官僚化。委员会有着什么都做不成的名声，或者更糟糕的是，它们通过妥协来推动工作。就像那句老话说的，骆驼是由委员会设计出来的马。

工作小组没有这些包袱，因此人们经常会说他们想要成立一个工作小组，结果却转而成立了一个委员会——仿佛仅仅改变一个结构的名称就能让这个结构成为更有效的工具。更糟糕的是，大多数人已经无法区分工作小组和委员会的区别。这正是领导者在复制我们成功策略时忽视的地方。我们项目的战情室成员是工作小组，而失败项目的战情室成员则是委员会。

到底有什么区别呢？

工作小组放松了等级制度，允许人们跨组织单位解决问题，而委员会则既反映了组织边界，又强化了这些等级制度。我们的战情室由软件工程师和网络管理员组成。我们将需要共同合作实施项目的人聚集在同一个房间里，肩并肩工作，而不是通过电子邮件、上级和无数的电话会议进行沟通。

另一方面，失败的战情室由高层管理人员组成。这个战情室并没有将报告给不同指挥链的同事聚集在一起，而是仅仅模仿了现有的结构和组织内部的政治。更糟糕的是，大多数这些高管的日常工作几乎完全由会议构成。他们并没有和同事肩并肩地工作，而是将战情室当作一个放置自己物品的地方，在此匆忙进出其他会议室，继续进行日常工作。

工作小组是面向内部的；工作小组的客户是工作小组的成员。人们加入工作小组是为了与同侪分享自己的知识和经验。工作小组之所以有效，是因为它为跨组织合作和问题解决提供了空间。组织中的执行层人员可以向那些已经经历过类似挑战的同行提出自己的问题，并听取他们的经验或与他们交换想法。有时这会导致对领导层的建议，但工作小组的主要目的是解决问题并在整个组织或行业中进行宣传。工作小组通常由组织执行层的人员发起和组成。

委员会的成立是为了为委员会外部的听众提供建议，通常是为高级领导提供建议。而工作小组则向那些认为自己与工作小组主题领域相关的人开放，委员会由它们所服务的实体选定，通常对其他人封闭。这个外部权威决定了委员会的范围和目标。委员会向外部权威报告，并且仅为其利益存在。

委员会通常会有很多程序性规定，但没有主席和*罗伯特议事规则*，并不意味着委员会就是一个工作小组。

这种模式可能会有很大的变化。例如，黄色警戒小组可能不是自我选择的，忽视其建议可能会带来严重后果，但黄色警戒小组的目的是暂时重新组织和重新分配资源。这个小组最终向一个更接近同级别而非高层的领导汇报。重要的结论是，工作小组放松了组织边界，而委员会则强化了这些边界。

高级管理人员在战情室里代表他们的部门，几乎没有什么价值。由于他们并没有直接实施技术，他们无法在没有回去向自己团队的工程师请教的情况下，说明哪些妥协措施能够推动项目进展。我们的战情室之所以成功，是因为它缩短了这些对话所需的时间距离。失败的战情室则在现有的沟通障碍上又增加了一层“电话游戏”。人们永远无法确信，战情室传递出的信息是否准确，或者代表你的经理是否误解了某个实现细节。

有个有趣的故事：我曾不时地组织一些由高级管理人员组成的战情室。每当组织处于一种极度恐慌的状态，高层领导们开始对自己的团队进行微观管理时，我就会采取这种策略。如果软件工程师将所有时间都花在开会向经理汇报问题，他们是无法解决问题的。必须把“靴子”从他们的脖子上拿下来。

在那种情况下，我的团队通常会组织两个战情室：一个让工程师们一起解决问题，另一个则配备了大量的华丽仪表盘，用来让我照看高级管理人员。一个领导者最有价值的技能，就是知道何时需要退出，让团队自主运作。

## 成功如果没有定义，是不明显的

如果现代化项目没有清晰的成功定义，它们会发现自己在接近终点时，终点反而越来越远。不要认为成功是显而易见的。你团队的不同成员可能对“更好”有不同且相互竞争的看法。每个人都需要能够解释他们是如何知道自己的努力正在推动项目向前发展的，这样大家才能合作。需要像遗留系统现代化这种极端努力的项目，解决问题的需求永远不会短缺。通过定义成功，你能够防止终点线不断移动。

在下一章中，我将解释如何在日常维护中保持软件，以避免首先需要进行遗留系统现代化的情况。现代化工作的终点不一定是所有问题都解决，技术也达到完美。我至今还没有遇到过可以用这种方式描述的系统，我曾为从成立六个月到已经存在 200 年的组织工作过。所有技术都是不完美的，因此遗留系统现代化的目标不应是恢复神话般的完美，而是将系统带入一个可以围绕安全性、稳定性和可用性保持现代最佳实践的状态。
