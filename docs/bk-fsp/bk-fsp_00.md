## 前言

从一开始，.NET 框架的一个承诺就是*语言互操作性*；也就是说，面向该平台的开发者可以用一种语言编写代码，并通过*公共语言基础结构（CLI）*与另一种语言编写的代码进行交互。

早期的示例通常包括一个用 C# 编写的库，利用了一个用 Visual Basic 编写的库，反之亦然。理想情况下，这样可以让开发者使用最适合解决问题的语言来解决不同的问题。但实际上，事情并非如此，因为开发者往往会选择 C# 或 Visual Basic 并用它来构建整个解决方案。这一点并不奇怪，因为历史上，除少数例外，语言之间的差异主要是语法上的（而且随着平台的成熟，这些语言之间的差异也越来越小）。

现在，经过十多年，F# 已经成为 .NET 生态系统中的第三大主要语言。但 F# 提供了什么是传统 .NET 语言所没有的，为什么你应该关心它？

F# 将函数式编程引入了 .NET 开发。虽然 C# 和 Visual Basic 都具备一些函数式特性，但它们首先是面向对象的语言；它们主要关注行为和管理不断变化的系统状态。相比之下，F# 是一种函数式优先的语言，关注的是将函数应用于数据。这种差异不仅会对你编写代码的方式产生深远影响，还会影响你如何思考代码。

当你阅读本书时，你将会了解 F# 的函数式特性如何强制实施各种限制，虽然这些限制一开始可能显得很局限，但一旦你接受了它们，你会发现你的代码更小、更正确、更可预测。此外，你还会发现 F# 的许多独特构造如何简化常见的开发任务，从而让你能够专注于解决你正在尝试解决的问题，而不是编译器要求的复杂设置。这些特点使得 F# 成为 C# 和 Visual Basic 的完美补充，常常为实现 .NET 的混合语言解决方案目标铺平道路。

## 本书适合谁阅读？

自 2002 和 2003 年 .NET 平台的早期公开发布以来，我一直在使用 C# 专业开发软件。因此，我写这本书是为了像我一样的人：那些有经验的 .NET 开发者，希望在保留已用工具和库的安全网的同时，开始接触函数式编程。

本书虽然侧重于 .NET 开发，但经验丰富的开发者如果是从其他背景转向 F#，依然能在这些页面中找到大量有价值的内容，因为书中讨论的原则通常并不特定于某个平台。

## 本书如何组织？

*《F#书籍》*分为 12 章，旨在介绍 F#的各个主要语言特性。我建议你从头到尾阅读本书，而不是跳读，因为每一章都会建立在前一章介绍的概念之上。

+   ****第一章****。为你提供了对 F#的初步了解，并描述了它在.NET 生态系统中的位置。在本章中，你将学到开始使用 F#编码所需的知识，项目的结构，以及一些可能让新手感到困惑的细节。

+   ****第二章****。介绍了 F#交互式环境，这是一个不可或缺的*读取-评估-打印循环（REPL）*工具，随 F#一起提供。在这里，你将看到 F#交互式如何帮助你探索问题领域，甚至让你利用.NET 框架的全部功能将 F#作为脚本语言使用。

+   ****第三章****。讲解了 F#的基础知识。本章涉及的主题包括默认不可变性、绑定、核心数据类型、类型推断、命令式流程控制和泛型。尽管本章讨论的许多概念对于有经验的开发者来说可能比较熟悉，但我仍然鼓励你阅读，因为 F#经常允许你以意想不到的方式使用它们。

+   ****第四章****。深入探讨了 F#的面向对象功能。本章中，你将看到如何开发出与 C#或 Visual Basic 等更成熟的面向对象语言一样强大的对象模型。

+   ****第五章****。带你进入托管函数式编程的旅程，介绍了函数作为数据、柯里化、部分应用和委托等概念。此外，你还将了解一些典型的与函数式编程相关的 F#数据结构。

+   ****第六章****。探讨了各种.NET 集合类型，如数组和序列，在 F#中的表示方式。你还将接触到几种新的集合类型，包括 F#的列表、集合和映射。

+   ****第七章****。介绍了 F#最强大的构造之一：匹配表达式。在这一章，你将揭示如何在一个表达式内分解复杂类型并分支代码。

+   ****第八章****。展示了如何通过对数字类型强制使用度量单位（如英寸、英尺、米等）为代码增加额外的安全性。

+   ****第九章****。解释了引号表达式——F#版的 LINQ 表达式树。在这里，你将看到如何组合、拆解和应用引号表达式。

+   ****第十章****。探索一些 F# 特有的访问数据方式，包括查询表达式和 F# 最令人兴奋的特性之一：类型提供器。

+   ****第十一章****。简要介绍了使用 F# 进行异步和并行编程。主题包括如何从 F# 中使用任务并行库、异步工作流以及基于代理的编程，使用 `MailboxProcessor<'T>`。

+   ****第十二章****。讨论如何创建计算表达式（在其他函数式语言中通常称为 *单子*）以控制数据从一个表达式流向另一个表达式。

## 附加资源

作为由 F# 软件基金会管理的开源语言，F# 得到了全球各领域开发者的支持，涵盖了广泛的学科。虽然我在整本书中尽力提供了全面的解释和示例，但如果你希望更深入地探索某个主题，以下资源可能对你有所帮助。

+   *****The Book of F#* 陪伴页面 *([`nostarch.com/f_sharp`](http://nostarch.com/f_sharp))*****。这是你获取内容更新和本书中使用的代码示例的来源。

+   ****F# 软件基金会** ***([`fsharp.org/`](http://fsharp.org/))*****。这里应该是你的第一站。在这里，你可以找到所有语言文档的链接，包括语言参考、语言规范、组件设计指南等。

+   ****F# for Fun and Profit** ***([`fsharpforfunandprofit.com/`](http://fsharpforfunandprofit.com/))*****。在这里，你会找到涵盖几乎所有语言方面的大量示例。

+   ****Try F#** ***([`www.tryfsharp.org/`](http://www.tryfsharp.org/))*****。这个基于浏览器的工具让你通过引导教程实验语言并学习它。
