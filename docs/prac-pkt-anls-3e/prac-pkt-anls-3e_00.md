## 前言

![image](img/common.jpg)

这本*实用的数据包分析*的第三版是在 2015 年底到 2017 年初之间的一年半时间里编写和编辑的，大约是在第二版发布后 6 年，原版发布后的 10 年。这本书包含了大量新的内容，完全新的捕获文件和场景，并且增加了一个全新的章节，介绍了如何通过命令行使用 TShark 和 tcpdump 进行数据包分析。如果你喜欢前两版，那么你一定会喜欢这一版。它保持了相同的风格，解释简单易懂。如果你因为前两版没有包括最新的网络或 Wireshark 更新信息而犹豫过，那你一定会想读这一版，因为它扩展了新网络协议的内容，并且提供了关于 Wireshark 2.*x*的更新信息。

### 为什么选择这本书？

你可能会想，为什么你应该购买这本书，而不是其他任何一本关于数据包分析的书？答案就在于书名：*实用的数据包分析*。说实话——没有什么比实际经验更有价值，而在书本中，最接近这种经验的就是通过实际示例和真实场景来呈现。

本书的前半部分将为你提供理解数据包分析和 Wireshark 所需的知识。后半部分则完全专注于你在日常网络管理中可能遇到的实际案例。

无论你是网络技术员、网络管理员、首席信息官、桌面技术员，还是网络安全分析员，你都会从理解并使用本书中描述的数据包分析技术中获益良多。

### 概念与方法

我通常是个非常随和的人，因此当我讲解一个概念时，我尽量以一种非常轻松的方式进行。这一点在本书的语言中也有所体现。技术术语很容易让人迷失，但我尽力保持内容尽可能简单。我已经清晰地定义了所有术语和概念，没有任何多余的修饰。毕竟，我来自肯塔基州，所以我尽量避免使用复杂的词汇。（不过，你得原谅我在文本中使用的一些乡土语言。）

前几章对理解本书的其余部分至关重要，因此请务必先掌握这些章节中的概念。后半部分完全是实践内容。你可能不会在工作中遇到完全相同的场景，但你将能够将它们教授的概念应用到你实际遇到的情况中。

以下是本书内容的快速概述：

**第一章：数据包分析与网络基础**

什么是数据包分析？它是如何工作的？你如何进行数据包分析？本章介绍了网络通信和数据包分析的基础知识。

**第二章：接入网络线**

本章介绍了将数据包嗅探器放置在网络上的不同技术。

**第三章：Wireshark 简介**

在这一部分，我们将了解 Wireshark 的基础知识——它来自哪里、如何使用、它能做什么、为什么它很棒，以及所有相关的内容。本版本新增了关于使用配置文件定制 Wireshark 的讨论。

**第四章：处理捕获的数据包**

当你启动并运行 Wireshark 后，你需要了解如何与捕获的数据包进行交互。在这一部分，你将学习一些基础知识，包括关于跟踪数据包流和名称解析的更详细的新内容。

**第五章：Wireshark 的高级功能**

一旦你学会了如何入门，就该加速前进了。本章深入探讨 Wireshark 的高级功能，带你深入幕后，展示一些不太显眼的操作内容。这里包括关于跟踪数据包流和名称解析的全新、更详细的章节。

**第六章：命令行上的数据包分析**

Wireshark 很棒，但有时你需要离开图形界面的舒适区，通过命令行与数据包进行交互。本章将向你展示如何使用 TShark 和 tcpdump，这两款最适合此任务的命令行数据包分析工具。

**第七章：网络层协议**

本章通过检查 ARP、IPv4、IPv6 和 ICMP，展示了常见网络层通信在数据包层级的表现。要在实际场景中排除这些协议的问题，首先需要理解它们的工作原理。

**第八章：传输层协议**

本章讨论了两种最常见的传输协议，TCP 和 UDP。你查看的大多数数据包都会使用这两种协议之一，因此了解它们在数据包层级的表现及其差异非常重要。

**第九章：常见上层协议**

本章继续讨论协议，展示四个最常见的上层网络通信协议——HTTP、DNS、DHCP 和 SMTP——在数据包层级的表现。

**第十章：基础的真实世界场景**

本章包含了一些常见流量的分析和第一批真实世界的场景。每个场景都以易于跟随的格式呈现，给出问题、分析和解决方案。这些基础场景只涉及少数几台计算机，并进行有限的分析——刚好足够让你入门。

**第十一章：应对缓慢的网络**

网络技术人员最常听到的问题通常涉及网络性能缓慢。本章专门解决这类问题。

**第十二章：安全性数据包分析**

网络安全是信息技术领域最热门的话题之一。第十二章向你展示了与解决安全相关问题的数据包分析技术的应用场景。

**第十三章：无线数据包分析**

本章是无线数据包分析的入门。它讨论了无线分析与有线分析之间的区别，并包括了一些无线网络流量的示例。

**附录 A：进一步阅读**

本书的第一个附录建议了一些你在继续使用你所学的数据包分析技术时可能会发现有用的参考工具和网站。

**附录 B：数据包导航**

如果你想深入理解如何解析单个数据包，本书的第二个附录提供了有关数据包信息如何以二进制格式存储，以及如何将二进制转换为十六进制表示法的概述。接下来，它会向你展示如何使用数据包图示解析以十六进制表示的数据包。如果你打算花大量时间分析自定义协议或使用命令行分析工具，这一点将非常有用。

### 如何使用本书

我希望这本书有两种使用方式：

•     *作为一本教育性读物。* 你将逐章阅读，特别注意后面章节中的实际场景，以便理解数据包分析。

•     *作为参考资料。* Wireshark 中有一些功能你可能不会经常使用，因此你可能会忘记它们的工作原理。*《实用数据包分析》*是一本很适合放在书架上的书，当你需要快速回顾如何使用某个特定功能时，它会派上用场。在做数据包分析时，你可能会想参考我提供的独特图表、图示和方法论。

### 关于示例捕获文件

本书中使用的所有捕获文件都可以从本书的 No Starch Press 页面获取，* [`www.nostarch.com/packetanalysis3/`](https://www.nostarch.com/packetanalysis3/)*。为了最大化本书的潜力，下载这些文件并在跟随示例时使用它们。

### 乡村技术基金

我无法写出一篇介绍，而不提到*《实用数据包分析》*带来的最大亮点。在本书第一版发布后不久，我创办了一个 501(c)(3)非营利组织——乡村技术基金（RTF）。

即便是那些成绩优异的农村学生，往往也比城市或郊区的同龄人更少接触到科技。RTF 成立于 2008 年，是我最大梦想之一的结晶。它旨在缩小农村社区与城市和郊区之间的数字鸿沟。RTF 通过定向奖学金项目、社区参与、向教室捐赠教育技术资源以及在农村和高贫困地区广泛推广和倡导科技来实现这一目标。

2016 年，RTF 成功将科技教育资源交到美国农村及高贫困地区超过 10,000 名学生手中。我很高兴地宣布，本书所有的作者所得将直接捐赠给 RTF，以支持这些目标。如果您想了解更多关于农村科技基金的信息或如何参与捐赠，请访问我们的网站 *[`www.ruraltechfund.org/`](http://www.ruraltechfund.org/)*，或在 Twitter 上关注我们 @RuralTechFund。

### 联系我

我总是很高兴收到读者对我的写作的反馈。如果您有任何问题、评论、建议或婚姻提议，欢迎直接通过 *chris@chrissanders.org* 联系我。我也会定期写博客，您可以访问 *[`www.chrissanders.org/`](http://www.chrissanders.org/)*，同时也可以在 Twitter 上关注我 @chrissanders88。
