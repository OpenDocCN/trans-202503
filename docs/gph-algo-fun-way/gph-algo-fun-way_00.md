

# 简介



![](img/opener.jpg)

本书是一本面向程序员的图及其算法入门书，旨在帮助读者理解并应用这些算法。图是一种数据结构，广泛应用于数学、计算机科学以及许多其他领域，用来建模和解决各种现实世界中的问题。图的结构使我们能够表示项目之间的连接或关联。理解这种结构对于充分利用图的强大功能并高效地使用它们至关重要。

*Graph Algorithms the Fun Way*（《有趣的图算法》）源自我之前的书《Data Structures the Fun Way》（《有趣的数据结构》）（No Starch Press，2022）中的图章节，当时我写道：“我们可以为这一单一且深远影响的数据结构专门写一本书。”然而，这本书仍然只是触及了图算法的激动人心且强大的世界的表面，这是一个历史悠久且仍在研究的领域。全面覆盖所有图技术及其相对优点将需要多卷巨著，而且一旦印刷就会过时。相反，这本书旨在为首次接触这一激动人心领域的人提供基础。

本书首先介绍图的组成部分，然后深入探索各种图算法及其在现实世界问题中的应用。这不仅仅是一本常见算法的食谱。它的目标是帮助读者理解算法背后的思想，并培养出将书中概念应用于其他技术的直觉。

## 这本书适合谁？

本书适用于那些希望深入了解图、图算法及其背后计算思维的程序员。我假设读者没有图或图算法的基础知识。然而，读者应具备通过入门课程、书籍或训练营所能预期的基本 Python 知识。他们应熟悉基本的 Python 编程概念，包括列表和字典等基本数据结构。

我希望这本书对广泛的读者群体都有用，而不仅仅是第一次学习图算法的程序员。书中使用的示例和隐喻旨在提供一种替代视角，以不同于标准数学定义的方式来看待这些主题。高级学生和经验丰富的计算机科学家可能会发现一种新视角，帮助他们理解特别困难或棘手的课题。

## 类比和示例

本书通过一系列真实世界和荒诞的示例与类比来补充正式的描述和代码。图的结构使它们非常适合用来通过冒险者探索迷宫或规划未知城市的旅行故事来展示算法。这些示例和类比的目标是双重的。首先，它们激发了算法本身，并阐明了我们为什么关心它们所解决的问题。其次，它们提供了另一种可视化这些问题的方法，帮助读者摆脱技术细节和琐碎问题。

## 语言与编码规范

我选择使用 Python 来展示示例代码，因为它的广泛使用和可读性。然而，其他语言的爱好者不必担心，因为代码背后的概念是与语言无关的。图算法已经在多种语言中实现，本书中的所有代码示例都可以超越 Python 进行适配。

本书中的代码遵循常见的 Python 编程规范。为了让代码更加清晰，我使用了类型提示，如以下代码块所示：

```
def is_edge(self, from_node: int, to_node: int) -> bool:
    return self.get_edge(from_node, to_node) is not None 
```

输入参数列出了预期的类型，如 int，函数定义描述了预期的返回类型（bool）。

本书中的代码使用了多个核心 Python 库。由于文件中的多个函数通常使用相同的库，因此单个代码片段并没有明确包含 import 语句。实现代码的用户需要确保导入相关的库。若有歧义，我将在代码的文字描述中指出所需的库。

本书中使用的标准 Python 库包括：

csv

copy

itertools

math

队列

random

typing（用于 Union）

typing 库特别用于一些代码片段，以支持多个返回值的函数类型提示。

此外，附录 B 定义了一个自定义的 PriorityQueue 类，供多个示例使用，附录 C 定义了一个简化的 UnionFind 数据结构。

本书中的代码结构尽可能独立运行，只需要这些核心的 Python 库。这意味着我有时不会利用现有的优秀库。例如，在第一章中，我将矩阵表示为列表的列表，而不是利用专门优化矩阵操作的numpy库。我会指出现有库可以很好地适配的情况，但将这些库的集成作为读者的练习。

我还将书中的许多实现写得比严格必要的更加冗长，以便更好地关注背后的计算概念。这意味着，单个实现可能被分解为额外的阶段，以便说明计算概念，或结构方式与解释相匹配，或者可能没有完全优化。此外，为了保持示例的简洁，我通常省略了对于生产程序至关重要的基本有效性检查。请将这些示例视为一般概念的插图，而不是可以照抄到自己项目中的代码。

## 术语和定义

由于图算法在多个领域中都被研究，因此有时同一基本概念会有多个术语。例如，图中的连接通常也被称为*边*或*弧*。我在引入每个概念时会进行定义，并指出读者在其他参考资料中可能会看到的一些替代名称。

在其他情况下，相同的术语在不同领域中有不同的使用方式。特别是，在数学的正式图论和计算机科学研究中，几个关键术语的定义多年来发生了偏差。例如，在数学中，图中的*路径*不能包含重复的节点，而在计算机科学中，通常是可以的。当定义不同时，我通常使用计算机科学中的常见用法，并在文本中注明差异。

## 如何使用本书

本书结构是渐进式的，后续章节建立在前面章节的基础上。第一部分建立了后续章节依赖的概念基础：

**第一章：图的表示**介绍了图的结构，讨论了邻接表和邻接矩阵的图表示，并提供了全书其他部分使用的实现方法。

**第二章：邻居与邻域**涵盖了邻接节点的核心概念、构建邻居集合的基本算法以及一些理解节点周围局部连接性的基本度量。

**第三章：图中的路径**讨论图中的路径，并介绍了多种表示方法，包括节点列表、边列表和回指针列表。

后续章节相互独立，但仍会调用前面章节的概念。每一章节都围绕一个主题进行组织。第二部分重点介绍图中的搜索和最短路径：

**第四章: 深度优先搜索** 介绍了两种深度优先搜索的实现方法，一种是递归方法，另一种是基于栈的迭代方法，同时还讨论了如何在深度优先搜索树中编码搜索信息。

**第五章: 广度优先搜索** 探讨了广度优先搜索，讨论了其特性，并展示了如何利用该算法在无权图中找到最短路径。

**第六章: 解谜** 展示了如何使用图来编码谜题，并利用第四章和第五章中的搜索算法来解决这些谜题。

**第七章: 最短路径** 介绍了三种用于在加权图中寻找最短路径的算法：Dijkstra 算法、Bellman-Ford 算法和 Floyd-Warshall 算法。

**第八章: 启发式搜索** 描述了两种基于启发式的搜索方法，启发式贪心搜索和 A*搜索，并展示了它们如何利用关于节点潜力的启发式信息。

第三部分重点介绍图中的连通性和顺序问题：

**第九章: 拓扑排序** 讨论了将图的节点按拓扑顺序排序的问题，并介绍了两种实现该任务的算法：Kahn 算法和深度优先搜索的扩展版本。

**第十章: 最小生成树** 描述了两种用于寻找图中最小生成树的算法：Prim 算法和 Kruskal 算法，并展示了 Kruskal 算法背后的思想如何扩展到生成可解迷宫或聚类空间数据等问题。

**第十一章: 桥和关节点** 检视了基于深度优先搜索的算法，用于在图中找到桥和关节点。

**第十二章: 强连通分量** 探讨了 Kosaraju-Sharir 算法，用于识别有向图中的强连通分量。

**第十三章: 随机游走** 介绍了图上的随机游走，并讨论了马尔可夫链的概念，接着展示了如何在图中实现随机游走行为并从观察数据中估计出潜在的图结构。

第四部分介绍了图中的流量概念，并用它来解决特定的匹配问题：

**第十四章: 最大流算法** 定义了图中流量的概念和最大流问题，介绍了一种扩展的图数据结构以支持该问题，并描述了解决最大流问题的 Ford-Fulkerson 算法和 Edmond-Karp 算法。

**第十五章: 二分图匹配**介绍了图中的匹配任务和二分图的概念，然后重点讨论了在二分图中进行匹配的专门化方法。我们展示了如何使用最大流算法来解决二分图上的一种匹配问题。

**第 V 部分**通过图探索各种节点分配和路径规划问题：

**第十六章: 图着色**介绍了为图的节点分配颜色的问题，要求相邻的节点不能共享相同颜色，并探讨了解决该问题的多种算法。

**第十七章: 克里克、独立集和顶点覆盖**介绍了三种计算上具有挑战性的分配问题的算法：寻找最大克里克、寻找最大独立集和寻找最小顶点覆盖。

**第十八章: 图的巡回**探讨了三种路径规划问题：找到经过每个节点恰好一次的路径，找到经过每个节点恰好一次且最小化经过的边权重的路径，以及找到经过每条边恰好一次的路径。我们描述了前两个问题的困难性，但第三个问题有高效的解决方案。

附录提供了额外的函数和数据结构，有助于实现本书中的算法：

**附录 A**描述了程序化创建图的函数，包括从文件加载图。

**附录 B**定义了本书中算法所使用的可修改优先队列数据结构。

**附录 C**介绍了一个最小的UnionFind数据结构，必要时用于实现第十章中的一些算法。

在本书中，读者应关注*如何？*和*为什么？* 如何将这个现实问题映射到图的表述中？*为什么*某种方法能帮助我们计算解决方案？*如何*利用图的结构来解决问题？*为什么*我们关心这个问题？*如何*将这些算法应用于不同的问题？*为什么*作者使用那个荒谬的类比？理解这些问题的答案将为你提供有效使用现有算法并在未来开发自己技术的基础。
