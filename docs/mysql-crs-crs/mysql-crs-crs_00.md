# 前言

![](img/chapterart.png)

在 1980 年代中期，我获得了我的第一份软件开发工作，这让我接触到了*关系数据库管理系统*（*RDBMS*），它是一个用于存储和检索数据库数据的系统。这个概念自 1970 年以来就存在，当时 E.F. Codd 发表了他的著名论文，介绍了关系模型。术语*关系*指的是数据以行和列的网格形式存储，也就是通常所说的表格。

在我刚开始时，商业数据库系统并不普遍。事实上，我并不认识其他在使用数据库的人。我使用的 RDBMS 并不完美，没有图形界面，命令行界面经常无缘无故崩溃。由于万维网尚未发明，我无法通过网站寻求帮助，只能重新启动系统，抱着希望开始新的尝试。

尽管如此，这个想法还是相当不错的。我将大量数据存储在我根据要存储信息的性质创建的表格中。我定义了表格的列，从文件中将数据加载到表格中，并使用*结构化查询语言（SQL）*对数据进行查询，这是一种与数据库互动的语言，允许我快速添加、更改和删除多行数据。我可以利用这项技术管理整个公司的数据！

如今，关系数据库管理系统无处不在，感谢它们比我在 80 年代使用的那些老旧系统更加稳定和先进。SQL 也得到了极大的改进。本书的重点是 MySQL，它自 1995 年创建以来，已经成为全球最受欢迎的开源 RDBMS。

## 关于本书

本书将教你使用 MySQL 的社区版服务器（也称为社区版），它是免费的，并且具有大多数人所需的功能。MySQL 还有付费版本，包括企业版，提供额外的功能和能力。所有版本都能在各种操作系统上运行，如 Linux、Windows、macOS，甚至是云端，并且拥有一套强大的功能和工具。

在本书中，你将探索 MySQL 开发中最有用的部分，并了解我多年来积累的经验。我们将涵盖如何编写 SQL 语句；创建表格、函数、触发器和视图；以及如何确保数据的完整性。在最后三章中，你将通过实际项目看到如何在现实世界中使用 MySQL。

本书分为五个部分：

**第一部分：入门**

第一章：安装 MySQL 和工具 介绍了如何下载 MySQL，并提供了一些在不同操作系统上安装的技巧。你还将安装两个访问 MySQL 的工具：MySQL Workbench 和 MySQL 命令行客户端。

第二章：创建数据库和表定义了数据库和表，并展示了如何创建它们。你还将为表添加约束，以强制执行有关它们将允许的数据的规则，并看到如何通过索引加速数据检索。

**第二部分：从 MySQL 数据库选择数据**

第三章：SQL 简介介绍了如何查询数据库表以选择你希望显示的信息。你将对结果进行排序，给 SQL 代码添加注释，并处理空值。

第四章：MySQL 数据类型讨论了你可以用来定义表中列的数据类型。你将学习如何定义用于存储字符串、整数、日期等的列。

第五章：连接数据库表总结了你可以一次从两个表中选择数据的不同方式，涵盖了主要的连接类型，以及如何为列和表创建别名。

第六章：执行复杂的多表连接展示了如何连接多个表，并使用临时表、公共表表达式、派生表和子查询。

第七章：比较值引导你进行 SQL 中的值比较。例如，你将学习如何检查一个值是否等于另一个值、是否大于另一个值，或者是否在一系列值范围内。

第八章：调用内置 MySQL 函数解释了什么是函数，如何调用函数，以及最有用的函数是什么。你将了解涉及数学、日期和字符串的函数，并使用聚合函数处理一组值。

第九章：插入、更新和删除数据描述了如何在表中添加、更改和删除数据。

**第三部分：数据库对象**

第十章：创建视图探讨了数据库视图，或基于你创建的查询的虚拟表。

第十一章：创建函数和存储过程展示了如何编写可重用的存储过程。

第十二章：创建触发器解释了如何编写在数据发生变化时自动执行的数据库触发器。

第十三章：创建事件展示了如何设置基于预定计划运行的功能。

**第四部分：高级主题**

第十四章：技巧与窍门讨论了如何避免一些常见问题，支持现有系统，并将数据从文件加载到表中。

第十五章：从编程语言中调用 MySQL 探讨了如何从 PHP、Python 和 Java 程序中调用 MySQL。

**第五部分：项目**

第十六章：构建天气数据库展示了如何使用 cron 和 Bash 等技术，将天气数据加载到运输公司的数据库中。

第十七章：使用触发器跟踪选民数据变化引导你通过构建选举数据库、使用数据库触发器来防止数据错误，并跟踪用户对数据的更改。

第十八章：使用视图保护薪资数据展示了如何使用视图来暴露或隐藏特定用户的敏感数据。

每一章都包括“自己尝试”练习，帮助你掌握书中讲解的概念。

## 本书适合谁阅读？

本书适合任何对 MySQL 感兴趣的人，包括 MySQL 和数据库的新手、希望复习的开发人员，甚至是从其他数据库系统转到 MySQL 的经验丰富的软件开发人员。

由于本书侧重于 MySQL 的*开发*而非*管理*，MySQL 数据库管理员（DBA）可能需要另寻他处。虽然我偶尔会涉及到与 DBA 相关的话题（例如授予表权限），但我不会深入探讨服务器设置、存储容量、备份、恢复或大多数其他与 DBA 相关的问题。

我设计本书是为 MySQL 初学者准备的，但如果您希望在自己的 MySQL 环境中尝试这些练习，第一章将引导您完成 MySQL 的下载和安装过程。

## MySQL 中的 SQL 与其他数据库系统中的 SQL

学习 SQL 是使用 MySQL 的一个重要部分。SQL 允许您从数据库中存储、修改和删除数据，以及创建和删除表、查询数据等。

除了 MySQL 之外，其他关系型数据库管理系统，如 Oracle、Microsoft SQL Server 和 PostgreSQL，也使用 SQL。从理论上讲，这些系统使用的 SQL 是根据美国国家标准协会（ANSI）规范进行标准化的。然而，在实践中，不同的数据库系统之间确实存在一些差异。

每个数据库系统都有自己的 SQL 扩展。例如，Oracle 提供了一种称为过程性语言/SQL（PL/SQL）的 SQL 扩展。Microsoft SQL Server 提供了 Transact-SQL（T-SQL）。PostgreSQL 提供了过程性语言/PostgreSQL（PL/pgSQL）。MySQL 没有给其扩展起一个花哨的名字，它只是简单地叫做 MySQL 存储程序语言。这些 SQL 扩展使用不同的语法。

数据库系统创建了这些扩展，因为 SQL 是一种*非过程性*语言，这意味着它非常适合从数据库中检索和存储数据，但它并不是像 Java 或 Python 这样的过程性编程语言，无法让我们使用 `if...then` 逻辑或 `while` 循环等。数据库的过程性扩展则增加了这些功能。

因此，尽管您从本书中学到的大部分 SQL 知识可以转移到其他数据库系统中，但如果您希望在 MySQL 以外的数据库系统上运行查询，某些语法可能需要调整。

## 使用在线资源

本书包含了许多示例脚本，您可以在[`github.com/ricksilva/mysql_cc`](https://github.com/ricksilva/mysql_cc)找到。这些脚本按照*chapter_X.sql*的命名约定，其中*X*是章节号。第十五章和第十六章有额外的脚本，位于名为*chapter_15*和*chapter_16*的文件夹中。

每个脚本都会创建与对应章节中展示的 MySQL 数据库和表格。该脚本还包含示例代码和习题的答案。我建议你自己尝试这些习题，但如果卡住了或者想检查答案，随时可以使用这个资源。

你可以浏览脚本并根据需要复制命令。从 GitHub 上，将命令粘贴到你的环境中，使用类似 MySQL Workbench 或 MySQL 命令行客户端的工具（这些工具在第一章中有讨论）。或者，你可以将脚本下载到你的计算机上。为此，进入 GitHub 仓库并点击绿色的**Code**按钮。选择**Download ZIP**选项，将脚本作为 ZIP 文件下载。

有关 MySQL 以及可用工具的更多信息，请访问[`dev.mysql.com/doc/`](https://dev.mysql.com/doc/)。MySQL 参考手册特别有用。MySQL Workbench 的文档可以在[`dev.mysql.com/doc/workbench/en/`](https://dev.mysql.com/doc/workbench/en/)找到，关于 MySQL 命令行的文档请查阅[`dev.mysql.com/doc/refman/8.0/en/mysql.html`](https://dev.mysql.com/doc/refman/8.0/en/mysql.html)。

MySQL 是一个非常棒的数据库系统，值得学习。让我们开始吧！
