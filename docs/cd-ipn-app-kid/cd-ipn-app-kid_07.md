## 6

## 将集合存储在字典和数组中

![图片](img/Image00001.jpg)

在前面的章节中，你学到可以将单个信息存储在变量或常量中。但如果你想存储一个集合，比如你去过的所有地方的名称或你读过的所有书籍呢？在这一章中，我们将向你介绍数组和字典。它们都用于存储值的集合。使用数组和字典，你可以一次性处理大量数据，使你的程序更加强大！

### 通过数组保持顺序

*数组* 是按顺序存储的同一数据类型项的列表，有点像编号的购物清单。数组中的项是通过它们的 *索引* 来存储的，索引是基于该项在数组中的位置的数字。

当你写购物清单时，通常会从数字 1 开始，但在计算机编程中，索引是从 0 开始的，而不是 1。因此，数组中的第一个项总是在索引 0 处，第二个项在索引 1 处，第三个项在索引 2 处，以此类推。

我们来创建一个数组。如果你已经知道要放入数组的内容，你可以直接创建它并用这些值进行*初始化*。在 Swift 中，初始化意味着赋予某个对象初始值，这样你就可以在程序中使用它。假设你想存储你去过的所有国家公园的列表。在你的 Playground 中输入以下内容：

![](img/Image00114.jpg)

这段代码创建了一个名为 `nationalParks` 的数组变量，并将其初始化为包含三个国家公园名称的数组。因为我们将这个数组初始化为存储字符串，所以你只能在其中存储字符串。

图 6-1 展示了你可以如何想象你的数组。它就像一排盒子，分别存放位于索引 0、1 和 2 处的三个国家公园的名称。记住，数组的索引总是从 0 开始！

![图片](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 `nationalParks` 数组是一个变量，因为我们用 `var` 关键字创建了它 ➊。存储在变量中的数组被称为 *可变* 数组。这意味着你可以通过添加、移除或替换其中的元素来修改它。

你还可以创建一个 *不可变* 数组。不可变数组是使用 `let` 关键字而不是 `var` 创建的。类似于常量，一旦不可变数组被创建，它其中的任何内容都不能被修改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道集合永远不会改变，像是存储彩虹的颜色，那么最好使用 `let`。如果你需要修改集合，比如存储你最喜欢的 T 恤的数组（这可能会根据流行趋势发生变化），那就应该使用 `var`！

![图片](img/Image00116.jpg)

#### 使用类型推断

当我们创建我们的 nationalParks 数组时，我们通过添加冒号 (: ) 和 [String] ➋ 来指定我们正在创建一个字符串值的数组。这个步骤在你创建数组并用一个或多个值初始化它时是可选的，因为 Swift 会使用类型推断来确定你想要数组包含的数据类型。这意味着你完全可以通过以下方式创建数组：

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化了这个数组来存储字符串，并且它只能存储字符串。

我们用来创建数组的公园列表是一个数组 *字面量* 的例子。字面量是一个值，它正是你所看到的。它不是一个变量或常量，而只是没有名称的值。 "Grand Canyon" 是一个字符串字面量的例子，而 7 是一个整数字面量的例子。数组字面量是一个包含在两个方括号之间、由逗号分隔的项目列表，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想要访问数组中的一个项目，并在程序中使用它。你的朋友要求你告诉他们所有关于你旅行的事情，所以你想使用你存储在数组中的国家公园名称。要访问数组中的一个项目，写下数组名称，后跟方括号内的项目索引：

![](img/Image00118.jpg)

在这个示例中，我们访问了国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个高于数组中最后一个索引的项目，你将得到一个错误。在 图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个项目）会给你一个错误，因为数组中只有三个国家公园，它们的索引从 0 到 2。

如你所见，你收到了一条错误信息，提示 "Index out of range"。如果你尝试访问一个不存在于数组中的项目，你的应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

改变数组的一种方式是向数组中添加新项目。有几种不同的方法可以做到这一点，让我们看一下每种方法。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某个东西。使用 append(_:) 方法，你可以将一个新项添加到数组的末尾。假设你进行了一次新的旅行，参观了坏 lands 国家公园，并且想将它添加到你的国家公园列表中。为此，你可以在你的 playground 中添加以下代码：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下你的数组名称，后跟一个句点，然后是 append。接着，将你想添加到数组中的项目放入括号内。在这个例子中，你将 "Badlands" 放入括号中。

如果你想在数组中的特定位置添加元素，请改用数组的 insert(_:at:)方法。此方法接受两个参数：你想插入的元素和它在数组中应该插入的位置（我们将在第七章中详细讨论参数）。

假设你完全忘记了在游览大峡谷后，你去了“化石森林”，你想更新你的 nationalParks 数组，使其按你访问的顺序显示这些公园。要更新数组，你可以使用 insert(_:at:)方法将“化石森林”放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入新元素时，所有原本位于索引 3 或更高位置的元素都会向后移动，为新元素腾出空间。这意味着，原本位于索引 3 的元素现在会位于索引 4，原本位于索引 4 的元素现在会位于索引 5，依此类推。在你添加了“化石森林”后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新元素，还可以使用+和+=运算符将两个数组合并在一起。假设你有两个数组，分别存放了水果奶昔的配料：

![](img/Image00122.jpg)

现在你可以通过添加水果和液体数组来制作美味的奶昔。

![](img/Image00123.jpg)

奶昔中配料的顺序与水果和液体的顺序相同。如果你是用液体 + 水果来制作奶昔，那么液体应该先放。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。如下所示，加入一些奶油以增加美味：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一个元素。当你使用+=运算符将元素追加到数组时，必须确保你只尝试添加另一个数组。如果你只是写上字符串"whipped cream"，而没有用方括号括起来，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

从数组中移除元素有几种方法。首先让我们来看一下数组的 removeLast()方法。顾名思义，removeLast()会移除数组中的最后一个元素。我们可以用 shoppingList 数组来试试这个方法：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的元素，因此如果你想，你可以将它存储到一个新的常量或变量中。

你也可以通过使用 remove(at:)方法从特定的索引中移除元素。假设你的妈妈不让你买糖果，并将其从购物清单中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加元素时，所有元素都会向后移动腾出空间一样，如果你从数组中间移除元素，其余的元素也会向前移动填补空缺。原本在索引 3 位置的"apples"元素，现在会移动到索引 2 的位置，那里曾经是"candy"。

你也可以使用 removeAll() 来移除数组中的所有项。尝试将这个输入到你的 playground 中：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），所以这会引发错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组中没有任何内容——根本没有最后一个索引！然而，使用 removeAll() 永远是安全的，即使在空数组上。

#### 替换数组中的项

要替换数组中的某个项，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三项）的项替换为 "独角兽"，因为魔法动物也是喜欢的动物！在 ➋ 处，我们将索引为 0（第一项）的项替换为 "胡须龙"。不，那不是一条真正的龙——它只是一个蜥蜴！

就像在操作数组索引时一样，你必须确保在改变数组某个索引位置的值之前，该位置已经有项，否则会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 来添加 "标准贵宾犬"，会发生的错误。要将项添加到数组的末尾，你应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加项” 中讨论的那样，见 第 70 页 。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引位置的值。*

现在你已经知道如何根据需要修改数组。你可以添加项、移除项或替换项。接下来，我们将看看如何使用数组的属性来了解更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法，数组还有 *属性* 。数组的属性是包含有关数组的一些信息的变量或常量。有两个非常有用的属性，你可能会用到：布尔属性 isEmpty 和整数属性 count 。

isEmpty 属性是一个布尔值，表示数组是否为空，而 count 属性则告诉你数组中有多少项。

看看这两个属性在以下 if-else 语句中的使用方式：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印 "我没有兄弟姐妹。" 如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋ 。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项做一些操作。你可以使用 for-in 循环来实现！以下代码将在每一行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，再加上关键字 in，最后是数组的名称 pizzaToppings。然后我们把要在每个 topping 上执行的语句放在 for-in 循环的大括号中。常量 topping ➊ 临时代表数组中每个比萨配料，当我们遍历它时。我们可以为这个常量选择任何名称，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：for-in 循环示例的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以利用它对每个项执行数学运算，这使得计算速度更快！下面的代码接收一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序的索引，每个值都有自己的 *键* 。由于没有索引，值并没有按照特定的顺序存储。要访问字典中的值，你需要通过键来查找它们。

一个键必须是唯一的。在同一个字典中，不能有相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就不知道该选择哪个！

让我们来看看如何创建一个字典，并编写键来帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后在一对方括号内写下键和值，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，因为它们是 *无序的* 。因此，你看到的结果面板中的州的顺序 ➋ 可能与输入这些州时的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不一定与值的类型匹配。例如，如果你想存储一组分数，你可以将双精度数值用作键，将字符串用作值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型，所有的值必须是字符串类型。同样，你会发现结果面板中数字的顺序与在字典中编写分数的顺序可能非常不同。这是正常的，因为你不需要知道顺序来访问任何内容。你可以通过键找到你需要的任何项目。让我们看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问值的方式，只是你在方括号内使用的是键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式存在很大差异。当你访问数组中某个索引的值时，你会直接得到该值。而当你在字典中使用键访问值时，你得到的是一个可选值。

在第五章中，你学过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值，是因为你使用的键可能在字典中不存在，这种情况下就没有值可访问。尝试访问一个不存在的值会导致一个很大的错误！为了避免这个问题，Swift 返回了可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 来将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以输出了“我在字典中有 Texas。”接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问字典中没有的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，输出了“我在字典中没有那个州。”

#### 向字典中添加项目

要向字典中添加项目，首先写下字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们向 usStates 字典中添加“明尼苏达州”：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，所以你无需担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作原理和替换数组中的项一样。你只需要将你想替换的项设置为其他值。比如，你创建一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为"red"设置了值"apple"，但后来我们决定使用"raspberry"更合适，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]的值设置为新的值➊。

你可能还记得，这和我们将新值输入字典的方式一样。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性则可以检查字典中有多少项。想象你有一个待售的水果篮子。你可以使用这些属性帮助你追踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；values，包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来做这件事。这是通过字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来遍历 fruitBasket 并打印其内容。我们首先写上关键字 for，然后是一个常量名 fruit 作为字典键，接着是关键字 in，字典名称，一个句点，再加上 keys。

在我们的 for-in 循环的花括号内，我们可以访问到键，我们称之为 fruit ➋ ，以及当我们强制解包其内容时的值 fruitBasket[fruit]! ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们在 for-in 循环中放置的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但现在我们使用常量来引用 `values` 属性中的每个值，这个常量我们称之为 `price`。在遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，`price` 不是可选类型，因为它作为字典 `fruitBasket` 中的值被直接访问。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！并且由于顺序无法保证，如果你重新运行相同的代码，可能会看到不同的顺序。

### 你学到的知识

在本章中，你学会了如何将项目集合存储在数组和字典中。如果你要存储有序列表中的项目，你应该使用数组，并通过索引查找每个项目。如果你希望通过键来存储项目，则应该使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的工作。在你编写了一个函数之后，可以通过它的名称在程序的几乎任何地方调用它。

## 将集合存储在字典和数组中

![Image](img/Image00001.jpg)

在前面的章节中，你学习了如何将单个信息存储在变量或常量中。但如果你想存储一组信息，比如你访问过的所有地方的名称，或者你读过的所有书籍的名字呢？在本章中，我们将向你介绍数组和字典。它们都用于存储值的集合。通过使用数组和字典，你可以一次性处理大量数据，从而让你的程序变得更强大！

### 使用数组保持顺序

一个 *数组* 是按顺序存储的相同数据类型的项目列表，类似于有编号的购物清单。数组中的项目是通过其 *索引* 存储的，索引是基于项目在数组中的位置的数字。

当你写购物清单时，你通常从数字 1 开始，但在计算机编程中，索引是从 0 开始的，而不是从 1 开始。所以数组中的第一个项目总是在索引 0，第二个项目在索引 1，第三个项目在索引 2，以此类推。

让我们创建一个数组。如果你已经知道你将要放入数组的内容，你可以创建它并用这些值*初始化*它。在 Swift 中初始化某个东西是指给它一个初始值，以便你可以在程序中使用它。假设你想存储你访问过的所有国家公园的列表。请输入以下内容到你的 playground 中：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并使用三个国家公园的名称对其进行了初始化。因为我们初始化这个数组来存储字符串，所以它只能存储字符串。

图 6-1 展示了你可以如何想象你的数组。它就像一排盒子，包含了位于索引 0、1 和 2 的三个国家公园名称。记住，数组的索引总是从 0 开始！

![图片](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们是用 var 关键字 ➊ 创建它的。存储在变量中的数组叫做*可变*数组。这意味着你可以通过添加项、删除项或交换项来更改它。

你还可以创建一个*不可变*数组。不可变数组是使用关键词 let 而不是 var 创建的。类似常量，一旦不可变数组被创建，里面的内容就不能再改变。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如存储彩虹的颜色，最好使用 let。如果你需要改变集合，例如存储你最喜欢的 T 恤的数组，这些 T 恤可能会根据流行趋势发生变化，那么你应该使用 var！

![图片](img/Image00116.jpg)

#### 使用类型推断

当我们创建我们的 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 来指定我们正在创建一个字符串值的数组。此步骤在你创建一个数组并用一个或多个值初始化它时是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你也可以通过这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了这个数组来存储字符串，并且它只能存储字符串。

我们创建数组时使用的公园列表是数组*字面量*的一个例子。字面量是你所看到的确切值。它不是一个变量或常量，而仅仅是一个没有名字的值。“大峡谷”是一个字符串字面量的例子，7 是一个整数字面量的例子。数组字面量是一个包含在两个方括号之间并用逗号分隔的项列表，比如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项

假设你想在程序中访问数组中的某个项目并使用它。你的朋友请求你告诉他们你所有的旅行经历，所以你想使用存储在数组中的国家公园的名称。要访问数组中的某项，写下数组名称，后跟方括号内的项的索引：

![](img/Image00118.jpg)

在这个例子中，我们访问了国家公园的名称，并使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你使用 nationalParks[1]。

#### 监视范围

关于数组有一个重要的点，如果你尝试访问一个比数组中最后一个索引更大的索引，你将得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四项）会报错，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误信息，提示 Index out of range。如果你尝试访问数组中不存在的项，你的应用将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

更改数组的一种方法是向其中添加新项。对此有几种不同的方法，让我们逐一查看。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某物。使用 append(_:)，你可以将一个新项添加到数组的末尾。假设你又去了一个旅行，参观了坏 lands，想要将它添加到你的国家公园列表中。为此，请将以下代码添加到你的 playground：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下数组的名称，后跟一个句点，然后写 append。接着，将你要添加到数组的项放在括号内。在这个例子中，你将 "Badlands" 放在括号内。

如果你想在数组中的特定位置添加某项，请改用数组的 insert(_:at:) 方法。此方法接受两个参数：你要插入的项以及它在数组中应该放置的索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了在参观大峡谷后去了化石森林，你想更新你的 nationalParks 数组，使其显示你访问过的国家公园的顺序。为了更新你的数组，你可以使用 insert(_:at:) 方法将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入新项目时，数组中从索引 3 开始的所有项目都会向后移动，为新项目腾出空间。这意味着原本在索引 3 的项目现在会在索引 4，原本在索引 4 的项目会在索引 5，以此类推。加入“化石森林”之后，nationalParks 数组变成了["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以将新项目添加到数组中，还可以使用+和+=运算符将两个数组合并。假设你有两个数组，分别包含水果奶昔的配料：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组合并，做出美味的奶昔。

![](img/Image00123.jpg)

奶昔中的配料顺序与水果和液体的顺序相同。如果你先加入液体再加入水果，那么液体会排在前面。

你使用+=运算符将一个数组添加到数组的末尾。如下所示，加入一些鲜奶油，以增加美味：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一个项目。当你使用+=运算符将某个内容添加到数组时，必须确保你添加的是另一个数组。如果你只是写上字符串"whipped cream"，没有方括号包围，就会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。我们先来看一下数组的 removeLast()方法。顾名思义，removeLast()方法会移除数组中的最后一个项目。我们用一个 shoppingList 数组来尝试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项目，所以如果你愿意，可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:)方法从特定索引移除一个项目。假设你妈妈不希望你买糖果，并把它从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有项目会向后移动腾出空间一样，如果你从数组中间移除一个项目，剩余的项目会向前移动，填补空缺。"apples"原本在索引 3 的位置，现在位于索引 2，原本在该位置的"candy"被移除。

你也可以使用 removeAll()方法移除数组中的所有项目。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引位置的项目会抛出一个错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组里没有任何内容——根本没有最后一个索引！然而，removeAll()总是可以安全使用，即使是在空数组上。

#### 替换数组中的项目

要替换数组中的一个项目，你需要将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在➊处，我们用“独角兽”替换了索引 2（第三项）的项目，因为神奇的动物也算是喜欢的动物！在➋处，我们用“胡须龙”替换了索引 0（第一项）的项目。不是的，那不是一条真正的龙——它只是一只蜥蜴！

就像每次你处理数组索引时一样，你必须确保在更改某个索引的值之前，该索引在数组中存在，否则会出现“索引超出范围”错误。

图 6-3 显示了当你尝试通过 favoriteAnimals[3] = "Standard poodle"添加“标准贵宾犬”时会发生的错误。要将项目添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项”中第 70 页所讲解的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换数组中超出范围的索引的值。*

现在你已经知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将学习如何使用数组的属性获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值是 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

查看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印出“我没有兄弟姐妹。”如果数组中有内容，则打印出我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每一项执行相同的操作。你可以使用 for-in 循环来实现！以下代码将逐行打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用关键字 for，接着是常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接下来，我们将希望为每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时暂时表示数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名称是个好主意。你可以在图 6-4 中查看这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 `for-in` 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项目执行数学运算，这样可以快速进行计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典非常重要！

一个*字典*也是一个值的集合，但与数组不同，每个值都有自己的*键*。由于没有索引，值并不会按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，而你要求计算机给你其中一个的值，计算机将不知道选择哪个！

让我们来看一下如何创建一个字典，并写出帮助你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上`var`和字典的名称。然后在一对方括号中写上键和对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名字。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入州的顺序➊不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有键必须是双精度浮点数，所有值必须是字符串。同样，你会看到结果面板中的数字顺序可能与在字典中写入分数的顺序完全不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项。让我们来看看！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问一个值的方式，只不过你使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在返回字典中的值时有一个很大的区别。当你访问数组中的一个索引值时，你只是得到了值。而当你使用字典中的键访问值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能为 nil。当你在字典中查找项目时，Swift 返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可访问。试图访问一个不存在的值会导致一个大错误！为避免这个问题，Swift 返回可选值。这意味着你在对字典取值后，需要解包任何得到的值，才能对其进行操作。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中取出"Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出"I have Texas in my dictionary"。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出"I don't have that state in my dictionary"。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新的项目赋给你希望它在字典中对应的键。让我们把"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项目可能会出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需将该值设置为 nil。因为字典中的值是以可选值的形式返回的，所以你不必担心 nil 会导致字典中的任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"对应的值后，usStates 已经更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它与替换数组中的项目的方式相同。你只需要将要替换的项目设置为其他内容。比如你创建了一个表示水果颜色的字典：

![](img/Image00146.jpg)

最初我们为"red"设置了"apple"的值，但后来我们决定使用"raspberry"作为更好的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能记得这与我们向字典中添加新值的方式相同。如果字典中已经存在该键，那么该键的值将被替换。如果该键不存在，则新键/值对将添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则使用 count 属性检查字典中的项目数。想象一下你有一个待售的水果篮。你可以利用这些属性帮助你追踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码来遍历我们的水果篮，并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。由于每个项目都有一个键和值，因此你可以以两种不同的方式进行遍历。这是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后面跟着字典键的常量名 fruit，接着是关键字 in，字典名称，一个句点，然后是 keys。

在 for-in 循环的大括号内部，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包它的内容 fruitBasket[fruit]! ➌ 获得的值。该值将是水果的价格。

在这种情况下，强制解包该值是安全的，因为我们知道正在使用的水果键一定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，我们将其称为 price。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组中的项那样按编号顺序排列！并且由于顺序没有保证，因此如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学到了如何在数组和字典中存储项的集合。要在有序列表中存储项，你应使用数组，并通过其索引查找每一项。如果你想根据键存储项，你则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大基础。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完函数后，你可以通过它的名字从程序中的几乎任何地方调用它。

![Image](img/Image00001.jpg)

在前面的章节中，你学到了如何在变量或常量中存储单一的信息。但如果你想存储一组事物，比如你访问过的所有地方的名称或你读过的所有书的名称呢？在这一章中，我们将向你介绍数组和字典。它们都用于存储值的集合。通过使用数组和字典，你可以一次处理大量数据，并让你的程序更强大！

### 使用数组保持事务的顺序

*数组* 是一个按顺序存储相同数据类型的项的列表，就像是一个编号的购物清单。数组中的项是通过其 *索引* 来存储的，索引是一个基于项在数组中位置的数字。

当你写购物清单时，通常从数字 1 开始，但在计算机编程中，索引是从 0 开始的，而不是 1。所以数组中的第一个项目总是位于索引 0，第二个项目位于索引 1，第三个项目位于索引 2，依此类推。

让我们创建一个数组。如果你已经知道你要放入数组的内容，你可以创建它并用这些值进行 *初始化*。在 Swift 中初始化某个东西是指给它一个初始值，以便你在程序中使用它。假设你想存储一个你访问过的所有国家公园的列表。在你的 playground 中输入以下内容：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称对其进行了初始化。因为我们初始化了这个数组来存储字符串，所以你只能往其中放入字符串。

图 6-1 显示了如何想象你的数组。它就像是一排盒子，包含了三个国家公园的名称，分别位于索引 0、1 和 2。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变的数组

我们的 `nationalParks` 数组是一个变量，因为我们使用 `var` 关键字创建了它 ➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加项目、删除项目或替换项目来修改它。

你还可以创建一个*不可变*数组。一个不可变数组是使用关键字 `let` 创建的，而不是 `var`。类似于常量，一旦创建了不可变数组，数组中的任何内容都不能更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，例如存储彩虹的颜色，最好使用 `let`。如果你需要更改集合，例如存储你的最爱 T 恤的数组（这些可能会根据时尚变化），则应该使用 `var`！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 `nationalParks` 数组时，我们通过添加冒号（:）和 `[String]` ➋ 来指定我们正在创建一个字符串值的数组。当你创建一个数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定数组要存储的数据类型。这意味着你也可以像这样轻松创建数组：

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化了这个数组来存储字符串，而且它只能存储字符串。

我们创建数组时使用的公园列表是一个数组*字面量*的例子。字面量是一个值，正是你所看到的内容。它不是一个变量或常量，而是没有名称的值。"Grand Canyon" 是字符串字面量的例子，而 7 是整数字面量的例子。数组字面量是包含在两个方括号之间并用逗号分隔的项目列表，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项

假设你想在程序中访问一个数组项并使用它。你的朋友要求你告诉他们所有的旅行经历，所以你想使用存储在数组中的国家公园名称。要访问数组中的某个项目，只需编写数组名称，后跟项目的索引，索引位于方括号中：

![](img/Image00118.jpg)

在这个示例中，我们正在访问国家公园的名称，并通过使用 `print` 将它们打印到屏幕上。要获取 `nationalParks` 中的第一个项目，您可以使用 `nationalParks[0]` ➊。要访问 `nationalParks` 中的第二个项目，您可以使用 `nationalParks[1]`。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个比数组最后一个索引更高的索引，你会得到一个错误。在图 6-2 中，你可以看到 `nationalParks[3]`（即数组中的第四项）会报错，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，出现了一个错误信息：“Index out of range”。如果你尝试访问数组中不存在的元素，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加元素

改变数组的一种方法是向其中添加新元素。有几种不同的方法可以做到这一点，接下来我们来看看每种方法。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某个元素。通过 append(_:) 方法，你可以将一个新项添加到数组的末尾。假设你去了另一个地方，参观了坏 lands（Badlands），并希望将其添加到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

使用 append(_:) 方法时，首先写下数组的名称，后跟一个句点，然后是 append。接着，将你想要添加到数组中的项放入括号中。在这种情况下，你将“Badlands”放入了括号中。

如果你想在数组的特定位置添加元素，可以使用数组的 insert(_:at:) 方法。这个方法接受两个参数：要插入的元素和它应该放置的索引位置。（我们将在第七章 中详细讨论参数。）

假设你完全忘记了自己在参观大峡谷后立刻去过 Petrified Forest（化石森林），现在你想更新你的 nationalParks 数组，以便按照你参观的顺序显示公园。为了更新数组，你可以使用 insert(_:at:) 方法，将 Petrified Forest 插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项时，所有位于索引 3 或更高位置的元素都会被移动，以腾出空间给新项。这意味着原本在索引 3 处的元素现在位于索引 4，原本在索引 4 处的元素现在位于索引 5，以此类推。在你添加了“Petrified Forest”后，nationalParks 数组变为 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组添加新项，还可以使用 + 和 += 运算符将两个数组连接起来。假设你有两个数组，分别存储水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组结合起来，制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的原料顺序与 fruits 和 liquids 中的顺序相同。如果你用 liquids + fruits 来制作冰沙，那么液体会排在前面。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。为了让冰沙更加美味，可以像下面这样加入一些搅打奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 虽然只有一个元素，但它仍然是一个数组。当你使用 += 来追加元素到数组时，必须确保你只是在尝试添加另一个数组。如果你只是写下字符串 "whipped cream" 而没有加上方括号，你将会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。让我们从查看数组的 removeLast() 方法开始。如你所猜测的那样，removeLast() 会移除数组中的最后一项。让我们用一个购物清单数组来试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的项，所以如果你需要，你可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:) 方法从特定索引移除一项。假设你的妈妈不希望你买糖果并将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有其他项会往旁边移以腾出空间一样，如果你从数组中间移除一项，剩下的项会向后移，填补这个空位。原本位于索引 3 处的“苹果”项，现在位于索引 2 处，原本那里是“糖果”。

你也可以通过 removeAll() 移除数组中的所有项。试着在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引移除项将会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），因此会抛出一个错误。如果我们对空数组使用 removeLast()，也会出错，因为它里面什么也没有——根本没有最后一个索引！但是，removeAll() 在任何情况下都是安全的，甚至对于空数组也是如此。

#### 替换数组中的项

要替换数组中的一项，你需要将该索引的数组值设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三项）的项替换为“独角兽”，因为神奇的动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一项）的项替换为“有鬚龙”。不，那可不是一条真正的龙——它只是一种蜥蜴！

就像每次处理数组索引时，你必须确保数组中在该索引位置存在一个项，否则你会遇到索引超出范围的错误。

图 6-3 显示了当你尝试使用 favoriteAnimals[3] = "Standard poodle" 来添加“标准贵宾犬”时发生的错误。要将项添加到数组的末尾，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项” 中第 70 页 所讲的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道如何根据需要更改数组了。你可以添加项、移除项或替换项。接下来，我们将看看如何利用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_)和 removeLast()这样的函数外，数组还有*属性*。数组的属性是包含关于数组某些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空来返回 true 或 false，而 count 属性则告诉你数组中有多少项。

查看这两个属性在以下 if-else 语句中的使用方式：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印"我没有兄弟姐妹。"如果数组中有值，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项目执行相同的操作。你可以使用 for-in 循环来完成这个任务！以下代码会将 pizzaToppings 数组中的每个配料逐行打印出来：

![Image](img/Image00135.jpg)

要编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，再是关键字 in，最后是我们的数组名称 pizzaToppings。然后我们把想要在每个配料上执行的语句放在 for-in 循环的大括号内。常量 topping ➊临时代表我们遍历数组时的每个披萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项目进行数学运算，这样可以进行快速计算！以下代码将一个数字数组作为输入，并计算每个数字的平方（一个数字的平方是该数字乘以它本身）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。因为没有索引，值的存储顺序是无特定顺序的。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，而你要求计算机返回其中一个键的值，计算机就无法知道选择哪个！

让我们看看如何创建一个字典，并编写键来帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后将键和相应的值写在一对方括号中，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两位字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键与其值之间都有一个冒号，键值对之间用逗号分隔。

字典与数组不同，字典是*无序的*。因此，你在结果面板中看到的状态顺序➋可能与输入的状态顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不需要与值的类型相同。例如，如果你想存储一组分数，你可以使用双精度类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型（doubles），所有的值必须是字符串类型（strings）。再次提醒，你会发现结果面板中数字的顺序可能与字典中你输入的分数顺序完全不同。这是可以接受的，因为你不需要知道顺序就可以访问任何内容。你可以通过键来找到你需要的任何项目。让我们来看一下如何操作！

#### 在字典中访问值

在字典中查找一个值类似于在数组中访问一个值，不同之处在于你在方括号内使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值时有一个很大的不同。当你访问数组中的一个索引时，你只会得到值。当你使用字典中的键访问一个值时，你会得到一个可选值。

在第五章中，你已经学过可选类型（optionals）可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选类型的原因是你使用的键可能在字典中不存在，这种情况下是没有值可访问的。尝试访问不存在的值会导致一个严重错误！为了避免这个问题，Swift 返回的是可选类型。这意味着你需要在使用字典中的任何值之前解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中获取“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"]➊。因为我们在字典中有这个州，打印了"I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"]➋来访问字典中没有的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印了"I don't have that state in my dictionary."。

#### 向字典添加项目

要向字典中添加项目，首先写下字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能出现在字典的任何位置。

#### 从字典中删除项目

从字典中删除项目相当简单；你只需将值设置为 nil。因为字典中的值是以可选类型返回的，所以你不需要担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除键“MA”对应的值后，usStates 已更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中没有看到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需要将要替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“red”设置了值“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值➊。

你可能记得，这是我们将新值输入字典的相同方式。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键/值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性检查你有多少个项。假设你有一个出售水果的篮子。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。在我们遍历字典时，会使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮，并打印每种水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，因此你可以通过两种不同的方式进行遍历。这是使用字典的键来循环遍历的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从写下关键字 for 开始，后跟字典键的常量名称 fruit，关键字 in，字典名称，一个句点，和 keys。

在我们的 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋），以及通过 fruitBasket[fruit]! ➌ 强制解包其内容时该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性来循环遍历：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price，位于 values 属性中。在循环值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选项，因为它直接作为值存储在 fruitBasket 字典中。这意味着我们不需要解包它。你应该仍然能看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！并且由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则可以使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

在之前的章节中，你学习了如何在变量或常量中存储单个信息。但是如果你想存储一个集合的内容，比如你访问过的所有地方的名称或你读过的所有书籍呢？在本章中，我们将介绍数组和字典。它们都是用来存储值的集合。通过使用数组和字典，你可以一次性处理大量数据，让你的程序更强大！

### 使用数组保持顺序

*数组*是按顺序存储的相同数据类型的项列表，有点像编号的购物清单。数组中的项目是通过它们的*索引*存储的，索引是根据项目在数组中的位置计算的数字。

当你写购物清单时，通常从数字 1 开始，但在计算机编程中，索引是从 0 开始的，而不是从 1 开始。所以数组中的第一个项目始终位于索引 0，第二个项目位于索引 1，第三个项目位于索引 2，以此类推。

我们来创建一个数组。如果你已经知道要放入数组中的内容，可以直接创建数组并用这些值进行*初始化*。在 Swift 中，初始化某个对象就是为它赋予一个初始值，这样你才能在程序中使用它。假设你想存储你访问过的所有国家公园的列表。请在你的 Playground 中输入以下内容：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称进行了初始化。因为我们初始化这个数组来存储字符串，所以你只能将字符串放入其中。

图 6-1 展示了你可以如何想象你的数组。它就像一排盒子，里面存放着位于索引 0、1 和 2 处的三个国家公园名称。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用了 var 关键字创建它 ➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加、删除或替换元素来修改它。

你还可以创建一个*不可变*数组。不可变数组是使用 let 关键字创建的，而不是 var。类似于常量，一旦创建了不可变数组，数组中的任何内容都无法更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如你存储的是彩虹的颜色，那么最好使用 let。如果你需要更改集合中的内容，比如你存储的是你最喜欢的 T 恤的数组，它可能会随着流行趋势的变化而改变，那么你应该使用 var。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 `nationalParks` 数组时，我们通过添加冒号(:)和[String] ➋ 指定了我们正在创建一个字符串类型的数组。在创建并初始化数组时，这一步是可选的，因为 Swift 会使用类型推断来确定数组要存储的数据类型。这意味着你完全可以通过以下方式创建数组：

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化这个数组时，它将保存字符串，并且它只能保存字符串。

我们创建数组时使用的公园列表是数组*字面量*的一个例子。字面量是一个值，完全就是你所看到的。它不是变量或常量，而只是一个没有名称的值。"Grand Canyon" 就是一个字符串字面量，7 是一个整数字面量。数组字面量是包含在两个方括号之间，并由逗号分隔的项目列表，比如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想要访问数组中的一个项目并在程序中使用它。你的朋友问你有关旅行的所有事情，所以你想使用你在数组中存储的国家公园名称。要访问数组中的一个项目，可以写数组名称，后跟项目的索引，索引放在方括号内：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后使用 `print` 打印到屏幕上。要获取 `nationalParks` 中的第一个项目，你可以使用 `nationalParks[0]` ➊。要访问 `nationalParks` 中的第二个项目，你可以使用 `nationalParks[1]`。

#### 监视范围

关于数组有一个重要的注意点：如果你尝试访问数组中一个超出最后索引的项目，你会得到一个错误。在图 6-2 中，你可以看到 `nationalParks[3]`（即数组中的第四个项目）会给你一个错误，因为数组中只有三个国家公园，索引范围是从 0 到 2。

如你所见，你会收到一个错误消息，显示 "Index out of range"。如果你尝试访问数组中不存在的项目，应用程序就会崩溃！

![图片](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

改变数组的一种方式是向其中添加新项。实现这一点有几种不同的方法，我们来逐一看看。

首先，你可以使用数组的 `append(_:)` 方法。*Append* 意味着添加。使用 `append(_:)`，你可以将一个新项目添加到数组的末尾。假设你又去了一次旅行，参观了 Badlands，并且想要将其添加到国家公园列表中。为此，你可以将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

使用 `append(_:)` 方法时，首先写出数组名称，后面加一个句点，再加上 `append`。然后，将你想添加到数组中的项目放在括号内。在这个例子中，你将 "Badlands" 放在括号内。

如果你想在数组的特定位置添加元素，可以使用数组的 insert(_:at:) 方法。这个方法有两个参数：你想插入的项目和该项目在数组中的索引位置。（我们将在第七章详细讨论参数。）

假设你完全忘记了自己在参观大峡谷之后去了化石森林，现在你想更新 nationalParks 数组，使它按你访问的顺序显示公园。要更新数组，你可以使用 insert(_:at:) 方法将化石森林插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项目时，所有在索引 3 或更高位置的项目都会向后移动，为新项目腾出空间。这意味着原本在索引 3 的项目现在会被移到索引 4，索引 4 的项目会被移到索引 5，依此类推。添加化石森林后，nationalParks 数组变成了 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项目，还可以使用 + 和 += 运算符将两个数组合并。假设你有两个数组，分别包含制作水果冰沙的原料：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组合并，制作出一杯美味的冰沙。

![](img/Image00123.jpg)

冰沙中的原料顺序与水果和液体中的顺序相同。如果你用液体 + 水果的顺序创建冰沙，那么液体会排在前面。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。下面就是添加一些鲜奶油来提升美味感的方式：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，尽管它只有一个项目。当你使用 += 向数组添加元素时，必须确保你只是在添加另一个数组。如果你直接写字符串 "whipped cream" 而没有方括号，就会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们从数组的 removeLast() 方法开始。顾名思义，removeLast() 会移除数组中的最后一个项目。我们可以用一个购物清单数组来试一试：

![](img/Image00126.jpg)

真棒！请注意，removeLast() 方法会返回被移除的项目，因此，如果你愿意，可以将它存储在一个新的常量或变量中。

你还可以使用 remove(at:) 方法从特定的索引位置移除一个项目。假设你妈妈不希望你买糖果，并将它从列表中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项目时，所有项目都向后移动一样，如果你从数组中间移除一个项目，剩下的项目会向前移动填补那个空位。原本在索引 3 的 "apples" 项目现在会出现在索引 2 的位置，原本在索引 2 的 "candy" 项目会移到索引 3。

你还可以使用 removeAll() 从数组中移除所有项。尝试将以下代码输入到你的 playground 中：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在索引的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为数组中没有任何元素——根本没有最后一个索引！然而，removeAll() 始终是安全的，即使在空数组上使用。

#### 替换数组中的项

要替换数组中的一项，你只需将该数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三项）的项替换为 "独角兽"，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一项）的项替换为 "胡须龙"。不，这不是一条真正的龙——它只是一只蜥蜴！

就像你在处理数组索引时一样，你必须确保数组在该索引位置有项存在，然后再改变它的值，否则会出现索引超出范围的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时发生的错误。要将项添加到数组末尾，应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加项” 中在 第 70 页 所讲解的。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道如何根据需要更改数组了。你可以添加项、删除项或替换项。接下来，我们将探讨如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有*属性*。数组的属性是包含数组某些信息的变量或常量。有两个非常有用的属性，你可能会用到，它们是布尔值类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性是布尔值，取决于数组是否为空，而 count 属性则告诉你数组中有多少项。

查看以下 if-else 语句中这两个属性是如何被使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。如果数组中有内容，则打印我们有几个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时，当你在使用数组时，可能想对数组中的每一项做一些操作。你可以使用 for-in 循环来实现这一点！以下代码将会把 pizzaToppings 数组中的每个配料打印在单独的一行上：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，接着是常量 topping，再是关键字 in，最后是数组的名称 pizzaToppings。然后我们将希望在每个 topping 上执行的语句放入 for-in 循环的大括号中。常量 topping ➊ 临时代表我们在循环中遍历的每个披萨配料。我们可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环打印数组中的每个值非常好。如果你正在处理数字，你甚至可以使用它们对每个项执行数学运算，这样可以加速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典很重要！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有自己的 *键* 。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键并且你请求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们来看看如何创建字典并写入键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写 var 和字典的名称。然后像数组一样，将键和值放在一对方括号中。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两个字母的缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是 *无序* 的。因此，结果面板 ➋ 中看到的状态顺序很可能与输入状态 ➊ 时的顺序不同，甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用 `Double` 作为键，`String` 作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 `Double` 类型，而所有的值必须是 `String` 类型。同样，你会发现结果窗格中的数字顺序可能与字典中写入分数时的顺序大不相同。这没问题，因为你不需要知道顺序就可以访问任何项。你可以通过键找到任何你需要的项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只不过你在方括号内使用的是键，而不是索引，就像这样：`usStates["TX"]`。

然而，Swift 在从字典返回值时有很大的不同。当你访问数组中的某个索引时，你会直接得到该值。当你通过字典中的键访问一个值时，你会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 `nil`。Swift 在你查找字典中的项时返回可选值，是因为你使用的键可能不存在于字典中，在这种情况下就没有值可供访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获得的任何值，然后才能对它进行处理。

要解包一个可选值，首先通过 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 `if let` 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为我们在字典中有这个州，所以下面会打印出 "I have Texas in my dictionary."。接着，我们尝试通过键 `usStates["FL"]` ➋ 访问一个字典中没有的州。幸运的是，因为我们使用了 `if-let` 语句，当计算机找不到这个州时，程序不会崩溃，而是会打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典添加一个项，首先写出字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们向 `usStates` 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新添加的字典项可能出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除一个项是相当简单的；你只需要将该项的值设置为 nil。因为字典中的值是作为可选值返回的，所以你不需要担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除了键“MA”对应的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。因此，你不会在字典中看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们将"apple"作为"red"的值，但后来我们决定使用"raspberry"（覆盆子）作为更合适的水果，因为有时苹果是绿色或黄色的。要将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这和我们向字典中添加新值的方式是一样的。如果键已经存在于字典中，那么该键对应的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则可以检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含所有的值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，通过遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以用两种不同的方式来实现这一点。这是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，后跟常量名 fruit 作为字典的键，关键字 in，字典名，点符号，然后是 keys。

在我们的 for-in 循环的花括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包 fruitBasket[fruit]! ➌ 获取到的该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句执行三次。

我们还可以使用字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price，出现在 values 属性中。在循环值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它直接作为 fruitBasket 字典中的值来访问。这意味着我们不需要解包它。你仍然应该看到打印语句执行三次。图 6-6 显示了两种循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按数字顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，你可以使用数组，并通过其索引查找每个项目。如果你想根据键来存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中强大的构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以在程序中的几乎任何地方通过函数名来调用它。

### 使用数组保持顺序

*数组* 是一种将相同数据类型的项目按顺序存储的列表，有点像编号的购物清单。数组中的项目通过它们的 *索引* 来存储，索引是基于项目在数组中位置的数字。

当你写购物清单时，通常会从数字 1 开始，但在计算机编程中，索引是从 0 开始的，而不是 1。所以数组中的第一个项目总是在索引 0 处，第二个项目在索引 1 处，第三个项目在索引 2 处，以此类推。

让我们创建一个数组。如果你已经知道要放入数组的内容，可以创建并用这些值初始化它。在 Swift 中初始化某样东西是指给它一个初始值，这样你就可以在程序中使用它。假设你想存储你访问过的所有国家公园的列表。将以下内容输入到你的 Playground 中：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称初始化它。因为我们将这个数组初始化为存储字符串类型，所以你只能在其中放入字符串。

图 6-1 展示了你如何想象你的数组。它就像一排盒子，包含了位于索引 0、1 和 2 的三个国家公园的名字。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们是用 var 关键字创建它的 ➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加项目、移除项目或交换项目来改变它。

你还可以创建一个*不可变*数组。不可变数组是通过使用关键字 let 而不是 var 来创建的。与常量类似，一旦不可变数组创建完成，它里面的内容就不能被改变。

那么什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如你存储的是彩虹的颜色，最好使用 let。如果你需要改变你的集合，比如存储你最喜欢的 T 恤的数组，这些 T 恤可能会根据时尚变化，应该使用 var！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 来指定我们正在创建一个字符串值的数组。当你创建一个数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定你想让数组存储的数据类型。这意味着你也可以像这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了这个数组来存储字符串，而且它只能存储字符串。

我们用来创建数组的国家公园列表是一个数组*字面量*的例子。字面量是一个值，正是你看到的内容。它不是变量或常量，而只是没有名称的值。“Grand Canyon”是一个字符串字面量，7 是一个整数字面量。数组字面量是包含在方括号中的一系列项目，项目之间用逗号分隔，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想访问数组中的一个项目并在程序中使用它。你的朋友让你告诉他们你所有的旅行经历，所以你想用你存储在数组中的国家公园名字。要访问数组中的一个项目，写下数组名，后面跟上项目的索引，索引用方括号括起来：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名字，然后通过 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个高于数组最后一个索引的项，你将会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四项）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误信息，提示“索引超出范围”。如果你尝试访问数组中不存在的项，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

改变数组的一种方式就是向它添加新项。这里有几种不同的方式，接下来我们将逐一介绍。

首先，你可以使用数组的 append(_:) 方法。*Append* 的意思是添加某个东西。使用 append(_:) 方法，你可以将一个新项添加到数组的末尾。假设你去了一趟新旅行，参观了 Badlands，并且你想把它添加到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

使用 append(_:) 方法时，首先写下数组的名称，后面跟一个点，然后是 append。接着，将你想要添加到数组的项放到括号内。在本例中，你将 "Badlands" 放入括号内。

如果你想在数组中的特定位置添加某个元素，可以使用数组的 insert(_:at:) 方法。这个方法接受两个参数：你要插入的项和它在数组中应该插入的位置。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷之后，你去了化石森林，并且你想更新你的 nationalParks 数组，使它显示你访问这些公园的顺序。为了更新你的数组，你可以使用 insert(_:at:) 方法将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 插入新项时，数组中从索引 3 或更高位置的所有项都会被推到一个位置，以腾出空间给新项。这意味着原本在索引 3 的项现在在索引 4，原本在索引 4 的项现在在索引 5，依此类推。加入化石森林后，nationalParks 现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 + 和 += 运算符将两个数组相加。假设你有两个数组，分别包含制作水果冰沙的食材：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组相加来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的食材顺序与水果和液体的顺序相同。如果你是将液体 + 水果制作冰沙，那么液体会排在前面。

你可以使用 += 操作符将一个数组添加到你的数组末尾。为了增加更多美味，可以按如下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 虽然只有一个项，但它依然是一个数组。当你使用 += 来向数组添加元素时，必须确保你只添加另一个数组。如果你仅仅写下字符串 "whipped cream" 而不加方括号，就会报错。

![图片](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。我们先从查看数组的 removeLast() 方法开始。正如你从其名称可以猜到的，removeLast() 会移除数组中的最后一个项。让我们用一个 shoppingList 数组来试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的项，因此如果需要，你可以将其存储在新的常量或变量中。

你还可以通过使用 remove(at:) 方法从特定索引处移除项。假设你妈妈不想让你买糖果，并将其从购物清单中移除：

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项都会挪动位置以腾出空间一样，如果你从数组中间移除一个项，其余项也会挪回以填补空位。原本在索引 3 位置的“apples”项，现在移到了原来“candy”所在的索引 2 位置。

你还可以使用 removeAll() 方法从数组中移除所有项。试着在你的 playground 中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试从不存在的索引处移除项会引发错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为它里面什么都没有——根本没有最后一个索引！然而，removeAll() 是安全的，即使在空数组上也能正常使用。

#### 替换数组中的项

要替换数组中的项，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 位置，我们将索引 2（第三项）处的项替换为 "Unicorn"，因为魔法动物也算是最喜欢的动物！在 ➋ 位置，我们将索引 0（第一项）处的项替换为 "Bearded dragon"。不，这不是一只真正的龙——它只是一个蜥蜴！

就像你在处理数组索引时一样，必须确保该索引位置的项存在于数组中，否则你会遇到“索引超出范围”的错误。

图 6-3 展示了如果你试图通过 favoriteAnimals[3] = "Standard poodle" 来添加 "Standard poodle"，会发生的错误。要将项添加到数组末尾，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项” 中所讲解的，在 第 70 页 中。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你知道如何根据需要修改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何使用数组的属性获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还拥有 *属性*。数组的属性是包含有关数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少个元素。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，程序会打印 "我没有兄弟姐妹"。如果数组中有元素，程序会打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时候，在处理数组时，你可能希望对数组中的每个元素做一些事情。你可以使用 for-in 循环来做到这一点！以下代码会将 pizzaToppings 数组中的每个配料打印在单独的一行：

![Image](img/Image00135.jpg)

为了编写一个针对 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。然后，我们把希望在每个 topping 上执行的语句放入 for-in 循环的大括号中。常量 topping ➊ 临时代表数组中每一个披萨配料，我们遍历数组时它依次代表每个配料。我们本可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目执行数学运算，这样就能快速计算！以下代码接收一个数字数组并计算每个数字的平方（一个数字的平方就是这个数字与其本身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一类值的集合，但与数组不同的是，字典中的每个值都有自己的 *键*。因为没有索引，字典中的值没有特定顺序。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，而你要求计算机给你其中一个键的值，计算机就不知道选择哪个！

让我们来看看如何创建一个字典，并写下能够帮助你找到所有所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写下`var`和字典的名称。然后，在一对方括号中写下键和值，类似于数组。我们来创建一个字典来存储一些美国州的名称。每个州的键将是其两位字母的缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的州的顺序➋可能与输入州的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一个分数的集合，你可以将键定义为浮动数值，将值定义为字符串：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是浮动数值，所有的值必须是字符串。再一次，你会看到结果窗格中数字的顺序可能与字典中分数的书写顺序完全不同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。我们来看看怎么做！

#### 访问字典中的值

在字典中查找值类似于你如何通过数组访问值，只不过你使用键而不是索引，在方括号内这样写：usStates["TX"]。

然而，Swift 从字典返回值的方式有一个很大的不同。当你通过数组的索引访问一个值时，你只会得到该值。当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是你使用的键可能不存在于字典中，在这种情况下没有值可访问。尝试访问一个不存在的值会给你带来一个大大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 I have Texas in my dictionary. 接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 I don't have that state in my dictionary.

#### 向字典中添加项

要向字典中添加一个项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 的值后，usStates 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着完全没有值。这就是为什么在我们的字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将你要替换的项设置为其他内容。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们将 "apple" 作为 "red" 的值，但后来我们决定 "raspberry" 是一个更好的水果选择，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这和我们将新值输入字典时的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查你有多少个项。假设你有一个出售的水果篮子。你可以使用这些属性来帮助你跟踪所有的物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，其中包含字典的所有键，以及 values，其中包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们编写一些代码，通过水果篮子循环并打印每个水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来做。下面是通过字典的键来循环的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，接着是字典键的常量名称 fruit，关键字 in，字典名称，句点和 keys。

在 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋）和该键对应的值，当我们通过 fruitBasket[fruit]! ➌ 强制解包其内容时。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会对字典中的每个键执行一次。所以你应该能看到打印语句显示三次。

我们也可以通过字典的 values 属性来循环遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用一个常量来引用每个值，我们称之为 price，位于 values 属性中。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选的，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！而且因为顺序不保证，你可能会在再次运行相同的代码时看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则可以使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言的一个强大构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。写完函数后，你可以通过它的名字在程序的几乎任何地方调用它。

*数组*是存储相同数据类型项目的列表，按照顺序排列，有点像一个编号的购物清单。数组中的项目按*索引*存储，索引是基于项目在数组中的位置的数字。

当你写购物清单时，你通常会从数字 1 开始，但在计算机编程中，索引是从 0 开始的，而不是 1。所以数组中的第一个项目总是位于索引 0，第二个项目位于索引 1，第三个项目位于索引 2，以此类推。

让我们创建一个数组。如果你已经知道你要放入数组的内容，可以创建它并用这些值进行*初始化*。在 Swift 中，初始化就是赋予某个值一个初始值，以便你可以在程序中使用它。假设你想存储你访问过的所有国家公园的列表。请在你的 Playground 中输入以下内容：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名字对其进行了初始化。因为我们初始化这个数组来存储字符串，所以你只能向其中添加字符串。

图 6-1 展示了你如何理解数组。它就像一排盒子，包含了国家公园的三个名字，分别位于索引 0、1 和 2 的位置。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用`var`关键字创建了它➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加、删除或交换项目来改变它。

你也可以创建一个*不可变*数组。不可变数组是使用`let`关键字而不是`var`创建的。类似于常量，一旦不可变数组创建后，它其中的内容就不能再更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如如果你存储的是彩虹的颜色，最好使用`let`。如果你需要改变集合，比如存储的是你最喜欢的 T 恤的数组，可能会根据时尚变化，应该使用`var`！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 `nationalParks` 数组时，我们通过添加冒号（:）和 [String] ➋ 来指定我们正在创建一个包含字符串值的数组。此步骤在创建数组并用一个或多个值初始化时是可选的，因为 Swift 会使用类型推断来确定你希望数组保存的数据类型。这意味着你完全可以通过以下方式创建数组：

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化了一个只包含字符串的数组，它只能保存字符串。

我们用来创建数组的公园列表就是一个数组*字面量*的例子。字面量是指你所看到的就是值本身。它不是一个变量或常量，而仅仅是没有名字的值。“Grand Canyon”是一个字符串字面量，7 是一个整数字面量。数组字面量是一个项目列表，这些项目被两个方括号括起来，并用逗号分隔，例如 `["Acadia", "Zion", "Grand Canyon"]` ➊。

#### 访问数组中的项目

假设你想访问数组中的一个项目并在程序中使用它。你的朋友让你告诉他们你所有的旅行经历，所以你想使用你存储在数组中的国家公园名称。要访问数组中的项目，只需写出数组名称，后跟方括号中的项目索引：

![](img/Image00118.jpg)

在这个例子中，我们访问国家公园的名称，然后使用 `print` 将它们打印到屏幕上。要获取 `nationalParks` 中的第一个项目，你可以使用 `nationalParks[0]` ➊。要访问 `nationalParks` 中的第二个项目，你可以使用 `nationalParks[1]`。

#### 监控范围

关于数组的一个重要事项是，如果你尝试访问一个超过数组最后一个索引的项目，你会得到一个错误。在图 6-2 中，你可以看到 `nationalParks[3]`（这应该是数组中的第四个项目）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会得到一个错误消息，提示“索引超出范围”。如果你尝试访问数组中不存在的项目，你的应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

更改数组的一种方法是向其中添加新项目。有几种不同的方法可以做到这一点，让我们来看看每种方法。

首先，你可以使用数组的 `append(_:)` 方法。*Append* 意味着添加某些东西。使用 `append(_:)`，你可以将一个新项目添加到数组的末尾。假设你去旅行并参观了《坏地国家公园》，你想将它添加到你的国家公园列表中。为此，你可以在 Playground 中添加以下代码：

![](img/Image00120.jpg)

要使用 `append(_:)` 方法，首先写出你的数组名称，后跟一个句点，然后是 `append`。接着，将你要添加到数组中的项目放入括号内。在这种情况下，你将“Badlands”放入括号内。

如果你想在数组的特定位置添加元素，使用数组的 insert(_:at:)方法。这方法需要两个参数：你想插入的元素和它应该插入数组中的索引位置。（我们将在第七章中详细讨论参数。）

假设你完全忘记了自己在参观完大峡谷后去过化石森林，而你想更新你的 nationalParks 数组，使其按照你访问的顺序显示公园。要更新数组，你可以使用 insert(_:at:)方法，将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新元素时，原本在索引 3 或更高位置的所有元素都会向后移动，为新元素腾出空间。这意味着原本在索引 3 处的元素将移到索引 4，原本在索引 4 处的元素将移到索引 5，以此类推。在你添加了化石森林后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新元素，还可以使用+和+=运算符将两个数组连接在一起。假设你有两个数组，分别包含制作水果果昔的原料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组添加在一起，制作一杯美味的果昔。

![](img/Image00123.jpg)

果昔中原料的顺序与水果和液体数组中的顺序相同。如果你是用液体+水果的顺序来创建果昔，那么液体会先出现。

你使用+=运算符将一个数组添加到另一个数组的末尾。为了增加额外的美味，可以按如下方式添加一些鲜奶油：

![](img/Image00124.jpg)

注意，即使["whipped cream"]数组中只有一个元素，它仍然是一个数组。当你使用+=将某些内容追加到数组时，必须确保你只是在添加另一个数组。如果你只是写出字符串"whipped cream"而没有加上方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

有几种方法可以从数组中移除元素。让我们首先看看数组的 removeLast()方法。顾名思义，removeLast()方法移除数组中的最后一个元素。让我们用一个 shoppingList 数组来试一下：

![](img/Image00126.jpg)

真棒！注意，removeLast()方法返回已移除的元素，因此，如果需要，你可以将它存储在一个新的常量或变量中。

你也可以使用 remove(at:)方法从特定索引移除元素。假设你妈妈不希望你买糖果，并从列表中将其移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们向数组中间添加元素时，所有元素都会移动以腾出空间一样，如果你从数组的中间移除一个元素，其余的元素将会移动回来填补这个空位。原本在索引 3 处的"apples"元素现在位于索引 2 的位置，原本在索引 2 处的"candy"元素被移除了。

你也可以使用 removeAll() 从数组中移除所有项。尝试在你的 playground 中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在索引位置的项会抛出错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），因此会抛出错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组里什么也没有——根本没有最后一个索引！然而，removeAll() 总是可以安全使用，即使在空数组上也是如此。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三项）位置的项替换为 "Unicorn"，因为魔法动物也算作最喜欢的动物！在 ➋ 处，我们将索引 0（第一项）位置的项替换为 "Bearded dragon"。不，那不是一条真正的龙——它只是一个蜥蜴！

就像任何时候你在处理数组索引时，你必须确保在修改值之前该索引位置上有一个项，否则会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时出现的错误。要向数组的末尾添加项，你应该使用 append(_:) 方法或 +=，就像我们在 “向数组添加项” 一节中讲的那样，参见 第 70 页。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引位置的值。*

现在你已经知道如何根据需要修改数组。你可以添加项、移除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有 *属性*。数组的属性是包含数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的 isEmpty 和整数类型的 count。

isEmpty 属性会根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少项。

查看这两个属性如何在以下的 if-else 语句中使用：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则输出 "我没有兄弟姐妹"。但如果数组中有内容，则输出我们有几个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项执行某个操作。你可以使用 for-in 循环来做到这一点！以下代码会在每一行打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

为 pizzaToppings 数组编写 for-in 循环时，我们使用了关键字 for，后跟常量 topping，再加上关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将每个配料要执行的语句放入 for-in 循环的大括号内。常量 topping ➊在循环过程中暂时代表数组中的每个披萨配料。我们本可以选择任何名称作为这个常量，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项执行数学运算，这样可以快速进行计算！以下代码取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

一个*字典*也是一个值的集合，但与有序索引的数组不同，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

每个键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，并且你请求计算机给你其中一个的值，计算机就无法知道应该选择哪个键！

让我们看看如何创建一个字典并写入键，以帮助你找到所需的所有信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写`var`和字典的名称。然后将键和值对写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序*的。因此，你在结果窗格中看到的状态顺序➋可能与输入状态的顺序➊不同，甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与字典中你写的分数顺序大不相同。这是可以的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，不同之处在于你使用的是方括号中的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 在返回字典中的值时有一个很大的不同。当你在数组中访问一个索引的值时，你会直接得到这个值。而当你使用字典中的键访问值时，你会得到一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找项时，使用的键可能在字典中不存在，在这种情况下没有值可以访问。试图访问一个不存在的值会导致一个大错误！为避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行处理。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary."。接下来我们尝试访问一个不在字典中的州，使用键 usStates["FL"] ➋。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到该州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典中添加一个项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。我们来向 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一个项是非常简单的；你只需将该值设置为 nil。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除 "MA" 键对应的值之后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，它意味着根本没有值。这就是为什么在我们的字典中你没有看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需将要替换的项设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple"，但后来我们决定使用 "raspberry" 作为更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这就是我们将新值插入字典的方法。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，count 属性则可以检查你有多少个项目。想象一下，你有一个出售水果的篮子。你可以使用这些属性来帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中所有的键；以及 values，包含字典中所有的值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每一项都有一个键和值，所以你可以通过两种不同的方式来实现。以下是如何通过字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，后跟字典键的常量名 fruit，接着是关键字 in，字典名称，句点，最后是 keys。

在我们的 for-in 循环的花括号内部，我们可以访问到键（我们称之为 fruit ➋）以及该键对应的值，当我们通过 `fruitBasket[fruit]!` 强制解包时 ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道正在使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会在字典的每个键上运行一次。所以你应该会看到打印语句显示三次。

我们也可以通过字典的 values 属性来循环：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称其为 price。在循环遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是可选类型，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 展示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。为了将项目存储在一个有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中强大的构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数后，可以通过其名称从程序中的几乎任何地方调用它。

当你写购物清单时，通常会从数字 1 开始，但在计算机编程中，索引从 0 开始，而不是 1。所以数组中的第一个项目总是在索引 0 处，第二个项目在索引 1 处，第三个项目在索引 2 处，依此类推。

让我们创建一个数组。如果你已经知道要放入数组的内容，你可以创建它并用这些值进行*初始化*。在 Swift 中初始化某个内容是指给它一个初始值，以便你可以在程序中使用它。假设你想存储你访问过的所有国家公园的列表，在你的 playground 中输入以下内容：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称对其进行初始化。因为我们初始化了这个数组来保存字符串，所以你只能在其中放入字符串。

图 6-1 展示了你如何想象你的数组。它就像一排盒子，包含了位于索引 0、1 和 2 的三个国家公园的名称。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 `var` 关键字创建了它 ➊。存储在变量中的数组被称为 *可变* 数组。这意味着你可以通过添加、删除或交换元素来更改它。

你还可以创建一个 *不可变* 数组。不可变数组是使用 `let` 关键字创建的，而不是 `var`。与常量类似，一旦不可变数组被创建，它的内容就无法更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，例如存储彩虹的颜色，最好使用 `let`。如果你需要改变集合，例如存储你最喜欢的 T 恤的数组，可能会随着时尚变化而变化，那么应该使用 `var`！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们指定了创建一个字符串类型的数组，通过添加冒号（:）和 [String] ➋。当你创建数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定你想让数组包含的数据类型。这意味着你也可以通过以下方式创建该数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了这个数组来保存字符串，并且它只能包含字符串。

我们用来创建数组的公园列表是数组 *字面量* 的一个例子。字面量是一个值，它正是你看到的内容。它不是变量或常量，而是没有名称的值。"Grand Canyon" 是一个字符串字面量，7 是一个整数字面量。数组字面量是由两个方括号括起来并用逗号分隔的项列表，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的元素

假设你想访问数组中的一个元素并在程序中使用它。你的朋友要求你告诉他们关于你旅行的所有信息，因此你想使用存储在数组中的国家公园的名字。要访问数组中的一个元素，你需要写出数组名称，然后在方括号中写出该元素的索引：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名字，然后使用 `print` 将它们打印到屏幕上。要获取 nationalParks 中的第一个元素，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个元素，你使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个索引大于数组中最后一个索引的元素，你将得到一个错误。在 图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个元素）会给出错误，因为数组中只有三个国家公园，索引从 0 到 2。

正如你所看到的，你会收到一个错误信息，提示 "Index out of range"。如果你试图访问一个数组中不存在的元素，程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加元素

改变数组的一种方法是向其中添加新元素。这里有几种不同的方法，接下来我们逐一来看。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加。使用 append(_:) 方法，你可以将一个新元素添加到数组的末尾。假设你又去旅行了，参观了 Badlands，你想把它添加到国家公园的列表中。为此，你可以在 Playground 中添加以下代码：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下数组的名称，后面加一个句点，然后是 append。接着，将你要添加到数组中的元素放到括号内。在这个例子中，你将 "Badlands" 放到括号内。

如果你想在数组的特定位置添加元素，可以改用数组的 insert(_:at:) 方法。这个方法有两个参数：你想要插入的元素和它在数组中的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了在参观 Grand Canyon 后，你还去了 Petrified Forest，现在你想更新 nationalParks 数组，使其显示你参观这些公园的顺序。为了更新你的数组，你可以使用 insert(_:at:) 方法将 Petrified Forest 放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新元素时，数组中索引为 3 或更大的所有元素都会被移动，以腾出位置给新元素。这意味着原本位于索引 3 的元素现在会移到索引 4，位于索引 4 的元素会移到索引 5，以此类推。添加了 Petrified Forest 后，nationalParks 变为 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新元素，还可以使用 + 和 += 操作符将两个数组合并。假设你有两个数组，分别包含制作果昔所需的水果和液体成分：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的果昔。

![](img/Image00123.jpg)

果昔中的食材顺序与水果和液体的顺序相同。如果你是用液体 + 水果来制作果昔，那么液体会排在前面。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了增加更多的美味，可以按以下方式添加一些打发奶油：

![](img/Image00124.jpg)

注意，["whipped cream"] 是一个数组，尽管它只有一个元素。当你使用 += 操作符向数组添加元素时，必须确保你只是尝试添加另一个数组。如果你直接写字符串 "whipped cream" 而没有用方括号包裹它，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。我们先来看一下数组的 removeLast()方法。正如你从名称中可能猜到的，removeLast()方法会移除数组中的最后一个项。我们来试试用一个 shoppingList 数组：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项，因此如果你想的话，你可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:)方法从特定的索引移除项。假设你的妈妈不希望你买糖果，并将其从清单上移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项并且所有项向后移动以腾出空间一样，如果你从数组中间移除一项，其他项会向前移动，填补那个空缺。原本在索引 3 的“苹果”项现在位于索引 2 的位置，那里原来是“糖果”。

你还可以通过 removeAll()方法移除数组中的所有项。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组里什么也没有——根本没有最后一个索引！不过，removeAll()始终是安全的，即使在空数组上使用也没有问题。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三项）的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在➋处，我们将索引 0（第一项）的项替换为“胡须龙”。不，那不是一只真正的龙——它只是一个蜥蜴！

就像你在处理数组索引时一样，在更改项的值之前，必须确保该索引处有项存在，否则会出现“索引超出范围”错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬"来添加“标准贵宾犬”时会发生的错误。要将一项添加到数组的末尾，你应该使用 append(_:)方法或+=，我们在“向数组添加项”的第 70 页中已经讲解过了。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加项、移除项或替换项。接下来，我们将看看如何使用数组的属性来了解更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 `append(_:)` 和 `removeLast()` 这样的方法，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 `isEmpty` 和整数属性 `count`。

`isEmpty` 属性根据数组是否为空来返回 `true` 或 `false`，而 `count` 属性则会告诉你数组中有多少个元素。

查看下面这个 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 `mySiblings` 是否为空 ➊。如果为空，那么打印 "我没有兄弟姐妹。"。但如果数组中有内容，那么将打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将把 `pizzaToppings` 数组中的每个配料打印到单独的一行：

![Image](img/Image00135.jpg)

为了编写一个针对 `pizzaToppings` 数组的 for-in 循环，我们使用了关键字 `for`，接着是常量 `topping`，然后是关键字 `in`，最后是我们数组的名称 `pizzaToppings`。接着我们将希望在每个 topping 上运行的语句放入 for-in 循环的大括号内。常量 `topping` ➊ 临时代表我们循环遍历的数组中的每一个披萨配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名字是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项执行数学运算，这样就能进行快速计算！以下代码接受一个数字数组并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 `myNumbers` 数组中每个数字的平方*

### 字典很重要！

*字典* 也是一个值的集合，但与有序索引不同，每个值都有自己的 *键*。因为没有索引，值没有特定的存储顺序。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。在同一个字典中，不能有相同的键。如果存在两个相同的键，而你要求计算机返回其中一个的值，那么计算机会不知道该选择哪个！

让我们来看看如何创建一个字典，并编写帮助你找到所需所有信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上 var 和字典的名称。然后在一对方括号内写上键和值对，类似于数组。我们来创建一个字典，用来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果窗格中看到的状态顺序➋很可能与输入状态的顺序➊不同。甚至可能与本书中打印的顺序不同！

与数组类似，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不必与值类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再说一次，你会发现结果窗格中的数字顺序可能与在字典中写入分数的顺序完全不同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。我们来看看如何操作！

#### 访问字典中的值

在字典中查找一个值类似于访问数组中的值，只不过你需要在方括号中使用键，而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中返回字典值的方式有很大不同。当你访问数组中的一个索引时，你只是得到那个值。而当你用一个键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，或者可能是 nil。Swift 在查找字典项时返回可选值的原因是你使用的键可能不存在于字典中，这种情况下没有值可访问。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选值。这意味着你在对字典中的任何值进行操作之前需要解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出“我在我的字典中有 Texas。”接下来，我们尝试通过使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我在字典中没有这个州。”

#### 向字典添加项

要向字典添加一项，首先写下字典的名称，并将新项分配给你希望它在字典中具有的键。让我们将"Minneapolis"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需要将值设置为 nil。由于字典中的值以可选值返回，因此你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示根本没有值。这就是为什么你在我们的字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"赋值为"apple"，但后来我们决定"raspberry"是更好的水果，因为有时苹果是绿色或黄色的。要用"raspberry"替换"apple"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能记得，这与我们将新值输入字典的方式相同。如果该键已经存在于字典中，那么该键的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了你如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查你有多少项。假设你有一个水果篮出售，你可以使用这些属性帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，和 values，它包含所有的值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和一个值，所以你可以用两种不同的方式来实现。下面是通过字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性➊来遍历 fruitBasket 并打印它的内容。我们首先写出关键字 for，然后是字典键的常量名 fruit，接着是关键字 in，字典名称，句点和 keys。

在我们 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit➋）和该键的值，当我们通过 fruitBasket[fruit]!强制解包其内容时➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会为字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price，在 values 属性中。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序不能保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

让我们创建一个数组。如果你已经知道要放入数组的内容，你可以创建它并用这些值进行*初始化*。在 Swift 中，初始化是指给某个对象赋予初始值，以便你在程序中使用它。假设你想要存储你访问过的所有国家公园的列表。请输入以下内容到你的 playground：

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称初始化它。因为我们初始化这个数组来存储字符串，所以你只能在其中放入字符串。

图 6-1 展示了你可以如何想象你的数组。它就像一排包含国家公园名称的盒子，分别位于索引 0、1 和 2。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变数组和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 var 关键字创建了它 ➊。存储在变量中的数组称为*可变*数组。这意味着你可以通过添加、删除或交换其中的项来更改它。

你还可以创建一个*不可变*数组。不可变数组是使用关键字 let 创建的，而不是 var。与常量类似，一旦创建了不可变数组，它里面的内容就无法更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，例如你正在存储彩虹的颜色，最好使用 let。如果你需要更改集合，比如你存储的是你最喜欢的 T 恤的数组，可能会随着流行趋势的变化而改变，那就应该使用 var！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 指定了创建一个字符串类型的数组。当你创建一个数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你也可以通过如下方式创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了这个数组来存储字符串，并且它只能存储字符串。

我们用来创建数组的国家公园列表是一个数组*字面量*的例子。字面量是一个值，它就是你所看到的内容。它不是变量或常量，而是没有名称的值。"Grand Canyon" 是一个字符串字面量，7 是一个整数字面量。数组字面量是包含在两个方括号之间并用逗号分隔的项的列表，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项

假设你想要访问数组中的一个项目并在程序中使用它。你的朋友让你讲述你所有的旅行经历，因此你想使用你存储在数组中的国家公园名称。要访问数组中的一个项目，写出数组名称，后跟该项目的索引，索引放在方括号中：

![](img/Image00118.jpg)

在这个示例中，我们访问国家公园的名称，然后使用`print`将它们打印到屏幕上。要获取`nationalParks`中的第一个项目，可以使用`nationalParks[0]` ➊。要访问`nationalParks`中的第二个项目，可以使用`nationalParks[1]`。

#### 观看范围

关于数组的一个重要事项是，如果你尝试访问一个比数组最后一个索引更高的索引，你将得到一个错误。在图 6-2 中，你可以看到`nationalParks[3]`（即数组中的第四个项目）会导致错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误消息，提示"索引超出范围"。如果你尝试访问一个在数组中不存在的项目，你的应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

更改数组的一种方法是向其中添加新项目。有几种不同的方法可以做到这一点，所以让我们看看每种方法。

首先，你可以使用数组的`append(_:)`方法。*Append*意味着添加某物。使用`append(_:)`方法，你可以将一个新项目添加到数组的末尾。假设你又去了一趟旅行，参观了坏地（Badlands），并想将其添加到你的国家公园列表中。为此，将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

使用`append(_:)`方法时，首先写出数组的名称，后面加上一个句点，然后是`append`。接着，将你想要添加到数组中的项目放在括号内。在这种情况下，你把"Badlands"放在了括号里。

如果你想在数组的特定位置添加某个元素，请改用数组的`insert(_:at:)`方法。此方法有两个参数：你要插入的项目和它应该放入数组中的索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了自己在参观大峡谷后立即去了石化森林，你想更新`nationalParks`数组，以便按访问顺序显示这些公园。要更新数组，你可以使用`insert(_:at:)`方法将石化森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，索引 3 或更高位置的所有项都会向后移动，为新项腾出空间。这意味着原本在索引 3 的项现在在索引 4，原本在索引 4 的项现在在索引 5，以此类推。在你添加了“化石森林”之后，`nationalParks`现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新项，还可以使用`+`和`+=`运算符将两个数组合并。假设你有两个数组，分别存放果昔的水果和配料：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组结合来制作美味的果昔了。

![](img/Image00123.jpg)

在果昔中，配料的顺序与水果和液体的顺序相同。如果你先加入液体，再加入水果，那么液体会排在前面。

使用`+=`运算符可以将一个数组添加到另一个数组的末尾。如下所示，加入一些鲜奶油，增加额外的美味：

![](img/Image00124.jpg)

请注意，`["whipped cream"]`是一个数组，即使它只有一个项。当你使用`+=`将某物添加到数组时，必须确保你正在添加的是另一个数组。如果你只是写下字符串"whipped cream"而没有将其放在方括号内，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有多种方法可以从数组中移除项。让我们先看看数组的`removeLast()`方法。顾名思义，`removeLast()`方法会移除数组中的最后一项。我们可以用一个购物清单数组来试试：

![](img/Image00126.jpg)

很棒！请注意，`removeLast()`方法会返回被移除的项，因此如果你需要，可以将其存储在一个新的常量或变量中。

你还可以通过使用`remove(at:)`方法从特定的索引移除一个项。假设你的妈妈不想你买糖果，并将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项都会向后移动为新项腾出空间一样，如果你从数组中间移除项，其余项也会向前移动填补空缺。原本在索引 3 的“apples”项现在会出现在索引 2 的位置——那里原来是“candy”。

你还可以使用`removeAll()`方法移除数组中的所有项。尝试在你的 playground 中输入以下内容：

![](img/Image00129.jpg)

请注意，如果尝试从一个不存在的索引移除项，将会抛出错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，它现在是空的！），所以会抛出一个错误。如果我们在空数组上使用`removeLast()`，也会报错，因为它是空的——根本没有最后一个索引！然而，`removeAll()`在任何时候都可以安全使用，即使在空数组上也是如此。

#### 替换数组中的项

要替换数组中的项，只需将该索引位置的值设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三项）的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引 0（第一项）的项替换为“胡须龙”。不，那不是一条真正的龙——它只是一只蜥蜴！

就像在处理数组索引时，你必须确保数组中该索引处有项存在，才可以更改其值，否则你会遇到“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加“标准贵宾犬”时会发生的错误。要向数组的末尾添加项，应该使用 append(_:) 方法或 += ，就像我们在 “向数组添加项” 一节中第 70 页 讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引的值。*

现在你知道如何根据需要修改数组。你可以添加项、删除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法，数组还具有 *属性*。数组的属性是包含数组相关信息的变量或常量。有两个非常有用的属性，你可能会用到，它们分别是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则告诉你数组中有多少项。

看看这两个属性是如何在以下的 if-else 语句中使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，就会打印出“我没有兄弟姐妹。”如果数组中有项，则会打印出我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每一项做一些操作。你可以使用 for-in 循环来做到这一点！以下代码将把 pizzaToppings 数组中的每一个配料打印到单独的一行：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，再接关键字 in，最后是数组名称 pizzaToppings。然后，我们将要对每个配料执行的语句放在 for-in 循环的大括号中。常量 topping ➊ 临时代表数组中每个配料，随着我们循环遍历它。我们可以为这个常量选择任何名字，但最好选择一个有意义的名称。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目执行数学运算，这样可以进行快速的计算！以下代码取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一个值的集合，但不同于有序索引，每个值都有它自己的*键*。由于没有索引，值不会按照任何特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，而你要求计算机给你其中一个的值，计算机就不知道该选择哪一个！

让我们看看如何创建一个字典，并编写有助于查找所有信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上`var`和字典的名称。然后将键和值放在一对方括号内，类似于数组。让我们创建一个字典，用来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板 ➋ 中看到的状态顺序可能与你输入状态的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建可变字典，或使用`let`来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用浮动类型（doubles）作为键，字符串类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是浮动类型（doubles），而所有的值必须是字符串类型。你会发现，结果面板中的数字顺序与在字典中写入分数的顺序可能大不相同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键来查找所需的任何项目。让我们看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只不过你是在方括号内使用一个键，而不是一个索引，例如：usStates["TX"]。

然而，Swift 从字典中返回值时存在一个很大的区别。当你通过数组的索引访问一个值时，你直接得到该值。当你通过字典中的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下没有值可供访问。尝试访问一个不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选值。这意味着在你使用字典中的任何值之前，你需要解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以下面会打印出“I have Texas in my dictionary.”接下来，我们尝试通过使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary.”

#### 向字典中添加项目

要向字典中添加一个项目，首先写下字典的名称，然后将新项目分配给你想要它所在的键。我们来将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你新的字典项目可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需要将值设置为 nil。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键为"MA"的值之后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着完全没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的操作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们给“red”赋值为“apple”，但是后来我们决定“raspberry”是更合适的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将`colorFruits["red"]`设置为它的新值 ➊。

你可能还记得，我们向字典中添加新值的方式就是这样。如果字典中已经存在该键，则会替换该键对应的值。如果该键不存在，则会将新的键/值对添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有一个`isEmpty`属性和一个`count`属性。例如，以下代码展示了如何使用`isEmpty`属性来检查字典是否为空，如果不为空，`count`属性则检查字典中有多少项。想象一下，你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪一切：

![图片](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键，以及`values`，它包含所有的值。我们将在循环遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 循环遍历字典

你可以使用`for-in`循环遍历字典。因为每个项都有一个键和值，你可以用两种不同的方式来实现。以下是通过字典的键来循环遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性 ➊ 来循环遍历`fruitBasket`并打印它的内容。我们首先写出关键字`for`，接着是一个常量名`fruit`表示字典的键，再加上关键字`in`，字典名，点号和`keys`。

在`for-in`循环的花括号内部，我们可以访问键（我们称之为`fruit` ➋）以及通过`fruitBasket[fruit]!`强制解包其内容后的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的水果键一定存在于字典中。

我们在`for-in`循环中放置的任何代码都会针对字典中的每一个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以使用字典的`values`属性来循环遍历字典：

![图片](img/Image00150.jpg)

我们使用相同风格的`for-in`循环，但这次我们使用一个常量来引用每个值，称其为`price`，并且它位于`values`属性中。在循环遍历`values`时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price`不是可选类型，因为它是直接作为`fruitBasket`字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号排序！由于顺序无法保证，如果你重新运行相同的代码，你可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你应该使用数组，并通过索引查找每个项目。如果你想根据键存储项目，你应该使用字典。

了解数组和字典及其使用方式是几乎任何编程语言的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写完函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

![](img/Image00114.jpg)

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称初始化它。因为我们初始化这个数组来保存字符串，所以它只能包含字符串。

图 6-1 展示了你如何想象你的数组。它就像一排盒子，包含了位于索引 0、1 和 2 的三个国家公园的名称。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用`var`关键字创建了它 ➊ 。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加、删除或交换其中的项目来改变它。

你也可以创建一个*不可变*数组。不可变数组是使用`let`关键字创建的，而不是`var`。与常量类似，一旦不可变数组被创建，它其中的内容就不能再被修改。

那么，何时使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，最好使用`let`，比如你要存储彩虹的颜色。若你需要改变集合，例如存储你最喜欢的 T 恤衫的数组，这些 T 恤可能会随着流行趋势而改变，那么你应该使用`var`。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和[String] ➋ 来指定我们创建的是一个字符串值的数组。这个步骤在创建数组并用一个或多个值初始化它时是可选的，因为 Swift 会使用类型推断来确定你希望数组包含的数据类型。这意味着你也可以通过以下方式创建数组：

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化这个数组来保存字符串，并且它只能包含字符串。

我们用来创建数组的公园列表是数组*字面量*的一个例子。字面量是一个值，它就是你所看到的内容。它不是变量或常量，而只是没有名称的值。“Grand Canyon”是字符串字面量的例子，而 7 是整数字面量的例子。数组字面量是一个包含在方括号内并用逗号分隔的元素列表，如["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的元素

假设你想在程序中访问数组中的一个元素并使用它。你的朋友要求你告诉他们所有关于你旅行的事情，所以你想使用你存储在数组中的国家公园名称。要访问数组中的一个元素，写出数组名称，后跟方括号中的索引：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个元素，你使用 nationalParks[0] ➊ 。要访问 nationalParks 中的第二个元素，你使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个超出数组最后一个索引的元素，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（它应该是数组中的第四个元素）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会得到一条错误信息，提示索引超出范围。如果你尝试访问一个在数组中不存在的元素，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在元素的索引会导致错误。*

#### 向数组添加元素

改变数组的一种方法是向其中添加新元素。有几种不同的方法来做到这一点，所以我们来看一下每种方法。

首先，你可以使用数组的 append(_:) 方法。*追加*意味着添加某些内容。使用 append(_:) 方法，你可以将一个新元素添加到数组的末尾。假设你去了一次新旅行，参观了 Badlands，并且你想把它添加到你的国家公园列表中。为此，把以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出数组的名称，后跟一个句点，再写 append 。然后，把你想添加到数组中的元素放入括号内。在这个例子中，你把“Badlands”放入了括号内。

如果你想在数组中的特定位置添加元素，使用数组的 insert(_:at:) 方法。这个方法有两个参数：你想要插入的元素和它应该放入数组中的位置索引。（我们将在第七章 中详细讨论参数。）

假设你完全忘记了在参观大峡谷之后去了化石森林，并且你想更新你的 `nationalParks` 数组，使它按你访问的顺序显示各个公园。为了更新你的数组，你可以使用 `insert(_:at:)` 方法将化石森林放入正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，数组中索引 3 或更高位置的所有项目都会被推移，以腾出空间给新项目。这意味着原来在索引 3 的项目现在位于索引 4，原来在索引 4 的项目现在位于索引 5，依此类推。添加化石森林之后，`nationalParks` 变为 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新项目，还可以使用 `+` 和 `+=` 运算符将两个数组合并。假设你有两数组，分别包含做水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组合并，做出一杯美味的冰沙。

![](img/Image00123.jpg)

冰沙的原料顺序与 `fruits` 和 `liquids` 中的顺序相同。如果你用 `liquids + fruits` 创建了冰沙，那么液体会排在前面。

你可以使用 `+=` 运算符将一个数组添加到另一个数组的末尾。为了增加一些美味的味道，可以按如下方式加入一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只包含一个项目。当你使用 `+=` 将东西附加到数组时，你必须确保你只是在尝试添加另一个数组。如果你只是写字符串 "whipped cream" 而没有将其放在方括号内，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们首先看看数组的 `removeLast()` 方法。正如你从它的名字中可能猜到的，`removeLast()` 会移除数组中的最后一个项目。让我们用一个 `shoppingList` 数组来试试：

![](img/Image00126.jpg)

很棒！注意，`removeLast()` 方法会返回被移除的项目，因此，如果你需要，你可以将其存储到一个新的常量或变量中。

你还可以使用 `remove(at:)` 方法从特定索引移除一个项目。假设你妈妈不希望你买任何糖果，并把它从清单上拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有的项目都被推移腾出空间一样，如果你从数组中间移除一个项目，剩下的项目也会向前移动，填补空缺。原来在索引 3 处的 "apples" 项目现在位于索引 2，原来在索引 2 处的 "candy" 项目被移除。

你还可以使用 `removeAll()` 移除数组中的所有项目。试试在你的 playground 中输入这个代码：

![](img/Image00129.jpg)

注意，试图移除一个不存在的索引会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（实际上现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组中没有任何内容——根本没有最后一个索引！但是，removeAll() 即使在空数组上使用也总是安全的。

#### 替换数组中的元素

要替换数组中的元素，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个元素）的项替换为 "独角兽"，因为魔法动物也算作是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个元素）的项替换为 "胡须蜥蜴"。不，那不是一只真正的龙——它只是一个蜥蜴！

就像在处理数组索引时一样，你必须确保数组中该索引处确实有元素，否则会抛出一个 "索引超出范围" 错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬" 来添加 "标准贵宾犬" 时发生的错误。要将项添加到数组的末尾，你应该使用 append(_:) 方法或 += ，就像我们在 “向数组添加元素” 中讲到的那样，见 第 70 页 。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数方法外，数组还有 *属性* 。数组的属性是包含关于数组的一些信息的变量或常量。有两个非常有用的属性你可能会用到，分别是布尔属性 isEmpty 和整数属性 count 。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则会告诉你数组中有多少个元素。

请查看这两个属性如何在以下 if-else 语句中使用：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印 "我没有兄弟姐妹"。如果数组中有内容，则打印我们拥有的兄弟姐妹数量："我有 3 个兄弟姐妹" ➋ 。

#### 遍历数组

有时，当你处理数组时，可能会想对数组中的每个元素做一些操作。你可以使用 for-in 循环来实现！以下代码会将 pizzaToppings 数组中的每个配料打印在单独的一行上：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，再后是关键字 in，最后是数组名称 pizzaToppings。然后我们把想要在每个配料上运行的语句放在 for-in 循环的大括号中。常量 topping ➊临时表示数组中的每个比萨配料，随着循环的进行。我们本可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每一个值。如果你在处理数字，你甚至可以用它们对每个项执行数学运算，这样就能进行快速计算！以下代码接收一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与它自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引不同，每个值都有其自己的*键*。因为没有索引，值的存储顺序并不固定。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们看看如何创建字典并编写键，帮助你找到所有需要的信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后在一对方括号内写出键及其对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和其值之间有一个冒号，键/值对之间由逗号分隔。

字典不同于数组，因为它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入时的顺序➊不同。它甚至可能与书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数（doubles）作为键，使用字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），所有的值必须是字符串（strings）。再说一次，你会发现结果窗格中数字的顺序可能与在字典中书写分数的顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。我们来看看怎么做！

#### 访问字典中的值

在字典中查找值与在数组中查找值类似，只不过你使用的是方括号内的键，而不是索引，比如这样：usStates["TX"]。

然而，Swift 返回字典中的值有一个很大的区别。当你访问数组中某个索引的值时，你只是简单地获得该值。而当你使用字典中的键访问值时，你会得到一个可选值（optional）。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找项目时，所使用的键可能不存在于字典中，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以下面会打印出 "I have Texas in my dictionary."。接下来我们尝试通过键 usStates["FL"] ➋ 访问一个字典中不存在的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目分配给你希望它在字典中对应的键。让我们把 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能会出现在字典中的任何位置。

#### 从字典中删除项目

从字典中移除项是非常简单的；你可以通过将值设置为 nil 来做到这一点。因为字典中的值是可选的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键 "MA" 处的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。因此，你不会在字典中看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需将你想要替换的项设置为其他内容。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是一个更好的水果，因为有时苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得这是我们向字典中输入新值的方式。如果键已经存在于字典中，则该键对应的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码演示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性可以检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典中的所有键；values，它包含字典中的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来进行遍历。这是通过字典的键来循环的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是一个常量名 fruit 来代表字典的键，接着是关键字 in，字典名，一个句点和 keys。

在我们的 for-in 循环的花括号内，我们可以访问到键（我们称之为 fruit ➋）以及当我们强制解包它的内容时通过 fruitBasket[fruit]! ➌ 获取到的该键对应的值。该值将是水果的价格。

在这种情况下，强制解包值时使用感叹号是安全的，因为我们知道所使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用每个值，这个值我们称为 price，在 values 属性中。当遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，价格不是一个可选值，因为它是直接作为水果篮字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序不固定，如果你重新运行相同的代码，你可能会看到不同的输出顺序。

### 你学到的内容

在这一章中，你学习了如何将项目存储在数组和字典中。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，而不是通过索引，你会使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

这段代码创建了一个名为 nationalParks 的数组变量，并用三个国家公园的名称初始化它。因为我们将这个数组初始化为存储字符串，所以你只能在其中放入字符串。

图 6-1 展示了你可以如何想象你的数组。它就像一排包含三个国家公园名称的盒子，分别位于索引 0、1 和 2。记住，数组的索引总是从 0 开始！

![Image](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 var 关键字创建了它 ➊ 。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加、删除或交换数组中的项目来更改它。

你还可以创建一个*不可变*数组。不可变数组是使用 let 关键字而不是 var 创建的。类似于常量，一旦不可变数组创建后，它的内容就不能更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如你存储的是彩虹的颜色，最好使用 let。如果你需要更改你的集合，比如你存储的是你最喜欢的 T 恤的数组，这可能会根据流行趋势变化，那你应该使用 var。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号 (: ) 和 [String] ➋ 来指定我们正在创建一个包含字符串值的数组。当你用一个或多个值初始化数组时，这一步是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你也可以像这样轻松地创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化这个数组以存储字符串，并且它只能存储字符串。

我们创建的包含公园列表的数组是一个数组*字面量*的示例。字面量是一个值，它就是你看到的内容。它不是一个变量或常量，而仅仅是一个没有名称的值。"Grand Canyon" 是一个字符串字面量的例子，而 7 是一个整数字面量的例子。数组字面量是由两个方括号括起来、用逗号分隔的一组元素，比如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的元素

假设你想访问数组中的一个元素并在程序中使用它。你的朋友请你讲述你的旅行经历，所以你想使用你存储在数组中的国家公园名称。要访问数组中的一个元素，只需在方括号内写出数组名称和元素的索引：

![](img/Image00118.jpg)

在这个示例中，我们正在访问 nationalParks 中的国家公园名称，并通过 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个元素，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个元素，你使用 nationalParks[1]。

#### 监控范围

关于数组的一个重要点是，如果你尝试访问数组中索引高于最后一个索引的元素，你会遇到错误。在图 6-2 中，你可以看到 nationalParks[3]（即数组中的第四个元素）会出现错误，因为数组中只有三个国家公园，索引范围是从 0 到 2。

如你所见，错误消息显示为索引超出范围。如果你尝试访问数组中不存在的元素，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加元素

更改数组的一种方式是向其中添加新元素。这里有几种不同的方法来实现这一点，让我们逐一看看。

首先，你可以使用数组的 append(_:)方法。*Append*表示添加某个元素。使用 append(_:)方法，你可以将一个新元素添加到数组的末尾。假设你又去了一趟旅行，参观了坏 lands，并且你想把它添加到你的国家公园列表中。为此，在你的游乐场代码中添加以下代码：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写下数组的名称，后跟一个句点，然后使用 append。接着，将你想添加到数组的元素放在括号内。在这个例子中，你把"Badlands"放进了括号。

如果你想在数组的特定位置添加某个元素，使用数组的 insert(_:at:)方法。这方法需要两个参数：你想插入的元素和它应该放置在数组中的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了在参观完大峡谷后，你去了化石森林，并且你想更新你的 nationalParks 数组，使其按你参观的顺序显示各个公园。要更新你的数组，可以使用 insert(_:at:)方法，将化石森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入一个新元素时，数组中从索引 3 开始及其之后的所有元素都会向后移动，以腾出位置给新元素。这意味着原来在索引 3 的元素现在会移到索引 4，原本在索引 4 的元素现在移到索引 5，以此类推。添加化石森林后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新元素，还可以使用+和+=操作符将两个数组合并在一起。假设你有两个数组，分别存储水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组组合起来，制作美味的冰沙。

![](img/Image00123.jpg)

冰沙原料的顺序与水果和液体的顺序相同。如果你用液体+水果的顺序来制作冰沙，那么液体会排在前面。

你可以使用+=操作符将一个数组添加到另一个数组的末尾。以下是将一些鲜奶油加入数组中的方法，以增加额外的美味感：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，即使它只有一个元素。当你使用+=将某个元素添加到数组时，必须确保你只是试图添加另一个数组。如果你只是写了字符串"whipped cream"而没有方括号，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中删除元素

有几种方法可以从数组中删除元素。让我们首先来看一下数组的 removeLast()方法。正如你从方法名中猜到的那样，removeLast()会删除数组中的最后一个元素。我们可以用一个购物清单数组来试一试。

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被删除的项目，所以如果你需要的话，可以将它存储在一个新的常量或变量中。

你还可以通过使用 remove(at:) 方法从特定索引位置删除一个项目。假设你的妈妈不希望你买任何糖果，并把它从清单上删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项目时，所有项目会向一边移动以腾出空间一样，如果你从数组中间删除一个项目，其余的项目会回移，填补那个空位。原本位于索引 3 的“苹果”项目现在位于索引 2，即“糖果”所在的位置。

你还可以使用 removeAll() 方法从数组中删除所有项目。试着在你的 Playground 中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（实际上，现在它是空的！），所以这会导致错误。如果我们对空数组使用 removeLast()，也会出错，因为它什么都没有——根本没有最后一个索引！然而，removeAll() 方法始终是安全的，即使是对空数组也可以使用。

#### 替换数组中的项目

要替换数组中的项目，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的位置替换为“独角兽”，因为魔法动物也算作是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的位置替换为“胡须龙”。不，这不是一只真正的龙——它只是一个蜥蜴！

就像在处理数组索引时一样，你必须确保数组在该索引位置有项目存在，才能修改它的值，否则你会遇到“索引超出范围”错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加“标准贵宾犬”时会发生的错误。要向数组的末尾添加项目，你应该使用 append(_:) 方法或 += 运算符，正如我们在 “向数组中添加项目” 一节中 第 70 页 讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引位置的值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数方法，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。有两个非常有用的属性，你可能会用到，它们分别是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性将告诉你数组中有多少个项目。

请查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印“我没有任何兄弟姐妹。”如果数组中有内容，则打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时候，当你处理数组时，可能希望对数组中的每个项执行某些操作。你可以使用 for-in 循环来实现！以下代码将逐行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，再加上关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将要对每个配料执行的语句放入 for-in 循环的花括号内。常量 topping ➊ 在我们遍历数组时，暂时代表每个披萨配料。我们本可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以利用它们对每个项执行数学运算，这样可以进行快速计算！以下代码获取一个数字数组并计算每个数字的平方（数字的平方是该数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典很重要！

*字典* 也是一个值的集合，但与有序索引不同，每个值都有自己的 *键*。由于没有索引，值的存储顺序是无序的。要访问字典中的值，可以通过键来查找它们。

键必须是唯一的。你不能在同一个字典中重复使用相同的键。如果有两个相同的键，且你要求计算机返回其中一个的值，计算机将无法确定选择哪一个！

让我们来看看如何创建一个字典，并写下有助于你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写上 var 和字典的名称。然后在一对方括号内写下键和值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间由逗号分隔。

字典与数组不同，字典是*无序*的。因此，你在结果窗格中看到的州的顺序 ➋ 可能与你输入的州的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到，结果窗格中的数字顺序可能与字典中分数的顺序有所不同。这是可以接受的，因为你不需要知道顺序来访问任何内容。你可以通过键来查找你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

查找字典中的值类似于访问数组中的值，不同之处在于你在方括号内使用的是键而不是索引，比如这样：usStates["TX"]。

然而，Swift 返回字典中值的方式有很大不同。当你访问数组中某个索引的值时，你只是直接获得该值。当你使用键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能为 nil。当你在字典中查找项时，Swift 返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，就没有值可供访问。尝试访问一个不存在的值会导致一个严重的错误！为避免这个问题，Swift 返回可选值。这意味着在对字典中获取的任何值进行操作之前，你需要解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印出 "我在我的字典中有 Texas"。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不存在于字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃，而是打印出 "我在我的字典中没有这个州"。

#### 向字典添加项

要向字典中添加项，首先写出字典的名称，并将新项赋给你希望其拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需要将值设置为 nil。因为字典中的值是以可选项的形式返回的，所以你无需担心 nil 会在字典中引起问题。

![](img/Image00145.jpg)

你可以看到，在你删除 "MA" 键的值之后，usStates 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为 "red" 设置了值 "apple"，但后来我们决定使用 "raspberry" 作为更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

就像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性来检查字典中有多少项。假设你有一个待售的水果篮子。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。我们在遍历字典时会使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。由于每个项都有一个键和值，你可以通过两种不同的方式来做到这一点。以下是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是常量名称 fruit，代表字典的键，再是关键字 in，字典名称，一个句点，以及 keys。

在我们的 for-in 循环的大括号内部，我们可以访问到键（我们称之为 fruit ➋）和该键的值，当我们强制解包 fruitBasket[fruit] 的内容时 ➌。该值就是水果的价格。

在这种情况下，使用感叹号强制解包这个值是安全的，因为我们知道正在使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性来循环：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环方式，但现在我们使用常量来引用每个值，我们称之为 price ，它来自 values 属性。在循环遍历值时，我们无法从循环内部访问到键。

另一个需要注意的区别是 price 不是可选项，因为它是直接作为值访问的，来自 fruitBasket 字典。这意味着我们不需要解包它。你应该仍然能看到打印语句打印三次。图 6-6 展示了两种循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组那样按数字顺序排列！由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组并通过索引查找每个项目。如果你想按键来存储项目，则应使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大基础。接下来，我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的一块代码，用来执行特定的任务。写好一个函数后，你可以在程序中的几乎任何地方使用它的名字来调用它。

图 6-1 展示了你如何想象你的数组。它就像一排盒子，索引 0、1 和 2 里分别包含三个国家公园的名字。记住，数组的索引总是从 0 开始！

![图片](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 var 关键词创建了它 ➊。存储在变量中的数组称为*可变*数组。这意味着你可以通过添加、删除或交换数组中的项目来修改它。

你还可以创建一个*不可变*数组。一个不可变数组是通过关键词 let 而不是 var 创建的。与常量类似，一旦不可变数组被创建，它其中的内容就不能被改变。

那么什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，例如存储彩虹的颜色，最好使用 let。如果你需要修改你的集合，例如存储你最喜欢的 T 恤衫的数组，这可能会根据流行的款式变化，那么应该使用 var。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 来指定我们正在创建一个字符串值的数组。这个步骤在创建数组并用一个或多个值初始化时是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你完全可以通过下面的方式创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了这个数组来存储字符串，并且它只能存储字符串。

我们创建数组时使用的公园列表是一个数组*字面量*的例子。字面量是一个值，它就是你看到的那样。它不是一个变量或常量，而是一个没有名字的值。"Grand Canyon" 是字符串字面量的例子，7 是整数字面量的例子。数组字面量是包含在两个方括号之间的项目列表，项目之间用逗号分隔，如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想访问数组中的一个项目并在程序中使用它。你的朋友请你告诉他们你所有的旅行经历，所以你想使用你在数组中存储的国家公园的名称。要访问数组中的一个项目，写出数组名称，后面跟着该项目的索引，索引位于方括号中：

![](img/Image00118.jpg)

在这个示例中，我们访问了国家公园的名称，并使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个索引大于数组中最后一个索引的项目，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个项目）会给出错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一个错误信息，说"Index out of range"。如果你尝试访问数组中不存在的项，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

改变数组的一种方法是向其添加新项。有几种不同的方法来做到这一点，让我们逐一看看。

首先，你可以使用数组的 append(_:)方法。*Append*意味着添加某物。使用 append(_:)方法，你可以将一项新内容添加到数组的末尾。假设你又去了旅行，参观了 Badlands，你想将它添加到你的国家公园列表中。为此，可以在你的游乐场中添加如下代码：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写下数组的名称，后面跟一个句点，然后是 append。接着，将你想要添加到数组中的项放入括号内。在此案例中，你将"Badlands"放入了括号中。

如果你想在数组中的特定位置添加某项，使用数组的 insert(_:at:)方法。这个方法接受两个参数：你想插入的项和它应该放置的位置索引。（我们将在第七章中详细讨论参数。）

假设你完全忘记了自己在参观大峡谷后去了化石森林，现在你想更新你的 nationalParks 数组，以按你参观的顺序显示这些公园。要更新数组，你可以使用 insert(_:at:)方法，将化石森林插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，数组中索引为 3 或更高的所有项都会被推移，以为新项腾出空间。这意味着原本在索引 3 处的项现在位于索引 4 处，原本在索引 4 处的项现在位于索引 5 处，以此类推。在你添加化石森林之后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用+和+=运算符将两个数组合并在一起。假设你有两个数组，分别包含制作水果冰沙的食材：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组合并来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的食材顺序与水果和液体中的顺序相同。如果你用液体+水果创建冰沙，那么液体会排在前面。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。为了让味道更美味，添加一些鲜奶油如下：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只包含一个项。当你使用+=将某物添加到数组时，你必须确保只尝试添加另一个数组。如果你仅仅写下字符串"whipped cream"，没有方括号，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。让我们先来看看数组的 removeLast()方法。正如你从它的名字猜到的那样，removeLast()会移除数组中的最后一项。让我们用一个 shoppingList 数组试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项，所以如果你愿意，你可以将它存储在一个新的常量或变量中。

你还可以通过使用 remove(at:)方法来从指定的索引移除项。假设你妈妈不想让你买任何糖果，于是把它从清单上删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有其他项会向一边移动腾出空间一样，如果你从数组中间移除项，剩下的项会向回移来填补空位。原本在索引 3 位置的"苹果"项现在在索引 2 的位置，原本"糖果"的位置。

你也可以通过 removeAll()方法移除数组中的所有项。试着在你的游乐场中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的项会导致错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项（实际上现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为它里面没有任何东西——根本没有最后一个索引！不过，removeAll()方法始终是安全的，即使是在空数组上也可以使用。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引位置设置为新值，如下所示：

![](img/Image00131.jpg)

在➊位置，我们用"独角兽"替换了索引 2（第三项）的位置，因为魔法动物也是最爱的动物！在➋位置，我们用"须龙"替换了索引 0（第一项）的位置。不，这可不是一条真正的龙——它只是一只蜥蜴！

就像任何时候你在处理数组索引时一样，在你更改值之前，一定要确保该索引位置的项在数组中存在，否则你会遇到"索引越界"的错误。

图 6-3 显示了当你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加"标准贵宾犬"时发生的错误。要将项添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在 “添加项到数组”一节中第 70 页所讲解的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引位置的值。*

现在你知道如何根据需要更改数组了。你可以添加项，移除项或替换项。接下来，我们将看看如何使用数组的属性来了解更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有 *属性*。数组的属性是包含有关数组信息的变量或常量。有两个非常有用的属性你可能会用到，一个是布尔型属性 isEmpty，另一个是整数型属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少个元素。

看看下面的 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印“我没有兄弟姐妹”。如果数组中有内容，则打印我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时，当你处理数组时，可能会想对数组中的每一项执行某些操作。你可以使用 for-in 循环来实现！以下代码将在单独的行上打印出 pizzaToppings 数组中的每一项：

![图片](img/Image00135.jpg)

为了写一个用于 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将希望对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们循环时临时代表数组中的每一个 pizza topping。我们本可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例中 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以用它们对每个项执行数学运算，这样就能进行快速的计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是该数字与其自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一种值的集合，但与有序索引的数组不同，每个值都有自己的 *键*。由于没有索引，值不会以任何特定的顺序存储。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。在同一个字典中，不能有相同的键。如果存在两个相同的键，你请求计算机给你其中一个键的值时，计算机将无法知道选择哪个！

让我们看看如何创建一个字典并编写键，以帮助你找到所需的所有信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上 `var` 和字典的名称。然后在一对方括号中写上键和值对，就像数组一样。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板➋中看到的状态顺序可能与输入状态的顺序➊不同，甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 `var` 来创建一个可变字典，或使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以将键使用 `double` 类型，值使用 `string` 类型：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 `double` 类型，所有的值必须是 `string` 类型。同样，你会发现结果面板中的数字顺序可能与在字典中编写分数时的顺序大不相同。这没问题，因为你不需要知道顺序就能访问任何项。你可以通过键来查找需要的任何项。让我们来看一下如何操作！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只不过你使用的是方括号中的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典值的方式有一个很大的区别。当你访问数组中的某个索引时，你会直接获得该值。当你使用键访问字典中的值时，你将获得一个可选值。

在第五章中，你学到了可选值可能包含值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可供访问。试图访问一个不存在的值会导致严重错误！为了避免这个问题，Swift 返回可选值。这意味着你需要在使用从字典中取出的值之前进行解包。

要解包一个可选值，首先你需要通过 `if-let` 语句检查它是否存在，就像我们在第五章中所做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 `if let` 语句将常量 `loneStarState` 设置为 `usStates["TX"]` ➊ 。因为字典中有这个州，所以输出 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 `usStates["FL"]` ➋ 来访问一个字典中没有的州。幸运的是，由于我们使用了 `if-let` 语句，当计算机无法找到这个州时，程序不会崩溃。相反，输出 "I don't have that state in my dictionary."。

#### 向字典中添加项目

要向字典中添加一个项，首先写下字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

当你查看 `usStates` 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"] 。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除项非常简单；你只需将值设置为 nil 。由于字典中的值是作为可选项返回的，因此你不需要担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，nil 是特殊的，意味着没有任何值。这就是为什么在我们的字典中你看不到 "MA": nil。

#### 在字典中替换项目

在字典中替换项目也很容易。它的工作原理与替换数组中的项目相同。你只需将要替换的项设置为其他值。例如，假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple" ，但后来我们决定使用 "raspberry" 更好，因为有时候苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry" ，我们将 `colorFruits["red"]` 设置为它的新值 ➊ 。

你可能还记得这与我们向字典中输入新值的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性检查字典是否为空，如果字典不为空，则使用 `count` 属性检查你有多少项。假设你有一个水果篮子在出售。你可以使用这些属性帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys` ，它包含字典的所有键，和 `values` ，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

您可以使用 for-in 循环遍历字典。因为每个项目都有一个键和一个值，所以可以用两种不同的方式来做这件事。这是如何使用其键遍历字典的方法：

![图像](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先编写关键字 for ，然后是一个常量名 fruit ，用于字典键，关键字 in ，字典名称，一个句点和 keys 。

在我们的 for-in 循环的大括号中，我们既可以访问键，我们称之为 fruit ➋ ，也可以在使用 fruitBasket[fruit]! ➌ 强制解包其内容时访问该键的值。该值将是水果的价格。

在这种情况下，我们可以安全地使用感叹号来强制解包值，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码将对我们字典中的每个键运行一次。因此，您应该看到打印语句显示三次。

我们还可以使用其值属性遍历字典：

![图像](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用每个值，我们称之为 price ，在 values 属性中。在循环值时，我们无法从内部访问键。

另一个要注意的区别是价格不是可选的，因为它直接作为 fruitBasket 字典中的值访问。这意味着我们不必解包它。您仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图像](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

您的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中那样按编号顺序排列！并且因为顺序不是保证的，如果您再次运行相同的代码，可能会看到不同的顺序打印。

### 你学到了什么

在本章中，您学习了如何在数组和字典中存储项目集合。要在有序列表中存储项目，您将使用数组，并通过其索引查找每个项目。如果您想按键存储项目，那么将使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大基础模块。接下来，我们将学习另一个非常强大的工具——函数。函数是您创建并命名以执行特定任务的代码块。编写函数后，您可以使用其名称从程序中的几乎任何地方调用它。

![图像](img/Image00115.jpg)

*图 6-1：nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 var 关键字创建了它 ➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加、删除或交换项来更改它。

你也可以创建一个*不可变*数组。不可变数组是使用 let 关键字而不是 var 创建的。与常量类似，一旦创建了不可变数组，它其中的内容就不能再更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，例如你正在存储彩虹的颜色，最好使用 let。如果你需要更改你的集合，比如存储你最喜欢的 T 恤的数组，这可能会根据流行趋势而变化，那么你应该使用 var。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们指定了我们正在创建一个包含字符串值的数组，通过添加冒号(: )和[String] ➋。当你创建数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定你想让数组存储的数据类型。这意味着你也可以像这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了一个数组来存储字符串，而且它只能存储字符串。

我们创建的包含公园的数组是一个*字面量*数组的示例。字面量是一个值，它正是你所看到的内容。它不是变量或常量，而仅仅是没有名字的值。“Grand Canyon”是字符串字面量的一个例子，7 是整数字面量的一个例子。数组字面量是一个项的列表，项被包含在两个方括号之间并用逗号分隔，像这样：["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项

假设你想访问数组中的一项并在你的程序中使用它。你的朋友问你能不能讲讲你的旅行经历，于是你想用你存储在数组中的国家公园的名字。要访问数组中的一项，写出数组的名称，后跟该项的索引，索引放在方括号内：

![](img/Image00118.jpg)

在这个示例中，我们访问了国家公园的名字，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项，可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项，可以使用 nationalParks[1]。

#### 观察范围

关于数组有一个重要的点是，如果你尝试访问一个索引超出数组最后一个索引的项，你将会遇到错误。在图 6-2 中，你可以看到 nationalParks[3]（这应该是数组中的第四个项）会导致错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误信息，显示“索引超出范围”。如果你尝试访问数组中不存在的项，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

更改数组的一种方法是向其中添加新项。有几种不同的方法可以做到这一点，接下来让我们看看每种方法。

首先，你可以使用数组的 append(_:)方法。*Append*意思是添加某物。使用 append(_:)方法，你可以将一个新项添加到数组的末尾。假设你去了一次新的旅行，访问了 Badlands，并且想要将它添加到你的国家公园列表中。为了做到这一点，向你的游乐场代码中添加以下内容：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写下数组的名称，然后加上一个句点，再加上 append。接着，将你想添加到数组的项放入括号内。在这种情况下，你将“Badlands”放入括号内。

如果你想在数组的特定位置添加项，使用数组的 insert(_:at:)方法。这个方法接受两个参数：你想插入的项和它在数组中应该放置的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了你在访问 Grand Canyon 之后去过 Petrified Forest，而你想更新 nationalParks 数组，以便它按你访问公园的顺序显示。要更新数组，你可以使用 insert(_:at:)方法将 Petrified Forest 放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项时，数组中索引 3 及更高位置的所有项都会向后移动，为新项腾出空间。这意味着，原本在索引 3 处的项现在位于索引 4 处，原本在索引 4 处的项现在位于索引 5 处，以此类推。在你添加了“Petrified Forest”之后，nationalParks 数组变为["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项，还可以使用+和+=运算符将两个数组合并在一起。假设你有两个数组，分别是制作水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中原料的顺序与水果和液体中的顺序相同。如果你用 liquids + fruits 创建冰沙，那么液体会先放进去。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。为了增加额外的美味，按如下方式添加一些奶油：

![](img/Image00124.jpg)

注意，["whipped cream"]是一个数组，尽管它只有一个元素。当你使用+=运算符将某物添加到数组时，必须确保你只在添加另一个数组。如果你只是写下字符串“whipped cream”而没有方括号，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

删除数组中项目的方法有几种。首先我们来看数组的 removeLast()方法。正如你从它的名字中可能猜到的那样，removeLast()会删除数组中的最后一个项目。我们可以在 shoppingList 数组上试一下：

![](img/Image00126.jpg)

很棒！注意，removeLast()方法会返回被移除的项目，因此如果你愿意，可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:)方法从指定的索引中删除一个项目。假设你的妈妈不希望你买糖果，并把它从列表中拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项目时，所有其他项目都会向后挪动以腾出空间一样，如果你从数组的中间删除一个项目，其他的项目也会向前挪动以填补那个空位。原来位于索引 3 的“苹果”项目现在位于索引 2 的位置，这里原本是“糖果”。

你还可以使用 removeAll()方法删除数组中的所有项目。在你的 playground 中试试看：

![](img/Image00129.jpg)

注意，尝试删除一个不存在的索引位置的项目会导致错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项目（事实上，现在它是空的！），因此这会抛出一个错误。如果我们对空数组使用 removeLast()，也会报错，因为数组里没有任何元素——根本没有最后一个索引！不过，removeAll()方法总是安全的，即使在空数组上也可以使用。

#### 替换数组中的项目

要替换数组中的一个项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 位置，我们将索引 2（第三个项目）处的元素替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ 位置，我们将索引 0（第一个项目）处的元素替换为“鬃蜥”。不，这不是一只真正的龙——它只是一种蜥蜴！

就像你在处理数组索引时一样，你必须确保在修改某个索引的值之前，数组中该位置已经有一个项目，否则你会遇到“索引超出范围”的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬"来添加“标准贵宾犬”，会发生的错误。要将项目添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“添加项目到数组”一节中讲到的，参见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换一个超出现有数组范围的索引位置的值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何使用数组的属性来了解更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含有关数组信息的变量或常量。有两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性将告诉你数组中有多少项。

看看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印“我没有兄弟姐妹。”如果数组中有内容，则打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时候，当你在处理数组时，可能希望对数组中的每个项目做一些操作。你可以使用 for-in 循环来做到这一点！下面的代码将在 pizzaToppings 数组中为每个配料打印一行：

![Image](img/Image00135.jpg)

为了写一个适用于 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，接着是常量 topping，再是关键字 in，最后是数组的名称 pizzaToppings。然后，我们将想要为每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊临时表示数组中每个披萨配料，随着循环的进行，我们可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环打印数组中的每个值非常好。如果你处理的是数字，你甚至可以用它们对每个项目进行数学运算，这样就能快速进行计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是该数字乘以它自身）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典很重要！

*字典*也是一组值，但与有序索引不同，每个值都有自己的*键*。由于没有索引，这些值没有特定的存储顺序。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，且你要求计算机给你其中一个键的值，计算机将不知道选择哪一个！

让我们来看看如何创建一个字典并编写键值，帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 var 和字典的名称。然后将键和值放在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与你输入州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，所有的值也必须是相同的类型，但键的类型不一定与值的类型相匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。你会发现结果面板中数字的顺序可能与字典中分数的顺序不同。这是正常的，因为你不需要知道顺序就能访问任何项。你可以通过键找到任何你需要的项。我们来看看怎么做！

#### 在字典中访问值

在字典中查找一个值类似于在数组中访问一个值，只不过你在方括号内使用的是键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个很大的区别。当你在数组的索引处访问一个值时，你只会得到值。而当你用键访问字典中的值时，你会得到一个可选项。

在第五章中，你学到过可选项可能包含一个值，也可能是 nil。当你在字典中查找项时，Swift 返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下没有值可访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选项。这意味着在你能对字典中的任何值进行操作之前，必须先解包它。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出"I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出"I don't have that state in my dictionary."。

#### 向字典添加项

要向字典添加项，首先写出字典的名称，并将新项分配给你想要在字典中使用的键。让我们向 usStates 字典中添加"Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设为 nil。由于字典中的值作为可选项返回，因此你无需担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"对应的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。这就是为什么你在我们的字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很容易。它的工作方式与替换数组中的项相同。你只需将想要替换的项设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为"red"设置了"apple"这个值，但后来我们决定使用"raspberry"作为更好的水果，因为有时候苹果是绿色或黄色的。为了用"raspberry"替换"apple"，我们将 colorFruits["red"]设置为新的值 ➊。

你可能记得，这与我们将新值输入字典的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性会检查字典中有多少项。想象一下，你有一个水果篮子待售。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们在遍历字典时会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每个项目都有一个键和值，因此可以通过两种不同的方式来完成此操作。这是使用字典的键遍历字典的方式：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写下关键字 `for`，然后是字典键的常量名称 `fruit`，接着是关键字 `in`，字典的名称，接着是一个句点和 `keys`。

在 `for-in` 循环的大括号内，我们可以访问键（我们称之为 `fruit` ➋），并且在通过 `fruitBasket[fruit]!` 强制解包其内容后，访问该键对应的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道我们使用的 `fruit` 键肯定存在于字典中。

我们在 `for-in` 循环内编写的任何代码都会针对字典中的每个键运行一次。所以你应该看到 `print` 语句显示三次。

我们也可以通过字典的值属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同的 `for-in` 循环方式，但现在我们使用一个常量来引用 `values` 属性中的每个值，我们将其称为 `price`。在遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，`price` 不是一个可选值，因为它是直接作为 `fruitBasket` 字典中的值进行访问的。这意味着我们不需要解包它。你仍然应该看到 `print` 语句打印三次。图 6-6 显示了两个循环的输出结果。

![图片](img/Image00151.jpg)

*图 6-6: 使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样有序！由于顺序无法保证，因此如果再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将项集合存储在数组和字典中。为了将项存储在有序列表中，你将使用数组并通过索引查找每个项。如果你希望通过键来存储项，则应该使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大基础。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

*图 6-1: nationalParks 数组*

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 var 关键字创建了它 ➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加、删除或交换项目来更改它。

你还可以创建一个*不可变*数组。不可变数组是通过关键字 let 而非 var 来创建的。与常量类似，一旦创建了不可变数组，其中的任何内容都不能更改。

那么，何时使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，最好使用 let，比如如果你要存储彩虹的颜色。你应该使用 var，如果你需要更改集合，比如存储你最喜欢的 T 恤的数组，这些可能会随着流行趋势的变化而改变！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号(:)和[String] ➋来指定我们正在创建一个字符串值的数组。这个步骤在你创建数组并初始化为一个或多个值时是可选的，因为 Swift 会使用类型推断来确定你希望数组保存的数据类型。这意味着，你完全可以通过以下方式创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了一个只能保存字符串的数组。

我们创建数组时使用的公园列表是一个*字面量*数组的示例。字面量是一个值，它正是你所看到的。它不是变量或常量，而只是一个没有名称的值。“Grand Canyon”是字符串字面量的例子，而 7 是整数字面量的例子。数组字面量是包含在两个方括号之间，并用逗号分隔的项目列表，比如["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想访问数组中的某个项目，并在程序中使用它。你的朋友要求你告诉他们你所有的旅行经历，所以你想使用你存储在数组中的国家公园名称。要访问数组中的项目，写出数组名称，后面跟上方括号内的项目索引：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你使用 nationalParks[1]。

#### 查看范围

关于数组的一个重要点是，如果你尝试访问比数组最后一个索引还高的索引，将会出现错误。在图 6-2 中，你可以看到 nationalParks[3]（即数组中的第四个项目）会给出错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一个错误信息，显示“索引超出范围”。如果你尝试访问数组中不存在的项，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

更改数组的一种方法是向其中添加新项。有几种不同的方法可以做到这一点，让我们来看看每种方法。

首先，你可以使用数组的`append(_:)`方法。*Append*意味着添加某物。使用`append(_:)`，你可以将一个新项添加到数组的末尾。假设你又去旅行，参观了“Badlands”，并想将它添加到你的国家公园列表中。为此，可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用`append(_:)`方法，首先写下你的数组名称，然后加一个点，接着是`append`。然后，将你想要添加到数组中的项放在圆括号内。在这种情况下，你将“Badlands”放入圆括号内。

如果你想在数组的特定位置添加某物，使用数组的`insert(_:at:)`方法。这个方法接受两个参数：你想插入的项以及它在数组中应该插入的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了你在参观“大峡谷”之后就去了“Petrified Forest”，并且你想更新你的`nationalParks`数组，使其显示你参观公园的顺序。为了更新你的数组，你可以使用`insert(_:at:)`方法将“Petrified Forest”放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，数组中索引 3 及以上的所有项都会向后移动，为新项腾出空间。这意味着原本在索引 3 的项现在位于索引 4，原本在索引 4 的项现在位于索引 5，依此类推。在你添加“Petrified Forest”后，`nationalParks`数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项，还可以使用`+`和`+=`操作符将两个数组合并起来。假设你有两个数组，分别包含做果昔所需的水果和液体：

![](img/Image00122.jpg)

现在你可以通过添加水果和液体数组来制作美味的果昔。

![](img/Image00123.jpg)

果昔中配料的顺序与`fruits`和`liquids`中的顺序相同。如果你将`liquids + fruits`来创建果昔，那么液体将排在前面。

你可以使用`+=`操作符将一个数组添加到你的数组的末尾。为了增加一些美味感，可以按如下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，尽管`["whipped cream"]`只有一个项，它仍然是一个数组。当你使用`+=`将某物附加到数组时，你必须确保你只尝试添加另一个数组。如果你只是写了字符串“whipped cream”，而没有方括号，程序将报错。

![Image](img/Image00125.jpg)

#### 从数组中删除项目

删除数组项有几种方法。我们先来看看数组的 removeLast() 方法。正如你从它的名称中可能猜到的那样，removeLast() 会移除数组中的最后一个项。我们用一个 shoppingList（购物清单）数组来试试：

![](img/Image00126.jpg)

真棒！请注意，removeLast() 方法会返回被删除的项，因此如果你想，你可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:) 方法从特定索引删除一个项。假设你的妈妈不希望你买糖果，并将其从清单中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有其他项目都挪动以腾出空间一样，如果你从数组的中间删除一个项目，其余项目会向回挪动，填补空缺。索引 3 处的“apples”（苹果）项目现在会出现在索引 2 处，原本在那里的“candy”（糖果）已被移除。

你还可以使用 removeAll() 删除数组中的所有项。试试在你的 Playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以会抛出错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为它里面什么都没有——根本没有最后一个索引！然而，使用 removeAll() 始终是安全的，即使在空数组上也是如此。

#### 替换数组中的项

要替换数组中的一项，你只需将该索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ ，我们将索引 2（第三个项目）处的项替换为“Unicorn”（独角兽），因为魔法动物也算作是喜欢的动物！在 ➋ ，我们将索引 0（第一个项目）处的项替换为“Bearded dragon”（须龙）。不，这不是一条真正的龙——它只是一个蜥蜴！

就像每次操作数组索引时，你必须确保在该索引处的数组中存在项，否则你会得到一个超出范围的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 来添加“Standard poodle”（标准贵宾犬），会发生的错误。要将一个项添加到数组的末尾，你应该使用 append(_:) 方法或 += ，就像我们在 “向数组中添加项目” 章节中在 第 70 页 讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换一个超出现有数组范围的索引处的值。*

现在你知道如何根据需要更改数组了。你可以添加项、移除项或替换项。接下来，我们将了解如何使用数组的属性，获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空来返回 true 或 false，count 属性则告诉你数组中有多少项。

看看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印出“我没有兄弟姐妹。”但如果数组中有内容，则打印出我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时候在处理数组时，你可能想对数组中的每个项目执行某些操作。你可以使用 for-in 循环来实现！以下代码会将 pizzaToppings 数组中的每个配料打印在单独的一行：

![图片](img/Image00135.jpg)

为 pizzaToppings 数组编写 for-in 循环时，我们使用了关键字 for，后跟常量 topping，再加上关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将想要为每个配料执行的语句放入 for-in 循环的大括号中。常量 topping ➊在我们遍历数组时暂时代表每个配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以使用它们对每个项目执行数学运算，这样就能进行快速计算！以下代码获取一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。因为没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过键查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就无法知道选择哪个！

让我们来看看如何创建一个字典，并编写键来帮助你查找所需的所有信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写`var`和字典的名称。然后在一对方括号内写入键和值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板 ➋ 中看到的状态顺序可能与输入状态的顺序 ➊ 不同，甚至可能与书中打印的顺序不同！

和数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型（doubles），所有的值必须是字符串类型（strings）。同样，你会看到在结果面板中，数字的顺序可能与在字典中写入分数的顺序大不相同。这是没问题的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何需要的项目。我们来看一下如何操作！

#### 访问字典中的值

在字典中查找值的方式类似于在数组中访问值，只是你在方括号内使用键而不是索引，例如：usStates["TX"]。

然而，在 Swift 中，字典返回值的方式与数组不同。当你访问数组中的一个索引时，你只会得到该值。当你用键访问字典中的值时，你会得到一个可选项。

在第五章中，你学到可选项可能包含一个值，也可能是 nil。Swift 返回可选项的原因是你在查找字典中的项目时，使用的键可能在字典中不存在，在这种情况下无法访问值。尝试访问一个不存在的值会给你一个错误！为了避免这个问题，Swift 返回可选项。这意味着在对字典中的值进行任何操作之前，你需要先解包它。

要解包一个可选项，首先你使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出“我在字典里有 Texas”。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“我字典里没有这个州”。

#### 向字典添加项

要向字典添加一项，首先写出字典的名称，并将新项分配给你希望其在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设置为 nil。因为字典中的值是可选的，你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键“MA”的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的一项也很简单。它与替换数组中的项一样。你只需将你想要替换的项设置为其他值。比如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为“red”设置了“apple”的值，但后来我们决定“raspberry”是一个更好的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为新的值➊。

你可能还记得，这与我们向字典中输入新值的方式相同。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式进行。以下是如何通过键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，接着是字典键的常量名称 fruit，关键字 in，字典名称，句点，最后是 keys。

在我们的 for-in 循环的花括号内部，我们可以访问到键（我们称之为 fruit ➋），以及当我们使用 fruitBasket[fruit]! ➌ 强制解包其内容时，该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的值属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。当遍历值时，我们无法从循环内部访问到键。

另一个需要注意的区别是，price 不是可选的，因为它直接作为值从 fruitBasket 字典中访问。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样是按编号顺序排列的！而且因为顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，则会使用字典。

了解数组和字典及其使用方法是几乎任何编程语言的强大构建块。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以通过它的名字从程序中的几乎任何地方调用它。

#### 使用可变和不可变数组

我们的 nationalParks 数组是一个变量，因为我们使用 var 关键字创建了它 ➊。存储在变量中的数组称为 *可变* 数组。这意味着你可以通过添加、移除或交换其中的项目来修改它。

你也可以创建一个 *不可变* 数组。不可变数组是使用 let 关键字创建的，而不是 var。类似于常量，一旦创建了不可变数组，数组中的内容就不能再更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，例如存储彩虹的颜色时，最好使用 let。如果你需要更改集合，例如存储你最喜欢的 T 恤的数组（这个数组可能会根据流行趋势发生变化），则应该使用 var。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 指定了我们创建的是一个字符串类型的数组。此步骤在创建数组并用一个或多个值初始化时是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着，你完全可以这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化这个数组时是用来存储字符串的，因此它只能存储字符串。

我们用来创建数组的国家公园列表是一个数组 *字面量* 的例子。字面量是一个值，它就是你看到的那样。它不是变量或常量，而只是一个没有名字的值。 "Grand Canyon" 是一个字符串字面量，7 是一个整数字面量。数组字面量是包含在两个方括号之间并用逗号分隔的项目列表，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想要访问数组中的某个项目并在程序中使用它。你的朋友请你告诉他们关于你旅行的所有事情，所以你想使用你存储在数组中的国家公园名称。要访问数组中的某个项目，只需写下数组名称，后面跟着项目的索引，索引要放在方括号内：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个比数组最后一个索引更大的索引位置，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这应该是数组中的第四项）会产生错误，因为数组中只有三个国家公园，索引范围是从 0 到 2。

如你所见，系统会提示你一个错误信息：“索引超出范围”。如果你尝试访问数组中不存在的项，你的应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

改变一个数组的方式之一是向其添加新项。有几种不同的方法可以做到这一点，让我们逐一看看。

首先，你可以使用数组的 `append(_:)` 方法。*Append* 意思是添加某物。通过使用 `append(_:)`，你可以向数组的末尾添加一项新的元素。假设你又去了一趟旅行，参观了“Badlands”，并且你想将它添加到你的国家公园列表中。为此，你可以在你的 playground 中添加如下代码：

![](img/Image00120.jpg)

要使用 `append(_:)` 方法，首先写下你的数组名称，后面跟一个句点，再写 `append`。然后，将你想要添加到数组中的项放入括号内。在这个例子中，你将“Badlands”放入了括号内。

如果你想在数组中的特定位置添加一个元素，可以使用数组的 `insert(_:at:)` 方法。此方法有两个参数：你想插入的项以及它应该放置在数组中的索引位置。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了自己在参观大峡谷后去过“Petrified Forest”，并且你想更新你的 `nationalParks` 数组，使它按你访问的顺序显示公园。要更新数组，你可以使用 `insert(_:at:)` 方法，将“Petrified Forest”放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项时，数组中从索引 3 或更高的所有元素都会被推后以为新项腾出空间。这意味着原本在索引 3 的项现在会移到索引 4，原本在索引 4 的项会移到索引 5，以此类推。添加了“Petrified Forest”后，`nationalParks` 变成了 `["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]`。

#### 合并数组

你不仅可以向数组添加新项，还可以使用 `+` 和 `+=` 运算符将两个数组合并。假设你有两个数组，分别包含水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过添加 `fruits` 和 `liquids` 数组来制作一款美味的冰沙。

![](img/Image00123.jpg)

冰沙中原料的顺序与 `fruits` 和 `liquids` 中的顺序相同。如果你使用 `liquids + fruits` 创建冰沙，那么液体将排在前面。

你可以使用 `+=` 运算符将一个数组添加到另一个数组的末尾。为了增加额外的美味感，可以按如下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，`["whipped cream"]` 是一个数组，尽管它只有一个项。当你使用 `+=` 来向数组添加元素时，必须确保你添加的是另一个数组。如果你只是写了字符串 "whipped cream" 而没有用方括号括起来，就会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们首先看看数组的 removeLast()方法。正如你从它的名字可以猜到的那样，removeLast()会移除数组中的最后一个项目。让我们在一个 shoppingList 数组中试试这个方法：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项目，所以如果你需要，可以将它存储在一个新的常量或变量中。

你还可以使用 remove(at:)方法从特定索引移除一个项目。假设你的妈妈不希望你买糖果，并把它从列表上拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有项目会向一侧移动以腾出空间一样，如果你从数组中间移除一个项目，其余的项目会向前移动以填补那个空位。原来在索引 3 的“苹果”项目现在位于索引 2 的位置，原本“糖果”在这里。

你也可以使用 removeAll()方法移除数组中的所有项。试试在你的 Playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引位置的项目会给你一个错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项目（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有任何内容——根本没有最后一个索引！然而，removeAll()总是安全的，即使是在空数组上使用也没问题。

#### 替换数组中的项目

要替换数组中的一个项目，你需要将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在➊，我们用“独角兽”替换了索引 2（第三个项目）的位置，因为魔法动物也算作最喜欢的动物！在➋，我们用“胡须龙”替换了索引 0（第一个项目）的位置。不是的，那不是一条真正的龙——它只是一个蜥蜴！

就像每次处理数组索引时一样，你必须确保该索引位置的项目在数组中存在，才能更改它的值，否则你会遇到索引超出范围的错误。

图 6-3 展示了如果你尝试用 favoriteAnimals[3] = "Standard poodle"添加“标准贵宾犬”时会发生的错误。要向数组的末尾添加项目，你应该使用 append(_:)方法或+=，我们在 “向数组添加项目”中已经讲过，参见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引位置的值。*

现在你知道如何根据需要更改数组了。你可以添加项目、移除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了 append(_:) 和 removeLast() 这类方法，数组还有 *属性*。数组的属性是包含关于数组的某些信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少个项目。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。如果数组中有内容，则打印我们有多少兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时候，当你处理数组时，可能想对数组中的每个项目做一些事情。你可以使用 for-in 循环来实现！以下代码将在单独的行上打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将想要为每个配料执行的语句放入 for-in 循环的大括号内。常量 topping ➊ 在我们循环遍历时临时代表数组中的每个披萨配料。我们可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项目执行数学运算，这样就能快速进行计算！以下代码取一个数字数组并计算每个数字的平方（一个数字的平方是该数字与它自己相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一种值的集合，但与有序索引不同，每个值都有自己的 *键*。因为没有索引，所以这些值没有特定的存储顺序。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就无法知道选择哪个！

让我们来看看如何创建一个字典，并写出有助于你查找所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后像数组一样在一对方括号内写入键和值对。我们来创建一个字典，用来存储一些美国州的名称。每个州的键将是其两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果面板中看到的州的顺序➋很可能与输入州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，所有值也必须是相同类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一个分数集合，你可以使用 double 类型作为键，使用字符串类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 double 类型，所有的值必须是字符串类型。同样，你会发现结果面板中数字的顺序可能与字典中分数的顺序完全不同。这没关系，因为你不需要知道顺序来访问任何内容。你可以通过键找到任何你需要的项。让我们来看看怎么做！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只是你在方括号内使用键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值时存在很大差异。当你通过索引访问数组中的值时，你只会得到该值。而当你通过键访问字典中的值时，你会得到一个可选值。

在第五章中，你学过可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找项目时，你使用的键可能在字典中不存在，这时就没有值可以访问。尝试访问不存在的值会给你带来一个大错误！为了避免这个问题，Swift 返回可选值。这意味着，在你做任何操作之前，你需要解包从字典中获得的值。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中获取“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以会打印出“我在字典中有 Texas”。接下来，我们尝试使用 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃，而是会打印出“我在字典中没有这个州”。

#### 向字典中添加项

要向字典中添加一个项，首先写出字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们把“明尼苏达”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，所以你的新字典项可能出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需要将该值设置为 nil。由于字典中的值是作为可选项返回的，你不必担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在删除了键“MA”对应的值之后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。因此，你在字典中不会看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将想要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们将“苹果”作为“红色”的值，但后来我们决定“覆盆子”更适合，因为有时候苹果是绿色或黄色的。为了将“苹果”替换为“覆盆子”，我们将 colorFruits["red"]设置为新的值 ➊。

你可能还记得，这与我们将新值添加到字典中的方式相同。如果键已经存在于字典中，那么该键对应的值将被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则用来检查字典中有多少项。假设你有一个水果销售篮，你可以使用这些属性帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典也有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。当我们遍历字典时，会使用这两个属性。

让我们写一些代码，通过循环遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以用两种不同的方式来实现。以下是如何通过键遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后跟字典键的常量名称 fruit，关键字 in，字典名称，句点和 keys。

在我们的 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋）和该键的值，当我们强制解包它的内容时，可以通过 fruitBasket[fruit]! ➌获取。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们放在 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性进行循环遍历：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。当遍历值时，我们无法在循环内访问键。

另一个需要注意的区别是 price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。那是因为字典中的项目不像数组中的项目那样按编号顺序排列！由于顺序不保证，如果你重新运行相同的代码，你可能会看到不同的顺序。

### 你学到的内容

在这一章中，你学会了如何将项目集合存储在数组和字典中。要存储有序的列表，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在编写函数之后，你可以在程序的几乎任何地方调用它。

我们的 nationalParks 数组是一个变量，因为我们是用 var 关键词创建的 ➊。存储在变量中的数组被称为*可变*数组。这意味着你可以通过添加项目、删除项目或交换项目来更改它。

你也可以创建一个*不可变*数组。不可变数组是通过关键词 let 而不是 var 来创建的。类似于常量，一旦不可变数组被创建，里面的内容就无法更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如你存储的是彩虹的颜色，最好使用 let。如果你需要改变集合，比如存储的是你最喜欢的 T 恤的数组，而这些 T 恤可能会根据流行趋势发生变化，那么应该使用 var。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号(:)和[String] ➋来指定我们正在创建一个字符串值的数组。当你创建一个数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定你希望数组保存的数据类型。这意味着你完全可以像这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化这个数组以保存字符串，而且它只能保存字符串。

我们创建数组时使用的公园列表是数组*字面量*的一个例子。字面量是你所看到的值，准确无误。它不是变量或常量，而只是没有名称的值。"Grand Canyon" 是一个字符串字面量，而 7 是一个整数字面量。数组字面量是包含在两个方括号之间，并用逗号分隔的项列表，如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项

假设你想访问数组中的一项，并在程序中使用它。你的朋友问你关于旅行的所有事情，所以你想使用你在数组中存储的国家公园的名称。要访问数组中的一项，写出数组名称，后面跟上方括号内的索引：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后通过 print 将它们打印到屏幕上。要获取 nationalParks 中的第一项，使用 nationalParks[0] ➊。要访问 nationalParks 中的第二项，使用 nationalParks[1]。

#### 观察范围

关于数组，有一个重要的点是，如果你尝试访问一个索引大于数组最后一个索引的项，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（它应该是数组中的第四个元素）会给出一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误信息，提示“索引超出范围”。如果你尝试访问数组中不存在的项，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

修改数组的一种方法是向其中添加新项。有几种不同的方式可以做到这一点，让我们逐一了解。

首先，你可以使用数组的 append(_:) 方法。*附加*意味着添加某个内容。使用 append(_:) 方法，你可以将一个新项添加到数组的末尾。假设你又去了一次旅行，参观了坏 lands，你想把它添加到你的国家公园列表中。为此，请将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下数组的名称，后跟一个句点，然后添加 append。接着，将你想添加到数组中的项放在括号内。在这个例子中，你将 "Badlands" 放在了括号内。

如果你想在数组中的特定位置添加内容，请改用数组的 insert(_:at:) 方法。该方法需要两个参数：你要插入的项和它应该插入数组中的位置索引。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷后你去了化石森林，现在你想更新你的 nationalParks 数组，以便按照你访问的顺序显示这些公园。要更新数组，你可以使用 insert(_:at:) 方法，将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项时，数组中索引 3 或更高位置的所有项都会被移到一边，为新项腾出空间。这意味着原来在索引 3 处的项现在会移到索引 4，原来在索引 4 处的项会移到索引 5，以此类推。在你添加化石森林之后，nationalParks 数组现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项，还可以使用 + 和 += 运算符将两个数组连接起来。假设你有两个数组，其中包含制作水果冰沙的所有配料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组添加到一起制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中成分的顺序与水果和液体的顺序相同。如果你是用液体 + 水果创建的冰沙，那么液体会排在前面。

你可以使用 += 运算符将一个数组添加到你的数组末尾。为了增加一点美味，可以添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个项。当你使用 += 将内容附加到数组时，你必须确保只添加另一个数组。如果你只写了字符串 "whipped cream" 而没有方括号，你会收到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中删除项

删除数组中项的方法有好几种。让我们先看看数组的 removeLast()方法。正如你从它的名字中可能猜到的，removeLast()会删除数组中的最后一项。让我们尝试一下使用一个 shoppingList 数组：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被删除的项，因此如果你想，可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:)方法从特定索引删除项。假设你的妈妈不希望你买糖果，并将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项会移动以腾出空间一样，如果你从数组中间删除项，剩下的项会移动以填补这个空位。原本在索引 3 处的“苹果”项现在位于索引 2 的位置，那里原来是“糖果”。

你还可以使用 removeAll()删除数组中的所有项。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组里没有任何内容——根本没有最后一个索引！不过，使用 removeAll()始终是安全的，即使是空数组。

#### 替换数组中的项

要替换数组中的一项，你需要将该索引的位置设置为新值，如下所示：

![](img/Image00131.jpg)

在➊，我们将索引为 2（第三项）的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在➋，我们将索引为 0（第一项）的项替换为“胡须龙”。不，这不是一只真正的龙——它只是一只蜥蜴！

就像每次你处理数组索引时一样，在更改值之前，你必须确保该索引处的项在数组中存在，否则你会遇到“索引超出范围”的错误。

图 6-3 展示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬"来添加“标准贵宾犬”，会发生什么错误。要将项添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项”中所讲的，在第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引处的值。*

现在你知道如何根据需要更改数组了。你可以添加项、删除项，或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法外，数组还有 *属性* 。数组的属性是包含一些数组信息的变量或常量。有两个非常有用的属性你可能会使用：布尔型的 isEmpty 属性和整数型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少项。

看看这两个属性在下面的 if-else 语句中的使用方式：

![Image](img/Image00134.jpg)

这个 if-else 语句检查 mySiblings 数组是否为空 ➊。如果为空，则打印出 “我没有兄弟姐妹。” 如果数组中有元素，则打印出兄弟姐妹的数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时候，当你在处理数组时，可能希望对数组中的每一项做些操作。你可以使用 for-in 循环来实现！以下代码将会在单独的一行上打印出 pizzaToppings 数组中的每一个配料：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是数组名称 pizzaToppings。接着我们将要对每个配料执行的语句放在 for-in 循环的括号内。常量 topping ➊ 临时表示我们在循环过程中访问的每一个配料。我们可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每一个值。如果你处理的是数字，你甚至可以用它们对每个项执行数学运算，这样能快速进行计算！以下代码会接受一个数字数组，并计算每个数字的平方（数字的平方是数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与有序索引不同，每个值都有自己的 *键* 。由于没有索引，值并没有按照任何特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。在同一个字典中不能有重复的键。如果有两个相同的键，且你要求计算机给出其中一个的值，计算机就无法知道应该选择哪个！

让我们来看看如何创建字典并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写上键及其对应的值，类似于数组。我们来创建一个字典，用来存储几个美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，结果面板中显示的状态顺序 ➋ 可能与您输入状态的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型相同。例如，如果你想存储一组分数，你可以使用 double 类型作为键，使用 string 类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键都必须是 double 类型，所有的值都必须是 string 类型。同样，你会看到，结果面板中数字的顺序可能与字典中书写分数的顺序差别很大。这没关系，因为你不需要知道顺序就能访问任何项。你可以通过键找到任何需要的项。让我们来看一下！

#### 访问字典中的值

在字典中查找值的方法类似于在数组中访问值，不同的是，你使用键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的不同。当你在数组中访问一个索引处的值时，你只是直接得到值。而在字典中通过键访问值时，你得到的是一个可选值。

在第五章中，你已经学习过可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找项时，你使用的键可能在字典中不存在，在这种情况下就没有值可供访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着，在你对从字典中获取的任何值进行操作之前，必须先解包它。

要解包一个可选值，首先通过 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。下面的代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出了 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项目

要向字典添加一个项目，首先写出字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需要将值设置为 nil。由于字典中的值是作为可选类型返回的，所以你不必担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键 "MA" 处的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有任何值。因此，你在字典中看不到 "MA": nil。

#### 替换字典中的项目

在字典中替换项目也很简单。它和在数组中替换项目的方式一样。你只需将要替换的项目设置为另一个值。例如，假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

最开始我们给 "red" 配置了 "apple" 的值，但后来我们决定 "raspberry" 是更合适的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这和我们向字典中插入新值的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果该键不存在，则新的键值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，count 属性则可以检查你有多少个项目。假设你有一个待售的水果篮，你可以利用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典中的所有键；以及 values，它包含所有的值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式进行遍历。这是使用字典的键来遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊遍历 fruitBasket 并打印其内容。我们首先写下关键词 for，然后是一个常量名称 fruit，表示字典的键，接着是关键词 in，字典名，一个句点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit）➋，以及通过 fruitBasket[fruit]!强制解包该键对应的值➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到 print 语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们用一个常量来引用 values 属性中的每个值，我们称之为 price。当遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是可选类型，因为它直接作为 fruitBasket 字典中的值访问。这意味着我们不需要解包它。你应该仍然能看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，你则会使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言的强大基础。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写了函数后，你可以通过它的名字从程序中的几乎任何地方调用它。

你也可以创建一个*不可变*数组。不可变数组是使用 let 关键字而不是 var 创建的。类似于常量，一旦创建了不可变数组，数组中的内容就无法更改。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，比如你存储的是彩虹的颜色，最好使用 let。你应该使用 var 如果你需要更改集合，比如你存储的是一组你最喜欢的 T 恤，这些可能会根据流行的款式而改变！

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 指定了我们创建的是一个字符串值数组。这个步骤在你创建并用一个或多个值初始化数组时是可选的，因为 Swift 会使用类型推断来确定你希望数组保存的数据类型。这意味着你也可以像这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了一个用于保存字符串的数组，并且它只能保存字符串。

我们创建数组时使用的公园列表是数组*字面量*的一个例子。字面量是一个完全由你看到的值组成的值。它不是变量或常量，而只是没有名称的值。“大峡谷”是字符串字面量的一个例子，7 是整数字面量的一个例子。数组字面量是一个项的列表，项之间用逗号分隔，且被方括号括起来，像这样 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的元素

假设你想要访问数组中的一个项目并在程序中使用它。你的朋友要求你讲述你的旅行经历，因此你想使用你存储在数组中的国家公园名称。要访问数组中的一个项目，写出数组名后跟着项的索引，索引放在方括号内：

![](img/Image00118.jpg)

在这个例子中，我们访问国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，使用 nationalParks[0] ➊ 。要访问 nationalParks 中的第二个项目，使用 nationalParks[1]。

#### 观察范围

关于数组有一个重要的点，如果你尝试访问一个超出数组最后一个索引的项，你将得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（即数组中的第四项）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误消息，提示“索引超出范围”。如果你尝试访问数组中不存在的项目，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加元素

更改数组的一种方法是向其中添加新元素。这里有几种不同的方法来实现这一点，我们来逐一看看。

首先，你可以使用数组的 append(_:)方法。*Append*意思是添加某个东西。使用 append(_:)方法，你可以将一个新项目添加到数组的末尾。假设你又去了一次旅行，参观了坏 lands，你想将它添加到你的国家公园列表中。为了做到这一点，将以下代码添加到你的游乐场中：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写下数组的名称，后面加一个句点，然后写上 append。接着，在括号内放入你想要添加到数组中的项目。在这种情况下，你将"Badlands"放入了括号内。

如果你想在数组的特定位置添加某个项目，请使用数组的 insert(_:at:)方法。此方法需要两个参数：你想要插入的项目和它在数组中应放置的位置的索引。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷后你去过石化森林，并且你想更新你的 nationalParks 数组，使它显示你参观的公园的顺序。为了更新你的数组，你可以使用 insert(_:at:)方法将石化森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，数组中索引 3 或更高位置的所有项目都会向后移动，为新项目腾出空间。这意味着索引 3 处的项目现在会在索引 4 处，索引 4 处的项目会在索引 5 处，以此类推。添加了石化森林后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项目，还可以使用+和+=操作符将两个数组合并。假设你有两个数组，分别包含制作水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的原料顺序与水果和液体的顺序相同。如果你使用液体+水果创建冰沙，那么液体会排在前面。

你可以使用+=操作符将一个数组添加到你的数组末尾。为了增加一些奶油，让冰沙更加美味，可以这样做：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，即使它只包含一个项目。当你使用+=来附加某个项目到数组时，必须确保你仅仅是想添加另一个数组。如果你只是写下字符串"whipped cream"，而没有加上方括号，你将会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们从查看数组的 removeLast()方法开始。正如你从其名字猜到的那样，removeLast()方法会移除数组中的最后一个项目。让我们通过一个购物清单数组来尝试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的元素，因此如果你需要，可以将其存储到一个新的常量或变量中。

你还可以使用 remove(at:) 方法从特定索引移除一个元素。假设你妈妈不让你买糖果并把它从购物清单上移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像当我们将一个元素添加到数组中间时，所有元素会向后挪动腾出空间一样，如果你从数组中间移除一个元素，剩余的元素会向前挪动填补那个空位。原本位于索引 3 位置的 "apples" 元素现在位于索引 2 位置，即原先 "candy" 的位置。

你还可以使用 removeAll() 方法从数组中移除所有元素。尝试在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在索引处的元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（事实上，它现在是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为里面没有任何元素——根本没有最后一个索引！然而，removeAll() 始终是安全的，即使是在空数组上也能使用。

#### 替换数组中的元素

要替换数组中的一个元素，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个元素）处的元素替换为 "独角兽"，因为神奇动物也算作最喜欢的动物！在 ➋ 处，我们将索引 0（第一个元素）处的元素替换为 "胡须龙"。不，那不是一条真正的龙——它只是一只蜥蜴！

就像在处理数组索引时一样，你必须确保在修改值之前该索引处的元素确实存在，否则会出现“索引超出范围”错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 来添加 "标准贵宾犬" 时出现的错误。要将一个元素添加到数组的末尾，应该使用 append(_:) 方法或 +=，就像我们在 “向数组添加元素” 中讨论的那样，详见 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超过现有数组索引的值。*

现在你知道如何根据需要修改数组了。你可以添加元素、移除元素或替换元素。接下来，我们将了解如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少个元素。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果是，它会打印出“我没有兄弟姐妹。”但如果数组中有内容，它将打印出我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项做一些事情。你可以使用 for-in 循环来实现！以下代码将打印 pizzaToppings 数组中的每个配料，每个配料占一行：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。接着，我们把要对每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环遍历数组非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以使用它们对每个项进行数学运算，从而实现快速计算！以下代码将一个数字数组的每个数字平方（数字的平方是这个数字与它自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一个值的集合，但与数组不同的是，每个值都有一个自己的*键*。由于没有索引，值不会以特定顺序存储。要访问字典中的值，你需要通过它的键来查找。

键必须是唯一的。在同一个字典中不能有相同的键。如果存在两个相同的键，并且你让计算机返回其中一个的值，计算机将不知道该选择哪一个！

让我们看看如何创建一个字典并写入键，帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写入键和值，类似于数组的写法。我们创建一个字典来存储一些美国州的名称。每个州的键将是其两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对由逗号分隔。

字典与数组不同，因为字典是 *无序的*。因此，你在结果面板 ➋ 中看到的州的顺序可能与输入州时的顺序 ➊ 不同，甚至可能与书中打印出的顺序不同！

与数组类似，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。同样，你会看到在结果面板中的数字顺序与在字典中书写分数时的顺序可能会有很大不同。这是正常的，因为你不需要知道顺序就能访问任何项。你可以通过键来找到任何你需要的项目。让我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值与在数组中访问一个值类似，只不过你需要在方括号中使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典值的方式有一个很大的不同。当你通过数组的索引访问值时，你直接得到该值。而当你通过字典的键访问值时，你得到的是一个可选值。

在第五章 中，你学习了可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找项目时，所使用的键可能不存在于字典中，这种情况下没有值可以访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着，在你使用字典中的值之前，必须解包它。

要解包一个可选值，首先你需要通过 if-let 语句检查它是否存在，就像我们在第五章 中所做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中获取"Texas"（德克萨斯州），我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中包含这个州，所以会打印出“我在我的字典中有德克萨斯州”。接下来，我们尝试通过使用 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我在我的字典中没有那个州”。

#### 向字典中添加项目

要向字典中添加一项，首先写出字典的名称，并将新项赋值给你想要的键。让我们把“明尼苏达”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖于索引，所以你的新字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需要将该值设置为 nil。由于字典中的值是以可选项的形式返回的，你不需要担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。因此你在字典中不会看到"MA": nil。

#### 在字典中替换项

在字典中替换项也很简单。它的操作方式与替换数组中的项一样。你只需要将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“red”设置了“apple”的值，但后来我们决定“raspberry”是一个更好的水果，因为有时苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"]的值设置为新值➊。

你可能记得，这与我们将新值添加到字典中的方式是一样的。如果字典中已经存在该键，那么该键的值会被替换。如果该键不存在，那么新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查你有多少个项。想象你有一个水果篮子在售卖，你可以使用这些属性来帮助你追踪所有的东西：

![Image](img/Image00148.jpg)

字典还具有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。当我们遍历字典时，将会使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，因此你可以通过两种不同的方式进行遍历。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写出 `for` 关键字，接着是字典键的常量名称 `fruit`，然后是 `in` 关键字，再是字典的名称，接着是一个句点，最后是 `keys`。

在我们 `for-in` 循环的花括号内，我们可以访问字典中的键，称其为 `fruit` ➋，以及通过 `fruitBasket[fruit]!` 强制解包其内容后的值 ➌。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 `fruit` 键肯定存在于字典中。

我们在 `for-in` 循环中放入的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 `values` 属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同样式的 `for-in` 循环，但现在我们用常量来引用 `values` 属性中的每个值，称其为 `price`。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是一个可选值，因为它是直接作为 `fruitBasket` 字典中的值进行访问的。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能会和我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！而且由于顺序不保证，若重新运行相同代码，你可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将项目存储在数组和字典中。为了将项目存储在有序列表中，你会使用数组并通过索引查找每个项目。如果你想通过键来存储项目，你应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以使用它的名称从程序中的几乎任何位置调用它。

那么，什么时候应该使用可变数组或不可变数组呢？如果你知道你的集合永远不会改变，最好使用 `let`，例如如果你存储的是彩虹的颜色。如果你需要更改集合，比如存储你最喜欢的 T 恤阵列（可能会根据流行趋势变化），你应该使用 `var`。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 来指定我们正在创建一个字符串值的数组。当你创建一个数组并用一个或多个值初始化时，这一步是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你本可以像这样创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了一个数组来存储字符串，而且它只能存储字符串。

我们创建数组时使用的公园列表是数组*字面量*的一个例子。字面量是一个值，正是你所看到的内容。它不是一个变量或常量，而仅仅是没有名称的值。"Grand Canyon" 是一个字符串字面量，7 是一个整数字面量。数组字面量是一个包含在两个方括号之间，并且用逗号分隔的项目列表，如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想要在程序中访问数组中的一个项目并使用它。你的朋友要求你告诉他们你所有的旅行经历，所以你想使用你存储在数组中的国家公园名称。要访问数组中的一个项目，写下数组名称，后跟项目的索引，索引放在方括号内：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后通过使用 print 将其打印到屏幕上。要获取 nationalParks 中的第一个项目，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个索引，它比数组中的最后一个索引还要大，那么你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个项目）会引发错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误消息，提示 Index out of range。如果你尝试访问数组中不存在的项目，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

修改数组的一种方法是向其中添加新项目。有几种不同的方式可以实现这一点，我们来看一下每一种。

首先，你可以使用数组的 append(_:) 方法。*Append* 的意思是添加某物。使用 append(_:) ，你可以将一个新项目添加到数组的末尾。假设你进行了一次新的旅行，访问了 Badlands，并且你想把它添加到国家公园列表中。为此，可以将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下数组的名称，后跟一个句点，然后添加 . 接着，将你想要添加到数组中的项目放在括号内。在这个例子中，你把 "Badlands" 放入了括号中。

如果你想在数组的特定位置添加一个项，可以改用数组的 insert(_:at:)方法。这个方法接受两个参数：你要插入的项和它应该插入的位置（索引）。(我们将在第七章中详细讨论参数。)

假设你完全忘记了在参观大峡谷后去过 Petrified Forest，你想更新你的 nationalParks 数组，使其按你参观的顺序显示这些公园。要更新你的数组，你可以使用 insert(_:at:)方法将 Petrified Forest 插入正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，数组中索引 3 或更高位置的所有项都会被推到新项旁边，以腾出空间。这意味着原本在索引 3 的项现在位于索引 4，原本在索引 4 的项现在位于索引 5，以此类推。添加“Petrified Forest”后，nationalParks 数组现在变成了["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组添加新项，还可以使用+和+=运算符将两个数组合并。假设你有两个数组，其中包含制作水果冰沙的食材：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组相加来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中食材的顺序与水果和液体数组的顺序相同。如果你使用液体+水果的顺序创建冰沙，那么液体会先加入。

你可以使用+=运算符将一个数组添加到数组的末尾。如下所示，加入一些鲜奶油，让冰沙更加美味：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一个项。当你使用+=操作符向数组附加内容时，必须确保你仅仅是尝试添加另一个数组。如果你只是写上字符串"whipped cream"而没有将其放在方括号内，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。让我们从数组的 removeLast()方法开始。正如你从它的名称中猜到的那样，removeLast()会移除数组中的最后一个项。让我们用一个 shoppingList 数组试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法返回被移除的项，因此如果你想的话，可以将其存储到一个新的常量或变量中。

你还可以通过使用 remove(at:)方法从特定的索引移除一个项目。假设你妈妈不希望你买糖果并把它从清单中拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们向数组中间添加项时，所有项都会被推移以腾出空间一样，如果你从数组的中间移除一个项，剩下的项会向回移动以填补空缺。原本位于索引 3 的"apples"项现在移到索引 2 的位置，那里曾经是"candy"。

你还可以使用 removeAll() 删除数组中的所有元素。尝试在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多的元素（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast() 也会得到错误，因为它里面没有任何元素——根本没有最后一个索引！不过，removeAll() 无论在空数组上使用都总是安全的。

#### 替换数组中的元素

要替换数组中的一个元素，你需要将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个元素）的位置替换为 "独角兽"，因为魔法动物也算作是最喜欢的动物！在 ➋ 处，我们将索引 0（第一个元素）的位置替换为 "鬃蜥"。不，这不是一种真正的龙——它只是一个蜥蜴！

像处理数组索引时一样，在你修改值之前，必须确保该索引位置的元素存在，否则你将会遇到“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 添加 "标准贵宾犬" 时发生的错误。要将元素添加到数组的末尾，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加元素” 中第 70 页 提到的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换一个超出现有数组范围的索引位置的值。*

现在你已经知道了如何根据需要更改数组。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法外，数组还具有*属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少个元素。

查看以下 if-else 语句是如何使用这两个属性的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，那么就会打印 "我没有兄弟姐妹"。但如果数组里有元素，那么就会打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时，当你在处理数组时，可能会想对数组中的每个元素做一些操作。你可以使用 for-in 循环来实现！以下代码会将 pizzaToppings 数组中的每个配料打印到单独的行上：

![Image](img/Image00135.jpg)

为了编写一个针对`pizzaToppings`数组的 for-in 循环，我们使用了关键字 for，接着是常量`topping`，然后是关键字 in，最后是我们数组的名称`pizzaToppings`。然后我们把想要在每个配料上执行的语句放在 for-in 循环的大括号内。常量`topping` ➊临时代表数组中的每个比萨配料，当我们遍历数组时。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项目执行数学运算，这样可以快速进行计算！以下代码接收一个数字数组，并计算每个数字的平方（一个数字的平方就是它自己乘以自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印`myNumbers`数组中每个数字的平方*

### 字典非常重要！

*字典*也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。由于没有索引，值的存储顺序是随机的。要访问字典中的值，你需要通过键来查找。

键必须是唯一的。在同一个字典中不能有重复的键。如果有两个相同的键，而你要求计算机给出其中一个的值，计算机将不知道该选择哪个！

让我们来看一下如何创建一个字典，并写下帮助你找到所有需要信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后像数组一样，在一对方括号内写下键和值。我们来创建一个字典，存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板中看到的状态顺序 ➋可能与输入状态的顺序 ➊不同，甚至可能与书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次强调，你会看到结果窗格中的数字顺序与在字典中编写分数时的顺序可能完全不同。这没关系，因为你不需要知道顺序就能访问任何东西。你可以通过键找到任何你需要的项。让我们看看！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，不同之处在于，你使用键而不是索引来访问，像这样：usStates["TX"]。

然而，在 Swift 从字典返回值的方式上有一个很大的不同。当你通过数组的索引访问一个值时，你只是得到了该值。当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下没有值可供访问。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对它进行操作。

要解包一个可选值，首先检查它是否存在，使用`if-let`语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用`if let`语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以会打印出“I have Texas in my dictionary.”。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了`if-let`语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary.”。

#### 向字典添加项目

要向字典添加项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们把“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中删除项目

从字典中删除项非常简单；你可以通过将值设置为 `nil` 来删除。由于字典中的值作为可选值返回，因此你不必担心 `nil` 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在删除 "MA" 键对应的值后，`usStates` 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，意味着没有值。因此你不会在字典中看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为 "red" 键设定了值 "apple"，但后来我们决定 "raspberry" 是一个更好的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能记得，这是我们将新值添加到字典的相同方式。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也具有 `isEmpty` 属性和 `count` 属性。例如，以下代码演示了如何使用 `isEmpty` 属性检查字典是否为空，如果不为空，`count` 属性则检查字典中有多少项。想象一下，你有一个水果篮子在出售。你可以使用这些属性来帮助你追踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键，以及 `values`，它包含字典的所有值。当我们遍历字典时，会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每一项都有一个键和值，因此你可以通过两种不同的方式来实现这一点。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们从写 `for` 关键字开始，后面跟着字典键的常量名称 `fruit`，然后是 `in` 关键字，字典名称，接着是一个句点，最后是 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键，我们称之为 `fruit` ➋，以及通过强制解包其内容 `fruitBasket[fruit]!` ➌ 后获得的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选项，因为它直接作为值访问 `fruitBasket` 字典中的内容。这意味着我们不需要解包它。你应该仍然看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。因为字典中的项目不像数组那样按编号排序！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序被打印出来。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。为了将项目存储在有序列表中，你应该使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一块代码，用于执行特定的任务。编写完函数后，你可以通过它的名称在程序的几乎任何地方调用它。

![Image](img/Image00116.jpg)

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和 [String] ➋ 来指定我们正在创建一个字符串值的数组。在创建数组并用一个或多个值初始化它时，这一步是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你也可以通过以下方式轻松创建数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化了这个数组来存储字符串，并且它只能存储字符串。

我们创建数组时使用的公园列表是数组*字面量*的一个例子。字面量是一个值，它与显示的内容完全一致。它不是变量或常量，而只是没有名称的值。“Grand Canyon”是一个字符串字面量的例子，而 7 是一个整数字面量的例子。数组字面量是包含在两个方括号之间并由逗号分隔的一组项目，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想在你的程序中访问数组中的某个项并使用它。你的朋友让你告诉他们关于你旅行的所有事情，于是你想用你在数组中存储的国家公园的名字。要访问数组中的某个项，写上数组名称，后面跟着项的索引，索引放在方括号内：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名字，并使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一项，你使用 nationalParks[0] ➊ 。要访问 nationalParks 中的第二项，你使用 nationalParks[1] 。

#### 观看范围

关于数组的一个重要点是，如果你尝试访问数组中某个索引大于数组最后一个索引的项，你将会遇到错误。在图 6-2 中，你可以看到 nationalParks[3]（即数组中的第四项）会导致错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一个错误信息，提示索引超出范围。如果你尝试访问数组中不存在的项，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

更改数组的一种方法是向其添加新项。有几种不同的方法可以做到这一点，让我们逐一了解。

首先，你可以使用数组的 append(_:) 方法。*Append* 的意思是添加某物。使用 append(_:) ，你可以将一个新项添加到数组的末尾。假设你又去了另一个旅行，参观了恶地（Badlands），并想把它添加到你的国家公园名单中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写上你的数组名，后面跟一个句点，再接 append 。然后，把你想添加到数组中的项放在括号内。在这个例子中，你把 "Badlands" 放在括号内。

如果你想在数组的特定位置添加内容，可以改用数组的 insert(_:at:) 方法。这个方法需要两个参数：你想插入的项和它应该放在数组中的位置的索引。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷后去了化石森林，而你想更新你的 nationalParks 数组，以便按你访问的顺序显示这些公园。为了更新数组，你可以使用 insert(_:at:) 方法，将化石森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新元素时，索引 3 及其之后的所有元素都会向右移动，为新元素腾出位置。这意味着原本位于索引 3 处的元素现在会移到索引 4 处，原本位于索引 4 处的元素会移到索引 5 处，以此类推。添加 Petrified Forest 后，nationalParks 数组变为["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新元素，你还可以使用+和+=运算符将两个数组连接在一起。假设你有两个数组，分别包含制作水果冰沙的水果和液体：

![](img/Image00122.jpg)

现在，你可以通过将 fruits 和 liquids 数组相加，制作一杯美味的冰沙。

![](img/Image00123.jpg)

冰沙中食材的顺序与 fruits 和 liquids 数组中的顺序相同。如果你使用 liquids + fruits 的方式创建冰沙，那么液体会排在前面。

你使用+=运算符将一个数组添加到数组的末尾。为了让冰沙更美味，接下来可以添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"]即使只有一个元素，也仍然是一个数组。当你使用+=将元素追加到数组时，必须确保你只是在尝试添加另一个数组。如果你直接写"whipped cream"而没有将其放在方括号中，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

有几种方法可以从数组中移除元素。让我们从数组的 removeLast()方法开始。正如你从名称上猜到的，removeLast()方法会移除数组中的最后一个元素。我们用一个 shoppingList 数组来试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的元素，因此你可以将其存储到一个新的常量或变量中， 如果你需要的话。

你还可以通过使用 remove(at:)方法来移除特定索引位置的元素。假设你妈妈不希望你买糖果，把它从清单上去掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加元素时，所有元素都会向右移动腾出空间一样，如果你从数组的中间移除元素，其余的元素也会向左移动填补空缺。原本位于索引 3 处的"apples"现在位于索引 2 处，原本位于索引 2 处的"candy"则移到了索引 3。

你还可以使用 removeAll()方法移除数组中的所有元素。在你的 playground 中尝试输入这个：

![](img/Image00129.jpg)

注意，如果尝试移除一个不存在的索引位置的元素，会发生错误：

![](img/Image00130.jpg)

我们的数组并没有这么多元素（事实上，现在它已经是空的了！），因此会抛出错误。如果我们在空数组上使用 removeLast()方法，也会报错，因为数组中没有任何元素——根本没有最后一个索引！然而，removeAll()方法在任何情况下都是安全的，即使是在空数组上使用。

#### 替换数组中的元素

要替换数组中的元素，你可以将数组的某个索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的位置的元素替换为 "独角兽"，因为魔法动物也算作最爱的动物！在 ➋ 处，我们将索引为 0（第一个项目）的位置的元素替换为 "有鬃蜥"。不，这不是一只真正的龙——它只是一只蜥蜴！

就像在处理数组索引时一样，你必须确保在改变数组中某个索引的值之前，该索引位置有一个元素，否则会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 来添加 "标准贵宾犬"，会发生的错误。要将一个项目添加到数组的末尾，你应该使用 append(_:) 方法或 +=，我们在 “向数组添加项目” 中已经介绍过这个方法，见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数外，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。两个你可能会用到的非常有用的属性是布尔型的 isEmpty 属性和整数型的 count 属性。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少个元素。

查看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果数组为空，则打印 "我没有兄弟姐妹"。但如果数组中有元素，则打印出我们有多少兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项目执行相同的操作。你可以使用 for-in 循环来实现！以下代码会将 pizzaToppings 数组中的每个配料打印到单独的一行：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是数组名称 pizzaToppings。然后我们将希望在每个 topping 上执行的语句放入 for-in 循环的大括号中。常量 topping ➊ 临时代表我们在遍历数组时每一个披萨配料。我们可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用`for-in`循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项执行数学运算，这样可以加快计算速度！以下代码取一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但不同于有序索引的是，每个值都有自己的*键*。由于没有索引，值不会按照任何特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

每个键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，你请求计算机返回其中一个的值时，计算机就无法确定应该选择哪一个！

让我们来看一下如何创建字典并写入键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写出`var`和字典的名称。然后在一对方括号内写出键和值，类似于数组。我们来创建一个字典，用来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键与其值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入这些州的顺序➊不同。甚至可能与本书中打印出的顺序不同！

和数组一样，你可以使用`var`来创建可变字典，或者使用`let`来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不需要与值的类型相匹配。例如，如果你想存储一组分数，可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与在字典中写入分数的顺序相差很大。这没关系，因为你不需要知道顺序就可以访问任何内容。你可以通过键找到你需要的任何项目。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于你如何在数组中访问值，只是你需要在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典中值的方式有很大的不同。当你在数组的索引位置访问一个值时，你只是直接获得这个值。当你使用键在字典中访问一个值时，你获得的是一个可选项。

在第五章中，你学到可选项可能包含一个值，也可能是 nil。Swift 返回可选项的原因是，在你查找字典中的项时，使用的键可能在字典中不存在，这种情况下没有值可以访问。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中取出的任何值，才能对其进行操作。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出“I have Texas in my dictionary.”。接下来，我们尝试通过键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，它会打印出“I don't have that state in my dictionary.”。

#### 向字典添加项

要向字典中添加一个项，首先写下字典的名称，然后将新项分配给你想要它拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一个项非常简单；你只需要将其值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在我们的字典中看不到"MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他内容。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“red”设置了值“apple”，但后来我们决定使用“raspberry”作为更合适的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]的值设置为新值 ➊。

你可能记得，这和我们将新值添加到字典中的方式是一样的。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则用来检查字典中有多少项。假设你有一个待售的水果篮子，你可以利用这些属性来帮助你追踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典中的所有键，和 values，包含字典中的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以通过两种不同的方式来遍历字典。以下是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写关键字 for，然后是常量名 fruit 作为字典键，关键字 in，字典名，句点，最后是 keys。

在我们的 for-in 循环的花括号内，我们可以访问键值，称之为 fruit ➋，以及通过强制解包其内容 fruitBasket[fruit]! ➌ 获得的该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道使用的 fruit 键一定在字典内。

我们放入 for-in 循环中的任何代码将会为字典中的每个键执行一次。因此，你应该会看到打印语句显示三次。

我们也可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但这次我们使用一个常量来引用值，称之为 price，来自 values 属性。遍历值时，我们无法从循环内部访问键。

需要注意的另一个区别是，价格（price）不是可选项，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你应该仍然会看到打印语句打印了三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组中的项那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。要在有序列表中存储项，你可以使用数组，并通过索引查找每个项。如果你想按键存储项，你则可以使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以在程序的几乎任何地方通过调用它的名字来使用它。

#### 使用类型推断

当我们创建 nationalParks 数组时，我们通过添加冒号(: )和[String] ➋指定了我们正在创建一个字符串值的数组。此步骤在创建数组并用一个或多个值初始化时是可选的，因为 Swift 会使用类型推断来确定你希望数组保存的数据类型。这意味着，你也可以通过以下方式轻松创建该数组：

![](img/Image00117.jpg)

使用类型推断，Swift 知道我们初始化这个数组来存储字符串，并且它只能存储字符串。

我们创建数组时使用的公园列表是一个*字面量*数组的例子。字面量是一个值，它就是你所看到的那个值。它不是一个变量或常量，而是一个没有名称的值。“Grand Canyon”是一个字符串字面量的例子，7 是一个整数字面量的例子。数组字面量是包含在两个方括号之间，并用逗号分隔的项的列表，如["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项

假设你想访问数组中的一个项并在程序中使用它。你的朋友让你告诉他们所有关于你旅行的事情，所以你想使用你存储在数组中的国家公园的名称。要访问数组中的一个项，只需写出数组名，后跟项的索引，索引放在方括号内：

![](img/Image00118.jpg)

在这个例子中，我们访问了国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个高于数组最后一个索引的项目，就会出现错误。在图 6-2 中，你可以看到 nationalParks[3]（即数组中的第四项）会导致错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，出现了一个错误信息，提示“索引超出范围”。如果你尝试访问一个在数组中不存在的项目，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组中添加项目

更改数组的其中一种方式是向其中添加新项。这里有几种不同的方法，接下来我们将逐一查看。

首先，你可以使用数组的 append(_:)方法。*Append*意思是添加某物。使用 append(_:)，你可以将一个新项添加到数组的末尾。假设你去另一个地方旅行，参观了 Badlands，并希望将其添加到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写出数组的名称，后面跟一个句点，再接着写 append。然后，把你想要添加到数组中的项目放在括号内。在这种情况下，你将"Badlands"放入括号中。

如果你想在数组的特定位置添加某个项目，请使用数组的 insert(_:at:)方法。此方法需要两个参数：你要插入的项目和它在数组中应该放置的位置（索引）。我们将在第七章中更详细地讨论参数。

假设你完全忘记了在参观大峡谷后去了石化森林，并且你想更新 nationalParks 数组，使其按你访问的顺序显示各个公园。要更新数组，你可以使用 insert(_:at:)方法将石化森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，数组中索引 3 或更高位置的所有项目都会向后移动，以腾出空间给新项目。这意味着原本在索引 3 的位置的项目现在会在索引 4，原本在索引 4 的项目会在索引 5，以此类推。添加了石化森林之后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用+和+=操作符将两个数组合并。假设你有两个数组，分别包含制作水果 smoothie 的食材：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组添加在一起，制作出美味的 smoothie。

![](img/Image00123.jpg)

Smoothie 中的食材顺序与水果和液体的顺序相同。如果你用液体+水果制作了 smoothie，那么液体会先放进去。

你可以使用+=运算符将一个数组添加到数组的末尾。为了增加更多美味的口感，像这样添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一个项目。当你使用+=向数组中添加项目时，必须确保你添加的也是一个数组。如果你只是写下字符串“whipped cream”而没有加上方括号，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中删除项目

有几种方法可以从数组中删除项目。让我们首先看一下数组的 removeLast()方法。正如你从方法名中可能猜到的，removeLast()会删除数组中的最后一个项目。我们用一个 shoppingList 数组来试试：

![](img/Image00126.jpg)

真棒！注意，removeLast()方法返回已删除的项目，所以如果你愿意，可以将其存储在一个新的常量或变量中。

你还可以通过使用 remove(at:)方法从特定的索引删除一个项目。假设你的妈妈不想让你买糖果，并且把它从清单上移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有项目会向一边移动以腾出空间一样，如果你从数组中间删除项目，其余的项目也会向回移动，填补这个空缺。原本位于索引 3 处的“苹果”项目现在位于索引 2 处，取代了“糖果”的位置。

你还可以使用 removeAll()删除数组中的所有项目。在你的 playground 中输入以下内容试试：

![](img/Image00129.jpg)

请注意，试图删除一个不存在索引处的项目会导致错误：

![](img/Image00130.jpg)

我们的数组中没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有任何内容——根本没有最后一个索引！不过，removeAll()在任何情况下都可以安全使用，即使是空数组。

#### 替换数组中的项目

要替换数组中的项目，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊，我们将索引为 2（第三个项目）的位置的项目替换为“独角兽”，因为神奇动物也算是最喜欢的动物！在➋，我们将索引为 0（第一个项目）的位置的项目替换为“胡须龙”。不，这不是一条真正的龙——它只是一个蜥蜴！

就像处理数组索引时一样，在更改值之前，必须确保数组中该索引位置确实存在项目，否则会出现索引越界错误。

图 6-3 显示了如果你试图使用 favoriteAnimals[3] = "Standard poodle"来添加“标准贵宾犬”时发生的错误。要将项目添加到数组的末尾，应该使用 append(_:)方法或+=，正如我们在“向数组添加项目”中所讲解的，在第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要试图替换超出现有数组范围的索引处的值。*

现在你已经知道如何根据需要更改数组了。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多有关数组的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有*属性*。数组的属性是包含关于数组的一些信息的变量或常量。有两个非常有用的属性你可能会用到，它们分别是布尔类型属性 isEmpty 和整数类型属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性将告诉你数组中有多少个元素。

看看以下 if-else 语句是如何使用这两个属性的：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则输出 "我没有兄弟姐妹"。但如果数组中有元素，则输出我们有多少兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个元素做一些处理。你可以使用 for-in 循环来实现！以下代码将在 pizzaToppings 数组中打印每个配料，每个配料占一行：

![图片](img/Image00135.jpg)

要编写一个针对 pizzaToppings 数组的 for-in 循环，我们使用关键字 for，后跟常量 topping，再接着关键字 in，最后是我们的数组名称 pizzaToppings。然后我们将每个 topping 的处理语句放入 for-in 循环的花括号内。常量 topping ➊ 在我们遍历数组时临时代表数组中的每个披萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以利用它们对每个元素进行数学运算，从而加快计算速度！以下代码接收一个数字数组并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 展示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典非常重要！

*字典*也是一种值的集合，但与数组不同的是，字典中的每个值都有自己的*键*。由于没有索引，字典中的值没有特定顺序。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，并且你要求计算机给你其中一个键对应的值，计算机就不知道该选择哪一个！

让我们来看一下如何创建一个字典并编写键，帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写入键和值，类似于数组。我们来创建一个字典来存储一些美国州的名称。每个州的键将是其两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对通过逗号分隔。

字典与数组不同，字典是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入州的顺序➊不同，甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，而字典的所有值也必须是相同类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，而所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与在字典中写入分数的顺序完全不同。没关系，因为你不需要知道顺序来访问任何内容。你可以通过键来查找所需的任何项。我们来看一下！

#### 访问字典中的值

查找字典中的值类似于在数组中访问值的方式，只不过你需要在方括号内使用一个键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值的方式上存在很大差异。当你访问数组中的某个索引的值时，你仅仅是得到一个值。而当你通过字典中的键访问值时，你得到的是一个可选值。

在第五章中，你了解到可选值可能包含一个值，也可能为 nil。当你在字典中查找项时，Swift 返回可选值的原因是，你使用的键可能在字典中不存在，这种情况下就没有值可以访问。尝试访问不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要展开一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，输出将显示 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃，而是输出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典中添加项，首先写出字典的名称，并将新项赋给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将该项的值设置为 nil。由于字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除 "MA" 键的值之后，usStates 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。因此，你不会在字典中看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色字典：

![](img/Image00146.jpg)

一开始我们给 "red" 配置了值 "apple"，但后来我们决定 "raspberry" 更适合作为水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这正是我们将新值插入字典的方式。如果字典中已经存在该键，那么该键的值会被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮子。你可以使用这些属性帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；以及 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式来做到这一点。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来遍历 fruitBasket 并打印其内容。我们首先写下 for 关键字，然后是一个常量名 fruit，用于字典的键，接着是 in 关键字，字典名称，一个句点，再加上 keys。

在 for-in 循环的大括号内部，我们可以访问键 fruit ➋ 和该键的值，当我们强制解包其内容时，使用 fruitBasket[fruit]! ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 fruit 键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会为字典中的每个键执行一次。所以你应该看到打印语句被打印三次。

我们也可以使用字典的 values 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值进行访问的。这意味着我们不需要解包它。你仍然会看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你得到的结果顺序可能与我们的略有不同。因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序不可保证，如果你再次运行相同的代码，可能会看到不同的顺序打印出来。

### 你学到的知识

在本章中，你学习了如何在数组和字典中存储项目集合。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你则会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中非常强大的构建模块。接下来我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以通过它的名字在程序的几乎任何地方调用它。

当我们创建 nationalParks 数组时，我们通过添加冒号（:）和[String] ➋来指定我们正在创建一个字符串值的数组。当你创建并初始化一个或多个值的数组时，这一步是可选的，因为 Swift 会使用类型推断来确定你希望数组存储的数据类型。这意味着你也可以通过以下方式创建数组：

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化了这个数组以存储字符串，它只能存储字符串。

我们创建的包含公园列表的数组是一个数组*字面量*的例子。字面量是一个值，它就是你看到的那个值。它不是一个变量或常量，而只是没有名称的值。"Grand Canyon"是一个字符串字面量的例子，7 是一个整数字面量的例子。数组字面量是一个由两对方括号包含并由逗号分隔的项目列表，比如["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想要访问数组中的一个项目并在程序中使用它。你的朋友要求你告诉他们关于你旅行的所有事情，所以你想使用你存储在数组中的国家公园的名称。要访问数组中的一个项目，写下数组名称，后跟方括号中的项目索引：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后通过 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你使用 nationalParks[1]。

#### 观察范围

关于数组有一个重要的点是，如果你尝试访问一个高于数组中最后一个索引的项目，你将得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个项目）给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

正如你所看到的，你会收到一个错误信息，提示“索引超出范围”。如果你尝试访问数组中不存在的项目，你的应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

更改数组的一种方法是向其中添加新项目。有几种不同的方式可以做到这一点，让我们来看看每种方法。

首先，你可以使用数组的 append(_:)方法。*Append*表示添加某个项目。使用 append(_:)，你可以将一个新项目添加到数组的末尾。假设你去了一次新的旅行，参观了荒原国家公园，并且你想将它添加到你的国家公园列表中。为了做到这一点，可以将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写出数组的名称，后面跟一个句点，再加上 append。然后，将你想要添加到数组中的项目放在括号内。在这个例子中，你把"Badlands"放在括号内。

如果你想在数组的特定位置添加项目，可以使用数组的 insert(_:at:)方法。这个方法需要两个参数：你要插入的项目和它在数组中应该插入的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了你是在参观完 Grand Canyon 之后才去的 Petrified Forest，而你想更新你的 nationalParks 数组，让它显示你访问的公园的顺序。为了更新数组，你可以使用 insert(_:at:)方法，将 Petrified Forest 插入正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入新项目时，数组中索引 3 及其之后的所有项目都会向后移动，为新项目腾出位置。这意味着原来在索引 3 的项目现在会变成索引 4 的项目，在索引 4 的项目会变成索引 5 的项目，以此类推。在你添加了 Petrified Forest 之后，nationalParks 现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新项目，还可以使用+和+=运算符将两个数组连接在一起。假设你有两个数组，分别存储了果昔的水果和液体成分：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组相加来制作美味的果昔。

![](img/Image00123.jpg)

果昔中成分的顺序与水果和液体数组中的顺序相同。如果你使用液体 + 水果的顺序创建果昔，那么液体将排在前面。

你使用+=运算符将一个数组添加到你数组的末尾。你可以像下面这样添加一些鲜奶油，使它更美味：

![](img/Image00124.jpg)

注意，虽然["whipped cream"]数组中只有一个项目，但它仍然是一个数组。当你使用+=将内容添加到数组时，必须确保你只是在尝试添加另一个数组。如果你只是写字符串"whipped cream"而没有加上方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。我们从数组的 removeLast()方法开始。正如你从方法名中可以猜到的，removeLast()会移除数组中的最后一个项目。我们可以通过一个 shoppingList 数组来尝试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项，因此如果需要，你可以将其存储在一个新的常量或变量中。

你还可以通过使用 remove(at:)方法从特定索引移除一项。假设你的妈妈不希望你买糖果，并把它从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将一项添加到数组中间时，所有项都会挤到一起以腾出空间一样，如果你从数组中间移除一项，其余项也会挤到一起填补那个空缺。曾经在索引 3 处的“苹果”项现在位于索引 2，原来的“糖果”项所在的位置。

你也可以使用 removeAll()方法移除数组中的所有项。试着在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引位置的项会引发错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有任何项——根本没有最后一个索引！但是，removeAll()方法在任何情况下都是安全的，即使在空数组上也能使用。

#### 替换数组中的项

要替换数组中的项，你需要将数组索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三项）的项替换为“独角兽”，因为魔法动物也算是最爱的动物！在➋处，我们将索引 0（第一项）的项替换为“胡须龙”。不，那不是一只真正的龙——它只是一个蜥蜴！

就像在处理数组索引时一样，你必须确保该索引处的项存在，才能更改其值，否则会得到一个“索引超出范围”的错误。

图 6-3 显示了当你尝试使用 favoriteAnimals[3] = "标准贵宾犬"来添加“标准贵宾犬”时出现的错误。要将项添加到数组的末尾，你应该使用 append(_:)方法或+=运算符，正如我们在第 70 页的“向数组添加项”中所讨论的。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引范围的值。*

现在你知道如何根据需要更改数组了。你可以添加项，移除项或替换项。接下来，我们将看看如何使用数组的属性获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数方法，数组还有*属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则告诉你数组中有多少项。

看看在下面的 `if-else` 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 `if-else` 语句检查数组 `mySiblings` 是否为空 ➊ 。如果为空，则打印“我没有兄弟姐妹。” 如果数组中有内容，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋ 。

#### 遍历数组

有时在使用数组时，你可能想对数组中的每一项执行某个操作。你可以使用 `for-in` 循环来实现！下面的代码会在每一行打印出 `pizzaToppings` 数组中的每一个配料：

![Image](img/Image00135.jpg)

为了编写一个针对 `pizzaToppings` 数组的 `for-in` 循环，我们使用了 `for` 关键字，后面跟着常量 `topping` ，然后是 `in` 关键字，最后是我们的数组名 `pizzaToppings` 。然后，我们将希望在每个配料上执行的语句放在 `for-in` 循环的花括号中。常量 `topping` ➊ 在我们遍历数组时临时代表每个披萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名称是个好主意。你可以在 图 6-4 中看到这个 `for-in` 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 `for-in` 循环的输出*

![Image](img/Image00137.jpg)

使用 `for-in` 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以利用它们对每一项进行数学运算，这样可以快速进行计算！下面的代码获取一个数字数组，并计算每个数字的平方（数字的平方是该数字与它自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 `myNumbers` 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与数组不同的是，每个值都有自己的 *键* 。因为没有索引，所以值并不按任何特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机就无法知道选择哪个！

让我们来看一下如何创建一个字典，并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 `var` 和字典的名称。然后在一对方括号内写上键和值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序➋很可能与你输入州时的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数的集合，可以使用双精度数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与你在字典中写入分数的顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何项。你可以通过键找到你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只是你在方括号中使用的是键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大的不同。当你通过数组的索引访问值时，你直接得到值。而当你通过字典中的键访问值时，你得到的是一个可选项。

在第五章中，你学习了可选项可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选项的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可供访问。尝试访问一个不存在的值会导致一个巨大的错误！为避免这个问题，Swift 返回可选项。这意味着你需要在使用字典中的值之前解包它。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出“I have Texas in my dictionary.”接下来，我们尝试通过键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary.”。

#### 向字典添加项

要向字典中添加一个项目，首先写出字典的名称，并将新项分配给你想要它在字典中拥有的键。我们来向我们的 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新添加的字典项可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需要将其值设置为 nil 。因为字典中的值是以可选项的形式返回的，所以你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在移除 "MA" 键的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。因此，你不会在我们的字典中看到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 赋值 "apple"，但后来我们决定用 "raspberry" 替代，因为有时候苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能还记得，这与我们向字典中输入新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；values，包含字典的所有值。当我们遍历字典时，将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子，并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来做到这一点。这是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是字典键的常量名称 fruit，关键字 in，字典名称，句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包其内容得到的值 fruitBasket[fruit]! ➌。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每一个键执行一次。所以你应该能看到打印语句打印三次。

我们还可以通过字典的 values 属性来循环遍历：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，价格不是可选项，因为它直接作为值存储在 fruitBasket 字典中。这意味着我们不需要解包它。你仍然应该能看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何在数组和字典中存储项目。要在有序列表中存储项目，你会使用数组并通过索引查找每个项目。如果你想根据键来存储项目，你会使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中非常强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完一个函数后，你可以在程序中的几乎任何地方调用它。

![](img/Image00117.jpg)

通过类型推断，Swift 知道我们初始化了这个数组来存储字符串，并且它只能存储字符串。

我们创建数组时使用的公园列表就是一个数组 *字面量* 的例子。字面量是指完全符合你所看到的值。它不是变量或常量，而是没有名称的值。 "Grand Canyon" 是字符串字面量的一个例子，而 7 是整数字面量的一个例子。数组字面量是由两个方括号包围，元素之间用逗号分隔的元素列表，如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的元素

假设你想在程序中访问数组中的某个元素并使用它。你的朋友问你有关你旅行的所有事情，所以你想使用你存储在数组中的国家公园名称。要访问数组中的一个元素，写下数组的名称，后面跟上该元素的索引，索引需要放在方括号中：

![](img/Image00118.jpg)

在这个例子中，我们访问国家公园的名称，然后使用 print 打印到屏幕上。要获取 nationalParks 中的第一个元素，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个元素，你可以使用 nationalParks[1]。

#### 观察范围

关于数组，有一点很重要：如果你尝试访问数组中某个索引大于最后一个索引的元素，你会得到一个错误。在 图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个元素）会给你一个错误，因为数组中只有三个国家公园，索引范围是从 0 到 2。

如你所见，你会收到一条错误信息，显示 “Index out of range”（索引超出范围）。如果你尝试访问一个数组中不存在的元素，你的应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在元素的索引会导致错误。*

#### 向数组添加元素

更改数组的一种方式是向其中添加新元素。有几种不同的方法来实现这一点，让我们来看看每种方法。

首先，你可以使用数组的 append(_:) 方法。*Append* 的意思是添加某个东西。使用 append(_:)，你可以向数组的末尾添加一个新元素。假设你又去了一次旅行，参观了恶地，你想把它添加到你的国家公园列表中。要做到这一点，可以将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下你的数组名称，后面跟一个句点，然后是 append。接着，将你想要添加到数组中的元素放在括号内。在这个例子中，你将 "Badlands" 放入括号中。

如果你想在数组的特定位置添加某个元素，可以使用数组的 insert(_:at:) 方法。这个方法接受两个参数：你想要插入的元素和它在数组中应该放置的位置的索引。（我们将在 第七章 中更详细地讨论参数。）

假设你完全忘记了你在参观大峡谷之后去了化石森林，并且你想更新你的 nationalParks 数组，以按照你访问的顺序显示这些公园。为了更新数组，你可以使用 insert(_:at:) 方法将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入一个新项时，原本在索引 3 或更高位置的所有项都会向后移动，以腾出空间给新项。这意味着原本在索引 3 的项现在移到索引 4，原本在索引 4 的项移到索引 5，以此类推。添加化石森林后，nationalParks 数组现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新项，还可以使用 + 和 += 操作符将两个数组合并。假设你有两个数组，分别包含制作水果奶昔的配料：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组添加在一起，制作一杯美味的奶昔。

![](img/Image00123.jpg)

奶昔中的配料顺序与水果和液体的顺序相同。如果你用液体 + 水果来制作奶昔，那么液体应该先加进去。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了增加一些美味的奶油，可以按如下方式添加一些搅打奶油：

![](img/Image00124.jpg)

注意，["whipped cream"]是一个数组，尽管它里面只有一个元素。当你使用 += 向数组添加内容时，必须确保你只是在尝试添加另一个数组。如果你只是写了字符串"whipped cream"，而没有加上方括号，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中删除项

删除数组中项有多种方法。首先我们来看一下数组的 removeLast() 方法。顾名思义，removeLast() 会删除数组中的最后一项。让我们用一个 shoppingList 数组试一下：

![](img/Image00126.jpg)

太棒了！注意，removeLast() 方法会返回删除的项，因此，如果需要，你可以将它存储到一个新的常量或变量中。

你也可以使用 remove(at:) 方法从特定的索引删除一项。假设你妈妈不希望你买糖果，并把它从购物清单中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项并且所有项会向后挪动腾出空间一样，如果你从数组中间删除一个项，剩余的项会自动挪回去填补那个空位。原本在索引 3 的位置的"apples"项现在位于索引 2 的位置，那里原本是"candy"。

你也可以使用 removeAll() 方法从数组中删除所有项。试着在你的 Playground 中输入这个：

![](img/Image00129.jpg)

注意，尝试删除一个不存在的索引位置的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会发生错误，因为数组中没有任何内容——根本没有最后一个索引！然而，removeAll() 是始终安全的，即使在空数组上也能使用。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ ，我们将索引为 2（第三个项）的项替换为 "Unicorn"（独角兽），因为魔法动物也算作最喜欢的动物！在 ➋ ，我们将索引为 0（第一个项）的项替换为 "Bearded dragon"（胡须龙）。不，那不是一条真正的龙——它只是一个蜥蜴！

就像每次操作数组索引时一样，你必须确保在更改数组某个索引的值之前，该索引处确实有项，否则你会遇到索引越界错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 来添加 "Standard poodle" 时发生的错误。要将项添加到数组的末尾，应该使用 append(_:) 方法或 += ，如我们在 “向数组添加项” 第 70 页中所讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加项、删除项或替换项。接下来，我们将了解如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的 方法，数组还有 *属性*。数组的属性是包含有关数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则会告诉你数组中有多少个项。

查看下面的 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果是，它会打印 "我没有兄弟姐妹"。如果数组中有内容，则会打印我们有几个兄弟姐妹："我有 3 个兄弟姐妹。" ➋ 。

#### 遍历数组

有时，当你操作数组时，可能希望对数组中的每一项执行某些操作。你可以使用 for-in 循环来实现！以下代码将会逐行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 `pizzaToppings` 数组编写一个 for-in 循环，我们使用关键字 for ，后跟常量 topping ，然后是关键字 in ，最后是我们的数组名称 pizzaToppings 。然后，我们将希望对每个 topping 执行的语句放入 for-in 循环的大括号中。常量 topping ➊ 临时代表我们在循环中访问的数组中的每个比萨配料。我们可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，还可以使用它们对每个项目执行数学运算，这样就能进行快速的计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，并且你要求计算机给出其中一个的值，计算机将不知道该选择哪一个！

让我们看看如何创建字典并编写键，以帮助你找到所有所需的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写 var 和字典的名称。然后在一对方括号内写入键及其对应的值，类似于数组。我们来创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果窗格中看到的州的顺序 ➋ 可能与输入州的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），所有的值必须是字符串（strings）。再一次，你会看到结果窗格中的数字顺序可能与字典中分数的书写顺序完全不同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到你需要的任何项。我们来看一下如何操作！

#### 访问字典中的值

在字典中查找一个值的方式类似于你在数组中访问一个值，只不过你在方括号内使用的是键而不是索引，比如：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有一个显著的区别。当你通过数组的索引访问一个值时，你只是得到了这个值。而当你通过字典中的键访问一个值时，你得到的是一个可选值（optional）。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，在你查找字典中的项时，使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回了可选值。这意味着在你使用字典中的任何值之前，你需要先解包它。

要解包一个可选值，首先你要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中检索 "Texas"，我们使用 if-let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 "我在字典中有德克萨斯州"。接着我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 "我在字典中没有这个州"。

#### 向字典添加项

要向字典中添加一个项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。我们来向我们的 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典移除项

从字典中移除一项非常简单；你只需将该值设置为`nil`。由于字典中的值是作为可选值返回的，因此你不必担心`nil`会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除"MA"键的值后，`usStates`被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil`是特殊的，表示根本没有值。因此，你不会在字典中看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将你要替换的项设置为其他值。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"设置了"apple"的值，但后来我们决定"raspberry"是更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将`colorFruits["red"]`设置为新的值 ➊。

你可能记得，这和我们将新值添加到字典中的方式是一样的。如果字典中已经有这个键，则该键的值会被替换。如果字典中没有这个键，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有`isEmpty`属性和`count`属性。例如，下面的代码展示了如何使用`isEmpty`属性检查字典是否为空，如果不为空，`count`属性则会显示字典中有多少项。假设你有一个水果销售篮子。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

一个字典还有两个特殊属性：`keys`，它包含字典的所有键；以及`values`，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的果篮并打印每个水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。由于每个项都有一个键和值，因此你可以通过两种不同的方式来遍历字典。这是使用字典的键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历果篮并打印其内容。我们首先写下关键字`for`，后跟字典键的常量名`fruit`，关键字`in`，字典名，句点，以及`keys`。

在我们的`for-in`循环的花括号内，我们可以访问键，我们称之为`fruit` ➋ ，并且可以通过`fruitBasket[fruit]!`强制解包其内容 ➌ 。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的`fruit`键肯定在字典中。

我们在 `for-in` 循环中放入的任何代码都会在字典的每个键上执行一次。所以你应该看到 `print` 语句被打印三次。

我们也可以使用字典的 `values` 属性进行循环：

![图片](img/Image00150.jpg)

我们使用相同的 `for-in` 循环风格，但现在我们使用常量来引用 `values` 属性中的每个值，我们称之为 `price`。在循环遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它是直接作为 `fruitBasket` 字典中的一个值来访问的。这意味着我们不需要解包它。你仍然应该看到 `print` 语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的那样按编号顺序排列！由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学会了如何将一组项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想根据键存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以通过它的名称在程序的几乎任何地方调用它。

通过类型推断，Swift 知道我们初始化了这个数组来保存字符串，并且它只能保存字符串。

我们创建数组的公园列表是数组*字面量*的一个例子。字面量是一个值，它正是你所看到的内容。它不是变量或常量，而仅仅是一个没有名称的值。“大峡谷”是字符串字面量的例子，而 7 是整数字面量的例子。数组字面量是包含在两个方括号之间并用逗号分隔的项目列表，如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想访问数组中的一个项目并在程序中使用它。你的朋友要求你告诉他们所有的旅行经历，因此你想使用存储在数组中的国家公园名称。要访问数组中的一个项目，写出数组名称，后跟该项目的索引，放在方括号中：

![](img/Image00118.jpg)

在这个例子中，我们访问了国家公园的名称，并通过 `print` 函数将它们打印到屏幕上。要获取 `nationalParks` 中的第一个项目，可以使用 `nationalParks[0]` ➊ 。要访问 `nationalParks` 中的第二个项目，可以使用 `nationalParks[1]`。

#### 监控范围

关于数组的一个重要事项是，如果你尝试访问一个超出数组最后一个索引的项，你会收到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四项）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一个错误信息，提示“索引超出范围”。如果你尝试访问数组中不存在的项，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

更改数组的一种方法是向其中添加新项。有几种不同的方法可以做到这一点，下面我们来看看每一种方法。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某个东西。使用 append(_:) 方法，你可以将一项新项添加到数组的末尾。假设你再次旅行，访问了 Badlands，并且你想将它添加到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

使用 append(_:) 方法时，首先写下数组的名称，后跟一个句点，然后写 append。接着，将你想添加到数组中的项放在括号内。在这个例子中，你把“Badlands”放在括号里。

如果你想在数组的特定位置添加内容，可以改用数组的 insert(_:at:) 方法。此方法接受两个参数：你想插入的项和它应该放在数组中的索引位置。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在访问大峡谷后去了化石森林，并且你想更新 nationalParks 数组，使其显示你访问国家公园的顺序。为此，你可以使用 insert(_:at:) 方法将化石森林放入正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项时，数组中索引 3 或更高的所有项都会被向后移动，以便为新项腾出空间。这意味着原本在索引 3 处的项现在会移到索引 4，原本在索引 4 处的项会移到索引 5，依此类推。添加“化石森林”之后，nationalParks 现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 + 和 += 运算符将两个数组合并。假设你有两个数组，分别是水果冰沙的配料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙配料的顺序与水果和液体数组中的顺序相同。如果你将冰沙与液体 + 水果合并，则液体会先出现。

使用 `+=` 运算符可以将一个数组添加到你的数组末尾。为了增加额外的美味，可以按如下方式添加一些打发奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，尽管它只有一个项目。当你使用 `+=` 向数组追加内容时，必须确保你只添加另一个数组。如果你直接写 "whipped cream"（没有方括号），就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中删除项目。我们先来看一下数组的 `removeLast()` 方法。正如你从名称中可能猜到的那样，`removeLast()` 会删除数组中的最后一个项目。让我们通过一个 `shoppingList` 数组来试试：

![](img/Image00126.jpg)

很棒！请注意，`removeLast()` 方法会返回被移除的项目，因此如果你想的话，可以将它存储在一个新的常量或变量中。

你还可以通过使用 `remove(at:)` 方法从特定索引移除项目。假设你的妈妈不希望你买任何糖果，并将其从清单中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有项目会滑动以腾出空间一样，如果你从数组中间移除一个项目，剩下的项目也会滑动回去，填补那个空位。原来位于索引 3 的 "apples" 项目现在位于索引 2 的位置，即 "candy" 曾经的位置。

你也可以通过 `removeAll()` 从数组中移除所有项目。尝试将以下内容输入到你的 Playground 中：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的项目会给你带来错误：

![](img/Image00130.jpg)

我们的数组没有这么多的项目（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 `removeLast()`，也会报错，因为它里面没有任何元素——根本就没有最后一个索引！然而，`removeAll()` 即使在空数组上使用也总是安全的。

#### 替换数组中的项目

要替换数组中的一个项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个项目）的位置替换为 "Unicorn"（独角兽），因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引 0（第一个项目）的位置替换为 "Bearded dragon"（须龙）。不，那不是一条真正的龙——它只是一只蜥蜴！

和你处理数组索引时的任何情况一样，你必须确保在更改某个值之前，数组中该索引位置有项目，否则会出现索引超出范围的错误。

图 6-3 显示了如果你尝试使用 `favoriteAnimals[3] = "Standard poodle"` 来添加 "Standard poodle" 时发生的错误。要将项目添加到数组的末尾，你应该使用 `append(_:)` 方法或 `+=`，正如我们在 “向数组添加项目” 一节中提到的，在 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组了。你可以添加项目、移除项目或替换项目。接下来，我们将看看如何使用数组的属性来获得更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含关于数组一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性是布尔值，表示数组是否为空，而 count 属性则会告诉你数组中有多少项。

看看在下面的 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项做点什么。你可以使用 for-in 循环来完成！以下代码将会把 pizzaToppings 数组中的每个配料打印到不同的行上：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。然后我们将希望在每个 topping 上运行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名称，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以用它们对每个项执行数学运算，这样可以进行快速的计算！以下代码取一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的 *键*。因为没有索引，所以值并不按任何特定顺序存储。要访问字典中的值，你通过它们的键来查找。

一个键必须是唯一的。你不能在同一个字典中有多个相同的键。如果有两个相同的键，而你要求计算机给你其中一个的值，计算机将无法知道选择哪个！

让我们来看看如何创建字典并编写键，以便帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 `var` 和字典的名称。然后在一对方括号内写入键和值对，类似于数组。我们来创建一个字典来存储一些美国州的名字。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为它们是 *无序的*。因此，在结果面板 ➋ 中显示的州的顺序很可能与输入州的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与在字典中写入分数的顺序完全不同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。我们来看看如何做到这一点！

#### 访问字典中的值

在字典中查找值类似于你在数组中访问值的方式，只不过你使用键而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大不同。当你访问数组中的某个索引的值时，你只是直接获得该值。当你通过字典中的键访问值时，你会得到一个可选值（optional）。

在 第五章 中，你学习了可选值可能包含一个值，或者可能为 nil。Swift 返回可选值的原因是你查找的键可能在字典中不存在，在这种情况下，没有值可以访问。尝试访问不存在的值会导致一个大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对它做任何操作。

要解包一个可选值，首先你通过 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出"I have Texas in my dictionary"。接下来，我们尝试访问一个字典中没有的州，使用键 usStates["FL"] ➋。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出"I don't have that state in my dictionary"。

#### 向字典中添加项目

要向字典中添加项目，首先写下字典的名称，并将新项目赋值给你希望它拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需将该值设置为 nil。因为字典中的值作为可选值返回，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键为"MA"的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示完全没有值。这就是为什么你在字典中看不到"MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将你想替换的项目设为其他值。例如，你创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为"red"键设置了值"apple"，但后来我们决定使用"raspberry"作为更好的水果，因为有时候苹果是绿色或黄色的。要将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这是我们向字典中输入新值的相同方式。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会显示字典中有多少项。假设你有一篮待售的水果。你可以利用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式进行循环。以下是使用字典的键来遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从写关键字 `for` 开始，后面跟着常量名 fruit（表示字典的键），关键字 `in`，字典名，点号，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）和该键对应的值，当我们使用 `fruitBasket[fruit]!` 强制解包其内容时 ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的果实键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键运行一次。因此，你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price，在 values 属性中。当遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序不可保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项集合存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，你则会使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写了一个函数之后，你可以在程序中的几乎任何地方通过其名称来调用它。

我们用来创建数组的公园列表是一个数组 *字面量* 的例子。字面量是一个值，完全就是你看到的内容。它不是一个变量或常量，而只是一个没有名称的值。"Grand Canyon" 是一个字符串字面量的例子，而 7 是一个整数字面量的例子。数组字面量是包含在两个方括号之间并用逗号分隔的项目列表，例如 ["Acadia", "Zion", "Grand Canyon"] ➊。

#### 访问数组中的项目

假设你想访问数组中的某个项目并在程序中使用它。你的朋友要求你告诉他们你所有的旅行经历，所以你想使用你存储在数组中的国家公园的名称。要访问数组中的某个项目，写出数组名称，后面加上项目的索引并放入方括号中：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你使用 nationalParks[1]。

#### 查看范围

关于数组的一个重要点是，如果你试图访问一个比数组最后一个索引更高的索引，你会得到一个错误。在 图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个项目）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一个错误消息，提示 "Index out of range"。如果你试图访问数组中不存在的项目，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

更改数组的一种方法是向数组中添加新项目。有几种不同的方法来做到这一点，我们来看看每种方法。

首先，你可以使用数组的 append(_:) 方法。*Append* 的意思是添加某物。使用 append(_:) 方法，你可以将一个新项目添加到数组的末尾。假设你去了一次新的旅行，访问了 Badlands，你想把它添加到你的国家公园列表中。为此，可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出数组的名称，后面加一个点，再加上 append。然后，将你想添加到数组中的项目放入括号内。在这个例子中，你将 "Badlands" 放入了括号内。

如果你想在数组的特定位置添加某项内容，可以使用数组的 `insert(_:at:)` 方法。这个方法有两个参数：你想插入的项和它应该放在数组中的索引位置。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷之后去了化石森林，你想要更新你的 nationalParks 数组，让它按照你访问的顺序显示公园。要更新你的数组，你可以使用 `insert(_:at:)` 方法将化石森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 插入一个新项时，数组中索引为 3 或更高的所有项都会向后移动，为新项腾出空间。这意味着原本在索引 3 的项现在会在索引 4，原本在索引 4 的项会在索引 5，依此类推。添加了化石森林之后，nationalParks 数组现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项目，还可以使用 `+` 和 `+=` 操作符将两个数组合并。假设你有两个数组，分别存放水果奶昔的食材：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组添加在一起，制作出美味的奶昔。

![](img/Image00123.jpg)

奶昔中食材的顺序与水果和液体的顺序相同。如果你是用液体 + 水果做的奶昔，那么液体应该先放。

你使用 `+=` 操作符将一个数组添加到你数组的末尾。为了增加更多美味的口感，你可以按如下方式添加一些奶油：

![](img/Image00124.jpg)

注意，["whipped cream"] 是一个数组，即使它只有一个项目。当你使用 `+=` 操作符向数组添加内容时，必须确保你只在尝试添加另一个数组。如果你只写了字符串 "whipped cream" 而没有加上方括号，那么你将会遇到错误。

![图片](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。我们首先来看一下数组的 `removeLast()` 方法。正如你从名字中可能猜到的那样，`removeLast()` 会移除数组中的最后一项。我们来通过一个 shoppingList 数组试试看：

![](img/Image00126.jpg)

很棒！注意，`removeLast()` 方法返回被移除的项，因此你可以将它存储在一个新的常量或变量中，如果你需要的话。

你也可以使用 `remove(at:)` 方法从指定的索引处移除一项。假设你妈妈不希望你买糖果，把糖果从清单上拿掉：

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们把一项添加到数组中间时，所有其他项都会向后移动为新项腾出空间一样，如果你从数组的中间移除一项，其余项也会向前移动以填补那个空位。原本在索引 3 的 "apples" 项现在会在索引 2 的位置，原来 "candy" 项所在的位置。

你还可以使用 removeAll() 从数组中移除所有项。尝试在你的 playground 中输入以下内容：

![](img/Image00129.jpg)

注意，尝试移除一个不存在索引的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组中没有任何元素——根本没有最后一个索引！但是，removeAll() 始终是安全的，即使在空数组上使用也没有问题。

#### 替换数组中的元素

要替换数组中的元素，你可以将数组某个索引处的值设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊，我们将索引 2（第三项）处的元素替换为 "独角兽"，因为魔法动物也算作最喜欢的动物！在 ➋，我们将索引 0（第一项）处的元素替换为 "胡须龙"。不，这不是一条真正的龙——它只是个蜥蜴！

就像每次处理数组索引时一样，你必须确保数组中在该索引位置有一个元素，才能改变它的值，否则会报索引越界错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时会发生的错误。要将一个项添加到数组的末尾，应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项” 中的 第 70 页 所讲的。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引范围的值。*

现在你知道如何根据需要更改数组了。你可以添加项，移除项，或者替换项。接下来，我们将看看如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法，数组还有*属性*。数组的属性是包含关于数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔型属性 isEmpty 和整数型属性 count。

isEmpty 属性表示数组是否为空，返回 true 或 false，count 属性则告诉你数组中有多少项。

看看以下 if-else 语句中是如何使用这两个属性的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，打印 "我没有兄弟姐妹。" 如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个元素做某些操作。你可以使用 for-in 循环来实现！下面的代码会将 pizzaToppings 数组中的每个配料打印到单独的一行：

![Image](img/Image00135.jpg)

为了编写一个针对 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接着，我们把要在每个 topping 上执行的语句放入 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时临时代表数组中的每个比萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名称。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，还可以使用它们对每个项进行数学运算，从而进行快速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是它自己乘以自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一个值的集合，但不同于有序索引，每个值都有自己独立的*键*。由于没有索引，值不会以任何特定的顺序存储。要访问字典中的值，你需要通过键来查找它们。

每个键必须是唯一的。同一个字典中不能有重复的键。如果有两个相同的键，当你请求计算机给出其中一个的值时，计算机将不知道该选择哪一个！

让我们来看看如何创建字典并写入键，这将帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写 var 和字典的名称。然后在一对方括号中写入键及其对应的值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，字典是*无序的*。因此，你在结果窗格 ➋ 中看到的状态顺序很可能与你输入状态 ➊ 时的顺序不同，甚至可能与本书中打印出的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不必与值类型相匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与在字典中书写分数时的顺序完全不同。这没关系，因为你不需要知道顺序来访问任何内容。你可以通过键来找到你需要的任何项目。让我们来看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只不过你在方括号中使用的是一个键而不是索引，例如：usStates["TX"]。

然而，Swift 从字典中返回值的方式与数组不同。当你在数组的索引位置访问一个值时，你只是得到了该值。而当你用键在字典中访问一个值时，你会得到一个可选项。

在第五章中，你学习了可选项可能包含值或可能是 nil。当你在字典中查找项目时，Swift 返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下，就没有值可供访问。尝试访问一个不存在的值会给你一个巨大的错误！为避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中取出的任何值，才能对其进行操作。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，输出将打印 "I have Texas in my dictionary"。接下来，我们尝试访问一个字典中不存在的州，通过键 usStates["FL"] ➋。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，输出将打印 "I don't have that state in my dictionary"。

#### 向字典中添加项目

要向字典中添加一个项目，首先写下字典的名称，并将新项目分配给你希望它在字典中拥有的键。我们来向 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项目可能出现在字典的任何位置。

#### 从字典中删除项目

从字典中移除项非常简单；你只需要将值设置为 nil。因为字典中的值是以可选类型返回的，所以你无需担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除“MA”键对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有任何值。因此你在字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为“红色”分配了“苹果”这个值，但后来我们决定“树莓”是更好的选择，因为有时候苹果是绿色或黄色的。为了将“苹果”替换为“树莓”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这是我们向字典中输入新值的相同方式。如果键已经存在于字典中，那么该键的值会被替换；如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则检查你有多少项。假设你有一个待售的水果篮，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典中的所有键；values，它包含字典中的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式来进行遍历。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写关键字 for，然后是字典键的常量名 fruit，接着是关键字 in，字典名，一个句点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包 `fruitBasket[fruit]!` ➌ 获取到的该键对应的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中存在。

我们放入 `for-in` 循环中的任何代码会针对字典中的每个键运行一次。因此，你应该看到 `print` 语句显示三次。

我们还可以通过字典的 `values` 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同类型的 `for-in` 循环，但现在我们使用常量来引用 `values` 属性中的每个值，我们称之为 `price`。当循环遍历 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是 `price` 不是可选的，因为它是直接作为值访问 `fruitBasket` 字典中的。那意味着我们不需要解包它。你仍然应该看到 `print` 语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6: 使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与你的不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！而且，由于顺序无法保证，如果你重新运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将多个项目存储在数组和字典中。为了将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。在你写好函数之后，你可以使用它的名称在程序的几乎任何地方调用它。

#### 访问数组中的项目

假设你想要访问数组中的一个项目并在程序中使用它。你的朋友请你告诉他们你所有的旅行经历，因此你想使用你存储在数组中的国家公园名称。要访问数组中的一个项目，写出数组名称，后跟方括号内的项目索引：

![](img/Image00118.jpg)

在这个例子中，我们正在访问国家公园的名称，并通过使用 `print` 将它们打印到屏幕上。要获取 `nationalParks` 中的第一个项目，你可以使用 `nationalParks[0]` ➊ 。要访问 `nationalParks` 中的第二个项目，你可以使用 `nationalParks[1]`。

#### 观察范围

关于数组有一个重要的点是，如果你尝试访问一个索引高于数组中最后一个索引的项目，你会收到一个错误。在图 6-2 中，你可以看到 `nationalParks[3]`（这将是数组中的第四个项目）给出错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一条错误信息，显示“索引超出范围”。如果你尝试访问数组中不存在的项目，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组中添加项

修改数组的一种方法是向其中添加新项。方法有几种，我们可以逐一了解。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某个元素。使用 append(_:) 方法，你可以将一个新项添加到数组的末尾。假设你又去了一次旅行，参观了坏 lands 国家公园，并且想把它加入到你的国家公园列表中。为了实现这一点，可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出你的数组名，后面跟上一个句点，然后是 append。接着，将你想要添加到数组的项放在括号内。在这个例子中，你将 "Badlands" 放入括号中。

如果你想在数组中的特定位置添加元素，可以改用数组的 insert(_:at:) 方法。此方法需要两个参数：你想插入的项和它应该插入到数组中的索引位置。（我们将在第七章 中更详细地讨论参数。）

假设你完全忘记了自己是在参观大峡谷后才去的 Petrified Forest，并且你想更新你的 nationalParks 数组，以显示你参观的公园的顺序。为了更新数组，你可以使用 insert(_:at:) 方法，将 Petrified Forest 放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，数组中从索引 3 或更高位置的所有元素都会被向后移动，为新项腾出空间。这意味着原本在索引 3 处的项现在会被移动到索引 4，原本在索引 4 处的项会被移动到索引 5，以此类推。在你添加了 Petrified Forest 后，nationalParks 现在变成了 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 + 和 += 操作符将两个数组合并。假设你有两个数组，分别包含制作水果果昔所需的配料：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组合并，制作出美味的果昔了。

![](img/Image00123.jpg)

果昔中的配料顺序与水果和液体的顺序相同。如果你创建的果昔是液体+水果的顺序，那么液体会排在前面。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了让果昔更加美味，可以按如下方式添加一些奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个元素。当你使用 += 来向数组添加内容时，必须确保你只是在尝试添加另一个数组。如果你只写字符串 "whipped cream" 而不加上方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中删除项。让我们从数组的 removeLast()方法开始。正如你从它的名字中猜到的，removeLast()会删除数组中的最后一项。让我们用一个 shoppingList 数组来试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被删除的项，因此如果你需要，可以将其存储在新的常量或变量中。

你也可以使用 remove(at:)方法从特定索引删除一个项。假设你妈妈不想让你买糖果，并把它从列表中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有的项都会移动以腾出空间一样，如果你从数组的中间删除项，剩余的项会向前移动填补空白。原本位于索引 3 的“apples”项现在位于索引 2 的位置，原本在此处的是“candy”。

你也可以使用 removeAll()方法从数组中移除所有项。试试在你的 Playground 中输入这个：

![](img/Image00129.jpg)

注意，尝试删除一个不存在的索引位置的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上现在它是空的！），因此会抛出错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组里没有任何东西——根本没有最后一个索引！然而，removeAll()方法在空数组上使用时始终是安全的。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊，我们将索引 2（第三项）的位置的项替换为"Unicorn"，因为魔法动物也是最喜欢的动物！在➋，我们将索引 0（第一项）的位置的项替换为"Bearded dragon"。不，这不是一条真正的龙——它只是一只蜥蜴！

就像你在处理数组索引时一样，你必须确保该索引位置的项存在，否则会出现索引超出范围的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle"添加"Standard poodle"时会发生的错误。要将项添加到数组末尾，应该使用 append(_:)方法或+=，正如我们在《向数组添加项》中第 70 页讲到的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换一个超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组了。你可以添加项、删除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法外，数组还有*属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性是布尔值，取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果是，它会打印 "我没有兄弟姐妹。"。如果数组中有内容，则会打印我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项目做些事情。你可以使用 for-in 循环来实现！以下代码将在单独的行上打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们的数组名 pizzaToppings。然后，我们将想要对每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 临时表示我们循环中的每个披萨配料。我们可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以使用它们对每个项目执行数学运算，这样就可以进行快速计算！以下代码接收一个数字数组并计算每个数字的平方（数字的平方是该数字与其本身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典非常重要！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的*键*。因为没有索引，值不会按任何特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，你要求计算机返回其中一个的值时，计算机就不知道该选择哪个！

让我们看看如何创建一个字典并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写 `var` 和字典的名称。然后，在一对方括号内写入键和值，类似于数组的格式。我们来创建一个字典，存储一些美国州的名字。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果面板中看到的州的顺序➋很可能与你输入州的顺序➊不同，甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与你在字典中写入分数的顺序大不相同。这是可以的，因为你不需要知道顺序来访问任何内容。你可以通过键来查找你需要的任何项。让我们看看如何操作！

#### 访问字典中的值

在字典中查找一个值与访问数组中的值类似，只是你在方括号内使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典值的方式有一个很大的区别。当你通过数组的索引访问值时，你只是直接获得值。当你通过字典的键访问值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能为 nil。当你在字典中查找项时，Swift 返回可选值的原因是你使用的键可能不存在于字典中，在这种情况下没有值可访问。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获得的任何值，才能对其进行操作。

要解包一个可选值，首先你要检查它是否存在，使用 `if-let` 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用`if let`将常量 loneStarState 设置为 usStates["TX"] ➊ 。由于字典中包含这个州，打印出“I have Texas in my dictionary.” 接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了`if-let`语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary.”。

#### 向字典中添加项目

要向字典中添加一个项，首先写出字典的名称，并将新项赋给你希望它在字典中拥有的键。让我们把"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会发现它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新添加的字典项可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除一个项非常简单；你只需要将其值设为 nil。因为字典中的值是可选类型，所以你不必担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在删除键"MA"的值后，usStates 已更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。这就是为什么你在字典中看不到"MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项一样。你只需要将你想替换的项设为其他值。例如，你创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"赋值"apple"，但后来我们决定使用"raspberry"，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]的值设为新的值 ➊ 。

你可能记得，这是我们将新值输入字典的相同方式。如果键已经存在于字典中，那么该键的值会被替换。如果该键在字典中不存在，那么新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有`isEmpty`属性和`count`属性。例如，以下代码展示了如何使用`isEmpty`属性来检查字典是否为空，如果不为空，`count`属性可以检查字典中有多少项。假设你有一篮子待售的水果。你可以利用这些属性来帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键，以及`values`，它包含字典的所有值。我们在遍历字典时会使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个条目都有一个键和值，你可以通过两种不同的方式来实现。这是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出 for 关键字，后跟字典键的常量名 fruit，再写 in 关键字，字典名，句点，以及 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋ ）和该键的值，当我们通过 fruitBasket[fruit]! 强制解包其内容时 ➌ 。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典内。

我们在 for-in 循环内放置的任何代码都会针对字典中的每个键运行一次。因此你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来进行遍历：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，称之为 price。在遍历 values 时，我们无法从循环内部访问到键。

另一个需要注意的区别是，价格不是可选的，因为它直接作为值访问自 fruitBasket 字典。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。那是因为字典中的项目不像数组那样按顺序编号！由于顺序不保证，如果你重新运行相同的代码，可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你将使用数组并通过索引查找每个项目。如果你想通过键来存储项目，你将使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中一个强大的构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写了一个函数之后，你可以通过它的名称从程序中的几乎任何地方调用它。

假设你想要访问数组中的某个元素，并在你的程序中使用它。你的朋友要求你告诉他们所有旅行的经历，所以你想使用你存储在数组中的国家公园名称。要访问数组中的某个元素，写下数组的名称，然后在方括号中写出该元素的索引：

![](img/Image00118.jpg)

在这个示例中，我们访问国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个元素，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个元素，你使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要事项是，如果你尝试访问一个索引超出数组最后一个索引的位置，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四个元素）会出错，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会得到一个错误信息，显示“索引超出范围”。如果你尝试访问数组中不存在的元素，你的应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加元素

更改数组的一种方式是向其中添加新元素。有几种不同的方式来实现这一点，所以我们来看看每种方法。

首先，你可以使用数组的 append(_:) 方法。*Append* 意思是添加某个元素。使用 append(_:) ，你可以将一个新项目添加到数组的末尾。假设你又去旅行，访问了坏 lands（Badlands），并且想将其添加到你的国家公园列表中。为此，将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下数组的名称，后跟一个句点，然后再写 append。接着，将你想要添加到数组中的项目放在括号内。在这种情况下，你将 "Badlands" 放入括号中。

如果你想在数组的特定位置添加某个元素，可以使用数组的 insert(_:at:) 方法。这个方法需要两个参数：你想插入的元素和它应该在数组中出现的位置的索引。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在访问大峡谷之后，你去了化石林，你想更新你的 nationalParks 数组，以便按你访问的顺序显示这些公园。为了更新你的数组，你可以使用 insert(_:at:) 方法将化石林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入新项时，数组中索引为 3 或更高的所有项都会向后移动，为新项腾出空间。这意味着原本在索引 3 的项现在移到索引 4，原本在索引 4 的项现在移到索引 5，依此类推。在你添加了 Petrified Forest 后，nationalParks 现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用+和+=操作符将两个数组合并。假设你有两个数组分别包含制作水果平滑饮品的成分：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组合并来制作一杯美味的平滑饮品。

![](img/Image00123.jpg)

平滑饮品中成分的顺序与水果和液体的顺序相同。如果你是通过液体+水果的方式制作平滑饮品的，那么液体会排在前面。

你可以使用+=操作符将一个数组添加到另一个数组的末尾。为了增加一些美味的鲜奶油，可以如下操作：

![](img/Image00124.jpg)

请注意，["whipped cream"]虽然只有一个项，但它仍然是一个数组。当你使用+=来追加某项到数组时，必须确保你只是在尝试添加另一个数组。如果你只是写下字符串"whipped cream"而不加方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有多种方法可以从数组中移除项。让我们先看看数组的 removeLast()方法。正如你从名字中可能猜到的，removeLast()会移除数组中的最后一项。让我们用一个 shoppingList 数组来试试看：

![](img/Image00126.jpg)

真棒！注意，removeLast()方法会返回被移除的项，所以如果你愿意，可以将其存储在一个新的常量或变量中。

你也可以使用 remove(at:)方法从特定索引移除某项。假设你的妈妈不希望你买糖果，并从清单中把它拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项都会向后移动腾出空间一样，如果你从数组中间移除项，剩下的项会向前填补空缺。原本在索引 3 位置的"apples"项现在会出现在索引 2 位置，那里曾经是"candy"。

你也可以使用 removeAll()从数组中移除所有项。试试在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有任何内容——根本没有最后一个索引！不过，removeAll()总是可以安全使用，即使是在空数组上。

#### 替换数组中的项

要替换数组中的一项，你只需将数组中该索引位置的值设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2 （第三项）的位置的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引 0 （第一项）的位置的项替换为“胡须蜥蜴”。不，那不是一条真正的龙——它只是一只蜥蜴！

就像你在处理数组索引号时一样，在改变数组中特定索引的值之前，必须确保该位置上有项，否则你会遇到索引越界错误。

图 6-3 显示了如果你尝试通过 `favoriteAnimals[3] = "Standard poodle"` 添加“标准贵宾犬”时发生的错误。要将项添加到数组的末尾，应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加项” 的 第 70 页 中所讲解的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在现有数组的索引之外替换值。*

现在你知道如何根据需要修改数组了。你可以添加项、删除项或替换项。接下来，我们将探讨如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含数组信息的变量或常量。有两个非常有用的属性你可能会使用，它们分别是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性将告诉你数组中有多少项。

查看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印“我没有兄弟姐妹。”如果数组中有内容，则打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋ 。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项做一些操作。你可以使用 for-in 循环来做到这一点！以下代码将会逐行打印 pizzaToppings 数组中的每一个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组写一个 for-in 循环，我们使用了关键字 for，后面是常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。接着，我们将每个配料要执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时，临时代表数组中的每个比萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 `for-in` 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以利用它们对每个项目进行数学运算，从而进行快速计算！下面的代码接收一个数字数组并计算每个数字的平方（一个数字的平方就是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。由于没有索引，值没有按任何特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们来看一下如何创建一个字典并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 `var` 和字典的名称。然后在一对方括号内写入键和值的对应关系，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对通过逗号分隔。

字典与数组不同，因为它们是*无序*的。因此，你在结果面板中看到的州的顺序➋可能与你输入州的顺序➊不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数的集合，你可以使用双精度数（doubles）作为键，字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），所有的值必须是字符串（strings）。同样，你会发现结果面板中数字的顺序可能与在字典中写入分数的顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键来查找你需要的任何项目。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于你如何访问数组中的值，不同之处在于，你使用的是方括号中的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个很大的区别。当你访问数组中的索引值时，你只是简单地获得该值。而当你通过字典中的键访问值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，没有值可供访问。尝试访问一个不存在的值会给你带来一个大错误！为避免这个问题，Swift 返回可选值。这意味着，在你可以对字典中的任何值进行操作之前，需要先解包它。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 I have Texas in my dictionary.。接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不存在于字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到该州时，程序不会崩溃。相反，会打印出 I don't have that state in my dictionary.。

#### 向字典中添加项

要向字典中添加项，首先写出字典的名称，并将新项分配给你希望它在字典中具有的键。让我们向我们的 usStates 字典添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能会出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将该值设置为 nil。由于字典中的值以可选值的形式返回，因此你不需要担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在删除了键为 "MA" 的值后，usStates 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 在字典中替换项

在字典中替换项也很简单。它与替换数组中的项方式相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始我们将值 "apple" 分配给 "red"，但后来我们决定使用 "raspberry" 作为更合适的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得这和我们向字典中添加新值的方式一样。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性会检查字典中的项数。假设你有一个水果篮子待售，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写些代码来遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每一项都有一个键和值，所以你可以用两种不同的方式来遍历字典。下面是通过字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们先写关键词 for，后面跟着常量名称 fruit，表示字典的键，再加上关键词 in，字典名称，句点，和 keys。

在 for-in 循环的大括号内，我们可以访问键，称之为 fruit ➋，以及通过强制解包 fruitBasket[fruit]! ➌ 访问该键对应的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放在 for-in 循环内的任何代码都会在字典的每个键上执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们用一个常量来引用每个值，我们称之为 price，位于 values 属性中。在遍历 values 时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为水果篮子字典中的值访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序无法保证，因此如果你再次运行相同的代码，你可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想通过键存储项目，你可以使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中强大的构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。编写完函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

![](img/Image00118.jpg)

在这个示例中，我们访问了国家公园的名称，然后使用 print 将它们打印到屏幕上。要获取 nationalParks 中的第一个项目，你使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你使用 nationalParks[1]。

#### 观察范围

关于数组有一个重要的要点，如果你尝试访问一个超出数组最后一个索引的项目，你将会遇到错误。在图 6-2 中，你可以看到 nationalParks[3]（它本应是数组中的第四个项目）会导致错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会得到一个错误信息，提示 "Index out of range"。如果你尝试访问数组中不存在的项目，应用程序会崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

改变数组的一种方法是向其中添加新项目。有几种不同的方法来实现这一点，我们来逐一看看。

首先，你可以使用数组的 append(_:) 方法。*Append* 的意思是添加某物。通过 append(_:)，你可以将一个新项目添加到数组的末尾。假设你又去了一次旅行，参观了恶地，并且想将它添加到你的国家公园列表中。为此，你可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

使用 append(_:) 方法时，首先写下数组的名字，后面跟一个点，再加上 append。然后，将你想要添加到数组中的项目放入括号内。在这个例子中，你将 "Badlands" 放入括号中。

如果你想在数组中的特定位置添加某个项目，可以使用数组的 insert(_:at:) 方法。此方法有两个参数：你想要插入的项目和它应该放在数组中的位置（索引）。(我们将在第七章中更详细地讨论参数。)

假设你完全忘记了在参观完大峡谷后，你去了化石森林，你想更新你的 nationalParks 数组，使它按照你参观的顺序显示公园。为了更新数组，你可以使用 insert(_:at:)方法把化石森林插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 插入新项时，数组中索引为 3 及以上的项都会向后挪动，以为新项腾出空间。也就是说，原本在索引 3 的项现在位于索引 4，原本在索引 4 的项则移到了索引 5，以此类推。添加化石森林后，nationalParks 数组变成了 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组添加新项，你还可以使用 + 和 += 操作符将两个数组合并。假设你有两个数组分别存放了果汁冰沙的配料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的果汁冰沙了。

![](img/Image00123.jpg)

果汁冰沙中的配料顺序与水果和液体的顺序相同。如果你是用液体 + 水果的顺序创建的果汁冰沙，那么液体会排在前面。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了增加一些美味的奶油，可以按如下方式添加：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一个项。当你使用 += 操作符将某个项添加到数组时，必须确保你仅仅是在添加一个数组。如果你只写了字符串"whipped cream"而没有加上方括号，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中删除项

有几种方法可以从数组中删除项。让我们先来看一下数组的 removeLast()方法。正如你从它的名字猜到的那样，removeLast()会删除数组中的最后一项。我们可以通过一个购物清单数组来试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被删除的项，因此如果需要，你可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:)方法从特定索引删除一项。假设你的妈妈不想让你买糖果，并从清单中删除了这项：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有其他项会向后挪动腾出空间一样，如果你从数组中间删除项，其他项会向前挪动以填补空缺。原本位于索引 3 的“苹果”现在移到了索引 2 的位置，原本位于索引 2 的“糖果”则被移除。

你也可以使用 removeAll()方法从数组中删除所有项。试着在你的 playground 中输入这个代码：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为它里面没有任何内容——根本没有最后一个索引！然而，使用 removeAll() 是始终安全的，即使在空数组上也可以。

#### 替换数组中的项目

要替换数组中的项，你可以将数组索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的项替换为 "独角兽"，因为魔法动物也算作最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的项替换为 "胡须龙"。不，这不是一条真正的龙——它只是只蜥蜴！

就像每次你使用数组索引号时一样，你必须确保在更改其值之前该索引处的项目确实存在，否则你会遇到“索引超出范围”的错误。

图 6-3 显示了如果尝试通过 favoriteAnimals[3] = "Standard poodle" 来添加 "标准贵宾犬" 时发生的错误。要将项目添加到数组的末尾，应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项目” 中在 第 70 页 所讲解的那样。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加项目、移除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。有两个非常有用的属性你可能会用到，它们分别是布尔型属性 isEmpty 和整型属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少个项目。

查看以下 if-else 语句中这两个属性是如何使用的：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印 "我没有兄弟姐妹。"。但如果数组中有内容，则打印我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋ 。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项执行某个操作。你可以使用 for-in 循环来做到这一点！以下代码将逐行打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组写一个 for-in 循环，我们使用关键字 for，后跟常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接着我们把希望在每个 topping 上执行的语句放入 for-in 循环的大括号中。常量 topping ➊ 在我们遍历数组时暂时代表每个比萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，还可以利用它们对每个项目进行数学运算，这使得计算速度更快！以下代码接受一个数字数组，并计算每个数字的平方（数字的平方是该数字乘以自身）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有其独立的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，当你要求计算机提供其中一个的值时，计算机将不知道选择哪个！

让我们来看看如何创建字典并写出能够帮助你查找所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写上 var 和字典的名称。然后将键和值写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键/值对由逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你看到的结果窗格中州的顺序➋可能与输入州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到结果面板中数字的顺序可能和你在字典中写分数的顺序完全不同。这是正常的，因为你不需要依赖顺序来访问任何内容。你可以通过键找到你需要的任何项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问值，只不过你使用的是方括号中的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有一个很大的不同。当你通过数组的索引访问一个值时，你只会得到该值。而当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能为 nil。Swift 返回可选值的原因是，当你在字典中查找项时，使用的键可能不存在于字典中，这样就没有值可以访问。如果你尝试访问一个不存在的值，程序就会报错！为了避免这个问题，Swift 返回的是可选值。这意味着你需要解包从字典中获取的任何值，然后才能使用它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出 "我在字典中有 Texas"。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "我在字典中没有这个州"。

#### 向字典中添加项

要向字典中添加一个项，首先写出字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中移除项目非常简单；你只需将值设置为 `nil`。由于字典中的值是作为可选类型返回的，所以你不需要担心 `nil` 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，表示没有值。这就是为什么在我们的字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它与替换数组中的项目方式相同。你只需将要替换的项目设置为其他内容。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为 "red" 设置了 "apple" 的值，但后来我们决定 "raspberry" 更适合作为水果，因为有时苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为新的值 ➊。

你可能记得，这与我们向字典中添加新值的方式相同。如果该键已经存在于字典中，则该键的值将被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码演示了如何使用 `isEmpty` 属性检查字典是否为空，如果不为空，则使用 `count` 属性检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典中的所有键，以及 `values`，它包含字典中的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来实现。以下是通过键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写下关键字 `for`，然后是字典键的常量名称 `fruit`，接着是关键字 `in`，字典名称，句点和 `keys`。

在 `for-in` 循环的大括号内，我们可以访问到键，我们称之为 `fruit` ➋，以及通过强制解包其内容 `fruitBasket[fruit]!` ➌ 获得的键对应的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们放在 for-in 循环中的任何代码都会在字典中的每个键上运行一次。所以你应该看到 print 语句打印三次。

我们还可以通过字典的 values 属性来循环：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用每个值，我们称其为价格（price），它位于 values 属性中。当循环遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格（price）不是可选的，因为它直接作为值访问于 fruitBasket 字典中。这意味着我们不需要解包它。你仍然应该看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你得到的结果顺序可能与我们稍有不同。这是因为字典中的项不像数组中的项那样按数字顺序排列！而且由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学习了如何将一组项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每一项。如果你想通过键来存储项，你会使用字典。

了解数组和字典及其使用方法是几乎任何编程语言中的一个强大基础。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一块代码，用来执行特定的工作。写完一个函数后，你可以通过其名称在程序的几乎任何地方调用它。

在这个例子中，我们访问的是国家公园的名称，并通过 print 将其打印到屏幕上。要获取 nationalParks 中的第一个项目，你可以使用 nationalParks[0] ➊。要访问 nationalParks 中的第二个项目，你可以使用 nationalParks[1]。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问数组中一个比最后一个索引还要大的索引，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（即数组中的第四项）会给你一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，出现了一个错误信息，显示为“索引超出范围”。如果你尝试访问数组中不存在的项目，应用程序会崩溃！

![图片](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加元素

改变数组的一种方法是向其中添加新项。我们有几种不同的方法来做到这一点，接下来我们将逐一查看。

首先，你可以使用数组的 append(_:)方法。*Append*意思是添加某个元素。使用 append(_:)，你可以将一个新项添加到数组的末尾。假设你又去了一趟旅行，参观了坏 lands，并且想把它添加到你的国家公园列表中。你可以在你的 playground 中添加如下代码：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写出数组的名称，后面跟一个句点，再写 append。然后，把你想要添加到数组中的元素放在括号内。在这个例子中，你把"Badlands"放在了括号里。

如果你想在数组的特定位置添加某个元素，请改用数组的 insert(_:at:)方法。这个方法需要两个参数：你想要插入的元素以及它在数组中应插入的位置（我们将在第七章详细讨论参数）。

假设你完全忘记了自己在游览大峡谷后去了石化森林，并且想要更新你的 nationalParks 数组，以便按照你访问的顺序显示公园。要更新数组，你可以使用 insert(_:at:)方法将石化森林插入正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入一个新项时，数组中从索引 3 及其更高位置的所有元素都会向后移动，为新项腾出空间。这意味着原来在索引 3 的位置的项现在会在索引 4 的位置，索引 4 的位置的项会在索引 5 的位置，以此类推。添加石化森林后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新元素，还可以使用+和+=操作符将两个数组合并。假设你有两个数组，分别包含制作水果 smoothie 的食材：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组合并来制作一杯美味的 smoothie。

![](img/Image00123.jpg)

smoothie 中的食材顺序与水果和液体的顺序相同。如果你是先加入液体然后加入水果来制作 smoothie，那么液体会先加入。

你使用+=操作符将一个数组添加到另一个数组的末尾。可以按如下方式添加一些 whipped cream 来增加美味感：

![](img/Image00124.jpg)

注意，虽然["whipped cream"]数组中只有一个元素，但它仍然是一个数组。当你使用+=操作符将某个元素添加到数组时，必须确保你添加的是另一个数组。如果你直接写出字符串"whipped cream"，而没有加上方括号，那么会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除元素。我们先来看数组的 removeLast()方法。正如它的名字所示，removeLast()会移除数组中的最后一个元素。让我们通过一个 shoppingList 数组来试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项，因此如果你想，你可以将其存储在一个新的常量或变量中。

你还可以通过使用 remove(at:)方法从特定索引处移除一个项。假设你妈妈不想让你买糖果，并从列表中将其删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一项时，所有项都会滑动过去腾出空间一样，如果你从数组的中间移除一项，其余的项会向前滑动，填补那个空缺的地方。原来在索引 3 处的"苹果"现在在索引 2 处，原本的"糖果"在这里。

你还可以使用 removeAll()方法移除数组中的所有项。尝试在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项（事实上，现在它是空的！），所以这会引发一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为里面什么也没有——根本没有最后一个索引！但是，removeAll()方法即使在空数组上使用也是安全的。

#### 在数组中替换项

要在数组中替换一项，你只需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊，我们用“独角兽”替换了索引为 2 的项（第三项），因为魔法动物也算是最喜欢的动物！在➋，我们用“鬃蜥”替换了索引为 0 的项（第一项）。不，那不是一只真正的龙——它只是一只蜥蜴！

就像在处理数组索引时一样，你必须确保该索引位置的项存在，否则你会遇到“索引超出范围”的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle"来添加"标准贵宾犬"时会发生的错误。要向数组的末尾添加项，应该使用 append(_:)方法或+=，正如我们在《向数组添加项》一节中介绍的那样，见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引处替换值。*

现在你知道了如何根据需要更改数组。你可以添加项、删除项或替换项。接下来，我们将学习如何利用数组的属性获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的常用方法外，数组还有*属性*。数组的属性是包含数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

看看下面的 if-else 语句中是如何使用这两个属性的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹。"。如果数组中有内容，则打印我们有多少兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时，在处理数组时，你可能想对数组中的每个项执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将把 pizzaToppings 数组中的每个配料分别打印到新的一行：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，然后是常量 topping，再是关键字 in，最后是我们的数组名称 pizzaToppings。然后，我们把想对每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 临时代表数组中的每个配料，随着循环进行。我们本可以为这个常量选择任何名称，但选择一个有意义的名字会更好。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：for-in 循环示例的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以用它们对每个项执行数学运算，从而进行快速计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方就是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引不同，每个值都有其自己的*键*。由于没有索引，值不会按任何特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，并且你要求计算机给出其中一个键的值，计算机将无法决定选择哪一个！

让我们来看一下如何创建一个字典，并编写能够帮助你找到所需所有信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后将键和相应的值写在一对方括号内，类似于数组。我们来创建一个字典，存储几个美国州的名字。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序*的。因此，你看到的结果面板中的州的顺序 ➋ 可能与输入州的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与在字典中书写分数的顺序完全不同。这是没问题的，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到任何需要的项。我们来看看怎么做！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，只不过在方括号内使用的是键而不是索引，像这样：usStates["TX"]。

然而，在 Swift 从字典中返回值时有一个很大的区别。当你访问数组中的某个索引的值时，你会直接得到该值。当你使用字典中的键访问值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，所使用的键可能不存在于字典中，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对它进行操作。

要解包一个可选值，首先需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“德克萨斯州”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出“I have Texas in my dictionary”。接下来，我们尝试使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出“I don't have that state in my dictionary”。

#### 向字典中添加项

要向字典中添加项，首先写出字典的名称，并将新项赋给你希望它在字典中拥有的键。我们来将 "Minnesota" 添加到 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，新的字典项可能会出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项是相当简单的；你只需要将值设置为 nil。因为字典中的值是可选类型，所以你不必担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。因此，在我们的字典中你不会看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作原理与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们将 "red" 的值设为 "apple"，但后来我们决定 "raspberry" 是一个更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能记得，这与我们向字典中输入新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键尚不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组类似，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性将检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；以及 values，包含字典的所有值。在遍历字典时，我们会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以有两种不同的方式来遍历字典。下面是如何通过键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后跟一个常量名称 fruit（作为字典键），关键字 in，字典名称，句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键，我们称之为 fruit ➋，以及在强制解包其内容后通过 fruitBasket[fruit]! ➌ 获取的该键对应的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们在 for-in 循环内部放入的任何代码都会针对字典中的每个键运行一次。因此，你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性进行循环遍历：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它直接作为 fruitBasket 字典中的一个值进行访问。这意味着我们不需要对其进行解包。你仍然会看到打印语句被打印三次。图 6-6 展示了两个循环的输出结果。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！并且由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到的内容

在本章中，你学习了如何在数组和字典中存储项。为了存储有序列表中的项，你将使用数组，并通过索引查找每一项。如果你想通过键存储项，你将使用字典。

了解数组和字典及其用法是几乎所有编程语言中强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一块代码，用于执行特定任务。编写函数后，你可以在程序中的几乎任何地方通过调用函数名来使用它。

#### 观察范围

关于数组的一个重要点是，如果你尝试访问一个索引大于数组最后一个索引的项，你会得到一个错误。在图 6-2 中，你可以看到 nationalParks[3]（这将是数组中的第四项）会给出一个错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，你会收到一个错误信息，提示“索引超出范围”。如果你尝试访问一个不存在的数组项，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

改变数组的一种方式是向其中添加新项。这个过程有几种不同的方法，让我们来看看每一种。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某个东西。使用 append(_:)，你可以将一个新项添加到数组的末尾。假设你又去旅行，参观了 Badlands，并且想将它加入到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出数组的名称，后跟一个句点，然后是 append。然后，将你要添加到数组中的项放入括号内。在这个例子中，你将 "Badlands" 放入括号中。

如果你想在数组中的特定位置添加某个东西，可以改用数组的 insert(_:at:) 方法。此方法接受两个参数：你想要插入的项和它在数组中应放置的位置索引。（我们将在第七章 中更详细地讨论参数。）

假设你完全忘记了自己是在参观了大峡谷之后去的 Petrified Forest，并且你想更新你的 nationalParks 数组，以按你参观的顺序显示公园。为了更新数组，你可以使用 insert(_:at:) 方法，将 Petrified Forest 放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，数组中索引 3 或更高的所有项都会被移动，以腾出空间给新项。这意味着原本在索引 3 处的项现在位于索引 4，原本在索引 4 处的项现在位于索引 5，依此类推。在你添加了 Petrified Forest 后，nationalParks 现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 + 和 += 运算符将两个数组连接起来。假设你有两个数组，分别存储制作水果冰沙的原料：

![](img/Image00122.jpg)

现在你可以通过添加 fruits 和 liquids 数组制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中原料的顺序与 fruits 和 liquids 数组中的顺序相同。如果你是用 liquids + fruits 创建冰沙，那么 liquids 会排在前面。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。为增加更多美味，可以按照以下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，尽管它只有一个项。当你使用 += 向数组添加内容时，你必须确保你只是在添加另一个数组。如果你仅仅写了字符串 "whipped cream" 而没有加上方括号，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

删除数组中的项有几种方法。让我们先来看看数组的 removeLast() 方法。正如你从它的名字中可能猜到的，removeLast() 会删除数组中的最后一项。让我们尝试在购物清单数组中使用它：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法返回被删除的项，因此如果你想，你可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:) 方法从特定索引位置删除项。假设你的妈妈不希望你买任何糖果，并将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将项添加到数组中间时，所有其他项都向一边移动腾出空间一样，如果你从数组中间删除一项，其他项也会向回移动，填补那个空缺的位置。原本位于索引 3 的 "苹果" 现在位于索引 2，原本位于该位置的 "糖果" 被移除。

你还可以使用 removeAll() 删除数组中的所有项。尝试在你的 Playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），因此会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有任何内容——根本没有最后一个索引！不过，removeAll() 在空数组上也始终是安全的。

#### 替换数组中的项

要替换数组中的项，你只需要将数组的某个索引位置赋值为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2 （第三项）上的项替换成了 "独角兽"，因为魔法动物也算作最爱的动物！在 ➋ 处，我们将索引 0 （第一项）上的项替换成了 "胡须龙"。不，这不是一条真正的龙——它只是一个蜥蜴！

就像任何处理数组索引时一样，你必须确保该索引位置的项在数组中存在，否则你会得到一个 "索引超出范围" 的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 添加项时发生的错误。要将项添加到数组的末尾，应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加项” 中所讲解的，在 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你已经知道如何根据需要修改数组。你可以添加项，删除项，或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有*属性*。数组的属性是包含有关数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少项。

看一下这些属性在以下 if-else 语句中的使用方式：

![Image](img/Image00134.jpg)

这个 if-else 语句检查 mySiblings 数组是否为空 ➊。如果是空的，则打印 “我没有兄弟姐妹。” 如果数组里有东西，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将在单独的行上打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。接着我们将每次遍历数组时要执行的语句放在 for-in 循环的大括号中。常量 topping ➊ 在我们遍历数组时临时代表每个披萨配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以利用它们对每一项进行数学运算，从而加快计算速度！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是它自己与自己的乘积）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一组值的集合，但与有序索引的数组不同，每个值都有自己的*键*。由于没有索引，值的存储没有特定的顺序。要访问字典中的值，必须通过其键进行查找。

键必须是唯一的。同一个字典中不能有重复的键。如果有两个相同的键，且你请求计算机给出其中一个键的值，计算机将不知道选择哪个！

让我们来看一下如何创建字典，并编写有助于你找到所有需要信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 `var` 和字典的名称。然后将键和值以一对方括号的形式写在一起，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是 *无序的*。因此，你在结果面板中看到的州的顺序 ➋ 可能与输入州的顺序 ➊ 完全不同。甚至可能与本书中打印的顺序不同！

与数组类似，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用 `double` 类型作为键，使用字符串类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 `double` 类型，所有的值必须是字符串类型。同样，你会发现，结果面板中数字的顺序可能与字典中分数的输入顺序完全不同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键来查找任何你需要的项。我们来看看如何操作！

#### 访问字典中的值

在字典中查找一个值的方式与在数组中访问一个值类似，只是你需要使用方括号中的键，而不是索引，像这样：`usStates["TX"]`。

然而，Swift 返回字典值的方式有一个很大的不同。当你在数组的索引位置访问值时，你会直接得到该值。当你使用键在字典中访问值时，你会得到一个可选值。

在第五章中，你学到过可选类型可能包含一个值，也可能是 `nil`。Swift 在你查找字典中的项时返回可选类型的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。如果尝试访问一个不存在的值，会得到一个错误！为了避免这个问题，Swift 返回可选类型。这意味着你需要在对字典中获取的值进行操作之前，先解包该值。

要解包一个可选类型，首先使用 `if-let` 语句检查它是否存在，就像我们在第五章中所做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印了“我有 Texas 在我的字典中”。接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个字典中没有的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印了“我的字典中没有这个州”。

#### 向字典添加项

要向字典中添加项，首先写下字典的名称，并将新项分配给你希望它在字典中对应的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设置为 nil。因为字典中的值是以可选值的形式返回的，所以你不需要担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。请记住，nil 是特殊的，表示没有值。因此，你在字典中不会看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是一个更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这和我们向字典中输入新值的方法一样。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新的键值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则使用 count 属性检查字典中有多少项。想象一下，你有一个水果篮子在出售。你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中的所有键，和 values，包含所有值。当我们遍历字典时，会使用这两个属性。

让我们写一些代码，循环遍历我们的果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来做。以下是使用键遍历字典的方法：

![图片](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后跟字典键的常量名称 fruit，关键字 in，字典名称，一个句点，以及 keys。

在 for-in 循环的大括号内，我们可以访问到键，我们称其为 fruit ➋ ，以及该键的值，当我们使用 fruitBasket[fruit]!强制解包它的内容时 ➌。那个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环中写的任何代码都会为字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们也可以使用字典的 values 属性来循环遍历字典：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环方式，但现在我们用一个常量来表示 values 属性中的每个值，我们称其为 price。在遍历值时，我们无法在循环内访问到键。

另一个需要注意的区别是，价格不是一个可选项，因为它直接作为一个值被访问在 fruitBasket 字典中。这意味着我们不需要解包它。你应该仍然会看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序不可保证，如果你再次运行相同的代码，你可能会看到不同的打印顺序。

### 你学到了什么

在这一章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你应该使用数组并通过索引查找每个项目。如果你想按键存储项目，你应该使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完一个函数后，你可以通过它的名字从程序中的几乎任何地方调用它。

关于数组的一个重要点是，如果你尝试访问数组中一个大于最后一个索引的项目，将会出现错误。在图 6-2 中，你可以看到，nationalParks[3]（即数组中的第四个项目）会导致错误，因为数组中只有三个国家公园，索引从 0 到 2。

如你所见，系统会提示“索引超出范围”的错误消息。如果你尝试访问数组中不存在的项目，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

改变数组的一种方法是向其中添加新项目。有几种不同的方式可以做到这一点，让我们逐一了解。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某个项目。通过 append(_:) 方法，你可以将一个新项目添加到数组的末尾。假设你又去了一趟旅行，参观了“恶地”，你想将它添加到国家公园的列表中。要做到这一点，可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出数组的名称，然后加上一个句点，再加上 append。接着，将你想要添加到数组中的项目放在括号内。在这个例子中，你将“恶地”放在括号内。

如果你想在数组的特定位置添加某个项目，可以使用数组的 insert(_:at:) 方法。该方法接受两个参数：你想插入的项目以及它应该在数组中出现的索引位置。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷后去过“化石森林”，你希望更新你的 nationalParks 数组，以便它按你访问的顺序显示各大公园。要更新数组，可以使用 insert(_:at:) 方法将“化石森林”插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，数组中索引 3 或更高的所有项目都会向后移动，为新项目腾出空间。这意味着原本位于索引 3 的项目现在位于索引 4，原本位于索引 4 的项目现在位于索引 5，依此类推。添加“化石森林”后，nationalParks 数组现在变为["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新项目，还可以使用 + 和 += 运算符将两个数组相加。假设你有两个数组，分别包含水果奶昔的配料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组合并来制作一杯美味的奶昔。

![](img/Image00123.jpg)

奶昔中配料的顺序与水果和液体的顺序相同。如果你用液体 + 水果的顺序创建奶昔，那么液体将排在前面。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。为了增加一些美味，可以按如下方式添加一些奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一个元素。当你使用+=将内容追加到数组时，必须确保你只尝试添加另一个数组。如果你只是写了字符串“whipped cream”而没有加上方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中删除项

删除数组项有几种方法。首先让我们看一下数组的 removeLast()方法。正如你从名字中猜到的那样，removeLast()会删除数组中的最后一项。让我们用一个 shoppingList 数组来尝试一下：

![](img/Image00126.jpg)

真棒！请注意，removeLast()方法会返回被移除的项，因此如果你想，可以将它存储在一个新的常量或变量中。

你也可以使用 remove(at:)方法从特定的索引删除项。假设你的妈妈不想让你买糖果并把它从清单上删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项都会移位以腾出空间一样，如果你从数组中间删除项，剩余的项会向后移动填补空缺。原本在索引 3 的“苹果”项现在位于索引 2 的位置，那里原本是“糖果”。

你也可以使用 removeAll()删除数组中的所有项。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的项会给你一个错误：

![](img/Image00130.jpg)

我们的数组中没有这么多项（实际上，现在它是空的！），所以这会抛出错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组里没有任何内容——根本没有最后一个索引！但是，removeAll()即使在空数组上使用也是安全的。

#### 替换数组中的项

要替换数组中的一项，你需要将数组的某个索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊，我们将索引为 2（第三项）的项替换为“独角兽”，因为魔法动物也算作最喜欢的动物！在➋，我们将索引为 0（第一项）的项替换为“鬃龙”。不，这不是一条真的龙——它只是一个蜥蜴！

和你在处理数组索引时一样，你必须确保在修改某个索引的值之前，数组中确实存在该项，否则你会遇到“索引超出范围”错误。

图 6-3 展示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬"添加“标准贵宾犬”时会发生的错误。要将项添加到数组末尾，你应该使用 append(_:)方法或+=，正如我们在 “向数组添加项”中讲到的，第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引处的值。*

现在你知道如何根据需要修改数组了。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有*属性*。数组的属性是包含有关数组信息的变量或常量。有两个非常有用的属性，你可能会使用它们：布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则告诉你数组中有多少个元素。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。如果数组中有元素，则打印我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个元素执行某个操作。你可以使用 for-in 循环来做到这一点！下面的代码将在单独的行中打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用关键字 for，后跟常量 topping，再是关键字 in，最后是数组名称 pizzaToppings。然后，我们把希望对每个 topping 执行的语句放在 for-in 循环的花括号内。常量 topping ➊ 在我们遍历数组时，临时代表数组中的每一个披萨配料。我们本可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在图 6-4 中查看这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环对于打印数组中的每个值非常有效。如果你处理的是数字，你甚至可以用它们对每个元素进行数学运算，这样可以快速计算！下面的代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是它本身乘以自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值并不按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。您不能在同一个字典中重复使用相同的键。如果有两个相同的键，而您要求计算机给出其中一个键的值，计算机就无法知道该选择哪个！

让我们来看看如何创建一个字典并写入键，以帮助您找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号中写下键和值，类似于数组。我们来创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如您所见，每个键和值之间都有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，您在结果窗格 ➋ 中看到的状态顺序可能与您输入状态的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，您可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键类型不必与值类型相匹配。例如，如果您想存储一个分数集合，可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次提醒，您会发现结果窗格中的数字顺序可能与您在字典中写入分数的顺序相差很大。这没关系，因为您不需要知道顺序就能访问任何内容。您可以通过键找到任何需要的项。让我们来看看！

#### 访问字典中的值

在字典中查找一个值的方式与访问数组中的值类似，只不过您需要在方括号内使用一个键，而不是索引，例如：usStates["TX"]。

然而，Swift 在从字典中返回值的方式上有很大的不同。当您访问数组中某个索引的值时，您只是简单地得到该值。当您使用键访问字典中的值时，您得到的是一个可选值。

在第五章中，您学到过可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，您使用的键可能在字典中不存在，这种情况下就没有值可访问。试图访问一个不存在的值会给您带来一个大错误！为了避免这个问题，Swift 返回可选值。这意味着您在处理字典中的任何值之前，必须先解包它。

要展开一个可选值，首先你需要通过 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

向字典中添加项时，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它被更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设置为 nil。因为字典中的值是以可选值的形式返回的，所以你不必担心 nil 会在字典中引起问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，意味着根本没有值。这就是为什么你在字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很容易。它的工作方式与替换数组中的项相同。你只需要将你想要替换的项设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们将值 "apple" 用于 "red" ，但是后来我们决定 "raspberry" 更适合作为水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry" ，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这是我们将新值输入字典的相同方式。如果字典中已经存在该键，那么该键的值将被替换。如果该键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮子。你可以使用这些属性来帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。我们在遍历字典时将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有键和值，所以你可以通过两种不同的方式来实现。以下是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是常量名 fruit 作为字典键，再写关键字 in，字典名称，句点和 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及通过强制解包其内容来获取该键的值：fruitBasket[fruit]! ➌。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的水果键肯定存在于字典中。

我们在 for-in 循环中写的任何代码都会在字典的每个键上执行一次。所以你应该会看到打印语句显示三次。

我们也可以通过字典的值属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为字典中水果篮的值来访问的。这意味着我们不需要解包它。你仍然应该会看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的有所不同。这是因为字典中的项目不像数组那样按数字顺序排列！由于顺序不保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到的内容

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组并通过索引查找每个项目。如果你想根据键存储项目，则需要使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中一个强大的基础。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以通过函数名在程序的几乎任何地方调用它。

正如你所看到的，你会收到一个错误信息，提示“索引超出范围”。如果你尝试访问数组中不存在的项目，应用程序将崩溃！

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

改变数组的一种方式是向其中添加新项目。这里有几种不同的方法，我们来逐一看看。

首先，你可以使用数组的 append(_:)方法。*Append*的意思是添加某物。使用 append(_:)方法，你可以向数组的末尾添加一个新项目。假设你又去了一次旅行，访问了 Badlands，你想将它添加到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写下数组的名称，后跟一个句点，然后再写 append。接着，将你想要添加到数组中的项目放入括号内。在这个例子中，你将"Badlands"放入括号内。

如果你想在数组中的特定位置添加某个项目，请使用数组的 insert(_:at:)方法。这个方法接受两个参数：你想插入的项目和它应该放在数组中的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了在游览大峡谷之后去过化石森林，你想要更新你的 nationalParks 数组，使其按照你参观的顺序显示这些公园。为了更新数组，你可以使用 insert(_:at:)方法，将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 的位置插入新项目时，索引 3 及其之后的所有项目都会向后移动，为新项目腾出位置。这意味着，原来在索引 3 的项目现在会被移动到索引 4，原来在索引 4 的项目会被移动到索引 5，以此类推。在你添加了化石森林之后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项目，还可以使用+和+=运算符将两个数组合并在一起。假设你有两个数组，分别存储了制作水果冰沙所需的食材：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组合并，制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中食材的顺序与水果和液体的顺序相同。如果你用液体+水果制作冰沙，那么液体会先放进去。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。如下所示，加入一些奶油，增加美味：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个元素。当你使用 += 操作符将内容添加到数组时，必须确保你只是在添加另一个数组。如果你仅仅写下字符串 "whipped cream" 而没有使用方括号包裹它，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

有几种方法可以从数组中移除元素。让我们首先来看数组的 removeLast() 方法。正如你从它的名字中猜到的那样，removeLast() 会移除数组中的最后一个元素。让我们在 shoppingList 数组上尝试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的元素，因此如果你愿意，你可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:) 方法从特定的索引中移除元素。假设你的妈妈不希望你买糖果，并把它从清单上去掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将一个元素添加到数组中间时，所有元素都会移动来腾出空间一样，如果你从数组中间移除一个元素，剩下的元素将会移动回来填补那个空缺。原本在索引 3 位置的 "apples" 现在位于索引 2 位置，原本 "candy" 在那里。

你也可以使用 removeAll() 方法从数组中移除所有元素。试着在你的 Playground 中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引位置移除元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（实际上，现在它已经是空的了！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中什么都没有——根本没有最后一个索引！然而，removeAll() 在任何情况下都可以安全使用，即使在空数组上也是如此。

#### 替换数组中的元素

要替换数组中的元素，你可以将数组中某个索引位置的值设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2 位置（第三个元素）的值替换成了 "Unicorn"，因为魔法动物也是最喜欢的动物！在 ➋ 处，我们将索引 0 位置（第一个元素）的值替换成了 "Bearded dragon"。不，这不是一条真正的龙——它只是一个蜥蜴！

就像你在处理数组索引时一样，你必须确保在改变某个索引处的值之前，该索引在数组中确实存在，否则你会遇到“索引超出范围”的错误。

图 6-3 显示了当你尝试通过 favoriteAnimals[3] = "Standard poodle" 来添加 "Standard poodle" 时发生的错误。要将元素添加到数组末尾，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加元素” 中第 70 页所讲解的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换一个超出现有数组范围的索引位置的值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有*属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则会告诉你数组中有多少个元素。

查看下面这个 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查 mySiblings 数组是否为空 ➊。如果是空的，则打印出 "我没有兄弟姐妹。"。如果数组中有内容，则打印出兄弟姐妹的数量："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时，当你处理数组时，可能希望对数组中的每个项目执行相同的操作。你可以使用 for-in 循环来实现！以下代码将会在新的一行上打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接着，我们将要对每个 topping 执行的语句放入 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以利用它们对每个项目进行数学运算，这样可以进行快速的计算！以下代码接收一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它自身）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与数组不同的是，字典中的每个值都有自己的*键*。因为没有索引，值不会按任何特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们看看如何创建一个字典，并写下键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 `var` 和字典的名称。然后在一对方括号内写入键和对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，并且键/值对之间用逗号分隔。

字典不同于数组，它是*无序的*。因此，你在结果窗格中看到的州的顺序➋可能与你输入的顺序➊不同。它甚至可能与书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以将键设置为 `double` 类型，值设置为 `string` 类型：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 `double` 类型，所有的值必须是 `string` 类型。同样，你会发现结果窗格中的数字顺序与在字典中写入分数时的顺序可能完全不同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何需要的项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问值的方式，不同之处在于你在方括号中使用的是键而不是索引，例如：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个很大的不同。当你在数组的索引位置访问值时，你直接得到值。而在字典中使用键访问值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 `nil`。Swift 返回可选值的原因是，当你在字典中查找项时，使用的键可能在字典中不存在，这种情况下就没有值可供访问。尝试访问一个不存在的值会给你一个大的错误！为了避免这个问题，Swift 返回了可选值。这意味着，在你使用字典中的值之前，你需要解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

为了从字典中获取“Texas”，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，打印出“我在字典中找到了 Texas”。接下来，我们尝试使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“我在字典中没有这个州”。

#### 向字典添加项目

要向字典中添加项，首先写出字典的名称，然后将新项分配给你希望它在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会发现它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖于索引，所以你的新字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项很简单；你只需要将该值设置为 nil。由于字典中的值作为可选值返回，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键"MA"对应的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有任何值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项一样。你只需将要替换的项设置为其他内容。假设你创建了一个包含水果颜色的字典：

![](img/Image00146.jpg)

起初，我们给“red”分配了“apple”作为值，但后来我们决定用“raspberry”替换“apple”，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这与我们之前向字典中输入新值的方式相同。如果该键已经存在于字典中，那么该键的值将被替换。如果该键不存在，则新键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，count 属性可以检查字典中有多少项。假设你有一个水果篮子待售，你可以使用这些属性来帮助你追踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys ，它包含字典的所有键，和 values ，它包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮并打印每个水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种不同的方式来遍历字典。这是通过字典的键来循环遍历的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，接着是一个常量名称 fruit 代表字典键，关键字 in ，字典名称，一个点符号，和 keys 属性。

在我们 for-in 循环的大括号内，我们可以访问键，我们称之为 fruit ➋ ，以及该键对应的值，当我们通过 fruitBasket[fruit]! 强制解包它的内容时 ➌ 。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定存在于字典中。

我们放在 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price ，它在 values 属性中。当循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是 price 不是可选类型，因为它直接作为值在 fruitBasket 字典中访问。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你重新运行相同的代码，可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，你会使用数组并通过索引查找每个项目。如果你想通过键来存储项目，则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以通过其名称从程序的几乎任何地方调用它。

![Image](img/Image00119.jpg)

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项目

更改数组的一种方式是向其中添加新项目。有几种不同的方法可以做到这一点，让我们来看一下每种方法。

首先，你可以使用数组的 append(_:)方法。*Append*表示添加某个项。使用 append(_:)方法，你可以将一个新项添加到数组的末尾。假设你去了一次新旅行，参观了 Badlands，并希望将它添加到你的国家公园列表中。为此，将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写出你的数组名称，后面跟一个句点，再加上 append。然后，将你想要添加到数组中的项放在括号内。在这种情况下，你将“Badlands”放在括号内。

如果你想在数组中的特定位置添加某个项，请改用数组的 insert(_:at:)方法。此方法有两个参数：你想要插入的项和它应放置在数组中的索引位置。（我们将在第七章中详细讨论参数。）

假设你完全忘记了在参观大峡谷之后你还去了化石森林，并且你想更新你的 nationalParks 数组，以便按你访问的顺序显示这些公园。为了更新数组，你可以使用 insert(_:at:)方法将化石森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 插入新项时，数组中索引 3 或更高位置的所有项都会向后移动，以腾出空间给新项。这意味着，原本在索引 3 的项现在位于索引 4，原本在索引 4 的项现在位于索引 5，依此类推。添加了化石森林之后，nationalParks 数组现在变为["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项目，还可以使用+和+=运算符将两个数组合并。假设你有两个数组，分别包含水果冰沙的原料：

![](img/Image00122.jpg)

现在你可以通过将水果和液体数组添加到一起，制作一款美味的冰沙。

![](img/Image00123.jpg)

冰沙中的原料顺序与水果和液体数组中的顺序相同。如果你用液体+水果创建冰沙，那么液体会排在前面。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。你可以像这样添加一些搅打奶油，以增加美味：

![](img/Image00124.jpg)

注意，["whipped cream"]是一个数组，尽管它只有一个项目。当你使用+=将某物添加到数组时，你必须确保你只是在尝试添加另一个数组。如果你只是写字符串"whipped cream"而没有方括号，它会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们从查看数组的 removeLast()方法开始。正如你从它的名字中可能猜到的，removeLast()会移除数组中的最后一个项目。让我们用 shoppingList 数组来试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法返回被移除的项目，因此如果你愿意，可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:)方法从特定索引移除一个项目。假设你的妈妈不想让你买糖果，并把它从清单上拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将项目添加到数组中间时，所有项目会挤过来腾出空间一样，如果你从数组的中间移除一个项目，其余的项目会挤回去填补那个空位。原来在索引 3 处的“苹果”现在位于索引 2 的位置，即原本“糖果”所在的位置。

你也可以使用 removeAll()移除数组中的所有项目。尝试在你的游乐场输入这个：

![](img/Image00129.jpg)

注意，尝试移除一个不存在的索引位置的项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它已经空了！），所以会抛出一个错误。如果我们对空数组使用 removeLast()，也会报错，因为里面什么都没有——根本没有最后一个索引！但是，removeAll()即使在空数组上使用也是安全的。

#### 替换数组中的项目

要替换数组中的一个项目，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的位置替换为“独角兽”，因为魔法动物也算作是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的位置替换为“胡须龙”。不，这不是一只真正的龙——它只是一只蜥蜴！

就像你在处理数组索引时一样，在更改某个项目的值之前，你必须确保该索引位置的项目确实存在，否则你会得到“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬"添加“标准贵宾犬”时发生的错误。要将一个项目添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项目”中讲解的那样，在第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加、删除或替换项。接下来，我们将看看如何使用数组的属性来获取更多有关它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有*属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性的值是 `true` 或 `false`，取决于数组是否为空，而 count 属性则告诉你数组中有多少项。

看一下以下 if-else 语句中这两个属性是如何使用的：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹。"。如果数组中有内容，则打印我们有几个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项执行某些操作。你可以使用 `for-in` 循环来实现！以下代码会逐行打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

为了编写针对 pizzaToppings 数组的 `for-in` 循环，我们使用了关键字 `for`，后跟常量 topping，然后是关键字 `in`，最后是数组名称 pizzaToppings。接着我们将要为每个配料执行的语句放入 `for-in` 循环的花括号内。常量 topping ➊ 在我们遍历数组时，临时代表数组中的每个配料。我们可以为这个常量选择任何名称，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 `for-in` 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 `for-in` 循环的输出*

![图片](img/Image00137.jpg)

使用 `for-in` 循环非常适合打印数组中的每个值。如果你在处理数字，还可以用它们对每个项进行数学运算，这样可以快速进行计算！以下代码会取一个数字数组，并计算每个数字的平方（数字的平方是该数字与其自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一种值的集合，但不同于有序的索引，每个值都有自己的*键*。由于没有索引，值不会按照特定顺序存储。要访问字典中的值，你需要通过它们的键进行查找。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就不知道该选择哪一个！

让我们来看看如何创建一个字典，并编写键以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写上`var`和字典的名称。然后像数组一样，使用一对方括号来写入键及其对应的值。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，结果窗格➋中显示的州的顺序可能与输入时的顺序➊不同，甚至可能与本书中显示的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一个分数集合，你可以使用`double`类型作为键，`string`类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是`double`类型，所有的值必须是`string`类型。同样，你会看到，结果窗格中的数字顺序可能与字典中分数的输入顺序大不相同。这是可以的，因为你不需要知道顺序来访问任何内容。你可以通过键找到你需要的任何项。让我们看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于你如何访问数组中的一个值，只不过你使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大的不同。当你访问数组中的某个索引的值时，你会直接得到该值。而当你用键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学习了可选项可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选项，是因为你使用的键可能在字典中不存在，在这种情况下没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中获取的任何值，然后才能对其进行操作。

要解包可选值，首先你需要检查它是否存在，使用 if-let 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 “I have Texas in my dictionary.” 接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出 “I don't have that state in my dictionary.”

#### 向字典中添加项目

要向字典添加项目，首先写出字典的名称，并将新项目分配给你希望其在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，你的新字典项目可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除项目非常简单；你只需将值设置为 nil。因为字典中的值作为可选值返回，所以你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键“MA”处的值后，usStates 已更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。因此，你在字典中不会看到 "MA": nil。

#### 在字典中替换项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为“red”设置了值“apple”，但后来我们决定“raspberry”是一个更好的水果，因为有时苹果是绿色或黄色的。要将“apple”替换为“raspberry”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这与我们向字典中输入新值的方式相同。如果该键已经存在于字典中，那么该键的值将被替换。如果该键尚不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也具有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有键和值，你可以用两种不同的方式进行遍历。这是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，后跟字典键的常量名 fruit，关键字 in，字典名，一个句点，最后是 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称其为 fruit ➋）以及通过 fruitBasket[fruit]! ➌ 强制解包其内容时，该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们放入 for-in 循环中的任何代码都会为字典中的每个键执行一次。因此，你应该看到 print 语句打印三次。

我们也可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用每个值，我们称其为 price，位于 values 属性中。在循环遍历 values 时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项目不像数组中的项目那样按编号顺序排列！由于顺序不可保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中非常强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以使用它的名称在程序的几乎任何地方调用它。

*图 6-2：尝试访问数组中不存在的索引会导致错误。*

#### 向数组添加项

更改数组的一种方法是向其中添加新项。有几种不同的方法可以实现这一点，让我们来看一下每种方法。

首先，你可以使用数组的 `append(_:)` 方法。*Append* 的意思是添加某个元素。使用 `append(_:)`，你可以向数组的末尾添加一个新元素。假设你去了另一个地方，参观了恶地（Badlands），并且你想将其添加到你的国家公园列表中。你可以在 playground 中加入以下代码：

![](img/Image00120.jpg)

使用 `append(_:)` 方法时，首先写下数组的名称，后跟一个句点，再接 `append`。然后，把你想添加到数组中的元素放在圆括号内。在这个例子中，你把 "Badlands" 放在了圆括号内。

如果你想在数组的特定位置插入某个元素，可以使用数组的 `insert(_:at:)` 方法。该方法接受两个参数：你要插入的项和它在数组中应该插入的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了自己在参观大峡谷后去过化石森林，并且你想更新你的 `nationalParks` 数组，以便按照你访问这些公园的顺序显示它们。要更新数组，你可以使用 `insert(_:at:)` 方法将化石森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新元素时，数组中从索引 3 或更大的位置的所有元素都会被推移，腾出位置给新元素。也就是说，原本在索引 3 处的元素现在位于索引 4，原本在索引 4 处的元素现在位于索引 5，依此类推。添加化石森林后，`nationalParks` 数组现在是 `["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]`。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 `+` 和 `+=` 操作符将两个数组合并在一起。假设你有两个数组，分别包含制作水果果昔的配料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作一杯美味的果昔。

![](img/Image00123.jpg)

果昔的配料顺序与水果和液体的顺序相同。如果你先放液体再放水果，那么液体就会排在前面。

你可以使用 `+=` 操作符将一个数组添加到另一个数组的末尾。为了增加一些额外的美味，可以按照如下方式加入一些奶油：

![](img/Image00124.jpg)

注意，["whipped cream"] 是一个数组，尽管它只包含一个元素。当你使用 += 将元素附加到数组时，必须确保你只添加另一个数组。如果你只是写了字符串 "whipped cream" 而没有用方括号括起来，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

有多种方法可以从数组中移除元素。让我们从查看数组的 removeLast() 方法开始。正如你从其名称中可能猜到的那样，removeLast() 会移除数组中的最后一个元素。我们用一个 shoppingList 数组来试试看：

![](img/Image00126.jpg)

很棒！注意，removeLast() 方法会返回被移除的元素，因此如果你想，你可以将它存储到一个新的常量或变量中。

你也可以通过使用 remove(at:) 方法从特定索引移除一个元素。假设你妈妈不希望你买糖果，于是把它从购物清单上删掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们向数组中间添加元素时，所有其他元素都向后移动腾出空间一样，如果你从数组的中间移除一个元素，剩余的元素会向前移动，填补空白。原来在索引 3 位置的“apples”现在在索引 2 位置，原来是“candy”所在的位置。

你也可以使用 removeAll() 来移除数组中的所有元素。尝试在你的 playground 中输入以下内容：

![](img/Image00129.jpg)

注意，尝试移除一个不存在的索引位置的元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），所以会抛出一个错误。如果我们在空数组上使用 removeLast()，也会得到错误，因为数组中没有任何元素——根本没有最后一个索引！然而，removeAll() 方法总是可以安全使用，即使是在空数组上。

#### 替换数组中的元素

要替换数组中的元素，你只需将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个元素）的位置替换为“Unicorn”，因为魔法动物也是最喜欢的动物！在 ➋ 处，我们将索引 0（第一个元素）的位置替换为“Bearded dragon”。不，这不是一条真正的龙——它只是一个蜥蜴！

就像每次处理数组索引时一样，在更改某个元素的值之前，必须确保该索引处的元素存在，否则你会遇到“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加“标准贵宾犬”时发生的错误。要将一个元素添加到数组的末尾，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加元素” 中讲解的那样，见 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组的索引范围内替换值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将查看如何使用数组的属性来获取更多有关它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性* 。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性将告诉你数组中有多少项。

看一下以下 if-else 语句中这两个属性是如何使用的：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印“我没有兄弟姐妹。”如果数组中有内容，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋ 。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将在单独的行上打印出 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用关键字 for ，接着是常量 topping ，然后是关键字 in ，最后是我们的数组名称 pizzaToppings 。然后，我们将每个 topping 的处理语句放在 for-in 循环的花括号中。常量 topping ➊ 在我们遍历数组时临时表示数组中的每个披萨配料。我们本可以选择任何名称来作为这个常量，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项目执行数学运算，这样就能进行快速的计算！以下代码获取一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一种值的集合，但与有序索引不同，每个值都有自己的 *键* 。因为没有索引，所以值的存储顺序不固定。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中重复使用相同的键。如果有两个相同的键，并且你请求计算机返回其中一个键的值，计算机就无法知道该选择哪一个！

让我们看看如何创建字典，并编写键来帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上`var`和字典的名称。然后将键和值对写在一对方括号中，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于，它们是*无序的*。因此，你在结果面板 ➋ 中看到的状态顺序可能与输入状态 ➊ 的顺序不同，甚至可能与书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数类型，所有的值必须是字符串类型。同样，你会发现结果面板中的数字顺序可能与你在字典中写入分数的顺序有很大不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们来看看如何做到这一点！

#### 访问字典中的值

在字典中查找值的方式与访问数组中的值类似，只是你使用的是方括号中的键而不是索引，例如：usStates["TX"]。

然而，Swift 返回字典值的方式有很大不同。当你访问数组中的某个索引的值时，你会直接获得该值。而当你用字典中的键访问某个值时，你会得到一个可选类型的值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。试图访问一个不存在的值会导致一个大的错误！为了避免这个问题，Swift 返回可选值。这意味着你在对字典中的值做任何操作之前，需要解包（unwrap）它。

要解包一个可选值，首先你使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接着，我们尝试通过键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到这个州时，程序不会崩溃，而是会打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典添加项，首先写出字典的名称，并将新项分配给你希望它拥有的键。我们来向 usStates 字典添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需要将值设置为 nil。由于字典中的值是作为可选值返回的，因此你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项的方式一样。你只需将要替换的项设置为其他内容。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 更适合，因为有时苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这正是我们将新值输入字典的方式。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性帮助你记录所有物品：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键，以及`values`，它包含所有的值。当我们遍历字典时，我们会使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每个项目都有一个键和值，你可以用两种不同的方式来做这件事。这是通过字典的键来遍历字典的方法：

![图片](img/Image00149.jpg)

这里我们使用字典的`keys`属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写出`for`关键字，接着写出常量名 `fruit` 作为字典键，然后是`in`关键字，字典名，接着一个句点和 `keys`。

在 `for-in` 循环的大括号内，我们可以访问到键（我们称之为 `fruit` ➋），并通过 `fruitBasket[fruit]!` 强制解包它的内容，获取该键对应的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的 `fruit` 键肯定存在于字典中。

我们放在 `for-in` 循环内部的任何代码都会针对字典中的每个键执行一次。因此，你应该会看到打印语句显示三次。

我们还可以使用字典的 `values` 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同的 `for-in` 循环样式，但现在我们使用一个常量来引用 `values` 属性中的每个值，我们称之为 `price`。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是一个可选值，因为它是通过直接访问水果篮字典中的值来获取的。这意味着我们不需要解包它。你仍然会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按数字顺序排列！并且由于顺序不保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。为了将项目存储在有序列表中，你将使用数组并通过索引查找每个项目。如果你想根据键存储项目，你则需要使用字典。

了解数组和字典，以及如何使用它们，是几乎所有编程语言中一个非常强大的基础。接下来，我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以通过函数的名字在程序中的几乎任何地方调用它。

#### 向数组添加项

更改数组的一种方式是向其中添加新项。这里有几种不同的方法，我们来看一下每种方法。

首先，你可以使用数组的 append(_:)方法。*Append*意味着添加某些内容。使用 append(_:)方法，你可以将一个新项目添加到数组的末尾。假设你去了一趟新的旅行，参观了恶地国家公园，并且你想将其添加到你的国家公园列表中。为此，您可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:)方法，首先写下你的数组名称，后面加一个句点，然后是 append。接着，将你想要添加到数组中的项目放到括号里。在这种情况下，你将"Badlands"放到括号中。

如果你想在数组的特定位置添加某些内容，请改用数组的 insert(_:at:)方法。这个方法接受两个参数：你要插入的项目和它应该放置在数组中的索引位置。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了你在参观大峡谷后去了化石林，并且你想更新你的 nationalParks 数组，以便按你访问的顺序显示公园。为了更新数组，你可以使用 insert(_:at:)方法，将化石林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，数组中索引为 3 或更高的所有项目都会向后移动，以为新项目腾出空间。这意味着原本在索引 3 处的项目现在位于索引 4，原本在索引 4 处的项目现在位于索引 5，依此类推。添加化石林后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用+和+=运算符将两个数组合并。假设你有两个数组，分别包含水果冰沙的原料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组合并，制作一杯美味的冰沙。

![](img/Image00123.jpg)

冰沙中原料的顺序与水果和液体的顺序相同。如果你用液体+水果的顺序来制作冰沙，那么液体会排在前面。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。为了增加更多美味，可以添加一些奶油，如下所示：

![](img/Image00124.jpg)

请注意，["鲜奶油"]是一个数组，尽管它只有一个项。当你使用+=向数组添加内容时，必须确保你只是在尝试添加另一个数组。如果你只写字符串"鲜奶油"而没有方括号，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中删除项

删除数组中的项有几种方法。我们首先来看一下数组的 removeLast()方法。正如你从名字中可能猜到的，removeLast()会删除数组中的最后一项。让我们用一个 shoppingList 数组来试试看：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法返回被删除的项，因此如果需要，你可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:)方法从特定的索引位置删除一项。假设你妈妈不让你买糖果，并将它从清单上删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项时，所有其他项都会挪动以腾出空间一样，如果你从数组中间删除一个项，剩余的项会向前挪动以填补那个空位。原本在索引 3 位置的"苹果"项现在位于索引 2 位置，原来的"糖果"项已经被移除。

你还可以使用 removeAll()方法删除数组中的所有项。试着在你的 playground 中输入这个代码：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的项会导致错误：

![](img/Image00130.jpg)

我们的数组中没有这么多项（实际上，现在它已经空了！），因此会抛出错误。如果我们在空数组上使用 removeLast()，也会报错，因为数组中没有任何项——根本没有最后一个索引！然而，removeAll()方法在空数组上使用时始终是安全的。

#### 替换数组中的项

要替换数组中的某一项，你可以将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三个项）的项替换为"独角兽"，因为神奇的动物也算是最喜欢的动物！在➋处，我们将索引 0（第一个项）的项替换为"胡须龙"。不，那不是一条真正的龙——它只是一只蜥蜴！

就像你在操作数组索引时一样，必须确保该索引位置的项确实存在于数组中，否则会出现索引越界的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬"来添加"标准贵宾犬"时会出现的错误。要向数组的末尾添加项，你应该使用 append(_:)方法或+=，我们在"向数组添加项"（第 70 页）中讲解过这个方法。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你已经知道了如何根据需要修改数组。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含关于数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值取决于数组是否为空，返回 true 或 false，而 count 属性会告诉你该数组中有多少个元素。

看看这两个属性是如何在以下的 if-else 语句中使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印“我没有兄弟姐妹。”。但如果数组中有元素，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个元素做一些操作。你可以使用 for-in 循环来完成！以下代码会在单独的一行上打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们的数组名 pizzaToppings。然后我们将希望在每个 topping 上运行的语句放在 for-in 循环的括号内。常量 topping ➊ 在我们循环遍历数组时，临时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个元素执行数学运算，从而加速计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是该数字与其本身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典很重要！

*字典*也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。由于没有索引，值并不会按照特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中多次使用相同的键。如果有两个相同的键，你要求计算机为你提供其中一个的值时，计算机就不知道该选择哪个！

让我们来看一下如何创建一个字典，并编写键来帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上`var`和字典的名称。然后像数组一样，在一对方括号中写上键及其对应的值。让我们创建一个字典来存储一些美国州的名字。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对之间由逗号分隔。

字典与数组不同，因为字典是*无序的*。因此，你在结果窗格 ➋ 中看到的状态顺序可能与输入状态 ➊ 的顺序不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，所有值也必须是相同类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度数（doubles）作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），所有的值必须是字符串。再次提醒，你会看到结果窗格中的数字顺序可能与在字典中编写分数的顺序完全不同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到任何需要的项。让我们来看一下如何操作！

#### 访问字典中的值

在字典中查找值的方式类似于在数组中访问值，不同之处在于你使用的是键，而不是索引，就像这样：`usStates["TX"]`。

然而，Swift 从字典中返回值的方式有一个很大的不同。当你访问数组中某个索引的值时，你直接得到值。当你用键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学到过可选项可能包含一个值，也可能为 nil。Swift 在查找字典中的项时返回可选项，是因为你使用的键可能在字典中不存在，在这种情况下无法访问到值。尝试访问一个不存在的值会给你一个大大的错误！为避免这个问题，Swift 返回可选项。这意味着你需要解包字典中获得的任何值，才能对其进行操作。

要解包一个可选值，首先你需要使用 `if-let` 语句检查它是否存在，就像我们在 第五章 中所做的那样。以下代码演示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 `if let` 来将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为字典中有这个州，所以会打印出 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 `usStates["FL"]` ➋ 来访问一个字典中没有的州。幸运的是，由于我们使用了 `if-let` 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典中添加项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能会出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设置为 `nil`。由于字典中的值是作为可选项返回的，因此你不需要担心 `nil` 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除键 "MA" 的值之后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，表示根本没有值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设定了 "apple" 的值，但后来我们决定 "raspberry" 是更合适的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为其新值 ➊。

你可能还记得，这与我们向字典中输入新值的方法是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果该键尚不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了你如何使用 `isEmpty` 属性检查字典是否为空，如果字典不为空，则 `count` 属性可以检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。由于每个项都有一个键和值，你可以通过两种不同的方式进行循环。这是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印它的内容。我们首先写关键字 for，接着是常量名称 fruit 作为字典键，然后是关键字 in、字典名称、一个句点和 keys。

在我们的 for-in 循环的大括号内部，我们可以访问键（我们称之为 fruit ➋）以及当我们强制解包其内容时，字典中该键的值（fruitBasket[fruit]! ➌）。该值就是水果的价格。

在这种情况下，强制解包值时使用感叹号是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们放在 for-in 循环内部的代码会针对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但这次我们使用一个常量来引用 values 属性中的每个值，称之为 price。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选值，因为它是作为水果篮字典中的一个值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按顺序编号！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你应该使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以通过它的名称从程序的几乎任何地方调用它。

修改数组的一种方式是向其中添加新项。添加新项有几种不同的方法，我们来逐一看看。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某物。通过 append(_:)，你可以向数组的末尾添加一个新项。假设你又去了一次旅行，参观了 Badlands，并且想将它添加到你的国家公园列表中。为此，可以将以下代码添加到你的 Playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写下数组的名称，后面跟一个句点，然后是 append。接着，在括号内放入你想要添加到数组中的项。在这种情况下，你把“Badlands”放入括号内。

如果你想在数组中的特定位置添加某项，可以使用数组的 insert(_:at:) 方法。此方法需要两个参数：你要插入的项以及它在数组中应插入的位置索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了在参观大峡谷之后去了石化森林，并且你想更新你的 nationalParks 数组，以便按你访问的顺序显示这些公园。为了更新数组，你可以使用 insert(_:at:) 方法将石化森林放入正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项时，数组中索引 3 或更高位置的所有项都会向后移动，为新项腾出空间。这意味着原本在索引 3 处的项现在在索引 4 处，原本在索引 4 处的项现在在索引 5 处，以此类推。加入“石化森林”后，nationalParks 现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 + 和 += 运算符将两个数组合并。假设你有两个数组，分别存储制作果昔所需的水果和液体配料：

![](img/Image00122.jpg)

现在你可以通过合并水果和液体数组来制作美味的果昔了。

![](img/Image00123.jpg)

果昔中的配料顺序与水果和液体的顺序相同。如果你是用液体 + 水果来制作果昔，那么液体会排在前面。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。为了增加美味度，可以如下添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个项目。当你使用 += 将内容附加到数组时，必须确保你仅尝试添加另一个数组。如果你只是写下字符串 "whipped cream" 而没有加上方括号，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中删除项目

有几种方法可以从数组中删除项目。让我们先看一下数组的 removeLast() 方法。正如你从它的名字中可以猜到的，removeLast() 会删除数组中的最后一个项目。让我们用一个购物清单数组来试试：

![](img/Image00126.jpg)

真不错！请注意，removeLast() 方法返回被删除的项目，因此如果你想，可以将其存储在新的常量或变量中。

你还可以通过使用 remove(at:) 方法从特定索引删除项目。假设你的妈妈不想让你买糖果，把它从列表中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项目时，所有项目都会移过来腾出空间一样，如果你从数组中间删除一个项目，剩下的项目会移回去填补那个空白位置。原本在索引 3 的“苹果”项目现在位于索引 2，原本是“糖果”的位置。

你还可以使用 removeAll() 从数组中删除所有项目。尝试在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的项目会报错：

![](img/Image00130.jpg)

我们的数组没有这么多项目（实际上现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为它里面什么都没有——根本没有最后一个索引！然而，removeAll() 即使在空数组上使用也总是安全的。

#### 替换数组中的项目

要替换数组中的项目，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊ 处，我们将索引 2（第三个项目）处的项目替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在➋ 处，我们将索引 0（第一个项目）处的项目替换为“胡须龙”。不，这可不是一条真正的龙——它只是一个蜥蜴！

就像每次操作数组索引时一样，你必须确保该索引位置存在项目，才能修改其值，否则你会遇到“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 添加“标准贵宾犬”时会发生的错误。要将项目添加到数组的末尾，你应该使用 append(_: ) 方法或 +=，正如我们在 “向数组添加项目” 中所讨论的，第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组了。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含数组某些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少个元素。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印“我没有兄弟姐妹”。但如果数组中有元素，则打印我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时，当你在处理数组时，可能想对数组中的每个元素做些操作。你可以使用 for-in 循环来实现！下面的代码将在 pizzaToppings 数组中打印每个配料，且每个配料在单独的一行中：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将要对每个配料执行的语句放在 for-in 循环的大括号中。常量 topping ➊在我们遍历数组时暂时代表每个配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以用它们对每个元素进行数学运算，这样就能进行快速的计算！下面的代码取一个数字数组，并计算每个数的平方（一个数的平方是该数与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一种值的集合，但不同于有序索引，每个值都有自己的*键*。由于没有索引，值没有特定的存储顺序。要访问字典中的值，你需要通过键查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键多次。如果有两个相同的键，你要求计算机给你其中一个键的值时，计算机就无法知道选择哪一个！

让我们来看看如何创建一个字典，并写出能够帮助你找到所有所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写 var 和字典的名称。然后将键和值放入一对方括号中，类似于数组。我们来创建一个字典，用于存储一些美国州的名称。每个州的键将是其两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，并且键/值对由逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板➋中看到的状态顺序可能与输入状态的顺序➊不同。甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一个分数集合，可以使用 double 类型作为键，string 类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 double 类型，所有的值必须是 string 类型。同样，你会发现结果面板中的数字顺序可能与在字典中写分数的顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何项。你可以通过键找到你需要的任何项。让我们看看如何操作！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只是你在方括号中使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在返回字典中的值时有很大的不同。当你在数组中访问一个值时，你只会得到该值。当你在字典中使用键访问一个值时，你会得到一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，在你查找字典中的项时，你使用的键可能在字典中不存在，在这种情况下就没有值可访问。试图访问一个不存在的值会给你一个很大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中得到的任何值，才能对其进行操作。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为在我们的字典中有这个州，所以打印了“I have Texas in my dictionary”这一行。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印了“I don't have that state in my dictionary”。

#### 向字典中添加项

要向字典中添加一个项，首先写出字典的名称，并将新项赋给你希望它在字典中拥有的键。让我们向我们的 usStates 字典中添加“Minnesota”：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能会出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项是非常简单的；你只需要将该项的值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键“MA”对应的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么你在字典中看不到"MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们给“red”分配了“apple”的值，但后来我们决定使用“raspberry”作为更合适的水果，因为有时候苹果是绿色或黄色的。要将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了你如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。假设你有一个待售的水果篮子。你可以使用这些属性帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还具有两个特殊属性：`keys`，它包含字典的所有键，和`values`，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来进行。以下是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来遍历 fruitBasket 并打印其内容。我们从编写关键字`for`开始，接着是一个常量名 fruit 作为字典的键，再加上关键字`in`，然后是字典的名称，接着是一个句点和`keys`。

在 for-in 循环的大括号内，我们可以访问到键，也就是我们称之为`fruit`➋，以及该键对应的值，当我们强制解包其内容时使用`fruitBasket[fruit]!` ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道我们使用的`fruit`键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句被打印三次。

我们还可以通过字典的`values`属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用每个值，我们将其称为`price`，它位于 values 属性中。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price`不是可选的，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！由于顺序并不保证，因此如果你再次运行相同的代码，可能会看到不同的顺序打印出来。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你可以使用数组，并通过索引查找每个项。如果你想按键存储项，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大基础构件。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写完函数之后，可以通过它的名称从程序中的几乎任何地方调用它。

首先，你可以使用数组的 append(_:) 方法。*Append* 意味着添加某物。使用 append(_:) 方法，你可以将一个新项目添加到数组的末尾。假设你又去了一次旅行，参观了 Badlands，并且想要将它加入到你的国家公园列表中。为此，你可以将以下代码添加到你的 playground 中：

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出你的数组名称，后跟一个句点，然后是 append。接着，将你想要添加到数组中的项目放在圆括号内。在这个例子中，你将 "Badlands" 放在了圆括号内。

如果你想要将某物添加到数组中的特定位置，可以改用数组的 insert(_:at:) 方法。这个方法有两个参数：你想要插入的项目和它应该在数组中的位置索引。（我们将在第七章 中更详细地讨论参数。）

假设你完全忘记了你在参观大峡谷之后去了化石森林，现在你想要更新你的 nationalParks 数组，使其按你访问的顺序显示各大公园。要更新你的数组，你可以使用 insert(_:at:) 方法，将化石森林插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项目时，数组中索引 3 或更高位置的所有项目都会被移到新位置，以腾出空间给新项目。这意味着原本位于索引 3 的项目现在位于索引 4，原本位于索引 4 的项目现在位于索引 5，以此类推。在你添加化石森林后，nationalParks 数组现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项目，还可以使用 + 和 += 操作符将两个数组合并。假设你有两个数组，其中包含制作水果果昔的配料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的果昔。

![](img/Image00123.jpg)

果昔中配料的顺序与水果和液体的顺序相同。如果你是用液体 + 水果来制作果昔，那么液体会排在前面。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了增加一些美味，可以按以下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个项目。当你使用 += 向数组追加内容时，必须确保你只是在尝试添加另一个数组。如果你只是写字符串 "whipped cream" 而没有将其放在方括号内，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中删除项。我们从数组的 removeLast() 方法开始看看。正如你从它的名字可以猜到的那样，removeLast() 会移除数组中的最后一项。让我们用 shoppingList 数组试一下：

![](img/Image00126.jpg)

很酷！请注意，removeLast() 方法会返回被移除的项，因此如果你想，你可以将它存储在一个新的常量或变量中。

你也可以使用 remove(at:) 方法从特定索引移除项。假设你的妈妈不希望你买糖果，并把它从列表中拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有的项会移过去腾出空间一样，如果你从数组中间删除项，其余的项会移回来填补这个空位。曾经在索引 3 处的“苹果”项现在位于索引 2 处，即“糖果”所在的位置。

你也可以使用 removeAll() 方法从数组中移除所有项。尝试将此输入到你的游乐场中：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以会抛出错误。如果我们对空数组使用 removeLast()，也会报错，因为数组里什么都没有——根本没有最后一个索引！然而，removeAll() 即使在空数组上使用也总是安全的。

#### 替换数组中的项

要替换数组中的项，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的项替换为“胡须龙”。不，这不是一条真正的龙——它只是一个蜥蜴！

就像任何时候你在处理数组索引时，你必须确保该索引位置的项在数组中存在，否则你会遇到“索引超出范围”错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 来添加“标准贵宾犬”时发生的错误。要将项添加到数组的末尾，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项” 第 70 页 中讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引处的值。*

现在你知道了如何根据需要更改数组。你可以添加项、删除项或替换项。接下来，我们将学习如何利用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含一些关于数组信息的变量或常量。有两个非常有用的属性，你可能会使用，分别是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则会告诉你数组中有多少个项。

看一下以下 if-else 语句是如何使用这两个属性的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印出 "我没有兄弟姐妹。" 如果数组中有内容，则会打印出我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项做点什么。你可以使用 for-in 循环来实现！以下代码将会在单独的一行中打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将每个配料需要执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时临时代表数组中的每个配料。我们本可以选择任何名字作为这个常量，但最好选一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以使用它们对每个项目执行数学运算，这样就能进行快速的计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方就是这个数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的 *键*。因为没有索引，所以值没有特定的存储顺序。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有重复的键。如果有两个相同的键，而你要求计算机给出其中一个的值，计算机就不知道该选择哪一个！

让我们看看如何创建一个字典，并写出帮助你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 `var` 和字典的名称。然后将键及其对应的值放在一对方括号内，类似于数组。我们来创建一个字典，存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，在结果面板中看到的州的顺序➋可能与输入州的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用 `Double` 类型作为键，`String` 类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 `Double` 类型，所有的值必须是 `String` 类型。同样，你会发现结果面板中数字的顺序可能与在字典中写入分数的顺序非常不同。这是正常的，因为你不需要知道顺序就能访问任何项。你可以通过键找到你需要的任何项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值与在数组中访问一个值类似，唯一不同的是，你在方括号内使用键而不是索引，例如：`usStates["TX"]`。

然而，Swift 从字典返回值的方式有很大不同。当你访问数组的某个索引处的值时，你只是简单地得到该值。当你通过键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 `nil`。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下没有值可供访问。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先使用 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出“I have Texas in my dictionary.”接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary.”。

#### 向字典中添加项

向字典中添加项时，首先写出字典的名称，并将新项赋给你想要在字典中使用的键。让我们把“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，新的字典项可能会出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将值设置为 nil。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除键“MA”对应的值之后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有任何值。这就是为什么你在字典中看不到"MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需将想要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为“red”赋了值“apple”，但后来我们决定使用“raspberry”作为更合适的水果，因为有时候苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"]设置为其新值➊。

你可能还记得，这和我们向字典中插入新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典中的所有键，以及 values，包含所有的值。当我们遍历字典时，会使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每个项目都有一个键和值，因此你可以通过两种不同的方式来进行遍历。以下是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 `for`，然后是字典键的常量名称 `fruit`，接着是关键字 `in`，字典名称，一个句点，最后是 `keys`。

在 `for-in` 循环的大括号内部，我们可以访问键（我们称之为 `fruit` ➋）以及当我们强制解包其内容时通过 `fruitBasket[fruit]!` ➌ 访问到的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 `fruit` 键肯定存在于字典中。

我们在 `for-in` 循环中写的任何代码都会在字典中的每个键上执行一次。所以你应该会看到打印语句显示三次。

我们也可以使用字典的 `values` 属性来进行遍历：

![Image](img/Image00150.jpg)

我们使用相同样式的 `for-in` 循环，但现在我们使用常量来引用每个值，我们称之为 `price`，这个值来自 `values` 属性。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它是直接作为 `fruitBasket` 字典中的值访问的。这意味着我们不需要解包它。你应该仍然会看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。那是因为字典中的项目不像数组中的项目那样按编号排序！由于顺序无法保证，因此如果你再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到了什么

在这一章中，你学习了如何将一系列项目存储在数组和字典中。要将项目存储在有序列表中，你将使用数组，并通过索引查找每个项目。如果你想按键来存储项目，则应该使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以使用它的名称从程序中的几乎任何地方调用它。

![](img/Image00120.jpg)

要使用 append(_:) 方法，首先写出数组的名字，后面跟一个句点，再加上 append。然后，把你想要添加的项放在括号内。在这种情况下，你将 "Badlands" 放入括号内。

如果你想在数组中的特定位置添加某个项，使用数组的 insert(_:at:) 方法。这个方法有两个参数：你想插入的项和它应该插入的位置索引。（我们将在第七章 中更详细地讨论参数。）

假设你完全忘记了你在参观大峡谷后去了石化森林，并且你想更新你的 nationalParks 数组，以便它按你参观的顺序显示公园。要更新数组，你可以使用 insert(_:at:) 方法将石化森林放在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入新项时，数组中索引为 3 或更高的所有项都会被推到后面，为新项腾出空间。这意味着原来在索引 3 的项现在会变成索引 4，原来在索引 4 的项现在会变成索引 5，以此类推。在添加石化森林后，nationalParks 数组现在变为 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项，还可以使用 + 和 += 运算符将两个数组合并。假设你有两组水果冰沙的配料数组：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中配料的顺序与水果和液体的顺序相同。如果你制作的是液体 + 水果的冰沙，那么液体应该先放。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。为了增加额外的美味，可以按如下方式加入一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个项。当你使用 += 向数组添加内容时，必须确保你添加的是另一个数组。如果你只是写 "whipped cream"（没有方括号），就会发生错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。让我们先来看一下数组的 removeLast() 方法。你可能从它的名字猜到，removeLast() 会移除数组中的最后一项。让我们用一个 shoppingList 数组来试试看：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的项，因此如果你想，可以将它存储在一个新的常量或变量中。

你还可以通过使用 remove(at:) 方法从特定索引移除某项。假设你的妈妈不想你买糖果，于是她把糖果从清单上移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个元素时，所有的元素会向后移动腾出空间一样，如果你从数组中间删除一个元素，剩下的元素会向前移动填补那个空位。原本在索引 3 处的"apples"现在被移到了索引 2 的位置，那里原本是"candy"。

你也可以使用 removeAll()来删除数组中的所有项。试着在你的 playground 中输入这个代码：

![](img/Image00129.jpg)

注意，尝试删除一个不存在的索引位置的元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（实际上现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有元素——根本没有最后一个索引！然而，removeAll()方法在任何时候使用都是安全的，即使是空数组。

#### 替换数组中的元素

要替换数组中的项，你需要将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三个元素）处的项替换为"Unicorn"，因为魔法动物也算是最喜欢的动物！在➋处，我们将索引 0（第一个元素）处的项替换为"Bearded dragon"。不，那不是真的龙——它只是一个蜥蜴！

就像每次操作数组索引时一样，你必须确保在修改值之前该索引位置的元素确实存在，否则你会得到一个索引超出范围的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle"来添加"Standard poodle"时出现的错误。要将一个元素添加到数组末尾，应该使用 append(_:)方法或+=，正如我们在"向数组添加元素"一节中讲到的，见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要试图替换数组中超出范围的索引的值。*

现在你知道了如何根据需要修改数组。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含数组相关信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性的值取决于数组是否为空，count 属性则告诉你数组中有多少个元素。

看看这两个属性在以下的 if-else 语句中是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空➊。如果为空，就打印"我没有兄弟姐妹"。但如果数组中有元素，则会打印出我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。"➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项目做一些操作。你可以使用 for-in 循环来做到这一点！以下代码会将 pizzaToppings 数组中的每个配料打印到单独的一行：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。接着，我们将希望为每个 topping 运行的语句放入 for-in 循环的大括号中。常量 topping ➊在我们循环遍历数组时临时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是一个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项目进行数学运算，这使得计算速度非常快！以下代码会计算一个数字数组中每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引的数组不同，每个值都有自己的*键*。由于没有索引，值不会以任何特定顺序存储。要访问字典中的值，你需要通过它们的键进行查找。

键必须是唯一的。在同一个字典中，不能有相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机将不知道选择哪一个！

让我们看看如何创建一个字典并写入键，这些键将帮助你找到你所需要的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后在一对方括号中写入键及其对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的状态顺序 ➋ 可能与你输入状态的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不一定需要与值的类型相匹配。例如，如果你想存储一组分数，你可以使用浮动类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是浮动类型（doubles），所有的值必须是字符串类型（strings）。再次强调，你会发现结果面板中的数字顺序可能与字典中你编写分数时的顺序不同。这是可以接受的，因为你不需要知道顺序就可以访问任何内容。你可以通过键来找到你需要的任何项目。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问一个值的方式，不同之处在于你在方括号中使用的是键，而不是索引，就像这样：usStates["TX"]。

然而，Swift 从字典返回值的方式有很大的不同。当你在数组中通过索引访问一个值时，你只是简单地得到了那个值。当你在字典中通过键访问一个值时，你得到的是一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回了可选值。这意味着，在你对字典中的任何值进行操作之前，你需要先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if-let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以下面的语句 "I have Texas in my dictionary." 会被打印出来。接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典添加项目

要向字典中添加项目，首先写出字典的名称，并将新项目分配给你想要它的键。让我们向 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会发现它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除一项也相当简单；你只需将该项的值设置为 nil。因为字典中的值以可选类型返回，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。这就是为什么你不会在我们的字典中看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项的方式相同。你只需将要替换的项设置为其他值。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为 "red" 设置了值 "apple"，但后来我们决定用 "raspberry" 替换它，因为有时苹果是绿色或黄色的。要用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性来帮助你跟踪所有的水果：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；以及 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮，并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来实现。下面是通过键遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，后跟常量名 fruit 作为字典的键，接着是关键字 in，字典名，一个句点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键，即我们称之为 fruit ➋，以及通过强制解包 fruitBasket[fruit]! ➌ 获取的该键对应的值。该值将是水果的价格。

在这种情况下，可以安全地强制解包值，因为我们知道我们使用的水果键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到 print 语句被打印三次。

我们还可以通过字典的 values 属性来循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用值属性中的每个值，我们称之为 price。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选项，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！由于顺序无法保证，如果你重新运行相同的代码，可能会看到不同的顺序打印出来。

### 你学到的知识

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组并通过索引查找每个项。如果你想通过键来存储项，你则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。写完函数后，你可以使用其名称从程序中的几乎任何地方调用它。

要使用 append(_:) 方法，首先写出数组的名称，然后跟上一个句点，再写上 append。然后，将你想添加到数组中的项放在括号内。在这种情况下，你将 "Badlands" 放入括号中。

如果你想在数组中的特定位置添加元素，可以改用数组的 insert(_:at:) 方法。这个方法接受两个参数：你想插入的项和它应该放在数组中的索引。（我们将在第七章中更详细地讨论参数。）

假设你完全忘记了在参观大峡谷后去了石化森林，并且你想更新你的 nationalParks 数组，使其按你参观的顺序显示这些公园。要更新数组，你可以使用 insert(_:at:) 方法将石化森林放置在正确的位置：

![](img/Image00121.jpg)

当你在索引 3 插入一个新项目时，所有原本在索引 3 或更高位置的项目都会向后移，以腾出位置给新项目。这意味着原本位于索引 3 的项目现在位于索引 4，原本位于索引 4 的项目现在位于索引 5，以此类推。添加“Petrified Forest”后，nationalParks 数组现在是["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项目，还可以使用+和+=运算符将两个数组合并。假设你有两个数组，分别包含制作水果冰沙的配料：

![](img/Image00122.jpg)

现在，你可以通过添加水果和液体数组来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的配料顺序与水果和液体数组的顺序相同。如果你是将液体+水果创建冰沙，那么液体会排在前面。

你可以使用+=运算符将一个数组添加到另一个数组的末尾。为了增加额外的美味，可以按照以下方法添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"]虽然只有一个项目，但它仍然是一个数组。当你使用+=将某些东西添加到数组时，必须确保你只是在添加另一个数组。如果你仅仅写上字符串“whipped cream”而不加方括号，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们从查看数组的 removeLast()方法开始。顾名思义，removeLast()会移除数组中的最后一个项目。我们来尝试一下使用 shoppingList 数组：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法返回被移除的项目，所以如果你需要，可以将它存储在一个新的常量或变量中。

你还可以通过使用 remove(at:)方法从特定索引移除一个项目。假设你的妈妈不想让你买糖果，并将其从清单中去掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有的项目会移到一边腾出空间一样，如果你从数组中间移除一个项目，其余的项目也会向后移，以填补这个空位。原本位于索引 3 的“apples”现在位于索引 2 的位置，原来“candy”所在的位置。

你还可以使用 removeAll()方法从数组中移除所有项目。试试在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引移除项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它已经是空的了！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为数组里没有任何内容——根本没有最后一个索引！但是，removeAll()方法在任何情况下都是安全的，即使是空数组。

#### 替换数组中的项目

要替换数组中的项目，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三项）的位置的项目替换为“独角兽”，因为魔法动物也算是喜欢的动物！在 ➋ 处，我们将索引为 0（第一项）的位置的项目替换为“须龙”。不，那不是一条真正的龙——它只是一个蜥蜴！

就像每次处理数组索引号一样，你必须确保数组中在该索引处存在项目，否则你会遇到“索引超出范围”错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 来添加“标准贵宾犬”时会发生的错误。要将项目添加到数组的末尾，应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项目” 中讲解的那样，在第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要修改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将了解如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法外，数组还有*属性*。数组的属性是包含有关数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型属性 isEmpty 和整数类型属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则会告诉你数组中有多少项。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

该 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印兄弟姐妹的数量：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时，当你处理数组时，可能希望对数组中的每一项执行某些操作。你可以使用 for-in 循环来实现！以下代码将在每一行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了编写针对 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，接着是关键字 in，最后是数组的名称 pizzaToppings。然后，我们将希望针对每个 topping 执行的语句放在 for-in 循环的大括号内。在循环过程中，常量 topping ➊ 临时表示数组中的每个比萨配料。我们本可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中查看此 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例中的 for-in 循环输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以利用它们对每个元素执行数学运算，这使得计算非常快速！以下代码会对一个数字数组中的每个数字进行平方运算（数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

一个*字典*也是一个值的集合，但不同于有序的索引，每个值都有自己的*键*。由于没有索引，值没有按照任何特定的顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有重复的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机就无法知道选择哪一个！

让我们看看如何创建一个字典并编写键值对，帮助你查找所需的所有信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写下 var 和字典的名称。然后在一对方括号中写下键和值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序*的。因此，你在结果窗格中看到的状态顺序➋可能与输入状态的顺序➊不同。甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，而字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次提醒你，结果窗格中的数字顺序可能与字典中写入的分数顺序有所不同。这个没有问题，因为你不需要知道顺序来访问任何内容。你可以通过键来查找任何需要的项目。让我们看看如何操作！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，区别在于你在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，有一个很大的区别，那就是 Swift 返回字典值的方式。当你在数组中访问某个索引的值时，你直接得到值。当你使用字典的键访问值时，你得到的是一个可选项。

在第五章中，你学到过可选项可能包含一个值，也可能是 nil 。Swift 返回可选项是因为你使用的键可能不存在于字典中，在这种情况下没有值可访问。尝试访问不存在的值会导致严重错误！为了避免这个问题，Swift 返回了可选项。这意味着在对从字典中获得的任何值进行操作之前，你需要先解包它。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 来将常量 loneStarState 设置为 usStates["TX"] ➊ 。由于我们在字典中有这个州，输出了 I have Texas in my dictionary.。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机无法找到该州时，程序不会崩溃。相反，输出了 I don't have that state in my dictionary.。

#### 向字典添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目分配给你想要它在字典中具有的键。我们来将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项目可能会出现在字典中的任何位置。

#### 从字典移除项目

从字典中移除一个项目非常简单；你只需将值设置为 nil 。因为字典中的值是以可选项的形式返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键 "MA" 对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。因此，你在字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需要将你想替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为 "red" 设置了 "apple" 的值，但后来我们决定使用 "raspberry" 更合适，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能记得，这与我们向字典中添加新值的方式相同。如果字典中已经存在该键，则该键的值将被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码演示了如何使用 `isEmpty` 属性来检查字典是否为空，如果不为空，则使用 `count` 属性检查字典中的项目数量。假设你有一个水果篮待售。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键，和 `values`，它包含所有值。当我们遍历字典时，会用到这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式进行遍历。这是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印它的内容。我们首先写下关键字 `for`，后跟字典键的常量名 `fruit`，然后是关键字 `in`，字典名，一个句点，最后是 `keys`。

在 `for-in` 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及通过 `fruitBasket[fruit]!` 强制解包该键的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们在 `for-in` 循环中编写的任何代码都会对字典中的每个键执行一次。因此，你应该看到打印语句会执行三次。

我们还可以使用字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但现在我们使用常量来引用 `values` 属性中的每个值，我们称其为 `price`。在遍历 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选值，因为它是直接作为字典 `fruitBasket` 中的值进行访问的。这意味着我们不需要解包它。你仍然应该看到打印语句会执行三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。那是因为字典中的项不像数组中的项那样按编号顺序排列！由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学会了如何将项目存储在数组和字典中。为了按顺序存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你则会使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。写好一个函数后，你可以在程序中的几乎任何地方使用它的名称来调用它。

如果你想在数组中的特定位置添加某个项，请改用数组的 insert(_:at:) 方法。这个方法需要两个参数：你要插入的项目和该项目应该插入的位置索引。（我们将在第七章 中详细讨论参数。）

假设你完全忘记了自己在游览大峡谷后去了石化森林，而你想更新你的 nationalParks 数组，以便按你访问它们的顺序显示这些公园。为了更新你的数组，你可以使用 insert(_:at:) 方法将石化森林放到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，所有原本位于索引 3 或更高位置的项目都会被向后移动以为新项目腾出空间。这意味着原本在索引 3 的项目现在位于索引 4，原本在索引 4 的项目现在位于索引 5，以此类推。添加了石化森林之后，nationalParks 现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

不仅可以向数组中添加新项目，你还可以使用 + 和 += 操作符将两个数组合并。假设你有两数组中的水果奶昔食材：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组相加来制作一杯美味的水果奶昔。

![](img/Image00123.jpg)

水果奶昔中的食材顺序与水果和液体数组的顺序相同。如果你是用液体 + 水果的顺序创建的奶昔，那么液体会排在前面。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了额外的美味，可以如下添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["鲜奶油"]是一个数组，尽管它只有一个项目。当你使用+=向数组添加项目时，必须确保你只是添加另一个数组。如果你只是写“鲜奶油”这个字符串，而没有加上方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。我们从查看数组的 removeLast()方法开始。正如你从方法名中猜到的那样，removeLast()会移除数组中的最后一个项目。让我们用一个 shoppingList 数组来试试看：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项目，因此你可以将其存储在一个新的常量或变量中，如果你想的话。

你也可以通过使用 remove(at:)方法从特定索引移除项目。假设你的妈妈不希望你买糖果并把它从列表中拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像当我们将一个项目添加到数组中间，所有项目都向前移动腾出空间一样，如果你从数组中间移除一个项目，剩余的项目将会向后移动以填补空缺。原来位于索引 3 的“苹果”现在位于索引 2 的位置，那里原来是“糖果”。

你也可以使用 removeAll()方法从数组中移除所有项目。试着在你的游乐场输入这个：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引移除项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为它什么都没有——根本没有最后一个索引！然而，removeAll()是始终安全使用的，即使在空数组上也是如此。

#### 替换数组中的项目

要替换数组中的一个项目，你只需将数组索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三个项目）的位置替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在➋处，我们将索引 0（第一个项目）的位置替换为“胡须龙”。不，这可不是一条真的龙——它只是一只蜥蜴！

就像任何时候你使用数组索引时一样，你必须确保在改变其值之前，该索引处的项目已经存在，否则会发生“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬"添加“标准贵宾犬”时会发生的错误。要将一个项目添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组中添加项目”中第 70 页（page 70）所介绍的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引处替换值。*

现在你知道如何根据需要更改数组了。你可以添加、删除或替换数组中的项。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含关于数组的某些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值是 true 或 false，取决于数组是否为空，而 count 属性则会告诉你数组中有多少项。

看看这两个属性是如何在以下 if-else 语句中使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空➊。如果为空，则打印“我没有兄弟姐妹。”如果数组中有元素，则打印我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。”➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每一项做某些操作。你可以使用 for-in 循环来实现！以下代码会将 pizzaToppings 数组中的每个配料打印在单独的行上：

![Image](img/Image00135.jpg)

为 pizzaToppings 数组编写 for-in 循环时，我们使用了关键字 for，后面跟着常量 topping，再是关键字 in，最后是数组名称 pizzaToppings。然后，我们将希望对每个配料执行的语句放入 for-in 循环的大括号中。常量 topping➊在我们循环数组时暂时代表数组中的每个披萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目执行数学运算，这样可以加快计算速度！以下代码获取一个数字数组并计算每个数字的平方（一个数字的平方是该数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一组值的集合，但与有序索引不同，每个值都有自己的*键*。因为没有索引，值不会以特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，当你要求计算机返回其中一个键的值时，计算机将不知道选择哪个！

让我们看看如何创建一个字典并写出键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后将键和值放在一对方括号内，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间由逗号分隔。

字典不同于数组，因为它们是*无序的*。因此，你看到的结果面板中州的顺序 ➋ 可能与输入这些州的顺序 ➊ 不同。甚至可能与书中打印的顺序也不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不需要与值的类型相匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数（doubles）作为键，使用字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），所有的值必须是字符串（strings）。再一次，你会看到，结果面板中数字的顺序可能与在字典中写入分数的顺序完全不同。这是没问题的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项。我们来看一下怎么做！

#### 访问字典中的值

在字典中查找值的方式类似于你在数组中访问值的方式，只不过你是在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值时有很大的不同。当你访问数组中的某个索引值时，你只是简单地得到那个值。而当你使用字典中的键来访问值时，你得到的是一个可选值（optional）。

在第五章中，你学习了可选值可能包含一个值，或者可能是 nil。Swift 返回可选值的原因是你查找的键可能在字典中不存在，这种情况下就没有值可以访问。尝试访问不存在的值会导致一个大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包（unwrap）从字典中获取的任何值，才能对其进行操作。

要展开一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在 第五章 中做的那样。以下代码向你展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出 I have Texas in my dictionary.。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 I don't have that state in my dictionary.

#### 向字典添加项目

要向字典中添加一个项目，首先写下字典的名称，并将新的项目赋值给你希望它在字典中对应的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除项目非常简单；你只需将该值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么在我们的字典中你没有看到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目一样。你只需将你想替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 更适合作为水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这就是我们将新值添加到字典中的方式。如果键已经存在于字典中，则会替换该键对应的值。如果该键尚不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。想象你有一个待售的水果篮。你可以使用这些属性帮助你跟踪所有内容：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中所有的键，和 values，包含字典中所有的值。我们在遍历字典时会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

您可以使用 `for-in` 循环遍历字典。因为每个项都有一个键和一个值，您可以通过两种不同的方式来实现这一点。以下是通过键遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写下关键字 `for`，然后是常量名称 `fruit`，它表示字典的键，再写上关键字 `in`，字典的名称，一个句点和 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键，我们称之为 `fruit` ➋，以及通过 `fruitBasket[fruit]!` 强制解包内容时该键对应的值 ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们放入 `for-in` 循环中的任何代码都会对字典中的每个键执行一次。因此，您应该看到打印语句显示三次。

我们也可以使用字典的 `values` 属性来遍历：

![图片](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但现在我们使用一个常量来引用 `values` 属性中的每个值，称之为 `price`。当遍历 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是 `price` 不是可选类型，因为它是直接作为字典 `fruitBasket` 中的值来访问的。这意味着我们不需要解包它。您应该仍然看到打印语句被打印三次。图 6-6 显示了两种循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组中的项那样按编号顺序排列！并且因为顺序无法保证，如果你再次运行相同的代码，打印的顺序可能会有所不同。

### 你学到了什么

在本章中，您学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，您应该使用数组，并通过索引查找每个项目。如果您想通过键存储项目，您应该使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中强大的构建模块。接下来我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

假设你完全忘记了在参观完大峡谷之后去过化石林，你想更新你的 nationalParks 数组，以便按你参观的顺序显示这些国家公园。要更新你的数组，你可以使用 insert(_:at:) 方法将化石林插入到正确的位置：

![](img/Image00121.jpg)

当你在索引 3 处插入一个新元素时，数组中索引 3 或更高位置的所有元素都会向后移动，为新元素腾出空间。这意味着，原本在索引 3 处的元素现在位于索引 4，原本在索引 4 处的元素现在位于索引 5，以此类推。添加化石林之后，nationalParks 数组现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新元素，还可以使用 + 和 += 运算符将两个数组合并在一起。假设你有两个数组，分别包含制作水果冰沙所需的食材：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组加入其中，制作出一杯美味的冰沙。

![](img/Image00123.jpg)

冰沙中的食材顺序与水果和液体中的顺序相同。如果你使用液体 + 水果 来制作冰沙，那么液体会排在前面。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。为增加一些美味的配料，像这样添加一些打发奶油：

![](img/Image00124.jpg)

请注意，尽管 ["whipped cream"] 只有一个元素，它仍然是一个数组。当你使用 += 将某个元素附加到数组时，必须确保你正在添加的是另一个数组。如果你只是写了字符串 "whipped cream"，而没有加上方括号，那么就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中删除元素

有几种方法可以从数组中删除元素。我们先来看一下数组的 removeLast() 方法。正如你从方法名中猜到的那样，removeLast() 会删除数组中的最后一个元素。让我们用一个购物清单数组来试试看：

![](img/Image00126.jpg)

很棒！注意，removeLast() 方法会返回被删除的元素，因此，如果你想的话，可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:) 方法从指定的索引删除一个元素。假设你妈妈不希望你买糖果，并将其从购物清单中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项时，所有项会移动以腾出空间一样，如果你从数组的中间删除一个项，剩下的项会移动回来填补这个空位。原本在索引 3 处的“苹果”项，现在在索引 2 处，原来“糖果”所在的位置。

你也可以使用 removeAll()方法移除数组中的所有项。尝试在你的游乐场中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在索引位置的项会引发错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），因此会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为数组里没有任何元素——根本没有最后一个索引！然而，removeAll()始终是安全的，即使在空数组上使用也不会出错。

#### 替换数组中的项

要替换数组中的项，你只需将该数组索引的值设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三个项）处的元素替换为“独角兽”，因为魔法动物也算作最爱的动物！在➋处，我们将索引 0（第一个项）处的元素替换为“胡须龙”。不，这不是一条真正的龙——它只是只蜥蜴！

就像任何时候你操作数组索引时一样，在修改数组项的值之前，必须确保该索引位置有元素，否则你将会遇到“索引超出范围”错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle"添加"标准贵宾犬"时会发生的错误。要将项添加到数组的末尾，应该使用 append(_:)方法或+=，正如我们在“向数组中添加项”一节中在第 70 页所讲解的。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组。你可以添加项、删除项或替换项。接下来，我们将了解如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的操作方法，数组还有*属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则告诉你数组中有多少个元素。

查看下面的 if-else 语句中这两个属性是如何被使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空➊。如果为空，则输出“我没有兄弟姐妹。”但如果数组中有内容，则输出我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。”➋。

#### 遍历数组

有时，当你在使用数组时，可能希望对数组中的每一项做些事情。你可以使用 for-in 循环来做到这一点！以下代码将在每行打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用关键字 for，后跟常量 topping，再加上关键字 in，最后是数组名称 pizzaToppings。然后，我们将希望对每个配料执行的语句放入 for-in 循环的大括号内。常量 topping ➊ 在我们循环时暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环是打印数组中每个值的好方法。如果你正在处理数字，甚至可以使用它们对每个项目执行数学运算，这样可以进行快速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与其自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但不同于有序的索引，每个值都有自己的*键*。由于没有索引，值不会按照任何特定的顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，而你要求计算机返回其中一个值，计算机将无法决定选择哪一个！

让我们看看如何创建一个字典，并编写键来帮助你找到所有需要的信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写 var 和字典的名称。然后，在一对方括号内写键和值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板 ➋ 中看到的状态顺序可能与输入状态 ➊ 时的顺序不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与写入字典时分数的顺序完全不同。这是没问题的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项目。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只不过你使用的是方括号内的键而不是索引，像这样：usStates["TX"]。

然而，Swift 在返回字典中的值时有很大不同。当你在数组的索引处访问一个值时，你只是简单地获取这个值。当你通过字典中的键访问一个值时，你会得到一个可选值。

在第五章 中，你学过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下没有值可供访问。试图访问一个不存在的值会给你一个很大的错误！为避免这个问题，Swift 返回可选值。这意味着你需要在对字典取出的任何值进行操作之前先解包它。

要解包一个可选值，首先你需要通过 if-let 语句检查它是否存在，就像我们在第五章 中做的那样。以下代码展示了如何从字典中取出一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 来将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典添加项目

要向字典添加项目，首先写下字典的名称，并将新项目分配给你希望它在字典中对应的键。让我们向我们的 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil。由于字典中的值是以可选项的形式返回的，因此你不需要担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。这就是为什么你不会在字典中看到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将想替换的项目设置为其他值。例如，你创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为"red"提供了"apple"这个值，但后来我们决定"raspberry"更适合作为水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]的值设置为新的值 ➊。

你可能记得，这和我们向字典中插入新值的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性会检查字典中有多少项。想象你有一个出售的水果篮。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；以及 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮，并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和一个值，你可以通过两种不同的方式进行遍历。这是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是字典键的常量名称 fruit，关键字 in，字典名称，一个句点，和 keys。

在 for-in 循环的大括号内，我们可以访问键 fruit ➋，以及通过强制解包其内容 fruitBasket[fruit]! ➌ 获取该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定存在于字典中。

我们放在 `for-in` 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 `values` 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 `for-in` 循环方式，但现在使用常量来引用 `values` 属性中的每个值，这个常量我们称之为 `price`。在循环 `values` 时，我们无法访问循环中的键。

另一个需要注意的区别是，价格不是可选的，因为它是直接作为值在 `fruitBasket` 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项目不像数组中的项目那样有编号顺序！而且因为顺序无法保证，所以如果你再次运行相同的代码，你可能会看到不同的顺序被打印出来。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，你应该使用数组，并通过索引查找每个项目。如果你想按键来存储项目，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中一个强大的构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的工作。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![](img/Image00121.jpg)

当你在索引 3 处插入一个新项目时，数组中索引为 3 或更高的所有项目都会被挪动，腾出空间来放置新项目。这意味着原来位于索引 3 的项目现在位于索引 4，原来位于索引 4 的项目现在位于索引 5，依此类推。添加了“Petrified Forest”后，`nationalParks` 数组现在变为 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组添加新项目，还可以使用 `+` 和 `+=` 运算符将两个数组合并。假设你有两个数组，分别包含制作水果冰沙的配料：

![](img/Image00122.jpg)

现在你可以通过添加水果和液体数组来制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的配料顺序与水果和液体中的顺序相同。如果你先将液体加到水果后面制作冰沙，那么液体会排在前面。

你使用 `+=` 运算符将一个数组添加到另一个数组的末尾。为了增加一些美味感，可以按如下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只包含一个元素。当你使用 += 向数组追加元素时，必须确保你只是试图添加另一个数组。如果你只写字符串 "whipped cream" 而没有加上方括号，就会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

有几种方法可以从数组中移除元素。我们先来看一下数组的 removeLast() 方法。顾名思义，removeLast() 会移除数组中的最后一个元素。我们来用一个 shoppingList 数组试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法返回被移除的元素，因此如果你想，你可以将其存储在一个新的常量或变量中。

你也可以使用 remove(at:) 方法从特定索引移除元素。假设你妈妈不想让你买糖果，把它从列表上拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加元素时，所有其他元素都会挪动以腾出空间一样，如果你从数组中间移除一个元素，其余的元素会挪回去填补空缺。原本在索引 3 的 "apples" 现在在索引 2，原来 "candy" 所在的位置。

你也可以使用 removeAll() 移除数组中的所有元素。试着将这个输入到你的 Playground 中：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引处的元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（实际上，现在它是空的！），所以会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为它什么也没有——根本没有最后一个索引！不过，removeAll() 即使在空数组上使用也是安全的。

#### 替换数组中的元素

要替换数组中的元素，可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊，我们用 "Unicorn" 替换了索引 2（第三个元素）的位置，因为魔法动物也算作最爱的动物！在 ➋，我们用 "Bearded dragon" 替换了索引 0（第一个元素）的位置。不，这不是一条真正的龙——它只是一只蜥蜴！

就像任何时候你处理数组索引时一样，必须确保数组中在该索引处存在元素，然后才能更改其值，否则会出现索引超出范围的错误。

图 6-3 展示了如果你试图通过 favoriteAnimals[3] = "Standard poodle" 来添加 "Standard poodle" 时发生的错误。要向数组的末尾添加元素，你应该使用 append(_:) 方法或 +=，我们在 “向数组添加元素” 中已经讲解过了，见 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引范围的值。*

现在你知道如何根据需要修改数组了。你可以添加、删除或替换数组中的项。接下来，我们将学习如何使用数组的属性来获取更多关于数组的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还拥有*属性*。数组的属性是包含数组相关信息的变量或常量。有两个非常有用的属性，你可能会用到，它们分别是布尔类型的 isEmpty 属性和整型的 count 属性。

isEmpty 属性的值为真或假，取决于数组是否为空，而 count 属性则告诉你数组中有多少项。

看一下以下 if-else 语句中这两个属性的使用方法：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，就会打印“我没有兄弟姐妹。”如果数组中有内容，则打印我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时，当你在处理数组时，可能需要对数组中的每一项做一些操作。你可以使用 for-in 循环来做到这一点！以下代码会把 pizzaToppings 数组中的每个配料分别打印到一行：

![图片](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。然后，我们将希望对每个配料执行的语句放入 for-in 循环的大括号内。常量 topping ➊在我们循环遍历数组时，暂时代表数组中的每个披萨配料。我们本可以选择任何名字来作为这个常量，但最好选一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以用它们对每一项进行数学运算，这样就能进行快速的计算！以下代码接收一个数字数组并计算每个数字的平方（数字的平方是数字与它自己相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值并没有按照特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。您不能在同一个字典中有重复的键。如果存在两个相同的键，而您要求计算机给出其中一个的值，计算机将不知道选择哪个！

让我们看看如何创建一个字典，并编写键，帮助您找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 `var` 和字典的名称。然后，将键和值放入一对方括号中，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如您所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是 *无序的*。因此，您在结果面板 ➋ 中看到的州的顺序可能与您输入州的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，您可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果您想存储一个分数集合，您可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，您会看到结果面板中的数字顺序可能与您在字典中写入分数的顺序相差甚远。这没问题，因为您不需要知道顺序来访问任何内容。您可以通过键找到任何所需的项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值的方式类似于在数组中查找值，不同的是，您使用键而不是索引，在方括号内，例如：usStates["TX"]。

然而，Swift 返回字典值的方式存在一个很大的区别。当您访问数组中的某个索引时，您只会获得该值。而当您使用字典中的键访问一个值时，您会得到一个可选项。

在第五章中，您学到了可选项可能包含一个值，也可能是 nil。Swift 在您查找字典中的项时返回可选项，是因为您使用的键可能不存在于字典中，在这种情况下无法访问值。尝试访问不存在的值将导致一个错误！为避免这个问题，Swift 返回可选项。这意味着您需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先你需要通过 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 `if let` 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 `if-let` 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项目

要向字典添加一个项目，首先写出字典的名称，然后将新项目赋值给你希望它拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项目可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你可以通过将值设置为 nil 来实现。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，它表示没有任何值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需要将你想替换的项目设置为其他值。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

最初我们为 "red" 设置了 "apple" 作为值，但后来我们决定 "raspberry" 更适合作为水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，则该键对应的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性来检查字典中有多少个项目。假设你有一篮水果要出售。你可以使用这些属性来帮助你追踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典中的所有键，以及`values`，它包含字典中的所有值。我们将在循环遍历字典时使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮，并打印每种水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。因为每个项目都有一个键和值，所以你可以有两种不同的方式来做这件事。这是使用字典的键来进行循环的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性 ➊ 来循环遍历`fruitBasket`并打印其内容。我们首先编写关键字`for`，接着是常量名称`fruit`表示字典的键，关键字`in`，字典名称，句点和`keys`。

在我们的`for-in`循环的花括号内，我们可以访问到键，我们称之为`fruit` ➋，以及当我们强制解包`fruitBasket[fruit]!` ➌时，该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的`fruit`键肯定在字典中。

我们在`for-in`循环中放入的任何代码都会对字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以使用字典的`values`属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同风格的`for-in`循环，但这次我们使用常量来引用`values`属性中的每个值，我们称之为`price`。在遍历值时，我们无法从循环内部访问到键。

另一个需要注意的区别是，`price`不是可选类型，因为它直接作为`fruitBasket`字典中的值访问。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的元素那样是按编号顺序排列的！由于顺序不能保证，如果你重新运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。为了将项目存储在有序的列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典的使用方法是几乎所有编程语言中的一个强大构建模块。接下来我们将学习函数，这也是一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。编写完函数后，你可以通过它的名称从程序的任何地方调用它。

当你在索引 3 处插入一个新项时，原本在索引 3 或更高位置的所有项都会向后移动，为新项腾出空间。这意味着原本在索引 3 的项现在位于索引 4，原本在索引 4 的项现在位于索引 5，以此类推。在你添加了“Petrified Forest”之后，nationalParks 现在是 ["Acadia", "Zion", "Grand Canyon", "Petrified Forest", "Badlands"]。

#### 合并数组

你不仅可以向数组中添加新项，还可以使用 + 和 += 操作符将两个数组连接起来。假设你有两组冰沙的配料，分别存储在两个数组中：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组结合起来，制作美味的冰沙。

![](img/Image00123.jpg)

冰沙中的配料顺序与水果和液体数组中的顺序相同。如果你用 liquids + fruits 创建冰沙，那么液体会先出现。

你可以使用 += 操作符将一个数组添加到另一个数组的末尾。为了增加额外的美味，加入一些奶油：

![](img/Image00124.jpg)

注意，尽管 ["whipped cream"] 只是一个包含单个元素的数组，它依然是一个数组。当你使用 += 操作符向数组添加内容时，必须确保你只是在添加另一个数组。如果你直接写出字符串 "whipped cream" 而不加上方括号，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有多种方法可以从数组中移除项。让我们首先看看数组的 removeLast() 方法。正如你从名称中猜到的，removeLast() 会移除数组中的最后一项。我们来用一个 shoppingList 数组试一下：

![](img/Image00126.jpg)

真棒！注意，removeLast() 方法会返回被移除的项，因此如果需要，你可以将其存储在一个新的常量或变量中。

你也可以使用 remove(at:) 方法从特定的索引移除一项。假设你妈妈不想让你买糖果，于是将它从购物清单中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项时，所有的项都会向后移动一样，如果你从数组中间移除一项，其余的项会向前移动，填补空缺。原本在索引 3 的“apples”项现在位于索引 2，那里原本是“candy”。

你还可以使用 removeAll() 移除数组中的所有项。试试在你的 playground 中输入这个：

![](img/Image00129.jpg)

注意，尝试移除一个不存在的索引项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们对空数组使用 removeLast()，也会报错，因为它里面什么也没有——根本没有最后一个索引！不过，removeAll() 始终是安全的，即使是对空数组使用。

#### 替换数组中的项

要替换数组中的项，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们用 "Unicorn" 替换了索引 2（第三项）处的元素，因为神奇动物也算是最爱的动物！在 ➋ 处，我们用 "Bearded dragon" 替换了索引 0（第一项）处的元素。不，这不是一条真正的龙，它只是一个蜥蜴！

像处理数组索引号时一样，在你改变数组某个索引的值之前，必须确保该索引处的项是存在的，否则你会遇到 “索引超出范围” 错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加 "Standard poodle" 时发生的错误。要向数组的末尾添加项，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项”中所讨论的，见 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道如何根据需要修改数组了。你可以添加项、删除项或替换项。接下来，我们将探讨如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数外，数组还有 *属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性为 true 或 false，取决于数组是否为空，count 属性将告诉你数组中有多少项。

看看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则会打印 "我没有兄弟姐妹。" 如果数组中有内容，则会打印我们有多少兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项做一些操作。你可以使用 for-in 循环来实现这一点！下面的代码会在每一行上打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了为 `pizzaToppings` 数组写一个 for-in 循环，我们使用了关键字 for，接着是常量 `topping`，然后是关键字 in，最后是我们数组的名称 `pizzaToppings`。然后我们将想要对每个 topping 执行的语句放在 for-in 循环的花括号内。常量 `topping` ➊ 在我们遍历数组时，暂时表示数组中的每个披萨配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是一个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项目执行数学运算，这样可以快速进行计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与其本身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典非常重要！

一个 *字典* 也是一个值的集合，但不同于数组，它没有顺序索引，而是每个值都有自己的 *键*。由于没有索引，值的存储没有特定顺序。要访问字典中的值，你需要通过键来查找它们。

一个键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，当你要求计算机返回其中一个的值时，计算机就无法知道该选择哪个！

让我们来看一下如何创建一个字典，并编写键值对，帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 `var` 和字典的名称。然后在一对方括号内写入键和值，类似于数组的格式。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于，字典是 *无序的*。因此，你在结果面板中看到的州的顺序 ➋ 可能与输入的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 `var` 来创建一个可变字典，或使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不必与值类型匹配。例如，如果你想存储一组分数，可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到，结果面板中数字的顺序可能与您在字典中写分数的顺序非常不同。这没关系，因为你不需要知道顺序来访问任何内容。你可以通过键找到任何你需要的项。我们来看看如何做到这一点！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，除了你使用的是方括号内的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典中的值有一个很大的不同。当你访问数组中的一个索引值时，你只会得到值。而当你用键访问字典中的值时，你会得到一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。尝试访问一个不存在的值会给你一个大的错误！为了避免这个问题，Swift 返回可选值。这意味着在你可以对字典中的值进行任何操作之前，你需要解包它。

要解包一个可选值，首先检查它是否存在，使用 if-let 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以会打印出“I have Texas in my dictionary.”。接下来，我们尝试通过使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“I don't have that state in my dictionary.”。

#### 向字典添加项

要向字典添加项目，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。我们来向我们的 usStates 字典中添加“Minnesota”：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能会出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项相当简单；你只需将值设置为`nil`。因为字典中的值作为可选项返回，所以你不必担心`nil`会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"对应的值之后，`usStates`被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil`是特殊的，表示没有值。这就是为什么你在字典中看不到"MA": `nil`的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需要将想要替换的项设置为其他值。比如你创建一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们将"red"的值设为"apple"，但后来我们决定"raspberry"是一个更合适的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将`colorFruits["red"]`设置为其新值 ➊。

你可能还记得，这和我们向字典中添加新值的方式是一样的。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有一个`isEmpty`属性和一个`count`属性。例如，下面的代码展示了如何使用`isEmpty`属性来检查字典是否为空，如果不为空，`count`属性则会告诉你字典中有多少项。想象你有一个水果篮在出售。你可以使用这些属性帮助你跟踪所有物品：

![图片](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键，以及`values`，它包含字典的所有值。当我们遍历字典时，我们会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。由于每个项都有一个键和值，因此你可以用两种不同的方式来遍历字典。以下是使用字典的键来遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性 ➊ 来遍历`fruitBasket`并打印其内容。我们从编写关键字`for`开始，后面跟上一个常量名称`fruit`作为字典键，关键字`in`，字典名称，句点，最后是`keys`。

在`for-in`循环的花括号内，我们可以访问键（我们称之为`fruit` ➋）以及该键的值，当我们通过`fruitBasket[fruit]!`强制解包其内容时 ➌。该值将是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的水果键一定在字典中。

我们放在 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的值属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环方式，但现在我们使用常量来引用每个值，我们将其称为 `price`，该常量来自字典的值属性。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选项，因为它是直接作为果篮字典中的值来访问的。这意味着我们不需要解包它。你仍然会看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键来存储项目，则可以使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。写完函数后，你可以在程序中的几乎任何地方通过其名称调用它。

#### 合并数组

你不仅可以向数组添加新项，还可以使用 `+` 和 `+=` 操作符将两个数组合并。假设你有两个数组，分别包含制作水果果昔的配料：

![](img/Image00122.jpg)

现在你可以通过添加水果和液体数组来制作美味的果昔。

![](img/Image00123.jpg)

果昔中配料的顺序与水果和液体的顺序相同。如果你是先加入液体再加入水果来制作果昔，那么液体会先加入。

你可以使用 `+=` 操作符将一个数组添加到你数组的末尾。为了增加一些美味，按如下方式添加一些奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，尽管它只有一个元素。当你使用 `+=` 向数组追加内容时，你必须确保只是在添加另一个数组。如果你只是写字符串 "whipped cream" 而没有方括号，系统会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项。让我们先来看一下数组的 removeLast() 方法。正如你从它的名字中猜到的那样，removeLast() 会删除数组中的最后一个项。我们来试试它在一个 shoppingList 数组上的效果：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的项，因此你可以将其存储在一个新的常量或变量中，如果你想的话。

你也可以通过使用 remove(at:) 方法从特定索引处删除项。假设你妈妈不希望你买糖果，于是将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加了一个项，并且所有项都挪动了位置以腾出空间一样，如果你从数组中间移除一个项，其他项将会回填以填补这个空缺。原来在索引为 3 的“苹果”项现在变成了索引为 2 的位置，原来“糖果”在那个位置。

你还可以使用 removeAll() 删除数组中的所有项。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

注意，试图删除一个不存在的索引位置的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为里面没有任何元素——根本没有最后一个索引！然而，removeAll() 方法总是安全的，即使是在空数组上使用。

#### 在数组中替换项

要替换数组中的一项，你只需将数组的索引位置设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项）的位置的元素替换为“独角兽”，因为神奇的动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项）的位置的元素替换为“有鬃蜥蜴”。不，这不是一条真正的龙——它只是一只蜥蜴！

就像你在处理数组索引时一样，在更改值之前，你必须确保该索引位置的项在数组中存在，否则会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬" 添加一个项时发生的错误。要将项添加到数组的末尾，应该使用 append(_:) 方法或 += ，正如我们在“向数组中添加项”中第 70 页 所介绍的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要试图在超出现有数组索引的地方替换一个值。*

现在你知道了如何根据需要修改数组。你可以添加项、移除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 `append(_:)` 和 `removeLast()` 这样的函数，数组还有 *属性*。数组的属性是包含有关数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的 `isEmpty` 和整数类型的 `count`。

`isEmpty` 属性的值为真或假，取决于数组是否为空，而 `count` 属性会告诉你数组中有多少项。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 `mySiblings` 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时候，当你处理数组时，可能想对数组中的每个项做一些操作。你可以使用 for-in 循环来做到这一点！以下代码将在每一行打印出 `pizzaToppings` 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 `pizzaToppings` 数组编写一个 for-in 循环，我们使用了关键字 `for`，后跟常量 `topping`，然后是关键字 `in`，最后是数组的名称 `pizzaToppings`。接着，我们将要在每个 `topping` 上运行的语句放在 for-in 循环的大括号中。常量 `topping` ➊ 在我们遍历数组时临时代表数组中的每个披萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项执行数学运算，这样就能快速进行计算！以下代码取一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 `myNumbers` 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但不同于有序索引，每个值都有自己的 *键*。由于没有索引，值的存储顺序是无序的。要访问字典中的值，可以通过键来查找。

键必须是唯一的。你不能在同一个字典中有重复的键。如果有两个相同的键，并且你要求计算机给你其中一个的值，计算机就不知道该选择哪个！

让我们来看看如何创建字典，并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号中写入键及其对应的值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果窗格中看到的州的顺序➋可能与你输入州的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次强调，你会看到结果窗格中的数字顺序可能与字典中写入的分数顺序完全不同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何需要的项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只不过你在方括号内使用的是键，而不是索引，如：usStates["TX"]。

然而，Swift 在从字典中返回值的方式上有很大的不同。当你访问数组中某个索引的值时，你只是简单地得到该值。而当你使用字典中的键访问值时，你会得到一个可选值。

在第五章中，你学过可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是在字典中查找项时，你使用的键可能在字典中不存在，这种情况下就没有值可供访问。尝试访问不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选值。这意味着你需要在使用从字典中获取的任何值之前先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用`if let`将常量 loneStarState 设置为 usStates["TX"] ➊ 。由于字典中包含此州，输出将为“我在我的字典中有 Texas。”接下来，我们尝试通过键 usStates["FL"] ➋ 访问一个字典中没有的州。幸运的是，因为我们使用了`if-let`语句，当计算机无法找到此州时，程序不会崩溃。相反，输出将为“我在我的字典中没有这个州。”

#### 向字典添加项

要向字典中添加一项，首先写出字典的名称，并将新项分配给字典中你想要它的键。让我们将"Minneosta"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"] 。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项目非常简单；你只需要将值设置为 nil。因为字典中的值是以可选项的形式返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，nil 是特殊的，表示完全没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项一样。你只需将要替换的项设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们将"red"的值设置为"apple"，但后来我们决定“raspberry”是更好的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为新的值 ➊ 。

你可能还记得，这是我们向字典中输入新值的方式。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个`isEmpty`属性和一个`count`属性。例如，以下代码演示了如何使用`isEmpty`属性检查字典是否为空，如果不为空，`count`属性则检查字典中有多少项。假设你有一个售卖水果的篮子。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典中的所有键；和`values`，它包含字典中的所有值。当我们遍历字典时，会使用这两个属性。

让我们写一些代码，通过循环遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种不同的方式来遍历字典。这是使用键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印它的内容。我们首先写下关键字 for，后面跟着常量名 fruit，表示字典中的键，再加上关键字 in，字典名称，句点，然后是 keys。

在我们 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包其内容（使用 fruitBasket[fruit]! ➌）时对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道正在使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。因此，你应该看到打印语句被执行三次。

我们也可以使用字典的 values 属性来遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用每个值，我们称之为 price，来自 values 属性。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选值，因为它是直接作为水果篮子字典中的一个值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被执行了三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的项目那样按顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你应使用数组，并通过其索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中的一个强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数后，可以通过其名称在程序中的几乎任何地方调用它。

你不仅可以向数组中添加新项，还可以使用 + 和 += 运算符将两个数组连接在一起。假设你有两个数组，分别包含做水果冰沙所需的原料：

![](img/Image00122.jpg)

现在，你可以通过将水果和液体数组相加来制作美味的冰沙。

![](img/Image00123.jpg)

在 smoothie（冰沙）中，成分的顺序与水果和液体中的顺序相同。如果你先加液体再加水果，那么液体会排在前面。

使用+=操作符将一个数组添加到你的数组的末尾。为了增加美味感，可以按如下方式添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"]虽然只有一个元素，但它仍然是一个数组。当你使用+=操作符将元素添加到数组时，必须确保你只是尝试添加另一个数组。如果你写的是“whipped cream”而没有使用方括号，程序会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。让我们从查看数组的 removeLast()方法开始。如您所料，removeLast()会移除数组中的最后一个项目。我们来用一个 shoppingList 数组试试看：

![](img/Image00126.jpg)

很棒！注意，removeLast()方法会返回被移除的项目，因此如果需要，您可以将其存储在新的常量或变量中。

你还可以使用 remove(at:)方法从特定索引处移除项目。假设你妈妈不想让你买糖果，并且从购物清单上把它移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，其他项目会移到空余的位置一样，如果你从数组中间移除一个项目，剩下的项目也会向后移动，填补那个空缺的位置。原本位于索引 3 的“苹果”项目，现在移动到索引 2 的位置，原来“糖果”所在的位置。

您也可以使用 removeAll()从数组中移除所有项目。尝试将此输入到您的游乐场（Playground）中：

![](img/Image00129.jpg)

请注意，如果尝试移除一个不存在的索引位置上的项目，程序会报错：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以这会抛出一个错误。如果我们对空数组使用 removeLast()，也会报错，因为它里面没有任何元素——根本没有最后一个索引！不过，removeAll()方法即使在空数组上使用也是安全的。

#### 替换数组中的项目

要替换数组中的项目，您需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的元素替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的元素替换为“胡须蜥蜴”。不，这不是一条真正的龙——它只是一只蜥蜴！

就像处理数组索引时一样，在更改某个值之前，您必须确保该索引位置上有项目，否则会出现“索引超出范围”错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle"添加“标准贵宾犬”时发生的错误。要将项添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项”中讲解的那样，见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引处的值。*

现在你知道如何根据需要更改数组了。你可以添加项目，移除项目或替换项目。接下来，我们将了解如何使用数组的属性来进一步了解它们。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的常用方法，数组还具有*属性*。数组的属性是包含关于数组某些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空来返回 true 或 false，而 count 属性会告诉你数组中有多少项。

看看下面的 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，就会打印出“我没有兄弟姐妹。”如果数组中有内容，则会打印出我们拥有的兄弟姐妹的数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时候，当你在处理数组时，你可能想对数组中的每个项目做点什么。你可以使用 for-in 循环来实现这一点！以下代码会在每一行打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。然后，我们将希望在每个配料上执行的语句放入 for-in 循环的大括号内。常量 topping ➊在我们遍历数组时临时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环遍历数组非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项目执行数学运算，这样可以快速进行计算！以下代码会对数字数组中的每个元素计算平方（一个数的平方是这个数与它自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序的索引不同，每个值都有自己的*键*。由于没有索引，值不会以任何特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

一个键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机就不知道该选择哪一个！

让我们看看如何创建一个字典，并编写键来帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后像数组一样，在一对方括号内写入键和值。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间都有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于，它们是*无序的*。因此，你看到的结果面板中州的顺序➋可能与输入州的顺序➊不同。甚至可能与书中打印的顺序不同！

与数组类似，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相匹配。例如，如果你想存储一个分数的集合，你可以使用浮动类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是浮动类型（doubles），所有的值必须是字符串（strings）。再说一次，你会看到结果面板中的数字顺序与在字典中写入分数的顺序可能会完全不同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键来查找所需的任何项目。让我们来看看如何操作！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，只是你需要在方括号内使用一个键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值的方式上有很大的不同。当你访问数组中的一个索引值时，你直接得到那个值。当你使用字典的键来访问值时，你会得到一个可选值（optional）。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，这种情况下就没有值可以访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你在使用字典获取到的任何值之前，都需要解包它。

要解包一个可选值，首先你需要检查它是否存在，可以使用 if-let 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试通过键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加一个项，首先写下字典的名称，并将新项赋值给你希望它在字典中具有的键。我们来往我们的 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需要将值设置为 nil。由于字典中的值是以可选项的形式返回的，因此你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么我们在字典中看不到 "MA": nil。

#### 在字典中替换项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需要将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple"，但是后来我们决定 "raspberry" 更适合作为水果，因为有时候苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得这就是我们向字典中添加新值的方式。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则可以检查你有多少项。假设你有一个水果篮子在出售。你可以使用这些属性帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以通过两种不同的方式来遍历字典。以下是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后跟字典键的常量名 fruit，再加上关键字 in，字典名，句点和 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋），以及通过 fruitBasket[fruit]! ➌ 强制解包该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环中放入的任何代码都会为字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以通过字典的值属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为水果篮子字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印了三次。图 6-6 展示了两次循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的有所不同。因为字典中的项不像数组中的项那样是按编号顺序排列的！而且由于顺序不可保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何将项存储在数组和字典中。要在有序列表中存储项，你可以使用数组，并通过索引查找每个项。如果你想按键存储项，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![](img/Image00122.jpg)

现在，你可以通过将 fruits 和 liquids 数组相加来制作一杯美味的奶昔。

![](img/Image00123.jpg)

奶昔中的配料顺序与 fruits 和 liquids 中的顺序相同。如果你是通过 liquids + fruits 来创建奶昔，那么液体会排在前面。

你可以使用+=操作符将一个数组添加到你的数组末尾。为了让它更美味，可以添加一些鲜奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只有一项。当你使用+=将某个项添加到数组时，必须确保你只在添加另一个数组。如果你只是写了字符串“whipped cream”，没有用方括号括起来，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中删除项

删除数组项有几种方法。让我们先看一下数组的 removeLast()方法。正如你从它的名字中可能猜到的那样，removeLast()会删除数组中的最后一项。让我们用一个 shoppingList 数组来试一下：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回已删除的项，因此如果需要，你可以将其存储在新的常量或变量中。

你还可以通过使用 remove(at:)方法从特定索引删除一项。假设你妈妈不希望你买糖果，并将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们把一项添加到数组的中间，所有项都会往一边挪动以腾出空间一样，如果你从数组的中间删除一项，其余的项会重新挪动以填补那个空位。原来在索引 3 处的“apples”现在位于索引 2 处，那里原本是“candy”。

你还可以使用 removeAll()方法删除数组中的所有项。试着将以下代码输入到你的 playground 中：

![](img/Image00129.jpg)

注意，尝试删除一个不存在索引的项会报错：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以会抛出一个错误。如果我们在空数组上使用 removeLast() ，也会抛出错误，因为它什么都没有——根本没有最后一个索引！然而，使用 removeAll() 即使在空数组上也是安全的。

#### 替换数组中的元素

要替换数组中的项目，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ ，我们将索引为 2（第三个元素）的位置的元素替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ ，我们将索引为 0（第一个元素）的位置的元素替换为“胡须龙”。不，这不是一条真正的龙——它只是一个蜥蜴！

就像处理数组索引时一样，在修改某个索引处的值之前，你必须确保该索引位置的元素确实存在，否则会出现“索引超出范围”的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 来添加“标准贵宾犬”时会出现的错误。要将元素添加到数组的末尾，你应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加元素” 中讲到的，见 第 70 页 。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引处的值。*

现在你已经知道如何根据需要修改数组。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有*属性*。数组的属性是包含数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的属性 isEmpty 和整数类型的属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少个元素。

请查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印“我没有兄弟姐妹。”；如果数组中有元素，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋ 。

#### 遍历数组

有时候在处理数组时，你可能想对数组中的每个元素执行某个操作。你可以使用 for-in 循环来实现！以下代码将逐行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，之后是关键字 in，最后是我们数组的名字 pizzaToppings。然后我们将希望在每个 topping 上执行的语句放在 for-in 循环的花括号内。常量 topping ➊在我们遍历数组时暂时表示数组中的每个比萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：for-in 循环示例的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以用它们对每个项目执行数学运算，这样可以进行快速的计算！以下代码接收一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与它自身相乘的结果）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一组值，但不同于有序索引，字典中的每个值都有它自己的*键*。因为没有索引，值并没有按照特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。在同一个字典中，你不能有两个相同的键。如果有两个相同的键，而你请求计算机返回其中一个的值，计算机将无法确定选择哪个！

让我们看看如何创建一个字典，并编写帮助你找到所需所有信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后在一对方括号内写出键和相应的值，类似于数组。让我们创建一个字典来存储几个美国州的名字。每个州的键将是它的两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，并且键/值对之间用逗号分隔。

字典与数组不同，字典是*无序*的。因为这一点，你看到的结果窗格中状态的顺序➋可能与输入状态的顺序➊不同。甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数的集合，你可以使用`double`作为键，`string`作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是`double`类型，所有的值必须是字符串类型。同样，你会发现结果面板中的数字顺序可能与在字典中书写分数时的顺序完全不同。这没关系，因为你不需要知道顺序就能访问任何项。你可以通过键找到任何需要的项目。让我们看看如何做到这一点！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问一个值，只是你使用的是方括号中的键，而不是索引，像这样：`usStates["TX"]`。

然而，Swift 返回字典值的方式与数组有很大不同。当你在数组中访问一个值时，你只是简单地得到该值。而当你在字典中通过键访问一个值时，你得到的是一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下是无法访问到值的。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中得到的任何值，才能对其进行操作。

要解包一个可选值，首先使用`if-let`语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用`if let`将常量 loneStarState 设置为`usStates["TX"]` ➊。因为我们的字典中有这个州，所以会打印出"我在字典中有 Texas"。接下来，我们尝试使用键`usStates["FL"]` ➋访问一个不在字典中的州。幸运的是，使用了`if-let`语句后，当计算机找不到这个州时，程序不会崩溃。相反，会打印出"我在字典中没有这个州"。

#### 向字典中添加项目

要向字典中添加一个项目，首先写下字典的名称，并将新项目赋值给你希望它在字典中具有的键。让我们向`usStates`字典中添加"Minnesota"：

![](img/Image00144.jpg)

现在，当你查看`usStates`时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项非常简单；你只需将值设置为 nil 即可。因为字典中的值是以可选值返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"对应的值后，usStates 会更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。因此，你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将你想要替换的项设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为“red”设置了值“apple”，但是后来我们决定用“raspberry”这个水果，因为有时苹果是绿色或黄色的。为了将“apple”替换成“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能记得，这就是我们将新值添加到字典中的方式。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性会检查你有多少项。想象一下，你有一个水果篮子待售。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，以及 values，包含字典的所有值。当我们遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以用两种不同的方式来实现。这是如何通过字典的键来遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，后面跟着一个常量名 fruit 作为字典的键，再加上关键字 in，字典名，一个句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键，称其为 fruit ➋，以及当我们强制解包其内容时，通过 fruitBasket[fruit]! ➌ 获取到的该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会为字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以通过字典的 values 属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用每个值，我们称之为 price，位于 values 属性中。在循环遍历 values 时，我们无法访问到循环内部的键。

另一个需要注意的区别是，price 不是可选项，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样是按编号顺序排列的！由于顺序不能保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则需要使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以通过其名称在程序中的几乎任何地方调用它。

现在你可以通过添加 fruits 和 liquids 数组制作美味的 smoothie。

![](img/Image00123.jpg)

smoothie 中的配料顺序与 fruits 和 liquids 中的顺序相同。如果你使用 liquids + fruits 来创建 smoothie，那么液体会先放。

你使用 += 运算符将一个数组添加到数组的末尾。可以如下添加一些鲜奶油，以增加美味：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，即使它只有一个项目。当你使用 += 将内容添加到数组时，你必须确保你只是在尝试添加另一个数组。如果你只是写了字符串 "whipped cream" 而没有加上方括号，就会报错。

![Image](img/Image00125.jpg)

#### 从数组中移除项目

有几种方法可以从数组中移除项目。我们首先来看看数组的 removeLast() 方法。正如你从其名字中可能猜到的，removeLast() 会移除数组中的最后一个项目。让我们尝试在 shoppingList 数组上使用它：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法返回已移除的项目，因此如果你想，可以将其存储在一个新的常量或变量中。

你还可以通过使用 `remove(at:)` 方法从指定的索引位置删除元素。假设你的妈妈不希望你买任何糖果，并将其从列表中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加元素时，所有的元素会自动向后移动以腾出空间一样，如果你从数组的中间删除元素，其余的元素会向前移动，填补那个空位。原本位于索引 3 的“苹果”现在位于索引 2，原来的“糖果”位置。

你也可以使用 `removeAll()` 删除数组中的所有元素。试试在你的 Playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 `removeLast()`，也会得到一个错误，因为数组中没有元素——根本没有最后一个索引！但是，`removeAll()` 是完全安全的，即使是在空数组上也能使用。

#### 替换数组中的元素

要在数组中替换元素，你需要将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个元素）的位置的元素替换为“独角兽”，因为神奇动物也是最喜欢的动物！在 ➋ 处，我们将索引 0（第一个元素）的位置的元素替换为“胡须龙”。不，那不是一条真正的龙——它只是一种蜥蜴！

就像你在处理数组索引时一样，在修改某个索引的值之前，必须确保该索引处的元素存在，否则你会遇到“索引超出范围”的错误。

图 6-3 展示了如果你尝试通过 `favoriteAnimals[3] = "Standard poodle"` 来添加“标准贵宾犬”，会发生的错误。要将元素添加到数组的末尾，你应该使用 `append(_:)` 方法或 `+=`，正如我们在 “向数组中添加元素” 中第 70 页 所讲的。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你知道如何根据需要修改数组了。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来进一步了解数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 `append(_:)` 和 `removeLast()` 这样的操作方法，数组还有 *属性*。数组的属性是包含数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 `isEmpty` 和整数属性 `count`。

`isEmpty` 属性根据数组是否为空返回 `true` 或 `false`，而 `count` 属性则告诉你数组中有多少个元素。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查 mySiblings 数组是否为空 ➊ 。如果为空，则打印 "我没有兄弟姐妹。" 但是，如果数组中有内容，则会打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋ 。

#### 循环遍历数组

有时候，当你在处理数组时，你可能想对数组中的每个项做些事情。你可以使用 for-in 循环来实现！以下代码将在每一行打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for ，后跟常量 topping ，然后是关键字 in ，最后是数组的名称 pizzaToppings 。然后，我们将要为每个配料执行的语句放在 for-in 循环的花括号内。常量 topping ➊ 临时表示我们在循环过程中每个 pizzaTopping 。我们本可以为这个常量选择任何名称，但选择一个有意义的名字是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，还可以使用它们对每个项目进行数学运算，这使得计算速度更快！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它本身）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序的索引，每个值都有自己的 *键* 。由于没有索引，值并不是以特定顺序存储的。要访问字典中的值，你需要通过其键查找。

键必须是唯一的。你不能在同一个字典中使用相同的键多次。如果有两个相同的键，并且你要求计算机给你其中一个的值，计算机将不知道选择哪个！

让我们看看如何创建一个字典，并编写帮助你找到所需所有信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后将键及其对应的值写在一对方括号中，类似于数组。让我们创建一个字典，用来存储一些美国州的名称。每个州的键将是其两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，并且键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序 ➋ 可能与你输入的州的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相同。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与在字典中写入分数的顺序大不相同。这没关系，因为你不需要知道顺序就可以访问任何内容。你可以通过键来查找你需要的任何项。让我们来看看！

#### 访问字典中的值

在字典中查找一个值类似于如何在数组中访问一个值，只不过你需要在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中，从字典中返回值有一个很大的区别。当你访问数组中的某个索引时，你只是得到该值。当你通过字典中的键访问某个值时，你得到的是一个可选项。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。试图访问一个不存在的值会导致一个大错误！为避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中取出的任何值，才能对其进行操作。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

为了从字典中检索“德克萨斯州”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出“I have Texas in my dictionary.”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出“I don't have that state in my dictionary.”。

#### 向字典添加项

要向字典添加一项，首先写出字典的名称，并将新项赋给你希望它在字典中对应的键。我们来将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会发现它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除一个项非常简单；你只需要将该值设置为 nil。由于字典中的值是可选的，你无需担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，当你删除“MA”对应的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。因此，在我们的字典中不会看到"MA": nil。

#### 替换字典中的项

替换字典中的一项也很简单。它和替换数组中的项一样，只需将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们将“red”对应的值设为“apple”，但后来我们决定使用“raspberry”更合适，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为其新值➊。

你可能记得，这正是我们将新值添加到字典中的方式。如果键已经存在于字典中，那么该键对应的值会被替换。如果键还不存在，那么新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性检查字典中有多少项。假设你有一个水果篮在售。你可以使用这些属性来帮助你追踪所有内容：

![图片](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来做。下面是通过字典的键来遍历字典的方式：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket，并打印其内容。我们从写关键字 for 开始，接着是字典键的常量名 fruit，关键字 in，字典名称，一个句点，和 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋），以及通过强制解包其内容（fruitBasket[fruit]! ➌）得到的该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句会显示三次。

我们还可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用每个值，我们称其为 price，位于 values 属性中。在循环遍历 values 时，我们无法访问循环内部的键。

另一个需要注意的区别是，price 不是可选的，因为它直接作为值访问在 fruitBasket 字典中。这意味着我们不需要解包它。你仍然应该看到打印语句会显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号排序！并且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你需要使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。写好函数后，你可以在程序中的几乎任何地方通过函数名调用它。

![](img/Image00123.jpg)

奶昔中配料的顺序与水果和液体中的顺序相同。如果你先将液体与水果混合制成奶昔，那么液体会先放入。

你使用 += 操作符将一个数组添加到另一个数组的末尾。为了让味道更加美味，可以按如下方式加入一些奶油：

![](img/Image00124.jpg)

请注意，["鲜奶油"] 是一个数组，尽管它只有一个项。当你使用 += 来向数组添加内容时，必须确保你只是在添加另一个数组。如果你只是写“鲜奶油”这个字符串而没有加上方括号，你会遇到错误。

![图片](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。让我们先来看一下数组的 removeLast() 方法。正如你从它的名字可以猜到的，removeLast() 会移除数组中的最后一项。让我们通过一个 shoppingList 数组来试试：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的项，因此如果需要，你可以将它存储在一个新的常量或变量中。

你也可以使用 remove(at:) 方法从指定的索引移除一项。假设你的妈妈不想让你买糖果，于是将其从清单中移除：

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将项添加到数组中间并让所有项向右移动腾出空间一样，如果你从数组中间移除一个项，其他项将会向左移动填补空缺。原本在索引 3 的“苹果”项现在出现在索引 2 的位置，即“糖果”所在的位置。

你也可以使用 removeAll() 方法移除数组中的所有项。试试将这个输入到你的 Playground 中：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它已经空了！），所以这会抛出错误。如果我们在空数组上使用 removeLast()，也会抛出错误，因为数组里什么都没有——根本没有最后一个索引！但是，removeAll() 即使在空数组上使用也是安全的。

#### 替换数组中的项

要替换数组中的项，你只需将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在➊，我们将索引为 2（第三个元素）的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在➋，我们将索引为 0（第一个元素）的项替换为“胡须龙”。不，那不是一条真正的龙——它只是一只蜥蜴！

就像你在处理数组索引时一样，必须确保该索引位置存在项，才能修改它的值，否则你会遇到“索引超出范围”的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬" 来添加“标准贵宾犬”，会发生的错误。要将一项添加到数组的末尾，你应该使用 append(_:) 方法或 += ，我们在“向数组中添加项”中介绍了此方法，在第 70 页有详细说明。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换一个索引超出现有数组范围的值。*

现在你知道了如何根据需要更改数组。你可以添加项目、移除项目或替换项目。接下来，我们将探讨如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法，数组还有*属性*。数组的属性是包含关于数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型属性 isEmpty 和整数类型属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

请查看下面的 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹。"。如果数组中有内容，则打印我们拥有的兄弟姐妹数量："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项目做一些操作。你可以使用 for-in 循环来完成！下面的代码将逐行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为 pizzaToppings 数组编写一个 for-in 循环时，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。接着我们将想要在每个配料上执行的语句放入 for-in 循环的花括号内。常量 topping ➊ 在我们遍历数组时临时表示数组中的每个比萨配料。我们本可以选择任何名字来命名这个常量，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以用它们对每个项目执行数学运算，这样就能快速计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，不过与有序索引不同，每个值都有自己的*键*。由于没有索引，值并不会以任何特定的顺序存储。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中多次使用相同的键。如果有两个相同的键，并且你请求计算机给出其中一个的值，计算机将无法确定选择哪一个！

让我们来看看如何创建一个字典，并编写有助于你找到所有所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 `var` 和字典的名称。然后在一对方括号内写上键和对应的值，类似于数组。让我们创建一个字典，用来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，并且键值对之间用逗号分隔。

字典不同于数组，因为它们是 *无序* 的。因此，你在结果面板中看到的州的顺序 ➋ 可能与你输入州时的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），所有的值必须是字符串（strings）。再次提醒，你会发现结果面板中的数字顺序可能和你在字典中书写分数的顺序有很大的不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到你需要的任何项。让我们来看一下！

#### 访问字典中的值

在字典中查找一个值的方式与在数组中访问值类似，只不过你需要在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中，字典返回值的方式有很大的不同。当你在数组的索引中访问值时，你会直接得到值。当你使用键在字典中访问值时，你会得到一个可选值（optional）。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下，没有值可以访问。尝试访问一个不存在的值会给你一个很大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

为了解包一个可选项，首先你要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中获取"Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"]➊。因为我们在字典中有这个州，所以会打印出“I have Texas in my dictionary”。接下来，我们尝试访问一个不在字典中的州，使用键 usStates["FL"]➋。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到这个州时，程序不会崩溃。相反，打印出“I don’t have that state in my dictionary”。

#### 向字典中添加项目

向字典中添加项目时，首先写下字典的名称，然后将新项目分配给你希望它拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，所以你的新字典项目可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你可以通过将值设置为 nil 来实现。因为字典中的值是以可选项的形式返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除"MA"键的值后，usStates 已经更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么在字典中看不到"MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始，我们将"red"的值设为"apple"，但后来我们决定使用"raspberry"作为更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值➊。

你可能还记得，这是我们将新值添加到字典中的方式。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，count 属性会检查你有多少个项目。想象一下，你有一个水果篮子在出售。你可以使用这些属性来帮助你追踪所有的东西：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮并打印每种水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式来做。这是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来循环遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后面跟着常量名 fruit 作为字典的键，关键字 in，字典名，一个句点，和 keys。

在 for-in 循环的大括号内，我们可以访问键，我们称之为 fruit➋，以及通过 fruitBasket[fruit]! ➌强制解包其内容后得到的该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们在 for-in 循环中写的任何代码都会在字典的每个键上运行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环方式，但现在我们使用常量来引用每个值，我们称之为 price，在 values 属性中。当循环遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是价格不是可选的，因为它作为一个值直接访问了 fruitBasket 字典。这意味着我们不需要解包它。你应该仍然看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且因为顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何在数组和字典中存储项目。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，那么你会使用字典。

了解数组和字典，以及如何使用它们，是几乎所有编程语言中非常强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以通过它的名字从程序中的几乎任何地方调用它。

果汁的配料顺序与水果和液体的顺序相同。如果你是先放液体再放水果制作果汁，那么液体会排在前面。

你可以使用 += 运算符将一个数组添加到另一个数组的末尾。为了增加一点美味，可以像下面这样添加一些奶油：

![](img/Image00124.jpg)

请注意，["whipped cream"] 是一个数组，尽管它里面只有一个项目。当你使用 += 将某个元素附加到数组时，必须确保你只是在尝试添加另一个数组。如果你直接写 "whipped cream" 字符串而没有用方括号括起来，那么你会得到一个错误。

![图片](img/Image00125.jpg)

#### 从数组中移除项目

移除数组中的项目有多种方法。让我们从查看数组的 removeLast() 方法开始。如你所料，removeLast() 会移除数组中的最后一个项目。让我们通过一个 shoppingList 数组来试试看：

![](img/Image00126.jpg)

很棒！请注意，removeLast() 方法会返回被移除的项目，因此如果你需要的话，可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:) 方法从特定索引位置移除项目。假设你的妈妈不希望你买糖果，于是把它从列表中移除：

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有其他项目会挪动以腾出空间一样，如果你从数组的中间移除项目，其他项目会挪回去填补那个空位。原来在索引 3 位置的 "apples" 项目现在在索引 2 位置，取代了 "candy"。

你还可以使用 removeAll() 方法移除数组中的所有项目。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引位置移除项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（实际上现在它是空的！），所以这会引发错误。如果我们在空数组上使用 removeLast() 方法，也会出错，因为数组里什么都没有——根本没有最后一个索引！不过，removeAll() 方法即使在空数组上使用也总是安全的。

#### 替换数组中的项目

要替换数组中的项目，你只需将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ ，我们用 "Unicorn" 替换了索引为 2（即第三个项目）的元素，因为神奇的动物也算是最喜欢的动物！在 ➋ ，我们用 "Bearded dragon" 替换了索引为 0（即第一个项目）的元素。不是的，那不是一条真正的龙——它只是一只鬃蜥！

就像你在处理数组索引时一样，你必须确保数组中在该索引处有项目存在，才能更改其值，否则会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬" 来添加"标准贵宾犬"时发生的错误。要向数组末尾添加项目，应该使用 append(_:) 方法或 +=，正如我们在“向数组添加项目”中讨论的那样，参见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将探讨如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方式外，数组还有*属性*。数组的属性是包含关于数组某些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性是 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少个项目。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项目做一些操作。你可以使用 for-in 循环来实现！以下代码将会逐行打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。然后我们将想要对每个 topping 执行的语句放在 for-in 循环的花括号中。常量 topping ➊ 在我们循环遍历数组时暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项目进行数学运算，从而进行快速计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是该数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，不同的是，它没有顺序索引，每个值都有自己的*键*。因为没有索引，所以值并不按任何特定顺序存储。要访问字典中的值，你需要通过键来查找。

一个键必须是唯一的。在同一个字典中不能有重复的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机就不知道该选择哪一个！

让我们来看一下如何创建一个字典并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写出 var 和字典的名称。然后在一对方括号中写入键和值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键/值对通过逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果窗格中看到的州的顺序 ➋ 可能与输入州的顺序 ➊ 不同。它甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现，结果窗格中数字的顺序可能与在字典中编写分数的顺序有很大不同。这是可以的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。我们来看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问一个值，不同之处在于你使用的是方括号中的键，而不是索引，例如：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的区别。当你访问数组中某个索引的值时，你只是获得该值。当你使用键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中得到的任何值，然后才能对其进行处理。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

为了从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们字典中有这个州，"I have Texas in my dictionary." 这一行会被打印出来。接下来，我们尝试通过使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机无法找到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典添加项目

要向字典添加一个项目，首先写出字典的名称，并将新项目分配给你希望在字典中拥有的键。让我们把"明尼苏达"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，新的字典项目可能会出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除一个项目非常简单；你只需将值设置为 nil。因为字典中的值作为可选值返回，所以你不需要担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键"MA"的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。这就是为什么在我们的字典中你看不到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式和替换数组中的项目一样。你只需将你想要替换的项目设置为其他内容。比如你创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是更好的水果，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这就是我们向字典中输入新值的方式。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。因为每个项都有一个键和值，所以你可以通过两种方式来完成。以下是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in，字典名称，句点，然后是 keys。

在我们 for-in 循环的花括号内部，我们可以访问键（我们称之为 fruit ➋）以及通过 fruitBasket[fruit]! ➌ 强制解包其内容时的该键对应的值。该值就是水果的价格。

在这种情况下，由于我们知道正在使用的果实键一定在字典中，因此使用感叹号强制解包值是安全的。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句打印了三次。

我们还可以使用字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在循环值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印了三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的有所不同。这是因为字典中的项目不像数组那样按数字顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到的

在本章中，你学会了如何在数组和字典中存储项目。要将项目存储在有序列表中，你应该使用数组，并通过索引查找每个项目。如果你想按键存储项目，那么你应该使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以使用它的名字在程序中的几乎任何地方调用它。

你可以使用+=运算符将一个数组添加到数组的末尾。按如下方式添加一些鲜奶油，让它更美味：

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只包含一个项目。当你使用+=将内容添加到数组时，必须确保你只是在添加另一个数组。如果你只是写了字符串"whipped cream"而没有加上方括号，就会出现错误。

![Image](img/Image00125.jpg)

#### 从数组中删除项目

有多种方法可以从数组中删除项目。我们首先来看数组的 removeLast()方法。正如你从名字中可能已经猜到的，removeLast()会删除数组中的最后一个项目。我们来尝试一下这个 shoppingList 数组：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被删除的项目，因此如果你想，你可以将其存储在一个新的常量或变量中。

你还可以使用 remove(at:)方法从特定的索引处删除一个项目。假设你的妈妈不想让你买糖果，并把它从清单上删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们向数组中间添加项目时，所有的项目都会挪动以腾出空间一样，如果你从数组的中间删除一个项目，剩余的项目会自动挪回，填补那个空位。原本在索引 3 处的"apples"项目现在位于索引 2 处，那里原本是"candy"。

你还可以使用 removeAll()删除数组中的所有项目。试试在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的项目会引发错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项目（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为它里面没有任何内容——根本没有最后一个索引！然而，removeAll()方法总是安全的，即使在空数组上使用也是如此。

#### 替换数组中的项目

要替换数组中的一个项，你需要将数组索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的项替换为"独角兽"，因为魔法动物也算作最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的项替换为"胡须龙"。不，那不是一条真正的龙——它只是一个蜥蜴！

就像你在处理数组索引时一样，必须确保在更改数组值之前，指定索引处确实存在一个项，否则你将遇到“索引超出范围”错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle"来添加"标准贵宾犬"时发生的错误。要向数组的末尾添加项目，应该使用 append(_:)方法或+=，正如我们在“向数组添加项目”中在第 70 页讨论过的那样。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将了解如何使用数组的属性来获取更多关于数组的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的操作方法，数组还有*属性*。数组的属性是包含数组某些信息的变量或常量。两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，具体取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

看一下在以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，那么会打印出“我没有兄弟姐妹”。如果数组中有内容，则会打印出我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时，在处理数组时，你可能想对数组中的每个项执行相同的操作。你可以使用 for-in 循环来实现！以下代码将每个披萨配料打印到单独的一行：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。然后，我们将希望对每个配料执行的语句放在 for-in 循环的花括号内。常量 topping ➊ 在我们遍历数组时暂时代表数组中的每个披萨配料。我们本可以选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项目执行数学运算，从而加速计算！以下代码获取一个数字数组并计算每个数字的平方（数字的平方是该数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

一个*字典*也是一个值的集合，但与有序索引不同，每个值都有它自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。在同一个字典中不能有重复的键。如果有两个相同的键，并且你要求计算机给你其中一个的值，计算机就无法知道选择哪个！

让我们来看看如何创建一个字典并写下有助于你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写上键和对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键值对由逗号分隔。

字典与数组不同，因为它们是*无序*的。因此，你看到的结果窗格中的州的顺序➋很可能与输入字典时州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不一定需要与值类型匹配。例如，如果你想存储一组分数，你可以将键设置为双精度浮点数，而值设置为字符串：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果窗格中数字的顺序可能与字典中分数的顺序完全不同。这是没问题的，因为你不需要知道顺序就能访问任何项。你可以通过键找到任何需要的项目。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值与在数组中访问值类似，只不过你是用方括号中的键来访问，而不是用索引，像这样：usStates["TX"] 。

然而，Swift 返回字典值的方式与从数组中访问值有很大不同。当你通过数组的索引访问值时，你会直接得到值。当你通过字典的键访问值时，你得到的是一个可选项。

在第五章中，你已经学习了可选项可能包含一个值，也可能是 nil 。Swift 在查找字典中的项时返回可选项的原因是，你使用的键可能在字典中不存在，在这种情况下，就没有值可供访问。尝试访问不存在的值会导致一个大错误！为避免这个问题，Swift 返回可选项。这意味着，在对字典中的值进行任何操作之前，你需要解包你从字典中获取的值。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "德克萨斯"，我们使用 if let 来将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们在字典中有这个州，所以会打印出 "我在字典中有德克萨斯"。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个字典中没有的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。而是会打印出 "我字典中没有这个州"。

#### 向字典中添加项

要向字典中添加一项，首先写出字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们向我们的 usStates 字典中添加 "明尼苏达"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "明尼苏达", "WA": "华盛顿", "MA": "马萨诸塞", "TX": "德克萨斯"] 。记住，由于你不需要依赖索引，新的字典项可能会出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将该值设置为 nil 。因为字典中的值是以可选项的形式返回的，所以你无需担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键 "MA" 的值后，usStates 更新为 ["MN": "明尼苏达", "WA": "华盛顿", "TX": "德克萨斯"] 。记住，nil 是特殊的，它意味着完全没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项相同。你只需将你想替换的项设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“red”设置了“apple”的值，但后来我们决定“raspberry”是一个更好的水果选择，因为有时苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"]设置为其新值➊。

你可能记得，这是我们将新值输入字典的相同方式。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性将检查你有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。我们将在循环字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮子并打印每个水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来实现。以下是如何使用字典的键来循环遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来循环遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后面跟一个常量名称 fruit，表示字典的键，再写关键字 in，字典名称，句点，以及 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit➋）以及当我们强制解包其内容时，通过 fruitBasket[fruit]!➌获取的该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以使用字典的 values 属性来循环遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用常量来引用 values 属性中的每个值，我们称其为 price。当循环遍历 values 时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为值访问 fruitBasket 字典中的内容。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到的内容

在本章中，你学会了如何在数组和字典中存储项。要存储有序的列表，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，你会使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定任务。写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![](img/Image00124.jpg)

请注意，["whipped cream"]是一个数组，尽管它只包含一个项。当你使用+=向数组中添加内容时，必须确保你只是尝试添加另一个数组。如果你只是写了字符串"whipped cream"而没有加上方括号，你会得到一个错误。

![Image](img/Image00125.jpg)

#### 从数组中移除项

有几种方法可以从数组中移除项。我们从查看数组的 removeLast()方法开始。正如你从其名称中可能猜到的，removeLast()会移除数组中的最后一项。我们可以尝试在一个 shoppingList 数组上操作：

![](img/Image00126.jpg)

很棒！注意，removeLast()方法会返回被移除的项，因此如果需要，你可以将它存储在一个新的常量或变量中。

你也可以通过使用 remove(at:)方法从特定索引移除一项。假设你的妈妈不希望你买糖果，并且把它从清单上移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项都会向旁边移动以腾出空间一样，如果你从数组中间移除一个项，其它项会向回挪动以填补空缺。原本在索引 3 处的"apples"项现在会出现在索引 2 的位置，原本"candy"项所在的位置。

你也可以使用 removeAll()方法移除数组中的所有项。试着将这个输入到你的 playground 中：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引移除项将会给你一个错误：

![](img/Image00130.jpg)

我们的数组并没有这么多项（事实上，现在它是空的！），因此这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会得到一个错误，因为数组中什么都没有——根本没有最后一个索引！然而，removeAll()在任何情况下都是安全的，即使是在空数组上使用。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们用"Unicorn"替换了索引为 2（第三个项）的位置，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们用"Bearded dragon"替换了索引为 0（第一个项）的位置。不是的，那可不是真正的龙——它只是一个蜥蜴！

就像在处理数组索引时一样，你必须确保在更改某个索引处的值之前，该索引处确实存在某个项，否则你将会遇到“索引超出范围”错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 来添加"Standard poodle"时发生的错误。要将项添加到数组的末尾，你应该使用 append(_:) 方法或 += ，正如我们在“向数组添加项”一节中介绍的那样，第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道如何根据需要更改数组了。你可以添加项、删除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性* 。数组的属性是包含数组相关信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count 。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印出 "我没有兄弟姐妹"。如果数组中有内容，则打印出我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋ 。

#### 循环遍历数组

有时，当你处理数组时，可能想对数组中的每个项执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将在单独的一行上打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，后面是常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings 。然后，我们将希望对每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时暂时代表每个配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目执行数学运算，这使得计算速度非常快！以下代码取一个数字数组并计算每个数字的平方（一个数字的平方是该数字与其本身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与数组不同的是，每个值都有自己的*键*。由于没有索引，值不会按任何特定顺序存储。要访问字典中的值，你需要通过其键来查找它们。

键必须是唯一的。同一个字典中不能有相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就无法知道该选择哪个！

让我们来看看如何创建一个字典，并编写键来帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后，将键和值对写在一对方括号内，类似于数组。我们来创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板➋中看到的状态顺序可能与输入状态➊的顺序不同。甚至可能与书中所列的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，而字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以将键设置为双精度数，值设置为字符串：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。同样，你会看到结果面板中的数字顺序可能与字典中分数的顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。我们来看看如何实现！

#### 访问字典中的值

查找字典中的值类似于访问数组中的值，只不过你在方括号内使用的是键而不是索引，例如：usStates["TX"]。

然而，Swift 返回字典值的方式与数组有所不同。当你在数组的索引位置访问值时，你只是简单地得到该值。而当你在字典中使用键访问值时，你得到的是一个可选值。

在第五章中，你已经学习过可选值可能包含一个值，也可能是 nil。Swift 之所以在查找字典中的项时返回可选值，是因为你使用的键可能在字典中不存在，在这种情况下就没有值可供访问。如果你尝试访问一个不存在的值，就会遇到严重的错误！为了避免这个问题，Swift 返回了可选值。这意味着你需要在对字典中的任何值进行操作之前，先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，输出将是“我在字典中有 Texas”。接下来，我们尝试访问一个字典中没有的州，使用键 usStates["FL"] ➋。幸运的是，因为我们使用了 if-let 语句，当计算机无法找到该州时，程序不会崩溃。相反，会输出“我字典中没有那个州”。

#### 向字典中添加项

要向字典中添加一个项，首先写下字典的名称，并将新项赋给你希望它在字典中具有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项是非常简单的；你只需要将值设置为 nil。由于字典中的值是以可选值返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"对应的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。因此，你在字典中不会看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。例如，假设你创建了一个包含水果颜色的字典：

![](img/Image00146.jpg)

最开始，我们将"red"的值设为"apple"，但后来我们决定"raspberry"更适合，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能记得，这与我们向字典中添加新值的方式是一样的。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性将检查字典中有多少项。假设你有一个待售的水果篮子。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。当我们遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来做这件事。以下是如何使用键遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后面跟一个常量名 fruit 作为字典的键，关键字 in，字典名，一个句点，再加上 keys。

在 for-in 循环的花括号内部，我们可以访问键，我们称其为 fruit ➋，以及通过强制解包 fruitBasket[fruit]! ➌获取该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码将为字典中的每个键执行一次。因此，你应该会看到打印语句显示三次。

我们也可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是作为 fruitBasket 字典中的值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的元素不像数组中的元素那样按数字顺序排列！而且由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何将元素存储在数组和字典中。要将项目存储在有序列表中，你应该使用数组，并通过索引查找每个元素。如果你想通过键来存储元素，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。编写函数后，你可以通过其名称在程序中的几乎任何地方调用它。

请注意，["whipped cream"]是一个数组，尽管它只有一个元素。当你使用+=操作符向数组添加内容时，必须确保你只是在添加另一个数组。如果你直接写字符串"whipped cream"而没有方括号，你会遇到错误。

![Image](img/Image00125.jpg)

#### 从数组中移除元素

有几种方法可以从数组中移除元素。让我们首先看看数组的 removeLast()方法。正如你从它的名字猜到的那样，removeLast()会移除数组中的最后一个元素。让我们用一个 shoppingList 数组来试一试：

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项，因此你可以将其存储到一个新的常量或变量中，如果你需要的话。

你还可以使用 remove(at:)方法从特定索引处移除元素。假设你的妈妈不希望你买糖果并把它从清单中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将元素添加到数组中间，其他元素会向一侧挪动以腾出空间一样，如果你从数组中间移除元素，剩下的元素会向回挪动以填补空缺。原来位于索引 3 的"apples"元素现在位于索引 2 的位置，原来"candy"所在的位置。

你还可以使用 removeAll()从数组中移除所有元素。试着在你的 playground 中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试从不存在的索引处移除元素会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多元素（实际上，现在它已经是空的！），因此会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为数组中没有元素——根本没有最后一个索引！不过，removeAll()即使在空数组上使用也是安全的。

#### 替换数组中的元素

要替换数组中的一个元素，你需要将该数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个元素）处的元素替换为 "Unicorn" 因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引 0（第一个元素）处的元素替换为 "Bearded dragon"。不，这不是一条真正的龙——它只是一只蜥蜴！

像处理数组索引号一样，在更改某个元素的值之前，你必须确保该索引处的元素在数组中存在，否则你会遇到“超出范围”错误。

图 6-3 展示了当你尝试通过 favoriteAnimals[3] = "Standard poodle" 来添加 "Standard poodle" 时出现的错误。要向数组的末尾添加元素，你应该使用 append(_:) 方法或 += 运算符，正如我们在 “向数组添加元素” 第 70 页中所讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组了。你可以添加元素、移除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多有关数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法外，数组还有 *属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空来返回 true 或 false，而 count 属性则告诉你数组中有多少个元素。

看看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有元素，则会打印我们有多少兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时候，当你处理数组时，你可能想对数组中的每个元素做些事情。你可以使用 for-in 循环来做到这一点！以下代码将把 pizzaToppings 数组中的每个 topping 打印到单独的一行：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将希望对每个 topping 执行的语句放在 for-in 循环的大括号中。在循环过程中，常量 topping ➊ 临时代表数组中的每个 pizza topping。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例中 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以使用它们对每个项目执行数学运算，这样就能进行快速计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是该数字与它自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值并没有按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有重复的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机就无法确定该选择哪一个！

让我们看看如何创建一个字典，并编写键来帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后，将键及其对应的值写在一对方括号内，类似于数组。让我们创建一个字典，存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，键/值对之间由逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的状态顺序➋很可能与输入状态的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不必与值类型匹配。例如，如果你想存储一个分数的集合，你可以使用双精度数值作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数值，所有的值必须是字符串。你会发现，结果窗格中数字的顺序可能与字典中书写的分数顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到所需的任何项。我们来看看如何做到这一点！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问一个值的方式，只不过你使用的是字典中的键而不是索引，例如：usStates["TX"]。

然而，Swift 从字典中返回值的方式与从数组的索引中获取值有很大区别。当你通过数组索引访问一个值时，你只会得到值。而当你通过字典中的键访问一个值时，你会得到一个可选项。

在第五章中，你已经学到可选项可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选项的原因是，可能你使用的键在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大的错误！为避免这种问题，Swift 返回了可选项。这意味着，在你对从字典中获取的任何值进行操作之前，需要解包它。

要解包一个可选项，首先检查它是否存在，可以使用 if-let 语句，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印出“我在字典中找到了 Texas”。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“我在字典中没有这个州”。

#### 向字典中添加项

要向字典中添加一个项，首先写出字典的名称，并将新项赋值给你想要它在字典中拥有的键。我们来向我们的 usStates 字典中添加“Minnesota”：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需要将该值设置为 nil。因为字典中的值是作为可选项返回的，所以你不需要担心 nil 会导致字典中的问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值之后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，它表示没有值。这就是为什么你在字典中看不到"MA": nil 的原因。

#### 替换字典中的项

替换字典中的一项也很简单。它的工作方式和替换数组中的项一样。你只需要将你想替换的项设置为其他值。比如，你创建一个关于水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为“red”键设置的值是“apple”，但后来我们决定“raspberry”是一个更好的水果选择，因为有时苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这与我们将新值添加到字典中的方式相同。如果键已经存在于字典中，则该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则 count 属性可以检查字典中有多少项。假设你有一个水果篮子在出售，你可以使用这些属性来帮助你记录一切：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；以及 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。由于每个项目都有键和值，你可以通过两种不同的方式来实现遍历。这是通过键来遍历字典的方式：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写上关键词 for，后面是一个常量名 fruit 用于字典的键，然后是关键词 in，接着是字典名、一个句点以及 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋），以及当我们使用 fruitBasket[fruit]! ➌ 强制解包其内容时，该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们放在 for-in 循环内部的任何代码都将在字典中的每个键上执行一次。所以你应该看到打印语句被打印三次。

我们还可以通过字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称其为 price。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选类型，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与你看到的略有不同。这是因为字典中的项不像数组那样按数字顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序输出。

### 你学到的内容

在这一章节中，你学会了如何将项存储在数组和字典中。要将项存储在一个有序列表中，你应使用数组并通过索引查找每个项。如果你想按键存储项，你应使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的强大构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。编写函数后，你可以使用它的名字在程序中的几乎任何地方调用它。

![Image](img/Image00125.jpg)

#### 从数组中删除项

删除数组中的项有几种方法。我们先来看一下数组的 removeLast()方法。正如你从它的名字中可能猜到的，removeLast()会删除数组中的最后一项。让我们用一个 shoppingList 数组来试试：

![](img/Image00126.jpg)

真棒！请注意，removeLast()方法会返回被删除的项，因此如果你想的话，可以将其存储到一个新的常量或变量中。

你还可以使用 remove(at:)方法从特定的索引删除一项。假设你的妈妈不希望你买任何糖果，并将其从清单中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们将一项添加到数组的中间并且所有项都向后挪动腾出空间一样，如果你从数组中间删除一项，其余项会向前挪动以填补那个空缺的位置。原本位于索引 3 的"apples"项现在位于索引 2，即原本"candy"的位置。

你还可以使用 removeAll()方法删除数组中的所有项。尝试将这个输入到你的游乐场中：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引处的项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），因此会抛出错误。如果我们在空数组上使用 removeLast()，也会抛出错误，因为它里面没有任何东西——根本没有最后一个索引！然而，removeAll()是始终安全的，即使在空数组上使用。

#### 替换数组中的项

要替换数组中的项，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三项）的位置的项替换成了"Unicorn"，因为魔法动物也是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一项）的位置的项替换成了"Bearded dragon"。不，这可不是一条真正的龙——它只是只蜥蜴！

就像你在处理数组索引时一样，在更改值之前，你必须确保该索引处的项目在数组中存在，否则会出现索引超出范围的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加“标准贵宾犬”时会发生的错误。要向数组末尾添加项目，你应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项目”（第 70 页）中所讲解的。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组。你可以添加项目、移除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。你可能会用到的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则会告诉你数组中有多少个项目。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印“我没有兄弟姐妹”。但如果数组中有内容，则会打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时，当你在处理数组时，可能想对数组中的每个项目执行某些操作。你可以使用 for-in 循环来做到这一点！下面的代码将会打印出 pizzaToppings 数组中的每个配料，每个配料占一行：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将希望对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 临时表示我们在遍历数组时的每个披萨配料。我们可以为这个常量选择任何名字，但选择一个有意义的名称是一个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用`for-in`循环非常适合打印数组中的每个值。如果您正在处理数字，甚至可以用它们对每个项目执行数学运算，这样就能迅速完成计算！以下代码接收一个数字数组，并计算每个数字的平方（数字的平方是数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一组值的集合，但不同于有序索引，每个值都有自己的*键*。因为没有索引，所以值并不是按任何特定顺序存储的。要访问字典中的值，您需要通过其键来查找。

键必须是唯一的。您不能在同一个字典中重复相同的键。如果有两个相同的键，而您要求计算机返回其中一个的值，计算机就不知道选择哪个！

让我们来看看如何创建字典并编写键，这样您就可以找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上`var`和字典的名称。然后，将键和值写在一对方括号中，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母缩写：

![](img/Image00141.jpg)

如您所见，键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，您在结果面板➋中看到的状态顺序很可能与您输入状态的顺序➊不同。甚至可能与本书中打印的顺序不同！

与数组一样，您可以使用`var`来创建可变字典，或使用`let`来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型与值的类型不必匹配。例如，如果您想存储一个分数集合，可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），所有的值必须是字符串（strings）。再次提醒，您会发现结果面板中的数字顺序可能与您在字典中写入的分数顺序大不相同。这是可以的，因为您不需要知道顺序就可以访问任何内容。您可以通过键来查找所需的任何项。我们来看一下如何操作！

#### 访问字典中的值

在字典中查找值的方式类似于访问数组中的值，不同的是，你在方括号中使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个显著区别。当你在数组中访问一个值时，你只是得到该值。而当你使用字典中的键访问一个值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。当你在字典中查找项时，Swift 返回可选值的原因是你使用的键在字典中可能不存在，在这种情况下，就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着在对字典中的值进行任何操作之前，你需要先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出“我在字典中有 Texas”。接下来，我们尝试使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我在字典中没有这个州”。

#### 向字典中添加项

要向字典中添加一项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一个项非常简单；你只需要将该值设置为 nil。因为字典中的值是以可选值的形式返回的，所以你不需要担心 nil 会在字典中造成问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么在我们的字典中你看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项的方式相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始，我们将值"apple"赋给了"red"键，但后来我们决定使用"raspberry"作为更好的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为新的值 ➊。

你可能还记得，这是我们向字典中添加新值的相同方式。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性将检查字典中有多少项。想象你有一个水果篮子在销售。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。当我们遍历字典时，将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式进行遍历。这是使用字典的键来遍历字典的方式：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写关键词 for，然后是常量名 fruit 作为字典的键，关键词 in，字典名，句点，最后是 keys。

在 for-in 循环的大括号内部，我们可以访问到键（我们称之为 fruit ➋）和该键的值，当我们强制解包 fruitBasket[fruit]!时 ➌。该值将是水果的价格。

在这种情况下，强制解包值时使用感叹号是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。因此，你应该会看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历 values 时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

您的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中那样按编号顺序排列！并且由于顺序不被保证，如果您再次运行相同的代码，可能会看到不同的打印顺序。

### 您学到了什么

在本章中，您学会了如何在数组和字典中存储项目集合。要在有序列表中存储项目，您将使用数组，并按其索引查找每个项目。如果要根据键存储项目，则将使用字典。

知道如何使用数组和字典以及如何使用它们是几乎任何编程语言的强大基础模块。接下来我们将学习函数，另一个非常强大的工具。函数是您创建并命名以执行特定任务的代码块。编写函数后，您可以使用其名称从程序的几乎任何位置调用它。

#### 从数组中删除项目

有几种方法可以从数组中删除项目。让我们首先看看数组的 removeLast() 方法。正如您从名称中猜测的那样，removeLast() 会从数组中删除最后一个项目。让我们尝试在 shoppingList 数组中使用它：

![](img/Image00126.jpg)

不错！请注意，removeLast() 方法会返回已删除的项目，因此如果需要，您可以将其存储在新的常量或变量中。

您还可以通过使用 remove(at:) 方法从特定索引处删除项目。假设您的妈妈不希望您购买任何糖果并将其从列表中移除：

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项目并且所有项目都挪动以腾出空间一样，如果您从数组中间删除一个项目，剩余的项目将挪动回来填补空白。原来位于索引 3 处的 "apples" 现在位于索引 2 处，即 "candy" 所在的地方。

您还可以使用 removeAll() 从数组中删除所有项目。尝试在您的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除不存在的索引处的项目将导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（实际上，现在它是空的！），所以会报错。如果我们在空数组上使用 removeLast() 也会报错，因为它里面什么都没有——根本没有最后一个索引！然而，无论何时使用 removeAll() 都是安全的，即使在空数组上。

#### 在数组中替换项目

要在数组中替换项目，您可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们替换了索引 2 处（第三个项目）的项目为 "Unicorn"，因为神奇的动物也算作喜爱的动物！在 ➋ 处，我们替换了索引 0 处（第一个项目）的项目为 "Bearded dragon"。不，它不是真正的龙——它只是一只蜥蜴！

就像在处理数组索引时一样，你必须确保在更改某个索引的值之前，该索引在数组中存在，否则会出现索引超出范围的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时发生的错误。要向数组末尾添加项，应该使用 append(_:) 方法或 += ，我们在 “向数组添加项” 一节中已经讲过了，第 70 页。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加项、删除项或替换项。接下来，我们将学习如何使用数组的属性来获取更多信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数方法，数组还具有 *属性* 。数组的属性是包含有关数组信息的变量或常量。有两个非常有用的属性，你可能会使用它们，它们分别是布尔值属性 isEmpty 和整数属性 count 。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则告诉你数组中有多少项。

请查看以下 if-else 语句中这两个属性的使用方法：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印 "我没有兄弟姐妹。" 如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋ 。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项执行某些操作。你可以使用 for-in 循环来实现！以下代码将在每一行上打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for ，后跟常量 topping ，然后是关键字 in ，最后是我们数组的名称 pizzaToppings 。接着我们将想要在每个 topping 上运行的语句放入 for-in 循环的大括号中。常量 topping ➊ 临时代表数组中的每个披萨配料，随着循环的进行，我们可以访问每个配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例中的 for-in 循环输出*

![图片](img/Image00137.jpg)

使用`for-in`循环非常适合打印数组中的每个值。如果您处理的是数字，您甚至可以使用它们对每个项执行数学运算，从而进行快速计算！以下代码取一个数字数组，并计算每个数字的平方（数字的平方是该数字与其本身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，您需要通过键查找它们。

键必须是唯一的。您不能在同一个字典中重复使用相同的键。如果有两个相同的键，并且您请求计算机返回其中一个的值，计算机将无法决定选择哪个！

让我们看看如何创建字典并编写键，帮助您找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写`var`和字典的名称。然后，将键及其对应的值写在一对方括号内，类似于数组。我们来创建一个字典，存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如您所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，字典是*无序的*。因此，您在结果面板➋中看到的状态顺序可能与您输入状态➊的顺序不同，甚至可能与本书中打印的顺序不同！

与数组一样，您可以使用`var`来创建可变字典，或使用`let`来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键类型不必与值类型匹配。例如，如果您想存储一个分数集合，可以使用`double`作为键，使用`string`作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是`double`类型，所有的值必须是`string`类型。同样，您会看到结果面板中的数字顺序可能与您在字典中写下分数的顺序有很大不同。这是正常的，因为您无需知道顺序就能访问任何内容。您可以通过键找到任何所需的项目。让我们看看如何操作！

#### 访问字典中的值

查找字典中的值与访问数组中的值类似，只是你使用键而不是索引，像这样：usStates["TX"]。

然而，在 Swift 从字典返回值时，存在一个重大区别。当你访问数组中某个索引的值时，你只是简单地得到那个值。当你使用键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。试图访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中获取“Texas”，我们使用 `if let` 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以会打印出“我在我的字典里有 Texas”。接下来，我们尝试使用键 usStates["FL"] ➋ 来访问一个字典中没有的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，它会打印出“我在我的字典里没有这个州”。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，然后将新项目赋值给你希望它在字典中对应的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，你的新字典项目可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除一个项目非常简单；你只需要将该值设置为 nil。因为字典中的值作为可选项返回，所以你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式和替换数组中的项目一样。你只需要将你想替换的项目设置为其他内容。例如，你创建了一个表示水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为"red"设置的值是"apple"，但后来我们决定使用"raspberry"作为更合适的水果，因为有时候苹果是绿色或黄色的。要将"apple"替换为"raspberry"，我们将`colorFruits["red"]`设置为新的值➊。

你可能记得我们之前是用相同的方式将新值添加到字典中的。如果键已经存在于字典中，则该键的值将被替换。如果键不存在，则新键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有`isEmpty`属性和`count`属性。例如，下面的代码展示了如何使用`isEmpty`属性来检查字典是否为空，如果字典不为空，`count`属性可以检查字典中有多少项。假设你有一个待售的水果篮子。你可以利用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，包含字典的所有键，以及`values`，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。由于每个项目都有一个键和值，因此你可以用两种不同的方式来遍历字典。下面是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性➊来遍历 fruitBasket 并打印其内容。我们从写`for`关键字开始，后面跟一个常量名`fruit`表示字典的键，再加上`in`关键字，接着是字典的名称，接着是一个点，最后是`keys`。

在`for-in`循环的花括号内，我们可以访问到键（我们称之为`fruit`➋）以及该键对应的值，强制解包其内容`fruitBasket[fruit]!`➌后，该值将是水果的价格。

在这种情况下，由于我们知道所使用的`fruit`键肯定在字典中，因此可以安全地使用感叹号强制解包值。

我们放在`for-in`循环内部的任何代码都会为字典中的每个键执行一次。所以你应该看到`print`语句被打印三次。

我们也可以使用字典的`values`属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的`for-in`循环，但现在我们使用常量来引用`values`属性中的每个值，我们称之为`price`。在遍历`values`时，我们无法从循环内访问键。

另一个需要注意的区别是，`price`不是可选的，因为它是直接作为值访问`fruitBasket`字典中的内容。这意味着我们不需要解包它。你应该仍然能看到`print`语句被打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按数字顺序排列！由于顺序无法保证，如果你再次运行相同的代码，打印出来的顺序可能会不同。

### 你学到了什么

在本章中，你学习了如何将多个项目存储在数组和字典中。要将项目存储在一个有序的列表中，你可以使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，则应使用字典。

了解数组和字典及其用法是几乎所有编程语言中的一个强大基础。接下来，我们将学习函数，这是另一项非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。编写函数后，你可以通过它的名称在程序中的任何地方调用它。

有多种方法可以从数组中移除项目。我们首先来看数组的 removeLast() 方法。你或许可以从名字猜到，removeLast() 会移除数组中的最后一项。我们来尝试一下 shoppingList 数组：

![](img/Image00126.jpg)

很棒！注意，removeLast() 方法会返回被移除的项目，所以如果需要，你可以将其存储在一个新的常量或变量中。

你也可以通过使用 remove(at:) 方法从特定索引移除项目。假设你的妈妈不想让你买糖果，于是将其从列表中移除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项目时，所有项目会自动移动以腾出空间一样，如果你从数组中间移除一个项目，其余的项目会自动向前移动，填补空缺。原本位于索引 3 的“苹果”现在位于索引 2 的位置，这里曾经是“糖果”。

你还可以使用 removeAll() 方法移除数组中的所有项目。尝试在你的 Playground 中输入这个命令：

![](img/Image00129.jpg)

请注意，尝试从一个不存在的索引位置移除项目会导致错误：

![](img/Image00130.jpg)

我们的数组中没有这么多项目（事实上，现在它已经空了！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为数组中没有任何元素——根本没有最后一个索引！然而，removeAll() 方法是始终安全的，即使在空数组上也可以使用。

#### 替换数组中的项目

要替换数组中的一个项目，你需要将该数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊，我们将索引为 2（即第三项）的项目替换为“独角兽”，因为神奇的动物也算是最爱的动物！在 ➋，我们将索引为 0（即第一项）的项目替换为“须龙”。不，这可不是一条真正的龙——它只是一个蜥蜴！

就像处理数组索引时一样，必须确保在更改值之前，数组中该索引位置确实有一个项，否则会出现“索引超出范围”错误。

图 6-3 展示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬" 添加元素时发生的错误。要将项目添加到数组的末尾，应该使用 append(_:) 方法或 +=，正如我们在 “向数组添加项” 一节中提到的那样，详见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引范围的值。*

现在你知道如何根据需要更改数组了。你可以添加元素、删除元素或替换元素。接下来，我们将看看如何使用数组的属性来获取更多有关它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法外，数组还有 *属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会使用的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性会根据数组是否为空返回 true 或 false，count 属性会告诉你数组中有多少个元素。

看一下以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则输出 "我没有兄弟姐妹"。但如果数组中有内容，则输出我们有几个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每一项做些事情。你可以使用 for-in 循环来实现！以下代码将打印出 pizzaToppings 数组中的每个配料，每行一个：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，再接着是关键字 in，最后是数组的名称 pizzaToppings。然后，我们将希望对每个 topping 执行的语句放在 for-in 循环的花括号内。常量 topping ➊ 临时代表数组中每个配料项，在我们遍历数组时。我们本可以选择任何名字作为这个常量的名称，但最好选择一个有意义的名称。你可以在图 6-4 中查看这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以利用它们对每个项目执行数学运算，这样可以加速计算！以下代码将取一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一组值的集合，但与有序索引不同，每个值都有自己的 *键* 。由于没有索引，值的存储顺序并不重要。要访问字典中的值，你可以通过它们的键来查找。

一个键必须是唯一的。你不能在同一个字典中有重复的键。如果有两个相同的键，并且你要求计算机给出其中一个的值，计算机就无法知道该选择哪个！

让我们看看如何创建一个字典，并编写键以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后将键和对应的值写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是 *无序的* 。因此，你在结果窗格中看到的状态顺序 ➋ 可能与输入状态的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一个分数的集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，而所有的值必须是字符串。同样，你会发现结果窗格中的数字顺序可能与在字典中编写分数时的顺序完全不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们来看看如何做！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，不同之处在于你在方括号内使用的是键，而不是索引，就像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式与数组有所不同。当你访问数组中某个索引的值时，你只是得到该值。而在字典中通过键访问值时，你会得到一个可选项。

在第五章中，你学到可选项可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选项的原因是你使用的键可能在字典中不存在，这种情况下没有值可以访问。尝试访问不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选项。这意味着在你使用字典中的任何值之前，你需要先解包它。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if-let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以打印出“我有 Texas 在我的字典中”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“我在字典中没有这个州”。

#### 向字典添加项目

要向字典添加项目，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，你的新字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需要将值设置为 nil。因为字典中的值是以可选项的形式返回的，所以你不必担心 nil 会导致字典中的任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。因此，你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很容易。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们将“红色”对应的值设为“苹果”，但后来我们决定“覆盆子”是一个更合适的水果，因为有时苹果是绿色或黄色的。为了用“覆盆子”替换“苹果”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得这是我们向字典中插入新值的方式。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，那么新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个出售的水果篮子。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们在遍历字典时将使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式来完成此操作。以下是如何使用键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，然后是一个常量名称 fruit 用于字典键，接着是关键字 in，字典名称，句点和 keys。

在 for-in 循环的大括号内部，我们可以访问键（我们称之为 fruit ➋），以及当我们通过强制解包其内容 fruitBasket[fruit]! ➌ 时该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道我们使用的 fruit 键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句执行三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们将其称为 price。当循环遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是 price 不是可选类型，因为它是直接作为字典 fruitBasket 中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句执行三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能和我们的稍有不同。那是因为字典中的项目不像数组中的项目那样按顺序排列！由于顺序不保证，如果你重新运行相同的代码，你可能会看到不同的顺序输出。

### 你学到的内容

在这一章中，你学会了如何在数组和字典中存储项目的集合。要存储有序列表中的项目，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，那么你会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完一个函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

![](img/Image00126.jpg)

很棒！请注意，removeLast()方法会返回被移除的项目，因此你可以将它存储在一个新的常量或变量中，如果你需要的话。

你还可以通过使用 remove(at:)方法从特定的索引移除一个项目。假设你的妈妈不希望你买糖果并把它从清单上拿掉：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加一个项目时，所有的项目都会挪动位置以腾出空间一样，如果你从数组的中间移除一个项目，其余的项目也会移回来填补这个空位。原本位于索引 3 的"苹果"项目现在位于索引 2 的位置，这里原本是"糖果"。

你也可以使用 removeAll()从数组中删除所有项目。试试在你的游乐场中输入这个：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引处的项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为它里面没有任何内容——根本没有最后一个索引！然而，removeAll()在任何情况下都是安全的，即使是空数组。

#### 替换数组中的项目

要替换数组中的项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个项目）处的项目替换为"独角兽"，因为魔法动物也算作最喜欢的动物！在 ➋ 处，我们将索引 0（第一个项目）处的项目替换为"胡须龙"。不，那可不是一条真正的龙——它只是一种蜥蜴！

就像你在处理数组索引时一样，在更改某个索引处的值之前，必须确保该索引处存在项目，否则你会遇到"索引超出范围"的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时发生的错误。要将一个项目添加到数组的末尾，你应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加项目” 中讲解的那样，第 70 页。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组。你可以添加项目、删除项目或替换项目。接下来，我们将探讨如何使用数组的属性来获取更多关于它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了 append(_:) 和 removeLast() 等方法外，数组还有 *属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少项。

查看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项目执行某个操作。你可以使用 for-in 循环来实现！以下代码将在单独的行中打印出 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用关键字 for ，后跟常量 topping ，然后是关键字 in ，最后是我们的数组名称 pizzaToppings 。接着，我们将要对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们循环时临时代表数组中的每个比萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，还可以使用它们对每个项目进行数学运算，这使得计算速度非常快！以下代码获取一个数字数组，并计算每个数字的平方（数字的平方是该数字与它自己相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与数组不同的是，它没有有序的索引，而是每个值都有自己的*键*。由于没有索引，值并不按特定顺序存储。要访问字典中的值，你可以通过其键来查找。

键必须是唯一的。你不能在同一个字典中重复使用相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们来看看如何创建一个字典，并编写键来帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后在一对方括号内写入键和值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和其值之间有一个冒号，键/值对之间由逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果面板 ➋ 中看到的状态顺序，可能与输入状态的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不需要与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用 double 类型作为键，使用 string 类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 double 类型，所有的值必须是 string 类型。同样，你会看到结果面板中数字的顺序可能与在字典中写入分数的顺序差异很大。这没关系，因为你不需要知道顺序就能访问任何东西。你可以通过键找到你需要的任何项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问值，不同之处在于你在方括号中使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的不同。当你访问数组中的一个值时，你只会得到那个值。但当你使用字典的键来访问值时，你将得到一个可选值。

在第五章中，你学习了可选项可能包含值，也可能是 nil。Swift 在你查找字典中的项目时返回可选项的原因是，你使用的键可能在字典中不存在，这种情况下就没有值可访问。尝试访问一个不存在的值会给你带来一个大大的错误！为避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中获取的任何值，然后才能对其进行处理。

要解包可选项，首先你要检查它是否存在，就像我们在第五章中做的那样。以下代码向你展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印出“I have Texas in my dictionary”。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary”。

#### 向字典中添加项目

要向字典中添加项目，首先写出字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，所以新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需将其值设置为 nil。由于字典中的值是作为可选项返回的，因此你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除“MA”键的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你没有看到"MA": nil 出现在我们的字典中。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需要将你想要替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们将“红色”对应的值设为“apple”，但后来我们决定用“raspberry”更合适，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这是我们将新值添加到字典中的方式。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。想象你有一个待售的水果篮子。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和一个值，所以你可以用两种不同的方式来实现。下面是通过字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后面跟着一个常量名 fruit，表示字典的键，接着是关键字 in，字典名，一个点，最后是 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋），以及通过强制解包其内容（使用 fruitBasket[fruit]! ➌）时该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的水果键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。因此，你应该看到打印语句打印三次。

我们还可以通过字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但这次我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历 values 时，循环内部无法访问键。

另一个需要注意的区别是，price 不是可选类型，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，那么你将使用字典。

了解数组和字典及其使用方法，是几乎任何编程语言中强大的构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。编写完函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

很棒！请注意，removeLast()方法会返回被移除的项目，所以如果你需要的话，可以将它存储到一个新的常量或变量中。

你还可以使用 remove(at:)方法从特定索引移除项目。假设你的妈妈不希望你买任何糖果，并将其从列表中删除：

![Image](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们向数组中间添加一个项目时，所有的项目都会向后挪动以腾出空间一样，如果你从数组的中间移除一个项目，其余的项目也会向前挪动，以填补那个空位。原本位于索引 3 的"apples"现在位于索引 2 的位置，即原来"candy"所在的位置。

你还可以使用 removeAll()方法从数组中移除所有项目。试着在你的游乐场中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引位置的项目会抛出错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出错，因为里面没有任何东西——根本没有最后一个索引！然而，removeAll()始终可以安全使用，即使是在空数组上。

#### 替换数组中的项目

要替换数组中的项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们用"Unicorn"替换了索引 2（第三个项目）处的项目，因为神奇动物也算是最爱的动物！在➋处，我们用"Bearded dragon"替换了索引 0（第一个项目）处的项目。不，这不是一条真正的龙——它只是一只蜥蜴！

就像在处理数组索引时一样，你必须确保在修改某个索引位置的值之前，数组中该位置确实存在项目，否则你会遇到"Index out of range"错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时发生的错误。要向数组末尾添加项，你应该使用 append(_:) 方法或 +=，就像我们在 “向数组添加项” 中讲解的那样，见 第 70 页。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加项、删除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数方法外，数组还有 *属性*。数组的属性是包含数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你该数组中有多少项。

查看以下 if-else 语句中这两个属性的使用方式：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项执行相同的操作。你可以使用 for-in 循环来做到这一点！以下代码会在单独的行上打印出 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用关键字 for，接着是常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。然后我们把想要对每个 topping 执行的语句放在 for-in 循环的花括号内。常量 topping ➊ 在我们循环遍历数组时临时代表数组中的每个披萨配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项执行数学运算，这样可以加速计算！以下代码取一个数字数组，并计算每个数字的平方（数字的平方是该数字与其本身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

一个*字典*也是一个值的集合，但与数组不同的是，每个值都有自己的*键*。因为没有索引，值不是按特定顺序存储的。要访问字典中的值，您需要通过它们的键来查找。

键必须是唯一的。您不能在同一个字典中有重复的键。如果有两个相同的键并且您请求计算机返回其中一个的值，计算机将无法知道选择哪一个！

让我们看看如何创建字典并写入键，以帮助您找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写 `var` 和字典的名称。然后在一对方括号内写下键和值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如您所见，键和值之间有一个冒号，键/值对通过逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，您在结果窗格➋中看到的州的顺序可能与您输入州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

与数组一样，您可以使用 `var` 创建一个可变字典，或者使用 `let` 创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果您想存储一个分数集合，可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，您会看到结果窗格中的数字顺序可能与您在字典中写入分数的顺序有很大不同。这是正常的，因为您不需要知道顺序就可以访问任何内容。您可以通过键找到您需要的任何项。让我们看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于您如何在数组中访问值，只不过您使用的是方括号内的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有很大的不同。当您在数组中访问一个索引的值时，您会直接得到这个值。当您通过字典中的键访问一个值时，您得到的是一个可选值。

在第五章中，你学到可选项可能包含一个值，也可能是 nil。当你在字典中查找项时，Swift 返回可选项的原因是你使用的键可能在字典中不存在，这样就没有可以访问的值。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选项。这意味着你需要在对字典中的任何值进行操作之前，解包该值。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊ 。由于字典中有这个州，打印出“我在字典里有 Texas”。

#### 向字典中添加项

要向字典中添加项，首先写出字典的名称，并将新项赋值给你希望它在字典中对应的键。让我们把“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需将值设置为 nil。因为字典中的值是作为可选项返回的，所以你无需担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”对应的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。这就是为什么在我们的字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它和替换数组中的项一样。你只需将你要替换的项设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们将"red"对应的值设为"apple"，但后来我们认为"raspberry"是更好的水果，因为有时苹果是绿色或黄色的。要将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为新的值 ➊。

你可能记得这与我们向字典中插入新值的方式相同。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也具有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查你有多少项。假设你有一个水果篮子出售。你可以使用这些属性帮助你跟踪所有物品：

![图片](img/Image00148.jpg)

字典还具有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式来做到这一点。这是使用字典的键遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写下关键字 for 开始，后跟一个常量名称 fruit 作为字典的键，关键字 in，字典名称，句点，以及 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及该键对应的值，当我们强制解包其内容时，使用 fruitBasket[fruit]! ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 fruit 键一定存在于字典中。

我们在 for-in 循环中放入的任何代码都会在字典中的每个键上执行一次。所以你应该看到打印语句会显示三次。

我们还可以使用字典的 values 属性遍历字典：

![图片](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用每个值，称为 price，出现在 values 属性中。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是 price 不是一个可选类型，因为它是直接作为值访问字典中的 fruitBasket 字典。这意味着我们不需要解包它。你仍然会看到打印语句被打印三次。图 6-6 显示了两次循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，打印出的顺序可能会不同。

### 你学到了什么

在本章中，你学会了如何将项存储在数组和字典中。为了将项存储在有序列表中，你需要使用数组，并通过索引查找每个项。如果你想按键存储项，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一块代码，用于执行特定任务。编写了一个函数后，你可以通过它的名称在程序的几乎任何地方调用它。

你还可以使用 remove(at:)方法从特定索引中删除一个项。假设你的妈妈不希望你买糖果，并把它从列表中拿掉：

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有项都会挪动以腾出空间一样，如果你从数组中间删除一项，其他项将会挪回去填补那个空位。原来在索引 3 处的“苹果”项现在位于索引 2 的位置，这里原来是“糖果”。

你还可以使用 removeAll()删除数组中的所有项。试着将这个输入到你的游乐场中：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引项会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会得到错误，因为数组里什么都没有——根本没有最后一个索引！然而，使用 removeAll()是始终安全的，即使在空数组上也能使用。

#### 替换数组中的项

要替换数组中的项，你可以将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们用“独角兽”替换了索引 2（第三个项目）中的项，因为魔法动物也算作是最喜欢的动物！在➋处，我们用“有须龙”替换了索引 0（第一个项目）。不，那可不是一条真正的龙——它只是一个蜥蜴！

就像你在操作数组索引时一样，必须确保该索引处存在一个项，否则你将遇到“索引超出范围”的错误。

图 6-3 展示了当你尝试使用 favoriteAnimals[3] = "标准贵宾犬"添加“标准贵宾犬”时发生的错误。要将项添加到数组末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项”中讲解的那样，见第 70 页。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要修改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何利用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数外，数组还具有*属性*。数组的属性是包含一些关于数组的信息的变量或常量。你可能会使用的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性为 true 或 false，具体取决于数组是否为空，而 count 属性将告诉你数组中有多少个项目。

查看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印"我没有兄弟姐妹。"。但如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在使用数组时，你可能希望对数组中的每个项目做一些操作。你可以使用 for-in 循环来做到这一点！以下代码将会把 pizzaToppings 数组中的每个配料打印在单独的一行上：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将希望对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊临时代表我们在循环中遍历的每个披萨配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以使用它们对每个项目执行数学运算，这样可以快速进行计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它本身）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典非常重要！

*字典*也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过它们的键进行查找。

一个键必须是唯一的。在同一个字典中，不能有相同的键。如果有两个相同的键，当你请求计算机返回其中一个的值时，计算机将不知道选择哪个！

让我们来看一下如何创建一个字典，并编写键来帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后将键和相应的值写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格 ➋ 中看到的状态顺序可能与输入状态的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型，所有的值必须是字符串类型。同样，你会发现结果窗格中数字的顺序与在字典中写下分数的顺序可能会有所不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到任何需要的项。让我们来看一下如何操作！

#### 访问字典中的值

查找字典中的值与访问数组中的值类似，只是你在方括号内使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典值的方式有一个很大的不同。当你访问数组中的索引值时，你只会得到该值。而当你使用键访问字典中的值时，你会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是在查找字典中的项时，使用的键可能不存在于字典中，在这种情况下就没有值可以访问。尝试访问不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，然后才能对其进行处理。

要解包一个可选值，首先你检查它是否存在，方法是使用 if-let 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，所以会打印出“我在我的字典中有德克萨斯州”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我字典中没有这个州”。

#### 向字典添加项目

要向字典添加一个项目，首先写下字典的名称，并将新项目赋值给你想要在字典中对应的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，你的新字典项目可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目是相当简单的；你只需要将该值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键 "MA" 对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。因此，你在字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需要将你想替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们将“红色”对应的值设为“苹果”，但后来我们决定“覆盆子”是一个更好的水果，因为有时苹果是绿色或黄色的。为了将“苹果”替换为“覆盆子”，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这与我们向字典中插入新值的方式是一样的。如果键已经存在于字典中，那么该键的值将被替换。如果键尚不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性可以检查你有多少个项目。假设你有一个待售的水果篮子。你可以使用这些属性来帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。在循环遍历字典时，我们会使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式来做到这一点。这是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们首先写关键词 for，然后是常量名称 fruit（作为字典键），接着是关键词 in，字典名称，一个点，和 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）和该键的值，当我们通过 fruitBasket[fruit]! 强制解包其内容时 ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们放在 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在循环遍历 values 时，我们无法在循环内访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为字典中值的一部分来访问的。这意味着我们不需要解包它。你应该仍然看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与你看到的稍有不同。这是因为字典中的项不像数组那样有编号顺序！由于顺序不保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要在有序列表中存储项目，你将使用数组，并通过索引查找每个项目。如果你想按键存储项目，那么你会使用字典。

了解数组和字典，以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。编写完一个函数后，你可以使用它的名字在程序中的几乎任何地方调用它。

![图片](img/Image00127.jpg)![](img/Image00128.jpg)

就像当我们向数组中间添加一个元素时，所有元素都会移动以腾出空间一样，如果你从数组中间移除一个元素，其余的元素将会向回移动以填补那个空白位置。原本在索引 3 位置的"apples"元素现在在索引 2 的位置，那里原本是"candy"。

你也可以使用 removeAll()方法移除数组中的所有元素。试着在你的游乐场中输入以下内容：

![](img/Image00129.jpg)

请注意，尝试移除一个不存在的索引位置的元素会导致错误：

![](img/Image00130.jpg)

我们的数组并没有这么多元素（事实上，现在它是空的！），所以这会抛出一个错误。如果我们对空数组使用 removeLast()，也会出现错误，因为数组中没有任何元素——根本没有最后一个索引！然而，removeAll()方法是安全的，即使在空数组上使用也不会出错。

#### 替换数组中的元素

要替换数组中的一个元素，你只需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们用"Unicorn"替换了索引 2（第三个元素）上的元素，因为魔法动物也是最喜欢的动物！在➋处，我们用"Bearded dragon"替换了索引 0（第一个元素）上的元素。不是的，那不是龙——它只是只蜥蜴！

像处理数组索引一样，你必须确保数组中在该索引处存在元素，才可以修改它的值，否则会得到“索引超出范围”的错误。

图 6-3 展示了当你尝试使用 favoriteAnimals[3] = "Standard poodle"添加"标准贵宾犬"时出现的错误。要将一个元素添加到数组的末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加元素”中在第 70 页讨论的那样。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引位置的值。*

现在你知道如何根据需要修改数组了。你可以添加元素、移除元素，或者替换元素。接下来，我们将看看如何利用数组的属性获取更多关于数组的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了 append(_:)和 removeLast()等方法，数组还具有*属性*。数组的属性是包含关于数组某些信息的变量或常量。有两个非常有用的属性，你可能会用到：布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则会告诉你数组中有多少个项。

查看下面的 if-else 语句中这两个属性的使用方法：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时候，当你在处理数组时，可能想对数组中的每个项做一些事情。你可以使用 for-in 循环来实现！以下代码将在每一行打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，再是关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将想要为每个配料执行的语句放入 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时，暂时代表数组中的每个配料。我们本可以选择任何名称，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项执行数学运算，这样可以加速计算！以下代码取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序的索引，每个值都有自己的 *键*。因为没有索引，值不会以特定的顺序存储。要访问字典中的值，您可以通过键查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键多次。如果有两个相同的键，而你要求计算机给你其中一个的值，计算机就不知道选择哪个了！

让我们来看看如何创建一个字典，并编写键来帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后，将键和相应的值写在一对方括号中，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对通过逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的状态顺序 ➋ 可能与你输入状态的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到在结果窗格中数字的顺序可能与在字典中写入的分数顺序大不相同。这是正常的，因为你无需知道顺序就能访问任何内容。你可以通过键找到任何需要的项目。让我们看看如何做！

#### 在字典中访问值

在字典中查找值类似于你在数组中访问值的方式，只是你使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有一个很大的区别。当你在数组中按索引访问一个值时，你会直接得到值。当你在字典中通过键访问一个值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能不存在于字典中，在这种情况下，就没有值可供访问。试图访问一个不存在的值会导致一个严重的错误！为避免这个问题，Swift 返回可选值。这意味着你在使用字典中的任何值之前需要解开它。

要解开一个可选值，首先你需要检查它是否存在，使用 if-let 语句，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“德克萨斯”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印了“我在字典中有德克萨斯”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到该州时，程序不会崩溃。相反，打印了“我在字典中没有那个州”。

#### 向字典添加项

向字典中添加项目时，首先写下字典的名称，并将新项目赋给你想要的键。让我们把 "Minnesota" 添加到 `usStates` 字典中：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项目可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需要将值设置为 `nil`。因为字典中的值是可选的，你无需担心 `nil` 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除 "MA" 键对应的值后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，表示根本没有值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它与替换数组中的项目相同。你只需将你想替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们给 "red" 键的值是 "apple"，但后来我们决定 "raspberry" 是更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果字典中已经存在该键，那么该键的值会被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果不为空，`count` 属性可以检查你有多少个项目。想象一下你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键，以及 `values`，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种不同的方式来实现这一点。以下是通过字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in、字典名称、一个句点和 keys。

在我们的 for-in 循环的大括号内，我们既可以访问键（我们称之为 fruit ➋），也可以通过强制解包 fruitBasket[fruit]! ➌ 来访问该键对应的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每一个键执行一次。所以你应该看到 print 语句打印三次。

我们还可以通过字典的值属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用每个值，我们称之为 price，来自 values 属性。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的不同之处是，price 不是一个可选类型，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你应该仍然看到 print 语句打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在这一章中，你学习了如何在数组和字典中存储项。要存储有序的列表项，你可以使用数组并通过索引查找每个项。如果你想按键存储项，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中非常强大的构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完一个函数后，你可以通过它的名字在程序的几乎任何地方调用它。

![](img/Image00128.jpg)

就像我们在数组中间添加项时，所有的项都会移位以腾出空间一样，如果你从数组中间移除一个项，其余的项会向回移动，以填补那个空位。原本在索引 3 位置的 "apples" 现在在索引 2 位置，原来的 "candy" 被挤到后面去了。

你还可以使用 removeAll() 从数组中删除所有项。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在的索引项会导致错误：

![](img/Image00130.jpg)

我们的数组中没有这么多项（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会报错，因为数组中没有元素——根本没有最后一个索引！然而，使用 removeAll() 总是安全的，即使是在空数组上。

#### 替换数组中的元素

要替换数组中的元素，你只需要将数组的某个索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个元素）的项替换为“独角兽”，因为神奇的动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个元素）的项替换为“胡须龙”。不，这不是一只真正的龙——它只是一只蜥蜴！

每当你处理数组索引时，你必须确保该索引处有一个元素，否则在修改其值时会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 添加“标准贵宾犬”时会发生的错误。要将项添加到数组的末尾，应该使用 append(_:) 方法或 += 运算符，就像我们在 “向数组添加项” 第 70 页中讨论的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要修改数组了。你可以添加元素、移除元素或替换元素。接下来，我们将了解如何使用数组的属性来获取更多有关数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数方法外，数组还有一些 *属性* 。数组的属性是包含有关数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空来返回 true 或 false，而 count 属性则会告诉你数组中有多少个元素。

查看以下 if-else 语句中这两个属性的使用方法：

![Image](img/Image00134.jpg)

该 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印“我没有兄弟姐妹。”如果数组中有元素，则会打印出兄弟姐妹的数量：“我有 3 个兄弟姐妹。” ➋ 。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个元素执行某些操作。你可以使用 for-in 循环来实现这一点！以下代码将在每一行打印出 pizzaToppings 数组中的每一个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后面是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。接着我们将希望对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时，暂时代表数组中的每一个比萨配料。我们本可以为这个常量选择任何名字，但最好选一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每一个值。如果你正在处理数字，甚至可以用它们对每个项进行数学运算，这样就能快速进行计算！以下代码会对一个数字数组进行遍历，并计算每个数字的平方（数字的平方就是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

一个*字典*也是一个值的集合，但是与有序索引不同，每个值都有它自己的*键*。由于没有索引，值的存储顺序没有特定要求。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，且你要求计算机给出其中一个的值，计算机将不知道选择哪个！

让我们来看一下如何创建一个字典，并编写能够帮助你找到所有所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写 var 和字典的名称。然后，在一对方括号中写入键和值对，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，并且键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序*的。因此，你在结果面板中看到的状态顺序➋可能与输入状态的顺序➊不同。它甚至可能与本书中列出的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用 doubles 作为键，使用 strings 作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 doubles，所有的值必须是 strings。同样，你会看到结果窗格中的数字顺序可能与在字典中编写分数的顺序完全不同。这没关系，因为你不需要知道顺序就能访问任何项目。你可以通过键来找到你需要的任何项目。我们来看看怎么做！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只是你在方括号内使用的是键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典返回值的方式有很大不同。当你访问数组中某个索引的值时，你只会得到那个值。而当你通过字典中的键访问值时，你会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个严重的错误！为避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们的字典中有这个州，所以会打印出“我在字典中有 Texas”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我在字典中没有这个州”。

#### 向字典添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项目可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中删除项非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，所以你无需担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在删除了键“MA”对应的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你不会在字典中看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需要将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始我们将“apple”赋值给了“red”，但后来我们决定使用“raspberry”作为更合适的水果，因为有时候苹果是绿色或黄色的。要将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值➊。

你可能还记得，这与我们向字典中输入新值的方式是一样的。如果字典中已存在该键，则会替换该键的值。如果该键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性则用来检查字典中有多少项。假设你有一个出售的水果篮，你可以利用这些属性来帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮，并打印每种水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环来遍历字典。因为每个项都有一个键和值，你可以用两种不同的方式来实现这一点。这是如何通过字典的键来循环遍历字典：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性➊来循环遍历 fruitBasket 并打印它的内容。我们从写出关键字 for 开始，接着是一个常量名称 fruit 代表字典的键，关键字 in，字典名称，句点，最后是 keys。

在我们的 for-in 循环的花括号内，我们可以访问到键（我们称其为 fruit➋）以及通过强制解包 fruitBasket[fruit]!➌获取的该键的值。这个值将是水果的价格。

在这种情况下，强制解包值是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们在 for-in 循环中放入的任何代码都会对字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price ，它在 values 属性中。当遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值进行访问的。这意味着我们不需要解包它。你应该仍然会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。这是因为字典中的项不像数组中的项那样按数字顺序排列！由于顺序无法保证，因此如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。为了将项存储在有序列表中，你会使用数组，并通过索引查找每一项。如果你想按键存储项，则会使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数之后，你可以通过它的名字在程序中的几乎任何地方调用它。

就像我们将项添加到数组的中间时，所有项都向后移动以腾出空间一样，如果你从数组中间删除一项，其余项将会向前移动填补空位。原本在索引 3 处的 "apples" 项现在位于索引 2 处，原来 "candy" 所在的位置。

你也可以使用 removeAll() 删除数组中的所有项。尝试将其输入到你的 Playground 中：

![](img/Image00129.jpg)

请注意，尝试删除一个不存在索引的项会给出错误：

![](img/Image00130.jpg)

我们的数组没有这么多项（事实上，现在它是空的！），所以会抛出一个错误。如果我们在空数组上使用 removeLast()，也会发生错误，因为它里面没有任何内容——根本没有最后一个索引！然而，removeAll() 即使在空数组上使用也是安全的。

#### 替换数组中的项

要替换数组中的项，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引为 2（第三个项目）的项替换为“独角兽”，因为魔法动物也算作喜欢的动物！在➋处，我们将索引为 0（第一个项目）的项替换为“胡须龙”。不，这不是一条真正的龙——它只是一只蜥蜴！

就像每次操作数组索引时一样，你必须确保该索引处的项在数组中存在，才可以更改其值，否则会出现“超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "标准贵宾犬"来添加“标准贵宾犬”时发生的错误。要将项添加到数组的末尾，应该使用 append(_:)方法或+=，正如我们在“向数组中添加项”一节中介绍的那样，在第 70 页中有详细说明。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换数组中不存在的索引处的值。*

现在你知道如何根据需要更改数组。你可以添加项，删除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的方法外，数组还有*属性*。数组的属性是包含关于数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔型属性 isEmpty 和整数型属性 count。

isEmpty 属性为真或假，取决于数组是否为空，而 count 属性将告诉你数组中有多少项。

查看下面这个 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空➊。如果为空，则打印“我没有兄弟姐妹”。如果数组中有内容，则打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。”➋。

#### 遍历数组

有时在操作数组时，你可能希望对数组中的每个项做点什么。你可以使用 for-in 循环来做到这一点！下面的代码将在每一行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是数组名称 pizzaToppings。接着，我们把要在每个配料上运行的语句放在 for-in 循环的大括号内。常量 topping ➊在我们遍历数组时暂时表示数组中的每个披萨配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以利用它们对每个元素执行数学运算，从而进行快速的计算！以下代码获取一个数字数组并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与数组不同的是，每个值都有自己的 *键*。由于没有索引，值并不是按任何特定顺序存储的。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。在同一个字典中，不能有相同的键。如果有两个相同的键，而你要求计算机返回其中一个值，计算机将无法知道选择哪个！

让我们来看一下如何创建一个字典并编写键，以帮助你找到所有所需的信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写上键和值，就像数组一样。让我们创建一个字典，用来存储一些美国州的名字。每个州的键将是其两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间由逗号分隔。

字典与数组的不同之处在于它们是 *无序的*。因此，可能在你的结果面板中看到的州的顺序 ➋ 与你输入州的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，所有的值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度数（doubles）作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，而所有的值必须是字符串。再次提醒，结果面板中数字的顺序可能与你在字典中输入分数的顺序不同。这是可以接受的，因为你不需要知道顺序来访问任何内容。你可以通过键来找到任何你需要的项。让我们看看！

#### 访问字典中的值

在字典中查找值的方式类似于在数组中访问值，不同之处在于你需要使用方括号中的键，而不是索引，像这样：`usStates["TX"]`。

然而，Swift 在从字典返回值时有一个很大的区别。当你访问数组的某个索引值时，你只会得到该值。当你通过字典中的键访问值时，你得到的是一个可选项。

在第五章中，你学到过可选项可能包含一个值，也可能是 `nil`。Swift 在查找字典中的项时返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下没有值可供访问。尝试访问一个不存在的值会给你带来一个大错误！为了避免这个问题，Swift 返回了可选项。这意味着在你对字典中的值进行任何操作之前，你需要解包它。

要解包一个可选项，首先你需要通过 `if-let` 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 `if let` 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为我们在字典中有这个州，所以会打印 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 `usStates["FL"]` ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 `if-let` 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印 "I don't have that state in my dictionary."。

#### 向字典中添加项

向字典添加项，首先写下字典的名称，并将新项分配给你希望它拥有的键。让我们将 "Minnesota" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

当你查看 `usStates` 时，你会发现它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将值设置为 `nil`。因为字典中的值是作为可选项返回的，所以你不需要担心 `nil` 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在删除键"MA"的值后，`usStates` 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，表示没有值。这就是为什么在我们的字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将你想替换的项设置为其他值。例如，你可以创建一个描述水果颜色的字典：

![](img/Image00146.jpg)

最初我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是更好的水果选择，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这与我们向字典中添加新值的方式是一样的。如果字典中已经存在该键，那么该键的值将被替换。如果字典中没有该键，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则用来检查字典中有多少项。假设你有一个水果篮子要出售。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，因此你可以用两种不同的方式进行循环。这是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，然后是字典键的常量名称 fruit，关键字 in，字典名称，一个句点，最后是 keys。

在我们的 for-in 循环的花括号内，我们可以访问到键（我们称之为 fruit ➋），以及通过强制解包其内容的 fruitBasket[fruit]! ➌ 来获取该键对应的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的水果键一定在字典中。

我们在 for-in 循环内放置的任何代码都将针对字典中的每个键执行一次。所以你应该看到打印语句显示了三次。

我们还可以使用字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但这次我们使用一个常量来引用 values 属性中的每个值，我们称其为 price。在遍历 values 时，我们无法从循环内访问到键。

另一个需要注意的区别是，价格不是一个可选值，因为它是直接作为字典中 fruitBasket 的值访问的。这意味着我们不需要解包它。你仍然应该能看到打印语句打印了三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项目不像数组那样按数字顺序排列！并且因为顺序不保证，你可能会看到不同的顺序，如果再次运行相同的代码。

### 你学到的内容

在本章中，你学习了如何在数组和字典中存储项目。为了将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中一个强大的构建模块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。在你写完一个函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

你还可以使用 removeAll() 从数组中移除所有项目。试着在你的 playground 中输入这个：

![](img/Image00129.jpg)

请注意，尝试在一个不存在的索引位置移除项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以这会抛出一个错误。如果我们对空数组使用 removeLast() ，也会得到错误，因为数组中没有任何内容——根本没有最后一个索引！不过，removeAll() 即使在空数组上也始终安全使用。

#### 替换数组中的项目

要替换数组中的一个项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三个项目）处的项目替换为 "独角兽"，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引 0（第一个项目）处的项目替换为 "胡须龙"。不，这不是一条真正的龙——它只是一只蜥蜴！

就像每次你在处理数组索引时一样，你必须确保在该索引位置存在某个项目，否则会得到“索引超出范围”错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 来添加 "标准贵宾犬" 时会发生的错误。要将项目添加到数组的末尾，应该使用 append(_:) 方法或 += ，正如我们在 “向数组添加项目” 中第 70 页 所讲的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你知道如何根据需要更改数组了。你可以添加项目、移除项目或替换项目。接下来，我们将了解如何使用数组的属性来获取更多信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则会告诉你数组中有多少项。

请查看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，那么打印出“我没有兄弟姐妹。”。但如果数组中有内容，则打印出我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项做一些操作。你可以使用 for-in 循环来做到这一点！以下代码将打印 pizzaToppings 数组中的每个配料，每个配料都在单独的一行显示：

![Image](img/Image00135.jpg)

为了写一个针对 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接着我们将希望在每个 topping 上执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们循环数组时，暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名称，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以用它们对每个项进行数学运算，这样就能进行快速的计算！以下代码接收一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它本身）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但不同于有序索引的是，每个值都有自己的*键*。由于没有索引，值不会按照特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，并且你要求计算机给你其中一个键的值，计算机就无法知道该选择哪个！

让我们来看看如何创建一个字典，并编写键来帮助你查找所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 `var` 和字典的名称。然后将键及对应的值放入一对方括号中，类似于数组。我们来创建一个字典来存储一些美国州的名字。每个州的键将是其两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为字典是*无序的*。因此，你在结果面板➋中看到的州的顺序很可能与输入州的顺序➊不同，甚至可能与本书中打印的顺序也不同！

与数组一样，你可以使用 `var` 来创建一个可变字典，或使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以使用 `double` 类型作为键，`string` 类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 `double` 类型，所有的值必须是 `string` 类型。再次提醒你，结果面板中的数字顺序可能与你在字典中写入分数的顺序非常不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项目。让我们来看一下！

#### 访问字典中的值

在字典中查找一个值类似于如何在数组中访问值，只不过你需要在方括号内使用一个键，而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中，从字典中返回值的方式与访问数组中的值有很大不同。当你访问数组中某个索引的值时，你直接获得该值。而当你通过键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 `nil`。Swift 返回可选值的原因是，当你在字典中查找项目时，你使用的键可能在字典中不存在，在这种情况下没有值可以访问。尝试访问一个不存在的值会给你带来一个大大的错误！为避免这个问题，Swift 返回了可选值。这意味着，在你做任何操作之前，你需要解包从字典中获取的任何值。

要解包一个可选值，首先你需要用 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项目

要向字典中添加一个项目，首先写下字典的名称，并将新项目分配给字典中你想要的键。我们来向 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项目可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键为 "MA" 的值后，usStates 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作原理与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们给 "red" 配置了值 "apple"，但后来我们决定使用 "raspberry" 作为更合适的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为其新值 ➊ 。

你可能记得，这与我们向字典中添加新值的方法相同。如果该键已经存在于字典中，那么该键的值会被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查字典中有多少项。假设你有一篮子待售的水果，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以通过两种不同的方式进行遍历。这是通过字典的键进行遍历的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket，并打印其内容。我们首先写下关键字 for，接着是常量名称 fruit（用于字典键），关键字 in，字典名称，一个句点，以及 keys。

在 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋）以及通过 fruitBasket[fruit]! ➌ 强制解包获取的该键的值。该值将是水果的价格。

在这种情况下，强制解包值时使用感叹号是安全的，因为我们知道正在使用的水果键肯定存在于字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键执行一次。因此，你应该看到打印语句会显示三次。

我们还可以通过字典的 values 属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环方式，但现在我们使用常量来引用每个值，我们将其称为 price，位于 values 属性中。在遍历值时，我们无法从循环内部访问键。

另一个值得注意的区别是，price 不是一个可选值，因为它是通过直接在 fruitBasket 字典中访问而获取的。这意味着我们不需要解包它。你仍然应该看到打印语句会打印三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！并且因为顺序无法保证，你可能会在再次运行相同代码时看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你将使用数组，并通过索引查找每个项目。如果你想按键存储项目，你则需要使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![](img/Image00129.jpg)

注意，尝试删除一个不存在的索引处的项目将导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多的元素（事实上，它现在是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会出现错误，因为数组里没有任何东西——根本没有最后一个索引！然而，removeAll()总是安全可用的，即使是在空数组上。

#### 替换数组中的元素

要替换数组中的元素，你只需要将数组的索引设置为新的值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引为 2（第三项）的元素替换为“独角兽”，因为魔法动物也算作最喜欢的动物！在➋处，我们将索引为 0（第一项）的元素替换为“有鬃蜥蜴”。不，这可不是一条真的龙——它只是只蜥蜴！

就像在处理数组索引时一样，在你更改数组中某个元素的值之前，必须确保该索引处的元素存在，否则你会得到“索引超出范围”的错误。

图 6-3 展示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬"来添加“标准贵宾犬”时发生的错误。要将一个项目添加到数组的末尾，你应该使用 append(_)方法或+=，就像我们在“向数组添加项目”中讲到的那样，在第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引处的值。*

现在你已经知道如何根据需要更改数组。你可以添加元素，删除元素或替换元素。接下来，我们将看看如何使用数组的属性来了解更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_)和 removeLast()这样的操作方法外，数组还有*属性*。数组的属性是包含关于数组的一些信息的变量或常量。你可能会使用的两个非常有用的属性是布尔型属性 isEmpty 和整数型属性 count。

isEmpty 属性的值为真或假，取决于数组是否为空，count 属性会告诉你数组中有多少个元素。

看一下以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空➊。如果为空，那么会打印出“我没有兄弟姐妹。”如果数组中有内容，则会打印出我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。”➋。

#### 循环遍历数组

有时在操作数组时，你可能想对数组中的每一项进行操作。你可以使用 for-in 循环来实现！以下代码将在每一行打印 pizzaToppings 数组中的每一项：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是数组名称 pizzaToppings。然后，我们将要对每个配料执行的语句放在 for-in 循环的大括号中。常量 topping ➊在我们循环时临时代表数组中的每个比萨配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例中的 for-in 循环输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以用它们对每个项执行数学运算，这样可以加快计算速度！以下代码接收一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以自身）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，不同于有序索引，每个值都有自己独立的*键*。由于没有索引，值并不会按照特定的顺序存储。要访问字典中的值，可以通过键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，且你要求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们来看看如何创建字典并写入键，以帮助你找到所需的所有信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写下 var 和字典的名称。然后，将键和值对放在一对方括号中，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对之间由逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，结果窗格➋中的状态顺序可能与输入状态➊的顺序不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），而所有的值必须是字符串（strings）。同样，你会看到结果面板中的数字顺序可能与在字典中写入分数时的顺序大不相同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项。让我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于如何在数组中访问一个值，不同之处在于你使用的是方括号中的键，而不是索引，像这样：`usStates["TX"]`。

然而，在 Swift 中从字典返回值的方式有一个很大的不同。当你通过数组的索引访问一个值时，你只会得到那个值。当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 `nil` 。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。尝试访问一个不存在的值会给你带来一个大大的错误！为了避免这个问题，Swift 返回了可选值。这意味着你需要在做任何操作之前解包字典中获取的值。

要解包一个可选值，首先你检查它是否存在，就像我们在第五章中所做的那样。以下代码向你展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 `if let` 来将常量 `loneStarState` 设置为 `usStates["TX"]` ➊ 。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary."。接下来，我们尝试使用 `usStates["FL"]` ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 `if-let` 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加项目，首先写下字典的名称，然后将新项分配给你希望它在字典中对应的键。让我们把“Minnesota”添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已经更新为 `["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]`。记住，因为你不需要依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中删除项非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，因此你无需担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除"MA"键的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。这就是为什么你在我们的字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为"red"的值设置了"apple"，但后来我们决定使用"raspberry"作为更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这与我们将新值输入字典的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查你有多少项。假设你有一个待售的水果篮，你可以使用这些属性帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还具有两个特殊属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们在遍历字典时将使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以用两种不同的方式来做到这一点。这是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是常量名称 fruit 作为字典的键，再加上关键字 in，字典名称，句点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问键，我们称之为 fruit ➋，以及当我们强制解包其内容时，fruitBasket[fruit]! ➌的键对应的值。这个值将是水果的价格。

在这种情况下，由于我们知道所使用的 fruit 键肯定在字典中，因此可以安全地使用感叹号强制解包值。

我们在`for-in`循环中放入的任何代码都会对字典中的每一个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以通过字典的`values`属性来循环遍历它：

![Image](img/Image00150.jpg)

我们使用相同类型的`for-in`循环，但这次我们使用一个常量来引用`values`属性中的每个值，称为`price`。在遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，`price`不是可选值，因为它是直接作为`fruitBasket`字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的项目那样按顺序编号！由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何将一系列项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，可以通过它的名称在程序中的几乎任何地方调用它。

请注意，尝试删除一个不存在的索引处的项目会导致错误：

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），因此会抛出一个错误。如果我们在空数组上使用`removeLast()`，也会出错，因为里面没有任何东西——根本没有最后一个索引！然而，`removeAll()`始终是安全的，即使是在空数组上使用。

#### 替换数组中的项目

要替换数组中的项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三个项目）处的项目替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在➋处，我们将索引 0（第一个项目）处的项目替换为“胡须龙”。不，那不是一条真正的龙——它只是只蜥蜴！

就像在任何时候使用数组索引时，你必须确保该索引处存在项目，否则你会得到“超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 会发生的错误。要将项目添加到数组末尾，应该使用 append(_:) 方法或 +=，就像我们在 “向数组添加项” 中讲解的那样，见第 70 页。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试在超过现有数组范围的索引位置替换值。*

现在你知道如何根据需要修改数组了。你可以添加项、删除项，或者替换项。接下来，我们将了解如何使用数组的属性来获取更多关于它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数方法外，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整型属性 count。

isEmpty 属性的值是 true 或 false，取决于数组是否为空，而 count 属性会告诉你数组中有多少项。

请查看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果是空的，那么会打印出 "我没有兄弟姐妹。"。但如果数组中有内容，那么会打印出我们有几个兄弟姐妹： "我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时候在处理数组时，你可能需要对数组中的每个项目做某些操作。你可以使用 for-in 循环来实现！下面的代码将会把 pizzaToppings 数组中的每个配料单独打印到一行：

![图片](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，再加上关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将想要对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时，临时代表数组中的每一个披萨配料。我们可以为这个常量选择任何名字，但选择一个有意义的名字是个不错的主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环遍历数组是非常适合打印每个值的。如果你在处理数字，你甚至可以用它们对每个项执行数学运算，这样可以进行快速的计算！下面的代码获取一个数字数组，并计算每个数字的平方（数字的平方是这个数字与其本身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序的数组不同，每个值都有自己的*键*。由于没有索引，值不会按任何特定顺序存储。要访问字典中的值，你需要通过它们的键进行查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，并且你要求计算机给你其中一个的值，计算机将不知道选择哪一个！

让我们看看如何创建一个字典，并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上 var 和字典的名称。然后将键及其对应的值写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

正如你所看到的，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与你输入州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，可以使用双精度浮点数（doubles）作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与字典中输入分数的顺序完全不同。这是可以的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。让我们看看如何做！

#### 访问字典中的值

在字典中查找一个值的方式类似于在数组中访问一个值，只不过你在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中，字典返回值的方式有很大不同。当你访问数组中的某个索引时，你只会得到值。当你通过字典中的键访问值时，你会得到一个可选值（optional）。

在第五章中，你学到可选项可能包含一个值，也可能是 nil。Swift 返回可选项的原因是，当你在字典中查找项时，使用的键可能不存在，这样就没有可以访问的值。如果你尝试访问一个不存在的值，程序会报错！为了解决这个问题，Swift 返回可选项。这意味着，在你对字典中取出的任何值进行操作之前，必须先解包它。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"]➊。因为字典中确实有这个州，程序会打印出我在字典中有 Texas。接着，我们尝试使用键 usStates["FL"]➋访问一个不存在于字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃，而是打印出我在字典中没有那个州。

#### 向字典添加项

要向字典添加一项，首先写出字典的名称，并将新项赋值给你想要它所在的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需要将该值设置为 nil 即可。由于字典中的值是作为可选项返回的，你不需要担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除"MA"键的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着完全没有值。这就是为什么你不会在我们的字典中看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式和替换数组中的项一样。你只需要将你想替换的项设置为其他值。比如你创建一个关于水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"指定了"apple"这个值，但后来我们决定使用"raspberry"作为更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为新的值➊。

你可能记得，这是我们向字典中输入新值的相同方式。如果字典中已经存在该键，那么该键的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查你有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有的内容：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含所有的值。我们将在循环遍历字典时使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮并打印每种水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种不同的方式来实现这一点。这是如何使用键遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，后面跟着一个常量名称 fruit 作为字典键，关键字 in，字典名称，句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）和该键的值，当我们使用 fruitBasket[fruit]! ➌ 强制解包它的内容时。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环中放置的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来循环遍历字典：

![图片](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在循环遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是价格不是可选的，因为它是直接作为值访问的，存在于 fruitBasket 字典中。这意味着我们不需要解包它。你应该仍然会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项目不像数组那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。写好函数后，你可以通过其名称在程序中的几乎任何地方调用它。

![](img/Image00130.jpg)

我们的数组没有这么多项目（事实上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 removeLast()，也会发生错误，因为里面没有任何元素——根本没有最后一个索引！然而，removeAll()始终可以安全使用，即使是在空数组上。

#### 替换数组中的项目

要替换数组中的项目，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在➊处，我们将索引 2（第三个项目）处的项目替换为"独角兽"，因为魔法动物也算作最喜欢的动物！在➋处，我们将索引 0（第一个项目）处的项目替换为"胡须龙"。不，这不是一只真正的龙——它只是一个蜥蜴！

就像每次操作数组索引时一样，你必须确保该索引处的数组元素存在，才能修改其值，否则你将遇到索引越界错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 来添加"标准贵宾犬"时出现的错误。要将项目添加到数组的末尾，应该使用 append(_:)方法或+=，正如我们在“向数组添加项目”中第 70 页所讲解的那样。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组索引的地方替换值。*

现在你知道如何根据需要更改数组。你可以添加项目、移除项目或替换项目。接下来，我们将了解如何利用数组的属性获取更多有关它们的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的方法外，数组还有*属性*。数组的属性是包含有关数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

`isEmpty` 属性是 true 或 false，取决于数组是否为空，而 `count` 属性将告诉你数组中有多少个项目。

看一下以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 `mySiblings` 是否为空 ➊。如果为空，则打印“我没有兄弟姐妹”。如果数组中有内容，则打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项目执行某些操作。你可以使用 for-in 循环来实现！以下代码会在新的一行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了编写一个 for-in 循环处理 pizzaToppings 数组，我们使用了关键字 `for`，然后是常量 `topping`，接着是关键字 `in`，最后是数组的名称 `pizzaToppings`。然后，我们把要对每个配料执行的语句放在 for-in 循环的大括号内。常量 `topping` ➊ 在我们遍历数组时，临时代表数组中的每个比萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目进行数学运算，这样就能加速计算！以下代码接收一个数字数组并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但不同于有序的索引，每个值都有自己的*键*。因为没有索引，值不会以任何特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

每个键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，当你要求计算机返回其中一个的值时，计算机将不知道该选择哪个！

让我们来看一下如何创建字典并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 `var` 和字典的名称。然后在一对方括号内写上键及其对应的值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的州的顺序 ➋ 可能与输入这些州时的顺序 ➊ 不同，甚至可能与书中打印的顺序不同！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一个分数集合，可以使用 double 类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 double 类型，所有的值必须是字符串类型。同样，你会发现结果窗格中数字的顺序可能与字典中输入分数的顺序有很大不同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们看看如何实现！

#### 访问字典中的值

在字典中查找一个值类似于你如何在数组中访问一个值，不同之处在于，你使用方括号内的键而不是索引，像这样：usStates["TX"]。

然而，Swift 在返回字典中的值时有一个显著的不同。当你访问数组中某个索引的值时，你只会获得该值。而当你通过键访问字典中的值时，你会获得一个可选项。

在第五章中，你学到可选项可能包含一个值，也可能为 nil。当你查找字典中的项时，Swift 返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问不存在的值会导致一个严重的错误！为避免这种问题，Swift 返回可选项。这意味着，在对字典中的任何值进行操作之前，你需要先解包它。

要解包一个可选项，首先你需要检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为字典中包含这个州，所以会打印出“I have Texas in my dictionary.”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问字典中没有的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary.”。

#### 向字典添加项

要向字典中添加一项，首先写下字典的名称，并将新项赋值给你想要它所在的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需要将值设置为 nil。因为字典中的值是以可选项形式返回的，所以你不必担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在移除键为"MA"的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示完全没有值。这就是为什么在我们的字典中你看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的一项也很简单。它的工作方式和替换数组中的一项一样。你只需将要替换的项设置为其他值。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

一开始我们给 "red" 配置了 "apple" 的值，但后来我们决定 "raspberry" 是更好的选择，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这和我们向字典中添加新值的方式是一样的。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。想象你有一个水果篮子在出售。你可以使用这些属性帮助你跟踪每一样物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每一项都有一个键和值，你可以用两种不同的方式来遍历字典。这是使用键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来循环遍历 `fruitBasket` 并打印其内容。我们从编写 `for` 关键字开始，后面跟上字典键的常量名 `fruit`，然后是 `in` 关键字，字典名称，句点，以及 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键（我们称之为 `fruit` ➋）以及通过强制解包其内容 `fruitBasket[fruit]!` ➌ 后得到的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 `fruit` 键肯定在字典中。

我们在 `for-in` 循环中放入的任何代码都会在字典中的每个键上执行一次。所以你应该会看到打印语句执行三次。

我们也可以通过字典的 `values` 属性进行循环：

![图片](img/Image00150.jpg)

我们使用相同类型的 `for-in` 循环，但现在我们使用一个常量来引用 `values` 属性中的每个值，我们称之为 `price`。当循环遍历 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是一个可选值，因为它是直接作为 `fruitBasket` 字典中的值访问的。这意味着我们不需要解包它。你仍然会看到打印语句执行三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样有编号顺序！由于顺序不保证，如果你重新运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想根据键来存储项目，则会使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

我们的数组没有这么多项目（实际上，现在它是空的！），所以这会抛出一个错误。如果我们在空数组上使用 `removeLast()`，也会得到一个错误，因为它没有任何元素——根本没有最后一个索引！然而，`removeAll()` 即使在空数组上使用也是安全的。

#### 替换数组中的项目

要替换数组中的项目，你需要将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们用 "独角兽" 替换了索引 2 处（第三个项目），因为神奇动物也算作喜爱的动物！在 ➋ 处，我们用 "鬃蜥蜴" 替换了索引 0 处（第一个项目）。不，那不是真正的龙—只是一只蜥蜴！

就像任何时候你在处理数组索引号一样，你必须确保在改变其值之前数组中确实存在该索引处的项目，否则你将会得到一个索引超出范围的错误。

图 6-3 显示了如果尝试使用 favoriteAnimals[3] = "标准贵宾犬" 来添加 "标准贵宾犬" 时发生的错误。要将项添加到数组的末尾，应该使用 append(_:) 方法或 +=，就像我们在 "向数组添加项" 和 "第 70 页" 中介绍的那样。

![图片](img/Image00132.jpg)

*图 6-3：不要试图替换超出现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加、删除或替换项。接下来，我们将看看如何使用数组的属性来获取更多信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法外，数组还有 *属性* 。数组的属性是包含有关数组的某些信息的变量或常量。你可能会使用的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count 。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性将告诉你数组中有多少项。

看看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果是空的，就打印出 "我没有兄弟姐妹。"。但如果数组中有内容，就打印出我们有几个兄弟姐妹： "我有 3 个兄弟姐妹。" ➋ 。

#### 遍历数组

有时候当你在处理数组时，你可能希望对数组中的每个项执行某些操作。你可以使用 for-in 循环来实现这一点！下面的代码将在不同的行上打印出 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将希望在每个配料上运行的语句放在 for-in 循环的大括号内。常量 topping ➊ 临时表示数组中每个披萨配料，我们在循环中遍历它。我们可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以使用它们对每个项目执行数学运算，这样可以进行快速计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与有序索引不同，每个值都有自己的 *键*。由于没有索引，值并不是以任何特定顺序存储的。要访问字典中的值，你可以通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，你请求计算机给出其中一个的值时，计算机就无法知道应该选择哪一个！

让我们来看一下如何制作字典并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上 var 和字典的名称。然后将键和值放在一对方括号中，类似于数组。我们来创建一个字典，用于存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对通过逗号分隔。

字典与数组不同，字典是 *无序的*。因此，你在结果面板中看到的州的顺序 ➋ 很可能与输入州的顺序 ➊ 不同。它甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不一定与值类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次强调，你会发现结果面板中数字的顺序可能与在字典中编写分数的顺序大不相同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找值类似于你在数组中访问值的方式，只是你使用键而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大不同。当你访问数组的索引值时，你会直接得到值。当你使用字典中的键访问值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，或者可能是 nil。Swift 在你查找字典中的项目时返回可选值的原因是，你使用的键可能不存在于字典中，在这种情况下就没有值可访问。尝试访问一个不存在的值会导致一个大错误！为避免这个问题，Swift 返回了可选值。这意味着，在你对从字典中获取的值进行任何操作之前，你需要解包它。

要解包一个可选值，首先你需要检查它是否存在，使用 if-let 语句，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出“我在字典里有 Texas”。接下来，我们尝试使用键 usStates["FL"] ➋ 来访问字典中不存在的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我字典里没有这个州”。

#### 向字典添加项目

要向字典添加项目，首先写出字典的名称，并将新项目赋值给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，你的新字典项目可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需将值设置为 nil。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示没有任何值。因此，你不会在我们的字典中看到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple" ，但是后来我们决定 "raspberry" 是更合适的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry" ，我们将 colorFruits["red"] 设置为它的新值 ➊ 。

你可能还记得，这与我们往字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键/值对将会添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性可以检查你有多少项。想象一下你有一个待售的水果篮。你可以使用这些属性帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys ，包含字典的所有键，和 values ，包含字典的所有值。在我们遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式来实现这一点。这是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先编写关键字 for ，接着是一个常量名称 fruit 用于字典键，然后是 in 关键字，字典名称，句点，以及 keys 。

在我们 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋ ），并且可以强制解包 fruitBasket[fruit] 中的值 ➌ 。该值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放置的任何代码都会为字典中的每个键运行一次。因此你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price 。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选项，因为它是直接作为值访问的，存在于 fruitBasket 字典中。这意味着我们不需要解包它。你应该仍然看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的有所不同。那是因为字典中的项不像数组中的项那样是按编号顺序排列的！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在这一章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则可以使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中的一个强大基础。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以使用其名称从程序的几乎任何地方调用它。

#### 替换数组中的项

要替换数组中的项，你只需将数组的索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引为 2（第三个项目）的项替换为 "独角兽"，因为神奇的动物也算是最喜欢的动物！在 ➋ 处，我们将索引为 0（第一个项目）的项替换为 "胡须龙"。不，那不是一条真正的龙——它只是一只蜥蜴！

像每次你处理数组索引号时一样，在修改值之前，你必须确保数组中该索引位置有项，否则你会遇到索引超出范围的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "标准贵宾犬" 添加“标准贵宾犬”时发生的错误。要向数组末尾添加项，你应该使用 append(_:) 方法或 +=，如我们在 “向数组添加项” 中第 70 页 所讲。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你知道如何根据需要修改数组。你可以添加项，移除项或替换项。接下来，我们将探讨如何使用数组的属性来获取更多关于数组的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法，数组还有 *属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性为 true 或 false，取决于数组是否为空，count 属性则会告诉你数组中有多少项。

请查看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印"我没有兄弟姐妹。"。但如果数组中有内容，则打印我们有几个兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时在处理数组时，你可能希望对数组中的每个项目执行某个操作。你可以使用 for-in 循环来实现！以下代码会在单独的一行上打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将希望对每个配料执行的语句放在 for-in 循环的花括号内。常量 topping ➊ 在我们循环时暂时代表数组中的每个配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名称。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例中的 for-in 循环输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项目进行数学运算，这样可以加速计算！以下代码获取一个数字数组，并计算每个数字的平方（数字的平方是该数字乘以它自身）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一组值，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

一个键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，你让计算机返回其中一个的值，计算机就无法知道该选择哪个！

让我们看看如何创建字典并写出可以帮助你找到所需所有信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写 var 和字典的名称。然后像数组一样，将键和值对写在一对方括号内。让我们创建一个字典，用来存储几个美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间都有一个冒号，键/值对之间由逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格 ➋ 中看到的状态的顺序，很可能与你输入状态的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。再次提醒，结果窗格中的数字顺序可能与您在字典中写入分数的顺序有很大不同。这是正常的，因为你不需要知道顺序来访问任何内容。你可以通过键找到所需的任何项目。让我们来看一下！

#### 访问字典中的值

在字典中查找值类似于在数组中查找值，不同之处在于你使用的是方括号内的键，而不是索引，例如：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的不同。当你访问数组中的一个索引位置的值时，你只会得到该值。而当你使用字典中的键访问值时，你会得到一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个严重错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章 中所做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中获取“德州”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于字典中包含该州，程序会打印出“我在字典中找到了德州”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个字典中不存在的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，程序会打印出“字典中没有这个州”。

#### 向字典添加项

要向字典中添加一个项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们把 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新添加的字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除一项非常简单；你只需将该值设置为 nil。因为字典中的值作为可选项返回，所以你不必担心 nil 会导致字典中的问题。

![](img/Image00145.jpg)

你可以看到，在你删除 "MA" 键对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，它表示没有值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作原理与替换数组中的项相同。你只需要将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple"，但后来我们决定用 "raspberry" 替代，因为有时候苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能记得，这与我们向字典中添加新值的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则用来检查字典中有多少项。假设你有一个水果篮子在出售，你可以使用这些属性帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。我们在遍历字典时会用到这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印出每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来遍历。以下是如何通过键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，接着是常量名 fruit（代表字典的键），然后是关键字 in，字典的名称，点符号，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋），以及通过 fruitBasket[fruit]! ➌ 强制解包后该键对应的值。这个值就是水果的价格。

在这种情况下，由于我们知道所使用的果实键一定在字典中，因此可以安全地使用感叹号强制解包该值。

我们在 for-in 循环中放入的任何代码都会在字典中的每个键上运行一次。因此，你应该会看到打印语句显示三次。

我们也可以使用字典的 values 属性进行循环：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但这次我们使用常量来引用每个值，我们称之为 price，该值来自 values 属性。在循环值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选的，因为它直接作为 fruitBasket 字典中的值进行访问。这意味着我们不需要解包它。你应该仍然会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！并且由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到的内容

在本章中，你学会了如何在数组和字典中存储项。要将项存储在有序列表中，你可以使用数组，并通过索引查找每个项。如果你想按键存储项，则应使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中强大基础构建块之一。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。在编写了一个函数后，你可以通过函数名在程序中的几乎任何地方调用它。

要替换数组中的项，你需要将数组索引设置为新值，如下所示：

![](img/Image00131.jpg)

在 ➊ 处，我们将索引 2（第三项）处的项替换为“独角兽”，因为魔法动物也算是最喜欢的动物！在 ➋ 处，我们将索引 0（第一项）处的项替换为“胡须龙”。不，这不是一只真正的龙——它只是一只蜥蜴！

就像每次你使用数组索引时，你必须确保该索引处的项在数组中存在，才能修改其值，否则你会遇到“超出索引范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle" 添加 "标准贵宾犬" 时出现的错误。要将项目添加到数组的末尾，应该使用 append(_:) 方法或 +=，就像我们在 “向数组添加项” 中所介绍的那样，在 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在超出现有数组范围的索引位置替换值。*

现在你知道如何根据需要更改数组。你可以添加项、删除项或替换项。接下来，我们将了解如何使用数组的属性来获取更多信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的操作方法外，数组还有 *属性*。数组的属性是包含数组相关信息的变量或常量。有两个非常有用的属性，你可能会使用，它们分别是布尔类型属性 isEmpty 和整数类型属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性会告诉你数组中有多少项。

看一下如何在以下 if-else 语句中使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则会打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项目做一些操作。你可以使用 for-in 循环来实现！以下代码会将 pizzaToppings 数组中的每个配料分别打印到新的一行：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。然后我们将希望对每个 topping 执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在循环过程中暂时代表数组中的每个披萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例中 for-in 循环的输出结果*

![Image](img/Image00137.jpg)

使用 for-in 循环很适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目进行数学运算，这样能迅速进行计算！以下代码对一个数字数组中的每个数字计算平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有自己的 *键*。由于没有索引，值不是按任何特定顺序存储的。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，当你要求计算机返回其中一个键的值时，计算机就不知道该选择哪一个！

让我们来看一下如何创建一个字典，并写下键来帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 `var` 和字典的名称。然后，将键和值对写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间由逗号分隔。

字典与数组的不同之处在于它们是 *无序的*。因此，你在结果面板中看到的州的顺序 ➋ 很可能与输入州的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），而所有的值必须是字符串（strings）。再次强调，你会发现结果面板中的数字顺序可能与字典中分数的顺序完全不同。这没关系，因为你不需要知道顺序就可以访问任何内容。你可以通过键找到任何你需要的项。让我们来看一下如何操作！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只是你需要在方括号中使用键，而不是索引，像这样：`usStates["TX"]`。

然而，Swift 在从字典中返回值时有很大不同。当你访问数组中的某个索引的值时，你只会得到那个值。而当你通过键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到过可选项可能包含值，也可能是 nil。Swift 返回可选项的原因是，当你查找字典中的项时，所使用的键可能在字典中不存在，在这种情况下没有值可以访问。尝试访问不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选项。这意味着，在你对字典中的值做任何操作之前，你需要解包它。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 `usStates["TX"]` ➊ 。因为字典中有这个州，"I have Texas in my dictionary." 这行会被打印出来。接下来，我们尝试通过使用键 `usStates["FL"]` ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 这行会被打印出来。

#### 向字典中添加项

要向字典中添加项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

现在当你查看 `usStates` 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"] 。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项也非常简单；你可以通过将值设置为 nil 来实现。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在移除键为 "MA" 的值后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在我们的字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了 "apple" 的值，但后来我们决定 "raspberry" 是更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊ 。

你可能记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，以及 values，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮，并打印出每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来实现这一点。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下 for 关键字，然后是一个常量名 fruit 作为字典的键，接着是 in 关键字、字典名、一个句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键，也就是我们称之为 fruit ➋ 的部分，以及通过强制解包 `fruitBasket[fruit]!` ➌ 获取到的该键对应的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的代码会针对字典中的每个键运行一次。因此，你应该会看到打印语句显示三次。

我们还可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。当遍历 values 时，我们无法在循环内访问到键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序无法保证，如果你重新运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项目。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。在你编写完函数之后，你可以通过它的名字在程序的几乎任何地方调用它。

![](img/Image00131.jpg)

在➊，我们将索引 2（第三项）的项替换为"Unicorn"（独角兽），因为神奇动物也算是最喜欢的动物！在➋，我们将索引 0（第一项）的项替换为"Bearded dragon"（鬃狮蜥）。不，这不是一条真正的龙，它只是一个蜥蜴！

就像任何处理数组索引的情况一样，在你更改数组某个索引值之前，必须确保该索引位置的项存在，否则你会遇到“索引超出范围”的错误。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle"添加"标准贵宾犬"时发生的错误。要将项目添加到数组末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项目”一节中在第 70 页所讲解的那样。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组范围的索引值。*

现在你知道了如何根据需要修改数组。你可以添加项目、移除项目或替换项目。接下来，我们将了解如何使用数组的属性获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:)和 removeLast()这样的函数，数组还有*属性*。数组的属性是包含数组相关信息的变量或常量。你可能会使用的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则会告诉你数组中有多少项。

查看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印"我没有兄弟姐妹。"如果数组中有内容，则打印我们有多少兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时候，在处理数组时，你可能希望对数组中的每个项做某些操作。你可以使用 for-in 循环来做到这一点！下面的代码会将 `pizzaToppings` 数组中的每个 topping 打印在单独的一行上：

![图片](img/Image00135.jpg)

要为 `pizzaToppings` 数组编写一个 for-in 循环，我们使用了关键字 `for`，后面跟着常量 `topping`，然后是关键字 `in`，最后是我们数组的名称 `pizzaToppings`。接着，我们将希望对每个 topping 执行的语句放入 for-in 循环的大括号内。常量 `topping` ➊ 临时表示我们在循环中遍历的每个披萨配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项目执行数学运算，这样就能快速进行计算！下面的代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它自己）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 `myNumbers` 数组中每个数字的平方*

### 字典至关重要！

一个 *字典* 也是一组值，但与有序索引不同，每个值都有自己的 *键*。由于没有索引，值不会以任何特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，并且你要求计算机为其中一个键提供值，计算机将不知道选择哪个！

让我们看看如何创建一个字典，并编写有助于你找到所需信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 `var` 和字典的名称。然后将键和值放在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间由逗号分隔。

字典与数组不同，它们是 *无序的*。因此，结果窗格中你看到的状态顺序 ➋ 很可能与输入状态的顺序 ➊ 不同，甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不一定需要与值的类型相同。例如，如果你想存储一组分数，你可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。同样，你会看到结果面板中数字的顺序可能与字典中书写分数的顺序完全不同。这是可以的，因为你不需要知道顺序来访问任何内容。你可以通过键找到你需要的任何项。我们来看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只是你使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值的方式上有一个很大的不同。当你通过数组的索引访问值时，你会直接得到该值。而当你通过字典中的键访问值时，你得到的是一个可选项。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选项的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会给你一个很大的错误！为了避免这个问题，Swift 返回可选项。这意味着你在使用从字典中获取的任何值之前，需要先解包它。

要解包一个可选项，首先你要检查它是否存在，使用 if-let 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以下面的语句“I have Texas in my dictionary.”会被打印出来。接下来，我们尝试访问一个不在字典中的州，使用键 usStates["FL"] ➋。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出来的是“I don't have that state in my dictionary.”

#### 向字典中添加项目

要向字典中添加项目，首先写下字典的名称，并将新项目分配给你想要在字典中使用的键。我们来将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中删除项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，因此你不必担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 处的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

在字典中替换一个项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为“red”键设置了值“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时苹果是绿色或黄色的。要用“raspberry”替换“apple”，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这就是我们向字典中输入新值的方式。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则可以检查字典中的项目数。假设你有一个售卖的水果篮。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典也有两个特殊的属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们在遍历字典时会使用这两个属性。

让我们写些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来做。以下是通过字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in，字典名称，句点，和 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及该键处的值，当我们通过 fruitBasket[fruit]! 强制解包其内容时 ➌。该值将是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的 fruit 键一定在字典中。

我们在 for-in 循环中放入的任何代码都会对字典中的每个键运行一次。所以你应该会看到打印语句显示三次。

我们还可以通过字典的值属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用值属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是作为 fruitBasket 字典中的值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样有编号顺序！并且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到的内容

在本章中，你学会了如何在数组和字典中存储项目。要在有序列表中存储项，你会使用数组，并通过索引查找每个项。如果你想按键存储项，你应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

在➊处，我们将索引 2（第三项）处的项替换为“独角兽”，因为魔法动物也算作最喜欢的动物！在➋处，我们将索引 0（第一项）处的项替换为“须龙”。不，那不是一种真正的龙——它只是一个蜥蜴！

就像在处理数组索引时一样，你必须确保在该索引位置有一个项存在，再修改其值，否则会出现“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 favoriteAnimals[3] = "Standard poodle"添加“标准贵宾犬”时发生的错误。要将项添加到数组末尾，你应该使用 append(_:)方法或+=，正如我们在“向数组添加项”中讨论的那样，见第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试在数组索引超出范围时替换值。*

现在你知道如何根据需要修改数组了。你可以添加项、删除项或替换项。接下来，我们将看看如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有*属性*。数组的属性是包含数组相关信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，count 属性则告诉你数组中有多少个项目。

查看下面的 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查 mySiblings 数组是否为空 ➊。如果为空，就会打印“我没有兄弟姐妹”。但如果数组里有东西，就会打印我们有多少个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时，在处理数组时，你可能希望对数组中的每个项目做一些操作。你可以使用 for-in 循环来做到这一点！以下代码会将 pizzaToppings 数组中的每个配料单独打印出来：

![Image](img/Image00135.jpg)

在为 pizzaToppings 数组编写 for-in 循环时，我们使用了关键字 for，接着是常量 topping，再是关键字 in，最后是我们的数组名称 pizzaToppings。然后我们把希望在每个配料上运行的语句放到 for-in 循环的括号里。常量 topping ➊ 在我们遍历数组时暂时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以使用它们对每个项目执行数学运算，从而实现快速计算！以下代码会获取一个数字数组，并计算每个数字的平方（数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与数组不同，每个值都有自己的*键*。由于没有索引，值没有按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果存在两个相同的键，且你要求计算机返回其中一个的值，计算机就无法知道应该选择哪一个！

让我们来看看如何创建字典并编写键，帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后在一对方括号内写入键及其对应的值，类似于数组的写法。让我们创建一个字典，用来存储几个美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的状态顺序 ➋ 可能与输入状态的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度数（doubles）作为键，使用字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），所有的值必须是字符串（strings）。同样，你会看到结果窗格中的数字顺序可能与字典中输入的分数顺序非常不同。这没关系，因为你不需要知道顺序来访问任何内容。你可以通过键来找到任何你需要的项。让我们看看如何做到这一点！

#### 访问字典中的值

在字典中查找一个值与访问数组中的值类似，只不过你需要在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大不同。当你在数组的索引位置访问一个值时，你只会得到该值。而在字典中通过键访问一个值时，你得到的是一个可选值。

在第五章中，你学过可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找某个项时，使用的键可能在字典中不存在，这样就没有值可供访问。尝试访问一个不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先通过 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，行“我在字典中有 Texas”会被打印出来。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问字典中不存在的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，“我没有这个州”会被打印出来。

#### 向字典中添加项目

向字典添加项目时，首先写下字典的名称，并将新项目分配给你希望它在字典中具有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，因此你的新字典项目可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项目相当简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，因此你无需担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作原理与替换数组中的项目相同。你只需将你想替换的项目设置为其他值。假设你创建了一个包含水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为“红色”设置了值“apple”，但后来我们决定用“raspberry”替代它，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也具有 isEmpty 属性和 count 属性。例如，以下代码演示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个水果篮子出售，你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种方式来实现。以下是如何使用键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，后跟常量名 fruit 来表示字典的键，再是关键字 in，字典名，一个句点，然后是 keys。

在 for-in 循环的大括号内部，我们可以访问到键，即我们称之为 fruit ➋ ，以及当我们强制解包它的内容（通过 fruitBasket[fruit]! ➌）时，该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们将其称为 price。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是价格不是可选的，因为它是通过直接访问 fruitBasket 字典中的值来获得的。这意味着我们不需要解包它。你应该仍然看到打印语句被打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，则需要使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。在你编写了一个函数之后，你可以通过它的名字在程序中的几乎任何地方调用它。

就像你在处理数组索引时一样，你必须确保在修改数组中某个索引的值之前，该索引处确实存在项，否则你将遇到“索引超出范围”的错误。

图 6-3 显示了如果你尝试通过 `favoriteAnimals[3] = "Standard poodle"` 来添加 "标准贵宾犬"，会出现的错误。要向数组的末尾添加项目，你应该使用 `append(_:)` 方法或 `+=`，就像我们在 “向数组添加项目” 一节中讲到的，在 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要修改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何利用数组的属性获取更多信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 `append(_:)` 和 `removeLast()` 这样的常用方法，数组还有 *属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的 `isEmpty` 属性和整数类型的 `count` 属性。

`isEmpty` 属性会根据数组是否为空返回 `true` 或 `false`，而 `count` 属性则会告诉你数组中有多少个项目。

请查看以下 if-else 语句中这两个属性的使用方式：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 `mySiblings` 是否为空 ➊。如果为空，则打印出 "我没有兄弟姐妹"。如果数组中有内容，则打印出我们有几个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时候在处理数组时，你可能想对数组中的每个元素进行某些操作。你可以使用 `for-in` 循环来实现这一点！以下代码会将 `pizzaToppings` 数组中的每个配料打印在单独的一行上：

![Image](img/Image00135.jpg)

要编写针对 `pizzaToppings` 数组的 `for-in` 循环，我们使用了关键字 `for`，接着是常量 `topping`，然后是关键字 `in`，最后是数组的名称 `pizzaToppings`。然后我们将希望在每次循环时执行的语句放入 `for-in` 循环的大括号内。常量 `topping` ➊ 在我们遍历数组时暂时表示每个比萨配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 `for-in` 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 `for-in` 循环的输出*

![Image](img/Image00137.jpg)

使用 `for-in` 循环是打印数组中每个值的好方法。如果你在处理数字，你甚至可以使用它们对每个元素执行数学运算，这样就能快速进行计算！以下代码接受一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘的结果）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。因为没有索引，所以值并没有按特定顺序存储。要访问字典中的值，你需要通过键查找它们。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，而你要求计算机返回其中一个的值，计算机就不知道该选择哪个！

让我们来看看如何创建一个字典，并编写可以帮助你找到所需信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写 var 和字典的名称。然后在一对方括号内写出键和值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键值对之间由逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板 ➋ 中看到的州的顺序可能与你输入州的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次提醒，你会看到结果面板中的数字顺序可能与字典中分数的顺序完全不同。这是没问题的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们看看如何做到这一点！

#### 访问字典中的值

在字典中查找一个值类似于你如何访问数组中的值，区别在于你使用的是方括号内的键，而不是索引，像这样：usStates["TX"]。

然而，在从字典中返回值时，Swift 有一个很大的区别。当你访问数组中某个索引的值时，你会直接得到该值。当你使用字典中的键来访问一个值时，你会得到一个可选值。

在第五章中，你学到了可选项可能包含一个值，也可能为 nil。当你在字典中查找项目时，Swift 返回可选项是因为你使用的键可能在字典中不存在，在这种情况下没有值可供访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回了可选项。这意味着，在你对字典中的值进行任何操作之前，你需要解包（unwrap）它。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if-let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，"I have Texas in my dictionary." 会被打印出来。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典添加项目

要向字典添加一个项目，首先写出字典的名称，然后将新项目分配给你希望它拥有的键。让我们向我们的 usStates 字典添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，所以新的字典项目可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil。由于字典中的值是以可选项形式返回的，因此你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有任何值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作原理与替换数组中的项目相同。你只需要将你想替换的项目设置为其他值。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为 "red" 设置了值 "apple"，但后来我们决定用 "raspberry" 作为更好的水果，因为有时候苹果是绿色或黄色的。要用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这和我们向字典中插入新值的方法是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，下面的代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果不为空，`count` 属性将检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，包含所有字典的键，以及 `values`，包含所有的值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环来遍历字典。因为每一项都有一个键和值，所以你可以用两种不同的方式来遍历字典。这是通过字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写上 `for` 关键字，接着是字典键的常量名称 `fruit`，然后是 `in` 关键字，接着是字典名称，接着是一个点，最后是 `keys`。

在 `for-in` 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋），以及在强制解包字典内容时使用 `fruitBasket[fruit]!` 获取到的该键对应的值 ➌ 。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们放入 `for-in` 循环中的任何代码都会针对字典中的每一个键执行一次。所以你应该看到打印语句执行三次。

我们也可以通过字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 `for-in` 循环风格，但现在我们使用一个常量来引用每一个值，我们称之为 price ，这个值来自 `values` 属性。在遍历值时，我们无法通过循环内部访问键。

另一个需要注意的区别是，price 不是可选类型，因为它是直接作为 `fruitBasket` 字典中的值来访问的。这意味着我们不需要解包它。你仍然会看到打印语句执行三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按数字顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的知识

在本章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你将使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中一个强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以在程序的几乎任何地方使用它的名称来调用它。

图 6-3 显示了如果你尝试使用 favoriteAnimals[3] = "Standard poodle" 来添加 "Standard poodle" 时发生的错误。要将项目添加到数组的末尾，应该使用 append(_:) 方法或 += ，如我们在 “向数组添加项目” 中所讲的，在 第 70 页。

![Image](img/Image00132.jpg)

*图 6-3：不要尝试替换超过现有数组索引的值。*

现在你知道如何根据需要更改数组了。你可以添加项目、删除项目或替换项目。接下来，我们将看看如何使用数组的属性来获取更多关于数组的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含有关数组信息的变量或常量。有两个非常有用的属性，你可能会用到：布尔型属性 isEmpty 和整型属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则告诉你数组中有多少个项目。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则会打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时当你处理数组时，可能想对数组中的每个项目做一些操作。你可以使用 for-in 循环来做到这一点！以下代码将打印 pizzaToppings 数组中的每个配料，每个配料占一行：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将想要对每个 topping 执行的语句放入 for-in 循环的花括号中。常量 topping ➊ 在我们遍历数组时暂时表示每个比萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环打印数组中的每个值非常方便。如果你在处理数字，你甚至可以利用它们对每个项执行数学运算，这样可以进行快速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它本身）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与数组不同，字典中的每个值都有自己的*键*。由于没有索引，字典中的值没有固定的顺序。要访问字典中的值，你需要通过键来查找它们。

一个键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，而你要求计算机给出其中一个的值，计算机就不知道该选择哪一个！

让我们来看看如何创建一个字典，并编写键值对来帮助你查找所有需要的信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后在一对方括号中写入键和值，类似于数组的方式。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序*的。因此，结果窗格 ➋ 中显示的状态顺序很可能与您输入的状态顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，而字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到结果面板中的数字顺序可能与在字典中写入分数的顺序大不相同。这是可以的，因为你不需要知道顺序就能访问任何项目。你可以通过键找到你需要的任何项目。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值的方式类似于在数组中访问值，不同之处在于，你使用键而不是索引来访问值，例如：usStates["TX"]。

然而，有一个很大的区别，就是 Swift 返回字典中的值的方式。当你通过数组的索引访问一个值时，你会直接得到值。而当你通过字典的键访问一个值时，你得到的是一个可选项。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。Swift 返回可选项的原因是，当你在字典中查找项目时，所用的键可能在字典中不存在，这种情况下就没有值可供访问。如果你尝试访问一个不存在的值，程序会报错！为了避免这种问题，Swift 返回可选项。这意味着，在你对从字典中获取的任何值进行操作之前，你需要解包它。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if-let 来将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃，而是打印出 "I don't have that state in my dictionary."。

#### 向字典添加项目

要向字典添加项目，首先写出字典的名称，然后将新项目分配给你希望它在字典中拥有的键。我们来将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项目可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中移除一个项非常简单；你只需将该值设置为 nil 。由于字典中的值会以可选项形式返回，因此你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除 "MA" 键的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，nil 是特殊的，表示完全没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他内容。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为 "red" 设置了 "apple" 这个值，但后来我们决定使用 "raspberry" 更好，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为新的值 ➊ 。

你可能记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

就像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个出售水果的篮子，你可以利用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还具有两个特殊的属性：keys ，它包含了字典的所有键；以及 values ，它包含了字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来做。以下是通过字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for ，接着是常量名 fruit 作为字典的键，关键字 in ，字典名称，接一个句点，再加上 keys 。

在我们的 for-in 循环的花括号内，我们可以访问到键值，也就是我们称之为果实 ➋ ，以及当我们强制解包 `fruitBasket[fruit]!` ➌ 时该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会在字典的每个键上执行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用一个常量来引用 values 属性中的每个值，称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个值得注意的区别是，price 不是一个可选项，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与你的有所不同。这是因为字典中的项目不像数组那样是按编号顺序排列的！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序被打印出来。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写了一个函数之后，可以在程序中的几乎任何地方通过它的名字来调用它。

![图片](img/Image00132.jpg)

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你知道如何根据需要修改数组。你可以添加项目、移除项目或替换项目。接下来，我们将查看如何使用数组的属性来获取更多关于数组的信息。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含关于数组信息的变量或常量。你可能会使用的两个非常有用的属性是布尔值属性 isEmpty 和整数属性 count。

isEmpty 属性的值为真或假，取决于数组是否为空，count 属性将告诉你数组中有多少个项目。

查看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则会打印我们有多少个兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项目执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将把 pizzaToppings 数组中的每个配料逐行打印出来：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。接着，我们将希望对每个 topping 执行的语句放在 for-in 循环的花括号内。常量 topping ➊在我们遍历数组时临时代表数组中的每个披萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名称。你可以在图 6-4 中查看这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以用它们对每个项目进行数学运算，这样就能快速进行计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方就是它自己与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。因为没有索引，值并没有按照特定顺序存储。要访问字典中的值，您需要通过其键查找它们。

一个键必须是唯一的。在同一个字典中，不能有相同的键。如果有两个相同的键，而你要求计算机给出其中一个的值，计算机就无法知道选择哪个！

让我们来看看如何创建字典并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先编写 var 和字典的名称。然后，在一对方括号内写入键和值对，类似于数组。让我们创建一个字典，用来存储一些美国州的名称。每个州的键将是其两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对之间由逗号分隔。

字典不同于数组，因为它们是*无序的*。因此，结果面板中显示的状态顺序➋可能与您输入的状态顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相匹配。例如，如果你想存储一个分数的集合，可以将键使用双精度数（doubles），而值使用字符串（strings）：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），而所有的值必须是字符串（strings）。再次提醒你，结果面板中的数字顺序可能与在字典中编写分数的顺序大不相同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何需要的项。让我们看看怎么做！

#### 访问字典中的值

查找字典中的值与访问数组中的值类似，区别在于你使用的是方括号内的键，而不是索引，例如：usStates["TX"]。

然而，在 Swift 中从字典中返回值的方式有一个很大的区别。当你访问数组中某个索引的值时，你只会得到那个值。当你使用键从字典中访问一个值时，你会得到一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在查找字典项时返回可选值的原因是你使用的键可能不存在于字典中，在这种情况下是没有值可以访问的。尝试访问一个不存在的值会给你一个严重的错误！为了避免这个问题，Swift 返回了可选值。这意味着在你对从字典中获取的任何值进行操作之前，需要先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于字典中包含这个州，行文本“我有 Texas 在我的字典中。”会被打印出来。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不存在于字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到该州时，程序不会崩溃。相反，“我没有那个州在我的字典中。”会被打印出来。

#### 向字典添加项

要向字典中添加一项，首先写下字典的名称，并将新项分配给你希望它在字典中对应的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，因此你无需担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。因此，你不会在我们的字典中看到 "MA": nil。

#### 替换字典中的项目

在字典中替换项目也很简单。它与替换数组中的项目一样。你只需将要替换的项目设置为其他值。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为 "red" 设置了值 "apple"，但后来我们决定使用 "raspberry" 作为更好的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这是我们将新值输入字典的方式。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查你拥有多少项。想象一下，你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；以及 values，包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，因此你可以用两种不同的方式进行遍历。以下是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是常量名 fruit 作为字典键，接着是关键字 in、字典名、一个句点和 keys。

在 `for-in` 循环的大括号内，我们可以访问键（我们称之为 `fruit` ➋）以及我们通过强制解包其内容 `fruitBasket[fruit]!` ➌ 获得的该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 `fruit` 键肯定在字典中。

我们放在 `for-in` 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到 `print` 语句打印三次。

我们还可以通过字典的`values`属性来循环遍历：

![Image](img/Image00150.jpg)

我们使用相同的 `for-in` 循环样式，但现在我们使用一个常量来引用 `values` 属性中的每个值，我们称之为 `price`。在循环 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是可选项，因为它直接作为值在 `fruitBasket` 字典中访问。这意味着我们不需要解包它。你仍然应该看到 `print` 语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与你的不同。那是因为字典中的项目不像数组中的项目那样有编号顺序！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何将一组项目存储在数组和字典中。要将项目存储在有序列表中，你将使用数组并通过索引查找每个项目。如果你想按键存储项目，你将使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，你可以在程序的几乎任何地方通过它的名称来调用它。

*图 6-3：不要尝试替换超出现有数组索引的值。*

现在你已经知道如何根据需要更改数组。你可以添加项目、移除项目或替换项目。接下来，我们将了解如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 `append(_:)` 和 `removeLast()` 这样的方式，数组还有*属性*。数组的属性是包含一些关于数组信息的变量或常量。你可能会用到的两个非常有用的属性是布尔型属性 `isEmpty` 和整数型属性 `count`。

`isEmpty` 属性根据数组是否为空来返回 `true` 或 `false`，而 `count` 属性将告诉你数组中有多少个项目。

看看以下 if-else 语句中这两个属性是如何使用的：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，程序会打印出“我没有兄弟姐妹。”如果数组中有内容，则会打印出兄弟姐妹的数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在处理数组时，你可能想对数组中的每个项执行某些操作。你可以使用 for-in 循环来实现！以下代码将打印出 pizzaToppings 数组中的每个配料，每个配料一行：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。然后，我们将希望对每个配料执行的语句放在 for-in 循环的花括号内。常量 topping ➊在我们遍历数组时临时代表数组中的每个配料。我们可以为这个常量选择任何名字，但选择一个有意义的名字是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以使用它们对每个项进行数学运算，从而快速完成计算！以下代码接收一个数字数组并计算每个数字的平方（数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但与有序索引不同，每个值都有其自己的*键*。由于没有索引，值的存储顺序没有特定的要求。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果存在两个相同的键，而你要求计算机返回其中一个的值，计算机就无法知道选择哪一个！

让我们来看看如何创建一个字典并编写键，以便你能找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后在一对方括号内写入键和值，格式类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，字典是*无序*的。因此，你在结果窗格中看到的州的顺序 ➋ 很可能与输入州的顺序 ➊ 不同。甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 var 创建一个可变字典，或者使用 let 创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以使用 double 类型作为键，使用 string 类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 double 类型，所有的值必须是 string 类型。同样，你会看到，结果窗格中的数字顺序可能与字典中分数的输入顺序有很大的不同。这是可以接受的，因为你不需要知道顺序就能访问任何项。你可以通过键找到你需要的任何项。让我们来看看！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只是你在方括号中使用键而不是索引，如：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的区别。当你在数组中访问某个索引的值时，你会直接获得该值。而当你在字典中使用键访问某个值时，你得到的是一个可选值（optional）。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 在字典查找项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可供访问。尝试访问不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选值。这意味着在对字典中的值进行任何操作之前，你需要解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于字典中有该州，因此打印了 "I have Texas in my dictionary."。接下来，我们尝试通过使用 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加项，首先写下字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们向我们的 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设置为 nil。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除 "MA" 键对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示完全没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项方式相同。你只需要将你想替换的项设置为其他值。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们给 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 更适合作为水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码演示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中的所有键，values，包含字典中的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来遍历字典。以下是如何使用键遍历字典：

![Image](img/Image00149.jpg)

这里我们使用字典的 `keys` 属性 ➊ 来循环遍历 `fruitBasket` 并打印它的内容。我们首先写 `for` 关键字，然后是字典键的常量名 `fruit`，接着是 `in` 关键字，字典名，句点，最后是 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键（我们称之为 `fruit` ➋）以及通过 `fruitBasket[fruit]!` 强制解包其内容时的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 `fruit` 键肯定存在于字典中。

我们放在 `for-in` 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句被执行三次。

我们还可以通过字典的 `values` 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 `for-in` 循环，但现在我们使用常量来引用 `values` 属性中的每个值，我们称之为 `price`。在循环遍历 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它作为值直接访问自 `fruitBasket` 字典。这意味着我们不需要解包它。你应该仍然看到打印语句被打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按数字顺序排列！由于顺序无法保证，因此如果你重新运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要存储有序列表中的项目，你将使用数组并通过索引查找每个项目。如果你想根据键来存储项目，你则需要使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中强大的构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。编写完函数后，你可以通过它的名字在程序的几乎任何地方调用它。

现在你知道了如何根据需要修改数组。你可以添加项目、删除项目或替换项目。接下来，我们将学习如何使用数组的属性来获取更多关于它们的信息。

![Image](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的函数，数组还有 *属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔属性 isEmpty 和整数属性 count。

isEmpty 属性的值为 true 或 false，取决于数组是否为空，而 count 属性则告诉你数组中有多少项。

看一下以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果是，它会打印出“我没有兄弟姐妹。”如果数组中有内容，它就会打印出我们有几个兄弟姐妹：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时在使用数组时，你可能希望对数组中的每一项做一些操作。你可以使用 for-in 循环来实现！以下代码将在单独的行上打印 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后我们将希望对每个配料执行的语句放入 for-in 循环的大括号内。常量 topping ➊ 在我们循环遍历数组时暂时代表数组中的每个披萨配料。我们可以为这个常量选择任何名称，但最好选择一个有意义的名称。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，甚至可以用它们对每一项进行数学运算，这样就能快速计算！以下代码将一个数字数组中的每个数进行平方计算（一个数字的平方是该数字乘以它本身）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典很重要！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的 *键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过键查找它们。

键必须是唯一的。同一个字典中不能有相同的键。如果存在两个相同的键并且你要求计算机返回其中一个的值，计算机就不知道该选择哪个！

让我们来看看如何创建一个字典并编写帮助你找到所有所需信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后，将键和对应的值写在一对方括号内，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果窗格中看到的状态顺序 ➋ 可能与输入状态的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！这没关系，因为你不需要知道顺序来访问任何内容。你可以通过键找到所需的任何项。

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次强调，你会发现结果窗格中数字的顺序可能与字典中写入分数的顺序大不相同。这是可以接受的，因为你不需要知道顺序来访问任何项。你可以通过键找到你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，不同之处在于，你需要在方括号内使用键而不是索引，比如这样：usStates["TX"]。

然而，在 Swift 中从字典中返回值的方式有很大不同。当你在数组的某个索引处访问一个值时，你会直接得到这个值。而当你在字典中使用键访问一个值时，你得到的是一个可选值。

在第五章中，你已经学习了可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，当你在字典中查找项时，你使用的键可能在字典中不存在，这时就没有值可以访问。试图访问不存在的值会导致一个巨大的错误！为了解决这个问题，Swift 返回可选值。这意味着你在使用从字典中获取的任何值之前，都需要先解包。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![图片](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 `if let` 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为字典中包含该州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试通过使用键 `usStates["FL"]` ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 `if-let` 语句，当计算机无法找到该州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典中添加一项，首先写出字典的名称，并将新项赋给你希望它在字典中拥有的键。让我们向 `usStates` 字典添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需将值设置为 `nil`。因为字典中的值是以可选项形式返回的，所以你不必担心 `nil` 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，表示完全没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项方式相同。你只需要将要替换的项设置为其他值。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了 "apple" 的值，但后来我们决定使用 "raspberry"，因为有时候苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能还记得，这是我们将新值插入字典的相同方式。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典的属性

与数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果不为空，则使用 `count` 属性来检查字典中有多少项。假设你有一个水果篮子要出售。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中的所有键；以及 values，包含字典中的所有值。当我们遍历字典时，我们会使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来实现。这是使用字典的键来循环遍历的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是一个常量名称 fruit（代表字典的键），接着是关键字 in，字典的名称，一个句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为水果 ➋），并通过强制解包 fruitBasket[fruit]! ➌ 获取该键对应的值。这个值就是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环内放入的任何代码都会对字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来循环遍历：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为价格。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选的，因为它是直接作为值访问的 fruitBasket 字典中的内容。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两种循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。那是因为字典中的项不像数组那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，打印顺序可能会不同。

### 你学到了什么

在这一章中，你学会了如何将项目存储在数组和字典中。为了将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则使用字典。

了解数组和字典及其使用方式是几乎所有编程语言的强大构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完一个函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

![图片](img/Image00133.jpg)

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的 方法，数组还有*属性*。数组的属性是包含有关数组一些信息的变量或常量。你可能会使用的两个非常有用的属性是布尔类型的属性 isEmpty 和整数类型的属性 count。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少个元素。

查看以下 if-else 语句中这两个属性的使用方法：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，那么会打印出 "我没有兄弟姐妹"。但是如果数组中有内容，就会打印出我们有多少兄弟姐妹："我有 3 个兄弟姐妹" ➋。

#### 遍历数组

有时候在处理数组时，你可能想对数组中的每个项做一些操作。你可以使用 for-in 循环来做到这一点！下面的代码会在每一行上打印出 pizzaToppings 数组中的每个配料：

![图片](img/Image00135.jpg)

为了写一个针对 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后面跟常量 topping，再加上关键字 in，最后是我们的数组名字 pizzaToppings。然后我们把希望在每次循环中执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们循环时临时代表数组中的每个配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个不错的主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以使用它们对每个项执行数学运算，这样就能进行快速计算！下面的代码会对一个数字数组中的每个数字计算平方（数字的平方是该数字乘以它自身）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值并没有按照特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果存在两个相同的键，当你要求计算机返回其中一个的值时，计算机将无法知道选择哪个！

让我们看看如何创建一个字典，并编写键来帮助你找到所需的所有信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写下`var`和你的字典名称。然后在一对方括号内写下键和对应的值，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是其两个字母的缩写：

![](img/Image00141.jpg)

正如你所见，每个键和其值之间都有一个冒号，并且键值对之间用逗号分隔。

字典与数组不同，它们是*无序*的。因此，在结果窗格中看到的州的顺序可能与您输入的州的顺序不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`创建可变字典，或者使用`let`创建不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到结果窗格中的数字顺序可能与你在字典中写分数的顺序完全不同。这没关系，因为你不需要知道顺序来访问任何东西。你可以通过键找到任何你需要的项目。让我们看看如何做到！

#### 访问字典中的值

在字典中查找值类似于访问数组中的值，但你使用的是方括号内的键而不是索引，就像这样：usStates["TX"]。

然而，Swift 从字典返回值的方式有很大的不同。当你访问数组的索引处的值时，你只是得到这个值。当你使用字典中的键访问值时，你得到的是一个可选项。

在第五章，你学到了可选项可能包含一个值，也可能为 nil。Swift 返回可选项的原因是，你使用的键可能不存在于字典中，这种情况下就没有值可供访问。试图访问不存在的值会导致一个大大的错误！为了避免这个问题，Swift 返回可选项。这意味着在对字典中取出的任何值进行操作之前，你需要对其进行解包。

要解包可选项，首先使用 if-let 语句检查其是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

为了从字典中检索“Texas”，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以会打印出“我在字典中有 Texas”。接下来，我们尝试使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我字典中没有那个州”。

#### 向字典中添加项目

要向字典中添加项目，首先写下字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，因此新添加的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil。由于字典中的值是以可选值的形式返回的，因此你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键“MA”的值后，usStates 已更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，它表示没有值。因此，你不会在字典中看到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将想要替换的项目设置为其他值。例如，你创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们将“red”赋值为“apple”，但后来我们决定使用“raspberry”作为更合适的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能记得这是我们将新值输入到字典中的相同方式。如果字典中已经存在该键，则该键的值会被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性可以检查字典中有多少个项目。假设你有一个售卖水果的篮子。你可以使用这些属性来帮助你跟踪所有内容：

![图片](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典中的所有键；以及 values，它包含所有的值。当我们遍历字典时，会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以通过两种不同的方式来做。以下是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印它的内容。我们首先写下关键字 for，接着是常量名称 fruit 作为字典键，接着是关键字 in，字典名称，句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包其内容`fruitBasket[fruit]!` ➌获得的该键对应的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 fruit 键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到 print 语句显示三次。

我们也可以使用字典的 values 属性来遍历：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历 values 时，我们无法从循环内部访问到键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序不保证，你可能会看到不同的顺序，如果你重新运行相同的代码。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项目集合。为了将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想根据键来存储项目，你则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

#### 使用数组属性

除了像 append(_:) 和 removeLast() 这样的方法，数组还具有 *属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，count 属性则会告诉你数组中有多少个元素。

看看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。如果数组中有元素，则打印出兄弟姐妹的数量："我有 3 个兄弟姐妹" ➋。

#### 循环遍历数组

有时，当你在处理数组时，你可能想对数组中的每个项做些事情。你可以使用 for-in 循环来实现！以下代码会在单独的行中打印出 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。然后，我们将要对每个配料执行的语句放入 for-in 循环的花括号中。常量 topping ➊ 在我们遍历数组时临时表示数组中的每个配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是一个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以利用它们对每个项目执行数学运算，这样可以进行快速的计算！以下代码获取一个数字数组并计算每个数字的平方（一个数字的平方是该数字乘以自身）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典* 也是一个值的集合，但不同于有序的索引，每个值都有自己的 *键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，当你要求计算机给出其中一个的值时，计算机将不知道选择哪个！

让我们来看看如何创建一个字典，并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写 var 和字典的名称。然后在一对方括号内写入键及其对应的值，类似于数组。我们来创建一个字典，存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格➋中看到的州的顺序可能与你输入州的顺序➊不同。甚至可能与本书中打印的顺序不同！ 

与数组类似，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型相匹配。例如，如果你想存储一组分数，你可以使用双精度类型作为键，字符串类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型，所有的值必须是字符串类型。同样，你会看到在结果窗格中数字的顺序可能与字典中分数的顺序完全不同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键来查找任何需要的项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问值的方式，不同之处在于，你在方括号中使用的是一个键，而不是索引，比如这样：usStates["TX"]。

然而，Swift 在返回字典的值时有一个很大的区别。当你访问数组的某个索引位置的值时，你只是得到那个值。当你用字典中的键访问值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能为 nil。Swift 返回可选值的原因是，当你在字典中查找项时，使用的键可能在字典中不存在，这种情况下没有值可供访问。试图访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着，在你做任何操作之前，你需要解包从字典中取出的值。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取"Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。由于字典中有这个州，因此打印出“我在字典中有 Texas”。接下来，我们尝试使用键 usStates["FL"] ➋访问字典中没有的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出“我字典中没有那个州”。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，然后将新项目分配给你希望它在字典中拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目也很简单；你只需将该值设置为 nil。由于字典中的值是可选类型，因此你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。因此，你不会在字典中看到"MA": nil。

#### 在字典中替换项目

在字典中替换一个项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。例如，假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们为"red"设置了值"apple"，但后来我们决定使用"raspberry"（覆盆子），因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]的值设置为新的值➊。

你可能还记得，这是我们向字典中添加新值的方式。如果键在字典中已经存在，那么该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，count 属性会检查字典中有多少项。假设你有一个水果篮子在出售。你可以利用这些属性来帮助你记录一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；以及 values，包含字典的所有值。我们在循环遍历字典时将使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式来实现这一点。以下是如何使用字典的键来遍历字典：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后跟常量名 fruit 作为字典的键，接着是关键字 in，字典名称，句点和 keys。

在我们的 for-in 循环的大括号内部，我们可以访问键（我们称之为 fruit ➋）以及当我们强制解包其内容（通过 fruitBasket[fruit]! ➌）时该键对应的值。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都将对字典中的每个键执行一次。因此，你应该看到 print 语句被打印三次。

我们还可以使用字典的 values 属性遍历字典：

![图片](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price ，它在 values 属性中。当遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你应该仍然能看到 print 语句被打印三次。图 6-6 显示了两个循环的输出结果。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的顺序被打印出来。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要存储有序列表中的项目，你会使用数组并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

除了像 append(_:) 和 removeLast() 这样的函数，数组还有*属性*。数组的属性是包含有关数组的一些信息的变量或常量。你可能会用到的两个非常有用的属性是布尔类型的 isEmpty 属性和整数类型的 count 属性。

isEmpty 属性根据数组是否为空返回 true 或 false，而 count 属性则告诉你数组中有多少个元素。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋。

#### 遍历数组

有时候在处理数组时，你可能希望对数组中的每个元素做一些操作。你可以使用 for-in 循环来实现！以下代码将在一个 pizzaToppings 数组中逐行打印每种配料：

![Image](img/Image00135.jpg)

为了编写 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接着我们将要对每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时，临时代表数组中的每个比萨配料。我们本可以为这个常量选择任何名字，但选择一个有意义的名字是个不错的主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每一个值。如果你正在处理数字，甚至可以用它们对每个元素进行数学运算，从而加快计算速度！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是这个数字与它本身的乘积）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。因为没有索引，值并不会按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。在同一个字典中不能有相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就不知道该选择哪个！

让我们来看一下如何创建字典，并编写键来帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后在一对方括号内写入键和对应的值，类似于数组的写法。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板➋中看到的州的顺序可能与你输入州的顺序➊不同，甚至可能和本书中打印的顺序不同！

和数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不需要与值的类型相同。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，而所有的值必须是字符串。同样，你会看到结果面板中的数字顺序可能与你在字典中写入分数的顺序大不相同。这是可以接受的，因为你无需知道顺序就能访问任何项。你可以通过键找到你需要的任何项。让我们来看一下！

#### 在字典中访问值

在字典中查找一个值类似于你在数组中访问值的方式，只不过你在方括号内使用的是键而不是索引，例如这样：usStates["TX"]。

然而，在 Swift 中访问字典中的值有一个显著的区别。当你通过数组的索引访问一个值时，你会直接得到值。而当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选值，是因为你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着在你对从字典中获取的值进行任何操作之前，你需要先解包它。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出"I have Texas in my dictionary"。接下来，我们尝试使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出"I don't have that state in my dictionary"。

#### 向字典添加项

要向字典中添加一个项，首先写出字典的名称，并将新项分配给你希望它在字典中具有的键。让我们把“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项是非常简单的；你只需将值设置为 nil。由于字典中的值作为可选项返回，因此你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键"MA"对应的值后，usStates 已更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作原理与替换数组中的项相同。你只需将你想替换的项设置为其他内容。假设你创建了一个水果颜色字典：

![](img/Image00146.jpg)

起初我们为"red"赋值"apple"，但后来我们决定“raspberry”是更好的水果，因为有时候苹果是绿色或黄色的。要将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这与我们向字典中输入新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查你有多少个项。假设你有一个水果篮子要出售。你可以使用这些属性帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们在遍历字典时会使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来进行遍历。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性 ➊ 来遍历`fruitBasket`并打印其内容。我们首先写下关键字`for`，然后是常量名`fruit`（字典的键），接着是关键字`in`，字典名，接着是一个句点，再加上`keys`。

在我们的`for-in`循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过`fruitBasket[fruit]!`强制解包其内容时得到的键对应的值 ➌。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包是安全的，因为我们知道正在使用的水果键肯定存在于字典中。

我们在`for-in`循环内放置的任何代码都会在字典的每个键上执行一次。所以你应该看到打印语句会打印三次。

我们也可以通过字典的`values`属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的`for-in`循环，但现在我们使用常量来引用每个值，这个常量我们称之为`price`，并使用`values`属性。当遍历值时，我们不能从循环内部访问到键。

另一个需要注意的区别是，`price`不是可选的，因为它是直接作为字典`fruitBasket`中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句会打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按顺序排列！由于顺序没有保证，因此如果再次运行相同的代码，你可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。为了将项存储在有序列表中，你会使用数组并通过索引查找每个项。如果你想按键存储项，则会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大基础。接下来，我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以在程序的几乎任何地方通过其名称调用它。

`isEmpty`属性根据数组是否为空返回`true`或`false`，而`count`属性则会告诉你数组中有多少项。

查看以下 if-else 语句中如何使用这两个属性：

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空➊。如果为空，那么会打印“我没有兄弟姐妹。”。但如果数组中有元素，则会打印我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。”➋。

#### 遍历数组

有时，当你处理数组时，可能想对数组中的每个元素做一些操作。你可以使用 for-in 循环来做到这一点！以下代码会将 pizzaToppings 数组中的每个配料打印在单独的一行：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字`for`，后面跟着常量`topping`，然后是关键字`in`，最后是我们数组的名称 pizzaToppings。接着，我们将每个配料的处理语句放在 for-in 循环的花括号内。常量`topping`➊在我们循环时临时代表数组中的每个披萨配料。我们可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项目进行数学运算，这样可以快速进行计算！以下代码会取一个数字数组，并计算每个数字的平方（数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一组值的集合，但与有序索引不同，每个值都有其独特的*键*。由于没有索引，值并不以任何特定顺序存储。要访问字典中的值，您需要通过它们的键进行查找。

键必须是唯一的。在同一个字典中，你不能有重复的键。如果有两个相同的键，且你要求计算机提供其中一个的值，计算机将无法选择使用哪个！

让我们来看看如何创建一个字典，并编写键，以帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上`var`和字典的名称。然后在一对方括号内写下键和对应的值，类似于数组的写法。让我们创建一个字典来存储一些美国州的名字。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序 ➋ 很可能与输入字典时州的顺序 ➊ 不同。它甚至可能与本书中打印出来的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数（doubles）作为键，使用字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键都必须是双精度浮点数（doubles），而所有的值都必须是字符串（strings）。你会发现，结果面板中数字的顺序可能与在字典中输入分数的顺序大不相同。这是可以接受的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。我们来看一下是如何操作的！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，只不过你在方括号中使用的是键，而不是索引，如：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有很大不同。当你访问数组中的某个索引时，你会直接得到该值。而当你通过字典中的键访问值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是，使用的键可能在字典中不存在，这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要在对字典中取出的值进行任何操作之前先将其解包。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，"我在字典中有 Texas"这一行会被打印出来。接下来，我们尝试访问一个字典中没有的州，通过使用键 usStates["FL"] ➋。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"我在字典中没有这个州"会被打印出来。

#### 向字典添加项目

要向字典中添加项，首先写出字典的名称，并将新项赋值给你希望它在字典中对应的键。我们来给我们的 usStates 字典添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它被更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能会出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需将该项的值设置为 nil。由于字典中的值是以可选项的形式返回的，所以你不需要担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键 "MA" 的值之后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。因此，你不会在字典中看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将你想替换的项设为其他值。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们将 "red" 的值设为 "apple"，但是后来我们决定用 "raspberry" 代替，因为有时候苹果是绿色或黄色的。所以为了将 "apple" 替换成 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这与我们向字典中输入新值的方式是相同的。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键/值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则可以检查你有多少个项。假设你有一个出售的水果篮子，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。在我们遍历字典时，将会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子，并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每一项都有一个键和值，你可以用两种不同的方式来做这件事。这是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是常量名 fruit 作为字典的键，再加上关键字 in、字典名称、一个句点和 keys。

在 for-in 循环的大括号内，我们可以访问到键，我们称之为 fruit ➋，以及该键对应的值，当我们通过 fruitBasket[fruit]! 强制解包其内容时 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会对字典中的每个键执行一次。所以你应该能看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用每个值，称之为 price，这个值来自 values 属性。当循环遍历值时，我们无法在循环内访问键。

另一个需要注意的区别是，price 不是可选项，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你应该依然看到打印语句被打印三次。图 6-6 展示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。那是因为字典中的项不像数组那样按编号顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储集合。要在有序列表中存储项，可以使用数组，并通过索引查找每个项。如果你想通过键存储项，则需要使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中非常强大的构建块。接下来我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。写完函数后，你可以使用它的名字从程序的几乎任何地方调用它。

查看以下 if-else 语句中如何使用这两个属性：

![图片](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果是，则打印“我没有兄弟姐妹”。但如果数组中有内容，则打印我们拥有的兄弟姐妹数量：“我有 3 个兄弟姐妹。” ➋。

#### 循环遍历数组

有时，在处理数组时，你可能想对数组中的每个项目执行某个操作。你可以使用 for-in 循环来实现！以下代码将把 pizzaToppings 数组中的每个配料打印在单独的一行：

![Image](img/Image00135.jpg)

为了为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，后面跟着常量 topping，然后是关键字 in，最后是数组的名称 pizzaToppings。接着我们将希望对每个配料执行的语句放入 for-in 循环的花括号内。常量 topping ➊ 临时表示数组中的每个披萨配料，随着循环的进行。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名称。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以使用它们对每个项目进行数学运算，这样可以进行快速计算！以下代码接受一个数字数组，并计算每个数字的平方（数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一种值的集合，但与有序的索引不同，每个值都有自己的*键*。因为没有索引，值的存储顺序是不固定的。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，且你要求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们来看看如何创建一个字典，并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 var 和字典的名称。然后，在一对方括号内写入键及其对应的值，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和其对应的值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，结果窗格 ➋ 中显示的州的顺序可能与输入州时的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数的集合，你可以使用双精度数（doubles）作为键，字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），所有的值必须是字符串（strings）。同样，你会发现结果面板中数字的顺序与字典中分数的顺序可能完全不同。这是没问题的，因为你不需要知道顺序就能访问任何项。你可以通过键找到任何你需要的项。让我们来看看怎么做！

#### 访问字典中的值

查找字典中的值与访问数组中的值类似，只是你需要使用键来代替索引，像这样：`usStates["TX"]`。

然而，Swift 在从字典返回值时存在一个很大的区别。当你访问数组的某个索引的值时，你会直接得到该值。而当你通过字典中的键访问值时，你会得到一个可选值。

在 第五章 中，你学到过可选值可能包含一个值，也可能是 `nil`。Swift 返回可选值是因为你查找字典中的项时，所使用的键可能在字典中不存在，在这种情况下，没有值可以访问。尝试访问一个不存在的值会导致一个严重的错误！为了避免这个问题，Swift 返回可选值。这意味着在你对字典中的任何值做进一步操作之前，你需要解包它。

要解包一个可选值，首先检查它是否存在，使用 `if-let` 语句，就像我们在 第五章 中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 `if let` 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为我们的字典中包含这个州，所以会打印出 "I have Texas in my dictionary"。接下来，我们尝试通过键 `usStates["FL"]` ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 `if-let` 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary"。

#### 向字典添加项

要向字典中添加项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们向 `usStates` 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一个项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，因此你不需要担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除“MA”键的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示完全没有值。这就是为什么你在字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作原理与替换数组中的项目相同。你只需将你想替换的项目设置为其他值。例如，你可以创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“red”键设置了值“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时候苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能记得，这是我们向字典中输入新值的方式。如果字典中已经存在该键，则该键的值会被替换。如果该键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则 count 属性检查你有多少个项目。假设你有一个待售的水果篮，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，以及 values，包含字典的所有值。当我们遍历字典时，将使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环来遍历字典。因为每个项目都有一个键和值，你可以用两种不同的方式来完成。下面是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后跟一个常量名 fruit 作为字典的键，然后是关键字 in，字典的名称，一个句点，最后是 keys。

在 for-in 循环的大括号内，我们可以访问键，也就是我们称之为 fruit ➋，以及当我们强制解包 fruitBasket[fruit]! ➌ 时该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定存在于字典中。

我们将所有的代码放入 for-in 循环中，将针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，称之为 price。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选的，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序不保证，因此如果你再次运行相同的代码，可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想按键存储项，则会使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中的强大基础。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写了函数之后，你可以通过其名称从程序中的几乎任何地方调用它。

![Image](img/Image00134.jpg)

这个 if-else 语句检查数组 mySiblings 是否为空 ➊ 。如果为空，则打印“我没有兄弟姐妹”。但如果数组中有内容，则会打印我们有多少兄弟姐妹：“我有 3 个兄弟姐妹。” ➋ 。

#### 循环遍历数组

有时在处理数组时，你可能想对数组中的每个项做一些操作。你可以使用 for-in 循环来做到这一点！以下代码会在每一行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

为了写一个针对 pizzaToppings 数组的 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。接着，我们将每个披萨配料要执行的语句放入 for-in 循环的花括号内。常量 topping ➊ 临时代表我们遍历数组时的每个披萨配料。我们可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果您正在处理数字，甚至可以用它们对每个项目执行数学运算，从而进行快速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与它自己相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典* 也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。因为没有索引，所以值没有按照特定的顺序存储。要访问字典中的值，您需要通过键来查找它们。

每个键必须是唯一的。一个字典中不能有重复的键。如果有两个相同的键，而您请求计算机返回其中一个的值，计算机将不知道该选择哪个！

让我们来看看如何创建字典，并编写键来帮助您找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写上 var 和字典的名称。然后像数组一样，在一对方括号内写上键和值的对应关系。我们来创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如您所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，字典是*无序的*。因此，您在结果窗格中看到的状态顺序 ➋ 可能与您输入状态时的顺序 ➊ 不同。甚至可能与书中打印的顺序不同！

与数组一样，您可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果您想存储一个分数集合，您可以使用双精度数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有键必须是双精度数，所有值必须是字符串。同样，您会发现结果窗格中数字的顺序可能与您在字典中编写分数的顺序大不相同。这没关系，因为您不需要知道顺序就能访问任何内容。您可以通过键找到任何您需要的项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问一个值的方式，不同的是你使用的是键而不是索引，比如：usStates["TX"]。

然而，Swift 返回字典值的方式与访问数组索引的方式有很大不同。当你访问数组中的某个索引的值时，你会直接获得值。当你用键访问字典中的值时，你获得的是一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项时返回可选值，是因为你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为避免这个问题，Swift 返回的是可选值。这意味着你需要解包你从字典中获得的任何值，才能对它做任何操作。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“德州”，我们使用`if let`将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中包含这个州，所以会打印出“我在字典中找到了德州”。接下来，我们尝试通过使用键 usStates["FL"] ➋来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机无法找到这个州时，程序不会崩溃。相反，会打印出“我在字典中没有那个州”。

#### 向字典中添加项

要向字典中添加项，首先写出字典的名称，并将新项赋值给你希望它在字典中拥有的键。让我们将"明尼苏达州"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项也很简单；你只需要将该项的值设置为 nil。因为字典中的值是以可选值返回的，所以你不必担心 nil 会导致字典中的任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除键为"MA"的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。因此，你不会在字典中看到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将你想替换的项设置为其他值。例如，你创建一个表示水果颜色的字典：

![](img/Image00146.jpg)

起初，我们将"红色"的值设为"apple"，但后来我们决定使用"raspberry"作为更好的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为其新值➊。

你可能还记得，这是我们将新值添加到字典中的方式。如果字典中已经存在该键，则该键的值会被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性检查你有多少个项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来做到这一点。下面是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊遍历 fruitBasket 并打印其内容。我们从写入关键字 for 开始，接着是字典键的常量名称 fruit，关键字 in，字典名称，一个句点，和 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称其为 fruit➋）和通过强制解包其内容 fruitBasket[fruit]! ➌访问该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的水果键一定在字典中。

我们在 for-in 循环内写的任何代码都会在字典中的每个键上执行一次。所以你应该看到 print 语句会显示三次。

我们还可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句显示三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样有编号顺序！由于顺序无法保证，因此如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在这一章中，你学会了如何将项集合存储在数组和字典中。要在有序列表中存储项，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中非常强大的构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定任务。在你写完一个函数后，可以通过它的名字在程序中的几乎任何地方调用它。

这个 if-else 语句检查数组 mySiblings 是否为空 ➊。如果为空，则打印 "我没有兄弟姐妹"。但如果数组中有内容，则会打印我们有多少兄弟姐妹："我有 3 个兄弟姐妹。" ➋。

#### 遍历数组

有时，当你在处理数组时，可能希望对数组中的每一项做点什么。你可以使用 for-in 循环来实现这一点！以下代码将在新的一行打印 pizzaToppings 数组中的每个配料：

![Image](img/Image00135.jpg)

要为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，接着是常量 topping，然后是关键字 in，最后是我们的数组名称 pizzaToppings。然后我们将希望对每个配料执行的语句放在 for-in 循环的括号内。常量 topping ➊ 在我们循环遍历数组时暂时代表每个披萨配料。我们本可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以用它们对每个项目执行数学运算，这样可以快速进行计算！以下代码取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与它自己相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但不同于有序索引，每个值都有自己的*键*。因为没有索引，值并没有按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。同一个字典中不能有相同的键。如果有两个相同的键，并且你请求计算机给你其中一个值，计算机就无法知道选择哪个！

让我们来看一下如何创建字典，并写下能够帮助你找到所有需要信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后，在一对方括号内写入键及其对应的值，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的州的顺序➋可能与输入这些州时的顺序➊不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不一定要与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型，而所有的值必须是字符串类型。同样，你会发现结果窗格中的数字顺序与在字典中写入分数的顺序可能完全不同。这是没问题的，因为你不需要知道顺序来访问任何内容。你可以通过键找到你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只不过你是使用键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值时有一个很大的不同。当你通过数组的索引访问一个值时，你会直接得到该值。而当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是，使用的键可能在字典中不存在，在这种情况下没有值可供访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着在你对从字典中获取的任何值进行操作之前，必须先解包它。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以打印出“I have Texas in my dictionary”。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“I don't have that state in my dictionary”。

#### 向字典添加项

向字典中添加项很简单，首先写出字典的名称，然后将新项赋给你想要在字典中使用的键。我们来将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它被更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项也很简单；你只需要将值设置为 nil。因为字典中的值是作为可选值返回的，所以你无需担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除键为 "MA" 的值之后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 在字典中替换项

替换字典中的项也很简单。它与替换数组中的项一样。你只需要将你想替换的项设置为其他值。例如，你创建一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们给“red”赋值为“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时候苹果是绿色或黄色的。为了用“raspberry”替代“apple”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们将新值插入字典的方式相同。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则用来检查你有多少个项。想象你有一个出售水果的篮子。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们在遍历字典时会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来完成这件事。以下是如何使用字典的键遍历字典：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印它的内容。我们从编写关键字 for 开始，后面是一个常量名 fruit 来代表字典的键，接着是关键字 in、字典名称、一个句点和 keys。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）和通过 fruitBasket[fruit]! ➌ 强制解包其内容时的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。因此，你应该能看到打印语句被打印了三次。

我们也可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用每个值，我们称之为 price ，它来自 values 属性。在遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，价格（price）不是可选的，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句被打印了三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项目。要存储有序列表中的项目，你可以使用数组并通过索引查找每个项目。如果你想根据键来存储项目，则应使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中强大的构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码块，用于执行特定的任务。编写完函数后，你可以通过它的名称从程序的几乎任何地方调用它。

#### 遍历数组

有时，当你处理数组时，你可能希望对数组中的每个项执行某些操作。你可以使用 for-in 循环来做到这一点！以下代码将在单独的一行中打印 pizzaToppings 数组中的每一项配料：

![图片](img/Image00135.jpg)

为了为 pizzaToppings 数组编写 for-in 循环，我们使用了关键字 for，接着是常量 topping，再是关键字 in，最后是我们的数组名称 pizzaToppings。然后我们将希望为每个配料执行的语句放在 for-in 循环的大括号内。常量 topping ➊ 在我们遍历数组时暂时表示每一个配料。我们本可以为这个常量选择任何名称，但选择一个有意义的名称是个好主意。你可以在 图 6-4 中看到这个 for-in 循环的输出。

![图片](img/Image00136.jpg)

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每一个值。如果你正在处理数字，甚至可以使用它们对每个项进行数学运算，这样就能进行快速计算！以下代码取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与数组不同的是，每个值都有自己的 *键*。由于没有索引，值没有特定的顺序。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就不知道该选择哪一个！

让我们来看一下如何创建一个字典，并写入有助于你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写`var`和字典的名称。然后在一对方括号内写入键和值，类似于数组的方式。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入州的顺序➊不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度类型，所有的值必须是字符串类型。同样，你会看到结果面板中的数字顺序可能与在字典中写入分数时的顺序非常不同。这是没问题的，因为你不需要知道顺序就能访问任何项。你可以通过键来找到你需要的任何项目。让我们看看如何做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，只不过你使用的是方括号中的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个很大的区别。当你通过索引访问数组中的值时，你直接得到这个值。当你通过键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学到可选项可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下没有值可供访问。尝试访问一个不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选项，首先使用`if-let`语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接着，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典添加项，首先写出字典的名称，并将新项赋值给你希望它在字典中具有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。请记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需将该值设置为 nil。由于字典中的值是可选的，因此你不必担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。请记住，nil 是特殊的，表示根本没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项一样。你只需将要替换的项设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们为 "red" 设置了 "apple" 的值，但后来我们决定 "raspberry" 是一个更好的水果，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这和我们将新值添加到字典中的方式一样。如果键已经存在于字典中，那么该键的值将被替换。如果键尚不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则会检查字典中有多少项。想象你有一个待售的水果篮。你可以使用这些属性帮助你跟踪所有的东西：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以用两种不同的方式来做。以下是如何使用字典的键遍历它：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，后跟一个常量名称 fruit 用于字典键，接着是关键字 in，字典名称，一个句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键，也就是我们称之为 fruit ➋ 的那个键，以及当我们强制解包其内容时，通过 fruitBasket[fruit]! ➌ 获取到的键值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性遍历字典：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用每个值，我们称其为 price，位于 values 属性中。在遍历值时，我们无法从循环内部访问到键。

另一个需要注意的区别是，price 不是一个可选值，因为它是通过直接在 fruitBasket 字典中访问而获得的。这意味着我们不需要解包它。你应该仍然能看到打印语句会打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的项目那样按编号排序！由于顺序不能保证，因此如果你再次运行相同的代码，可能会看到不同的顺序打印出来。

### 你学到了什么

在这一章中，你学习了如何将一组项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中非常强大的构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定任务。编写完一个函数后，你可以使用它的名称在程序中的任何地方调用它。

有时候，当你在处理数组时，你可能希望对数组中的每一项做一些操作。你可以使用 for-in 循环来实现这一点！以下代码将在每一行打印出 pizzaToppings 数组中的每一项配料：

![Image](img/Image00135.jpg)

为 pizzaToppings 数组写 for-in 循环时，我们使用了关键字 for，后跟常量 topping，再是关键字 in，最后是我们的数组名称 pizzaToppings。然后，我们把要对每个配料执行的语句放在 for-in 循环的大括号内。常量 topping➊在我们循环遍历数组时，暂时代表数组中的每个配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例中的 for-in 循环输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以用它们对每个项进行数学运算，从而实现快速计算！以下代码取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字乘以它自身）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典*也是一种值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值的存储顺序是无序的。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。在同一个字典中不能有重复的键。如果有两个相同的键，当你要求计算机返回其中一个键的值时，计算机就不知道该选择哪一个！

让我们来看一下如何创建一个字典，并编写有助于你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写上 var 和字典的名称。然后在一对方括号内写入键及其对应的值，类似于数组的写法。我们来创建一个字典，用来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

正如你所看到的，键和值之间有一个冒号，而键/值对之间由逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入州的顺序➊不同，甚至可能与本书中的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不需要与值类型匹配。例如，如果你想存储一组分数，你可以使用浮动类型作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是浮动类型，所有的值必须是字符串类型。同样，你会看到结果窗格中数字的顺序可能与在字典中书写分数时的顺序完全不同。这是没问题的，因为你不需要知道顺序就可以访问任何内容。你可以通过键来找到任何你需要的项目。让我们来看一下！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问值的方式，只不过你在方括号中使用的是键，而不是索引，像这样：`usStates["TX"]`。

然而，Swift 在返回字典中的值时有一个很大的区别。当你通过数组的索引访问一个值时，你只会得到这个值。当你通过字典中的键访问一个值时，你会得到一个可选项。

在第五章中，你学习了可选项可能包含一个值，也可能是 `nil`。Swift 在你查找字典中的项目时返回可选项的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会给你带来一个大错误！为了避免这个问题，Swift 返回可选项。这意味着你需要在使用字典中获取的任何值之前解包它。

要解包一个可选项，首先你需要使用 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "德克萨斯"，我们使用 `if let` 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为我们在字典中有这个州，所以会打印出 "我在字典中找到了德克萨斯"。接下来，我们尝试通过键 `usStates["FL"]` ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 `if-let` 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 "我在字典中没有这个州"。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出你的字典名称，并将新项目分配给你希望它在字典中具有的键。让我们把 "明尼苏达" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

现在当你查看 `usStates` 时，你会看到它已更新为 ["MN": "明尼苏达", "WA": "华盛顿", "MA": "马萨诸塞", "TX": "德克萨斯"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除一个项目也很简单；你只需将值设置为 nil。因为字典中的值是以可选项返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么我们在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

在字典中替换一个项目也很简单。它的工作方式和替换数组中的项目一样。你只需要将你想替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们给"red"键赋的值是"apple"，但是后来我们决定使用"raspberry"作为更好的水果，因为有时候苹果是绿色或黄色的。为了用"raspberry"替换"apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，我们之前是以相同的方式将一个新值加入字典。如果字典中已经存在该键，那么这个键的值会被替换。如果该键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查你有多少个项目。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以用两种不同的方式来做这件事。以下是如何使用键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in，字典名称，接着是一个点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问键，我们称之为 fruit ➋，以及当我们强制解包 fruitBasket[fruit]! ➌ 的内容时，那个键的值。那个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 `for-in` 循环中的任何代码都会为字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以使用字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但现在我们使用常量来引用每个值，我们称之为 `price`，它位于 `values` 属性中。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选项，因为它直接作为值被访问在 `fruitBasket` 字典中。这意味着我们不需要解包它。你应该仍然会看到打印语句被打印三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的那样有编号顺序！而且由于顺序不保证，如果你再次运行相同的代码，打印的顺序可能会不同。

### 你学到的内容

在本章中，你学习了如何将多个项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想根据键来存储项目，那么你会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建模块。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数后，你可以通过其名称在程序的几乎任何地方调用它。

![Image](img/Image00135.jpg)

为 `pizzaToppings` 数组编写 `for-in` 循环时，我们使用了关键字 `for`，接着是常量 `topping`，然后是关键字 `in`，最后是数组的名称 `pizzaToppings`。然后，我们将希望对每个配料执行的语句放入 `for-in` 循环的花括号内。常量 `topping` ➊ 临时代表数组中的每个比萨配料，当我们遍历数组时。我们可以为这个常量选择任何名字，但最好选一个有意义的名字。你可以在 图 6-4 中看到这个 `for-in` 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例 `for-in` 循环的输出*

![Image](img/Image00137.jpg)

使用 `for-in` 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以使用它们对每个项进行数学运算，这样就能快速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引不同，每个值都有一个自己的*键*。因为没有索引，值不是按任何特定顺序存储的。要访问字典中的值，您需要通过键查找它们。

每个键必须是唯一的。您不能在同一个字典中使用相同的键两次。如果有两个相同的键，而您请求计算机返回其中一个的值，计算机将不知道选择哪个！

让我们看看如何创建一个字典，并写出能够帮助您找到所有所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写 var 和字典的名称。然后将键和值放在一对方括号中，类似于数组。让我们创建一个字典，用来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

正如您所看到的，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，字典是*无序*的。因此，您在结果窗格 ➋ 中看到的状态顺序可能与您输入状态 ➊ 的顺序不同，甚至可能与本书中打印的顺序不同！

与数组一样，您可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型相匹配。例如，如果您想存储一个分数集合，您可以使用 double 类型作为键，使用字符串类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是 double 类型，所有的值必须是字符串类型。同样，您会发现结果窗格中的数字顺序可能与您在字典中编写分数的顺序大不相同。这没关系，因为您不需要知道顺序就能访问任何内容。您可以通过键找到所需的任何项目。让我们看看怎么做！

#### 访问字典中的值

查找字典中的值类似于如何访问数组中的值，只是您使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的区别。当您通过数组的索引访问值时，您会直接得到该值。当您通过字典的键访问值时，您会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值，因为你使用的键可能在字典中不存在，在这种情况下没有值可以访问。尝试访问一个不存在的值会导致一个严重的错误！为了解决这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if-let 来将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们向 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一个项是非常简单的；你只需将值设置为 nil。因为字典中的值是可选类型，所以你不需要担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。请记住，nil 是特殊的，表示完全没有值。这就是为什么在我们的字典中没有看到 "MA": nil。

#### 替换字典中的项

替换字典中的一个项也很容易。它的工作方式和替换数组中的项一样。你只需将要替换的项设置为其他值。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们为 "red" 赋值了 "apple"，但后来我们决定 "raspberry" 是一个更好的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能还记得，这与我们往字典中插入新值的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有`isEmpty`属性和`count`属性。例如，以下代码展示了如何使用`isEmpty`属性来检查字典是否为空，如果不为空，则使用`count`属性来检查字典中有多少个项。假设你有一个待售的水果篮子。你可以利用这些属性帮助你记录所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键；`values`，它包含字典的所有值。当我们遍历字典时，将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。由于每个项都有一个键和值，因此你可以以两种不同的方式来进行遍历。这是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性➊来遍历`fruitBasket`并打印其内容。我们首先写下`for`关键字，后跟字典键的常量名`fruit`，接着是`in`关键字，字典名称，一个点，最后是`keys`。

在`for-in`循环的大括号内，我们可以访问到键（我们称之为`fruit` ➋）以及该键的值，当我们通过`fruitBasket[fruit]!`强制解包它的内容时 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的`fruit`键肯定存在于字典中。

我们放入`for-in`循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句被显示三次。

我们还可以使用字典的`values`属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的`for-in`循环风格，但现在我们使用一个常量来引用`values`属性中的每个值，我们将其称为`price`。当遍历`values`时，我们无法从循环内部访问到键。

另一个需要注意的区别是，`price`不是一个可选值，因为它直接作为值从`fruitBasket`字典中访问。这意味着我们不需要解包它。你仍然应该能看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。要在有序列表中存储项，你会使用数组，并通过索引查找每一项。如果你想通过键来存储项，则会使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建模块。接下来，我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，你可以在程序的几乎任何地方使用它的名称来调用它。

为了为 pizzaToppings 数组编写一个 for-in 循环，我们使用了关键字 for，后跟常量 topping，然后是关键字 in，最后是我们数组的名称 pizzaToppings。接着，我们把要对每个配料运行的语句放在 for-in 循环的大括号内。常量 topping ➊暂时表示我们在循环中遍历的每个披萨配料。我们可以为这个常量选择任何名字，但最好选择一个有意义的名字。你可以在图 6-4 中看到这个 for-in 循环的输出。

![Image](img/Image00136.jpg)

*图 6-4：示例中的 for-in 循环输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，你甚至可以使用它们对每个项执行数学运算，这样可以进行快速计算！以下代码获取一个数字数组并计算每个数字的平方（数字的平方是该数字乘以它自己）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。由于没有索引，值没有以任何特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，而你请求计算机给你其中一个的值，计算机将无法知道该选择哪个！

让我们来看看如何创建一个字典，并编写能够帮助你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写上键和值，类似于数组。我们来创建一个字典来存储一些美国州的名称。每个州的键将是它的两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，并且键/值对之间用逗号分隔。

字典与数组不同，它们是*无序的*。因此，你在结果面板 ➋ 中看到的州的顺序可能与你输入的顺序 ➊ 不同，甚至可能与书中打印的顺序也不一样！

和数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键类型不必与值类型匹配。例如，如果你想存储一组分数，你可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。再说一次，你会看到结果面板中数字的顺序可能与字典中写入分数的顺序差异很大。这没关系，因为你不需要知道顺序就可以访问任何东西。你可以通过键找到任何你需要的项目。我们来看一下怎么做！

#### 访问字典中的值

在字典中查找一个值的方式类似于在数组中访问值，不同之处在于你在方括号内使用的是键，而不是索引，比如这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式与数组中的索引访问值有很大的不同。当你在数组的索引位置访问一个值时，你会直接得到这个值。而当你通过键访问字典中的值时，你会得到一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在字典中查找项目时返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可访问。尝试访问一个不存在的值会给你一个大错误！为避免这个问题，Swift 返回了可选值。这意味着你需要在使用字典中的任何值之前解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问字典中没有的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典添加项

要向字典添加项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将该值设置为 nil。由于字典中的值是可选的，你无需担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将要替换的项设置为其他值。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是更合适的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，则使用 count 属性检查其中有多少项。假设你有一个水果篮子在卖。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；和 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮，并打印每个水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。因为每个项都有一个键和值，所以你可以有两种不同的方式来做到这一点。下面是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性 ➊ 来遍历`fruitBasket`并打印其内容。我们从编写关键字`for`开始，后跟字典键的常量名`fruit`，关键字`in`，字典名，句点和`keys`。

在我们`for-in`循环的大括号内，我们既可以访问键（我们称之为`fruit` ➋），也可以访问通过强制解包`fruitBasket[fruit]!`得到的该键的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的果实键一定存在于字典中。

我们放入`for-in`循环中的任何代码都会针对字典中的每个键运行一次。所以你应该会看到打印语句显示三次。

我们也可以使用字典的`values`属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的`for-in`循环样式，但现在我们使用常量来引用每个值，我们称其为`price`，它位于`values`属性中。在循环遍历值时，我们无法在循环内访问键。

另一个需要注意的区别是，`price`不是可选的，因为它是直接作为`fruitBasket`字典中的值进行访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样有编号顺序！而且因为顺序不能保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想按键存储项目，则可以使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的工作。在你编写完一个函数后，你可以在程序中的几乎任何地方通过其名称来调用它。

![Image](img/Image00136.jpg)

*图 6-4：示例`for-in`循环的输出*

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你在处理数字，甚至可以用它们对每个项执行数学运算，这样就能进行快速计算！以下代码接受一个数字数组，并计算每个数字的平方（数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典至关重要！

*字典* 也是一个值的集合，但不同于有序索引，每个值都有自己的*键*。由于没有索引，值并没有按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，并且你请求计算机给出其中一个的值，计算机就无法确定选择哪一个！

让我们来看看如何创建一个字典并编写键，帮助你找到所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写下键及其对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对由逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你在结果面板 ➋ 中看到的状态顺序可能与输入状态的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度数（doubles）作为键，使用字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有键必须是双精度数，所有值必须是字符串。同样，你会看到结果面板中的数字顺序可能与在字典中写下分数的顺序不同。这没关系，因为你不需要知道顺序就可以访问任何内容。你可以通过键找到任何你需要的项。我们来看一下如何操作！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问值的方式，不同之处在于你在方括号中使用的是键而不是索引，像这样：usStates["TX"]。

然而，在 Swift 返回字典中值的方式上有一个很大的不同。当你访问数组中某个索引的值时，你直接得到该值。而当你用一个键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学习了可选项可能包含一个值，也可能是 nil。Swift 返回可选项的原因是在查找字典中的项时，你使用的键可能不存在于字典中，这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选项。这意味着你需要在对字典中的值做任何操作之前先解包它。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if let 来将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出 "I have Texas in my dictionary."。接下来，我们尝试使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加一项，首先写出字典的名称，并将新项赋值给你想要它存储的键。让我们把 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会发现它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典删除项

从字典中删除项是相当简单的；你只需将该值设为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。因此，你在字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项一样。你只需将你想替换的项设置为其他内容。例如，你创建一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为 "red" 配置了值 "apple"，但后来我们决定 "raspberry" 是更好的水果，因为有时苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能还记得，这和我们向字典中插入新值的方式是一样的。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性检查字典是否为空，如果不为空，`count` 属性检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你追踪所有内容：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键；以及 `values`，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来做。以下是通过字典的键来循环的方式：

![图片](img/Image00149.jpg)

这里我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印它的内容。我们首先写上关键字 `for`，接着是常量名 `fruit`，代表字典的键，关键字 `in`，字典名，一个句点，和 `keys`。

在我们的 `for-in` 循环的花括号内，我们可以访问到键（我们称之为 `fruit` ➋）以及该键的值，当我们强制解包它的内容时，通过 `fruitBasket[fruit]!` ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定存在于字典中。

我们在 `for-in` 循环中放入的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句被打印了三次。

我们还可以使用字典的 `values` 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但这次我们使用常量来引用值，我们称之为 `price`，它位于 `values` 属性中。在遍历 `values` 时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是一个可选值，因为它是直接作为水果篮子字典中的值来访问的。这意味着我们不需要解包它。你应该依然看到打印语句被打印了三次。图 6-6 展示了两个循环的输出结果。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！由于顺序不确定，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在这一章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，则会使用字典。

了解数组和字典及其使用方法，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定任务。在编写完一个函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

*图 6-4：示例 for-in 循环的输出*

![图片](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你正在处理数字，你甚至可以用它们对每个项执行数学运算，这样就能进行快速计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![图片](img/Image00138.jpg)

图 6-5 展示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

一个 *字典* 也是一组值，但与有序索引不同，每个值都有自己的 *键*。由于没有索引，值并不按任何特定顺序存储。要访问字典中的值，你需要通过其键来查找。

键必须是唯一的。你不能在同一个字典中使用相同的键多次。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就无法选择哪个键！

让我们看看如何创建一个字典，并编写有助于你查找所需信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写 `var` 和你的字典名称。然后将键和值放在一对方括号内，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，字典是*无序的*。因此，你在结果面板中看到的州的顺序 ➋ 可能与输入时的顺序 ➊ 不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，所有的值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用`double`类型作为键，使用`string`类型作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是`double`类型，所有的值必须是`string`类型。你还会发现，结果面板中数字的顺序可能与在字典中输入分数的顺序完全不同。这没关系，因为你不需要知道顺序来访问任何东西。你可以通过键找到你需要的任何项目。让我们来看一下！

#### 访问字典中的值

在字典中查找值与在数组中查找值类似，只不过你使用的是方括号内的键，而不是索引，例如：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有很大的不同。当你通过数组的索引访问值时，你会直接得到值。而当你通过字典的键访问值时，返回的是一个可选值。

在第五章中，你学过可选值可能包含一个值，也可能是`nil`。Swift 返回可选值是因为你使用的键可能在字典中不存在，在这种情况下，就没有值可供访问。如果尝试访问一个不存在的值，会导致严重的错误！为了避免这个问题，Swift 返回了可选值。这意味着你在对字典中的值进行操作之前，需要先解包它。

要解包一个可选值，首先你需要通过`if-let`语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中检索“Texas”，我们使用`if let`语句将常量`loneStarState`设置为`usStates["TX"]` ➊。因为字典中包含这个州，所以输出了“I have Texas in my dictionary。”接下来，我们尝试使用不存在于字典中的键`usStates["FL"]` ➋ 来访问一个州。幸运的是，由于我们使用了`if-let`语句，当计算机无法找到该州时，程序不会崩溃。相反，输出了“I don't have that state in my dictionary.”。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，然后将新项目分配给你希望它在字典中拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不必依赖索引，所以新的字典项可能会出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。因此，你不会在我们的字典中看到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为"red"设置了值"apple"，但后来我们决定"raspberry"是更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值➊。

你可能还记得，这就是我们向字典中添加新值的方式。如果键在字典中已存在，那么该键的值将被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有一个 isEmpty 属性和一个 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则可以检查字典中有多少项。假设你有一个待售的水果篮子，你可以利用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，以及 values，包含字典的所有值。当我们遍历字典时，将会用到这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来遍历字典。这是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，后跟一个常量名称 fruit 作为字典的键，接着是关键字 in，字典名称，句点，再加上 keys。

在 for-in 循环的大括号内，我们可以访问键，我们称之为 fruit ➋ ，以及通过强制解包其内容（fruitBasket[fruit]! ➌ ）后在该键下的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的 fruit 键一定存在于字典中。

我们放入 for-in 循环中的任何代码都会为字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用 values 属性中的每个值，我们称其为 price。当遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选类型，因为它是直接作为字典中的值访问的。这意味着我们不需要解包它。你应该仍然看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！并且由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的打印顺序。

### 你学到了什么

在这一章中，你学会了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你需要使用数组并通过索引查找每个项目。如果你想通过键来存储项目，你应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写了一个函数后，你可以通过它的名字在程序的几乎任何地方调用它。

![Image](img/Image00137.jpg)

使用 for-in 循环非常适合打印数组中的每个值。如果你处理的是数字，甚至可以使用它们对每个项目执行数学运算，从而进行快速计算！以下代码获取一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与其自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 展示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典* 也是一个值的集合，但与有序索引的数组不同，每个值都有自己的 *键*。由于没有索引，值的存储顺序是无序的。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，而你请求计算机给出其中一个的值，计算机将无法选择哪个！

让我们来看看如何创建一个字典并编写能够帮助你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写上键和值的对应关系，类似于数组的写法。让我们创建一个字典来存储一些美国州的名字。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为字典是 *无序的*。因此，你在结果窗格中看到的州的顺序 ➋ 可能与输入州的顺序 ➊ 不同。它甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不需要与值类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数（doubles）作为键，字符串（strings）作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数（doubles），所有的值必须是字符串（strings）。再次提醒，你会发现结果窗格中的数字顺序可能与字典中分数的顺序大不相同。这是没问题的，因为你不需要知道顺序来访问任何东西。你可以通过键找到你需要的任何项目。让我们来看看如何操作！

#### 访问字典中的值

查找字典中的值类似于访问数组中的值，不同之处在于你在方括号中使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典中返回值时有一个很大的区别。当你在数组中访问某个索引的值时，你直接得到该值。当你通过字典中的键访问某个值时，你会得到一个可选值（optional）。

在第五章中，你学到了可选值可能包含一个值，也可能为 nil。Swift 返回可选值的原因是，当你在字典中查找项时，你使用的键可能在字典中不存在，这种情况下就没有可访问的值。如果尝试访问一个不存在的值，就会抛出一个错误！为了避免这个问题，Swift 返回可选值。这意味着在对字典中的任何值进行操作之前，你必须先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary." 接下来，我们尝试访问一个不存在于字典中的州，使用键 usStates["FL"] ➋。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."

#### 向字典中添加项

要向字典添加项，首先写出字典的名称，然后将新项分配给你希望它在字典中对应的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将值设置为 nil。因为字典中的值是以可选值的形式返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键 "MA" 对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示没有值。这就是为什么在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为 "red" 配置了值 "apple"，但后来我们决定使用 "raspberry" 更合适，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这与我们向字典中添加新值的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键/值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性来检查字典中有多少项。假设你有一个水果篮子待售。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，以及 values，它包含所有的值。我们在遍历字典时会使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式进行循环。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是字典键的常量名称 fruit，关键字 in，字典名称，句点，然后是 keys。

在 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋）以及通过使用 fruitBasket[fruit]! ➌ 强制解包其内容时得到的值。这个值就是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环中放置的任何代码都会为字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，称其为 price。在遍历 values 时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的顺序略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序不确定，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，而不是按顺序存储，你会使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中非常强大的基础。接下来我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写完函数后，可以通过它的名称在程序的几乎任何地方调用它。

使用`for-in`循环非常适合打印数组中的每个值。如果你在处理数字，你甚至可以使用它们对每个项目执行数学运算，从而加速计算！以下代码接受一个数字数组，并计算每个数字的平方（一个数字的平方是该数字与自身相乘）：

![Image](img/Image00138.jpg)

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但与有序索引的数组不同，每个值都有自己的*键*。因为没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有相同的键。如果有两个相同的键，而你要求计算机给你其中一个的值，计算机就不知道选择哪个！

让我们来看看如何创建字典并编写键，以帮助你查找所需的所有信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写出`var`和字典的名称。然后将键和值写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间都有一个冒号，键/值对之间由逗号分隔。

字典与数组不同，它们是*无序*的。因此，你在结果面板中看到的州的顺序➋可能与输入州的顺序➊不同。它甚至可能与书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变的字典，或者使用`let`来创建一个不可变的字典。

在 Swift 中，字典的所有键必须是相同的类型，所有的值也必须是相同的类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以将键设置为双精度浮点数，而值设置为字符串：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再说一次，你会发现结果面板中数字的顺序可能与字典中你编写的分数顺序完全不同。这是正常的，因为你无需知道顺序就能访问任何内容。你可以通过键来查找任何需要的项。让我们看看如何操作！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，只不过你需要在方括号中使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值时有一个很大的不同。当你通过数组的索引访问一个值时，你只是简单地得到这个值。但当你通过字典的键访问值时，Swift 会返回一个可选值。

在第五章中，你已经学习了可选值可能包含一个值，或者可能是 nil。当你在字典中查找项目时，Swift 返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可供访问。尝试访问一个不存在的值会给你带来一个大的错误！为了避免这个问题，Swift 返回了可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行任何操作。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们字典中有这个州，所以会打印出“我在字典中有 Texas”。接下来，我们尝试通过键 usStates["FL"] ➋访问一个字典中没有的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出“我在字典中没有那个州”。

#### 向字典添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目赋值给你希望它在字典中具有的键。让我们向 usStates 字典中添加"Minneapolis"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中删除项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选项返回的，所以你无需担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除“MA”键的值之后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么你在我们的字典中看不到"MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作原理与替换数组中的项目相同。你只需要将你想替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为“red”键设置了值“apple”，但后来我们决定使用“raspberry”更合适，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这与我们将新值输入字典的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果该键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性可以检查字典中有多少项。假设你有一个出售的水果篮子，你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以通过 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以用两种不同的方式来遍历字典。这是通过键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，后面跟着字典键的常量名 fruit，然后是关键字 in，接着是字典名称，一个句点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键 fruit ➋ 和通过强制解包 fruitBasket[fruit]! ➌ 获取的该键的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的“fruit”键一定在字典中。

我们放入`for-in`循环中的任何代码都会为字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的`values`属性来循环遍历：

![图片](img/Image00150.jpg)

我们使用相同风格的`for-in`循环，但现在我们使用常量来引用`values`属性中的每个值，我们称之为`price`。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选项，因为它是直接作为一个值访问的，在`fruitBasket`字典中。也就是说，我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。那是因为字典中的项不像数组中的项那样是按数字顺序排列的！由于顺序无法保证，如果你再次运行相同的代码，打印出来的顺序可能会不同。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储集合。如果要将项存储在有序列表中，你应该使用数组，并通过索引查找每一项。如果你想按键存储项，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中非常强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的工作。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![图片](img/Image00138.jpg)

图 6-5 显示了结果。

![图片](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一个值的集合，但是与有序索引不同，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，而你请求计算机给出其中一个的值，计算机将无法知道选择哪一个！

让我们来看一下如何创建一个字典，并编写能够帮助你找到所需信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建并初始化一个字典，首先写`var`和字典的名称。然后将键和值写在一对方括号内，类似于数组。我们来创建一个字典，存储几个美国州的名称。每个州的键将是其两位字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键值对之间由逗号分隔。

字典与数组的不同之处在于，它们是*无序的*。因此，你在结果面板中看到的州的顺序 ➋ 可能与输入州的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不必与值类型匹配。例如，如果你想存储一组分数，可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与字典中分数的书写顺序大不相同。这是可以接受的，因为你不需要知道顺序就可以访问任何内容。你可以通过键找到任何需要的项目。我们来看看如何操作！

#### 访问字典中的值

查找字典中的值类似于你在数组中访问值的方式，只不过你在方括号中使用的是键，而不是索引，像这样：`usStates["TX"]`。

然而，Swift 在从字典中返回值时有一个很大的不同。当你访问数组中的一个索引值时，你会直接得到这个值。当你通过键访问字典中的值时，你会得到一个可选值。

在第五章中，你学过可选值可能包含一个值，也可能为 `nil`。Swift 在你查找字典中的项目时返回可选值的原因是，你使用的键可能不存在于字典中，在这种情况下，就没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要在使用字典中的任何值之前，先解包它。

要解包一个可选值，首先你需要使用 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

为了从字典中检索 "Texas"（德州），我们使用 `if let` 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊ 。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary."。接下来，我们尝试使用一个不在字典中的州来访问数据，使用键 `usStates["FL"]` ➋ 。幸运的是，由于我们使用了 `if-let` 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们向我们的 usStates 字典中添加 "Minnesota"：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中删除项目

从字典中删除项目非常简单；你只需将该值设置为 nil。由于字典中的值是以可选项形式返回的，你不需要担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，当你删除 "MA" 这个键的值时，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它与替换数组中的项目一样。你只需要将要替换的项目设置为其他值。例如，假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为 "red" 设置的值是 "apple"，但后来我们决定用 "raspberry" 作为更合适的水果，因为有时苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们将新值添加到字典中的方式相同。如果字典中已经存在该键，则该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码演示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则使用 count 属性来检查你有多少个项目。假设你有一个待售的水果篮子。你可以使用这些属性来帮助你跟踪所有内容：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中所有的键；values，包含字典中所有的值。在我们遍历字典时，将会用到这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，因此你可以通过两种不同的方式来实现。下面是通过键遍历字典的方式：

![图片](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来循环遍历 fruitBasket，并打印其内容。我们首先写出关键字 for，后面是字典键的常量名称 fruit，接着是关键字 in，字典名称，一个句点，最后是 keys。

在 for-in 循环的花括号内，我们可以访问键（我们称其为 fruit ➋），以及通过强制解包 fruitBasket[fruit]! ➌ 获取的该键对应的值。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的水果键肯定在字典中。

我们在 for-in 循环内部放入的任何代码都会为字典中的每个键执行一次。因此，你应该看到打印语句打印三次。

我们也可以使用字典的值属性来循环遍历：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，称之为 price。循环遍历值时，我们无法在循环内访问键。

另一个需要注意的区别是，价格不是一个可选值，因为它是直接作为水果篮字典中的一个值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项目不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目。要将项目存储在有序列表中，你需要使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，则需要使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大构建块。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写函数后，你可以在程序中的几乎任何地方通过函数名来调用它。

图 6-5 显示了结果。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

*字典*也是一种值的集合，但与有序的索引不同，每个值都有自己的*键*。由于没有索引，值并不会按特定顺序存储。要访问字典中的值，你需要通过键来查找它们。

键必须是唯一的。你不能在同一个字典中有重复的键。如果有两个相同的键，而你要求计算机给出其中一个的值，计算机将不知道选择哪个！

让我们来看一下如何创建字典并编写键，这将帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建并初始化字典，首先写上 var 和字典的名称。然后，将键及其对应的值写在一对方括号内，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组不同，因为它们是 *无序* 的。因此，你看到的结果面板中州的顺序 ➋ 可能与你输入州的顺序 ➊ 完全不同，甚至可能不同于书中列出的顺序！

和数组一样，你可以使用 var 来创建可变字典，或使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，可以使用浮动类型作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是浮动类型（doubles），而所有的值必须是字符串类型（strings）。再说一次，你会发现结果面板中的数字顺序可能与字典中输入分数的顺序完全不同。这是没问题的，因为你不需要了解顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们来看一下！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，唯一不同的是，字典使用键而不是索引，例如：usStates["TX"]。

然而，Swift 返回字典中的值的方式有一个很大的区别。当你在数组中按索引访问一个值时，你只是简单地得到该值。当你在字典中使用键访问一个值时，你得到的是一个可选值。

在第五章中，你学习了可选类型（optionals）可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选类型的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会给你一个大错误！为了避免这个问题，Swift 返回了可选类型。这意味着你需要解包（unwrap）从字典中获取的任何值，然后才能对其进行操作。

要解包一个可选值，首先你需要使用 `if-let` 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 `if let` 来将常量 `loneStarState` 设置为 `usStates["TX"]` ➊ 。因为我们在字典中有这个州，所以下面会打印出 "I have Texas in my dictionary." 接下来，我们尝试使用键 `usStates["FL"]` ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 `if-let` 语句，当计算机无法找到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典中添加项

要向字典中添加一个项，首先写出字典的名称，并将新项赋值给你想要的字典键。让我们将 "Minnesota" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

现在当你查看 `usStates` 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"] 。记住，由于你不需要依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一个项非常简单；你只需将该值设置为 `nil`。因为字典中的值是作为可选项返回的，所以你无需担心 `nil` 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值之后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，`nil` 是特殊的，表示完全没有值。这就是为什么你不会在字典中看到 "MA": nil。

#### 在字典中替换项

在字典中替换项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项设置为其他值。例如，你创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为 "red" 分配了值 "apple"，但后来我们决定使用 "raspberry" 作为更好的水果，因为有时苹果是绿色或黄色的。要将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为新的值 ➊。

你可能记得，这与我们向字典中输入新值的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也具有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果字典不为空，则 `count` 属性可以检查字典中有多少项。假设你有一个水果篮子在售卖。你可以利用这些属性帮助你跟踪每一项：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典中的所有键；以及 `values`，它包含字典中的所有值。当我们循环遍历字典时，会使用这两个属性。

让我们写些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个条目都有一个键和值，所以你可以用两种不同的方式来做到这一点。以下是如何通过字典的键来循环遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写 `for` 关键字，然后是常量名 `fruit`，代表字典的键，接着是 `in` 关键字，字典名，句点，最后是 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键 `fruit` ➋，并且当我们强制解包其内容时，能够通过 `fruitBasket[fruit]!` ➌ 获取该键的值。这个值将是水果的价格。

在这种情况下，强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 `for-in` 循环内部放置的任何代码都会在字典中的每个键上运行一次。因此，你应该能看到打印语句打印三次。

我们还可以通过字典的 `values` 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 `for-in` 循环，但现在我们使用常量来引用 `values` 属性中的每个值，我们称之为 `price`。在循环遍历 `values` 时，我们无法从循环内访问键。

另一个需要注意的区别是价格不是可选的，因为它直接作为值访问于 `fruitBasket` 字典中。这意味着我们不需要解包它。你应该仍然能看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项不像数组中的项那样按编号顺序排列！并且因为顺序不保证，所以如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学会了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组并通过索引查找每个项。如果你想通过键存储项，你则使用字典。

了解数组和字典及其使用方法是几乎任何编程语言中的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写了函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![Image](img/Image00139.jpg)

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

一个*字典*也是一个值的集合，但不同于有序的索引，每个值都有自己的*键*。由于没有索引，值不会按特定顺序存储。要访问字典中的值，你需要通过键查找它们。

键必须是唯一的。你不能在同一个字典中有两个相同的键。如果有两个相同的键，而你要求计算机给出其中一个的值，计算机将不知道该选择哪个！

让我们看看如何创建一个字典，并写下能够帮助你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上`var`和字典的名称。然后将键和值放在一对方括号内，类似于数组的写法。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对由逗号分隔。

字典与数组的不同之处在于它是*无序的*。因此，结果窗格中显示的州的顺序➋可能与输入时的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不必与值类型匹配。例如，如果你想存储一组分数，你可以使用`double`作为键，`string`作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是`double`类型，所有的值必须是`string`类型。再次强调，你会发现结果窗格中的数字顺序可能与字典中分数的顺序大不相同。这没问题，因为你无需了解顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们来看看！

#### 访问字典中的值

在字典中查找值类似于你在数组中访问值的方式，只不过你是在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中返回字典值的方式有很大不同。当你访问数组中的某个索引时，你直接得到值。当你通过键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值的原因是你使用的键可能在字典中不存在，这种情况下就没有值可供访问。尝试访问一个不存在的值会导致一个错误！为了避免这个问题，Swift 返回可选值。这意味着你需要在使用字典中的值之前，先解包它。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。下面的代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，打印出 "I have Texas in my dictionary." 接着，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加一项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们把 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，因此新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需将该值设置为 nil。因为字典中的值是作为可选值返回的，所以你无需担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，当你移除键 "MA" 对应的值时，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的一项也很简单。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们给"red"赋了"apple"的值，但后来我们决定"raspberry"是一个更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将`colorFruits["red"]`设置为它的新值 ➊ 。

你可能记得，这是我们将新值输入字典的相同方式。如果字典中已经存在该键，那么该键的值将被替换。如果该键不存在，那么新的键/值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有`isEmpty`属性和`count`属性。例如，以下代码展示了如何使用`isEmpty`属性检查字典是否为空，如果不为空，则`count`属性检查你有多少项。假设你有一个待售的水果篮子。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键，以及`values`，它包含所有的值。我们将在循环遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮子并打印每种水果的价格。

#### 循环遍历字典

你可以使用`for-in`循环遍历字典。因为每个项都有键和值，你可以通过两种不同的方式来做到这一点。以下是如何使用字典的键来循环遍历字典：

![Image](img/Image00149.jpg)

这里我们使用字典的`keys`属性 ➊ 来循环遍历`fruitBasket`并打印其内容。我们首先写出`for`关键字，后跟字典键的常量名称`fruit`，然后是`in`关键字，字典名，句点，和`keys`。

在`for-in`循环的大括号内部，我们可以访问键（我们称之为`fruit` ➋ ）以及通过`fruitBasket[fruit]!`强制解包其内容后的值 ➌ 。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入`for-in`循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句打印三次。

我们还可以使用字典的`values`属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的`for-in`循环，但现在我们使用一个常量来引用`values`属性中的每个值，我们称之为`price`。在循环遍历`values`时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price`不是一个可选项，因为它是直接作为值在`fruitBasket`字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！并且由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言的一个强大基础。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完一个函数后，你可以通过它的名称在程序的几乎任何地方调用它。

*图 6-5：打印 myNumbers 数组中每个数字的平方*

### 字典是关键！

一个*字典*也是一个值的集合，但与数组不同，每个值都有自己的*键*。由于没有索引，值并没有按照特定顺序存储。要访问字典中的值，你需要通过键查找它们。

一个键必须是唯一的。你不能在同一个字典中使用相同的键两次。如果有两个相同的键，当你请求计算机给出其中一个的值时，计算机将不知道选择哪一个！

让我们来看看如何创建一个字典，并编写键，以帮助你找到所有需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写下 var 和字典的名称。然后，在一对方括号内写下键及其对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，键和值之间有一个冒号，键值对之间由逗号分隔。

字典与数组的不同之处在于，它们是*无序*的。由于这一点，你在结果面板➋中看到的状态顺序可能与输入状态的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，所有的值必须是字符串。再次强调，你会看到结果窗格中的数字顺序可能与写入字典中的分数顺序有很大不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只是你使用方括号中的键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大的不同。当你访问数组中的一个值时，你只是得到这个值。当你使用键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选项的原因是你使用的键在字典中可能不存在，在这种情况下无法访问任何值。尝试访问一个不存在的值会导致一个巨大的错误！为避免这个问题，Swift 返回可选项。这意味着你需要解包字典中得到的任何值，才能对其进行操作。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出“我在字典中有 Texas”。接下来，我们尝试通过使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出“我在字典中没有那个州”。

#### 向字典添加项

要向字典添加项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将值设置为 nil。因为字典中的值是以可选项返回的，所以你无需担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除 "MA" 键对应的值之后，`usStates` 被更新为 `["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]`。记住，`nil` 是特别的，表示没有值。这就是为什么在字典中你看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项目也很简单。它和替换数组中的项目是一样的。你只需要将你想要替换的项设置为其他值。例如，你创建了一个包含水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 更适合作为水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为新的值 ➊。

你可能记得，这和我们将新值添加到字典中的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性检查字典是否为空，如果不为空，则 `count` 属性可以检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典中的所有键，和 `values`，它包含所有的值。当我们遍历字典时，会用到这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每一项都有键和值，你可以用两种不同的方式来遍历。下面是通过字典的键来遍历的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印它的内容。我们首先写 `for` 关键字，接着是常量名 `fruit`（表示字典的键），然后是 `in` 关键字，字典名称，接着是一个点号，最后是 `keys`。

在我们的 `for-in` 循环的大括号内部，我们可以访问到键（我们称之为 fruit ➋）以及通过 `fruitBasket[fruit]!` 强制解包该键对应的值 ➌。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所用的水果键肯定在字典中。

我们放在 `for-in` 循环中的任何代码都会为字典中的每一个键执行一次。所以你应该看到打印语句执行三次。

我们也可以通过字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用每个值，我们称之为 price，存在 values 属性中。在循环遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为值访问 fruitBasket 字典中的项。这意味着我们不需要解包它。你应该仍然能看到打印语句打印三次。图 6-6 显示了两个循环的输出结果。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序无法保证，如果你重新运行相同的代码，你可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你将使用数组，并通过索引查找每个项目。如果你想按键存储项目，你则需要使用字典。

了解数组和字典及其用法，是几乎所有编程语言中的一个强大的构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定任务。在编写完函数后，你可以通过其名称在程序中的几乎任何地方调用它。

### 字典是关键！

*字典* 也是一个值的集合，但与有序的索引不同，每个值都有自己的 *键* 。由于没有索引，值不会按照特定顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。你不能在同一个字典中重复使用相同的键。如果有两个相同的键，并且你要求计算机给你其中一个的值，计算机将无法确定该选择哪个！

让我们看看如何创建字典并写出能够帮助你找到所有信息的键。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写 var 和字典的名称。然后将键及其对应的值写在一对方括号内，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

正如你所看到的，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典与数组的不同之处在于它们是 *无序的* 。因此，你在结果面板 ➋ 中看到的状态顺序很可能与输入状态时的顺序 ➊ 不同！它甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用`var`来创建一个可变字典，或者使用`let`来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不一定需要与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到结果面板中的数字顺序可能与在字典中编写分数的顺序有所不同。这是可以接受的，因为你不需要知道顺序来访问任何项。你可以通过键找到任何你需要的项。让我们看看！

#### 访问字典中的值

在字典中查找一个值的方式类似于通过数组访问值，不同之处在于你需要在方括号内使用一个键，而不是一个索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个很大的不同。当你通过数组的索引访问值时，你会直接得到值。而当你通过字典中的键访问值时，你会得到一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是在字典中查找项时，你使用的键可能不存在于字典中，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个严重错误！为避免这个问题，Swift 返回了可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先使用`if-let`语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用`if let`将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中包含这个州，所以下面会打印出“I have Texas in my dictionary.”。接下来，我们尝试使用不存在于字典中的键 usStates["FL"] ➋来访问一个州。幸运的是，因为我们使用了`if-let`语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“I don't have that state in my dictionary.”。

#### 向字典中添加项

要向字典添加一项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将该值设置为 nil。由于字典中的值是作为可选项返回的，因此你不需要担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键 "MA" 的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示完全没有值。因此，你不会在我们的字典中看到 "MA": nil。

#### 字典中替换项

在字典中替换项也很容易。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他内容。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为“red”设置了值“apple”，但后来我们决定“raspberry”是更好的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们将新值添加到字典中的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码演示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性将检查你有多少项。想象你有一个出售水果的篮子。你可以使用这些属性来帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以通过两种不同的方式进行遍历。以下是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印它的内容。我们从编写关键字 for 开始，后面跟着一个常量名称 fruit 作为字典的键，再加上关键字 in、字典名称、一个句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键，也就是我们称之为 fruit ➋ 的部分，以及当我们强制解包其内容时的该键对应的值，即 fruitBasket[fruit]! ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会为字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用每个值，这里我们称其为 price，它位于 values 属性中。在遍历值时，我们无法从循环内部访问到键。

另一个需要注意的区别是，price 不是一个可选值，因为它是通过直接访问 fruitBasket 字典中的值来获得的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 展示了两次循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按数字顺序排列！由于顺序无法保证，因此如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你将使用数组并通过索引查找每个项目。如果你想通过键来存储项目，则应使用字典。

了解数组和字典及其用法是几乎所有编程语言中一个强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的工作。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

*字典*也是一个值的集合，但与有序索引不同，每个值都有自己的*键*。因为没有索引，所以值没有以特定的顺序存储。要访问字典中的值，你需要通过它们的键来查找。

键必须是唯一的。同一个字典中不能有相同的键。如果有两个相同的键，你要求计算机给出其中一个的值，计算机将无法知道该选择哪个！

让我们看看如何创建一个字典，并编写键，帮助你找到所有需要的信息。

![图片](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写 var 和字典的名称。然后，将键和值对放入一对方括号中，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和它的值之间有一个冒号，并且键/值对之间由逗号分隔。

字典与数组的不同之处在于它们是*无序*的。由于这一点，你在结果面板中看到的州的顺序 ➋ 可能与输入州的顺序 ➊ 不同，甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一个分数的集合，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，而所有的值必须是字符串。同样，你会看到结果面板中的数字顺序可能与字典中写入分数的顺序大不相同。这是可以的，因为你不需要知道顺序来访问任何东西。你可以通过键找到你需要的任何项。让我们看看如何做到这一点！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问值的方式，只不过你在方括号内使用的是一个键，而不是索引，例如：usStates["TX"]。

然而，Swift 在返回字典中的值时存在一个很大的区别。当你访问数组中某个索引的值时，你只会得到该值。当你通过键访问字典中的值时，你会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是你在字典中查找的键可能不存在，在这种情况下，就没有值可以访问。尝试访问一个不存在的值会给你带来一个大错误！为了避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，然后才能对其进行操作。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取"Texas"的值，我们使用`if let`将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中包含这个州，所以会打印出"I have Texas in my dictionary."。接下来，我们尝试访问一个不在字典中的州，使用键 usStates["FL"] ➋。幸运的是，由于我们使用了`if-let`语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出"I don't have that state in my dictionary."。

#### 向字典中添加项目

要向字典中添加项目，首先写下字典的名称，并将新项目分配给你希望它在字典中拥有的键。我们来给我们的 usStates 字典添加"明尼苏达州"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它被更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项目可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将该值设置为`nil`。因为字典中的值是作为可选项返回的，所以你不必担心`nil`会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在移除"MA"键的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil`是特殊的，表示没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的操作方式和替换数组中的项目一样。你只需要将你想替换的项目设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"设置了"apple"作为值，但后来我们决定使用"raspberry"（覆盆子）作为更合适的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]的值设置为新的值 ➊。

你可能还记得，这和我们往字典中输入新值的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键值对会被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有`isEmpty`属性和`count`属性。例如，以下代码展示了如何使用`isEmpty`属性来检查字典是否为空，如果字典不为空，`count`属性可以检查字典中有多少项。假设你有一个水果篮在出售。你可以使用这些属性来帮助你跟踪一切：

![图片](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。在我们遍历字典时，将会使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以用两种不同的方式来遍历字典。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是常量名称 fruit 代表字典的键，接着是关键字 in，字典的名称，一个句点，最后是 keys。

在我们 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过`fruitBasket[fruit]!`强制解包该键的值 ➌。这个值将是水果的价格。

在这种情况下，强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们放入 for-in 循环中的任何代码会对字典中的每个键执行一次。因此，你应该能看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来表示每个值，我们称之为 price，在 values 属性中。当循环遍历值时，我们无法在循环内访问到键。

另一个需要注意的区别是，价格不是一个可选值，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！并且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学会了如何将项存储在数组和字典中。要将项存储在有序列表中，你可以使用数组，并通过索引查找每个项。如果你想按键存储项，那么你应该使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数后，你可以使用其名称在程序的几乎任何地方调用它。

键必须是唯一的。你不能在同一个字典中重复使用相同的键。如果有两个相同的键，并且你要求计算机返回其中一个的值，计算机就不知道选择哪个！

让我们看看如何创建一个字典并写下键，以帮助你找到所有你需要的信息。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写上 var 和字典的名称。然后将键和值写在一对方括号中，类似于数组。让我们创建一个字典来存储几个美国州的名字。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

正如你所看到的，每个键和值之间都有一个冒号，键/值对之间由逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格 ➋ 中看到的州的顺序可能与你输入州的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

与数组类似，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度数（doubles）作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），所有的值必须是字符串。再次提醒，你会看到结果窗格中的数字顺序可能与字典中输入分数的顺序有所不同。这是正常的，因为你不需要知道顺序就能访问任何内容。你可以通过键来找到你需要的任何项目。让我们来看看如何做！

#### 访问字典中的值

查找字典中的值与访问数组中的值类似，不同之处在于你使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典值的方式与数组不同。当你访问数组中某个索引的值时，你只会得到这个值。当你在字典中用键访问值时，你得到的是一个可选值（optional）。

在第五章，你学过可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。尝试访问不存在的值会导致一个严重错误！为了避免这个问题，Swift 返回了可选值。这意味着，在你使用字典中返回的任何值之前，你需要先解包（unwrap）它。

要展开一个可选值，首先你需要检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"]➊。由于我们在字典中有这个州，输出行“I have Texas in my dictionary.”会被打印。接下来，我们尝试使用不存在于字典中的键 usStates["FL"]➋来访问一个州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，输出“我字典中没有这个州。”会被打印。

#### 向字典添加项目

要向字典中添加一个项目，首先写下字典的名称，并将新项目赋给你希望它在字典中具有的键。让我们向我们的 usStates 字典中添加“Minnesota”：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新增字典项目可能出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需要将该值设置为 nil。由于字典中的值是可选的，所以你不必担心 nil 会导致字典中的任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除“MA”键的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在字典中看不到"MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很容易。它与替换数组中的项目方式相同。你只需要将你想要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们给“red”赋值为“apple”，但后来我们决定“raspberry”是更合适的水果，因为有时候苹果是绿色或黄色的。要用“raspberry”替换“apple”，我们将 colorFruits["red"]设置为它的新值➊。

你可能还记得，这就是我们向字典中输入新值的方式。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则 count 属性检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还具有两个特殊属性：keys，包含字典中的所有键；以及 values，包含字典中的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每个项都有一个键和值，因此你可以通过两种不同的方式来遍历字典。这是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写下关键字 `for`，然后是常量名 `fruit`（代表字典的键），接着是关键字 `in`，然后是字典名、一个点和 `keys`。

在我们 `for-in` 循环的大括号内部，我们可以访问到键（我们称之为 fruit ➋）和该键对应的值，当我们通过 `fruitBasket[fruit]!` 强制解包其内容时 ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定存在于字典中。

我们在 `for-in` 循环中放入的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 `for-in` 循环风格，但现在我们使用常量来引用 `values` 属性中的每个值，称之为 `price`。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是可选项，因为它是作为 `fruitBasket` 字典中的值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组那样按顺序排列！由于顺序并不保证，因此如果你重新运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。为了将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想按键存储项，则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完一个函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

让我们来看看如何创建一个字典并写出能够帮助你找到所需信息的键。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化一个字典，首先写下 var 和字典的名称。然后，在一对方括号内写下键及其对应的值，类似于数组。让我们创建一个字典来存储一些美国州的名称。每个州的键将是其两字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键与其值之间有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的状态顺序➋很可能与你输入状态时的顺序➊不同。甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键类型不必与值类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与字典中分数的顺序大不相同。这是可以的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到任何你需要的项。让我们看看如何做到这一点！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，只是你使用键而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中从字典返回值有一个很大的区别。当你访问数组中某个索引的值时，你只是简单地得到这个值。而当你用字典中的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个错误！为避免此问题，Swift 返回可选项。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出 "I have Texas in my dictionary"。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary"。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目分配给你希望它在字典中具有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项目可能出现在字典的任何位置。

#### 从字典中删除项目

从字典中删除项目非常简单；你只需将值设置为 nil。由于字典中的值作为可选项返回，因此你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除了键 "MA" 的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。因此，你不会在字典中看到 "MA": nil。

#### 在字典中替换项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将你想要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了值 "apple"，但后来我们决定使用 "raspberry" 更合适，因为有时苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能记得这正是我们向字典中输入新值的方式。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性检查字典中有多少个条目。假设你有一个出售的水果篮。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还具有两个特殊属性：keys，其中包含字典的所有键，以及 values，其中包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个条目都有一个键和值，所以你可以用两种不同的方式来实现。这是使用键来遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从编写关键字 for 开始，接着是常量名称 fruit（代表字典键），关键字 in，字典名称，句点，然后是 keys。

在我们 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及该键的值，当我们通过 fruitBasket[fruit]! ➌ 强制解包其内容时。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price，它位于 values 属性中。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选值，因为它是作为水果篮字典中的一个值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你得到的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组中的项那样按编号顺序排列！由于顺序无法保证，因此如果你再次运行相同的代码，打印的顺序可能会有所不同。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项。为了将项存储在一个有序列表中，你应该使用数组，并通过索引查找每个项。如果你想根据键来存储项，则应使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的一个强大基础。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写完一个函数后，你可以通过它的名称在程序的几乎任何地方调用它。

![Image](img/Image00140.jpg)

#### 初始化字典

要创建和初始化字典，首先写上 var 和字典的名称。然后在一对方括号中写上键和值，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两个字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间都有一个冒号，键/值对之间用逗号分隔。

字典不同于数组，它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与输入州时的顺序➊不同，甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，而字典的所有值也必须是相同类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一组分数，你可以将键设为双精度浮点数，而将值设为字符串：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与你在字典中输入分数的顺序大相径庭。这是正常的，因为你不需要知道顺序就能访问任何项。你可以通过键找到任何你需要的项。我们来看看！

#### 访问字典中的值

在字典中查找一个值的方式类似于访问数组中的值，不同之处在于，你需要在方括号内使用一个键而不是索引，例如：usStates["TX"]。

然而，Swift 在从字典中返回值时有一个重要区别。当你访问数组中的某个索引的值时，你只是获得该值。当你通过键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选值的原因是你使用的键可能在字典中不存在，在这种情况下没有值可以访问。尝试访问一个不存在的值会给你一个大错误！为避免这个问题，Swift 返回可选值。这意味着你在对字典中的值进行任何操作之前，需要解包任何从字典中获取的值。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印了“I have Texas in my dictionary.”接下来，我们尝试使用不存在的州键 usStates["FL"] ➋访问一个州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印了“I don't have that state in my dictionary.”

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目赋给你想要它在字典中对应的键。让我们将"Michigan"添加到我们的 usStates 字典：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil 即可。因为字典中的值是作为可选值返回的，所以你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"对应的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么在我们的字典中没有看到"MA": nil 的原因。

#### 在字典中替换项目

在字典中替换项目也很简单。它与替换数组中的项目是一样的。你只需要将你想替换的项目设为另一个值。例如，假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为“red”赋值为“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为其新值➊。

你可能还记得，这与我们将新值插入字典时的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

就像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性将检查你有多少项。假设你有一个水果篮子在出售。你可以使用这些属性来帮助你追踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含所有字典的键，和 values，包含所有字典的值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，因此你可以通过两种不同的方式来实现。下面是通过键来遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来遍历 fruitBasket 并打印其内容。我们从写下关键字 for 开始，接着是字典键的常量名称 fruit，关键字 in，字典名称，句点，和 keys。

在 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit➋）和该键的值，当我们强制解包其内容时，使用 fruitBasket[fruit]!➌。该值将是水果的价格。

在这种情况下，可以安全地强制解包值，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会为字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它直接作为值访问 fruitBasket 字典。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与你的不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序不确定，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储集合。要在有序列表中存储项，你将使用数组并通过索引查找每个项。如果你想按键存储项，你将使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以通过它的名称在程序的几乎任何地方调用它。

#### 初始化字典

要创建并初始化一个字典，首先写上 var 和字典的名称。然后在一对方括号内写上键和值，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两个字母的缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，并且键/值对是由逗号分隔的。

字典与数组不同，因为它们是 *无序的*。因此，你在结果面板中看到的州的顺序 ➋ 可能与你输入州的顺序 ➊ 不同。它甚至可能与书中打印的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或者使用 let 创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再次提醒，结果面板中的数字顺序可能与您在字典中书写分数的顺序大不相同。这是没问题的，因为你不需要知道顺序才能访问任何内容。你可以通过键找到任何你需要的项。我们来看看怎么做！

#### 访问字典中的值

在字典中查找值类似于你在数组中访问值的方式，只是你在方括号中使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大不同。当你访问数组中某个索引的值时，你会直接得到这个值。而当你用键访问字典中的值时，你得到的是一个可选项。

在第五章中，你学习过可选项可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选项的原因是，你使用的键可能在字典中不存在，在这种情况下没有值可以访问。试图访问不存在的值会导致一个严重错误！为了避免这个问题，Swift 返回可选项。这意味着，在你对字典中获取的任何值进行操作之前，你需要先解包它。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们字典中有这个州，所以会打印出 "I have Texas in my dictionary."。接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典中添加一项，首先写下字典的名称，然后将新项赋给你希望它拥有的键。让我们把 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需将该值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键为"MA"的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。例如，你可以创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

最开始我们为“红色”设置了值“apple”，但后来我们决定“raspberry”是更好的水果选择，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，这和我们将新值输入字典的方式相同。如果键已经存在于字典中，那么该键对应的值将被替换。如果该键尚不存在，则会将新的键值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则 count 属性可以检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性来帮助你跟踪所有的东西：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，其中包含字典的所有键，values，其中包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮并打印每个水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环来遍历字典。由于每个项都有一个键和值，因此你可以通过两种不同的方式来遍历字典。这是使用字典的键来循环遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从写下关键字 for 开始，后跟一个常量名称 fruit 用来表示字典的键，接着是关键字 in，字典的名称，一个点，最后是 keys。

在 for-in 循环的花括号内，我们可以访问键（我们将其命名为 fruit ➋），并通过强制解包 fruitBasket[fruit]! ➌ 来访问该键对应的值。这个值将是水果的价格。

在这种情况下，强制解包该值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句会显示三次。

我们还可以通过字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们将其命名为 price。在循环遍历值时，我们无法访问循环内的键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该能看到打印语句显示三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的顺序略有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在这一章中，你学会了如何在数组和字典中存储一组项。要将项存储在有序列表中，你可以使用数组并通过索引查找每个项。如果你想通过键存储项，你应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，你可以使用它的名称从程序中的几乎任何地方调用它。

要创建并初始化一个字典，首先写上 var 和字典的名称。然后将键和值放在一对方括号内，类似于数组。让我们创建一个字典来存储几个美国州的名称。每个州的键将是它的两字母缩写：

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键值对之间用逗号分隔。

字典与数组不同，因为它们是*无序的*。因此，你看到的结果面板中州的顺序➋可能与输入这些州时的顺序➊不同。甚至可能与本书中打印的顺序不同！

与数组一样，你可以使用 var 来创建可变字典，或者使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度浮点数作为键，使用字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会看到结果面板中的数字顺序与在字典中写入分数时的顺序可能大不相同。这是正常的，因为你不需要知道顺序就可以访问任何内容。你可以通过键来查找任何需要的项。让我们看看如何操作！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，唯一不同的是，你在方括号中使用的是键，而不是索引，像这样：usStates["TX"]。

然而，Swift 返回字典中的值与数组的不同。当你访问数组中的一个索引值时，你只是得到该值。当你使用键访问字典中的一个值时，你得到的是一个可选项。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选项的原因是你使用的键可能在字典中不存在，在这种情况下，就没有值可以访问。试图访问一个不存在的值会导致一个巨大的错误！为了避免这个问题，Swift 返回了可选项。这意味着你需要解包从字典中取出的任何值，才能对其进行操作。

要解包一个可选项，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中取出一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，所以会打印 "I have Texas in my dictionary"。接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印的是 "I don't have that state in my dictionary"。

#### 向字典中添加项目

要向字典中添加一个项目，首先写出字典的名称，并将新项目分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将该值设置为 nil 即可。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作原理与替换数组中的项目相同。你只需将你想要替换的项目设置为其他内容。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是更好的水果选择，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为其新值 ➊。

你可能记得，这与我们将新值输入字典的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果该键不存在，则新的键值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 `isEmpty` 属性和一个 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果字典不为空，`count` 属性则用来检查字典中有多少项。想象一下你有一个待售的水果篮。你可以使用这些属性帮助你追踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键，和 `values`，它包含所有的值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每一项都有一个键和一个值，所以你可以用两种不同的方式来遍历字典。以下是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写下 `for` 关键字，接着是常量名称 `fruit`，表示字典的键，后面跟着 `in` 关键字，字典的名称，一个句点，以及 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键（我们称之为 `fruit` ➋）和该键的值，通过强制解包其内容 `fruitBasket[fruit]!` ➌。这个值就是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的 `fruit` 键一定在字典中。

我们放在 `for-in` 循环中的任何代码将会为字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以通过字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但现在我们使用常量来引用 `values` 属性中的每个值，我们称之为 `price`。当遍历 `values` 时，我们无法从循环内访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它是直接作为 `fruitBasket` 字典中的值访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将多个项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想按键存储项，则应使用字典。

了解数组和字典及其用法是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。写完函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

![](img/Image00141.jpg)

如你所见，每个键和值之间有一个冒号，键/值对之间用逗号分隔。

字典不同于数组，因为它们是*无序的*。因此，你在结果面板中看到的州的顺序➋很可能与输入的顺序➊不同。甚至可能与书中列出的顺序不同！

和数组一样，你可以使用 var 来创建可变字典，或使用 let 来创建不可变字典。

在 Swift 中，字典的所有键必须是相同类型的，字典的所有值也必须是相同类型的，但键类型不需要与值类型匹配。例如，如果你想存储一个分数集合，你可以使用双精度浮点数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。再一次，你会看到结果面板中数字的顺序可能与在字典中书写分数的顺序有很大的不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们来看看如何做到！

#### 访问字典中的值

在字典中查找值类似于在数组中访问值，区别在于你使用的是键而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有一个显著的区别。当你访问数组中的一个索引值时，你直接得到这个值。当你用一个键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是在字典中查找项时，使用的键可能在字典中不存在，这种情况下就没有可访问的值。尝试访问一个不存在的值会导致错误！为了避免这个问题，Swift 返回了可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行操作。

要解包一个可选值，首先通过 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，因此会打印出“我在字典中找到了 Texas”。接下来，我们尝试访问一个在字典中不存在的州，通过使用键 usStates["FL"] ➋。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出“我在字典中没有这个州”。

#### 向字典中添加项

要向字典中添加一项，首先写下字典的名称，并将新项赋给你希望它在字典中拥有的键。让我们把“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，因此新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一个项非常简单；你只需要将其值设置为 nil。由于字典中的值是以可选值的形式返回的，因此你不需要担心 nil 会在字典中造成任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”对应的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到 "MA": nil。

#### 替换字典中的项

在字典中替换一项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他值。例如，假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始我们将值“apple”赋给“red”，但是后来我们决定使用“raspberry”，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能还记得，这是我们向字典中输入新值的相同方式。如果键已经存在于字典中，那么该键的值会被替换。如果该键尚不存在，则新键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。假设你有一个水果篮在售，你可以使用这些属性帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键，以及 values，包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种方式来实现这一点。下面是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，然后是常量名称 fruit 作为字典键，关键字 in，字典名称，点，最后是 keys。

在 for-in 循环的大括号内部，我们可以访问到键，称之为 fruit ➋，以及通过 fruitBasket[fruit]! ➌ 强制解包其内容后获取的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句会显示三次。

我们还可以使用字典的 values 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在循环值时，我们无法从循环内部访问到键。

需要注意的另一个不同之处是，price 不是一个可选类型，因为它是直接作为水果篮字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句会显示三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按数字顺序排列！由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项目。要将项目存储在有序列表中，你应该使用数组并通过索引查找每个项目。如果你想通过键存储项目，则应该使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建模块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。编写了一个函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

如你所见，每个键和它的值之间都有一个冒号，键值对之间用逗号分隔。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果窗格中看到的状态顺序 ➋ 可能与输入状态的顺序 ➊ 不同。它甚至可能与本书中打印的顺序不同！

和数组一样，你可以使用 `var` 来创建一个可变字典，或者使用 `let` 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同的类型，字典的所有值也必须是相同的类型，但键的类型不需要与值的类型匹配。例如，如果你想存储一个分数的集合，你可以将键定义为 `double` 类型，值定义为 `string` 类型：

![](img/Image00142.jpg)

在这个字典中，所有键必须是 `double` 类型，所有值必须是 `string` 类型。同样，你会发现结果窗格中数字的顺序可能与在字典中编写分数的顺序大不相同。这没问题，因为你无需知道顺序就能访问任何内容。你可以通过键找到你需要的任何项目。让我们来看一下！

#### 在字典中访问值

在字典中查找一个值类似于在数组中访问一个值，唯一的区别是你需要在方括号中使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 在从字典返回值的方式上有很大的不同。当你在数组的索引位置访问一个值时，你会直接得到该值。而在字典中通过键访问值时，你会得到一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项目时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回了可选值。这意味着你在对字典中的任何值进行操作之前，都需要先解包它。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码演示了如何从字典中获取值：

![图片](img/Image00143.jpg)

要从字典中获取 "Texas" 的值，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。由于我们在字典中有这个州，输出 "I have Texas in my dictionary."。接下来，我们尝试访问字典中没有的州，使用键 usStates["FL"] ➋。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，输出 "I don't have that state in my dictionary."。

#### 向字典中添加项目

要向字典中添加项目，首先写出字典的名称，并将新项目分配给你希望它在字典中具有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，你的新字典项目可能会出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除项目非常简单；你只需将值设置为 nil。由于字典中的值是作为可选值返回的，因此你不必担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始，我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是一个更好的水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这和我们将新值插入字典的方式是一样的。如果字典中已经存在该键，那么该键的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮，你可以使用这些属性来帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来实现这一点。这是使用字典的键进行遍历的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是一个常量名称 fruit 表示字典的键，接着是关键字 in，字典名称，点符号，最后是 keys。

在 for-in 循环的花括号内，我们可以访问键，我们称之为 fruit ➋，以及该键对应的值，当我们强制解包其内容时，使用 fruitBasket[fruit]! ➌。那个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的 fruit 键一定在字典中。

我们在 for-in 循环中放入的任何代码都会在字典中的每个键上运行一次。因此，你应该看到打印语句执行三次。

我们也可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选项，因为它是作为 fruitBasket 字典中的值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按顺序排列！而且由于顺序并不被保证，如果你再次运行相同的代码，打印出的顺序可能会不同。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项。要将项存储在一个有序列表中，你应该使用数组，并通过索引查找每个项。如果你想通过键存储项，你应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建块。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。写完函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

字典与数组的不同之处在于它们是*无序的*。因此，你在结果面板中看到的州的顺序➋可能与你输入州的顺序➊不同。甚至可能与本书中打印出的顺序不同！

与数组一样，你可以使用 var 来创建一个可变字典，或使用 let 来创建一个不可变字典。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，你可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数，而所有的值必须是字符串。再次提醒，你会看到结果面板中的数字顺序与在字典中书写分数时的顺序可能完全不同。这是可以的，因为你不需要知道顺序就能访问任何内容。你可以通过键找到你需要的任何项。让我们来看一下！

#### 访问字典中的值

在字典中查找一个值类似于你在数组中访问一个值，不同之处在于你使用的是方括号中的键而不是索引，像这样：usStates["TX"]。

然而，在 Swift 中从字典中返回值时存在很大的区别。当你通过数组的索引访问一个值时，你只是简单地得到这个值。当你通过字典的键访问一个值时，你得到的是一个可选值。

在第五章中，你学到可选值可能包含一个值，也可能是 nil。Swift 在你查找字典中的项目时返回可选值，是因为你使用的键可能在字典中不存在，这种情况下就没有值可以访问。如果尝试访问一个不存在的值，会导致一个严重错误！为了避免这个问题，Swift 返回可选值。这意味着在你做任何操作之前，你需要解包从字典中获取的任何值。

要解包一个可选值，首先你需要检查它是否存在，方法是使用 if-let 语句，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if-let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出"I have Texas in my dictionary."。接下来，我们尝试使用键 usStates["FL"] ➋访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出"I don't have that state in my dictionary."。

#### 向字典中添加项目

向字典中添加项目，首先写出字典的名称，并将新项目分配给你想要它在字典中拥有的键。让我们将"Minnesota"添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项目可能会出现在字典中的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需将其值设置为 nil。因为字典中的值以可选值形式返回，你无需担心 nil 会导致字典中的任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。因此，你不会在字典中看到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为"red"设置了值"apple"，但后来我们决定用"raspberry"代替，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]的值设为新的值 ➊。

你可能还记得，这与我们将新值添加到字典中的方式相同。如果键已经存在于字典中，则该键的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少个条目。想象你有一个水果篮子在出售。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个条目都有一个键和值，因此你可以通过两种不同的方式来实现。以下是如何使用字典的键遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后跟常量名称 fruit 作为字典键，接着是关键字 in，字典名称，一个句点，和 keys。

在我们的 for-in 循环的花括号内部，我们可以访问键（我们称之为 fruit ➋）以及使用 fruitBasket[fruit]! ➌强制解包其内容时该键的值。该值将是水果的价格。

在这种情况下，可以放心地使用感叹号强制解包值，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们称其为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是作为 fruitBasket 字典中的值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按数字顺序排列！而且由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每一项。如果你想通过键来存储项目，则可以使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。在你编写了一个函数后，可以通过函数名从程序中的几乎任何地方调用它。

与数组一样，你可以使用`var`来创建一个可变的字典，或者使用`let`来创建一个不可变的字典。

在 Swift 中，字典的所有键必须是相同的类型，而字典的所有值也必须是相同的类型，但键类型不必与值类型相匹配。例如，如果你想存储一组分数，可以使用双精度数作为键，字符串作为值：

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度数（doubles），所有的值必须是字符串（strings）。再次提醒你，你会发现结果面板中数字的顺序可能与字典中分数的书写顺序完全不同。这是可以接受的，因为你无需知道顺序就能访问任何内容。你可以通过键来查找所需的任何项。我们来看看如何操作！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，不同之处在于你使用的是方括号内的键，而不是索引，例如：usStates["TX"]。

然而，Swift 从字典返回值的方式有一个很大的不同。当你在数组的索引处访问值时，你会直接得到那个值。而在字典中，通过键访问值时，你会得到一个可选值（optional）。

在第五章中，你学到了可选值可能包含一个值，也可能是`nil`。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下没有值可访问。如果尝试访问不存在的值，将会出现一个严重的错误！为避免这个问题，Swift 返回可选值。这意味着你需要解包从字典中获取的任何值，才能对其进行进一步操作。

要解包一个可选值，首先你需要使用`if-let`语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用`if let`语句将常量`loneStarState`设置为`usStates["TX"]` ➊。因为字典中有这个州，所以会打印出"I have Texas in my dictionary"。接下来，我们尝试使用`usStates["FL"]` ➋访问一个字典中没有的州。幸运的是，由于我们使用了`if-let`语句，当计算机找不到该州时，程序不会崩溃。相反，会打印出"I don't have that state in my dictionary"。

#### 向字典中添加项

要向字典中添加项，首先写下字典的名称，并将新项分配给你想要的键。让我们向`usStates`字典中添加"Minnesota"：

![](img/Image00144.jpg)

现在，当你查看`usStates`时，你会看到它被更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，你的新字典项可能会出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需要将值设置为`nil`。因为字典中的值是作为可选项返回的，所以你不必担心`nil`会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键"MA"对应的值后，`usStates`被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil`是特殊的，意味着根本没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他值。假设你创建了一个包含水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为"red"键设置了值"apple"，但后来我们决定"raspberry"更适合，因为有时候苹果是绿色或黄色的。为了用"raspberry"替换"apple"，我们将`colorFruits["red"]`设置为它的新值 ➊。

你可能还记得，这与我们将新值添加到字典中的方式相同。如果键已经存在于字典中，那么该键对应的值将被替换。如果键不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有`isEmpty`属性和`count`属性。例如，下面的代码展示了如何使用`isEmpty`属性检查字典是否为空，如果不为空，`count`属性可以检查字典中有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：`keys`，它包含字典的所有键；`values`，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种不同的方式来做。以下是使用键遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写关键词 for 开始，接着是字典键的常量名 fruit，关键词 in，字典名，句点，以及 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及该键对应的值，方法是通过 fruitBasket[fruit]! 强制解包其内容 ➌。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的果实键一定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以通过字典的 values 属性来遍历字典：

![图片](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用 values 属性中的每个值，我们将其命名为 price。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你仍然应该会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号排序！由于顺序不能保证，如果你重新运行相同的代码，你可能会看到不同的顺序。

### 你学到的知识

在本章中，你学习了如何将项目集合存储在数组和字典中。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你会使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，你可以通过它的名称在程序中的几乎任何地方调用它。

在 Swift 中，字典的所有键必须是相同类型，字典的所有值也必须是相同类型，但键的类型不必与值的类型匹配。例如，如果你想存储一组分数，可以将键设置为 double 类型，将值设置为字符串类型：

![](img/Image00142.jpg)

在这个字典中，所有键必须是 double 类型，所有值必须是字符串类型。再次提醒，你会看到结果面板中数字的顺序可能与在字典中编写分数的顺序大不相同。这是正常的，因为你不需要知道顺序就可以访问任何项。你可以通过键找到你需要的任何项。让我们看看如何做！

#### 在字典中访问值

在字典中查找值类似于你在数组中访问值的方式，唯一的区别是你在方括号内使用的是键而不是索引，就像这样：usStates["TX"]。

然而，Swift 返回字典中值的方式有很大不同。当你访问数组中某个索引的值时，你会直接获得该值。而当你使用字典中的键来访问值时，你会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。当你在字典中查找项时，Swift 返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下，没有值可供访问。尝试访问一个不存在的值会导致一个大错误！为了避免这个问题，Swift 返回可选值。这意味着在你可以对其进行任何操作之前，你需要解包从字典中获取的任何值。

要解包一个可选值，首先使用 if-let 语句检查它是否存在，就像我们在第五章 中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中检索"Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 I have Texas in my dictionary。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问字典中不存在的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出 I don't have that state in my dictionary。

#### 向字典添加项

要向字典添加项，首先写下字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中删除项非常简单；你只需要将值设置为 nil。由于字典中的值是作为可选类型返回的，你无需担心 nil 会导致字典中的任何问题。

![](img/Image00145.jpg)

你可以看到，当你删除 "MA" 键的值后，usStates 会更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示根本没有值。因此，你不会在字典中看到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为 "red" 键设置了值 "apple"，但是后来我们决定使用 "raspberry"（树莓）作为水果，因为有时候苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能记得，这和我们向字典中插入新值的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，count 属性则检查你有多少项内容。假设你有一个水果篮子在出售，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；以及 values，它包含字典的所有值。在我们遍历字典时，将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每一项都有一个键和值，你可以用两种不同的方式来进行。下面是如何使用字典的键来遍历它：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，接着是字典键的常量名 fruit，关键字 in，字典名，一个句点，最后是 keys。

在我们 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋）和该键的值，当我们强制解包它的内容时，可以通过 fruitBasket[fruit]! ➌ 获取。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在循环遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它直接作为果篮字典中的值进行访问。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项不像数组那样是有编号顺序的！由于顺序不可保证，如果你再次运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你应该使用数组，并通过索引查找每个项。如果你想通过键存储项，则应该使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

![](img/Image00142.jpg)

在这个字典中，所有的键必须是双精度浮点数，所有的值必须是字符串。同样，你会发现结果面板中的数字顺序可能与字典中分数的顺序大不相同。这是正常的，因为你不需要知道顺序就能访问任何项。你可以通过键找到你需要的任何项。让我们看看怎么做！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问值的方式，只是你在方括号内使用键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典中返回值的方式有很大不同。当你访问数组中索引位置的值时，你只会得到该值。当你通过字典中的键访问值时，你会得到一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致严重的错误！为了避免这个问题，Swift 返回可选值。这意味着，在你对从字典中获取的任何值进行操作之前，必须先解包该值。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 if let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出 "I don't have that state in my dictionary."。

#### 向字典中添加项

要向字典中添加一项，首先写下字典的名称，并将新项分配给你想要它在字典中对应的键。让我们向我们的 usStates 字典中添加“Minnesota”：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除一个项非常简单；你只需将该值设置为 nil。由于字典中的值是以可选值的形式返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”对应的值之后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示完全没有值。这就是为什么在我们的字典中没有看到“MA”: nil。

#### 替换字典中的项

在字典中替换一个项也很简单。它的工作方式与替换数组中的项相同。你只需将你想替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初，我们将“red”赋值为“apple”，但后来我们决定使用“raspberry”作为更合适的水果，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为其新值➊。

你可能记得这与我们将新值输入字典的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键还不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，count 属性则检查你有多少个项目。假设你有一个待售的水果篮。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；values，包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮并打印每个水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环来遍历字典。由于每个项目都有一个键和值，因此你可以用两种不同的方式来遍历字典。这是使用字典的键来循环的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，接着是字典键的常量名称 fruit，关键字 in，字典名称，句点，然后是 keys。

在 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）和该键对应的值，当我们使用 fruitBasket[fruit]!强制解包其内容时 ➌。该值将是水果的价格。

在这种情况下，强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会为字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来进行循环：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用每个值，这个常量我们称之为 price，存在 values 属性中。在循环遍历 values 时，我们无法从循环内部访问到键。

另一个需要注意的区别是价格不是一个可选项，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在一个有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，你会使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中一个强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完一个函数后，你可以通过它的名字在程序中的几乎任何地方调用它。

在这个字典中，所有的键必须是双引号的，所有的值必须是字符串。同样，你会发现结果面板中数字的顺序可能与写入字典中的分数顺序非常不同。这没关系，因为你不需要知道顺序就能访问任何内容。你可以通过键来查找你需要的任何项目。让我们看看如何操作！

#### 访问字典中的值

在字典中查找一个值类似于在数组中访问一个值，唯一不同的是，你在方括号中使用的是键，而不是索引，像这样：usStates["TX"]。

然而，Swift 从字典返回值的方式与访问数组索引的值有很大不同。当你访问数组中的一个值时，你会直接得到该值。而当你通过键访问字典中的一个值时，你会得到一个可选值。

在第五章中，你学到了可选项可能包含一个值，也可能是 nil。Swift 在查找字典中的项时返回可选项的原因是，你使用的键可能在字典中不存在，这种情况下就没有值可访问。尝试访问一个不存在的值会给你带来一个大错误！为避免这个问题，Swift 返回可选项。这意味着你需要解包从字典中获取的任何值，才能对其进行处理。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 `if let` 将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们的字典中有这个州，所以会打印出“我在字典里有 Texas。”接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印出“我在字典里没有那个州。”

#### 向字典添加项

要向字典中添加项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。我们来往 usStates 字典中添加“Minnesota”：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中移除项

从字典中移除项是相当简单的；你只需将该值设置为 nil。由于字典中的值是作为可选项返回的，因此你不必担心 nil 会导致字典出现问题。

![](img/Image00145.jpg)

你可以看到，在删除了键为“MA”的值之后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。这就是为什么你在字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项的方式相同。你只需将要替换的项设置为其他内容。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们将“红色”对应的值设置为“apple”，但后来我们决定“raspberry”是更好的水果选择，因为有时苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这与我们如何将新值添加到字典中的方式相同。如果该键已经存在于字典中，那么该键的值会被替换。如果该键不存在，新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

就像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则检查字典中有多少项。假设你有一个待售的水果篮子，你可以利用这些属性帮助你跟踪所有物品：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，和 values，包含字典的所有值。我们将在循环遍历字典时使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮子，并打印每种水果的价格。

#### 循环遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和一个值，所以你可以用两种不同的方式来做。这是如何使用其键循环遍历字典的方法：

![图像](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写下关键字 for ，随后是常量名称 fruit 用于字典键，关键字 in ，字典名称，句点以及 keys 。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋ ）以及当我们使用 fruitBasket[fruit]! ➌ 强制展开其内容时该键的值，即水果的价格。

在这种情况下，我们可以安全地使用感叹号强制展开值，因为我们知道我们使用的 fruit 键肯定存在于字典中。

我们将任何代码放入 for-in 循环中，将会为我们字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们还可以使用其值属性循环遍历字典：

![图像](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用每个值，我们称之为 price ，在 values 属性中。在循环遍历值时，我们无法从循环内部访问键。

另一个要注意的区别是，价格不是可选的，因为它直接作为 fruitBasket 字典中的值访问。这意味着我们不必展开它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出结果。

![图像](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目没有像数组中那样按编号顺序排列！由于顺序不保证，如果再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，你会使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言的强大基础。接下来，我们将学习另一个非常强大的工具——函数。函数是你创建并命名以执行特定任务的代码块。编写函数后，你可以使用其名称从程序的几乎任何位置调用它。

#### 访问字典中的值

在字典中查找值与访问数组中的值类似，不同之处在于你在方括号内使用键而不是索引，像这样：usStates["TX"] 。

然而，Swift 在从字典中返回值的方式上有很大不同。当你通过索引访问数组中的值时，你只是得到该值。而当你通过键访问字典中的值时，你得到的是一个可选值（optional）。

在第五章中，你已经学到过，可选值可能包含一个值，也可能是 nil。Swift 返回可选值的原因是，在你查找字典中的项时，所使用的键可能在字典中不存在，这种情况下没有值可以访问。尝试访问一个不存在的值会导致一个大错误！为了解决这个问题，Swift 返回可选值。这意味着，在你对从字典中获取的任何值进行操作之前，必须先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 来将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以打印出了 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印出了 "I don't have that state in my dictionary."。

#### 向字典添加项

向字典添加项时，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，新的字典项可能出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将值设置为 nil。因为字典中的值是以可选值的形式返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你删除键 "MA" 对应的值之后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。这就是为什么你在字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始，我们为 “red” 设置了值 "apple"，但是后来我们决定 "raspberry" 是更好的水果选择，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能还记得，这和我们将新值插入字典的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性检查字典是否为空，如果字典不为空，`count` 属性可以用来检查字典中有多少项。想象一下你有一个水果篮子要卖。你可以使用这些属性来帮助你跟踪所有的情况：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键；`values`，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个项目都有一个键和一个值，所以你可以用两种不同的方式来实现。以下是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写下关键字 `for`，然后是一个常量名 `fruit` 用来表示字典键，接着是关键字 `in`，字典名，接着一个句点和 `keys`。

在 `for-in` 循环的大括号内，我们可以访问键（我们称之为 `fruit` ➋）以及该键对应的值，通过强制解包其内容 `fruitBasket[fruit]!` ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 `for-in` 循环内编写的任何代码都会针对字典中的每个键运行一次。因此，你应该看到 `print` 语句打印三次。

我们也可以使用字典的 `values` 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 `for-in` 循环，但现在我们使用一个常量来表示 `values` 属性中的每个值，我们称之为 `price`。在遍历 `values` 时，我们无法在循环内访问键。

另一个需要注意的区别是，`price` 不是一个可选值，因为它是直接作为 `fruitBasket` 字典中的值来访问的。这意味着我们不需要解包它。你应该还是能看到 `print` 语句被打印了三次。图 6-6 展示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项目不像数组中的项目那样是按编号排序的！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你将使用数组，并通过索引查找每个项目。如果你想按键存储项目，则需要使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的一个强大基础。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写函数后，你可以通过函数名从程序中的几乎任何地方调用它。

在字典中查找值类似于你如何访问数组中的值，只是你使用的是键而不是索引，如：usStates["TX"]。

然而，Swift 从字典中返回值的方式与数组有所不同。当你访问数组中的某个索引值时，你只会得到该值。当你使用键访问字典中的值时，你得到的是一个可选值。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil。当你在字典中查找项目时，Swift 返回可选值的原因是，你使用的键可能不存在于字典中，在这种情况下就没有值可访问。试图访问一个不存在的值会给你一个严重的错误！为了避免这个问题，Swift 返回可选值。这意味着你需要在对字典中的任何值进行操作之前，先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取“Texas”，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们的字典中包含这个州，所以打印了“我在字典中有 Texas。”接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印了“我在字典中没有那个州。”

#### 向字典中添加项目

要向字典中添加一个项目，首先写下字典的名称，并将新项目分配给你希望它在字典中具有的键。让我们将“Minnesota”添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以你的新字典项可能出现在字典的任何位置。

#### 从字典中移除项目

从字典中移除一个项目非常简单；你只需要将其值设置为 nil。因为字典中的值是以可选类型返回的，所以你无需担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"的值之后，usStates 已更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着没有值。因此，你不会在我们的字典中看到"MA": nil。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需要将你想要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"键设置了值"apple"，但后来我们决定用"raspberry"替换它，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这是我们将新值添加到字典中的相同方式。如果该键已经存在于字典中，那么该键的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则 count 属性可以检查你有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有内容：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，以及 values，包含所有值。当我们遍历字典时，我们将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以用两种不同的方式来遍历字典。这是使用键遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写出关键字 for 开始，后跟字典键的常量名称 fruit，再写 in，字典名称，句点，最后是 keys。

在 for-in 循环的大括号内部，我们可以访问键，我们称之为 fruit ➋，以及通过 fruitBasket[fruit]! ➌ 强制解包其内容后得到的键对应的值。这个值就是水果的价格。

在这种情况下，由于我们知道正在使用的 fruit 键一定在字典中，因此可以安全地使用感叹号强制解包值。

我们放在 for-in 循环中的任何代码都会对字典中的每一个键执行一次。因此，你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来循环遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选值，因为它直接作为值从 fruitBasket 字典中访问。这意味着我们不需要对它进行解包。你应该仍然会看到打印语句显示三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组中的项那样按编号顺序排列！而且由于顺序不保证，如果你重新运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项。要将项存储在有序列表中，你应该使用数组并通过索引查找每个项。如果你想根据键存储项，则应该使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的强大构建块。接下来，我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，你可以使用它的名称在程序的几乎任何地方调用它。

然而，Swift 从字典中返回值的方式与数组有所不同。当你访问数组中的某个索引的值时，你直接得到该值。而当你通过键访问字典中的某个值时，你会得到一个可选值。

在第五章中，你学习了可选值可能包含一个值，也可能是 nil。当你查找字典中的项时，Swift 返回可选值的原因是你使用的键可能在字典中不存在，这种情况下没有值可访问。尝试访问一个不存在的值会导致一个大的错误！为避免这个问题，Swift 返回可选值。这意味着你需要在使用字典中取出的任何值之前进行解包。

要解包一个可选项，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中做的那样。以下代码展示了如何从字典中获取值：

![Image](img/Image00143.jpg)

要从字典中获取"德克萨斯州"，我们使用 if-let 语句将常量 loneStarState 设置为 usStates["TX"] ➊。因为我们在字典中有这个州，所以会打印出“我在字典中有德克萨斯州。”接下来，我们尝试访问一个不在字典中的州，通过使用键 usStates["FL"] ➋。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，会打印出“我在字典中没有这个州。”

#### 向字典中添加项

要向字典中添加一项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们向 usStates 字典中添加"明尼苏达"：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为["MN": "明尼苏达", "WA": "华盛顿", "MA": "马萨诸塞", "TX": "德克萨斯州"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中删除项

从字典中删除一项非常简单；你只需将值设置为 nil。因为字典中的值是以可选项的形式返回的，所以你不必担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，当你删除键"MA"处的值后，usStates 更新为["MN": "明尼苏达", "WA": "华盛顿", "TX": "德克萨斯州"]。记住，nil 是特别的，表示根本没有值。这就是为什么你在字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作原理和替换数组中的项一样。你只需要将你想替换的项设置为其他值。比如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为"红色"设置了"苹果"的值，但后来我们决定"树莓"是更好的水果，因为有时候苹果是绿色或黄色的。为了将"苹果"替换为"树莓"，我们将 colorFruits["红色"] 设置为它的新值 ➊。

你可能记得，这是我们向字典中添加新值的方式。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中的项数。假设你有一个待售的水果篮子。你可以使用这些属性帮助你跟踪所有的水果：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys ，包含字典中的所有键，以及 values ，包含字典中的所有值。当我们遍历字典时，将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以通过 `for-in` 循环遍历字典。由于每个项目都有一个键和一个值，你可以用两种不同的方式来实现。以下是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们从写关键字 `for` 开始，接着是字典键的常量名 `fruit`，然后是关键字 `in`，字典名，句点，最后是 `keys`。

在 `for-in` 循环的花括号内部，我们可以访问到键（我们称之为 fruit ➋ ）以及该键对应的值，当我们强制展开其内容时，使用 `fruitBasket[fruit]!` ➌ 。这个值就是水果的价格。

在这种情况下，使用感叹号强制展开值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放在 `for-in` 循环内部的任何代码都会针对字典中的每个键执行一次。所以你应该能看到打印语句显示三次。

我们也可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但这次我们使用常量来引用值，这个值我们称之为 price ，它在 values 属性中。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 `fruitBasket` 字典中的值访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句被打印三次。图 6-6 展示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。这是因为字典中的项目不像数组那样是按顺序排列的！由于顺序没有保证，因此如果你再次运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学会了如何将项目集合存储在数组和字典中。为了将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，你会使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的强大构建块。接下来我们将学习函数，这是另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。写完一个函数后，你可以在程序的几乎任何地方通过调用其名称来使用它。

在第五章中，你学到了可选值可能包含一个值，也可能是 nil 。Swift 在查找字典中的项时返回可选值的原因是，你使用的键可能在字典中不存在，在这种情况下就没有值可以访问。尝试访问一个不存在的值会导致一个严重错误！为了避免这个问题，Swift 返回可选值。这意味着你在对字典中的任何值进行操作之前，必须先解包它。

要解包一个可选值，首先你需要使用 if-let 语句检查它是否存在，就像我们在第五章中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中获取 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们在字典中有这个州，所以下面的 "I have Texas in my dictionary." 会被打印出来。接下来，我们尝试通过使用键 usStates["FL"] ➋ 来访问字典中不存在的一个州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，"I don't have that state in my dictionary." 会被打印出来。

#### 向字典中添加项目

要向字典中添加项目，首先写出字典的名称，并将新项目分配给你希望它拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"] 。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中删除项目

从字典中删除一个项目非常简单；你只需要将该值设置为 nil 。因为字典中的值是以可选值的形式返回的，所以你不必担心 nil 会导致字典出现任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，nil 是特殊的，表示没有任何值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将你想要替换的项目设置为其他值。假设你创建了一个关于水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为“red”设定的值是“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换成“raspberry”，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能记得这与我们将新值插入字典的方式相同。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，新的键值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果字典不为空，则 count 属性会检查字典中有多少项。假设你有一个水果篮子在出售，你可以使用这些属性来帮助你跟踪所有的内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，因此你可以用两种不同的方式来实现。下面是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，接着是常量名 fruit 代表字典的键，然后是关键字 in，字典名，一个点，最后是 keys。

在我们的 for-in 循环的花括号内部，我们可以访问到键，我们称其为 fruit ➋，以及通过强制解包其内容（使用 fruitBasket[fruit]! ➌）时该键的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环中放置的任何代码都会为字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们也可以通过字典的值属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但这次我们使用常量来引用每个值，我们将其称为 price，来自 values 属性。在遍历 values 时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为值从 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！并且由于顺序并不保证，所以如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目。要存储按顺序排列的项目，你会使用数组，并通过索引查找每个项。如果你想按键存储项目，你将使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中一个强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

要解包一个可选类型，首先通过 if-let 语句检查它是否存在，就像我们在 第五章 中所做的那样。以下代码展示了如何从字典中获取一个值：

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊。因为字典中有这个州，所以打印了 "I have Texas in my dictionary." 接下来，我们尝试使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到该州时，程序不会崩溃。相反，打印了 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加一项，首先写出字典的名称，并将新项分配给你希望它在字典中具有的键。让我们把 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，你的新字典项可能会出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将值设置为 nil。由于字典中的值作为可选类型返回，因此你不必担心 nil 会在字典中引发问题。

![](img/Image00145.jpg)

你可以看到，在你删除了键 "MA" 对应的值后，usStates 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在我们的字典中看不到 "MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项的方式相同。你只需将想要替换的项设置为其他值。例如，你创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

起初，我们为“红色”赋值为“苹果”，但后来我们决定“树莓”是更好的选择，因为有时苹果是绿色或黄色的。为了将“苹果”替换为“树莓”，我们将 colorFruits["red"] 设置为其新值 ➊。

你可能记得，这与我们向字典中输入新值的方式相同。如果字典中已经存在该键，则该键的值将被替换。如果该键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则用于检查字典中有多少项。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，以及 values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有键和值，你可以用两种不同的方式来遍历字典。以下是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是常量名称 fruit 作为字典键，接着是 in 关键字，字典名称，句点，以及 keys。

在 for-in 循环的大括号内，我们可以访问到键，我们称之为 fruit ➋，以及通过强制解包 fruitBasket[fruit]! ➌ 获取的该键对应的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环内部放置的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但这次我们用常量来引用每个值，这个常量我们叫做 price，在 values 属性中。当遍历 values 时，我们无法在循环内部访问到键。

另一个需要注意的区别是，`price` 不是可选项，因为它是直接作为值访问的，存储在 `fruitBasket` 字典中。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样是按数字顺序排列的！并且因为顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何在数组和字典中存储项。要将项存储在有序列表中，你将使用数组，并通过其索引查找每一项。如果你想根据键存储项，则应使用字典。

了解数组和字典及其使用方法，是几乎所有编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在编写了函数后，你可以几乎在程序的任何地方使用它的名称来调用它。

![Image](img/Image00143.jpg)

要从字典中检索 "Texas"，我们使用 if let 将常量 `loneStarState` 设置为 `usStates["TX"]` ➊。因为我们在字典中有这个州，"I have Texas in my dictionary." 这行会被打印出来。接下来，我们尝试通过使用键 `usStates["FL"]` ➋ 来访问一个不在字典中的州。幸运的是，由于我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。而是打印出 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典中添加一项，首先写下字典的名称，并将新项分配给你希望它在字典中具有的键。让我们将 "Minnesota" 添加到我们的 `usStates` 字典中：

![](img/Image00144.jpg)

现在，当你查看 `usStates` 时，你会看到它已经更新为["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一项非常简单；你只需要将值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 的值后，`usStates` 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特别的，表示根本没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项目也很简单。它与替换数组中的项目工作方式相同。你只需将你想替换的项目设置为其他值。例如，你可以创建一个包含水果颜色的字典：

![](img/Image00146.jpg)

起初我们为"red"设定了值"apple"，但是后来我们决定"raspberry"是更好的水果，因为有时候苹果是绿色或黄色的。为了将"apple"替换成"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这与我们将新值添加到字典中的方式是一样的。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，那么新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

就像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查你有多少项。假设你有一个出售的水果篮。你可以使用这些属性来帮助你跟踪所有的东西：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；以及 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种方式来进行遍历。这是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出 for 关键字，接着是字典键的常量名称 fruit，接着是 in 关键字，字典名称，句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）以及通过强制解包其内容获取到的值：fruitBasket[fruit]! ➌。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定存在于字典中。

我们放在 for-in 循环中的任何代码都会为字典中的每个键运行一次。因此，你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来表示 values 属性中的每个值，我们称之为 price。当遍历 values 时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6: 使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号排序！由于顺序没有保证，如果你重新运行相同的代码，可能会看到不同的输出顺序。

### 你学到的内容

在本章中，你学习了如何在数组和字典中存储集合项。为了将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，你会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中强大构建块的一部分。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的工作。编写完函数后，你可以使用其名称从程序中的几乎任何地方调用它。

要从字典中获取 "Texas"，我们使用 if let 将常量 loneStarState 设置为 usStates["TX"] ➊ 。因为我们的字典中有这个州，所以打印了 "I have Texas in my dictionary."。接下来，我们尝试通过使用键 usStates["FL"] ➋ 访问一个不在字典中的州。幸运的是，因为我们使用了 if-let 语句，当计算机找不到这个州时，程序不会崩溃。相反，打印了 "I don't have that state in my dictionary."。

#### 向字典添加项

要向字典添加项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"] 。记住，因为你不需要依赖索引，所以你的新字典项可能会出现在字典的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需要将其值设置为 nil 。因为字典中的值是可选的，你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在删除键 "MA" 的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"] 。记住，nil 是特殊的，它意味着完全没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项目也很简单。它的操作与替换数组中的项目一样。你只需将要替换的项目设置为其他内容。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“red”设置了值“apple”，但后来我们认为“raspberry”是更好的水果，因为有时苹果是绿色或黄色的。要将“apple”替换为“raspberry”，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能还记得，我们用相同的方法将一个新值插入字典。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码演示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性则用来检查字典中的项数。假设你有一个销售水果的篮子。你可以使用这些属性帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典所有键；values，包含字典所有值。在遍历字典时，我们会使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式进行操作。下面是如何使用键遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是一个常量名称 fruit 作为字典键，接着是关键字 in，字典名称，一个句点，然后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及通过强制展开其内容获取的该键的值，使用 fruitBasket[fruit]! ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制展开值是安全的，因为我们知道我们使用的果实键肯定在字典中。

我们在 for-in 循环中写的任何代码会在字典中的每个键上执行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，价格不是一个可选项，因为它直接作为 `fruitBasket` 字典中的一个值进行访问。这意味着我们不需要解包它。你仍然会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与你看到的有所不同。这是因为字典中的项不像数组那样有编号顺序！由于顺序不可保证，如果你再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到了什么

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想根据键来存储项，你将使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中非常强大的构建模块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以通过其名称从程序的几乎任何地方调用它。

#### 向字典添加项

要向字典中添加一个项，首先写出字典的名称，并将新项分配给字典中你希望它拥有的键。让我们向我们的 `usStates` 字典添加“明尼苏达”：

![](img/Image00144.jpg)

现在当你查看 `usStates` 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一个项非常简单；你通过将值设置为 `nil` 来实现。因为字典中的值是作为可选项返回的，所以你不需要担心 `nil` 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键“MA”对应的值后，`usStates` 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，表示没有值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将你想要替换的项设为其他值。例如，你可以创建一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为“红色”设置了“苹果”作为值，但后来我们决定“覆盆子”是一个更好的选择，因为有时候苹果是绿色或黄色的。为了用“覆盆子”替换“苹果”，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能记得，这和我们向字典中插入新值的方式相同。如果键已经存在于字典中，则该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果不为空，`count` 属性则检查你有多少个项。假设你有一个待售的水果篮，你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键，以及 `values`，它包含字典的所有值。在我们遍历字典时将使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮，并打印每种水果的价格。

#### 循环遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式来做。以下是使用键来循环遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来循环遍历 `fruitBasket` 并打印其内容。我们从编写关键字 `for` 开始，后跟字典键的常量名 `fruit`，关键字 `in`，字典名称，句点和 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键（我们称之为 `fruit` ➋）以及通过 `fruitBasket[fruit]!` 强制解包其内容时的值 ➌。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放在 `for-in` 循环中的任何代码都会对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 `values` 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 `for-in` 循环方式，但现在我们使用一个常量来引用 `values` 属性中的每个值，我们称之为 `price`。当遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它是直接作为 `fruitBasket` 字典中的值进行访问的。这意味着我们不需要解包它。你应该仍然会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能会与你的不同。这是因为字典中的项不像数组那样有编号顺序！而且，由于顺序没有保证，如果你重新运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何在数组和字典中存储项。要在有序列表中存储项，你将使用数组，并通过索引查找每个项。如果你想按键来存储项，你应该使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的强大基础。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

要向字典中添加一个项，首先写出字典的名称，并将新项分配给你希望它在字典中拥有的键。让我们将 "Minnesota" 添加到我们的 usStates 字典中：

![](img/Image00144.jpg)

现在，当你查看 usStates 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，因为你不需要依赖索引，所以新的字典项可能出现在字典中的任何位置。

#### 从字典中删除项

从字典中删除项非常简单；你只需将该值设置为 nil。因为字典中的值是作为可选项返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除 "MA" 键对应的值后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。因此你不会在字典中看到 "MA": nil。

#### 在字典中替换项

替换字典中的项也很简单。它的操作方式与替换数组中的项相同。你只需将你想要替换的项设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

起初我们为 "red" 设置了值 "apple"，但是后来我们决定 "raspberry" 是一个更好的水果，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这和我们向字典中输入新值的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查有多少项。假设您有一个待售的水果篮，您可以使用这些属性来帮助您跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键，和 values，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

您可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，您可以通过两种不同的方式来实现这一点。这是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in、字典名称、一个句点和 keys。

在我们 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋），以及当我们强制解包其内容（通过 fruitBasket[fruit]! ➌）时该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的 fruit 键肯定在字典中。

我们放在 for-in 循环中的任何代码都会针对字典中的每个键执行一次。因此，您应该看到 print 语句显示三次。

我们还可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但这次我们使用一个常量来引用 values 属性中的每个值，我们称其为 price。在遍历值时，我们无法从循环内部访问到键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为值访问字典中的元素。这意味着我们不需要解包它。您仍然应该看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

结果的顺序可能与我们的稍有不同。那是因为字典中的项目不像数组那样按编号顺序排列！由于顺序不保证，如果再次运行相同的代码，您可能会看到不同的顺序。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项目。为了将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你希望根据键存储项目，那么你会使用字典。

了解数组和字典，以及如何使用它们，是几乎所有编程语言的强大基础。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

![](img/Image00144.jpg)

现在当你查看 usStates 时，你会看到它已更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不必依赖索引，你的新字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除一项也相当简单；你只需要将其值设置为 nil。因为字典中的值是以可选类型返回的，所以你不必担心 nil 会在字典中引起任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键为 "MA" 的值后，usStates 更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示完全没有值。因此你不会在我们的字典中看到 "MA": nil。

#### 在字典中替换项

在字典中替换项也很简单。它的工作方式与替换数组中的项一样。你只需将要替换的项设置为其他值。比如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 配置了值 "apple"，但后来我们决定使用 "raspberry" 作为更合适的水果，因为有时苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为新的值 ➊。

你可能记得，这与我们在字典中输入新值的方式是一样的。如果键已经存在于字典中，则该键的值会被替换。如果该键尚不存在，则新的键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也具有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性则检查你有多少个项目。假设你有一个出售水果的篮子，你可以使用这些属性来帮助你跟踪所有的东西：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式来遍历。这是通过键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，后跟字典键的常量名称 fruit，再加上关键字 in，字典名称，一个句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及通过 fruitBasket[fruit]! ➌ 强制解包其内容时该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的水果键一定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键运行一次。因此，你应该看到打印语句会显示三次。

我们还可以通过字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用常量来引用每个值，我们称之为 price，来自 values 属性。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为 fruitBasket 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组中的项那样是按编号排序的！由于顺序无法保证，如果你重新运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项的集合。为了将项存储在有序列表中，你会使用数组并通过索引查找每个项。如果你想按键存储项，你则会使用字典。

了解数组和字典及其使用方法，是几乎所有编程语言中的一个强大基础。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在编写完函数后，你可以使用其名称从程序的几乎任何地方调用它。

现在，当你查看 `usStates` 时，你会看到它已经更新为 ["MN": "Minnesota", "WA": "Washington", "MA": "Massachusetts", "TX": "Texas"]。记住，由于你不需要依赖索引，所以新的字典项可能出现在字典的任何位置。

#### 从字典中移除项

从字典中移除项非常简单；你只需将其值设置为 `nil`。因为字典中的值是以可选项返回的，所以你不必担心 `nil` 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键为 "MA" 的值之后，`usStates` 已更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，`nil` 是特殊的，意味着没有任何值。这就是为什么你在字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需将你想要替换的项设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为 "red" 设置了值 "apple"，但后来我们决定 "raspberry" 是一个更合适的水果，因为有时苹果是绿色或黄色的。为了将 "apple" 替换为 "raspberry"，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能记得，这与我们将新值输入字典的方式相同。如果字典中已存在该键，则会替换该键的值。如果该键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有一个 `isEmpty` 属性和一个 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性检查字典是否为空，如果字典不为空，`count` 属性则用来检查你有多少项。假设你有一个水果篮子在售卖。你可以使用这些属性来帮助你追踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含所有字典的键，以及 `values`，它包含所有的值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每一项都有一个键和值，你可以用两种不同的方式来做。以下是通过字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写出关键字 `for`，然后是字典键的常量名 `fruit`，接着是关键字 `in`，字典名，句点，以及 `keys`。

在我们 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）和该键对应的值，当我们使用 fruitBasket[fruit]! ➌ 强制解包其内容时。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们在 for-in 循环中放置的任何代码都会针对字典中的每个键运行一次。所以你应该看到 print 语句显示三次。

我们还可以通过字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但这次我们使用一个常量来引用每个值，我们称之为 price，位于 values 属性中。在循环遍历值时，我们无法从循环内访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是通过直接访问 fruitBasket 字典中的值来获取的。这意味着我们不需要解包它。你仍然应该看到 print 语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号排序！由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学会了如何将项目存储在数组和字典中。为了在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中强大构建模块的基础。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写了一个函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

#### 从字典中移除项

从字典中移除项非常简单；你只需将该值设置为 nil。由于字典中的值是作为可选项返回的，因此你不必担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在你移除键"MA"对应的值后，usStates 更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有任何值。这就是为什么你在我们的字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它与替换数组中的项的方式相同。你只需要将想要替换的项设置为其他值。例如，你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为“red”设置了值“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 `colorFruits["red"]` 设置为它的新值 ➊。

你可能记得，这是我们向字典中添加新值的相同方式。如果键已经存在于字典中，那么该键的值将被替换。如果键不存在，则新键/值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也具有 `isEmpty` 属性和 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性检查字典是否为空，如果不为空，则 `count` 属性检查你有多少项。假设你有一个水果篮在出售，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键，以及 `values`，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮，并打印每种水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。由于每个项都有一个键和值，因此你可以通过两种不同的方式来做到这一点。这是使用字典的键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们从编写关键字 `for` 开始，后跟字典键的常量名称 `fruit`，关键字 `in`，字典名称，句点以及 `keys`。

在 `for-in` 循环的花括号内，我们可以访问键（我们称之为 `fruit` ➋）以及通过强制解包其内容 `fruitBasket[fruit]!` ➌ 来访问该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 `for-in` 循环中放置的任何代码都会对字典中的每个键运行一次。因此，你应该看到打印语句显示三次。

我们也可以通过字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 `for-in` 循环样式，但现在我们使用一个常量来引用 `values` 属性中的每个值，我们称之为 `price`。当遍历 `values` 时，我们无法从循环内访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它是直接作为 `fruitBasket` 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！由于顺序并不保证，你可能会看到不同的顺序，如果你再次运行相同的代码。

### 你学到的内容

在本章中，你学会了如何在数组和字典中存储项目。为了存储有序列表中的项目，你将使用数组，并通过索引查找每个项。如果你想按键存储项目，你将使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。在你编写完一个函数后，可以使用它的名称从程序中的几乎任何地方调用它。

从字典中移除一项非常简单；你只需将该项的值设置为 nil。由于字典中的值是作为可选项返回的，因此你无需担心 nil 会在字典中引发任何问题。

![](img/Image00145.jpg)

你可以看到，在移除键 "MA" 对应的值之后，usStates 被更新为 ["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，它表示没有任何值。这就是为什么在我们的字典中看不到 "MA": nil 的原因。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想替换的项设置为其他内容。比如你创建一个水果颜色的字典：

![](img/Image00146.jpg)

最开始我们将 "apple" 作为 "red" 的值，但后来我们决定 "raspberry" 是一个更好的水果选择，因为有时候苹果是绿色或黄色的。为了用 "raspberry" 替换 "apple"，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能记得，这是我们将新值插入字典的方式。如果字典中已经存在该键，那么该键对应的值将被替换。如果该键不存在，那么新的键/值对将被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性则检查你有多少项。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪一切：

![图片](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典中的所有键，以及 values，包含所有的值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，循环遍历我们的水果篮子，并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，你可以通过两种不同的方式来完成这项工作。这是通过键来遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来循环遍历 fruitBasket，并打印其内容。我们从写关键字 for 开始，接着是常量名 fruit 来表示字典的键，再是关键字 in，字典名，点号，最后是 keys。

在我们 for-in 循环的大括号内，我们可以访问到键，即我们称之为 fruit ➋ 的键，以及当我们通过 fruitBasket[fruit]! ➌ 强制解包其内容时得到的值。这个值将是水果的价格。

在这种情况下，强制解包这个值是安全的，因为我们知道正在使用的 fruit 键肯定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键运行一次。所以你应该会看到打印语句显示三次。

我们也可以通过字典的 values 属性来循环遍历：

![图片](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们用一个常量来引用每个值，我们称之为 price，存在 values 属性中。在循环遍历 values 时，我们无法在循环内访问到键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为水果篮字典中的一个值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且因为顺序不保证，如果你重新运行相同的代码，你可能会看到不同的输出顺序。

### 你学到的内容

在这一章中，你学会了如何将项目集合存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中非常强大的构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。编写完函数后，你可以通过其名称从程序的几乎任何地方调用它。

![](img/Image00145.jpg)

你可以看到，在移除键"MA"对应的值后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，表示没有值。这就是为什么在我们的字典中看不到"MA": nil。

#### 替换字典中的项

替换字典中的项也很简单。它的工作方式和替换数组中的项一样。你只需要将你想替换的项设置为其他值。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初，我们为"red"设置了值"apple"，但后来我们决定"raspberry"是一个更好的水果，因为有时苹果是绿色或黄色的。为了将"apple"替换为"raspberry"，我们将 colorFruits["red"]设置为它的新值 ➊。

你可能还记得，这和我们向字典中添加新值的方式相同。如果键已存在于字典中，那么该键的值将被替换。如果该键不存在，则新的键值对将被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性会检查你有多少个项目。假设你有一个待售的水果篮子。你可以利用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含所有字典的键，以及 values，它包含所有字典的值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮子并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以用两种不同的方式进行遍历。这是使用键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写关键字 for 开始，后面跟着常量名 fruit 作为字典的键，接着是关键字 in，字典的名字，一个句点，再加上 keys。

在我们 for-in 循环的大括号内，我们可以访问到键值（我们称之为 fruit ➋）和通过强制解包其内容（fruitBasket[fruit]! ➌）获得的该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该能看到打印语句显示三次。

我们还可以使用字典的 values 属性进行循环遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用每个值，称之为 price，存在 values 属性中。在循环遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为 fruitBasket 字典中的值进行访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组中的项目那样按编号顺序排列！由于顺序不可保证，所以如果你再次运行相同的代码，可能会看到不同的顺序输出。

### 你学到了什么

在本章中，你学会了如何将一组项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，而不是索引，你会使用字典。

了解数组和字典及其用法是几乎任何编程语言的强大构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的工作。在编写函数之后，你可以通过它的名称在程序中的几乎任何地方调用它。

你可以看到，在删除键“MA”的值之后，usStates 被更新为["MN": "Minnesota", "WA": "Washington", "TX": "Texas"]。记住，nil 是特殊的，意味着根本没有值。因此，你不会在我们的字典中看到"MA": nil。

#### 替换字典中的项目

在字典中替换项目也很简单。它的工作方式与替换数组中的项目相同。你只需将你想替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最开始我们为“red”赋值为“apple”，但是后来我们决定“raspberry”是一个更好的水果选择，因为有时候苹果是绿色或黄色的。为了用“raspberry”替换“apple”，我们将 colorFruits["red"]设置为它的新值➊。

你可能记得，这与我们将新值插入字典的方式相同。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组一样，字典也有一个 `isEmpty` 属性和一个 `count` 属性。例如，以下代码展示了如何使用 `isEmpty` 属性来检查字典是否为空，如果不为空，则使用 `count` 属性检查你有多少项。假设你有一个待售的水果篮子。你可以使用这些属性来帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：`keys`，它包含字典的所有键；`values`，它包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 `for-in` 循环遍历字典。因为每个条目都有一个键和值，所以你可以通过两种不同的方式来实现这一点。这是通过键来遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 `keys` 属性 ➊ 来遍历 `fruitBasket` 并打印其内容。我们首先写关键词 `for`，然后是字典键的常量名称 `fruit`，关键词 `in`，字典名称，句点和 `keys`。

在 `for-in` 循环的大括号内，我们可以访问键（我们称之为 `fruit` ➋）以及通过 `fruitBasket[fruit]!` 强制解包其内容后的该键的值 ➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们在 `for-in` 循环中放入的任何代码都会针对字典中的每个键执行一次。所以你应该会看到打印语句显示三次。

我们还可以通过字典的 `values` 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同样式的 `for-in` 循环，但现在我们用一个常量来引用每个值，我们称其为 `price`，该常量来自 `values` 属性。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是可选的，因为它是直接作为 `fruitBasket` 字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组中的项那样按编号排序！由于顺序不保证，如果你重新运行相同的代码，你可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。如果你希望按顺序存储项目，可以使用数组，并通过索引查找每个项目。如果你希望按键存储项目，则应使用字典。

了解数组和字典及其使用方式是几乎所有编程语言的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。编写函数后，你可以通过其名称在程序的几乎任何地方调用它。

#### 替换字典中的项目

替换字典中的项目也很简单。它的工作方式与替换数组中的项目相同。你只需将要替换的项目设置为其他值。假设你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

一开始我们为“red”设置了值“apple”，但是后来我们决定使用“raspberry”作为更好的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为它的新值➊。

你可能还记得，这与我们向字典中输入新值的方法相同。如果字典中已经存在该键，则会替换该键的值。如果该键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

类似于数组，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查字典中有多少项。假设你有一个水果篮出售。你可以使用这些属性帮助你跟踪所有物品：

![Image](img/Image00148.jpg)

字典还具有两个特殊属性：keys，包含字典的所有键，以及 values，包含所有的值。在我们遍历字典时，将使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，所以你可以用两种不同的方式来实现。以下是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性➊来遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in，字典的名称，再加上一个点和 keys。

在我们的 for-in 循环的花括号内，我们可以访问键，也就是我们称之为 fruit➋的部分，以及通过强制解包其内容 fruitBasket[fruit]!➌时该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的水果键一定存在于字典中。

我们放入`for-in`循环中的任何代码都会针对字典中的每个键执行一次。所以你应该能看到打印语句会显示三次。

我们还可以通过字典的`values`属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的`for-in`循环方式，但现在我们使用常量来引用每个值，我们称之为`price`，它位于`values`属性中。在遍历`values`时，我们无法从循环内部访问到键。

另一个需要注意的区别是，`price`不是一个可选项，因为它是直接作为`fruitBasket`字典中的值访问的。这意味着我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。那是因为字典中的项不像数组中的项那样按编号顺序排列！由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到的内容

在这一章中，你学会了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想根据键存储项，则会使用字典。

了解数组和字典及其使用方法，是几乎所有编程语言中一个强大的构建模块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在你编写了一个函数之后，你可以通过它的名字在程序中的几乎任何地方调用它。

替换字典中的项也很简单。它的工作方式与替换数组中的项相同。你只需要将你想要替换的项设置为其他值。比如你创建了一个水果颜色的字典：

![](img/Image00146.jpg)

最初我们为“红色”设置了“苹果”作为值，但后来我们决定“覆盆子”是一个更好的水果，因为有时苹果是绿色或黄色的。为了将“苹果”替换为“覆盆子”，我们将`colorFruits["red"]`设置为它的新值 ➊ 。

你可能还记得，我们以相同的方式将新值添加到字典中。如果键已经存在于字典中，那么该键对应的值将被替换。如果该键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性会检查字典中的项数。假设你有一个水果篮子在出售。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典中的所有键；以及 values，包含字典中的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以有两种不同的方式来进行循环。下面是如何使用键遍历字典：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写下关键词 for 开始，接着是字典键的常量名 fruit，关键词 in，字典名，句点，然后是 keys。

在我们 for-in 循环的大括号内部，我们可以访问到键（我们称之为 fruit ➋）以及当我们通过 fruitBasket[fruit]! ➌ 强制解包时该键对应的值。该值将是水果的价格。

在这种情况下，强制解包值时使用感叹号是安全的，因为我们知道我们使用的 fruit 键一定在字典中。

我们放入 for-in 循环中的任何代码都会针对字典中的每个键执行一次。所以你应该能看到打印语句执行三次。

我们也可以使用字典的 values 属性来进行循环：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是一个可选值，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你应该仍然能看到打印语句执行三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

结果的顺序可能与你的有所不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学习了如何将项目集合存储在数组和字典中。为了将项目存储在一个有序的列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，则可以使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。写完一个函数后，你可以通过它的名称从程序中的几乎任何地方调用它。

![](img/Image00146.jpg)

一开始我们为“red”设置了值“apple”，但后来我们决定使用“raspberry”作为更好的水果，因为有时候苹果是绿色或黄色的。为了将“apple”替换成“raspberry”，我们将 colorFruits["red"] 设置为它的新值 ➊。

你可能还记得，这和我们将新值输入字典的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，则新的键/值对会被添加到字典中。

![图片](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则 count 属性会检查你有多少个项目。假设你有一个待售的水果篮。你可以使用这些属性来帮助你跟踪所有物品：

![图片](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键，以及 values，包含所有值。在遍历字典时，我们将使用这两个属性。

让我们写些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项目都有一个键和值，因此你可以通过两种不同的方式来进行遍历。这是使用字典的键来遍历字典的方式：

![图片](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写关键字 for，然后是常量名称 fruit（表示字典的键），接着是关键字 in，字典的名称，再加一个点，最后是 keys。

在我们 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋）和该键对应的值，通过强制解包它的内容 fruitBasket[fruit]! ➌。那个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们在 for-in 循环中写的任何代码都会针对字典中的每个键执行一次。因此，你应该能看到打印语句显示三次。

我们还可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在循环中遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为 fruitBasket 字典中的值来访问的。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与你的不同。那是因为字典中的项目不像数组那样按数字顺序排列！由于顺序没有保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你应该使用数组，并通过索引查找每个项目。如果你想按键存储项目，你应该使用字典。

了解数组和字典及其使用方法是几乎所有编程语言中的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写了函数后，你可以通过其名称在程序中的几乎任何地方调用它。

最初我们为“red”赋值为“apple”，但后来我们决定使用“raspberry”作为更合适的水果，因为有时苹果是绿色或黄色的。为了将“apple”替换为“raspberry”，我们将 colorFruits["red"]设置为其新值➊。

你可能记得这与我们如何将新值输入字典的方式相同。如果字典中已经存在该键，那么该键的值会被替换。如果该键不存在，则会将新的键/值对添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

与数组类似，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查你有多少个项目。假设你有一个待售的水果篮子，你可以使用这些属性来帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含字典的所有键；values，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，你可以用两种不同的方式进行遍历。这是使用字典的键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写出关键字 for，接着是字典键的常量名 fruit，然后是关键字 in，字典的名称，一个句点和 keys。

在我们 for-in 循环的花括号内，我们可以访问到键（我们称之为 fruit ➋），以及当我们使用 fruitBasket[fruit]! ➌ 强制解包其内容时，该键的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道所使用的 fruit 键一定在字典中。

我们在 for-in 循环内放入的任何代码都会对字典中的每个键执行一次。所以你应该能看到 print 语句打印三次。

我们也可以通过字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但现在我们用常量来表示 values 属性中的每个值，称其为 price。遍历 values 时，我们无法在循环内部访问到键。

另一个需要注意的区别是，price 不是一个可选类型，因为它直接作为 fruitBasket 字典中的一个值来访问。这意味着我们不需要对它进行解包。你应该仍然能看到 print 语句打印三次。图 6-6 展示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！由于顺序并不保证，你可能会看到不同的顺序，尤其是如果你再次运行相同的代码时。

### 你学到的内容

在本章中，你学习了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，你则需要使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言的强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。写完一个函数后，你可以通过其名称在程序中的几乎任何地方调用它。

你可能记得，这和我们向字典中插入新值的方式是一样的。如果键已经存在于字典中，那么该键的值会被替换。如果键不存在，那么新的键/值对将会被添加到字典中。

![Image](img/Image00147.jpg)

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果字典不为空，count 属性则检查字典中有多少项。想象你有一个待售的水果篮。你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，包含字典的所有键；values，包含字典的所有值。我们将在遍历字典时使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和一个值，你可以通过两种方式来实现遍历。以下是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先编写关键字 for，然后是常量名 fruit 来表示字典的键，接着是关键字 in，字典名，一个点，最后是 keys。

在 for-in 循环的花括号内部，我们可以访问键，我们称之为 fruit ➋，以及该键的值，当我们使用 fruitBasket[fruit]! 强制展开其内容时 ➌。该值将是水果的价格。

在这种情况下，强制展开值时使用感叹号是安全的，因为我们知道我们使用的水果键肯定在字典中。

我们放在 for-in 循环中的任何代码都会对字典中的每个键执行一次。所以你应该能看到打印语句显示三次。

我们也可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的 for-in 循环，但这次我们用常量引用 values 属性中的每个值，我们称之为 price。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是 price 不是可选类型，因为它是直接作为字典值来访问的。这意味着我们不需要解包它。你仍然应该能看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：通过 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组中的项那样有编号顺序！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你可以使用数组，并通过索引查找每个项目。如果你想通过键来存储项目，则应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以通过其名称在程序中的几乎任何地方调用它。

![Image](img/Image00147.jpg)

#### 使用字典属性

就像数组一样，字典也有一个 isEmpty 属性和一个 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，则使用 count 属性检查字典中有多少项。假设你有一个待售的水果篮子。你可以使用这些属性来帮助你追踪一切：

![Image](img/Image00148.jpg)

字典还有两个特殊属性：keys，它包含所有字典的键；以及 values，它包含所有的值。我们将在循环遍历字典时使用这两个属性。

让我们写一些代码，通过循环遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，所以你可以通过两种不同的方式进行循环。这是通过字典的键来循环的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是一个常量名称 fruit 作为字典的键，再是关键字 in、字典名称、一个点符号，最后是 keys。

在 for-in 循环的花括号内，我们可以访问键（我们称之为 fruit ➋），以及通过强制解包其内容的 fruitBasket[fruit]! ➌ 获得该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键肯定存在于字典中。

我们在 for-in 循环中放入的任何代码都会在字典中的每个键上执行一次。因此，你应该看到打印语句显示三次。

我们还可以通过字典的 values 属性进行循环：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 values 属性中的每个值，我们将其命名为 price。在循环遍历值时，我们无法在循环内访问键。

另一个需要注意的区别是价格不是一个可选项，因为它是作为水果篮字典中的值直接访问的。这意味着我们不需要解包它。你应该仍然看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你得到的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样是按编号顺序排列的！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序打印出来。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项目。要存储有序列表中的项目，你可以使用数组并通过索引查找每个项目。如果你想通过键来存储项目，则可以使用字典。

了解数组和字典及其使用方式是几乎任何编程语言中一个强大的基础模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。编写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

#### 使用字典属性

和数组一样，字典也有 isEmpty 属性和 count 属性。例如，以下代码展示了如何使用 isEmpty 属性检查字典是否为空，如果不为空，count 属性会检查你有多少个项目。假设你有一个水果篮子出售。你可以使用这些属性帮助你跟踪一切：

![Image](img/Image00148.jpg)

字典还具有两个特殊属性：keys，包含字典中所有的键，和 values，包含所有的值。我们将在遍历字典时使用这两个属性。

让我们编写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和值，你可以通过两种不同的方式来实现这一点。以下是如何使用字典的键来遍历字典：

![Image](img/Image00149.jpg)

这里我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印它的内容。我们首先写下关键字 for，后跟字典键的常量名称 fruit，然后是关键字 in，字典名称，一个点，最后是 keys。

在我们的 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋）以及通过强制解包 fruitBasket[fruit]! ➌ 获取该键的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会为字典中的每一个键执行一次。所以你应该看到打印语句会执行三次。

我们还可以通过字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们用常量来引用每个值，我们称其为 price，位于 values 属性中。遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是可选的，因为它是直接作为值访问的，位于 fruitBasket 字典中。这意味着我们不需要解包它。你仍然会看到打印语句执行三次。图 6-6 显示了两种循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项不像数组中的项那样按数字顺序排列！由于顺序无法保证，如果你重新运行相同的代码，可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学习了如何将多个项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每一项。如果你想通过键存储项，你则会使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。写完一个函数后，你可以使用它的名字从程序中的任何地方调用它。

像数组一样，字典也有 isEmpty 属性和 count 属性。例如，下面的代码展示了如何使用 isEmpty 属性来检查字典是否为空，如果不为空，则通过 count 属性检查字典中有多少项。假设你有一个水果篮子在出售，你可以使用这些属性帮助你跟踪所有内容：

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，包含字典的所有键；values，包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮子并打印每个水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。由于每个项都有一个键和值，因此你可以通过两种方式来遍历字典。这是通过字典的键进行遍历的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键词`for`，接着是常量名称`fruit`作为字典键，关键词`in`，字典名称，接着是句点，再加上`keys`。

在`for-in`循环的花括号内部，我们可以访问键，称之为`fruit` ➋ ，以及当我们强制解包其内容时的该键的值，使用`fruitBasket[fruit]!` ➌ 。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的水果键肯定在字典中。

我们放入`for-in`循环中的任何代码都会在字典中的每个键上运行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的`for-in`循环样式，但现在我们使用一个常量来引用`values`属性中的每个值，称之为`price`。当遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price`不是一个可选值，因为它是直接作为值从`fruitBasket`字典中访问的。这意味着我们不需要解包它。你应该仍然看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与我们的略有不同。这是因为字典中的项不像数组中的项那样是按编号顺序排列的！由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的打印顺序。

### 你学到了什么

在本章中，你学会了如何将项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想根据键存储项目，应该使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中一个强大的基础模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定任务。编写了函数后，你可以在程序中的几乎任何地方通过它的名字来调用它。

![Image](img/Image00148.jpg)

字典还有两个特殊的属性：keys，它包含字典的所有键；以及 values，它包含字典的所有值。在遍历字典时，我们将使用这两个属性。

让我们写一些代码，遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。因为每个项都有一个键和值，你可以通过两种方式进行遍历。这是使用字典的键来遍历字典的方法：

![图片](img/Image00149.jpg)

在这里，我们使用字典的`keys`属性 ➊ 来遍历`fruitBasket`并打印其内容。我们首先编写关键字`for`，然后是字典键的常量名称`fruit`，接着是关键字`in`，字典名称，一个句点，然后是`keys`。

在我们`for-in`循环的大括号内部，我们可以访问键（我们称之为 fruit ➋）和通过强制解包`fruitBasket[fruit]!` ➌ 获取的键对应的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们正在使用的水果键肯定存在于字典中。

我们放在`for-in`循环中的任何代码都会对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的`values`属性来循环遍历：

![图片](img/Image00150.jpg)

我们使用相同的`for-in`循环样式，但现在我们使用常量来引用`values`属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选的，因为它直接作为值访问`fruitBasket`字典中的数据。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 展示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能与你的不同。那是因为字典中的项目不像数组那样按数字顺序排列！由于顺序不可保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学会了如何将项目存储在数组和字典中。为了将项目存储在有序列表中，你将使用数组，并通过索引查找每个项目。如果你想按键存储项目，则应使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言中的一个强大构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的工作。编写函数后，你可以使用它的名称在程序的几乎任何地方调用它。

字典还有两个特殊的属性：`keys`，它包含字典的所有键，以及`values`，它包含所有的值。在我们遍历字典时，我们会使用这两个属性。

让我们编写一些代码，循环遍历我们的水果篮并打印每种水果的价格。

#### 遍历字典

你可以使用`for-in`循环遍历字典。由于每个项目都有一个键和值，因此你可以以两种不同的方式进行遍历。以下是通过字典的键来循环遍历的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 来遍历果篮并打印其内容。我们从写关键字 for 开始，接着是一个常量名 fruit 来代表字典键，再是关键字 in ，字典名，句点和 keys 。

在 for-in 循环的花括号内，我们可以访问到键，即我们称之为 fruit ➋ ，以及通过强制解包其内容（使用 fruitBasket[fruit]! ➌ ）时该键对应的值。这个值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们放在 for-in 循环中的任何代码都会为字典中的每个键执行一次。所以你应该能看到打印语句执行三次。

我们还可以使用字典的 values 属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但这次我们使用一个常量来引用每个值，这个常量叫做 price ，它位于 values 属性中。当遍历 values 时，我们无法在循环内部访问到键。

另一个需要注意的区别是，价格（price）不是一个可选类型，因为它是直接作为值从果篮字典中访问的。这意味着我们不需要解包它。你仍然应该能看到打印语句执行三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将项集合存储在数组和字典中。要将项存储在有序列表中，你会使用数组并通过索引查找每个项。如果你想按键存储项，你将使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的强大构建模块。接下来我们将学习函数，另一种非常强大的工具。函数是你创建并命名的一块代码，用来执行特定的任务。在编写完函数后，你可以通过它的名字从程序中的几乎任何地方调用它。

让我们写一些代码，遍历我们的果篮并打印每种水果的价格。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，你可以通过两种不同的方式来完成。下面是使用字典的键进行遍历的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后面跟上一个常量名称 fruit，表示字典的键，然后是关键字 in，字典的名称，句点和 keys。

在我们的 for-in 循环的大括号内，我们可以访问到键（我们称之为 fruit ➋），以及通过强制解包其内容 fruitBasket[fruit]! ➌ 获取的该键对应的值。这个值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道正在使用的水果键一定在字典中。

我们放入 for-in 循环中的任何代码都会对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们也可以使用字典的值属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环风格，但现在我们使用一个常量来引用每个值，我们称之为 price，位于 values 属性中。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是 price 不是一个可选值，因为它直接作为值从 fruitBasket 字典中访问。这意味着我们不需要解包它。你仍然应该看到打印语句打印三次。图 6-6 显示了两种循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。那是因为字典中的项不像数组中的项那样按编号顺序排列！而且由于顺序不保证，你可能会看到不同的顺序，如果你再次运行相同的代码。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项。为了在有序列表中存储项，你会使用数组并通过索引查找每个项。如果你想根据键存储项，你将使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中一个强大的构建块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以通过其名称从程序中的几乎任何地方调用它。

#### 遍历字典

你可以使用 for-in 循环遍历字典。因为每个项都有一个键和值，所以你可以通过两种不同的方式来遍历字典。这是通过键遍历字典的方式：

![Image](img/Image00149.jpg)

在这里，我们使用字典的键属性 ➊ 遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，后面跟上一个常量名称 fruit，表示字典的键，然后是关键字 in，字典的名称，句点和 keys。

在我们 for-in 循环的大括号内部，我们可以同时访问键（我们称之为 fruit ➋）和通过强制解包其内容（使用 fruitBasket[fruit]! ➌）获得的该键的值。该值就是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的水果键一定在字典中。

我们在 for-in 循环内部放置的任何代码都会针对字典中的每个键执行一次。所以你应该看到打印语句显示三次。

我们也可以通过字典的 values 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是一个可选值，因为它是作为 fruitBasket 字典中的一个值直接访问的。这意味着我们不需要解包它。你仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的稍有不同。这是因为字典中的项目不像数组中的项目那样按数字顺序排列！由于顺序无法保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到了什么

在这一章中，你学习了如何将一组项目存储在数组和字典中。要将项目存储在有序列表中，你会使用数组，并通过索引查找每个项目。如果你想按键存储项目，则需要使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的一个强大构建模块。接下来我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。编写完函数后，你可以通过其名称在程序的几乎任何地方调用它。

你可以使用 for-in 循环遍历字典。因为每个项目都有一个键和一个值，所以你可以用两种不同的方式来实现。以下是使用键遍历字典的方法：

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们首先写下关键字 for，然后是字典键的常量名称 fruit，接着是关键字 in，字典名称，一个句点，最后是 keys。

在我们 for-in 循环的大括号内部，我们可以同时访问键（我们称之为 fruit ➋）和通过强制解包其内容（使用 fruitBasket[fruit]! ➌）获得的该键的值。该值就是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的水果键肯定在字典中。

我们放入 `for-in` 循环中的每一行代码会在字典中的每个键上执行一次。所以你应该会看到打印语句显示三次。

我们也可以使用字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 `for-in` 循环，但现在我们使用常量来引用 `values` 属性中的每个值，我们称其为 `price`。在遍历值时，我们无法从循环内部访问键。

另一个值得注意的区别是，`price` 不是一个可选值，因为它是通过直接访问 `fruitBasket` 字典中的值来获取的。这意味着我们不需要解包它。你仍然应该会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 `for-in` 循环遍历字典的键和值*

你的结果顺序可能会与你看到的略有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且由于顺序没有保证，如果你再次运行相同的代码，你可能会看到不同的顺序打印。

### 你学到了什么

在本章中，你学习了如何在数组和字典中存储项的集合。要在有序列表中存储项，你会使用数组并通过索引查找每个项。如果你想通过键来存储项，则应该使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中的一个强大构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用来执行特定的任务。在你编写了一个函数之后，可以通过它的名称在程序的几乎任何地方调用它。

![Image](img/Image00149.jpg)

在这里，我们使用字典的 keys 属性 ➊ 来遍历 fruitBasket 并打印其内容。我们从写出关键字 `for` 开始，接着是常量名 `fruit` 作为字典键，关键字 `in`，字典名，句点，和 `keys`。

在 `for-in` 循环的大括号内，我们可以访问到键，也就是我们称之为 `fruit` ➋ 的那个键，并且可以通过 `fruitBasket[fruit]!` 强制解包其内容 ➌ 来访问该键的值。该值将是水果的价格。

在这种情况下，可以安全地使用感叹号强制解包值，因为我们知道我们使用的水果键肯定在字典中。

我们放入 `for-in` 循环中的每一行代码会在字典中的每个键上执行一次。所以你应该会看到打印语句显示三次。

我们也可以使用字典的 `values` 属性来遍历字典：

![Image](img/Image00150.jpg)

我们使用相同样式的`for-in`循环，但现在我们使用一个常量来引用每个值，我们称之为`price`，它位于`values`属性中。当遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，`price`不是可选项，因为它是直接作为值访问`fruitBasket`字典中的。这意味着我们不需要解包它。你仍然应该会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用`for-in`循环遍历字典的键和值*

你的结果顺序可能会与我们的稍有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序无法保证，因此如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将多个项目存储在数组和字典中。要将项目存储在有序列表中，你应该使用数组并通过索引查找每个项目。如果你想按键存储项目，则应该使用字典。

了解数组和字典以及如何使用它们，是几乎所有编程语言的强大构建模块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写函数后，你可以在程序中的几乎任何地方使用其名称来调用它。

这里我们使用字典的`keys`属性➊来遍历`fruitBasket`并打印其内容。我们首先写关键字`for`，然后是常量名称`fruit`（作为字典键），接着是关键字`in`，然后是字典名称、句点，最后是`keys`。

在我们`for-in`循环的花括号内，我们可以访问键（我们称之为`fruit`➋）以及强制解包其内容后在该键处的值，使用`fruitBasket[fruit]!`➌。该值将是水果的价格。

在这种情况下，使用感叹号强制解包该值是安全的，因为我们知道我们使用的`fruit`键一定在字典中。

我们在`for-in`循环中放入的任何代码都会为字典中的每个键执行一次。因此，你应该会看到打印语句显示三次。

我们还可以通过字典的`values`属性进行遍历：

![Image](img/Image00150.jpg)

我们使用相同样式的`for-in`循环，但现在我们使用一个常量来引用每个值，我们称之为`price`，它位于`values`属性中。当遍历值时，我们无法在循环内部访问键。

另一个需要注意的区别是，`price`不是可选项，因为它是直接作为值访问`fruitBasket`字典中的。这意味着我们不需要解包它。你仍然应该会看到打印语句打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号排序！而且，由于顺序不能保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每一项。如果你想按键存储项，则会使用字典。

了解数组和字典以及如何使用它们，是几乎任何编程语言中强大的构建模块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的一段代码，用于执行特定的任务。写完函数后，你可以通过函数名称在程序中的几乎任何地方调用它。

在 for-in 循环的大括号内，我们可以访问键（我们称之为 fruit ➋），并通过强制解包它的内容（使用 fruitBasket[fruit]! ➌）来访问该键的值。该值将是水果的价格。

在这种情况下，使用感叹号强制解包值是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会针对字典中的每个键运行一次。所以你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性遍历字典：

![Image](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用 values 属性中的每个值，我们称之为 price。当遍历 values 时，我们无法在循环内部访问键。

另一个需要注意的区别是，price 不是可选类型，因为它是直接作为值访问 fruitBasket 字典中的。因此，我们不需要解包它。你仍然应该看到打印语句显示三次。图 6-6 显示了两个循环的输出结果。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按编号排序！而且，由于顺序不能保证，如果你再次运行相同的代码，可能会看到不同的顺序。

### 你学到的内容

在本章中，你学习了如何将项存储在数组和字典中。要将项存储在有序列表中，你会使用数组，并通过索引查找每一项。如果你想按键存储项，则会使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以使用它的名称从程序的几乎任何地方调用它。

在这种情况下，强制解包该值时使用感叹号是安全的，因为我们知道我们使用的 fruit 键肯定在字典中。

我们在 for-in 循环中放入的任何代码都会对字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性进行循环：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用值（我们称之为 price），该值位于 values 属性中。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，价格不是可选的，因为它在 fruitBasket 字典中作为值直接访问。这意味着我们不需要解包它。你仍然应该看到打印语句打印了三次。图 6-6 展示了两个循环的输出结果。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！由于顺序不保证，因此如果再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到的内容

在这一章中，你学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，你需要使用数组并通过索引查找每个项目。如果你想通过键存储项目，则需要使用字典。

了解数组和字典以及如何使用它们是几乎所有编程语言中强大的构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。编写完函数后，你可以使用它的名称从程序的几乎任何地方调用它。

我们在 for-in 循环中放入的任何代码都会对字典中的每个键执行一次。因此，你应该看到打印语句显示三次。

我们还可以使用字典的 values 属性进行循环：

![图片](img/Image00150.jpg)

我们使用相同类型的 for-in 循环，但现在我们使用一个常量来引用值（我们称之为 price），该值位于 values 属性中。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是一个可选项，因为它是直接作为值访问的，在 `fruitBasket` 字典中。这意味着我们不需要解包它。您仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

您的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且因为顺序不保证，您如果再次运行相同的代码，可能会看到不同的顺序。

### 您学到了什么

在本章中，您学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，您将使用数组，并通过其索引查找每个项目。如果您想通过键来存储项目，则应使用字典。

了解数组和字典及其用法是几乎任何编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是您创建并命名的代码块，用来执行特定的任务。编写完函数后，您可以通过其名称从程序中的几乎任何地方调用它。

我们也可以通过字典的 `values` 属性来循环遍历：

![Image](img/Image00150.jpg)

我们使用相同的 for-in 循环样式，但现在我们使用常量来引用 `values` 属性中的每个值，我们称其为 `price`。在遍历值时，我们无法从循环内部访问键。

另一个需要注意的区别是，`price` 不是一个可选项，因为它是直接作为值访问的，在 `fruitBasket` 字典中。这意味着我们不需要解包它。您仍然应该看到打印语句被打印三次。图 6-6 显示了两个循环的输出。

![Image](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

您的结果顺序可能与我们的略有不同。这是因为字典中的项目不像数组那样按编号顺序排列！而且因为顺序不保证，您如果再次运行相同的代码，可能会看到不同的顺序。

### 您学到了什么

在本章中，您学习了如何在数组和字典中存储项目集合。要将项目存储在有序列表中，您将使用数组，并通过其索引查找每个项目。如果您想通过键来存储项目，则应使用字典。

了解数组和字典及其用法是几乎任何编程语言的强大构建块。接下来，我们将学习函数，这是另一个非常强大的工具。函数是您创建并命名的代码块，用来执行特定的任务。编写完函数后，您可以通过其名称从程序中的几乎任何地方调用它。

![图片](img/Image00150.jpg)

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用每个值，我们称之为 price，它在 values 属性中。当遍历 values 时，我们无法从循环内部访问到键。

另一个需要注意的区别是 price 不是可选类型，因为它是直接作为 fruitBasket 字典中的一个值访问的。这意味着我们不需要解包它。你仍然会看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与你的不同。那是因为字典中的项不像数组那样按编号顺序排列！并且由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的一个强大基础。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。写完函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

我们使用相同风格的 for-in 循环，但现在我们使用一个常量来引用每个值，我们称之为 price，它在 values 属性中。当遍历 values 时，我们无法从循环内部访问到键。

另一个需要注意的区别是 price 不是可选类型，因为它是直接作为 fruitBasket 字典中的一个值访问的。这意味着我们不需要解包它。你仍然会看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![图片](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能会与你的不同。那是因为字典中的项不像数组那样按编号顺序排列！并且由于顺序不保证，如果你再次运行相同的代码，可能会看到不同的输出顺序。

### 你学到了什么

在本章中，你学习了如何将项目存储在数组和字典中。要在有序列表中存储项目，你会使用数组，并通过索引查找每个项目。如果你想通过键存储项目，则会使用字典。

了解数组和字典及其使用方法是几乎任何编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在编写完函数后，你可以通过其名称在程序的几乎任何地方调用它。

另一个需要注意的区别是，price 不是一个可选项，因为它是直接作为值在 fruitBasket 字典中访问的。这意味着我们不需要解包它。你仍然应该看到 print 语句打印三次。图 6-6 显示了两个循环的输出。

![图像](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按数字顺序排列！而且，由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项的集合。要将项存储在有序列表中，你可以使用数组并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典及其使用方法是几乎任何编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在编写完函数后，你可以通过其名称在程序的几乎任何地方调用它。

![图像](img/Image00151.jpg)

*图 6-6：使用 for-in 循环遍历字典的键和值*

你的结果顺序可能与我们的略有不同。这是因为字典中的项不像数组那样按数字顺序排列！而且，由于顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的顺序打印出来。

### 你学到了什么

在本章中，你学会了如何在数组和字典中存储项的集合。要将项存储在有序列表中，你可以使用数组并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典及其使用方法是几乎任何编程语言中的一个强大构建块。接下来我们将学习函数，这是另一个非常强大的工具。函数是你创建并命名的代码块，用于执行特定的任务。在编写完函数后，你可以通过其名称在程序的几乎任何地方调用它。

*图 6-6：使用 for-in 循环遍历字典的键和值*

你结果的顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且因为顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到的

在本章中，你学会了如何在数组和字典中存储一系列项。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的一个强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

你结果的顺序可能与我们的稍有不同。这是因为字典中的项不像数组那样按编号顺序排列！而且因为顺序无法保证，如果你再次运行相同的代码，你可能会看到不同的输出顺序。

### 你学到的

在本章中，你学会了如何在数组和字典中存储一系列项。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的一个强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

### 你学到的

在本章中，你学会了如何在数组和字典中存储一系列项。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典及其使用方法是几乎所有编程语言的一个强大构建块。接下来，我们将学习函数，另一个非常强大的工具。函数是你创建并命名的代码块，用来执行特定的任务。在你编写完一个函数后，你可以通过它的名称在程序中的几乎任何地方调用它。

在本章中，你学会了如何在数组和字典中存储一系列项。要将项存储在有序列表中，你会使用数组，并通过索引查找每个项。如果你想通过键来存储项，则应使用字典。

了解数组和字典以及如何使用它们是几乎任何编程语言中强大的构建块。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写完一个函数后，可以通过它的名字从程序中的几乎任何地方调用它。

了解数组和字典以及如何使用它们是几乎任何编程语言中强大的构建块。接下来，我们将学习函数，另一种非常强大的工具。函数是你创建并命名的代码块，用于执行特定任务。在你编写完一个函数后，可以通过它的名字从程序中的几乎任何地方调用它。
