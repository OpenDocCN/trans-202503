## 第十四章：探索 /etc**

![image](img/common01.jpg)

*/etc*目录包含了启动类 Unix 系统所需的基本配置信息。每当我接触到一个陌生的系统时，我做的第一件事之一就是查看*/etc*。从初级系统管理员成长为中级系统管理员的最快途径之一就是阅读*/etc*和相关的手册页面。是的，全部都要读。是的，这是一大堆阅读材料。理解*/etc*意味着你理解了系统的整体结构。随着你作为系统管理员的进步，你将会零散地获得这些信息，所以最好一开始就通过这个更轻松的路径，掌握这部分工具。

我在各个章节中讨论了许多*/etc*文件，通常是在它们最重要的地方，比如在第七章中讨论*/etc/services*，以及在第十章中讨论*/etc/fstab*。此外，一些文件仅有历史意义或正在逐渐被移除。本章涵盖了其他章节没有涵盖的重要*/etc*文件。

### /etc 在类 Unix 系统中的表现

不同的类 Unix 系统使用不同的*/etc*文件。在许多情况下，这些文件只是最初的 BSD 系统中的文件重新命名或重构的结果。例如，当我第一次遇到 IBM AIX 系统时，我去寻找一个 BSD 风格的*/etc/fstab*。结果并没有找到。稍作查找，我发现了*/etc/filesystems*，它是 IBM 特定的*/etc/fstab*。显然，IBM 认为“文件系统表”（filesystem table）缩写的文件名让人困惑，所以他们重新命名了该文件。知道这个信息存在于*/etc*的某个地方，并且知道哪些文件显然不包含这些信息，极大地缩短了我的搜索时间。

即使是完全不同的 FreeBSD 系统，它们的*/etc*目录也几乎相同。尽管一些附加程序会在这里插入自己的文件，但你可以期望每个你遇到的 FreeBSD 系统中都会有某些特定的文件。

记住，*/etc*是 FreeBSD 的核心，修改这些文件可能会破坏或摧毁你的系统。虽然手动恢复一个混乱的文件系统能够将一个普通的系统管理员培养成一个相当不错的管理员，但这绝对是最不愉快的成长方式之一。

### /etc/adduser.conf

该文件允许你配置新用户的默认设置。详情请参见第九章。

### /etc/aliases

该文件允许你配置系统范围的电子邮件转发。我们将在第二十章中讨论它。

### /etc/amd.map

FreeBSD 具备在需求时通过自动挂载守护进程 amd(8)自动挂载和卸载 NFS 文件系统的能力。然而，自动挂载守护进程非常老旧，已经在很大程度上被 autofs(5)和 automountd(8)替代。自动挂载主要对工作站有用，因此我们不再深入探讨。

### /etc/auto_master

*auto_master*文件配置了 FreeBSD 的现代自动挂载服务。它允许你配置挂载选项，确定自动挂载的文件系统应保持挂载多长时间，等等。详情请参见 auto_master(5)、autofs(5)和 automountd(8)。

### /etc/blacklistd.conf

FreeBSD 包含一个自动化黑名单守护进程 blacklistd(8)，类似于 fail2ban 等程序。链接到 libblacklist(3) 的程序可以指示 blacklistd(8) 在防火墙上阻止有害主机。我们在第十九章中配置 blacklistd(8)。

### /etc/bluetooth、/etc/bluetooth.device.conf 和 /etc/defaults/bluetooth.device.conf

FreeBSD 支持蓝牙，它是一个短距离无线通信标准。与 802.11 不同，蓝牙设计用于提供短距离但高水平的服务，如语音通信。本书主要讲解服务器内容，因此我们不会讨论蓝牙，但你应该知道，如果你愿意，你的 FreeBSD 笔记本可以连接到蓝牙手机并接入互联网。

### /etc/casper

Capsicum 安全系统允许程序员为软件添加沙箱和安全功能。*/etc/casper* 目录包含示例 capsicum(4) 配置。

### /etc/crontab 和 /etc/cron.d

cron(8) 守护进程让用户可以调度任务。请参阅第二十章以获取示例和详细信息。

### /etc/csh.*

*/etc/csh.** 文件包含 csh 和 tcsh 的系统默认设置。当用户使用其中一个 shell 登录时，shell 会执行 */etc/csh.login* 中的任何命令。类似地，当用户注销时，*/etc/csh.logout* 会被执行。你可以将一般的 shell 配置信息放入 */etc/csh.cshrc* 中。

每个 shell 配置容易出错，并且你必须为其他 shell 保持一致的设置。我建议将必要的环境变量放入登录类中（请参阅 “限制系统使用” 在第 188 页）。

### /etc/ddb.conf

内核调试器配置工具 ddb(8) 读取 *ddb.conf* 文件中的指令。我们将在第二十四章中使用它，为小型系统准备内核崩溃转储。

### /etc/devd.conf

设备守护进程 devd(8) 主要用于管理可拆卸硬件，如 USB、PCCard 和 Cardbus 设备。当你将 USB 网卡插入笔记本电脑时，devd(8) 会检测到设备到达，并启动相应的系统进程，根据 */etc/rc.conf* 配置网卡。更一般来说，它是一个状态变化守护进程，可以对链路上下事件做出反应，通知你 CPU 过热、进程挂起/恢复等事件。我们在第十三章简要讨论了 devd(8)，但如果你认为需要在服务器上编辑 */etc/devd.conf*，你可能是在做错事。

### /etc/devfs.conf、/etc/devfs.rules 和 /etc/defaults/devfs.rules

FreeBSD 通过 devfs(5) 管理设备节点，这是一个虚拟文件系统，能够动态提供设备节点，随着硬件启动、出现和消失。请参阅第十三章了解更多信息。

### /etc/dhclient.conf

许多操作系统提供非常基础的 DHCP 客户端配置，无法进行精细调节或自定义；你只能选择使用或不使用。在大多数情况下，一个空的 */etc/dhclient.conf* 文件可以提供完整的 DHCP 客户端功能，但在所有情况下都无法正常工作。也许你的网络出现了问题，或者你正在参加一个会议，某个脚本小子觉得在他的机器上设置第二个 DHCP 服务器并通过它路由所有流量很有趣，这样他就可以捕获密码。

你的服务器最好不要通过 DHCP 配置（除非它是无盘系统），因此我们不会深入探讨此内容。不过你应该知道，你可以配置 FreeBSD 的 DHCP 客户端功能。

### /etc/disktab

曾几何时，硬盘是稀有而神秘的存在，只存在几种不同类型。在 */etc/disktab* 文件中，你会找到各种磁盘的低级描述，从 360KB 软盘到 60MB 的松下笔记本硬盘。（是的，笔记本电脑曾配有 60MB 的硬盘，而我们当时可高兴坏了。）

今天，这个文件主要用于可移动媒体，如 1.44MB 软盘和 Zip 磁盘。虽然我在第十三章中描述了如何格式化闪存驱动器，但该文件包含了格式化其他可移动媒体所需的描述。如果你想在 LS 120 磁盘或 Zip 驱动器上创建文件系统，你会在条目开头找到必要的标签。

编辑 */etc/disktab* 只有在你有多个相同的硬盘，并希望它们按完全相同的方式进行分区和格式化时才有用。如果你需要添加自己的条目，请阅读 disktab(5)。

### /etc/dma/

Dragonfly 邮件代理（DMA）将其配置存储在 */etc/dma/* 中。我们在第二十章中讨论了 DMA。

### /etc/freebsd-update.conf

该文件在通过 freebsd-update(8) 获取服务器的二进制更新时使用。有关详细信息，请参阅第十八章。

### /etc/fstab

有关文件系统表的讨论，请参阅第十章，以及 */etc/fstab*。

### /etc/ftp.*

FTP 守护进程 ftpd(8) 使用这些文件来确定谁可以通过 FTP 访问系统，以及在成功连接后他们可以进行何种访问。除非你运行的是一个大型 FTP 站点，否则你应该使用 sftp(1)。

### /etc/group

将用户分配到不同的组在第九章中有详细的说明。

### /etc/hostid

某些软件要求每台主机都有一个全球唯一的 ID，或 UUID。如果你在实际硬件上运行，该 UUID 会被烧录到主板中，并可以通过 kenv(8) 访问。虚拟主机可以通过软件生成 UUID。*/etc/hostid* 文件包含了该 UUID。

### /etc/hosts

该文件包含主机到 IP 的映射，详见第八章。

### /etc/hosts.allow

*/etc/hosts.allow* 文件控制哪些人可以访问支持 TCP Wrappers 的守护进程。请在第十九章中了解相关内容。

### /etc/hosts.equiv

*/etc/hosts.equiv* 文件由 r 服务（如 rlogin、rsh 等）使用，允许受信任的远程系统在不提供密码或甚至不登录的情况下登录或在本地系统上运行命令。列在此文件中的主机被假定已经在受信任的系统上进行了用户身份验证，因此本地系统无需再次验证用户。

这种明显的信任在友好的网络中非常方便，就像把你曼哈顿市区联排别墅的门锁开着一样，每次回家时都省去了寻找门钥匙的麻烦。然而，所谓的“友好网络”并不存在。^(1) 一个不满的员工可以通过此服务几乎摧毁一个企业网络，任何使用 r 服务的机器对于第一个路过的脚本小子来说几乎就是“狗肉”。事实上，*/etc/hosts.equiv* 及其相关服务曾经让即使是顶级安全专家也吃了亏，他们曾认为可以安全地使用它。我建议将此文件保持为空，甚至可以将其设置为不可变（参见 第九章）。

### /etc/hosts.lpd

*/etc/hosts.lpd* 文件是 */etc* 目录中最简单的文件之一。这里列出的每个主机（每行一个）可能会打印到由此计算机控制的打印机上。虽然你可以使用主机名，但这可能会导致 DNS 问题影响打印，因此建议使用 IP 地址。

与大多数其他配置文件不同，*/etc/hosts.lpd* 不接受网络号或子网掩码；你必须列出单独的主机名或 IP 地址。

我们在 第二十章 中配置 FreeBSD 作为打印机客户端。

### /etc/inetd.conf

inetd(8) 处理较小的守护进程的传入网络连接，这些守护进程不会频繁运行。请参阅 第二十章 中关于 inetd 的部分。

### /etc/libmap.conf

FreeBSD 的链接器允许你用一个共享库替换另一个共享库。我们在 第十七章 中讨论了这一点。

### /etc/localtime

该文件包含由 tzsetup(8) 配置的本地时区数据。它是一个二进制文件，无法使用普通工具编辑。tzsetup(8) 实际上是从 */usr/share/zoneinfo* 的一个子目录中复制了此文件。如果你的时区发生变化，你需要升级 FreeBSD 以获取新的时区文件，然后重新运行 tzsetup(8) 来正确配置时间。

我们在 第二十章 中讨论时间。

### /etc/locate.rc

locate(1) 查找给定名称的所有文件。例如，要查找 *locate.rc*，请输入以下内容：

```
# locate locate.rc
/etc/locate.rc
/usr/share/examples/etc/locate.rc
/usr/src/usr.bin/locate/locate/locate.rc
/var/db/etcupdate/current/etc/locate.rc
```

你会发现名为 *locate.rc* 的文件可以在四个地方找到：主 */etc* 目录、系统示例目录、系统源代码以及由 etcupdate(8) 保留的副本。

作为 periodic(8) 每周运行的一部分（参见 第二十一章），你的 FreeBSD 系统会扫描磁盘，构建它找到的所有内容的列表，并将该列表存储在数据库中。构建列表的程序 locate.updatedb(8) 会从 */etc/locate.rc* 获取其设置。此文件中的以下变量都会改变你的 locate.updatedb(8) 如何构建 locate 数据库：

+   `TMPDIR` 包含 locate.updatedb(8) 使用的临时目录，默认为 */tmp*。如果 */tmp* 空间不足，请将此路径更改为一个有更多空间的地方。

+   虽然你可以通过 `FCODES` 变量更改数据库的位置，但这会影响 FreeBSD 其他期望在默认位置找到该数据库的部分。做好准备面对一些奇怪的结果，尤其是在你将旧的 locate 数据库保留在默认位置 */var/db/locate.database* 时。

+   `SEARCHPATHS` 变量指定了你希望开始构建数据库的目录。默认情况下，它是 */*，即整个磁盘。要只索引磁盘的一部分，请在此设置该值。

+   `PRUNEPATHS` 列出了你不希望索引的目录。默认情况下，排除了传统上仅包含短期文件的临时目录。

+   `FILESYSTEMS` 变量列出了你希望索引的文件系统类型。默认情况下，locate.updatedb(8) 只索引 UFS（FreeBSD）和 ext2fs（Linux）文件系统。列出 NFS（参见 第十三章）文件系统并不是一个好主意：所有服务器同时索引文件服务器会导致网络或文件服务器的瓶颈。

### /etc/login.*

你可以通过使用 */etc/login.access* 和 */etc/login.conf* 控制谁可以登录到你的系统，以及这些用户可以访问哪些资源。请参见 第九章 的说明。

### /etc/mail

*/etc/mail* 中的大部分内容用于 Sendmail。两个例外是 aliases(5) 文件和 mailer.conf(5)。我们在 第二十章 中讨论了这两个文件。

### /etc/mail.rc

虽然 FreeBSD 使用大多数 *.rc* 文件进行系统启动，*/etc/mail.rc* 文件则用于配置 mail(1)。

### /etc/mail/mailer.conf

FreeBSD 允许你通过 */etc/mail/mailer.conf* 选择任何你喜欢的邮件服务器程序，具体内容请参见 第二十章。

### /etc/make.conf

编译一个程序是指将其从源代码构建成机器语言。我们将在 第十七章 中详细讨论构建软件。*/etc/make.conf* 包含控制构建过程的设置，让你可以设置直接影响软件构建的选项。记住，添加到 *make.conf* 的任何内容都会影响系统上构建的所有软件，包括系统升级。这可能会导致升级失败。^(2) 许多 *make.conf* 中的选项对开发者才有用。

如果你想设置只影响系统升级的选项，请改用 */etc/src.conf*。

下面是一些在*make.conf*中设置的常见功能。这里设置的任何值都需要使用 make(1)所使用的相同语法。如果你坚持尝试优化软件构建，按照 make.conf(5)中的示例或软件文档中的示例操作。然而，最好的做法是完全不要修改 make。

#### *CFLAGS*

这个选项指定了构建非内核程序时的优化设置。许多其他类 Unix 操作系统建议使用特定的*编译器标志*或`CFLAGS`来编译软件。在 FreeBSD 中，强烈不推荐这种做法。需要编译器标志的系统组件已经在软件配置中指定了该标志，附加软件的配置也为其单独设置了该标志。虽然有人可能会推荐其他`CFLAGS`设置，但 FreeBSD 项目不支持自定义选项。

一般来说，FreeBSD 代码期望在开箱即用时就能正确编译。唯一的作用是添加编译器选项可能会损害你的性能。如果你使用非标准标志构建 FreeBSD 或端口并遇到问题，移除这些标志并重新构建。

#### *COPTFLAGS*

`COPTFLAGS`优化仅用于构建内核。同样，非默认设置可能会导致无法正常工作的内核。

#### *CXXFLAGS*

`CXXFLAGS`告诉编译器在构建 C++代码时使用哪些优化。使用`CXXFLAGS`时，请务必使用+=语法，这样你就能将你的指令添加到软件中指定的指令上。我之前提到的关于`CFLAGS`的所有内容同样适用于`CXXFLAGS`。

### /etc/master.passwd

该文件包含所有用户账户的机密核心信息，详情请参见第九章。请妥善保护它。

### /etc/motd

*每日信息（motd）*文件在用户登录时显示。你可以在这个文件中放置系统通知或其他你希望 Shell 用户看到的信息。*/etc/login.conf*中的`welcome`选项（参见第九章）可以指向不同的 motd 文件，因此你可以为每个登录类设置不同的消息。

### /etc/mtree

mtree(1)构建具有权限设置的目录层次结构，这些权限根据预定义的标准设置。*/etc/mtree*目录存储 FreeBSD 基础系统的该标准。FreeBSD 的升级过程使用 mtree 记录来正确安装系统。如果你破坏了基础系统中文件或目录的权限，可以使用 mtree(1)将其恢复到默认值。虽然你通常不需要编辑这些文件，但如果你过度修改系统，这些文件可能会很有用。无盘系统使用这些文件来构建基于内存的*/var*文件系统。我们将在第十九章中使用这些信息检查系统安全性。

### /etc/netconfig

如果你习惯了基于 SVR4 的操作系统，你可能会期望在*/etc/netconfig*中配置各种网络部分。但 FreeBSD 仅将此文件用于 RPC 代码。我提到它只是为了防止老一辈的 Solaris 用户误以为在这里进行更改能帮助他们。

### /etc/netstart

这个 Shell 脚本专门用于在单用户模式下启动网络。在单用户模式下使用网络对许多原因都非常有用，从挂载 NFS 共享到连接远程机器以验证配置。只需运行*/etc/netstart*。在完全多用户模式下，这个脚本没有任何效果。

### /etc/network.subr

这个 Shell 脚本不是为了人类使用的；相反，其他网络配置脚本使用这里定义的子例程来支持常见功能。

### /etc/newsyslog.conf

这个文件配置日志文件的旋转和删除。有关更多信息，请参阅第二十一章。

### /etc/nscd.conf

nscd(8)服务缓存名称服务查找的结果，以优化系统性能。如果你运行 LDAP，它很有用，但对于主机名查找，你最好使用本地缓存解析器。

### /etc/nsmb.conf

FreeBSD 的 Windows 文件共享挂载系统使用*/etc/nsmb.conf*来定义对 Windows 系统的访问，正如第十三章中所述。

### /etc/nsswitch.conf

名称服务切换在第八章和第二十章中有所讨论。

### /etc/ntp/, /etc/ntp.conf

保持主机时间的准确性简化了……嗯，一切。时间守护进程 ntpd(8)使用这些文件，正如第二十章所示。

### /etc/opie*

*一次性密码系统 (OPIE)* 是一个源自 S/Key 的一次性密码系统。虽然它仍然在一些地方使用，但已经不再非常流行。如果你感兴趣，可以阅读 opie(4)。大部分情况下，OPIE 已经被像 Kerberos、Google Authenticator 和其他 PAM 插件这样的系统所替代。

### /etc/pam.d/*

*可插拔认证模块 (PAM)* 允许系统管理员使用不同的认证、授权和访问控制系统。如果你正在使用 Kerberos、LDAP 或其他某种集中认证系统，你需要配置 PAM。遗憾的是，PAM 本身就可以写成一本书。如果你不得不涉及到 PAM，允许我推荐我的书《PAM 精通》(Tilted Windmill Press, 2016)。

### /etc/passwd

这个文件包含用户可见的账户信息。我们在第九章中讨论了密码文件。

### /etc/pccard_ether

这个脚本用于启动和停止可移动网络卡，比如 Cardbus 卡和 USB 以太网卡。它的名字只是历史的遗留物，那时只有 PC 卡可用。在大多数情况下，devd(8)会根据需要运行这个脚本，正如第十三章所讨论的。

### /etc/periodic.conf 和 /etc/defaults/periodic.conf

系统的常规维护任务会生成那些烦人的根用户邮件，这些任务由 periodic(8) 运行，它只会运行存储在 */etc/periodic* 和 */usr/local/etc/periodic* 中的 shell 脚本。每个脚本都可以在 */etc/periodic.conf* 中启用或禁用。

periodic(8) 每天、每周或每月运行程序。每组程序有其自己的设置——例如，日常程序的配置与每月程序的配置是分开的。这些设置通过 */etc/periodic.conf* 中的条目来控制。虽然我们只展示了日常脚本的示例，但你会发现每周和每月脚本有非常类似的设置。

#### *daily_output=”root”*

如果你希望将状态电子邮件发送到 root 以外的用户，请在此列出该用户的用户名。除非你有一个专门负责阅读周期性电子邮件的用户，否则最好保持默认设置，并将 root 的电子邮件转发到你阅读的帐户。你也可以提供一个文件的完整路径，如果你愿意的话，甚至可以使用 newsyslog(8) 来轮转周期性日志（见 第十九章）。

#### *daily_show_success=”YES”*

将此设置为 `YES` 时，每日信息中会包括所有成功检查的信息。

#### *daily_show_info=”YES”*

设置为 `YES` 时，每日信息中会包括它运行的命令的常规信息。

#### *daily_show_badconfig=”NO”*

设置为 `YES` 时，每日信息中会包括周期性命令的运行信息，这些命令尝试执行但未能成功。这些信息通常是无害的，涉及到你系统不支持或不包含的子系统。

#### *daily_local=”/etc/daily.local”*

你可以定义自己的脚本，作为每日、每周和每月的 periodic(8) 任务的一部分。默认情况下，这些脚本位于 */etc/daily.local*、*/etc/weekly.local* 和 */etc/monthly.local*，但你可以将它们放在任何你喜欢的位置。

每个位于 */etc/periodic* 下的 daily、weekly 和 monthly 子目录中的脚本文件，在文件顶部都有简短的描述，大多数脚本在 */etc/defaults/periodic.conf* 中有配置选项。快速浏览这些文件，寻找对你有用的内容。启用的默认设置对于大多数情况来说是合理的，但你可以通过在 */etc/periodic.conf* 中简单的设置来启用额外的功能。例如，如果你使用基于 GEOM 的磁盘功能，你会发现每日的 GEOM 状态信息很有用。由于我列举的任何内容在我交付这份手稿之前就可能已经过时，更不用说在书籍送到你手里之前了，因此我不会详细介绍各个脚本。

### /etc/pf.conf, /etc/pf.os

我们在 第十九章 中介绍了 PF 包过滤器的基础知识。

PF 的一个较少为人知的特性是它能够通过发送的数据包识别操作系统。*/etc/pf.os*文件包含不同操作系统的 TCP 指纹，允许您编写防火墙规则，例如“显示 FreeBSD 用户我的真实主页，但向 Windows 用户建议他们获取一个真正的操作系统”。更多信息，请参阅 pf.os(5)。我建议您阅读此文件，即使只是为了强调所有这些网络堆栈的行为是如此不同。

### /etc/phones

模拟调制解调器用户可以在*/etc/phones*中存储远程调制解调器的电话号码，并为它们创建别名，以便他们只需输入`home`而不是完整的电话号码。然而，只有 tip(1)和 cu(1)使用此文件，因此它并不像您想象的那样有用。

### /etc/portsnap.conf

Portsnap 提供端口树的更新，如第十八章所述。

### /etc/ppp/

FreeBSD 支持使用 ppp(8)进行出站调制解调器。阅读手册页以获取更多信息。

### /etc/printcap

此文件包含打印机配置信息。在类 Unix 系统上打印可能非常复杂，尤其是您可以使用各种各样的打印机。然而，使您的 FreeBSD 机器发送打印作业到打印服务器并不难。我们在第二十章中涵盖了这个主题。

### /etc/profile

*/etc/profile*文件包含*/bin/sh* shell 的默认帐户配置信息，类似于 csh 和 tcsh 用户的*/etc/csh.**。每当*/bin/sh*用户登录时，他都会继承此文件中的内容。用户可以用自己的*.profile*覆盖*/etc/profile*。Bash 和其他 sh 衍生版本也使用此文件。

虽然 tcsh 是标准的 FreeBSD shell，但 sh 及其衍生物（尤其是 bash）非常流行。保持*/etc/profile*和*/etc/csh.login*中的设置同步，以便将来进行故障排除，或者更好地在登录类中设置必要的环境变量（见第九章），以便影响用户需要的任何 shell。

### /etc/protocols

在第七章中，我们讨论了网络协议。*/etc/protocols*文件列出了您可能遇到的各种网络协议。请记住，TCP 或 UDP 端口号与协议号不同。

### /etc/pwd.db

这是*/etc/passwd 文件*的数据库版本。它包含有关用户帐户的公共信息，如第九章所讨论。

### /etc/rc*

每当系统引导到可以执行用户命令的阶段时，它都会运行 shell 脚本*/etc/rc*。此脚本挂载所有文件系统，启动网络接口，配置 devfs(5)，查找和编录共享库，并执行设置系统所需的所有其他任务。我们在第四章讨论了 FreeBSD 启动系统。

不同系统的启动任务差异很大。带有三张 48 端口串行卡的终端服务器与网页服务器的工作方式完全不同。FreeBSD 并不像单一的 monolithic */etc/rc* 脚本那样处理所有任务，而是将每个启动过程拆分成一个独立的 shell 脚本来处理特定的需求。

此外，你还会在*/etc*目录下找到一些脚本，如*/etc/rc.firewall*和*/etc/rc.initdiskless*。这些脚本在当前启动系统出现之前的几年就已经被分开，仍然保留在它们的历史位置，因为移动它们并没有带来任何好处。

### /et/regdomain.xml

无线卡根据使用地区的不同，受到不同的监管规则限制。这些卡读取*regdomain.xml*来了解它们可以使用的频率以及允许的发射强度。编辑此文件时请自行承担风险。

### /etc/remote

本文件包含用于通过串行线连接远程系统的机器可读配置。如今，只有当你将系统用作串行客户端时，这个文件才有意义——例如，如果你想连接到串行控制台。我们在第四章中讨论了串行控制台。

### /etc/resolv.conf

本文件允许你设置名称服务器、域名搜索顺序和更多的 DNS 客户端设置。详情请见第八章。

### /etc/rpc

*远程过程调用 (RPC)* 是在远程计算机上执行命令的一种方法。类似于 TCP/IP，RPC 也有服务和端口号，而*/etc/rpc*包含这些服务及其端口号的列表。最常见的 RPC 消费者是 NFS，我们在第十三章中进行了讨论。

### /etc/security/

该目录包含审计(8)安全工具的配置信息。

### /etc/services

本文件包含网络服务及其相关的 TCP/IP 端口列表。我们在第七章中讨论了*/etc/services*。

### /etc/shells

本文件包含所有合法用户 shell 的列表，详见第九章。

### /etc/skel/

在*/etc/skel/*中，你会找到一些 shell 配置文件，这些文件会复制到新的用户账户中。

### /etc/snmpd.config

FreeBSD 包含了一个基础的 SNMP 实现，我们在第二十章中进行了讨论。

### /etc/spwd.db

本文件包含用户密码文件*/etc/master.passwd*的机密数据库。详见第九章中的所有细节。

### /etc/src.conf

本文件包含用于从源代码构建 FreeBSD 的机器指令。这是仅针对源代码树的 *make.conf*。不过，设置在*/etc/make.conf*中的值也会影响从源代码构建 FreeBSD；区别在于，*/etc/src.conf* 只影响 FreeBSD 的构建，而不会影响端口和包的构建。详情请见第十八章。

### /etc/ssh/

配置安全外壳软件套件（SSH）在*/etc/ssh*中。这包括客户端 ssh(1)和服务器端 sshd(8)。 第二十章介绍了 sshd(8)。

### /etc/ssl/

FreeBSD 包含了 OpenSSL 加密软件。第十九章讨论了一些基本的使用方法和配置。*/etc/ssl*目录包含了大部分 OpenSSL 信息。

### /etc/sysctl.conf

这个文件包含了在启动过程中设置的内核 sysctl 信息。请参见第六章。

### /etc/syslog.conf, /etc/syslog.conf.d/

这个文件控制哪些数据进入你的系统日志，并且这些日志存储的位置。请参见第二十一章。

### /etc/termcap, /etc/termcap.small

这个文件包含了不同终端类型的设置和功能。在终端有数十种不同类型，且厂商几乎每天都会发布新终端的时代，理解这个文件至关重要。然而，现如今世界大多数已经统一采用 vt100 作为标准，默认配置适合几乎所有人。

termcap 文件是指向*/usr/share/misc/termcap*的符号链接。在单用户模式下，这个文件可能不可用。FreeBSD 提供了*/etc/termcap.small*文件，以在单用户模式下提供终端信息。

### /etc/ttys

这个文件包含了所有系统终端设备（包含命令提示符的窗口）。这个名字源自于终端曾经是物理电传打字机的时代，但今天大多数用户使用的是通过 telnet 或 SSH 生成的虚拟终端。

我们将在第二十三章中使用此文件设置串行登录。

### /etc/unbound/

FreeBSD 随附 Unbound DNS 客户端。配置文件存放在*/etc/unbound/*。 第二十章讲解了如何将 Unbound 设置为本地 DNS 解析器。

### /etc/wall_cmos_clock

这不是一个重要的文件，但由于我花时间挖掘它的作用，你也可以了解一下它。如果这个文件存在，FreeBSD 的时间保持程序已经确定硬件的 CMOS 时钟所保持的时间不是协调世界时（UTC）。如果文件缺失，CMOS 时钟将被设置为其他时间。它在 adjkerntz(8)中有说明。

### /etc/zfs/

FreeBSD 的 ZFS 使用这个目录存储 NFS 集成信息。我们在第十三章中讨论 NFS。

如果你能深入了解整个*/etc*目录，你将比大多数系统管理员准备得更充分。现在让我们向你的服务器添加一些软件。
