## 第一章：—1—

搜索问题

门没有敲响便打开了——只有门轴的吱呀声宣告了访客的到来。弗兰克立刻朝他的弩箭走去，但又停了下来。如果是维内特家族来找他，那他们肯定会敲门——带着一把斧头。门外的人应该是想跟他说话。弗兰克于是伸手拿起他的杯子，一口气喝掉了那杯已经冷却的咖啡。

“多诺万队长，”他在男人走进时说道。“什么风把您吹到这个好地方来了？我以为您不再来十五街以下了。”

“好久不见了，”队长简单地说道。“你最近怎么样，弗兰克？”

“壮观，”弗兰克干巴巴地回答，目光跟着队长绕房间慢慢走一圈。

多诺万环顾了一下弗兰克破旧的办公室。他的红色军官披风在他身后轻轻飘动。“私人侦探的生意怎么样？”

“这能支付账单，”弗兰克撒谎道。

队长点了点头。他停顿了一下，然后走到书架前，浏览着书架上的书籍。

“那这算是社交拜访吗？”弗兰克说道。“我是不是该问问玛琳娜和孩子们怎么样了？”

![image](img/f0002-01.jpg)

“他们都很好，”多诺万没有回头说道。“玛琳娜的乌龟美容生意最近做得不错。比尔去年加入了警队。维罗妮卡是个会计师，这几乎是我们最不可能的职业——”

“我其实并没有问，”弗兰克打断道。

队长耸了耸肩。他从书架上拿了一本书，翻阅着书页。弗兰克伸长脖子看了看封面——*警察学院年鉴：第 21 届班级*。

“你到底想要什么，队长？”弗兰克质问道。

最终，队长与弗兰克对视了。 “我需要你的帮助，弗兰克，”他说道。

弗兰克挺直了身子。自从弗兰克离开警队的五年里，队长只来看过他两次，而且都是警告他远离正在处理的案件。威胁几乎是弗兰克预料到的全部，但现在看起来队长有了特别的麻烦——或许是那种能让弗兰克欠租不还的麻烦。

“我现在不在警队了，”弗兰克轻松地说道。“你怎么不让你信任的侦探来做呢？”

“我需要一个不在警队中的人，”队长说道。“别装了，弗兰克。如果你不知道我在这里意味着什么，那你就不是我需要的人。”

弗兰克轻笑了一声。“泄密？在*你们*的队伍里？”

“更糟。昨晚有人闯入了警局的档案室，偷走了超过 500 卷卷宗。”

“他们到底想要什么？”弗兰克问道。他没有多想，便身体前倾，伸手拿起一卷新的羊皮纸和一只羽毛笔。这一动作对他来说就像喝咖啡或避开楼梯一样自然而然。

“我不知道，”多诺万说道。“没有规律可循。他们偷走了整整一排的文件，从财产纠纷到支出报告，应有尽有。他们拿走了我们所有关于刺客、名人、私人侦探、公证人的账本……他们甚至拿走了农场主斯温森的噪音投诉文件箱。但其他的书架却完全没有被动过。我们至少统计出有 512 份文件丢失。”

“也许是农夫斯温森的邻居干的，”弗兰克开玩笑道。“他们肯定听说过，只要投诉一百次，实习生就会来你家给你上一次严厉的课。”

唐诺万队长没有回应。他只是带着怜悯的目光盯着弗兰克，直到弗兰克清了清嗓子打破了沉默。“所以你是要我找到这些文件？”

队长摇了摇头。“我希望你能找到那些小偷。我们有文件的备份。我想知道他们需要什么信息，以及他们打算用这些信息做什么。”

“一个搜索问题，”弗兰克沉思道。在警队时，他的两项专长就是搜索问题和惹队长生气。

“国王知道吗？”弗兰克问道。

“我昨天向他简报过了，”队长带着一丝恼怒说道。“自从那位疯狂巫师的麻烦之后，国王坚持要对所有事情每天都进行简报。”两年前，一位名叫 Exponentious 的自大巫师曾试图摧毁整个王国。自那时以来，弗雷德里克国王亲自实施了大规模的安全升级，包括超过 300 条新的安全法规，其中至少有 5 条涉及政府大楼中十层以下的官方文件存储。

“不过我也不能怪他，”唐诺万咕哝道。“差一点就完了。如果不是安娜公主，谁知道现在王国会是什么样子。”

弗兰克默默点了点头。Exponentious 攻击了王国算法的基础，通过诅咒那些研究算法的学者。几个月内，他让连最简单的操作也变得低效，王国开始陷入停滞。损坏的证据随处可见；甚至在他的本地面包店，弗兰克亲眼目睹了顾客们发现自己竟然不记得如何排队时的恐慌。

“国王当然对这件事非常关心，”队长继续不耐烦地说道。“他想要了解所有的细节：谁负责这个案件？我们使用了哪些搜索算法？我们是否已经搜查了所有邻近的建筑物？”

弗兰克压抑住笑意，思索着这个提议。为首都的警察提供咨询服务是一笔不错的收入。他低头看了看自己的鞋子，看到鞋尖从鞋底的一个洞口露了出来。“如果我要做咨询，”他说，“我就按我自己的方式做。”

这是关键时刻。五年前，他因*按自己的方式做事*而被开除出警队。队长是一个讲究规则和秩序的人。弗兰克最后一次使用启发式方法正是压垮骆驼的最后一根稻草——当天下午，唐诺万队长就从他身上拿走了警徽。不过，话说回来，按自己的方式做事总是能让弗兰克得到结果。

“我就知道你会这么想，”队长终于回应道。他从自己的风衣下拉出一个薄文件夹，放到弗兰克的桌子上。

“我会联系你的，”唐诺万说。然后，他没有任何仪式地转身离开了办公室。

_____________________

三个小时和十二杯咖啡后，弗兰克弯腰坐在桌前，翻阅着那本薄薄的信息文件夹，这是他第七次这么做。字词在忽明忽暗的烛光中跳动晃动，但并没有提供任何新的见解。

可供参考的资料不多。队长只给了他一份失踪文件清单和相关夜班的值班表，但除此之外没有更多的信息。

最后，弗兰克叹了口气，夸张地抓起一张羊皮纸开始做笔记。

任何搜索问题的第一步是确定你希望找到的目标——正如他在《警察算法 101》课上的老教授所说的，叫做*目标*。弗兰克很早就学到了这个教训；他在刚成为警察的第一周就被指派去寻找公爵的奖马，结果那天下午他就带着一只 42 磅重的角龟回到了警局。显然，这只令人印象深刻的爬行动物并不符合要求。如果你在寻找错误的东西，即使是再好的搜索算法也没有意义。

在这个案例中，问题不是*什么*，而是*谁*。队长在这一点上说得对。既然小偷已经拿到了文件，警察是否能找回来已经不再重要。小偷已经得到了他们需要的所有信息。

所以他的目标很简单：找出偷走文件的人。

任何搜索问题的第二步是确定*搜索空间*。你在搜寻什么？在弗兰克每天寻找钥匙的过程中，搜索空间是办公室里的每一块平面。而当弗兰克想要找到一个罪犯时，他的搜索空间就是首都周围的每一个人。

弗兰克坐回椅子，揉了揉眼睛。这是一个大搜索问题，在一个犯罪分子遍布的城市中寻找特定的罪犯。但他见过更糟糕的情况。

既然他已经定义了问题，就可以开始设计算法了。线性搜索不适用；他无法承担在整个城市里询问每个人的成本。他也可以排除许多他在学院里学过的更复杂的算法。对于这样的问题，他必须回到自己基本的搜索算法工具包——私家侦探最信赖的朋友。

弗兰克在羊皮纸上做了个记号。他已经确定了目标，知道了搜索空间，也有了算法。现在是时候开始工作了。

**警察算法 101：搜索问题**

***出自德雷克教授的讲座摘录***

在本课程中，我们将讨论几种解决搜索问题的不同算法（以及相关的数据结构）。*搜索问题*被定义为需要在一组可能值（搜索空间）中找到一个特定值（或目标）的任何问题。

那些毕业后成为警察的同学们，每天都会面临属于这一类别的问题。搜索问题的广泛定义涵盖了许多不同的计算问题，从在警察日志中查找特定记录，到在藏匿处寻找房间，再到找到所有符合某些标准的逮捕记录。本课程不会详尽无遗——那将需要数年时间——但我会给你们一些基本而重要的算法示例。

本课程中描述的算法将具有三个共同的组成部分：

**目标** 你正在搜索的数据项。目标可以是一个特定的值，或者是表示搜索成功完成的标准。

**搜索空间** 用于测试目标的所有可能性的集合。例如，搜索空间可以是一个值的列表，或者图中的所有节点。搜索空间中的一个单一可能性称为*状态*。

**搜索算法** 一组用于执行搜索的具体步骤或指令。

一些搜索问题可能会有额外的要求或复杂性，我们将在介绍不同算法时涉及这些内容。
