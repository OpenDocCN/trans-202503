## 前言

![Image](img/common.jpg)

本书带你进入道德黑客的广阔世界，或者说，负责任地发现安全漏洞并将其报告给应用程序所有者的过程。当我开始学习黑客技术时，我不仅想知道黑客发现了*什么*漏洞，还想知道他们是*如何*发现这些漏洞的。

我曾搜索过相关信息，但总是留下同样的问题：

+   黑客在应用程序中发现了哪些漏洞？

+   黑客是如何了解在应用程序中发现的那些漏洞的？

+   黑客是如何开始渗透一个网站的？

+   黑客攻击是什么样子的？是全自动的吗，还是手动进行的？

+   我该如何开始黑客攻击并发现漏洞？

我最终选择了 HackerOne，这是一个旨在将道德黑客与寻找黑客来测试其应用程序的公司联系起来的漏洞奖励平台。HackerOne 包含了让黑客和公司披露已发现并修复的漏洞的功能。

在阅读那些已披露的 HackerOne 报告时，我常常难以理解人们发现了哪些漏洞以及这些漏洞如何被利用。我经常不得不反复阅读同一份报告两到三次才能理解。我意识到，我和其他初学者都可以从用简单语言解释真实世界漏洞中获益。

*真实世界的漏洞猎杀*是一本权威参考书，它将帮助你理解不同类型的 Web 漏洞。你将学习如何发现漏洞、如何报告漏洞、如何通过这样做赚取报酬，偶尔还会学习如何编写防御代码。但这本书不仅仅讲述成功的案例：它还包括错误和教训，其中许多是我自己的。

当你读完这篇文章时，你将迈出向网络世界变得更安全的第一步，而且你应该能够通过这样做赚到一些钱。

### 谁应该读这本书

这本书是为初学者黑客编写的。不管你是 Web 开发者、Web 设计师、全职妈妈、10 岁的孩子，还是 75 岁的退休人员，这本书都适合你。

也就是说，虽然编程经验不是黑客的前提条件，但一些编程经验和对 Web 技术的熟悉是有帮助的。例如，你不必是一个 Web 开发人员就能成为黑客，但了解网页的基本超文本标记语言（HTML）结构、层叠样式表（CSS）如何定义其外观以及 JavaScript 如何动态与网站交互将有助于你发现漏洞并识别你发现的漏洞所带来的影响。

在寻找涉及应用程序逻辑的漏洞并头脑风暴开发人员可能会犯的错误时，知道如何编程是很有帮助的。如果你能站在程序员的角度，猜测他们是如何实现某个功能的，或者阅读他们的代码（如果有的话），你成功的机会会更高。

如果你想学习编程，No Starch Press 出版了很多有用的书籍。你还可以查看 Udacity 和 Coursera 上的免费课程。附录 B 列出了更多资源。

### 如何阅读本书

每一章描述漏洞类型的结构如下：

1.  漏洞类型的描述

1.  漏洞类型的示例

1.  提供结论的总结

每个漏洞示例包括以下内容：

+   我对发现和验证该漏洞难度的估计

+   漏洞发现位置的 URL

+   原始披露报告或写作的链接

+   漏洞报告的日期

+   报告者因提交信息而获得的报酬

+   漏洞的清晰描述

+   可以应用于你自己黑客攻击的要点

你不需要从头到尾阅读本书。如果有某个特定的章节你感兴趣，先读它。在某些情况下，我会引用之前章节中讨论的概念，但在引用时，我会尽量注明我定义了该术语的地方，方便你查阅相关章节。在你进行黑客攻防时，可以随时翻阅本书。

### 本书内容

以下是每章的概述：

**第一章：漏洞奖励基础** 解释了什么是漏洞和漏洞奖励，以及客户端与服务器之间的区别。它还讲解了互联网的工作原理，包括 HTTP 请求、响应和方法，并解释了 HTTP 为何是无状态的。

**第二章：开放重定向** 讲解了利用特定域名的信任，将用户重定向到其他网站的攻击方法。

**第三章：HTTP 参数污染** 讲解了攻击者如何操纵 HTTP 请求，注入额外的参数，这些参数是易受攻击的目标网站所信任的，并且会导致意外的行为。

**第四章：跨站请求伪造** 介绍了攻击者如何利用恶意网站让目标浏览器向另一个网站发送 HTTP 请求，另一个网站随后会将该请求当作合法的请求，仿佛是目标有意发送的。

**第五章：HTML 注入与内容欺骗** 解释了恶意用户如何将他们自己设计的 HTML 元素注入到目标站点的网页中。

**第六章：回车换行注入** 展示了攻击者如何将编码字符注入 HTTP 消息中，以改变服务器、代理和浏览器的解释方式。

**第七章：跨站脚本攻击** 解释了攻击者如何利用一个没有清理用户输入的站点，在站点上执行他们自己的 JavaScript 代码。

**第八章：模板注入** 解释了当站点没有清理它在模板中使用的用户输入时，攻击者如何利用模板引擎进行攻击。本章包括客户端和服务器端的示例。

**第九章：SQL 注入** 描述了当一个数据库支持的网站存在漏洞时，攻击者可能会意外查询或攻击网站的数据库。

**第十章：服务器端请求伪造** 解释了攻击者如何使服务器执行非预期的网络请求。

**第十一章：XML 外部实体** 说明了攻击者如何利用应用程序解析 XML 输入的方式，以及如何处理外部实体的包含。

**第十二章：远程代码执行** 讨论了攻击者如何利用服务器或应用程序执行他们自己的代码。

**第十三章：内存漏洞** 解释了攻击者如何利用应用程序的内存管理导致意外行为，包括可能执行攻击者自注入的命令。

**第十四章：子域名接管** 介绍了当攻击者能够代表合法域名控制子域名时，子域名接管是如何发生的。

**第十五章：竞争条件** 揭示了攻击者如何利用站点处理过程中的竞争条件，这些过程基于一个初始条件进行竞争，而该条件在执行过程中变得无效。

**第十六章：不安全的直接对象引用** 讨论了当攻击者能够访问或修改不应该有访问权限的对象引用时所发生的漏洞，例如文件、数据库记录或账户。

**第十七章：OAuth 漏洞** 讲解了简化并标准化 Web、移动和桌面应用程序中安全授权的协议实现中的漏洞。

**第十八章：应用逻辑与配置漏洞** 解释了攻击者如何利用代码逻辑或应用程序配置错误，使站点执行某些非预期的操作，从而导致漏洞。

**第十九章：寻找你的漏洞赏金** 根据我的经验和方法论，提供了关于在哪里以及如何寻找漏洞的技巧。本章不是关于黑客攻击网站的逐步指南。

**第二十章：漏洞报告** 讨论了如何编写可信且具有信息量的漏洞报告，以免程序拒绝你的漏洞。

**附录 A：工具** 介绍了设计用于黑客攻击的流行工具，包括代理 Web 流量、子域名枚举、截图等。

**附录 B：资源** 列出了进一步扩展你黑客知识的额外资源，包括在线培训、流行的漏洞赏金平台、推荐的博客等。

### 关于黑客攻击的免责声明

当你阅读关于公开漏洞披露的报道，并看到一些黑客赚取的大笔钱时，可能会觉得黑客是一条轻松快速致富的道路。其实不是。黑客工作可以带来回报，但你很少听到途中发生的失败故事（除了在这本书里，我会分享一些非常尴尬的经历）。因为你大多听到的是人们的黑客成功故事，你可能会对自己的黑客之路抱有不切实际的期望。

你可能会很快找到成功。但如果你在寻找漏洞时遇到困难，继续挖掘吧。开发者总是会编写新的代码，漏洞也总会进入生产环境。你尝试得越多，过程就应该变得越容易。

说到这个，随时可以通过 Twitter @yaworsk 给我发消息，告诉我进展如何。即使你没有成功，我也很想听听你的反馈。如果你在找漏洞时遇到困难，可能会感到孤独。但一起庆祝成功也是很棒的，或许你会发现一些我可以加入到下一版书中的内容。

祝你好运，玩得开心。
