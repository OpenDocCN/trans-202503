## 第七章：铁路道口灯

该电路以交替的模式闪烁两个 LED。

![image](img/f0042-01.jpg)

### 电路图

![image](img/f0043-01.jpg)

### 元件清单

| **元件** | **值** | **描述** |
| --- | --- | --- |
| R1, R4 | 470 Ω | 标准电阻 |
| R2, R3 | 47 kΩ | 标准电阻 |
| Q1, Q2 | BC547 | 任何常用的 NPN 晶体管 |
| C1, C2 | 10 μF | 极性电容器 |
| L1, L2 |  | 标准输出发光二极管 |

### 关于电路

该电路使两个 LED 交替闪烁。你可以将其用作铁路道口灯，例如，或者作为玩具机器人眼睛的灯光。

这是一个经典的电路，称为 *自激多谐振荡器*。在 项目 5 中，你使用一个反相器使 LED 闪烁，反相器不断地开关自如。自激多谐振荡器则使用两个晶体管交替地相互控制开关。为了真正理解这个电路的工作原理，你需要对电子学的基础有坚实的理解，尤其是电压在电容器电路中的表现。

### 常见错误

这个电路有很多连接点，所以很容易忽略某些部分。即使我已经做过很多次，搭建这个电路时我也常常出错。如果你的电路无法正常工作，请检查以下内容：

+   在需要 47 kΩ电阻的地方使用 470 Ω电阻，反之亦然

+   错误连接 LED

+   混淆晶体管引脚

+   意外接触引脚，尤其是在晶体管周围

+   错误连接电容器

如果你想更改闪烁速度，试着更换两个电容器（C1 和 C2）以及电阻器（R2 和 R3）的值。

如果你仍然在为这个电路而苦恼，你可以通过书籍网站获取更多资源，网址是 *[`nostarch.com/circuits/`](https://nostarch.com/circuits/)*。

### 电路工作原理

对电子学基础的理解，特别是电压在电容器电路中的表现，将帮助你理解这个电路的工作原理。在这个电路中，如 图 6-1 所示，当左侧晶体管（Q1）导通时，左侧的 LED 亮起；当右侧晶体管（Q2）导通时，右侧的 LED 亮起。晶体管 Q1 由 R3 和 C2 之间的电压控制，而晶体管 Q2 由 R2 和 C1 之间的电压控制。

![image](img/f0044-01.jpg)

**图 6-1** 左侧节点的电压控制右侧晶体管（Q2），反之亦然。

接下来，你需要详细检查两个电容器之间的电压。如果你不熟悉电路中的电压和电流行为，我建议你在继续之前阅读这篇文章： *[`www.build-electronic-circuits.com/kirchhoffs-law/`](https://www.build-electronic-circuits.com/kirchhoffs-law/)*。

在深入解释之前，这里有两件事需要记住：

+   电压总是测量两个点之间的差值。当我们谈论某一点的电压时，我们指的是从该点到电池负极端子的电压——这就是为什么负极是 0 V 的原因。

+   本书中，我们将晶体管作为开关使用。它需要在中间引脚（基极）上有 0.7 V 才能开启。当晶体管开启时，它的顶部引脚（集电极）与底部引脚（发射极）连接，这样电流就可以流过它。这也意味着当晶体管开启时，顶部引脚和底部引脚的电压是相同的。当晶体管关闭时，顶部引脚和底部引脚之间没有连接，因此没有电流流动。

让我们从查看 LED L1 亮起而另一个 LED 熄灭的电路开始。L1 只有在晶体管 Q1 打开时才会亮起。记住，Q1 只有在基极电压达到 0.7 V 时才会打开。由于电容器 C2 的负极（–）连接到 Q1 的基极，因此这也必须是 0.7 V。

C2 的正极通过 R4 和 L2 连接到 9 V，它几乎瞬间充电到约 8 V（一些电压被 LED L2 消耗）。你可能会想，“嘿，如果电流通过 R4 和 L2，为什么 L2 不亮？”原因是，一旦电容器右侧的电压升高到 8 V，电流就不再通过 LED，因此它不会亮起。

图 6-2 显示了我们到目前为止找到的电压。

![image](img/f0046-01.jpg)

**图 6-2** 当左侧的 LED 亮起时，C2 的正极电压很快达到大约 8 V。

现在让我们来看一下另一个晶体管 Q2 的电压。

由于晶体管处于关闭状态，它的基极电压必须低于 0.7 V。C1 的负极连接到基极，这意味着它的电压也低于 0.7 V。但 C1 的负极还通过电阻 R2 连接到 9 V，这意味着它正在被充电，电压正从低于 0.7 V 的状态慢慢增加，如图 6-3 所示。

![image](img/f0046-02.jpg)

**图 6-3** C1 右侧的电压低于 0.7 V，但正在上升，当左侧的 LED 亮起时。

因此，C1 的负极电压在上升，当它达到 0.7 V 时，动作开始。当 C1 的负极电压达到 0.7 V 时，晶体管 Q2 的基极电压也为 0.7 V 并开启，这意味着右侧的 LED 也会亮起。

当 Q2 导通时，电容 C2 上的电压发生了一些有趣的变化：从图 6-2 中我们知道，C2 的负极上有 0.7 V，正极上有 8 V。换句话说，负极比正极低 7.3 V。但现在 Q2 导通，C2 的正极电压突然通过晶体管被拉到 0 V。尽管如此，电容器的内部电荷并不会立刻改变，所以 C2 上的电压差最初保持不变，负极比正极低 7.3 V。但由于正极现在是 0 V，负极变成了比 0 V 低 7.3 V，也就是 –7.3 V！当 C2 的负极为 –7.3 V 时，晶体管 Q1 的基极也会得到 –7.3 V，这使得 Q1 关闭（参见图 6-4）。

![image](img/f0047-01.jpg)

**图 6-4** 当晶体管 Q2 导通时，左侧的晶体管和 LED 关闭。

所以现在，左侧的 LED 和晶体管已经关闭，右侧的 LED 和晶体管已经导通，如图 6-4 所示。C2 的负极起始电压为 –7.3 V，并通过电阻 R3 正在充电，因此电压在上升。由于这个电压连接到晶体管 Q1 的基极，当电压达到 0.7 V 时，Q1 会再次导通，周期继续重复。两个晶体管不断交替导通与关闭，导致两个 LED 也在交替亮灭。
