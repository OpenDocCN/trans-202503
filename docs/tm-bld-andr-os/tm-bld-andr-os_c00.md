# 介绍

![g00002](img/g00002.png)

2010 年 5 月中旬，我走进了 Google 园区的 44 号楼，开始了在 Android 团队的第一天工作。离我办公桌不远的地方，至少有六台机器在制作各种各样的美味且浓烈的咖啡。我对这种对咖啡因的关注感到惊讶，但这并没有持续太久。

团队正在完成一个版本的发布^(1)，同时并行开始下一个版本的工作^(2)。这两者都非常困难、耗时且至关重要，因为我们试图让 Android 在当时拥挤的智能手机市场中占有一席之地。那时总有一种疯狂奔向目标的感觉，我们尽全力去实现它，却不知道能否达成。节奏是如此迅猛，但工作又是令人振奋的——这不仅仅是因为咖啡因。兴奋来自于加入一个团队，每个人都全心全意投入到一个明确的目标中，无论这需要付出多大的努力。

在 Android 上的工作与我职业生涯的起点截然不同。

我从明尼苏达州一家保守的老公司开始了我的职业生涯，那时的工作时间是朝九晚五。公司依赖于员工在这里待上一辈子，甚至更久，每年感恩节会给退休员工送一只免费火鸡。我已经准备好了；只需要每周工作四十个小时，慢慢晋升，直到我准备好退休和领取我的火鸡。

一年内，我就感到极度无聊，二年后我便离开了，去读研究生，重新锻炼自己的技能，转向我真正喜欢的领域：计算机图形编程。研究生毕业后，我来到了硅谷，那个充满技术机会的地方^(3)。我加入了 Sun Microsystems，并在接下来的几年中蓬勃发展...直到另一个有趣的工作吸引了我。

接下来的几年，我不断地从一家公司跳槽到另一家公司，随着不同的工作、技术和人员的变化，我的技术生活也在不断发生变化。我曾在 Sun 工作（几次不同的职位），Anyware Fast（由几位朋友创办的承包公司），DimensionX（一个早期的网络初创公司，被微软收购），Intel，Rendition（一个 3D 芯片初创公司，被美光收购），以及 Adobe 工作过。

我的父亲在美国海军服役 21 年后退休，他一直不习惯我频繁更换工作。他问：“那养老金怎么办？那工作保障呢？那家庭的稳定性呢？”

他没有看到的是，这就是硅谷的常态，也是现在高科技行业越来越普遍的现象。每一份工作我都在积累新的技能，这些技能为未来的职业前景和产品奠定了基础。正是这种态度和现实，适用于所有在科技公司之间流动的工程师；我们在构建自己未来将继续用来解决各种产品问题的技能。正是这些多样化的背景，为新项目提供了急需的技能，帮助解决未知的问题并提供创新的解决方案。

2010 年，另一个机会出现了。罗曼·盖伊（Romain Guy），一个我曾在 2005 年他作为实习生时一起工作过（并且共同编写过一本书^(4)) 的朋友，遇到了一个问题。他于 2007 年加入了 Android 团队，但因为太忙，没能编写他知道必需的动画系统。但他认识我，并且知道这是我喜欢的项目。经过几次面试和五个月的等待，我加入了 Android 的 UI 工具包团队，来到了位于山景城 Google 校园的 44 楼，并开始比以往任何时候都更加努力地工作。

我从创建新的动画系统开始，接着在我们艰苦完成即将发布的版本时，参与了低级性能和图形软件的工作。我继续在同一个团队工作了多年，编写图形、性能和用户界面代码，最终领导了该团队好几年。

在加入 Android 之前，我的大部分项目都非常有趣……但并不太显眼。如果我的家人问我做什么，我会告诉他们我编写了哪些软件。然后，我会用一种模糊的方式描述可能会使用我的软件的应用程序类型，因为现实是，他们永远看不到我代码的结果。这些软件并不是普通消费者在现实生活中会遇到的东西。

后来我加入了 Android 团队，并开始编写世界各地用户每天都会使用的软件^(5)。或者至少，如果 Android 能够生存下去的话，他们会使用。

## 挑战

> 我们并不知道它会完全失败还是会成功。当它成功时，我认为人们既惊讶又兴奋。
> 
> —埃文·米拉尔

Android 初期的团队成员拥有丰富的经验，并且有着非常强烈的意见。他们对自己正在构建的东西充满信心，但在达到初始的 1.0 版本时，他们面临着艰难的挑战。

团队的目标是创建 Android 操作系统（OS）。这包括从低级内核和硬件驱动程序到整体平台软件的一切内容。它还涉及为应用程序创建 API、帮助构建应用程序的工具、与平台捆绑的一些应用程序，以及后台服务，以便这些应用程序能够进行通信。哦，他们还希望能将这些都和一款新手机一起发布。

该软件将免费提供给制造商，用于构建他们自己的手机。这些合作伙伴将负责硬件的开发，而 Android 将提供软件支持。操作系统将帮助手机制造商，使他们可以专注于硬件产品，将日益复杂的软件问题交给 Android 处理。同时，Android 还通过创建一个统一的平台来帮助应用开发者，覆盖各种手机设备。开发者可以为所有这些设备编写一个版本的应用，而不需要为不同的设备编写不同版本。

Android 团队得到了 Google 的财力支持，能够访问到一批在大规模编写软件方面经验丰富的内部工程师，面对着快速增长的智能手机市场，以及一个致力于将产品做好的团队。怎么可能失败呢？回头看，Android 的成功似乎是理所当然的。

但在早期，团队所处的现实与现在大相径庭，Android 的生存状态也更加岌岌可危。

一方面，团队可能得到了 Google 的经济支持，但 Android 仅仅是 Google 投资的众多项目之一。Google 对 Android 的赌注并不是 Google 全力支持它，而是公司资助一个团队去探索它的潜力。^(6)

此外，Android 进入的是一个有着许多老牌竞争者且没有明显市场空白的新行业。在市场的低端，全球有众多诺基亚手机在销售。Danger、BlackBerry 和 Palm 都为他们忠实且热情的用户提供了有趣的智能手机^(7)选项。还有各种微软手机可供选择。而且任何在软件行业工作过的人都知道，你总是应该对与微软竞争保持警惕。^(8)

然后，2007 年苹果进入了市场，带来了另一个已经拥挤的竞争领域中的新对手。虽然苹果在手机领域是新手，但它们已经在操作系统、消费类计算设备以及热门的 iPod 上有了证明的成功记录。

在 Android 发布新闻稿，甚至是发布产品之前，所有这些参与者都已经在行业内建立了稳固的地位。

为了在这个竞争激烈的市场中尝试竞争，早期团队专注于以单一的目标推进 1.0 版本。每个人都专注于这个目标，大多数人在疯狂的紧迫期里不间断地工作。

但知道他们想要构建这个操作系统并不意味着每个人都同意*如何*构建它，或者它一定会成功，甚至不知道他们究竟在构建什么。团队中的工程师 Andy McFadden 说道：“我们有很多人对做事的对与错有强烈的看法。有时候他们意见不合，争论有时也会变得非常激烈。”

即使 Android 达到了 1.0 版本，第一个 Android 手机发货时，团队中的人们也没有明显感到这个项目会成功，甚至会继续进行下去。团队中的技术项目经理（TPM）Ryan Gibson 说道：“在那些早期的岁月里，Android 的氛围就像是一个不被看好的弱者，时刻面临失败的边缘，必须拼命努力才能取得一点进展。成功远不是必然的。我们落后了一年。如果我们再拖入下一年，可能就成了历史的脚注，而不是一个可行的替代方案。”

自从我加入团队以来，这些年里，我听到过 Android 早期开发的故事和困难，因为每个人都在努力将平台推进到能够竞争的位置。然后，在我在团队的期间，我看到了 Android 取得了一些成功，这就引出了一个问题：如何做到的？也就是说，Android 发展的哪些因素促成了它从那些初期不稳定的岁月到如今的惊人增长？

写这本书的想法源于我意识到，随着那些开发 Android 的人转向其他项目并忘记发生过什么，Android 的发展故事最终会被遗失。2017 年，我开始记录早期团队成员的对话，以捕捉这段故事。

## 实现细节^(10)

这本书很长（比我开始写作时预期的要长得多，尽管比我的第一稿要*短得多*，你们可以感谢我）。这里有几个阅读的小贴士，可以帮助你更清楚地理解这个庞大话题的组织结构。

首先，关于“Android”这个词的一点说明。让我编辑疯掉的事情之一，就是我经常使用“Android”这个词，意味着从创业公司，到它被谷歌收购后的团队，再到正在构建的软件平台，再到手机产品，再到开源代码，甚至是某个人的昵称。

这里的根本问题是…这正是 Android 团队使用这个词的方式：它可以指公司，可以指谷歌内部的一个部门，可以指软件，可以指手机，可以指生态系统，也可以指团队。

有一集*瑞克与莫蒂*^(11)，不同星球的居民用“squanch”这个词以各种看似不相关的方式表达。最终，瑞克解释道：“Squanch 文化更…更依赖于上下文，而非字面意义。你只需说出你 squanch 中的内容，人们就能明白。”

Android 就是这样。你只需说出你 Android 中的内容，人们就能明白。

其次，故事是按时间顺序讲述的…大致如此。也就是说，我按照时间的流动顺序描述发生的事情以及做这些事情的人，因为时间是组织复杂互相关联事物的有力工具。然而，由于许多事情是并行发生的，所以实际上不可能严格按时间顺序讲述这个故事。所以，你会注意到，故事可能会跟随某人在 1.0 版本或之后的工作进展，然后时间线可能会倒回，讲述团队中另一个人的故事。

说到时间，这本书的故事从 Android 的成立开始，一直到 2009 年底。大部分内容发生在 1.0 版本发布之前的时期^(12)，即 2008 年底。到 1.0 版本时，支撑 Android 未来发展的大多数基础都已经搭建完成。时间线再延伸到 2009 年底，那时在美国发布的摩托罗拉 Droid 手机让人们首次看到了 Android 未来成功的曙光。

最后，我希望这本书能被所有人阅读，而不仅仅是那些了解（并且，坦率地说，可能真的关心）技术细节的软件和硬件工程师。我尽力避免过于技术化的内容，以免在过程中丢失读者。但要描述一个操作系统是如何构建的，就必须使用像“操作系统”这样的术语，而这些术语对于那些没有写代码为生的人来说，可能会感到陌生。我会尽量在讲解时定义这些术语^(13)，但是如果你在某个段落卡住了，不知道*API*是什么意思，或者我所说的*CL*指的是什么，可以查看附录中的“术语”部分。

## 就这样开始了

在 2017 年 8 月^(14)，我开始与那支早期团队进行对话，首先是与 Dianne Hackborn 和 Romain Guy 的一次录音午餐聊天^(15)。从那时起，我继续采访（大多数是面对面，有时也通过电子邮件）早期团队中的大部分成员，整个过程持续了几年。

对于面对面的访谈（无论是现场还是通过视频聊天），我带了一个录音麦克风^(16)，很快就意识到手写笔记是远远不够的。一方面，像 Dan Sandler 和 Dianne Hackborn 这样的人讲话速度比我思考的速度还快，更别提写字了。而且，录音还让我能够更多地参与讨论，而不是只顾着疯狂地做笔记。

我花了很多时间进行这些对话。然后，因为书面文字比音频录音更容易查阅和搜索，我花了更多的时间将对话转录成文字文件^(17)。在这个过程中，我花了很多高质量的时间去聆听、转录和阅读这些对话，我意识到一件美妙的事情：这些对话不仅仅是书籍的研究资料；它们*就是*这本书。我原本打算将访谈作为背景材料，帮助我理解大局、时间线和一些我原本无法发现的细节。但我没有预料到的是，每个人都将如何用他们自己的话讲述这个故事。

在这本书中，我引用了很多来自这些访谈的内容。事实上，我尽量用引用而不是自己的描述，因为从那些亲身经历的人视角讲述故事，能最真实地反映他们各自的声音和对事件的独特看法。

请跟随我一起踏上这段探索安卓核心的旅程，了解团队和操作系统是如何诞生的，通过那些促成这一切的人们的声音。
