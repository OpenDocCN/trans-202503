- en: '**14**'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**14**'
- en: '**BASIC DATA VISUALIZATION**'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**基础数据可视化**'
- en: '![image](../images/common-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/common-01.jpg)'
- en: Data visualization is an important part of a statistical analysis. The visualization
    tools appropriate for a given data set are dependent upon the types of variables
    (as per the definitions in [Sections 13.1.1](ch13.xhtml#ch13lev2sec112) and [13.1.2](ch13.xhtml#ch13lev2sec113))
    for which you’ve made observations. In this chapter, you’ll look at the most commonly
    used data plots in statistical analyses and see examples using both base R graphics
    and `ggplot2` functionality.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 数据可视化是统计分析中的一个重要部分。适合给定数据集的可视化工具取决于你所观察的变量类型（根据[第13.1.1节](ch13.xhtml#ch13lev2sec112)和[13.1.2节](ch13.xhtml#ch13lev2sec113)的定义）。在本章中，你将了解在统计分析中最常用的数据图，并通过基础R图形和`ggplot2`功能的示例来展示。
- en: '**14.1 Barplots and Pie Charts**'
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**14.1 条形图和饼图**'
- en: Barplots and pie charts are commonly used to visualize qualitative data by category
    frequency. In this section you’ll learn how to generate both using R.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图和饼图常用于通过类别频率可视化定性数据。在这一节中，你将学习如何使用R生成这两种图表。
- en: '***14.1.1 Building a Barplot***'
  id: totrans-6
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***14.1.1 构建条形图***'
- en: A *barplot* draws either vertical or horizontal bars, typically separated by
    white space, to visualize frequencies according to the relevant categories. Though
    the raw frequencies themselves are usually displayed, a barplot can also be used
    to visualize other quantities, such as means or proportions, which directly depend
    upon these frequencies.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '*条形图*绘制的是垂直或水平条形，通常通过空白区域分开，用于根据相关类别可视化频率。尽管原始频率通常会显示出来，条形图也可以用来可视化其他量，例如均值或比例，这些量直接依赖于这些频率。'
- en: As an example, let’s use the `mtcars` data set from [Exercise 13.4](ch13.xhtml#ch13exc4)
    (b) on [page 287](ch13.xhtml#page_287). Detailing various characteristics of 32
    classic performance cars in the mid-1970s, the first five records can be viewed
    directly from the prompt.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个示例，让我们使用来自[练习13.4](ch13.xhtml#ch13exc4)（b）的`mtcars`数据集（位于[第287页](ch13.xhtml#page_287)）。该数据集详细描述了1970年代中期32款经典性能车的各种特征，可以直接从命令行查看前五条记录。
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The documentation in `?mtcars` explains the variables that have been recorded.
    Of these, `cyl` provides the number of cylinders in each engine—four, six, or
    eight. To find out how many cars were observed with each number of cylinders,
    you can use `table`, as shown here:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '`?mtcars`中的文档解释了已记录的变量。其中，`cyl`提供了每个发动机的气缸数——四缸、六缸或八缸。要找出观察到的每种气缸数量的汽车数量，可以使用`table`，如下面所示：'
- en: '[PRE1]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The result is easily displayed as a barplot, as shown here:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 结果可以轻松地显示为条形图，如下所示：
- en: '[PRE2]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You can find the resulting barplot on the left of [Figure 14-1](ch14.xhtml#ch14fig1).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图14-1](ch14.xhtml#ch14fig1)的左侧找到生成的条形图。
- en: '![image](../images/f14-01.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-01.jpg)'
- en: '*Figure 14-1: Two examples of barplots of data from* `mtcars` *using base R
    graphics. Left: The simplest, default version, using one categorical variable.
    Right: A “dodged” barplot illustrating various visual options and using two categorical
    variables.*'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-1：使用基础R图形从`mtcars`数据绘制的两个条形图示例。左侧：最简单的默认版本，使用一个分类变量。右侧：一个“并排”的条形图，展示了各种可视化选项，并使用了两个分类变量。*'
- en: 'This plot displays the number of four-, six-, and eight-cylinder cars in the
    data set but is admittedly rather uninteresting, and without annotations it’s
    not clear what’s being summarized. Fortunately, it’s easy to annotate such plots
    and further split up the frequencies of each bar according to an additional categorical
    variable. Consider the following code where, this time, you’re finding the counts
    associated with `cyl` by transmission (`am`):'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 该图展示了数据集中四缸、六缸和八缸车的数量，但老实说，这个图表相当无趣，而且没有注释，无法清晰说明总结了什么内容。幸运的是，给这种图表添加注释是很容易的，而且还可以根据一个额外的分类变量进一步分割每个条形的频率。请看以下代码，这次你将根据变速器类型（`am`）来找出与`cyl`相关的计数：
- en: '[PRE3]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: If you aim to produce a barplot that’s *stacked* (where bars are split up vertically)
    or *dodged* (where bars are broken up and placed beside each other), `barplot`
    requests its first argument as a suitably arranged matrix. You could construct
    it from the previous two vectors using `matrix`, but it’s easier to just continue
    using `table`.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想生成一个*堆叠的*条形图（即条形垂直分割）或*并排的*条形图（即条形被分开并并排显示），`barplot`的第一个参数需要传入一个合适排列的矩阵。你可以使用`matrix`从之前的两个向量构建它，但继续使用`table`会更简单。
- en: '[PRE4]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'As you can see, you can cross-tabulate counts by supplying two categorical
    or discrete vectors of equal length to `table`; the first vector stipulates row
    counts, and the second defines the columns. The outcome is a matrix object; here
    it’s a 2 × 3 structure providing the quantities of the four-, six-, and eight-cylinder
    automatic cars in the first row and the quantities of the manual cars in the second.
    The rule is that each column of the barplot will correspond to a column of the
    supplied matrix; these will be further split with respect to each row of the supplied
    matrix. The plot on the right of [Figure 14-1](ch14.xhtml#ch14fig1) is the result
    of the following code:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，通过向`table`传递两个相等长度的分类或离散向量，你可以进行交叉表格计数；第一个向量规定行计数，第二个定义列。结果是一个矩阵对象；在这里它是一个
    2 × 3 结构，提供了第一行四缸、六缸和八缸自动挡车的数量，第二行则是手动挡车的数量。规则是，条形图的每一列将对应于提供的矩阵的每一列；这些列会根据提供的矩阵的每一行进一步拆分。[图
    14-1](ch14.xhtml#ch14fig1)右侧的图表就是以下代码的结果：
- en: '[PRE5]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The help file `?barplot` explains the options here in detail. To label the bars
    according to the categories of the column variable of the matrix that was initially
    passed to `barplot`, you use a character vector of the appropriate length passed
    to `names.arg`. The options `beside=TRUE` and `horiz=TRUE` select a dodged, horizontal
    barplot. If both options were `FALSE`, a stacked, vertical barplot would be selected.
    The argument `las=1` forces the labels on the vertical axis to appear horizontally,
    rather than parallel to it. The final two arguments, `legend.text` and `args.legend`,
    are used for the legend—you could have drawn a legend separately as in [Section
    7.3](ch07.xhtml#ch07lev1sec25) via `legend`, but this way automates the color
    assignment to ensure the reference keys match the precise shading of the bars
    themselves.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 帮助文件`?barplot`详细解释了这里的选项。要根据最初传递给`barplot`的矩阵的列变量类别为条形图添加标签，可以使用适当长度的字符向量传递给`names.arg`。选项`beside=TRUE`和`horiz=TRUE`选择一个错开的水平条形图。如果这两个选项都为`FALSE`，则会选择一个堆叠的垂直条形图。参数`las=1`强制垂直轴上的标签水平显示，而不是与其平行。最后两个参数`legend.text`和`args.legend`用于图例——你本可以像在[第
    7.3 节](ch07.xhtml#ch07lev1sec25)中一样通过`legend`单独绘制图例，但这种方式会自动分配颜色，以确保参考键与条形本身的精确阴影匹配。
- en: 'Similar plots may be produced using `ggplot2`. If you load the installed package
    with `library("ggplot2")` and enter the following, it will produce the most basic
    barplot, given on the left of [Figure 14-2](ch14.xhtml#ch14fig2):'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用`ggplot2`生成类似的图表。如果加载已安装的包并输入以下内容，将生成最基础的条形图，如[图 14-2](ch14.xhtml#ch14fig2)左侧所示：
- en: '[PRE6]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Note here that the relevant geom is `"bar"` (or `geom_bar` if used separately,
    as you’ll see in a moment) and that the default mapping variable in `qplot` must
    be supplied as a factor (in `mtcars` the vector `mtcars$cyl` is just numeric,
    which is fine for `barplot`, but `ggplot2` functionality is a bit more strict).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，相关的几何对象是`"bar"`（或者如果单独使用`geom_bar`，如你稍后将看到的那样），并且在`qplot`中默认的映射变量必须作为因子提供（在`mtcars`中，向量`mtcars$cyl`仅为数字类型，这对于`barplot`来说是可以的，但`ggplot2`的功能要求更加严格）。
- en: '![image](../images/f14-02.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-02.jpg)'
- en: '*Figure 14-2: Two examples of barplots of data from* `mtcars` *using* `ggplot2`
    *functionality. Left: The most simple* `qplot` *version, using one categorical
    variable. Right: A “dodged” barplot, the same as in [Figure 14-1](ch14.xhtml#ch14fig1),
    based on the supply of various additional geoms and scaling options.*'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 14-2：使用* `ggplot2` *功能展示的来自* `mtcars` *数据的两种条形图示例。左：最简单的* `qplot` *版本，使用一个分类变量。右：一个“错开”的条形图，类似于[图
    14-1](ch14.xhtml#ch14fig1)，基于各种附加几何对象和缩放选项的供应。*'
- en: 'Again, you can create far more complicated images depending upon what you want
    to display. To produce a `ggplot2` version of the dodged barplot from 14-1, call
    the following:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，你可以根据需要显示的内容创建更复杂的图像。要生成与14-1中的“错开”条形图相同的`ggplot2`版本，可以调用以下代码：
- en: '[PRE7]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: You can find the result on the right in [Figure 14-2](ch14.xhtml#ch14fig2).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图 14-2](ch14.xhtml#ch14fig2)右侧找到结果。
- en: Note a number of new additions to the basic `qplot` setup. The default mapping,
    by `cyl`, remains the same as earlier. You further specify that the bars should
    be filled according to a factor created by using the transmission variable `am`;
    so, each `cyl` bar is instructed to split according to that variable. The initial
    call to `qplot` was “empty,” in the sense that `geom="blank"`, and therefore drawing
    begins with the addition of `geom_bar` to the `ggplot2` object. It becomes a dodged
    barplot through `position="dodge"`; as in base R graphics, the default behavior
    is to generate a stacked plot. The `scale_x_discrete` modifier specifies labels
    for each category of the default `cyl` mapping; the `scale_y_continuous` modifier
    is employed to control the axis labels for the frequencies.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，基本的`qplot`设置中增加了许多新的内容。默认映射仍然是按`cyl`，和之前一样。你进一步指定，条形图的填充应根据使用变速器变量`am`创建的因子来填充；因此，每个`cyl`的条形图被指示根据该变量进行拆分。最初对`qplot`的调用是“空”的，意思是`geom="blank"`，因此绘图从向`ggplot2`对象添加`geom_bar`开始。通过`position="dodge"`，它变成了一个偏移条形图；与基本的R图形类似，默认行为是生成堆积图。`scale_x_discrete`修饰符指定了每个类别的标签，默认映射为`cyl`；`scale_y_continuous`修饰符则用于控制频率的轴标签。
- en: Further, adding `theme_bw()` to the object changes the visual theme of the image;
    in the current example, I’ve chosen to remove the gray background because it’s
    too similar in color to the manual car bars. Adding `coord_flip` to the object
    flips the axes and provides horizontal bars rather than the default vertical style
    (note that the calls to the `scale_` functions are used with respect to the unflipped
    image). The default behavior of `fill` is to use colors, so you use the `scale_fill_grey`
    modifier to force this to be grayscale and to alter the labels of the automatically
    generated legend to match at the same time.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，向对象添加`theme_bw()`会改变图像的视觉主题；在当前的示例中，我选择移除灰色背景，因为它的颜色与手动变速车的条形图颜色过于相似。向对象添加`coord_flip`会翻转坐标轴，提供水平条形图，而不是默认的垂直样式（注意，`scale_`函数的调用是针对未翻转的图像）。`fill`的默认行为是使用颜色，因此你使用`scale_fill_grey`修饰符强制将其设置为灰度，并同时更改自动生成的图例标签，使其匹配。
- en: The most prominent advantage of using `ggplot2` over base R graphics in this
    case lies in the fact that you don’t need to manually tabulate counts or design
    specific matrix structures of these frequencies—the variable mappings do this
    automatically. For practice, I encourage you to experiment with this code example,
    omitting or modifying some of the additions to the `qplot` object to assess the
    impact on the resulting image.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`ggplot2`相对于基本R图形的最大优势在于，你不需要手动列出计数或设计这些频率的特定矩阵结构——变量映射会自动完成这一工作。为了练习，我鼓励你尝试修改这个代码示例，省略或修改`qplot`对象中的某些内容，以评估对结果图像的影响。
- en: '***14.1.2 A Quick Pie Chart***'
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***14.1.2 快速饼图***'
- en: The venerable *pie chart* is an alternative option for visualizing frequency-based
    quantities across levels of categorical variables, with appropriately sized “slices”
    representing the relative counts of each categorical variable.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 古老的*饼图*是另一种可视化频率基础数量在类别变量水平之间的替代方式，通过适当大小的“切片”表示每个类别变量的相对计数。
- en: '[PRE8]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: You can find the resulting plot in [Figure 14-3](ch14.xhtml#ch14fig3).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图14-3](ch14.xhtml#ch14fig3)中找到结果图。
- en: Though it’s possible to achieve with some effort, there is no direct “pie” geom
    in `ggplot2`. This may, at least in part, be due to the general preference of
    statisticians for barplots over pie charts. That fact itself is even summarized
    in the help file `?pie`!
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然通过一定的努力可以实现，但`ggplot2`中没有直接的“饼图”几何对象。这至少部分是由于统计学家普遍偏好条形图而非饼图。这一点在帮助文件`?pie`中也有所总结！
- en: Pie charts are a bad way of displaying information. The eye is good at judging
    linear measures and bad at judging relative areas.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 饼图是展示信息的一个糟糕方式。人眼擅长判断线性度量，但不擅长判断相对面积。
- en: Furthermore, barplots are of greater value than pie charts if you want frequencies
    split by a *second* categorical variable or if the levels of a factor are ordered.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果你希望按*第二个*类别变量拆分频率，或者因子水平是有序的，那么条形图比饼图更有价值。
- en: '![image](../images/f14-03.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-03.jpg)'
- en: '*Figure 14-3: A pie chart of the frequencies of total cylinders of the cars
    in the* `mtcars` *data frame*'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-3：来自`mtcars`数据框中总气缸频率的饼图*'
- en: '**14.2 Histograms**'
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**14.2 直方图**'
- en: The barplot is intuitively sensible for counting observations in relation to
    categorical variables but is of virtually no use if the variable you’re interested
    in is numeric-continuous. To visualize the distribution of continuous measurements,
    you can use a *histogram*—a tool that’s sometimes confused with a barplot owing
    to its similar appearance. A histogram also measures frequencies, but in targeting
    a numeric-continuous variable, it’s first necessary to “bin” the observed data,
    meaning to define intervals and then count the number of continuous observations
    that fall within each one. The size of this interval is known as the *binwidth*.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图在根据类别变量计数观测值时直观易懂，但如果你感兴趣的变量是数值型连续变量时，几乎没有用处。为了可视化连续测量的分布，可以使用*直方图*——这种工具有时会因外观相似而与条形图混淆。直方图同样衡量频率，但在针对数值型连续变量时，首先需要对观察数据进行“分箱”，即定义区间，然后统计落在每个区间内的连续观测值数量。这个区间的大小被称为*分箱宽度*。
- en: For a simple example of a histogram, consider the horsepower data of the 32
    cars in `mtcars`, given in the fourth column, named `hp`.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 作为直方图的一个简单例子，可以考虑`mtcars`数据集中32辆车的马力数据，它位于第四列，名为`hp`。
- en: '[PRE9]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: For this section, define horsepowers of all performance cars from that era as
    your population and assume that these observations represent a sample from that
    population. Using base R graphics, the `hist` command takes a vector of numeric-continuous
    observations and produces a histogram, as shown on the left in [Figure 14-4](ch14.xhtml#ch14fig4).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本节内容，定义那个时代所有高性能汽车的马力为你的总体，并假设这些观测值代表了从该总体中抽取的一个样本。使用基础R图形，`hist`命令接受一个数值型连续观测值的向量，并生成一个直方图，如[图14-4](ch14.xhtml#ch14fig4)左侧所示。
- en: '[PRE10]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![image](../images/f14-04.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-04.jpg)'
- en: '*Figure 14-4: Illustrating the default behavior of* `hist` *on the* `mtcars`
    *horsepower data (left); customizing binwidth, color, and title options, as well
    as adding markers of centrality (right)*'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-4：展示* `hist` *函数在* `mtcars` *马力数据上的默认行为（左）；定制分箱宽度、颜色和标题选项，并添加集中性标记（右）*'
- en: You can immediately see that the histogram on the left has used binwidths of
    50 units spanning the range of the data, providing you with a quick and useful
    first impression of the distribution of horsepower measurements. It seems to be
    centered roughly in the range of 75 to 150, tapering off on the right (this is
    known as a *right* or *positive skew*; more terminology will be covered in [Section
    15.2.4](ch15.xhtml#ch15lev2sec136)).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以立即看到，左侧的直方图使用了50个单位的分箱宽度，覆盖了数据的范围，从而为你提供了关于马力测量分布的快速而有用的第一印象。它似乎大致集中在75到150的范围内，右侧逐渐减少（这被称为*右偏*或*正偏*；更多术语将在[第15.2.4节](ch15.xhtml#ch15lev2sec136)中介绍）。
- en: The accuracy of a histogram as a representation of the shape of a distribution
    of measurements depends solely upon the widths of the intervals used to bin the
    data. Binwidths are controlled in `hist` by the `breaks` argument. You can manually
    set these by supplying a vector, giving each breakpoint, to `breaks`. This is
    done in the following code by halving the width of each bin from 50 to 25 and
    widening the overall range somewhat, using an evenly spaced sequence.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 直方图作为测量分布形状的表示的准确性完全取决于用于分箱的区间宽度。`hist`函数通过`breaks`参数控制分箱宽度。你可以通过提供一个向量，给出每个断点，来手动设置这些区间。在下面的代码中，通过将每个分箱的宽度从50减小到25，并略微扩展整体范围，使用等距序列来完成这一操作。
- en: '[PRE11]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: This plot, given on the right in [Figure 14-4](ch14.xhtml#ch14fig4), shows the
    result of using the narrower bins, as well as making the bars gray and adding
    a more readable title. It also includes vertical lines denoting the mean and median,
    using `abline`, and a legend (refer back to [Section 7.3](ch07.xhtml#ch07lev1sec25)).
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 该图表展示在[图14-4](ch14.xhtml#ch14fig4)的右侧，显示了使用更窄分箱的结果，同时将条形颜色设为灰色并添加了更易读的标题。它还包括表示均值和中位数的垂直线，使用`abline`，并添加了图例（请参阅[第7.3节](ch07.xhtml#ch07lev1sec25)）。
- en: With the smaller binwidth, more detail is visible in the distribution. However,
    using narrower bins risks highlighting “unimportant features” (in other words,
    features of the histogram that represent natural variation as a consequence of
    the finite-sized sample). These typically occur at locations on the scale where
    data are scarce. For example, the single 335 horsepower car has produced an isolated
    bar on the right of the scale, but you might reasonably conclude that this is
    not a precise, accurate reflection of a “true bump” at that location in terms
    of the overall population. It’s therefore important to note that choosing the
    interval widths is a balancing act of sorts.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 使用较小的区间宽度时，数据分布的细节更加清晰。然而，使用更窄的区间有可能突出显示“不重要的特征”（换句话说，直方图中代表由于有限样本大小所产生的自然变异的特征）。这些通常出现在数据稀缺的区间位置。例如，唯一的一辆335马力的汽车在右侧的区间产生了一个孤立的条形，但你可能合理地得出结论，认为这并不是该位置的“真实突起”，而是整体人群数据的一个不精确的反映。因此，选择区间宽度时需要注意，这是一种平衡行为。
- en: You want to choose a width that gives you a good idea of the distribution of
    measurements without emphasizing unimportant detail by using too small a binwidth.
    Equivalently, you also want to avoid hiding important features by using too *large*
    a binwidth. To address this, there are data-driven algorithms that use the scale
    of the recorded observations to try to calculate an appropriately balanced binwidth.
    You can supply a character string to `breaks`, giving the name of the algorithm
    that you want to employ. The default `breaks="Sturges"` often works well, though
    it’s worth trying a small number of alternative widths when exploring data in
    this way. For further details on this and other ways to use `breaks`, the documentation
    `?hist` provides clear and concise instruction.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要选择一个合适的宽度，这样可以让你清楚地了解数据分布，而不会因使用过小的区间宽度而强调不重要的细节。换句话说，你也需要避免因使用过*大的*区间宽度而隐藏重要的特征。为了解决这个问题，有一些数据驱动的算法，它们利用记录的观测数据的规模来尝试计算一个合适的平衡区间宽度。你可以为`breaks`提供一个字符字符串，给出你希望使用的算法名称。默认的`breaks="Sturges"`通常表现得很好，尽管在以这种方式探索数据时，尝试少量的替代区间宽度也是值得的。有关此内容和其他使用`breaks`的方法的更多详细信息，文档`?hist`提供了清晰简明的说明。
- en: 'The issues surrounding intervals and their widths is emphasized in a different
    way in `ggplot2`. By default, the `qplot` function produces a histogram when you
    supply it with a single numeric vector but no value for the `geom` argument:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在`ggplot2`中，区间及其宽度的问题以另一种方式得到强调。默认情况下，当你向`qplot`函数提供一个单一的数值向量但没有为`geom`参数指定值时，它会生成一个直方图。
- en: '[PRE12]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: You can find the result on the left in [Figure 14-5](ch14.xhtml#ch14fig5). Note,
    however, that a notification from `qplot` concerning the binwidths is printed
    to the console.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图 14-5](ch14.xhtml#ch14fig5)中找到左侧的结果。然而需要注意的是，`qplot`会向控制台打印关于区间宽度的通知。
- en: '![image](../images/f14-05.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-05.jpg)'
- en: '*Figure 14-5: Illustrating the default behavior of* `qplot` *on the* `mtcars`
    *horsepower data (left); customizing binwidth, color, and title options, as well
    as adding markers of centrality (right)*'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 14-5：展示默认的* `qplot` *行为，基于* `mtcars` *的马力数据（左）；定制区间宽度、颜色和标题选项，以及添加中央性标记（右）*'
- en: 'If you don’t explicitly specify the bins, exactly 30 intervals will be used
    to span the range of the data. Inspecting the relevant geom documentation given
    with a call to `?geom_histogram` tells you the following:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有明确指定区间，将使用恰好30个区间来覆盖数据的范围。通过查看相关的`geom`文档（通过调用`?geom_histogram`）可以得到以下信息：
- en: By default, `stat_bin` uses 30 bins. This is not a good default, but the idea
    is to get you experimenting with different binwidths. You may need to look at
    a few to uncover the full story behind your data.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，`stat_bin`使用30个区间。这并不是一个理想的默认值，但它的目的是让你开始尝试不同的区间宽度。你可能需要查看几个不同的区间宽度，以揭示数据背后的完整故事。
- en: 'So, rather than defaulting to a data-driven algorithm such as `hist`, `ggplot2`
    encourages users to become aware of the issue and actively set their own binwidths.
    You can see that 30 bins yields inappropriately narrow intervals for this example—there
    are many gaps where no observations have fallen. There are a number of ways to
    choose histogram intervals in `qplot`, one of which is to use `breaks` as earlier,
    supplying it with an appropriate numeric vector of interval endpoints. To re-create
    the plot on the right of [Figure 14-4](ch14.xhtml#ch14fig4) using `ggplot2` functionality,
    use the following code, which produces the right-hand plot in [Figure 14-5](ch14.xhtml#ch14fig5):'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，`ggplot2`鼓励用户意识到问题并主动设置自己的箱宽，而不是默认使用像`hist`这样的数据驱动算法。你可以看到，30个箱子为此示例提供了不合适的狭窄区间——有很多间隙，那里没有观测值。你可以通过多种方式选择`qplot`中的直方图区间，其中一种是使用`breaks`，像之前一样，给它提供一个适当的数值区间端点向量。为了重新创建[图14-4](ch14.xhtml#ch14fig4)右侧的图，使用`ggplot2`功能，使用以下代码，这会生成[图14-5](ch14.xhtml#ch14fig5)中的右侧图：
- en: '[PRE13]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Starting with a `"blank"` geom, `geom_histogram` completes most of the work,
    with `color` governing the bar outline color and `fill` the internal color of
    the bars. The argument `closed="right"` determines that each interval is “closed”
    (in other words, exclusive) on the right and “open” (in other words, inclusive)
    on the left, the same as the default noted in `?hist`. The `geom_vline` function
    is used to add the vertical mean and median lines; here, the `mapping` must be
    instructed to change using `aes` and the locations of these lines. To ensure a
    correctly labeled legend is created for the mean and median, you must also instruct
    `linetype` in `aes` to be mapped to the desired values. In this case, this is
    simply a factor comprised of the two desired “levels.”
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 从一个“空白”几何对象开始，`geom_histogram`完成了大部分工作，`color`控制条形的轮廓颜色，`fill`控制条形的内部颜色。参数`closed="right"`决定每个区间在右侧是“封闭的”（也就是说，不包括在内），在左侧是“开放的”（也就是说，包括在内），这与`?hist`中注明的默认值相同。`geom_vline`函数用于添加垂直的均值和中位线；在这里，`mapping`必须使用`aes`进行指示，改变这些线的位置。为了确保为均值和中位数创建正确标注的图例，你还必须指示`linetype`在`aes`中映射到所需的值。在这种情况下，这只是一个由两个所需“级别”组成的因子。
- en: Since you’re manually adding these lines and the associated mapping to the `ggplot2`
    object, the legend itself must be instructed to appear with `show.legend=TRUE`.
    By default, the two lines will be drawn `lty=1` (solid) and `lty=2` (dashed),
    but to match the earlier plot, you want `lty=2` and `lty=3` (dotted). You can
    add the `scale_linetype_manual` modifier to make this change; the desired line
    type numbers are passed as a vector to `values`. Finally, to suppress the automatic
    inclusion of a title for your manually added legend, the `labs(linetype="")` addition
    instructs the scale associated with the variable mapped to `linetype` in the `aes`
    call to be displayed without this title.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 由于你是在手动添加这些线条及其相关映射到`ggplot2`对象中，因此必须指示图例本身通过`show.legend=TRUE`来显示。默认情况下，两条线将被绘制为`lty=1`（实线）和`lty=2`（虚线），但是为了与之前的图匹配，你需要`lty=2`和`lty=3`（点线）。你可以添加`scale_linetype_manual`修饰符来进行此更改；所需的线条类型编号作为一个向量传递给`values`。最后，为了抑制自动为你手动添加的图例包含标题，`labs(linetype="")`的添加指示与变量映射到`linetype`的`aes`调用相关的尺度显示时不带标题。
- en: The choice between using `ggplot2` and base R graphics often comes down to your
    intended goal. For automated handling of graphics, especially where categorical
    variables are used to separate subsets of the data set, `ggplot2` is particularly
    powerful. On the other hand, if you require manual control over the creation of
    a given image, traditional R graphics can be easier to handle, and you don’t need
    to keep track of multiple aesthetic variable mappings.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`ggplot2`与基本R图形的选择通常取决于你的目标。对于自动化处理图形，尤其是在使用分类变量来分割数据集子集的情况下，`ggplot2`特别强大。另一方面，如果你需要手动控制图像的创建，传统的R图形可能更容易处理，而且你不需要跟踪多个美学变量映射。
- en: '**14.3 Box-and-Whisker Plots**'
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**14.3 箱型图**'
- en: An especially popular alternative to the histogram is the *box-and-whisker plot*,
    or simply *boxplot* for short. This is merely a visual representation of the five-number
    summary discussed in [Section 13.2.3](ch13.xhtml#ch13lev2sec118).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 一个特别流行的直方图替代品是*箱型图*，或简称*箱线图*。这仅仅是[第13.2.3节](ch13.xhtml#ch13lev2sec118)中讨论的五数概括的可视化表示。
- en: '***14.3.1 Stand-Alone Boxplots***'
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***14.3.1 独立箱型图***'
- en: 'Let’s return to the built-in `quakes` data frame of the 1,000 seismic events
    near Fiji. For the sake of comparison, you can examine both a histogram and a
    boxplot of the magnitudes of these events using default base R behavior. The following
    code produces the images given in [Figure 14-6](ch14.xhtml#ch14fig6):'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到内置的`quakes`数据框，该数据包含了1000个发生在斐济附近的地震事件。为了进行比较，你可以使用默认的R基础行为检查这些事件的震级的直方图和箱线图。以下代码生成了[图14-6](ch14.xhtml#ch14fig6)中给出的图像：
- en: '[PRE14]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![image](../images/f14-06.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-06.jpg)'
- en: '*Figure 14-6: Default histogram (left) and boxplot (right) of the magnitude
    data from* `quakes`*. On the boxplot, commentary (superimposed externally) points
    out the key information displayed.*'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-6：来自`quakes`的震中数据的默认直方图（左）和箱线图（右）。在箱线图上，外部叠加的注释指出了显示的关键信息。*'
- en: Like the histogram, a boxplot shows important features of the distribution,
    such as global (in other words, overall) centrality, spread, and skewness. It’s
    not really possible to see local features, such as multiple significant peaks
    in the distribution, however. As the labeling arrows point out, the line in the
    middle of the box represents the median, the lower and upper edges of the box
    show the respective quartiles, perpendicular lines (the *whiskers*) extending
    from the box indicate the minimum and the maximum, and any dots drawn beyond the
    whiskers are deemed to be points of extremity or outliers. By default, `boxplot`
    defines an outlier as an observation that lies more than 1.5 times the IQR below
    the lower quartile or above the upper quartile. This is done to prevent the whiskers
    from extending too far and overemphasizing any skew. Thus, the “maximum” and “minimum”
    values marked by the whiskers are not always the raw, overall maximum or minimum
    values in the data set because a value that has been deemed an “outlier” might
    actually represent the highest or lowest value. You can control the nature of
    this classification via the `range` argument in `boxplot`, though the default
    of `range=1.5` is usually sensible for basic data exploration.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于直方图，箱线图显示了分布的主要特征，如全局（换句话说，总体）集中性、分散度和偏态。然而，它并不能真正展示局部特征，比如分布中的多个显著峰值。如标签箭头所指，箱体中间的线表示中位数，箱体的上下边缘显示各自的四分位数，从箱体延伸出的垂直线（*胡须*）表示最小值和最大值，任何超出胡须的点被认为是极端值或异常值。默认情况下，`boxplot`将异常值定义为低于下四分位数或高于上四分位数1.5倍IQR的观测值。这样做是为了防止胡须延伸过远，从而过度强调任何偏态。因此，胡须标记的“最大值”和“最小值”并不总是数据集中的原始整体最大值或最小值，因为被视为“异常值”的数据点实际上可能代表最高或最低值。你可以通过`boxplot`中的`range`参数控制这种分类的性质，尽管默认值`range=1.5`对于基本的数据探索来说通常是合理的。
- en: '***14.3.2 Side-by-Side Boxplots***'
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***14.3.2 并排箱线图***'
- en: 'One particularly pleasing aspect of these plots is the ease with which you
    can compare the five-number summary distributions of different groups with *side-by-side*
    boxplots. Again using the `quakes` data, define the following corresponding factor
    and inspect the first five elements (review use of the `cut` command from [Section
    4.3.3](ch04.xhtml#ch04lev2sec48) if necessary):'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 这些图表的一个特别令人愉快的方面是，你可以通过*并排*箱线图轻松比较不同组别的五数总结分布。再次使用`quakes`数据，定义以下对应的因子，并检查前五个元素（如有需要，请参考[第4.3.3节](ch04.xhtml#ch04lev2sec48)中`cut`命令的用法）：
- en: '[PRE15]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Recall that the `stations` variable records how many monitoring stations detected
    each event. This code has produced a factor breaking up these observations into
    one of three groups—events detected by 50 stations or fewer, between 51 and 100
    stations, and between 101 and 150 stations. Thus, you can compare the distributions
    of the magnitudes of the events according to these three groups. The following
    line produces the left image of [Figure 14-7](ch14.xhtml#ch14fig7):'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 记得，`stations`变量记录了有多少监测站检测到每个事件。该代码生成了一个因子，将这些观测值分为三组——50个或更少监测站检测到的事件，51到100个监测站检测到的事件，以及101到150个监测站检测到的事件。因此，你可以根据这三组比较事件震级的分布。以下代码生成了[图14-7](ch14.xhtml#ch14fig7)中的左侧图像：
- en: '[PRE16]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: With this line of code, you should note new syntax in the form of a tilde, `~`,
    shown here in `quakes$mag~stations.fac`. You can read the `~` as “on,” “by,” or
    “according to” (you’ll use the tilde notation frequently in [Chapters 20](ch20.xhtml#ch20)
    through [22](ch22.xhtml#ch22)). Here you’re instructing `boxplot` to plot `quakes$mag`
    *according to* `station.fac` so that a separate boxplot is produced for each group,
    naturally given in the order listed in the grouping factor. Optional arguments
    are also employed to control axis labeling and box color. Your interpretation
    of this plot mirrors what you can see in [Figure 13-6](ch13.xhtml#ch13fig6), in
    that the higher the recorded magnitude, the more stations that detected a given
    seismic event.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在这行代码中，你应该注意到新的语法形式，波浪号`~`，在`quakes$mag~stations.fac`中显示。你可以将`~`理解为“按”、“由”或“根据”（你将在[第20章](ch20.xhtml#ch20)到[第22章](ch22.xhtml#ch22)中频繁使用波浪号表示法）。在这里，你指示`boxplot`按照`station.fac`绘制`quakes$mag`，因此每个组都会生成一个单独的箱线图，组内的顺序自然与分组因子的顺序一致。还使用了可选参数来控制轴标签和箱体颜色。你对这个图的解释与在[图13-6](ch13.xhtml#ch13fig6)中看到的相同，即记录的震级越高，检测到给定地震事件的台站越多。
- en: '![image](../images/f14-07.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-07.jpg)'
- en: '*Figure 14-7: Side-by-side boxplots of the* `quakes` *magnitudes, split by
    the three groups identified by* `station.fac`*, using base R graphics (left) and*
    `ggplot2` *functionality (right)*'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-7：使用基础R图形（左）和`ggplot2`功能（右）绘制的`quakes`震级的并排箱线图，按`station.fac`标识的三组分割*'
- en: 'Turning to `ggplot2` functionality, `qplot` can produce the same type of plot
    easily, with the following producing the image on the right in [Figure 14-7](ch14.xhtml#ch14fig7):'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 转向`ggplot2`的功能，`qplot`可以轻松地生成相同类型的图，下面的代码生成了[图14-7](ch14.xhtml#ch14fig7)右侧的图像：
- en: '[PRE17]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The default boxplots look a little different, though you can make the same interpretations.
    In this use of `qplot`, you supply the boxplot grouping factor as the *x*-axis
    variable (first argument) and the continuous variable for which you require boxplots
    as the *y*-axis variable (second argument). Here I’ve explicitly set `geom="boxplot"`
    to ensure a boxplot display, and I’ve added axis labels.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的箱线图略有不同，但你仍然可以做出相同的解释。在这种`qplot`的使用中，你将箱线图的分组因子作为*X*轴变量（第一个参数），将需要箱线图的连续变量作为*Y*轴变量（第二个参数）。在这里，我显式设置了`geom="boxplot"`以确保显示箱线图，并且添加了轴标签。
- en: '**14.4 Scatterplots**'
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**14.4 散点图**'
- en: A *scatterplot* is most frequently used to identify a relationship between the
    observed values of two different numeric-continuous variables, displayed as *x*-*y*
    coordinate plots. The coordinate-wise nature of base R graphics lends itself naturally
    to the creation of scatterplots, so you’ve seen several examples already in this
    book. However, not every *x*-*y* coordinate-based plot is always called a scatterplot;
    a scatterplot usually assumes there is some “relationship of interest” present.
    For example, a plot of spatial coordinates like [Figure 13-1](ch13.xhtml#ch13fig1)
    might not be regarded as a scatterplot, but a plot of the earthquake magnitude
    against the number of stations detecting the event, like [Figure 13-6](ch13.xhtml#ch13fig6),
    would be.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*散点图*最常用于识别两个不同数值连续变量之间的关系，通常显示为*x*-*y*坐标图。基础R图形的坐标特性自然适合创建散点图，因此你已经在本书中看到了一些例子。然而，并非每一个基于*x*-*y*坐标的图都被称为散点图；散点图通常假设存在某种“感兴趣的关系”。例如，像[图13-1](ch13.xhtml#ch13fig1)这样的空间坐标图可能不被视为散点图，而像[图13-6](ch13.xhtml#ch13fig6)中震级与检测到地震事件的台站数量之间的关系图则是。'
- en: 'I’ll finish this chapter by expanding on how you can use scatterplots to explore
    more than two continuous variables. To do this, let’s access another ready-to-use
    R data set, namely, the famous `iris` data. Collected in the mid-1930s, this data
    frame of 150 rows and 5 columns consists of petal and sepal measurements for three
    species of perennial iris flowers—*Iris setosa*, *Iris virginica*, and *Iris versicolor*
    ([Anderson, 1935](ref.xhtml#ref03); [Fisher, 1936](ref.xhtml#ref24)). You can
    view the first five records here:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我将在本章结束时扩展说明如何使用散点图探索多个连续变量。为此，我们来访问另一个现成的R数据集，即著名的`iris`数据。该数据集收集于1930年代中期，共有150行和5列，包含了三种多年生鸢尾花的花瓣和萼片的测量数据——*Iris
    setosa*、*Iris virginica*和*Iris versicolor*（[Anderson, 1935](ref.xhtml#ref03);
    [Fisher, 1936](ref.xhtml#ref24)）。你可以在这里查看前五条记录：
- en: '[PRE18]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Looking through `?iris`, you can see that there are 50 observations for each
    variable, recorded in centimeters (cm), for each species.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查看`?iris`，你可以看到每个物种的每个变量都有50个观测值，单位为厘米（cm）。
- en: '***14.4.1 Single Plot***'
  id: totrans-94
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***14.4.1 单个图***'
- en: You can modify a simple scatterplot to split the plotted points according to
    a categorical variable, exposing potential differences between any visible relationships
    with respect to the continuous variables. For example, using base R graphics,
    you can examine the petal measurements according to the three species. Using the
    “stepping-stone” approach first explained in [Chapter 7](ch07.xhtml#ch07), you
    can manually build up this plot by first using `type="n"` to generate an empty
    plotting region of the correct dimensions and subsequently adding the points corresponding
    to each species, altering point character and color as desired.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以修改简单的散点图，根据分类变量拆分绘制的点，揭示与连续变量相关的任何可见关系之间的潜在差异。例如，使用基本的R图形，你可以根据三种物种检查花瓣的测量值。采用[第七章](ch07.xhtml#ch07)中首次介绍的“垫脚石”方法，你可以通过首先使用`type="n"`来生成一个空白的绘图区域，并根据每个物种的情况逐步添加对应的点，按需要调整点的特征和颜色，手动构建该图。
- en: '[PRE19]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: You can find the plot in [Figure 14-8](ch14.xhtml#ch14fig8). Note that the *Iris
    virginica* species has the largest petals, followed by *Iris versicolor*, and
    the smallest petals belong to *Iris setosa*. However, this code, while functional,
    is fairly cumbersome. You can generate the same image more simply by first setting
    up vectors that specify the desired point character and color *for each individual
    observation*.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图 14-8](ch14.xhtml#ch14fig8)中找到该图。注意，*Iris virginica*物种的花瓣最大，其次是*Iris versicolor*，最小的花瓣属于*Iris
    setosa*。然而，尽管这段代码可以正常工作，但它相当繁琐。你可以通过首先设置指定每个观测值的点特征和颜色的向量，以更简单的方式生成相同的图像。
- en: '![image](../images/f14-08.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-08.jpg)'
- en: '*Figure 14-8: A scatterplot of petal measurements split by species from the
    built-in* `iris` *data frame*'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 14-8：按物种拆分的花瓣测量值的散点图，来自内置的*`iris`*数据框*'
- en: 'Consider the two objects created here:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑这里创建的两个对象：
- en: '[PRE20]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The first line creates a vector `iris_pch` of equal length to the number of
    observations in `iris`, with every entry being `19`. Vector subsetting then overwrites
    the entries corresponding to *Iris versicolor* and sets the point character to
    `1`. The same steps are followed to create `iris_col`; first an appropriately
    sized vector is filled with the character strings `"black"`, and then those entries
    corresponding to *Iris virginica* are overwritten and set to `"gray"`. With that,
    note that the single line shown next, when followed by the same call to `legend`
    as earlier, will produce an identical plot:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 第一行创建了一个与`iris`中的观测值数量相等的向量`iris_pch`，每个条目的值为`19`。然后，通过向量子集操作，覆盖了对应*Iris versicolor*的条目，并将点特征设置为`1`。按照相同的步骤创建`iris_col`；首先填充一个适当大小的向量，并将字符字符串`"black"`填入其中，接着覆盖对应*Iris
    virginica*的条目，将其设置为`"gray"`。这样，注意，接下来的单行代码，配合之前的`legend`调用，将生成一个相同的图：
- en: '[PRE21]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '***14.4.2 Matrix of Plots***'
  id: totrans-104
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***14.4.2 图矩阵***'
- en: The “single” type of planar scatterplot is really useful only when comparing
    *two* numeric-continuous variables. When there are more continuous variables of
    interest, it isn’t possible to display this information satisfactorily on a single
    plot. A simple and common solution is to generate a two-variable scatterplot for
    each pair of variables and show them together in a structured way; this is referred
    to as a *scatterplot matrix*. Making use of the `iris_pch` and `iris_col` vectors
    created earlier, you can generate a scatterplot matrix for all four continuous
    variables in `iris`, retaining the distinction between species. Working with base
    R graphics, use the `pairs` function.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: “单个”类型的平面散点图仅在比较*两个*数值连续变量时非常有用。当涉及更多连续变量时，无法在单个图中令人满意地显示这些信息。一种简单且常见的解决方案是为每一对变量生成一个二变量散点图，并以结构化的方式将它们展示在一起；这种方法被称为*散点矩阵*。利用之前创建的`iris_pch`和`iris_col`向量，你可以为`iris`中的所有四个连续变量生成散点矩阵，并保持物种之间的区分。使用基本的R图形，可以使用`pairs`函数。
- en: '[PRE22]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: You can find the result of this line in [Figure 14-9](ch14.xhtml#ch14fig9).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图 14-9](ch14.xhtml#ch14fig9)中找到该行代码的结果。
- en: '![image](../images/f14-09.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-09.jpg)'
- en: '*Figure 14-9: A scatterplot matrix with respect to all four continuous measurements
    in the data frame*'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 14-9：显示数据框中所有四个连续测量值的散点矩阵*'
- en: The easiest way to use `pairs` is to supply a matrix or data frame of the raw
    observations as its first argument, done here by selecting all columns of `iris`
    except the `Species` column (`iris[,1:4]`). The interpretation of the plots depends
    upon the labeling of the diagonal panels, running from the top left to the bottom
    right. They will appear in the same order as the columns given as the first argument.
    These “label panels” allow you to determine which individual plot in the matrix
    corresponds to each pair of variables. For example, the first column of the scatterplot
    matrix in [Figure 14-9](ch14.xhtml#ch14fig9) corresponds to an *x*-axis variable
    of Sepal Length; the third row of the matrix corresponds to a *y*-axis variable
    of Petal Length, and each row and column displays a scale that is constant moving
    left/right or up/down, respectively. This means that plots above the diagonal
    are mirrored in those below it—the plot of Petal Width (*y*) on Sepal Width (*x*)
    at position row 4, column 2 displays the same data as the scatterplot at position
    row 2, column 4 but flipped on its axes. As such, `pairs` includes an option to
    display only those scatterplots above *or* below the diagonal, by setting either
    `lower.panel=NULL` or `upper.panel=NULL` to suppress one or the other.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`pairs`最简单的方法是将原始观测值的矩阵或数据框作为第一个参数传递，这里通过选择`iris`的所有列（除了`Species`列，即`iris[,1:4]`）来实现。图表的解释依赖于对角面板的标签，这些面板从左上到右下排列。它们会按照作为第一个参数传递的列的顺序出现。这些“标签面板”可以让你确定矩阵中的每个单独图表对应的是哪一对变量。例如，[图14-9](ch14.xhtml#ch14fig9)中的散点图矩阵的第一列对应*
    x *轴上的萼片长度；矩阵的第三行对应* y *轴上的花瓣长度，每一行和每一列显示的尺度在左右或上下移动时保持不变。这意味着对角线上的图表与对角线下的图表是镜像关系——位于第4行第2列的花瓣宽度(*y*)与萼片宽度(*x*)的图表显示的数据与位于第2行第4列的散点图相同，只是坐标轴翻转了。因此，`pairs`包括一个选项，可以仅显示对角线上的*或*下方的散点图，通过设置`lower.panel=NULL`或`upper.panel=NULL`来抑制其中一个。
- en: Scatterplot matrices therefore allow for an easier comparison of the collection
    of pairwise relationships formed by observations made on multiple continuous variables.
    In this matrix, note there’s a strong positive linear association between petal
    measurements but a weaker relationship between the sepal measurements. Furthermore,
    although *Iris setosa* may reasonably be considered the smallest flower in terms
    of its petals, the same can’t be said in terms of its sepals.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 散点图矩阵因此可以更容易地比较由对多个连续变量进行观测所形成的所有成对关系。在这个矩阵中，注意到花瓣尺寸之间存在强烈的正线性关联，而萼片尺寸之间的关系则较弱。此外，尽管*Iris
    setosa*可以合理地被认为是花瓣最小的花，但就萼片而言，情况并非如此。
- en: For those working with `ggplot2`, you know that it’s natural to split the points
    according to a categorical variable, as in the following example.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 对于使用`ggplot2`的用户，你们知道根据分类变量分割点是很自然的，以下是一个例子。
- en: '[PRE23]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: You can find the result in [Figure 14-10](ch14.xhtml#ch14fig10).
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图14-10](ch14.xhtml#ch14fig10)中找到结果。
- en: '![image](../images/f14-10.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-10.jpg)'
- en: '*Figure 14-10: Using* `ggplot2` *functionality to plot petal dimensions for
    the three* `iris` *species, with point* `shape` *as the aesthetic modifier*'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-10：使用* `ggplot2` *功能绘制三种* `iris` *物种的花瓣尺寸，点的* `shape` *作为美学修饰符*'
- en: 'Here, I’ve split up the points using the `Species` variable mapped to `shape`
    (the equivalent of the base R terminology `pch`), and I’ve modified the point
    types using the `scale_shape_manual` modifier. I’ve also simplified the title
    of the automatically generated legend with `labs`, as done in [Section 14.2](ch14.xhtml#ch14lev1sec45).
    Scatterplot matrices, however, are not easily achievable using only `ggplot2`.
    To generate a matrix in a `ggplot2` style, it’s recommended that you download
    the `GGally` package ([Schloerke et al., 2014](ref.xhtml#ref58)) to access the
    `ggpairs` function. This package is designed to be an extension or add-on of `ggplot2`.
    It’s installed from CRAN as per usual—for example, by running `install.packages("GGally")`—and
    must be loaded via `library("GGally")` prior to use. After this is done, as a
    quick example, the following code produces the plot in [Figure 14-11](ch14.xhtml#ch14fig11):'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我使用映射到`shape`的`Species`变量（相当于R基础术语`pch`）将点进行分割，并通过`scale_shape_manual`修饰符修改了点的类型。我还通过`labs`简化了自动生成的图例标题，正如在[第14.2节](ch14.xhtml#ch14lev1sec45)中所做的那样。然而，仅使用`ggplot2`无法轻松实现散点图矩阵。为了以`ggplot2`风格生成矩阵，建议下载`GGally`包（[Schloerke等，2014](ref.xhtml#ref58)），以访问`ggpairs`函数。该包旨在作为`ggplot2`的扩展或附加功能。可以通过常规方式从CRAN安装——例如，运行`install.packages("GGally")`——并且在使用前必须通过`library("GGally")`加载。完成此步骤后，作为一个快速示例，以下代码会生成[图14-11](ch14.xhtml#ch14fig11)中的图：
- en: '[PRE24]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Though you might see familiar warnings related to the histogram binwidths, `ggpairs`
    offers an impressive visual array for such a short line of code. The output not
    only gives you the lower half of the scatterplot matrix produced with `pairs`
    but also provides equivalent histograms along the bottom and boxplots along the
    right. It also displays the estimates of the correlation coefficients. As shown,
    you can map a variable to an aesthetic modifier to split up the plotted observations
    based on factor levels. In [Figure 14-11](ch14.xhtml#ch14fig11), this is done
    by color, and you instruct `ggpairs` to operate on the `Species` variable. Documentation
    found in `?ggpairs` gives concise information on the various options that control
    the presence and appearance of the individual plots.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管你可能会看到与直方图箱宽相关的常见警告，但`ggpairs`为这样一行简短的代码提供了令人印象深刻的视觉效果。输出不仅提供了使用`pairs`生成的散点图矩阵的下半部分，还在底部提供了等效的直方图，在右侧提供了箱线图。它还显示了相关系数的估计值。如图所示，你可以将一个变量映射到一个美学修饰符上，根据因子水平分割绘制的观测值。在[图14-11](ch14.xhtml#ch14fig11)中，这是通过颜色实现的，并且你指示`ggpairs`操作`Species`变量。在`?ggpairs`中的文档提供了控制各个图形存在与外观的各种选项的简洁信息。
- en: '![image](../images/f14-11.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f14-11.jpg)'
- en: '*Figure 14-11: Generation of a scatterplot matrix using `ggpairs` from the
    `GGally` package, using color to separate the species. Note the useful addition
    of estimated correlation coefficients and distributional plots.*'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '*图14-11：使用`GGally`包中的`ggpairs`生成散点图矩阵，使用颜色分隔物种。注意增加了估计的相关系数和分布图。*'
- en: '**Exercise 14.1**'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 14.1**'
- en: Recall the built-in `InsectSprays` data frame, containing counts of insects
    on various agricultural units treated with one of six sprays.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 回顾内置的`InsectSprays`数据框，包含在接受六种不同喷雾处理的各种农业单位上昆虫的计数。
- en: Produce a histogram of the counts of insects using base R graphics.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用R基础图形绘制昆虫计数的直方图。
- en: Obtain the total number of insects found according to each spray (this was also
    asked in [Exercise 13.2](ch13.xhtml#ch13exc2) (f) on [page 273](ch13.xhtml#page_273)).
    Then, use base R graphics to produce a vertical barplot and a pie chart of these
    totals, labeling each plot appropriately.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取每种喷雾处理下发现的昆虫总数（这在[练习13.2](ch13.xhtml#ch13exc2)（f）中也有要求，见[第273页](ch13.xhtml#page_273)）。然后，使用R基础图形生成这些总数的垂直条形图和饼图，并适当地标注每个图。
- en: Use `ggplot2` functionality to generate side-by-side boxplots of the counts
    of insects according to each spray type and include appropriate axis labels and
    a title.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`ggplot2`功能生成根据每种喷雾类型的昆虫计数的并排箱线图，并包括适当的轴标签和标题。
- en: 'Yet another of R’s useful ready-to-use data sets is `USArrests`, containing
    data on the number of arrests for murder, rape, and assault per 100,000 individuals
    in each of the 50 states of the United States, recorded in 1973 (see, for example,
    [McNeil, 1977](ref.xhtml#ref46)). It also includes a variable giving the percentage
    of urban-based population in each state. Briefly inspect the data frame object
    and the accompanying documentation `?USArrests`. Then complete the following:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: R中另一个有用的现成数据集是`USArrests`，其中包含1973年美国50个州每10万人口中谋杀、强奸和攻击的逮捕人数数据（例如，参见[McNeil,
    1977](ref.xhtml#ref46)）。它还包括一个变量，给出每个州的城市人口比例。简要检查数据框对象和附带的文档`?USArrests`。然后完成以下操作：
- en: Use `ggplot2` functionality to generate a right-exclusive histogram of the proportion
    of urban population for the states. Set your breaks to be 10 units each, between
    0 and 100\. Have the histogram show the first quartile, the median, and the third
    quartile; then provide a matching legend. Use colors as you like and include appropriate
    axis annotation.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`ggplot2`功能生成一个关于各州城市人口比例的右侧排他直方图。将您的断点设置为每10个单位，在0和100之间。直方图显示第一四分位数、中位数和第三四分位数；然后提供一个匹配的图例。根据需要使用颜色，并包括适当的轴注释。
- en: The code `t(as.matrix(USArrests[,-3]))` creates a matrix of the `USArrests`
    data without the urban population column, and the built-in R object `state.abb`
    provides the two-letter state abbreviations, in alphabetical order, as a character
    vector. Use these two structures and base R graphics to produce a horizontal,
    stacked barplot with the horizontal bars labeled with state abbreviations and
    with each bar split according to the type of crime (murder, rape, and assault).
    Include a legend.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 代码`t(as.matrix(USArrests[,-3]))`创建了一个不包含城市人口列的`USArrests`数据矩阵，内置的R对象`state.abb`提供了按字母顺序排列的两字母州缩写作为字符向量。使用这两个结构和基本R图形，生成一个水平堆叠条形图，水平条形标记有州缩写，每个条形根据犯罪类型（谋杀、强奸和攻击）进行分割。包括一个图例。
- en: Define a new factor vector `urbancat` that is set to `1` if the corresponding
    state has an urban population percentage greater than the median percentage and
    is set to `0` otherwise.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个新的因子向量`urbancat`，如果相应的州的城市人口比例大于中位数百分比，则设置为`1`，否则设置为`0`。
- en: Create a new copy of `USArrests` in your workspace, after deleting the `UrbanPop`
    column, leaving just the three crime rate variables. Then insert a new, fourth
    column in this object with `urbancat`.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在删除`UrbanPop`列后，在您的工作空间中创建`USArrests`的新副本，只留下三个犯罪率变量。然后在此对象中插入一个新的第四列`urbancat`。
- en: Use the data frame from (g) to produce a scatterplot matrix and other associated
    plots of the three crime rates against one another via `GGally` functionality.
    Use color to split the crime rates according to the two levels of `urbancat`.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用(g)中的数据框生成一个散点图矩阵和其他相关图，通过`GGally`功能将三种犯罪率相互对比。使用颜色根据`urbancat`的两个级别分割犯罪率。
- en: Return to the built-in `quakes` data set.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 返回内置的`quakes`数据集。
- en: Create a factor vector corresponding to the magnitudes. Each entry should assume
    one of three categories based on breaks marked by the minimum magnitude, the ![image](../images/1by3.jpg)
    th quantile, the ![image](../images/2by3.jpg) th quantile, and the maximum magnitude.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个与幅度对应的因子向量。每个条目应根据最小幅度、![image](../images/1by3.jpg)分位数、![image](../images/2by3.jpg)分位数和最大幅度标记的断点分为三个类别之一。
- en: Re-create the plot shown next, where low-, medium-, and high-magnitude events,
    according to your factor vector from (i), are plotted with `pch` being assigned
    `1`, `2`, and `3`, respectively.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新创建下一个显示的图，根据(i)中的因子向量，绘制低、中、高幅事件，其中`pch`分别分配为`1`、`2`和`3`。
- en: '![image](../images/f0307-01.jpg)'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0307-01.jpg)'
- en: Add a legend to the plot from (j) to reference the three `pch` values.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在(j)的图中添加一个图例，引用三个`pch`值。
- en: '**Important Code in This Chapter**'
  id: totrans-138
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**本章重要代码**'
- en: '| **Function/operator** | **Brief description** | **First occurrence** |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| **函数/运算符** | **简要描述** | **首次出现** |'
- en: '| --- | --- | --- |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| `barplot` | Create a barplot | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 290](ch14.xhtml#page_290) |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| `barplot` | 创建条形图 | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[p. 290](ch14.xhtml#page_290)
    |'
- en: '| `geom_bar` | Barplot geom | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 292](ch14.xhtml#page_292) |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| `geom_bar` | 条形图几何对象 | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[p. 292](ch14.xhtml#page_292)
    |'
- en: '| `scale_x_discrete` | Modify discrete *x*-axis (`ggplot2`) | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 292](ch14.xhtml#page_292) |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| `scale_x_discrete` | 修改离散的* x *轴（`ggplot2`） | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[第292页](ch14.xhtml#page_292)
    |'
- en: '| `scale_y_continuous` | Modify continuous *y*-axis | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 292](ch14.xhtml#page_292) |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| `scale_y_continuous` | 修改连续的* y *轴 | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[第292页](ch14.xhtml#page_292)
    |'
- en: '| `theme_bw` | Black-and-white color theme | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 292](ch14.xhtml#page_292) |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '| `theme_bw` | 黑白配色主题 | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[第292页](ch14.xhtml#page_292)
    |'
- en: '| `coord_flip` | Switch *x*- and *y*-axes | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 292](ch14.xhtml#page_292) |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '| `coord_flip` | 切换* x *轴和* y *轴 | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[第292页](ch14.xhtml#page_292)
    |'
- en: '| `scale_fill_grey` | Filled colors as grayscale | [Section 14.1.1](ch14.xhtml#ch14lev2sec122),
    [p. 292](ch14.xhtml#page_292) |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| `scale_fill_grey` | 填充颜色为灰度色 | [第14.1.1节](ch14.xhtml#ch14lev2sec122)，[第292页](ch14.xhtml#page_292)
    |'
- en: '| `pie` | Create a pie chart | [Section 14.1.2](ch14.xhtml#ch14lev2sec123),
    [p. 293](ch14.xhtml#page_293) |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| `pie` | 创建饼图 | [第14.1.2节](ch14.xhtml#ch14lev2sec123)，[第293页](ch14.xhtml#page_293)
    |'
- en: '| `hist` | Create a histogram | [Section 14.2](ch14.xhtml#ch14lev1sec45), [p.
    294](ch14.xhtml#page_294) |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| `hist` | 创建直方图 | [第14.2节](ch14.xhtml#ch14lev1sec45)，[第294页](ch14.xhtml#page_294)
    |'
- en: '| `geom_histogram` | Histogram geom | [Section 14.2](ch14.xhtml#ch14lev1sec45),
    [p. 297](ch14.xhtml#page_297) |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| `geom_histogram` | 直方图几何对象 | [第14.2节](ch14.xhtml#ch14lev1sec45)，[第297页](ch14.xhtml#page_297)
    |'
- en: '| `geom_vline` | Add vertical lines geom | [Section 14.2](ch14.xhtml#ch14lev1sec45),
    [p. 297](ch14.xhtml#page_297) |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| `geom_vline` | 添加垂直线几何对象 | [第14.2节](ch14.xhtml#ch14lev1sec45)，[第297页](ch14.xhtml#page_297)
    |'
- en: '| `scale_linetype_manual` | Alter `ggplot2` line types | [Section 14.2](ch14.xhtml#ch14lev1sec45),
    [p. 297](ch14.xhtml#page_297) |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| `scale_linetype_manual` | 修改`ggplot2`线条类型 | [第14.2节](ch14.xhtml#ch14lev1sec45)，[第297页](ch14.xhtml#page_297)
    |'
- en: '| `labs` | `ggplot2` legend labels | [Section 14.2](ch14.xhtml#ch14lev1sec45),
    [p. 297](ch14.xhtml#page_297) |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| `labs` | `ggplot2` 图例标签 | [第14.2节](ch14.xhtml#ch14lev1sec45)，[第297页](ch14.xhtml#page_297)
    |'
- en: '| `boxplot` | Create boxplots | [Section 14.3.1](ch14.xhtml#ch14lev2sec124),
    [p. 298](ch14.xhtml#page_298) |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| `boxplot` | 创建箱线图 | [第14.3.1节](ch14.xhtml#ch14lev2sec124)，[第298页](ch14.xhtml#page_298)
    |'
- en: '| `~` | Plot “according to” | [Section 14.3.2](ch14.xhtml#ch14lev2sec125),
    [p. 299](ch14.xhtml#page_299) |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| `~` | 根据...绘制 | [第14.3.2节](ch14.xhtml#ch14lev2sec125)，[第299页](ch14.xhtml#page_299)
    |'
- en: '| `pairs` | Scatterplot matrix | [Section 14.4.2](ch14.xhtml#ch14lev2sec127),
    [p. 303](ch14.xhtml#page_303) |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| `pairs` | 散点图矩阵 | [第14.4.2节](ch14.xhtml#ch14lev2sec127)，[第303页](ch14.xhtml#page_303)
    |'
- en: '| `scale_shape_manual` | Alter `ggplot2` point characters | [Section 14.4.2](ch14.xhtml#ch14lev2sec127),
    [p. 304](ch14.xhtml#page_304) |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| `scale_shape_manual` | 修改`ggplot2`点的形状 | [第14.4.2节](ch14.xhtml#ch14lev2sec127)，[第304页](ch14.xhtml#page_304)
    |'
- en: '| `ggpairs` | Scatterplot matrix (`GGally`) | [Section 14.4.2](ch14.xhtml#ch14lev2sec127),
    [p. 304](ch14.xhtml#page_304) |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| `ggpairs` | 散点图矩阵（`GGally`） | [第14.4.2节](ch14.xhtml#ch14lev2sec127)，[第304页](ch14.xhtml#page_304)
    |'
