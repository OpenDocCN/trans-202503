- en: '7'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '7'
- en: THE PARTY LIGHTS
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 聚会灯光
- en: THIS CIRCUIT CONNECTS MULTIPLE BLINKING LEDS TO MAKE STRING LIGHTS.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 该电路将多个闪烁的LED连接起来，制作成串灯。
- en: '![image](../images/f0048-01.jpg)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0048-01.jpg)'
- en: '**THE CIRCUIT DIAGRAM**'
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**电路图**'
- en: '![image](../images/f0049-01.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0049-01.jpg)'
- en: '**THE PARTS LIST**'
  id: totrans-6
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**零件清单**'
- en: '| **PART** | **VALUE** | **DESCRIPTION** |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '| **部分** | **数值** | **描述** |'
- en: '| --- | --- | --- |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| R1 | 10 kΩ | Standard resistor |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| R1 | 10 kΩ | 标准电阻 |'
- en: '| R2 | 100 kΩ | Standard resistor |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| R2 | 100 kΩ | 标准电阻 |'
- en: '| R3 | 100 Ω | Standard resistor |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| R3 | 100 Ω | 标准电阻 |'
- en: '| C1 | 4.7 μF | Polarized capacitor |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| C1 | 4.7 μF | 极性电容 |'
- en: '| L1 to L6 | Red, yellow, or green | Standard LEDs; all must have about the
    same forward voltage (Vf) |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| L1 到 L6 | 红色、黄色或绿色 | 标准LED；所有LED的正向电压（Vf）必须大致相同 |'
- en: '| U1 | NE555 | 555 timer IC |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| U1 | NE555 | 555定时器IC |'
- en: '**ABOUT THE CIRCUIT**'
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**关于电路**'
- en: If you want to make something cool for a party, this is the circuit for you.
    It’s a simple way to make several LEDs blink at the same time. By roping all the
    lights together on a single long wire, you can hang them in a window or use them
    to decorate a tree.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想为聚会做点酷炫的东西，这个电路就是为你设计的。这是一个简单的方式，让多个LED同时闪烁。通过将所有的灯通过一根长线连接在一起，你可以把它们挂在窗户上，或者用它们来装饰一棵树。
- en: The circuit uses a *555 timer*, which is a classic integrated circuit that makes
    things turn on and off repeatedly; you can see the timer’s pinout in [Figure 7-1](ch07.xhtml#ch07fig1).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 电路使用了一个*555定时器*，它是一个经典的集成电路，用来让事物反复开关；你可以在[图7-1](ch07.xhtml#ch07fig1)中看到定时器的引脚图。
- en: '![image](../images/f0049-02.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0049-02.jpg)'
- en: '**FIGURE 7-1** 555 timer pinout'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '**图7-1** 555定时器引脚图'
- en: Two resistors (R1 and R2) and a polarized capacitor (C1) set the blinking speed,
    while a third resistor (R3) determines the current that goes out to the LEDs.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 两个电阻（R1和R2）和一个极性电容（C1）设置了闪烁的速度，而第三个电阻（R3）决定了流向LED的电流。
- en: '**COMMON MISTAKES**'
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**常见错误**'
- en: 'If your circuit isn’t working correctly, you might have made one of these common
    mistakes:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果电路无法正常工作，可能是你犯了以下一些常见错误：
- en: Connecting one or more of the LEDs the wrong way
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将一个或多个LED连接错误方向
- en: Connecting the 555 timer the wrong way
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将555定时器接错
- en: Connecting the capacitor the wrong way around
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将电容器接反
- en: Mixing up the pin numbers of the IC and connecting components to the wrong pin
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将集成电路（IC）的引脚编号弄混，导致连接到错误的引脚
- en: 'You can add or remove LEDs by changing the value of the resistor (R3). If each
    LED needs 10 mA and you want to use five LEDs, you need 5 × 10 mA, or 50 mA, through
    the resistor. You can use *Ohm’s law* to figure out the correct resistor value:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过改变电阻（R3）的数值来添加或移除LED。如果每个LED需要10毫安电流，且你想使用五个LED，那么你需要50毫安电流通过电阻。你可以使用*欧姆定律*来计算正确的电阻值：
- en: '![image](../images/f0050-01.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0050-01.jpg)'
- en: 'Ohm’s law states that the resistance is equal to the voltage across the resistor
    divided by the current flowing through it. In your five-LED example, that translates
    to the following equation:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 欧姆定律表明，电阻等于电阻器两端的电压除以流过它的电流。在你五个LED的例子中，这转化为以下方程：
- en: '![image](../images/f0050-02.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0050-02.jpg)'
- en: In this case, you are working with a 9 V battery and there’s about 2 V across
    the LEDs, so you get 7 V as the numerator. You divide that by the 50 mA calculated
    earlier to get 140 Ω of resistance. Note that your circuit will require less resistance
    as you add more LEDs and more resistance as you remove LEDs.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，你使用的是9伏电池，LED之间约有2伏电压，所以得到7伏作为分子。然后将其除以先前计算的50毫安，得到140欧姆的电阻。请注意，随着你添加更多的LED，电路需要的电阻会减少，而随着你移除LED，所需的电阻会增加。
- en: If you’re struggling with this circuit, you can ask questions and make comments
    through the book’s website at *[https://nostarch.com/circuits/](https://nostarch.com/circuits/)*.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在使用这个电路时遇到困难，可以通过本书的官方网站提问和留言，网址是 *[https://nostarch.com/circuits/](https://nostarch.com/circuits/)*。
- en: '**NOTE**'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*A 555 timer can give out only 100 to 200 mA in total. Check your chip’s datasheet
    for the exact value.*'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '*555定时器总共只能输出100到200毫安的电流。请查看芯片的数据手册，获取确切的数值。*'
- en: '**HOW THE CIRCUIT WORKS**'
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**电路如何工作**'
- en: '[Figure 7-2](ch07.xhtml#ch07fig2) shows the inside of the 555 timer. The green
    box marked “flip-flop” is a simple memory device with two states: output high
    (flip) and output low (flop). It has two inputs, set (S) and reset (R), which
    either set the output (Q) to high or reset it to low. Q is always the opposite
    of ![image](../images/qbar.jpg).'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-2](ch07.xhtml#ch07fig2)展示了 555 定时器的内部结构。绿色框中标记为“触发器”的部分是一个简单的记忆装置，具有两种状态：输出高电平（翻转）和输出低电平（翻摆）。它有两个输入，设定（S）和重置（R），它们分别将输出（Q）设置为高电平或重置为低电平。Q
    始终与![image](../images/qbar.jpg)相反。'
- en: The two triangles you see are *comparators*. If the comparator input marked
    with + has a higher voltage than the one marked with –, the output is high; otherwise,
    the output is low.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 你看到的两个三角形是*比较器*。如果标记为 + 的比较器输入电压高于标记为 – 的输入电压，则输出为高电平；否则，输出为低电平。
- en: '![image](../images/f0051-01.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0051-01.jpg)'
- en: '**FIGURE 7-2** The inside of a 555 timer'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 7-2** 555 定时器内部结构'
- en: 'The three 5 kΩ resistors between V[CC] and Gnd are the reason for the name
    “555.” They divide the V[CC] voltage by three and set fixed voltages for each
    of the comparators: one-third of the V[CC] voltage goes to the positive (+) input
    of comparator 1, and two-thirds of the V[CC] voltage goes to the negative (–)
    input of comparator 2.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: V[CC] 和地面之间的三个 5 kΩ 电阻是“555”这个名字的由来。它们将 V[CC] 电压分为三等分，为每个比较器设置固定电压：V[CC] 的三分之一电压送到比较器
    1 的正 (+) 输入端，V[CC] 的三分之二电压送到比较器 2 的负 (–) 输入端。
- en: If you look at the output (pin 3) in [Figure 7-2](ch07.xhtml#ch07fig2), you’ll
    see that it’s connected to the output of the flip-flop. This means that if the
    flip-flop is “set,” the output is high; otherwise, it is low. If you look at the
    input to the flip-flop, you’ll see that the two comparators handle setting and
    resetting the flip-flop. This means that the pins responsible for making the output
    turn on and off are pins 2 and 6.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看[图 7-2](ch07.xhtml#ch07fig2)中的输出（引脚 3），你会看到它连接到触发器的输出。这意味着如果触发器被“设置”了，输出为高电平；否则，输出为低电平。如果你查看触发器的输入，你会看到两个比较器负责设置和重置触发器。这意味着负责控制输出开关的引脚是引脚
    2 和 6。
- en: Pin 2 is labeled *Trigger* and is responsible for setting the output high. When
    the voltage on pin 2 goes lower than one-third of V[CC], comparator 1 outputs
    high and sets the flip-flop, which in turn sets the output high. Pin 6 is labeled
    *Threshold*; when its voltage exceeds two-thirds of the V[CC], it is responsible
    for resetting the output to low.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 引脚 2 标记为*触发端*，负责将输出设为高电平。当引脚 2 的电压低于 V[CC] 的三分之一时，比较器 1 输出高电平并设置触发器，进而将输出设为高电平。引脚
    6 标记为*阈值*；当其电压超过 V[CC] 的三分之二时，负责将输出重置为低电平。
- en: Refer back to the circuit diagram at the beginning of this project. For this
    project’s circuit, pins 2 and 6 are connected to each other, so when the voltage
    on these pins goes high, the output goes low. When the voltage on these pins goes
    low, the output goes high. That means you need to switch the voltage on these
    pins between high and low in order to switch the output between low and high.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考本项目开始时的电路图。对于本项目的电路，引脚 2 和 6 相互连接，因此当这些引脚上的电压升高时，输出为低电平。当这些引脚上的电压降低时，输出为高电平。这意味着你需要在这些引脚上切换电压的高低，以切换输出的高低电平。
- en: Pin 7 is very important for making this happen. It is labeled *Discharge*. Inside
    the chip, pin 7 is connected to a transistor, as shown in the figure. The transistor
    is controlled by ![image](../images/qbar.jpg), the opposite value of the output.
    This means that when the output is low, the transistor gets a high value and turns
    on, connecting pin 7 to ground. Otherwise, the transistor is off and leaves pin
    7 unconnected.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 引脚 7 对于实现这个功能非常重要。它标记为*放电*。在芯片内部，引脚 7 连接到一个晶体管，如图所示。该晶体管由![image](../images/qbar.jpg)控制，即输出的反向值。这意味着当输出为低电平时，晶体管接收到高电平并导通，将引脚
    7 连接到地面。否则，晶体管关闭，引脚 7 与任何东西都不连接。
- en: The moment we apply power to our circuit, capacitor C1 is completely discharged.
    That means pin 2 (Trigger) is low, which means pin 3 (the output) is high. This
    also means that pin 7 (Discharge) is not connected to anything internally.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们给电路通电的瞬间，电容器 C1 完全放电。这意味着引脚 2（触发端）为低电平，意味着引脚 3（输出端）为高电平。这也意味着引脚 7（放电端）在内部没有连接到任何东西。
- en: Since C1 is connected to 9 V through R1 and R2, C1 will start to charge, and
    the voltage on its positive pin will begin to rise. This means the voltage on
    pin 6 (Threshold) is increasing, too. When the voltage becomes high enough on
    Threshold, the output changes from high to low, and pin 7 (Discharge) is connected
    internally to ground.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 C1 通过 R1 和 R2 连接到 9V 电源，C1 将开始充电，其正极引脚上的电压将开始上升。这意味着引脚 6（阈值引脚）上的电压也在增加。当阈值电压足够高时，输出从高电平变为低电平，并且引脚
    7（放电引脚）会内部连接到地面。
- en: In this situation, when pin 7 is connected to ground, the capacitor will start
    to discharge (hence the pin name Discharge) through R2, down to ground at pin
    7\. So the voltage across the capacitor decreases and continues to do so until
    the voltage on pin 2 is so low that it “triggers.” When it triggers, the output
    switches from low to high, and pin 7 is disconnected from ground again.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，当引脚 7 连接到地面时，电容器将通过 R2 开始放电（因此引脚的名称为放电引脚），一直放电到引脚 7 的地面。因此，电容器两端的电压会降低，并且会持续下降，直到引脚
    2 上的电压低到足以“触发”为止。当触发时，输出从低电平切换到高电平，引脚 7 会再次与地面断开连接。
- en: Now we’re in the same situation as when we started, where the capacitor is charging
    so that the voltage over the capacitor increases. This process repeats indefinitely.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们回到与开始时相同的情况，电容器正在充电，以至于电容器两端的电压逐渐升高。这个过程会无限重复。
- en: 'The following is a brief overview of each pin on the 555 timer:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是 555 定时器每个引脚的简要概述：
- en: '**Pin 1 Ground** This pin is connected to the negative side of the battery.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 1 地面** 该引脚连接到电池的负极。'
- en: '**Pin 2 Trigger** When this pin goes low (less than one-third of V[CC]), the
    output goes high.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 2 触发** 当该引脚电平变低（小于 V[CC] 的三分之一）时，输出变为高电平。'
- en: '**Pin 3 Output** The output voltage from the chip is around 1.5 V lower than
    V[CC] when high and around 0 V when low.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 3 输出** 当输出为高电平时，芯片的输出电压约为 V[CC] 低 1.5 V，而输出为低电平时，电压接近 0 V。'
- en: '**Pin 4 Reset** This pin resets the whole circuit. It’s an “inverted” pin,
    which means it resets when the pin goes low. This means the pin must be high normally
    so that the chip isn’t in a “reset” state.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 4 复位** 该引脚用于复位整个电路。它是一个“反向”引脚，这意味着当引脚电平变低时，会复位。也就是说，通常引脚需要保持高电平，以避免芯片处于“复位”状态。'
- en: '**Pin 5 Control Voltage** This pin is used to control the threshold voltage
    of the Threshold pin. This can be useful when you want to adjust the frequency
    of the circuit without changing the values of R1, R2, and C1\. For this circuit,
    you can leave it unconnected. Sometimes you’ll see this pin connected with a capacitor
    to ground; this is a way to keep any noise on it from influencing the frequency.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 5 控制电压** 该引脚用于控制阈值引脚的阈值电压。当你想调整电路的频率而不改变 R1、R2 和 C1 的值时，这个引脚非常有用。对于这个电路，你可以将其不连接。有时你会看到这个引脚通过一个电容与地面连接；这种方式是为了防止其上的噪声影响频率。'
- en: '**Pin 6 Threshold** This pin sets the output back to low when the voltage goes
    high (above two-thirds of V[CC]).'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 6 阈值** 当电压升高（超过 V[CC] 的三分之二）时，该引脚将输出恢复为低电平。'
- en: '**Pin 7 Discharge** This pin is unconnected when output is high, and it’s connected
    to ground when output is low.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 7 放电** 当输出为高电平时，该引脚未连接；当输出为低电平时，它连接到地面。'
- en: '**Pin 8 V[CC] Supply** This is the positive power supply pin and can take a
    voltage between 5 and 15 V.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引脚 8 V[CC] 电源** 这是正电源引脚，能够承受 5V 到 15V 之间的电压。'
