- en: Chapter 13. Follow the WEBrick Road
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第13章 跟随 WEBrick 路
- en: Ruby and the Internet
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Ruby 和互联网
- en: The King and Queen burst through the Refactory exit and into the bright late-afternoon
    sunshine, Ruben and Scarlet following hot on their heels. Ahead of them, the WEBrick
    road stretched far away, its dark red bricks glowing softly. In the distance,
    they could make out the hunched shapes of the four mysterious villains retreating,
    and farther still, the wall that marked the outer edge of the kingdom.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 国王和王后从炼造厂的出口冲出来，走进明亮的傍晚阳光中，鲁本和斯卡雷特紧随其后。在他们前方，WEBrick 路延展得很远，深红色的砖块在阳光下微微发光。在远处，他们可以看见四个神秘的坏蛋形影不离地撤退，再远一点，是标志着王国边界的高墙。
- en: “They’re so fast!” Ruben gasped, his hands on his knees. “We’ll never be able
    to catch them!”
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: “他们太快了！”鲁本喘着气，手扶在膝盖上。“我们永远也追不上他们！”
- en: “Never say never,” Rusty said, jogging up behind them. “There *must* be something
    we can do.”
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: “永远不要说不可能，”拉斯提边说边跑到他们身后。“我们*一定*可以做点什么。”
- en: The Queen turned to him. “Is there any way to shut down the WEBrick road?” she
    asked.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 王后转向他。“有没有办法关闭 WEBrick 路？”她问。
- en: '![image with no caption](../Images/httpatomoreillycomsourcenostarchimages2160075.png.jpg)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![image with no caption](../Images/httpatomoreillycomsourcenostarchimages2160075.png.jpg)'
- en: Rusty thought for a moment. “I’m not sure,” he said, “but I have an idea.” He
    flipped up all the pages of his clipboard and pulled out a thin piece of metal
    with a familiar-looking screen. “This is my portable Computing Contraption,” he
    said. “My workers and I will go on ahead and try to catch these snakes. In the
    meantime, if there’s anything you can do to shut down the road and keep them from
    escaping, you can do it on this little computer.”
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 拉斯提想了想。“我不太确定，”他说，“但我有个主意。”他翻开了工作簿的所有页面，拿出一块带有熟悉屏幕的薄金属片。“这是我的便携计算装置，”他说。“我和我的工人们会继续前进，尽力抓住这些坏蛋。与此同时，如果你们能做点什么来关闭这条路，防止他们逃跑的话，可以用这个小计算机。”
- en: “Right!” said Scarlet, taking the hand-held computer from the Foreman. Rusty
    gave her a wink, then motioned to the men and women of the Refactory who were
    rapidly pouring out of the exit. “This way, everyone! Let’s try to head these
    villains off! Move, move, move!”
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: “对！”斯卡雷特说道，接过工头的手持计算机。拉斯提向她眨了眨眼，然后示意炼造厂的男女工人迅速从出口涌出。“这边，大家！我们要尽力阻止这些坏蛋！快，快，快！”
- en: As the Refactory workers ran down the deep red road, the King, the Queen, Scarlet,
    and Ruben huddled around the Foreman’s portable Computing Contraption.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 当炼造厂的工人们跑下深红色的道路时，国王、王后、斯卡雷特和鲁本围在工头的便携计算装置旁。
- en: “Okay, first things first,” said Scarlet. “How can we shut down the road?”
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: “好，首先要做的是什么？”斯卡雷特说道。“我们怎么才能关闭这条路？”
- en: The King tugged on his fluffy white beard. “It seems to me,” he said, “that
    we should first check to be sure the road is working properly! If it’s already
    off for some reason, we can join Rusty’s team up ahead and apprehend these goons.”
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 国王拉了拉他蓬松的白胡子。“在我看来，”他说，“我们应该先检查一下这条路是否正常工作！如果它因为某些原因已经关闭，我们可以和拉斯提的队伍会合，去抓住这些坏蛋。”
- en: Scarlet and Ruben looked at each other. “That’s . . . actually a great idea,”
    Ruben said. “How do we test to see if the road is open?”
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 斯卡雷特和鲁本互相看了一眼。“那是……其实是个好主意，”鲁本说道。“我们怎么测试这条路是否通畅？”
- en: “Well,” said the King, “the WEBrick road, like all things in the kingdom, runs
    on Ruby, and it’s the main connection between the kingdom and the rest of the
    world. If we can use Ruby to check whether we can get information from outside
    the kingdom, we’ll know if the road is working.”
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，”国王说道，“WEBrick 路就像王国中的一切一样，依赖 Ruby 运行，它是王国与外界之间的主要连接。如果我们能用 Ruby 检查是否能够从王国外部获取信息，那我们就能知道这条路是否正常工作。”
- en: “That’s it!” said Ruben. “If we can connect to the Internet with Ruby, then
    we’ll know the road is open!”
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: “就是这个！”鲁本说道。“如果我们能用 Ruby 连接互联网，那我们就知道这条路是通畅的！”
- en: “But how do we do that?” said Scarlet. “I feel like I know Ruby pretty well
    now, but I don’t even know where to begin with connecting to the Internet.”
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: “但我们怎么做呢？”斯卡雷特说道。“我觉得我现在对 Ruby 已经挺熟悉了，可是我根本不知道从哪里开始连接互联网。”
- en: “I think I know a way,” said the Queen. “You see, connecting to the Internet
    is just like connecting to a file—you just have to tell Ruby the right way to
    do it! May I?” she asked. Scarlet nodded and handed the Queen the portable Computing
    Contraption. The Queen began to type.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: “我想我知道怎么做了，”王后说道。“你看，连接到互联网就像是连接到一个文件——你只需要告诉 Ruby 该怎么做就行！可以吗？”她问。斯卡雷特点点头，将便携式计算装置递给了王后。王后开始打字。
- en: “Remember how we could write our code in separate Ruby files, then use `require`
    to pull one script’s code into another?” the Queen asked. Scarlet and Ruben nodded.
    “Well,” the Queen continued, “it turns out there are little bundles of files that
    come with Ruby that we can `require`, too!”
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: “记得我们如何将代码写在不同的Ruby文件中，然后用`require`将一个脚本的代码引入到另一个文件吗？”女王问。Scarlet和Ruben点了点头。“嗯，”女王继续说，“其实Ruby自带了一些小文件包，我们也可以用`require`来加载！”
- en: “There are?” asked the King, incredulous. “Absolutely!” said the Queen. “You
    can think of these bundles of files as tiny libraries of code that we can use
    in our own projects. They’re called *gems*.”
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: “真的有？”国王问，难以置信。“当然！”女王说。“你可以把这些文件包看作是我们可以在自己项目中使用的代码小库，它们被称为*gems*。”
- en: “That’s right! I think I’ve heard of Ruby gems before,” Ruben said. “Is there
    a gem for connecting to the Internet?”
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: “没错！我好像听说过Ruby gems，”Ruben说。“有没有用于连接互联网的gem？”
- en: Using the open-uri Ruby Gem
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用open-uri Ruby Gem
- en: 'The Queen nodded. “The `open-uri` gem,” she said. “It lets your Ruby code open
    Internet sites the same way it can open files! Once we `require` it in our IRB
    session, we’ll be able to do all sorts of wonderful things.” She typed into the
    Computing Contraption:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 女王点点头。“`open-uri` gem，”她说，“它让你的Ruby代码能够像打开文件一样打开互联网网站！一旦我们在IRB会话中`require`了它，我们就能做很多很棒的事情。”她在计算装置上输入：
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: She handed the little machine back to Scarlet. “Loaded up and ready to go!”
    she said.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 她把小机器递给了Scarlet。“已经加载好，准备就绪！”她说。
- en: Scarlet looked at the screen. “Don’t I need `'./open-uri'`, not just `'open-uri'`?”
    she asked.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Scarlet看着屏幕。“难道我不需要`'./open-uri'`，而不是仅仅`'open-uri'`？”她问。
- en: “Not for gems!” said the Queen. “That’s true for files you create, but if you’re
    requiring a gem, you can just type the name as a string. One of the many things
    Ruby does for you is keep track of where gems are installed on your computer.
    Since it already knows where to find them, you don’t need to look in the current
    directory with `./`. Just type the name of the gem, and Ruby does the rest.”
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: “Gem不需要！”女王说。“这是你自己创建的文件才需要，但如果你`require`一个gem，你只需要像字符串一样输入它的名称。Ruby为你做的一件事就是追踪gem在你电脑上的安装位置。既然它已经知道去哪里找gem，你就不需要用`./`去查找当前目录了。只需要输入gem的名字，Ruby就会做剩下的事。”
- en: “Perfect!” said Scarlet. “Now we just need a website to test whether the WEBrick
    road is working.”
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: “完美！”Scarlet说。“现在我们只需要一个网站来测试WEBrick通道是否正常工作。”
- en: “Aha!” said the King, raising a finger in the air. “We can test it with my favorite
    website!”
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: “啊哈！”国王说，举起了一根手指。“我们可以用我最喜欢的网站来测试它！”
- en: “Which one is that?” asked Scarlet, poised to type into the keyboard.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: “那是什么？”Scarlet问，准备在键盘上敲字。
- en: “*Example.com*!” the King said, beaming. The Queen rolled her eyes.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: “*Example.com*！”国王说，满脸笑容。女王翻了个白眼。
- en: “It’s as good as any,” Scarlet admitted, and she typed into the tiny Computing
    Contraption.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: “这也不赖，”Scarlet承认，并开始在那个小小的计算装置上输入。
- en: Note
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*You’ll need to be connected to the Internet for this code to work! Go ahead
    and grab your local adult if you need help connecting to the Internet.*'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '*为了让这段代码正常工作，你需要连接到互联网！如果需要帮助连接互联网，可以找个成年人帮忙。*'
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: “First,” Scarlet said, “we’ve used the `open` method to tell Ruby to create
    an object based on the website of the URL we entered. Then we can just use the
    `.read` method as we did on a regular text file, and that will give us the contents
    of the site at *[www.example.com](http://www.example.com)*!”
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: “首先，”Scarlet说，“我们用`open`方法告诉Ruby根据我们输入的URL网站来创建一个对象。然后，我们就可以像操作普通文本文件那样使用`.read`方法，这样就能获得*
    [www.example.com](http://www.example.com) *网站的内容！”
- en: '[PRE2]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The screen quickly filled with code from the *example.com* website.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 屏幕很快显示出了来自*example.com*网站的代码。
- en: “It’s working!” Scarlet said. “The WEBrick road must be turned on. Now we just
    need to find a way to shut it down!”
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: “它能用了！”Scarlet说。“WEBrick通道必须打开。现在我们只需要找到方法来关闭它！”
- en: Ruben thought for a moment. “Hey, wait,” he said, “does the kingdom request
    *and* send information through the WEBrick road?”
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Ruben想了想。“嘿，等一下，”他说，“王国是通过WEBrick通道来请求*并*发送信息的吗？”
- en: “It does,” said the King.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: “确实能行，”国王说。
- en: “Does that mean there’s some kind of *web server* running?” Ruben asked.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: “那是不是意味着有某种*Web服务器*在运行？”Ruben问。
- en: The Queen snapped her fingers. “Ruben, you’re a genius!” she said. Ruben blushed
    slightly. The Queen turned to Scarlet. “Not only is there a web server running,
    but it’s a *WEBrick web server*.” She began talking quickly and gesturing excitedly.
    “The WEBrick server is a special piece of Ruby code that sends information out
    of the kingdom. You see, when you visit a website, you’re asking a web server—that
    is, a computer somewhere on the Internet—for information. Well, when people on
    the Internet want information about our kingdom, our very own WEBrick web server
    sends it!”
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 女王打了个响指。“鲁本，你真是个天才！”她说道。鲁本微微脸红。女王转向斯嘉丽。“不仅有一个网页服务器在运行，而且它是一个*WEBrick 网页服务器*。”她开始快速讲解并兴奋地做着手势。“WEBrick
    服务器是 Ruby 的一段特殊代码，用来将信息从王国发送出去。你看，当你访问一个网站时，你实际上是在向一个网页服务器——也就是某个在互联网上的计算机——请求信息。好吧，当互联网上的人们想要了解我们的王国时，我们自己的
    WEBrick 网页服务器就会发送出去！”
- en: Note
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注释
- en: '*The WEBrick server isn’t something that exists only in the kingdom—that’s
    the real name of the Ruby web server you’re using right on your own computer!*'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '*WEBrick 服务器不仅仅存在于王国里——这就是你在自己计算机上使用的 Ruby 网页服务器的真正名称！*'
- en: “And if that web server is turned off . . .” Ruben began. “. . . then nothing
    and no one can get out of the kingdom!” Scarlet finished.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: “如果那个网页服务器被关闭……”鲁本开始说道。“……那么王国里的任何东西都无法外出！”斯嘉丽补充道。
- en: “Now we just need to figure out how to find the server to shut it down,” Ruben
    said.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们只需要搞清楚如何找到服务器来关闭它，”鲁本说道。
- en: “Well,” said the King, kicking at a bit of dust, “I actually might be able to
    help with that. You see, I lose things so frequently that I’ve gotten to know
    the Computing Contraption’s search function very well.”
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，”国王踢了踢一块灰尘，“其实我可能能帮上忙。你看，我丢东西太频繁了，已经非常熟悉计算机装置的搜索功能了。”
- en: “Perfect!” said Scarlet. “What do we think the file is called?”
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: “太完美了！”斯嘉丽说道。“我们认为那个文件应该叫什么？”
- en: Investigating the Kingdom’s Web Server
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调查王国的网页服务器
- en: “Well, you might want to search for *WEBrick* or *server*,” the King said. “That’s
    what I’d do, at any rate.”
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，你可能想搜索一下*WEBrick*或者*server*，”国王说道。“无论如何，我会这么做。”
- en: Scarlet nodded and pressed a few keys, searching for the file. She squinted,
    shook her head, typed, sighed, thought, and typed some more.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 斯嘉丽点点头，按了几个键，开始搜索文件。她眯起眼睛，摇了摇头，打了几个字，叹了口气，思考了下，又继续打字。
- en: “I think I’ve got it!” she finally said. “I found a file called *server.rb*.”
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: “我想我明白了！”她终于说道。“我找到一个叫*server.rb*的文件。”
- en: “Open it, open it!” said Ruben, standing on tiptoe to see the screen better.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: “打开它，打开它！”鲁本站在脚尖上，努力更清楚地看到屏幕。
- en: 'Scarlet opened the *server.rb* file, and this is what they saw:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 斯嘉丽打开了*server.rb*文件，这就是他们看到的内容：
- en: '[PRE3]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: “Let’s see,” said Scarlet. “It looks like the first two lines `require` the
    `webrick` gem and include the `WEBrick` module.”
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们看看，”斯嘉丽说道。“看起来前两行`require`了`webrick` gem，并引入了`WEBrick`模块。”
- en: “That looks right to me,” said Ruben. “Then it looks like the next few lines
    create a new WEBrick server. I’m not sure what the `port` is for, but it’s set
    to the number `3000`. What does the `Dir.pwd` part mean?”
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: “这看起来对我来说没问题，”鲁本说道。“那么接下来的几行代码似乎创建了一个新的 WEBrick 服务器。我不确定`port`是做什么的，但它被设置为数字`3000`。`Dir.pwd`那部分是什么意思？”
- en: “I think I know,” said the Queen. “Just like Ruby uses the `File` class for
    methods that work on files, it uses the `Dir` class for methods that work on *directories*,
    which is just a fancy way of saying *folders*.” The Queen pointed to the screen.
    “The `pwd` method returns the *present working directory*, so `Dir.pwd` is just
    Ruby’s way of saying ‘this folder right here.’ The web server is running, and
    it’s sending information out of this folder!”
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: “我想我明白了，”女王说道。“就像 Ruby 使用`File`类来处理文件的方法一样，它使用`Dir`类来处理*目录*的方法，目录其实就是*文件夹*的意思。”女王指着屏幕说道。“`pwd`方法返回*当前工作目录*，所以`Dir.pwd`其实就是
    Ruby 表示‘就在这个文件夹’的方式。网页服务器正在运行，并且正在从这个文件夹中发送信息！”
- en: “Okay!” said Scarlet. “We’ve just got to shut it down, and I think I see a clue.
    The `trap('INT') { server.shutdown }` line—what does that do?”
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: “好的！”斯嘉丽说道。“我们只需要关掉它，我觉得我找到了线索。那行`trap('INT') { server.shutdown }`——那是做什么的？”
- en: The Queen studied the screen for a minute. “If I remember correctly, that’s
    Ruby’s way of saying that when it gets an *interrupt signal*, it will shut down
    the server!”
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 女王研究了屏幕一会儿。“如果我没记错的话，那是 Ruby 的方式来表示当它收到一个*中断信号*时，它将关闭服务器！”
- en: “An interrupt signal?” Ruben asked. “Does that mean we have to tell the server
    to quit running?”
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: “中断信号？”鲁本问道。“那是不是意味着我们必须告诉服务器停止运行？”
- en: “Exactly,” said the Queen. “But how?”
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: “没错，”女王说道。“但是，怎么做呢？”
- en: '“Hold down the CTRL key and the C key at the same time!” the King suddenly.
    Everyone turned to look at him. “Just do it!” he urged, waving his hands in the
    air. “We haven’t a moment to lose!” Scarlet nodded and immediately pressed the
    keys, and this is what she saw:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: “同时按住CTRL键和C键！”国王突然说道。所有人都转过头看向他。“就这么做！”他催促道，挥舞着双手。“我们不能浪费一秒钟！”斯嘉丽点点头，立即按下了键盘，接着她看到的情景是：
- en: '[PRE4]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: “We did it! We did it!” Scarlet and Ruben jumped up and down and hugged each
    other.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: “我们成功了！我们成功了！”斯嘉丽和鲁本跳了起来，互相拥抱。
- en: The Queen turned to the King, smiling. “How on *Earth* did you know how to do
    that?” she asked him.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 王后转向国王，微笑着问：“你怎么知道怎么做的？”她问道。
- en: The King smiled sheepishly. “Well, I manage to break my Computing Contraption
    so often, I’ve learned to use CTRL-C to stop programs!” They all burst into laughter.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 国王尴尬地笑了笑。“嗯，我经常弄坏我的计算机设备，所以我学会了使用CTRL-C来停止程序！”大家都笑了起来。
- en: “Now that the server is shut down,” Scarlet said, “nothing and no one can get
    out of the kingdom! Quick, let’s get down the WEBrick road and see if we stopped
    the bad guys in time!”
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: “现在服务器已经关闭，”斯嘉丽说，“没有任何人和物能够离开这个王国！快，我们得赶紧跑到WEBrick通道去看看，看看我们是不是及时阻止了那些坏人！”
- en: The four of them hurried down the bright red path, hoping against hope that
    they’d closed the WEBrick road in time. In the distance, they could see the huge
    group of Refactory workers milling around. As they got closer, they could start
    to pick out individual workers, then faces. Soon they were close enough to see
    that Rusty was frantically waving them over, and just beyond him in the center
    of the group were the four hooded hooligans!
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 他们四个人匆匆沿着鲜红的道路跑去，心里希望自己及时关闭了WEBrick通道。从远处看，他们看到一大群Refactory工人在四处走动。随着他们靠近，他们开始辨认出个别工人，再到人脸。不久，他们已经接近到足以看清楚，看到Rusty正疯狂地挥手示意他们过来，而就在他旁边，四个戴着兜帽的恶棍正站在人群中央！
- en: “Great coats! Sweet breakfast gravy! Glorious corn muffins! We’ve got them!”
    cried the King, nearly weeping with joy.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: “太棒了！美味的早餐肉汁！辉煌的玉米松饼！我们抓住他们了！”国王几乎激动得泪流满面。
- en: As they ran up to the group, the Foreman turned to them, beaming. “Your Majesty!
    Your Highness!” he said, addressing the King and Queen in turn. “I don’t know
    how you did it, but you shut down the WEBrick road long enough for us to catch
    these villains! They were pulling on the gates to the kingdom wall, trying to
    escape, when we cornered them here.” He crossed his arms and smiled, his entire
    big bushy beard rising on his face. “I’m pleased to formally hand them over to
    you.”
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 当他们跑到人群前面时，工头转向他们，满脸笑容。“陛下！殿下！”他依次向国王和王后致意。“我不知道你们是怎么做到的，但你们关停了WEBrick通道，给我们足够的时间抓住了这些恶棍！他们当时正试图拉扯王国墙上的大门，想要逃走，结果我们把他们困在了这里。”他交叉双臂，笑了笑，浓密的胡须在脸上微微晃动。“我很高兴正式把他们交给你们。”
- en: “Thank you, Rusty,” said the Queen. The King and Queen moved into the center
    of the group, where two Refactory workers each held one of the four mysterious
    figures. Ruben and Scarlet followed close behind.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: “谢谢你，Rusty，”王后说道。国王和王后走到人群中央，两个Refactory工人各自抓住四个神秘人物中的一个。鲁本和斯嘉丽紧随其后。
- en: “You scoundrels have been creating utter pandemonium in our kingdom!” the King
    said.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: “你们这些混蛋在我们的王国里制造了彻底的混乱！”国王说道。
- en: “And depriving all the citizens in the kingdom of their Purple Panda-monium
    Parade,” the Queen said, frowning.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: “而且它们剥夺了王国所有市民的紫色熊猫游行，”王后皱着眉头说道。
- en: “Yes, precisely,” said the King. “And we’ve had enough of it! It’s time for
    you to reveal who you *really* are.” The King nodded to the Refactory workers.
    Each placed a hand on either side of each prankster’s hood.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，正是如此，”国王说道。“而且我们受够了！现在是你们揭开你们*真实*身份的时候了。”国王向Refactory工人们点了点头。每个工人都把手放在每个恶作剧者的兜帽两侧。
- en: “On my count. One . . . two . . . two and a half . . . *three*!” cried the King,
    and the workers yanked back the hoods. The crowd gasped. Standing before them,
    flicking their tongues and hissing, were four enormous snakes!
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: “按照我的数点。一...二...二又半...*三*！”国王喊道，工人们一把拉开了恶棍的兜帽。人群惊呼一声。站在他们面前，吐着舌头，发出嘶嘶声的，是四条巨大的蛇！
- en: '![image with no caption](../Images/httpatomoreillycomsourcenostarchimages2160077.png.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![没有说明的图片](../Images/httpatomoreillycomsourcenostarchimages2160077.png.jpg)'
- en: “Literal snakes!” said Rusty. “How about that?”
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: “真是字面意义上的蛇！”Rusty说道。“怎么样？”
- en: “Pythonssss, actually,” hissed the snake nearest to Rusty.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: “实际上是Pythonssss，”那条离Rusty最近的蛇嘶嘶地说道。
- en: “Sweet hibbeldy-jibbeldy! A talking snake!” said the King, hiding behind a particularly
    brawny Refactory worker.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: “甜美的嗨比尔迪-吉比尔迪！一条会说话的蛇！”国王说，躲在一名特别强壮的Refactory工人后面。
- en: “The name issss Terry,” the snake said. “Terry One, actually.” She gestured
    with her head to the snake next to her. “That’s John,” she said. “Then Terry Two,
    then Graham.”
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: “‘名字是Terry，’”那条蛇说道。“‘实际上是Terry One。’”她用头指了指旁边的蛇。“‘那是John，’”她说道。“‘然后是Terry Two，再是Graham。’”
- en: “Pleassssed to meet you,” said John.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: “‘很高兴见到你，’”约翰说道。
- en: “Well, we’re certainly not pleased to meet *you*,” said the King, recovering
    his courage. “What in the name of the Carmine Pines did you think you all were
    *doing*, causing such trouble?” He started counting on his fingers. “Stealing
    my string! Clogging the Mysterious Pipe! Looping up the Loop! Crashing the Hashery’s
    Computing Contraption! Hacking into the Queen’s machine! De-purpling the pandas!
    The list goes on and on!”
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: “‘嗯，我们当然不高兴见到*你们*，’”国王恢复了勇气说道。“‘你们到底在*做什么*，制造这么大的麻烦？’”他开始用手指算。“‘偷走我的字符串！堵塞神秘管道！搞乱循环！摧毁哈希计算装置！黑入女王的机器！剥夺熊猫的紫色！这份清单一长串！’”
- en: Graham looked around uneasily. “Your ssssstring? We didn’t steal your ssstring!”
    he said.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: Graham不安地环顾四周。“‘你的字符串？我们没偷你的字符串！’”他说道。
- en: The King threw up his hands. “Okay, fine, maybe that was me,” he said, “but
    the rest was all your doing. I demand an explanation!”
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 国王举起了双手。“好吧，算了，也许那是我做的，”他说，“但剩下的都是你们干的。我要求一个解释！”
- en: Terry Two lowered her head; Ruben and Scarlet couldn’t tell if she was angry
    or sad. “It’s becaussse everyone was all about Ruby, Ruby, Ruby!” she said. “No
    one wanted to use Python anymore.”
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Terry Two低下了头；Ruben和Scarlet分不清她是生气还是难过。“因为大家都只顾着Ruby，Ruby，Ruby！”她说道。“没人愿意再使用Python了。”
- en: “Python?” asked Ruben.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: “‘Python？’Ruben问道。”
- en: “You ssssee?” said Terry Two, nodding her head at Ruben. “The boy’s never even
    heard of Python!”
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: “‘你看到了吗？’”Terry Two说道，朝Ruben点了点头。“这孩子连Python都没听说过！”
- en: “What is it?” Ruben asked, inching forward.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: “‘它是什么？’Ruben问道，向前探了探身子。”
- en: Terry Two sighed. “A programming language, very much like Ruby,” she said.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: Terry Two叹了口气。“一种编程语言，非常像Ruby，”她说道。
- en: “But better,” John piped up.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: “‘但更好，’约翰插嘴说道。”
- en: “Oh, much better,” Terry One chimed in.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: “‘哦，完全更好，’Terry One插话道。”
- en: “But no one in the kingdom uses it,” Terry Two continued.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: “‘但王国里没人用它，’”Terry Two继续说道。
- en: “We thought if we got people thinking that sssssomething was wrong with Ruby,
    they might make the sssswitch.”
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: “‘我们认为如果能让人觉得Ruby有什么问题，他们可能会转换过来，’”他说。
- en: Scarlet stepped closer to the pythons, angry. “You should have tried to show
    how good a language Python is, not try to make people think there’s something
    wrong with Ruby!” she scolded.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Scarlet愤怒地走近了这些蛇。“你们应该展示Python有多好，而不是让人觉得Ruby有什么问题！”她斥责道。
- en: John shook his head sadly. “No one would lissssssten,” he said, “so we thought
    our besssst chance would be to attract attention, even if it had to be negative.”
    No one could be quite sure, but it looked like the enormous snake had tears in
    his eyes.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 约翰悲伤地摇了摇头。“没有人愿意听，”他说道，“所以我们认为最好的机会就是吸引注意，即使它必须是负面的。”没有人能确定，但看起来那条巨大的蛇眼里似乎含着泪水。
- en: The King’s expression softened a bit. “You all know Python?” he asked.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 国王的表情稍微缓和了一些。“你们都知道Python吗？”他问道。
- en: The pythons looked at each other, clearly confused. They slowly nodded.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 蛇们互相看了看，显然很困惑。它们缓慢地点了点头。
- en: “Tell me about it,” said the King.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: “‘告诉我一下，’”国王说道。
- en: “It’s quite a wonderful language,” said Graham. “It has sssstrings and numbers
    and Booleans.”
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: “‘它是一个非常棒的语言，’Graham说道，‘它有字符串、数字和布尔值。’”
- en: “Arrays, too!” added Terry One.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: “‘数组，也有！’”Terry One补充道。
- en: “Objects and methods and classsses,” said John, “and you can write programs
    that do anything you like.”
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: “‘对象、方法和类，’约翰说道，‘你可以编写任何你喜欢的程序。’”
- en: The King nodded, walking in a small circle. “It seems to me,” he said, “that
    Ruby and Python aren’t all that different, then.”
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 国王点了点头，绕着小圈走。“看起来，Ruby和Python其实没有那么大区别，’”他说道。
- en: The pythons were silent for a moment. “Perhapssss not,” John said, finally.
    “But if that’ssss so, why not use Python instead of Ruby?”
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 蛇们沉默了一会儿。“或许……不是，”约翰终于说道，“但如果是那样，为什么不使用Python而不是Ruby呢？”
- en: “I suppose my question,” the King said, “is why do you need to choose? Why not
    write whichever you prefer?” Terry One opened her mouth to speak, but the King
    continued. “In fact,” he said, “what if I told you that it’s possible to write
    Ruby that *turns into Python*?”
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: “‘我想我真正的问题是，’”国王说道，“‘为什么非得选择其中一个呢？为什么不写你更喜欢的那个呢？’”Terry One张开嘴准备发言，但国王继续说道。“‘其实，如果我告诉你，可以写出*变成Python的Ruby*，你们会怎么想？””
- en: There was total silence. Ruben, Scarlet, and the Queen shot one another amazed
    looks.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 一时间寂静无声。Ruben、Scarlet和女王互相交换了一些惊讶的目光。
- en: “You see,” said the King, “I’ve never been a very good programmer. Programming
    has never come easily to me. So I spend much of my time practicing and reading
    articles and sample code, trying to become better.” He reached into his robe and
    pulled out a small scroll. “During my research, I discovered a truly amazing bit
    of code that can transform Ruby code into instructions that Python can understand.
    You can write Ruby, and Python programs will come out! Isn’t that amazing?” he
    asked, becoming excited. “You can write *any language* you want *any way* you
    want, and you can still tell stories to a computer that will make it do anything
    you like. That’s the beauty of programming!”
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: “你看，”国王说道，“我一直不是个很好的程序员。编程对我来说从来都不容易。所以我花了很多时间练习，阅读文章和示例代码，试图变得更好。”他说着，从长袍里拿出了一卷小卷轴。“在我的研究过程中，我发现了一段非常神奇的代码，它能将Ruby代码转化为Python可以理解的指令。你可以写Ruby，Python程序就会出来！这不是很棒吗？”他激动地说道。“你可以用*任何语言*，*任何方式*，去编写代码，并且你仍然可以对计算机讲故事，让它做你想做的一切。这就是编程的魅力！”
- en: The pythons didn’t say anything for a moment. Finally, Terry One spoke up. “I
    . . . hadn’t thought of it that way before,” she said.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 蟒蛇们沉默了一会儿。最终，泰瑞·一开口了。“我……以前从没这么想过，”她说。
- en: “I suppose what I’m trying to say,” said the King, “is that all curiosity, all
    honest desire to learn, all sharing and teaching, is *always* welcome in this
    kingdom. Yes, we happen to use Ruby to run our day-to-day lives. Yes, it’s the
    language that many of our citizens know and prefer and even *think* in. But that
    doesn’t make it the only way, and it certainly doesn’t mean we think there’s nothing
    to learn from Python!”
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: “我想我想说的是，”国王说道，“在这个王国里，所有的好奇心，所有的诚挚学习欲望，所有的分享和教学，*永远*是受欢迎的。是的，我们确实用Ruby来处理我们的日常事务。是的，这是我们许多公民所知道、喜欢，甚至*思考*的语言。但这并不意味着它是唯一的方式，也绝不意味着我们认为从Python中学不到任何东西！”
- en: Rusty cupped his hands around his mouth. “Hear, hear!” he said, and the entire
    crowd burst into applause.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 拉斯蒂把手捧在嘴边。“好极了！”他说，全场爆发出掌声。
- en: “What do you say?” the King asked gently, approaching the four pythons. “Would
    you like to help us learn a bit about Python, and we can teach you some Ruby?”
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: “你们怎么说？”国王温和地问，走向四条蟒蛇。“你们愿意帮我们了解一些Python吗？我们可以教你们一些Ruby。”
- en: The pythons exchanged glances, then began to nod.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 蟒蛇们互相交换了眼神，然后开始点头。
- en: “We’re ssssso terribly ssssorry,” Graham said. “We were just ssssad and frusssstrated,
    and we didn’t know how to tell everyone how we felt.”
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: “我们真的非常抱歉，”格雷厄姆说。“我们只是感到伤心和沮丧，不知道该如何表达我们的感受。”
- en: “We hope we didn’t wreck anything too badly,” Terry Two said.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: “我们希望没弄坏什么东西，”泰瑞·二说道。
- en: “We’ll help repair anything we broke,” Terry One added.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: “我们会帮忙修复任何我们弄坏的东西，”泰瑞·一补充道。
- en: “I tried the hash at Hank’ssss Hashery,” John said. “It was the mosssst amazing
    food I’ve ever tasted. I’d help fix a hundred Ruby programs if I could eat there
    again!”
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: “我尝过汉克的哈希，”约翰说。“那是我吃过的最棒的食物。如果我能再去那里吃一顿，我愿意修复一百个Ruby程序！”
- en: “Then it’s settled!” the King said. He looked at the Queen, who smiled and nodded.
    He returned his gaze to the four pythons. “By the power vested in me by the many
    citizens of my kingdom, you are hereby officially pardoned of all wrongdoing!”
    He leaned forward slightly. “And if you’d like to come back to the palace for
    some cake and tea, that would be fine, too.”
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: “那就这么决定了！”国王说道。他看向王后，王后微笑着点了点头。他又把目光转向四条蟒蛇。“凭借我作为这个王国众多公民赋予我的权力，现正式赦免你们所有的过错！”他稍微向前倾了倾身。“如果你们想回宫殿来点蛋糕和茶水，那也可以。”
- en: The pythons nodded eagerly, overjoyed. “That would be sssssplendid,” said Terry
    One. “Thank you sssso much!”
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 蟒蛇们兴奋地点点头，欣喜若狂。“那太棒了，”泰瑞·一说道。“非常感谢！”
- en: The King held his arms over his head. “Everyone back to the Royal Palace!” he
    cried. “Cake and tea for everyone!”
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 国王举起双臂。“大家回到皇家宫殿！”他大喊。“大家都有蛋糕和茶！”
- en: A massive cheer went up in the crowd. The Refactory workers who had been holding
    the pythons released them, and the group swept the King, the Queen, Scarlet, and
    Ruben up onto their shoulders.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 人群中爆发出一阵巨大的欢呼声。那些一直控制着蟒蛇的重生厂工人将它们放开，大家将国王、王后、斯嘉丽和鲁本抬到肩膀上。
- en: “You really saved the day, Your Kingliness!” Scarlet said to the King. He dismissed
    the compliment with a wave of his hand.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: “你真是救了大忙，陛下！”斯嘉丽对国王说道。他挥了挥手，示意不必在意这份夸奖。
- en: “You kids did all the saving!” he said. “Without you, we’d never have solved
    this mystery and brought peace and prosperity back to the kingdom.”
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: “你们这些孩子救了大忙！”他说。“要不是你们，我们根本无法解决这个谜题，恢复王国的和平与繁荣。”
- en: “Let’s say we *all* had a piece of the pie,” said the Queen. “And speaking of!
    Let’s add a little pie to this cake-and-tea party.”
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: “假设我们*都*分了一块蛋糕，”女王说。“说到这个！我们来给这个蛋糕和茶的聚会加点儿派。”
- en: “Let’s!” said the King, who had been patting the pockets of his robe for the
    last several seconds. “Oh, turnips,” he said. “Now where did I put my string?”
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: “好啊！”国王说，他在过去的几秒钟里一直在拍打他长袍的口袋。“哦，萝卜，”他说。“我把我的线放哪儿了？”
- en: '![image with no caption](../Images/httpatomoreillycomsourcenostarchimages2160079.png.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![没有标题的图片](../Images/httpatomoreillycomsourcenostarchimages2160079.png.jpg)'
- en: Beyond the Kingdom Walls
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 超越王国的边界
- en: Holy cannoli! Pythons! I wouldn’t have seen that coming 42 miles away. I’ve
    still got so many questions! How did they sneak into the kingdom? What cool Python
    tricks do they know that a Ruby programmer like me could learn? And how did they
    manage to work a Key-a-ma-Jigger with no hands?
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我的天啊！蛇！我根本没料到会看到这个，距离还差 42 英里。我还有很多问题！它们是怎么潜入王国的？它们知道哪些酷炫的 Python 技巧，像我这样的 Ruby
    程序员能学到哪些？它们是怎么不借助手就能操作 Key-a-ma-Jigger 的？
- en: While I ponder these and other great mysteries, feel free to get in a little
    more practice with the WEBrick web server. Go ahead and create a new file called
    web_server.rb and type in the following code.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在我思考这些和其他伟大的谜题时，您可以继续练习使用 WEBrick 网络服务器。您可以创建一个名为 web_server.rb 的新文件，并输入以下代码。
- en: web_server.rb
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: web_server.rb
- en: '[PRE5]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: This code’s a bit different from the last version you saw, but there’s nothing
    here you haven’t seen! The only tricky bit is the `mount_proc` method, which is
    built into WEBrick. This tells the server how to respond to certain requests;
    in this case, if you go to the `/` URL on your computer, you should see the message
    assigned to `response.body`. Your computer’s built-in website is *http://localhost/*.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码与您之前看到的版本略有不同，但这里没有任何您没见过的内容！唯一需要注意的部分是内置于 WEBrick 中的`mount_proc`方法。这个方法告诉服务器如何响应某些请求；在本例中，如果您访问电脑上的`/`
    URL，您应该会看到分配给`response.body`的消息。您电脑的内建网站是*http://localhost/*。
- en: 'As usual, you can run your finished script by typing **`ruby web_server.rb`**
    in the terminal. Once you’ve started your script, you should see some numbers
    and text, like this:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 和往常一样，您可以通过在终端中输入**`ruby web_server.rb`**来运行完成的脚本。启动脚本后，您应该会看到一些数字和文本，如下所示：
- en: '[PRE6]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: (Your numbers will be slightly different, but the words should be pretty similar.)
    When you see the text appear, your web server is up and running! Open your favorite
    web browser (such as Chrome, Firefox, Internet Explorer, or Safari) and go to
    *http://localhost:3000/*. If everything’s working right, you should see `Your
    Ruby adventure is just beginning!` in the browser window. Crazy, right? Your first
    website has just been born! (I’m gonna name her Marigold.) When you’re done using
    your server, hold down CTRL-C in the terminal where WEBrick is running to shut
    it down.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: （您的数字可能会略有不同，但文字应该差不多。）当您看到文本出现时，您的网络服务器已经启动并运行！打开您最喜欢的网页浏览器（例如 Chrome、Firefox、Internet
    Explorer 或 Safari），然后访问*http://localhost:3000/*。如果一切正常，您应该会在浏览器窗口中看到`Your Ruby
    adventure is just beginning!`。疯狂吧？您的第一个网站刚刚诞生！（我打算给它起名叫 Marigold。）当您用完服务器后，在运行
    WEBrick 的终端中按住 CTRL-C 来关闭它。
- en: This web server is a pretty simple affair, and if I know you, you’re already
    thinking of ways to make it better. Well, don’t hold back! Feel free to play with
    the code in the *web_server.rb* file. (You’ll need to use CTRL-C to shut down
    the server and restart it each time you make changes in order to see them.) For
    example, you could start just by changing the `response.body` string, then move
    on to playing with the port number or adding more `mount_proc`s.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 这个网络服务器非常简单，如果我了解你们，你们肯定已经在考虑如何改进它了。那么，别客气！尽管去修改*web_server.rb*文件中的代码。（每次修改后，您需要使用
    CTRL-C 来关闭服务器并重启，以便查看修改效果。）例如，您可以从仅仅修改`response.body`字符串开始，然后尝试调整端口号或者添加更多的`mount_proc`。
- en: 'Here’s a hint: What if you add the following code to your *web_server.rb* file,
    then go to *http://localhost:3000/favorite_vegetable*?'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有个提示：如果您将以下代码添加到您的*web_server.rb*文件中，然后访问*http://localhost:3000/favorite_vegetable*，会发生什么呢？
- en: '[PRE7]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: If you want to see the gems that people all over the world have made available,
    you can visit the RubyGems website at *[http://rubygems.org/](http://rubygems.org/)*.
    For just about any task, someone has probably created a gem to do it, so you should
    always stop by RubyGems. Take your time to read through the information on the
    site, and you’ll be able to download other people’s gems and use them in no time!
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想查看世界各地的人们所创建的宝贵资源，可以访问 RubyGems 网站，网址是 *[http://rubygems.org/](http://rubygems.org/)*。几乎任何任务，都可能有人为此创建了
    gem，所以你应该时常光顾 RubyGems。花点时间浏览网站上的信息，你很快就能下载并使用别人创建的 gem！
- en: Speaking of sharing code, that magical little program that can convert Ruby
    to Python really does exist! It was written by a programmer named *why the lucky
    stiff* and can be found on *GitHub*, a website where people share the code they
    write with people all across the planet. You can find the GitHub website at *[https://github.com/](https://github.com/)*
    and the Ruby-to-Python project—called *unholy*—at *[https://github.com/whymirror/unholy/](https://github.com/whymirror/unholy/)*.
    (The code is very advanced, but if you keep at it, I think you’ll start to get
    it. I’ve yet to meet a brighter bulb!)
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 说到分享代码，那个能够将 Ruby 转换成 Python 的神奇小程序真的是存在的！它是由一位名叫 *why the lucky stiff* 的程序员编写的，可以在
    *GitHub* 网站找到，那里人们与全世界的人分享他们写的代码。你可以在 *[https://github.com/](https://github.com/)*
    找到 GitHub 网站，在 *[https://github.com/whymirror/unholy/](https://github.com/whymirror/unholy/)*
    找到 Ruby 转 Python 的项目——叫做 *unholy*。 (这段代码非常先进，但如果你坚持下去，我相信你会逐渐理解的。我还没遇到过比你更聪明的人！)
- en: You Know This!
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你已经知道这些啦！
- en: We took some of the code and concepts you already knew a few steps further in
    this chapter, so let’s take a second to make sure it all made sense.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们把你已经知道的部分代码和概念带到了一个新的层次，所以让我们稍微停一下，确保你能完全理解。
- en: 'You learned that we can use Ruby to get information about websites on the Internet
    by using the `open-uri` gem:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 你学到我们可以通过使用 `open-uri` gem 来获取互联网上网站的信息：
- en: '[PRE8]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: A *gem* is just a set of files that someone else created to make writing your
    Ruby programs easier. We can `require` gems into our programs just as we can `require`
    files we wrote ourselves, only we need to put a `./` before our filenames, and
    for gems, we can just write the name as a string after the `require` method call.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 *gem* 只是别人创建的一组文件，目的是让你编写 Ruby 程序变得更轻松。我们可以像 `require` 自己写的文件一样，在程序中 `require`
    gem，只是我们需要在文件名前加上 `./`，而对于 gem，我们只需要在 `require` 方法调用后以字符串的形式写出 gem 的名字。
- en: Feel free to try this code with other websites! Just be sure to get permission
    first, and be careful—some websites send back a *lot* of code, and it may fill
    up your terminal window.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 随时可以尝试这段代码与其他网站进行交互！只要确保事先获得许可，并小心——有些网站返回的代码可能非常多，可能会填满你的终端窗口。
- en: 'You also saw that we don’t have to settle for just *requesting* information;
    we can *serve* it to visitors using *web servers* like WEBrick:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 你还看到我们不仅仅是 *请求* 信息；我们可以通过像 WEBrick 这样的 *web 服务器*，将信息 *提供* 给访问者：
- en: '[PRE9]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You learned that we can modify web server code to write simple messages, that
    we can see the changes in our code by stopping and restarting the server, and
    that CTRL-C will let us stop our server (once we get it running) by typing `ruby
    server_file_name.rb` or calling `load 'server_file_name.rb'` from inside IRB.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 你学到我们可以修改 web 服务器代码来写简单的消息，看到代码中的变化，通过停止并重新启动服务器，且使用 CTRL-C 可以停止服务器（当我们把它运行起来后），只需输入
    `ruby server_file_name.rb` 或在 IRB 中调用 `load 'server_file_name.rb'`。
- en: Finally, we talked a little bit about using gems written by other people by
    visiting the RubyGems website (*[http://rubygems.org/](http://rubygems.org/)*)
    and reading and sharing code all over the world through the GitHub site (*[https://github.com/](https://github.com/)*).
    If you want to set up accounts on these sites, grab your nearest adult and ask!
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们稍微谈了一下如何通过访问 RubyGems 网站 (*[http://rubygems.org/](http://rubygems.org/)*)，使用其他人编写的
    gem，以及如何通过 GitHub 网站 (*[https://github.com/](https://github.com/)*)，与世界各地的人们分享和阅读代码。如果你想在这些网站上创建账户，可以找个成年人大人帮忙哦！
- en: Our story may be over, gentle reader, but that doesn’t mean I’m quite done blabbering
    yet. We covered a *lot* of Ruby magic in the last several hundred pages, and I’d
    be a terrible teacher, writer, and programmer if I just said, “Welp, see ya!”
    and left it at that. Take a deep breath, turn the page, and let’s spend just a
    few more sentences going over all the crazy, amazing, wonderful stuff we’ve learned.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的故事也许结束了，亲爱的读者，但这并不意味着我已经完全停下了喋喋不休的脚步。在过去的几百页中，我们涵盖了*大量*的 Ruby 魔法，如果我只是说一句“好了，再见！”然后就草草了事，那我就会是个糟糕的教师、作家和程序员了。深呼吸一下，翻开下一页，让我们再花几句话回顾一下我们学到的所有疯狂、令人惊叹、精彩的内容。
