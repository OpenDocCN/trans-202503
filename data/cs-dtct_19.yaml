- en: —20—
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: —20—
- en: Adding Suspects to the Search Tree
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 向搜索树中添加嫌疑人
- en: Frank studied the list of transfers for a few more minutes but failed to see
    anything suspicious. None of the recent transfer destinations were even remotely
    close to the capital, where most of the thefts had occurred. The nearest transfer
    had been to the city of Easterville—50 miles away—and the “Reason for Transfer”
    listed by the young officer’s captain had been “a persistent smell of feet.”
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 弗兰克再看了几分钟转账列表，但并未发现任何可疑之处。最近的转账目的地甚至离首都都远得很，而大多数盗窃案件发生在首都。最近的一次转账是去东斯特维尔市——50英里远——年轻官员队长列出的“转账原因”是“持续的脚臭。”
- en: “This is everyone?” Frank asked, turning to Notation.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: “就这些人吗？”弗兰克问，转向标注。
- en: “Yes,” said Notation defensively. “This is every officer who transferred between
    stations in the last year.”
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，”标注 defensively 地说。“这是过去一年中所有在不同站点之间调动的官员。”
- en: Frank frowned. The definition sounded wrong to him. It sounded incomplete. “What
    about initial transfers?” asked Frank.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 弗兰克皱了皱眉。那个定义在他听来不对，感觉不完整。“那初步转账怎么办？”弗兰克问。
- en: “From the academy?” asked Notation.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: “是学院的人吗？”标注问。
- en: “Yes,” said Frank. “What about transfers from the academy?”
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，”弗兰克说，“那学院的调动呢？”
- en: “Well,” said Notation. “Those would be probationary initial transfers. They
    would be recorded in different ledgers.”
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，”标注说，“这些是试用期的初步转账，会在不同的账簿中记录。”
- en: Frank nodded slowly. His mind raced.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 弗兰克缓缓点了点头，脑海中飞快地思考着。
- en: “I can get—” Notation started.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: “我可以去拿——”标注开始说。
- en: “No need,” Frank interrupted. “I promised the captain an update by this afternoon.
    I can pick up the ledgers then.”
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: “不需要，”弗兰克打断道。“我答应了队长今天下午会更新情况，到时候我可以拿到账簿。”
- en: “You’re going to see the captain?” asked Notation, surprised.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: “你要去见队长？”标注惊讶地问。
- en: “Updating your clients is part of the life of a private eye,” said Frank.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: “更新客户情况是私家侦探生活的一部分，”弗兰克说。
- en: “You can also tell the captain about Gretchen’s theory,” added Socks.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: “你还可以告诉队长关于格雷琴的理论，”索克斯补充道。
- en: “What theory?” asked Notation, her eyes darting between Frank and Socks.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: “什么理论？”标注问，眼睛在弗兰克和索克斯之间转来转去。
- en: “Frank didn’t tell you?” asked Socks.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: “弗兰克没告诉你吗？”索克斯问。
- en: “No,” said Notation, through clenched teeth, “he did not.” Her hands were balled
    into fists at her side, but her face clearly said that she would very much prefer
    to use one of them to punch Frank in the nose.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: “没有，”标注咬牙切齿地说，“他没有。”她的双手紧握成拳，放在身侧，但她的脸上明显写着她更想用其中一个拳头打弗兰克的鼻子。
- en: “My mentor Gretchen thinks there will be an attack on the castle tomorrow night,”
    said Socks.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: “我的导师格雷琴认为明晚城堡会遭到袭击，”索克斯说。
- en: “She does?” asked Notation. Then, turning to Frank, she added, “That seems like
    a useful piece of information. Why didn’t you tell me?”
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: “她真这么认为？”标注问道。然后她转向弗兰克，补充道，“那似乎是个有用的信息，为什么你没告诉我？”
- en: “It’s just speculation,” replied Frank with a shrug, but he avoided her eye.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: “这只是推测，”弗兰克耸耸肩回答，但他避开了她的目光。
- en: “I should come with you to see the captain,” said Notation.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: “我应该和你一起去见队长，”标注说。
- en: Frank balked. He hadn’t expected that. People usually dreaded updating Captain
    Donovan unless they could open the conversation with “Great news!” or “You’ll
    never guess what we found.” Going into his office with an update consisting of
    equal parts dead ends, unexplored leads, and life-threatening situations invited
    a loud and colorful lecture. Frank wouldn’t even be considering it if he didn’t
    need information himself.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 弗兰克愣住了，他没想到会这样。除非能以“好消息！”或“你猜不到我们发现了什么！”来开场，否则人们通常都很害怕向多诺万队长报告进展。带着一个包含无果结局、未探索线索和危及生命的情况的更新去见他，简直是自找麻烦，必定会迎来一番响亮而色彩斑斓的训斥。如果他自己不需要信息，他根本不会考虑去见队长。
- en: “I need you to follow up on something else,” said Frank after only a brief pause.
    “Parallelized search, remember?” He reached into his pocket and felt around but
    found only his notepad, a few food wrappers, and an old empty snail shell. The
    shell was a souvenir from his last case, a nasty affair involving a percussion
    band and numerous noise complaints. He pulled it from his pocket.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “我需要你跟进别的事情，”弗兰克在短短的停顿后说。“平行搜索，记得吗？”他伸手进兜里摸了摸，但只摸到笔记本、几个食品包装袋和一个空的老蜗牛壳。那只壳是他上次案件的纪念品，一个涉及打击乐队和众多噪音投诉的棘手案件。他把它从口袋里拿了出来。
- en: “See if you can find out anything about this,” he said.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: “看看你能不能查到什么关于这个的线索，”他说。
- en: “A shell?” Notation asked. “What does it have to do with the case?”
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: “一个壳？”标注问，“这和案件有什么关系？”
- en: “I don’t know,” Frank hedged. “But Glass Box Billy might.”
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: “我不知道，”弗兰克支吾道，“但是玻璃盒比利或许知道。”
- en: Reluctantly, Notation took the shell and studied it. As she turned it over in
    her hands, she muttered, “Why does it have to be Billy? He’s always impossible
    to find.”
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 不情愿地，Notation拿起了贝壳，仔细研究了起来。她翻转着贝壳，低声嘀咕：“为什么偏偏是比利？他总是找不到。”
- en: Frank turned to Socks, who was staring at the shell with a profoundly confused
    expression. “Can you maintain the binary search tree on our way to the station?”
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 弗兰克转向袜子，只见他盯着贝壳，神情极为困惑。“你能在我们去警局的路上保持二叉搜索树吗？”
- en: “Uh, sure,” said Socks. “But it would be easier to just build a new one.”
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，当然，”袜子说道，“不过直接建一个新的会更简单。”
- en: Frank shook his head. “We’d need all these ledgers for that, and I don’t feel
    like lugging them halfway across the city. They look heavy.”
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 弗兰克摇了摇头。“我们需要这些账簿才能做到这一点，而我可不想把它们拖到城市另一头去，它们看起来很沉。”
- en: At that, Notation interrupted her investigation of the shell to shoot him another
    nasty look.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这个时候，Notation中断了对贝壳的检查，投给他一个不友好的眼神。
- en: _____________________
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: _____________________
- en: Fifty-seven minutes later, Frank and Socks stood outside the police records
    office. The trip usually took less than 20 minutes, but they were slowed significantly
    by the large glowing binary search tree floating in front of Socks. Not only did
    it block his vision, causing him to trip over numerous ruts, but it was also the
    cause of much rubbernecking and endless questions from curious pedestrians, until
    Frank resorted to yelling “Out of the way! Dangerously unstable magic here,” as
    they walked. The warning worked quite well.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 五十七分钟后，弗兰克和袜子站在警察记录办公室外面。通常这段路程不到20分钟，但他们因为袜子前面漂浮的大型发光二叉搜索树而显著变慢。它不仅阻挡了袜子的视线，导致他摔了好几次，还引起了不少路人驻足观看并问个不停，直到弗兰克大喊：“让开！这里有危险的不稳定魔法”，这才得以平静下来。这个警告效果相当不错。
- en: '![image](../images/f0166-01.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0166-01.jpg)'
- en: “Don’t you need to speak with the captain?” asked Socks.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: “你不需要和队长说话吗？”袜子问道。
- en: “First we find our transfer,” said Frank. He never liked going into a meeting
    with a client empty-handed.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: “首先我们找到我们的转移，”弗兰克说。他从不喜欢空手去见客户。
- en: Every class at the police academy produced around 20 new officers, each of whom
    transferred to a station somewhere in the kingdom. As a result, the Ledger of
    Initial Assignments for the last 10 classes weighed at least 10 pounds. As with
    the other transfer ledgers, it was sorted by name rather than date.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 每个警察学院的班级大约培养20名新警员，每个警员会被分配到王国的某个警局。因此，过去10个班级的初始分配账簿至少有10磅重。与其他转移账簿一样，它是按姓名排序的，而不是按日期排序的。
- en: “It looks like we have a couple hundred transfers to add to the tree,” Frank
    said as he found an empty desk in the paperwork common room. Due to the standard
    combination of security needs and high volumes of paperwork, no one was allowed
    to work in the records vault itself. Instead, all police stations included one
    or more workrooms immediately adjacent to the record room, containing nothing
    more than long wooden tables and individual study carrels.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: “看起来我们有几百个转移要加到树上，”弗兰克一边说，一边在文件共享室找了个空桌子。由于安保需求和大量文件工作的标准组合，没人被允许在记录库内工作。相反，所有警察局都会有一个或多个紧挨记录室的工作间，里面除了长木桌和个人学习隔间外什么都没有。
- en: “We can’t just add nodes!” Socks exclaimed.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: “我们不能随便加节点！”袜子大叫道。
- en: “Of course we can,” said Frank. “Adding to a binary search tree is easy. Start
    at the top, search downward as though you’re looking for the element and, when
    you hit a dead end, add the new entry below that node.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: “当然可以，”弗兰克说，“向二叉搜索树添加节点很简单。从顶部开始，向下搜索，像是在寻找元素一样，当你遇到死路时，就把新条目加到那个节点下。”
- en: “Take this first transfer, 57 days ago. We start at the top. Because 57 is larger
    than the root node’s value of 55, we go to the right. Then we go left, because
    57 is less than 67\. Then we go left again, because 57 is less than 61\. Finally,
    comparing 57 to 59, we ought to go down to the left node again, but we can’t because
    there is no left child. So we add the new node as the left child of 59.”
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: “看这个第一次转移，57天前。我们从顶部开始。因为57大于根节点的值55，我们往右走。然后我们往左走，因为57小于67。接着我们再往左走，因为57小于61。最后，比较57和59，我们应该继续往左子节点走，但由于没有左子节点，我们无法继续。所以我们将新节点添加为59的左子节点。”
- en: '![image](../images/f0167-01.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0167-01.jpg)'
- en: Socks looked horrified.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 袜子看起来十分惊恐。
- en: “Here,” said Frank. “I’ll show you again. This transfer was 89 days ago. We
    go right, then right, then right again. And we add it as the left child of 91,
    because 89 is less than 91.”
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: “看这里，”弗兰克说道，“我再给你演示一次。这次转账发生在89天前。我们先往右走，然后再往右走，再走一次右。接着，我们将它作为91的左孩子，因为89小于91。”
- en: '![image](../images/f0167-02.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0167-02.jpg)'
- en: “That’s not what I mean,” insisted Socks. “What if the tree becomes unbalanced?”
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: “这不是我想表达的意思，”袜子坚持道。“如果树失衡了怎么办？”
- en: “It could happen,” admitted Frank. “When you’re adding elements to a binary
    search tree, the resulting tree might be unbalanced. Our search algorithm will
    still work, though.”
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: “这可能会发生，”弗兰克承认道。“当你向二叉搜索树中添加元素时，结果可能会导致树失衡。不过，我们的搜索算法仍然可以正常工作。”
- en: “But searches could be inefficient on an unbalanced tree,” protested Socks.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: “但是，在失衡的树上，搜索可能会低效，”袜子反对道。
- en: “That’s true,” admitted Frank.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: “的确是这样，”弗兰克承认道。
- en: 'Adding nodes to a tree could cancel out one of the major advantages of a balanced
    binary search tree: that it makes many algorithms efficient. Each time you approximately
    double the number of nodes in a balanced binary search tree, you only need to
    add a single level. This means that for a simple search, such as looking up an
    element, you can double the amount of data while adding only one more step to
    your search. However, Socks was correct: this efficiency applies only if the tree
    is balanced. In the worst case, the tree forms a long line that you’re forced
    to search along. And when you’re adding arbitrary values, there are no guarantees
    that the tree will remain balanced.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 向树中添加节点可能会抵消平衡二叉搜索树的一个主要优势：它使得许多算法变得高效。每当你大约将平衡二叉搜索树中的节点数量加倍时，你只需要增加一个级别。这意味着，对于简单的搜索任务，比如查找一个元素，你可以加倍数据量，同时只增加一步搜索的操作。然而，袜子是对的：这种高效性只适用于树是平衡的情况。在最坏的情况下，树会形成一条长链，你必须沿着它搜索。而当你插入任意值时，无法保证树会保持平衡。
- en: “We’ll have to risk it,” Frank declared finally.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: “我们必须冒这个险，”弗兰克终于宣告道。
- en: “But—”
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: “可是——”
- en: “If our search isn’t as efficient as it could be, I’m willing to live with that.
    It’s a small price to pay for not having to carry those other books with us to
    build the tree from scratch. They looked heavy.”
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: “如果我们的搜索效率没有达到最佳，我可以接受这个。我愿意为此付出一点代价，而不用带着其他那些书来从头开始构建树。它们看起来很重。”
- en: '**POLICE ALGORITHMS 101: BINARY SEARCH TREES**'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**警察算法101：二叉搜索树**'
- en: '***Excerpt from Professor Drecker’s Lecture***'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '***德雷克教授讲座摘录***'
- en: 'Adding nodes to a binary search tree is similar to searching for a target value.
    We start at the root of the tree and progress downward as though searching for
    the value to insert. We progress to the left or right depending on whether the
    new value we’re inserting is smaller or larger than the value at the current node.
    The descent ends when we reach a dead end: a node without a child in the correct
    direction. At this point, we can create a new node and make it the (left or right)
    child.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 向二叉搜索树中添加节点类似于查找目标值。我们从树的根节点开始，像是查找插入的值一样向下移动。我们根据插入值是小于还是大于当前节点的值来决定是往左走还是往右走。直到我们到达一个死胡同：一个在正确方向上没有子节点的节点。此时，我们可以创建一个新节点，并将其作为（左或右）孩子。
- en: '![image](../images/f0169-01.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0169-01.jpg)'
- en: The cost of inserting a single element scales linearly with the depth of the
    tree. However, we have no guarantees that the tree will remain balanced as new
    nodes are inserted. In fact, it is easy for a tree to become unbalanced, with
    deep branches, depending on the order of insertions. For example, if we insert
    numbers in sorted order, all the additions can go down a single branch.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 插入单个元素的成本与树的深度呈线性关系。然而，我们无法保证树在插入新节点时会保持平衡。事实上，树很容易因为插入顺序的不同而变得失衡，出现深分支。例如，如果我们按排序顺序插入数字，所有的插入都会沿着同一条分支下去。
- en: '![image](../images/f0169-02.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0169-02.jpg)'
