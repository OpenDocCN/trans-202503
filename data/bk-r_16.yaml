- en: '**13**'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**13**'
- en: '**ELEMENTARY STATISTICS**'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**基础统计学**'
- en: '![image](../images/common-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/common-01.jpg)'
- en: Statistics is the practice of turning *data* into *information* to identify
    trends and understand features of populations. This chapter will cover some basic
    definitions and use R to demonstrate their application.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 统计学是将*数据*转化为*信息*，以识别趋势并理解群体特征的实践。本章将涵盖一些基本定义，并使用R语言演示它们的应用。
- en: '**13.1 Describing Raw Data**'
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**13.1 描述原始数据**'
- en: Often, the first thing statistical analysts are faced with is raw data—in other
    words, the records or observations that make up a sample. Depending on the nature
    of the intended analysis, these data could be stored in a specialized R object,
    often a data frame ([Chapter 5](ch05.xhtml#ch05)), possibly read in from an external
    file using techniques from [Chapter 8](ch08.xhtml#ch08). Before you can begin
    summarizing or modeling your data, however, it is important to clearly identify
    your available variables.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 统计分析师常常首先面对的是原始数据——换句话说，就是构成样本的记录或观察值。根据预定分析的性质，这些数据可能存储在一个专门的R对象中，通常是一个数据框（[第5章](ch05.xhtml#ch05)），也可能通过[第8章](ch08.xhtml#ch08)中的技术从外部文件读取。在开始对数据进行汇总或建模之前，明确可用的变量是非常重要的。
- en: A *variable* is a characteristic of an individual in a population, the value
    of which can differ between entities within that population. For example, in [Section
    5.2](ch05.xhtml#ch05lev1sec20), you experimented with an illustrative data frame
    `mydata`. You recorded the age, sex, and humor level for a sample of people. These
    characteristics are your variables; the values measured will differ between the
    individuals.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*变量*是群体中个体的一个特征，其值在该群体中的不同实体之间可能有所不同。例如，在[第5.2节](ch05.xhtml#ch05lev1sec20)中，你使用了一个示例数据框`mydata`进行实验。你记录了一个样本中人们的年龄、性别和幽默感水平。这些特征就是你的变量；所测量的值在个体之间会有所不同。'
- en: Variables can take on a number of forms, determined by the nature of the values
    they may take. Before jumping into R, you’ll look at some standard ways in which
    variables are described.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 变量可以有多种形式，这取决于它们可能取值的性质。在开始使用R之前，我们将先看看一些描述变量的标准方式。
- en: '***13.1.1 Numeric Variables***'
  id: totrans-8
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.1.1 数值变量***'
- en: 'A *numeric* variable is one whose observations are naturally recorded as numbers.
    There are two types of numeric variables: continuous and discrete.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '*数值*变量是指其观察值自然记录为数字的变量。数值变量有两种类型：连续型和离散型。'
- en: A *continuous* variable can be recorded as any value in some interval, up to
    any number of decimals (which technically gives an infinite number of possible
    values, even if the continuum is restricted in range). For example, if you were
    observing rainfall amount, a value of 15 mm would make sense, but so would a value
    of 15.42135 mm. Any degree of measurement precision gives a valid observation.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '*连续*变量可以记录为某个区间内的任意值，可以精确到任意小数位（技术上来说，这会导致无限多的可能值，即使连续区间的范围是有限的）。例如，如果你在观察降水量，15毫米的值是合理的，同样，15.42135毫米也是合理的。任何精度的测量都可以得出有效的观察值。'
- en: A *discrete* variable, on the other hand, may take on only distinct numeric
    values—and if the range is restricted, then the number of possible values is finite.
    For example, if you were observing the number of heads in 20 flips of a coin,
    only whole numbers would make sense. It would not make sense to observe 15.42135
    heads; the possible outcomes are restricted to the integers from 0 to 20 (inclusive).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '*离散*变量则不同，它只能取特定的数字值——如果其范围是有限的，那么可能的值的数量也是有限的。例如，如果你观察20次抛硬币的结果中正面朝上的次数，那么只能得到整数结果。观察15.42135次正面朝上是没有意义的；可能的结果仅限于0到20（包括20）之间的整数。'
- en: '***13.1.2 Categorical Variables***'
  id: totrans-12
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.1.2 类别变量***'
- en: Though numeric observations are common for many variables, it’s also important
    to consider *categorical* variables. Like some discrete variables, categorical
    variables may take only one of a finite number of possibilities. Unlike discrete
    variables, however, categorical observations are not always recorded as numeric
    values.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管许多变量的观察值是数字型的，但考虑*类别*变量也同样重要。像一些离散变量一样，类别变量只能取有限数量的可能值。不过，与离散变量不同的是，类别观察值并不总是以数字形式记录。
- en: There are two types of categorical variables. Those that cannot be logically
    ranked are called *nominal*. A good example of a categorical-nominal variable
    is sex. In most data sets, it has two fixed possible values, male and female,
    and the order of these categories is irrelevant. Categorical variables that can
    be naturally ranked are called *ordinal*. An example of a categorical-ordinal
    variable would be the dose of a drug, with the possible values low, medium, and
    high. These values can be ordered in either increasing or decreasing amounts,
    and the ordering might be relevant to the research.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 分类变量有两种类型。不能逻辑排序的分类变量称为 *名义型*（nominal）。性别就是一个典型的名义型分类变量。在大多数数据集中，它有两个固定的值——男性和女性，而这些类别的顺序是无关紧要的。可以自然排序的分类变量称为
    *有序型*（ordinal）。药物剂量就是一个典型的有序型分类变量，可能的值有低、中和高。这些值可以按增加或减少的顺序排列，而这种排序可能与研究相关。
- en: '**NOTE**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*Some statistical texts blur the definitions of discrete and categorical variables
    or even use them interchangeably. While this practice is not necessarily incorrect,
    I prefer to keep the definitions separate, for clarity. That is, I’ll say “discrete”
    when referring to a naturally numeric variable that cannot be expressed on a continuous
    scale (such as a count), and I’ll say “categorical” when the possible outcomes
    for a given individual are not necessarily numeric and the number of possible
    values is always finite.*'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '*一些统计学文献模糊了离散变量和分类变量的定义，甚至将它们互换使用。虽然这种做法不一定错误，但为了清晰起见，我更倾向于将这些定义区分开来。也就是说，当我提到“离散”时，我指的是一种自然的数值变量，它不能用连续尺度表示（比如计数），而当我提到“分类”时，我指的是某个个体的可能结果不一定是数值的，并且可能值的数量始终是有限的。*'
- en: Once you know what to look for, identifying the types of variables in a given
    data set is straightforward. Take the data frame `chickwts`, which is available
    in the automatically loaded `datasets` package. At the prompt, directly entering
    the following gives you the first five records of this data set.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你知道该找什么，识别给定数据集中的变量类型就变得很简单。以数据框 `chickwts` 为例，它包含在自动加载的 `datasets` 包中。在提示符下，直接输入以下内容可以获取该数据集的前五条记录。
- en: '[PRE0]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'R’s help file (`?chickwts`) describes these data as comprising the weights
    of 71 chicks (in grams) after six weeks, based on the type of food provided to
    them. Now let’s take a look at the two columns in their entirety as vectors:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: R 的帮助文件（`?chickwts`）描述了这些数据，包含了 71 只小鸡（以克为单位）在六周后的体重数据，数据是根据提供的食物类型来分类的。现在让我们看看这两列数据，作为向量的整体：
- en: '[PRE1]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '`weight` is a numeric measurement that can fall anywhere on a continuum, so
    this is a numeric-continuous variable. The fact that the chick weights appear
    to have been rounded or recorded to the nearest gram does not affect this definition
    because in reality the weights can be any figure (within reason). `feed` is clearly
    a categorical variable because it has only six possible outcomes, which aren’t
    numeric. The absence of any natural or easily identifiable ordering leads to the
    conclusion that `feed` is a categorical-nominal variable.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '`weight` 是一个数值测量，可以落在一个连续的范围内，因此它是一个数值连续变量。尽管小鸡体重看起来已被四舍五入或记录为最接近的克数，但这并不影响该定义，因为实际上体重可以是任何合理的数字。`feed`
    显然是一个分类变量，因为它只有六个可能的结果，而这些结果不是数值的。由于没有任何自然或容易识别的排序，可以得出结论，`feed` 是一个分类名义型变量。'
- en: '***13.1.3 Univariate and Multivariate Data***'
  id: totrans-22
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.1.3 单变量和多变量数据***'
- en: When discussing or analyzing data related to only one dimension, you’re dealing
    with *univariate* data. For example, the `weight` variable in the earlier example
    is univariate since each measurement can be expressed with one component—a single
    number.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 当讨论或分析仅与一个维度相关的数据时，你正在处理 *单变量* 数据。例如，前面例子中的 `weight` 变量就是单变量的，因为每个测量值可以通过一个组成部分——一个数字来表达。
- en: When it’s necessary to consider data with respect to variables that exist in
    more than one dimension (in other words, with more than one component or measurement
    associated with each observation), your data are considered *multivariate*. Multivariate
    measurements are arguably most relevant when the individual components aren’t
    as useful when considered on their own (in other words, as univariate quantities)
    in any given statistical analysis.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 当有必要考虑具有多个维度的变量数据时（换句话说，即每个观察值关联的组件或测量不止一个），你的数据被视为 *多变量* 数据。当单独考虑每个组件（即作为单变量量）在任何给定的统计分析中不太有用时，多变量测量尤为相关。
- en: An ideal example is that of spatial coordinates, which must be considered in
    terms of at least two components—a horizontal *x*-coordinate and a vertical *y*-coordinate.
    The univariate data alone—for example, the *x*-axis values only—aren’t especially
    useful. Consider the `quakes` data set (like `chickwts`, this is automatically
    available through the `datasets` package), which contains observations on 1,000
    seismic events recorded off the coast of Fiji. If you look at the first five records
    and read the descriptions in the help file `?quakes`, you quickly get a good understanding
    of what’s presented.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一个理想的例子是空间坐标，它必须至少考虑两个分量——一个水平的*x*坐标和一个垂直的*y*坐标。仅仅考虑单变量数据——例如，仅考虑*x*轴值——并不特别有用。考虑`quakes`数据集（与`chickwts`类似，它可以通过`datasets`包自动获得），该数据集包含了在斐济海岸记录的1,000个地震事件的观测值。如果你查看前五条记录，并阅读帮助文件`?quakes`中的描述，你很快就能对所展示的内容有一个清晰的理解。
- en: '[PRE2]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The columns `lat` and `long` provide the latitude and longitude of the event,
    `depth` provides the depth of the event (in kilometers), `mag` provides the magnitude
    on the Richter scale, and `stations` provides the number of observation stations
    that detected the event. If you’re interested in the spatial dispersion of these
    earthquakes, then examining only the latitude or the longitude is rather uninformative.
    The location of each event is described with two components: a latitude *and*
    a longitude value. You can easily plot these 1,000 events; [Figure 13-1](ch13.xhtml#ch13fig1)
    shows the result of the following code:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '`lat`和`long`列提供了事件的纬度和经度，`depth`提供了事件的深度（以公里为单位），`mag`提供了里氏震级，`stations`提供了检测到该事件的观测站数量。如果你对这些地震的空间分布感兴趣，仅仅查看纬度或经度并不能提供太多信息。每个事件的位置由两个分量描述：纬度*和*经度值。你可以轻松绘制这1,000个事件；[图13-1](ch13.xhtml#ch13fig1)展示了以下代码的结果：'
- en: '[PRE3]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![image](../images/f13-01.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-01.jpg)'
- en: '*Figure 13-1: Plotting the spatial locations of earthquakes using a bivariate
    (multivariate with two components) variable*'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '*图13-1：使用双变量（具有两个分量的多变量）变量绘制地震的空间位置*'
- en: '***13.1.4 Parameter or Statistic?***'
  id: totrans-31
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.1.4 参数还是统计量？***'
- en: As already noted, statistics as a discipline is concerned with understanding
    features of an overall *population*, defined as the entire collection of individuals
    or entities of interest. The characteristics of that population are referred to
    as *parameters*. Because researchers are rarely able to access relevant data on
    every single member of the population of interest, they typically collect a *sample*
    of entities to represent the population and record relevant data from these entities.
    They may then estimate the parameters of interest using the sample data—and those
    estimates are the *statistics*.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，统计学作为一门学科，关注的是理解一个整体*群体*的特征，群体被定义为所有相关个体或实体的集合。该群体的特征称为*参数*。由于研究人员很少能够访问到每个群体成员的相关数据，因此他们通常会收集一个*样本*的实体，代表整个群体，并记录这些实体的相关数据。然后，他们可以使用样本数据来估计感兴趣的参数——这些估计值就是*统计量*。
- en: For example, if you were interested in the average age of women in the United
    States who own cats, the population of interest would be all women residing in
    the United States who own at least one cat. The parameter of interest is the true
    mean age of women in the United States who own at least one cat. Of course, obtaining
    the age of every single female American with a cat would be a difficult feat.
    A more feasible approach would be to randomly identify a smaller number of cat-owning
    American women and take data from them—this is your sample, and the mean age of
    the women in the sample is your statistic.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果你对拥有猫的美国女性的平均年龄感兴趣，那么感兴趣的群体就是所有居住在美国并拥有至少一只猫的女性。感兴趣的参数是拥有至少一只猫的美国女性的真实平均年龄。当然，获得每一个拥有猫的美国女性的年龄将是一个困难的任务。一种更可行的方法是随机挑选少量拥有猫的美国女性，并从她们那里收集数据——这就是你的样本，而样本中女性的平均年龄就是你的统计量。
- en: Thus, the key difference between a statistic and a parameter is whether the
    characteristic refers to the sample you drew your data from or the wider population.
    [Figure 13-2](ch13.xhtml#ch13fig2) illustrates this, with the mean *μ* of a measure
    for individuals in a population as the parameter and with the mean *x̄* of a sample
    of individuals taken from that population as the statistic.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，统计量与参数之间的关键区别在于，特征是否指的是你所抽取数据的样本，还是更广泛的总体。[图 13-2](ch13.xhtml#ch13fig2) 用均值
    *μ* 表示总体中个体的参数，而用均值 *x̄* 表示从该总体抽取的个体样本的统计量。
- en: '![image](../images/f13-02.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-02.jpg)'
- en: '*Figure 13-2: A conceptualization of statistical practice to illustrate the
    definitions of* parameter *and* statistic*, using the mean as an example*'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 13-2：一个统计实践的概念化，使用均值作为例子来说明* 参数 *和* 统计量 *的定义*'
- en: '**Exercise 13.1**'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 13.1**'
- en: 'For each of the following, identify the type of variable described: numeric-continuous,
    numeric-discrete, categorical-nominal, or categorical-ordinal:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于以下每一项，识别所描述的变量类型：数值-连续型，数值-离散型，分类-名义型，或分类-顺序型：
- en: The number of blemishes on the hood of a car coming off a production line
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从生产线下来的汽车引擎盖上的瑕疵数量
- en: A survey question that asks the participant to select from Strongly agree, Agree,
    Neutral, Disagree, and Strongly disagree
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一项调查问题，要求参与者从“强烈同意”、“同意”、“中立”、“不同意”和“强烈不同意”中选择
- en: The noise level (in decibels) at a concert
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 音乐会上的噪音水平（以分贝为单位）
- en: 'The noise level out of three possible choices: high, medium, low'
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 三个可能选项中的噪音水平：高，中，低
- en: A choice of primary color
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个主色
- en: The distance between a cat and a mouse
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 猫和老鼠之间的距离
- en: For each of the following, identify whether the quantity discussed is a population
    parameter or a sample statistic. If the latter, also identify what the corresponding
    population parameter is.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于以下每一项，识别所讨论的量是总体参数还是样本统计量。如果是后者，还要识别相应的总体参数是什么。
- en: The percentage of 50 New Zealanders who own a gaming console
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 50名新西兰人中拥有游戏主机的比例
- en: The average number of blemishes found on the hoods of three cars in the No Dodgy
    Carz yard
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: “No Dodgy Carz”场地上三辆车引擎盖上的瑕疵数量的平均值
- en: The proportion of domestic cats in the United States that wear a collar
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 美国国内佩戴项圈的家猫比例
- en: The average number of times per day a vending machine is used in a year
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一年中自动售货机每天使用的平均次数
- en: The average number of times per day a vending machine is used in a year, based
    on data collected on three distinct days in that year
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基于在该年内三个不同日期收集的数据，自动售货机每天使用的平均次数
- en: '**13.2 Summary Statistics**'
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**13.2 概括性统计量**'
- en: Now that you’ve learned the basic terminology, you’re ready to calculate some
    statistics with R. In this section, you’ll look at the most common types of statistics
    used to summarize the different types of variables I’ve discussed.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经学习了基本术语，准备使用 R 来计算一些统计量。在这一节中，你将了解用来概括我所讨论的不同类型变量的最常见统计量。
- en: '***13.2.1 Centrality: Mean, Median, Mode***'
  id: totrans-53
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.2.1 集中趋势：均值、中位数、众数***'
- en: '*Measures of centrality* are commonly used to explain large collections of
    data by describing where numeric observations are centered. One of the most common
    measures of centrality is of course the arithmetic *mean*. It’s considered to
    be the central “balance point” of a collection of observations.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '*集中趋势度量* 通常用于通过描述数值观察值的集中位置来解释大量数据。最常见的集中趋势度量之一当然是算术 *均值*。它被认为是观察值集合的中央“平衡点”。'
- en: 'For a set of *n* numeric measurements labeled *x* = {*x*[1], *x*[2], . . .
    , *x*[n]}, you find the sample mean *x̄* as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一组 *n* 个数值型测量值标记为 *x* = {*x*[1], *x*[2], . . . , *x*[n]}，你可以通过以下方式计算样本均值 *x̄*：
- en: '![image](../images/e13-1.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-1.jpg)'
- en: 'So, for example, if you observe the data 2,4.4,3,3,2,2.2,2,4, the mean is calculated
    like this:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 举个例子，如果你观察到的数据是 2, 4.4, 3, 3, 2, 2.2, 2, 4，均值的计算方式如下：
- en: '![image](../images/f0267-01.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0267-01.jpg)'
- en: 'The *median* is the “middle magnitude” of your observations, so if you place
    your observations in order from smallest to largest, you can find the median by
    either taking the middle value (if there’s an odd number of observations) or finding
    the mean of the two middle values (if there’s an even number of observations).
    Using the notation for *n* measurements labeled *x* = {*x*[1], *x*[2], . . . ,
    *x*[n]}, you find the sample median ![image](../images/mx.jpg) as follows:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '*中位数*是你观测值的“中间大小”，因此，如果你按从小到大的顺序排列观测值，可以通过取中间值（如果观测值个数是奇数）或取中间两个值的平均值（如果观测值个数是偶数）来找到中位数。使用标记为*x*的*n*个测量值，表示为*x*
    = {*x*[1]、*x*[2]、...、*x*[n]}，你可以按如下方式找到样本中位数 ![image](../images/mx.jpg)：'
- en: • Sort the observations from smallest to largest to give the “order statistics”
    ![image](../images/f0267-02.jpg),![image](../images/f0267-02a.jpg),...,![image](../images/f0267-03.jpg),
    where ![image](../images/f0267-04.jpg) denotes the *t*th smallest observation,
    regardless of observation number *i*, *j*, *k*, . . . .
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: • 将观测值从小到大排序，以获得“顺序统计量” ![image](../images/f0267-02.jpg)、![image](../images/f0267-02a.jpg)、...、![image](../images/f0267-03.jpg)，其中![image](../images/f0267-04.jpg)表示第*t*小的观测值，不论观测值编号*i*、*j*、*k*等。
- en: '• Then, do the following:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: • 然后，执行以下操作：
- en: '![image](../images/e13-2.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-2.jpg)'
- en: 'For the same data, sorting them from smallest to largest yields 2, 2, 2, 2.2,
    3, 3, 4, 4.4\. With *n* = 8 observations, you have *n*/2 = 4\. The median is therefore
    as follows:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 对于相同的数据，按从小到大的顺序排序，它们变为2、2、2、2.2、3、3、4、4.4。对于*n* = 8个观测值，*n*/2 = 4。因此，中位数为：
- en: '![image](../images/f0267-03a.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0267-03a.jpg)'
- en: The *mode* is simply the “most common” observation. This statistic is more often
    used with numeric-discrete data than with numeric-continuous, though it is used
    with reference to *intervals* of the latter (commonly when discussing probability
    density functions—see [Chapters 15](ch15.xhtml#ch15) and [16](ch16.xhtml#ch16)).
    It’s possible for a collection of *n* numeric measurements *x*[1], *x*[2], . .
    . , *x[n]* to have no mode (where each observation is unique) or to have more
    than one mode (where more than one particular value occurs the largest number
    of times). To find the mode ![image](../images/dx.jpg), simply tabulate the frequency
    of each measurement.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '*众数*只是“最常见”的观测值。这个统计量通常用于数字离散数据，而非数字连续数据，尽管它也可以用于后者的*区间*（通常是在讨论概率密度函数时—见[第15章](ch15.xhtml#ch15)和[第16章](ch16.xhtml#ch16)）。一组*n*个数字测量值
    *x*[1]、*x*[2]、...、*x[n]* 可能没有众数（如果每个观测值都是唯一的），也可能有多个众数（如果有多个特定值出现的次数最多）。要找到众数
    ![image](../images/dx.jpg)，只需列出每个测量值的频率。'
- en: 'Again using the eight observations from the example, you can see the frequencies
    here:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 再次使用示例中的八个观测值，你可以在这里看到频率：
- en: '| **Observation** | 2 | 2.2 | 3 | 4 | 4.4 |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| **观测值** | 2 | 2.2 | 3 | 4 | 4.4 |'
- en: '| **Frequency** | 3 | 1 | 2 | 1 | 1 |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| **频率** | 3 | 1 | 2 | 1 | 1 |'
- en: The value 2 occurs three times, which is more frequent than any other value,
    so the single mode for these data is the value 2.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 值2出现三次，比其他任何值都更频繁，因此这些数据的唯一众数是值2。
- en: In R, it’s easy to compute the arithmetic mean and the median with built-in
    functions of the same names. First, store the eight observations as the numeric
    vector `xdata`.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在R中，使用内置的相同名称函数可以轻松计算算术平均值和中位数。首先，将这八个观测值存储为数字向量`xdata`。
- en: '[PRE4]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Then compute the statistics.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 然后计算统计量。
- en: '[PRE5]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Finding a mode is perhaps most easily achieved by using R’s `table` function,
    which gives you the frequencies you need.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 寻找众数最简单的方法或许是使用R的`table`函数，它可以给出所需的频率。
- en: '[PRE6]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Though this clearly shows the mode for a small data set, it’s good practice
    to write code that can automatically identify the most frequent observations for
    any `table`. The `min` and `max` functions will report the smallest and largest
    values, with `range` returning both in a vector of length 2.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这清楚地展示了一个小数据集的众数，但一个好的做法是编写可以自动识别任何`表格`中最频繁观测值的代码。`min`和`max`函数会报告最小值和最大值，而`range`返回这两个值，并以长度为2的向量形式输出。
- en: '[PRE7]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: When applied to a `table`, these commands operate on the reported frequencies.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 当应用于`table`时，这些命令会作用于报告的频率。
- en: '[PRE8]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Finally, therefore, you can construct a logical flag vector to get the mode
    from `table`.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，因此，你可以构建一个逻辑标志向量来从`table`中获取众数。
- en: '[PRE9]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Here, 2 is the value and 3 is the frequency of that value.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，2是值，3是该值的频率。
- en: 'Let’s return to the `chickwts` data set explored earlier in [Section 13.1.2](ch13.xhtml#ch13lev2sec113).
    The mean and median weights of the chicks are as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到 [第13.1.2节](ch13.xhtml#ch13lev2sec113)中探索过的 `chickwts` 数据集。小鸡的均值和中位数体重如下：
- en: '[PRE10]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'You can also look at the `quakes` data set explored in [Section 13.1.3](ch13.xhtml#ch13lev2sec114).
    The most common magnitude of earthquake in the data set is identified with the
    following, which indicates that there were 107 occurrences of a 4.5 magnitude
    event:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以查看 [第13.1.3节](ch13.xhtml#ch13lev2sec114)中探索过的 `quakes` 数据集。数据集中最常见的地震震级如下所示，表明有107次震级为4.5的地震发生：
- en: '[PRE11]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '**NOTE**'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*Several methods are available to compute medians, though the impact on results
    is usually negligible for most practical purposes. Here I’ve simply used the default
    “sample” version used by R.*'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '*有几种方法可以计算中位数，尽管对于大多数实际目的，结果的影响通常可以忽略不计。在这里，我只是使用了R默认的“样本”版本。*'
- en: 'Many of the functions R uses to compute statistics from a numeric structure
    will not run if the data set includes missing or undefined values (`NA`s or `NaN`s).
    Here’s an example:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: R用于从数值结构中计算统计量的许多函数，如果数据集中包含缺失或未定义值（`NA` 或 `NaN`），将无法运行。以下是一个示例：
- en: '[PRE12]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: To prevent unintended `NaN`s or forgotten `NA`s being ignored without the user’s
    knowledge, R does not by default ignore these special values when running functions
    such as `mean`—and therefore will not return the intended numeric results. You
    can, however, set an optional argument `na.rm` to `TRUE`, which will force the
    function to operate only on the numeric values that are present.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 为了防止在用户不知情的情况下忽略无意中的 `NaN` 或忘记的 `NA`，R 默认情况下在运行诸如 `mean` 之类的函数时不会忽略这些特殊值——因此不会返回预期的数值结果。不过，你可以将可选参数
    `na.rm` 设置为 `TRUE`，这将强制函数仅在存在的数值上操作。
- en: '[PRE13]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: You should use this argument only if you’re aware there might be missing values
    and that the result will be computed based on only those values that *have* been
    observed. Functions that I’ve discussed already such as `sum`, `prod`, `mean`,
    `median`, `max`, `min`, and `range`—essentially anything that calculates a numeric
    statistic based on a numeric vector—all have the `na.rm` argument available to
    them.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在你知道可能存在缺失值，并且结果将仅基于那些*已*观测到的值时，才应使用此参数。我已经讨论过的函数，如 `sum`、`prod`、`mean`、`median`、`max`、`min`
    和 `range`——基本上所有基于数值向量计算数值统计量的函数——都提供了 `na.rm` 参数。
- en: Lastly, in calculating simple summary statistics, it’s useful to remind yourself
    of the `tapply` function (see [Section 10.2.3](ch10.xhtml#ch10lev2sec94)), used
    to compute statistics grouped by a specific categorical variable. Suppose, for
    example, you wanted to find the mean weight of the chicks grouped by feed type.
    One solution would be to use the `mean` function on each specific subset.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在计算简单的总结统计时，提醒自己使用 `tapply` 函数是很有用的（参见 [第10.2.3节](ch10.xhtml#ch10lev2sec94)），它用于按特定类别变量计算分组统计量。例如，假设你想要计算按饲料类型分组的小鸡体重的均值。一个解决方案是对每个特定子集使用
    `mean` 函数。
- en: '[PRE14]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: This is cumbersome and lengthy. Using `tapply`, however, you can calculate the
    same values by category using just one line of code.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这既繁琐又冗长。然而，使用 `tapply`，你可以仅通过一行代码按类别计算相同的值。
- en: '[PRE15]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Here, the first argument is the numeric vector upon which to operate, the `INDEX`
    argument specifies the grouping variable, and the `FUN` argument gives the name
    of the function to be performed on the data in the first argument as per the subsets
    defined by `INDEX`. Like other functions you’ve seen that request the user to
    specify *another* function to govern operations, `tapply` includes an ellipsis
    (see [Sections 9.2.5](ch09.xhtml#ch09lev2sec86) and [11.2.4](ch11.xhtml#ch11lev2sec102))
    to allow the user to supply further arguments directly to `FUN` if required.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，第一个参数是要操作的数值向量，`INDEX` 参数指定分组变量，`FUN` 参数给出要在第一个参数的数据上执行的函数名称，按 `INDEX` 定义的子集进行操作。就像你见过的要求用户指定*另一个*函数来控制操作的其他函数一样，`tapply`
    包含一个省略号（参见 [第9.2.5节](ch09.xhtml#ch09lev2sec86) 和 [第11.2.4节](ch11.xhtml#ch11lev2sec102)），允许用户在需要时将其他参数直接传递给
    `FUN`。
- en: '***13.2.2 Counts, Percentages, and Proportions***'
  id: totrans-99
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.2.2 计数、百分比和比例***'
- en: In this section, you’ll look at the summary of data that aren’t necessarily
    numeric. It makes little sense, for example, to ask R to compute the mean of a
    categorical variable, but it is sometimes useful to count the number of observations
    that fall within each category—these *counts* or *frequencies* represent the most
    elementary summary statistic of categorical data.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一节中，你将查看不一定是数字的数据的总结。例如，要求R计算分类变量的均值毫无意义，但有时统计每个类别中观察值的数量是有用的——这些*计数*或*频率*代表了分类数据的最基本摘要统计量。
- en: 'This uses the same count summary that was necessary for the mode calculation
    in [Section 13.2.1](ch13.xhtml#ch13lev2sec116), so again you can use the `table`
    command to obtain frequencies. Recall there are six feed types making up the diet
    of the chicks in the `chickwts` data frame. Getting these factor-level counts
    is as straightforward as this:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这使用了与[第13.2.1节](ch13.xhtml#ch13lev2sec116)中的众数计算所必需的相同计数汇总，因此你仍然可以使用`table`命令来获得频率。记住，在`chickwts`数据框中，有六种饲料类型构成了小鸡的饮食。获取这些因子水平的计数就像这样简单：
- en: '[PRE16]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: You can gather more information from these counts by identifying the *proportion*
    of observations that fall into each category. This will give you comparable measures
    across multiple data sets. Proportions represent the fraction of observations
    in each category, usually expressed as a decimal (floating-point) number between
    0 and 1 (inclusive). To calculate proportions, you only need to modify the previous
    count function by dividing the count (or frequency) by the overall sample size
    (obtained here by using `nrow` on the appropriate data frame object; see [Section
    5.2](ch05.xhtml#ch05lev1sec20)).
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 通过识别每个类别中观察值的*比例*，你可以从这些计数中获取更多信息。这将为你提供跨多个数据集的可比度量。比例表示每个类别中观察值的分数，通常以0到1之间的十进制（浮动点）数字表示（包括0和1）。要计算比例，你只需要通过将计数（或频率）除以总样本大小来修改之前的计数函数（在此通过对适当的数据框对象使用`nrow`获得样本大小；见[第5.2节](ch05.xhtml#ch05lev1sec20)）。
- en: '[PRE17]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Of course, you needn’t do everything associated with counts via `table`. A
    simple `sum` of an appropriate logical flag vector can be just as useful—recall
    that `TRUE`s are automatically treated as `1` and `FALSE`s as `0` in any arithmetic
    treatment of logical structures in R (refer to [Section 4.1.4](ch04.xhtml#ch04lev2sec40)).
    Such a `sum` will provide you with the desired frequency, but to get a proportion,
    you still need to divide by the total sample size. Furthermore, this is actually
    equivalent to finding the `mean` of a logical flag vector. For example, to find
    the proportion of chicks fed soybean, note that the following two calculations
    give identical results of around 0.197:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你不需要通过`table`处理所有与计数相关的操作。对适当的逻辑标志向量做一个简单的`sum`运算也同样有用——记住，在R中对逻辑结构的任何算术操作中，`TRUE`会自动被视为`1`，`FALSE`会被视为`0`（参见[第4.1.4节](ch04.xhtml#ch04lev2sec40)）。这样的`sum`将为你提供所需的频率，但要得到比例，你仍然需要除以总样本大小。此外，这实际上等同于找到逻辑标志向量的`mean`。例如，要找到喂食大豆的小鸡的比例，请注意，以下两个计算给出的结果约为0.197，它们是相同的：
- en: '[PRE18]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'You can also use this approach to calculate the proportion of entities in combined
    groups, achieved easily through logical operators (see [Section 4.1.3](ch04.xhtml#ch04lev2sec39)).
    The proportion of chicks fed either soybean *or* horsebean is as follows:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以使用这种方法来计算联合组中实体的比例，方法是通过逻辑运算符轻松实现的（见[第4.1.3节](ch04.xhtml#ch04lev2sec39)）。喂食大豆*或*马豆的小鸡的比例如下：
- en: '[PRE19]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Yet again, the `tapply` function can prove useful. This time, to get the proportions
    of chicks on each diet, you’ll define the `FUN` argument to be an anonymous function
    (refer to [Section 11.3.2](ch11.xhtml#ch11lev2sec104)) that performs the required
    calculation.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，`tapply`函数可以证明是有用的。这一次，为了得到每种饮食的小鸡比例，你将把`FUN`参数定义为一个匿名函数（参见[第11.3.2节](ch11.xhtml#ch11lev2sec104)），该函数执行所需的计算。
- en: '[PRE20]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: The disposable function here is defined with a dummy argument `x`, which you’re
    using to represent the vector of weights in each feed group to which `FUN` applies.
    Finding the desired proportion is therefore a case of dividing the number of observations
    in `x` by the total number of observations.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的可丢弃函数定义了一个虚拟参数`x`，你用它来表示每个饲料组中`FUN`应用的权重向量。因此，找到所需的比例就是将`x`中的观察数除以总观察数。
- en: The last function to note is the `round` function, which rounds numeric data
    output to a certain number of decimal places. You need only supply to `round`
    your numeric vector (or matrix or any other appropriate data structure) and however
    many decimal places (as the argument `digits`) you want your figures rounded to.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 最后要注意的函数是`round`函数，它将数值数据输出四舍五入到指定的小数位数。你只需将你的数值向量（或矩阵或任何其他适当的数据结构）和你希望四舍五入的小数位数（作为`digits`参数）提供给`round`函数即可。
- en: '[PRE21]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: This provides output that’s easier to read at a glance. If you set `digits=0`
    (the default), output is rounded to the nearest integer.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这将提供更易于一目了然的输出。如果将`digits=0`（默认值），则输出会四舍五入到最接近的整数。
- en: Before the next exercise, it’s worth briefly remarking on the relationship between
    a proportion and a percentage. The two represent the same thing. The only difference
    is the scale; the *percentage* is merely the proportion multiplied by 100\. The
    percentage of chicks on a soybean diet is therefore approximately 19.7 percent.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行下一个练习之前，值得简要说明比例与百分比之间的关系。二者表示的是相同的东西，唯一的区别是尺度；*百分比*只是将比例乘以100。因此，食用大豆饮食的小鸡百分比大约为19.7%。
- en: '[PRE22]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Since proportions always lie in the interval [0,1], percentages always lie within
    [0,100].
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 由于比例总是在区间[0,1]内，百分比总是在区间[0,100]内。
- en: Most statisticians use proportions over percentages because of the role proportions
    play in the direct representation of *probabilities* (discussed in [Chapter 15](ch15.xhtml#ch15)).
    However, there are situations in which percentages are preferred, such as basic
    data summaries or in the definition of *percentiles*, which will be detailed in
    [Section 13.2.3](ch13.xhtml#ch13lev2sec118).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数统计学家使用比例而非百分比，因为比例在直接表示*概率*（在[第15章](ch15.xhtml#ch15)中讨论）中发挥重要作用。然而，在某些情况下，百分比更为常用，例如基本数据摘要或*百分位数*的定义，这将在[第13.2.3节](ch13.xhtml#ch13lev2sec118)中详细介绍。
- en: '**Exercise 13.2**'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习13.2**'
- en: Obtain, rounded to two decimal places, the proportion of seismic events in the
    `quakes` data frame that occurred at a depth of 300 km or deeper.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取`quakes`数据框中发生在300公里深度或更深的地震事件的比例，并四舍五入到小数点后两位。
- en: Remaining with the `quakes` data set, calculate the mean and median magnitudes
    of the events that occurred at a depth of 300 km or deeper.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`quakes`数据集，计算发生在深度300公里或更深的事件的均值和中位数震级。
- en: Using the `chickwts` data set, write a `for` loop that gives you the mean weight
    of chicks for each feed type—the same as the results given by the `tapply` function
    in [Section 13.2.1](ch13.xhtml#ch13lev2sec116). Display the results rounded to
    one decimal place and, when printing, ensure each mean is labeled with the appropriate
    feed type.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`chickwts`数据集，编写一个`for`循环，计算每种饲料类型的小鸡平均体重——与[第13.2.1节](ch13.xhtml#ch13lev2sec116)中`tapply`函数给出的结果相同。显示结果时，四舍五入到小数点后一位，并确保每个均值都标明相应的饲料类型。
- en: Another ready-to-use data set (in the automatically loaded `datasets` package)
    is `InsectSprays`. It contains data on the number of insects found on various
    agricultural units, as well as the type of insect spray that was used on each
    unit. Ensure you can access the data frame at the prompt; then study the help
    file `?InsectSprays` to get an idea of R’s representation of the two variables.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个现成可用的数据集（在自动加载的`datasets`包中）是`InsectSprays`。它包含了在不同农业单元上发现的昆虫数量，以及在每个单元上使用的昆虫喷雾类型。确保你可以在提示符下访问数据框；然后研究帮助文件`?InsectSprays`，了解R如何表示这两个变量。
- en: Identify the two variable types in `InsectSprays` (as per the definitions in
    [Section 13.1.1](ch13.xhtml#ch13lev2sec112) and [Section 13.1.2](ch13.xhtml#ch13lev2sec113)).
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定`InsectSprays`中两个变量的类型（根据[第13.1.1节](ch13.xhtml#ch13lev2sec112)和[第13.1.2节](ch13.xhtml#ch13lev2sec113)中的定义）。
- en: Calculate the modes of the distribution of insect counts, regardless of spray
    type.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算不考虑喷雾类型的昆虫计数分布的众数。
- en: Use `tapply` to report the total insect counts by each spray type.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`tapply`报告每种喷雾类型的昆虫总数。
- en: Using the same kind of `for` loop as in (c), compute the percentage of agricultural
    units in each spray type group that had at least five bugs on them. When printing
    to the screen, round the percentages to the nearest whole number.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用与（c）中相同类型的`for`循环，计算每个喷雾类型组中至少有五只昆虫的农业单元的百分比。打印到屏幕时，四舍五入到最接近的整数。
- en: Obtain the same numeric results as in (g), with rounding, but use `tapply` and
    a disposable function.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取与（g）中相同的数值结果，并进行四舍五入，但使用`tapply`和一次性函数。
- en: '***13.2.3 Quantiles, Percentiles, and the Five-Number Summary***'
  id: totrans-129
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.2.3 分位数、百分位数和五数概括***'
- en: Let’s return, once more, to thinking about raw numeric observations. An understanding
    of how observations are *distributed* is an important statistical concept, and
    this will form a key feature of discussions in [Chapter 15](ch15.xhtml#ch15) onward.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再一次回到思考原始数字观察值。理解观察值是如何*分布*的，是一个重要的统计概念，这将成为从[第15章](ch15.xhtml#ch15)开始讨论的一个关键特征。
- en: You can gain more insight into the distribution of a set of observations by
    examining quantiles. A *quantile* is a value computed from a collection of numeric
    measurements that indicates an observation’s rank when compared to all the other
    present observations. For example, the median ([Section 13.2.1](ch13.xhtml#ch13lev2sec116))
    is itself a quantile—it gives you a value below which half of the measurements
    lie—it’s the 0.5th quantile. Alternatively, quantiles can be expressed as a *percentile*—this
    is identical but on a “percent scale” of 0 to 100\. In other words, the *p*th
    quantile is equivalent to the 100 × *p*th percentile. The median, therefore, is
    the 50th percentile.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 通过检查分位数，你可以更深入地了解一组观察值的分布情况。*分位数*是从一组数字测量值中计算出的一个值，表示一个观察值在与其他观察值比较时的排名。例如，中位数（[第13.2.1节](ch13.xhtml#ch13lev2sec116)）本身就是一个分位数——它给出一个值，表示半数测量值位于该值之下——它是0.5分位数。或者，分位数也可以表示为*百分位数*——这与分位数相同，但在0到100的“百分比尺度”上。换句话说，*p*分位数等同于100
    × *p*百分位数。因此，中位数就是第50百分位数。
- en: There are a number of different algorithms that can be used to compute quantiles
    and percentiles. They all work by sorting the observations from smallest to largest
    and using some form of weighted average to find the numeric value that corresponds
    to *p*, but results may vary slightly in other statistical software.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 有多种不同的算法可以用来计算分位数和百分位数。它们的工作原理是将观察值从最小到最大排序，并使用某种形式的加权平均来找到与*p*对应的数值，但在其他统计软件中，结果可能会略有不同。
- en: 'Obtaining quantiles and percentiles in R is done with the `quantile` function.
    Using the eight observations stored as the vector `xdata`, the 0.8th quantile
    (or 80th percentile) is confirmed as 3.6:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在R中获取分位数和百分位数是通过`quantile`函数完成的。使用存储为向量`xdata`的八个观察值，确认0.8分位数（或80百分位数）为3.6：
- en: '[PRE23]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: As you can see, `quantile` takes the data vector of interest as its first argument,
    followed by a numeric value supplied to `prob`, giving the quantile of interest.
    In fact, `prob` can take a numeric vector of quantile values. This is convenient
    when multiple quantiles are desired.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，`quantile`将数据向量作为其第一个参数，后跟传递给`prob`的数值，用于表示感兴趣的分位数。事实上，`prob`可以接受一个数字向量作为分位数值。当需要多个分位数时，这非常方便。
- en: '[PRE24]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Here, you’ve used `quantile` to obtain what’s called the *five-number summary*
    of `xdata`, comprised of the 0th percentile (the minimum), the 25th percentile,
    the 50th percentile, the 75th percentile, and the 100th percentile (the maximum).
    The 0.25th quantile is referred to as the *first* or *lower quartile*, and the
    0.75th quantile is referred to as the *third* or *upper quartile*. Also note that
    the 0.5th quantile of `xdata` is equivalent to the median (2.6, calculated in
    [Section 13.2.1](ch13.xhtml#ch13lev2sec116) using `median`). The median is the
    second quartile, with the maximum value being the fourth quartile.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你使用了`quantile`来获取所谓的`xdata`的*五数概括*，包含0百分位数（最小值）、25百分位数、50百分位数、75百分位数和100百分位数（最大值）。0.25分位数被称为*第一个*或*下四分位数*，而0.75分位数被称为*第三个*或*上四分位数*。还要注意，`xdata`的0.5分位数等于中位数（2.6，在[第13.2.1节](ch13.xhtml#ch13lev2sec116)中通过`median`计算）。中位数是第二四分位数，最大值是第四四分位数。
- en: There are ways to obtain the five-number summary other than using `quantile`;
    when applied to a numeric vector, the `summary` function also provides these statistics,
    along with the mean, automatically.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用`quantile`外，还有其他方法可以获取五数概括；当应用于一个数字向量时，`summary`函数也会自动提供这些统计数据，以及均值。
- en: '[PRE25]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: To look at some examples using real data, let’s compute the lower and upper
    quartiles of the weights of the chicks in the `chickwts`.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 为了查看一些使用真实数据的示例，让我们计算`chickwts`中小鸡体重的下四分位数和上四分位数。
- en: '[PRE26]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: This indicates that 25 percent of the weights lie at or below 204.5 grams and
    that 75 percent of the weights lie at or below 323.5 grams.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 这表示25%的权重位于或低于204.5克，且75%的权重位于或低于323.5克。
- en: Let’s also compute the five-number summary (along with the mean) of the magnitude
    of the seismic events off the coast of Fiji that occurred at a depth of less than
    400 km, using the `quakes` data frame.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们还来计算斐济海岸深度小于400公里的地震事件震级的五数概括（以及均值），使用`quakes`数据框。
- en: '[PRE27]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: This begins to highlight how useful quantiles are for interpreting the distribution
    of numeric measurements. From these results, you can see that most of the magnitudes
    of events at a depth of less than 400 km lie around 4.6, the median, and the first
    and third quartiles are just 4.4 and 4.9, respectively. But you can also see that
    the maximum value is much further away from the upper quartile than the minimum
    is from the lower quartile, suggesting a *skewed* distribution, one that stretches
    more positively (in other words, to the right) from its center than negatively
    (in other words, to the left). This notion is also supported by the fact that
    the mean is greater than the median—the mean is being “dragged upward” by the
    larger values.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 这开始突显了分位数在解释数值测量分布中的重要性。从这些结果中，你可以看到，大多数深度小于400公里的事件的震级集中在4.6附近，中位数，第一和第三四分位数分别为4.4和4.9。但你也可以看到，最大值远远大于上四分位数，而最小值与下四分位数的差距较小，这表明了一个*偏态*分布，即从中心向正方向（换句话说，向右）伸展的程度比向负方向（换句话说，向左）要大。这一观点也得到了均值大于中位数这一事实的支持——均值被较大的值“拉高”了。
- en: You’ll explore this further in [Chapter 14](ch14.xhtml#ch14) when you investigate
    data sets using basic statistical plots, and some of the associated terminology
    will be formalized in [Chapter 15](ch15.xhtml#ch15).
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在[第14章](ch14.xhtml#ch14)中使用基本统计图表来分析数据集时，你将进一步探讨这一点，一些相关术语将在[第15章](ch15.xhtml#ch15)中正式定义。
- en: '***13.2.4 Spread: Variance, Standard Deviation, and the Interquartile Range***'
  id: totrans-147
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.2.4 离散度：方差、标准差和四分位距***'
- en: The measures of centrality explored in [Section 13.2.1](ch13.xhtml#ch13lev2sec116)
    offer a good indication of where your numeric measurements are massed, but the
    mean, median, and mode do nothing to describe how *dispersed* your data are. For
    this, measures of *spread* are needed.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第13.2.1节](ch13.xhtml#ch13lev2sec116)中探讨的集中趋势度量提供了数值测量值集中位置的良好指示，但均值、中位数和众数并没有描述数据的*分散性*。为此，需要使用*离散度*的度量。
- en: In addition to your vector of eight hypothetical observations, given again here,
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 除了你已经给出的八个假设观测值外，
- en: '[PRE28]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'you’ll also look at another eight observations stored as follows:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 你还将查看以下存储的另外八个观测值：
- en: '[PRE29]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Although these are two different collections of numbers, note that they have
    an identical arithmetic mean.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这两组数字不同，但请注意，它们具有相同的算术均值。
- en: '[PRE30]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Now let’s plot these two data vectors side by side, each one on a horizontal
    line, by executing the following:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们并排绘制这两个数据向量，每个数据向量位于一条水平线上，通过执行以下操作：
- en: '[PRE31]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: You saw how to use these base R graphics functions in [Chapter 7](ch07.xhtml#ch07),
    though it should be explained that because some of the observations in `xdata`
    and in `ydata` occur more than once, you can randomly alter them slightly to prevent
    overplotting, which aids in the visual interpretation. This step is known as *jittering*
    and is achieved by passing the numeric vector of interest to the `jitter` function
    prior to plotting with `points`. Additionally, note that you can use `yaxt="n"`
    in any call to `plot` to suppress the *y*-axis; similarly, `bty="n"` removes the
    typical box that’s placed around a plot (you’ll focus more on this type of plot
    customization in [Chapter 23](ch23.xhtml#ch23)).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经在[第7章](ch07.xhtml#ch07)中了解了如何使用这些基础的R图形函数，尽管需要解释的是，由于`xdata`和`ydata`中的某些观测值出现了多次，你可以随机稍微修改它们以防止重叠，这有助于视觉解释。这一步被称为*抖动*，可以通过在绘图前将感兴趣的数值向量传递给`jitter`函数来实现。此外，请注意，在任何`plot`调用中使用`yaxt="n"`可以抑制*y*-轴的显示；同样，`bty="n"`可以去除绘图周围的典型框线（你将在[第23章](ch23.xhtml#ch23)中更多地关注这种类型的图形定制）。
- en: The result, shown in [Figure 13-3](ch13.xhtml#ch13fig3), provides you with valuable
    information. Though the mean is the same for both `xdata` and `ydata`, you can
    easily see that the observations in `ydata` are more “spread out” around the measure
    of centrality than the observations in `xdata`. To quantify spread, you use values
    such as the variance, the standard deviation, and the interquartile range.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图13-3](ch13.xhtml#ch13fig3)所示，结果提供了有价值的信息。尽管 `xdata` 和 `ydata` 的均值相同，但你可以很容易看出，`ydata`
    中的观察值围绕中心值的“扩展”比 `xdata` 中的观察值要更大。为了量化这种扩展，你可以使用方差、标准差和四分位差等值。
- en: '![image](../images/f13-03.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-03.jpg)'
- en: '*Figure 13-3: Comparing two hypothetical data vectors that share an identical
    arithmetic mean (marked by the vertical dotted line) but have different magnitudes
    of spread. Identical observations are jittered slightly.*'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '*图13-3：比较两个假设的数据向量，它们共享相同的算术均值（由垂直虚线标出），但具有不同的扩展幅度。相同的观察值稍微有些抖动。*'
- en: 'The sample *variance* measures the degree of the spread of numeric observations
    around their arithmetic mean. The variance is a particular representation of the
    *average squared distance* of each observation when compared to the mean. For
    a set of *n* numeric measurements labeled *x* = {*x*[1], *x*[2], . . . , *x*[n]},
    the sample variance ![image](../images/common-05.jpg) is given by the following,
    where *x̄* is the sample mean described in [Equation (13.1)](ch13.xhtml#ch13eq1):'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 样本*方差*衡量了数值观察值围绕算术均值的扩展程度。方差是每个观察值与均值的*平均平方距离*的特殊表示。对于一组标记为 *x* = {*x*[1], *x*[2],
    ... , *x*[n]} 的 *n* 个数值测量，样本方差 ![image](../images/common-05.jpg)由下式给出，其中 *x̄*
    是在[公式（13.1）](ch13.xhtml#ch13eq1)中描述的样本均值：
- en: '![image](../images/e13-3.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-3.jpg)'
- en: 'For example, if you take the eight illustrative observations 2, 4.4, 3, 3,
    2, 2.2, 2, 4, their sample variance is as follows when rounded to three decimal
    places (some terms are hidden with ... for readability):'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果你取八个示例观察值 2、4.4、3、3、2、2.2、2、4，它们的样本方差在四舍五入到三位小数后如下（为了可读性，某些项被省略以“...”表示）：
- en: '![image](../images/f0277-02.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0277-02.jpg)'
- en: The *standard deviation* is simply the square root of the variance. Since the
    variance is a representation of the average squared distance, the standard deviation
    provides a value interpretable with respect to the scale of the original observations.
    With the same notation for a sample of *n* observations, the sample standard deviation
    *s* is found by taking the square root of [Equation (13.3)](ch13.xhtml#ch13eq3).
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '*标准差* 只是方差的平方根。由于方差是平均平方距离的表示，标准差提供了一个可以根据原始观察值的尺度来解释的值。使用相同的符号，对于 *n* 个观察值的样本，样本标准差
    *s* 可以通过取[公式（13.3）](ch13.xhtml#ch13eq3)的平方根来计算。'
- en: '![image](../images/e13-4.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-4.jpg)'
- en: 'For example, based on the sample variance calculated earlier, the standard
    deviation of the eight hypothetical observations is as follows (to three decimal
    places):'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，根据之前计算的样本方差，这八个假设观察值的标准差如下（三位小数）：
- en: '![image](../images/f0278-01.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0278-01.jpg)'
- en: Thus, a rough way to interpret this is that 0.953 represents the average distance
    of each observation from the mean.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，粗略地说，0.953表示每个观察值与均值的平均距离。
- en: Unlike the variance and standard deviation, the *interquartile range (IQR)*
    is not computed with respect to the sample mean. The IQR measures the width of
    the “middle 50 percent” of the data, that is, the range of values that lie within
    a 25 percent quartile on either side of the median. As such, the IQR is computed
    as the difference between the upper and lower quartiles of your data. Formally,
    where *Q[x]* ( · ) denotes the quantile function (as defined in [Section 13.2.3](ch13.xhtml#ch13lev2sec118)),
    the IQR is given as
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 与方差和标准差不同，*四分位差（IQR）* 不是相对于样本均值计算的。四分位差衡量数据“中间50%”的宽度，也就是说，位于中位数两侧25%四分位数范围内的值的范围。因此，IQR
    是通过计算数据的上四分位数和下四分位数之差来得出的。正式地，当 *Q[x]* ( · ) 表示四分位函数（如[13.2.3节](ch13.xhtml#ch13lev2sec118)中定义），IQR
    的计算公式为：
- en: '![image](../images/e13-5.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-5.jpg)'
- en: The direct R commands for computing these measures of spread are `var` (variance),
    `sd` (standard deviation), and `IQR` (interquartile range).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 用于计算这些扩展度量的直接 R 命令是 `var`（方差）、`sd`（标准差）和 `IQR`（四分位差）。
- en: '[PRE32]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: You can confirm the relationship between the sample variance and standard deviation
    using the square root function `sqrt` on the result from `var`, and you can reproduce
    the IQR by calculating the difference between the third and first quartiles.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用平方根函数`sqrt`来验证样本方差与标准差之间的关系，基于`var`的结果，并可以通过计算第三四分位数和第一四分位数之间的差异来重现IQR。
- en: '[PRE33]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Note that `as.numeric` (see [Section 6.2.4](ch06.xhtml#ch06lev2sec62)) strips
    away the percentile annotations (that label the results by default) from the returned
    object of `quantile`.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，`as.numeric`（见[第6.2.4节](ch06.xhtml#ch06lev2sec62)）会去掉`quantile`返回对象中的百分位标注（默认情况下为结果标注标签）。
- en: 'Now, do the same with the `ydata` observations that had the same arithmetic
    mean as `xdata`. The calculations give you the following:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，对具有与`xdata`相同算术平均值的`ydata`观察进行相同的操作。计算结果如下：
- en: '[PRE34]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '`ydata` is on the same scale as `xdata`, so the results confirm what you can
    see in [Figure 13-3](ch13.xhtml#ch13fig3)—that the observations in the former
    are more spread out than in the latter.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '`ydata`与`xdata`在同一尺度上，因此结果验证了你在[图13-3](ch13.xhtml#ch13fig3)中看到的内容——即前者的观察数据比后者更加分散。'
- en: 'For two quick final examples, let’s return again to the `chickwts` and `quakes`
    data sets. In [Section 13.2.1](ch13.xhtml#ch13lev2sec116), you saw that the mean
    weight of all the chicks is 261.3099 grams. You can now find that the standard
    deviation of the weights is as follows:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 对于两个快速的最终示例，让我们再次回到`chickwts`和`quakes`数据集。在[第13.2.1节](ch13.xhtml#ch13lev2sec116)中，你看到所有小鸡的平均体重为261.3099克。你现在可以找到体重的标准差如下：
- en: '[PRE35]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Informally, this implies that the weight of each chick is, on average, around
    78.1 grams away from the mean weight (technically, though, remember it is merely
    the square root of a function of the squared distances—see the following note).
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 非正式地说，这意味着每只小鸡的平均体重大约偏离均值78.1克（但从技术上讲，记住这仅仅是平方距离函数的平方根——请参见以下注释）。
- en: In [Section 13.2.3](ch13.xhtml#ch13lev2sec118), you used `summary` to obtain
    the five-number summary of the magnitudes of some of the earthquakes in the `quakes`
    data set. Looking at the first and third quartiles in these earlier results (4.4
    and 4.9, respectively), you can quickly determine that the IQR of this subset
    of the events is 0.5\. This can be confirmed using `IQR`.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第13.2.3节](ch13.xhtml#ch13lev2sec118)中，你使用`summary`来获取`quakes`数据集中某些地震的五数概括。查看这些结果中的第一和第三四分位数（分别为4.4和4.9），你可以快速得出这个子集事件的IQR为0.5。这可以通过使用`IQR`来确认。
- en: '[PRE36]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: This gives you the width, in units of the Richter scale, of the middle 50 percent
    of the observations.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了在里氏震级单位中，观察数据中间50%范围的宽度。
- en: '**NOTE**'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '**注释**'
- en: '*The definition of the variance (and hence the standard deviation) here has
    referred exclusively to the “sample estimator,” the default in R, which uses the
    divisor of n* − *1 in the formula. This is the formula used when the observations
    at hand represent a sample of an assumed larger population. In these cases, use
    of the divisor n* − *1 is more accurate, providing what’s known as an* unbiased
    *estimate of the true population value. Thus, you aren’t exactly calculating the
    “average squared distance,” though it can loosely be thought of as such and does
    indeed approach this as the sample size n increases.*'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '*这里方差（从而标准差）的定义仅指“样本估计量”，这是R的默认设置，使用公式中的n* − *1作为除数。这是当手头的观察代表假定的大型总体样本时所使用的公式。在这些情况下，使用除数n*
    − *1更为准确，提供了所谓的*无偏*估计量。因此，你并不完全是在计算“平均平方距离”，尽管可以宽松地认为它是这样，并且随着样本量n的增加，确实会接近这种情况。*'
- en: '**Exercise 13.3**'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 13.3**'
- en: Using the `chickwts` data frame, compute the 10th, 30th, and 90th percentiles
    of all the chick weights and then use `tapply` to determine which feed type is
    associated with the highest sample variance of weights.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`chickwts`数据框，计算所有小鸡体重的第10、第30和第90百分位数，然后使用`tapply`来确定与体重样本方差最大相关的饲料类型。
- en: 'Turn to the seismic event data in `quakes` and complete the following tasks:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到`quakes`中的地震事件数据，并完成以下任务：
- en: Find the IQR of the recorded depths.
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算记录深度的四分位距（IQR）。
- en: Find the five-number summary of all magnitudes of seismic events that occur
    at a depth of 400 km *or deeper*. Compare this to the summary values found in
    [Section 13.2.3](ch13.xhtml#ch13lev2sec118) of those events occurring at less
    than 400 km and briefly comment on what you notice.
  id: totrans-192
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找所有发生在400 km *或更深*深度的地震事件震级的五数摘要。将其与[第13.2.3节](ch13.xhtml#ch13lev2sec118)中发生在400
    km以下深度的地震事件的五数摘要进行比较，并简要评论你所观察到的差异。
- en: 'Use your knowledge of `cut` ([Section 4.3.3](ch04.xhtml#ch04lev2sec48)) to
    create a new factor vector called `depthcat` that identifies four evenly spaced
    categories of `quakes$depth` so that when you use `levels(depthcat)`, it gives
    the following:'
  id: totrans-193
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运用你对`cut`（[第4.3.3节](ch04.xhtml#ch04lev2sec48)）的理解，创建一个新的因子向量`depthcat`，它将`quakes$depth`分为四个均匀间隔的类别，确保当你使用`levels(depthcat)`时，得到如下结果：
- en: '[PRE37]'
  id: totrans-194
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Find the sample mean and standard deviation of the magnitudes of the events
    associated with each category of depth according to `depthcat`.
  id: totrans-195
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找与`depthcat`每个深度类别相关的地震事件震级的样本均值和标准差。
- en: Use `tapply` to compute the 0.8th quantile of the magnitudes of the seismic
    events in `quakes`, split by `depthcat`.
  id: totrans-196
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`tapply`来计算`quakes`中按`depthcat`分组的地震事件震级的0.8分位数。
- en: '***13.2.5 Covariance and Correlation***'
  id: totrans-197
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.2.5 协方差与相关性***'
- en: When analyzing data, it’s often useful to be able to investigate the *relationship*
    between two numeric variables to assess trends. For example, you might expect
    height and weight observations to have a noticeable positive relationship—taller
    people tend to weigh more. Conversely, you might imagine that handspan and length
    of hair would have less of an association. One of the simplest and most common
    ways such associations are quantified and compared is through the idea of correlation,
    for which you need the covariance.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在分析数据时，能够研究两个数值变量之间的*关系*是很有用的，以便评估趋势。例如，你可能预期身高与体重之间会有明显的正相关关系——身高较高的人往往体重大一些。相反，你可能认为手掌跨度和头发长度之间的关联较小。量化和比较这种关联的最简单和最常见的方式之一就是通过相关性的概念，而这需要协方差的计算。
- en: 'The *covariance* expresses how much two numeric variables “change together”
    and the nature of that relationship, whether it is positive or negative. Suppose
    for *n* individuals you have a sample of observations for two variables, labeled
    *x* = {*x*[1], *x*[2], . . . , *x*[n]} and *y* = {*y*[1], *y*[2], . . . , *y*[n]},
    where *x[i]* corresponds to *y[i]* for *i* = 1, . . . , *n*. The sample covariance
    *r[xy]* is computed with the following, where x̄ and ![image](../images/y2.jpg)
    represent the respective sample means of both sets of observations:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '*协方差*表示两个数值变量是如何“共同变化”的，以及这种关系的性质，无论是正相关还是负相关。假设你有*n*个个体，对于两个变量，分别标记为*x* =
    {*x*[1], *x*[2], . . . , *x*[n]} 和 *y* = {*y*[1], *y*[2], . . . , *y*[n]}，其中*x[i]*与*y[i]*相对应，*i*
    = 1, . . . , *n*。样本协方差*r[xy]*的计算公式如下，其中x̄和![image](../images/y2.jpg)分别表示两组观测值的样本均值：'
- en: '![image](../images/e13-6.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-6.jpg)'
- en: When you get a positive result for *r*[xy], it shows that there is a positive
    linear relationship—as *x* increases, *y* increases. When you get a negative result,
    it shows a negative linear relationship—as *x* increases, *y* decreases, and vice
    versa. When *r[xy]* = 0, this indicates that there is no linear relationship between
    the values of *x* and *y*. It is useful to note that the order of the variables
    in the formula itself doesn’t matter; in other words, *r[xy]* ≡ *r*[yx].
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 当你得到正值的*r*[xy]时，表示存在正线性关系——即随着*x*的增加，*y*也增加。当你得到负值时，表示存在负线性关系——即随着*x*的增加，*y*减少，反之亦然。当*r[xy]*
    = 0时，表示*x*和*y*之间没有线性关系。需要注意的是，公式中变量的顺序并不重要；换句话说，*r[xy]* ≡ *r*[yx]。
- en: 'To demonstrate, let’s use the original eight illustrative observations, which
    I’ll denote here with *x* = {2,4.4,3,3,2,2.2,2,4}, and the additional eight observations
    denoted with *y* = {1,4.4,1,3,2,2.2,2,7}. Remember that both *x* and *y* have
    sample means of 2.825\. The sample covariance of these two sets of observations
    is as follows (rounded to three decimal places):'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示，我们使用原始的八个示例观测值，记作*x* = {2,4.4,3,3,2,2.2,2,4}，以及另外八个观测值，记作*y* = {1,4.4,1,3,2,2.2,2,7}。请记住，*x*和*y*的样本均值均为2.825。这两组观测值的样本协方差如下（保留三位小数）：
- en: '![image](../images/f0281-01.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0281-01.jpg)'
- en: The figure is a positive number, so this suggests there is a positive relationship
    based on the observations in *x* and *y*.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 该数字为正值，这表明基于*x*和*y*的观测结果，存在正相关关系。
- en: '*Correlation* allows you to interpret the covariance further by identifying
    both the direction and the strength of any association. There are different types
    of correlation coefficients, but the most common of these is *Pearson’s product-moment
    correlation coefficient*, the default implemented by R (this is the estimator
    I will use in this chapter). Pearson’s sample correlation coefficient *ρ*[xy]
    is computed by dividing the sample covariance by the product of the standard deviation
    of each data set. Formally, where *r[xy]* corresponds to [Equation (13.6)](ch13.xhtml#ch13eq6)
    and *s[x]* and *s[y]* to [Equation (13.4)](ch13.xhtml#ch13eq4),'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '*相关性*使你能够通过识别任何关联的方向和强度，进一步解释协方差。有不同类型的相关系数，但最常见的是*皮尔逊积矩相关系数*，这是R语言中默认实现的相关系数（这是我在本章中使用的估计器）。皮尔逊样本相关系数*ρ*[xy]是通过将样本协方差除以每个数据集的标准差乘积来计算的。形式上，其中*r[xy]*对应于[方程式
    (13.6)](ch13.xhtml#ch13eq6)，*s[x]*和*s[y]*对应于[方程式 (13.4)](ch13.xhtml#ch13eq4)，'
- en: '![image](../images/e13-7.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e13-7.jpg)'
- en: which ensures that −1 ≤ *ρ*[xy] ≤ 1.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 这确保了−1 ≤ *ρ*[xy] ≤ 1。
- en: When *ρ*[xy] = −1, a perfect negative linear relationship exists. Any result
    less than zero shows a negative relationship, and the relationship gets weaker
    the nearer to zero the coefficient gets, until *ρ*[xy] = 0, showing no relationship
    at all. As the coefficient increases above zero, a positive relationship is shown,
    until *ρ*[xy] = 1, which is a perfect positive linear relationship.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 当*ρ*[xy] = −1时，存在完全负线性关系。任何小于零的结果表示负相关关系，系数越接近零，关系越弱，直到*ρ*[xy] = 0，表示完全没有关系。当系数大于零时，表示正相关关系，直到*ρ*[xy]
    = 1，表示完全正线性关系。
- en: 'If you take the standard deviations already computed for *x* and *y* in [Section
    13.2.4](ch13.xhtml#ch13lev2sec119) (*s*[x] = 0.953 and *s[y]* = 2.013 to three
    decimal places), you find the following to three decimal places:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你采用[第13.2.4节](ch13.xhtml#ch13lev2sec119)中已经计算出的*x*和*y*的标准差（*s*[x] = 0.953，*s[y]*
    = 2.013，精确到小数点后三位），你会发现以下结果（精确到小数点后三位）：
- en: '![image](../images/f0281-02.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0281-02.jpg)'
- en: '*ρ*[xy] is positive just like *r*[xy]; the value of 0.771 indicates a moderate-to-strong
    positive association between the observations in *x* and *y*. Again, *ρ*[xy] ≡
    *ρ*[yx].'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '*ρ*[xy]是正数，就像*r*[xy]一样；0.771的值表示*x*和*y*之间存在中到强的正相关关系。同样，*ρ*[xy] ≡ *ρ*[yx]。'
- en: The R commands `cov` and `cor` are used for the sample covariance and correlation;
    you need only to supply the two corresponding vectors of data.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: R命令`cov`和`cor`用于计算样本协方差和相关系数；你只需提供两个相应的数据向量。
- en: '[PRE38]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'You can plot these bivariate observations as a coordinate-based plot (a *scatterplot*—see
    more examples in [Section 14.4](ch14.xhtml#ch14lev1sec47)). Executing the following
    gives you [Figure 13-4](ch13.xhtml#ch13fig4):'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以将这些二元观察值绘制为基于坐标的图（*散点图*——更多示例见[第14.4节](ch14.xhtml#ch14lev1sec47)）。执行以下命令会得到[图13-4](ch13.xhtml#ch13fig4)：
- en: '[PRE39]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '![image](../images/f13-04.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-04.jpg)'
- en: '*Figure 13-4: Plotting the* `xdata` *and* `ydata` *observations as bivariate
    data points to illustrate the interpretation of the correlation coefficient*'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '*图13-4：绘制* `xdata` *和* `ydata` *观察值作为二元数据点，以说明相关系数的解释*'
- en: As discussed earlier, the correlation coefficient estimates the nature of the
    *linear* relationship between two sets of observations, so if you look at the
    pattern formed by the points in [Figure 13-4](ch13.xhtml#ch13fig4) and imagine
    drawing a perfectly straight line that best represents all the points, you can
    determine the strength of the linear association by how close those points are
    to your line. Points closer to a perfect straight line will have a value of *ρ*[xy]
    closer to either −1 or 1\. The direction is determined by how the line is sloped—an
    increasing trend, with the line sloping upward toward the right, indicates positive
    correlation; a negative trend would be shown by the line sloping downward toward
    the right. Considering this, you can see that the estimated correlation coefficient
    for the data plotted in [Figure 13-4](ch13.xhtml#ch13fig4) makes sense according
    to the previous calculations. The points do appear to increase together as a rough
    straight line in terms of the values in `xdata` and `ydata`, but this linear association
    is by no means perfect. How you can compute the “ideal” or “best” straight line
    to fit such data is discussed in [Chapter 20](ch20.xhtml#ch20).
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，相关系数估计两个观测数据集之间*线性*关系的性质，因此，如果你查看[图13-4](ch13.xhtml#ch13fig4)中点所形成的模式，并假设画出一条完全直的线来最好地表示所有点，你可以通过这些点与线之间的接近程度来确定线性关联的强度。与完美直线更接近的点，其*ρ*[xy]值会更接近-1或1。方向由线条的斜率决定——上升趋势，线条朝右上方倾斜，表示正相关；下降趋势则表现为线条朝右下方倾斜。考虑到这一点，你可以看到，根据之前的计算，[图13-4](ch13.xhtml#ch13fig4)中的数据所估计的相关系数是合理的。数据点确实看起来会随着`xdata`和`ydata`的值一起增加，形成一条粗略的直线，但这种线性关联并不完美。如何计算拟合此类数据的“理想”或“最佳”直线将在[第20章](ch20.xhtml#ch20)中讨论。
- en: To aid your understanding of the idea of correlation, [Figure 13-5](ch13.xhtml#ch13fig5)
    displays different scatterplots, each showing 100 points. These observations have
    been randomly and artificially generated to follow preset “true” values of *ρ*[xy],
    labeled above each plot.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助你理解相关性的概念，[图13-5](ch13.xhtml#ch13fig5)展示了不同的散点图，每个图显示100个数据点。这些观测值是随机且人工生成的，遵循预设的“真实”*ρ*[xy]值，并在每个图上方标注。
- en: '![image](../images/f13-05.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-05.jpg)'
- en: '*Figure 13-5: Artificial* x *and* y *observations, generated to illustrate
    a given value of the correlation coefficient*'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '*图13-5：人工生成的* x *和* y *观测值，用于说明给定的相关系数值*'
- en: The first row of scatterplots shows negatively correlated data; the second shows
    positively correlated data. These match what you would expect to see—the direction
    of the line shows the negative or positive correlation of the trend, and the extremity
    of the coefficient corresponds to the closeness to a “perfect line.”
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 第一道散点图显示了负相关数据；第二道显示了正相关数据。这些与我们预期看到的结果一致——线条的方向显示了趋势的负相关或正相关，而系数的极值对应于“完美线”的接近程度。
- en: The third and final row shows data sets generated with a correlation coefficient
    set to zero, implying no linear relationship between the observations in *x* and
    *y*. The middle and rightmost plots are particularly important because they highlight
    the fact that Pearson’s correlation coefficient identifies only “straight-line”
    relationships; these last two plots clearly show some kind of trend or pattern,
    but this particular statistic cannot be used to detect such a trend.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 第三行也是最后一行，显示了相关系数为零的数据集，意味着* x*和* y*之间没有线性关系。中间和最右边的图特别重要，因为它们强调了皮尔逊相关系数仅识别“直线”关系的事实；这最后两幅图清楚地显示了某种趋势或模式，但该统计量不能用于检测这种趋势。
- en: 'To wrap up this section, look again at the `quakes` data. Two of the variables
    are `mag` (the magnitude of each event) and `stations` (the number of stations
    that reported detection of the event). A plot of `stations` on the *y*-axis against
    `mag` on the *x*-axis can be produced with the following:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 为了总结本节内容，再次查看`quakes`数据。两个变量是`mag`（每个事件的震级）和`stations`（报告事件检测的站点数量）。可以通过以下方式绘制`stations`在*
    y*轴上的数据与`mag`在* x*轴上的数据：
- en: '[PRE40]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[Figure 13-6](ch13.xhtml#ch13fig6) shows this image.'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '[图13-6](ch13.xhtml#ch13fig6)展示了这一图像。'
- en: '![image](../images/f13-06.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-06.jpg)'
- en: '*Figure 13-6: Plotting the number of stations reporting the event (* y*) and
    the magnitude (* x*) of each event in the* `quakes` *data frame*'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: '*图13-6：绘制报告事件的站点数量（* y*）和每个事件的震级（* x*）在`quakes`数据框中的分布图*'
- en: You can see by the vertical patterning that the magnitudes appear to have been
    recorded to a certain specific level of precision (this is owed to the difficulty
    associated with measuring earthquake magnitudes exactly). Nevertheless, a positive
    relationship (more stations tend to detect events of higher magnitude) is clearly
    visible in the scatterplot, a feature that is confirmed by a positive covariance.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 通过垂直的图案你可以看到，幅度似乎已被记录到某个特定的精度水平（这与精确测量地震幅度的困难有关）。尽管如此，在散点图中，显然可以看到一个正相关（更多的站点倾向于检测到更大幅度的事件），这一特征通过正协方差得到了确认。
- en: '[PRE41]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: As you might expect from examining the pattern, Pearson’s correlation coefficient
    confirms that the linear association is quite strong.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你从模式中可以预料到的，皮尔逊相关系数确认了线性关联非常强。
- en: '[PRE42]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '**NOTE**'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*It is important to remember that* correlation does not imply causation*. When
    you detect a high correlative effect between two variables, this does not mean
    that one* causes *the other. Causation is difficult to prove in even the most
    controlled situations. Correlation merely allows you to measure* association.'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: '*重要的是要记住，*相关性并不意味着因果关系*。当你检测到两个变量之间有很高的相关效应时，这并不意味着一个*导致*另一个。因果关系在即使是最受控的情况下也很难证明。相关性只是让你测量*关联性*。'
- en: As mentioned earlier, there are other representations of correlation that can
    be used; *rank* coefficients, such as Spearman’s and Kendall’s correlation coefficients,
    differ from Pearson’s estimate in that they do not require the relationship to
    be linear. These are also available through the `cor` function by accessing the
    optional `method` argument (see `?cor` for details). Pearson’s correlation coefficient
    is the most commonly used, however, and is related to linear regression methods,
    which you’ll start to examine in [Chapter 20](ch20.xhtml#ch20).
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，还有其他相关性的表示方法可以使用；*秩*相关系数，例如斯皮尔曼和肯德尔的相关系数，与皮尔逊的估计不同，因为它们不要求关系是线性的。这些也可以通过`cor`函数访问，通过设置可选的`method`参数（详细信息请参见`?cor`）。然而，皮尔逊相关系数是最常用的，并且与线性回归方法相关，你将在[第20章](ch20.xhtml#ch20)开始研究这些方法。
- en: '***13.2.6 Outliers***'
  id: totrans-236
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***13.2.6 异常值***'
- en: An *outlier* is an observation that does not appear to “fit” with the rest of
    the data. It is a noticeably extreme value when compared with the bulk of the
    data, in other words, an anomaly. In some cases, you might suspect that such an
    extreme observation has not actually come from the same mechanism that generated
    the other observations, but there is no hard-and-fast numeric rule as to what
    constitutes an outlier. For example, consider the 10 hypothetical data points
    in `foo`.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '*异常值*是一个观察值，它似乎与其余数据“不匹配”。与大多数数据相比，它是一个显著的极端值，换句话说，是一个异常。在某些情况下，你可能怀疑这样的极端观察值并不是来自与其他观察值相同的机制，但没有硬性数值规则来界定什么构成异常值。例如，考虑`foo`中的10个假设数据点。'
- en: '[PRE43]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Using skills from [Chapter 7](ch07.xhtml#ch07) (and from creating [Figure 13-3](ch13.xhtml#ch13fig3)),
    you can plot `foo` on a line as follows.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 利用[第7章](ch07.xhtml#ch07)的技巧（以及制作[图13-3](ch13.xhtml#ch13fig3)的技巧），你可以按照以下方式在一条线上绘制`foo`。
- en: '[PRE44]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: The result is given on the left of [Figure 13-7](ch13.xhtml#ch13fig7).
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 结果位于[图13-7](ch13.xhtml#ch13fig7)的左侧。
- en: '![image](../images/f13-07.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f13-07.jpg)'
- en: '*Figure 13-7: Illustrating the definition of outliers for univariate (left)
    and bivariate (right) data. Should you include such values in your statistical
    analysis? The answer can be difficult to determine.*'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '*图13-7：展示单变量（左）和双变量（右）数据的异常值定义。你是否应该在统计分析中包括这些值？答案可能很难确定。*'
- en: 'From this plot, you see that most of the observations are centered around zero,
    but one value is way out at 6\. To give a bivariate example, I’ll use two further
    vectors, `bar` and `baz`, shown here:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个图中，你可以看到大多数观察值集中在零附近，但有一个值远在6之外。为了给出一个双变量的例子，我将使用两个进一步的向量，`bar`和`baz`，如下所示：
- en: '[PRE45]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: I’ll plot these data using the following code; the result is on the right of
    [Figure 13-7](ch13.xhtml#ch13fig7).
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用以下代码绘制这些数据；结果位于[图13-7](ch13.xhtml#ch13fig7)的右侧。
- en: '[PRE46]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: It’s important to identify outliers because of the potential impact they can
    have on any statistical calculations or model fitting. For this reason, many researchers
    will try to identify possible outliers before computing results by conducting
    an “exploratory” analysis of their data using basic summary statistics and data
    visualization tools (like those you’ll look at in [Chapter 14](ch14.xhtml#ch14)).
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 识别异常值非常重要，因为它们可能对任何统计计算或模型拟合产生影响。因此，许多研究人员在计算结果之前，会通过进行“探索性”分析，使用基本的汇总统计和数据可视化工具（比如你将在[第
    14 章](ch14.xhtml#ch14)中学习到的那些）来尝试识别可能的异常值。
- en: Outliers can occur naturally, where the outlier is a “true” or accurate observation
    recorded from the population, or unnaturally, where something has “contaminated”
    that particular contribution to the sample, such as incorrectly inputting data.
    As such, it is common to omit any outliers occurring through unnatural sources
    prior to analysis, but in practice this is not always easy because the cause of
    an outlier can be difficult to determine. In some cases, researchers conduct their
    analysis both ways—presenting results including and excluding any perceived outliers.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 异常值可能是自然发生的，其中异常值是从总体中真实或准确记录的观察值，也可能是非自然发生的，其中某些因素“污染”了样本中的某一贡献，例如数据输入错误。因此，通常会在分析前排除通过非自然来源发生的异常值，但在实践中，这并不总是容易的，因为异常值的原因可能很难确定。在某些情况下，研究人员会同时进行两种分析——展示包括和排除任何被认为是异常值的结果。
- en: 'With this in mind, if you return to the example shown on the left in [Figure
    13-7](ch13.xhtml#ch13fig7), you can see that when you include all observations,
    you get the following:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这一点，如果你返回查看[图 13-7](ch13.xhtml#ch13fig7)中左侧的示例，你会看到当你包含所有观察值时，得到如下结果：
- en: '[PRE47]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'However, when the possible outlier of 6 (the 10th observation) is deleted,
    you get the following:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，当删除可能的异常值 6（第 10 个观察值）时，得到如下结果：
- en: '[PRE48]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: This highlights the impact a single extreme observation can have. Without any
    additional information about the sample, it would be difficult to say whether
    it’s sensible to exclude the outlier 6\. The same kind of effect is noticeable
    if you compute, say, the correlation coefficient of `bar` with `baz`, shown on
    the right in [Figure 13-7](ch13.xhtml#ch13fig7) (again, it’s the 10th observation
    that is the possible outlier).
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 这突显了单个极端观察值可能产生的影响。如果没有关于样本的额外信息，就很难判断是否应该排除异常值 6。类似的效果也能在计算例如`bar`与`baz`的相关系数时观察到，正如[图
    13-7](ch13.xhtml#ch13fig7)右侧所示（再次强调，第 10 个观察值可能是异常值）。
- en: '[PRE49]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: You see the correlation becomes much stronger without that outlier. Again, knowing
    whether to delete the outlier can be hard to correctly gauge in practice. At this
    stage, it’s important simply to be aware of the impact outliers can have on an
    analysis and to perform at least a cursory inspection of the raw data before beginning
    more rigorous statistical investigations.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 你会发现去除异常值后，相关性变得更强了。同样，判断是否删除异常值在实际中可能很难正确评估。在这个阶段，重要的是要意识到异常值可能对分析的影响，并在进行更严格的统计分析之前，至少对原始数据进行初步检查。
- en: '**NOTE**'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: '**注释**'
- en: '*The extent of the effect that extreme observations have on your data analysis
    depends not only on their extremity but on the statistics you intend to calculate.
    The sample mean, for example, is highly sensitive to outliers and will differ
    greatly when including or excluding them, so any statistic that depends on the
    mean, like the variance or covariance, will be affected too. Quantiles and related
    statistics, such as the median or IQR, are relatively unaffected by outliers.
    In statistical parlance this property is referred to as* robustness.'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: '*极端观察值对数据分析的影响程度不仅取决于其极端性，还取决于你打算计算的统计量。例如，样本均值对异常值非常敏感，包含或排除异常值会导致其差异很大，因此，任何依赖于均值的统计量，如方差或协方差，也会受到影响。分位数和相关统计量，如中位数或四分位距（IQR），相对不受异常值的影响。在统计学术语中，这种特性被称为*稳健性*。'
- en: '**Exercise 13.4**'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 13.4**'
- en: In [Exercise 7.1](ch07.xhtml#ch7exc1) (b) on [page 139](ch07.xhtml#page_139),
    you plotted height against weight measurements. Compute the correlation coefficient
    based on the observed data of these two variables.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[练习 7.1](ch07.xhtml#ch7exc1)的（b）部分中，[第 139 页](ch07.xhtml#page_139)展示了身高与体重的关系图。请根据这两个变量的观测数据计算相关系数。
- en: Another of R’s built-in, ready-to-use data sets is `mtcars`, containing a number
    of descriptive details on performance aspects of 32 automobiles.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: R的另一个内置的、现成可用的数据集是`mtcars`，其中包含了32辆汽车的多个性能方面的描述性数据。
- en: Ensure you can access this data frame by entering `mtcars` at the prompt. Then
    inspect its help file to get an idea of the types of data present.
  id: totrans-262
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你能通过在提示符下输入`mtcars`来访问这个数据框。然后检查它的帮助文件，以了解其中的数据类型。
- en: Two of the variables describe a vehicle’s horsepower and shortest time taken
    to travel a quarter-mile distance. Using base R graphics, plot these two data
    vectors with horsepower on the *x*-axis and compute the correlation coefficient.
  id: totrans-263
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两个变量描述了车辆的马力和完成四分之一英里距离的最短时间。使用基础R图形，绘制这两个数据向量，马力位于* x *轴上，并计算相关系数。
- en: Identify the variable in `mtcars` that corresponds to transmission type. Use
    your knowledge of factors in R to create a new factor from this variable called
    `tranfac`, where manual cars should be labeled `"manual"` and automatic cars `"auto"`.
  id: totrans-264
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定`mtcars`中对应变速类型的变量。利用你对R中因子的知识，从该变量中创建一个名为`tranfac`的新因子，其中手动汽车应标记为“manual”，自动汽车标记为“auto”。
- en: Now, use `qplot` from `ggplot2` in conjunction with `tranfac` to produce the
    same scatterplot as in (ii) so that you’re able to visually differentiate between
    manual and automatic cars.
  id: totrans-265
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用`ggplot2`中的`qplot`与`tranfac`结合，生成与（ii）相同的散点图，以便你能够在视觉上区分手动和自动汽车。
- en: Finally, compute separate correlation coefficients for horsepower and quarter-mile
    time based on the transmission of the vehicles and, comparing these estimates
    with the overall value from (ii), briefly comment on what you note.
  id: totrans-266
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，基于车辆的变速类型计算马力和四分之一英里时间的相关系数，并将这些估计值与（ii）中的整体值进行比较，简要评论你注意到的内容。
- en: 'Return to `chickwts` to complete the following tasks:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回`chickwts`以完成以下任务：
- en: Produce a plot like the left panel of [Figure 13-7](ch13.xhtml#ch13fig7), based
    on the weights of chicks on the sunflower diet only. Note that one of the sunflower-fed
    chicks has a far lower weight than the others.
  id: totrans-268
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据仅食向日葵饮食的小鸡体重，绘制如[图13-7](ch13.xhtml#ch13fig7)左侧面板所示的图表。注意其中一只向日葵饲养的小鸡的体重比其他小鸡低得多。
- en: Compute the standard deviation and IQR of the weights of the sunflower-fed chicks.
  id: totrans-269
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算向日葵饲养的小鸡体重的标准差和四分位距。
- en: Now, suppose you’re told that the lowest weight of the sunflower-fed chicks
    was caused by a certain illness, irrelevant to your research. Delete this observation
    and recalculate the standard deviation and IQR of the remaining sunflower chicks.
    Briefly comment on the difference in calculated values.
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，假设有人告诉你，食向日葵饲养的小鸡的最低体重大概是由某种疾病引起的，而这与您的研究无关。删除此观察值，并重新计算剩余向日葵饲养小鸡的标准差和四分位距。简要评论计算值的差异。
- en: '**Important Code in This Chapter**'
  id: totrans-271
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**本章重要代码**'
- en: '| **Function/operator** | **Brief description** | **First occurrence** |'
  id: totrans-272
  prefs: []
  type: TYPE_TB
  zh: '| **Function/operator** | **简要描述** | **首次出现** |'
- en: '| --- | --- | --- |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| `mean` | Arithmetic mean | [Section 13.2.1](ch13.xhtml#ch13lev2sec116), [p.
    268](ch13.xhtml#page_268) |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
  zh: '| `mean` | 算术平均数 | [第13.2.1节](ch13.xhtml#ch13lev2sec116), [第268页](ch13.xhtml#page_268)
    |'
- en: '| `median` | Median | [Section 13.2.1](ch13.xhtml#ch13lev2sec116), [p. 268](ch13.xhtml#page_268)
    |'
  id: totrans-275
  prefs: []
  type: TYPE_TB
  zh: '| `median` | 中位数 | [第13.2.1节](ch13.xhtml#ch13lev2sec116), [第268页](ch13.xhtml#page_268)
    |'
- en: '| `table` | Tabulate frequencies | [Section 13.2.1](ch13.xhtml#ch13lev2sec116),
    [p. 268](ch13.xhtml#page_268) |'
  id: totrans-276
  prefs: []
  type: TYPE_TB
  zh: '| `table` | 频率表 | [第13.2.1节](ch13.xhtml#ch13lev2sec116), [第268页](ch13.xhtml#page_268)
    |'
- en: '| `min, max, range` | Minimum and maximum | [Section 13.2.1](ch13.xhtml#ch13lev2sec116),
    [p. 268](ch13.xhtml#page_268) |'
  id: totrans-277
  prefs: []
  type: TYPE_TB
  zh: '| `min, max, range` | 最小值和最大值 | [第13.2.1节](ch13.xhtml#ch13lev2sec116), [第268页](ch13.xhtml#page_268)
    |'
- en: '| `round` | Round numeric values | [Section 13.2.2](ch13.xhtml#ch13lev2sec117),
    [p. 272](ch13.xhtml#page_272) |'
  id: totrans-278
  prefs: []
  type: TYPE_TB
  zh: '| `round` | 四舍五入数值 | [第13.2.2节](ch13.xhtml#ch13lev2sec117), [第272页](ch13.xhtml#page_272)
    |'
- en: '| `quantile` | Quantiles/percentiles | [Section 13.2.3](ch13.xhtml#ch13lev2sec118),
    [p. 274](ch13.xhtml#page_274) |'
  id: totrans-279
  prefs: []
  type: TYPE_TB
  zh: '| `quantile` | 分位数/百分位数 | [第13.2.3节](ch13.xhtml#ch13lev2sec118), [第274页](ch13.xhtml#page_274)
    |'
- en: '| `summary` | Five-number summary | [Section 13.2.3](ch13.xhtml#ch13lev2sec118),
    [p. 275](ch13.xhtml#page_275) |'
  id: totrans-280
  prefs: []
  type: TYPE_TB
  zh: '| `summary` | 五数概括 | [第13.2.3节](ch13.xhtml#ch13lev2sec118), [第275页](ch13.xhtml#page_275)
    |'
- en: '| `jitter` | Jitter points in plotting | [Section 13.2.4](ch13.xhtml#ch13lev2sec119),
    [p. 276](ch13.xhtml#page_276) |'
  id: totrans-281
  prefs: []
  type: TYPE_TB
  zh: '| `jitter` | 绘图中的抖动点 | [第13.2.4节](ch13.xhtml#ch13lev2sec119), [第276页](ch13.xhtml#page_276)
    |'
- en: '| `var, sd` | Variance, standard deviation | [Section 13.2.4](ch13.xhtml#ch13lev2sec119),
    [p. 278](ch13.xhtml#page_278) |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
  zh: '| `var, sd` | 方差，标准差 | [第13.2.4节](ch13.xhtml#ch13lev2sec119), [第278页](ch13.xhtml#page_278)
    |'
- en: '| `IQR` | Interquartile range | [Section 13.2.4](ch13.xhtml#ch13lev2sec119),
    [p. 278](ch13.xhtml#page_278) |'
  id: totrans-283
  prefs: []
  type: TYPE_TB
  zh: '| `IQR` | 四分位距 | [第13.2.4节](ch13.xhtml#ch13lev2sec119), [第278页](ch13.xhtml#page_278)
    |'
- en: '| `cov, cor` | Covariance, correlation | [Section 13.2.5](ch13.xhtml#ch13lev2sec120),
    [p. 281](ch13.xhtml#page_281) |'
  id: totrans-284
  prefs: []
  type: TYPE_TB
  zh: '| `cov, cor` | 协方差，相关性 | [第13.2.5节](ch13.xhtml#ch13lev2sec120)，[第281页](ch13.xhtml#page_281)
    |'
