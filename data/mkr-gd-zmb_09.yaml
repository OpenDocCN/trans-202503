- en: '**9**'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**9**'
- en: '**ZOMBIE DISTRACTORS**'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**僵尸干扰器**'
- en: '![image](graphics/f0001-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f0001-01.jpg)'
- en: It doesn’t take much to fool a zombie so you can make a quick escape (see [Figure
    9-1](ch09.html#ch09fig1)). They are rather lacking in brains, after all. The projects
    in this chapter are designed to draw zombies’ attention away from you using flashes
    of light, loud sounds, and decoy movements. Imagine you have a herd of zombies
    lurching around the garage door but you need to get to your last remaining car
    battery. These distractors will allow you to draw the zombies away from the door
    or even lure them into a fatal zombie trap, perhaps involving fire and a big hole
    in the ground.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 欺骗僵尸并不需要太多技巧，这样你就能快速逃脱（见[图9-1](ch09.html#ch09fig1)）。毕竟，它们的大脑相当缺乏。章节中的项目旨在利用闪光、响亮的声音和诱饵动作来吸引僵尸的注意力。想象一下，你身边一群僵尸围绕着车库门晃动，而你需要取回最后一块电池。这些干扰器能帮助你把僵尸引开，甚至可能将它们引入一个致命的僵尸陷阱，可能包括火焰和一个大洞。
- en: The first project uses flash units from disposable cameras to produce a disorienting
    series of flashes to confuse the zombies. The second project uses sound and movement
    to attract the zombies’ attention. Build these projects and affix them to key
    locations in your base so you can direct zombies away from you.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个项目使用一次性相机的闪光灯，产生令人迷惑的闪光系列，迷惑僵尸。第二个项目则使用声音和运动来吸引僵尸的注意力。完成这些项目，并将它们固定在基地的关键位置，这样你就可以引导僵尸远离你。
- en: '![image](graphics/f09-01.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-01.jpg)'
- en: 'Figure 9-1: Smile please!'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-1：请笑一下！
- en: '**PROJECT 15: ARDUINO FLASH DISTRACTOR**'
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目15：Arduino闪光干扰器**'
- en: This flash distractor combines an Arduino and old disposable cameras to produce
    a timed series of flashes that will confound your brain-hungry foes. Proprietors
    of old-fashioned photo developer stores are often happy for you to take armfuls
    of used disposable film cameras off their hands. This is especially true if the
    proprietors are the animated deceased. They might appear to grumble at you, but
    I assure you, whatever groaning noises they make are entirely coincidental.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 这个闪光干扰器将Arduino与旧的一次性相机结合，产生定时闪光系列，干扰你的脑袋渴望食物的敌人。老式照片冲印店的老板们通常乐于让你带走成堆的二手一次性相机。如果老板们是活死人，那就更是如此了。他们可能会对你发出一些咕哝声，但我向你保证，任何他们发出的呻吟声纯粹是巧合。
- en: '[Figure 9-2](ch09.html#ch09fig2) shows the completed zombie flash distractor
    with three salvaged single-use flash cameras, modified to allow the flashes to
    be triggered by an Arduino. The three cameras are taped together as a block with
    all the flashes pointing outward.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[图9-2](ch09.html#ch09fig2)展示了完成的僵尸闪光干扰器，包含三个回收的单次使用闪光相机，这些相机被修改为通过Arduino触发闪光。这三个相机被用胶带绑成一个块，所有闪光灯都指向外侧。'
- en: '![image](graphics/f09-02.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-02.jpg)'
- en: 'Figure 9-2: The completed zombie flash distractor'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-2：完成的僵尸闪光干扰器
- en: The three flash modules are arranged so that each one points at a right angle
    to every other, giving 270 degrees of coverage. You will need a separate Arduino
    for this project as you will not want to position this right next to your control
    center.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 三个闪光模块被安排成每个都与其他模块呈直角，以实现270度的覆盖范围。你将需要一个独立的Arduino，因为你不希望将它放在控制中心旁边。
- en: '**WARNING**'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告**'
- en: If you have a pacemaker or heart problems, or if flashing lights give you seizures,
    do not build this project.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有心脏起搏器或心脏问题，或者如果闪光灯会引发你癫痫发作，请勿制作此项目。
- en: '**WARNING: HIGH VOLTAGES AND BRIGHT FLASHES**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告：高电压和强烈闪光**'
- en: 'Flashguns in disposable cameras operate at up to 400V DC. If you want to avoid
    an unpleasant shock, exercise extreme caution when taking the cameras apart and
    handling the flash modules. Many parts of the module will be at high voltage and
    can remain so for hours or even days. Before using the modules, make sure to follow
    the instructions in “[Step 3: Make the Camera Safe](ch09.html#ch00lev1sec161)!”
    on [page 163](ch09.html#page_163) to safely discharge the capacitor.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 一次性相机中的闪光灯工作电压高达400V直流电。如果你想避免不愉快的电击，在拆解相机和处理闪光模块时必须格外小心。模块的许多部件会保持高电压，并且可能持续数小时甚至几天。在使用这些模块之前，请确保按照“[第3步：确保相机安全](ch09.html#ch00lev1sec161)”中的说明，在[第163页](ch09.html#page_163)安全放电电容器。
- en: '**WHAT YOU WILL NEED**'
  id: totrans-17
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**所需物品**'
- en: 'To make this project, you will need the following parts:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 为了制作这个项目，你将需要以下部件：
- en: '| **ITEMS** | **NOTES** | **SOURCE** |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| **物品** | **备注** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit，Fry’s（7224833），Sparkfun
    |'
- en: '| ![image](graphics/square.jpg) Relay shield | 4-channel relay shield | eBay,
    [http://www.sainsmart.com/](http://www.sainsmart.com/) |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 继电器扩展板 | 4 通道继电器扩展板 | eBay，[http://www.sainsmart.com/](http://www.sainsmart.com/)
    |'
- en: '| ![image](graphics/square.jpg) Disposable cameras | 3 used disposable flash
    cameras | Photo store |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 一次性相机 | 3 台用过的一次性闪光相机 | 照片商店 |'
- en: '| ![image](graphics/square.jpg) 9V battery | PP3 type 9V battery, or larger
    9V or 12V battery pack | Hardware store |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 9V 电池 | PP3 类型 9V 电池，或更大容量的 9V 或 12V 电池包 |
    五金店 |'
- en: '| ![image](graphics/square.jpg) 9V Arduino battery lead | DC power jack to
    9V battery clip adapter | Adafruit (80), eBay |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 9V Arduino 电池线 | DC 电源插座到 9V 电池夹适配器 | Adafruit（80），eBay
    |'
- en: '| ![image](graphics/square.jpg) Double-core wire | Three 6-inch (15 cm) lengths
    of bell wire or other double-core wire | Hardware store, scavenge |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 双核电线 | 三段 6 英寸（15 厘米）长的电话线或其他双核电线 | 五金店，捡拾
    |'
- en: '| ![image](graphics/square.jpg) Gaffer or electrical tape |  | Auto parts store
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 加热带或电工胶带 |  | 汽车配件店 |'
- en: '| ![image](graphics/square.jpg) 100 Ω resistor | For discharging the camera’s
    flash capacitor | Mouser (293-100-RC) |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 100 Ω 电阻 | 用于放电相机闪光电容 | Mouser（293-100-RC）
    |'
- en: There are few uses for spent disposable cameras and a store’s only alternative
    is to pay for someone to take them away, so if you ask store owners nicely, they
    may give you a stack for free.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 一次性相机用处不多，商店唯一的选择是付钱让人把它们带走，所以如果你礼貌地问商店老板，他们可能会免费给你一堆相机。
- en: Along with a perfectly fine flash module, each camera will generally have an
    almost unused AA or AAA battery. Try to get a set of cameras that are similar
    to each other, ideally cameras of the same make. (In the bag of cameras I took
    away, the most common brand was Fuji, so I based the project on that design. However,
    the instructions should be sufficiently general to work with any disposable camera.)
    Also, find cameras that have a switch that turns the flash on for multiple photos,
    not the sort that make you press the flash button between each shot. For example,
    look at the camera at the front of [Figure 9-2](ch09.html#ch09fig2). It has a
    kind of lever that keeps the flash turned on (bottom center of the figure).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 每台相机通常都会配备一块几乎未使用的 AA 或 AAA 电池，连同一个完全正常的闪光模块。尽量获取一组类似的相机，最好是同一品牌的相机。（在我拿到的相机袋子里，最常见的品牌是富士，所以我基于这个设计进行项目。不过，说明书应该足够通用，适用于任何一次性相机。）此外，找一些有开关可以保持闪光灯开着拍多张照片的相机，而不是那种每拍一张就需要按一次闪光按钮的类型。例如，看看
    [图 9-2](ch09.html#ch09fig2) 前面的相机。它有一个杠杆，可以让闪光灯保持开启（图中底部中央）。
- en: The relay shield was bought on eBay, and when you attach it to the Arduino,
    it connects a relay to Arduino pins 4, 5, 6, and 7\. If you end up with a slightly
    different relay shield, just check which digital Arduino pins it uses and make
    the necessary changes in the Arduino sketch (see “[Software](ch11.html#ch00lev1sec215)”
    on [page 166](ch09.html#page_166)).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 继电器扩展板是在 eBay 上购买的，当你将它连接到 Arduino 时，它将继电器连接到 Arduino 的 4、5、6 和 7 引脚。如果你得到的继电器扩展板稍有不同，只需检查它使用的数字
    Arduino 引脚，并在 Arduino 草图中做相应的更改（参见 “[软件](ch11.html#ch00lev1sec215)” 页 [166](ch09.html#page_166)）。
- en: The 100 Ω resistor is used to discharge the large, high-voltage capacitor used
    in the flash module to avoid the risk of electric shocks. It plays no other part
    in the build.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 100 Ω 电阻用于放电闪光模块中使用的大型高压电容，以避免电击的风险。它在构建中没有其他作用。
- en: '**CONSTRUCTION**'
  id: totrans-33
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建**'
- en: '[Figure 9-3](ch09.html#ch09fig3) shows the wiring involved in this project.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 9-3](ch09.html#ch09fig3) 显示了这个项目中的布线。'
- en: '![image](graphics/f09-03.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-03.jpg)'
- en: 'Figure 9-3: The flash distractor, spread out'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-3：闪光灯干扰器，展开图
- en: Each of the disposable cameras has a short length of double-core wire leaving
    one side of its case. These wires connect to the switch contact inside the camera
    that is used to trigger the flash. I’ll describe how to create this setup for
    one camera in construction Steps 2 to 5, and you’ll need to repeat those steps
    for all three cameras.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 每个一次性相机都有一段双核电线从相机外壳的一侧伸出。这些电线连接到相机内部的开关触点，用于触发闪光灯。我将在步骤 2 到 5 中描述如何为一台相机创建此设置，你需要为所有三台相机重复这些步骤。
- en: Each pair of leads connects to one pair of relay contacts on the shield so that
    the Arduino can trigger each flash independently.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 每对引线连接到屏蔽上的一对继电器接触点，以便Arduino能够独立触发每个闪光灯。
- en: Each camera also has its own AA or AAA battery that powers the flash, while
    the Arduino and relay shield are powered from a 9V battery connected to the DC
    barrel jack of the Arduino. This makes the project completely portable, so you
    can place it wherever needed to create a distraction that lets you escape.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 每个相机还配有自己的AA或AAA电池，为闪光灯供电，而Arduino和继电器屏蔽则由连接到Arduino直流插孔的9V电池供电。这使得项目完全便携，因此你可以将其放置在需要的地方，制造干扰来帮助你逃脱。
- en: '**STEP 1: SORT THE CAMERAS**'
  id: totrans-40
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 1：整理相机**'
- en: First, sort your bag of cameras by type. To make this project simpler to build,
    try to pick out three identical cameras. The modules I used were all Fujifilm,
    though the branding on the cardboard covers differed.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，将你的相机包按类型整理。为了使这个项目更容易构建，尽量挑选出三台相同的相机。我使用的模块都是富士胶片的，尽管纸板封面上的品牌不同。
- en: '**WARNING**'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告**'
- en: Do not try out the Flash of the camera at this stage! It will charge the camera’s
    capacitor, and you’ll get shocked later when you lever the camera body apart with
    your fingers. seriously, this really hurts!
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在此阶段不要尝试相机的闪光灯！它会给相机的电容器充电，当你用手指把相机机身拆开时，会被电击到。真的，这真的很疼！
- en: '**STEP 2: REMOVE THE TOP CASING FROM A CAMERA**'
  id: totrans-44
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 2：拆卸相机顶部外壳**'
- en: Used cameras may have already been partly disassembled when the photo processor
    removed the 35mm film canister. The processors do this quickly rather than tidily,
    so there’ll probably be cardboard and bits of plastic hanging off. [Figure 9-4](ch09.html#ch09fig4)
    shows the steps involved in taking a camera case apart.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 使用过的相机可能已经在照片处理器拆除35mm胶卷盒时被部分拆解。处理器通常快速而不是整齐地拆卸，所以可能会有纸板和塑料片挂在上面。[图 9-4](ch09.html#ch09fig4)展示了拆解相机外壳的步骤。
- en: '![image](graphics/f09-04.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-04.jpg)'
- en: 'Figure 9-4: Disassembling a camera'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-4：拆解相机
- en: You are at risk of shock during this step, so take care not to touch the circuit
    board or any contacts or wires within the camera.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个步骤中，你有触电的风险，所以小心不要接触电路板或相机内部的任何接触点或电线。
- en: First, remove the cardboard from the camera body ([Figure 9-4](ch09.html#ch09fig4)a).
    Next, use a flathead screwdriver with a plastic handle (to provide insulation
    from shock) to lever apart the plastic catches holding the two halves of the camera
    body together. Remove the front half of the camera case, exposing the PCB and
    lens ([Figure 9-4](ch09.html#ch09fig4)b). Now remove the lens assembly. Break
    it off if you have to; it’s not needed anymore. This will expose the two contacts
    shown circled in [Figure 9-4](ch09.html#ch09fig4)c, which fire the flash when
    they are touched together.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，从相机机身上取下纸板（[图 9-4](ch09.html#ch09fig4)a）。接下来，使用一个带塑料手柄的平头螺丝刀（以提供绝缘，防止触电）撬开固定相机机身两半的塑料卡扣。移除相机外壳的前半部分，暴露出PCB和镜头（[图
    9-4](ch09.html#ch09fig4)b）。现在移除镜头组件。如果必须，可以把它弄断；它不再需要了。这将暴露出[图 9-4](ch09.html#ch09fig4)c中圈出的两个接触点，触碰在一起时会触发闪光灯。
- en: '**STEP 3: MAKE THE CAMERA SAFE!**'
  id: totrans-50
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 3：确保相机安全！**'
- en: Before you have rendered the camera module safe, treat it the same way you would
    a small but vicious rodent. Don’t handle it directly. If you need to move it around
    or flip it over, poke it with something like a plastic pen. Otherwise, you might
    injure yourself, and you need to be in top condition to stay ahead of the zombies.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在确保相机模块安全之前，请像对待一只小而凶猛的老鼠一样对待它。不要直接接触它。如果需要移动或翻转它，使用类似塑料笔的物品戳它。否则，你可能会伤到自己，而你需要保持最佳状态才能在僵尸面前占据先机。
- en: Identify the flash module’s capacitor. The capacitor will be a large metallic
    cylinder with two leads connecting it to the PCB. The capacitor stores all the
    energy that is rapidly discharged into the flash to set it off. In [Figure 9-5](ch09.html#ch09fig5),
    the entire flash module has been removed from the camera body to make it easier
    to see the capacitor, but follow the capacitor discharge steps below without removing
    the whole PCB if you can.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 确定闪光模块的电容器。电容器是一个大金属圆柱体，两个引线将它与PCB连接。电容器储存所有快速放电到闪光灯中的能量，以触发闪光。[图 9-5](ch09.html#ch09fig5)中，整个闪光模块已从相机机身中移除，方便查看电容器，但如果可能的话，在不移除整个PCB的情况下，仍应遵循电容器放电的步骤。
- en: '![image](graphics/f09-05.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-05.jpg)'
- en: 'Figure 9-5: Discharging the capacitor'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-5：放电电容器
- en: To discharge the flash module’s capacitor, bend the legs of your 100 Ω resistor
    so they are roughly as far apart as the legs of the capacitor. Gently grip the
    body of the resistor with pliers (with insulated handles) and touch the resistor
    leads across the capacitor leads. If the capacitor is charged, there will probably
    be a very small spark. Hold the resistor in place for a second or so to make sure
    the capacitor actually discharges.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 为了放电闪光模块的电容器，将100Ω电阻器的引脚弯曲，使其大致与电容器的引脚间隔一样。用钳子（带绝缘手柄）轻轻夹住电阻器的本体，并将电阻器引脚接触到电容器的引脚上。如果电容器已经充电，可能会看到非常微小的火花。保持电阻器不动约一秒钟，确保电容器真正放电。
- en: Now, check whether the capacitor is empty by measuring the voltage with your
    voltmeter set to its maximum DC voltage range. (The voltage range needs to be
    500V or more.) It doesn’t matter if there are a few volts left in the capacitor,
    but if you see more than 10V, then discharge it a bit longer with the resistor.
    Once the voltage is below 10V, it is safe for you to handle the PCB without fear
    of electrical shock.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，通过将万用表设置为最大直流电压范围，检查电容器是否放电。（电压范围需要为500V或更高。）即使电容器中剩余一些电压也没关系，但如果电压超过10V，则需要用电阻器放电更长时间。一旦电压降至10V以下，就可以安全处理PCB，避免电击。
- en: '**STEP 4: ATTACH LEADS TO THE TRIGGER CONTACTS**'
  id: totrans-57
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**第4步：连接触发接点的引线**'
- en: Solder about 6 inches (15 cm) of double-core wire to the flash contacts, as
    shown in [Figure 9-6](ch09.html#ch09fig6). In the camera I used, there was a handy
    plastic peg that allowed the two contacts to be kept well apart. If this is not
    the case for your camera, then you may need to wrap the soldered contacts in electrical
    insulating tape or put heatshrink over the contacts to keep them apart.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 按照[图9-6](ch09.html#ch09fig6)所示，将约6英寸（15厘米）双芯电线焊接到闪光触点上。在我使用的相机中，有一个方便的塑料钉子可以使两个触点保持足够的间距。如果你的相机没有这个设计，可能需要用电气绝缘胶带包裹焊接触点，或者用热缩管将触点包住以保持间距。
- en: '![image](graphics/f09-06.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-06.jpg)'
- en: 'Figure 9-6: Leads soldered to the trigger contacts'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-6：引线焊接到触发接点
- en: '**STEP 5: REASSEMBLE AND TEST THE MODIFIED FLASH MODULE**'
  id: totrans-61
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**第5步：重新组装并测试修改后的闪光模块**'
- en: Fit the front cover of the camera back on, allowing the double-core wire to
    escape through one side of the camera. If you need more space to snake the wires
    out, use a pair of diagonal cutters to cut a hole in the plastic cover.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 将相机的前盖重新安装好，让双芯电线从相机的一侧穿出。如果你需要更多空间来引出电线，可以使用一把斜口钳在塑料盖上切个洞。
- en: Test this flash before repeating the procedure for the other two cameras. The
    trigger contacts of these cameras are sometimes at 400V, so for safety, use a
    screwdriver with an insulated handle.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在对其他两台相机重复此过程之前，先测试一下这个闪光灯。这些相机的触发接点有时会达到400V，因此为了安全起见，使用带有绝缘手柄的螺丝刀。
- en: Turn on the flash switch for the camera. You should see a charging light or
    LED come on. The camera will probably make a whining noise as the flash charges.
    This sound is created by the capacitor filling up. When you think the charging
    is complete (or after, say, 10 seconds), use the screwdriver to connect the two
    trigger leads, as shown in [Figure 9-7](ch09.html#ch09fig7).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 打开相机的闪光开关。你应该能看到充电指示灯或LED亮起。相机在充电时可能会发出嗡嗡声。这声音是由于电容器正在充电。当你认为充电完成时（或者大约10秒后），用螺丝刀连接两个触发引线，如[图9-7](ch09.html#ch09fig7)所示。
- en: The camera should flash when you connect the leads with the screwdriver. Hurray!
    That’s one camera ready for action. Before moving on to Step 6, repeat Steps 2
    through 5 for the other two cameras.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 当你用螺丝刀连接引脚时，相机应该会闪烁。太好了！这台相机准备好使用了。在进行第6步之前，请对另外两台相机重复第2至第5步。
- en: '![image](graphics/f09-07.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-07.jpg)'
- en: 'Figure 9-7: Testing the modified camera'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-7：测试修改后的相机
- en: '**STEP 6: CONNECT THE CAMERAS TO THE RELAY SHIELD**'
  id: totrans-68
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**第6步：将相机连接到继电器屏蔽板**'
- en: Fit the relay shield onto your Arduino, making sure that all the pins of the
    shield engage properly with the sockets on the Arduino.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 将继电器屏蔽板安装到你的Arduino上，确保屏蔽板的所有引脚都与Arduino上的插座正确接触。
- en: '[Figure 9-8](ch09.html#ch09fig8) shows how the cameras are wired up to the
    relay shield.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[图9-8](ch09.html#ch09fig8)显示了相机如何与继电器屏蔽板连接。'
- en: '![image](graphics/f09-08.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-08.jpg)'
- en: 'Figure 9-8: Attaching leads from the cameras to the relay shield’s trigger
    contacts'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-8：将相机的引线连接到继电器屏蔽板的触发接点
- en: 'Each relay on the relay shield has three screw terminals: NO, COM, and NC.
    When the relay is not activated, the terminals NC and COM are connected, but when
    the relay is activated, COM becomes connected to NO. This means that the leads
    to each camera need to go into the COM and NO connections of each relay. It does
    not matter which way around the leads go.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 继电器扩展板上的每个继电器都有三个螺丝端子：NO、COM和NC。当继电器未激活时，NC和COM端子是连接的，但当继电器被激活时，COM与NO连接。这意味着每台相机的引线需要连接到每个继电器的COM和NO端子上。引线的连接方向无关紧要。
- en: When your cameras are connected to their relays, attach the battery clip–to–barrel
    jack adapter to the Arduino, as shown in [Figure 9-9](ch09.html#ch09fig9).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的相机连接到继电器时，将电池夹–圆形插孔适配器连接到Arduino，如[图9-9](ch09.html#ch09fig9)所示。
- en: '![image](graphics/f09-09.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-09.jpg)'
- en: 'Figure 9-9: Attaching the battery lead to the Arduino'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-9：将电池引线连接到Arduino
- en: Before attaching the battery itself, however, you need to upload the software
    for the project, so you may as well power the Arduino from the USB lead while
    you program it.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在连接电池之前，你需要先上传项目的软件，所以在编程时可以通过USB电缆为Arduino供电。
- en: '**SOFTWARE**'
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**软件**'
- en: All the source code for this book is available at *[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*.
    Visit the link provided there and download the code now, if you’ve not done so
    already. See [Appendix C](app03.html#app03) for instructions on how to install
    the Arduino sketch.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的所有源代码都可以在* [http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*
    下载。如果你还没有下载，赶紧访问提供的链接并下载代码。有关如何安装Arduino草图的说明，请参见[附录C](app03.html#app03)。
- en: The Arduino sketch for this project is called *Project_15_Flasher*, and it’s
    in the source file directory of the same name. I’ll walk you through this sketch
    now.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目的Arduino草图名为*Project_15_Flasher*，并且位于同名的源文件目录中。我将引导你完成这个草图。
- en: 'To begin, we define a constant integer array, `flashPins`:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们定义一个常量整数数组`flashPins`：
- en: '[PRE0]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `flashPins` array defines the Arduino pins used to trigger each of the flash
    modules. Change these pin numbers if your relay shield uses different pins to
    control the relays.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '`flashPins`数组定义了用于触发每个闪光模块的Arduino引脚。如果你的继电器扩展板使用不同的引脚来控制继电器，可以更改这些引脚号。'
- en: 'Next, we define two more constants, which you can alter to adjust the zombie
    distractor:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们定义另外两个常量，你可以调整它们以修改僵尸干扰器：
- en: '[PRE1]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `overallDelay` constant determines how many seconds elapse between each
    flashing cycle. This value is set to 20 seconds by default. Note, this delay needs
    to be long enough to enable the capacitor inside the camera to recharge.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '`overallDelay`常量决定了每个闪光周期之间的时间间隔，默认设置为20秒。请注意，这个延迟需要足够长，以便相机内部的电容器重新充电。'
- en: The `delayBetweenFlashes` value sets the gap between each of the flashes being
    triggered in a cycle. This is set to one second by default. Note that both constants
    are `long` rather than `int`. That’s because `int` constants have a maximum value
    of +/–32,767, which would give a maximum delay of 32.767 seconds; that might not
    be long enough to keep a zombie distracted while you escape. Fortunately, the
    `long` data type has a maximum value of over +/–2,000,000\. You can run a long
    way in 2,000 seconds!
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '`delayBetweenFlashes`值设置了每个闪光触发之间的间隔。默认设置为1秒。请注意，这两个常量是`long`类型，而不是`int`类型。这是因为`int`常量的最大值是+/-32,767，这样最大延迟为32.767秒；可能不足以让你在逃跑时让僵尸保持分心。幸运的是，`long`数据类型的最大值超过+/-2,000,000。你可以在2,000秒内跑得很远！'
- en: 'Now we add a `setup` function:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们添加一个`setup`函数：
- en: '[PRE2]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The `setup` function sets all the relay pins to be digital outputs.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '`setup`函数将所有继电器引脚设置为数字输出。'
- en: 'With the `pinMode` functions in place, we add a short `loop` function:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在`pinMode`函数就位后，我们添加一个简短的`loop`函数：
- en: '[PRE3]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This `loop` function calls the `flashCircle` function and waits for `overallDelay`
    *seconds* before starting the whole process again.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 这个`loop`函数调用`flashCircle`函数，并在每次开始整个过程之前，等待`overallDelay`*秒*。
- en: 'Let’s look at the `flashCircle` function definition now:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看一下`flashCircle`函数的定义：
- en: '[PRE4]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This function loops over the flash pins and gives each a `HIGH` pulse for 200
    milliseconds, setting off the flash. There is then a pause before the next flash,
    set by `delayBetweenFlashes`. The value of `delayBetweenFlashes` is multiplied
    by 1,000 because in Arduino, the `delay` function’s parameter is in milliseconds.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这个函数遍历闪光引脚，并为每个引脚提供一个`HIGH`脉冲，持续200毫秒，触发闪光。然后会有一个暂停，直到下一个闪光，由`delayBetweenFlashes`来设置。由于在Arduino中，`delay`函数的参数是毫秒，所以`delayBetweenFlashes`的值乘以1,000。
- en: '**USING THE FLASH DISTRACTOR**'
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用闪光干扰器**'
- en: Before you tape together all the parts of the flash distractor, test it with
    the parts laid out as shown in [Figure 9-3](ch09.html#ch09fig3). Turn on the flash
    switches of each camera and attach the 9V battery to the battery clip. The flash
    units should flash in turn, before pausing for 20 seconds and then repeating the
    cycle.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在将干扰器的所有部件粘合在一起之前，按照图 9-3](ch09.html#ch09fig3)所示，将部件铺开进行测试。打开每个相机的闪光开关，并将9V电池连接到电池夹上。闪光单元应该依次闪烁，然后暂停20秒，再重复这个周期。
- en: When you know your Arduino can activate the flashes, tape everything together,
    or if you prefer, stick the cameras together with a hot glue gun. Make sure to
    leave yourself access to the cameras’ battery compartments so you can change the
    batteries.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当你确定Arduino能够启动闪光时，将所有部件粘合在一起，或者如果你更喜欢的话，也可以用热熔胶枪将相机粘在一起。确保你能够方便地更换相机的电池。
- en: The small 9V battery that powers the Arduino will probably last about four or
    five hours. If you need to power the distractor for longer, then [Figure 9-10](ch09.html#ch09fig10)
    shows some other options.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 为Arduino供电的小型9V电池大约能持续四到五小时。如果你需要让干扰器工作更长时间，图 9-10](ch09.html#ch09fig10)展示了一些其他选择。
- en: '![image](graphics/f09-10.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-10.jpg)'
- en: 'Figure 9-10: Options for powering the Arduino'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-10：为Arduino供电的选项
- en: A 6 × AA battery holder will last around 10 times as long as the PP3 9V battery,
    but for the ultimate battery duration, you can use one of your car batteries with
    the cigarette lighter–to–barrel jack adapter shown on the left of [Figure 9-10](ch09.html#ch09fig10).
    However, the AA batteries in the cameras won’t last more than a few hundred flashes
    before they need replacing, so if you plan to reuse your distractors—as you might
    if you’re in a zombie-rich neighborhood—keep an extra set of batteries on you.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 一个6 × AA电池座的使用寿命大约是PP3 9V电池的10倍，但为了获得最长的电池使用时间，你可以使用车载电池并配合图 9-10](ch09.html#ch09fig10)左侧展示的打火机–到–桶形插座适配器。然而，相机中的AA电池在闪光几百次后就需要更换，所以如果你计划重新使用你的干扰器——如果你正处于僵尸遍布的街区——记得随身携带额外的电池。
- en: I suggest you stockpile a few flash distractors and always keep one complete
    unit in your bag when you venture out for supplies or reconnaissance. Then, if
    there’s a mob of zombies between you and that grocery store you want to scavenge
    from, just set up the distractor, wait out of sight as it draws the zombies, and
    when the coast is clear, make a stealthy dash for the doors.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议你储备一些闪光干扰器，并始终在外出采购或侦察时随身携带一整套设备。如果有一群僵尸挡住了你去杂货店的路，那么只需设置好干扰器，躲在视线之外，让它吸引僵尸，等情况清晰时，再悄悄冲向门口。
- en: You might want to use the flash distractor in combination with the next project
    to maximize your ability to distract the undead.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能希望将闪光干扰器与下一个项目结合使用，以最大限度地发挥干扰僵尸的能力。
- en: '**NOTE**'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: 'This project has no on/off switch, so when you are not using it, unplug the
    9V battery and turn off the flash switches on the cameras. You could also use
    an in-line power switch like this: [https://www.adafruit.com/products/1125/](https://www.adafruit.com/products/1125/).'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目没有开关，因此当你不使用时，请拔掉9V电池并关闭相机上的闪光灯开关。你也可以使用像这样的直通电源开关：[https://www.adafruit.com/products/1125/](https://www.adafruit.com/products/1125/)。
- en: '**PROJECT 16: ARDUINO MOVEMENT AND SOUND DISTRACTOR**'
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目 16：Arduino 运动与声音干扰器**'
- en: 'Remember the smoke alarm that we used to make “[Project 11: Quiet Fire Alarm](ch07.html#ch00lev1sec121)”
    on [page 120](ch07.html#page_120)? In this project, we’ll use the piezo buzzer
    we removed from that smoke alarm, along with a waving flag powered by a servo
    motor, to make a lot of distracting noise and movement.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 记得我们用来制作“[项目 11：安静的火灾警报器](ch07.html#ch00lev1sec121)”的烟雾警报器吗？它位于[第120页](ch07.html#page_120)。在这个项目中，我们将使用从该烟雾警报器中取出的压电蜂鸣器，并配合由伺服电机驱动的挥舞旗帜，制造大量干扰性噪音和运动。
- en: '[Figure 9-11](ch09.html#ch09fig11) shows the project in action. Next to the
    project, I’ve shown a coiled cigarette lighter adapter, which you can use as an
    alternative to the AA battery pack if you want to power the setup from a car battery
    for long-term usage.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 9-11](ch09.html#ch09fig11)展示了该项目的实际应用。在项目旁边，我展示了一个卷曲的打火机适配器，如果你希望从车载电池为系统提供电力以供长期使用，可以使用它替代AA电池组。'
- en: '![image](graphics/f09-11.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-11.jpg)'
- en: 'Figure 9-11: Sound and movement in disharmony'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-11：声音与运动的不和谐
- en: '**WHAT YOU WILL NEED**'
  id: totrans-113
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**所需材料**'
- en: 'To make this project, you will need the following parts:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 为了制作这个项目，你需要以下部件：
- en: '| **ITEMS** | **NOTES** | **SOURCE** |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| **项目** | **备注** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
- en: '| ![image](graphics/square.jpg) 6 × AA battery holder | 9V battery pack | Adafruit
    (248) |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 6 × AA 电池座 | 9V 电池组 | Adafruit (248) |'
- en: '| ![image](graphics/square.jpg) 9V Arduino battery lead | DC power jack-to-9V
    battery clip adapter | Adafruit (80), eBay |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 9V Arduino 电池线 | 直流电源插座到 9V 电池夹适配器 | Adafruit
    (80), eBay |'
- en: '| ![image](graphics/square.jpg) Jumper wires | 3 long male-to-male jumper wires
    | Adafruit (760) |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 跳线 | 3 根长的公对公跳线 | Adafruit (760) |'
- en: '| ![image](graphics/square.jpg) 100 Ω Resistor | 2W or 1/4W | Mouser (594-5083NW100R0J
    or 293-100-RC) |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 100 Ω 电阻 | 2W 或 1/4W | Mouser (594-5083NW100R0J
    或 293-100-RC) |'
- en: '| ![image](graphics/square.jpg) Pin header | 2-way pin header | Adafruit (392),
    eBay |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 排针 | 2 针排针 | Adafruit (392), eBay |'
- en: '| ![image](graphics/square.jpg) Servo motor | Small or standard | Adafruit
    (155 or 196), eBay, hobby store |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 伺服电机 | 小型或标准 | Adafruit (155 或 196), eBay,
    爱好商店 |'
- en: '| ![image](graphics/square.jpg) Buzzer | Discarded from the smoke detector
    of Project 11 or another high-volume buzzer | Security store, smoke alarm |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 蜂鸣器 | 从项目 11 的烟雾探测器中丢弃或其他高音量蜂鸣器 | 安全商店，烟雾报警器
    |'
- en: '| ![image](graphics/square.jpg) Wooden upright (a post or rod) |  | Hardware
    store |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 木制立柱（支柱或杆） |  | 五金店 |'
- en: '| ![image](graphics/square.jpg) Base | Wood or plastic, for attachment of the
    upright | Hardware store |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 底座 | 木材或塑料，用于固定立柱 | 五金店 |'
- en: '| ![image](graphics/square.jpg) Wooden food skewer and paper | To make a flag
    | Household items |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 木制食品串和纸 | 用于制作旗帜 | 家庭用品 |'
- en: 'The power for this project is supplied through the Arduino barrel jack. The
    same power options as used in “[Project 15: Arduino Flash Distractor](ch09.html#ch00lev1sec156)”
    on [page 158](ch09.html#page_158) also apply to this project.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目的电源通过 Arduino 圆筒插孔供电。与 “[项目 15：Arduino 闪光干扰器](ch09.html#ch00lev1sec156)”
    第158页中使用的电源选项相同，也适用于本项目。
- en: If you just want to wave a small, lightweight flag like the one shown in [Figure
    9-11](ch09.html#ch09fig11), a small servo motor will work just fine, but for something
    bigger, use a standard servo. Just be aware that if you use a bigger servo, you
    may find that your Arduino resets because of voltage drops caused by the load
    of the bigger motor. In this case, you can power the servo from a separate 6V
    battery pack as described at *[http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/](http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/)*.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你只想挥舞一个像 [图 9-11](ch09.html#ch09fig11) 中显示的小型轻量旗帜，那么小型伺服电机就能很好地工作；但对于更大的旗帜，使用标准伺服电机。只需注意，如果使用较大的伺服电机，可能会因为较大电机的负载导致电压下降，从而使
    Arduino 重启。在这种情况下，你可以按照 *[http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/](http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/)*
    上的说明，使用单独的 6V 电池组为伺服电机供电。
- en: 'Also note that while this project is intended to use the buzzer removed from
    the smoke detector of “[Project 11: Quiet Fire Alarm](ch07.html#ch00lev1sec121)”
    on [page 120](ch07.html#page_120), you can also just use a new buzzer.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 还需注意，尽管本项目计划使用从 “[项目 11：安静的火灾报警器](ch07.html#ch00lev1sec121)” 第120页中的烟雾探测器中取出的蜂鸣器，但你也可以使用一个新的蜂鸣器。
- en: '**CONSTRUCTION**'
  id: totrans-131
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建**'
- en: '[Figure 9-12](ch09.html#ch09fig12) shows the wiring diagram for the project.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 9-12](ch09.html#ch09fig12) 展示了该项目的接线图。'
- en: '![image](graphics/f09-12.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-12.jpg)'
- en: 'Figure 9-12: Wiring diagram for the distractor'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-12：干扰器的接线图
- en: The male-to-male jumper wires in the supply list will link the servo motor,
    which terminates in a three-way socket, to the Arduino. You’ll connect the resistor
    and one buzzer lead to a pair of header pins so that you can plug the buzzer into
    the Arduino, too.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 供电清单中的公对公跳线将把伺服电机连接到 Arduino，伺服电机末端是一个三孔插座。你还将把电阻器和一个蜂鸣器引线连接到一对排针，以便将蜂鸣器也插入到
    Arduino。
- en: '**STEP 1: REMOVE THE PIEZO BUZZER FROM THE SMOKE ALARM COVER**'
  id: totrans-136
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 1：从烟雾报警器外壳中取出压电蜂鸣器**'
- en: The smoke alarm’s buzzer may be integrated into the smoke alarm cover. In that
    case, don’t try to remove the buzzer; you can use it while it’s still attached
    to the cover, or you can just scavenge a different buzzer. If the buzzer looks
    like it will come away, then remove it as shown in [Figure 9-13](ch09.html#ch09fig13)
    to make the project a little more compact.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 烟雾报警器的蜂鸣器可能集成在烟雾报警器的外壳中。如果是这种情况，别试图取下蜂鸣器；您可以在蜂鸣器仍然连接到外壳时使用它，或者直接换用一个不同的蜂鸣器。如果蜂鸣器看起来会脱落，那就像[图9-13](ch09.html#ch09fig13)中所示的那样将其拆下，以使项目更加紧凑。
- en: '![image](graphics/f09-13.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-13.jpg)'
- en: 'Figure 9-13: Removing the buzzer from the smoke alarm cover'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-13：从烟雾报警器外壳中取下蜂鸣器
- en: '**STEP 2: SOLDER THE HEADER PINS, BUZZER, AND RESISTOR**'
  id: totrans-140
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 2：焊接插针、蜂鸣器和电阻**'
- en: 'Check your buzzer: you only need two buzzer leads, so if it has three, see
    “[Project 11: Quiet Fire Alarm](ch07.html#ch00lev1sec121)” on [page 120](ch07.html#page_120)
    to work out which two of the three leads you need.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 检查您的蜂鸣器：您只需要两个蜂鸣器引脚，如果它有三个，请参见“[项目 11：安静的火灾报警器](ch07.html#ch00lev1sec121)”在[第120页](ch07.html#page_120)以确定您需要的三个引脚中的两个。
- en: Once you have that cleared up, solder the 100 Ω resistor to one buzzer lead—it
    doesn’t matter which one. Solder the other end of the resistor to one of the header
    pins and the other buzzer lead to the other header pin. You may wish to strengthen
    these soldered connections using heatshrink (see “[Using Heatshrink](app02.html#ch00lev1sec230)”
    on [page 235](app02.html#page_235)) or electrical tape. These connections are
    shown in [Figure 9-14](ch09.html#ch09fig14).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦解决了这个问题，将100 Ω电阻焊接到蜂鸣器的一个引脚上——不管焊接的是哪一端。将电阻的另一端焊接到一个插针上，并将另一个蜂鸣器引脚焊接到另一个插针上。您可以使用热缩管（参见“[使用热缩管](app02.html#ch00lev1sec230)”在[第235页](app02.html#page_235)）或电工胶带来加固这些焊接连接。这些连接如[图9-14](ch09.html#ch09fig14)所示。
- en: '![image](graphics/f09-14.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-14.jpg)'
- en: 'Figure 9-14: Soldering the buzzer, resistor, and header pins'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-14：焊接蜂鸣器、电阻和插针
- en: '**STEP 3: TEST THE PIEZO SOUNDER**'
  id: totrans-145
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 3：测试压电蜂鸣器**'
- en: Before we go further, we’ll test the buzzer using the USB connection to power
    the Arduino. This step will help us find the optimum frequency of the buzzer to
    make it as loud as possible.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，我们将使用USB连接为Arduino供电，测试蜂鸣器。此步骤将帮助我们找到蜂鸣器的最佳频率，使其声音尽可能响亮。
- en: Plug the header pins into the Arduino pins 8 and 9\. It does not matter which
    way around the pins are ([Figure 9-15](ch09.html#ch09fig15)).
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 将插针插入Arduino的8和9引脚。插针的插入顺序无关紧要（见[图9-15](ch09.html#ch09fig15)）。
- en: '![image](graphics/f09-15.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-15.jpg)'
- en: 'Figure 9-15: Connecting the buzzer to the Arduino'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-15：将蜂鸣器连接到Arduino
- en: If you haven’t downloaded all of this book’s programs yet, go to *[https://www.nostarch.com/zombies/](https://www.nostarch.com/zombies/)*
    and download the *Project_16_Sounder_Test* Arduino sketch. Load this sketch onto
    your Arduino and then open the serial monitor ([Figure 9-16](ch09.html#ch09fig16)).
    This is not the final sketch for the project; it’s just a test sketch that will
    let us find the best frequency value to use in the main sketch.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您还没有下载本书的所有程序，请访问 *[https://www.nostarch.com/zombies/](https://www.nostarch.com/zombies/)*
    并下载 *Project_16_Sounder_Test* Arduino 程序。将此程序加载到您的Arduino上，然后打开串行监视器（见[图9-16](ch09.html#ch09fig16)）。这不是项目的最终程序；它只是一个测试程序，帮助我们找到主程序中要使用的最佳频率值。
- en: '![image](graphics/f09-16.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-16.jpg)'
- en: 'Figure 9-16: Setting the frequency using the serial monitor'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-16：使用串行监视器设置频率
- en: In the input field, enter 4000 and click **Send**—this number is the frequency
    of the sound your buzzer will emit. You should hear a very loud sound at that
    frequency for a second. Try entering different frequency values to find the one
    that gives the highest volume; it will probably be around `4000`.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在输入框中输入4000并点击**发送**——这个数字是蜂鸣器发出的声音频率。您应该能在该频率下听到非常响亮的声音持续一秒钟。尝试输入不同的频率值，找到发出最大音量的频率；它可能在`4000`左右。
- en: To reduce the strain on your ears, you can turn the buzzer over or cover the
    hole where the sound emerges to muffle the volume. When you have found the optimum
    frequency, make a note of the value.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减少耳朵的压力，您可以将蜂鸣器翻转过来，或者覆盖声音出来的孔来降低音量。当您找到最佳频率时，记下该值。
- en: '**NOTE**'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: This is definitely something to do when there are no zombies around.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这个操作最好在没有僵尸的情况下进行。
- en: '**PIEZO BUZZERS**'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '**压电蜂鸣器**'
- en: Piezo buzzers (also called sounders) contain crystals that change shape when
    a current is passed through them. The current changes hundreds of times per second,
    and as the crystals change shape, sound waves are produced. Although you can drive
    a piezo buzzer by connecting one lead to GND and supplying a signal to the other
    lead, you get a higher volume by using two Arduino outputs to completely reverse
    the polarity of the buzzer with each cycle. [Figure 9-17](ch09.html#ch09fig17)
    shows how this works.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 压电蜂鸣器（也叫做声响器）内含有晶体，当电流通过时，晶体会改变形状。电流每秒变化数百次，晶体形状的变化会产生声波。虽然你可以通过将一根引线连接到GND，另一根引线提供信号来驱动压电蜂鸣器，但使用两个Arduino输出完全反转蜂鸣器的极性，从而在每个周期中获得更大的音量。[图9-17](ch09.html#ch09fig17)展示了这一过程的工作原理。
- en: '![image](graphics/f09-17.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-17.jpg)'
- en: 'Figure 9-17: Generating an alternating voltage on the piezo buzzer with an
    Arduino. Pins A and B are outputs on the Arduino.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-17：使用Arduino生成压电蜂鸣器上的交流电压。A和B引脚是Arduino的输出端口。
- en: When one Arduino output is high, the other is low and vice versa. This complete
    reversal of the polarity across the piezo buzzer effectively allows a 10V peak
    swing of voltage across the buzzer rather than the 5V obtainable from just switching
    one pin.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个Arduino输出为高电平时，另一个为低电平，反之亦然。通过这种完全反转的极性，压电蜂鸣器可以实现10V的电压峰值变化，而不仅仅是通过切换一个引脚获得的5V电压。
- en: Your distractor will not be as loud as the original smoke detector, which typically
    uses the same trick but with 9V rather than 5V. However, it should be pretty loud.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 你的诱饵的声音不会像原始烟雾探测器那么大，后者通常使用相同的原理，但电压是9V而不是5V。不过，它应该还是相当响亮的。
- en: '**STEP 4: MAKE A FLAG**'
  id: totrans-163
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤4：制作旗帜**'
- en: My distractor waves a flag, but yours doesn’t have to. Once you have the servo
    moving, you can attach pretty much anything that will attract the attention of
    zombies. Try a scrap of rotting meat to get a good zombie-attracting scent going,
    or if your servo is powerful enough, you might salvage a severed hand for a more
    realistic human distraction.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 我的诱饵挥动一面旗帜，但你的不一定要这样。一旦伺服电机开始移动，你可以固定任何能够吸引僵尸注意的物体。可以尝试使用一块腐烂的肉来散发吸引僵尸的气味，或者如果伺服电机足够强大，你甚至可以拿到一只被切断的手，用来制造更逼真的人类干扰。
- en: Assuming that you just want to wave a flag, the simple arrangement from [Figure
    9-11](ch09.html#ch09fig11) uses a piece of paper folded and glued to a wooden
    kebab skewer.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你只想挥动一面旗帜，[图9-11](ch09.html#ch09fig11)中的简单布置使用了一张纸，将其折叠并粘贴到木制串签上。
- en: '**STEP 5: ATTACH THE FLAG TO THE SERVO MOTOR**'
  id: totrans-166
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤5：将旗帜固定到伺服电机上**'
- en: Servo motors generally come with a range of arms and a retaining screw to fix
    the arm in place on the motor. In this project, I chose the wheel fixture and
    glued the skewer to it with strong epoxy glue ([Figure 9-18](ch09.html#ch09fig18)).
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 伺服电机通常配有不同的臂和一个固定螺丝，用来将臂固定在电机上。在这个项目中，我选择了车轮装置，并用强力环氧树脂胶将串签固定在上面（见[图9-18](ch09.html#ch09fig18)）。
- en: '![image](graphics/f09-18.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-18.jpg)'
- en: 'Figure 9-18: Attaching the flag to the servo'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-18：将旗帜附加到伺服电机上
- en: Don’t fit the servo motor’s retaining screw just yet, as you will need to adjust
    the position of the servo arm to accommodate the range of movement (around 160
    degrees) once the whole project is up and running.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 目前还不要固定伺服电机的固定螺丝，因为一旦整个项目启动，你需要调整伺服臂的位置，以适应运动范围（大约160度）。
- en: '**STEP 6: ATTACH THE SERVO MOTOR TO A BASE**'
  id: totrans-171
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤6：将伺服电机固定到基座上**'
- en: For an upright to attach to the servo motor, I’ve used a length of wood. To
    attach the servo, cut a little notch in the wood to fit the servo using a wood
    saw or small electric hobby cutter. Then use the servo mounting holes and some
    small screws to fix the servo in place.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将立柱固定到伺服电机上，我使用了一段木材。为了固定伺服电机，用木锯或小型电动爱好切割器在木材上切出一个小凹槽，使其能够适配伺服电机。然后利用伺服电机的安装孔和一些小螺丝将其固定。
- en: As an exercise in ingenuity, I’ll leave it up to you to find the best way to
    attach your servo to your upright. Here, I used a small piece of scrap aluminum
    to hold the servo in the notch. Epoxy glue would also work.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个巧思的练习，我将留给你找到最适合的方式将伺服电机固定到立柱上。在这里，我用了一小块废铝片将伺服电机固定在凹槽中。环氧树脂胶也可以使用。
- en: Now, attach the upright to a base. I drilled a hole in the underside of a flat
    piece of acrylic and attached the wooden upright with a screw. You may prefer
    to fix the upright directly to some existing structure, rather than using a freestanding
    arrangement. (Again, I’ll leave the details to your discretion.)
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，将立柱固定到底座上。我在一块平坦的有机玻璃底面钻了一个孔，并用螺丝将木制立柱固定上去。你可能更喜欢将立柱直接固定到现有的结构上，而不是使用独立支架。（同样，我将细节留给你自行决定。）
- en: I used the Arduino mounting holes and two more screws to fix the Arduino to
    the upright as well, but this is entirely optional. Similarly, I stuck the buzzer
    onto the upright with some glue ([Figure 9-19](ch09.html#ch09fig19)).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 我还使用了Arduino的安装孔和另外两个螺丝将Arduino固定到立柱上，但这完全是可选的。同样，我将蜂鸣器用胶水粘在了立柱上（[图9-19](ch09.html#ch09fig19)）。
- en: '![image](graphics/f09-19.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-19.jpg)'
- en: 'Figure 9-19: Attaching the Arduino and buzzer to the upright'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-19：将Arduino和蜂鸣器固定到立柱上
- en: '**STEP 7: CONNECTING THE SERVO**'
  id: totrans-178
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤7：连接伺服电机**'
- en: 'Servo motors have leads with three connections that terminate in a single three-hole
    socket: the black or brown lead is the ground connection, the red lead is the
    positive power supply, and the third orange or yellow lead is the control signal.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 伺服电机的连接线有三个端口，连接到一个三孔插座：黑色或棕色线是接地线，红色线是正电源线，第三根橙色或黄色线是控制信号线。
- en: 'To begin wiring, plug the three male-to-male header leads into the servo’s
    three-hole socket. Run the orange (or yellow) control lead of the servo to pin
    10 of the Arduino. Run the black (or brown) ground lead to one of the GND terminals
    on the Arduino. Finally, connect the red positive supply of the servo to the 5V
    Arduino pin. Remember: if you are using a large servo, you will probably need
    an external 6V battery pack, as discussed in “[What You Will Need](ch11.html#ch00lev1sec207)”
    on [page 170](ch09.html#page_170).'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 开始接线时，将三根公对公插头插入伺服电机的三孔插座。将伺服电机的橙色（或黄色）控制线连接到Arduino的第10号引脚。将黑色（或棕色）接地线连接到Arduino的任意一个GND端子。最后，将伺服电机的红色正电源线连接到Arduino的5V引脚。记住：如果你使用的是大功率伺服电机，你可能需要外接一个6V电池组，正如在“[所需材料](ch11.html#ch00lev1sec207)”中（[第170页](ch09.html#page_170)）所讨论的那样。
- en: '**SOFTWARE**'
  id: totrans-181
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**软件**'
- en: All the source code for this book is available from *[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*,
    and the Arduino sketch for this project is called *Project_16_sound_ movement*.
    Download it now and load it onto your Arduino. If you need a refresher on how,
    follow the directions in [Appendix C](app03.html#app03).
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的所有源代码可以从*[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*下载，项目的Arduino草图叫做*Project_16_sound_
    movement*。现在就下载它，并加载到你的Arduino上。如果你需要关于如何操作的复习，请参照[附录C](app03.html#app03)中的说明。
- en: Servos are often used with Arduinos, so there is a built-in library that makes
    them easy to use together. We import this library at the top of the sketch.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 伺服电机通常与Arduino一起使用，因此有一个内置库可以方便地将它们一起使用。我们在草图的顶部导入这个库。
- en: '[PRE5]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Three constants define the behavior of the servo, and tweaking the values of
    these constants will alter the servo’s actions:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 三个常量定义了伺服电机的行为，调整这些常量的数值会改变伺服电机的动作：
- en: '[PRE6]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Servos have a range of movement of 180 degrees. The constants `minServoAngle`
    and `maxServoAngle` restrict this range between 10 and 170 degrees rather than
    the full 0 to 180 degrees, because most servos struggle to cover the full 180
    degrees.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 伺服电机的运动范围为180度。常量`minServoAngle`和`maxServoAngle`将此范围限制在10到170度之间，而不是完整的0到180度，因为大多数伺服电机无法覆盖完整的180度。
- en: The constant `stepPause` sets the delay in milliseconds between each movement
    of the servo. If you really want to grab a zombie’s attention, reduce this number
    to make the servo move more quickly.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 常量`stepPause`设置了每次伺服电机运动之间的延迟时间（以毫秒为单位）。如果你真的想吸引僵尸的注意力，可以减少这个数值，让伺服电机更快移动。
- en: In the next section of code, we define constants for each Arduino pin used.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的代码部分，我们为每个使用的Arduino引脚定义常量。
- en: '[PRE7]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'A final constant called `f` specifies the buzzer frequency:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 一个名为`f`的常量指定了蜂鸣器的频率：
- en: '[PRE8]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Set `f` to your buzzer’s loudest frequency, which you should have noted in
    “[Step 3: Test the Piezo Sounder](ch09.html#ch00lev1sec172)” on [page 173](ch09.html#page_173).'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 将`f`设置为蜂鸣器的最大频率，你应该在“[步骤3：测试压电发声器](ch09.html#ch00lev1sec172)”中（[第173页](ch09.html#page_173)）记录了这个频率。
- en: 'Next, to use the servo library, we define a `Servo` object called `arm`:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，为了使用伺服库，我们定义一个名为`arm`的`Servo`对象：
- en: '[PRE9]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'With all the constants and global variables defined, we add a `setup` function
    to initialize the servo and define the two pins used for the buzzer:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 定义了所有常量和全局变量后，我们添加了一个`setup`函数来初始化伺服电机，并定义了用于蜂鸣器的两个引脚：
- en: '[PRE10]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The `loop` function that follows calls two functions to wave the flag and to
    sound the buzzer:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 紧接着的`loop`函数调用了两个函数，一个用来挥动旗帜，另一个用来发出蜂鸣器声音：
- en: '[PRE11]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The `wave` function is called twice to waggle the flag back and forth. In case
    a bit of movement isn’t enough to catch a zombie’s attention, `makeNoise` is also
    called to sound the buzzer. With any luck, the zombies will mistake the noises
    and movement for something with a brain and will head straight for the distraction!
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '`wave`函数被调用两次来来回摇动旗帜。如果稍微的动作不足以引起僵尸的注意，还会调用`makeNoise`来发出蜂鸣器的声音。希望僵尸会把这些声音和动作误认为是某个有脑袋的东西，然后直奔这个诱饵而去！'
- en: 'At the end of the sketch, define the functions that cause the distractions:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在草图的结尾，定义了造成分散注意力的功能：
- en: '[PRE12]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The `wave` function contains two loops: one loop moves the servo from its minimum
    to its maximum angle at the preselected speed, and the second loop does the reverse.'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '`wave`函数包含两个循环：一个循环以预定的速度将伺服电机从最小角度移动到最大角度，第二个循环则将其反向移动。'
- en: 'Now, let’s look at `makeNoise`:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下`makeNoise`：
- en: '[PRE13]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: This function contains a loop that calls the `beep` function five times for
    five beeps of the buzzer. The parameter to `beep` is the duration of the sound
    in milliseconds (in this case, 500). Between each beep there is a delay of one
    second (1000 milliseconds).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 这个函数包含一个循环，它调用`beep`函数五次，发出五次蜂鸣器的声音。`beep`的参数是声音持续时间，单位是毫秒（此处为500）。每次蜂鸣之间会有一秒钟（1000毫秒）的延迟。
- en: '**NOTE**'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: If using the same values all the time causes local zombies to become immune
    to your distractor’s effects, try tweaking the numbers you pass to beep and delay.
    You could even randomize the values, using Arduino’s random() function.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一直使用相同的数值，导致本地僵尸对你诱饵的效果产生免疫，可以尝试调整传递给`beep`和`delay`的数值。你甚至可以随机化这些数值，使用Arduino的random()函数。
- en: 'The `beep` function itself generates the AC signal on the two buzzer pins:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '`beep`函数本身在两个蜂鸣器引脚上生成交流信号：'
- en: '[PRE14]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: First, we calculate the period of each oscillation ➊ using the frequency `f`.
    The resulting value must be further divided by 2 ➋, because what we really want
    is the duration of delay between swapping the polarity of the pins, and we need
    two such delays for a complete oscillation.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们使用频率`f`计算每次振荡的周期 ➊。得到的值必须再除以2 ➋，因为我们真正需要的是在交换引脚极性时的延迟时间，而且每次振荡需要两次这样的延迟。
- en: Using that divided period, the `beep` function calculates the total number of
    cycles needed to produce a beep of the correct duration. The `for` loop that follows
    uses this information to generate the pulses that are needed.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 使用那个分割的周期，`beep`函数计算出发出正确时长的蜂鸣所需的总周期数。接下来的`for`循环使用这些信息生成所需的脉冲。
- en: '**USING THE SOUND AND MOVEMENT DISTRACTOR**'
  id: totrans-213
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用声音和动作干扰器**'
- en: Both of the projects in this chapter need to be kept dry. To weatherproof the
    sound and movement distractor, you might craft some kind of housing or protective
    roof shelter. If your build is freestanding, a large plastic bin with a lid could
    do the trick. I’m sure you can scavenge one from the nearest abandoned discount
    retail store.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的两个项目都需要保持干燥。为了防水声音和动作干扰器，你可以制作某种外壳或保护性屋顶。如果你的装置是独立式的，一个带盖的大塑料垃圾桶就能派上用场。我相信你能从最近的废弃折扣零售店找一个来。
- en: 'Just cut off one side of the bin so the zombies can see and hear the distractor,
    affix the project itself to the lid, and snap the bin on top, upside down. Attach
    this box to a lever and pulley system, and you could even lower it to the ground
    from the safety of your base, creating a new sport: zombie fishing. Who says you
    can’t have fun during an apocalypse?'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 只需将垃圾桶的一边切掉，这样僵尸就能看到并听到诱饵的声音，将项目本身固定到盖子上，再把垃圾桶倒扣在上面。将这个盒子连接到杠杆和滑轮系统，你甚至可以从安全的基地将其降到地面，创造一种新的运动：僵尸钓鱼。谁说末日
    Apocalypse 中不能玩得开心呢？
- en: 'Of course, the sound and movement distractor has many practical postapocalyptic
    uses, too:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，声音和动作的干扰装置也有很多实际的末日后使用场景：
- en: • Place it opposite the most vulnerable point in your stronghold to draw away
    attacking zombie hordes and give you time to reinforce your bunker.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: • 将其放置在你的据点最脆弱的地方，吸引攻击的僵尸群体，为你提供时间强化掩体。
- en: • Plant it by your zombie pit to draw them into the trap.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: • 将它放置在僵尸陷阱旁边，引诱僵尸进入陷阱。
- en: • Sneak it into your neighbor’s yard to thin out the competition for survivor
    salvage.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: • 偷偷溜进你邻居的院子，减少竞争对幸存者资源的争夺。
- en: In case you want to find other survivors (whether to join forces or avoid them),
    in the next chapter, we’ll look at using wireless technology to communicate.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想找到其他幸存者（无论是联合还是避开他们），在下一章中，我们将探讨如何使用无线技术进行通信。
