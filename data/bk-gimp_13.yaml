- en: Chapter 7. Image Preprocessing
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 7 章 图像预处理
- en: Preprocessing is most commonly used in scientific imaging to remove noise and
    distortions from an image prior to analyzing its meaningful content. Scientists
    preprocess satellite images, for example, to remove interference like atmospheric
    debris and clouds before using the images for research. Even if you’re not a scientist,
    you may want to preprocess your images, since these techniques can help you correct
    distortions, improve color balance, and enhance visibility.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 图像预处理在科学成像中最常用于在分析有意义内容之前去除图像中的噪声和失真。例如，科学家们在使用卫星图像进行研究之前，会对图像进行预处理，以去除大气杂物和云层等干扰。即使你不是科学家，你也可能想要预处理你的图像，因为这些技术可以帮助你修正失真、改善色彩平衡并增强可见度。
- en: '7.1 Tutorial: Extracting Information from a Picture'
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7.1 教程：从图像中提取信息
- en: So, how do you separate noise from the meaningful elements in a picture? One
    way is to gather information about the image, via histograms, to see if there’s
    distortion in any of the channels. The image we’ll use in this tutorial isn’t
    particularly interesting, but it is representative of the problems you may encounter
    when dealing with badly taken photographs. As you can see in [Figure 7-1](ch07s01.html#initial_photograph-id00073
    "Figure 7-1. The initial photograph"), the picture’s quality is very poor. The
    photograph was taken through a closed window, in poor lighting, and with the camera’s
    automatic settings.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，如何从图像中分离噪声和有意义的元素呢？一种方法是通过直方图收集图像的信息，以查看各个通道是否存在失真。我们将在本教程中使用的图像并不特别有趣，但它代表了在处理拍摄质量差的照片时可能遇到的问题。如[图
    7-1](ch07s01.html#initial_photograph-id00073 "图 7-1. 初始照片")所示，这张照片的质量非常差。该照片是通过一个关闭的窗户拍摄的，光线较差，并且使用了相机的自动设置。
- en: '![The initial photograph](httpatomoreillycomsourcenostarchimages1454932.png.jpg)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![初始照片](httpatomoreillycomsourcenostarchimages1454932.png.jpg)'
- en: Figure 7-1. The initial photograph
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-1. 初始照片
- en: Dynamics Extension
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 动态范围扩展
- en: 'Begin by gathering information on the image dynamics, such as the ratio between
    the smallest and largest values in various channels. The combined histograms shown
    in [Figure 7-2](ch07s01.html#histogram_for_the_initial_photograph "Figure 7-2. The
    histogram for the initial photograph") are a way to visualize the image dynamics.
    Open them via **Image: Colors > Info > Histogram**, and change the CHANNEL to
    RGB. The three channels—Red, Green, and Blue—are shown in the same graph in their
    corresponding colors. The colors in the areas where the histograms superimpose
    are additive. A position on the horizontal axis represents a specific value between
    0 and 255\. The height of the histogram (the vertical axis) represents the number
    of pixels with that value.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，收集图像动态范围的信息，例如不同通道中最小值和最大值之间的比率。[图 7-2](ch07s01.html#histogram_for_the_initial_photograph
    "图 7-2. 初始照片的直方图")中显示的合并直方图是可视化图像动态范围的一种方式。通过**图像：颜色 > 信息 > 直方图**打开它们，并将CHANNEL改为RGB。三个通道——红色、绿色和蓝色——以各自的颜色显示在同一图表中。在直方图重叠的区域中，颜色是相加的。水平轴上的位置代表0到255之间的一个特定值。直方图的高度（纵轴）表示具有该值的像素数量。
- en: '![The histogram for the initial photograph](httpatomoreillycomsourcenostarchimages1454934.png.jpg)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![初始照片的直方图](httpatomoreillycomsourcenostarchimages1454934.png.jpg)'
- en: Figure 7-2. The histogram for the initial photograph
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-2. 初始照片的直方图
- en: '![The meaningful part of the histogram](httpatomoreillycomsourcenostarchimages1454936.png.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![直方图中的有意义部分](httpatomoreillycomsourcenostarchimages1454936.png.jpg)'
- en: Figure 7-3. The meaningful part of the histogram
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-3. 直方图中的有意义部分
- en: '![After equalizing](httpatomoreillycomsourcenostarchimages1454938.png.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![均衡化后](httpatomoreillycomsourcenostarchimages1454938.png.jpg)'
- en: Figure 7-4. After equalizing
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-4. 均衡化后
- en: Move the small triangles under the horizontal grayscale bar to frame the meaningful
    interval of values. [Figure 7-3](ch07s01.html#meaningful_part_of_the_histogram
    "Figure 7-3. The meaningful part of the histogram") shows that almost no pixels
    have a value less than 65 or greater than 173\. In fact, 99.1 percent of the pixels
    are in the framed interval, which explains why the image is dull and hazy.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 将小三角形移动到水平灰度条下方，框定有意义的数值区间。[图 7-3](ch07s01.html#meaningful_part_of_the_histogram
    "图 7-3. 直方图中的有意义部分")显示，几乎没有像素值小于 65 或大于 173。实际上，99.1% 的像素都在框定的区间内，这也解释了为什么图像看起来昏暗且模糊。
- en: '![The histogram after equalization](httpatomoreillycomsourcenostarchimages1454940.png.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![均衡化后的直方图](httpatomoreillycomsourcenostarchimages1454940.png.jpg)'
- en: Figure 7-5. The histogram after equalization
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-5. 归一化后的直方图
- en: '![After stretching the contrast](httpatomoreillycomsourcenostarchimages1454942.png.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![拉伸对比度后的图像](httpatomoreillycomsourcenostarchimages1454942.png.jpg)'
- en: Figure 7-6. After stretching the contrast
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-6. 拉伸对比度后的图像
- en: 'Extending the dynamic range is fairly easy with the tools available in GIMP.
    The simplest one is **Image: Colors > Auto > Equalize**, which automatically stretches
    the dynamic range in each channel to span the entire available range. [Figure 7-4](ch07s01.html#after_equalizing
    "Figure 7-4. After equalizing") shows the result, and [Figure 7-5](ch07s01.html#histogram_after_equalization
    "Figure 7-5. The histogram after equalization") shows the corresponding histogram.
    Because the image has only slightly more than a hundred different values, and
    the range has 255 values, extending the existing values over the full range leaves
    a lot of values unrepresented, which explains the strange “comb” shape.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展动态范围在GIMP中是相当简单的。最简单的工具是**图像：颜色 > 自动 > 归一化**，它会自动将每个通道的动态范围拉伸到整个可用范围。[图7-4](ch07s01.html#after_equalizing
    "图7-4. 归一化后的效果")展示了结果，[图7-5](ch07s01.html#histogram_after_equalization "图7-5.
    归一化后的直方图")展示了相应的直方图。因为图像中只有略多于一百个不同的值，而范围有255个值，将现有值拉伸到整个范围会留下很多未被表示的值，这解释了奇怪的“梳子”形状。
- en: In the resulting image ([Figure 7-4](ch07s01.html#after_equalizing "Figure 7-4. After
    equalizing")), you see the squirrel is more visible, but the color distortions
    in the image have been exaggerated.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在生成的图像中（[图7-4](ch07s01.html#after_equalizing "图7-4. 归一化后的效果")），你可以看到松鼠更加明显，但图像中的颜色失真被夸大了。
- en: 'The same menu contains other automatic tools. For example, [Figure 7-6](ch07s01.html#after_stretching_the_contrast
    "Figure 7-6. After stretching the contrast") shows the image and its histograms
    after we used **Image: Colors > Auto > Stretch Contrast**. You could also try
    **Image: Colors > Auto > Normalize**, which gives a similar result.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 同一个菜单中包含其他自动化工具。例如，[图7-6](ch07s01.html#after_stretching_the_contrast "图7-6.
    拉伸对比度后的效果")展示了使用**图像：颜色 > 自动 > 拉伸对比度**后的图像及其直方图。你也可以尝试**图像：颜色 > 自动 > 归一化**，它会给出类似的结果。
- en: '![After using Auto in the Levels tool](httpatomoreillycomsourcenostarchimages1454944.png.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![使用“自动”功能后的图像](httpatomoreillycomsourcenostarchimages1454944.png.jpg)'
- en: Figure 7-7. After using Auto in the Levels tool
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-7. 使用“自动”功能后的图像
- en: '![Extracting the RGB channels](httpatomoreillycomsourcenostarchimages1454946.png.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![提取RGB通道](httpatomoreillycomsourcenostarchimages1454946.png.jpg)'
- en: Figure 7-8. Extracting the RGB channels
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-8. 提取RGB通道
- en: 'Pressing the AUTO button in the Levels tool yields the image shown in [Figure 7-7](ch07s01.html#after_using_auto_in_the_levels_tool
    "Figure 7-7. After using Auto in the Levels tool"). You can get a similar result
    by using **Image: Colors > Curves** to manipulate the curves in each color channel
    and suppress high and low values, which are not present in this photograph.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在“等级”工具中按下AUTO按钮，会得到[图7-7](ch07s01.html#after_using_auto_in_the_levels_tool
    "图7-7. 使用“自动”功能后的效果")中显示的图像。你也可以通过使用**图像：颜色 > 曲线**来操作每个颜色通道的曲线，抑制照片中不存在的高低值，从而获得类似的效果。
- en: Histogram Modification
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 直方图修改
- en: 'The histograms you saw in the preceding section are not very useful because
    they are crammed into one window, and their significance is not obvious in the
    image. A better way to visualize the three channels is to use **Image: Colors
    > Components > Decompose**. In the dialog shown in [Figure 7-8](ch07s01.html#extracting_the_rgb_channels
    "Figure 7-8. Extracting the RGB channels"), choose RGB to decompose the image
    into its three RGB channels. A new image with three grayscale layers, one for
    each channel, is created. In the Histogram window, choose the Value channel, which
    is done automatically because the image has no color or transparency.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 前面提到的直方图不太有用，因为它们被挤在一个窗口中，而且它们在图像中的意义并不明显。更好的方式是使用**图像：颜色 > 组件 > 分解**来可视化三个通道。在[图7-8](ch07s01.html#extracting_the_rgb_channels
    "图7-8. 提取RGB通道")中显示的对话框中，选择RGB将图像分解为三个RGB通道。创建一个新的图像，其中有三个灰度层，每个通道对应一个层。在直方图窗口中，选择“值”通道，这会自动完成，因为图像没有颜色或透明度。
- en: '![The red channel](httpatomoreillycomsourcenostarchimages1454948.png.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![红色通道](httpatomoreillycomsourcenostarchimages1454948.png.jpg)'
- en: Figure 7-9. The red channel
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-9. 红色通道
- en: '![The green channel](httpatomoreillycomsourcenostarchimages1454950.png.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![绿色通道](httpatomoreillycomsourcenostarchimages1454950.png.jpg)'
- en: Figure 7-10. The green channel
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-10. 绿色通道
- en: '![The blue channel](httpatomoreillycomsourcenostarchimages1454952.png.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![蓝色通道](httpatomoreillycomsourcenostarchimages1454952.png.jpg)'
- en: Figure 7-11. The blue channel
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-11. 蓝色通道
- en: '[Figure 7-9](ch07s01.html#red_channel "Figure 7-9. The red channel") to [Figure 7-11](ch07s01.html#blue_channel
    "Figure 7-11. The blue channel") show the three channels, along with their respective
    histogram. Clearly the Blue channel contributes much less to the image than the
    other two channels. Let’s see what happens if you stretch its histogram and leave
    the others unchanged.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '[图7-9](ch07s01.html#red_channel "图7-9. 红色通道")到[图7-11](ch07s01.html#blue_channel
    "图7-11. 蓝色通道")显示了三个通道及其各自的直方图。显然，蓝色通道对图像的贡献远远小于其他两个通道。我们来看一下，如果你拉伸蓝色通道的直方图，而保持其他通道不变，会发生什么。'
- en: '![Stretching the dynamics of the Blue layer](httpatomoreillycomsourcenostarchimages1454954.png.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![拉伸蓝色图层的动态](httpatomoreillycomsourcenostarchimages1454954.png.jpg)'
- en: Figure 7-12. Stretching the dynamics of the Blue layer
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-12. 拉伸蓝色图层的动态
- en: '![After recomposing the image](httpatomoreillycomsourcenostarchimages1454956.png.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![重新组合后的图像](httpatomoreillycomsourcenostarchimages1454956.png.jpg)'
- en: Figure 7-13. After recomposing the image
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-13. 重新组合后的图像
- en: 'Select the Blue layer in the Layers dialog and apply **Image: Colors > Auto
    > Equalize**. The result, if you hide the other two layers, appears in [Figure 7-12](ch07s01.html#stretching_the_dynamics_of_the_blue_laye
    "Figure 7-12. Stretching the dynamics of the Blue layer"). Next, apply **Image:
    Colors > Components > Recompose**. The result, shown in [Figure 7-13](ch07s01.html#after_recomposing_the_image
    "Figure 7-13. After recomposing the image"), is worse than the original. This
    image demonstrates that proper preprocessing requires an understanding of image
    dynamics that goes beyond being able to use the automatic tools.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在“图层”对话框中选择蓝色图层，然后应用**图像：颜色 > 自动 > 均衡化**。结果是，如果你隐藏其他两个图层，效果如[图7-12](ch07s01.html#stretching_the_dynamics_of_the_blue_laye
    "图7-12. 拉伸蓝色图层的动态")所示。接下来，应用**图像：颜色 > 组件 > 重新组合**。结果如[图7-13](ch07s01.html#after_recomposing_the_image
    "图7-13. 重新组合后的图像")所示，比原始图像更差。此图像演示了，适当的预处理需要对图像动态有更深的理解，而不仅仅是会使用自动工具。
- en: Noise Reduction
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 噪声减少
- en: 'Noise is a set of small fluctuations around the average value intensity in
    some region of an image. As you’ll see later in this chapter, noise reduction
    is useful in many circumstances. But in the present case, the image is mostly
    noise, and no noise reduction process can really improve it. The only tool that’s
    even slightly useful is **Image: Filters > Enhance > Unsharp Mask**, which brings
    up the dialog shown in [Figure 7-14](ch07s01.html#unsharp_mask_dialog "Figure 7-14. The
    Unsharp Mask dialog").'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 噪声是一种围绕图像某一区域平均强度值的小幅波动。如你在本章稍后看到的，噪声减少在许多情况下是有用的。但在目前的情况下，图像主要是噪声，任何噪声减少过程都无法真正改善它。唯一稍微有用的工具是**图像：滤镜
    > 增强 > 锐化掩模**，它会弹出如[图7-14](ch07s01.html#unsharp_mask_dialog "图7-14. 锐化掩模对话框")所示的对话框。
- en: '![The Unsharp Mask dialog](httpatomoreillycomsourcenostarchimages1454958.png.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![锐化掩模对话框](httpatomoreillycomsourcenostarchimages1454958.png.jpg)'
- en: Figure 7-14. The Unsharp Mask dialog
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-14. 锐化掩模对话框
- en: '![After using Unsharp Mask](httpatomoreillycomsourcenostarchimages1454960.png.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![使用锐化掩模后的效果](httpatomoreillycomsourcenostarchimages1454960.png.jpg)'
- en: Figure 7-15. After using Unsharp Mask
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-15. 使用“锐化掩模”后的效果
- en: If you increase the RADIUS to more than 40, you improve the image a bit, as
    shown in [Figure 7-15](ch07s01.html#after_using_unsharp_mask "Figure 7-15. After
    using Unsharp Mask"). The squirrel is more visible and has more relief, but identifying
    most of the plants in the background would still be very difficult.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将半径（RADIUS）增加到40以上，图像会稍微有所改善，如[图7-15](ch07s01.html#after_using_unsharp_mask
    "图7-15. 使用锐化掩模后的效果")所示。松鼠更加明显，立体感增强，但背景中的大部分植物依然很难辨认。
- en: Edge Detection
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 边缘检测
- en: 'Generally, edge detection enhances the visibility of objects in a photograph.
    But when we applied the various filters in the **Image: Filters > Edge Detect**
    menu to our initial squirrel photograph, we didn’t see any improvement. You can
    achieve a better result by successively applying several different tools.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，边缘检测增强了照片中物体的可见性。但是当我们将**图像：滤镜 > 边缘检测**菜单中的各种滤镜应用到最初的松鼠照片时，并没有看到任何改善。通过依次应用几种不同的工具，你可以获得更好的效果。
- en: 'For example, first select the Levels tool, and click AUTO. Next, apply the
    Unsharp Mask filter. Finally, choose the **Image: Filters > Edge-Detect > Edge**
    filter. Using the settings shown in [Figure 7-16](ch07s01.html#edge_filter_dialog
    "Figure 7-16. The Edge filter dialog"), you get the result shown in [Figure 7-17](ch07s01.html#after_using_the_roberts_edge_detection_f
    "Figure 7-17. After using the Roberts edge detection filter"). Admittedly, this
    version is not really an improvement if your goal is to create a realistic image
    of the squirrel in its habitat. You could try applying the last filter on a copy
    of the layer and then adjusting the blending mode to get a more natural result.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '例如，首先选择“Levels”工具，然后点击“AUTO”。接下来，应用“Unsharp Mask”滤镜。最后，选择**图像: 滤镜 > 边缘检测 >
    边缘**滤镜。使用[图7-16](ch07s01.html#edge_filter_dialog "图7-16. 边缘滤镜对话框")中显示的设置，您将得到[图7-17](ch07s01.html#after_using_the_roberts_edge_detection_f
    "图7-17. 使用Roberts边缘检测滤镜后的效果")中所示的结果。诚然，如果您的目标是创建一张反映松鼠栖息环境的真实图像，那么这个版本并没有真正的改善。您可以尝试将最后一个滤镜应用到图层的副本上，然后调整混合模式，以获得更自然的效果。'
- en: '![The Edge filter dialog](httpatomoreillycomsourcenostarchimages1454962.png.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![边缘滤镜对话框](httpatomoreillycomsourcenostarchimages1454962.png.jpg)'
- en: Figure 7-16. The Edge filter dialog
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-16. 边缘滤镜对话框
- en: '![After using the Roberts edge detection filter](httpatomoreillycomsourcenostarchimages1454964.png.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![使用Roberts边缘检测滤镜后的效果](httpatomoreillycomsourcenostarchimages1454964.png.jpg)'
- en: Figure 7-17. After using the Roberts edge detection filter
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-17. 使用Roberts边缘检测滤镜后的效果
- en: 7.2 The Principles of Preprocessing
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7.2 预处理的原理
- en: In this section, we introduce you to the general principles of preprocessing.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将向您介绍预处理的一般原理。
- en: Subjective Aspects of Preprocessing
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 预处理的主观方面
- en: Image preprocessing enhances the visibility of the elements that we’re interested
    in within an image. In other words, the aim is to restore the original information
    as faithfully as possible. Generally speaking, preprocessing methods make pixels
    in the same regions more similar or increase the differences among pixels in different
    regions. But defining exactly what makes up a “region” is difficult.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图像预处理增强了我们在图像中感兴趣元素的可见性。换句话说，目标是尽可能忠实地恢复原始信息。一般来说，预处理方法使得同一区域的像素更加相似，或者增加不同区域间像素的差异。但要准确定义“区域”到底由什么构成是困难的。
- en: As mentioned at the beginning of this chapter, preprocessing is more commonly
    used in scientific imaging applications than when creating decorative imagery
    or photos for fun. If a photographer wants to touch up portraits he’s taken of
    an actor, he’ll probably use the techniques from [Chapter 2](ch02.html "Chapter 2. Photograph
    Retouching") and [Chapter 5](ch05.html "Chapter 5. Composite Photography"), not
    the techniques in this chapter. Erasing wrinkles or blemishes doesn’t require
    a lot of information, just a steady hand and a little time.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 如本章开头所述，预处理在科学成像应用中的使用比在创建装饰性图像或娱乐照片时更为常见。如果一位摄影师想要修饰他为演员拍摄的人像，他可能会使用[第2章](ch02.html
    "第2章. 摄影修饰")和[第5章](ch05.html "第5章. 合成摄影")中的技术，而不是本章中的技术。擦除皱纹或瑕疵不需要太多信息，只需要稳健的手法和一点时间。
- en: On the contrary, biologists often want to extract as much information as possible
    from a *micrograph*, a photo taken through a microscope. If they want to enhance
    the image quality, they can’t use techniques that degrade the information contained
    in the image. This also holds true for an intelligence agent using a photo taken
    via satellite or for an astronomer using a photo taken through a telescope.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，生物学家通常希望从*显微照片*（通过显微镜拍摄的照片）中提取尽可能多的信息。如果他们想要增强图像质量，他们不能使用会降低图像信息的技术。这对于通过卫星拍摄照片的情报人员或通过望远镜拍摄照片的天文学家也是一样的。
- en: The techniques used in this chapter modify the look of an image so you can extract
    information from it more easily. They remove useless and detrimental information
    (i.e., noise) to reinforce the meaningful information.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中使用的技术改变了图像的外观，使得您可以更轻松地从中提取信息。它们移除无用和有害的信息（即噪声），以增强有意义的信息。
- en: The idea of improving an image is a highly subjective one. But the human eye
    is especially sensitive to high contrasts, so the techniques we present here are
    generally intended to increase an image’s contrast, as it’s is the best way to
    improve visibility within a scene.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 改善图像的想法是一个高度主观的过程。但人眼对高对比度特别敏感，因此我们在此介绍的技术通常旨在提高图像的对比度，因为这是改善场景可视性的最佳方法。
- en: Although this chapter’s appeal is narrower than that of previous chapters, we
    think the techniques presented here can be useful to almost anyone who processes
    photographs with GIMP. In particular, the noise-reduction and edge-detection techniques
    have a variety of applications. Moreover, this information will help you to build
    a more thorough understanding of GIMP’s capabilities, which might come in handy
    when you least expect it.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管本章的吸引力比前几章要狭窄，但我们认为这里介绍的技巧对几乎所有使用 GIMP 处理照片的人都有帮助。特别是噪声减少和边缘检测技术具有广泛的应用。此外，这些信息将帮助你更全面地理解
    GIMP 的功能，这在你最不期望的时候可能会派上用场。
- en: '![A micrograph of bacteria](httpatomoreillycomsourcenostarchimages1454966.png.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![细菌显微照片](httpatomoreillycomsourcenostarchimages1454966.png.jpg)'
- en: Figure 7-18. A micrograph of bacteria
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-18. 细菌显微照片
- en: '![The histogram for](httpatomoreillycomsourcenostarchimages1454968.png.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图像的直方图](httpatomoreillycomsourcenostarchimages1454968.png.jpg)'
- en: Figure 7-19. The histogram for [Figure 7-18](ch07s02.html#micrograph_of_bacteria
    "Figure 7-18. A micrograph of bacteria")
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-19. [图 7-18](ch07s02.html#micrograph_of_bacteria "图 7-18. 细菌显微照片") 的直方图
- en: Histograms and Decomposition into Channels
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 直方图和通道分解
- en: The main purpose of image preprocessing is to get information that helps make
    the image more readable. When you use the image histogram to make adjustments,
    you change the individual pixel intensities. This transformation does not change
    the shape of the regions, but it can change their texture, color, luminosity,
    or contrast with the surroundings.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图像预处理的主要目的是获取有助于使图像更易读的信息。当你使用图像直方图进行调整时，你实际上是在改变单个像素的强度。这种转换不会改变区域的形状，但可以改变它们的纹理、颜色、亮度或与周围环境的对比度。
- en: '[Figure 7-18](ch07s02.html#micrograph_of_bacteria "Figure 7-18. A micrograph
    of bacteria") is a grayscale photo of bacteria that was taken with a microscope.
    [Figure 7-19](ch07s02.html#histogram_for_figure_7dot18 "Figure 7-19. The histogram
    for Figure 7-18") shows its corresponding histogram. Among the 160,000 pixels
    in this image, 1684 of them have a value of 77, in the interval from 0 to 255.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-18](ch07s02.html#micrograph_of_bacteria "图 7-18. 细菌显微照片") 是一张用显微镜拍摄的细菌灰度照片。[图
    7-19](ch07s02.html#histogram_for_figure_7dot18 "图 7-19. 图 7-18 的直方图") 显示了其对应的直方图。在这张图片的
    160,000 个像素中，有 1684 个像素的值为 77，位于 0 到 255 的区间内。'
- en: Choose the Levels tool and adjust the image’s only level, as shown in [Figure 7-20](ch07s02.html#improving_the_value_dynamics
    "Figure 7-20. Improving the value dynamics"). The result appears in [Figure 7-21](ch07s02.html#after_improvement
    "Figure 7-21. After improvement") with its histogram. The histogram now spans
    the entire range, but not all values are represented because the total number
    of discrete colors is less than the length of the interval [0:255]. The contrast
    has been increased, and the resulting image is more readable.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 选择“Levels”（等级）工具，并调整图像的唯一等级，如 [图 7-20](ch07s02.html#improving_the_value_dynamics
    "图 7-20. 改善值动态") 所示。结果显示在 [图 7-21](ch07s02.html#after_improvement "图 7-21. 改进后的效果")
    中，带有直方图。此时直方图跨越了整个范围，但并不是所有的值都被表示出来，因为离散颜色的总数少于区间 [0:255] 的长度。对比度得到了提高， resulting
    图像更易读。
- en: '![Improving the value dynamics](httpatomoreillycomsourcenostarchimages1454970.png.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![改善值动态](httpatomoreillycomsourcenostarchimages1454970.png.jpg)'
- en: Figure 7-20. Improving the value dynamics
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-20. 改善值动态
- en: '![After improvement](httpatomoreillycomsourcenostarchimages1454972.png.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![改进后的效果](httpatomoreillycomsourcenostarchimages1454972.png.jpg)'
- en: Figure 7-21. After improvement
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-21. 改进后的效果
- en: '[Figure 7-22](ch07s02.html#micrograph_of_human_blood "Figure 7-22. A micrograph
    of human blood") shows a micrograph of human blood, this time in color. [Figure 7-23](ch07s02.html#combined_histograms_for_figure_7dot22
    "Figure 7-23. The combined histograms for Figure 7-22") shows the combined histograms
    for this image. You see that these histograms each have two separated peaks of
    different heights and in different positions depending on the channel chosen.
    The Red channel extends further into the high values than the other two, but none
    of the channels extends all the way to 255.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-22](ch07s02.html#micrograph_of_human_blood "图 7-22. 人类血液显微照片") 显示的是一张彩色的人类血液显微照片。[图
    7-23](ch07s02.html#combined_histograms_for_figure_7dot22 "图 7-23. 图 7-22 的组合直方图")
    显示了这张图像的组合直方图。你可以看到这些直方图每个都有两个不同高度和位置的峰值，具体取决于所选的通道。红色通道比其他两个通道的高值范围更广，但没有一个通道能完全达到
    255。'
- en: 'You can get more information by decomposing the image into its three channels
    using **Image: Colors > Components > Decompose**. From the dialog that appears
    ([Figure 7-24](ch07s02.html#decompose_tool_dialog "Figure 7-24. The Decompose
    tool dialog")), choose the first color model—RGB. Leave DECOMPOSE TO LAYERS checked,
    and click OK. A new image is created with a layer for each channel. Each layer
    is a grayscale representation of the corresponding channel. For example, [Figure 7-25](ch07s02.html#red_channel_for_figure_7dot22
    "Figure 7-25. The Red channel for Figure 7-22") shows the Red layer.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '你可以通过使用**图像: 颜色 > 组件 > 分解**将图像分解为三个通道，从而获取更多信息。从出现的对话框中（[图 7-24](ch07s02.html#decompose_tool_dialog
    "图 7-24. 分解工具对话框")），选择第一个颜色模型——RGB。保持选中“分解为图层”选项，然后点击确认。一个新的图像将被创建，每个通道对应一个图层。每个图层都是相应通道的灰度表示。例如，[图
    7-25](ch07s02.html#red_channel_for_figure_7dot22 "图 7-25. 图 7-22的红色通道")展示了红色通道图层。'
- en: '![A micrograph of human blood](httpatomoreillycomsourcenostarchimages1454974.png.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![人类血液的显微照片](httpatomoreillycomsourcenostarchimages1454974.png.jpg)'
- en: Figure 7-22. A micrograph of human blood
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-22. 人类血液的显微照片
- en: '![The combined histograms for](httpatomoreillycomsourcenostarchimages1454976.png.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![合并直方图](httpatomoreillycomsourcenostarchimages1454976.png.jpg)'
- en: Figure 7-23. The combined histograms for [Figure 7-22](ch07s02.html#micrograph_of_human_blood
    "Figure 7-22. A micrograph of human blood")
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-23. [图 7-22](ch07s02.html#micrograph_of_human_blood "图 7-22. 人类血液的显微照片")的合并直方图
- en: '![The Decompose tool dialog](httpatomoreillycomsourcenostarchimages1454978.png.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![分解工具对话框](httpatomoreillycomsourcenostarchimages1454978.png.jpg)'
- en: Figure 7-24. The Decompose tool dialog
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-24. 分解工具对话框
- en: 'One useful tool for improving these channels separately is **Image: Colors
    > Curves**. When you apply it to the layer corresponding to the Red channel, you
    get [Figure 7-26](ch07s02.html#adjusting_the_red_channel "Figure 7-26. Adjusting
    the Red channel"). Click the small button on the right, just above the curve,
    to get a logarithmic histogram. In this histogram, the height of the vertical
    bars is not proportional to the number of pixels: The ratio between the height
    and the number decreases as the height increases. In many cases, this type of
    histogram is more readable.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '改善这些通道的一个有用工具是**图像: 颜色 > 曲线**。当你将其应用到对应红色通道的图层时，你将看到[图 7-26](ch07s02.html#adjusting_the_red_channel
    "图 7-26. 调整红色通道")。点击曲线右上方的小按钮，打开对数直方图。在这个直方图中，垂直条形的高度与像素数量无关：高度与数量之间的比例会随着高度增加而减少。在许多情况下，这种类型的直方图更容易阅读。'
- en: '![The Red channel for](httpatomoreillycomsourcenostarchimages1454980.png.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![红色通道](httpatomoreillycomsourcenostarchimages1454980.png.jpg)'
- en: Figure 7-25. The Red channel for [Figure 7-22](ch07s02.html#micrograph_of_human_blood
    "Figure 7-22. A micrograph of human blood")
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-25. [图 7-22](ch07s02.html#micrograph_of_human_blood "图 7-22. 人类血液的显微照片")的红色通道
- en: '![Adjusting the Red channel](httpatomoreillycomsourcenostarchimages1454982.png.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![调整红色通道](httpatomoreillycomsourcenostarchimages1454982.png.jpg)'
- en: Figure 7-26. Adjusting the Red channel
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-26. 调整红色通道
- en: Adjust the curve as shown in [Figure 7-27](ch07s02.html#changing_the_curve "Figure 7-27. Changing
    the curve") to keep only the interesting parts of the histogram. [Figure 7-28](ch07s02.html#resulting_red_channel
    "Figure 7-28. The resulting Red channel") shows the result with the corresponding
    altered histogram. Note the white vertical bars that correspond to the unrepresented
    values.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 按照[图 7-27](ch07s02.html#changing_the_curve "图 7-27. 改变曲线")中所示的方式调整曲线，仅保留直方图中有趣的部分。[图
    7-28](ch07s02.html#resulting_red_channel "图 7-28. 调整后的红色通道")展示了调整后的结果，并显示了相应的修改后的直方图。注意那些对应于未表示值的白色垂直条形。
- en: 'Do the same thing with the other two channels: Select the corresponding layer,
    select the Curves tool, and adjust the curve. When you’ve done this for the three
    layers, choose **Image: Colors > Components > Recompose**, which reconstitutes
    the original image using the values of the three channels in the decomposed layers.
    The result appears in [Figure 7-29](ch07s02.html#after_adjusting_the_three_channels
    "Figure 7-29. After adjusting the three channels") with its combined RGB histograms.
    The image is much more readable, and the biologist can now see and interpret some
    details that weren’t really visible before.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '对其他两个通道做同样的操作：选择相应的图层，选择曲线工具并调整曲线。完成这三个图层的调整后，选择**图像: 颜色 > 组件 > 重新组合**，该操作将使用分解图层中的三个通道的值重新构建原始图像。结果如[图
    7-29](ch07s02.html#after_adjusting_the_three_channels "图 7-29. 调整三个通道后的结果")所示，图像的RGB直方图已合并。图像变得更易读，生物学家现在可以看到并解读一些之前无法观察到的细节。'
- en: '![Changing the curve](httpatomoreillycomsourcenostarchimages1454984.png.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![改变曲线](httpatomoreillycomsourcenostarchimages1454984.png.jpg)'
- en: Figure 7-27. Changing the curve
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-27。改变曲线
- en: '![The resulting Red channel](httpatomoreillycomsourcenostarchimages1454986.png.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![结果中的红色通道](httpatomoreillycomsourcenostarchimages1454986.png.jpg)'
- en: Figure 7-28. The resulting Red channel
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-28。结果中的红色通道
- en: '![After adjusting the three channels](httpatomoreillycomsourcenostarchimages1454988.png.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![调整三个通道后](httpatomoreillycomsourcenostarchimages1454988.png.jpg)'
- en: Figure 7-29. After adjusting the three channels
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-29。调整三个通道后
- en: '![After Image: Colors > Auto > Equalize](httpatomoreillycomsourcenostarchimages1454990.png.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![图像处理后：颜色 > 自动 > 均衡](httpatomoreillycomsourcenostarchimages1454990.png.jpg)'
- en: 'Figure 7-30. After Image: Colors > Auto > Equalize'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-30。图像处理后：颜色 > 自动 > 均衡
- en: '![After Image: Colors > Auto > White Balance](httpatomoreillycomsourcenostarchimages1454992.png.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图像处理后：颜色 > 自动 > 白平衡](httpatomoreillycomsourcenostarchimages1454992.png.jpg)'
- en: 'Figure 7-31. After Image: Colors > Auto > White Balance'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-31。图像处理后：颜色 > 自动 > 白平衡
- en: '![After Image: Colors > Auto > Color Enhance](httpatomoreillycomsourcenostarchimages1454994.png.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图像处理后：颜色 > 自动 > 色彩增强](httpatomoreillycomsourcenostarchimages1454994.png.jpg)'
- en: 'Figure 7-32. After Image: Colors > Auto > Color Enhance'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-32。图像处理后：颜色 > 自动 > 色彩增强
- en: Extracting Information through Dynamics Extension
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过动态扩展提取信息
- en: In the previous tutorial, we used some automatic tools to extend an image’s
    dynamics, but the results weren’t very good. Although they can be useful in some
    cases, you clearly shouldn’t depend on automatic tools to adjust an image’s dynamics.
    In this section, we use several automatic tools on a micrograph of bacteria—with
    some interesting results.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的教程中，我们使用了一些自动工具来扩展图像的动态范围，但效果并不理想。虽然在某些情况下它们可能有用，但显然你不应该依赖自动工具来调整图像的动态范围。在本节中，我们将在细菌的显微图像上使用几种自动工具，并得到一些有趣的结果。
- en: '[Figure 7-30](ch07s02.html#after_image_colors_greater_than_auto_gre "Figure 7-30. After
    Image: Colors > Auto > Equalize") to [Figure 7-35](ch07s02.html#after_image_colors_greater_than-id00078
    "Figure 7-35. After Image: Colors > Auto > Stretch HSV") show the result of using
    the six entries from the **Image: Colors > Auto** menu. In this case, the best
    choice is not a matter of taste but rather of utility. The biologist who will
    interpret this picture will choose the transformation that provides her with the
    most significant information.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-30](ch07s02.html#after_image_colors_greater_than_auto_gre "图 7-30。图像处理后：颜色
    > 自动 > 均衡") 到 [图 7-35](ch07s02.html#after_image_colors_greater_than-id00078 "图
    7-35。图像处理后：颜色 > 自动 > 拉伸 HSV") 展示了使用 **图像：颜色 > 自动** 菜单中的六个选项后的结果。在这种情况下，最佳选择不是个人喜好的问题，而是实用性的考量。将解读这张图片的生物学家会选择提供最多关键信息的变换。'
- en: '![After Image: Colors > Auto > Normalize](httpatomoreillycomsourcenostarchimages1454996.png.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图像处理后：颜色 > 自动 > 归一化](httpatomoreillycomsourcenostarchimages1454996.png.jpg)'
- en: 'Figure 7-33. After Image: Colors > Auto > Normalize'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-33。图像处理后：颜色 > 自动 > 归一化
- en: '![After Image: Colors > Auto > Stretch Contrast](httpatomoreillycomsourcenostarchimages1454998.png.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![图像处理后：颜色 > 自动 > 拉伸对比度](httpatomoreillycomsourcenostarchimages1454998.png.jpg)'
- en: 'Figure 7-34. After Image: Colors > Auto > Stretch Contrast'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-34。图像处理后：颜色 > 自动 > 拉伸对比度
- en: '![After Image: Colors > Auto > Stretch HSV](httpatomoreillycomsourcenostarchimages1455000.png.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![图像处理后：颜色 > 自动 > 拉伸 HSV](httpatomoreillycomsourcenostarchimages1455000.png.jpg)'
- en: 'Figure 7-35. After Image: Colors > Auto > Stretch HSV'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-35。图像处理后：颜色 > 自动 > 拉伸 HSV
- en: transformations are global and cannot be parameterized. They work on all the
    channels in the same way, although the Stretch HSV transformation operates on
    the HSV model rather than the RGB one. For comparison, [Figure 7-36](ch07s02.html#after_using_auto_in_the_levels_t-id00079
    "Figure 7-36. After using Auto in the Levels tool") shows the effect of using
    the AUTO button in the Levels tool. That transformation operates separately on
    each channel, removing the lowest values in the histograms, so it takes away some
    background noise but can also delete meaningful information.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 变换是全局的，无法进行参数化。它们对所有通道的作用相同，尽管拉伸 HSV 变换是在 HSV 模型上操作，而不是 RGB 模型。为了进行比较，[图 7-36](ch07s02.html#after_using_auto_in_the_levels_t-id00079
    "图 7-36。使用 Levels 工具中的 Auto 后") 展示了使用 Levels 工具中的 AUTO 按钮后的效果。该变换会分别作用于每个通道，移除直方图中的最低值，因此它会去除一些背景噪声，但也可能删除有意义的信息。
- en: '![After using Auto in the Levels tool](httpatomoreillycomsourcenostarchimages1455002.png.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![使用 Levels 工具中的 Auto 后](httpatomoreillycomsourcenostarchimages1455002.png.jpg)'
- en: Figure 7-36. After using Auto in the Levels tool
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-36。使用 Levels 工具中的 Auto 后
- en: '![Increasing gray pixel values (darkening)](httpatomoreillycomsourcenostarchimages1455004.png.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![增加灰度像素值（变暗）](httpatomoreillycomsourcenostarchimages1455004.png.jpg)'
- en: Figure 7-37. Increasing gray pixel values (darkening)
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-37. 增加灰度像素值（变暗）
- en: Next, try some more complicated manipulations with the Curves tool. Work only
    on the Value channel (i.e., the grayscale values), although you could also work
    on the three color channels separately. In each case, first apply the curve modification
    shown in [Figure 7-27](ch07s02.html#changing_the_curve "Figure 7-27. Changing
    the curve") to remove the unrepresented extreme values.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，尝试使用“Curves”工具进行一些更复杂的操作。只处理“值”（Value）通道（即灰度值），尽管您也可以分别处理三个颜色通道。在每个情况下，首先应用[图
    7-27](ch07s02.html#changing_the_curve "图 7-27. 改变曲线")中显示的曲线修改，以去除未表示的极端值。
- en: In the sequence of figures from [Figure 7-37](ch07s02.html#increasing_gray_pixel_values_left_parent
    "Figure 7-37. Increasing gray pixel values (darkening)") to [Figure 7-44](ch07s02.html#result_of_diversifying_pixel_values
    "Figure 7-44. The result of diversifying pixel values"), you see the modification
    made to each curve, its effect (stated in each figure’s caption), and the resulting
    image. The results are fairly diverse, and some of them are probably not very
    useful. In these last examples, the correlation among channels, and thus the general
    hue, was maintained in the images. Note that if you use the AUTO button in the
    Levels tool, the correlation would not be maintained. For most users, this makes
    no difference.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在从[图 7-37](ch07s02.html#increasing_gray_pixel_values_left_parent "图 7-37. 增加灰度像素值（变暗）")到[图
    7-44](ch07s02.html#result_of_diversifying_pixel_values "图 7-44. 多样化像素值的结果")的一系列图像中，您可以看到对每个曲线的修改、其效果（在每个图注中说明）以及结果图像。这些结果相当多样化，其中一些可能并不太有用。在这些最后的示例中，图像中通道之间的相关性以及整体色调得以保持。请注意，如果您在“Levels”工具中使用“自动”（AUTO）按钮，相关性将不会被保持。对于大多数用户来说，这没有区别。
- en: '![The result of increasing pixel values](httpatomoreillycomsourcenostarchimages1455006.png.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![增加像素值的结果](httpatomoreillycomsourcenostarchimages1455006.png.jpg)'
- en: Figure 7-38. The result of increasing pixel values
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-38. 增加像素值的结果
- en: '![Decreasing gray pixel values (lightening)](httpatomoreillycomsourcenostarchimages1455008.png.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![减少灰度像素值（变亮）](httpatomoreillycomsourcenostarchimages1455008.png.jpg)'
- en: Figure 7-39. Decreasing gray pixel values (lightening)
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-39. 减少灰度像素值（变亮）
- en: '![The result of decreasing pixel values](httpatomoreillycomsourcenostarchimages1455010.png.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![减少像素值的结果](httpatomoreillycomsourcenostarchimages1455010.png.jpg)'
- en: Figure 7-40. The result of decreasing pixel values
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-40. 减少像素值的结果
- en: A variety of manipulations are possible with the Curves tool. Changing the shape
    of the curves can lead to interesting results—but more often to weird and useless
    results. For example, [Figure 7-45](ch07s02.html#bizarre_curve "Figure 7-45. A
    bizarre curve") shows a bizarre curve applied to the Red channel. A similar curve
    was applied to the two other channels to create [Figure 7-46](ch07s03.html#result_of_applying_bizarre_curves_to_all
    "Figure 7-46. The result of applying bizarre curves to all channels"), which probably
    does not provide the biologist with any additional useful information.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 使用“Curves”工具可以进行多种操作。改变曲线的形状可以得到有趣的结果——但更常见的是得到奇怪且无用的结果。例如，[图 7-45](ch07s02.html#bizarre_curve
    "图 7-45. 一种奇异的曲线")显示了应用于红色通道的奇异曲线。将相似的曲线应用于其他两个通道后，得到了[图 7-46](ch07s03.html#result_of_applying_bizarre_curves_to_all
    "图 7-46. 将奇异曲线应用于所有通道的结果")，这可能对生物学家没有提供任何额外的有用信息。
- en: '![Homogenizing gray pixel values](httpatomoreillycomsourcenostarchimages1455012.png.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![均化灰度像素值](httpatomoreillycomsourcenostarchimages1455012.png.jpg)'
- en: Figure 7-41. Homogenizing gray pixel values
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-41. 均化灰度像素值
- en: '![The result of homogenizing pixel values](httpatomoreillycomsourcenostarchimages1455014.png.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![均化像素值的结果](httpatomoreillycomsourcenostarchimages1455014.png.jpg)'
- en: Figure 7-42. The result of homogenizing pixel values
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-42. 均化像素值的结果
- en: '![Diversifying the pixel values](httpatomoreillycomsourcenostarchimages1455016.png.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![多样化像素值](httpatomoreillycomsourcenostarchimages1455016.png.jpg)'
- en: Figure 7-43. Diversifying the pixel values
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-43. 多样化像素值
- en: '![The result of diversifying pixel values](httpatomoreillycomsourcenostarchimages1455018.png.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![多样化像素值的结果](httpatomoreillycomsourcenostarchimages1455018.png.jpg)'
- en: Figure 7-44. The result of diversifying pixel values
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-44. 多样化像素值的结果
- en: '![A bizarre curve](httpatomoreillycomsourcenostarchimages1455020.png.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![一种奇异的曲线](httpatomoreillycomsourcenostarchimages1455020.png.jpg)'
- en: Figure 7-45. A bizarre curve
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-45. 一种奇异的曲线
- en: 7.3 Filtering
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7.3 滤波
- en: Filtering removes noise from an image. In this section, we’ll introduce the
    concept behind filtering and show you some common techniques.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 滤波可以去除图像中的噪声。在本节中，我们将介绍滤波的基本概念，并展示一些常见的技术。
- en: The Principles of Filtering
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 滤波原理
- en: 'Noise occurs in images for several reasons:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图像中噪声产生的原因有几个：
- en: The photograph was taken in poor conditions; there was not enough light, as
    in [Figure 7-47](ch07s03.html#noise_due_to_poor_conditions "Figure 7-47. Noise
    due to poor conditions"), or the photographer moved, as in [Figure 7-48](ch07s03.html#noise_because_the_photographer_moved
    "Figure 7-48. Noise because the photographer moved").
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 照片是在恶劣条件下拍摄的，光线不足，如[图 7-47](ch07s03.html#noise_due_to_poor_conditions "图 7-47.
    由于恶劣条件造成的噪声")所示，或者是摄影师移动了，如[图 7-48](ch07s03.html#noise_because_the_photographer_moved
    "图 7-48. 由于摄影师移动造成的噪声")所示。
- en: '![The result of applying bizarre curves to all channels](httpatomoreillycomsourcenostarchimages1455022.png.jpg)'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![对所有通道应用奇异曲线后的结果](httpatomoreillycomsourcenostarchimages1455022.png.jpg)'
- en: Figure 7-46. The result of applying bizarre curves to all channels
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 7-46. 对所有通道应用奇异曲线后的结果
- en: '![Noise due to poor conditions](httpatomoreillycomsourcenostarchimages1455024.png.jpg)'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![由于恶劣条件造成的噪声](httpatomoreillycomsourcenostarchimages1455024.png.jpg)'
- en: Figure 7-47. Noise due to poor conditions
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 7-47. 由于恶劣条件造成的噪声
- en: '![Noise because the photographer moved](httpatomoreillycomsourcenostarchimages1455026.png.jpg)'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![由于摄影师移动造成的噪声](httpatomoreillycomsourcenostarchimages1455026.png.jpg)'
- en: Figure 7-48. Noise because the photographer moved
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 7-48. 由于摄影师移动产生的噪声
- en: The camera was a very low-cost model with too few CCD sensors, which generated
    strong RGB noise, as shown in [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors
    "Figure 7-49. Noise caused by too few image sensors").
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相机是一个非常低成本的型号，CCD传感器太少，产生了强烈的RGB噪声，如[图 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors
    "图 7-49. 由于图像传感器太少造成的噪声")所示。
- en: The sampling frequency was too low, as shown in [Figure 7-50](ch07s03.html#noise_due_to_low_sampling_frequency
    "Figure 7-50. Noise due to low sampling frequency"). This noise is typical in
    a photograph taken from a mobile phone.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 采样频率过低，如[图 7-50](ch07s03.html#noise_due_to_low_sampling_frequency "图 7-50. 由于低采样频率造成的噪声")所示。这种噪声通常出现在手机拍摄的照片中。
- en: The printed photograph has been scratched or otherwise damaged, as in [Figure 7-51](ch07s03.html#noise_due_to_photograph_scratching
    "Figure 7-51. Noise due to photograph scratching").
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 打印出来的照片已被划伤或以其他方式损坏，如[图 7-51](ch07s03.html#noise_due_to_photograph_scratching
    "图 7-51. 由于照片划痕产生的噪声")所示。
- en: '![Noise caused by too few image sensors](httpatomoreillycomsourcenostarchimages1455028.png.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![由于图像传感器太少造成的噪声](httpatomoreillycomsourcenostarchimages1455028.png.jpg)'
- en: Figure 7-49. Noise caused by too few image sensors
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-49. 由于图像传感器太少造成的噪声
- en: '![Noise due to low sampling frequency](httpatomoreillycomsourcenostarchimages1455030.png.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![由于低采样频率造成的噪声](httpatomoreillycomsourcenostarchimages1455030.png.jpg)'
- en: Figure 7-50. Noise due to low sampling frequency
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-50. 由于低采样频率造成的噪声
- en: The most common way to reduce the noise in an image is to use *filtering*. The
    idea is to reduce the amplitude of the perturbations in areas that should be consistent,
    such as a wall or the surface of an object, while preserving the transition areas,
    which are the borders between objects and their surroundings. If possible, these
    transition areas should actually be emphasized.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 减少图像噪声最常见的方法是使用*滤波*。这个方法的核心思想是减少应该保持一致的区域中的扰动幅度，比如墙壁或物体表面，同时保留过渡区域，也就是物体与其周围环境之间的边界。如果可能的话，这些过渡区域应该被突出强调。
- en: Characteristic Matrices
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 特征矩阵
- en: Filtering changes every pixel value, depending on the values of neighboring
    pixels. A filter is defined by the formula or mathematical mechanism that computes
    this new value.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 滤波会根据邻近像素的值更改每个像素的值。滤波器是通过一个公式或数学机制定义的，该机制计算出这个新的像素值。
- en: '![Noise due to photograph scratching](httpatomoreillycomsourcenostarchimages1455032.png.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![由于照片划痕造成的噪声](httpatomoreillycomsourcenostarchimages1455032.png.jpg)'
- en: Figure 7-51. Noise due to photograph scratching
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-51. 由于照片划痕产生的噪声
- en: '![The Convolution Matrix filter dialog](httpatomoreillycomsourcenostarchimages1455034.png.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![卷积矩阵滤波器对话框](httpatomoreillycomsourcenostarchimages1455034.png.jpg)'
- en: Figure 7-52. The Convolution Matrix filter dialog
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-52. 卷积矩阵滤波器对话框
- en: 'We will consider only the simplest and most frequently used filters from among
    those available in GIMP. The noise reduction filters are found in various submenus
    of the **Image: Filters** menu. The most general one is **Image: Filters > Generic
    > Convolution Matrix**, which brings up the dialog shown in [Figure 7-52](ch07s03.html#convolution_matrix_filter_dialog
    "Figure 7-52. The Convolution Matrix filter dialog").'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将仅考虑GIMP中最简单和最常用的滤波器。在**图像：滤镜**菜单中可以找到噪声减少滤波器。最通用的滤波器是**图像：滤镜 > 通用 > 卷积矩阵**，它会弹出[图
    7-52](ch07s03.html#convolution_matrix_filter_dialog "图 7-52. 卷积矩阵滤波器对话框")所示的对话框。
- en: The MATRIX is an array of numbers with five rows and five columns. Initially
    only the center point contains a value different from zero, in this case 1\. This
    means every pixel is replaced by itself (i.e., it is unchanged).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 矩阵是一个由五行五列数字组成的数组。最初，只有中心点的值与零不同，在这个例子中为1。这意味着每个像素都被自身替代（即没有变化）。
- en: '![A noise attenuation matrix](httpatomoreillycomsourcenostarchimages1455036.png.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![噪声衰减矩阵](httpatomoreillycomsourcenostarchimages1455036.png.jpg)'
- en: Figure 7-53. A noise attenuation matrix
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-53. 噪声衰减矩阵
- en: You can modify matrix entries to create various effects. If you change one entry,
    pressing the ![](httpatomoreillycomsourcenostarchimages1453804.png.jpg) key takes
    you to the next one, and its content is selected. If you then key in a new value,
    it replaces the previous one. In [Figure 7-53](ch07s03.html#noise_attenuation_matrix
    "Figure 7-53. A noise attenuation matrix"), we set the eight entries that surround
    the center entry to 1, which means the new pixel is computed as the sum of itself
    and its eight immediate neighbors. To calculate the pixel value as the average
    of these nine values, set the DIVISOR to 9.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以修改矩阵条目以创建各种效果。如果您更改了某个条目，按下 ![](httpatomoreillycomsourcenostarchimages1453804.png.jpg)
    键将带您到下一个条目，并且其内容会被选中。如果您输入新的值，它将替换掉之前的值。在[图 7-53](ch07s03.html#noise_attenuation_matrix
    "图 7-53. 噪声衰减矩阵")中，我们将围绕中心条目的八个条目设置为1，这意味着新像素的计算值是它自己和它的八个邻近像素之和。要计算这九个值的平均像素值，请将除数设置为9。
- en: 'As the preview shows, this filter reduces the noise and smooths the image.
    [Figure 7-54](ch07s03.html#after_applying_an_averaging_filter_to_fi "Figure 7-54. After
    applying an averaging filter to Figure 7-49") shows the result on the image from
    [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "Figure 7-49. Noise
    caused by too few image sensors"). The Convolution Matrix filter is easy to use,
    but be warned: The resulting image is blurred. Because its matrix has five rows
    and five columns, you could define a larger filter by adding the four points in
    the middle of the matrix sides. The DIVISOR would then be 13\. The neighboring
    pixels used by the filter should be evenly spaced around the central target pixel.'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如预览所示，这个滤波器减少了噪声并平滑了图像。[图 7-54](ch07s03.html#after_applying_an_averaging_filter_to_fi
    "图 7-54. 在图 7-49 上应用均值滤波后")展示了应用滤波后的[图 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors
    "图 7-49. 由于图像传感器过少造成的噪声")效果。卷积矩阵滤波器易于使用，但要注意：结果图像会变得模糊。由于矩阵包含五行五列，您可以通过在矩阵四个边中添加中间的四个点来定义一个更大的滤波器。此时，除数（DIVISOR）将变为13。滤波器使用的邻近像素应均匀分布在中心目标像素周围。
- en: You can use the same filter with different values in the matrix. For example,
    [Figure 7-55](ch07s03.html#gaussian_filter_matrix "Figure 7-55. A Gaussian filter
    matrix") shows the values for a Gaussian blur, where the pixels closer to the
    central pixel are weighted more heavily. Of course, the DIVISOR must be adjusted
    appropriately. This filter blurs the image even more than the preceding one.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在矩阵中使用不同的值来应用相同的滤波器。例如，[图 7-55](ch07s03.html#gaussian_filter_matrix "图 7-55.
    高斯滤波矩阵")展示了高斯模糊的值，其中离中心像素更近的像素权重更大。当然，除数（DIVISOR）必须适当调整。这个滤波器会比前一个滤波器更强烈地模糊图像。
- en: '![After applying an averaging filter to](httpatomoreillycomsourcenostarchimages1455038.png.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![应用均值滤波后的效果](httpatomoreillycomsourcenostarchimages1455038.png.jpg)'
- en: Figure 7-54. After applying an averaging filter to [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors
    "Figure 7-49. Noise caused by too few image sensors")
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-54. 在[图 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "图 7-49.
    由于图像传感器过少造成的噪声")上应用均值滤波后
- en: '![A Gaussian filter matrix](httpatomoreillycomsourcenostarchimages1455040.png.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![高斯滤波矩阵](httpatomoreillycomsourcenostarchimages1455040.png.jpg)'
- en: Figure 7-55. A Gaussian filter matrix
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-55. 高斯滤波矩阵
- en: Comparing the Built-in Filters
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较内置滤波器
- en: 'Of the many filters in the **Image: Filters** menu, several are genuine preprocessing
    filters. For example, take the **Image: Filters > Blur** menu. The Blur entry
    is not very useful because you can’t change the settings. Focus Blur and Motion
    Blur are used for specialized effects. The most useful entries for preprocessing
    are the two Gaussian filters. [Figure 7-56](ch07s03.html#after_applying_an_iie_gaussian_blur_filt
    "Figure 7-56. After applying an IIE Gaussian Blur filter with a radius of 5 to
    Figure 7-49") to [Figure 7-58](ch07s03.html#after_applying_the_selective_gaussian_bl
    "Figure 7-58. After applying the Selective Gaussian Blur filter with a radius
    of 8 to Figure 7-49") show various results of using these filters on the image
    in [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "Figure 7-49. Noise
    caused by too few image sensors"). As you can see, the Selective Gaussian Blur
    filter worked best for this image.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在**图像：滤镜**菜单中的许多滤镜中，有一些是纯粹的预处理滤镜。例如，看看**图像：滤镜 > 模糊**菜单。模糊条目不太有用，因为你无法改变设置。焦点模糊和运动模糊用于特效处理。对于预处理来说，最有用的条目是两个高斯滤镜。[图7-56](ch07s03.html#after_applying_an_iie_gaussian_blur_filt
    "图7-56. 在图7-49上应用半径为5的IIE高斯模糊滤镜后")和[图7-58](ch07s03.html#after_applying_the_selective_gaussian_bl
    "图7-58. 在图7-49上应用半径为8的选择性高斯模糊滤镜后")展示了这些滤镜在[图7-49](ch07s03.html#noise_caused_by_too_few_image_sensors
    "图7-49. 由于图像传感器过少导致的噪点")图像上的不同效果。如你所见，选择性高斯模糊滤镜对该图像效果最佳。
- en: 'Another useful filter is **Image: Filters > Enhance > Despeckle**. The Despeckle
    filter is called a *median filter*. It doesn’t use the same method as the Convolution
    Matrix, although it relies on a matrix too. [Figure 7-59](ch07s03.html#despeckle_filter_dialog
    "Figure 7-59. The Despeckle filter dialog") shows its dialog, and [Figure 7-60](ch07s03.html#after_using_the_despeckle_filter_on_figu
    "Figure 7-60. After using the Despeckle filter on Figure 7-51") shows the result
    of applying the Despeckle filter to the image in [Figure 7-51](ch07s03.html#noise_due_to_photograph_scratching
    "Figure 7-51. Noise due to photograph scratching"). You could hide the remaining
    scratches by adjusting the parameters. As a matter of fact, simply checking the
    RECURSIVE checkbox, which repeats the filter’s last action, would work, but doing
    so would increase the blurring as well. Still, aesthetically, the result could
    be considered an improvement over the initial photograph.'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个有用的滤镜是**图像：滤镜 > 增强 > 去噪**。去噪滤镜被称为*中值滤镜*。它不像卷积矩阵那样使用相同的方法，尽管它也依赖于矩阵。[图7-59](ch07s03.html#despeckle_filter_dialog
    "图7-59. 去噪滤镜对话框")显示了它的对话框，[图7-60](ch07s03.html#after_using_the_despeckle_filter_on_figu
    "图7-60. 应用去噪滤镜后的效果，见图7-51")展示了将去噪滤镜应用于[图7-51](ch07s03.html#noise_due_to_photograph_scratching
    "图7-51. 由于照片刮擦导致的噪点")中的图像的结果。你可以通过调整参数来隐藏剩余的刮痕。事实上，简单地勾选递归（RECURSIVE）复选框，它会重复滤镜的最后操作，便能起效，但这样做也会增加模糊效果。不过，从美学角度来看，结果可能会被认为是比初始照片更有改善的效果。
- en: '![After applying an IIE Gaussian Blur filter with a radius of 5 to](httpatomoreillycomsourcenostarchimages1455042.png.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![应用了半径为5的IIE高斯模糊滤镜后的效果](httpatomoreillycomsourcenostarchimages1455042.png.jpg)'
- en: Figure 7-56. After applying an IIE Gaussian Blur filter with a radius of 5 to
    [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "Figure 7-49. Noise
    caused by too few image sensors")
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-56. 在[图7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "图7-49. 由于图像传感器过少导致的噪点")上应用半径为5的IIE高斯模糊滤镜后的效果
- en: '![After applying an RLE Gaussian Blur filter with a radius of 8 to](httpatomoreillycomsourcenostarchimages1455044.png.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![应用了半径为8的RLE高斯模糊滤镜后的效果](httpatomoreillycomsourcenostarchimages1455044.png.jpg)'
- en: Figure 7-57. After applying an RLE Gaussian Blur filter with a radius of 8 to
    [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "Figure 7-49. Noise
    caused by too few image sensors")
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-57. 在[图7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "图7-49. 由于图像传感器过少导致的噪点")上应用半径为8的RLE高斯模糊滤镜后的效果
- en: 'The preprocessing filters that we’ve tried so far all have the same drawback:
    They blur the image to some degree. The blurring is because, by averaging the
    values of neighboring pixels, these filters decrease the image quality at strong
    transitions, which delimit the various regions of the image. Sharpening, on the
    other hand, strengthens the transitions.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们尝试过的所有预处理滤镜都有一个共同的缺点：它们在一定程度上模糊了图像。模糊是因为这些滤镜通过平均邻近像素的值，在图像强烈过渡的地方降低了图像质量，这些过渡标定了图像的不同区域。而锐化则是加强这些过渡。
- en: '![After applying the Selective Gaussian Blur filter with a radius of 8 to](httpatomoreillycomsourcenostarchimages1455046.png.jpg)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![应用半径为 8 的选择性高斯模糊滤镜后的效果](httpatomoreillycomsourcenostarchimages1455046.png.jpg)'
- en: Figure 7-58. After applying the Selective Gaussian Blur filter with a radius
    of 8 to [Figure 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "Figure 7-49. Noise
    caused by too few image sensors")
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-58. 对[图 7-49](ch07s03.html#noise_caused_by_too_few_image_sensors "图 7-49.
    由于图像传感器数量过少造成的噪声")使用半径为 8 的选择性高斯模糊滤镜后的效果
- en: '![The Despeckle filter dialog](httpatomoreillycomsourcenostarchimages1455048.png.jpg)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![去斑滤镜对话框](httpatomoreillycomsourcenostarchimages1455048.png.jpg)'
- en: Figure 7-59. The Despeckle filter dialog
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-59. 去斑滤镜对话框
- en: 'Sharpening can be done by building a specific convolution matrix with a more
    complicated pattern than what you used before. You can also apply **Image: Filters
    > Enhance > NL Filter**, but choosing the correct parameters is challenging. The
    best sharpening filter by far is the familiar filter with the paradoxical name:
    **Image: Filters > Enhance > Unsharp Mask**. Its dialog is shown in [Figure 7-61](ch07s03.html#unsharp_mask_filter_dialog-id00080
    "Figure 7-61. The Unsharp Mask filter dialog").'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 锐化可以通过构建一个比之前使用的更复杂的卷积矩阵来完成。你也可以应用**图像：滤镜 > 增强 > NL 滤镜**，但选择正确的参数非常具有挑战性。到目前为止，最好的锐化滤镜是那个名字带有悖论的熟悉滤镜：**图像：滤镜
    > 增强 > 非锐化掩模**。其对话框如[图 7-61](ch07s03.html#unsharp_mask_filter_dialog-id00080 "图
    7-61. 非锐化掩模滤镜对话框")所示。
- en: '![After using the Despeckle filter on](httpatomoreillycomsourcenostarchimages1455050.png.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![对图像使用去斑滤镜后的效果](httpatomoreillycomsourcenostarchimages1455050.png.jpg)'
- en: Figure 7-60. After using the Despeckle filter on [Figure 7-51](ch07s03.html#noise_due_to_photograph_scratching
    "Figure 7-51. Noise due to photograph scratching")
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-60. 对[图 7-51](ch07s03.html#noise_due_to_photograph_scratching "图 7-51. 由于照片划痕造成的噪声")使用去斑滤镜后的效果
- en: '![The Unsharp Mask filter dialog](httpatomoreillycomsourcenostarchimages1455052.png.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![非锐化掩模滤镜对话框](httpatomoreillycomsourcenostarchimages1455052.png.jpg)'
- en: Figure 7-61. The Unsharp Mask filter dialog
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-61. 非锐化掩模滤镜对话框
- en: RADIUS sets the thickness of the image edges. AMOUNT sets the effect intensity
    of the mask. Keeping the amount value low (0.25 to 0.5) is generally best. If
    necessary, repeat the action two or more times. This is what we did with [Figure 7-48](ch07s03.html#noise_because_the_photographer_moved
    "Figure 7-48. Noise because the photographer moved") to get the result shown in
    [Figure 7-62](ch07s03.html#after_applying_unsharp_mask_to_figure_7d "Figure 7-62. After
    applying Unsharp Mask to Figure 7-48 twice").
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: RADIUS 设置图像边缘的厚度。AMOUNT 设置掩模的效果强度。通常保持 AMOUNT 值较低（0.25 到 0.5）最好。如有需要，可以重复操作两次或更多次。这就是我们在[图
    7-48](ch07s03.html#noise_because_the_photographer_moved "图 7-48. 由于摄影师移动而产生的噪声")中所做的，以得到[图
    7-62](ch07s03.html#after_applying_unsharp_mask_to_figure_7d "图 7-62. 将非锐化掩模应用于图
    7-48 两次后的结果")所示的效果。
- en: '![After applying Unsharp Mask to twice](httpatomoreillycomsourcenostarchimages1455054.png.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![应用非锐化掩模两次后的效果](httpatomoreillycomsourcenostarchimages1455054.png.jpg)'
- en: Figure 7-62. After applying Unsharp Mask to [Figure 7-48](ch07s03.html#noise_because_the_photographer_moved
    "Figure 7-48. Noise because the photographer moved") twice
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-62. 将非锐化掩模应用于[图 7-48](ch07s03.html#noise_because_the_photographer_moved
    "图 7-48. 由于摄影师移动而产生的噪声")两次后的结果
- en: '![The original photograph](httpatomoreillycomsourcenostarchimages1455056.png.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![原始照片](httpatomoreillycomsourcenostarchimages1455056.png.jpg)'
- en: Figure 7-63. The original photograph
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-63. 原始照片
- en: 7.4 Edge Detection
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7.4 边缘检测
- en: In most cases, major variations in intensity in an image correspond to edges
    of objects. You can often extract objects in an image by detecting these variations
    through a process called *segmentation*. In GIMP, you can do this using the *edge
    detection* tools.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数情况下，图像中强烈的强度变化对应于物体的边缘。你通常可以通过一种称为*分割*的过程来检测这些变化，从而提取图像中的物体。在 GIMP 中，你可以使用*边缘检测*工具来实现这一点。
- en: The Principles of Edge Detection
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 边缘检测原理
- en: Technically, the edges in an image are any areas where the intensity presents
    a strong local variation. Edge detection is a fundamental part of extracting information
    from an image during preprocessing. Often, the discovered edges are then fed to
    a shape recognition system. Shape recognition has applications in robotics, medical
    image analysis, video surveillance, and other fields.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，图像中的边缘是强烈局部变化的强度区域。边缘检测是图像预处理过程中提取信息的一个基本部分。通常，发现的边缘会被送入形状识别系统。形状识别在机器人技术、医学图像分析、视频监控等领域有广泛的应用。
- en: '![After a strong Gaussian blur](httpatomoreillycomsourcenostarchimages1455058.png.jpg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![经过强烈的高斯模糊](httpatomoreillycomsourcenostarchimages1455058.png.jpg)'
- en: Figure 7-64. After a strong Gaussian blur
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-64. 经过强烈的高斯模糊
- en: '![The Edge-Detect menu](httpatomoreillycomsourcenostarchimages1455060.png.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![边缘检测菜单](httpatomoreillycomsourcenostarchimages1455060.png.jpg)'
- en: Figure 7-65. The Edge-Detect menu
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-65. 边缘检测菜单
- en: 'We won’t go into the mathematical details of the various edge detection methods
    available. Instead, we’ll demonstrate several of them on one image—the photograph
    in [Figure 7-63](ch07s03.html#original_photograph-id00081 "Figure 7-63. The original
    photograph"). To make this image worthy of edge detection, we first apply a strong
    blur to it by applying **Image: Filters > Blur > Gaussian Blur**. The result is
    shown in [Figure 7-64](ch07s04.html#after_a_strong_gaussian_blur "Figure 7-64. After
    a strong Gaussian blur").'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会深入讨论各种边缘检测方法的数学细节。相反，我们将展示几种方法应用在一张图片上——[图 7-63](ch07s03.html#original_photograph-id00081
    "图 7-63. 原始照片")中的照片。为了使这张图片适合进行边缘检测，我们首先通过应用**图像：滤镜 > 模糊 > 高斯模糊**来进行强烈的模糊处理。结果显示在[图
    7-64](ch07s04.html#after_a_strong_gaussian_blur "图 7-64. 经过强烈的高斯模糊")中。
- en: Edge Detection Methods
  id: totrans-203
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 边缘检测方法
- en: 'The edge detection filters in GIMP are all found in the **Image: Filters >
    Edge-Detect** menu (see [Figure 7-65](ch07s04.html#edge-detect_menu "Figure 7-65. The
    Edge-Detect menu")). Here, we explore the various entries on this menu.'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: GIMP中的边缘检测滤镜都可以在**图像：滤镜 > 边缘检测**菜单中找到（参见[图 7-65](ch07s04.html#edge-detect_menu
    "图 7-65. 边缘检测菜单")）。在这里，我们将探索该菜单中的各种选项。
- en: '![The Difference of Gaussians dialog](httpatomoreillycomsourcenostarchimages1455062.png.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![高斯差异对话框](httpatomoreillycomsourcenostarchimages1455062.png.jpg)'
- en: Figure 7-66. The Difference of Gaussians dialog
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-66. 高斯差异对话框
- en: '![After Difference of Gaussians edge detection](httpatomoreillycomsourcenostarchimages1455064.png.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![高斯差异边缘检测后的结果](httpatomoreillycomsourcenostarchimages1455064.png.jpg)'
- en: Figure 7-67. After Difference of Gaussians edge detection
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-67. 高斯差异边缘检测后的结果
- en: 'Choosing **Image: Filters > Edge-Detect > Difference of Gaussians** brings
    up the dialog shown in [Figure 7-66](ch07s04.html#difference_of_gaussians_dialog
    "Figure 7-66. The Difference of Gaussians dialog"). Here, we adjusted the radius
    and suggest you do the same. We also unchecked the INVERT box. [Figure 7-67](ch07s04.html#after_difference_of_gaussians_edge_detec
    "Figure 7-67. After Difference of Gaussians edge detection") shows the result.
    Edge detection using the Difference of Gaussians filter worked rather poorly,
    at least for this image.'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 选择**图像：滤镜 > 边缘检测 > 高斯差异**会弹出[图 7-66](ch07s04.html#difference_of_gaussians_dialog
    "图 7-66. 高斯差异对话框")中所示的对话框。在这里，我们调整了半径，并建议你也这么做。我们还取消了选中“反转”框。[图 7-67](ch07s04.html#after_difference_of_gaussians_edge_detec
    "图 7-67. 高斯差异边缘检测后的结果")显示了结果。使用高斯差异滤镜的边缘检测效果相当差，至少在这张图片上是这样。
- en: '![The Neon dialog](httpatomoreillycomsourcenostarchimages1455066.png.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![霓虹对话框](httpatomoreillycomsourcenostarchimages1455066.png.jpg)'
- en: Figure 7-68. The Neon dialog
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-68. 霓虹对话框
- en: '![After Neon edge detection](httpatomoreillycomsourcenostarchimages1455068.png.jpg)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![经过霓虹边缘检测](httpatomoreillycomsourcenostarchimages1455068.png.jpg)'
- en: Figure 7-69. After Neon edge detection
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-69. 经过霓虹边缘检测后的效果
- en: '**Image: Filters > Edge-Detect > Neon** works better for this image. [Figure 7-68](ch07s04.html#neon_dialog
    "Figure 7-68. The Neon dialog") shows this filter’s dialog with the settings we
    used. See the result in [Figure 7-69](ch07s04.html#after_neon_edge_detection "Figure 7-69. After
    Neon edge detection"). Note that the important features of the image are much
    more visible than with the previous filter.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '**图像：滤镜 > 边缘检测 > 霓虹**对这张图片效果更好。[图 7-68](ch07s04.html#neon_dialog "图 7-68. 霓虹对话框")显示了我们使用的设置下该滤镜的对话框。参见[图
    7-69](ch07s04.html#after_neon_edge_detection "图 7-69. 经过霓虹边缘检测后的效果")中的结果。请注意，与之前的滤镜相比，图片的关键特征更加明显。'
- en: 'The **Image: Filters > Edge-Detect > Laplace** filter is a bit disconcerting:
    When you apply it to this image, no dialog pops up, and the result is completely
    black. But after applying **Image: Colors > Auto > Stretch Contrast** to this
    image, you get the result in [Figure 7-70](ch07s04.html#after_laplace_edge_detection_and_applyin
    "Figure 7-70. After Laplace edge detection and applying Stretch Contrast"). Not
    great, but better than nothing.'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '**图像：滤镜 > 边缘检测 > 拉普拉斯**滤镜有点让人困惑：当你应用它到这张图片时，什么对话框都不会弹出，结果是完全黑色的。但在应用**图像：颜色
    > 自动 > 拉伸对比度**之后，你可以得到[图 7-70](ch07s04.html#after_laplace_edge_detection_and_applyin
    "图 7-70. 拉普拉斯边缘检测和应用拉伸对比度之后")中的结果。效果不算好，但总比没有好。'
- en: '![After Laplace edge detection and applying Stretch Contrast](httpatomoreillycomsourcenostarchimages1455070.png.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![差分拉普拉斯边缘检测后并应用拉伸对比度](httpatomoreillycomsourcenostarchimages1455070.png.jpg)'
- en: Figure 7-70. After Laplace edge detection and applying Stretch Contrast
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-70. 拉普拉斯边缘检测后并应用拉伸对比度
- en: '![The Edge dialog](httpatomoreillycomsourcenostarchimages1455072.png.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![边缘对话框](httpatomoreillycomsourcenostarchimages1455072.png.jpg)'
- en: Figure 7-71. The Edge dialog
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-71. 边缘对话框
- en: 'Finally, the most handy tool is **Image: Filters > Edge-Detect > Edge**, which
    contains six different filters (algorithms). The dialog, shown in [Figure 7-71](ch07s04.html#edge_dialog
    "Figure 7-71. The Edge dialog"), is simple. The only setting is the AMOUNT. A
    low amount value results in a black image with thin edges; a high amount value
    leads to thicker edges and multicolored dark regions.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 最方便的工具是 **图像：滤镜 > 边缘检测 > 边缘**，它包含六种不同的滤镜（算法）。该对话框如 [图 7-71](ch07s04.html#edge_dialog
    "图 7-71. 边缘对话框") 所示，操作简单。唯一的设置项是 AMOUNT。较低的 AMOUNT 值会导致黑色图像和细边缘；较高的 AMOUNT 值会产生较粗的边缘和多色的暗区。
- en: '![After Sobel edge detection](httpatomoreillycomsourcenostarchimages1455074.png.jpg)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![索贝尔边缘检测后](httpatomoreillycomsourcenostarchimages1455074.png.jpg)'
- en: Figure 7-72. After Sobel edge detection
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-72. 索贝尔边缘检测后
- en: '![After Prewitt compass edge detection](httpatomoreillycomsourcenostarchimages1455076.png.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![预维特指南针边缘检测后](httpatomoreillycomsourcenostarchimages1455076.png.jpg)'
- en: Figure 7-73. After Prewitt compass edge detection
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-73. 预维特指南针边缘检测后
- en: '[Figure 7-72](ch07s04.html#after_sobel_edge_detection "Figure 7-72. After Sobel
    edge detection") shows the result of applying Sobel edge detection with an AMOUNT
    of 6.5\. [Figure 7-73](ch07s04.html#after_prewitt_compass_edge_detection "Figure 7-73. After
    Prewitt compass edge detection") shows the result of applying Prewitt compass
    edge detection with an AMOUNT of 10\. [Figure 7-74](ch07s04.html#after_gradient_edge_detection
    "Figure 7-74. After Gradient edge detection") shows the result of applying Gradient
    edge detection with the same AMOUNT.'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-72](ch07s04.html#after_sobel_edge_detection "图 7-72. 索贝尔边缘检测后") 显示了使用索贝尔边缘检测，AMOUNT
    设置为 6.5 的结果。[图 7-73](ch07s04.html#after_prewitt_compass_edge_detection "图 7-73.
    预维特指南针边缘检测后") 显示了使用预维特指南针边缘检测，AMOUNT 设置为 10 的结果。[图 7-74](ch07s04.html#after_gradient_edge_detection
    "图 7-74. 梯度边缘检测后") 显示了使用梯度边缘检测，AMOUNT 设置相同的结果。'
- en: 'Stretching the contrast of an image you’ve used edge detection on may be useful.
    For example, we got the image shown in [Figure 7-75](ch07s04.html#after_differential_edge_detection_and_ap
    "Figure 7-75. After Differential edge detection and applying Stretch Contrast")
    by using Differential edge detection with an AMOUNT of 2.5 and then applying **Image:
    Colors > Auto > Stretch Contrast**.'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 对经过边缘检测处理的图像进行对比度拉伸可能是有用的。例如，我们通过使用差分边缘检测，AMOUNT 设置为 2.5，并应用 **图像：颜色 > 自动 >
    拉伸对比度**，得到如 [图 7-75](ch07s04.html#after_differential_edge_detection_and_ap "图
    7-75. 差分边缘检测后并应用拉伸对比度") 所示的图像。
- en: '![After Gradient edge detection](httpatomoreillycomsourcenostarchimages1455078.png.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![梯度边缘检测后](httpatomoreillycomsourcenostarchimages1455078.png.jpg)'
- en: Figure 7-74. After Gradient edge detection
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-74. 梯度边缘检测后
- en: '![After Differential edge detection and applying Stretch Contrast](httpatomoreillycomsourcenostarchimages1455080.png.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![差分边缘检测后并应用拉伸对比度](httpatomoreillycomsourcenostarchimages1455080.png.jpg)'
- en: Figure 7-75. After Differential edge detection and applying Stretch Contrast
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-75. 差分边缘检测后并应用拉伸对比度
- en: You can use an edge detection filter to decompose the image into more readable
    objects. We show this in two different examples.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用边缘检测滤镜将图像分解成更易读的对象。我们将在两个不同的示例中展示这一点。
- en: '![Edge detection combined with the original image ()](httpatomoreillycomsourcenostarchimages1455082.png.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![边缘检测与原始图像结合（）](httpatomoreillycomsourcenostarchimages1455082.png.jpg)'
- en: Figure 7-76. Edge detection combined with the original image ([Figure 7-63](ch07s03.html#original_photograph-id00081
    "Figure 7-63. The original photograph"))
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-76. 边缘检测与原始图像结合（[图 7-63](ch07s03.html#original_photograph-id00081 "图 7-63.
    原始照片")）
- en: 'To create [Figure 7-76](ch07s04.html#edge_detection_combined_with_the_origina
    "Figure 7-76. Edge detection combined with the original image (Figure 7-63)")
    from [Figure 7-63](ch07s03.html#original_photograph-id00081 "Figure 7-63. The
    original photograph"), do the following:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 要从 [图 7-63](ch07s03.html#original_photograph-id00081 "图 7-63. 原始照片") 创建 [图 7-76](ch07s04.html#edge_detection_combined_with_the_origina
    "图 7-76. 边缘检测与原始图像结合（图 7-63）")，请执行以下操作：
- en: Duplicate the layer.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制图层。
- en: 'Add an Alpha channel to the top layer (**Layers: right-click > Add Alpha Channel**).'
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给顶层图层添加 Alpha 通道 (**图层：右键点击 > 添加 Alpha 通道**)。
- en: 'Apply an edge detection filter to this layer (in this case, **Image: Filters
    > Edge-Detect > Edge > Sobel**).'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对该图层应用边缘检测滤镜（在此案例中，**图像：滤镜 > 边缘检测 > 边缘 > Sobel**）。
- en: Choose the Select by Color tool (![](httpatomoreillycomsourcenostarchimages1453942.png.jpg))
    and click a black area in the image.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择颜色选择工具 (![](httpatomoreillycomsourcenostarchimages1453942.png.jpg)) 并点击图像中的黑色区域。
- en: Cut the selection (![](httpatomoreillycomsourcenostarchimages1454122.png.jpg)).
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 剪切选择区域 (![](httpatomoreillycomsourcenostarchimages1454122.png.jpg))。
- en: Hide the selection (![](httpatomoreillycomsourcenostarchimages1453950.png.jpg)).
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 隐藏选择区域 (![](httpatomoreillycomsourcenostarchimages1453950.png.jpg))。
- en: Another possible use for edge detection is demonstrated in [Figure 7-77](ch07s04.html#merging_edge_detection_with_the_original
    "Figure 7-77. Merging edge detection with the original image (Figure 7-22)").
    Begin with the image from [Figure 7-22](ch07s02.html#micrograph_of_human_blood
    "Figure 7-22. A micrograph of human blood"). Duplicate the layer and apply the
    edge detection operator Sobel, as we did in the previous example. Finally, we
    experiment with the various merging modes in the Layers window to find the one
    that suits our needs. We choose Screen.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 边缘检测的另一种可能用途在 [图 7-77](ch07s04.html#merging_edge_detection_with_the_original
    "图 7-77. 将边缘检测与原始图像合并（图 7-22）") 中有所展示。从 [图 7-22](ch07s02.html#micrograph_of_human_blood
    "图 7-22. 人类血液的显微照片") 开始，复制图层并应用边缘检测算子 Sobel，就像我们在前面的例子中做的那样。最后，我们在图层窗口中尝试各种合并模式，找到最适合我们需求的那个。我们选择屏幕模式。
- en: '![Merging edge detection with the original image ()](httpatomoreillycomsourcenostarchimages1455084.png.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![将边缘检测与原始图像合并 ()](httpatomoreillycomsourcenostarchimages1455084.png.jpg)'
- en: Figure 7-77. Merging edge detection with the original image ([Figure 7-22](ch07s02.html#micrograph_of_human_blood
    "Figure 7-22. A micrograph of human blood"))
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-77. 将边缘检测与原始图像合并 ([图 7-22](ch07s02.html#micrograph_of_human_blood "图 7-22.
    人类血液的显微照片"))
- en: 7.5 Exercises
  id: totrans-244
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7.5 练习
- en: For these exercises, feel free to utilize the images on this book’s website
    (*[http://the-book-ofgimp.blogspot.com](http://the-book-ofgimp.blogspot.com)*).
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这些练习，可以随意使用本书网站上的图像 (*[http://the-book-ofgimp.blogspot.com](http://the-book-ofgimp.blogspot.com)*)。
- en: '**Exercise 7.1.** One simple tool we did not use in this chapter is **Image:
    Colors > Threshold**. Try using it on a poor-quality image. Experiment with the
    placement of the cursors. Try to remove noise and to emphasize the important parts
    of the image.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 7.1.** 在本章中我们没有使用的一个简单工具是 **图像：颜色 > 阈值**。尝试在一张低质量的图像上使用它。实验光标的位置，尝试去除噪点并突出图像中的重要部分。'
- en: '**Exercise 7.2.** Because the Threshold tool generates a black and white image,
    combine its result with the initial image in a different layer. Try various merging
    modes until you feel that you’ve increased the amount of information that a researcher
    could extract from your image.'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 7.2.** 由于阈值工具生成的是黑白图像，将其结果与初始图像放在不同的图层中合并。尝试各种合并模式，直到你觉得已经增加了研究人员从图像中提取信息的量。'
- en: '**Exercise 7.3.** Try using the image generated by the Threshold tool to fill
    a layer mask added to the original image. Do this again, but this time invert
    the threshold image.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 7.3.** 尝试使用阈值工具生成的图像填充添加到原始图像中的图层蒙版。再做一次，但这次反转阈值图像。'
- en: '**Exercise 7.4.** Find an image that’s difficult to interpret, either one that
    we’ve provided or one of your own. Try various methods for improving the edges
    and making the image’s information more readable. Use a combination of edge detection
    tools, layer merging modes, and other tools that we demonstrated in this chapter.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习 7.4.** 找到一张难以解读的图像，可以是我们提供的图像，也可以是你自己的图像。尝试使用不同的方法来改善边缘，使图像信息更易于读取。使用边缘检测工具、图层合并模式以及本章中演示的其他工具的组合。'
