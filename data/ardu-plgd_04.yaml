- en: '**3'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**3'
- en: THE REGULATED POWER SUPPLY**
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**可调稳压电源**'
- en: '![image](../images/common-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/common-01.jpg)'
- en: Whether you use a standard bench power supply or run your Arduino off the USB
    port of your computer, sooner or later you’re going to need a stand-alone, regulated
    power supply capable of providing a variable voltage. This project shows you how
    to make exactly that, using only a handful of inexpensive parts. A variable power
    supply is one of the most frequently used tools in many workshops. This one is
    easy and fun to build, and you will find that you end up using it over and over
    again.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是使用标准的台式电源，还是通过计算机的USB端口为Arduino供电，迟早你都会需要一个独立的、可调电压的稳压电源。这个项目将教你如何制作一个，只需要少量的廉价零件。可调电源是许多工作坊中最常用的工具之一。这个项目既简单又有趣，你会发现你会一遍又一遍地使用它。
- en: When set for 5V or 3.3V, the Regulated Power Supply can power most Arduino projects
    with ease. You can also use it to power some ancillary piece of equipment, to
    vary a particular voltage in a system while the main power is fixed, or simply
    to test a lamp circuit, LED, motor, or other device.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 当设定为5V或3.3V时，可调稳压电源可以轻松为大多数Arduino项目供电。你也可以用它为一些附属设备供电，在系统中调整特定电压，而主电源保持不变，或者仅仅用来测试灯电路、LED、电机或其他设备。
- en: The circuit uses the extremely versatile LM317 regulator chip. If you ever find
    yourself in need of a precision voltage regulator with some unusual demands, look
    up the LM317 on the web. The JavaScript Electronic Notebook has a particularly
    good article titled “LM 317 Voltage Regulator Designer” by Martin E. Meserve,
    which can be found at *[http://www.k7mem.com/Electronic_Notebook/power_supplies/lm317.html](http://www.k7mem.com/Electronic_Notebook/power_supplies/lm317.html)*.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 电路使用了极其通用的LM317调节器芯片。如果你需要一款具有特殊要求的精密电压调节器，可以在网上查找LM317。JavaScript电子笔记本上有一篇特别好的文章，标题为“LM
    317 电压调节器设计”，作者是Martin E. Meserve，文章地址是*[http://www.k7mem.com/Electronic_Notebook/power_supplies/lm317.html](http://www.k7mem.com/Electronic_Notebook/power_supplies/lm317.html)*。
- en: '**Required Tools**'
  id: totrans-6
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**所需工具**'
- en: Soldering iron and solder
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 焊接铁和焊锡
- en: Drill and drill bits (3/8 and 1/4 inches)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 电钻和钻头（3/8英寸和1/4英寸）
- en: Hacksaw or keyhole saw (nibbler or other)
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 锯条或钥匙孔锯（剪切工具或其他）
- en: Phillips head screwdriver
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 一个十字螺丝刀
- en: (Optional) Tapered reamer set
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: （可选）锥形扩孔套件
- en: (Optional) Crimping tool
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: （可选）压接工具
- en: '**Parts List**'
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**零件清单**'
- en: 'The Regulated Power Supply is capable of providing an adjustable voltage from
    1.25V to about 12V at up to 1.5 A, depending on the fundamental power you use.
    It uses the LM317 single-chip voltage regulator to set the voltage. To build this
    project, you will need the following parts:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 可调稳压电源能够提供从1.25V到大约12V的可调电压，最大电流可达1.5A，具体取决于你使用的基础电源。它使用LM317单芯片电压调节器来设置电压。要构建这个项目，你需要以下零件：
- en: One Arduino Pro Mini or clone
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 一个Arduino Pro Mini或克隆板
- en: One LM317 voltage regulator
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 一个LM317电压调节器
- en: One LM7805 voltage regulator
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一个LM7805电压调节器
- en: Two 2.2-ohm, 5 W resistors
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 两个2.2欧，5瓦电阻
- en: Three 10-kilohm, 1/8 W resistors
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 三个10千欧，1/8瓦电阻
- en: Three 6.8-kilohm, 1/8 W resistors
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 三个6.8千欧，1/8瓦电阻
- en: One 68 μF tantalum capacitor
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 一个68 μF钽电容
- en: Three 0.1 μF ceramic capacitors
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 三个0.1 μF陶瓷电容
- en: One 1 μF tantalum capacitor
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 一个1 μF钽电容
- en: One 16×2 LCD
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一个16×2 LCD显示屏
- en: One I²C adapter, if not included with the LCD
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一个I²C适配器（如果LCD未附带）
- en: Four 4-40 screws
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 四个4-40螺丝
- en: Eight 4-40 nuts
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 八个4-40螺母
- en: One 5 mm LED (for power indicator)
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一个5毫米LED（用于电源指示）
- en: One SPST switch
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 一个单极单刀开关（SPST）
- en: One 470-ohm, 1/8 W resistor
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 一个470欧，1/8瓦电阻
- en: One 10-kilohm, 1/8 W potentiometer
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 一个10千欧，1/8瓦电位器
- en: One Hammond panel/case (#1456CE3WHBU)
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一个Hammond面板/外壳（#1456CE3WHBU）
- en: Two banana plug jacks
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 两个香蕉插头插座
- en: One 3.5 mm jack
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 一个3.5毫米插孔
- en: One 12V 2 A AC adapter
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 一个12V 2A交流适配器
- en: One power adapter jack
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 一个电源适配器插孔
- en: One PCB/shield
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一个PCB/屏蔽板
- en: Six 1×4 headers
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 六个1×4接头
- en: Four 1×4 housings
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 四个1×4接头外壳
- en: Four 1×2 headers
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 四个1×2接头
- en: One heavy-duty TO-220 heat sink
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 一个重型TO-220散热器
- en: One medium-duty TO-220 heat sink
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 一个中等功率的TO-220散热器
- en: Four male crimp connectors
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 四个男性压接连接器
- en: Four female crimp connectors
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 四个女性压接连接器
- en: 30-gauge hookup wire
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 30号连接线
- en: One knob to cover the potentiometer shaft
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 一个旋钮用于覆盖电位器轴
- en: Double-sided foam tape
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 双面泡沫胶带
- en: 'A note on heat-sink selection: there are a wide variety of heat sinks available.
    The one pictured in [Figure 3-2](ch03.xhtml#ch03fig2) is the Futurlec TO220ST,
    which works okay but runs pretty warm as you approach the 1 A range. A larger
    one that will still fit in an enclosure may be better. Futurlec TO220SMAL, the
    heat sink for the LM7805, is sufficient for the job.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 关于散热器选择的说明：市面上有各种各样的散热器可供选择。图[Figure 3-2](ch03.xhtml#ch03fig2)中展示的是Futurlec
    TO220ST型号，虽然它能正常工作，但当电流接近1A时会比较热。一个更大的散热器，如果能放入外壳中，可能会更好。Futurlec TO220SMAL是LM7805的散热器，足以完成任务。
- en: '**Downloads**'
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**下载**'
- en: 'You will find the following files in this book’s online resources to help you
    complete this project:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 你将在本书的在线资源中找到以下文件，帮助你完成本项目：
- en: '**Templates** *PowerSupplyFront.dxf, PowerSupplyFrontBottom.dxf*'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**模板** *PowerSupplyFront.dxf, PowerSupplyFrontBottom.dxf*'
- en: '**Sketch** *PowerSupply.ino*'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '**草图** *PowerSupply.ino*'
- en: '**Shield file** *VoltageRegulator.pcb*'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**扩展板文件** *VoltageRegulator.pcb*'
- en: '**WHAT THE REGULATED POWER SUPPLY IS AND ISN’T**'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**稳压电源的定义与非定义**'
- en: The power supply in this project is not intended to replace a regular bench
    power supply. It does not provide any current limiting and is rated up to 1.5
    A, due to the current capacity of the LM317\. However, for a wide variety of applications—including
    all of the projects in this book—it works very well. If you’re new to Arduino,
    it will provide a solid power supply and save you a lot of batteries, if that’s
    how you’ve been powering your projects. If you already have a full-sized bench
    supply, this project will be indispensable as a second supply. The Regulated Power
    Supply can be used for several projects in this book that require a secondary
    power supply.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目中的电源不打算替代常规的实验室电源。它不提供任何电流限制，额定电流为1.5A，因LM317的电流承载能力。然而，针对各种应用——包括本书中的所有项目——它表现得非常好。如果你是Arduino新手，它将为你提供稳定的电源，并节省你大量的电池费用（如果你一直使用电池供电的话）。如果你已经拥有一台完整的实验室电源，这个项目将作为第二个电源变得不可或缺。该稳压电源可用于本书中需要辅助电源的多个项目。
- en: I have used the Regulated Power Supply in other applications, and at the end
    of this project, I’ll illustrate a more simplified version that can be used as
    a remote supply. There are times when you just don’t have the proper voltage supply
    for a project, and this build fits the bill.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经在其他应用中使用过该稳压电源，并且在本项目的最后，我将展示一个简化版本，可以作为远程电源使用。有时你可能没有适合某个项目的电压供应，而这个设计正好满足需求。
- en: '**A Flexible Voltage Regulator Circuit**'
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**一个灵活的电压稳压器电路**'
- en: The basic LM317 regulator circuit in [Figure 3-1](ch03.xhtml#ch03fig1) is the
    heart of this voltage regulator. Though it is relatively rudimentary, the chip’s
    simplicity belies what a powerful and versatile tool it can be.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图[Figure 3-1](ch03.xhtml#ch03fig1)中的基础LM317稳压器电路是该电源稳压器的核心。尽管它相对简单，但该芯片的简洁掩盖了它强大且多用途的特性。
- en: '![image](../images/f03-01.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-01.jpg)'
- en: '*Figure 3-1: This is the schematic diagram for the regulator component of the
    Regulated Power Supply. The complete schematic with the display is shown in [Figure
    3-4](ch03.xhtml#ch03fig4)*.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-1：这是稳压电源稳压器组件的原理图，带显示器的完整原理图见[Figure 3-4](ch03.xhtml#ch03fig4)*。'
- en: I have used some variation of this circuit for many applications, from a stand-alone
    variable supply to an integrated part of a larger system, always with good results.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经在许多应用中使用过这个电路的变种，从独立的可调电源到更大系统的一部分，总是取得了良好的结果。
- en: In the shop, I sometimes use kind of a “hair-wired” version, shown in [Figure
    3-2](ch03.xhtml#ch03fig2) (left), for testing LEDs and controlling things like
    motor speed and lamp intensity. I’ve also used a breadboard version, shown in
    [Figure 3-2](ch03.xhtml#ch03fig2) (right), to implement the regulator circuit.
    In both cases, I used a trimmer potentiometer, which requires an alignment tool
    or screwdriver to make adjustments.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在商店里，我有时使用一种“电线连接”版本，如图[Figure 3-2](ch03.xhtml#ch03fig2)（左侧）所示，用于测试LED和控制诸如电机速度与灯光强度等设备。我还使用过面包板版本，如图[Figure
    3-2](ch03.xhtml#ch03fig2)（右侧）所示，用于实现稳压器电路。在这两种情况下，我都使用了一个调节电位器，需要调节工具或螺丝刀来进行调整。
- en: '![image](../images/f03-02.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-02.jpg)'
- en: '*Figure 3-2: The “hair-wired” version of the voltage regulator circuit with
    a heat sink screwed to the LM317 (left) and a breadboard version of the regulator
    (right). I used this in an application with minimal power requirements and thus
    did not include the heat sink*.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-2：电压调节器电路的“线搭线”版本，LM317上安装了散热片（左侧）和电压调节器的面包板版本（右侧）。我在一个功率需求较低的应用中使用了这个电路，因此没有加装散热片*。'
- en: While those regulator circuits worked, one reason for using the more refined
    Regulated Power Supply format in [Figure 3-1](ch03.xhtml#ch03fig1) was to eliminate
    the awkward trimmer potentiometer and instead use a standard 270-degree potentiometer
    and knob so that I could make adjustments quickly, easily, and repeatedly. But
    the main reason I built it was to have a secondary variable-voltage power supply
    with digital readout readily available on the bench.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些调节器电路有效，但使用[图3-1](ch03.xhtml#ch03fig1)中更精细的稳压电源格式的一个原因是为了消除笨重的调节电位器，并改用标准的270度电位器和旋钮，这样我可以快速、轻松、反复地进行调整。但我构建它的主要原因是希望在工作台上方便地拥有一个具有数字显示的二次可调电压电源。
- en: '**How the Circuit Works**'
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**电路如何工作**'
- en: The circuit for this project is not overly complex. In essence, it measures
    the voltage at the output of the LM317 regulator using the onboard analog-to-digital
    converter (ADC) and compares it to an internal reference voltage. The result is
    sent to the LCD screen. However, the Arduino Pro Mini 5V version can accept a
    maximum of only 5V at the analog inputs. We therefore use a *voltage divider*
    to make sure that the voltage at the analog input pin doesn’t exceed 5V. (Make
    sure voltage supplied to the LM317 is no greater than 12V.)
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目的电路并不复杂。从本质上讲，它通过板载的模拟-数字转换器（ADC）测量LM317调节器输出端的电压，并将其与内部参考电压进行比较。结果会发送到LCD屏幕。然而，Arduino
    Pro Mini 5V版的模拟输入端最大只能接受5V。因此，我们使用了一个*电压分压器*来确保模拟输入引脚上的电压不会超过5V。（确保供给LM317的电压不大于12V。）
- en: In this case, a voltage divider comprises two resistors connected in series,
    straddling the output of the LM317 and the ground rail of the breadboard (see
    the schematic in [Figure 3-4](ch03.xhtml#ch03fig4)). The voltage coming from the
    LM317 gets divided across the two resistors, R2 and R3\. As you will note in the
    sketch, converting from the divided voltage back to the original levels for the
    display is simply a matter of reversing the arithmetic.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，电压分压器由两个串联的电阻组成，它们跨接在LM317的输出端和面包板的接地轨之间（参见[图3-4](ch03.xhtml#ch03fig4)中的示意图）。来自LM317的电压在R2和R3这两个电阻之间分配。如你在草图中所见，将分压后的电压转换回显示的原始电平，只需反转算术运算即可。
- en: 'As shown in the schematic in [Figure 3-4](ch03.xhtml#ch03fig4), the output
    of the LM317 connects to both the R2-R3 voltage divider and to resistor R1\. Together,
    resistor R1 in parallel with R9 and the load, or whatever you want to power with
    the power supply, can be seen as another voltage divider. The R1-R9 voltage divider
    has a resistance of only 1.1 ohms, so the voltage drop across it is going to be
    relatively small. According to Ohm’s law (*I* = *V*/*R*) the voltage across R1
    and R9 is going to be 1.65V for a maximum current drain of 1.5 A (the maximum
    supported by the regulator IC): 1.5 A = 1.65V/1.1 Ω.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图3-4](ch03.xhtml#ch03fig4)中的示意图所示，LM317的输出端连接到R2-R3电压分压器以及电阻R1。R1与R9和负载并联，或者说与任何你希望用电源供电的设备，并可以视为另一个电压分压器。R1-R9电压分压器的电阻仅为1.1欧姆，因此其电压降相对较小。根据欧姆定律（*I*
    = *V*/*R*），R1和R9上的电压将在最大电流为1.5A时降至1.65V（这是该调节器IC所支持的最大电流）：1.5A = 1.65V/1.1Ω。
- en: This means that when the LM317 provides about 12V and the load draws 1.5 A,
    there will be a 1.65V voltage drop across R1 and R9, leaving 10.45V at the power
    supply’s output.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着当LM317提供约12V且负载电流为1.5A时，R1和R9上的电压降为1.65V，电源输出端剩余的电压为10.45V。
- en: Looking at the schematic in [Figure 3-4](ch03.xhtml#ch03fig4), we are comparing
    the voltage at analog inputs A0 and A2 of the Pro Mini. If you use the same values
    for the voltage divider for A0 and A1, you can eliminate one of the sets of resistors
    and simply connect A0 to A1.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 看[图3-4](ch03.xhtml#ch03fig4)中的示意图，我们正在比较Pro Mini的模拟输入端A0和A2上的电压。如果你为A0和A1使用相同的电压分压器电阻值，你可以省略其中一组电阻，直接将A0连接到A1。
- en: '**VOLTAGE DIVIDER RESISTOR VALUES**'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '**电压分压器电阻值**'
- en: 'The values of the resistors needed to achieve a certain voltage are determined
    using this formula:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 实现特定电压所需的电阻值是通过以下公式确定的：
- en: '![image](../images/e0074-01.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/e0074-01.jpg)'
- en: The schematic of a typical voltage divider circuit is shown in [Figure 3-3](ch03.xhtml#ch03fig3).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 一个典型的电压分压电路的电路图如[图3-3](ch03.xhtml#ch03fig3)所示。
- en: '![image](../images/f03-03.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-03.jpg)'
- en: '*Figure 3-3: A typical voltage divider circuit*'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-3：典型的电压分压电路*'
- en: You can do the algebra if you’d like, but it’s easiest to use an online calculator,
    such as the one at *[http://www.daycounter.com/Calculators/VoltageDivider-Calculator.phtml](http://www.daycounter.com/Calculators/VoltageDivider-Calculator.phtml)*.
    In this project, the objective is to achieve an output of around 5V. We’ll start
    with a 12V input and a 10-kilohm resistor, represented by R1 in the formula and
    marked R2 in the schematic. Fill in the calculator fields with this information,
    and the formula will give you a resistor value of 7.1-kilohm for R2 in the schematic
    and R1 in the formula. The closest standard resistor value is 6.8 kilohm, so the
    project uses that along with the 10-kilohm resistor in its voltage divider.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你愿意，可以做一些代数计算，但最简单的方式是使用在线计算器，比如* [http://www.daycounter.com/Calculators/VoltageDivider-Calculator.phtml](http://www.daycounter.com/Calculators/VoltageDivider-Calculator.phtml)*
    上的那个。在这个项目中，目标是实现大约5V的输出。我们从12V的输入和一个10千欧的电阻开始，在公式中表示为R1，在电路图中标记为R2。将这些信息填入计算器，计算公式会给出电路图中的R2和公式中的R1电阻值为7.1千欧。最接近的标准电阻值是6.8千欧，所以该项目使用6.8千欧的电阻和10千欧的电阻来构成电压分压器。
- en: But why start with a 10-kilohm resistor? The first reason is to avoid drawing
    too much current. Even if the entire 12V dropped across the 10-kilohm resistor,
    it would result only in a nominal drain of 1.2 mA. Second, I have a lot of 10-kilohm
    resistors in the parts bin, and I am sure you do, too.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，为什么要从一个10千欧的电阻开始呢？第一个原因是为了避免消耗过多电流。即使整个12V压降通过10千欧电阻，它也只会导致1.2毫安的名义电流消耗。第二，我在零件箱里有很多10千欧的电阻，我敢肯定你也有。
- en: I use three sets of voltage dividers in this circuit. The first looks at the
    voltage at the output of the regulator, which is ultimately displayed on the LCD.
    The other two divide the voltage in front of and behind the voltage-dropping resistor
    so that the amperage can be measured according to the formula *I* = *V*/*R*, where
    *V* is the voltage drop across resistors R1 and R9, and R is the value of those
    two resistors combined. Could I have eliminated one set of voltage dividers? Yes,
    by joining A0 and A1 together. I thought, however, that I might want to change
    those values at some point to increase the accuracy of the ammeter by bringing
    the value closer to the Arduino reference voltage, so I did not join them in my
    version of the project.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个电路中，我使用了三组电压分压器。第一组用于测量稳压器输出端的电压，最终显示在LCD上。其他两组则分别在电压下降电阻的前后分压，以便根据公式*I*
    = *V*/*R*测量电流，其中*V*是电阻R1和R9之间的电压降，R是这两个电阻的总值。我是否可以去掉一组电压分压器？是的，通过将A0和A1连接起来。然而，我认为我可能会在某个时候改变这些值，以通过将其值接近Arduino的参考电压来提高安培计的精度，因此我在项目中没有将它们连接。
- en: '**The Schematic**'
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**电路图**'
- en: While I wanted the Regulated Power Supply to be relatively robust, I didn’t
    want it to be overly complex or hard to build. The hair-wired and breadboard versions
    did well in temporary or emergency applications when used with a digital multimeter
    (DMM), but I sought to build something more permanent that would have its own
    voltage and current readout, and that would stay on the workbench or sit on my
    desk as a regular addition to the tool set. [Figure 3-4](ch03.xhtml#ch03fig4)
    shows the full schematic for the Regulated Power Supply.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我希望稳压电源相对稳健，但我并不想让它过于复杂或难以构建。头发线和面包板版本在临时或紧急应用中表现良好，特别是与数字万用表（DMM）一起使用时，但我希望构建一些更持久的东西，它能够有自己的电压和电流读数，并且能够常驻工作台或放在我的桌面上，成为工具集中的常规部分。[图3-4](ch03.xhtml#ch03fig4)展示了稳压电源的完整电路图。
- en: '![image](../images/f03-04.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-04.jpg)'
- en: '*Figure 3-4: Schematic for the Regulated Power Supply*'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-4：稳压电源的电路图*'
- en: '**The Breadboard**'
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**面包板**'
- en: As in all of my Arduino projects, I began with the standard breadboard. To make
    life easy, I used a standard potentiometer with pins that would fit into the 0.100-inch-spaced
    breadboard holes. With a little effort, a standard 16 mm rotary potentiometer
    (R7 in the schematic) with printed circuit board connectors will just about fit
    into every other hole in a breadboard. [Figure 3-5](ch03.xhtml#ch03fig5) shows
    an overhead view of the finished breadboard before you power it.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 像我所有的Arduino项目一样，我从标准的面包板开始。为了简化操作，我使用了一个标准的电位器，其引脚可以适配0.100英寸间距的面包板孔。经过一些努力，一个标准的16毫米旋转电位器（原理图中的R7）带有印刷电路板连接器，几乎能适配面包板上每隔一个孔。[图3-5](ch03.xhtml#ch03fig5)展示了安装好之前的面包板的俯视图。
- en: '![image](../images/f03-05.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-05.jpg)'
- en: '*Figure 3-5: The breadboard for the Regulated Power Supply. The capacitors
    in the schematic—C1, C2, and C3—are not included in the breadboard but should
    be included in the completed unit*.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-5：稳压电源的面包板。原理图中的电容器—C1、C2和C3—不包括在面包板上，但应该包含在完成的单元中*。'
- en: '***Preparing the Arduino Pro Mini and LCD***'
  id: totrans-89
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***准备Arduino Pro Mini和LCD***'
- en: The Arduino Pro Mini may or may not come with the male headers attached. If
    it doesn’t, you’ll have to solder them yourself (see “[Preparing the Arduino Board](ch00.xhtml#ch00lev1sec1)”
    on [page 2](ch00.xhtml#page_2)). Make sure the number of header pins in your strip
    matches the corresponding holes in the Pro Mini; you may have to cut the strip
    to the proper number of pins if the included strip is too long. Trim two strips
    of headers to size and place the long ends of the two header strips into a breadboard,
    spaced so that the Pro Mini board will fit over them. Put the Pro Mini in place,
    and solder all the header pins. Then, take two header pins (use the surplus from
    the longer header or purchase these separately), insert them in the A4 and A5
    holes in the Pro Mini, and solder. These are the pins used for the LCD.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino Pro Mini可能会附带公头针脚，也可能没有。如果没有，你需要自己焊接（请参见“[准备Arduino板](ch00.xhtml#ch00lev1sec1)”第2页）。确保你的针脚条上针脚的数量与Pro
    Mini上的孔位匹配；如果附带的针脚条太长，你可能需要将其剪短。将两条针脚条修剪到合适的长度，并将两条长针脚条插入面包板，使其间隔合适，以便Pro Mini板能放在上面。将Pro
    Mini放置好后，焊接所有的针脚。然后，取两根针脚（使用从长针条中剩余的部分或单独购买），将其插入Pro Mini上的A4和A5孔，并焊接。这些针脚是用于LCD的。
- en: Finally, install five header pins on the edge of the board (at the TX0 and RXI
    end). Some boards come with straight headers, others with the long pins bent at
    a 90 degree angle. In most of the applications, I have found it easier to work
    with straight headers. You can use right-angle headers, but it may be more difficult
    to plug in the connector for programming the board, so I recommend replacing any
    right-angle pins with straight ones. You also might want to take a 1/2-inch length
    of 22-gauge wire and solder it to the short end of the RST pin so it sticks up.
    A female header connector will connect to this during programming.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在板子的边缘（在TX0和RXI端）安装五个针脚。某些板子带有直头针脚，其他板子则带有90度弯曲的长针脚。在大多数应用中，我发现使用直头针脚更为方便。你可以使用直角针脚，但可能会使得插入编程连接器变得更困难，所以我建议将任何直角针脚替换为直头针脚。你还可以考虑使用一段1/2英寸长的22号线，将其焊接到RST针脚的短端，使其突出。编程时，女性针座连接器将连接到这个突出部分。
- en: You will now have to get the LCD/I²C assembly ready. If you purchased the display
    and adapter separately, you will have to assemble them. Go to “[Affixing the I²C
    Board to the LCD](ch00.xhtml#ch00lev1sec2)” on [page 3](ch00.xhtml#page_3) for
    instructions. If you purchased the display with the I²C adapter, it’s ready for
    assembly.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你需要准备LCD/I²C组件。如果你单独购买了显示器和适配器，你需要将它们组装在一起。请参阅第3页的“[将I²C板固定到LCD上](ch00.xhtml#ch00lev1sec2)”以获取详细说明。如果你购买了带有I²C适配器的显示器，它就可以直接组装了。
- en: '***Building the Breadboard***'
  id: totrans-93
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***组装面包板***'
- en: 'Here’s the step-by-step guide to putting together the breadboard:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 这是组装面包板的逐步指南：
- en: Insert wires to connect the two positive (red) rails together.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 插入电线连接两个正极（红色）轨道。
- en: Insert wires to connect the two negative (blue) rails together.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 插入电线连接两个负极（蓝色）轨道。
- en: '**WARNING**'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**警告**'
- en: '*Be careful not to cross the two and connect the positive rails to negative
    rails. That could cause a short circuit and damage the hardware*.'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*小心不要将两者交叉连接，将正极轨道连接到负极轨道。这样可能会造成短路并损坏硬件*。'
- en: Insert the 10-kilohm rotary potentiometer into the breadboard.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将10千欧旋转电位器插入面包板。
- en: Insert the LM317, with or without heat sink attached, near the potentiometer,
    as shown in [Figure 3-5](ch03.xhtml#ch03fig5). (See [Figure 3-6](ch03.xhtml#ch03fig6)
    for the pinout of the LM317.)
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LM317 插入面包板，带或不带散热器，靠近电位器，如[图 3-5](ch03.xhtml#ch03fig5)所示。（有关 LM317 引脚分布，请参见[图
    3-6](ch03.xhtml#ch03fig6)。）
- en: '![image](../images/f03-06.jpg)'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f03-06.jpg)'
- en: '*Figure 3-6: Pinout of the LM317 regulator*'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图 3-6：LM317 调节器的引脚分布*'
- en: With the potentiometer shaft facing you, connect the leftmost pin and center
    pin of the potentiometer together, and then connect both to the adjustment (ADJ)
    pin of the LM317.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当电位器轴面朝向你时，将电位器的最左侧引脚和中间引脚连接在一起，然后将这两者都连接到 LM317 的调节（ADJ）引脚。
- en: With the potentiometer in the same orientation, connect the rightmost pin to
    the blue negative rail (ground).
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电位器保持相同的方向，连接最右侧的引脚到蓝色负极轨道（地）。
- en: Connect a 470-ohm resistor from the output pin to the ADJ pin on the LM317.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一个 470 欧姆的电阻器从输出引脚连接到 LM317 的 ADJ 引脚。
- en: Connect a 1.2-ohm resistor (R1 in [Figure 3-4](ch03.xhtml#ch03fig4)—I used two
    2.2-ohm resistors in parallel) from the output pin of the LM317 to a load of your
    choosing. For test purposes, I used a 1/8 W resistor and connected a 5V, 30 mA
    incandescent indicator lamp for the load. (You may want to use the actual R1 and
    R9 resistors that you will use in the finished unit, so you can adjust the sketch
    before completing the unit.)
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一个 1.2 欧姆的电阻器（[图 3-4](ch03.xhtml#ch03fig4)中的 R1——我使用了两个 2.2 欧姆电阻器并联）从 LM317
    输出引脚连接到你选择的负载上。为了测试，我使用了一个 1/8 W 的电阻器，并连接了一个 5V，30 mA 的白炽指示灯作为负载。（你可能想使用在最终装置中将使用的实际
    R1 和 R9 电阻器，这样你就可以在完成装置之前调整草图。）
- en: Connect the input pin of the LM317 to the 12V system input voltage. This is
    the wire going from the LM317 to the upper alligator clip in [Figure 3-5](ch03.xhtml#ch03fig5).
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LM317 的输入引脚连接到 12V 系统输入电压。这是从 LM317 到[图 3-5](ch03.xhtml#ch03fig5)中上方鳄鱼夹的导线。
- en: Connect the blue negative rails to the negative side of the input power (probably
    a wall plug).
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将蓝色负极轨道连接到输入电源的负极（可能是墙插）。
- en: Insert the LM7805 into the breadboard, as shown in [Figure 3-5](ch03.xhtml#ch03fig5).
    (See [Figure 3-7](ch03.xhtml#ch03fig7) for the pinout of the LM7805.)
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LM7805 插入面包板，如[图 3-5](ch03.xhtml#ch03fig5)所示。（有关 LM7805 引脚分布，请参见[图 3-7](ch03.xhtml#ch03fig7)。）
- en: '![image](../images/f03-07.jpg)'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f03-07.jpg)'
- en: '*Figure 3-7: Pinout of the LM7805 regulator*'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图 3-7：LM7805 调节器的引脚分布*'
- en: Connect the output pin of the LM7805 to the red positive rail of the breadboard.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LM7805 的输出引脚连接到面包板上的红色正极轨道。
- en: Connect the input pin of the LM317 to the input pin of the LM7805\. This is
    the point at which the input voltage from the power source will be connected.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LM317 的输入引脚连接到 LM7805 的输入引脚。这是连接来自电源输入电压的点。
- en: Connect the ground pin of the LM7805 to the blue negative rail of the breadboard.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LM7805 的接地引脚连接到面包板上的蓝色负极轨道。
- en: Insert a 6.8-kilohm resistor, and connect one side to the blue negative rail.
    This is resistor R3; the other side will connect to resistor R2\. See [Figure
    3-5](ch03.xhtml#ch03fig5) for a top view of the breadboard.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 插入一个 6.8 千欧姆的电阻器，并将一端连接到蓝色负极轨道。这是电阻器 R3；另一端将连接到电阻器 R2。请参见[图 3-5](ch03.xhtml#ch03fig5)中的面包板俯视图。
- en: Insert a 10-kilohm resistor (R2) into the breadboard with one side connected
    to the LM317 output pin and the other side connected to resistor R3 from step
    15.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一个 10 千欧姆的电阻器（R2）插入面包板，一端连接到 LM317 输出引脚，另一端连接到第 15 步中的电阻器 R3。
- en: Connect resistor R1 from step 8 from the output pin of the LM317 to a blank
    hole in the breadboard. This row will be the output of the regulator.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将第 8 步中的电阻器 R1 从 LM317 输出引脚连接到面包板中的一个空孔。这一行将作为调节器的输出。
- en: 'Connect the voltage divider: first, insert a 10-kilohm resistor (R4) into the
    breadboard. Then, connect one side of resistor R4 to the same row as R1 (you’ll
    have to use a jumper wire) and the other side to an empty row on the breadboard.'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接电压分压器：首先，将一个 10 千欧姆的电阻器（R4）插入面包板。然后，将电阻器 R4 的一端连接到与 R1 相同的行（你需要使用跳线），另一端连接到面包板上的一个空行。
- en: Insert a 6.8-kilohm resistor (R5) into the board with one side connected to
    the open side of R4 and the other side of R5 connected to the blue negative rail.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一个 6.8 千欧姆的电阻器（R5）插入面包板，一端连接到 R4 的开路端，另一端连接到蓝色负极轨道。
- en: Insert the Arduino Pro Mini in the breadboard so that it straddles the center
    break, as shown in [Figures 3-4](ch03.xhtml#ch03fig4) and [3-5](ch03.xhtml#ch03fig5).
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 Arduino Pro Mini 插入面包板，使其跨越中央断开部分，如[图 3-4](ch03.xhtml#ch03fig4)和[图 3-5](ch03.xhtml#ch03fig5)所示。
- en: Use a jumper to connect the VCC terminal of the Pro Mini to the red positive
    rail.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用跳线将Pro Mini的VCC端口连接到红色正电源轨。
- en: Use a jumper to connect the GND pins of the Arduino Pro Mini to the blue negative
    rail. (There are at least two to choose from—one is located between RST and D2,
    and the other is located between RAW and RST on the other side. Take your pick.)
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用跳线将Arduino Pro Mini的GND引脚连接到蓝色负电源轨。（至少有两个可供选择，一个位于RST和D2之间，另一个位于RAW和RST之间。任选其一。）
- en: Use a jumper wire to connect the joining point of R4 and R5 to pins A1 and A0
    on the Arduino Pro Mini.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用跳线将R4和R5的连接点连接到Arduino Pro Mini上的A1和A0引脚。
- en: Find the junction point of R2 and R3, and use a jumper to connect that junction
    point to the A2 terminal on the Arduino Pro Mini.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到R2和R3的交点，并使用跳线将该交点连接到Arduino Pro Mini上的A2端口。
- en: Load the sketch onto the Arduino Pro Mini. (I often remove the Pro Mini from
    the circuit completely to program it. It’s a little less confusing.)
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将草图上传到Arduino Pro Mini。（我通常会完全从电路中取下Pro Mini来编程，这样稍微不那么混乱。）
- en: Connect the LCD/I²C display by connecting VCC and GND to the red positive and
    blue negative rails on the breadboard, respectively.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将VCC和GND分别连接到面包板上的红色正电源轨和蓝色负电源轨，连接LCD/I²C显示屏。
- en: Connect the SDA to analog pin A4 on the Arduino Pro Mini and SCL to analog pin
    A5.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将SDA连接到Arduino Pro Mini上的模拟引脚A4，SCL连接到模拟引脚A5。
- en: Connect the input of the LM7805 voltage regulator to some pin where the +12V
    will be attached.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LM7805电压调节器的输入连接到将接入+12V的引脚。
- en: Connect the output of the LM7805 to the red positive rail, and connect the ground
    to the blue negative rail.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LM7805的输出连接到红色正电源轨，将接地连接到蓝色负电源轨。
- en: Once all of those connections are in place, you’re set to go. Upload the sketch
    and test the circuit.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦这些连接都完成，您就可以开始了。上传草图并测试电路。
- en: '**The Sketch**'
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**草图**'
- en: The Regulated Power Supply sketch is about as simple as I could make it. The
    only difficulty is that although I use 1% tolerance resistors throughout, I’ve
    found some variation in resistance value. So be aware that you may need to make
    an adjustment to the sketch to accommodate for this.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 稳压电源草图尽可能简化。唯一的难点是，尽管我全程使用1%容差的电阻，但我发现电阻值有所不同。因此，请注意，您可能需要调整草图以适应这一点。
- en: 'Here is the sketch:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 这是草图：
- en: '[PRE0]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'First, this sketch imports some libraries and sets up the LCD (see “[On Writing
    Code to Set Up LCDs](ch01.xhtml#ch01box1)” on [page 36](ch01.xhtml#page_36)).
    It then defines a series of variables, all floats, to use when setting the voltage,
    reading from the analog pins, calculating values to display on the LCD, and so
    on. The `setup()` loop is very short: it has only two lines for initializing the
    LCD. The main `loop()` reads the battery voltage and current, and performs the
    necessary calculations to display on the LCD. The `volt_disp` value is the voltage
    to be displayed on the LCD.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，这个草图导入了一些库，并设置了LCD（参见 “[编写代码以设置LCD](ch01.xhtml#ch01box1)” 在[第36页](ch01.xhtml#page_36)）。接着，它定义了一系列变量，都是浮动类型，用于设置电压、从模拟引脚读取数据、计算要显示在LCD上的值等等。`setup()`循环非常简短：它只有两行代码用于初始化LCD。主`loop()`读取电池电压和电流，并执行必要的计算来显示在LCD上。`volt_disp`值是要显示在LCD上的电压。
- en: '**The Shield**'
  id: totrans-136
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**屏蔽板**'
- en: While the circuitry is not overly complex, using a shield will simplify many
    of the connections for driving the LCD and constructing the voltage dividers,
    and it will make the assembly of the Regulated Power Supply easier than point-to-point
    wiring. [Figure 3-8](ch03.xhtml#ch03fig8) shows the shield I designed, though
    you could also design your own, of course. The PCB file is available at *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管电路并不复杂，使用屏蔽板会简化许多连接，尤其是驱动LCD和构建电压分压器的部分，它将使稳压电源的组装比点对点接线更加方便。[图3-8](ch03.xhtml#ch03fig8)展示了我设计的屏蔽板，当然你也可以自己设计。PCB文件可在
    *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*
    获取。
- en: While I used two layers to construct the shield, with a little effort and a
    slightly larger board, the circuitry could be accommodated on a single layer.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我使用了两层来构建屏蔽板，但通过一点努力和稍微大一些的电路板，电路完全可以放置在单层板上。
- en: '![image](../images/f03-08.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-08.jpg)'
- en: '*Figure 3-8: The PCB shield used in the Regulated Power Supply. Black is the
    top layer, dark gray is the bottom layer, and light gray is the silkscreen layer*.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 3-8：在稳压电源中使用的PCB屏蔽。黑色是顶层，深灰色是底层，浅灰色是丝网印刷层*。'
- en: 'The shield doesn’t need to be populated in any particular sequence, but some
    components will be easier to fit before others. I suggest soldering in this order:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展板的元件不需要按特定顺序安装，但某些元件在其他元件之前安装会更容易。我建议按以下顺序焊接：
- en: First, insert 2.2-ohm, 5 W resistors R1 and R9 into the PCB. These are voltage-dropping
    resistors that create the voltage for the ammeter (mA), which provide a total
    resistance (R1 in the schematic) of 1.1 ohms at 10 W. The resistors are a little
    longer than the configuration on the board, so you’ll have to bend the leads to
    make them fit. When the Regulated Power Supply is running close to its maximum
    rating, expect these resistors—and the LM317 itself—to get a little warm.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，将2.2欧姆、5瓦特的电阻R1和R9插入PCB。这些是降压电阻，为安培计（mA）提供电压，提供总电阻（原理图中的R1）为1.1欧姆，功率为10瓦特。这些电阻比板上的配置稍长，所以你需要弯曲引脚以使其适配。当稳压电源接近其最大额定功率时，预计这些电阻和LM317本身都会变得有些热。
- en: Capacitor C1, a 68 μF tantalum capacitor, will be a tight fit for the holes.
    To make sure it doesn’t interfere with the LM317, install the capacitor first.
    Then, install the LM317, making sure to leave room for the heat sink. Remember
    that the heat sink is likely to get pretty warm.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 电容C1是一颗68μF的钽电容，安装时会比较紧凑。为了确保它不会干扰LM317，先安装电容。然后，再安装LM317，确保为散热器留出空间。记住，散热器可能会变得相当热。
- en: Make sure to install the LM317 with the pins correctly oriented according to
    the pinout in [Figure 3-6](ch03.xhtml#ch03fig6) and the schematic in [Figure 3-4](ch03.xhtml#ch03fig4).
    If you use the provided shield files, the thick line on the LM317 silkscreen corresponds
    to the metal tab on the IC. If you insert the part the wrong way, the system won’t
    work, and the part could burn out. It would also be a pain to remove.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保按照[图3-6](ch03.xhtml#ch03fig6)中的引脚排列和[图3-4](ch03.xhtml#ch03fig4)中的原理图正确安装LM317的引脚。如果你使用提供的扩展板文件，LM317丝网图上的粗线对应IC上的金属标签。如果将元件安装方向错误，系统将无法工作，并且该元件可能会烧坏，而且拆除起来会很麻烦。
- en: Install the LM7805 regulator in the upper-right section of the PCB, and make
    sure it matches the pinout in [Figure 3-7](ch03.xhtml#ch03fig7) and the schematic
    in [Figure 3-4](ch03.xhtml#ch03fig4). You can use the heavy line in the silkscreen
    image of the PCB as a guide.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LM7805稳压器安装在PCB的右上部分，并确保它与[图3-7](ch03.xhtml#ch03fig7)中的引脚排列及[图3-4](ch03.xhtml#ch03fig4)中的原理图匹配。你可以使用PCB丝网图中的粗线作为参考。
- en: 'Try both voltage regulator ICs in the shield with the heat sinks installed
    (at least temporarily) to make sure they can fit without touching any active components.
    Remember that the heat sinks are active: the heat sink (tab) of the LM7805 is
    at ground potential, and the heat sink (tab) of the LM317 is at the output potential.'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试将两个稳压IC和散热器一起安装在扩展板上（至少暂时安装），确保它们不会与任何活动元件接触。记住，散热器是活动的：LM7805的散热器（标签）为接地电位，而LM317的散热器（标签）为输出电位。
- en: Install resistors R2, R3, R4, and R5\. It’s easier to place those before installing
    the female headers for the Arduino Pro Mini.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装电阻R2、R3、R4和R5。在安装Arduino Pro Mini的女性插针之前，先安装这些会更容易。
- en: Then, solder in C1, C2, and the wires that will connect the Arduino Pro Mini
    to potentiometer R6, which you will mount on the chassis. You can leave the wires
    a little long and trim them when you install the shield in the enclosure. Install
    capacitors C4 and C5 as indicated in the schematic in [Figure 3-4](ch03.xhtml#ch03fig4).
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，焊接C1、C2及将Arduino Pro Mini与电位器R6连接的导线，电位器R6将安装在外壳上。你可以将导线留长一些，等安装扩展板到外壳时再修剪。按照原理图中的指示安装电容C4和C5，参见[图3-4](ch03.xhtml#ch03fig4)。
- en: Next, solder the female headers that comprise the mount for the Pro Mini and
    the connector for the LCD. The LCD connections are the SDA, SCL, −, and + connections
    in the bottom right of the PCB. I used male stakes and a female-to-female connector
    cable to connect from the LCD to the shield. (To learn how to make the custom
    connector, see “[Connectors Used in This Book](ch00.xhtml#ch00lev1sec6)” on [page
    18](ch00.xhtml#page_18).)
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，焊接包含Pro Mini支架和LCD连接器的女性插针。LCD的连接为SDA、SCL、−和+，位于PCB的右下角。我使用了男性插针和一根女性对女性连接线，将LCD与扩展板连接。（要了解如何制作自定义连接器，请参见[本书中使用的连接器](ch00.xhtml#ch00lev1sec6)，第[18页](ch00.xhtml#page_18)。）
- en: For the LCD and Arduino Pro Mini, I usually insert the headers into the board,
    solder just one pin, and then, with my finger on the top, heat that one pin and
    push on the connector to make sure it fits flush against the board. For the pins
    of the Pro Mini, I use only female headers for those that are active—that is,
    that have copper traces going to them. I also like to place one pin (I usually
    use a 1×4 pin header) right at the last pin on the Pro Mini to make alignment
    easy. This would translate to pins RAW, GND, RST, and VCC. In addition, I like
    to place at least two headers diagonally for mechanical stability. This would
    correspond to pins D8 and D9 on the Pro Mini. The male headers on the Pro Mini
    for A4 and A5 are located just above pins A2, A3, and VCC on the main row of connections.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 对于LCD和Arduino Pro Mini，我通常将针脚插入板中，先焊接一个引脚，然后用手指按住上面，加热该引脚并推动连接器，以确保其与板面平齐。对于Pro
    Mini的针脚，我只使用女性针脚连接到那些有铜迹的引脚。我还喜欢在Pro Mini的最后一个引脚（通常是1×4针脚）上放置一个针脚，以便对准。这些引脚对应RAW、GND、RST和VCC。此外，我还喜欢至少放置两个对角线排列的针脚，以增强机械稳定性。这将对应Pro
    Mini上的D8和D9引脚。Pro Mini上的A4和A5引脚位于A2、A3和VCC的上方，属于主连接行的一部分。
- en: '**Construction**'
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**构建**'
- en: When the Regulated Power Supply is all soldered together, you will need to prepare
    an enclosure and mount the circuit inside. I selected a nice-looking, powder-coated
    metal enclosure, approximately 2 1/4 × 3 1/4 × 4 3/4 inches. [Figure 3-9](ch03.xhtml#ch03fig9)
    shows the completed unit driving a couple of incandescent panel lamps.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 当稳压电源全部焊接完成后，您需要准备一个外壳并将电路装入其中。我选择了一个外观不错的粉末涂层金属外壳，约为2 1/4 × 3 1/4 × 4 3/4英寸。[图3-9](ch03.xhtml#ch03fig9)展示了完成的设备，驱动着几个白炽灯面板灯。
- en: '![image](../images/f03-09.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-09.jpg)'
- en: '*Figure 3-9: The completed Regulated Power Supply*'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-9：完成的稳压电源*'
- en: Bear in mind, though, that while the case is not delicate, the paint is easy
    to scratch, so be careful. It’s also a little pricey—coming in around $20—but
    as I will have it on my workbench all the time, I thought it was worth it. Of
    course, you could also use a different enclosure of your choosing and modify the
    templates provided with this book accordingly.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 不过，请记住，虽然外壳不脆弱，但漆面容易划伤，因此要小心。它也有点贵——大约20美元——但因为它将一直放在我的工作台上，我认为值得。当然，您也可以使用您选择的其他外壳，并根据本书提供的模板进行修改。
- en: '***Preparing the Enclosure***'
  id: totrans-156
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***准备外壳***'
- en: If the front panel of the enclosure is sloped, you will need to put a piece
    of scrap wood behind the areas you need to center punch and drill to help hold
    it in place. Make sure to measure, center punch, and drill holes carefully.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 如果外壳的前面板是倾斜的，您需要在需要打中心点和钻孔的地方放一块废木板，以帮助固定位置。确保仔细测量、打中心点并钻孔。
- en: The templates for this project are shown in [Figures 3-10](ch03.xhtml#ch03fig10)
    and [3-11](ch03.xhtml#ch03fig11), and they can be downloaded from *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目的模板见[图3-10](ch03.xhtml#ch03fig10)和[3-11](ch03.xhtml#ch03fig11)，可从*[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*下载。
- en: '![image](../images/f03-10.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-10.jpg)'
- en: '*Figure 3-10: Sloping face of the Regulated Power Supply enclosure*'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-10：稳压电源外壳的倾斜面*'
- en: '![image](../images/f03-11.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-11.jpg)'
- en: '*Figure 3-11: Front and bottom of the Regulated Power Supply enclosure*'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-11：稳压电源外壳的前面和底部*'
- en: 'Here is how I suggest you prepare the enclosure:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我建议您准备外壳的方法：
- en: Center punch and drill holes for the potentiometer, on-off switch (1/4 inches),
    and power indicator LED. See [Figure 3-10](ch03.xhtml#ch03fig10) for the front
    panel dimensions.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为电位器、开关（1/4英寸）和电源指示LED打中心点并钻孔。有关前面板的尺寸，请参见[图3-10](ch03.xhtml#ch03fig10)。
- en: Center punch and drill the hole for the power input jack in the rear of the
    panel (see [Figure 3-10](ch03.xhtml#ch03fig10)).
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在面板后部打中心点并钻孔，用于电源输入插孔（见[图3-10](ch03.xhtml#ch03fig10)）。
- en: Drill holes for the output binders and 3.5 mm jack on the front of the case,
    as shown in [Figure 3-11](ch03.xhtml#ch03fig11).
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在外壳前面钻孔，用于输出绑定器和3.5毫米插孔，如[图3-11](ch03.xhtml#ch03fig11)所示。
- en: Carefully measure and mark the cutout for the LCD, as shown in [Figure 3-10](ch03.xhtml#ch03fig10).
    Center punch and drill 1/2-inch holes in the corners of the LCD screen area to
    help initiate saw cutting. You can eyeball this based on the diagram in [Figure
    3-10](ch03.xhtml#ch03fig10) or download a PDF file of the template. Either trace
    the image onto your enclosure with carbon paper or simply mark the corners with
    a center punch and connect the punch marks.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 小心测量并标记LCD的切割区域，如[图 3-10](ch03.xhtml#ch03fig10)所示。用中心冲打标记并钻孔1/2英寸的孔在LCD屏幕区域的四个角落，帮助启动锯切。你可以根据[图
    3-10](ch03.xhtml#ch03fig10)中的示意图大致判断，或者下载模板的PDF文件。可以使用碳纸将图像描摹到机箱上，或者仅用中心冲打标记角落并连接这些打孔点。
- en: Carefully cut out a hole for the LCD. There are a variety of tools you can use
    to do this. I first drilled holes A and B and then used a keyhole saw with a fine
    hacksaw blade (available at local hardware stores) to cut between the holes. Remember
    that the cutting occurs on the outward thrust, so you needn’t keep pressure on
    the blade on the return stroke. You can clean up the burrs with a file.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 小心切割LCD的开孔。你可以使用多种工具来完成这项工作。我首先钻了A和B两个孔，然后使用细齿锯条的钥匙孔锯（可在本地五金店购买）在这两个孔之间切割。记住，切割是在外推时进行的，因此在回程时无需对锯片施加压力。可以用锉刀清理毛刺。
- en: Carefully fit the display into the window, and file where necessary to get a
    secure fit. The backlight protrudes on one side of the display, so in order to
    avoid crushing the backlight, you can use nuts as spacers to keep it separated
    from the panel.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 小心地将显示器安装到窗口中，如有必要，可以打磨以确保其紧密安装。由于背光在显示器的一侧突出，为避免挤压背光，您可以使用螺母作为垫片，使其与面板分开。
- en: Drill holes F, G, H, and I, and fasten the display in place. As you do so, check
    carefully that the spacer nuts are wide enough (4-40 nuts come in different dimensions),
    and, if necessary, use two nuts or a nut and a washer to space out for the backlight.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 钻孔F、G、H和I，并固定显示器。在此过程中，仔细检查垫片螺母的宽度是否足够（4-40螺母有不同尺寸），如果需要，可以使用两个螺母或一个螺母和一个垫圈来为背光提供空间。
- en: '***Mounting the Circuit Board***'
  id: totrans-171
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***安装电路板***'
- en: Once you have assembled and tested the shield and mounted the LCD, install the
    potentiometer, on-off switch, LED, and power jack. Then it’s time to mount the
    shield in the enclosure. Originally, I drilled four holes in the board so that
    I could screw it into the enclosure, but I’ve found that 3M double-sided mounting
    tape also does the trick. I mounted the entire board, heat sinks and all, with
    a 1 1/4-inch length of the 3/4-inch wide double-sided adhesive. (The manufacturer
    claims it will hold 2 pounds.)
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 完成护罩组装并测试LCD后，安装电位器、开关、LED和电源插孔。然后就是将护罩安装到机箱中的时候了。最初，我在电路板上钻了四个孔，方便将其固定到机箱中，但我发现3M双面胶带也能达到同样的效果。我用1
    1/4英寸长、3/4英寸宽的双面胶带将整个电路板（包括散热器）固定住。（制造商声称它能承受2磅的重量。）
- en: The adhesive is relatively aggressive, so before applying it, make sure you
    plan carefully where you want to mount the board so it will not be in the way
    of other components. I mounted the board upside down on the top section of the
    case so all components and connections were on the same platform (see [Figure
    3-12](ch03.xhtml#ch03fig12)).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 该粘合剂相对较强，因此在使用之前，请确保仔细计划好安装电路板的位置，以避免它阻碍其他组件。我将电路板倒置安装在机箱的顶部部分，这样所有的组件和连接都位于同一平台上（见[图
    3-12](ch03.xhtml#ch03fig12)）。
- en: '![image](../images/f03-12.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-12.jpg)'
- en: '*Figure 3-12: The completed (upside-down) assembly with the board, LCD, output
    connectors, potentiometer, on-off switch, LED, and output power jack all mounted
    on the inside of the top of the enclosure*.'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 3-12：已完成的（倒置）组装，电路板、LCD、输出连接器、电位器、开关、LED和输出电源插孔都安装在机箱顶部内部。*'
- en: The final step is to connect the on-off switch, LED pilot lamp, LED current-limiting
    resistor, potentiometer, power input jack, and output connectors to the PCB according
    to the project schematic. I used 28-gauge hookup wire to tie everything. The two
    binding posts/banana plug jacks and the 3.5 mm jacks are wired in parallel. [Figure
    3-12](ch03.xhtml#ch03fig12) illustrates how I mounted the shield. Note that I
    used small wire ties, which are optional, to keep the wires neat.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是根据项目原理图将开关、LED指示灯、LED限流电阻、电位器、电源输入插孔和输出连接器连接到PCB。我使用了28号连接线将所有组件连接在一起。两个接线柱/香蕉插头插孔和3.5毫米插孔是并联连接的。[图
    3-12](ch03.xhtml#ch03fig12)展示了我如何安装护罩。请注意，我使用了小型线扎带（可选）来保持电线整洁。
- en: Before closing up the enclosure, make sure there are no areas that might result
    in a short circuit. For example, I placed a small piece of insulating tape between
    the LCD screen and the shield. They might not be touching at the time of assembly
    but could touch when you close the enclosure. You can apply insulating tape to
    prevent this kind of short.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在关闭外壳之前，确保没有可能导致短路的区域。例如，我在LCD屏幕和金属屏蔽之间放了一小块绝缘胶带。它们在组装时可能不会接触，但在你合上外壳时可能会接触。你可以使用绝缘胶带来防止这种短路。
- en: After testing for short circuits, all that remains is to put the two halves
    of the case together. The connections for the output—the binding terminal/banana
    jack and 3.5 mm jack—are in parallel. The final step is to screw the two pieces
    together, and you’re off and running. I put a pointer knob on the potentiometer
    even though there are no markings on the case. You can add a dial if you want,
    but I find the digital readout sufficient.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在测试短路之后，只剩下将外壳的两部分组装在一起。输出连接—绑定端子/香蕉插孔和3.5毫米插孔—是并联的。最后一步是将两个部分用螺丝固定，你就可以开始使用了。我在电位器上装了一个指示旋钮，尽管外壳上没有标记。如果你想加上刻度盘也可以，但我觉得数字显示已经足够了。
- en: 'And, the coup de grâce: remove the protective paper from the adhesive on some
    rubber feet, and install them on the bottom of the enclosure. Voilà!'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的点睛之笔：去掉一些橡胶脚底部的保护纸，并将它们安装到外壳底部。完成！
- en: The full Regulated Power Supply project will take up a decent amount of space
    on your workbench, but you will find the digital readout and banana jacks invaluable.
    If you’re feeling adventurous, however, you can build a smaller version of the
    same circuit, minus the jacks and LCD, shown in [Figure 3-13](ch03.xhtml#ch03fig13).
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的稳压电源项目将占用相当大的工作台空间，但你会发现数字显示和香蕉插孔非常有用。如果你觉得冒险的话，你也可以制作一个更小的版本，去掉插孔和LCD，见[图3-13](ch03.xhtml#ch03fig13)。
- en: '![image](../images/f03-13.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f03-13.jpg)'
- en: '*Figure 3-13: This is the quick-and-dirty power supply with the top off. I
    made it before biting the bullet and making the full-fledged Regulated Power Supply*.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3-13：这是快速简易的电源，顶部已拆开。我是在决定制造完整的稳压电源之前做的这个简易版*。'
- en: You can find instructions on how to build the Mini Regulated Power Supply at
    *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在 *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*
    找到如何构建迷你稳压电源的说明。
