- en: '**7'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**7**'
- en: A CUSTOM PH METER**
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**定制 pH 测量仪**'
- en: '![image](../images/common-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/common-01.jpg)'
- en: Microcontrollers are used in many, if not most, commercial and scientific instruments.
    They are accurate and versatile, which makes them a relatively low-cost solution
    to a variety of measurement requirements. This project combines an Arduino microcontroller
    with a commercial probe and some analog circuitry to construct an accurate meter
    that measures *pH*, the relative acidity or alkalinity of a solution.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 微控制器被广泛应用于许多，甚至大多数商业和科学仪器中。它们精确且多功能，使得它们成为解决各种测量需求的低成本方案。本项目将 Arduino 微控制器与商业探头和一些模拟电路结合，构建了一个精确的仪器来测量
    *pH*，即溶液的相对酸性或碱性。
- en: There are three basic ways of measuring pH. This project involves using a pH
    meter and probe. The other approaches are litmus paper indicators, which you might
    remember from high school chemistry, and colorimeters, the traditional swimming
    pool maintenance kit. The latter is usually a kit of chemical reagents with a
    comparison color chart. Of the three, a pH meter is by far the most accurate.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 测量 pH 值的方法有三种基本方式。这个项目涉及使用 pH 测量仪和探头。其他方法包括石蕊试纸指示剂（你可能还记得它们在高中化学课上用过）和比色计，后者通常是游泳池维护工具包的一部分。比色计通常是一套化学试剂和比较色卡。在这三种方法中，pH
    测量仪无疑是最准确的。
- en: But what does pH measure, exactly? The pH value describes the activity of hydrogen
    ions in aqueous solutions. The higher the activity of hydrogen ions, the more
    acidic the solution is and the lower the pH is. Less activity of hydrogen ions
    (and greater activity of hydroxide ions) results in a higher pH.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，pH 值到底测量的是什么呢？pH 值描述的是水溶液中氢离子的活性。氢离子的活性越高，溶液越酸性，pH 值越低。氢离子的活性较低（而氢氧根离子的活性较高）时，pH
    值较高。
- en: The pH scale is logarithmic. A difference of one pH measurement unit represents
    a tenfold increase or reduction of hydrogen-ion activity in the solution. This
    explains how a solution’s aggressiveness rapidly increases with the distance from
    the neutral point on the pH scale.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: pH 值的刻度是对数的。每增加一个 pH 单位，代表氢离子活性在溶液中增加或减少十倍。这解释了为什么溶液的攻击性会随着 pH 值从中性点的距离迅速增加。
- en: '[Figure 7-1](ch07.xhtml#ch07fig1) shows the finished Custom pH Meter, and if
    you wonder why measuring pH is useful, “[Why Measure pH?](ch07.xhtml#ch07note1)”
    on [page 187](ch07.xhtml#page_187) discusses several answers to that question.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-1](ch07.xhtml#ch07fig1) 显示了完成的定制 pH 测量仪，如果你想知道为什么测量 pH 值是有用的，[“为什么要测量
    pH？”](ch07.xhtml#ch07note1) 在 [第 187 页](ch07.xhtml#page_187) 提供了多个答案。'
- en: '![image](../images/f07-01.jpg)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-01.jpg)'
- en: '*Figure 7-1: The Custom pH Meter in an actual measurement environment*'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-1：定制 pH 测量仪在实际测量环境中的应用*'
- en: '**Why Build Your Own pH Meter?**'
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**为什么要自己制作 pH 测量仪？**'
- en: Commercial pH meters run the gamut of prices from low-cost portable units under
    $60 to full-fledged laboratory instruments costing several hundred or several
    thousand dollars. Relatively low-cost pH meters can do the job, but all have drawbacks,
    such as marginal accuracy, relatively short lifetime, calibration issues, and
    consistency.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 商业 pH 测量仪的价格从不到 $60 的低成本便携型设备到几百或几千美元的全功能实验室仪器不等。相对低成本的 pH 测量仪可以完成任务，但它们都有一些缺点，例如精度有限、使用寿命较短、校准问题和一致性问题。
- en: A variety of pH meter kits are also available, including many stamps, some designed
    for the Arduino. (A *stamp* is a small circuit board with the critical circuitry
    to perform some function, minus the processor.) I have not had a chance to sample
    these kits, but they tend to be pricey, running close to or over $100\. And they
    still require a power supply and packaging.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 还有许多 pH 测量仪套件可供选择，包括许多印刷电路板，有些是为 Arduino 设计的。（*印刷电路板* 是一块小电路板，包含执行某些功能所需的关键电路，但没有处理器。）我还没机会尝试这些套件，但它们通常比较昂贵，接近或超过
    $100。而且它们仍然需要电源和包装。
- en: While this project doesn’t propose to offer a full-scale laboratory instrument,
    it provides a good, workable pH meter and gives a lot of insight into what actually
    comprises a pH meter. I’ve made every attempt to tune the circuit for optimal
    performance, but you may find further adjustment helpful, so if you want to try
    something different after seeing the circuit, go for it.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这个项目并未提议提供一款完整的实验室仪器，但它提供了一款不错、可用的 pH 测量仪，并且对 pH 测量仪的组成部分提供了很多有价值的见解。我已尽力调试电路以达到最佳性能，但你可能会觉得进一步的调整会有所帮助，所以如果你在查看电路后想尝试不同的方法，尽管去做吧。
- en: '**WHY MEASURE pH?**'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**为什么要测量 pH 值？**'
- en: In the past, pH was a relatively obscure measurement, confined to the laboratory
    bench and industrial environments (for quality control, process control, measuring
    and controlling waste effluents, and so on). However, more people have started
    using scientific measurement in areas that have traditionally relied on rote instructions
    or trial-and-error experimentation, like home winemaking and beer brewing, hydroponics,
    home agriculture, hydroculture, and baking. All of these applications can benefit
    from accurate pH measurement, and they don’t even include the more mundane task
    of managing the chemistry of your swimming pool, koi pond, fountain, or aquarium.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 过去，pH 是一个相对晦涩的测量，局限于实验室工作台和工业环境（用于质量控制、过程控制、废水排放监测与控制等）。然而，越来越多的人开始在那些传统上依赖死记硬背或试错实验的方法的领域使用科学测量，比如家庭酿酒和啤酒酿造、水培、家庭农业、水养殖和烘焙。所有这些应用都能从精确的
    pH 测量中受益，而且它们甚至不包括管理游泳池、锦鲤池、喷泉或水族馆化学成分这一更为平常的任务。
- en: 'For example, in baking, dough needs a low pH to rise. The pH of foods also
    impacts two of the four tastes: low-pH, or acidic, foods tend to taste sour, while
    higher-pH, or more alkaline, foods taste bitter. Lemon juice is an example of
    sour, and broccoli rabe or dark chocolate can be considered bitter. In home gardening,
    pH is an important soil characteristic for particular crops. Simple adjustments
    in pH can make aquarium water clear and reduce scum deposits on the glass sides,
    and a balanced pH in ponds keeps fish healthy and reduces algae. And the list
    goes on.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在烘焙中，面团需要低 pH 才能发酵。食物的 pH 值也影响四种味觉中的两种：低 pH，或酸性食物往往味道酸，而较高 pH，或碱性食物则味道苦。柠檬汁是酸味的例子，西兰花或黑巧克力则可以视为苦味。在家庭园艺中，pH
    是特定作物的重要土壤特性。简单调整 pH 可以使水族箱水清澈，并减少玻璃壁上的污垢沉积，而池塘中的平衡 pH 维持鱼类健康，并减少藻类生长。类似的例子还很多。
- en: '**Required Tools**'
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**所需工具**'
- en: Soldering iron and solder
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 焊接铁和焊料
- en: Drill and drill bits
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 电钻和钻头
- en: Keyhole saw
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 锯孔锯
- en: Center punch
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 中心冲孔器
- en: File
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 文件
- en: 2-56 tap
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 2-56 螺纹刀
- en: Heat gun or hair dryer (for heat-shrink tubing)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 热风枪或吹风机（用于热缩管）
- en: '**Parts List**'
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**零件清单**'
- en: 'You’ll need the following parts to build your Custom pH meter:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 构建定制 pH 计需要以下零件：
- en: One Deek-Robot Pro Mini Arduino clone (Other Arduinos should work with the project
    in general, but not with the shield template provided for this book. I used an
    Arduino Nano clone for the breadboard because of the built-in USB interface. In
    the completed unit, I switched to the Pro Mini to conserve space.)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 Deek-Robot Pro Mini Arduino 克隆板（其他 Arduino 一般也适用于本项目，但不能与本书提供的屏蔽模板兼容。我在面包板上使用了一个
    Arduino Nano 克隆板，因为它自带 USB 接口。在完成的设备中，我换用了 Pro Mini 以节省空间。）
- en: One LM35 (D) temperature sensor
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 LM35（D）温度传感器
- en: One Texas Instruments TL072 dual op-amp (The pinout is shown in [Figure 7-2](ch07.xhtml#ch07fig2).)
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 Texas Instruments TL072 双运算放大器（引脚图见[图 7-2](ch07.xhtml#ch07fig2)）
- en: '![image](../images/f07-02.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-02.jpg)'
- en: '*Figure 7-2: TL072 pinout*'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-2：TL072 引脚图*'
- en: One 10-turn, 1-megaohm trimmer (R7)
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 10 转，1 兆欧 调节电位器（R7）
- en: One 10-turn, 10-kilohm trimmer (R4)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 10 转，10 千欧 调节电位器（R4）
- en: One BNC male connector
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 BNC 公头连接器
- en: One LM7805 voltage regulator
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 LM7805 电压调节器
- en: One LMC7660 power inverter (The pinout is shown in [Figure 7-3](ch07.xhtml#ch07fig3).)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 LMC7660 电源逆变器（引脚图见[图 7-3](ch07.xhtml#ch07fig3)）
- en: '![image](../images/f07-03.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-03.jpg)'
- en: '*Figure 7-3: LMC7660 pinout*'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-3：LMC7660 引脚图*'
- en: One 16×2 LCD
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 16×2 LCD 显示器
- en: One I²C adapter, if not included with the LCD
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 I²C 适配器，如果 LCD 没有自带的话
- en: One 5.1V Zener diode
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 5.1V 稳压二极管
- en: One 1 μF ceramic capacitor (C2)
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 1 μF 陶瓷电容（C2）
- en: Five 0.1 μF ceramic capacitors (C1, C6, C7, C8, C9)
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 五个 0.1 μF 陶瓷电容（C1，C6，C7，C8，C9）
- en: One 0.01 μF ceramic capacitor (C5)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 0.01 μF 陶瓷电容（C5）
- en: One 22 μF tantalum capacitor (C10)
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 22 μF 钽电容（C10）
- en: Two 10 μF tantalum capacitors (C3, C4)
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 两个 10 μF 钽电容（C3，C4）
- en: One 10-kilohm, 1/8 W resistor (R5)
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 10 千欧，1/8 W 电阻（R5）
- en: Three 10-kilohm, 1/8 W resistors (R1, R2, R10)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 三个 10 千欧，1/8 W 电阻（R1，R2，R10）
- en: Two 1-kilohm, 1/8 W resistors (R8, R9)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 两个 1 千欧，1/8 W 电阻（R8，R9）
- en: One pH probe
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 pH 探头
- en: Four 4-40×1/2-inch screws
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 四个 4-40×1/2 英寸螺丝
- en: Eight 4-40 nuts and washers
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 八个 4-40 螺母和垫圈
- en: Four 2-56×1/2-inch screws
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 四个 2-56×1/2 英寸螺丝
- en: 28- or 30-gauge hookup wire
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 28 或 30 号导线
- en: One Hammond 1591 BTCL plastic enclosure
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 Hammond 1591 BTCL 塑料外壳
- en: Heat-shrink tubing
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 热缩管
- en: '**Downloads**'
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**下载**'
- en: '**Sketch**   *pHMeter.ino*'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**草图**   *pHMeter.ino*'
- en: '**Cover template**   *pHCover.pdf*'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '**封面模板**   *pHCover.pdf*'
- en: '**Side template**   *pHBoxSide.pdf*'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '**侧面模板**   *pHBoxSide.pdf*'
- en: '**Shield**   *pHMeter.pcb*'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**屏蔽**   *pHMeter.pcb*'
- en: '**About the pH Probe**'
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**关于 pH 探头**'
- en: 'At the heart of the Custom pH Meter is a pH probe. This measures the activity
    of hydrogen ions in a solution, which in turn determines the acidity or alkalinity
    of that solution. A basic pH probe, like the one in [Figure 7-4](ch07.xhtml#ch07fig4),
    comprises two elements: a reference electrode and a measurement electrode. I won’t
    go into the chemistry of the probe or the exact mechanism of a pH probe’s operation,
    but I will describe its output and interface to the circuitry that provides the
    readout.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义 pH 测量仪的核心是 pH 探头。它测量溶液中氢离子的活性，从而决定该溶液的酸碱性。一个基本的 pH 探头，如[图 7-4](ch07.xhtml#ch07fig4)所示，包含两个元件：参考电极和测量电极。我不会深入探讨探头的化学原理或
    pH 探头的具体工作机制，但我会描述它的输出以及与电路的接口，电路提供显示读数。
- en: A pH probe produces a voltage proportional to the pH of the solution the probe
    is immersed in. The pH range starts at 0, which is the most acidic, and goes up
    to 14, which is the most alkaline. The probe delivers an output voltage from approximately
    –420mV to +420mV, representing an increment of roughly 60mV per unit of pH. A
    neutral pH of 7.0, at mid-scale from 0 to 14, is represented by 0.0mV.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: pH 探头产生的电压与探头浸入溶液的 pH 值成正比。pH 范围从 0 开始，最酸性，到 14，最碱性。探头输出的电压大约在 -420mV 到 +420mV
    之间，表示每个 pH 单位大约增量为 60mV。中性 pH 7.0 位于从 0 到 14 的中间值，表示为 0.0mV。
- en: 'The nature of the probe’s output makes the Custom pH Meter’s basic function
    in this project relatively straightforward: it needs to read and display a voltage.
    But there are a few other things the Custom pH Meter circuit has to account for.
    First, while commercial probes are built to the highest standards, they can be
    off by some nominal amount and require adjustment. Second, we’re dealing with
    relatively small values, so to maintain accuracy, components and circuits have
    to be carefully selected. Further, as probes are used and age, they tend to change
    slightly, requiring recalibration.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 探头输出的特性使得本项目中的自定义 pH 测量仪的基本功能相对简单：它需要读取并显示电压。但自定义 pH 测量仪电路还需要考虑其他一些问题。首先，虽然商用探头是按照最高标准制造的，但它们可能存在一定的误差，需要调整。其次，我们处理的是相对较小的值，因此为了保持准确性，组件和电路必须精心挑选。此外，随着探头的使用和老化，它们通常会发生轻微变化，需要重新校准。
- en: '![image](../images/f07-04.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-04.jpg)'
- en: '*Figure 7-4: A simplified drawing of a pH probe*'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-4：pH 探头的简化图*'
- en: Finally, the pH probe has a very high electrical impedance—perhaps 10 to 100
    megaohms or higher. Practically speaking, a high impedance means that despite
    the voltage level, there is very little energy available to change the state or
    condition of another device, so the circuit needs to amplify that signal. This
    requires a specialized input circuit involving an op-amp, which is designed to
    minimize noise while handling the high-impedance signal. Today’s semiconductors
    are up to the task, and as I discuss in “[Some Notes on IC Selection](ch07.xhtml#ch07lev2sec4)”
    on [page 196](ch07.xhtml#page_196), I checked out several op-amps to find one
    that seemed to offer the best combination of performance and price. Of course,
    while a good op-amp is important, the circuitry feeding input to the op-amp must
    also be as efficient as possible to achieve an accurate reading without introducing
    noise that could affect the sensitive output of the pH probe.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，pH 探头具有非常高的电阻值——可能是 10 到 100 兆欧姆或更高。从实际角度看，高电阻意味着尽管电压水平较高，但几乎没有能量能够改变其他设备的状态或条件，因此电路需要放大这个信号。这需要一个专门的输入电路，通常会涉及运算放大器（op-amp），其设计目的是在处理高阻抗信号时尽量减少噪声。今天的半导体技术已经能够满足这一需求，正如我在[《集成电路选择的一些注意事项》](ch07.xhtml#ch07lev2sec4)中提到的，[第
    196 页](ch07.xhtml#page_196)里，我检查了几种运算放大器，找到了最适合性能与价格平衡的型号。当然，虽然选择一款好的运算放大器很重要，但输入电路同样需要尽可能高效，以便在不引入噪声的情况下，准确读取
    pH 探头的敏感输出。
- en: '**TAKING CARE OF YOUR pH PROBE**'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '**如何保养你的 pH 探头**'
- en: While your pH probe probably came with instructions, there are a couple of things
    you can do to increase its useful life. First, of course, follow the manufacturer’s
    instructions. Second, unless the manufacturer specifies differently, when storing
    your probe, immerse the business end in a 3-molar solution of potassium chloride
    (KCl), as shown in [Figure 7-5](ch07.xhtml#ch07fig5). You should be able to buy
    such a solution wherever you purchase your pH buffer solutions at a very modest
    cost. (A *buffer solution* is a mix of relatively weak acidic and alkaline chemicals
    that produces a specific pH.) You can also compound your own by dissolving about
    22 g of KCl in 100 mL of distilled water.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你的 pH 探头可能附带了使用说明书，但有一些方法可以延长其使用寿命。首先，当然，按照制造商的说明进行操作。其次，除非制造商另有说明，存储探头时，应将探头的工作端浸入
    3 摩尔浓度的氯化钾（KCl）溶液中，如[图 7-5](ch07.xhtml#ch07fig5)所示。你应该能在购买 pH 缓冲溶液的地方以相当低廉的价格购买到这种溶液。（*缓冲溶液*是由相对弱酸性和碱性化学物质混合而成的溶液，能保持特定的
    pH 值。）你也可以通过将约 22 克 KCl 溶解在 100 毫升蒸馏水中来自制这种溶液。
- en: '![image](../images/f07-05.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-05.jpg)'
- en: '*Figure 7-5: The pH probe I used for this project. The tip is protected in
    a small vial of KCl solution with a rubber seal*.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-5：我在本项目中使用的 pH 探头。探头尖端被浸泡在含有橡胶密封的 KCl 溶液的小瓶中*。'
- en: Even for relatively short storage times, it is best to keep the probe in a pH
    7 buffer solution rather than in air or water. Between samples or when moving
    the probe to a different buffer solution, make sure to rinse the probe carefully.
    Most manufacturers suggest rinsing with distilled water. You can gently blot the
    excess water off the probe, but most manufacturers caution against rubbing or
    wiping the electrode bulb for fear of creating an error due to polarization.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 即使是相对较短的存储时间，最好将探头存放在 pH 7 缓冲溶液中，而不是在空气或水中。在每次样品之间，或将探头转移到不同的缓冲溶液时，务必小心冲洗探头。大多数制造商建议使用蒸馏水冲洗。你可以轻轻地将多余的水分拍掉，但大多数制造商警告不要擦拭或擦干电极球，以免由于极化效应而导致测量误差。
- en: When calibrating your probe prior to a measurement, the manufacturers of even
    top-of-the-line pH meters suggest calibrating with a buffer closest to the expected
    pH of the sample. For example, if you suspect the pH value of the sample to be
    around 9, use a pH 10 buffer solution to calibrate the instrument.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在测量之前对探头进行校准时，即便是顶级 pH 计的制造商也建议使用最接近预期样品 pH 值的缓冲溶液进行校准。例如，如果你怀疑样品的 pH 值约为 9，那么应使用
    pH 10 的缓冲溶液来校准仪器。
- en: '**The Schematic**'
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**原理图**'
- en: The Custom pH Meter circuits shown in [Figures 7-6](ch07.xhtml#ch07fig6) and
    [7-7](ch07.xhtml#ch07fig7) comprises a dual op-amp, a voltage inverter to supply
    ±5V to the op-amp, a voltage regulator, a temperature IC, an Arduino, and an I²C
    LCD. You have the option to build your Custom pH Meter with an Arduino Nano or
    an Arduino Pro Mini. I had an easier time building the breadboard with a Nano,
    but my final product (and therefore, the shield PCB file provided for this chapter)
    uses the Pro Mini to conserve space.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-6](ch07.xhtml#ch07fig6) 和 [图 7-7](ch07.xhtml#ch07fig7) 所示的定制 pH 计电路包括一个双运算放大器、一个电压反转器（为运算放大器提供
    ±5V 电压）、一个电压调节器、一个温度集成电路、一个 Arduino 和一个 I²C LCD 显示屏。你可以选择使用 Arduino Nano 或 Arduino
    Pro Mini 来构建你的定制 pH 计。我在使用 Nano 构建面包板时更为顺利，但我的最终产品（因此，本章节提供的扩展 PCB 文件）使用 Pro Mini
    来节省空间。'
- en: The rest of this section describes the reasoning behind the design decisions
    made in creating this schematic.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 本节的其余部分将介绍在设计此原理图时做出的决策及其背后的原因。
- en: '![image](../images/f07-06.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-06.jpg)'
- en: '*Figure 7-6: The basic schematic for the Custom pH Meter, using an Arduino
    Nano*'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-6：使用 Arduino Nano 的定制 pH 计基本原理图*'
- en: '![image](../images/f07-07.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-07.jpg)'
- en: '*Figure 7-7: The basic schematic for the Custom pH Meter, using a Deek-Robot
    Pro Mini*'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7-7：使用 Deek-Robot Pro Mini 的定制 pH 计基本原理图*'
- en: '***Integrating the High-Impedance Probe***'
  id: totrans-82
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***集成高阻抗探头***'
- en: Recall that the pH probe delivers a DC output voltage that swings from –420mV
    to +420mV, giving approximately 60mV per unit of pH. This output is delivered
    at very high impedance, and the circuit must accept the probe’s high-impedance
    input without adding spurious signals, reduce the impedance to a manageable level,
    and amplify the input so it can be read by the analog inputs of the Arduino. The
    circuit also has to provide a way to adjust the voltage that goes to the display
    in order to calibrate the probe in terms of both offset and gain (see “[Offset
    and Gain](ch07.xhtml#ch07note2)” on [page 194](ch07.xhtml#page_194) for a crash
    course).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，pH探头输出的直流电压范围从–420mV到+420mV，大约每个pH单位对应60mV。此输出具有非常高的阻抗，电路必须接受探头的高阻抗输入而不引入杂散信号，降低阻抗到可管理的水平，并放大输入信号，以便Arduino的模拟输入能够读取。电路还必须提供一种方法来调整送往显示器的电压，以便在偏置和增益方面校准探头（请参见“[偏置和增益](ch07.xhtml#ch07note2)”在[第194页](ch07.xhtml#page_194)的快速教程）。
- en: To handle the high-impedance probe output, the input of the op-amp must have
    a very high impedance, typically in the teraohm (1×10^(12) ohms) range, to read
    any voltage at all. The input of the op-amp must also have a low input current
    (the two go together); this is typically around 10 picoamps (1×10^(−12) amps),
    though some op-amps offer input current below 25 femtoamps (1×10^(−15) amps).
    It’s also good if the op-amp has very low *drift* (that is, tendency to change
    output with no change in input).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 为了处理高阻抗探头输出，运算放大器的输入必须具有非常高的阻抗，通常在太赫（1×10^(12)欧姆）范围内，才能读取任何电压。运算放大器的输入还必须具有低输入电流（这两者是相关的）；通常约为10皮安（1×10^(−12)安培），尽管一些运算放大器的输入电流低于25飞安（1×10^(−15)安培）。如果运算放大器具有非常低的*漂移*（即在输入不变的情况下输出发生变化的倾向），那将是非常好的。
- en: '***General Design Notes***'
  id: totrans-85
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***一般设计注意事项***'
- en: The Custom pH Meter is designed to work from a power supply of 9V, selectable
    between a battery and a plug-in module via a power switch (see the schematics
    in [Figures 7-6](ch07.xhtml#ch07fig6) and [7-7](ch07.xhtml#ch07fig7)). Because
    the input from the AC source could be suspect, the Custom pH Meter uses an external
    voltage regulator rather than the regulator built into the Pro Mini. An LM7805
    with bypass capacitors at both the input and output worked well in previous projects,
    and this project uses the same regulator. This regulator supplies positive 5V
    to the inverter, the op-amp circuitry, and the Arduino. The power switch is a
    three-position switch, where the center is off, one position selects the battery,
    and the other selects AC power.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 定制pH计设计为使用9V电源，可以通过电源开关在电池和插入模块之间选择（请参见[图7-6](ch07.xhtml#ch07fig6)和[图7-7](ch07.xhtml#ch07fig7)中的原理图）。由于交流电源的输入可能不稳定，定制pH计使用外部电压调节器，而不是Pro
    Mini内建的调节器。一个LM7805电压调节器，输入和输出端都带有旁路电容器，在以前的项目中效果良好，本项目也使用了同样的调节器。该调节器为逆变器、运算放大器电路和Arduino提供+5V电源。电源开关是一个三位置开关，中间是关闭位置，一个位置选择电池，另一个位置选择交流电源。
- en: 'Because the pH probe provides an output of ±420mV, this circuit has to be able
    to handle a *bipolar* (above and below ground) voltage. The simplest way to achieve
    that is to use an op-amp with positive and negative supplies and a ground in the
    middle, which in turn requires a power supply that can provide those voltages.
    The LMC7660 voltage inverter is the solution: it converts the positive 5V from
    the voltage regulator to +5V and –5V, with ground in the middle. Thus, the op-amp
    can handle the input signal as long as it doesn’t go above +5V or below –5V.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 由于pH探头提供的输出为±420mV，因此该电路必须能够处理*双极性*（高于和低于地面）电压。实现这一点的最简单方法是使用一个具有正负电源和中间接地的运算放大器，这就需要一个能够提供这些电压的电源。LMC7660电压逆变器是解决方案：它将来自电压调节器的+5V转化为+5V和–5V，并且中间有地面。这样，运算放大器就能处理输入信号，只要它不超过+5V或低于–5V。
- en: '**NOTE**'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*Most voltage inverters are very similar to the LMC7660 and require minimal
    external components—in this case, only two capacitors. This circuit uses tantalum
    capacitors because of their compact size and reliability, but electrolytic capacitors
    could be used*.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '*大多数电压逆变器与LMC7660非常相似，且所需的外部组件最小—在这种情况下，仅需两个电容器。该电路使用钽电容器，因为它们体积小且可靠，但也可以使用电解电容器*。'
- en: '**OFFSET AND GAIN**'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**偏置和增益**'
- en: To demonstrate how offset and gain work, [Figure 7-8](ch07.xhtml#ch07fig8) illustrates
    the continuum of voltage used in this project, from –5V to +5V.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示偏置和增益如何工作，[图7-8](ch07.xhtml#ch07fig8)展示了本项目中使用的电压范围，从–5V到+5V。
- en: '![image](../images/f07-08.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-08.jpg)'
- en: '*Figure 7-8: An illustration of what happens to the voltage when changing the
    gain and offset on the Custom pH Meter*'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-8：改变增益和偏移量时自定义pH计中电压变化的示意图*'
- en: Imagine that when the voltage from the pH probe is amplified, there is a voltage
    range A. In this illustration, voltage A represents half the supply voltage, ranging
    from –2.5V to +2.5V for a total of 5V. If the gain is adjusted, the voltage range
    will still center on 0V but will increase or decrease to some voltage range B.
    Adjusting the gain will always increase or decrease the lower and higher ends
    of the selected voltage sector equally, provided the original sector is within
    the total voltage range.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，当pH探头的电压被放大时，会有一个电压范围A。在这个示例中，电压A代表供电电压的一半，范围从–2.5V到+2.5V，总共是5V。如果增益被调整，电压范围仍然会以0V为中心，但会增加或减少到某个电压范围B。调整增益时，所选电压范围的最低和最高端将始终以相同的幅度增加或减少，前提是原始电压范围在总电压范围内。
- en: The entire voltage sector can also be shifted within the continuum by adjusting
    the offset, as illustrated in [Figure 7-8](ch07.xhtml#ch07fig8). The range of
    voltage A2 still encompasses the same total voltage as range A, but its minimum
    and maximum voltages are different. In this instance, the center of the voltage
    range is shifted from 0V to 2.5V, such that voltage A2 swings from 0V to 5V.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 通过调整偏移量，整个电压范围也可以在连续体内移动，如[图7-8](ch07.xhtml#ch07fig8)所示。电压范围A2仍然包含与范围A相同的总电压，但其最小电压和最大电压不同。在这种情况下，电压范围的中心从0V移动到2.5V，使得电压A2的范围从0V到5V。
- en: This offset can be any voltage within the supply range, but in practice, it’s
    best not to run the voltage to the voltage rails (the maximum and minimum of the
    supply voltage). Instead, leave some buffer between the rails and the voltage
    range a project needs.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这个偏移量可以是供电范围内的任何电压，但实际上最好不要将电压推到电压轨（即供电电压的最大值和最小值）。相反，应在电压轨和项目所需的电压范围之间留出一些缓冲区。
- en: “[The Sketch](ch07.xhtml#ch07lev1sec11)” on [page 205](ch07.xhtml#page_205)
    shows that the Custom pH Meter maps the voltage within the limits of the supply
    to the Pro Mini (0V to +5V) to be an average of the gain selected. The final gain
    and offset adjustments for this project are made using the prepared buffer solutions
    and the potentiometers in the circuit.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: “[电路图](ch07.xhtml#ch07lev1sec11)”在[第205页](ch07.xhtml#page_205)中显示，自定义pH计将电压映射到Pro
    Mini的供电限制内（0V到+5V），并使其成为所选增益的平均值。本项目的最终增益和偏移调整是通过使用预先准备的缓冲溶液和电路中的电位器来完成的。
- en: The Custom pH Meter uses a Deek-Robot Pro Mini Arduino clone because this clone
    is small and inexpensive; however, a Nano could work if you make your own shield-printed
    circuit board. While the Pro Mini does not include a USB interface, there are
    a variety of ways to program it with little effort. See “[Connecting and Programming
    an Arduino Pro Mini](ch00.xhtml#ch00lev2sec4)” on [page 8](ch00.xhtml#page_8)
    if you’ve never used this particular Arduino before.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义pH计使用Deek-Robot Pro Mini Arduino克隆板，因为该克隆板体积小且价格便宜；不过，如果自己制作印刷电路板，Nano也可以使用。虽然Pro
    Mini没有USB接口，但有多种方式可以轻松地对其进行编程。如果你以前从未使用过这款Arduino，请参阅[第8页](ch00.xhtml#page_8)的“[连接和编程Arduino
    Pro Mini](ch00.xhtml#ch00lev2sec4)”章节。
- en: The I²C interface for the display comprises only two wires—clock and data—in
    addition to power and ground. The I²C protocol can also be used with several I²C
    devices at the same time, if required.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 显示器的I²C接口仅包括两根线——时钟和数据，此外还有电源和接地。如果需要，I²C协议也可以与多个I²C设备同时使用。
- en: '***The Op-Amp Circuit in Detail***'
  id: totrans-100
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***运算放大器电路详细介绍***'
- en: 'In the op-amp circuit, there are resistors and capacitors to minimize the effect
    of spurious signals and to couple the circuits. The amplifier circuit has two
    stages, which are both included in the single package of the opamp: the first
    handles the high impedance from the probe and offers gain adjustment, while the
    second is a buffer that provides the offset, both for calibration and to accommodate
    the 0 to +5V analog input required by the Arduino. Each stage has a 10-turn trimmer
    potentiometer. The trimmer in the first stage is 1 megaohm, and it sets the gain;
    the trimmer in the buffer stage is 10 kilohms, and it is used for the offset.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在运算放大器电路中，使用了电阻和电容来最小化杂散信号的影响，并对电路进行耦合。放大电路有两个阶段，两个阶段都包含在运算放大器的单一封装中：第一个阶段处理来自探头的高阻抗并提供增益调整，第二个阶段是缓冲器，提供偏移量，既用于校准，也为了适应Arduino所需的0到+5V模拟输入。每个阶段都有一个10转的调整电位器。第一个阶段的电位器为1兆欧，它设置增益；缓冲阶段的电位器为10千欧，用于调整偏移量。
- en: The first stage provides most of the gain (the output is roughly six times the
    value of the input), which is adjustable via a negative feedback resistor (R2)
    and a potentiometer (R3). The adjustment range is a bit wider than required, but
    it works out quite well. Initially, I tightened up on the range but found that
    for some probes, a smaller range makes calibration difficult.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 第一级提供了大部分增益（输出大约是输入的六倍），增益可以通过一个负反馈电阻（R2）和一个电位器（R3）进行调节。调整范围比实际需要的稍宽，但效果还是很好。最初，我对范围进行了收紧，但发现对于某些探头来说，较小的范围会使校准变得困难。
- en: The second stage op-amp circuit uses a fixed feedback resistor of 10 kilohms
    (R5), while the noninverting input uses a combination of two resistors of 10 kilohms
    each (R1 and R2) and a 10-kilohm potentiometer (R4) to provide the offset adjustment.
    This stage provides a small amount of gain in addition to the offset adjustment
    to allow the pH probe voltage to center on 0mV (pH of 7) and swing between –420mV
    (pH of 0) and +420mV (pH of 14). In addition, this buffer stage changes the scale
    from a negative and positive voltage to a positive-only voltage for the Arduino.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 第二级运算放大器电路使用了一个固定的反馈电阻（R5），值为10千欧，而非反相输入使用了两个10千欧电阻（R1和R2）和一个10千欧的可调电位器（R4）来提供偏移调节。该阶段除了提供偏移调节外，还提供了少量增益，使得pH探头电压能够集中在0mV（pH为7）并在–420mV（pH为0）和+420mV（pH为14）之间波动。此外，该缓冲阶段将电压范围从正负电压转换为仅正电压，供Arduino使用。
- en: Using the buffer stage to both provide the calibration offset and convert the
    plus-minus voltage swing works out conveniently with little, if any, discernable
    downside. Optionally, a separate reference voltage could be generated, but that
    would add additional components and offers little advantage over offsetting the
    voltage from the buffer stage and referencing the voltage to ground.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 使用缓冲阶段同时提供校准偏移和转换正负电压范围是非常方便的，几乎没有什么明显的缺点。可选择生成单独的参考电压，但这会增加额外的组件，并且相比于从缓冲阶段偏移电压并将电压参考接地，几乎没有优势。
- en: At the output end of the buffer, a Zener diode (D1) and resistor (R9) are added
    to protect the Pro Mini from any overvoltage condition. No protection was added
    to protect against a negative voltage to the analog input pin; however, during
    initial setup and experimentation, the analog pin accidentally received a negative
    voltage many times with no adverse effects.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在缓冲器的输出端，添加了一个齐纳二极管（D1）和电阻（R9）来保护Pro Mini免受过电压影响。没有添加保护来防止负电压对模拟输入引脚的影响；然而，在初始设置和实验过程中，模拟引脚多次意外接收到负电压，但没有出现不良反应。
- en: '***Some Notes on IC Selection***'
  id: totrans-106
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***一些关于IC选择的说明***'
- en: 'Before settling on an IC for any project, it is a good idea to test multiple
    ICs to see which works best in your situation. When sampling chips, I suggest
    keeping notes on the pros and cons of each chip. For example, these are my notes
    on op-amp possibilities for the Custom pH Meter:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在为任何项目选择集成电路（IC）之前，最好测试多个IC，以查看哪个最适合你的情况。在采样芯片时，我建议记录每个芯片的优缺点。例如，这些是我对定制pH计的运算放大器选择的记录：
- en: '**TL072**   Worked well; a good all-around solution'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '**TL072**   表现良好；是一个不错的全能解决方案'
- en: '**TLC2262**   A good all-around solution; a toss-up between this and the TL072'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '**TLC2262**   一个不错的全能解决方案；和TL072之间难以抉择'
- en: '**OPA129**   Worked well, but not available in DIP'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '**OPA129**   表现良好，但没有DIP封装'
- en: '**LMC6001**   Worked well, but a little pricey for no advantage, at around
    $20'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '**LMC6001**   表现良好，但没有优势，价格有点贵，大约20美元'
- en: '**LMC6042**   Probably would have worked, but was difficult to set up'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**LMC6042**   可能会有效，但设置起来较为困难'
- en: '**LMP7702**   Probably would have worked, but a little pricey and was difficult
    to set up'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '**LMP7702**   可能会有效，但价格有点贵，且设置起来较为困难'
- en: After trying several op-amp circuits in the public domain with mostly disappointing
    results, I used a generalized circuit to test each of these op-amps in turn, and
    for each test, the circuit required a certain amount of tuning to work. This tuning
    included changing the circuitry to stabilize gain and minimize spurious signals
    and stray voltages. The Texas Instruments TL072P op-amp proved the best option,
    and once I made that selection, I adjusted the circuit further to optimize it
    for the Custom pH Meter. The TLC2262 also would have worked well; I used it in
    some prototype samples.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在尝试了多个公共领域的运算放大器电路并且大多结果令人失望之后，我使用了一个通用电路逐一测试这些运算放大器，并且每次测试都需要对电路进行一定的调整。调节包括改变电路以稳定增益并最小化杂散信号和杂散电压。德州仪器的TL072P运算放大器证明是最佳选择，一旦我做出了这个选择，我进一步调整了电路以优化定制pH计。TLC2262也会表现得很好，我在一些原型样品中使用过它。
- en: The other op-amps I sampled might have worked as well, or almost as well, if
    optimized like the TL072; however, that would have been time consuming for a marginal
    or zero gain. The final Custom pH Meter circuit represents a best effort within
    self-imposed limitations, like budget. For example, a top-shelf op-amp, like the
    Texas Instruments OPA627/637, probably would have worked well, but the chip alone
    had a price tag between $25 and $50, depending on the version. That would have
    brought the total budget for the project to well over $100, a self-imposed limit.
    The decision to continue the project itself was already problematic because of
    the probe’s cost ($36 at the time of writing); however, I believe the probe’s
    capabilities warrant the expense.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我试用的其他运算放大器可能也能发挥作用，或者在像TL072那样优化后，几乎能达到相同效果；然而，这样做会非常耗时，而所得增益则微乎其微，甚至为零。最终定制的pH计电路是在自我设限下的最佳努力，例如预算。例如，一款顶级运算放大器，如德州仪器的OPA627/637，可能会很好地工作，但仅芯片的价格在25美元到50美元之间，具体取决于版本。这将使项目的总预算超过100美元，超出了自设的预算限制。继续进行该项目本身就已经很有问题，因为探头的成本（在写作时为36美元）；然而，我相信探头的性能是值得花费这笔钱的。
- en: '**Preparing the LCD**'
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**准备LCD**'
- en: Before you build the circuit on a breadboard, make sure the LCD is prepared
    for prototyping. Though the LCD used in this project can be purchased with the
    I²C adapter board, I have often had to buy the LCD and the adapter board separately,
    as was the case this time. When you buy them separately, the adapter board usually
    comes with header pins installed, and all you should have to do is insert them
    into the display and solder them. “[Affixing the I²C Board to the LCD](ch00.xhtml#ch00lev1sec2)”
    on [page 3](ch00.xhtml#page_3) describes this process.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在你将电路搭建在面包板上之前，确保LCD已经准备好进行原型制作。尽管本项目使用的LCD可以与I²C适配器板一起购买，但我经常需要将LCD和适配器板分开购买，就像这次一样。当你单独购买时，适配器板通常会带有插针，您只需将它们插入显示器并进行焊接即可。
    “[将I²C板固定到LCD上](ch00.xhtml#ch00lev1sec2)”在[第3页](ch00.xhtml#page_3)中描述了这个过程。
- en: '**ON LCD BACKLIGHTS**'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '**关于LCD背光**'
- en: When I initially wired the I²C board to the display board for the Custom pH
    Meter, I cut off the cathode (K) header terminal on the display board. The anode
    and cathode headers allow you to provide a voltage to power the display’s backlight.
    The idea behind severing the connection was to include a separate switch to turn
    the backlight on and off to preserve battery current. It turned out the display
    was not readable without the backlight except in extremely bright light, so I
    abandoned that effort and manually rewired the backlight. You can experiment with
    other displays to try to find an ambient-light readable display.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当我最初将I²C板连接到定制pH计的显示板时，我切除了显示板上的阴极（K）插针。阳极和阴极插针可以为显示器的背光提供电压。切断连接的想法是加入一个单独的开关来控制背光的开关，以节省电池电流。结果发现，显示器在没有背光的情况下几乎无法读取，除非在极其明亮的光线下，因此我放弃了这个想法，并手动重新接线了背光。你可以尝试使用其他显示器，看看是否能找到一种适合环境光下阅读的显示器。
- en: '**The Breadboard**'
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**面包板**'
- en: Like most of my Arduino projects, the Custom pH Meter began with a breadboard
    (see [Figure 7-9](ch07.xhtml#ch07fig9)). Despite the somewhat ragged appearance,
    the breadboard iteration worked well.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 像我大多数Arduino项目一样，定制pH计项目从面包板开始（见[图7-9](ch07.xhtml#ch07fig9)）。尽管外观有些凌乱，但面包板版本运行良好。
- en: '![image](../images/f07-09.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-09.jpg)'
- en: '*Figure 7-9: This circuit on a breadboard served as a proof of concept for
    the Custom pH Meter*.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-9：这块面包板上的电路作为定制pH计的概念验证原型。*'
- en: In addition to the basic Custom pH Meter circuit, I added a separate circuit
    (visible in the upper-left area of the breadboard in [Figure 7-9](ch07.xhtml#ch07fig9))
    to supply a continuous, variable ±500mV test voltage so I could check the circuit
    and do some preliminary calibration prior to testing with the probe itself. This
    test circuit, shown in [Figure 7-10](ch07.xhtml#ch07fig10), comprises a separate
    voltage inverter, a pair of voltage dividers, and a potentiometer to vary the
    voltage. You may want to set up this small circuit on a separate breadboard and
    use it to do the preliminary adjustment of the finished unit.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 除了基本的定制pH计电路外，我还在面包板的左上区域（在[图7-9](ch07.xhtml#ch07fig9)中可见）增加了一个单独的电路，以提供一个连续的、可变的±500mV测试电压，这样我就可以在使用探头之前检查电路并进行一些初步的校准。这个测试电路，如[图7-10](ch07.xhtml#ch07fig10)所示，由一个独立的电压逆变器、一对电压分压器和一个调节电压的电位器组成。你可能希望将这个小电路设置在一个单独的面包板上，并用它来对完成的单元进行初步调整。
- en: '![image](../images/f07-10.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-10.jpg)'
- en: '*Figure 7-10: This circuit provided the test voltage for the Custom pH Meter*.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-10：此电路为定制pH计提供了测试电压*。'
- en: In [Figure 7-9](ch07.xhtml#ch07fig9), the pH probe is held by an inexpensive
    burette clamp attached to an old machinist’s magnetic gauge holder. The probe
    was too thin to fit in the holder, so I wrapped some foam around the probe to
    clamp it.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图7-9](ch07.xhtml#ch07fig9)中，pH探头被一个廉价的滴定管夹固定在一个旧的机床磁性量规支架上。探头太细，无法直接安装在支架上，因此我在探头周围包裹了一些泡沫来夹紧它。
- en: Preparing this breadboard turned out to be a little messier and more convoluted
    than usual because there’s a lot on the board. As shown in [Figure 7-9](ch07.xhtml#ch07fig9),
    I used a large breadboard that included four vertical breadboards and a strip
    across the top for positive and negative rails. Initially, I used an Arduino Nano
    clone to build the Custom pH Meter on the breadboard. In the finished version,
    however, I suggest using a Deek-Robot Pro Mini board to reduce the size. Both
    Arduinos use the same 5V, 16 MHz Atmel 328 processor and other components. In
    keeping with the requirement to have the shortest possible connection to the input
    of the op-amp, the BNC connector is situated to provide a relatively direct connection
    to the noninverting input of the op-amp. The voltage regulator, an LM7805, is
    located in the upper right of the breadboard and is powered with either a 9V alkaline
    battery or a 7.5V to 12V wall adapter.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 准备这个面包板比平常更加凌乱和复杂，因为面包板上有很多元件。如[图7-9](ch07.xhtml#ch07fig9)所示，我使用了一个包含四个垂直面包板和一个位于顶部用于正负轨道的条形面包板的大型面包板。最初，我使用了一个Arduino
    Nano克隆板在面包板上构建定制pH计。然而，在完成的版本中，我建议使用Deek-Robot Pro Mini板，以减少尺寸。两款Arduino都使用相同的5V、16
    MHz的Atmel 328处理器及其他组件。为了满足与运算放大器输入连接尽可能短的要求，BNC连接器被设置在能够提供相对直接连接到运算放大器的非反向输入的位置。电压调节器LM7805位于面包板的右上方，并通过9V碱性电池或7.5V至12V的壁式适配器供电。
- en: 'Here are the steps I took to construct the breadboard:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是我构建面包板的步骤：
- en: Connect all vertically oriented positive and negative rails (marked by red and
    blue stripes, respectively) to the horizontal positive and negative rails across
    the top of the breadboard.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将所有垂直方向的正负轨道（分别用红色和蓝色条纹标记）连接到面包板顶部的水平正负轨道。
- en: Mount the power inverter chip (LMC7660) on the upper-left side.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电源逆变芯片（LMC7660）安装在面包板的左上方。
- en: 'Mount capacitor C3 (10 μF) between pins 2 and 4 of the LMC7660\. (Make sure
    to observe polarity: connect the positive side to pin 2 and the negative side
    to pin 4.)'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容器C3（10 μF）安装在LMC7660的2脚和4脚之间。（请确保观察极性：将正极连接到2脚，负极连接到4脚。）
- en: 'Mount capacitor C4 (10 μF) between pin 5 of the LMC7660 and the blue negative
    rail. (Make sure to observe polarity: the plus side of the cap goes to the blue
    negative rail.)'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容器C4（10 μF）安装在LMC7660的5脚和蓝色负极轨道之间。（请确保观察极性：电容器的正极连接到蓝色负极轨道。）
- en: Connect pin 3 of the LMC7660 to the blue negative rail.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LMC7660的3脚连接到蓝色负极轨道。
- en: Connect pin 8 of the LMC7660 to the red positive rail.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LMC7660的8脚连接到红色正极轨道。
- en: Insert the voltage regulator (LM7805) into the right-hand section of the breadboard.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电压调节器（LM7805）插入面包板的右侧区域。
- en: Connect pin 1 of the LM7805 to a blank row that will accept the incoming 9V
    or 7.5V voltage. (It can accept from +7V to +12V, as shown in the schematic.)
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LM7805的1脚连接到一个空白行，该行将接收输入的9V或7.5V电压。（如原理图所示，它可以接受+7V至+12V的输入电压。）
- en: Connect pin 2 of the LM7805 to the blue negative rail.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LM7805的2脚连接到蓝色负极轨道。
- en: Connect pin 3 of the LM7805 to the red positive rail.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LM7805的3号引脚连接到红色正电源轨。
- en: Connect capacitor C2 (1 μF) from pin 1 of the LM7805 to the blue negative rail.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C2（1 μF）的一端从LM7805的1号引脚连接到蓝色负电源轨。
- en: Connect capacitor C1 (0.1 μF) from pin 3 to the blue negative rail.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C1（0.1 μF）的一端从3号引脚连接到蓝色负电源轨。
- en: Insert the TL072 IC in the breadboard; I placed it in the second vertical section.
    Observe all antistatic precautions while handling the chip.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将TL072集成电路插入面包板；我将其放置在第二个垂直区域。在操作芯片时，务必遵循所有防静电预防措施。
- en: Make the connections to the TL072 as short as possible to eliminate possible
    spurious signals.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尽可能缩短与TL072的连接，以消除可能的杂散信号。
- en: Connect capacitor C5 (0.01 μF) from pin 8 of the TL072 to the blue negative
    rail. Make the connection as close to the chip as possible to minimize effects
    of spurious signals.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C5（0.01 μF）的一端从TL072的8号引脚连接到蓝色负电源轨。尽量将连接做得靠近芯片，以最小化杂散信号的影响。
- en: Connect pin 8 of the TL072 to the red positive rail (once again, using as short
    a jumper as possible).
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将TL072的8号引脚连接到红色正电源轨（再次使用尽可能短的跳线）。
- en: Connect resistor R5 (47 kilohms) from pin 2 of the TL072 to the blue negative
    rail.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R5（47千欧姆）从TL072的2号引脚连接到蓝色负电源轨。
- en: Connect the center lead of the BNC input jack to pin 3 of the TL072 with as
    short a wire as possible.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将BNC输入插孔的中间引脚通过尽可能短的电线连接到TL072的3号引脚。
- en: Connect the ground of the BNC to the closest spot available on the blue negative
    rail. (I used a panel-mount BNC connector and screwed a piece of stiff wire to
    the flange so I could mount it very close.)
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将BNC的地线连接到蓝色负电源轨上最靠近的位置。（我使用了面板安装型BNC连接器，并将一根硬线拧到法兰上，这样我就能将其安装得非常接近。）
- en: Connect pin 4 of the TL072 to the negative voltage of the LMC7660 (pin 5).
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将TL072的4号引脚连接到LMC7660的负电压（5号引脚）。
- en: Insert one lead of capacitor C6 (0.1 μF) to pin 4 of the TL072, as close to
    the chip as possible.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C6（0.1 μF）的一端插入TL072的4号引脚，尽量靠近芯片。
- en: Insert the other end of capacitor C6 to the closest spot available on the blue
    negative rail.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C6的另一端插入蓝色负电源轨上最靠近的位置。
- en: Insert the outside pins of potentiometer R7 (1 megaohm) between pins 1 and 2
    on the TL072.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电位器R7（1兆欧姆）的外侧引脚插入TL072的1号和2号引脚之间。
- en: Insert a short jumper from pin 2 to pin 3 of potentiometer R7\. The potentiometer
    will work with only the two pins (center and one end) used. For convention and
    stability, I usually connect the center to the pin not being varied.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从电位器R7的2号引脚插入一根短跳线连接到3号引脚。该电位器仅使用两个引脚（中间和一个端点）工作。为了规范性和稳定性，我通常将中间引脚连接到不调节的引脚。
- en: Insert capacitor C7 (0.1 μF) from pin 1 to pin 2 of the TL072.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C7（0.1 μF）的一端从TL072的1号引脚连接到2号引脚。
- en: Insert resistor R8 (1 kilohm) from pin 1 to pin 6 of the TL072.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R8（1千欧姆）插入TL072的1号引脚和6号引脚之间。
- en: Connect one lead of capacitor C8 (0.1 μF) to pin 6 of the TL072 and the other
    lead of capacitor C8 to ground.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C8（0.1 μF）的一端连接到TL072的6号引脚，另一端连接到地线。
- en: Connect resistor R10 (10 kilohms) between pins 6 and 7 of the TL072.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R10（10千欧姆）连接在TL072的6号引脚和7号引脚之间。
- en: In an open area of the breadboard (as close to the TL072 as possible), insert
    potentiometer R4 (10 kilohms).
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在面包板的空旷区域（尽量靠近TL072），插入电位器R4（10千欧姆）。
- en: Connect one side of resistor R2 (10 kilohms) to pin 1 of potentiometer R4.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R2（10千欧姆）的一端连接到电位器R4的1号引脚。
- en: Connect the other side of resistor R2 to negative 5V (pin 5 of the LMC7660).
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R2的另一端连接到负5V（LMC7660的5号引脚）。
- en: Connect one side of resistor R1 (10 kilohms) to pin 3 of potentiometer R4.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R1（10千欧姆）的一端连接到电位器R4的3号引脚。
- en: Connect the other side of resistor R1 to the red positive rail.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R1的另一端连接到红色正电源轨。
- en: Connect pin 2 (the center pin or slider) of potentiometer R4 to pin 5 of the
    TL072.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电位器R4的2号引脚（中间引脚或滑动端）连接到TL072的5号引脚。
- en: Connect one lead of capacitor C9 (0.1 μF) to pin 5 of the TL072 (as close to
    the pin as possible) and the other lead to the blue negative rail.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容C9（0.1 μF）的一端连接到TL072的5号引脚（尽量靠近引脚），另一端连接到蓝色负电源轨。
- en: Insert the Arduino Nano into the breadboard. I placed it in the second row from
    the left toward the bottom of the board so the USB connection would be easily
    available.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Arduino Nano插入面包板。我将其放置在面包板从左数的第二排，以便USB连接易于访问。
- en: Connect 5V from the Nano (pin 27) to the red positive rail.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Nano的5V（27号引脚）连接到红色正电源轨。
- en: Connect the ground of the Nano (pin 29) to the blue negative rail.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Nano的地线（29号引脚）连接到蓝色负电源轨。
- en: Connect one side of resistor R9 (1 kilohm) to pin 7 of the TL072.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻R9（1千欧姆）的一端连接到TL072的7号引脚。
- en: Connect the other side of resistor R9 to A0 (pin 26) of the Nano. You may have
    to identify a blank space on the breadboard and then use a jumper wire.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻 R9 的另一端连接到 Nano 的 A0（第 26 脚）。你可能需要在面包板上找一个空位，然后使用跳线。
- en: Connect the anode of the Zener diode (D1) to pin A0 on the Nano.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将齐纳二极管（D1）的阳极连接到 Nano 的 A0 引脚。
- en: Connect the cathode of the Zener diode to the blue negative rail.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将齐纳二极管的阴极连接到蓝色负极轨道。
- en: Connect the positive lead of capacitor C10 (22 μF) to A0 of the Nano.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容 C10（22 μF）的正极引脚连接到 Nano 的 A0 引脚。
- en: Connect the other lead of capacitor C10 to the blue negative rail.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电容 C10 的另一引脚连接到蓝色负极轨道。
- en: Make a four-wire cable for the LCD with wires for plus, minus, SDA, and SCL.
    (See “[Connectors Used in This Book](ch00.xhtml#ch00lev1sec6)” on [page 18](ch00.xhtml#page_18)
    if you’ve never made a cable.)
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为 LCD 制作一条四线电缆，包括正极、负极、SDA 和 SCL 线。（如果你从未制作过电缆，请参阅[本书中使用的连接器](ch00.xhtml#ch00lev1sec6)，见[第18页](ch00.xhtml#page_18)。）
- en: Connect the positive and negative wires of the LCD harness to the red positive
    and blue negative rails, respectively.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LCD 线束的正负线分别连接到红色正极和蓝色负极轨道。
- en: Connect the SDA pin from the LCD to A4 (pin 22) of the Nano.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LCD 的 SDA 引脚连接到 Nano 的 A4（第 22 引脚）。
- en: Connect the SCL pin from the LCD to A5 (pin 21) of the Nano.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 LCD 的 SCL 引脚连接到 Nano 的 A5（第 21 引脚）。
- en: 'In [Figure 7-9](ch07.xhtml#ch07fig9), at the upper left of the board, you will
    see four resistors and a potentiometer on three wires. That’s the probe voltage
    simulator circuit in [Figure 7-10](ch07.xhtml#ch07fig10). To wire up the simulator
    circuit, make the following connections:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图 7-9](ch07.xhtml#ch07fig9)中，板子左上角会看到四个电阻和一个通过三条线连接的电位器。这是[图 7-10](ch07.xhtml#ch07fig10)中的探针电压模拟电路。要接线模拟电路，进行以下连接：
- en: Connect the open end of resistor R5 (10 kilohms) to negative 5V (pin 5 of the
    LMC7660).
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻 R5（10 千欧）的开口端连接到负 5V（LMC7660 的第 5 引脚）。
- en: Connect the open end of resistor R1 (10 kilohms) to the red positive rail.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻 R1（10 千欧）的开口端连接到红色正极轨道。
- en: At the juncture of resistor R1 (10 kilohms) and resistor R2 (1 kilohm), connect
    pin 1 of potentiometer R3 (20 kilohms).
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在电阻 R1（10 千欧）和电阻 R2（1 千欧）的连接处，连接电位器 R3（20 千欧）的第 1 脚。
- en: At the juncture of trimmer R4 (1 kilohm) and resistor R5 (10 kilohms), connect
    pin 3 of the potentiometer R3 (20 kilohms).
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在电位器 R4（1 千欧）和电阻 R5（10 千欧）的连接处，连接电位器 R3（20 千欧）的第 3 脚。
- en: Connect the center lead (pin 2) of potentiometer R3 (20 kilohms) to pin 3 of
    the TL072.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电位器 R3（20 千欧）的中间引脚（第 2 脚）连接到 TL072 的第 3 脚。
- en: The temperature sensor is not included in the breadboard.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 温度传感器不包含在面包板中。
- en: Finally, calibrate the Custom pH Meter. I suggest calibrating first with the
    simulator circuit and then with the actual probe, as described in the next section.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，校准自定义 pH 表。我建议先使用模拟电路进行校准，然后再使用实际探针，具体步骤见下一节。
- en: '**Calibrating the Custom pH Meter**'
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**自定义 pH 表的校准**'
- en: Calibrating the Custom pH Meter for the first time may be a little trying, but
    it shouldn’t take long to get the hang of it, and it should work well afterward.
    First, set both the scale and offset potentiometers as close to the middle of
    their ranges as possible. Because pH 7 is neutral, start there, put the probe
    in the pH 7 solution, and adjust the offset until the display reads 7.00.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次校准自定义 pH 表可能会有点困难，但一旦熟悉了操作，就不需要太长时间，之后应该会运行得很好。首先，将标度电位器和偏置电位器都调整到其范围的中间位置。因为
    pH 7 是中性，所以从 pH 7 开始，将探针放入 pH 7 溶液中，并调整偏置电位器，直到显示屏显示为 7.00。
- en: Next, clean the probe, place it in the pH 4 solution, and adjust the scale trimmer
    until the display reads 4.00\. After that, clean the probe again, and try the
    pH 7 solution again; the reading should remain close to center. If it is off center,
    then adjust the offset to exactly 7.0 again, and repeat the process. This time,
    it should require only a small adjustment to set the scale to pH 4.0\. Now, check
    the display with the probe in the pH 10 buffer solution, see how far off the reading
    is, and adjust the scale trimmer accordingly. Repeat this process until the readings
    match all three buffer solutions. (After about three or four tries, adjusting
    both scale and offset, I got it to line up perfectly.)
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，清洁探针，将其放入 pH 4 溶液中，并调整标度微调器，直到显示屏显示为 4.00。之后，再次清洁探针，重新测试 pH 7 溶液；读数应该接近中心。如果偏离中心，则再次调整偏置，使其精确为
    7.0，并重复此过程。这一次，调整标度到 pH 4.0 只需要很小的调整。现在，将探针放入 pH 10 缓冲溶液中，检查显示，看看读数偏离多少，并相应调整标度微调器。重复这一过程，直到读数与所有三个缓冲溶液匹配。（大约三到四次尝试，调整标度和偏置后，我将其完美校准。）
- en: When you know the meter works, I suggest resetting it and calibrating it again
    for practice. I was able to do it quite a bit faster the second time, with only
    two repetitions. I rechecked my pH meter several times over a period of about
    three weeks, and it seemed to stay in calibration; you should have similar results.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 当你确认仪表工作正常后，我建议你重置它并重新校准以进行练习。第二次我做得更快，只用了两次重复。我在大约三周的时间里多次检查了我的pH计，发现它似乎保持了良好的校准状态；你应该也能获得类似的结果。
- en: '**NOTE**'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*As a preliminary test, I also used the test voltage circuit in [Figure 7-10](ch07.xhtml#ch07fig10)
    to perform initial calibration. You will also need a digital voltmeter. I started
    with 0V and adjusted the offset potentiometer until the LCD showed a pH of 7\.
    Next, I adjusted the test voltage circuit to output 180mV on my digital voltmeter
    and turned the scale potentiometer until the LCD showed a pH of 10\. I then adjusted
    the test voltage to –180mV and adjusted the scale until the LCD showed a pH of
    4\. After only a couple of tries, I had good results, so I disconnected the test
    supply and replaced it with the probe. This time, I was able to calibrate the
    meter in only a single try*.'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '*作为初步测试，我还使用了[图7-10](ch07.xhtml#ch07fig10)中的测试电压电路进行初步校准。你还需要一个数字电压表。我从0V开始，调整偏置电位器，直到LCD显示pH为7。接下来，我调整测试电压电路，使其在数字电压表上输出180mV，并转动刻度电位器，直到LCD显示pH为10。我然后将测试电压调整为-180mV，并调整刻度，直到LCD显示pH为4。经过几次尝试后，我得到了不错的结果，于是我断开了测试电源并替换成了探头。这一次，我只用了一个尝试就成功校准了仪表*。'
- en: 'When your meter is built and calibrated, try testing it on some common household
    products, like these:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的仪表搭建并校准好后，试着用一些常见的家庭产品进行测试，比如这些：
- en: '• Coca-Cola Classic: pH 2.5'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: • 可口可乐经典：pH 2.5
- en: '• Orange juice: pH 2.8'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: • 橙汁：pH 2.8
- en: '• Coffee: pH 5.0'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: • 咖啡：pH 5.0
- en: '• 5 percent ammonia solution: pH 11'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: • 5%氨水溶液：pH 11
- en: '• Clorox bleach: pH 11.9'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: • 漂白水：pH 11.9
- en: '**IN AN ANALOG FRAME OF MIND**'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '**从模拟思维角度看**'
- en: Some of us dinosaurs still like analog readouts, and for those holdouts mired
    in the 20th century, I have included provisions in the schematics in [Figures
    7-6](ch07.xhtml#ch07fig6) and [7-7](ch07.xhtml#ch07fig7), the sketch, and the
    final shield PCB file for using an analog readout. This was a bit of an afterthought
    and it’s optional, so the series resistor for the meter is not included in the
    shield; however, the Pro Mini pin connections to the readout are. The single required
    resistor can be mounted on the rear of the meter movement. In [Figure 7-11](ch07.xhtml#ch07fig11),
    I simply connected the meter to the breadboard circuit.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 我们这些老古董仍然喜欢模拟读数，对于那些仍徘徊在20世纪的坚持者，我在[图7-6](ch07.xhtml#ch07fig6)和[7-7](ch07.xhtml#ch07fig7)的原理图中、草图以及最终的屏蔽PCB文件中包括了使用模拟读数的设置。这是一个稍微的后期想法，是可选的，因此屏蔽板中没有包括仪表的串联电阻器；然而，Pro
    Mini与读数器的引脚连接是有的。所需的单个电阻器可以安装在仪表表头的背面。在[图7-11](ch07.xhtml#ch07fig11)中，我只是将仪表连接到面包板电路中。
- en: '![image](../images/f07-11.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-11.jpg)'
- en: '*Figure 7-11: The Custom pH Meter breadboard circuit, with both the digital
    display and a 20 mA meter movement*'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-11：定制pH计面包板电路，包含数字显示和20mA表头*'
- en: I’ve collected analog meters and movements over the years; the meter pictured
    is a Simpson 20 mA meter movement. To drive the meter, I simply used the PWM (pulse-width
    modulation) output from pins 5 and 6 on the Pro Mini, hooked directly to the meter
    with a resistor in series. In the sketch, I centered the meter on 0V so it uses
    a positive and negative voltage.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 多年来，我收集了模拟表和表头；所示的仪表是一个Simpson 20mA表头。为了驱动该仪表，我简单地使用了Pro Mini上引脚5和6的PWM（脉宽调制）输出，直接连接到仪表，并串联一个电阻器。在草图中，我将仪表居中在0V，因此它使用正负电压。
- en: I ended up using a variable resistor to set the analog meter’s minimum and maximum
    to –420mV and +420mV, respectively. This eliminated the problem of attempting
    to set the gain and offset to match the digital readout. However, that in no way
    affects the accuracy of either readout, and the digital and analog readouts match.
    They also track identically through the entire pH range.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 最终，我使用了一个可变电阻器，将模拟表的最小值和最大值分别设置为-420mV和+420mV。这样解决了尝试设置增益和偏移以匹配数字读数的问题。然而，这并不会影响任何读数的准确性，数字和模拟读数是匹配的。它们也在整个pH范围内完全一致。
- en: For many meters, the case can be removed to easily place a different scale,
    as has been done in [Figure 7-11](ch07.xhtml#ch07fig11). The face on this project’s
    meter was prepared with a laser printer to make the scale reflect pH value and
    show an mV scale for reference. A nice scale can be made using a drawing program
    such as Corel Draw or Adobe Illustrator, and you can purchase full sheets of adhesive-backed
    label stock to adhere it to the original meter plate. Just be careful not to damage
    the needle or movement in the process.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 对于许多仪表，可以拆卸外壳以方便更换不同的刻度，如[图7-11](ch07.xhtml#ch07fig11)中所示。本项目的仪表面板是用激光打印机制作的，以使刻度反映pH值并显示用于参考的mV刻度。你可以使用Corel
    Draw或Adobe Illustrator等绘图程序制作一个精美的刻度，并购买带有粘性背面的标签纸，将其粘贴到原始仪表板上。只需小心操作，避免在过程中损坏指针或机芯。
- en: '**About the Effects of Temperature**'
  id: totrans-205
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**关于温度的影响**'
- en: Thus far, I have not addressed the issue of temperature, but a solution’s pH
    value is temperature-dependent, as illustrated in [Figure 7-12](ch07.xhtml#ch07fig12).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我还没有处理温度问题，但溶液的pH值是温度依赖的，正如[图7-12](ch07.xhtml#ch07fig12)所示。
- en: '![image](../images/f07-12.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-12.jpg)'
- en: '*Figure 7-12: How pH varies with temperature*'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-12：pH值如何随温度变化*'
- en: The effect of temperature on pH at or around room temperature (25°C) is nominal.
    In fact, according to the chart, the difference in pH from 25°C to 0°C would measure
    as little as half a pH unit at both pH extremes. At 100°C, however, the difference
    is more pronounced and could be as much as 1.5 pH units.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 温度对pH值的影响在接近室温（25°C）时是微不足道的。实际上，根据图表，从25°C到0°C的pH差异在两端的pH值极限处仅为半个pH单位。然而，在100°C时，差异更加明显，可能达到1.5个pH单位。
- en: Given that information, the question becomes exactly how to handle the effect
    of temperature on pH.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些信息，问题就变成了如何处理温度对pH值的影响。
- en: '***Adding a Temperature Sensor***'
  id: totrans-211
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***添加温度传感器***'
- en: The first step to address the effects of temperature is to include a temperature
    sensor in the circuit so the Custom pH Meter knows what the temperature is. One
    of the easiest and most widely used temperature sensors in Arduino land is the
    LM35, which according to the data sheet outputs a linear 10mV/°C at 25°C, with
    half-degree accuracy. You can see this sensor in the schematics in [Figures 7-6](ch07.xhtml#ch07fig6)
    and [7-7](ch07.xhtml#ch07fig7).
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 解决温度影响的第一步是将一个温度传感器包含在电路中，这样自定义pH计就能知道温度是多少。在Arduino平台上，最简单且应用最广泛的温度传感器之一是LM35，根据数据表，该传感器在25°C时输出线性10mV/°C，并具有半度的准确度。你可以在[图7-6](ch07.xhtml#ch07fig6)和[7-7](ch07.xhtml#ch07fig7)的电路图中看到这个传感器。
- en: I hooked up the chip and included it in the sketch, but I was somewhat concerned
    about the accuracy. Unfortunately, I didn’t have a National Institute of Standards
    and Technology (NIST) temperature standard to go by, so I compared the Arduino
    sensor readings to a glass scientific thermometer, a bimetal dial thermometer,
    and a Radio Shack digital thermometer. None of these agreed with each other or
    the Arduino.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 我连接了芯片并将其包含在电路图中，但我有些担心其准确性。不幸的是，我没有国家标准与技术研究院（NIST）的温度标准可以参考，于是我将Arduino传感器的读数与玻璃科学温度计、双金属拨盘温度计以及Radio
    Shack数字温度计进行了比较。结果是这些设备的读数彼此不一致，也与Arduino的读数不符。
- en: '***Checking Accuracy***'
  id: totrans-214
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***检查准确性***'
- en: 'The obvious way to calibrate the temperature sensor was to check it against
    two temperature values I really knew: the freezing and boiling point (at sea level)
    of distilled water. Because I live about 12 feet above sea level, the altitude
    would not be a problem. The result of my ice water and boiling tests indicated
    that the sensor was indeed off by about 2 percent. This was probably due to something
    in the external circuitry, such as the reference voltage, and is compensated for
    in the sketch. The temperature IC and connections were protected in a heat-shrink
    tube to eliminate any moisture getting to the connections, as described in “[Construction](ch07.xhtml#ch07lev1sec13)”
    on [page 211](ch07.xhtml#page_211).'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 校准温度传感器的显而易见方法是将其与我非常了解的两个温度值进行比较：蒸馏水的冰点和沸点（在海平面上）。因为我住在海平面以上大约12英尺的地方，所以海拔高度不成问题。冰水和沸水测试的结果表明，传感器的读数确实偏差了大约2%。这可能是外部电路中的某些因素造成的，例如参考电压，这在电路图中已有补偿。温度IC和连接部分被热缩管保护，以避免水分进入连接部分，具体内容可以参见[《构建》](ch07.xhtml#ch07lev1sec13)章节中的[第211页](ch07.xhtml#page_211)。
- en: 'According to the manufacturer for the glass electrode I used in this project,
    the error caused by temperature can be calculated as follows:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我在此项目中使用的玻璃电极制造商的说明，温度引起的误差可以按以下方式计算：
- en: Error in pH = 0.003 × (Calibrated temperature − Current temperature) × (Neutral
    pH − Actual pH)
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: pH 误差 = 0.003 × (校准温度 − 当前温度) × (中性 pH − 实际 pH)
- en: 'For example, if the electrode is calibrated at room temperature (25°C) and
    is measuring a sample around pH 4 at around 5°C, you would calculate the error
    as follows:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果电极在室温（25°C）下校准，并且测量的样本 pH 值约为 4，温度约为 5°C，则误差计算如下：
- en: 'Calculate the temperature difference: 25°C – 5°C = 20°C'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算温差：25°C – 5°C = 20°C
- en: 'Calculate how far away from neutral the pH is: 7 pH – 4 pH = 3 pH'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算 pH 值与中性 pH 值的差距：7 pH – 4 pH = 3 pH
- en: 'The total error is: 0.003 × 20 × 3 = 0.18 pH.'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 总误差为：0.003 × 20 × 3 = 0.18 pH。
- en: As of this writing, I have not attempted to integrate the temperature reading
    into the sketch to adjust the pH automatically. The Custom pH Meter does, however,
    display the temperature on the LCD, so you can decide whether or not it’s worth
    adjusting. As you can see in [Figure 7-12](ch07.xhtml#ch07fig12), the effect is
    minimal and can easily be approximated from the chart or calculated with tests
    similar to mine.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 截至目前为止，我还没有尝试将温度读数集成到草图中以自动调整 pH 值。然而，定制 pH 计在 LCD 屏幕上显示温度，因此你可以决定是否值得进行调整。正如你在[图
    7-12](ch07.xhtml#ch07fig12)中看到的，温度对 pH 值的影响是微小的，可以通过图表近似，或者用类似我的测试方法计算出来。
- en: Chances are that most of your measurements will be at or near room temperature.
    Temperature compensation is generally required only in severe environmental and
    industrial environments. If you are taking pH readings at extreme temperatures,
    you may want to include the formula in your sketch.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 你的大多数测量值很可能会在室温下或接近室温。温度补偿通常只在恶劣的环境和工业环境中需要。如果你在极端温度下进行 pH 测量，你可能想在草图中加入该公式。
- en: '**NOTE**'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*If you’re curious, you can read more about how to compensate for pH probe
    reading errors due to temperature at* [http://www.qclscientific.com/electrochem/phtemp%20comp.html](http://www.qclscientific.com/electrochem/phtemp%20comp.html).'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果你感兴趣，可以阅读更多关于如何补偿由于温度导致的 pH 探头读数误差的内容，网址为* [http://www.qclscientific.com/electrochem/phtemp%20comp.html](http://www.qclscientific.com/electrochem/phtemp%20comp.html)。'
- en: '**The Sketch**'
  id: totrans-226
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**草图**'
- en: The Custom pH Meter sketch, like many others in this book, comprises parts of
    other sketches and examples. I’ve included comments throughout that describe how
    the most significant pieces work. This unit was tested on and used with the Arduino
    IDE version 1.0.5-r2.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 定制 pH 计草图，像本书中的许多草图一样，包含了其他草图和示例的部分。我在整个代码中加入了注释，描述了最重要的部分是如何工作的。该设备是在 Arduino
    IDE 版本 1.0.5-r2 上进行测试和使用的。
- en: '[PRE0]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The basic pH measurement functionality is straightforward: it reads an analog
    value from the analog output of the op-amp circuitry and feeds that value to an
    analog input pin of the Pro Mini. The pH and temperature are read every time the
    main loop runs and then stored in `pHvalue` and `tempC`, respectively. My first
    version of the sketch printed these directly to the LCD.'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 基本的 pH 测量功能非常简单：它从运算放大器电路的模拟输出读取一个模拟值，并将该值传输到 Pro Mini 的模拟输入引脚。每次主循环运行时都会读取
    pH 值和温度，然后分别将它们存储在 `pHvalue` 和 `tempC` 中。我第一版的草图直接将这些值打印到 LCD 屏幕上。
- en: But when I laid out the circuit on the breadboard and adjusted the components,
    I noticed that the output was a little jumpy. The pH value jumped around by two
    or three tenths of a pH unit, plus or minus some core value. For example, the
    reading might fluctuate from a pH of 4 to 4.1, then to 3.9 and back to 4.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，当我在面包板上布置电路并调整组件时，我注意到输出有些跳动。pH 值波动大约两到三十分之一的 pH 单位，围绕某个核心值上下波动。例如，读数可能从
    pH 4 跳到 4.1，再到 3.9，然后回到 4。
- en: '***Smoothing the pH and Temperature Output***'
  id: totrans-231
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***平滑 pH 和温度输出***'
- en: I went back to the drawing board. I played with the circuit, trying to find
    where the jumpiness was coming from, and failed to nail it down. Then, because
    the pH was unlikely to change quickly, I decided to average a few readings. While
    that stabilized the reading, the drawback was that the more samples I took, the
    slower the reading.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 我重新回到设计图板前。调整电路，试图找出跳动的原因，但未能解决。然后，因为 pH 值不太可能快速变化，我决定对几个读数进行平均。虽然这稳定了读数，但缺点是，我取样越多，读数的速度就越慢。
- en: However, I didn’t think that was a problem, as some expensive commercial pH
    meters I’ve used took some time to stabilize, very likely for the same reason.
    But there was still room for improvement.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我认为这不是问题，因为我使用过的一些昂贵的商业 pH 仪表也需要一些时间才能稳定，很可能是由于相同的原因。但仍然有改进的空间。
- en: Fortunately, there is a useful sketch on the Arduino website written by David
    Mellis and subsequently modified by Tom Igoe that uses an array to smooth a signal.
    (You can see the original sketch in full at *[https://www.arduino.cc/en/Tutorial/Smoothing/](https://www.arduino.cc/en/Tutorial/Smoothing/)*.)
    I used this example as a model to smooth out the pH voltage in this project’s
    sketch. I experimented with several different values and found that somewhere
    between 5 and 10 samples worked well. I set `numReadings` equal to 10, and that
    resulted in a minimal drag on stabilization period, smoothing things out fairly
    well. The sketch shown in this book stores the result after smoothing in the `average`
    variable, which is printed to the LCD at the end of the main loop. In addition,
    I continued to fine-tune the circuit, so the sketch required less and less averaging.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，Arduino 网站上有一个由 David Mellis 编写，后来由 Tom Igoe 修改的有用草图，使用数组来平滑信号。（你可以在 *[https://www.arduino.cc/en/Tutorial/Smoothing/](https://www.arduino.cc/en/Tutorial/Smoothing/)*
    上看到完整的原始草图。）我将这个示例作为模型，在本项目的草图中平滑 pH 电压。我尝试了几种不同的值，发现 5 到 10 个样本之间的值效果最佳。我将 `numReadings`
    设置为 10，这样就减少了稳定期的拖延，并且平滑效果相当好。书中显示的草图将平滑后的结果存储在 `average` 变量中，并在主循环结束时打印到 LCD
    屏幕。此外，我继续微调电路，使得草图需要的平均值越来越少。
- en: 'Notice that the same smoothing technique has been employed in the part of the
    sketch that handles input from the temperature-sensing circuit. (The `average2`
    variable contains the smoothed temperature reading result.) This was necessary
    for the same reason smoothing was needed for the pH voltage: even the temperature
    sensor output was a bit jittery. My first suspicion was that perhaps the Arduino
    Pro Mini and its voltage reference was causing hiccups in both the pH and temperature
    voltages. However, I hooked the temperature sensor directly up to my multimeter
    with a well-filtered power supply and experienced the same disruptions. In the
    end, the smoothing approach solved the problem.'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，在处理来自温度传感电路输入的草图部分中，也采用了相同的平滑技术。（`average2` 变量包含平滑后的温度读数结果。）这是必要的，因为平滑 pH
    电压时需要做同样的事情：即使是温度传感器输出也有些许波动。我最初的怀疑是，可能是 Arduino Pro Mini 及其电压参考导致了 pH 和温度电压的波动。然而，我将温度传感器直接连接到我的万用表，并使用过滤良好的电源，结果还是出现了同样的干扰。最终，平滑方法解决了这个问题。
- en: '**NOTE**'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*While the smoothing approach used in this sketch worked well, that isn’t the
    only approach you could take. For example, a moving average approach could also
    work well*.'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '*虽然这个草图中使用的平滑方法效果很好，但这并不是唯一的选择。例如，移动平均法也可以很好地工作*。'
- en: '***Centering an Analog Meter***'
  id: totrans-238
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***居中一个模拟仪表***'
- en: If you choose to use an analog meter, the Arduino will need to drive the positive
    and negative sides of the meter. The sketch maps the meter drive to reverse the
    PWM values on two pins as follows.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你选择使用模拟仪表，Arduino 需要驱动仪表的正负两端。草图将仪表驱动映射到两个引脚的 PWM 值反转，如下所示。
- en: '[PRE1]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: To obtain `meterdrive1`, the average value (the average of pH values measured)
    is mapped from 0 to 14, while `meterdrive2` is the same average value mapped from
    14 to 0\. Both mappings use the `map()` function from Arduino’s preloaded libraries.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获得 `meterdrive1`，将平均值（测量的 pH 值的平均值）从 0 映射到 14，而 `meterdrive2` 是将相同的平均值从 14
    映射到 0。两个映射都使用了 Arduino 预加载库中的 `map()` 函数。
- en: 'The `map()` function is a useful tool that lets you map a number from one range
    to another. The syntax is as follows:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '`map()` 函数是一个有用的工具，它允许你将一个数字从一个范围映射到另一个范围。其语法如下：'
- en: '[PRE2]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The `map()` function can be used to shift a set of values or, as in this case,
    to reverse the values going from 0, 14 and from 14, 0\. If you want to use an
    analog meter and don’t want to reset the indicator to the center, you can simply
    use either output pin 5 or pin 6 (leave the one you don’t use open) and change
    the value of the resistor to result in a correct reading.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '`map()` 函数可以用于调整一组值，或者像在此案例中，将值从 0 到 14 反向映射至 14 到 0。如果你想使用模拟仪表并且不想将指示器重置到中心位置，你可以简单地使用输出引脚
    5 或引脚 6（将不使用的引脚留空），并改变电阻的值以获得正确的读数。'
- en: '**A NOTE ON SIGNIFICANT FIGURES**'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '**关于有效数字的说明**'
- en: 'The following line of code prints the pH to the LCD, showing two decimal places:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 以下这行代码将pH值显示到LCD上，显示两位小数：
- en: '[PRE3]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: An earlier draft of the sketch called `lcd.print(average,1)` instead, showing
    only one decimal place, but when I was trying to minimize the jitter on the Custom
    pH Meter, I changed the display code to include two decimal places for finer granulation.
    For the most part, the pH reading remained extremely stable even to the second
    decimal place.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 草图的早期版本中调用了`lcd.print(average,1)`，只显示一位小数，但当我试图最小化自定义pH计的抖动时，我更改了显示代码，加入了两位小数，以便实现更精细的分度。大部分时间，pH读取值即使到第二位小数也保持极其稳定。
- en: In the final sketch, I kept two decimal places, but to be honest, I’m not sure
    how meaningful or accurate the second decimal place is. It has a slight tendency
    to drift as the probe sits in the solution, which I believe is normal. I dutifully
    researched and learned a lot more about *significant figures* (the digits in a
    measurement that actually have meaning) than I ever wanted to know, but I was
    still left without a definitive answer.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 在最终的草图中，我保留了两位小数，但老实说，我不确定第二位小数的意义或准确性有多高。当探头浸入溶液中时，它有轻微的漂移倾向，我认为这是正常现象。我认真研究并学习了比我想知道的更多关于*有效数字*（测量中具有实际意义的数字）的知识，但仍然没有得到一个确切的答案。
- en: 'Here’s the bottom line: all of the literature I perused regarding pH discussed
    pH in terms of integers—or at best, to the tenths position. Only in some references
    to scientific and industrial applications was the hundredths position even used
    at all.'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 结论是：我阅读的所有关于pH值的文献都讨论了整数形式的pH值——或者在最好的情况下，只有到十分位。只有在一些科学和工业应用的参考中，才会涉及到百分位。
- en: For most practical applications, you can change the sketch to use a single significant
    digit if you prefer. I do also strongly recommend that you use only a single significant
    digit during preliminary calibration, as the additional digit could be confusing.
    If you must (as much for ego as anything), you can put the second significant
    digit back, but know that its accuracy is suspect and, in my experience, it doesn’t
    really buy you anything.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 对于大多数实际应用，如果你愿意，可以将草图更改为只使用一个有效数字。我也强烈建议你在初步校准期间只使用一个有效数字，因为额外的数字可能会造成混淆。如果你非得要使用第二个有效数字（也许更多的是出于自尊心），你可以重新添加它，但要知道它的准确性存疑，并且根据我的经验，它实际上并没有带来什么额外的好处。
- en: '**The Shield**'
  id: totrans-252
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**屏蔽层**'
- en: The Custom pH Meter shield, shown in [Figure 7-13](ch07.xhtml#ch07fig13), is
    designed to minimize noise from the pH probe to the input. The Pro Mini and the
    LCD in this project can generate a little electrical noise; thus, all of the active
    analog input components are at one end of the PCB, while the Pro Mini and interface
    to the display are at the opposite end of the board. The inverter IC and associated
    components are located under the Pro Mini to conserve space.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目中显示在[图7-13](ch07.xhtml#ch07fig13)中的自定义pH计屏蔽层旨在最大限度地减少pH探头对输入的噪声。Pro Mini和LCD会产生一些电噪声，因此，所有活跃的模拟输入组件都位于PCB的一端，而Pro
    Mini和显示器的接口则位于板的另一端。反相器IC及相关组件位于Pro Mini下方，以节省空间。
- en: '![image](../images/f07-13.jpg)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-13.jpg)'
- en: '*Figure 7-13: The shield PCB has headers soldered in place only for the pins
    this project uses on the Pro Mini. The voltage inverter and capacitors are located
    under where the Pro Mini will plug in*.'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-13：屏蔽层PCB上仅为本项目在Pro Mini上使用的引脚焊接了插头。电压反相器和电容器位于Pro Mini将要插入的位置下方*。'
- en: For this project, I decided to use a double-sided circuit board. This made the
    PCB layout a lot simpler than trying to squeeze everything on one side, and it
    allowed the amplifier, buffer stage IC, and associated components to be arranged
    in close proximity. You can see the layout file for this shield, which you can
    download with the rest of this book’s resource files, in [Figure 7-14](ch07.xhtml#ch07fig14).
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个项目，我决定使用双面电路板。这使得PCB布局比试图将所有东西挤到一面上简单得多，并且它允许放大器、缓冲阶段IC及相关组件紧密排列。你可以在[图7-14](ch07.xhtml#ch07fig14)中看到这个屏蔽层的布局文件，你可以与本书的其他资源文件一起下载。
- en: '![image](../images/f07-14.jpg)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-14.jpg)'
- en: '*Figure 7-14: The top traces in the shield layout are the darkest, the bottom
    traces are second darkest, and the silkscreen layer is the lightest. Notice that
    the silkscreen layer shows boxes around various components*.'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-14：屏蔽层中的顶部走线最暗，底部走线次之，丝网印刷层最浅。请注意，丝网印刷层显示了围绕各种组件的框*。'
- en: '[Figure 7-15](ch07.xhtml#ch07fig15) shows the completed printed circuit board
    before and after population. When populating this board, make sure to take precautions
    to prevent static electricity damage to the TL072\. Because of this chip’s very
    high input impedance, it is particularly sensitive to static discharge from handling.
    I used a socket to hold the op-amp so in case it got damaged, replacing it would
    not be a major job.'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '[图7-15](ch07.xhtml#ch07fig15)展示了完成的印刷电路板，显示了装配前后的情况。在装配这块板时，要采取预防措施防止静电损坏TL072芯片。由于该芯片具有非常高的输入阻抗，因此对静电放电特别敏感。我使用了一个插座来固定运算放大器，这样万一它损坏，更换起来就不需要大费周章。'
- en: '![image](../images/f07-15.jpg)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-15.jpg)'
- en: '*Figure 7-15: The shield PCB before and after population. The voltage inverter
    and associated components are under the Pro Mini. The populated version is shown
    with the display connected*.'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-15：装配前后屏蔽PCB的情况。电压逆变器及其相关组件位于Pro Mini下方。装配后的版本显示了与显示器连接的情况*。'
- en: Also note that many resistors on this PCB are mounted vertically to save space
    and reduce lead length and circuit-board-trace lengths. I used 0.100-inch female
    headers to mount the Pro Mini, which leaves plenty of room for the components
    underneath. It is not necessary to fully populate the board with headers to fit
    all the Pro Mini’s pins; you just need enough to mechanically support the Pro
    Mini and provide the necessary electrical connections. I found it helpful to place
    headers at the very end of at least one side to align the pins and simplify my
    aim when plugging in the Pro Mini board.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 还要注意，许多电阻器在这个PCB上是垂直安装的，以节省空间并减少引线长度和电路板布线长度。我使用了0.100英寸的女性针脚头来安装Pro Mini，这样就为下面的组件留出了充足的空间。并不需要完全填充所有针脚头来适配Pro
    Mini的所有引脚；只需要足够的针脚头来机械支撑Pro Mini并提供必要的电气连接。我发现，将针脚头放在至少一侧的最末端可以对齐引脚，简化将Pro Mini板插入时的对准工作。
- en: '**Construction**'
  id: totrans-263
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**构建**'
- en: Be sure the sketch is loaded onto the Arduino, and solder all components to
    your PCB now, including wires for power and ground and for the jack for the (optional)
    temperature sensor. Place the op-amp into its socket now as well, but bend pin
    3 of the op-amp so that it sticks out. You will need to be able to access pin
    3 in a later stage of the construction process.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 确保草图已经加载到Arduino中，并且现在将所有组件焊接到你的PCB上，包括电源和接地的线缆以及（可选的）温度传感器插座的线缆。现在也将运算放大器插入其插座，但要弯曲运算放大器的第3针，使其突出。你需要在后续的构建过程中访问第3针。
- en: 'When the Custom pH Meter circuit is soldered and the sketch is loaded onto
    the Arduino, only one step remains in terms of actual construction: putting everything
    inside a protective box. This section describes some suggestions for an enclosure
    and for how to mount the circuit board inside. [Figure 7-16](ch07.xhtml#ch07fig16)
    shows the finished enclosure.'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 当定制pH计电路已焊接完毕并将草图加载到Arduino时，实际构建过程只剩下最后一步：将一切放入保护外壳中。本节描述了一些关于外壳和如何将电路板安装到外壳中的建议。[图7-16](ch07.xhtml#ch07fig16)展示了完成的外壳。
- en: '![image](../images/f07-16.jpg)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-16.jpg)'
- en: '*Figure 7-16: The finished Custom pH Meter in the enclosure. This close-up
    illustrates the positioning of the holes for the offset (labeled* Ofst) *and gain
    (labeled* Scale) *calibration adjustments*.'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-16：完成的定制pH计放入外壳中。此特写图说明了偏移（标注为*Ofst）*和增益（标注为*Scale）*校准调整孔的位置*。'
- en: '***The Custom pH Meter Enclosure***'
  id: totrans-268
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***定制pH计外壳***'
- en: Your choice of enclosure will depend on how you want to use the Custom pH Meter,
    whether or not you elect to include an analog meter, and the level of portability
    required. I selected a standard ABS clear plastic box with outside measurements
    of approximately 1.3×2.45×4.4 inches. The space was somewhat tighter than I planned,
    but I was able to squeeze in the printed circuit board, display, switch, connectors,
    and battery.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 你选择外壳的方式将取决于你如何使用定制pH计，是否选择包括模拟仪表，以及所需的便携性。我选择了一个标准的ABS透明塑料盒，外部尺寸大约为1.3×2.45×4.4英寸。空间比我预期的要紧凑一些，但我还是能够将印刷电路板、显示器、开关、连接器和电池挤进盒子里。
- en: '**Making Room for the Display**'
  id: totrans-270
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**为显示器腾出空间**'
- en: This project’s enclosure is a Hammond Manufacturing case, model 1591 BTCL. [Figure
    7-17](ch07.xhtml#ch07fig17) shows a drawing of the top of the plastic box, marked
    with lines for cutting the display hole and drilling the mounting holes.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目的外壳是Hammond Manufacturing公司生产的1591 BTCL型号的盒子。[图7-17](ch07.xhtml#ch07fig17)展示了塑料盒顶部的图纸，标明了切割显示孔和钻孔位置的线条。
- en: '![image](../images/f07-17.jpg)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-17.jpg)'
- en: '*Figure 7-17: Template for the cover of the enclosure, showing an opening for
    the 16×2 display (shaded area) and where to drill mounting holes*'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-17：外壳盖的模板，显示16×2显示器的开口（阴影区域）和钻孔位置*'
- en: You can download this drawing with this book’s resource files (see *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*)
    and use it as a template for center punching the holes.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以下载本书的资源文件（见 *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*)，并将其作为打孔模板使用。
- en: 'I needed as much vertical room as possible inside the enclosure to accommodate
    the battery, so cutting out the top of the enclosure was necessary. Be careful,
    though: some displays have slightly different footprints, so measure yours and
    check it against the drawing first. If there’s a discrepancy, adjust the measurements.'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 我需要尽可能多的垂直空间来容纳电池，因此需要切割外壳的顶部。但要小心：有些显示器的尺寸可能略有不同，所以在切割之前请先测量你的显示器并与图纸对比。如果有差异，请调整测量值。
- en: The ABS plastic the enclosure is made of cuts easily, so cutting out the display
    hole shouldn’t pose any major problems. Before you get started, clamp the enclosure
    securely to a piece of scrap wood attached to a workbench or table.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 外壳所用的ABS塑料容易切割，因此切割显示孔应该不会遇到重大问题。在开始之前，请将外壳牢固地夹在一块附着在工作台或桌子上的废木板上。
- en: '**WARNING**'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告**'
- en: '*When you use a relatively large bit to drill into a thin layer of ABS plastic,
    the bit will tend to grab the plastic. Do not hold the enclosure by hand*.'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '*当你使用较大的钻头钻入薄层ABS塑料时，钻头容易抓住塑料。请勿手持外壳进行操作*。'
- en: To follow this template, first drill the two big holes in the opposing corners
    of the display area, using the punch marks as centers. I found 1/2 inches to be
    a good size for these holes, but just make them big enough to accommodate the
    saw blade you’re going to use to make the cutout. You may want to drill the centers
    of the 1/2-inch holes with a smaller drill first to make sure they are on center.
    Then, use a keyhole saw to cut out the smaller rectangle.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 要遵循此模板，首先在显示区域的对角线两端的角落中钻两个大孔，使用冲击标记作为中心。我发现1/2英寸的孔大小刚好合适，但只要孔足够大，能容纳你用来切割的锯片就可以。你可能希望先用小钻头钻一个1/2英寸孔的中心，以确保孔的位置正确。然后，使用钥匙孔锯切割出较小的矩形。
- en: 'To make sure there is enough room for the battery, I suggest mounting the display
    off center, as shown in [Figure 7-16](ch07.xhtml#ch07fig16), with the measurements
    indicated in [Figure 7-17](ch07.xhtml#ch07fig17). When your display hole is cut,
    drill the smaller holes for mounting the LCD with a #30 or 1/8-inch drill to accommodate
    the 4-40 screws.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确保电池有足够的空间，我建议将显示器安装在偏离中心的位置，如[图7-16](ch07.xhtml#ch07fig16)所示，并按照[图7-17](ch07.xhtml#ch07fig17)中的尺寸进行安装。当显示孔切割完成后，用#30或1/8英寸的钻头钻小孔，用于安装LCD显示器，并配合4-40螺丝。
- en: '**Drilling Holes for Other Hardware**'
  id: totrans-281
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**钻孔用于其他硬件**'
- en: Once the top is prepared, drill holes for the BNC connector (A), on/off switch
    (B), power input switch (C), and optional temperature jack (D) in the two smaller
    sides of the main body of the case, according to the template in [Figure 7-18](ch07.xhtml#ch07fig18).
    The hole for the BNC connector is 3/8 inches, while the holes for the switches
    and the temperature jack are all 1/4 inches.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦顶部准备好，根据[图7-18](ch07.xhtml#ch07fig18)中的模板，在外壳主体的两个较小的侧面上钻孔，用于BNC连接器（A）、开关（B）、电源输入开关（C）和可选的温度插孔（D）。BNC连接器的孔为3/8英寸，而开关和温度插孔的孔均为1/4英寸。
- en: '![image](../images/f07-18.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-18.jpg)'
- en: '*Figure 7-18: Approximate layout for the holes for the BNC connector (A) on
    the left side of the enclosure, and the on/off switch (B), battery/AC switch (C),
    and optional 3.5 mm temperature sensor input jack (D) on the right side*.'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-18：外壳左侧BNC连接器（A）孔和右侧开关（B）、电池/交流开关（C）以及可选的3.5毫米温度传感器输入插孔（D）孔的近似布局*。'
- en: '***Mounting the Circuit Board***'
  id: totrans-285
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***安装电路板***'
- en: 'Finally, choose where to mount the printed circuit board to the inside of the
    case. For both pH meters that I made, I held a nonpopulated shield PCB inside
    the case and marked the locations of the four mounting holes on the plastic; you
    can use a printout of the board layout in this book’s resource files as a pattern
    if you prefer. With your four holes marked, gently center punch and drill them.
    Be careful not to crack the plastic enclosure, and make sure they line up with
    the mounting holes indicated on the PCB. I suggest using a #41 drill bit (about
    3/32 inches) to drill these holes.'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，选择将印刷电路板安装到机壳内的位置。对于我制作的两个pH计，我将一个没有元件的盾牌PCB放置在外壳内，标记了塑料上四个安装孔的位置；如果你愿意，也可以使用本书资源文件中的板布局打印图纸作为模板。标记好四个孔后，轻轻用中心冲击器打点并钻孔。小心不要弄裂塑料外壳，并确保它们与PCB上的安装孔对齐。我建议使用#41钻头（大约3/32英寸）来钻这些孔。
- en: 'If you use the shield design included with this book, you may also need to
    drill the circuit board’s mounting holes to the correct size. Conventional manufacturing
    practice would advise using a spacer, screw, and nut to hold the board inside
    the enclosure, but instead, I drilled and tapped the circuit board itself. I used
    a #50 bit to drill the circuit board in all four corners and tapped it with a
    2-56 tap. I then used 2-56 screws to fasten the board in place. While this may
    not be a recommended practice for all applications, the board was light enough
    that it worked out well.'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用本书附带的盾牌设计，可能还需要将电路板的安装孔钻孔至正确的大小。传统的制造方法建议使用垫片、螺丝和螺母将电路板固定在外壳内，但我选择了直接在电路板上钻孔并攻丝。我使用了#50钻头在四个角落钻孔，并使用2-56攻丝器进行攻丝。然后，我用2-56螺丝将电路板固定到位。虽然这种做法并不适用于所有应用场景，但由于电路板比较轻，这种方法效果不错。
- en: Furthermore, I would not expect a finished pH meter to be subjected to much
    physical punishment. With that in mind, I just put a strip of foam on the noncomponent
    side of the board and screwed the board to the side of the case—but not too hard.
    If you expect the unit to experience repeated and extreme vibration, you can put
    a dab of Thread-Lok or another anaerobic adhesive on the screw threads before
    assembly.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我并不认为制作完成的pH计会遭受过多的物理冲击。考虑到这一点，我只是在电路板的无元件一侧放了一条泡沫条，并将电路板轻轻地固定在外壳侧面——但是不要太紧。如果你预计该设备将经历反复且剧烈的震动，可以在组装前在螺纹上涂抹一小滴Thread-Lok或其他厌氧胶粘剂。
- en: Once the board is mounted, mark the access holes for the gain and offset trimmers.
    Place the cover on the enclosure, look straight down through the cover, and use
    a Sharpie marker to mark the locations of the two trimmer access holes. Remove
    the top from the enclosure, and drill 1/4-inch holes corresponding to the screw
    heads on the trimmers (see [Figure 7-16](ch07.xhtml#ch07fig16)).
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦电路板安装好，标记增益和偏置微调电位器的接入孔位置。将外壳盖放在外壳上，直视盖子，使用马克笔标记两个微调孔的位置。移除外壳顶部后，钻出1/4英寸的孔，对应微调电位器上的螺丝头（见[图7-16](ch07.xhtml#ch07fig16)）。
- en: '***Installing the Other Hardware***'
  id: totrans-290
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***安装其他硬件***'
- en: Now you can install the BNC connector, on/off switch, power switch, and (optional)
    temperature jack. I found it easiest to mount the switches and jack inside the
    enclosure first and solder the wires to them later. The same technique works well
    with the BNC connector, though you may wish to solder the ground wire beforehand.
    I took a piece of 22-gauge solid wire, wrapped it three-quarters of a turn around
    the base of the connector, tightened it with the retaining nut, and soldered it
    to a ground tap on the PCB (see [Figure 7-13](ch07.xhtml#ch07fig13)).
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你可以安装BNC连接器、开关、电源开关和（可选的）温度插口。我发现最好先将开关和插口安装到外壳内，然后再将线缆焊接到它们上面。同样的技巧也适用于BNC连接器，虽然你可能希望提前将接地线焊接好。我取了一根22号实心线，将它绕在连接器底座上三分之四圈，用固定螺母拧紧，然后将它焊接到PCB上的接地点（见[图7-13](ch07.xhtml#ch07fig13)）。
- en: '**NOTE**'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*While I did not bring out the signals for the analog meter for my personal
    build, if you build the shield, you’ll see the two connections marked with a small
    box around them*.'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: '*虽然我没有为个人制作的设备引出模拟仪表的信号，但如果你制作这块盾牌，你会看到两个信号连接点，它们周围有一个小方框标记*。'
- en: '**Connecting the Probe to the Op-Amp**'
  id: totrans-294
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**连接探头到运算放大器**'
- en: “[Integrating the High-Impedance Probe](ch07.xhtml#ch07lev2sec1)” on [page 193](ch07.xhtml#page_193)
    describes special considerations required for using the pH probe as an input to
    the Custom pH Meter. It turns out that even high-quality FR-4 circuit board material
    can cause some current leakage, from dirt or moisture on the surface or other
    contamination. To minimize leakage, connect the input from the IC directly to
    the probe. In order to do this, place the IC in close physical proximity to the
    BNC connector inside the case. Then, instead of soldering pin 3 of the op-amp
    to the board or plugging that pin into a socket, bend it out and wire it directly
    to the BNC connector (see [Figure 7-19](ch07.xhtml#ch07fig19)).
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: “[高阻抗探头集成](ch07.xhtml#ch07lev2sec1)”在[第193页](ch07.xhtml#page_193)中描述了使用pH探头作为定制pH计输入时的特殊注意事项。事实证明，即使是高质量的FR-4电路板材料，也可能由于表面污垢或潮气等污染而导致一些电流泄漏。为了最小化泄漏，将IC的输入直接连接到探头。为此，将IC放置在接近外壳内BNC连接器的位置。然后，代替将运算放大器的第3针焊接到电路板上或插入插座，将其弯曲并直接接线到BNC连接器（见[图7-19](ch07.xhtml#ch07fig19)）。
- en: '![image](../images/f07-19.jpg)'
  id: totrans-296
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-19.jpg)'
- en: '*Figure 7-19: To minimize spurious signals, the connection from the BNC connector
    to the IC pin is soldered directly*.'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-19：为了最小化杂散信号，从BNC连接器到IC引脚的连接直接焊接。*'
- en: Because this is the only high-impedance part of the circuit, some other precautions
    mentioned in the op-amp’s data sheet (such as ground-isolation rings around the
    other inputs) are not required. However, this project’s shield PCB does keep critical
    traces as short as possible and places components in close proximity.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 因为这是电路中唯一的高阻抗部分，运算放大器数据表中提到的其他一些预防措施（例如在其他输入周围使用接地隔离环）并不需要。然而，这个项目的屏蔽PCB确实保持了关键信号线尽可能短，并将组件放置得很近。
- en: '**Connecting the Temperature Sensor**'
  id: totrans-299
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**连接温度传感器**'
- en: For the optional temperature sensor, you will need to mount a 3.5 mm three-conductor
    jack inside the enclosure; the drilling hole for this is marked D in [Figure 7-18](ch07.xhtml#ch07fig18).
    Wire this jack to the temperature IC connections on the PCB, which are the three
    holes between the display connections and regulator IC in [Figure 7-20](ch07.xhtml#ch07fig20).
    The sleeve of the connector is ground, the ring is positive, and the tip is the
    output of the temperature-sensing IC.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 对于可选的温度传感器，你需要在外壳内安装一个3.5毫米的三导体插孔；该孔的位置在[图7-18](ch07.xhtml#ch07fig18)中标记为D。将这个插孔与PCB上温度IC的连接端子连接，这些端子位于[图7-20](ch07.xhtml#ch07fig20)中显示连接器和调节IC之间的三个孔。插头的套筒为接地，环为正极，尖端为温度传感IC的输出。
- en: '![image](../images/f07-20.jpg)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-20.jpg)'
- en: '*Figure 7-20: The three connections for the temperature sensing IC are just
    above the word* Therm.'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-20：温度传感IC的三个连接就在“Therm”字样的上方。*'
- en: You can protect the IC itself from liquid immersion by encapsulating it in a
    short length of heat-shrink tubing with sealant, as shown in [Figure 7-21](ch07.xhtml#ch07fig21).
    This heat-shrink tubing is readily available online. The sealant on the inside
    of the tubing should make a completely waterproof seal for the IC. To seal the
    IC, just insert it into the tubing and heat with a heat gun or a hair dryer on
    high heat until it is completely sealed.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过将IC封装在一段短的热收缩管内并加上密封剂来保护IC免受液体侵入，如[图7-21](ch07.xhtml#ch07fig21)所示。这种热收缩管可以在网上轻松购买。管内的密封剂应能为IC提供完全防水的密封。封装IC时，只需将其插入管内，并使用热风枪或高温的吹风机加热，直到完全封住。
- en: '![image](../images/f07-21.jpg)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f07-21.jpg)'
- en: '*Figure 7-21: This LM35 temperature IC is completely encapsulated in a short
    length of heat-shrink tubing with a sealant thermal gel. The thermal gel can barely
    be seen where the wires enter the tubing*.'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7-21：这个LM35温度IC完全包裹在一段短的热收缩管内，里面填充了密封的热凝胶。热凝胶几乎不可见，只能在电线进入管道的地方看到一些。*'
- en: Once all hardware is mounted inside the enclosure and all components are soldered
    to the PCB, screw the LCD to the cover and close it all up to finish. You might
    also want to label your potentiometers and switches, as shown in [Figure 7-16](ch07.xhtml#ch07fig16),
    for ease of operation later.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦所有硬件都安装在外壳内，所有组件都焊接到PCB上后，将LCD固定在盖子上并封闭，完成组装。你可能还需要像[图7-16](ch07.xhtml#ch07fig16)所示那样标记你的电位计和开关，以便日后操作更加方便。
