<html xmlns="http://www.w3.org/1999/xhtml" xmlns:dk="http://www.kirsanov.com" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en">
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
		<title>Appendix C: The Command Line</title>
		<link href="NSTemplate_v1_inkbook.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:53262340-c02e-40d5-9273-c34656cedc88" name="Adept.expected.resource"/>
	</head>
	<body>
		<section><a id="chC"/>
		<header>
				<h1 class="chapterTitle"><span class="ChapterNumber"><span epub:type="pagebreak" id="Page_497" title="497"/>C</span><br/><span class="ChapterTitle">The Command Line</span></h1>
			</header>
			<p class="ChapterIntro"><a id="497"/>Unlike most vector editors—but like the majority of open source software—Inkscape has a powerful command line
interface. With it, you can perform tasks such as exporting, document modifications, queries, and so on from scripts
or from a command line prompt without using Inkscape's graphical user interface (GUI). In most cases, after Inkscape completes a task
as specified in the command
line parameters, it simply quits without showing the GUI at all. This makes it run faster and consume fewer resources, as no time or memory is wasted on creating and
destroying the GUI.</p>
			<p>
				In this appendix, I explain and provide examples of Inkscape’s most common command line parameters.
I also introduce the language of actions, available via the <code>--actions</code> parameter, that allows you to write complex document-processing scenarios.
Since the program’s command line interface has been thoroughly revised in recent versions, I also point out the most important changes to help
you migrate old scripts that are likely to break with Inkscape 1.0.</p>
			<a id="sectionC.1"/><h2>
				C.1 <a id="498"/><span epub:type="pagebreak" id="Page_498" title="498"/>Command Line Executable</h2>
			<p>On Windows, command line utilities and GUI applications are two different types of programs.
A single executable cannot run both as a GUI application and as a command line application. 
That's why Inkscape on Windows contains, in its bin folder, two executable files: inkscape.exe and inkscape.com.</p>
			<ul>
				<li>
					inkscape.exe is the GUI application to run when you need to work in Inkscape interactively. If you try to use it
for command line tasks, you will see no output in the console (command prompt window), which makes the query parameters (<a href="b03.xhtml#sectionC.5">C.5</a>) unusable.
Also, inkscape.exe will return asynchronously (immediately), possibly before a complex action, such as an export, has finished.</li>
				<li>inkscape.com is best used for scripting and command line tasks. It displays proper output in the console and
returns synchronously. However, if you run it for the GUI, you will always get a parasite command line window in the background that cannot be closed without closing the GUI window.</li>
			</ul>
			<p>
				On Linux or macOS, there's a single executable called simply inkscape that is used both for the GUI and 
the command line. In the examples in this appendix, I use <code>inkscape</code> as the name of the executable. Also, I use forward slashes (<code>/</code>) in
filename paths, which work on all platforms including Windows.</p>
			<a id="sectionC.2"/><h2>C.2 Getting Help</h2>
			<p>
				To get a complete list of the command line parameters known to your version of Inkscape,
run it with the <code>--help</code> parameter:</p>
			<pre><code><strong>$ inkscape --help</strong>
Usage: org.inkscape.Inkscape [OPTION…] file1 [file2 [fileN]]
Process (or open) one or more files.
Help Options: -?, --help                                 Show help options
...				</code></pre>
			<p>
				The parameters, or <em>options</em>, have names starting with <code>--</code>, such as <code>--help</code>.
Some of them can have values separated by <code>=</code>, such as <code>--export-fileid=file.pdf</code>.
Use spaces to separate command line parameters. 
A more detailed reference is available from Inkscape's UI in <span class="ui">Help<span class="MenuArrow"> ▶ </span>Command Line Options</span> (this opens a web browser and fetches the
page from the internet) or by typing <code>man inkscape</code> on the command line (Linux only).</p>
			<p>
				A very useful parameter (especially if you want to report a bug or request a feature from Inkscape developers) is <code>--version</code>, which prints the 
version number as well as revision and build date of your copy of Inkscape. You can also query Inkscape
with <code>--system-data-directory</code> or <code>--user-data-directory</code>;
these parameters print the values labeled, respectively, <span class="ui">Inkscape data</span> and <span class="ui">User config</span> on the <span class="ui">System</span> page of the <span class="ui">Preferences</span> dialog.</p>
			<a id="sectionC.3"/><h2>
				C.3 <a id="499"/><span epub:type="pagebreak" id="Page_499" title="499"/>Opening Documents</h2>
			<p>The simplest use of the command line is to list, without any parameter names, the filepaths of the documents you want to open in the GUI. 
For example, entering the following will start Inkscape’s GUI and load two SVG documents and one PDF document (automatically imported) into three Inkscape windows:</p>
			<pre><code><strong>$ inkscape file.svg folder/subfolder/document.svg pdfs/file.pdf</strong></code></pre>
			<p>
				You can specify some import options for opening non-SVG files. The most common are <code>--pdf-page</code>, which selects the page to import from a PDF document, and <code>--pdf-poppler</code>,
which switches to the Poppler import method (<a href="b02.xhtml#sectionB.3.1">B.3.1</a>). For example, here's how to open page 5 from a book chapter in PDF:</p>
			<pre><code><strong>$ inkscape --pdf-page=5 chapter.pdf </strong></code></pre>
			<p>
				If you have a script or program that generates an SVG file and prints it to the console, use the <code>|</code> character to <em>pipe</em> that document to Inkscape with the <code>--pipe</code> parameter, for example:</p>
			<pre><code><strong>$ svg-generating-script | inkscape --pipe</strong></code></pre>
			<a id="sectionC.4"/>
			<h2>C.4 Export</h2>
			<p>
				One of the most common Inkscape tasks is exporting SVG documents into other
formats. Via the command line, Inkscape can export bitmaps to PNG (<a href="c18.xhtml#section18.6">18.6</a>) and vectors to PS (PostScript), EPS, PDF, EMF, WMF, and XAML (<a href="b02.xhtml#chB">Appendix B</a>).
Inkscape determines the format to use based on the filename extension you provide on the command line; if you want to specify the format explicitly, add <code>--export-type</code> with the required type
(valid values are <code>svg</code>, <code>png</code>, <code>ps</code>, <code>eps</code>, <code>pdf</code>, <code>emf</code>, <code>wmf</code>, <code>xaml</code>).
For example, exporting to PDF is as simple as entering the following:</p>
			<pre><code><strong>$ inkscape --export-fileid=file.pdf file.svg</strong></code></pre>
			<p>This is equivalent to</p>
			<pre><code><strong>$ inkscape --export-fileid=file --export-type=pdf file.svg</strong></code></pre>
			<p>
				This will load file.svg and create the PDF file; no GUI is loaded, and after completing the
export, Inkscape quits. If you want to force overwriting the export file, add <code>--export-overwrite</code>.</p>
			<p>
				You can specify multiple input files and multiple export types (separated by commas) in <code>--export-type</code>. For example, the following</p>
			<pre><code><strong>$ inkscape --export-type=png,pdf file.svg file2.svg</strong></code></pre>
			<p>creates four files: file.png, file.pdf, file2.png, file2.pdf.</p>
			<p><a id="500"/><span epub:type="pagebreak" id="Page_500" title="500"/>You can also export a document to SVG—for example, you can use Inkscape to convert a PDF file to SVG or to extract an element from one SVG file and save it as an SVG of its own. If you add <code>--export-plain-svg</code>, the document will be saved as plain SVG
instead of Inkscape SVG (<a href="c01.xhtml#section1.4">1.4</a>). If you add <code>--vacuum-defs</code>, the resulting SVG will not have any unused definitions in <code>defs</code> (<a href="b01.xhtml#sectionA.4">A.4</a>). 
For example, this will convert one page from a PDF file into plain SVG:</p>
			<pre><code><strong>$ inkscape --export-fileid=file.svg --export-plain-svg --pdf-page=5 file.pdf</strong></code></pre>
			<p><span class="NoteHead">[1.1]</span></p>
			<p>
				In older versions, Inkscape had separate parameters for each exported format: <code>--export-png</code>, <code>--export-pdf</code>, <code>--export-ps</code>, <code>--export-eps</code>, and so on. They all took a value of the filename. Now, <code>--export-filename</code> has replaced these. The <code>--export-plain-svg</code> remains but is now a Boolean switch instead of a filename parameter.</p>
			<p>
				In addition to the export formats it supports natively, Inkscape includes a number of output extensions (<a href="c19.xhtml#section19.4.2">19.4.2</a>) for less common formats.
You can use these extensions via the command line, too. The <code>--export-extension</code> parameter takes as its value the unique ID of the extension, which 
you can look up in its .inx file (<a href="c19.xhtml#section19.4.1">19.4.1</a>). For example, Inkscape 1.1 includes an extension for exporting to the HPGL format used by plotters. In the
share\inkscape\extensions\hpgl_output.inx file, you can find its ID, which is <code>org.ekips.output.hpgl_output</code>. Now, running</p>
			<pre><code><strong>$ inkscape --export-extension=org.ekips.output.hpgl_output \ --export-fileid=file.hpgl file.svg</strong></code></pre>
			<p>converts file.svg into HPGL format, creating a file named file.hpgl.</p>
			<a id="sectionC.4.1"/>
			<h3>C.4.1 Export Area</h3>
			<p>
				By default, Inkscape exports the document's page (<a href="c02.xhtml#section2.3">2.3</a>), and objects falling outside the page
are invisible in export. Add <code>--export-area-drawing</code> to make
the export cover all visible objects of the document, regardless of its page size. For example:</p>
			<pre><code><strong>$ inkscape --export-fileid=file.png --export-area-drawing file.svg</strong></code></pre>
			<p>
				The
only exception is EPS, where the drawing is exported by default; with this format,
use <code>--export-area-page</code> to export the page.
Even then, due to the limitations of EPS, the export 
area will be clipped to the actual objects in the page if they do not reach
to the page edges.</p>
			<p>
				When exporting from SVG, you can export a single object out of a document, so that the exported file covers
that object's bounding box and nothing else. The object is specified by its <code>id</code>
attribute (<a href="b01.xhtml#sectionA.9">A.9</a>):</p>
			<pre><code><strong>$ inkscape --export-fileid=text.pdf --export-id=text2054 file.svg</strong></code></pre>
			<p>
				For PNG export, if other objects overlap with the exported object's bounding box and are visible,
they will also show in the exported file. For SVG export, all other objects are still present in the file even when they are outside
the exported <a id="501"/><span epub:type="pagebreak" id="Page_501" title="501"/>page area. To suppress the other objects and make a rendering of only
the chosen object, add <code>--export-id-only</code>. For PDF, PS, and
EPS, this is the only possible mode—other objects are always dropped when you specify<code>--export-id</code>.</p>
			<p>For PNG export, you can also provide the export area explicitly by specifying its two
corner points. For example, the following exports the area that spans from point 0, 0 to point 200, 100 (in px units):</p>
			<pre><code><strong>$ inkscape --export-fileid=area.png --export-area=0:0:200:100 file.svg</strong></code></pre>
			<p>
				Also for PNG export, no matter which method you use for specifying the area, you can<em>snap</em> that area to the pixel grid—that is, round it outward to the nearest whole coordinates in<code>px</code> units—by adding <code>--export-area-snap</code>. This is useful when you export at the default 96 dpi and want your objects
drawn to the pixel grid (<a href="c07.xhtml#section7.2">7.2</a>) always to be crisp in the exported bitmap regardless of the area you are exporting.</p>
			<a id="sectionC.4.2"/><h3>C.4.2 Export Size and Resolution</h3>
			<p>For PNG export, you can specify the size of the exported bitmap or its resolution (by
default 96 dpi). For example:</p>
			<pre><code><strong>$ inkscape --export-fileid=file.png --export-dpi=600 file.svg</strong><strong>$ inkscape --export-fileid=file.png --export-width=1000 file.svg</strong><strong>$ inkscape --export-fileid=file.png --export-height=400 file.svg</strong></code></pre>
			<p>
				The first line exports file.svg at the resolution of 600 dpi, so that a document page 3
inches wide exports to a bitmap 1800 pixels wide. The other two examples explicitly
set the pixel size of the export, and the resolution is calculated to match this
requirement (overriding <code>--export-dpi</code> if it is also present).</p>
			<p>
				If only <code>--export-width</code> or <code>--export-height</code> is present, Inkscape calculates the other dimension at the same resolution. However,
with command line export, you can also get a PNG file where the vertical resolution is not equal to the horizontal resolution (something you can't do from the GUI,<a href="c18.xhtml#section18.6.1.2">18.6.1.2</a>).
For example, you can export a 1000 by 1000 pixel area into a distorted PNG file of 2000 by 500 pixels with<code>--export-width=2000 --export-height=500</code>.</p>
			<p>
				The <code>--export-dpi</code> parameter also affects export to vector formats (PS, EPS, PDF) whenever Inkscape needs to rasterize some of the
file’s features (such as filters and mesh gradients for PS and PDF, or transparency for PS).</p>
			<a id="sectionC.4.3"/><h3>C.4.3 Export Background (PNG Only)</h3>
			<p>Areas that have no objects in them appear to be transparent in all export formats. However, in PNG export (but not PDF, PS, or EPS), you can specify any background
color or opacity to be applied during export. For example, if you want a solid opaque black background, enter:</p>
			<pre><code><strong>$ inkscape --export-fileid=file.png --export-background=#000000 \</strong><strong>    --export-background-opacity=1.0 file.svg</strong></code></pre>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p><a id="502"/><span epub:type="pagebreak" id="Page_502" title="502"/>The <code>\</code> character in this example shows that the long command line was wrapped
for display; you should type it as a single line without the <code>\</code>.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				The syntax for the background color is the same as in SVG; in particular, you can use the <code>#RRGGBB</code> format. The background opacity (defaulted to fully opaque)
is given either as a floating-point number from 0.0 to 1.0 or as an integer from 1 to 255; for example, <code>--export-background-opacity=0.5</code> is equivalent to <code>--export-background-opacity=128</code>.</p>
			<a id="sectionC.4.4"/><h3>
				C.4.4 Color Mode (PNG Only) <span class="NoteHead">[1.1]</span></h3>
			<p>
				For PNG export, you can set the exported file's color mode with the <code>--export-png-color-mode</code> option that
takes one of the following values: <code>Gray_1</code>, <code>Gray_2</code>, <code>Gray_4</code>, <code>Gray_8</code>, <code>Gray_16</code>,<code>RGB_8</code>, <code>RGB_16</code>, <code>GrayAlpha_8</code>, <code>GrayAlpha_16</code>, <code>RGBA_8</code>, or <code>RGBA_16</code> (<a href="c18.xhtml#section18.6.1.5">18.6.1.5</a>).</p>
			<a id="sectionC.4.5"/><h3>C.4.5 Export Hints (PNG Only)</h3>
			<p>
				Every time you export a single selected object to PNG via the GUI (<a href="c18.xhtml#section18.6">18.6</a>), the export
filename and resolution are recorded into the export hint attributes added to the corresponding element. If
you then save the document with those hints, you can use them for command line export to PNG as well. For example, if you write:</p>
			<pre><code><strong>$ inkscape --export-id=text2035 --export-use-hints file.svg</strong></code></pre>
			<p>
				Inkscape exports only the object with the <code>text2035</code> ID
to the same file with the same resolution it had when most recently exported from the GUI. Note that there's no<code>--export-filename</code> because the filename is taken from the export hint.</p>
			<a id="sectionC.4.6"/><h3>C.4.6 Vector Export Options</h3>
			<p>For exporting to PDF, PS, and EPS, you can set these options:</p>
			<ul>
				<li><code>--export-dpi</code> (<a href="b03.xhtml#sectionC.4.2">C.4.2</a>) sets the resolution for rasterized objects, such as filters and mesh gradients.</li>
				<li><code>--export-ignore-filters</code> suppresses the filtered objects’ rasterization, which are exported without filters applied.</li>
				<li><code>--export-ps-level</code> gives the level (version) of the PostScript format to use; it can be 2 or 3 (default).</li>
				<li><code>--export-pdf-version</code> gives the version of PDF to use; it can be 1.4 or 1.5 (default).</li>
				<li><code>--export-text-to-path</code> converts all text objects to paths (this is also available for exporting to SVG).</li>
			</ul>
			<p>For example, the following converts all text objects to paths on export:</p>
			<pre><code><strong>$ inkscape --export-fileid=file.pdf --export-text-to-path file.svg</strong></code></pre>
			<p><a id="503"/><span epub:type="pagebreak" id="Page_503" title="503"/>The resulting vector file neither needs nor embeds any fonts.</p>
			<a id="sectionC.5"/>
			<h2>C.5 Querying</h2>
			<p>
				Because SVG is a text-based format, it’s tempting to generate or edit SVG documents with
simple scripts. In such a script, you may need to specify the bounding boxes of some SVG objects—for
example, to check whether the text inserted into SVG from a database fits into the provided space,
or to create a background rectangle or frame for a specific object. In general, however, calculating
the bounding box of an object in SVG is extremely complex—you would need to reimplement a lot of Inkscape's
code to take into account everything that may affect an object's bounding box. Even when you're writing an Inkscape extension (<a href="c19.xhtml#ch19">Chapter 19</a>),
the <code>inkex</code> Python library that comes with Inkscape can calculate bounding boxes for paths but not for texts.</p>
			<p>Fortunately, Inkscape itself comes to the rescue. For example:</p>
			<pre><code><strong>$ inkscape --query-width --query-id=text1256 file.svg</strong>
45.2916</code></pre>
			<p>
				This asks Inkscape to provide the width (in px units) of the object with the<code>id="text1256"</code>. Inkscape loads the document, finds that object, prints its
width back to the console, and quits.</p>
			<p>
				Similarly, you can use <code>--query-height</code>, <code>--query-x</code>, and <code>--query-y</code> parameters to find the dimensions
and coordinates of an object's bounding box. The <code>--query-id</code> parameter can contain a comma-separated list of <code>id</code>s.</p>
			<p>
				Such Inkscape calls are reasonably fast
because they don't load the GUI and don't render the document. However, if you need 
multiple bounding box numbers for multiple objects, using these parameters may cause a delay. In that case, 
it is better use the <code>--query-all</code> parameter, which returns all bounding box
numbers for all objects in a document:</p>
			<pre><code><strong>$ inkscape --query-all file.svg</strong>
svg2,-55.11053,-29.90404,328.3131,608.6359
layer1,-55.11053,-29.90404,328.3131,608.6359
image2372,-8.917463,349.8089,282.12,212.6382
text2317,-39.85518,454.3014,20.40604,13.32647
tspan2319,-32.58402,454.3014,12.79618,4.989286
tspan2408,-39.85518,462.4921,20.40604,5.135838
path2406,-16.43702,386.617,6.34172,154.7896
text2410,-46.11609,376.8753,34.34841,5.135838
tspan2414,-46.11609,376.8753,34.34841,5.135838
text2418,-55.11053,365.9197,43.02429,5.135838</code></pre>
			<p>Each line is a comma-separated list of the object ID, X, Y, width, and
height. Parsing such a line in your script should be easy.</p>
			<a id="sectionC.6"/><h2>
				C.6 <a id="504"/><span epub:type="pagebreak" id="Page_504" title="504"/>Actions</h2>
			<p>
				Inkscape's command line is not limited to GUI-less export, conversion, and querying
tasks. You can script a number of regular editing tasks as well using the <code>--actions</code> parameter,
which lets you list any number of actions for Inkscape to perform sequentially.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>
						In older versions, Inkscape had <em>verbs</em> instead of <em>actions</em>, accessed through the <code>--verb</code> parameter. Now, verbs are deprecated in favor of actions. The <code>--verb</code> parameter still works, and you can use any verb as an action; Inkscape still supports more verbs than actions. In the future, however, verbs will be removed.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				Each action more or less corresponds to a command that you choose from a menu when editing a document in the GUI.
An action has a <em>name</em> and, optionally, one or more <em>arguments</em>. On the command line, use a colon (<code>:</code>) to separate
the name and the arguments, a comma (<code>,</code>) to separate arguments of a single action, and a semicolon (<code>;</code>) to separate actions in the list.
You can also include spaces in a string, but then the string must be enclosed in double quotation marks (<code>"</code>...<code>"</code>) and can’t contain additional quotation marks.</p>
			<p>
				For a complete list of actions your version of Inkscape supports, run Inkscape with <code>--action-list</code>. Here's the top of that list,
showing some actions that correspond to some command line parameters for export:</p>
			<pre><code><strong>$ inkscape --action-list</strong>
action-list         :  Print a list of actions and exit.
convert-dpi-method  :  Import DPI convert method.
export-area         :  Export area.
export-area-drawing :  Export drawing area.
export-area-page    :  Export page area.
export-area-snap    :  Export snap area to integer values.
export-background   :  Export background color.
export-background-opacity:  Export background opacity.
export-do           :  Do export.
...</code></pre>
			<a id="sectionC.6.1"/><h3>C.6.1 Example: Changing CSS Property</h3>
			<p>
				Let's look at a practical example. Imagine you want to open file.svg, select all text objects, paint them red (<code>#FF0000</code>), and save the result.
Here's how you do this via actions:</p>
			<pre><code><strong>$ inkscape --actions="file-open:file.svg; select-by-element:text; \</strong><strong>    object-set-property:fill,#FF0000; export-filename:fileout.svg; export-do"</strong></code></pre>
			<p>Let’s break this string into parts at each semicolon and look at the individual actions:</p>
			<ul>
				<li><code>file-open</code> opens the file given in its argument—in this case, <code>file.svg</code>.  You could also drop this action and simply provide <code>file.svg</code> on the command line after the <code>--actions</code> parameter.</li>
				<li><code>select-by-element</code> selects all objects with the given element name—in this case, <code>text</code>.</li>
				<li><a id="505"/><span epub:type="pagebreak" id="Page_505" title="505"/><code>object-set-property</code> sets a CSS property (<a href="c08.xhtml#section8.1">8.1</a>) on selected objects.  Two arguments provide the name of the property (<code>fill</code>) and the value (<code>#FF0000</code>). This has
the effect of painting all texts red (unless they have <code>tspan</code>s with their own <code>fill</code> inside, which would override that).</li>
				<li><code>export-filename</code> prepares the export of the result by specifying the filename (and, from its extension, the SVG export format).
There's currently no <code>file-save</code> action, which may be for the
better; it is safer to save (that is, export) the result of your changes into a different file instead of overwriting the original.</li>
				<li><code>export-do</code> (without arguments) performs the actual export.</li>
			</ul>
			<p>After this command finishes, you will have, in the current folder, the fileout.svg file
that is identical to file.svg except all of its text objects now have a red fill color.</p>
			<a id="sectionC.6.2"/><h3>C.6.2 Shell Mode</h3>
			<p>
				Inkscape's shell mode is an easy way to explore the actions. If you run Inkscape with <code>--shell</code>, it enters
an interactive mode where you can type actions with their arguments (as well as verbs) at Inkscape's prompt and have these actions performed at once. For example:</p>
			<pre><code><strong>$ inkscape --shell</strong>
Inkscape interactive shell mode. Type 'action-list' to list all actions. Type 'quit' to quit. Input of the form: action1:arg1; action2;arg2; verb1; verb2; ...
Only verbs that don't require a desktop may be used.<strong>&gt; file-open:page.svg</strong><strong>&gt; select-by-element:text</strong><strong>&gt; delete</strong>
Unable to find: delete
verbs_action: Invalid verb: delete<strong>&gt; select-by-element:text</strong><strong>&gt; object-set-property:fill,#00ff00</strong><strong>&gt; export-filename:green.svg</strong><strong>&gt; export-do</strong><strong>&gt; quit</strong></code></pre>
			<p>Sequences of commands that you tested and found working in the interactive shell mode can then be reused in a script.</p>
			<p>When typing action names or filenames, press Tab to autocomplete. Inkscape's shell mode remembers the history of your commands across sessions.</p>
		</section> </body>
</html>