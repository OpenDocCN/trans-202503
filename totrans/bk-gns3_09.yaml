- en: Chapter 9. Cisco IOS On UNIX and NX-OSv
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 9 章。Cisco IOS 在 UNIX 和 NX-OSv 上
- en: In this chapter, I’ll discuss strategies for installing and integrating Cisco
    IOU devices with GNS3\. You’ll also learn how to install and run Cisco’s next-generation
    switch operating system (NX-OS) using VirtualBox and NX-OSv.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，我将讨论将 Cisco IOU 设备与 GNS3 安装和集成的策略。你还将学习如何使用 VirtualBox 和 NX-OSv 安装和运行
    Cisco 的下一代交换操作系统（NX-OS）。
- en: Cisco IOU
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cisco IOU
- en: Cisco IOU is one of the cooler things to happen to the Cisco education community
    in a long time. IOU functions similarly to Dynamips but uses far fewer resources.
    Like Dynamips, IOU allows you to add routers and switches to your GNS3 projects.
    Unlike Dynamips, IOU images emulate the features of an IOS technology train rather
    than the hardware component of a particular Cisco model. Each IOU image file is
    a self-contained binary application that runs an instance of a device. There are
    images designed for routing, switching, voice over IP (VoIP), and Pagent (for
    generating IP traffic). IOU doesn’t require a hypervisor to emulate Cisco hardware,
    often making IOU devices less memory hungry and CPU intensive than Dynamips devices.
    The obvious advantage here is that you can create larger topologies on a modestly
    configured PC.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Cisco IOU 是近年来在 Cisco 教育社区中发生的最酷的事情之一。IOU 的功能类似于 Dynamips，但使用的资源要少得多。像 Dynamips
    一样，IOU 允许你在 GNS3 项目中添加路由器和交换机。不同于 Dynamips，IOU 镜像模拟的是 IOS 技术系列的特性，而不是特定 Cisco
    模型的硬件组件。每个 IOU 镜像文件都是一个独立的二进制应用程序，运行着一个设备实例。现在有为路由、交换、IP 语音（VoIP）和 Pagent（用于生成
    IP 流量）设计的镜像。IOU 不需要一个虚拟化管理程序来模拟 Cisco 硬件，这使得 IOU 设备比 Dynamips 设备更少占用内存和 CPU。显而易见的优势是，你可以在配置较为普通的
    PC 上创建更大的拓扑结构。
- en: In 2010, Cisco integrated IOU into the Cisco Learning Network to provide online
    virtual labs for CCNA and CCNP students. The labs are inexpensive and well designed.
    If you’re interested in Cisco Learning Labs, you should check out the Cisco Learning
    Center (*[http://learningnetwork.cisco.com/](http://learningnetwork.cisco.com/)*).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 2010 年，Cisco 将 IOU 集成到 Cisco Learning Network 中，为 CCNA 和 CCNP 学生提供在线虚拟实验室。这些实验室价格低廉且设计精良。如果你对
    Cisco 学习实验室感兴趣，应该去看看 Cisco Learning Center (*[http://learningnetwork.cisco.com/](http://learningnetwork.cisco.com/)*).
- en: As the name implies, IOS on Unix runs only on Unix-based systems. Sometimes
    referred to as IOS on Linux (IOL), it was developed on Solaris Unix and Linux.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 正如名字所示，IOS on Unix 仅在基于 Unix 的系统上运行。有时被称为 IOS on Linux (IOL)，它是在 Solaris Unix
    和 Linux 上开发的。
- en: What IOU Means to GNS3
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IOU 对 GNS3 的意义
- en: After Cisco announced it was moving away from industry-standard hardware in
    favor of proprietary integrated service router (ISR) hardware, the GNS3 community
    wondered whether the end of Dynamips and GNS3 had arrived. Without access to the
    technical specifications for the new proprietary hardware, it would be impossible
    to create a new hypervisor required to run the latest IOS software. Eventually,
    the old Dynamips devices would stop getting IOS updates and become obsolete.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Cisco 宣布其将不再使用行业标准硬件，转而采用专有的集成服务路由器（ISR）硬件后，GNS3 社区开始担心 Dynamips 和 GNS3 是否迎来了终结。由于无法获得新专有硬件的技术规格，因此无法创建一个新虚拟化管理程序来运行最新的
    IOS 软件。最终，旧的 Dynamips 设备将停止接收 IOS 更新并变得过时。
- en: Cisco actually keeps IOS current for the 7200 series routers that GNS3 uses,
    but all other GNS3 routers stop cold at IOS release 12.4(15)T, which imposes limits
    on learning modern technologies such as VoIP. This is why IOU is exciting. It
    breathes new life into GNS3 by allowing you to integrate updated IOS technologies
    into your GNS3 projects—and that’s pretty cool!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Cisco 实际上为 GNS3 使用的 7200 系列路由器保持着最新的 IOS，但所有其他 GNS3 路由器的 IOS 版本都停留在 12.4(15)T，这限制了学习现代技术（如
    VoIP）。这就是为什么 IOU 如此令人兴奋的原因。它通过让你将更新的 IOS 技术集成到 GNS3 项目中，为 GNS3 注入了新的活力——这真是太酷了！
- en: Switching, Switching, and More Switching!
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交换、交换、更多交换！
- en: One of the best reasons to integrate IOU into GNS3 is that you can use many
    of Cisco’s advanced switching features, which are missing from the NM-16ESW module
    in Dynamips (refer to [Appendix C](apc.html "Appendix C. NM-16ESW and IOU L2 Limitations")).
    These features allow GNS3 to step up its game and become an all-inclusive training
    tool for more advanced certifications like CCIE.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 将 IOU 集成到 GNS3 中的最佳原因之一是，你可以使用 Cisco 的许多高级交换功能，这些功能在 Dynamips 中的 NM-16ESW 模块中是没有的（请参见[附录
    C](apc.html "附录 C. NM-16ESW 和 IOU L2 限制")）。这些功能使得 GNS3 能够提升其性能，成为一个适用于更高级认证（如
    CCIE）的全方位培训工具。
- en: With IOU, you no longer have to purchase physical switches and create a breakout
    switch or use funny little tricks like ISL bridging to access real switches. Using
    a GNS3 EtherSwitch router, it’s now possible to create a regular 802.1Q trunk
    link from your Dynamips switches to an IOU switch block running on your PC. IOU
    switches are stable, run fast, and, unlike physical switches, are completely portable,
    which means they can travel with you on a laptop as part of your GNS3 projects.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 使用IOU后，你不再需要购买物理交换机并创建分割交换机，或者使用像ISL桥接这种奇怪的小技巧来访问真实的交换机。通过使用GNS3的EtherSwitch路由器，现在你可以从Dynamips交换机创建一个常规的802.1Q干道链路到运行在PC上的IOU交换机块。IOU交换机稳定、运行迅速，并且与物理交换机不同，IOU交换机是完全便携的，这意味着它们可以作为你的GNS3项目的一部分随你携带在笔记本电脑上。
- en: IOU Images
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IOU镜像
- en: IOU images are designed around IOS features, and their filenames often reveal
    what features they include, much like IOS image filenames. For example, let’s
    break down the filename of an IOU switch named *I86BI_LINUXL2-UPK9-M-15.0*.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: IOU镜像是围绕IOS特性设计的，它们的文件名通常能揭示它们包含哪些特性，就像IOS镜像的文件名一样。例如，我们来拆解一个名为*I86BI_LINUXL2-UPK9-M-15.0*的IOU交换机文件名。
- en: '****I86BI****. Indicates this is an Intel 32-bit binary image.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****I86BI****. 表示这是一个Intel 32位二进制镜像。'
- en: '****LINUX****. Indicates it runs on Linux.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****LINUX****. 表示它运行在Linux上。'
- en: '****L2****. Indicates it’s an L2/L3 switch.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****L2****. 表示这是一个L2/L3交换机。'
- en: '****UPK9****. Indicates the image contains advanced cryptographic features
    such as 3DES/AES.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****UPK9****. 表示镜像包含高级加密特性，如3DES/AES。'
- en: '****M****. Indicates it’s a mainline IOS.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****M****. 表示这是一个主干IOS。'
- en: '****15.0****. Specifies the IOS version the image is based on.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****15.0****. 指定该镜像基于的IOS版本。'
- en: Using this information, you should be able to look at almost any IOU filename
    to quickly determine what features it includes.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些信息，你应该能够查看几乎任何IOU文件名，快速判断它包含哪些特性。
- en: Things to Know Before Installing IOU
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装IOU前需要了解的事项
- en: By default, a standard GNS3 installation doesn’t allow you to run IOU devices.
    IOU devices are Linux binary files, so they can be run using a Linux operating
    system only. Typically, images are 32-bit binary files, but with the proper library
    files, you can easily run them on 64-bit Linux systems. If you’re running GNS3
    on Windows or OS X, you have to install a virtualization program like VirtualBox
    and run your IOU devices using a Linux virtual machine. Fortunately, GNS3 provides
    an IOU virtual machine that you can download from the GNS3 website. The GNS3 IOU
    virtual machine is ready to run IOU images, provides an easy way for you to upload
    your images, and doesn’t require that you know how to use Linux commands.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，标准的GNS3安装不允许你运行IOU设备。IOU设备是Linux二进制文件，因此只能在Linux操作系统上运行。通常，这些镜像是32位二进制文件，但在适当的库文件支持下，你可以轻松地在64位Linux系统上运行它们。如果你在Windows或OS
    X上运行GNS3，你需要安装像VirtualBox这样的虚拟化程序，并通过Linux虚拟机运行IOU设备。幸运的是，GNS3提供了一个IOU虚拟机，你可以从GNS3网站下载。这个GNS3
    IOU虚拟机已经准备好运行IOU镜像，提供了一个简单的方式让你上传镜像，并且不需要你了解如何使用Linux命令。
- en: The upside to running GNS3 in Linux is that installing and configuring IOU is
    more straightforward, and everything should run seamlessly without extra configuration.
    The downside is that you have to know a little something about Linux, but in my
    opinion, that’s a small price to pay. When you run GNS3 on Windows or OS X, you
    have to configure it to communicate with the Linux virtual machine over TCP/IP,
    which can be a pain to manage. If your workstation or IOU virtual machine’s IP
    addresses change (which often happens), you’ll have to reconfigure GNS3 to use
    the new IP addresses. Also, when you upgrade GNS3, you have to upgrade the GNS3
    server software that runs on the IOU virtual machine. The version numbers must
    be identical, or IOU will not run. These steps are unnecessary when you run both
    GNS3 and IOU on Linux.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux上运行GNS3的好处是，安装和配置IOU更加直接，所有的配置应该能顺利运行，无需额外设置。缺点是，你需要了解一些Linux知识，但在我看来，这是一个小代价。当你在Windows或OS
    X上运行GNS3时，必须配置它与Linux虚拟机通过TCP/IP通信，这可能很麻烦。如果你的工作站或IOU虚拟机的IP地址发生变化（这种情况经常发生），你需要重新配置GNS3以使用新的IP地址。而且，每次升级GNS3时，你还必须升级运行在IOU虚拟机上的GNS3服务器软件。版本号必须一致，否则IOU将无法运行。当你在Linux上同时运行GNS3和IOU时，这些步骤是多余的。
- en: Setting Up IOU on a Linux PC
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Linux PC上设置IOU
- en: There are some distinct advantages to running GNS3 and IOU on a Linux PC. The
    big one is that you don’t need to use an IOU virtual machine because on Linux
    IOU image files run natively. This means you don’t have to give up precious resources,
    such as CPU cycles and memory, that would be taken by the IOU virtual machine.
    Another advantage is that you can use Wireshark to capture and monitor packets
    between two IOU devices, which you can’t do when using the IOU virtual machine.
    This is because the .*pcap* capture file, which is created when you start a Wireshark
    capture, is saved on the IOU virtual machine and not locally, so Wireshark cannot
    access the file.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Linux PC 上运行 GNS3 和 IOU 有一些明显的优势。最大的优势是你不需要使用 IOU 虚拟机，因为在 Linux 上 IOU 镜像文件可以原生运行。这意味着你不必浪费宝贵的资源，如
    CPU 周期和内存，这些资源通常会被 IOU 虚拟机占用。另一个优势是你可以使用 Wireshark 来捕获和监控两个 IOU 设备之间的数据包，而在使用
    IOU 虚拟机时无法做到这一点。这是因为在启动 Wireshark 捕获时生成的 .*pcap* 捕获文件保存在 IOU 虚拟机中，而不是本地保存，因此 Wireshark
    无法访问该文件。
- en: If you’re running GNS3 on Linux, follow the instructions in this section to
    get IOU up and running. Otherwise, skip ahead to [Using the GNS3 IOU Virtual Machine
    on Windows and OS X](ch09.html#using_the_gns3_iou_virtual_machine_on_wi "Using
    the GNS3 IOU Virtual Machine on Windows and OS X").
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在 Linux 上运行 GNS3，请按照本节中的说明进行操作，启动 IOU。如果你使用的是其他操作系统，请跳至 [在 Windows 和 OS X
    上使用 GNS3 IOU 虚拟机](ch09.html#using_the_gns3_iou_virtual_machine_on_wi "在 Windows
    和 OS X 上使用 GNS3 IOU 虚拟机")。
- en: Installing IOU
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 IOU
- en: 'When you run an IOU image, the image looks for the file *libcrypto.so.4* and
    won’t run without it. Although a libcrypto library file may already be installed
    on your system, you should install *libssl1.0.0* because this version is proven
    to be stable with IOU images. Next, create a symbolic link (sym-link) from *libcrypto.so.1.0.0*
    to *libcrypto.so.4*; a symlink is the Linux equivalent of a Windows shortcut.
    If you’re using a 32-bit version of Ubuntu, install libcrypto using the following
    commands:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 当你运行 IOU 镜像时，镜像会查找文件 *libcrypto.so.4*，没有它无法运行。虽然系统中可能已经安装了 libcrypto 库文件，但你应该安装
    *libssl1.0.0*，因为此版本已被证明与 IOU 镜像兼容且稳定。接下来，从 *libcrypto.so.1.0.0* 创建一个符号链接（sym-link）到
    *libcrypto.so.4*；符号链接是 Linux 系统中与 Windows 快捷方式相当的概念。如果你使用的是 32 位版本的 Ubuntu，可以使用以下命令安装
    libcrypto：
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: When running a 64-bit Ubuntu system, you’ll need to install the 32-bit libssl
    package before you can configure libcrypto and run a 32-bit IOU image. If you
    have a 32-bit Ubuntu system, you can disregard the next commands.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行 64 位 Ubuntu 系统时，你需要先安装 32 位 libssl 包，才能配置 libcrypto 并运行 32 位 IOU 镜像。如果你使用的是
    32 位 Ubuntu 系统，可以跳过以下命令。
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: If you’re not running Ubuntu, then you may need to do a little research to configure
    libcrypto on your system because not all Linux systems use the same library files
    and versions or even store the files in the same directories as Ubuntu. The key
    is that the libcrypto file must be symlinked to *libcrypto.so.4*.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不是在运行 Ubuntu，那么你可能需要做一些研究来配置系统中的 libcrypto，因为并非所有的 Linux 系统使用相同的库文件和版本，甚至可能将文件存储在与
    Ubuntu 不同的目录中。关键是 libcrypto 文件必须链接到 *libcrypto.so.4*。
- en: 'After you’ve configured *libcrypto.so.4*, copy one or more IOU image files
    to your Ubuntu system. You have to make the IOU files executable before they’ll
    run; here’s how:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 配置完 *libcrypto.so.4* 后，将一个或多个 IOU 镜像文件复制到你的 Ubuntu 系统。你必须先将 IOU 文件设置为可执行文件，才能运行；方法如下：
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Next, install the dependencies for the GNS3 iouyap application. This program
    is responsible for setting up communication between IOU and other GNS3 devices,
    like Dynamips routers. Begin by installing bison and flex, two packages that are
    needed before iouyap can compile.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，安装 GNS3 iouyap 应用程序所需的依赖项。此程序负责在 IOU 和其他 GNS3 设备（如 Dynamips 路由器）之间建立通信。首先安装
    bison 和 flex，这两个软件包是 iouyap 编译之前所必需的。
- en: '[PRE3]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now, install and compile the iniparser program using the following commands:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，使用以下命令安装并编译 iniparser 程序：
- en: '[PRE4]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'A ZIP file containing iouyap should have been included in your GNS3 for Linux
    download. Unzip *iouyap-<x>.zip*, replacing *<x>* with the version you have, and
    compile the program using the following commands:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 一个包含 iouyap 的 ZIP 文件应该已经包含在你的 GNS3 for Linux 下载中。解压 *iouyap-<x>.zip*，将 *<x>*
    替换为你拥有的版本，并使用以下命令编译该程序：
- en: '[PRE5]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: If necessary, copy the compiled application to the */usr/local/bin* directory.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如有必要，将编译后的应用程序复制到 */usr/local/bin* 目录。
- en: '[PRE6]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Now that all the applications are installed, you need to do some configuration.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 现在所有应用程序都已安装完毕，你需要进行一些配置。
- en: Creating a License File
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建许可证文件
- en: Before running IOU, you have to create a license file that contains the hostname
    of your PC and a valid license key. The license key is generated from your Linux
    hostname, so make sure you’re satisfied with your PC’s hostname. If you change
    your hostname, you’ll need to enter a new license key.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行IOU之前，你必须创建一个包含你PC主机名和有效许可证密钥的许可证文件。许可证密钥是从你的Linux主机名生成的，因此请确保你对PC的主机名感到满意。如果你更改了主机名，则需要输入新的许可证密钥。
- en: Once you have obtained a license key, use a text editor to create the license
    file. I usually name my file .*iourc*, but any name will do. The following is
    an example of a license file for a PC named Ubuntu using the license key 1234567812345678\.
    The hostname is case sensitive, so take care when entering it in the license file.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你获得了许可证密钥，使用文本编辑器创建许可证文件。我通常将文件命名为.*iourc*，但任何名称都可以。以下是一个例子，展示了使用许可证密钥1234567812345678的名为Ubuntu的PC的许可证文件。主机名是区分大小写的，所以在许可证文件中输入时要小心。
- en: '[PRE7]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: If you’re unsure what your Linux host is named, you can use the `hostname` command
    from your terminal to display the name.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不确定你的Linux主机名是什么，可以从终端使用`hostname`命令显示主机名。
- en: Configuring GNS3
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 GNS3
- en: Next, set the path to the iouyap application and your IOU license file in the
    IOS on UNIX preferences. The iouyap application is used to bridge Dynamips, and
    other GNS3 devices, with IOU devices so that all your devices can be seamlessly
    networked together. Select **Edit** ▸ **Preferences** and then select **IOS on
    UNIX** from the left menu, as shown in [Figure 9-1](ch09.html#ios_on_unix_preferencescomma_general_set
    "Figure 9-1. IOS on UNIX preferences, General settings tab").
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，在“IOS on UNIX 偏好设置”中设置iouyap应用程序和IOU许可证文件的路径。iouyap应用程序用于将Dynamips和其他GNS3设备与IOU设备连接起来，这样你所有的设备就可以无缝地联网。选择**编辑**
    ▸ **偏好设置**，然后从左侧菜单中选择**IOS on UNIX**，如[图 9-1](ch09.html#ios_on_unix_preferencescomma_general_set
    "图 9-1. IOS on UNIX 偏好设置，常规设置选项卡")所示。
- en: '![IOS on UNIX preferences, General settings tab](httpatomoreillycomsourcenostarchimages2209111.png.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![IOS on UNIX 偏好设置，常规设置选项卡](httpatomoreillycomsourcenostarchimages2209111.png.jpg)'
- en: Figure 9-1. IOS on UNIX preferences, General settings tab
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-1. IOS on UNIX 偏好设置，常规设置选项卡
- en: On the General settings tab, set the path and name of your license file in Path
    to IOURC. This refers to the IOU license file you created earlier. Also, set the
    file path to your *iouyap* file in Path to iouyap, typically */usr/ local/bin/iouyap*.
    Next, go to the Server settings tab, shown in [Figure 9-2](ch09.html#ios_on_unix_preferencescomma_server_sett
    "Figure 9-2. IOS on UNIX preferences, Server settings tab").
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在“常规设置”选项卡中，在“IOURC路径”中设置你的许可证文件的路径和名称。这指的是你之前创建的IOU许可证文件。另外，在“iouyap路径”中设置你的*iouyap*文件的文件路径，通常为`/usr/local/bin/iouyap`。接下来，转到“服务器设置”选项卡，如[图
    9-2](ch09.html#ios_on_unix_preferencescomma_server_sett "图 9-2. IOS on UNIX 偏好设置，服务器设置选项卡")所示。
- en: Select the **Always use the local server (Linux only)** checkbox so that IOU
    uses the local PC for GNS3 and IOU integration. Then, go to the Advanced settings
    tab, shown in [Figure 9-3](ch09.html#ios_on_unix_preferencescomma_advanced_se
    "Figure 9-3. IOS on UNIX preferences, Advanced settings tab").
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 选择**始终使用本地服务器（仅限 Linux）**复选框，以便IOU使用本地PC进行GNS3和IOU集成。然后，转到“高级设置”选项卡，如[图 9-3](ch09.html#ios_on_unix_preferencescomma_advanced_se
    "图 9-3. IOS on UNIX 偏好设置，高级设置选项卡")所示。
- en: Each IOU device is assigned a unique console port number within the defined
    range. Don’t change these values unless the range conflicts with other IP-based
    applications running on your PC; the same is true for the UDP tunneling port range.
    UDP ports are used to set up network communication between IOU and other GNS3
    devices.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 每个IOU设备都会在定义的范围内分配一个唯一的控制台端口号。除非这些值与PC上运行的其他基于IP的应用程序发生冲突，否则不要更改这些值；UDP隧道端口范围也是如此。UDP端口用于设置IOU与其他GNS3设备之间的网络通信。
- en: '![IOS on UNIX preferences, Server settings tab](httpatomoreillycomsourcenostarchimages2209113.png.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![IOS on UNIX 偏好设置，服务器设置选项卡](httpatomoreillycomsourcenostarchimages2209113.png.jpg)'
- en: Figure 9-2. IOS on UNIX preferences, Server settings tab
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-2. IOS on UNIX 偏好设置，服务器设置选项卡
- en: '![IOS on UNIX preferences, Advanced settings tab](httpatomoreillycomsourcenostarchimages2209115.png.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![IOS on UNIX 偏好设置，高级设置选项卡](httpatomoreillycomsourcenostarchimages2209115.png.jpg)'
- en: Figure 9-3. IOS on UNIX preferences, Advanced settings tab
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-3. IOS on UNIX 偏好设置，高级设置选项卡
- en: Finally, expand **IOS on UNIX** in the left menu of the Preferences window to
    display the IOU devices section, shown in [Figure 9-4](ch09.html#adding_iou_images_to_gns3
    "Figure 9-4. Adding IOU images to GNS3"). From here, you can add one or more IOU
    image files to GNS3.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '![Adding IOU images to GNS3](httpatomoreillycomsourcenostarchimages2209117.png.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
- en: Figure 9-4. Adding IOU images to GNS3
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: To add an IOU image file to GNS3, click the **New** button to start the New
    IOU device wizard, shown in [Figure 9-5](ch09.html#new_iou_device_wizard "Figure 9-5. New
    IOU device wizard").
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '![New IOU device wizard](httpatomoreillycomsourcenostarchimages2209119.png.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
- en: Figure 9-5. New IOU device wizard
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: Enter a name for your new device (*IOU_L2* in this example); then click the
    **Browse** button to locate and select your IOU image file. When you’re done,
    click **Finish** to complete the wizard. Once added, your IOU image file should
    be copied to your GNS3 user directory under *GNS3/images/IOU*.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: To configure an IOU device, drag an IOU device icon from the Devices toolbar
    to your workspace. Right-click the device and choose **Configure** to open the
    Node configurator (shown in [Figure 9-6](ch09.html#iou_node_configurator "Figure 9-6. IOU
    Node configurator")).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '![IOU Node configurator](httpatomoreillycomsourcenostarchimages2209121.png.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
- en: Figure 9-6. IOU Node configurator
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: The options on the General settings tab allow you to rename your device and
    change the IOU image file, console port number, and default RAM and NVRAM values.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: You can change the number of Ethernet and serial adapters installed by adjusting
    the values on the Network tab. The default is two of each adapter, but they provide
    four interfaces each, giving you a total of eight Ethernet and eight serial interfaces.
    This should be plenty for most projects, but you can easily adjust the quantity
    to meet your needs. The total combined number of adapters (Ethernet and serial)
    can’t exceed 16, for a total of 64 interfaces per IOU device.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: An IOU device can be linked to any other GNS3 device, just as you would a standard
    Dynamips router or switch. You can even *hot-link* them to devices, meaning links
    can be formed between the devices after they’re started.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: To export an IOU configuration, enter **`copy running-config unix:initial -config.cfg`**
    from the IOU console and then right-click the IOU device in your workspace and
    select **Export config**. You will then be prompted for a filename and location,
    where the file will be saved. You can import a configuration by selecting **Import
    config** instead.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: If you want to run IOU in Windows or OS X, read the next section. If not, you
    can skip ahead to [NX-OSv](ch09.html#nx-osv "NX-OSv").
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: Using the GNS3 IOU Virtual Machine on Windows and OS X
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As I mentioned in [Things to Know Before Installing IOU](ch09.html#things_to_know_before_installing_iou
    "Things to Know Before Installing IOU"), Windows and OS X systems can run IOU
    only using a Linux virtual machine. If you haven’t done so already, download and
    install VirtualBox (*[https://www.virtualbox.org/](https://www.virtualbox.org/)*).
    Accepting the default installation settings should provide everything you need
    for running an IOU virtual machine.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: After installing VirtualBox, visit the GNS3 website (*[http://www.gns3.com/](http://www.gns3.com/)*)
    and download the OVA file named *GNS3 IOU VM.ova*. This is a Linux virtual machine
    that’s been preconfigured with all the tools you need to run IOU, but it doesn’t
    include any IOU image files. Instead, it provides a web-based utility that allows
    you to easily upload your image files to the appliance, but you’ll need to import
    the appliance into VirtualBox before you can use it.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: Importing the GNS3 IOU Virtual Machine into VirtualBox
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Start by launching the VirtualBox application. After the application loads,
    select **File** ▸ **Import Appliance**. You should be presented with the Import
    Virtual Appliance dialog, shown in [Figure 9-7](ch09.html#select_the_virtual_appliance
    "Figure 9-7. Select the virtual appliance.").
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: '![Select the virtual appliance.](httpatomoreillycomsourcenostarchimages2209123.png.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
- en: Figure 9-7. Select the virtual appliance.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: Use the browse icon to locate and select the *GNS3 IOU VM.ova* file. In [Figure 9-7](ch09.html#select_the_virtual_appliance
    "Figure 9-7. Select the virtual appliance."), my virtual machine is located in
    my *Downloads* directory, *C:\Users\jneumann\Downloads*. Once you select the file,
    click **Next** and verify the appliance settings. They should look similar to
    [Figure 9-8](ch09.html#virtual_appliance_settings "Figure 9-8. Virtual Appliance
    settings").
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: '![Virtual Appliance settings](httpatomoreillycomsourcenostarchimages2209125.png.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
- en: Figure 9-8. Virtual Appliance settings
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: You should be able to accept the suggested appliance settings. Notice that the
    default RAM setting is 2048MB. I’ve found that the RAM can be reduced to 1024MB
    if you’re using only a couple of IOU devices in your projects. Doing so reduces
    the overall amount of memory used in your PC and may help GNS3 perform better
    if you’re strapped for resources. If you’re unsure, then just accept the defaults
    and click **Import** to complete the import. You can always modify the settings
    later.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: After importing the virtual machine, click **Settings** and then click **Network**
    to access the Network pane, shown in [Figure 9-9](ch09.html#bridge_the_network_adapter_to_your_pc
    "Figure 9-9. Bridge the network adapter to your PC.").
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '![Bridge the network adapter to your PC.](httpatomoreillycomsourcenostarchimages2209127.png.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
- en: Figure 9-9. Bridge the network adapter to your PC.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: From the Adapter 1 tab, select the **Enable Network Adapter** option. Then,
    choose **Bridged Adapter** next to the Attached to field. When you’re finished,
    click **OK**. This bridges your virtual machine’s Ethernet adapter to your PC
    and allows it to access the Internet so you can install additional packages, if
    needed.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在“Adapter 1”选项卡中，选择**启用网络适配器**选项。然后，在“附加到”字段旁边选择**桥接适配器**。完成后，点击**确定**。这将你的虚拟机以太网适配器桥接到你的PC，并允许它访问互联网，以便在需要时安装额外的软件包。
- en: Uploading IOU Image Files
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上传IOU镜像文件
- en: Now that you’ve imported the GNS3 IOU virtual machine, you should be able to
    run the virtual machine and upload your IOU image files. To power on the virtual
    machine, select **GNS3 IOU VM**, as in [Figure 9-10](ch09.html#select_and_start_your_gns3_iou_virtual_m
    "Figure 9-10. Select and start your GNS3 IOU virtual machine."), and click **Start**.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经导入了GNS3 IOU虚拟机，你应该能够启动虚拟机并上传你的IOU镜像文件。要启动虚拟机，选择**GNS3 IOU VM**，如[图9-10](ch09.html#select_and_start_your_gns3_iou_virtual_m
    "图9-10. 选择并启动你的GNS3 IOU虚拟机")所示，并点击**启动**。
- en: '![Select and start your GNS3 IOU virtual machine.](httpatomoreillycomsourcenostarchimages2209129.png.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![选择并启动你的GNS3 IOU虚拟机。](httpatomoreillycomsourcenostarchimages2209129.png.jpg)'
- en: Figure 9-10. Select and start your GNS3 IOU virtual machine.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-10. 选择并启动你的GNS3 IOU虚拟机。
- en: 'It’s normal for the virtual machine to take a minute or two to start because
    it’s booting a fully functional Linux OS. After the virtual machine is up and
    running, a console message similar to the following should be displayed on the
    screen:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机启动时，可能需要一两分钟，因为它正在启动一个完整功能的Linux操作系统。虚拟机启动并运行后，屏幕上应显示类似以下的控制台信息：
- en: '[PRE8]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Notice that the screen instructs you to use your PC’s web browser to upload
    IOU image files to the appliance. For this to work, your PC and the GNS3 IOU virtual
    machine must each have an IP address assigned from your local network. In this
    example, my virtual machine’s IP address is 172.16.231.204.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，屏幕会提示你使用PC的网页浏览器将IOU镜像文件上传到设备。为了让此过程正常工作，你的PC和GNS3 IOU虚拟机必须分别从本地网络中获得IP地址。在此示例中，我的虚拟机的IP地址是172.16.231.204。
- en: Note
  id: totrans-97
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Sometimes the IOU virtual machine may not display the IP address. In that
    case, log on to the virtual machine using the username* root *and the password*
    cisco. *Then enter* `ifconfig eth0` *to display the IP address of your virtual
    machine’s Ethernet interface.*'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*有时IOU虚拟机可能不会显示IP地址。如果出现这种情况，请使用用户名* root *和密码* cisco *登录虚拟机。然后输入* `ifconfig
    eth0` *来显示虚拟机以太网接口的IP地址。*'
- en: To upload an IOU image file, open your web browser and browse to the IP address,
    using port 8000 as instructed. After entering the URL (*[http://172.16.231.204:8000/upload](http://172.16.231.204:8000/upload)*
    in this example), you should be presented with a web page like the one in [Figure 9-11](ch09.html#select_and_upload_your_iou_image_filesdo
    "Figure 9-11. Select and upload your IOU image files.").
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 要上传IOU镜像文件，打开网页浏览器并浏览到该IP地址，按照指示使用端口8000。在输入URL（在本例中是*[http://172.16.231.204:8000/upload](http://172.16.231.204:8000/upload)）后，您应看到一个类似于[图9-11](ch09.html#select_and_upload_your_iou_image_filesdo
    "图9-11. 选择并上传你的IOU镜像文件")的网页。
- en: '![Select and upload your IOU image files.](httpatomoreillycomsourcenostarchimages2209131.png.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![选择并上传你的IOU镜像文件。](httpatomoreillycomsourcenostarchimages2209131.png.jpg)'
- en: Figure 9-11. Select and upload your IOU image files.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-11. 选择并上传你的IOU镜像文件。
- en: Use the **Browse...** button to select an IOU image file from your PC. Once
    selected, click **upload** to complete the process. Repeat this step for each
    image you want to use with GNS3 and your IOU license file. Images are stored on
    the IOU virtual machine under */home/gns3/GNS3/images*, and the path is displayed
    on the web page for later reference. You’ll need this information when you configure
    your IOU images in GNS3, so it’s a good idea to highlight and copy the full path
    and filename now. That way, you won’t have to type it later.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**浏览...**按钮从PC中选择一个IOU镜像文件。选择后，点击**上传**完成过程。对于每个你想与GNS3一起使用的镜像和IOU许可证文件，重复此步骤。镜像存储在IOU虚拟机的*/home/gns3/GNS3/images*目录下，并且路径会在网页上显示以供参考。在你配置GNS3中的IOU镜像时，你需要这些信息，因此现在最好复制并保存完整路径和文件名。这样，之后就不需要重新输入了。
- en: Configuring GNS3 for IOU
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置GNS3以使用IOU
- en: Now that IOU is ready, you just have to prepare GNS3\. First, create a plaintext
    license file on your PC using the hostname *gns3-iouvm*, as in the following example.
    Replace 1234567812345678 with your license number.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 现在IOU已经准备好，你只需要准备GNS3。首先，在你的PC上创建一个纯文本许可证文件，使用主机名*gns3-iouvm*，如下所示的例子。将1234567812345678替换为你的许可证号码。
- en: '[PRE9]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: A common name that’s often used for the IOU license file is .*iourc*, but you
    can use any name that makes sense to you (for example, you might call it *iou-license.txt*),
    and the license file can be stored anywhere on your system.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: IOU许可证文件常用的名称是.*iourc*，但你可以使用任何对你有意义的名称（例如，你可以将其命名为*iou-license.txt*），并且许可证文件可以存储在系统中的任何位置。
- en: After you’ve created the license file, you’re ready to configure the GNS3 preferences
    for IOU. Launch GNS3, select **Edit** ▸ **Preferences** on Windows or **GNS3**
    ▸ **Preferences** on OS X, and select **GNS3 server**, as shown in [Figure 9-12](ch09.html#gns3_server_preferencescomma_remote_serv
    "Figure 9-12. GNS3 server preferences, Remote servers tab").
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 创建好许可证文件后，你就可以配置GNS3的IOU偏好设置了。启动GNS3，在Windows上选择**编辑** ▸ **偏好设置**，或在OS X上选择**GNS3**
    ▸ **偏好设置**，然后选择**GNS3服务器**，如[图9-12](ch09.html#gns3_server_preferencescomma_remote_serv
    "图9-12。GNS3服务器偏好设置，远程服务器标签")所示。
- en: '![GNS3 server preferences, Remote servers tab](httpatomoreillycomsourcenostarchimages2209133.png.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![GNS3服务器偏好设置，远程服务器标签](httpatomoreillycomsourcenostarchimages2209133.png.jpg)'
- en: Figure 9-12. GNS3 server preferences, Remote servers tab
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-12。GNS3服务器偏好设置，远程服务器标签
- en: Select the Remote servers tab. Under Host ➊ enter the IP address of your GNS3
    IOU virtual machine, click **Add**, and then click **Apply**. In this example,
    the IP address of my GNS3 IOU virtual machine is 172.16.231.204.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 选择“远程服务器”标签。在“主机”➊下输入你的GNS3 IOU虚拟机的IP地址，点击**添加**，然后点击**应用**。在这个例子中，我的GNS3 IOU虚拟机的IP地址是172.16.231.204。
- en: Next, tell GNS3 where to find the IOU license file. Click **IOS on UNIX** from
    the pane on the left and select the General settings tab, shown in [Figure 9-13](ch09.html#ios_on_unix_preferencescomma_gen-id00019
    "Figure 9-13. IOS on UNIX preferences, General settings tab").
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，告诉GNS3在哪里找到IOU许可证文件。从左侧窗格中点击**IOS在UNIX上**，然后选择常规设置标签，如[图9-13](ch09.html#ios_on_unix_preferencescomma_gen-id00019
    "图9-13。IOS在UNIX上的偏好设置，常规设置标签")所示。
- en: Click the **Browse...** button to the right of the Path to IOURC field to locate
    your license file. Select the file and then click **Add** and **Apply**. In this
    example, the path to my license file is *C:\Users\jneumann\GNS3\iourc_license.txt*.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“浏览...”按钮，位于“IOURC路径”字段的右侧，找到你的许可证文件。选择该文件，然后点击**添加**和**应用**。在这个例子中，我的许可证文件路径是*C:\Users\jneumann\GNS3\iourc_license.txt*。
- en: '![IOS on UNIX preferences, General settings tab](httpatomoreillycomsourcenostarchimages2209135.png.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![IOS在UNIX上的偏好设置，常规设置标签](httpatomoreillycomsourcenostarchimages2209135.png.jpg)'
- en: Figure 9-13. IOS on UNIX preferences, General settings tab
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-13。IOS在UNIX上的偏好设置，常规设置标签
- en: Next, expand **IOS on UNIX** in the pane on the left to display IOU devices,
    as shown in [Figure 9-14](ch09.html#iou_devices_preferences "Figure 9-14. IOU
    devices preferences").
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，在左侧窗格中展开**IOS在UNIX上**，以显示IOU设备，如[图9-14](ch09.html#iou_devices_preferences
    "图9-14。IOU设备偏好设置")所示。
- en: The final configuration step is to add the path to an IOU image file. Select
    the **IOS devices** preference and click **New** to start the wizard. Under Server
    type, make sure there’s a check next to **Remote** and click **Next**. A message
    about choosing a path to your image should appear; click **OK**, and you should
    see the New IOU device window, shown in [Figure 9-15](ch09.html#new_iou_device_window
    "Figure 9-15. New IOU device window").
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的配置步骤是添加IOU镜像文件的路径。选择**IOS设备**偏好设置，点击**新建**以启动向导。在“服务器类型”下，确保选中了**远程**，然后点击**下一步**。会弹出选择镜像文件路径的消息，点击**确定**，你应该会看到新的IOU设备窗口，如[图9-15](ch09.html#new_iou_device_window
    "图9-15。新的IOU设备窗口")所示。
- en: Enter a name for your IOU device (*IOU_L2*, for example) and then enter the
    IOU image path. Because IOU images are installed on the Linux virtual machine,
    you’ll have to enter the “Linux pathname” to your image file. That path is */home/gns3/GNS3/images/<image_name>*.
    In this example I’ve entered */home/gns3/GNS3/images/i86bi-linux-l2-adventerprisek9-15.1a.bin*.
    You can find this information on the IOU web page that you used to upload your
    image files (refer to [Figure 9-11](ch09.html#select_and_upload_your_iou_image_filesdo
    "Figure 9-11. Select and upload your IOU image files.")). Be careful to enter
    the path and filename correctly; otherwise, IOU won’t work. I recommend copying
    and pasting the information directly from the IOU virtual machine web page to
    avoid any confusion.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 为你的IOU设备输入一个名称（例如*IOU_L2*），然后输入IOU镜像文件路径。由于IOU镜像文件安装在Linux虚拟机中，你需要输入镜像文件的“Linux路径名”。该路径是*/home/gns3/GNS3/images/<image_name>*。在这个例子中，我输入的是*/home/gns3/GNS3/images/i86bi-linux-l2-adventerprisek9-15.1a.bin*。你可以在用来上传镜像文件的IOU网页上找到此信息（参考[图9-11](ch09.html#select_and_upload_your_iou_image_filesdo
    "图9-11. 选择并上传你的IOU镜像文件")）。务必正确输入路径和文件名，否则IOU将无法正常工作。我建议直接从IOU虚拟机网页复制并粘贴信息，以避免混淆。
- en: '![IOU devices preferences](httpatomoreillycomsourcenostarchimages2209137.png.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![IOU设备首选项](httpatomoreillycomsourcenostarchimages2209137.png.jpg)'
- en: Figure 9-14. IOU devices preferences
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-14. IOU设备首选项
- en: '![New IOU device window](httpatomoreillycomsourcenostarchimages2209139.png.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![新的IOU设备窗口](httpatomoreillycomsourcenostarchimages2209139.png.jpg)'
- en: Figure 9-15. New IOU device window
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-15. 新的IOU设备窗口
- en: When you’re finished, click **Finish** to close the wizard and then click **Apply**
    and **OK** to complete the configuration. Once you’ve added an IOU image, you’re
    ready to start using IOU devices in your projects.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，点击**完成**以关闭向导，然后点击**应用**和**确定**完成配置。一旦添加了IOU镜像，你就可以在项目中开始使用IOU设备了。
- en: 'If you upgrade GNS3 to a new version, you also have to upgrade the server on
    your GNS3 IOU virtual machine to the same version, or it won’t work. To upgrade
    the server, log on to the GNS3 IOU virtual machine and enter the following commands,
    replacing *`version`* with your version of GNS3:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将GNS3升级到新版本，你还需要将GNS3 IOU虚拟机上的服务器升级到相同的版本，否则它将无法正常工作。要升级服务器，请登录到GNS3 IOU虚拟机并输入以下命令，将*`version`*替换为你所使用的GNS3版本：
- en: '[PRE10]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: IOU in Action
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IOU操作
- en: Now let’s create a simple project that allows an IOU switch to route TCP/IP
    traffic between two VLANs. Start by creating the project shown in [Figure 9-16](ch09.html#vlan_routing_using_an_iou_switch
    "Figure 9-16. VLAN routing using an IOU switch").
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们创建一个简单的项目，使IOU交换机能够在两个VLAN之间路由TCP/IP流量。首先创建如[图9-16](ch09.html#vlan_routing_using_an_iou_switch
    "图9-16. 使用IOU交换机进行VLAN路由")所示的项目。
- en: '![VLAN routing using an IOU switch](httpatomoreillycomsourcenostarchimages2209141.png.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![使用IOU交换机进行VLAN路由](httpatomoreillycomsourcenostarchimages2209141.png.jpg)'
- en: Figure 9-16. VLAN routing using an IOU switch
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-16. 使用IOU交换机进行VLAN路由
- en: 'In this project, you’ll configure an IOU L2 switch with two VLANs (VLAN 10
    and VLAN 20). Then you’ll assign router R1 to VLAN 10 and router R2 to VLAN 20\.
    In this lab, the IOU switch will route packets between the two VLANs so that R1
    and R2 can ping each other. Start by configuring the IOU1 switch as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个项目中，你将配置一个具有两个VLAN（VLAN 10和VLAN 20）的IOU L2交换机。然后，你将路由器R1分配给VLAN 10，路由器R2分配给VLAN
    20。在这个实验中，IOU交换机将路由数据包在这两个VLAN之间，以便R1和R2能够互相ping通。首先按以下步骤配置IOU1交换机：
- en: '[PRE11]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Enable IP routing ➊ and then create the two VLANs (10 and 20) using the `vlan`
    command ➋. Next, create a switched virtual interface (SVI) ➌ for each VLAN and
    assign each SVI an IP address ➍. Use the `no shutdown` command ➎ to bring up the
    interface. Now go under the physical interfaces ➏ that are connected to R1 and
    R2, make them access ports ➐, and assign them to the appropriate VLAN ➑.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 启用IP路由 ➊，然后使用`vlan`命令 ➋创建两个VLAN（10和20）。接下来，为每个VLAN创建一个交换虚拟接口（SVI） ➌并为每个SVI分配一个IP地址
    ➍。使用`no shutdown`命令 ➎启用接口。现在，转到与R1和R2连接的物理接口 ➏，将它们设置为接入端口 ➐，并将它们分配到适当的VLAN ➑。
- en: Next, configure an IP address on router R1.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，为路由器R1配置一个IP地址。
- en: '[PRE12]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: After assigning the IP address to F0/0 on R1, set the default gateway address
    to 192.168.1.1 so that the router will use IOU1 for its gateway. Finally, configure
    R2 in a similar manner.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在为R1的F0/0接口分配IP地址后，将默认网关地址设置为192.168.1.1，这样路由器就会使用IOU1作为其网关。最后，按照类似的方式配置R2。
- en: '[PRE13]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'After configuring the project, you can test VLAN routing using the `ping` command.
    Router R1 should be able to ping router R2 through the IOU1 switch, as in the
    following:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 配置项目后，你可以使用`ping`命令测试VLAN路由。路由器R1应该能够通过IOU1交换机ping通路由器R2，如下所示：
- en: '[PRE14]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: That’s all it takes to get IOU devices up and running with GNS3\. Now let’s
    take a look at Cisco’s newest operating system, NX-OS.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 以上就是让IOU设备与GNS3一起运行的全部步骤。现在，让我们来看看Cisco的最新操作系统，NX-OS。
- en: NX-OSv
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: NX-OSv
- en: Cisco NX-OS runs on a data-center class of switches known as Nexus. Though similar
    to IOS, NX-OS is not IOS and uses a different set of configuration commands. NX-OSv,
    sometimes called Titanium, is a Linux virtual machine that runs an NX-OS simulator
    using virtualization software, like VirtualBox. NX-OSv is not a complete OS simulation,
    and it’s missing a lot of functionality. It provides just enough features and
    commands to give you a feel for how NX-OS works, and it can be networked to GNS3
    devices. After you’ve acquired an NX-OSv image, make a copy and keep it in a safe
    place in case your working copy gets corrupted in some way.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: Cisco NX-OS运行在一种称为Nexus的数据中心级交换机上。尽管与IOS相似，NX-OS并非IOS，且使用不同的配置命令集。NX-OSv，有时也称为Titanium，是一个Linux虚拟机，运行NX-OS模拟器，使用虚拟化软件，如VirtualBox。NX-OSv并不是一个完整的操作系统模拟，它缺少很多功能。它仅提供足够的功能和命令，让你感受NX-OS的工作方式，并且可以与GNS3设备联网。在获取NX-OSv镜像后，建议做一个备份，并保存在安全的地方，以防你的工作副本被损坏。
- en: Create a directory for NX-OSv under your GNS3 directory and copy the NX-OSv
    image file there. You should have a file named *N7K.vmdk*. Your filename may be
    different depending on your version of NX-OSv. With your image file in place,
    it’s time to get NX-OSv wired up in VirtualBox.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的GNS3目录下创建一个NX-OSv的目录，并将NX-OSv镜像文件复制到该目录中。你应该会有一个名为*N7K.vmdk*的文件。根据你使用的NX-OSv版本，文件名可能会有所不同。将镜像文件放置好后，接下来就可以在VirtualBox中配置NX-OSv了。
- en: Importing NX-OSv into VirtualBox
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将NX-OSv导入VirtualBox
- en: NX-OSv usually comes ready to run in the form of a single virtual machine hard
    disk file (.*vmdk* file), and you can run it using VMware, VirtualBox, or QEMU.
    VirtualBox is free and runs NX-OSv reliably, even on PCs with older processors
    such as the Core 2 Duo, so I’ll cover VirtualBox here. Configuration consists
    of importing the hard disk image file into a custom Linux virtual machine and
    adjusting a couple of settings. If you don’t have VirtualBox installed on your
    PC, download and install it now.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: NX-OSv通常以一个虚拟机硬盘文件（.*vmdk*文件）的形式准备好运行，你可以使用VMware、VirtualBox或QEMU来运行它。VirtualBox是免费的，并且即使在旧款处理器（如Core
    2 Duo）上也能可靠地运行NX-OSv，所以我在这里将重点介绍VirtualBox。配置过程包括将硬盘镜像文件导入到一个自定义的Linux虚拟机中，并调整几个设置。如果你的PC上还没有安装VirtualBox，请立即下载并安装。
- en: Launch VirtualBox and click **New** to create a new virtual machine. You should
    be presented with the Create Virtual Machine wizard, shown in [Figure 9-17](ch09.html#create_virtual_machine_wizardcomma_name
    "Figure 9-17. Create Virtual Machine wizard, Name and operating system window").
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 启动VirtualBox，点击**New**创建一个新的虚拟机。你应该会看到创建虚拟机向导，如[图 9-17](ch09.html#create_virtual_machine_wizardcomma_name
    "图 9-17. 创建虚拟机向导，名称和操作系统窗口")所示。
- en: '![Create Virtual Machine wizard, Name and operating system window](httpatomoreillycomsourcenostarchimages2209143.png.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![创建虚拟机向导，名称和操作系统窗口](httpatomoreillycomsourcenostarchimages2209143.png.jpg)'
- en: Figure 9-17. Create Virtual Machine wizard, Name and operating system window
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-17. 创建虚拟机向导，名称和操作系统窗口
- en: Enter a name for the device, set Type to **Linux** and Version to **Other Linux
    (64-bit)**, and then click **Next** to continue. You should be presented with
    the Memory size window, shown in [Figure 9-18](ch09.html#create_virtual_machine_wizardcomma_memor
    "Figure 9-18. Create Virtual Machine wizard, Memory size window").
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 为设备输入名称，将类型设置为**Linux**，版本设置为**Other Linux (64-bit)**，然后点击**Next**继续。接下来你应该看到内存大小窗口，如[图
    9-18](ch09.html#create_virtual_machine_wizardcomma_memor "图 9-18. 创建虚拟机向导，内存大小窗口")所示。
- en: To adjust the memory size, use the slider or enter the amount in the field provided.
    NX-OSv runs best with 2048MB of RAM. When you’re done, click **Next** to configure
    the hard drive settings, shown in [Figure 9-19](ch09.html#create_virtual_machine_wizardcomma_hard
    "Figure 9-19. Create Virtual Machine wizard, Hard drive window").
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 调整内存大小时，可以使用滑块或在提供的字段中输入数值。NX-OSv在2048MB内存下运行最佳。完成后，点击**Next**配置硬盘设置，如[图 9-19](ch09.html#create_virtual_machine_wizardcomma_hard
    "图 9-19. 创建虚拟机向导，硬盘窗口")所示。
- en: '![Create Virtual Machine wizard, Memory size window](httpatomoreillycomsourcenostarchimages2209145.png.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![创建虚拟机向导，内存大小窗口](httpatomoreillycomsourcenostarchimages2209145.png.jpg)'
- en: Figure 9-18. Create Virtual Machine wizard, Memory size window
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-18. 创建虚拟机向导，内存大小窗口
- en: '![Create Virtual Machine wizard, Hard drive window](httpatomoreillycomsourcenostarchimages2209147.png.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![创建虚拟机向导，硬盘窗口](httpatomoreillycomsourcenostarchimages2209147.png.jpg)'
- en: Figure 9-19. Create Virtual Machine wizard, Hard drive window
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-19. 创建虚拟机向导，硬盘窗口
- en: To attach the NX-OS virtual hard drive to your virtual machine, select **Use
    an existing virtual hard drive file** and click the browse icon to locate your
    NX-OSv .*vmdk* file. Select the file and click **Create** to finish creating the
    virtual machine.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要将 NX-OS 虚拟硬盘附加到虚拟机，请选择**使用现有虚拟硬盘文件**，点击浏览图标以定位你的 NX-OSv .*vmdk* 文件。选择该文件并点击**创建**以完成虚拟机的创建。
- en: Configuring GNS3 for NX-OSv
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 GNS3 以支持 NX-OSv
- en: Start GNS3 and add the NX-OSv virtual machine to your virtual machine library.
    Select **Edit** ▸ **Preferences** and expand **VirtualBox** to show VirtualBox
    virtual machines, as shown in [Figure 9-20](ch09.html#adding_the_nx-osv_virtualbox_virtual_mac
    "Figure 9-20. Adding the NX-OSv VirtualBox virtual machine to GNS3"). From here
    you can add VirtualBox virtual machines to GNS3, which is the last step before
    you can use NX-OSv.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 启动 GNS3 并将 NX-OSv 虚拟机添加到虚拟机库中。选择**编辑** ▸ **首选项**，展开**VirtualBox**以显示 VirtualBox
    虚拟机，如[图 9-20](ch09.html#adding_the_nx-osv_virtualbox_virtual_mac "图 9-20. 将 NX-OSv
    VirtualBox 虚拟机添加到 GNS3")所示。在这里，你可以将 VirtualBox 虚拟机添加到 GNS3，这是使用 NX-OSv 之前的最后一步。
- en: '![Adding the NX-OSv VirtualBox virtual machine to GNS3](httpatomoreillycomsourcenostarchimages2209149.png.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![将 NX-OSv VirtualBox 虚拟机添加到 GNS3](httpatomoreillycomsourcenostarchimages2209149.png.jpg)'
- en: Figure 9-20. Adding the NX-OSv VirtualBox virtual machine to GNS3
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-20. 将 NX-OSv VirtualBox 虚拟机添加到 GNS3
- en: Click **New** to start the VirtualBox wizard, select your NX-OSv virtual machine
    from the virtual machine name drop-down menu, and click **Finish**. Now click
    **Edit** and navigate to the General settings tab. Select the **Enable remote
    console** and **Start VM in headless mode** boxes and click **Apply**. Under the
    Network tab, change the number of interfaces from 1 to 6, and click **Apply**
    to close the window. Then click **Apply** and **OK** to complete the installation.
    To use a NX-OSv virtual machine in your projects, drag your NX-OSv virtual machine
    from the End devices toolbar to your workspace.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**新建**以启动 VirtualBox 向导，从虚拟机名称下拉菜单中选择你的 NX-OSv 虚拟机，然后点击**完成**。现在点击**编辑**并进入常规设置标签页。勾选**启用远程控制台**和**在无头模式下启动虚拟机**框，并点击**应用**。在网络标签页下，将接口数量从
    1 更改为 6，然后点击**应用**以关闭窗口。接着点击**应用**和**确定**以完成安装。要在项目中使用 NX-OSv 虚拟机，将你的 NX-OSv 虚拟机从终端设备工具栏拖到工作区。
- en: NX-OSv in Action
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: NX-OSv 实战
- en: Now that you have the NX-OSv device added to GNS3, let’s use it in a project.
    Create a topology that includes one NX-OSv device and one IOS router, as shown
    in [Figure 9-21](ch09.html#simple_topology_using_nx-osv "Figure 9-21. Simple topology
    using NX-OSv"). This project will advertise all 172.16.0.0 networks from R1 to
    NX-OSv using Cisco EIGRP.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经将 NX-OSv 设备添加到 GNS3，让我们在一个项目中使用它。创建一个包含一个 NX-OSv 设备和一个 IOS 路由器的拓扑，如[图 9-21](ch09.html#simple_topology_using_nx-osv
    "图 9-21. 使用 NX-OSv 的简单拓扑")所示。该项目将使用 Cisco EIGRP 从 R1 向 NX-OSv 广播所有 172.16.0.0
    网络。
- en: '![Simple topology using NX-OSv](httpatomoreillycomsourcenostarchimages2209151.png.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![使用 NX-OSv 的简单拓扑](httpatomoreillycomsourcenostarchimages2209151.png.jpg)'
- en: Figure 9-21. Simple topology using NX-OSv
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-21. 使用 NX-OSv 的简单拓扑
- en: After you create the project, start all your devices and open a console connection
    to NX-OSv. NX-OS running on a PC takes a long time to boot and often hangs for
    a minute at the `SCSI disk detected` message, displayed in [Figure 9-22](ch09.html#booting_nx-osv
    "Figure 9-22. Booting NX-OSv"). This is normal, so be patient while it starts.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在你创建了项目后，启动所有设备并打开到 NX-OSv 的控制台连接。运行在 PC 上的 NX-OS 启动时间较长，且在显示 `SCSI disk detected`
    消息时，通常会暂停约一分钟，如[图 9-22](ch09.html#booting_nx-osv "图 9-22. 启动 NX-OSv")所示。这是正常现象，因此请耐心等待其启动。
- en: '![Booting NX-OSv](httpatomoreillycomsourcenostarchimages2209153.png.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![启动 NX-OSv](httpatomoreillycomsourcenostarchimages2209153.png.jpg)'
- en: Figure 9-22. Booting NX-OSv
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-22. 启动 NX-OSv
- en: If you don’t see the boot messages, you may have misconfigured something. Go
    back and check all your settings in VirtualBox and GNS3\. If you continue to have
    problems, there may be something wrong with your *N7K.vmdk* image file.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有看到启动信息，可能是配置有误。请返回并检查 VirtualBox 和 GNS3 中的所有设置。如果问题仍然存在，可能是你的*N7K.vmdk*镜像文件出了问题。
- en: 'After the system starts, you should be presented with a login prompt, like
    the one shown here:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 系统启动后，你应该会看到一个登录提示，像下面这样：
- en: '[PRE15]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The default login and password should be `admin` and `admin`. Use these credentials
    to log on to NX-OSv. This is a good time to enter a few commands. I would start
    with `show run`, `show version`, and `show interface brief`, but you can try any
    IOS commands you’re familiar with. Some will be the same on NX-OS; others will
    not. You can use the question mark (`?`) to display a complete list.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的登录名和密码应该是 `admin` 和 `admin`。使用这些凭据登录到 NX-OSv。此时可以输入一些命令。我会从 `show run`、`show
    version` 和 `show interface brief` 开始，但你也可以尝试任何你熟悉的 IOS 命令。某些命令在 NX-OS 上是相同的，其他则不同。你可以使用问号
    (`?`) 来显示完整的命令列表。
- en: 'Now that you’ve taken a peek at NX-OSv, you can configure your project. First,
    you’ll configure router R1\. Open a console on router R1 and enter the following
    commands to configure all the IP addresses for the project:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了 NX-OSv 的一些基本内容，你可以开始配置你的项目了。首先，你需要配置路由器 R1。打开路由器 R1 的控制台，输入以下命令以配置项目所需的所有
    IP 地址：
- en: '[PRE16]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Next, enable EIGRP and advertise all the IP networks.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，启用 EIGRP 并广播所有的 IP 网络。
- en: '[PRE17]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Now log on to NX-OSv and configure an IP address from the same subnet as R1’s
    interface f0/0.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 现在登录到 NX-OSv，并配置一个与 R1 接口 f0/0 在同一子网的 IP 地址。
- en: '[PRE18]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The first thing you should notice is that NX-OS only accepts IP addresses using
    CIDR notation, so here, the subnet mask is entered as `/24` and not `255.255.255.0`
    as commonly used in IOS. Now use the `ping` command to test connectivity from
    NX-OSv to router R1 and exit to configuration mode.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 你首先应该注意到的是，NX-OS 只接受使用 CIDR 表示法的 IP 地址，因此在这里，子网掩码输入的是 `/24` 而不是常见的 `255.255.255.0`。现在使用
    `ping` 命令测试从 NX-OSv 到路由器 R1 的连通性，并退出到配置模式。
- en: '[PRE19]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Now let’s configure NX-OSv so that it can exchange EIGRP advertised routes with
    router R1\. Note that NX-OS allows you to run EIGRP only for a grace period of
    120 days, unless you have a feature license. Enter the `license grace-period`
    command to start the grace period.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们配置 NX-OSv，使其能够与路由器 R1 交换 EIGRP 广播的路由。请注意，除非你有功能许可证，否则 NX-OS 只允许运行 EIGRP，且仅有
    120 天的宽限期。输入 `license grace-period` 命令以开始宽限期。
- en: '[PRE20]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: You can verify that routes from R1 are being advertised to NX-OSv using the
    `show ip route` command.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用 `show ip route` 命令验证 R1 的路由是否被广播到 NX-OSv。
- en: '[PRE21]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: In the previous lines, notice that the output from this command is different
    from IOS, but all the pertinent information is there. In this example, all of
    the 172.16.0.0 routes have been advertised from R1 to NX-OSv via EIGRP, so you
    should be able to ping any of those addresses. Try that now.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的行中，注意到此命令的输出与 IOS 不同，但所有相关信息都在。举例来说，所有 172.16.0.0 的路由已经通过 EIGRP 从 R1 广播到
    NX-OSv，因此你应该能够 ping 通这些地址。现在试试看。
- en: '[PRE22]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Finally, save your configuration. The command itself is the same as IOS, but
    it provides different output.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，保存你的配置。该命令与 IOS 中的命令相同，但它提供不同的输出。
- en: '[PRE23]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Now that you’ve created a simple project, you can begin experimenting with NX-OSv
    on your own. Keep in mind that some functions will definitely be missing. In my
    version, for example, none of the L2 switch functionality works, only layer 3
    routing. Another item to be aware of is tab completion; it works only on some
    commands, so don’t assume a command doesn’t work just because NX-OSv doesn’t provide
    tab completion on the command line.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建了一个简单的项目，可以开始自行实验 NX-OSv。记住，一些功能肯定会缺失。例如，在我的版本中，L2 交换机功能完全不可用，只有 L3 路由功能可用。另一个需要注意的是
    Tab 补全功能；它只在某些命令上有效，所以不要因为 NX-OSv 在命令行中没有提供 Tab 补全就认为某个命令不工作。
- en: In spite of these limitations, I still find it fun to add NX-OS devices to my
    projects, and I’m sure you will too. To learn more about Cisco Nexus and NX-OS,
    visit *[http://www.cisco.com/en/US/products/ps9402/index.html](http://www.cisco.com/en/US/products/ps9402/index.html)*.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管存在这些限制，我仍然觉得将 NX-OS 设备添加到我的项目中很有趣，我相信你也会。要了解更多关于 Cisco Nexus 和 NX-OS 的信息，请访问
    *[http://www.cisco.com/en/US/products/ps9402/index.html](http://www.cisco.com/en/US/products/ps9402/index.html)*。
- en: Final Thoughts
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最后的思考
- en: In this chapter, you explored IOS on Unix and learned how to leverage IOU to
    add nearly full-featured switching capabilities to GNS3 without using physical
    switches. Although not required for CCNA-level certifications, IOU switching is
    highly useful for CCNP and CCIE certifications.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你探索了 Unix 上的 IOS，并学习了如何利用 IOU 向 GNS3 添加几乎完整的交换功能，而无需使用物理交换机。虽然 CCNA 认证不要求使用
    IOU 交换功能，但对于 CCNP 和 CCIE 认证来说，IOU 交换非常有用。
- en: Next, you installed NX-OSv, a virtual machine that simulates a Cisco Nexus switch
    running NX-OS. NX-OSv can be networked to GNS3 devices using protocols such as
    OSPF and EIGRP, and it’s fun to play with, but it lacks much of the functionality
    you’d find using a real Nexus switch.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你安装了 NX-OSv，这是一个模拟运行 NX-OS 的 Cisco Nexus 交换机的虚拟机。NX-OSv 可以通过 OSPF 和 EIGRP
    等协议与 GNS3 设备进行联网，虽然玩起来很有趣，但它缺乏你在真实 Nexus 交换机上会发现的许多功能。
- en: In the next chapter, I’ll show you a few fun things you can do with GNS3, such
    as creating a simulated access server to manage your routers.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我将向你展示一些使用 GNS3 可以做的有趣事情，比如创建一个模拟访问服务器来管理你的路由器。
