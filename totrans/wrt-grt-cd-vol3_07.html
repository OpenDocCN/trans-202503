<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch05"><span epub:type="pagebreak" id="page_89"/><strong><span class="big">5</span><br/>UML ACTIVITY DIAGRAMS</strong></h2>
<div class="image1"><img src="Images/com.jpg" alt="Image" width="204" height="204"/></div>
<p class="noindent"><span class="big1">UML <em>activity diagrams</em>, traditionally known as <em>flowcharts</em>, illustrate the workflow between different components of a system. Flowcharts were prevalent in the early days of software development and were still used in software design just before the rise of object-oriented programming (OOP).</span> Although the UML object-oriented notation supersedes old-fashioned flowcharting to a large extent, OOP still relies on small methods, functions, and procedures to implement the low-level, nitty-gritty details, and flowcharting is useful for describing control flow in those cases. Hence, UML’s designers created activity diagrams as an updated version of flowcharting.</p>
<h3 class="h3" id="lev-5.1"><strong>5.1 UML Activity State Symbols</strong></h3>
<p class="noindent">UML activity diagrams use state symbols based on traditional flowchart symbols. This section describes some of the ones you’ll commonly use.</p>
<div class="note">
<p class="notet"><span epub:type="pagebreak" id="page_90"/><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>If you want information on general flowcharting, any web search should yield decent results.</em></p>
</div>
<h4 class="h4" id="lev-5.1.1"><strong><em>5.1.1 Start and Stop States</em></strong></h4>
<p class="noindent">UML diagrams always contain a single <em>start state</em>, which represents the start terminal object. This consists of a solid circle with a single arrow (<em>transition</em> in UML parlance) coming from it. You might associate the start state with a label, which would be the name of the whole activity diagram.</p>
<p class="indent">UML also usually contains <em>end state</em> and <em>end flow</em> symbols. An end state symbol terminates an entire process, while an end flow symbol terminates a single thread, useful for processes that involve multiple threads of execution. You might associate the end state symbol with a label that indicates the system’s state at the end of the process.</p>
<p class="indent"><a href="ch05.xhtml#ch5fig1">Figure 5-1</a> shows the start state, end state, and end flow symbols.</p>
<div class="image"><a id="ch5fig1"/><img src="Images/fig5-1.jpg" alt="image" width="327" height="90"/></div>
<p class="figcap"><em>Figure 5-1: UML starting and ending states</em></p>
<p class="indent">While an activity diagram has only one starting state symbol, it might have multiple ending state symbols (think of a method returning from several points in the code). The labels attached to the various ending states will likely be different, such as “exception exit” and “normal exit.”</p>
<h4 class="h4" id="lev-5.1.2"><strong><em>5.1.2 Activities</em></strong></h4>
<p class="noindent">Activity symbols in UML are rectangles with semicircular ends (like the terminal symbol in a flowchart) that represent some action, as shown in <a href="ch05.xhtml#ch5fig2">Figure 5-2</a>.<sup><a href="ch19_footnote.xhtml#ch05fn1" id="ch05fn1a">1</a></sup></p>
<div class="image"><a id="ch5fig2"/><img src="Images/fig5-2.jpg" alt="image" width="177" height="77"/></div>
<p class="figcap"><em>Figure 5-2: UML activities</em></p>
<p class="indent">Activities, as a general rule, correspond to one or more statements (actions) in a programming language that execute sequentially. The text inside the symbol describes the action to perform, such as “read data” or “compute CRC.” Generally, a UML activity doesn’t include much low-level detail; it’s the programmer’s job to provide that.</p>
<h4 class="h4" id="lev-5.1.3"><span epub:type="pagebreak" id="page_91"/><strong><em>5.1.3 States</em></strong></h4>
<p class="noindent">UML activity diagrams also provide intermediate states, in addition to start and end states, which effectively act as milestones indicating some existing condition(s) at the point of the state symbol. State symbols are rounded rectangles (<em>roundangles</em>), as shown in <a href="ch05.xhtml#ch5fig3">Figure 5-3</a>, although the rounded corners are much smaller than those of activity symbols.</p>
<div class="image"><a id="ch5fig3"/><img src="Images/fig5-3.jpg" alt="image" width="178" height="65"/></div>
<p class="figcap"><em>Figure 5-3: UML states</em></p>
<p class="indent">The text in the state symbol should describe the state of the system at that given point. For example, if the activity is “compute CRC,” you might label the state immediately following it as “CRC computed” or “CRC available.” States don’t incorporate any action, only the current condition of the system at a given point.</p>
<h4 class="h4" id="lev-5.1.4"><strong><em>5.1.4 Transitions</em></strong></h4>
<p class="noindent">Transitions indicate a flow of control from one point in an activity diagram (for example, a state or activity) to another. If a transition flows out of some activity, it means the system makes that transition upon completing most of the actions associated with that activity. If a pair of transitions flows into and out of a state, control flow transfers immediately to wherever the outgoing arrow points. A UML state is effectively a marker in the middle of a transition, and so no action takes place in a UML state, as shown in <a href="ch05.xhtml#ch5fig4">Figure 5-4</a>.</p>
<div class="image"><a id="ch5fig4"/><img src="Images/fig5-4.jpg" alt="image" width="673" height="166"/></div>
<p class="figcap"><em>Figure 5-4: Control flow through a state</em></p>
<h4 class="h4" id="lev-5.1.5"><strong><em>5.1.5 Conditionals</em></strong></h4>
<p class="noindent">You can handle conditionals in a couple of different ways in a UML activity diagram: transition guards and decision points.</p>
<h5 class="h5" id="lev-5.1.5.1"><strong>5.1.5.1 Transition Guards</strong></h5>
<p class="noindent">In conditionals, a Boolean expression is attached to a transition symbol. UML calls these Boolean expressions <em>guards</em>. A conditional UML symbol must have at least two guarded transitions, which are labeled with expressions surrounded by square brackets, but might have more than two, as in <a href="ch05.xhtml#ch5fig5">Figure 5-5</a> (where the hexagon shape represents an arbitrary UML symbol).</p>
<div class="image"><a id="ch5fig5"/><span epub:type="pagebreak" id="page_92"/><img src="Images/fig5-5.jpg" alt="image" width="471" height="312"/></div>
<p class="figcap"><em>Figure 5-5: Transition guards</em></p>
<p class="indent">The set of Boolean expressions must be mutually exclusive; that is, only one expression can be <code>true</code> at all times. Furthermore, the expression coverage must be <em>complete</em>, which in this context means that for all possible combinations of input values, at least one Boolean expression in a set of guarded transitions must evaluate to <code>true</code> (which, combined with the first condition, means <em>exactly one</em> Boolean condition must evaluate to <code>true</code>).</p>
<p class="indent">If you want a “catch-all” transition to handle any input values that the existing guards don’t handle, just attach a word like <em>else</em>, <em>otherwise</em>, or <em>default</em> to a transition (see <a href="ch05.xhtml#ch5fig6">Figure 5-6</a>).</p>
<div class="image"><a id="ch5fig6"/><img src="Images/fig5-6.jpg" alt="image" width="439" height="312"/></div>
<p class="figcap"><em>Figure 5-6: Catch-all transition guard</em></p>
<h5 class="h5" id="lev-5.1.5.2"><strong>5.1.5.2 Decision Points</strong></h5>
<p class="noindent">Transitions with guards can exit just about any UML symbol; state and action symbols often contain them. Problems can occur, however, if you have several actions or states merging into a single point at which a decision can create divergent paths. For this, UML provides a special symbol, the <em>decision point</em>, to cleanly collect and join paths where a decision branch occurs. Decision points use a diamond-shaped symbol, as shown in <a href="ch05.xhtml#ch5fig7">Figure 5-7</a>.</p>
<div class="image"><a id="ch5fig7"/><span epub:type="pagebreak" id="page_93"/><img src="Images/fig5-7.jpg" alt="image" width="422" height="349"/></div>
<p class="figcap"><em>Figure 5-7: A UML decision point</em></p>
<p class="indent">Although UML allows guarded transitions to emanate from any UML symbol, it’s good practice to always use a decision point to begin a set of related guarded transitions.</p>
<h4 class="h4" id="lev-5.1.6"><strong><em>5.1.6 Merge Points</em></strong></h4>
<p class="noindent">In UML we can also use the diamond shape to collect several incoming transitions into a single outgoing transition, as shown in <a href="ch05.xhtml#ch5fig8">Figure 5-8</a>; we call this a <em>merge point</em>.</p>
<div class="image"><a id="ch5fig8"/><img src="Images/fig5-8.jpg" alt="image" width="351" height="344"/></div>
<p class="figcap"><em>Figure 5-8: A UML merge point</em></p>
<p class="indent">Technically, a merge point and a decision point are the same object type. Essentially, a merge point is an unnamed state object; it takes no action other than passing control from all the incoming transitions to the outgoing transition. A decision point is just a special case of a merge point that has multiple outgoing guarded transitions.</p>
<p class="indent"><span epub:type="pagebreak" id="page_94"/>In theory, a merge point could have both multiple incoming and outgoing guarded transitions. However, the result would be so ugly that the common convention is instead to divide the single point into separate merge and decision points, as shown in <a href="ch05.xhtml#ch5fig9">Figure 5-9</a>. Most of the time, this separation is clearer and easier to read than the alternative.</p>
<div class="image"><a id="ch5fig9"/><img src="Images/fig5-9.jpg" alt="image" width="385" height="554"/></div>
<p class="figcap"><em>Figure 5-9: UML merge and decision points</em></p>
<h4 class="h4" id="lev-5.1.7"><strong><em>5.1.7 Events and Triggers</em></strong></h4>
<p class="noindent">Events and triggers are actions outside the current flow of control, typically from some other thread of execution or hardware input, that cause some change in it.<sup><a href="ch19_footnote.xhtml#ch05fn2" id="ch05fn2a">2</a></sup> In UML, event and trigger transitions are syntactically similar to guarded transitions in that they consist of a labeled transition. The difference is that a guarded transition immediately evaluates some Boolean expression and transfers control to the UML symbol at the other end of the transition, whereas an event or trigger transition waits for the event or trigger to occur before transferring control.</p>
<p class="indent"><span epub:type="pagebreak" id="page_95"/>Event and trigger transitions are labeled with the name of the event or trigger along with any necessary parameters provided to the control flow when it occurs (see <a href="ch05.xhtml#ch5fig10">Figure 5-10</a>).</p>
<div class="image"><a id="ch5fig10"/><img src="Images/fig5-10.jpg" alt="image" width="508" height="240"/></div>
<p class="figcap"><em>Figure 5-10: UML events or triggers</em></p>
<p class="indent">In this example, the system is waiting for input from the user (perhaps clicking a UI button on the display). When the user activates the save, exit, or load operation, control transfers to the specified action at the end of the event or trigger transition (Save file, Quit program, or Load file, respectively).</p>
<p class="indent">You can also attach guard conditions to an event or trigger transition, consisting of a Boolean expression inside square brackets immediately following the trigger or event, as shown in <a href="ch05.xhtml#ch5fig11">Figure 5-11</a>. When you do so, the transition occurs only when the event or trigger occurs and the guard expression evaluates to <code>true</code>.</p>
<div class="image"><a id="ch5fig11"/><img src="Images/fig5-11.jpg" alt="image" width="508" height="240"/></div>
<p class="figcap"><em>Figure 5-11: Guard conditions on events or triggers</em></p>
<p class="indent">UML events and triggers also support action expressions and multiple actions, which are beyond the scope of this chapter. To find out more, check out examples in Tom Pender’s <em>UML Bible</em> (see “<a href="ch05.xhtml#lev-5.3">For More Information</a>” on <a href="ch05.xhtml#page_100">page 100</a>).</p>
<h4 class="h4" id="lev-5.1.8"><span epub:type="pagebreak" id="page_96"/><strong><em>5.1.8 Forks and Joins (Synchronization)</em></strong></h4>
<p class="noindent">UML offers support for concurrent processing by providing symbols to split a single thread of execution into multiple threads as well as to join multiple threads of execution into a single thread (see <a href="ch05.xhtml#ch5fig12">Figure 5-12</a>).<sup><a href="ch19_footnote.xhtml#ch05fn3" id="ch05fn3a">3</a></sup></p>
<div class="image"><a id="ch5fig12"/><img src="Images/fig5-12.jpg" alt="image" width="556" height="216"/></div>
<p class="figcap"><em>Figure 5-12: Forks and joins</em></p>
<p class="indent">The UML <em>fork</em> operation (a thin, solid rectangle) splits a single thread of execution into two or more concurrent operations. The <em>join</em> operation (also represented by a thin, solid rectangle) merges multiple sets of threads into a single thread of execution. The join operation also synchronizes the threads: the diagram assumes that all but the last thread entering the join operation will halt until the final thread arrives, at which point a single thread of execution continues on output.</p>
<h4 class="h4" id="lev-5.1.9"><strong><em>5.1.9 Call Symbols</em></strong></h4>
<p class="noindent">A call symbol in UML, which looks like a small rake, attaches to an activity to explicitly declare it as an invocation of another UML sequence. You include the call symbol inside the UML activity along with the name of the sequence to invoke, as shown in <a href="ch05.xhtml#ch5fig13">Figure 5-13</a>.</p>
<p class="indent">Elsewhere in your UML document, you’ll define that sequence (or <em>subroutine</em>) using the invocation name as the activity diagram name, as shown in <a href="ch05.xhtml#ch5fig14">Figure 5-14</a>.</p>
<div class="image"><a id="ch5fig13"/><img src="Images/fig5-13.jpg" alt="image" width="294" height="53"/></div>
<p class="figcap"><em>Figure 5-13: A UML sequence invocation</em></p>
<div class="image"><a id="ch5fig14"/><img src="Images/fig5-14.jpg" alt="image" width="249" height="243"/></div>
<p class="figcap"><em>Figure 5-14: A UML subroutine</em></p>
<h4 class="h4" id="lev-5.1.10"><span epub:type="pagebreak" id="page_97"/><strong><em>5.1.10 Partitions</em></strong></h4>
<p class="noindent">Partitions, which organize the steps of a process, consist of several side-by-side rectangular boxes, each labeled at the top with an actor, object, or domain name.<sup><a href="ch19_footnote.xhtml#ch05fn4" id="ch05fn4a">4</a></sup> The activity diagram transitions between the boxes as each part of the process comes under the control of the owner of a given box, as shown in <a href="ch05.xhtml#ch5fig15">Figure 5-15</a>.</p>
<div class="image"><a id="ch5fig15"/><img src="Images/fig5-15.jpg" alt="image" width="602" height="710"/></div>
<p class="figcap"><em>Figure 5-15: A UML partition</em></p>
<p class="indent">The process in <a href="ch05.xhtml#ch5fig15">Figure 5-15</a> shows some code under test. An operator selects a test to run, passing control to the test software. An event or trigger then transfers control to the “Run test #1” action. The test software calls the code under test (in the third partition). After the code under test executes, control returns to the test software, which determines whether the test passed or failed. If the test passes, the test code displays “Pass” to the operator; other­wise, the test code runs a diagnostic routine.</p>
<h4 class="h4" id="lev-5.1.11"><span epub:type="pagebreak" id="page_98"/><strong><em>5.1.11 Comments and Annotations</em></strong></h4>
<p class="noindent">Comments and annotations in UML use an icon that looks like a small page with a folded corner, as shown in <a href="ch05.xhtml#ch5fig16">Figure 5-16</a>. You draw a dashed line from one side of the box to the UML item you want to annotate.</p>
<div class="image"><a id="ch5fig16"/><img src="Images/fig5-16.jpg" alt="image" width="442" height="218"/></div>
<p class="figcap"><em>Figure 5-16: A UML comment or annotation</em></p>
<h4 class="h4" id="lev-5.1.12"><strong><em>5.1.12 Connectors</em></strong></h4>
<p class="noindent">Connectors are circles with an internal label, typically a number, that indicate that control transfers to some other point in the diagram with the same label (see <a href="ch05.xhtml#ch5fig17">Figure 5-17</a>). You’d use the same symbol for on-page and off-page connectors.</p>
<div class="image"><a id="ch5fig17"/><img src="Images/fig5-17.jpg" alt="image" width="372" height="164"/></div>
<p class="figcap"><em>Figure 5-17: UML connectors</em></p>
<p class="indent">When used properly, UML connectors can make an activity diagram easier to read by reducing long or overlapping transition lines. However, keep in mind that connectors are the UML equivalent of a <code>goto</code> statement in a programming language, and overuse can make diagrams more difficult to read.</p>
<h4 class="h4" id="lev-5.1.13"><strong><em>5.1.13 Additional Activity Diagram Symbols</em></strong></h4>
<p class="noindent">The full UML 2.0 specification provides many additional symbols you can use in activity diagrams, such as structured activities, expansion regions/nodes, conditional nodes, loop nodes, and more. We don’t have space to discuss them all in this book’s basic introduction to UML, but if you’re interested in more details, see the sources listed in “For More Information” on <a href="ch05.xhtml#page_100">page 100</a> or search online for “UML.”</p>
<h3 class="h3" id="lev-5.2"><span epub:type="pagebreak" id="page_99"/><strong>5.2 Extending UML Activity Diagrams</strong></h3>
<p class="noindent">Sometimes the UML activity diagram notation just doesn’t cut it. In such cases, you might be tempted to come up with your own custom symbols. This is almost always a bad idea, for the following reasons:</p>
<ul>
<li class="noindent">UML is a <em>standard</em>. If you extend UML, you’re no longer using a well-defined standard. That means all the people who’ve learned UML won’t be able to read your activity diagrams unless they first read your documentation (and will that documentation be available to them in your nonstandard activity diagrams?).</li>
<li class="noindent">There are many UML diagramming tools available for creating and editing UML activity diagrams, and most of them can’t handle nonstandard symbols and objects.</li>
<li class="noindent">Many computer-aided software engineering (CASE) tools can generate code directly from a UML diagram. Again, these CASE tools work only with standard UML and probably won’t be able to handle your nonstandard extensions.</li>
<li class="noindent">If you can’t figure out how to do something in a UML activity diagram, you may be able to use some other scheme. Using a nonstandard way to do a task that you can easily do with standard tools may come across to other UML users as an amateur approach.</li>
</ul>
<p class="indent">All that being said, UML is far from perfect. In rare cases, developing some nonstandard activity diagram objects can vastly simplify your activity diagrams.</p>
<p class="indent">As an example, consider a concurrent programming <em>critical section</em>, a region of code in which only one thread of execution can take place at a time. UML sequence diagrams (the subject of <a href="ch07.xhtml">Chapter 7</a>) use <em>sequence fragment</em> notation to describe concurrency with critical regions. Although you could adapt sequence fragment notation to activity diagrams, the result is messy and hard to read and understand. In some activity diagrams I’ve created for personal projects, I used the custom notation in <a href="ch05.xhtml#ch5fig18">Figure 5-18</a> to indicate critical regions.</p>
<div class="image"><a id="ch5fig18"/><img src="Images/fig5-18.jpg" alt="image" width="516" height="171"/></div>
<p class="figcap"><em>Figure 5-18: A nonstandard critical region diagram</em></p>
<p class="indent">Arrows coming in to the pentagon on the left indicate transitions (generally from different threads) competing for a critical section. The single line out of the pentagon represents the single thread of execution that takes place in the critical section. The pentagon on the right accepts that <span epub:type="pagebreak" id="page_100"/>single thread of execution and routes it back to the original thread (for example, if T1 was the thread that entered the critical section, the close of the critical section routes control back to the T1 transition/flow).</p>
<p class="indent">This diagram doesn’t imply that there are only five threads that can use this critical section. Instead, it conveys that there are five activity diagram flows (T1–T5) that could compete for the critical resource. In fact, there could be multiple threads executing any one of these flows that are also competing for the critical region. For example, there could be three threads all executing the T1 flow and waiting for the critical region to be available.</p>
<p class="indent">Because multiple threads could be executing on the same flow in the critical section diagram, it’s quite possible to have only a single flow entering the critical region (see <a href="ch05.xhtml#ch5fig19">Figure 5-19</a>).</p>
<div class="image"><a id="ch5fig19"/><img src="Images/fig5-19.jpg" alt="image" width="513" height="168"/></div>
<p class="figcap"><em>Figure 5-19: A single-flow critical region diagram</em></p>
<p class="indent">This example requires that multiple threads execute the same flow (T1) for this diagram to make any sense.</p>
<p class="indent">As you can see, even a simple diagram like this requires a fair amount of documentation to describe and validate it. If that documentation isn’t readily available (that is, if it’s not embedded directly in your UML activity diagrams), readers probably won’t find it when they’re trying to understand your diagram. Annotating a nonstandard object directly within the diagram is the only reasonable approach. Placing meaningful documentation in a separate section of the document containing the activity diagrams (such as the SDD document), or in a separate document altogether, makes this information unavailable when someone cuts and pastes your diagram into a different document.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>The critical region diagram in <a href="ch05.xhtml#ch5fig19">Figure 5-19</a> is simply an example of how you might extend UML activity diagrams. In general, I don’t recommend adopting it in your own diagrams, nor do I recommend extending UML notation. However, you should know that the option is available if you really need it.</em></p>
</div>
<h3 class="h3" id="lev-5.3"><strong>5.3 For More Information</strong></h3>
<p class="ref">Bremer, Michael. <em>The User Manual Manual: How to Research, Write, Test, Edit, and Produce a Software Manual</em>. Grass Valley, CA: UnTechnical Press, 1999. A sample chapter is available at <em><a href="http://www.untechnicalpress.com/Downloads/UMM%20sample%20doc.pdf">http://www.untechnicalpress.com/Downloads/UMM%20sample%20doc.pdf</a></em>.</p>
<p class="ref"><span epub:type="pagebreak" id="page_101"/>Larman, Craig. <em>Applying UML and Patterns: An Introduction to Object-Oriented Analysis and Design and Iterative Development</em>. 3rd ed. Upper Saddle River, NJ: Prentice Hall, 2004.</p>
<p class="ref">Miles, Russ, and Kim Hamilton. <em>Learning UML 2.0: A Pragmatic Introduction to UML</em>. Sebastopol, CA: O’Reilly Media, 2003.</p>
<p class="ref">Pender, Tom. <em>UML Bible</em>. Indianapolis: Wiley, 2003.</p>
<p class="ref">Pilone, Dan, and Neil Pitman. <em>UML 2.0 in a Nutshell: A Desktop Quick Reference</em>. 2nd ed. Sebastopol, CA: O’Reilly Media, 2005.</p>
<p class="ref">Roff, Jason T. <em>UML: A Beginner’s Guide</em>. Berkeley, CA: McGraw-Hill Education, 2003.</p>
<p class="ref">Tutorials Point. “UML Tutorial.” <a href="https://www.tutorialspoint.com/uml/"><em>https://www.tutorialspoint.com/uml/</em></a>.<span epub:type="pagebreak" id="page_102"/></p>
</div>



  </body></html>