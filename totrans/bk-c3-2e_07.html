<html><head></head><body>
<h2 class="h2" id="ch07"><a id="page_75"/><strong>7</strong></h2>
<p class="h2a"><strong>MULTIPLE COLUMNS</strong></p>
<div class="image"><img alt="Image" src="graphics/common-01.jpg"/></div>
<p class="noindentt">Although desktop and laptop screens have gotten wider in recent years, studies still show that people have difficulty reading long lines of text. (Roughly 65 to 75 characters per line is generally considered a comfortable length to read.) This convention has led to restricted layouts and websites that don’t take advantage of the opportunities presented by wider screens.</p>
<p class="indent">For years, magazines and newspapers have used multiple columns to flow content—addressing both the issue of long text lines and how to pack a lot of copy into limited spaces. Now, with the advent of the Multi-column Layout Module in CSS3 (<em><a href="http://www.w3.org/TR/css3-multicol/">http://www.w3.org/TR/css3-multicol/</a></em>), websites can take advantage of multiple columns, too.</p>
<p class="indent">The Multi-column Layout Module currently has Candidate Recommendation status, meaning the module is considered mostly complete and is well implemented in IE10+ and other modern browsers (albeit with some minor caveats), so you have plenty of opportunities to experiment with multiple columns.</p>
<h3 class="h3" id="ch07leve1sec80"><a id="page_76"/><strong>Column Layout Methods</strong></h3>
<p class="noindent">You can divide your content into columns using two methods: either prescriptively, by setting a specific number of columns, or dynamically, by specifying the width of columns and allowing the browser to calculate how many columns will fit into the width of the parent element.</p>
<p class="indent">Note that, although Chrome, Firefox, Safari, and IE10+ all support the properties in this chapter at the time of writing, the latter browser is the only one to do so without a vendor prefix. The different browsers also have a few implementation quirks, which I’ll point out as I go along.</p>
<h4 class="h4" id="ch07leve1sec81"><strong><em>Prescriptive Columns: column-count</em></strong></h4>
<p class="noindent">The simplest way to divide your content into equally distributed columns is to use the <code>column-count</code> property:</p>
<pre class="programs"><span class="codeitalic">E</span> { column-count: <span class="codeitalic">columns</span>; }</pre>
<p class="indent">The element <code><em>E</em></code> is the parent of the content you want to divide, and the <code><em>columns</em></code> value is an integer that sets the number of columns. For example, to flow content inside a <code>div</code> element into two columns, you would use:</p>
<pre class="programs">div { column-count: 2; }</pre>
<p class="indent">Let’s move on to a real-world example. I’ll demonstrate a few paragraphs of copy displayed twice, the first distributed over two columns and the second over three columns. Here’s the code I’ll use:</p>
<pre class="programs">div[class*='-2'] { column-count: 2; }<br/>div[class*='-3'] { column-count: 3; }</pre>
<p class="note"><strong><small>NOTE</small></strong><br/><em>I’ve used the Arbitrary Substring Attribute Value Selector in these examples, which</em> <em>I introduced in <a href="ch03.html#ch03">Chapter 3</a>.</em></p>
<p class="indent">You can see the results of this code in <a href="ch07.html#ch07fig1">Figure 7-1</a>.</p>
<div class="image"><img alt="Image" src="graphics/f07-01.jpg"/></div>
<p class="figuret"><a id="ch07fig1"/><em>Figure 7-1: Text broken over two and then three columns</em></p>
<p class="indent"><a id="page_77"/>Here’s the markup I used for the example shown in <a href="ch07.html#ch07fig1">Figure 7-1</a> (edited for brevity):</p>
<pre class="programs">&lt;div class="columns-2"&gt;<br/>    &lt;p&gt;A young man…&lt;/p&gt;<br/>&lt;/div&gt;<br/>&lt;div class="columns-3"&gt;<br/>    &lt;p&gt;A young man…&lt;/p&gt;<br/>&lt;/div&gt;</pre>
<p class="indent">The syntax is extremely simple, and the browser takes care of distributing the content equally.</p>
<h4 class="h4" id="ch07leve1sec82"><strong><em>Dynamic Columns: column-width</em></strong></h4>
<p class="noindent">The second method for dividing content into columns is perhaps a better choice for flexible layouts. Instead of specifying the number of columns, you use the <code>column-width</code> property to specify the width of each column, and the browser fills the parent element with as many columns as can fit along its width. The syntax is just as easy:</p>
<pre class="programs"><span class="codeitalic">E</span> { column-width: <span class="codeitalic">length</span>; }</pre>
<p class="indent">As with <code>column-count</code>, <code><em>E</em></code> is the parent element of the content you want to divide into columns. But <code>column-width</code> differs in that it requires a <code><em>length</em></code> value: either a unit of length (such as px or em) or a percentage. Here’s an example:</p>
<pre class="programs">div { column-width: 150px; }</pre>
<p class="indent">This code divides the child elements of the <code>div</code> into columns that are 150px wide and repeats the columns along the width of the <code>div</code>. Let’s see how this works, using the following style rules:</p>
<pre class="programs">.columns {<br/>    column-width: 150px;<br/>    width: 710px;<br/>}</pre>
<p class="indent">Here, I have an element with a class name of <code>columns</code>, which is 710px wide; the content inside it will be distributed into 150px-width columns. You can see how this renders in <a href="ch07.html#ch07fig2">Figure 7-2</a>.</p>
<p class="indent">With the <code>column-width</code> set to 150px, the browser has created four columns to fill the parent element. But all is not as it seems. Remember, the parent element is 710px wide, and even with a 12px-gap between each column (we’ll talk about that shortly), the total width comes to only 636px, so where is the extra white space?</p>
<div class="image"><a id="page_78"/><img alt="Image" src="graphics/f07-02.jpg"/></div>
<p class="figuret"><a id="ch07fig2"/><em>Figure 7-2: Text broken across dynamically created, equally spaced columns</em></p>
<p class="indent">The algorithm that creates the columns is actually quite intelligent and resizes the columns automatically so they better fit the parent. It uses the 150px as a <em>minimum</em> value, making each column wider until the total width matches that of its parent—in this case, each column is resized to 168.5px.</p>
<h4 class="h4" id="ch07leve1sec83"><strong><em>Varying Distribution of Content Across Columns</em></strong></h4>
<p class="noindent">By default, content that’s flowed into multiple columns will be balanced as equally as possible across the columns, so no one column is longer than any of the others. If the browser can’t arrange the content so there are an equal number of lines in each column, the last column will be made shorter. This is probably easier to show than to explain, so <a href="ch07.html#ch07fig3">Figure 7-3</a> shows text distributed over three columns using the default layout method.</p>
<div class="image"><img alt="Image" src="graphics/f07-03.jpg"/></div>
<p class="figuret"><a id="ch07fig3"/><em>Figure 7-3: Text dynamically distributed over three columns</em></p>
<p class="indent">You can see that all three columns have the same number of lines. If you want to change this default behavior, you can do so with the <code>column-fill</code> property:</p>
<pre class="programs"><span class="codeitalic">E</span> { column-fill: <span class="codeitalic">keyword</span>; }</pre>
<p class="indent">This property has two possible keyword values: the default is <code>balance</code>, which tries to make all the columns equal length, as in <a href="ch07.html#ch07fig3">Figure 7-3</a>; and the alternative is <code>auto</code>, which fills columns sequentially.</p>
<p class="indent">The <code>auto</code> value takes effect only when the parent element has a fixed height. The content is flowed into the first column to fill the height and then into the next column until that one is filled, and so on.</p>
<p class="note"><a id="page_79"/><strong><small>WARNING</small></strong><br/><em>When using the</em> <code><em>auto</em></code> <em>value, it may appear that you have fewer columns than are specified in the</em> <code><em>column-count</em></code> <em>property, but that won’t be the case; it’s just that some columns would be empty.</em></p>
<p class="indent">You can see an example of the <code>auto</code> value for <code>column-fill</code> in <a href="ch07.html#ch07fig4">Figure 7-4</a>; the first two columns have an equal number of lines and the third has three fewer, as the text is simply flowed into the columns without the browser trying to balance them.</p>
<div class="image"><img alt="Image" src="graphics/f07-04.jpg"/></div>
<p class="figuret"><a id="ch07fig4"/><em>Figure 7-4: Content flowed into columns with the</em> <code><em>auto</em></code> <em>value for the</em> <code><em>column-fill</em></code> <em>property</em></p>
<p class="indent">Firefox and IE10+ are the only browsers to implement this property currently, although Chrome and Safari automatically act as if the <code>auto</code> value were applied when a height is fixed on the parent.</p>
<h4 class="h4" id="ch07leve1sec84"><strong><em>Combining column-count and column-width</em></strong></h4>
<p class="noindent">You can set both <code>column-count</code> and <code>column-width</code> properties on an element, though, at first, you might think doing so would create a conflict. This possibility has been taken into consideration, however: If both properties are applied to the same element, the <code>column-count</code> value acts as a maximum. To illustrate, let’s refer to <a href="ch07.html#ch07fig2">Figure 7-2</a> but change the CSS to also include the <code>column-count</code> property:</p>
<pre class="programs">.columns {<br/>    column-count: 3;<br/>    column-width: 150px;<br/>}</pre>
<p class="indent">Here is the logic behind this: divide the text into columns of 150px each, unless that would create three or more columns, in which case make three columns with a minimum width of 150px.</p>
<p class="indent">If you refer back to the example shown in <a href="ch07.html#ch07fig2">Figure 7-2</a>, you’ll remember that, given the parent element’s width of 710px, the <code>column-width</code> property rendered four columns. As you’re applying both properties on the same element, however, the <code>column-count</code> property takes precedence and only three columns are distributed, with their widths dynamically altered to best fit the parent element. You can see the result in <a href="ch07.html#ch07fig5">Figure 7-5</a>.</p>
<div class="image"><a id="page_80"/><img alt="Image" src="graphics/f07-05.jpg"/></div>
<p class="figuret"><a id="ch07fig5"/><em>Figure 7-5: When combining column properties,</em> <code><em>column-count</em></code> <em>acts as a maximum.</em></p>
<p class="indent">If you want to use these two properties together, a shorthand property is available:</p>
<pre class="programs"><span class="codeitalic">E</span> { columns: <span class="codeitalic">column-width column-count</span>; }</pre>
<p class="indent">So if you were to use the values from <a href="ch07.html#ch07fig5">Figure 7-5</a> with this shorthand property, it would look like this:</p>
<pre class="programs">div { columns: 150px 3; }</pre>
<h3 class="h3" id="ch07leve1sec85"><strong>Column Gaps and Rules</strong></h3>
<p class="noindent">When using a prescriptive multi-column layout, the browser should place a default 1em gap between each column. You can, however, alter that default and specify your own distances by using two new properties: <code>column-gap</code> and <code>column-rule</code>.</p>
<p class="indent">The first property, <code>column-gap</code>, sets the space between columns, and its syntax is simple:</p>
<pre class="programs"><span class="codeitalic">E</span> { column-gap: <span class="codeitalic">length</span>; }</pre>
<p class="indent">The <code><em>length</em></code> value is any number with a standard CSS length unit. Here’s an example that puts a 2em gap between each of your generated columns (though not on the outside of either the first or last column):</p>
<pre class="programs">div { column-gap: 2em; }</pre>
<p class="indent">The second property, <code>column-rule</code>, draws a line, similar to a border, equidistantly between columns. The syntax for <code>column-rule</code> is actually shorthand for three subproperties: <code>column-rule-width</code>, <code>column-rule-style</code>, and <code>column-rule-color</code>. These subproperties take values in exactly the same way as their equivalent <code>border-*</code> properties from CSS2. Here’s the syntax:</p>
<pre class="programs"><span class="codeitalic">E</span> {<br/>   column-rule-width: <span class="codeitalic">length</span>;<br/>   column-rule-style: <span class="codeitalic">border-style</span>;<br/>   column-rule-color: <span class="codeitalic">color</span>;<br/>   column-rule: <span class="codeitalic">length border-style color</span>;<br/>}</pre>
<p class="indent"><a id="page_81"/>If you added real values, you would have something like this:</p>
<pre class="programs">div {<br/>    column-rule-color: silver;<br/>    column-rule-style: double;<br/>    column-rule-width: 0.3em;<br/>}</pre>
<p class="indent">You can then use the <code>column-rule</code> shorthand to set all three subproperties at once:</p>
<pre class="programs">div { column-rule: 0.3em double silver; }</pre>
<p class="indent">Let’s see the <code>column-gap</code> and <code>column-rule</code> properties in action. The following example combines them with <code>column-count</code>:</p>
<pre class="programs">.columns {<br/>    column-count: 3;<br/>    column-gap: 2em;<br/>    column-rule: 0.3em double silver;<br/>}</pre>
<p class="indent">This example splits the element’s children into three columns, each with a gap of 2em between the columns, and a 0.3em rule. The thickness of the rule has no effect on layout—no matter how thick you make the rule, the gap will always stay the same width. You can see the result of this example in <a href="ch07.html#ch07fig6">Figure 7-6</a>.</p>
<div class="image"><img alt="Image" src="graphics/f07-06.jpg"/></div>
<p class="figuret"><a id="ch07fig6"/><em>Figure 7-6: Inter-column gaps and rules</em></p>
<h3 class="h3" id="ch07leve1sec86"><strong>Containing Elements Within Columns</strong></h3>
<p class="noindent">So far in these examples I’ve only used blocks of text, which flow neatly into columns. But what happens with larger elements, like images, that could have a width greater than the column that contains them? Let’s see what happens when I add an image that’s wider than a single column inside a column layout, using the <code>img</code> element. The result is displayed in <a href="ch07.html#ch07fig7">Figure 7-7</a>.</p>
<div class="image"><a id="page_82"/><img alt="Image" src="graphics/f07-07.jpg"/></div>
<p class="figuret"><a id="ch07fig7"/><em>Figure 7-7: An</em> <code><em>img</em></code> <em>element wider than a column<sup><a id="footnote_1"/><a href="footnote.html#footnote1">1</a></sup></em></p>
<p class="indent">As you can see, the image is displayed in the second column, but the overflow is clipped at a point halfway inside the <code>column-gap</code>. The only browser that differs from this behavior (at the time of writing) is Firefox, which (unfortunately) keeps the width of the image but flows the content of subsequent columns over it, as shown in <a href="ch07.html#ch07fig8">Figure 7-8</a>.</p>
<div class="image"><img alt="Image" src="graphics/f07-08.jpg"/></div>
<p class="figuret"><a id="ch07fig8"/><em>Figure 7-8: Firefox differs from all other browsers in the way it displays wide elements in columns.</em></p>
<p class="indent">Hopefully, this issue will be fixed in a future release (perhaps even by the time you read this).</p>
<p class="indent">To work around the problem entirely, I could set a value of <code>100%</code> on the <code>max-width</code> property of the image, as the width is calculated from that of its containing column, rather than the parent element.</p>
<h3 class="h3" id="ch07leve1sec87"><strong>Elements Spanning Multiple Columns</strong></h3>
<p class="noindent">On occasion, you may want certain elements to span multiple columns—for example, a subheading that will be used to break up sections of a story. To deal with these elements, the module introduces the <code>column-span</code> element. Here’s the syntax:</p>
<pre class="programs"><span class="codeitalic">E</span> { column-span: <span class="codeitalic">value</span>; }</pre>
<p class="indent"><a id="page_83"/>In this case, <code><em>value</em></code> can be only one of two possibilities: <code>all</code> or <code>none</code>. The default is <code>none</code>, which keeps the element in the column flow. The alternative value, <code>all</code>, provides a break in the flow—all content before the element will be distributed into columns, and all content after the element will be distributed into columns, but the element itself—known as the <em>spanning element</em>—will not.</p>
<p class="indent">In the following example, the <code>h2</code> element has a <code>column-span</code> value of <code>all</code>, so it spans multiple columns, causing a break in the text flow. You can see the result in <a href="ch07.html#ch07fig9">Figure 7-9</a>.</p>
<pre class="programs">h2 { column-span: all; }</pre>
<div class="image"><img alt="Image" src="graphics/f07-09.jpg"/></div>
<p class="figuret"><a id="ch07fig9"/><em>Figure 7-9: An</em> <code><em>h2</em></code> <em>element spans two columns</em></p>
<p class="indent">Firefox is the only browser not to support this property at the time of writing.</p>
<h3 class="h3" id="ch07leve1sec88"><strong>Summary</strong></h3>
<p class="noindent">Although CSS3 makes flowing your content into columns easy, the challenges it presents are not so much technical as they are practical: What happens if you want to use images that are wider than a column or if you want to use long headlines in narrow columns?</p>
<p class="indent">Although using multiple columns is definitely appropriate in certain situations, think twice about whether your content is suitable. Make sure you have full control over your content before using these properties, and don’t design websites that rely on multiple columns if your client doesn’t have a dedicated and conscientious web content team.</p>
<p class="indent">Also, bear in mind that screen resolutions can vary dramatically, and content that looks readable to you may not be readable to the visitors of your website. If they have to scroll up and down too frequently, which can cause lots of confusion, they may be put off from visiting your site altogether. But with all that said, clever use of columns can make your content much more readable.</p>
<p class="indent"><a id="page_84"/>In the last three chapters, I’ve described how CSS3 provides methods to format and present your text copy, giving you better control over your typography and layout. Next, I introduce ways you can improve the overall visual presentation of your websites, starting with new background and border effects.</p>
<h3 class="h3" id="ch07leve1sec89"><strong>Multiple Columns: Browser Support</strong></h3>
<table border="0" cellpadding="0" cellspacing="0" class="all" width="100%">
<tr>
<td class="table2" valign="top"><p class="table"/></td>
<td class="table2" valign="top"><p class="table"><strong>Chrome</strong></p></td>
<td class="table2" valign="top"><p class="table"><strong>Firefox</strong></p></td>
<td class="table2" valign="top"><p class="table"><strong>Safari</strong></p></td>
<td class="table2" valign="top"><p class="table"><strong>IE</strong></p></td>
</tr>
<tr>
<td class="table" valign="top"><p class="table"><code>column-count</code></p></td>
<td class="table" valign="top"><p class="table">Yes<sup><a id="footnote_26a"/><a href="ch07.html#footnote26a">*</a></sup></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">IE10</p></td>
</tr>
<tr>
<td class="table4" valign="top"><p class="table"><code>column-width</code></p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">IE10</p></td>
</tr>
<tr>
<td class="table" valign="top"><p class="table"><code>columns</code></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">IE10</p></td>
</tr>
<tr>
<td class="table4" valign="top"><p class="table"><code>column-fill</code></p></td>
<td class="table4" valign="top"><p class="table">No</p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">No</p></td>
<td class="table4" valign="top"><p class="table">IE10</p></td>
</tr>
<tr>
<td class="table" valign="top"><p class="table"><code>column-gap</code></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">IE10</p></td>
</tr>
<tr>
<td class="table4" valign="top"><p class="table"><code>column-rule</code></p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table4" valign="top"><p class="table">IE10</p></td>
</tr>
<tr>
<td class="table" valign="top"><p class="table"><code>column-span</code></p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">No</p></td>
<td class="table" valign="top"><p class="table">Yes<a href="ch07.html#footnote26a">*</a></p></td>
<td class="table" valign="top"><p class="table">IE10</p></td>
</tr>
</table>
<p class="footnote"><a id="footnote26a"/><a href="ch07.html#footnote_26a">*</a> With vendor prefix</p>
</body></html>