<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch7"><span epub:type="pagebreak" id="page_91"/><span class="big">7</span><br/>GRAPHING FUNCTIONS</h2>&#13;
<div class="image1"><img src="Images/common.jpg" alt="Image" width="189" height="189"/></div>&#13;
<p class="noindent">Functions with the type <span class="literal">R -&gt; R</span> are functions that can be plotted on a graph. This chapter shows how to plot such functions. Tools for making graphs are not part of the Prelude, so we’ll start by discussing how to install and use library modules.</p>&#13;
<h3 class="h3" id="ch7lev1">Using Library Modules</h3>&#13;
<p class="noindent">There are functions other people have written that we want to use but that are not included in the Prelude. However, such functions exist in library modules that can be imported into our source code file or loaded directly into GHCi. A standard set of library modules comes with GHC (the Glasgow Haskell Compiler we have been using), but other modules require installation.</p>&#13;
<h4 class="h4" id="ch7lev2">Standard Library Modules</h4>&#13;
<p class="noindent">The library module <span class="literal">Data.List</span> is one of the standard library modules. It includes functions for working with lists. To load it into GHCi, use the <span class="literal">:module</span> command (<span class="literal">:m</span> for short).</p>&#13;
<span epub:type="pagebreak" id="page_92"/>&#13;
<pre>Prelude&gt; <span class="codestrong1">:m Data.List</span></pre>&#13;
<p class="indent">Now, we can use functions from this module, such as <span class="literal">sort</span>.</p>&#13;
<pre>Prelude Data.List&gt; <span class="codestrong1">:t sort</span>&#13;
sort :: Ord a =&gt; [a] -&gt; [a]&#13;
Prelude Data.List&gt; <span class="codestrong1">sort [7,5,6]</span>&#13;
[5,6,7]</pre>&#13;
<p class="noindent">Note that the GHCi prompt that normally says <span class="literal">Prelude&gt;</span> has been expanded to include the name of the module we just loaded.</p>&#13;
<p class="indent">To use the <span class="literal">sort</span> function in a source code file, include the line</p>&#13;
<pre>import Data.List</pre>&#13;
<p class="noindent">at the top of your source code file.</p>&#13;
<p class="indent">Documentation for standard libraries is available online at <a href="https://www.haskell.org"><em>https://www.haskell.org</em></a> under Documentation and then Library Documentation, or you can access it directly at <a href="https://downloads.haskell.org/~ghc/latest/docs/html/libraries/index.html">https://downloads.haskell.org/~ghc/latest/docs/html/libraries/index.html</a>.</p>&#13;
<h4 class="h4" id="ch7lev3">Other Library Modules</h4>&#13;
<p class="noindent">Library modules outside of the standard libraries are organized into <em>packages</em>. The appendix describes how to install Haskell library packages. Each package contains one or more modules. For the plotting we’ll do in this chapter, we want the <span class="literal">Graphics.Gnuplot.Simple</span> module, which is supplied by the <span class="literal">gnuplot</span> package.</p>&#13;
<p class="indent">Follow the instructions in the appendix to install gnuplot. Several steps are required. The installation ends with commands such as the following:</p>&#13;
<pre><span class="codestrong1">$ cabal install gnuplot</span></pre>&#13;
<p class="noindent">or</p>&#13;
<pre><span class="codestrong1">$</span> stack install <span class="codestrong1">gnuplot</span></pre>&#13;
<p class="indent">After installing the <span class="literal">gnuplot</span> package, you can restart GHCi and load the <span class="literal">Graphics.Gnuplot.Simple</span> module into GHCi, like so:</p>&#13;
<pre>Prelude Data.List&gt; <span class="codestrong1">:m Graphics.Gnuplot.Simple</span></pre>&#13;
<p class="indent">Before we start the next section, let’s unload the <span class="literal">Graphics.Gnuplot.Simple</span> module so we’re starting with a clean slate:</p>&#13;
<pre>Prelude Graphics.Gnuplot.Simple&gt; <span class="codestrong1">:m</span></pre>&#13;
<p class="indent">Issuing the <span class="literal">:m</span> command without any module name will clear any loaded modules.</p>&#13;
<h3 class="h3" id="ch7lev4"><span epub:type="pagebreak" id="page_93"/>Plotting</h3>&#13;
<p class="noindent">There are times when you want to make a quick plot to see what a function looks like. Here is an example of how to do this using GHCi:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">:m Graphics.Gnuplot.Simple</span>&#13;
Prelude Graphics.Gnuplot.Simple&gt; <span class="codestrong1">plotFunc [] [0,0.1..10] cos</span></pre>&#13;
<p class="indent">The first command loads a graphics module that can make graphs. The second command plots the function <span class="literal">cos</span> from 0 to 10 in increments of 0.1. This is carried out by the plotFunc function, which is one of the functions provided by the <span class="literal">Graphics.Gnuplot.Simple</span> module. The <span class="literal">plotFunc</span> function takes a list of attributes (in this case, the empty list, <span class="literal">[]</span>), a list of values at which to compute the function (in this case, <span class="literal">[0,0.1..10]</span>, which is a list of 101 numbers from 0 to 10 in increments of 0.1), and a function to plot (in this case, <span class="literal">cos</span>).</p>&#13;
<p class="indent">100 points is usually enough to get a nice smooth graph. If it’s not smooth enough for you, you could use 500 points or more. If you use only 4 points, you won’t get a smooth graph (try it and see what happens). In <a href="ch11.xhtml">Chapter 11</a>, we’ll learn how to make a nice plot with a title and axis labels for a presentation or an assignment.</p>&#13;
<p class="indent">If you wish to plot a function that is defined in a program file, you have a few options:</p>&#13;
<ul class="bull">&#13;
<li class="noindent">Put only the function you want to plot in the program file.</li>&#13;
<li class="noindent">Use the program file to import the graphing module and define the function you want to plot.</li>&#13;
<li class="noindent">Use the program file to import the graphing module, define the function you want to plot, and define the plot.</li>&#13;
</ul>&#13;
<p class="indentt">We’ll explore each of these options in turn.</p>&#13;
<h4 class="h4" id="ch7lev5">Function Only</h4>&#13;
<p class="noindent">Suppose we want to plot the <span class="literal">square</span> function we defined in <a href="ch02.xhtml">Chapter 2</a> from <em>x</em> = –3 to <em>x</em> = 3. Let’s unload the <span class="literal">Graphics.Gnuplot.Simple</span> module so that we’re starting with a clean slate:</p>&#13;
<pre>Prelude Graphics.Gnuplot.Simple&gt; <span class="codestrong1">:m</span></pre>&#13;
<p class="indent">Now, we issue the following sequence of commands:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">:m Graphics.Gnuplot.Simple</span>&#13;
Prelude Graphics.Gnuplot.Simple&gt; <span class="codestrong1">:l first.hs</span>&#13;
[1 of 1] Compiling Main            ( first.hs, interpreted )&#13;
Ok, one module loaded.&#13;
*Main Graphics.Gnuplot.Simple&gt; <span class="codestrong1">plotFunc [] [-3,-2.99..3] square</span></pre>&#13;
<p class="indent">The first command loads the graphing module, the second loads the file with the function definition, and the third makes the graph. Using the <span epub:type="pagebreak" id="page_94"/><span class="literal">:module</span> command clears any source code file previously loaded with the <span class="literal">:load</span> command, so you must load the module before the source code file.</p>&#13;
<h4 class="h4" id="ch7lev6">Function and Module</h4>&#13;
<p class="noindent">If we know that a program file contains a function or functions we will want to plot, we can import the <span class="literal">Graphics.Gnuplot.Simple</span> module in the program file so we don’t have to do it at the GHCi command line. Instead of entering the <span class="literal">:m Graphics.Gnuplot.Simple</span> line into GHCi, we can put the following line at the top of our program file:</p>&#13;
<pre>import Graphics.Gnuplot.Simple</pre>&#13;
<p class="indent">Let’s suppose this augmented program file is called <em>firstWithImport.hs</em>. Let’s start with a clean slate by unloading the file and the module:</p>&#13;
<pre>*Main Graphics.Gnuplot.Simple&gt; <span class="codestrong1">:l</span>&#13;
Ok, no modules loaded.&#13;
Prelude Graphics.Gnuplot.Simple&gt; <span class="codestrong1">:m</span></pre>&#13;
<p class="indent">Issuing the <span class="literal">:l</span> command without any filename will clear a loaded program file, leaving any loaded modules intact.</p>&#13;
<p class="indent">Now in GHCi we do the following:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">:l firstWithImport.hs</span>&#13;
[1 of 1] Compiling Main            ( firstWithImport.hs, interpreted )&#13;
Ok, one module loaded.&#13;
*Main&gt; <span class="codestrong1">plotFunc [] [-3,-2.99..3] square</span></pre>&#13;
<p class="indent">You should see the same plot you saw in the last section.</p>&#13;
<h4 class="h4" id="ch7lev7">Function, Module, and Plot Definition</h4>&#13;
<p class="noindent">If we know in advance what plot we want, we can include the plotting commands in the program file itself. In our source code file, we’ll include the <span class="literal">import</span> command,</p>&#13;
<pre>import Graphics.Gnuplot.Simple</pre>&#13;
<p class="noindent">the type synonym that defines the type <span class="literal">R</span>,</p>&#13;
<pre>type R = Double</pre>&#13;
<p class="noindent">the function we’ll plot,</p>&#13;
<pre>square :: R -&gt; R&#13;
square x = x**2</pre>&#13;
<p class="noindent">and the plot we want,</p>&#13;
<span epub:type="pagebreak" id="page_95"/>&#13;
<pre>plot1 :: IO ()&#13;
plot1 = plotFunc [] [-3,-2.99..3] square</pre>&#13;
<p class="indent">Notice the type <span class="literal">IO ()</span> (pronounced “eye oh unit”) of <span class="literal">plot1</span>. The <span class="literal">IO</span> stands for input/output, and it signals the type of an impure function that has a side effect. In this case, the side effect is the graph popping up on the screen. Anything with type <span class="literal">IO ()</span> is something that is done only for its effect and not because we expect a value to be returned.</p>&#13;
<p class="indent">Let’s make a clean slate in GHCi.</p>&#13;
<pre>*Main&gt; <span class="codestrong1">:l</span>&#13;
Ok, no modules loaded.&#13;
Prelude&gt; <span class="codestrong1">:m</span></pre>&#13;
<p class="indent">If the source code file is called <em>QuickPlotting.hs</em>, we just load our file and give the name of our plot.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">:l QuickPlotting.hs</span>&#13;
[1 of 1] Compiling Main            ( QuickPlotting.hs, interpreted )&#13;
Ok, one module loaded.&#13;
*Main&gt; <span class="codestrong1">plot1</span></pre>&#13;
<p class="indent">You should again see the plot.</p>&#13;
<h3 class="h3" id="ch7lev8">Summary</h3>&#13;
<p class="noindent">This chapter introduced library modules, including standard library modules as well as those that require installation. We installed the <span class="literal">gnuplot</span> package, which provides the <span class="literal">Graphics.Gnuplot.Simple</span> module, and showed how to use the function <span class="literal">plotFunc</span> to make basic plots. The chapter also showed different ways to use the functions provided by a module, either by loading the module into GHCi with the <span class="literal">:module</span> command or by importing the module into a source code file using the <span class="literal">import</span> keyword.</p>&#13;
<p class="indent">The next chapter introduces <em>type classes</em>, a mechanism to take advantage of commonality among types.</p>&#13;
<h3 class="h3" id="ch7lev9">Exercises</h3>&#13;
<p class="noindentts"><strong>Exercise 7.1.</strong> Make a plot of sin(<em>x</em>) from <em>x</em> = –10 to <em>x</em> = 10.</p>&#13;
<p class="noindentts"><strong>Exercise 7.2.</strong> Make a plot of your <span class="literal">yRock30</span> function from <em>t</em> = 0 to <em>t</em> = 6 s.</p>&#13;
<p class="noindentts"><strong>Exercise 7.3.</strong> Make a plot of your <span class="literal">yRock 20</span> function from <em>t</em> = 0 to <em>t</em> = 4 s. You will need to enclose <span class="literal">yRock 20</span> in parentheses when you use it as an argument to <span class="literal">plotFunc</span>.<span epub:type="pagebreak" id="page_96"/></p>&#13;
</div></body></html>