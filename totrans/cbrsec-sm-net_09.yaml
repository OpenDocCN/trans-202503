- en: '[9](nsp-enoka501485-0007.xhtml#rch09)'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '[9](nsp-enoka501485-0007.xhtml#rch09)'
- en: Backing Up Your Data
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 备份你的数据
- en: '![Chapter opening icon](images/nsp-enoka501485-ct.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![章节开篇图标](images/nsp-enoka501485-ct.jpg)'
- en: Having a reliable, well-defined, and well-implemented backup strategy is one
    of the best defenses any network can have against malicious or accidental data
    loss. Whether you mistakenly delete a folder of critical documents, an adversary
    executes ransomware inside your network, or a natural disaster destroys your devices,
    backups can save you from catastrophe.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有一个可靠、明确定义并且实施到位的备份策略，是任何网络防御恶意或意外数据丢失的最佳方式之一。无论是你误删了一个重要文件夹，还是有攻击者在你的网络内部执行了勒索病毒，或是自然灾害摧毁了你的设备，备份都能将你从灾难中拯救出来。
- en: This chapter introduces various backup considerations, including different backup
    types, creating backup schedules, the value of onsite and offsite backups, what
    to back up, and backup storage options. Finally, we’ll show how to implement different
    solutions within your network.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了各种备份注意事项，包括不同的备份类型、创建备份计划、现场和异地备份的价值、备份内容以及备份存储选项。最后，我们将展示如何在网络中实施不同的解决方案。
- en: '[Backup Types](nsp-enoka501485-0007.xhtml#rah1101)'
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[备份类型](nsp-enoka501485-0007.xhtml#rah1101)'
- en: 'You should consider three types of backups when implementing your backup schedule:
    *full*, *incremental*, and *differential*.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在实施备份计划时，你应该考虑三种备份类型：*完全备份*、*增量备份*和*差异备份*。
- en: Full Backup
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 完全备份
- en: A full backup contains a complete copy of everything you want to back up from
    a specific host or location (called a *backup set*). For example, you might decide
    you want to regularly create backup copies of everything in your user profile
    on your computer. Alternatively, you may want a copy of the entire disk or volume,
    including operating system files. Either of these options is viable and could
    be considered a different backup set.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完全备份包含了你希望从特定主机或位置（称为*备份集*）备份的所有内容的完整副本。例如，你可能决定定期创建你电脑中用户配置文件的所有内容的备份副本。或者，你可能想要备份整个磁盘或卷，包括操作系统文件。以上任一选项都是可行的，都可以视为不同的备份集。
- en: Full backups provide quick, easy restoration of all files from a backup set.
    Because all data is contained in a single backup, the process to restore will
    be faster than other backup options. However, full backups require more storage,
    especially if you’re keeping more than one, and they take the longest amount of
    time to create.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完全备份提供了从备份集中快速、简便地恢复所有文件的方式。由于所有数据都包含在一个备份中，恢复过程将比其他备份选项更快。然而，完全备份需要更多的存储空间，尤其是当你保存多个备份时，而且创建的时间也最长。
- en: Differential Backup
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 差异备份
- en: Differential backups contain only copies of the data that’s changed since the
    last full backup, thus lending themselves to more frequent use than full backups.
    If you decide to take a full backup once a month, it’s a good idea to schedule
    a differential backup once a week. It’s recommended to create a full backup regularly
    to keep the size of your differential backups under control (rather than taking
    one full backup of your backup set and then creating differential backups only
    from that point forward).
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 差异备份仅包含自上次完全备份以来发生变化的数据副本，因此比完全备份更适合频繁使用。如果你决定每月进行一次完全备份，那么每周进行一次差异备份是一个好主意。建议定期创建完全备份，以便保持差异备份的大小可控（而不是在备份集创建一个完全备份之后，再仅从那个点开始创建差异备份）。
- en: Differential backups take up a lot of storage space, as the first backup contains
    copies of all the files modified since the last full backup, and then the next
    differential backup contains all of that data, *plus* all of the additional modified
    files between the first and second differential backups. Without a full backup
    at some point in the chain, differential backups will become exponentially larger
    as time goes on. Also, if one or more of the differential backups is incomplete,
    you won’t be able to achieve a full recovery from the partial differential backup
    and the full backup of the data.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 差异备份占用大量存储空间，因为第一次备份包含了自上次完全备份以来所有修改的文件副本，接下来的差异备份则包含了所有这些数据，*加上*第一次和第二次差异备份之间所有额外修改的文件。如果没有在某个时点进行完全备份，差异备份会随着时间的推移变得越来越大。此外，如果某一个或多个差异备份不完整，你将无法从部分差异备份和数据的完全备份中恢复完整数据。
- en: Incremental Backup
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 增量备份
- en: Incremental backups create copies of any data that has changed since the last
    backup *of any kind*, whether it’s a prior full, differential, or incremental.
    This type of backup takes the least amount of space and requires the least amount
    of time to create. If you create a full backup once a month and a differential
    backup once a week, you’d do well to create your incremental backups daily to
    ensure that any changes made to your data will be captured.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增量备份会创建自上次备份*任何类型*以来发生变化的所有数据的副本，无论是之前的全量备份、差异备份还是增量备份。这种备份方式占用的空间最少，并且创建所需的时间也最短。如果你每个月进行一次全量备份，每周进行一次差异备份，那么你最好每天进行增量备份，以确保对数据的任何更改都会被捕捉到。
- en: Incremental backups are difficult in that it can be challenging to restore all
    your files across multiple backups, as each will have to be opened individually
    and specific files restored from the desired backup point. That means using all
    the available restore points to complete a full restoration, whereas a differential
    backup requires only the most recent differential and the most recent full backup
    to complete a full restoration.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增量备份的一个难点是，恢复所有文件跨多个备份可能会非常困难，因为每个备份都必须单独打开，并从所需的备份点恢复特定的文件。这意味着需要使用所有可用的恢复点来完成全面恢复，而差异备份只需要最近的差异备份和最近的全量备份就能完成完整的恢复。
- en: '[Devising a Backup Schedule](nsp-enoka501485-0007.xhtml#rah1102)'
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[制定备份计划](nsp-enoka501485-0007.xhtml#rah1102)'
- en: Backups are of little value if not taken regularly. Your most critical data
    probably changes daily, so having a two-month-old backup of a document isn’t helpful
    if it becomes corrupted or otherwise permanently unavailable. Therefore, it’s
    essential to decide how often backups should be created. Your backup strategy
    will be highly individual and unique to your particular set of circumstances and
    requirements, though there are some best practices you can follow.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果备份没有定期进行，那它几乎没有什么价值。你最关键的数据可能每天都在变化，因此，如果一个文档的备份已经两个月没有更新，当它损坏或永久丢失时，旧的备份就没有任何帮助了。因此，决定备份应该多久进行一次是至关重要的。你的备份策略将是高度个性化的，并且与特定的情况和需求相关，尽管有一些最佳实践可以遵循。
- en: It’s usually best to create full backups less frequently than differential or
    incremental backups, because of how much space and time they take up. Taking differential
    or incremental backups allows modified data to be backed up more frequently, and
    these backup types are less prone to failure due to time constraints than a full
    backup would be. As a general rule, taking a full backup of your primary systems
    or critical data once a month is a good place to start, and you can adjust your
    backup strategy as needed.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 通常最好比起差异备份或增量备份，较少频繁地进行全量备份，因为全量备份占用的空间和时间最多。进行差异备份或增量备份可以更频繁地备份修改过的数据，并且由于时间限制，增量备份和差异备份比全量备份更不容易失败。作为一般规则，每月进行一次主系统或关键数据的全量备份是一个不错的起点，之后你可以根据需要调整备份策略。
- en: Depending on the backup software you choose, you may have access to some, all,
    or none of these specific scheduling options. Some software, for example, technically
    has all of this functionality and will allow you to restore data from your backups
    from different points in time, but the differential/incremental/full backup and
    restore options will not be displayed to you directly. Most operating systems
    come with an integrated backup solution (discussed later). Depending on your requirements,
    the built-in options might be sufficient. Otherwise, you can consider various
    paid solutions.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你选择的备份软件，你可能能够使用这些特定的调度选项中的部分、全部或没有任何选项。例如，一些软件从技术上讲具备所有这些功能，并允许你从不同的时间点恢复数据，但差异备份/增量备份/全量备份和恢复选项不会直接显示给你。大多数操作系统都自带一个集成的备份解决方案（稍后讨论）。根据你的需求，内置的选项可能就足够了。否则，你可以考虑各种付费解决方案。
- en: '[Onsite and Offsite Backups](nsp-enoka501485-0007.xhtml#rah1103)'
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[现场和异地备份](nsp-enoka501485-0007.xhtml#rah1103)'
- en: Depending on the criticality of the data you choose to back up, keeping *offsite
    backups* in addition to *onsite backups* might be a good idea. Onsite backups
    are held in the same physical location as your original data, such as your home
    or office. Offsite backups are stored away from your primary location. Storing
    your backups in multiple locations provides data redundancy; if your onsite backups
    and original data are destroyed, an offsite backup may be your only option for
    recovery. Typically, an offsite backup will be stored offline, not connected to
    your network, and ideally in something like a fireproof safe. Alternatively, you
    might choose to use a cloud solution, but that comes with its own security risks.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你选择备份的数据的重要性，除了*本地备份*之外，保留*异地备份*可能是一个不错的主意。 本地备份保存在与你的原始数据相同的物理位置，比如你的家或办公室。异地备份则保存在与你的主要位置不同的地方。将备份存储在多个位置可以提供数据冗余；如果你的本地备份和原始数据被销毁，异地备份可能是你唯一的恢复选项。通常，异地备份会存储在离线状态，不与网络连接，理想情况下存放在类似防火保险箱的地方。或者，你也可以选择使用云解决方案，但这会带来自己的安全风险。
- en: Having an offsite backup may create additional administrative overhead. In most
    cases, you’ll create your backup onsite, either by using a backup application
    or by copying the onsite backup in its entirety, and then remove that backup physically
    from the premises. This should be done on a regular schedule in the same way as
    onsite backups, as it affords you more options in the event of an emergency.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有异地备份可能会带来额外的管理开销。在大多数情况下，你会先在本地创建备份，要么使用备份应用程序，要么将本地备份完整复制出来，然后将该备份物理移出现场。这应该与本地备份一样，按定期的时间表进行，因为它能为你提供更多的应急选项。
- en: '[What to Back Up and What Storage to Use](nsp-enoka501485-0007.xhtml#rah1104)'
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[备份内容和存储方案选择](nsp-enoka501485-0007.xhtml#rah1104)'
- en: Choosing exactly what you want to back up can be a challenge at first. Do you
    need to be able to recover an entire device from a previous checkpoint, or do
    you need only specific files? If you don’t need to recover the whole operating
    system, it’s best to determine which files and folders are critical or would be
    useful to recover. Consider how long you can be without the data before it really
    starts to impact you, your users, or your business. The time it takes to restore
    data from backup depends entirely on how much data you have to restore.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一开始选择你想要备份的内容可能会是一个挑战。你需要能够从之前的检查点恢复整个设备，还是只需要恢复特定的文件？如果你不需要恢复整个操作系统，最好确定哪些文件和文件夹是关键的，或者在恢复时会有用。考虑一下，在数据丢失后，你能在多长时间内没有这些数据，直到它真正开始影响你、你的用户或你的业务。恢复备份数据所需的时间完全取决于你需要恢复的数据量。
- en: The other consideration when determining what to include in your backup strategy
    is what kind of storage, and how much, you have available to store your backups.
    You could choose to create backups of files on the device itself, but doing so
    isn’t very useful if the device is lost, stolen, destroyed, or otherwise unavailable.
    A better option is to use an external hard drive, which can be obtained from any
    local computer store in any capacity that suits your needs. It’s a cheap, easy
    option that allows you to create onsite backups and secondary backups that can
    be easily stored offsite. Finally, you could purchase dedicated storage for your
    backups in the form of a *network-attached storage (NAS)* device. An NAS connects
    to your network, has high storage capacity, and usually includes additional features
    like drive redundancy and automation. It offers greater performance and reliability
    than a stand-alone external hard drive but is often more expensive and requires
    some administration.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 确定备份策略时，另一个需要考虑的因素是你有多少存储空间可以用来存储备份。你可以选择在设备本身上创建文件备份，但如果设备丢失、被盗、损坏或无法使用，这样做就没什么用处。更好的选择是使用外部硬盘驱动器，它可以从任何本地电脑商店购买，并且有各种容量可供选择，适合你的需求。这是一个便宜且简便的选择，可以让你创建本地备份并轻松将其存储在异地。最后，你还可以购买专用的备份存储设备，如*网络附加存储（NAS）*设备。NAS连接到你的网络，具有高存储容量，通常还包括像磁盘冗余和自动化等附加功能。它提供的性能和可靠性通常高于单独的外部硬盘驱动器，但通常更昂贵并且需要一些管理。
- en: Whichever storage solution you choose, it should match your needs in terms of
    what you plan to back up. Full-disk backups of your devices will take up a lot
    of space, as internal storage for computers is typically up to or greater than
    1TB. If you’re planning to back up only critical personal files, you won’t need
    as much storage for your backups. Chances are you’ll start with an external hard
    drive and then upgrade your storage as your needs increase over time. The solution
    you choose will depend largely on your operating system, whether your endpoint
    is physical or virtual, and how much data you want to keep in your backup set.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你选择哪种存储解决方案，它应该与你计划备份的内容相匹配。对设备进行完整磁盘备份会占用大量空间，因为计算机的内存通常为 1TB 或更大。如果你只打算备份关键的个人文件，那么你所需的备份存储空间会较小。你可能会从外部硬盘开始，随着需求的增加，逐步升级存储方案。你选择的解决方案将主要取决于操作系统、终端是物理设备还是虚拟设备，以及你希望保留多少数据在备份集中。
- en: If you want to maintain your own backups, most operating systems have built-in
    backup solutions, some of which are more fully featured than others.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想保持自己的备份，大多数操作系统都有内建的备份解决方案，其中一些功能比其他的更为完整。
- en: '[#31: Using Windows Backup](nsp-enoka501485-0007.xhtml#rhd1101)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '[#31: 使用 Windows 备份](nsp-enoka501485-0007.xhtml#rhd1101)'
- en: To access the built-in backup solution for Windows, open **Windows Settings▸Update
    & Security▸Backup**. You’ll need to connect a drive to the computer that will
    store your backup data. Once connected, click **Add a Drive** and select it, as
    shown in [Figure 9-1](nsp-enoka501485-0018.xhtml#fig0901). Note that in Windows
    11, Windows Backup is found under **Windows Settings▸Accounts▸Windows backup**,
    and the settings are per user. You can use Windows Backup in Windows 11 to sync
    your files, applications, and preferences to OneDrive, but the option to back
    up a local drive to an external or network drive is no longer available.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问 Windows 的内建备份解决方案，请打开 **Windows 设置▸更新与安全▸备份**。你需要将一个驱动器连接到计算机上，用来存储备份数据。连接后，点击
    **添加驱动器** 并选择它，如 [图 9-1](nsp-enoka501485-0018.xhtml#fig0901) 所示。请注意，在 Windows
    11 中，Windows 备份位于 **Windows 设置▸帐户▸Windows 备份** 下，且设置是按用户进行的。你可以在 Windows 11 中使用
    Windows 备份将文件、应用程序和偏好同步到 OneDrive，但不再提供将本地驱动器备份到外部或网络驱动器的选项。
- en: '![Screenshot showing a pop-up window that appears after clicking Add a Drive
    where you can select the drive](images/nsp-enoka501485-fig0901.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![截图显示点击“添加驱动器”后出现的弹窗，你可以在其中选择驱动器](images/nsp-enoka501485-fig0901.jpg)'
- en: 'Figure 9-1: Windows backup to an external drive'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-1：Windows 备份到外部驱动器
- en: When you’ve selected the drive, the Automatically Back Up My Files option will
    be turned on. This will keep various copies of the more critical data in your
    user profile folder (*C:\Users\<username>*) such as your *Documents*, *Desktop*,
    and *Downloads* folders, as well as application settings from the *AppData* folder.
    You can choose which folders to include in your backup by clicking More Options.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 当你选择了驱动器后，“自动备份我的文件”选项将会开启。这将会保持用户配置文件文件夹（*C:\Users\<username>*）中更为关键数据的多个副本，例如
    *Documents*、*Desktop* 和 *Downloads* 文件夹，以及 *AppData* 文件夹中的应用程序设置。你可以通过点击“更多选项”来选择要包含在备份中的文件夹。
- en: Windows Backup is essentially a full backup plus differential backup strategy.
    It’ll take a complete backup of your chosen files to start with and will then
    keep every new version or modification to any of those files on an hourly basis
    by default, forever (or until your backup drive space is exhausted). This allows
    you to view and restore your files from any point in the backup timeline. There
    are a few limitations to this, including being unable to save your backup to a
    network location and not being able to take full system images.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 备份基本上是一个完整备份加增量备份的策略。它会首先对你选择的文件进行完整备份，然后默认每小时保存这些文件的每个新版本或修改，永远保持（或者直到你的备份驱动器空间耗尽）。这样，你可以在备份时间线的任何时间点查看并恢复文件。这个方案有一些限制，包括无法将备份保存到网络位置，也不能进行完整的系统映像备份。
- en: '[#32: Using Windows Backup and Restore](nsp-enoka501485-0007.xhtml#rhd1102)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[#32: 使用 Windows 备份与还原](nsp-enoka501485-0007.xhtml#rhd1102)'
- en: Windows Backup, discussed in the previous project, is great for backing up specific
    files and folders, but not for taking full system backups. Luckily, all versions
    of Windows since Windows 7 include *Back up and Restore*, which is useful for
    creating full system backups including system images that can completely restore
    a system (if it were to become corrupted by ransomware, for example). It’s also
    capable of creating backups to an external or network drive, though it doesn’t
    keep older versions of your files or file history.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一个项目中所讨论的，Windows备份非常适合备份特定的文件和文件夹，但不适合进行完整的系统备份。幸运的是，自Windows 7以来，所有版本的Windows都包括*备份和恢复*，这对于创建完整的系统备份非常有用，包括可以完全恢复系统的系统映像（例如，如果系统因勒索软件而被破坏）。它还可以将备份保存到外部或网络驱动器，但不会保留文件的旧版本或文件历史记录。
- en: In Windows 10, you can get to Back up and Restore by going to **Windows Settings▸Update
    & Security▸Back up▸Go to Back up and** **Restore (Windows 7)**. In Windows 11,
    Back up and Restore is found in **Control Panel▸System Security▸Back up and Restore
    (Windows 7)**. You’ll be presented with the screen shown in [Figure 9-2](nsp-enoka501485-0018.xhtml#fig0902).
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows 10中，你可以通过进入**Windows设置▸更新与安全▸备份▸转到备份与恢复（Windows 7）**来访问备份和恢复功能。在Windows
    11中，备份和恢复功能位于**控制面板▸系统与安全▸备份与恢复（Windows 7）**。你将看到如[图9-2](nsp-enoka501485-0018.xhtml#fig0902)所示的屏幕。
- en: '![Screenshot of the Back up and Restore window that contains the Control Panel
    Home on the left side and the Back up or restore your files section on the right.
    The option to “Set up back-up” is directly underneath this. The Restore option
    that “Select(s) another back-up to restore files from” is underneath the Back-up
    section.](images/nsp-enoka501485-fig0902.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![备份和恢复窗口的截图，左侧显示控制面板主页，右侧显示“备份或恢复文件”部分。直接在下方有“设置备份”选项。恢复选项“选择另一个备份来恢复文件”位于备份部分下方。](images/nsp-enoka501485-fig0902.jpg)'
- en: 'Figure 9-2: Windows Back up and Restore window'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图9-2：Windows备份和恢复窗口
- en: On the left, you have options to create a *system image* or a *system repair
    disc*. In case your computer becomes inaccessible due to issues with the hardware
    or the operating system, you’ll be able use either of these to restore the computer
    to its current, known-good configuration, with all of your files intact in their
    present state.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在左侧，你可以选择创建*系统映像*或*系统修复光盘*。如果由于硬件或操作系统问题导致计算机无法访问，你可以使用这些工具之一来恢复计算机到当前已知的良好配置，所有文件都会保持在当前状态。
- en: 1\. Click the **Set Up Back-up** button on the right to create a regular backup
    schedule of your personal and system files.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1. 点击右侧的**设置备份**按钮，以创建一个定期的个人文件和系统文件备份计划。
- en: 2\. Attach an external drive and click **Refresh** to select it as a backup
    location, or specify a network drive or location by clicking **Save On a Network**
    and specifying the network location and the necessary username and password (if
    any); then click **Next**.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2. 连接外部驱动器并点击**刷新**以选择它作为备份位置，或者点击**保存到网络**，指定网络位置和必要的用户名及密码（如果有）；然后点击**下一步**。
- en: At this point, Windows will ask you what you want to include in your backup.
    By default, you can let Windows choose what to include, which will be your personal
    files and folders from *C:\Users\<username>*.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，Windows会询问你希望包含在备份中的内容。默认情况下，你可以让Windows选择要包含的内容，这将是你在*C:\Users\<用户名>*中的个人文件和文件夹。
- en: 3\. Select the **Let Me Choose** radio button and then click **Next**.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3. 选择**让我选择**单选按钮，然后点击**下一步**。
- en: 4\. Choose what to back up.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4. 选择要备份的内容。
- en: a. Enable or disable backup of new users’ files (assuming new user accounts
    will be created on this computer).
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: a. 启用或禁用新用户文件的备份（假设将在此计算机上创建新的用户账户）。
- en: b. Include and exclude any personal libraries such as *Documents* or *Pictures*
    and locations like your *Desktop* and *Downloads* folders.
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: b. 包括或排除任何个人库，例如*文档*或*图片*，以及像*桌面*和*下载*文件夹这样的位置。
- en: c. Select any folders from the drives on your computer.
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: c. 选择计算机上驱动器中的任何文件夹。
- en: d. If you’d like to regularly back up your entire system, ensure that the checkbox
    to include a system image of your device is checked. When you’re happy with the
    settings, click **Next**.
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: d. 如果你希望定期备份整个系统，请确保选中包含设备系统映像的复选框。当你对设置感到满意时，点击**下一步**。
- en: 5\. At this point, you can choose the schedule on which you want this backup
    to run, which can be daily, weekly, or monthly.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5. 此时，你可以选择此备份运行的计划，可以是每日、每周或每月。
- en: 6\. Click **Save Settings and Run Backup** to take the first full backup of
    your data.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 6. 点击**保存设置并运行备份**以进行首次完整的数据备份。
- en: You now have a regular backup of your folders to either an external or network
    drive on your Windows system.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您的文件夹已经定期备份到外部或网络驱动器，适用于您的 Windows 系统。
- en: '[#33: Using macOS Time Machine](nsp-enoka501485-0007.xhtml#rhd1103)'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '[#33：使用 macOS Time Machine](nsp-enoka501485-0007.xhtml#rhd1103)'
- en: Apple devices come with their own built-in solution for backing up your data
    called *Time Machine*, accessed via **System Settings▸Time Machine** ([Figure
    9-3](nsp-enoka501485-0018.xhtml#fig0903)).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: Apple 设备内置了用于备份数据的解决方案，称为*Time Machine*，可以通过**系统设置▸Time Machine**（[图 9-3](nsp-enoka501485-0018.xhtml#fig0903)）进行访问。
- en: '![Screenshot of the Time Machine window with the Time Machine logo and a toggle
    to “Back Up Automatically” on the left. The right side contains a “Select Backup
    Disk” button and information on how long Time Machine keeps different types of
    backups Underneath is a toggle to “Show Time Machine in menu bar” and a button
    labeled “Options.”](images/nsp-enoka501485-fig0903.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![Time Machine 窗口截图，左侧有 Time Machine 徽标和“自动备份”切换按钮，右侧包含“选择备份磁盘”按钮和有关 Time Machine
    保留不同类型备份的时间的信息。下面是“在菜单栏中显示 Time Machine”和标有“选项”的按钮。](images/nsp-enoka501485-fig0903.jpg)'
- en: 'Figure 9-3: macOS Time Machine'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-3：macOS Time Machine
- en: Time Machine can back up your data either to an external drive directly connected
    to your computer or to network-attached storage. This network storage can be in
    the form of an Apple Airport Time Capsule (designed explicitly for Time Machine
    backups), a drive connected to an Apple Airport Extreme base station, another
    Mac that has been shared as a Time Machine backup destination, or a dedicated
    NAS device that supports Time Machine over SMB. If you have any of these in your
    network already, I recommend using that solution. If you don’t have one of these
    available, the simplest and cheapest solution to back up your Mac is to use an
    external drive rather than a network location. Typically, when you plug in a high-capacity
    drive to your Apple device, you’ll be presented with a prompt asking if you’d
    like to use that drive for Time Machine backups. Alternatively, you can select
    a specific backup disk using the Select Backup Disk option shown in [Figure 9-3](nsp-enoka501485-0018.xhtml#fig0903).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Time Machine 可以将您的数据备份到直接连接到计算机的外部驱动器或网络附加存储。该网络存储可以是 Apple Airport Time Capsule（专为
    Time Machine 备份设计）、连接到 Apple Airport Extreme 基站的驱动器、已共享为 Time Machine 备份目标的其他
    Mac，或者支持通过 SMB 协议进行 Time Machine 备份的专用 NAS 设备。如果您的网络中已有这些设备，建议使用该解决方案。如果没有可用的设备，最简单和最便宜的备份
    Mac 解决方案是使用外部驱动器，而不是网络位置。通常，当您将高容量硬盘插入 Apple 设备时，系统会提示您是否希望将该硬盘用作 Time Machine
    备份。或者，您可以使用[图 9-3](nsp-enoka501485-0018.xhtml#fig0903)中所示的“选择备份磁盘”选项选择特定的备份磁盘。
- en: Time Machine doesn’t provide the option to schedule backups; it’ll back up your
    data at predefined times. Time Machine keeps 24-hourly snapshots of your data,
    rolling daily backups for one month, and rolling weekly backups for as long as
    there’s space remaining on your backup drive. Once the space is exhausted, Time
    Machine will delete its oldest backup set to accommodate the more recent versions
    of your data. Check **Back Up Automatically** to allow Time Machine to do so.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: Time Machine 不提供调度备份的选项；它将在预定的时间自动备份数据。Time Machine 会保留 24 小时的快照，进行每日备份一个月，并进行每周备份，直到备份驱动器的空间用尽。一旦空间耗尽，Time
    Machine 会删除最旧的备份集，以便腾出空间来存储最近的数据版本。勾选**自动备份**以允许 Time Machine 执行此操作。
- en: The options for selecting the data you want to back up are somewhat limited.
    By default, Time Machine will back up your entire device, including system files,
    applications, accounts, preferences, emails, music, photos, movies, and documents.
    Click **Options** to exclude any of these using the dialog shown in [Figure 9-4](nsp-enoka501485-0018.xhtml#fig0904).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 选择您要备份的数据的选项有些有限。默认情况下，Time Machine 会备份整个设备，包括系统文件、应用程序、账户、偏好设置、电子邮件、音乐、照片、电影和文档。点击**选项**，可以通过[图
    9-4](nsp-enoka501485-0018.xhtml#fig0904)所示的对话框排除其中的任何内容。
- en: '![Screenshot showing a pop-up window states “Exclude these items from backups:”
    and a list of excluded items. Beneath this list are + and – buttons to add and
    remove items. There are options to “Back up while on battery power” and “Exclude
    system files and applications.”](images/nsp-enoka501485-fig0904.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![截图显示弹出窗口，说明“从备份中排除这些项目：”以及一份排除项的列表。在此列表下方有+和-按钮，用于添加或移除项目。还有“在电池电量时备份”和“排除系统文件和应用程序”的选项。](images/nsp-enoka501485-fig0904.jpg)'
- en: 'Figure 9-4: Time Machine backup options'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-4：Time Machine 备份选项
- en: Overall, Time Machine is a robust solution for backing up and restoring your
    Apple endpoints.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 总体而言，Time Machine 是一个强大的解决方案，用于备份和恢复您的 Apple 设备。
- en: '[#34: Using Linux duplicity](nsp-enoka501485-0007.xhtml#rhd1104)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '[#34: 使用 Linux duplicity](nsp-enoka501485-0007.xhtml#rhd1104)'
- en: 'In Ubuntu, several utilities are available for creating backups of your files.
    The easiest to use is *duplicity*, a command line utility that creates full and
    incremental backup archives to local storage, external hard drives, or network
    locations. Use the following command to install duplicity on your Ubuntu endpoints:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Ubuntu 中，有多种实用工具可用于创建文件备份。最简单易用的是*duplicity*，它是一个命令行工具，可以将完整和增量备份档案创建到本地存储、外部硬盘或网络位置。使用以下命令在您的
    Ubuntu 设备上安装 duplicity：
- en: '[PRE0]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Once the command completes, execute duplicity with the `-h` option to display
    its help file and confirm the installation was successful:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦命令完成，使用`-h`选项执行 duplicity，显示其帮助文件并确认安装成功：
- en: '[PRE1]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Read through the output to familiarize yourself with the available options and
    configurations. In the following sections, we’ll discuss some of the most commonly
    used features.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读输出内容，熟悉可用的选项和配置。在接下来的部分，我们将讨论一些最常用的功能。
- en: '[Creating Local Backups with duplicity](nsp-enoka501485-0007.xhtml#rbh1101)'
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[使用 duplicity 创建本地备份](nsp-enoka501485-0007.xhtml#rbh1101)'
- en: 'The following example uses duplicity to create an initial full backup of a
    user’s home directory, saving the output to the */tmp/* directory on the local
    system:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例使用 duplicity 创建用户主目录的初始完整备份，并将输出保存到本地系统的*/tmp/*目录：
- en: '[PRE2]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Note that the target directory (where the backup archive will be saved) must
    have the *file://* prefix. The */tmp/* directory is a holding location for the
    backup; you should either move the backup elsewhere once completed or save the
    backup somewhere else. The first time this command is run, duplicity will take
    a full backup of the source files or folders. Subsequent execution of the same
    command will create incremental backups of the source data. The command outputs
    statistics, as shown in the listing, including the start and end time of the backup
    operation, how many files were included, and the total size of the backup archive.
    Backups created with duplicity must be protected with a passphrase.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，目标目录（备份档案将被保存的地方）必须具有*file://*前缀。*/tmp/* 目录是备份的临时存放位置；一旦备份完成，您应将备份文件移至其他地方，或保存到其他位置。第一次运行此命令时，duplicity
    会对源文件或文件夹进行完整备份。之后再次执行相同命令时，将创建源数据的增量备份。该命令输出统计信息，如列表中所示，包括备份操作的开始和结束时间、包含的文件数量以及备份档案的总大小。使用
    duplicity 创建的备份必须用密码短语进行保护。
- en: 'To create another full backup, specify the `full` option, like so:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建另一个完整备份，请指定`full`选项，如下所示：
- en: '[PRE3]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Doing so will force duplicity to create a full, rather than an incremental,
    backup of the data.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 这样做将强制 duplicity 创建完整的备份，而不是增量备份。
- en: '[Creating Network Backups with duplicity](nsp-enoka501485-0007.xhtml#rbh1102)'
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[使用 duplicity 创建网络备份](nsp-enoka501485-0007.xhtml#rbh1102)'
- en: Saving backups to a network location is preferable to saving them to a local
    folder for several reasons. Saving backups locally is risky, because if you lose
    access to the endpoint or it becomes otherwise unavailable, you have no backups
    to restore from in other locations. Also, if an adversary gains access to the
    system, they’ve gained access to your (encrypted) backups as well. Therefore,
    it’s safer to save to a remote location like a fileserver. This can be achieved
    using the rsync functionality built in to duplicity. The following command assumes
    you’ve followed the instructions in [Chapter 1](nsp-enoka501485-0010.xhtml#ch01)
    to create SSH keys and use SSH key authentication instead of password authentication.
    If this is not the case, go back and do so now. SSH key authentication requires
    the use of a public/private key pair that’s shared between the local and remote
    endpoints, enabling them to perform cryptographically secure communication that
    offers greater security than the use of password or passphrase authentication.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 将备份保存到网络位置比保存到本地文件夹更为理想，原因有几点。将备份保存到本地存在风险，因为如果丧失对端点的访问或它变得不可用，你将无法从其他位置恢复备份。此外，如果对手获得了系统的访问权限，他们也可以访问你的（加密的）备份。因此，将备份保存到远程位置（如文件服务器）更为安全。这可以通过
    duplicity 内置的 rsync 功能实现。以下命令假设你已按照 [第 1 章](nsp-enoka501485-0010.xhtml#ch01)的说明创建
    SSH 密钥并使用 SSH 密钥认证，而不是密码认证。如果不是，请返回并完成此步骤。SSH 密钥认证需要使用在本地和远程端点之间共享的公钥/私钥对，使得它们能够进行加密安全通信，相较于使用密码或口令认证，它提供了更高的安全性。
- en: '[PRE4]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Once you’ve decided which files and folders you want to back up, and the backup
    location, schedule duplicity to create regular backups of your files using Crontab,
    a built-in Linux job discussed in detail in [Project 27](nsp-enoka501485-0017.xhtml#hd1002)
    on [page 122](nsp-enoka501485-0017.xhtml#p122):'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你决定了要备份的文件和文件夹，以及备份位置，就可以使用 Crontab 安排 duplicity 定期备份你的文件，Crontab 是 Linux
    内置的一个作业管理工具，详细信息请参阅 [第 27 项](nsp-enoka501485-0017.xhtml#hd1002) 和 [第 122 页](nsp-enoka501485-0017.xhtml#p122)：
- en: '[PRE5]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `-e` option of the Crontab application indicates that you will edit the
    cron file and the scheduled jobs maintained by cron. The commands shown in the
    Crontab in this example schedule duplicity to run at midnight every day, create
    an incremental backup, and force a full backup to be created on the first day
    of every month at 2 am.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: Crontab 应用程序的 `-e` 选项表示你将编辑 cron 文件和由 cron 维护的计划任务。此示例中 Crontab 中显示的命令安排 duplicity
    每天午夜运行，创建增量备份，并在每月的第一天凌晨 2 点强制创建全备份。
- en: '[Restoring duplicity Backups](nsp-enoka501485-0007.xhtml#rbh1103)'
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[恢复 duplicity 备份](nsp-enoka501485-0007.xhtml#rbh1103)'
- en: 'Use the command line to restore backups created with duplicity:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 使用命令行恢复通过 duplicity 创建的备份：
- en: '[PRE6]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Entering the `restore` command with a source and target path restores all files
    from the backup set to the specified location.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 `restore` 命令并指定源路径和目标路径，可以将备份集中的所有文件恢复到指定位置。
- en: 'There are various options to restore specific files and folders from a backup
    set if required. Here’s an example:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，还可以使用各种选项从备份集中恢复特定的文件和文件夹。以下是一个示例：
- en: '[PRE7]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: In this command, we invoke duplicity, tell it to restore the version of the
    *test.txt* file (specified immediately after the `--file-to-restore` argument)
    from three days ago with the `-t 3D` parameters from the backup we created in
    the */tmp/* folder on the local system, and we then save the resulting file to
    the */home/user/Documents/* folder. For more information on restoring files and
    the options available, review duplicity’s man page.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在此命令中，我们调用 duplicity，告诉它从三天前的备份中恢复 *test.txt* 文件（在 `--file-to-restore` 参数后面指定），该备份位于本地系统的
    */tmp/* 文件夹中，并将恢复后的文件保存到 */home/user/Documents/* 文件夹中。有关恢复文件和可用选项的更多信息，请查看 duplicity
    的手册页。
- en: '[Additional duplicity Considerations](nsp-enoka501485-0007.xhtml#rbh1104)'
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[其他 duplicity 注意事项](nsp-enoka501485-0007.xhtml#rbh1104)'
- en: 'The duplicity utility has several other powerful options. You might want to
    exclude certain files or folders from your backups; for example, you’ll often
    want to exclude system folders when creating backups of user data. Use the `--exclude`
    argument to exclude files and folders:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: duplicity 工具还有许多其他强大的选项。你可能希望将某些文件或文件夹排除在备份之外；例如，在创建用户数据的备份时，通常会希望排除系统文件夹。使用
    `--exclude` 参数可以排除文件和文件夹：
- en: '[PRE8]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Once your backups have run to completion, use the `verify` parameter and swap
    the source and target locations from your original backup command to confirm they
    were created successfully:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 当备份完成后，使用`verify`参数，并交换源和目标位置，通过原始备份命令确认它们已成功创建：
- en: '[PRE9]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: If the output reveals no errors, your backups were successful.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 如果输出没有显示错误，说明备份成功。
- en: 'There will be times when you want to delete older backups, either because they’re
    no longer needed or to free up space for newer backups. First, review the available
    backups in your backup set using the `collection-status` parameter:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你可能想要删除较旧的备份，可能是因为它们不再需要，或者为了为新的备份腾出空间。首先，使用`collection-status`参数查看备份集中的可用备份：
- en: '[PRE10]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Once you know how many backups are in your backup set and how old they are,
    you can delete older backups based on age:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你知道备份集中的备份数量以及它们的年龄，你可以根据年龄删除较旧的备份：
- en: '[PRE11]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The `3D` means older than three days.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '`3D`表示超过三天的备份。'
- en: 'You also can remove all but the desired number of full backups:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以删除除了所需数量的完整备份之外的所有备份：
- en: '[PRE12]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Here the `1` indicates to duplicity that it should delete all but the most recent
    full backup from the backup set. Read duplicity’s man page to become familiar
    with the available options for creating, restoring, or deleting backups.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的`1`表示使用duplicity删除备份集中除最近期完整备份外的所有备份。阅读 duplicity 的手册页面，熟悉创建、恢复或删除备份的可用选项。
- en: '[Cloud Backup Solutions](nsp-enoka501485-0007.xhtml#rah1105)'
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[Cloud Backup Solutions](nsp-enoka501485-0007.xhtml#rah1105)'
- en: Although cloud services like Google Drive and Dropbox are not true backups,
    they’re capable of keeping a secondary copy of your local data in the cloud (akin
    to an offsite backup), keeping tertiary copies on your other systems, and maintaining
    a version history of each of your files—and they do all of this consistently and
    regularly. Most of these services come with some level of free storage as well,
    so you can try them out and upgrade to a paid plan if you decide they work for
    you.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管像 Google Drive 和 Dropbox 这样的云服务并不是真正的备份，它们能够在云端保留你本地数据的副本（类似于异地备份），在其他系统上保留第三副本，并维护每个文件的版本历史——并且这些操作都是一致且定期进行的。这些服务中的大多数还提供一定量的免费存储空间，因此你可以先试用它们，如果觉得合适，再升级到付费计划。
- en: Google Drive and Dropbox are generally designed for file sharing and online
    collaboration rather than for backing up data. Using a service geared explicitly
    toward backing up data, although not free, will generally provide more features,
    granular control, and storage at a lower cost. Backblaze and Carbonite are two
    reliable cloud backup services that encrypt your data locally and automatically
    back it up using a client application on your computer. Backblaze will back up
    your files, and Carbonite is capable of backing up your entire computer. In general,
    look for services that encrypt your data both at rest and in transit. Carbonite
    and Backblaze are currently available for Mac, Windows, and Linux.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Google Drive 和 Dropbox 通常是为文件共享和在线协作设计的，而不是用于备份数据。使用专门针对数据备份的服务，尽管不是免费的，通常会提供更多的功能、细致的控制和更低成本的存储。Backblaze
    和 Carbonite 是两个可靠的云备份服务，它们会在本地加密你的数据，并通过计算机上的客户端应用程序自动备份。Backblaze 会备份你的文件，而 Carbonite
    则能够备份你整个计算机。一般来说，选择那些能在静止和传输过程中加密数据的服务。Carbonite 和 Backblaze 目前都支持 Mac、Windows
    和 Linux。
- en: '[Backblaze](nsp-enoka501485-0007.xhtml#rbh1105)'
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[Backblaze](nsp-enoka501485-0007.xhtml#rbh1105)'
- en: Backblaze is a great option if you want a set-and-forget backup solution. Once
    downloaded and installed, it immediately begins backing up your files to the Backblaze
    cloud servers and will continuously do so unless set to do otherwise. Virtual
    machine files and folders are the only data automatically excluded, although you
    can remove those from the exclusions list. You’ll be able to back up not only
    your computer’s internal hard drive but any attached external drives as well.
    Backblaze maintains all versions of your files for the previous 30 days, which
    can be extended to one year or more with an additional fee. You can restore your
    files from the application (shown in [Figure 9-5](nsp-enoka501485-0018.xhtml#fig0905)),
    the web UI, the mobile app, or by having Backblaze physically mail your files
    to you on a USB drive.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要一个简单的、无需关注的备份解决方案，Backblaze 是一个不错的选择。下载并安装后，它会立即开始将你的文件备份到 Backblaze 的云服务器，并且会持续进行，除非你设置为停止。虚拟机文件和文件夹是唯一会自动排除的文件，尽管你可以将它们从排除列表中移除。你不仅能够备份计算机内部硬盘，还能备份任何连接的外部硬盘。Backblaze
    会保留你文件的所有版本，最长达 30 天，且可以通过支付额外费用将其延长至一年或更长时间。你可以通过应用程序（如[图 9-5](nsp-enoka501485-0018.xhtml#fig0905)所示）、网页界面、移动应用，或者通过让
    Backblaze 将你的文件邮寄到你手中的 USB 驱动器来恢复你的文件。
- en: '![Screenshot of the Backblaze Backup application window with a message at the
    top that should say something similar to “You are backed up as of: Today, 7:47
    am.” It also shows options to “Pause Backup” or “Restore Options.”](images/nsp-enoka501485-fig0905.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![Backblaze 备份应用窗口截图，顶部显示类似“你已备份：今天，上午 7:47”之类的消息，还显示了“暂停备份”或“恢复选项”选项。](images/nsp-enoka501485-fig0905.jpg)'
- en: 'Figure 9-5: Backblaze GUI'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-5：Backblaze 图形用户界面
- en: The security features Backblaze offers are worth considering. Your files are
    first encrypted by the application, are transferred to the cloud using SSL (encrypted
    transmission), and are then stored, encrypted, on the Backblaze servers. Even
    better, you’re able to configure your own decryption key, so Backblaze itself
    is unable to decrypt your data, which adds another layer of complexity for any
    adversary who might gain access to your encrypted data. You also can add two-factor
    authentication so that, in addition to your password, your decryption key, and
    your email address, anyone who wants to access your data, including yourself,
    requires a one-time password. With all of those features combined, any third party
    trying to access your data will have a lot of layers of defense to contend with.
    Additionally, Backblaze is one of the cheapest cloud backup solutions available.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: Backblaze 提供的安全功能值得考虑。你的文件首先由应用程序进行加密，通过 SSL（加密传输）传输到云端，然后存储在 Backblaze 服务器上，且始终处于加密状态。更棒的是，你可以配置自己的解密密钥，这样
    Backblaze 自身无法解密你的数据，这为任何可能获取你加密数据的攻击者增加了额外的复杂性。你还可以启用双因素认证，除了密码、解密密钥和电子邮件地址外，任何想访问你的数据的人，包括你自己，都需要一个一次性密码。结合这些功能，任何第三方试图访问你的数据时，都将面临多重防护。此外，Backblaze
    是市场上最便宜的云备份解决方案之一。
- en: '[Carbonite](nsp-enoka501485-0007.xhtml#rbh1106)'
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[Carbonite](nsp-enoka501485-0007.xhtml#rbh1106)'
- en: If you need a backup provider capable of restoring your entire computer in the
    event of catastrophic failure, Carbonite is one possible solution. In extreme
    cases, like the event of ransomware, having the capability to restore your computer
    all the way down to the operating system settings and configuration in addition
    to your critical files is beneficial because you might find the entire operating
    system becomes corrupted or otherwise unusable. Carbonite has several plans at
    tiered price points so you can choose the level of cover for your specific needs.
    As with Backblaze, Carbonite locally encrypts all the data it backs up, which
    is sent to the cloud over SSL and encrypted on the Carbonite servers. Depending
    on the plan you choose, it’s capable of backing up external hard drives and provides
    unlimited cloud storage (in some cases). Carbonite will also keep your backed-up
    files for an unlimited amount of time, and it won’t delete file versions older
    than 30 days.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要一个备份提供商，能够在发生灾难性故障时恢复整个计算机，Carbonite 是一个可能的解决方案。在极端情况下，比如遭遇勒索病毒，拥有能够将你的计算机恢复到操作系统设置和配置的能力，以及恢复你的关键文件是很有益的，因为你可能会发现整个操作系统被破坏或无法使用。Carbonite
    提供多个不同价格等级的计划，你可以根据具体需求选择合适的保障级别。与 Backblaze 一样，Carbonite 会对所有备份的数据进行本地加密，数据通过
    SSL 传输到云端，并在 Carbonite 服务器上进行加密。根据你选择的计划，它可以备份外部硬盘，并提供（在某些情况下）无限量的云存储。Carbonite
    还会无限期保存你备份的文件，并且不会删除超过 30 天的文件版本。
- en: Once you’ve downloaded and installed the application (shown in [Figure 9-6](nsp-enoka501485-0018.xhtml#fig0906)),
    it’ll start uploading the first backup of your data automatically. You can tell
    it which files to include or exclude.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装应用程序后（如[图 9-6](nsp-enoka501485-0018.xhtml#fig0906)所示），它会自动开始上传第一次备份的数据。你可以指定哪些文件包含在内或排除在外。
- en: '![Screenshot of the Carbonite application window showing a list of menu options
    on the left, including Back Up, Restore Files, Account, Help; My Files: Desktop,
    Downloads, Documents, Pictures, Music, Movies; and My Drives. The rest of the
    window shows the overall backup status, including a progress bar, a toggle to
    “Enable Automatic Backup Settings,” and a list of recently backed up files.](images/nsp-enoka501485-fig0906.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![Carbonite 应用程序窗口截图，左侧显示一系列菜单选项，包括备份、恢复文件、帐户、帮助；我的文件：桌面、下载、文档、图片、音乐、电影；我的驱动器。窗口的其他部分显示总体备份状态，包括进度条、“启用自动备份设置”的切换按钮，以及最近备份文件的列表。](images/nsp-enoka501485-fig0906.jpg)'
- en: 'Figure 9-6: Carbonite GUI'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-6：Carbonite GUI
- en: Carbonite, like Backblaze, will run in the background, continuously backing
    up your data. When you want to restore a file from your backup, you can do so
    through the application. There is no web UI or mobile app available.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 与 Backblaze 类似，Carbonite 会在后台运行，持续备份你的数据。当你想从备份中恢复某个文件时，可以通过应用程序来进行恢复。没有可用的网页界面或移动应用程序。
- en: '[Virtual Machine Snapshots](nsp-enoka501485-0007.xhtml#rah1106)'
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[虚拟机快照](nsp-enoka501485-0007.xhtml#rah1106)'
- en: Virtual machines provide a lot of benefits not seen in physical computers. They’re
    able to share hardware (processors and RAM), are fast to start up or reboot, and
    can be created with just the right amount of resources for their specific purpose.
    One of the best things about them is the capability to create *snapshots*.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机提供了物理计算机无法比拟的许多优点。它们能够共享硬件（处理器和内存），启动或重启非常快速，并且可以根据特定用途创建只包含所需资源的虚拟机。虚拟机最棒的地方之一就是能够创建*快照*。
- en: A virtual machine snapshot is a copy of that virtual machine at a given point
    in time. A snapshot generally includes all information related to a virtual machine
    at the time the snapshot is taken, including its power state (on, off, or paused/suspended),
    the contents of its virtual memory, and the contents of its virtual hard disk.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机快照是某一时刻虚拟机的副本。快照通常包括与虚拟机相关的所有信息，包括快照拍摄时的电源状态（开、关或暂停/挂起）、虚拟内存的内容以及虚拟硬盘的内容。
- en: Whenever you’re making significant changes to a virtual machine, it’s wise to
    create a snapshot of that machine beforehand to protect yourself from the eventuality
    that your modifications will break your virtual machine. Having a snapshot just
    before the changes that rendered your virtual machine unusable allows you to revert
    to the known-good configuration as if the changes were never made in the first
    place. It’s like a real-life undo button.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 每当你对虚拟机进行重大更改时，最好在修改之前创建该虚拟机的快照，以防修改会导致虚拟机损坏。拥有在做出修改之前的快照，可以让你将虚拟机恢复到已知良好的配置状态，就好像这些修改从未发生过一样。这就像是现实生活中的撤销按钮。
- en: All major virtual machine software (such as VMware, VirtualBox, and Hyper-V)
    are capable of creating snapshots of the virtual machines they manage. [Figure
    9-7](nsp-enoka501485-0018.xhtml#fig0907) shows an example of VMware’s Snapshot
    Manager.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 所有主要的虚拟机软件（如 VMware、VirtualBox 和 Hyper-V）都能够创建它们管理的虚拟机的快照。[图 9-7](nsp-enoka501485-0018.xhtml#fig0907)显示了
    VMware 快照管理器的示例。
- en: '![Screenshot of VMware’s Snapshot Manager window showing the path as “Backup4Pre
    DNS4You Are Here.” Snapshot details, including the Name, Description, and screenshot
    (if available) are available underneath, as well as options to Take Snapshot,
    Keep, Clone, Delete, AutoProtect, Close, and Help.](images/nsp-enoka501485-fig0907.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![VMware 快照管理器窗口的屏幕截图，显示路径为“Backup4Pre DNS4You Are Here”。快照详情，包括名称、描述和截图（如果有），以及拍摄快照、保持、克隆、删除、自动保护、关闭和帮助等选项，均可在下方查看。](images/nsp-enoka501485-fig0907.jpg)'
- en: 'Figure 9-7: VMware Snapshot Manager'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-7：VMware 快照管理器
- en: From within Snapshot Manager, you can create a new snapshot with the Take Snapshot
    button, go to a specific snapshot (that is, revert the virtual machine to the
    point in time a given snapshot was taken), delete or clone a snapshot, or enable
    AutoProtect, a feature that creates snapshots on a predefined schedule, allowing
    you to revert to a snapshot from multiple points in the past. Snapshots are available
    in most hypervisors, but the settings and options might differ slightly.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在快照管理器中，你可以使用“拍摄快照”按钮创建一个新的快照，转到特定的快照（即将虚拟机恢复到某个特定快照的时间点），删除或克隆快照，或者启用 AutoProtect，这是一种按预定计划创建快照的功能，允许你从多个时间点恢复快照。大多数虚拟化平台都支持快照功能，但设置和选项可能会有所不同。
- en: While snapshots aren’t a backup in the literal sense, they are useful for restoring
    a working virtual machine configuration. You shouldn’t use snapshots as your only
    means of backing up, but including them as part of your strategy is often handy.
    A sensible solution would be to include all the virtual machine files in your
    regular backup strategy.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然快照从字面意义上讲不是备份，但它们在恢复虚拟机工作配置时非常有用。你不应该仅仅依赖快照来进行备份，但将其作为备份策略的一部分通常是非常方便的。一个明智的解决方案是将所有虚拟机文件包含在你的常规备份策略中。
- en: '[Testing and Restoring Backups](nsp-enoka501485-0007.xhtml#rah1107)'
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[测试和恢复备份](nsp-enoka501485-0007.xhtml#rah1107)'
- en: Once you’ve created your backup strategy and your most important data is being
    regularly backed up onsite and offsite, it’s important to test these backups at
    regular intervals. If you suffer a loss of data and try to restore it from your
    backup only to find out it has become corrupt, your backup strategy is providing
    no value.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你制定了备份策略，并且你的最重要数据已经定期在本地和远程备份，接下来就要定期测试这些备份。如果你丢失了数据，并试图从备份中恢复，却发现备份已损坏，那么你的备份策略就毫无价值了。
- en: To restore your files on Windows, open the **Backup and Restore** menu. Click
    **Restore My Files** or **Restore All Users’ Files**. You can look through the
    contents of your backups by using the Browse for Files or Browse for Folders options.
    You can also search the contents of your backup via this menu.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Windows 上恢复文件，请打开**备份和恢复**菜单。点击**恢复我的文件**或**恢复所有用户的文件**。你可以通过使用“浏览文件”或“浏览文件夹”选项查看备份的内容。你也可以通过此菜单搜索备份的内容。
- en: To restore your files on a Mac using Time Machine, browse to the folder from
    which you want to restore files, such as your Documents or Downloads folder. Open
    Time Machine and then use the arrows and timeline to browse the available local
    snapshots and backups. Select one or more of the items you want to restore and
    then click **Restore**. This can include files, folders, or your entire disk.
    Restored items will return to their original location on your computer.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Mac上使用Time Machine恢复文件，请浏览您想要恢复文件的文件夹，如“文档”或“下载”文件夹。打开Time Machine，然后使用箭头和时间线浏览可用的本地快照和备份。选择您要恢复的一个或多个项目，然后点击**恢复**。这可以包括文件、文件夹或整个磁盘。恢复的项目将返回到计算机上的原始位置。
- en: To restore files using Carbonite, Backblaze, or any other solution, open the
    web portal or the application GUI. Then, locate the files or folders you want
    to restore and follow the instructions provided.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Carbonite、Backblaze或任何其他解决方案恢复文件，请打开网页门户或应用程序GUI。然后，找到您要恢复的文件或文件夹，并按照提供的说明操作。
- en: When your first full backup of any system has been created, test a few files
    or folders at random to restore. It may be worth finding some larger files to
    include as part of this test, as the larger the file, the higher chance there
    is of the backup failing partway through. If you restore a sample of data and
    all seems well, set a reminder to do the same again in a week and then a month
    following. If all of your test restorations go smoothly, you can choose how often
    you want to test your backups from that point forward. Somewhere between one and
    six months is prudent.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 当您完成首次完整备份时，随机测试一些文件或文件夹进行恢复。值得尝试选择一些较大的文件进行测试，因为文件越大，备份中途失败的概率就越高。如果恢复一个数据样本并且一切正常，请设置提醒，分别在一周后和一个月后再次进行相同的操作。如果所有测试恢复都顺利进行，您可以选择以后多久测试一次备份。建议在一到六个月之间进行测试。
- en: With that done, your backup strategy should be complete and robust enough to
    recover from pretty much any data loss event or disaster.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些步骤后，您的备份策略应足够完整和稳健，可以应对几乎所有的数据丢失事件或灾难。
- en: '[Summary](nsp-enoka501485-0007.xhtml#rah1108)'
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[总结](nsp-enoka501485-0007.xhtml#rah1108)'
- en: The solutions discussed in this chapter will be adequate for most situations,
    but they aren’t guaranteed to fit your needs. When looking for a backup solution,
    ensure that the one you choose is right for your operating system, allows for
    the creation of backups containing the data you want to back up (and nothing else),
    and is capable of the type of backups you want to create. It should also be capable
    of automatically creating backups on a schedule or creating a backup of your data
    constantly. Finally, make sure that, once backed up, you’re able to restore your
    data within a reasonable timeframe and high confidence in the integrity of the
    restored data.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 本章讨论的解决方案适用于大多数情况，但并不能保证完全符合您的需求。在寻找备份解决方案时，请确保所选择的备份方案适用于您的操作系统，能够创建包含您想要备份的数据（而且只有这些数据）的备份，并且能够进行您想要创建的备份类型。它还应能够按照预定计划自动创建备份，或持续创建数据备份。最后，请确保一旦备份完成，您能够在合理的时间内恢复数据，并且对恢复数据的完整性充满信心。
