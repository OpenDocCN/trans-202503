<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Creating and Managing Projects"><div class="titlepage"><div><div><h1 class="title"><a id="creating_and_managing_projects"/>Chapter 4. Creating and Managing Projects</h1></div></div></div><p><a id="iddle1983" class="indexterm"/>Now that you can configure and start a single IOS router, roll up your sleeves and I’ll show you how to create a project by networking two or more routers together. Compared to working with real lab equipment, creating virtual networks and managing devices in GNS3 is a breeze. The user interface acts like a master control room, allowing you to manipulate your network designs and devices with just a few clicks. This chapter will show you how to use GNS3 to centrally manage your network, including the virtual hardware.</p><div class="sect1" title="Project Management Overview"><div class="titlepage"><div><div><h1 class="title"><a id="project_management_overview"/>Project Management Overview</h1></div></div></div><p>A strong feature of GNS3 is project management. You can create an unlimited number of network designs to save and use whenever you need them. That means you’ll never have to waste time tearing apart an existing project to create a new one, which often happens when you use physical equipment.</p><p><a id="iddle1090" class="indexterm"/><a id="iddle1093" class="indexterm"/><a id="iddle1131" class="indexterm"/><a id="iddle1134" class="indexterm"/><a id="iddle1430" class="indexterm"/><a id="iddle1886" class="indexterm"/><a id="iddle1984" class="indexterm"/><a id="iddle1985" class="indexterm"/><a id="iddle1989" class="indexterm"/><a id="iddle1995" class="indexterm"/><a id="iddle2092" class="indexterm"/><a id="iddle2111" class="indexterm"/><a id="iddle2150" class="indexterm"/><a id="iddle2212" class="indexterm"/><a id="iddle2233" class="indexterm"/><a id="iddle2235" class="indexterm"/><a id="iddle2289" class="indexterm"/><a id="iddle2292" class="indexterm"/>Not only can you save multiple projects, but you can save multiple snapshots of an entire project configuration. A <span class="emphasis"><em>snapshot</em></span> preserves your project’s network layout and the state of all your router configurations at a particular moment in time. You can restore a snapshot whenever you’d like to roll your entire project back to the state it was in when the snapshot was taken.</p><div class="note" title="Note"><h3 class="title"><a id="ch04note01"/>Note</h3><p><span class="emphasis"><em>Snapshots are useful for practicing CCNA or CCNP configuration drills. You can create a lab, apply the basic router configurations required for a drill (such as network addresses, routing protocols, and so on), and then take a snapshot. Once you have a snapshot of the basic setup, you can practice applying the scenario’s objectives to the network. If you want to practice the same tasks again later, you can revert to the basic snapshot, and your routers should be ready without additional configuration.</em></span></p></div><p>GNS3 also gives you the ability to manage your virtual hardware. Just like with real routers, you can use Cisco expansion modules to upgrade your virtual routers. You can add a wide range of functionality, such as additional random access memory (RAM), Ethernet interfaces, serial ports, Asynchronous Transfer Mode (ATM), and Packet over SONET (POS) ports.</p><div class="sect2" title="Terminology"><div class="titlepage"><div><div><h2 class="title"><a id="terminology"/>Terminology</h2></div></div></div><p>Before beginning, let’s explore some important terminology. You need to know the difference between a topology and a project. A <span class="emphasis"><em>topology</em></span> file is a text file that ends in <span class="emphasis"><em>.gns3</em></span> and primarily refers to devices and the links between them. A <span class="emphasis"><em>project</em></span> is a user-defined project folder (<span class="emphasis"><em>MyLab</em></span>, for example) stored inside the <span class="emphasis"><em>GNS3/projects</em></span> folder. A user project folder contains a topology file named <span class="emphasis"><em>&lt;project_name&gt;.gns3</em></span>, router configurations, the contents of nonvolatile random access memory (NVRAM), and other saved information. In other words, it represents an entire network, including the topology and all device configurations.</p><p>Another term you should be familiar with is <span class="emphasis"><em>node</em></span>. In computer networking, a node is any device connected to your network. In GNS3, a node is any device found on the Devices toolbar.</p><p>To be effective at managing devices and projects, you’ll need more than just vocabulary; you’ll also need to be familiar with GNS3’s screen layout.<a id="iddle1190" class="indexterm"/><a id="iddle1239" class="indexterm"/><a id="iddle1281" class="indexterm"/><a id="iddle1284" class="indexterm"/><a id="iddle1286" class="indexterm"/><a id="iddle1289" class="indexterm"/><a id="iddle1341" class="indexterm"/><a id="iddle1452" class="indexterm"/><a id="iddle1775" class="indexterm"/><a id="iddle2147" class="indexterm"/><a id="iddle2228" class="indexterm"/><a id="iddle2236" class="indexterm"/><a id="iddle2420" class="indexterm"/></p></div><div class="sect2" title="Screen Layout"><div class="titlepage"><div><div><h2 class="title"><a id="screen_layout"/>Screen Layout</h2></div></div></div><p>Let’s take a look at the standard GNS3 layout (shown in <a class="xref" href="ch04.html#screen_layout_showing_two_routers_and_a" title="Figure 4-1. Screen layout showing two routers and a switch in the GNS3 workspace">Figure 4-1</a>) and define a few concepts used by the program.</p><div class="figure"><a id="screen_layout_showing_two_routers_and_a"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00021"/><img src="httpatomoreillycomsourcenostarchimages2208911.png.jpg" alt="Screen layout showing two routers and a switch in the GNS3 workspace"/></div></div><p class="title">Figure 4-1. Screen layout showing two routers and a switch in the GNS3 workspace</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p title="GNS3 toolbar"><span class="title"><strong><span class="strong"><strong>➊ GNS3 toolbar</strong></span></strong></span> A series of icons to easily perform common tasks.</p></li><li class="listitem"><p title="Devices toolbar"><span class="title"><strong><span class="strong"><strong>➋ Devices toolbar</strong></span></strong></span> Used to add routers, switches, end devices, and security devices, as well as to create links between devices. To create topologies, select a device type from the toolbar and drag devices from the device window to your workspace. There are two types of devices: simulated and emulated. A <span class="emphasis"><em>simulated</em></span> device mimics all the characteristics of an actual device (like an Ethernet switch node) and does not run an operating system. An <span class="emphasis"><em>emulated</em></span> device emulates the hardware of an actual device and requires an operating system to function (like virtual Dynamips routers running Cisco IOS).</p></li><li class="listitem"><p title="Console"><span class="title"><strong><span class="strong"><strong>➌ Console</strong></span></strong></span> A command line interface where you can manage aspects of your devices.</p></li><li class="listitem"><p title="Topology Summary"><span class="title"><strong><span class="strong"><strong>➍ Topology Summary</strong></span></strong></span> Displays the state of devices in your project. A green circle by a device indicates that it has started, a red circle indicates that a device is stopped, and a yellow circle indicates that a device is suspended. Simulated devices (like the Ethernet switch node) are always green. To see the links in use on a given device, click the triangle next to the device name.</p></li><li class="listitem"><p title="Workspace"><span class="title"><strong><span class="strong"><strong>➎ Workspace</strong></span></strong></span> The area in which you’ll design your network. Drag devices from the Devices toolbar to the workspace and link them together.</p></li></ul></div><p>Now that you know what the main GNS3 screen looks like, let’s look more closely at the options you’ll find there.</p></div></div><div class="sect1" title="Using the GNS3 Toolbar"><div class="titlepage"><div><div><h1 class="title"><a id="using_the_gns3_toolbar"/>Using the GNS3 Toolbar</h1></div></div></div><p><a id="iddle1234" class="indexterm"/><a id="iddle1431" class="indexterm"/><a id="iddle1548" class="indexterm"/><a id="iddle1853" class="indexterm"/><a id="iddle1900" class="indexterm"/><a id="iddle1977" class="indexterm"/><a id="iddle2108" class="indexterm"/><a id="iddle2141" class="indexterm"/><a id="iddle2149" class="indexterm"/><a id="iddle2234" class="indexterm"/>The GNS3 toolbar contains several groups of icons that are roughly organized by function and offer a simple way to get things done. The first group deals with projects, the second with links, the third with devices and snapshots, and the fourth with additional ways to visually organize your projects.</p><div class="sect2" title="First Toolbar Group"><div class="titlepage"><div><div><h2 class="title"><a id="first_toolbar_group"/>First Toolbar Group</h2></div></div></div><p>The first group of toolbar icons, shown in <a class="xref" href="ch04.html#first_toolbar_group-id00005" title="Figure 4-2. First toolbar group">Figure 4-2</a>, deals with actions that affect entire projects.</p><div class="figure"><a id="first_toolbar_group-id00005"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00022"/><img src="httpatomoreillycomsourcenostarchimages2208913.png.jpg" alt="First toolbar group"/></div></div><p class="title">Figure 4-2. First toolbar group</p></div><p>From left to right, these icons are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p title="New blank project"><span class="title"><strong><span class="strong"><strong>New blank project</strong></span></strong></span>. Creates a new project folder and allows you to choose what to name your project.</p></li><li class="listitem"><p title="Open project"><span class="title"><strong><span class="strong"><strong>Open project</strong></span></strong></span>. Opens a previously saved project. To open a project, choose the project folder name and select the file named <span class="emphasis"><em>&lt;project_name&gt;.gns3</em></span>.</p></li><li class="listitem"><p title="Save project"><span class="title"><strong><span class="strong"><strong>Save project</strong></span></strong></span>. Saves a complete project to the GNS3 <span class="emphasis"><em>projects</em></span> folder. By default, a PNG image file of your workspace is saved with your project.</p></li></ul></div></div><div class="sect2" title="Second Toolbar Group"><div class="titlepage"><div><div><h2 class="title"><a id="second_toolbar_group"/>Second Toolbar Group</h2></div></div></div><p>The buttons in the second group of toolbar icons, shown in <a class="xref" href="ch04.html#second_toolbar_group-id00006" title="Figure 4-3. Second toolbar group">Figure 4-3</a>, allow you to create project snapshots, show or hide interface labels, and connect to your devices using the virtual console port on your devices.</p><div class="figure"><a id="second_toolbar_group-id00006"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00023"/><img src="httpatomoreillycomsourcenostarchimages2208915.png.jpg" alt="Second toolbar group"/></div></div><p class="title">Figure 4-3. Second toolbar group</p></div><p>From left to right, these icons are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p title="Snapshot"><span class="title"><strong><span class="strong"><strong>Snapshot</strong></span></strong></span>. Creates a snapshot of your devices, links, and IOS configurations to record the state of your workspace at that time. You can save more than one snapshot and revert to a saved snapshot at any time. Options are Create, Delete, Restore, and Close.</p></li><li class="listitem"><p title="Show interface labels"><span class="title"><strong><span class="strong"><strong>Show interface labels</strong></span></strong></span>. Shows or hides interface names used by a link. These labels are abbreviated and displayed with devices in your workspace (for example, f0/0 is displayed for FastEthernet0/0).</p></li><li class="listitem"><p title="Console connect to all devices"><span class="title"><strong><span class="strong"><strong>Console connect to all devices</strong></span></strong></span>. Opens a console connection to all running routers in your workspace.</p></li></ul></div><div class="note" title="Note"><h3 class="title"><a id="ch04note02"/>Note</h3><p><span class="emphasis"><em>When you open a console connection to all devices, your screen might become cluttered with open console windows unless your terminal supports tabbed sessions. When dealing with large topologies, you might find it easier to open and close single sessions as needed by right-clicking a device node and choosing Console.</em></span></p></div></div><div class="sect2" title="Third Toolbar Group"><div class="titlepage"><div><div><h2 class="title"><a id="third_toolbar_group"/>Third Toolbar Group</h2></div></div></div><p><a id="iddle1023" class="indexterm"/><a id="iddle1308" class="indexterm"/><a id="iddle1309" class="indexterm"/><a id="iddle1339" class="indexterm"/><a id="iddle1495" class="indexterm"/><a id="iddle1517" class="indexterm"/><a id="iddle1889" class="indexterm"/><a id="iddle1955" class="indexterm"/><a id="iddle2052" class="indexterm"/><a id="iddle2053" class="indexterm"/><a id="iddle2112" class="indexterm"/><a id="iddle2161" class="indexterm"/><a id="iddle2165" class="indexterm"/><a id="iddle2168" class="indexterm"/><a id="iddle2220" class="indexterm"/><a id="iddle2424" class="indexterm"/>The third group of toolbar icons, shown in <a class="xref" href="ch04.html#third_toolbar_group-id00007" title="Figure 4-4. Third toolbar group">Figure 4-4</a>, primarily deals with controlling devices.</p><div class="figure"><a id="third_toolbar_group-id00007"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00024"/><img src="httpatomoreillycomsourcenostarchimages2208917.png.jpg" alt="Third toolbar group"/></div></div><p class="title">Figure 4-4. Third toolbar group</p></div><p>From left to right, these four icons are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p title="Start/Resume all devices"><span class="title"><strong><span class="strong"><strong>Start/Resume all devices</strong></span></strong></span>. Starts all stopped devices or resumes all suspended devices in your workspace.</p></li><li class="listitem"><p title="Suspend all devices"><span class="title"><strong><span class="strong"><strong>Suspend all devices</strong></span></strong></span>. Places all suspend-capable devices in a suspended state.</p></li><li class="listitem"><p title="Stop all devices"><span class="title"><strong><span class="strong"><strong>Stop all devices</strong></span></strong></span>. Stops all devices.</p></li><li class="listitem"><p title="Reload all devices"><span class="title"><strong><span class="strong"><strong>Reload all devices</strong></span></strong></span>. Reloads all devices. Be sure to save your router configurations and project before reloading or else you might lose your configurations!</p></li></ul></div></div><div class="sect2" title="Fourth Toolbar Group"><div class="titlepage"><div><div><h2 class="title"><a id="fourth_toolbar_group"/>Fourth Toolbar Group</h2></div></div></div><p>The final group of toolbar icons, shown in <a class="xref" href="ch04.html#fourth_toolbar_group-id00008" title="Figure 4-5. Fourth toolbar group">Figure 4-5</a>, provides tools to present your network layouts more clearly. You can add objects such as rectangles and ellipses to your project, and even generate a screenshot of your workspace.</p><div class="figure"><a id="fourth_toolbar_group-id00008"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00025"/><img src="httpatomoreillycomsourcenostarchimages2208919.png.jpg" alt="Fourth toolbar group"/></div></div><p class="title">Figure 4-5. Fourth toolbar group</p></div><p>From left to right, the icons in the last toolbar group are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p title="Add a note"><span class="title"><strong><span class="strong"><strong>Add a note</strong></span></strong></span>. Creates text annotations in your workspace. Double-click text to modify it, and right-click the text object to change the Style attributes (such as font size and color). You can also rotate text objects from 0 to 360 degrees.</p></li><li class="listitem"><p title="Insert a picture"><span class="title"><strong><span class="strong"><strong>Insert a picture</strong></span></strong></span>. Adds images and logos to your projects. GNS3 supports PNG, JPG, BMP, XPM, PPM, and TIFF file formats.</p></li><li class="listitem"><p title="Draw a rectangle"><span class="title"><strong><span class="strong"><strong>Draw a rectangle</strong></span></strong></span>. Draws dynamically sizable rectangles. You can right-click a rectangle object to change the Style attributes for border and border color. Rectangle objects can be rotated from 0 to 360 degrees.</p></li><li class="listitem"><p title="Draw an ellipse"><span class="title"><strong><span class="strong"><strong>Draw an ellipse</strong></span></strong></span>. Draws dynamically sizable ellipses. You can right-click an ellipse object to change the border style and color.</p></li><li class="listitem"><p title="Zoom in"><span class="title"><strong><span class="strong"><strong>Zoom in</strong></span></strong></span>. Zooms in your workspace to see details.</p></li><li class="listitem"><p title="Zoom out"><span class="title"><strong><span class="strong"><strong>Zoom out</strong></span></strong></span>. Zooms out of your workspace for a bigger bird’s-eye view.</p></li><li class="listitem"><p title="Screenshot"><span class="title"><strong><span class="strong"><strong>Screenshot</strong></span></strong></span>. Generates a screenshot of your workspace. The image can be saved as a PNG, JPG, BMP, XPM, PPM, or TIFF file and by default is saved in your <span class="emphasis"><em>GNS3/projects</em></span> folder.</p></li></ul></div><div class="sidebar"><a id="window_styles_and_docks"/><p class="title">Window Styles and Docks</p><p><a id="iddle1713" class="indexterm"/><a id="iddle1890" class="indexterm"/><a id="iddle2221" class="indexterm"/><a id="iddle2406" class="indexterm"/><a id="iddle2407" class="indexterm"/>GNS3 provides several window styles to choose from. To change the default style, select <span class="strong"><strong>Edit</strong></span> ▸ <span class="strong"><strong>Preferences</strong></span> on Linux and Windows, or select <span class="strong"><strong>GNS3</strong></span> ▸ <span class="strong"><strong>Preferences</strong></span> on OS X. Select the <span class="strong"><strong>General</strong></span> category, select the <span class="strong"><strong>General</strong></span> tab, and use the drop-down menu under Style to choose your new default style. Click <span class="strong"><strong>Apply</strong></span> and <span class="strong"><strong>Okay</strong></span> to activate your change. GNS3 will remember your selection between program restarts.</p><p>Window docks, on the other hand, are the windows that surround the GNS3 workspace. GNS3 displays the Console and Topology Summary docks by default.</p><p>To view or hide a window dock, select <span class="strong"><strong>View</strong></span> ▸ <span class="strong"><strong>Window Docks</strong></span> and select the dock you want to display; any dock with a check mark next to its name should appear onscreen. To resize a dock, click the border of the dock window where it connects to the workspace and drag the border until you achieve the desired size.</p></div><p>Objects (notes, pictures, and shapes) that you add to your workspace can be grouped into layers. To raise or lower an object, right-click the object and select <span class="strong"><strong>Raise one layer</strong></span> or <span class="strong"><strong>Lower one layer</strong></span>. This feature allows you to manipulate objects in a layer without affecting other layers. You can display layer positions for your objects by choosing <span class="strong"><strong>View</strong></span> ▸ <span class="strong"><strong>Show Layers</strong></span> from the menu, which is useful during advanced layer manipulation.</p><p>By adding shapes and colors with this toolbar, you can divide network components into logical groups. With text, you can add notes and reminders about how your project is configured. <a class="xref" href="ch04.html#sample_project_with_annotations" title="Figure 4-6. Sample project with annotations">Figure 4-6</a> shows how you can present information more clearly using shapes, colors, and annotated text messages.</p><div class="figure"><a id="sample_project_with_annotations"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00026"/><img src="httpatomoreillycomsourcenostarchimages2208921.png.jpg" alt="Sample project with annotations"/></div></div><p class="title">Figure 4-6. Sample project with annotations</p></div><p><a id="iddle1020" class="indexterm"/><a id="iddle1029" class="indexterm"/><a id="iddle1282" class="indexterm"/><a id="iddle1285" class="indexterm"/><a id="iddle1290" class="indexterm"/><a id="iddle1347" class="indexterm"/><a id="iddle1719" class="indexterm"/><a id="iddle1975" class="indexterm"/><a id="iddle1982" class="indexterm"/><a id="iddle2097" class="indexterm"/><a id="iddle2119" class="indexterm"/><a id="iddle2188" class="indexterm"/><a id="iddle2229" class="indexterm"/>Once you’ve created several projects, it’s easy to forget how you configured them or what your objectives were. Adding notes (like the helpful one in <a class="xref" href="ch04.html#sample_project_with_annotations" title="Figure 4-6. Sample project with annotations">Figure 4-6</a>) is a simple way to quickly remind yourself of that information, especially after a few weeks or months have gone by. Notes are awesome—use them!</p></div></div><div class="sect1" title="Using the Devices Toolbar"><div class="titlepage"><div><div><h1 class="title"><a id="using_the_devices_toolbar"/>Using the Devices Toolbar</h1></div></div></div><p>The Devices toolbar (shown in <a class="xref" href="ch04.html#devices_toolbar" title="Figure 4-7. Devices toolbar">Figure 4-7</a>) organizes devices by function. Click an icon on the Devices toolbar to see all the devices in that device group.</p><div class="figure"><a id="devices_toolbar"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00027"/><img src="httpatomoreillycomsourcenostarchimages2208923.png.jpg" alt="Devices toolbar"/></div></div><p class="title">Figure 4-7. Devices toolbar</p></div><p>To add a device node to your project, click an icon from the Devices toolbar to display a list of configured devices and then drag a device to your workspace. You can press <span class="smaller">SHIFT</span> to add multiple identical devices. From left to right, the device types in the toolbar are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p title="Routers"><span class="title"><strong><span class="strong"><strong>Routers</strong></span></strong></span>. Displays all available Dynamips router nodes that have been configured with a valid IOS image file, as well as IOU L3 routers.</p></li><li class="listitem"><p title="Switches"><span class="title"><strong><span class="strong"><strong>Switches</strong></span></strong></span>. Displays all available switch nodes, including Ethernet switch, Ethernet hub, ATM switch, Frame Relay switch, EtherSwitch router, and IOU L2 switches.</p></li><li class="listitem"><p title="End Devices"><span class="title"><strong><span class="strong"><strong>End Devices</strong></span></strong></span>. Displays all available end devices, including QEMU guests, VirtualBox guests, host, and cloud.</p></li><li class="listitem"><p title="Security Devices"><span class="title"><strong><span class="strong"><strong>Security Devices</strong></span></strong></span>. Displays all available security devices, including ASA firewall, IDS/IPS, and any custom nodes you’ve created.</p></li><li class="listitem"><p title="All Devices"><span class="title"><strong><span class="strong"><strong>All Devices</strong></span></strong></span>. Displays all available devices from the Devices toolbar.</p></li><li class="listitem"><p title="Add a Link"><span class="title"><strong><span class="strong"><strong>Add a Link</strong></span></strong></span>. When this is selected, your mouse pointer changes to a crosshair, indicating that you can link two devices together using their virtual interfaces. To link devices, click the first device and select an interface; then repeat for the second device to complete the connection.</p></li></ul></div><p>Click the <span class="strong"><strong>All Devices</strong></span> icon now, and you should see a window containing every configured device in GNS3. You can drag any of the devices to your workspace and use them in your project.</p></div><div class="sect1" title="Creating Your First Project"><div class="titlepage"><div><div><h1 class="title"><a id="creating_your_first_project"/>Creating Your First Project</h1></div></div></div><p>Now that you know your way around the GNS3 interface, let’s dig into some project management details. I’ll cover the easiest way to get things done, but keep in mind that GNS3 often provides more than one way to do things.</p><p><a id="iddle1222" class="indexterm"/><a id="iddle1291" class="indexterm"/><a id="iddle1315" class="indexterm"/><a id="iddle1330" class="indexterm"/><a id="iddle1586" class="indexterm"/><a id="iddle1596" class="indexterm"/><a id="iddle1597" class="indexterm"/><a id="iddle1858" class="indexterm"/><a id="iddle1970" class="indexterm"/><a id="iddle1974" class="indexterm"/><a id="iddle2066" class="indexterm"/><a id="iddle2162" class="indexterm"/><a id="iddle2230" class="indexterm"/>When you launch GNS3, a New project window appears, as shown in <a class="xref" href="ch04.html#new_project_window" title="Figure 4-8. New project window">Figure 4-8</a>. From here, you can either open an existing project or create a new one.</p><div class="figure"><a id="new_project_window"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00028"/><img src="httpatomoreillycomsourcenostarchimages2208925.png.jpg" alt="New project window"/></div></div><p class="title">Figure 4-8. New project window</p></div><p>To create a new project, replace <span class="emphasis"><em>untitled</em></span> with your project name, and click <span class="strong"><strong>OK</strong></span>. If you’re already in GNS3, select <span class="strong"><strong>File</strong></span> ▸ <span class="strong"><strong>New</strong></span> to create a new project.</p><p>Once you’ve created a new GNS3 project, it’s time to build a topology, starting with some Dynamips routers.</p><div class="sect2" title="Working with Routers"><div class="titlepage"><div><div><h2 class="title"><a id="working_with_routers"/>Working with Routers</h2></div></div></div><p>Begin a project by dragging a couple of routers from the Devices toolbar to the GNS3 workspace. If you press <span class="smaller">SHIFT</span> when adding devices, you should see a dialog that allows you to add multiple identical devices. Try adding the first pair of routers this way. If you don’t see any routers on the Devices toolbar, please refer to <a class="xref" href="ch03.html#setting_up_your_first_ios_router" title="Setting Up Your First IOS Router">Setting Up Your First IOS Router</a> to learn how to add devices to GNS3.</p><p>After adding the routers to your workspace, they should be named R1 and R2 automatically. The routers got their names from the command <code class="literal">hostname %h</code> found in the GNS3 file <span class="emphasis"><em>ios_base_startup-config.txt</em></span>. This file contains default IOS settings that are applied to all your routers and are assigned to a device when it’s configured with an IOS image file. To locate the Dynamips configuration files, go to <span class="strong"><strong>Preferences</strong></span>, choose <span class="strong"><strong>Dynamips</strong></span> from the pane on the left, and choose <span class="strong"><strong>IOS Routers</strong></span>. Select a configured router and click <span class="strong"><strong>Edit</strong></span> to display the Dynamips IOS Router configuration options, shown in <a class="xref" href="ch04.html#dynamips_ios_router_configuration_dialog" title="Figure 4-9. Dynamips IOS Router configuration dialog">Figure 4-9</a>.</p><p>From here, you can verify the path to your device’s startup-config and private-config files. When a router is placed in your workspace, the contents of the startup-config file <span class="emphasis"><em>ios_base_startup-config.txt</em></span> are applied to the router startup configuration and loaded to the router’s running configuration when the router is started. If you would like to create custom parameters that are globally applied to your routers (for example, to bring up an interface automatically or use a preassigned username and password), use a text editor to modify and save the <span class="emphasis"><em>ios_base_startup-config.txt</em></span> file. You can apply any valid Cisco IOS commands to the file, provided your IOS supports them, of course. You shouldn’t need to modify the <span class="emphasis"><em>ios_base_private-config.txt</em></span> file. This file was installed by GNS3 so that you can use Secure Shell (SSH) between router restarts, without having to generate new crypto keys on your routers.</p><div class="figure"><a id="dynamips_ios_router_configuration_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00029"/><img src="httpatomoreillycomsourcenostarchimages2208927.png.jpg" alt="Dynamips IOS Router configuration dialog"/></div></div><p class="title">Figure 4-9. Dynamips IOS Router configuration dialog</p></div><p><a id="iddle1021" class="indexterm"/><a id="iddle1598" class="indexterm"/><a id="iddle1721" class="indexterm"/><a id="iddle1979" class="indexterm"/><a id="iddle2082" class="indexterm"/><a id="iddle2163" class="indexterm"/>It’s important to note that the changes you make are applied only to routers you add to new projects and can’t be applied retroactively to routers in your previously saved projects.</p><div class="warning" title="Warning"><h3 class="title"><a id="ch04note03"/>Warning</h3><p><span class="emphasis"><em>Before modifying your</em></span> ios_base_startup-config.txt <span class="emphasis"><em>file, you may want to save a backup copy. If you enter invalid commands, your routers may produce errors and misbehave.</em></span></p></div></div><div class="sect2" title="Creating Links Between Your Routers"><div class="titlepage"><div><div><h2 class="title"><a id="creating_links_between_your_routers"/>Creating Links Between Your Routers</h2></div></div></div><p>After you’ve placed devices in your workspace, you’ll need to add links between them to create a fully functional network. This is equivalent to cabling up a real network, except that you’re using virtual cables rather than physical ones. To add links to your devices, click the <span class="strong"><strong>Add a link</strong></span> icon in the Devices toolbar. Your cursor should change to a crosshair, indicating that you can select devices. To create a link, click a device. You’ll be presented with a drop-down menu of available interfaces, as shown in <a class="xref" href="ch04.html#router_with_two_fastethernet_interfaces" title="Figure 4-10. A router with two FastEthernet interfaces">Figure 4-10</a>.</p><div class="figure"><a id="router_with_two_fastethernet_interfaces"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00030"/><img src="httpatomoreillycomsourcenostarchimages2208929.png.jpg" alt="A router with two FastEthernet interfaces"/></div></div><p class="title">Figure 4-10. A router with two FastEthernet interfaces</p></div><p>A red circle next to an interface indicates that it’s available to use; a green circle indicates the interface is already being used by an existing link. Select any available interface to establish the link, and then select an interface on another device to complete the connection. You can <a id="iddle1219" class="indexterm"/><a id="iddle1260" class="indexterm"/><a id="iddle1450" class="indexterm"/><a id="iddle1876" class="indexterm"/><a id="iddle1990" class="indexterm"/><a id="iddle2076" class="indexterm"/><a id="iddle2319" class="indexterm"/>create connections only between two compatible interface types. In other words, just like with physical hardware, you can’t plug a serial cable into an Ethernet interface.</p><p>At some point, you may want to break a link between two devices to simulate an outage, to reconfigure your network, or for some other reason. To break a link between two devices, right-click the link and select <span class="strong"><strong>Delete</strong></span>, as shown in <a class="xref" href="ch04.html#deleting_links_between_devices" title="Figure 4-11. Deleting links between devices">Figure 4-11</a>.</p><div class="figure"><a id="deleting_links_between_devices"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00031"/><img src="httpatomoreillycomsourcenostarchimages2208931.png.jpg" alt="Deleting links between devices"/></div></div><p class="title">Figure 4-11. Deleting links between devices</p></div><p>To reestablish a link, click the <span class="strong"><strong>Add a link</strong></span> icon again and choose the same devices.</p></div><div class="sect2" title="Configuring Virtual Hardware"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_virtual_hardware"/>Configuring Virtual Hardware</h2></div></div></div><p>When you place virtual routers in your workspace, they have the same configuration options that were applied when you configured the device’s IOS image. But that doesn’t mean your routers are stuck with this configuration. Like PCs, Cisco routers have expansion ports to provide additional functionality, and GNS3 Dynamips routers provide the same expansion options as their physical counterparts. To modify a router’s hardware configuration, right-click the router and select <span class="strong"><strong>Configure</strong></span>; then click the node name (R1, for example), as shown in <a class="xref" href="ch04.html#cisco_ios_router_node_configurator_dialo" title="Figure 4-12. Cisco IOS router Node configurator dialog">Figure 4-12</a>.</p><div class="figure"><a id="cisco_ios_router_node_configurator_dialo"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00032"/><img src="httpatomoreillycomsourcenostarchimages2208933.png.jpg" alt="Cisco IOS router Node configurator dialog"/></div></div><p class="title">Figure 4-12. Cisco IOS router Node configurator dialog</p></div><p><a id="iddle1764" class="indexterm"/><a id="iddle1845" class="indexterm"/><a id="iddle1848" class="indexterm"/><a id="iddle1891" class="indexterm"/><a id="iddle1940" class="indexterm"/><a id="iddle1980" class="indexterm"/><a id="iddle1986" class="indexterm"/><a id="iddle2083" class="indexterm"/><a id="iddle2090" class="indexterm"/><a id="iddle2160" class="indexterm"/><a id="iddle2166" class="indexterm"/><a id="iddle2170" class="indexterm"/>In the Node configurator dialog, you should see the available configuration options for that model of router. Basic models only allow you to add simple options, such as Cisco SLOT, WIC, or RAM cards, while more advanced models allow you to define features such as the chassis type or a Network Processing Engine (NPE) type that can be found in Cisco 7200 series routers.</p><p>You can configure and apply the same device options for memory and slots that were covered in <a class="xref" href="ch03.html" title="Chapter 3. Configuration">Chapter 3</a>, but the changes you make here will be applied only to the devices or device group you chose in your project. All other devices will remain unaffected.</p></div><div class="sect2" title="Starting, Stopping, and Pausing Routers"><div class="titlepage"><div><div><h2 class="title"><a id="startingcomma_stoppingcomma_and_pausing"/>Starting, Stopping, and Pausing Routers</h2></div></div></div><p>I’ve shown you how to start and stop routers by right-clicking a router and choosing either Start or Stop, but you can also suspend your router by right-clicking it and choosing Suspend. Suspending a router is handy when you want to simulate a failure without having to go through the process of saving your configuration, stopping the router, and restarting it. In fact, repeatedly stopping and restarting GNS3 routers can cause Dynamips to crash with some IOS versions, so I recommend suspending and resuming instead.</p><p>The suspend feature really shines in network convergence tests. You can quickly simulate failures and recoveries to test routing protocols such as the Routing Information Protocol (RIP), EIGRP, and OSPF, as well as redundancy protocols such as the HSRP, Virtual Router Redundancy Protocol (VRRP), and Gateway Load Balancing Protocol (GLBP). To simulate a failure, click <span class="strong"><strong>Suspend</strong></span> and monitor your other routers to verify that failover or convergence has occurred.</p><p>To simulate a recovery, resume the router by right-clicking the device and choosing <span class="strong"><strong>Start</strong></span>. Due to throughput limitations placed on Dynamips because of the emulation, failover or convergence may take a little longer than you’re used to when using real hardware. Don’t worry—this is totally normal.</p><p>Of course, even if you can start and stop your routers, you won’t be able to do too much with them until you’ve logged on to a console.</p></div><div class="sect2" title="Logging On to Routers"><div class="titlepage"><div><div><h2 class="title"><a id="logging_on_to_routers"/>Logging On to Routers</h2></div></div></div><p>You log on to your routers using the simulated console port. If this sounds familiar, it’s because that’s also how you log on to actual Cisco equipment. On a physical piece of hardware, the console port is where you plug in Cisco’s little blue serial console cable. Be sure the router is started before you open a console connection; otherwise, you won’t get a console screen.</p><div class="sidebar"><a id="configuring_terminal_settings"/><p class="title">Configuring Terminal Settings</p><p><a id="iddle1988" class="indexterm"/><a id="iddle2211" class="indexterm"/>Whether you’re running Windows, OS X, or Linux, there are a number of terminal types available to use with GNS3. But why would you prefer one over the other? One reason might be that it’s what you have installed on your system. On Linux, for example, you may be using the Gnome Desktop, which has gnome-terminal installed by default. If that’s the case, you may want to modify the GNS3 terminal setting to use gnome-terminal. Another reason is that some terminal programs provide more features than others. You may want to choose a terminal type that allows you to use tabbed windows, for example, so you can open more than one console at a time without a bunch of open windows cluttering the screen.</p><p>To modify the terminal settings, go to <span class="strong"><strong>Preferences</strong></span>, click <span class="strong"><strong>General</strong></span>, and then click the <span class="strong"><strong>Console applications</strong></span> tab to display the window shown in <a class="xref" href="ch04.html#terminal_settings" title="Figure 4-13. Terminal settings">Figure 4-13</a>.</p><div class="figure"><a id="terminal_settings"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00033"/><img src="httpatomoreillycomsourcenostarchimages2208935.png.jpg" alt="Terminal settings"/></div></div><p class="title">Figure 4-13. Terminal settings</p></div><p>From here, you can choose a predefined terminal type and customize the command settings under Console application command. (Check your terminal application documentation to find out what options are available on your system.) When you’re done, click <span class="strong"><strong>Set</strong></span> and then <span class="strong"><strong>Apply</strong></span> and <span class="strong"><strong>OK</strong></span>.</p></div><p><a id="iddle1235" class="indexterm"/><a id="iddle1765" class="indexterm"/><a id="iddle1838" class="indexterm"/><a id="iddle1967" class="indexterm"/><a id="iddle1981" class="indexterm"/><a id="iddle2084" class="indexterm"/><a id="iddle2207" class="indexterm"/>To log on to all your routers at once, click the <span class="strong"><strong>Console connect to all devices</strong></span> icon in the second toolbar group (see <a class="xref" href="ch04.html#second_toolbar_group-id00006" title="Figure 4-3. Second toolbar group">Figure 4-3</a>). To log on to a single router, right-click the router node in your workspace and select <span class="strong"><strong>Console</strong></span> or <span class="strong"><strong>Auxiliary console</strong></span> from the menu (see <a class="xref" href="ch04.html#choose_console_or_auxiliary_console_to_c" title="Figure 4-14. Choose Console or Auxiliary console to connect to a router">Figure 4-14</a>).</p><p>To change the Transmission Control Protocol (TCP) port number on which a router’s console or AUX port listens, right-click a device in your workspace, click <span class="strong"><strong>Configure</strong></span>, and select the <span class="strong"><strong>General</strong></span> tab. The port number you choose must be unique for every device in GNS3 and on your PC. As a rule, I try not to mess with port numbers unless I must. GNS3 does a pretty good job of keeping them all straight, and mucking with them can lead to headaches. But if some other TCP/IP application running on your PC happens to conflict with GNS3, you may have to make some changes before you can log on to your router.</p><div class="figure"><a id="choose_console_or_auxiliary_console_to_c"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00034"/><img src="httpatomoreillycomsourcenostarchimages2208937.png.jpg" alt="Choose Console or Auxiliary console to connect to a router"/></div></div><p class="title">Figure 4-14. Choose Console or Auxiliary console to connect to a router</p></div><div class="note" title="Note"><h3 class="title"><a id="ch04note04"/>Note</h3><p><span class="emphasis"><em>Use the <code class="literal">netstat</code> command on your PC to verify what TCP/IP ports are already in use.</em></span></p></div><p>Once you’ve established a console connection to the router, you should see a familiar Cisco console window.</p><a id="pro_id00017"/><pre class="programlisting">Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
Connected to Dynamips VM "R1" (ID 1, type c3725) - Console port
Press ENTER to get the prompt.
ROMMON emulation microcode.

Cisco 1720 (MPC860) processor (revision 0x202) with 55206K/9830K bytes of memory.
Processor board ID FTX0945WOMY (4279256517), with hardware revision 000
M860 processor: part number 0, mask 0
Bridging software.
X.25 software, Version 3.0.0.
1 FastEthernet/IEEE 802.3 interface(s)
32K bytes of non-volatile configuration memory.
4096K bytes of processor board System flash (Read/Write)

SETUP: new interface FastEthernet0 placed in "shutdown" state

Press RETURN to get started!
00:00:02: %LINK-5-CHANGED: Interface FastEthernet0, changed state to administratively down
00:00:03: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0, changed state to down
R1#</pre><p><a id="iddle1009" class="indexterm"/><a id="iddle1155" class="indexterm"/><a id="iddle1287" class="indexterm"/><a id="iddle1349" class="indexterm"/><a id="iddle1361" class="indexterm"/><a id="iddle1363" class="indexterm"/><a id="iddle1851" class="indexterm"/><a id="iddle1872" class="indexterm"/><a id="iddle1976" class="indexterm"/><a id="iddle2087" class="indexterm"/><a id="iddle2138" class="indexterm"/><a id="iddle2175" class="indexterm"/><a id="iddle2177" class="indexterm"/>At this point, you can begin using standard IOS commands to configure the router. One command that might look odd is the <code class="literal">show flash</code> command. Normally this command displays files saved in flash memory, such as the router’s IOS image file and other default files from Cisco. In GNS3, however, you’ll notice there are no files saved here by default. What’s more, the flash drive may be <span class="emphasis"><em>unformatted</em></span>; if that’s the case, you’ll need to issue the <code class="literal">erase flash:</code> command before you can save files to flash memory. Otherwise, you may receive an error similar to the following:</p><a id="pro_id00018"/><pre class="programlisting">%Error opening slot0:router-confg (Bad device info block)</pre><div class="note" title="Note"><h3 class="title"><a id="ch04note05"/>Note</h3><p><span class="emphasis"><em>If you use an NM-16ESW switch module, you may have to erase your router’s flash memory before you create VLANs; otherwise, the VLAN database</em></span> (vlan.dat) <span class="emphasis"><em>will not be able to be saved.</em></span></p></div><p>This section has been all about Dynamips routers so far, but you can also use switches in your GNS3 projects, which I’ll cover next.</p></div></div><div class="sect1" title="Ethernet Switch Nodes"><div class="titlepage"><div><div><h1 class="title"><a id="ethernet_switch_nodes"/>Ethernet Switch Nodes</h1></div></div></div><p>The Ethernet switch node is an emulated virtual switch that allows you to create VLAN access and trunk ports. The Ethernet switch node supports access ports, industry-standard 802.1Q trunk ports, and QinQ tagging. It does not, however, support Cisco’s proprietary Inter-Switch Link (ISL) trunking protocol.</p><p>To use an Ethernet switch node, drag the node to your workspace. You never have to start an Ethernet switch node; they’re always ready to use.</p><p>To configure the switch, right-click the <span class="strong"><strong>Ethernet switch node</strong></span> icon and select <span class="strong"><strong>Configure</strong></span>. Using the Node configurator window shown in <a class="xref" href="ch04.html#ethernet_switch_node_configurator_window" title="Figure 4-15. Ethernet switch Node configurator window">Figure 4-15</a>, click the switch name (SW1, for example) to modify the default switch ports or add new ports.</p><p>By default, there are eight access ports assigned to VLAN 1. To change a port, click the port number and modify the settings as needed. When you’re done, click <span class="strong"><strong>Apply</strong></span> and <span class="strong"><strong>OK</strong></span>. To add a new port, define the port settings and click the <span class="strong"><strong>Add</strong></span> button; then click <span class="strong"><strong>Apply</strong></span>. When you’re finished adding ports, click <span class="strong"><strong>OK</strong></span> to complete the setup.</p><p>One alternative to the Ethernet switch node is to configure a Dynamips router with a network switch module. The advantage of using a switch module is that it supports more features (such as the Spanning Tree Protocol); the downside is that using a network switch module uses more PC resources. If you need the functions of only a simple switch, I recommend you stick with the Ethernet switch node. If you need full IOS switching capability, use a router with a switch module installed like the EtherSwitch router, or use an IOU L2 switch image (discussed in <a class="xref" href="ch09.html" title="Chapter 9. Cisco IOS On UNIX and NX-OSv">Chapter 9</a>).</p><div class="figure"><a id="ethernet_switch_node_configurator_window"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00035"/><img src="httpatomoreillycomsourcenostarchimages2208939.png.jpg" alt="Ethernet switch Node configurator window"/></div></div><p class="title">Figure 4-15. Ethernet switch Node configurator window</p></div></div><div class="sect1" title="Changing Symbols and Organizing Your Devices"><div class="titlepage"><div><div><h1 class="title"><a id="changing_symbols_and_organizing_your_dev"/>Changing Symbols and Organizing Your Devices</h1></div></div></div><p><a id="iddle1362" class="indexterm"/><a id="iddle1987" class="indexterm"/><a id="iddle2190" class="indexterm"/><a id="iddle2193" class="indexterm"/><a id="iddle2421" class="indexterm"/>You can change the symbols that are used to represent devices in your workspace and choose where your devices are located in the Devices toolbar. Let’s say you want to change an IOS router’s symbol. To change the symbol of the device, select <span class="strong"><strong>Edit</strong></span> ▸ <span class="strong"><strong>Preferences</strong></span> on Linux and Windows or select <span class="strong"><strong>GNS3</strong></span> ▸ <span class="strong"><strong>Preferences</strong></span> on OS X. Next, go under the device you want to change, right-click the device icon, and select <span class="strong"><strong>Change symbol</strong></span>, as shown in <a class="xref" href="ch04.html#changing_the_symbol" title="Figure 4-16. Changing the symbol">Figure 4-16</a>.</p><div class="figure"><a id="changing_the_symbol"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00036"/><img src="httpatomoreillycomsourcenostarchimages2208941.png.jpg" alt="Changing the symbol"/></div></div><p class="title">Figure 4-16. Changing the symbol</p></div><p>You can change the symbol for IOU devices, VirtualBox virtual machines, and QEMU virtual machines in the same way. The Symbol selection window, as shown in <a class="xref" href="ch04.html#symbol_selection_and_device_category" title="Figure 4-17. Symbol selection and device category">Figure 4-17</a>, should appear after you click <span class="strong"><strong>Change symbol</strong></span>.</p><div class="figure"><a id="symbol_selection_and_device_category"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00037"/><img src="httpatomoreillycomsourcenostarchimages2208943.png.jpg" alt="Symbol selection and device category"/></div></div><p class="title">Figure 4-17. Symbol selection and device category</p></div><p><a id="iddle1575" class="indexterm"/><a id="iddle1834" class="indexterm"/><a id="iddle2120" class="indexterm"/><a id="iddle2191" class="indexterm"/><a id="iddle2242" class="indexterm"/><a id="iddle2250" class="indexterm"/>To change a device symbol, scroll down in the Symbol selection window and select the symbol you want to use. Next, use the drop-down menu to choose a category. This is the category where the device will be placed in the Devices toolbar. The categories include Switches, Routers, End Devices, and Security Devices. When you’re finished, click <span class="strong"><strong>OK</strong></span> to complete the change.</p></div><div class="sect1" title="Final Thoughts"><div class="titlepage"><div><div><h1 class="title"><a id="final_thoughts-id00009"/>Final Thoughts</h1></div></div></div><p>In this chapter, you learned the basics of setting up a GNS3 network, so now is a good time to create a few labs and practice what you’ve learned. If you’re studying for a Cisco certification, spending as much hands-on time as possible with Cisco gear is the only way to gain enough experience to pass the exams. (They’re tough!)</p><p>Start by creating the network in <a class="xref" href="ch04.html#screen_layout_showing_two_routers_and_a" title="Figure 4-1. Screen layout showing two routers and a switch in the GNS3 workspace">Figure 4-1</a>. After creating the topology, log on to the routers, configure their interfaces, and try pinging between them. Simulate a failure and recovery by using the suspend and resume feature or by starting and stopping a device. Once you’ve explored some IOS commands and GNS3 features, try creating a simple CCNA lab with three or more routers; there are plenty of CCNA and CCNP example labs online.</p><p>One last word of caution: if you create large topologies that use multi-protocol routing, you might find that you have to increase your router’s protocol timers to prevent your interfaces from repeatedly going up and down. (It’s rare, but it does happen sometimes.) The problem is caused by the inherent effects of latency within Dynamips. Serial connections are another common problem area; some router images can be flaky when running on emulated serial ports. If you find a router’s serial port is acting up by either crashing your router or flapping the connection, try another router model or different IOS image. In general, c36xx, c37xx, and 7200 IOS images are the most stable with Dynamips and should be used whenever possible.</p><p>In <a class="xref" href="ch05.html" title="Chapter 5. Integrating Hosts and Using Wireshark">Chapter 5</a>, you’ll explore the basics of capturing network packets with Wireshark and expanding your networks by adding hosts using VPCS, VirtualBox, and Linux.</p></div></div></body></html>