<html><head></head><body>
<h2 class="h2" id="ch12"><a id="page_135"/><strong>12</strong></h2>
<p class="h2a"><strong>2D TRANSFORMATIONS</strong></p>
<div class="image"><img alt="Image" src="graphics/common-01.jpg"/></div>
<p class="noindentt">Because of the way HTML works, with each element composed of rectangular blocks and right-angled corners, web pages have traditionally appeared boxy, with lots of straight horizontal and vertical lines, and the only way to provide any variation to this rule was to use images. But back in 2008, the WebKit team proposed a new module that allows elements to be rotated, scaled, skewed, and generally messed around with. This module was adopted for standardization by the W3C and formalized as the 2D Transformations Module (<em><a href="http://www.w3.org/TR/css3-2d-transforms/">http://www.w3.org/TR/css3-2d-transforms/</a></em>).</p>
<p class="indent">Much of the process for transforming elements was adapted from functions in the <em>Scalable Vector Graphics (SVG)</em> language, which is used for drawing two-dimensional vector images. SVG is supported by most modern browsers, so Firefox and Opera were quick to implement 2D Transformations in their own products, and IE9 followed along shortly.</p>
<p class="indent">The transformation properties for CSS and SVG were so similar, in fact, that the W3C decided to merge them into a single common specification, CSS Transforms (<em><a href="http://dev.w3.org/csswg/css-transforms/">http://dev.w3.org/csswg/css-transforms/</a></em>), which is where <a id="page_136"/>work on the module continues today. The long and the short of this story is that, although the CSS Transforms module is still only a Working Draft, the properties within it are well implemented, and you can start using these new features right away.</p>
<p class="indent">One thing to note before I introduce the syntax: By the end of this chapter, I’ll have introduced some fairly complex functions, so you might want to brush up on your trigonometry. Are you nervous? Don’t worry; I’ll make it as painless as possible.</p>
<h3 class="h3" id="ch12leve1sec135"><strong>The transform Property</strong></h3>
<p class="noindent">A range of different transformations can be applied, but all are declared as functions in the <code>transform</code> property. Here’s the basic syntax:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: <span class="codeitalic">function</span>(<span class="codeitalic">value</span>); }</pre>
<p class="indent">A number of possible functions are available; I’ll explore each in turn throughout the rest of this chapter. Each function takes either a single value or a comma-separated list of values. I’ll also explain what this means when I discuss each function individually.</p>
<p class="indent">You can apply multiple transformations to a single element by simply listing functions, space-separated, in the <code>transform</code> property:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: <span class="codeitalic">function</span>(<span class="codeitalic">value</span>) <span class="codeitalic">function</span>(<span class="codeitalic">value</span>); }</pre>
<p class="indent">You need to be aware of one very important caveat when using the <code>transform</code> property, but before I talk about that, I need to introduce the various functions. I urge you, however, to not skip “<a href="ch12.html#ch12leve1sec146">An Important Note About Transformation Functions</a>” on <a href="ch12.html#page_144">page 144</a>.</p>
<h4 class="h4" id="ch12leve1sec136"><strong><em>rotate</em></strong></h4>
<p class="noindent">Probably the simplest of all the functions is <code>rotate()</code>, which does what it sounds like it should do: It rotates the element around a set point. Here’s the syntax:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: rotate(<span class="codeitalic">value</span>); }</pre>
<p class="indent">The <code><em>value</em></code> here is a single angle value, just like you used with the CSS gradients introduced in <a href="ch11.html#ch11">Chapter 11</a>. And, as in that chapter, I’m sticking with the commonly understood degrees (<code>deg</code>) unit for my examples.</p>
<p class="indent">To show you <code>rotate()</code> in action, I’ll rotate an <code>h2</code> element by −15 degrees (or 345 degrees) using this rule:</p>
<pre class="programs">h2 { transform: rotate(-15deg); }</pre>
<div class="sidebar">
<p class="sidebart"><a id="page_137"/><strong>BROWSER SUPPORT FOR 2D TRANSFORMATIONS</strong></p>
<p class="noindent">As I mentioned in the beginning of the chapter, browser support for 2D transforms is pretty widespread, although not all browsers support the <code>transform</code> property without a vendor prefix. IE9, Safari, and older versions of the Android browser all require a prefix, which means that to use this property currently, you have to specify it three times:</p>
<pre class="programs"><span class="codeitalic">E</span> {<br/>   -ms-transform: <span class="codeitalic">function</span>(<span class="codeitalic">value</span>); /* IE9 */<br/>   -webkit-transform: <span class="codeitalic">function</span>(<span class="codeitalic">value</span>); /* WebKit */<br/>   transform: <span class="codeitalic">function</span>(<span class="codeitalic">value</span>);<br/>}</pre>
</div>
<p class="indent">You can see how this example displays in <a href="ch12.html#ch12fig1">Figure 12-1</a>. Note that I positioned another <code>h2</code> element with a light gray background in the same place as the first one so you can compare the rotated element with the default (nonrotated) element. I’ll do the same for most examples in this chapter.</p>
<div class="image"><img alt="Image" src="graphics/f12-01.jpg"/></div>
<p class="figuret"><a id="ch12fig1"/><em>Figure 12-1: An element rotated by −15 degrees</em></p>
<h5 class="h5" id="ch12leve1sec137"><strong>Position in Document Flow</strong></h5>
<p class="noindent">An important point to make before I move on: Transformed elements only affect visual rendering of the page, not document layout. The element itself retains its place in the document flow, so all subsequent elements are affected by it and its margin and padding. The transformed element does not affect the page layout but appears as if it were in a new layer above the rest of the page, which means it can cover subsequent elements.</p>
<p class="indent">To illustrate what I mean, I’ll rotate another element, but this time flow some text under it so you can see the effect of the transformation. Here’s the code to rotate the element:</p>
<pre class="programs">h2 { transform: rotate(-10deg); }</pre>
<p class="indent"><a id="page_138"/><a href="ch12.html#ch12fig2">Figure 12-2</a> shows the results of this transformation, along with an untransformed reference. Both examples are identical, but for the applied <code>rotate()</code> function. You can clearly see the rotated element covers the text under it, which immediately follows the non-transformed element in the layout. This same rule applies to any element that has the <code>transform</code> property applied to it, so be aware of this going forward.</p>
<div class="image"><img alt="Image" src="graphics/f12-02.jpg"/></div>
<p class="figuret"><a id="ch12fig2"/><em>Figure 12-2: The effect of a transformed element on the document flow</em></p>
<h5 class="h5" id="ch12leve1sec138"><strong>transform-origin</strong></h5>
<p class="noindent">The <em>origin</em> of a transformation is the point on an element about which that transformation happens. This concept is easiest to illustrate using <code>rotate()</code>, although you can apply it to any of the transformation functions introduced throughout the rest of this chapter.</p>
<p class="indent">In the case of <code>rotate()</code>, you can visualize the origin by imagining you have a piece of paper (the element) and a pin (the origin of that element). If you use the pin to stick the paper to a flat surface, you can rotate the paper around the pin. By sticking the pin in different places on the paper, you can change how the rotation happens—if the pin is stuck in the center of the paper, the rotation has a short radius, and the paper on either side of the pin moves equally; if the pin is placed at one edge, the whole length of the paper rotates around it. <a href="ch12.html#ch12fig3">Figure 12-3</a> illustrates how this might look.</p>
<div class="image"><img alt="Image" src="graphics/f12-03.jpg"/></div>
<p class="figuret"><a id="ch12fig3"/><em>Figure 12-3: Rotating a sheet of paper around a pin: Moving the pin changes the point of rotation.</em></p>
<p class="indent"><a id="page_139"/>The default point of origin in the CSS <code>transform</code> property is the element’s horizontal and vertical center. You can change this using the <code>transform-origin</code> property:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform-origin: <span class="codeitalic">value;</span> }</pre>
<p class="indent">The <code><em>value</em></code> for this property is either one or two length, percentage, or keyword values. Lengths can be any accepted CSS unit (em, px, and so on). The keywords are <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code>, and <code>center</code>. If two values are supplied, the first sets the horizontal point and the second sets the vertical; if only one is supplied, that point sets the horizontal, with the vertical presumed to be <code>center</code> (or 50 percent).</p>
<p class="indent">So if you want to change the point of origin to the top-left corner, you can use either of the following:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform-origin: 0 0; }<br/><span class="codeitalic">E</span> { transform-origin: left top; }</pre>
<p class="indent">And if you want the point of origin to be the bottom-right corner, you can use these values (let’s say the element has a <code>height</code> of 50px and a width of 200px):</p>
<pre class="programs"><span class="codeitalic">E</span> { transform-origin: 200px 50px; }<br/><span class="codeitalic">E</span> { transform-origin: 100% 100%; }<br/><span class="codeitalic">E</span> { transform-origin: right bottom; }</pre>
<p class="indent">Let me demonstrate the effects of changing the origin of transformation. This example shows three identical elements with the same <code>transform</code> property applied to each but with a different <code>transform-origin</code> value:</p>
<pre class="programs">h2 { transform: rotate(-10deg); }<br/>h2.example-1 { transform-origin: left center; }<br/>h2.example-2 { transform-origin: 100% 50%; }</pre>
<p class="indent">You can see the effects on the three examples in <a href="ch12.html#ch12fig4">Figure 12-4</a>. The first example uses the default values (<code>center center</code>), so the element rotates around the absolute center. The second example uses values of <code>left center</code>, so the element rotates around the vertical center of the left-hand side. And the third example uses values of <code>100% 50%</code>, so the element rotates around the vertical center of the right-hand side.</p>
<div class="image"><img alt="Image" src="graphics/f12-04.jpg"/></div>
<p class="figuret"><a id="ch12fig4"/><em>Figure 12-4: Different</em> <code><em>transform-origin</em></code> <em>values on a rotated element</em></p>
<h4 class="h4" id="ch12leve1sec139"><a id="page_140"/><strong><em>translate</em></strong></h4>
<p class="noindent">The next function we’ll look at is <code>translate</code>, which moves the element from its default position along the horizontal or vertical axes (if you need a refresher, refer to “<a href="ch06.html#ch06leve1sec69">Understanding Axes and Coordinates</a>” on <a href="ch06.html#page_64">page 64</a>). Movement along the horizontal axis is controlled with the <code>translateX()</code> function and along the vertical axis with <code>translateY()</code>:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: translateX(<span class="codeitalic">value</span>) translateY(<span class="codeitalic">value</span>); }</pre>
<p class="indent">Each of these two functions, <code>translateX()</code> and <code>translateY()</code>, moves the element along the appropriate axis for the length that you specify. You can use any length units or percentage values here, so, for example, you could have:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: translateX(20px) translateY(15%); }</pre>
<p class="indent">This code moves the element 20px to the right (along the <em>x</em>-axis) and 15 percent of its own height down (along the <em>y</em>-axis). You can see this result in <a href="ch12.html#ch12fig5">Figure 12-5</a>.</p>
<div class="image"><img alt="Image" src="graphics/f12-05.jpg"/></div>
<p class="figuret"><a id="ch12fig5"/><em>Figure 12-5: An element positively translated along both axes</em></p>
<p class="indent">You can also use negative values in the <code>translate</code> functions, which moves the element in the opposite direction along the axis—that is, up or to the left.</p>
<p class="note"><strong><small>NOTE</small></strong><br/><em>You might think translating elements seems similar to using relative positioning and the</em> <code><em>left</em></code> <em>and</em> <code><em>top</em></code> <em>properties, but remember that the transformed element retains its position in the document flow and only</em> appears <em>to have moved; the visual rendering of the element is transformed, not the element itself.</em></p>
<h5 class="h5" id="ch12leve1sec140"><strong>The translate() Shorthand Function</strong></h5>
<p class="noindent">A more convenient way to move elements along both axes like this is to use the shorthand function, <code>translate()</code>. This function accepts up to two values in a comma-separated list:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: translate(<span class="codeitalic">translateX()</span>,<span class="codeitalic">translateY()</span>); }</pre>
<p class="indent"><a id="page_141"/>That being the case, you could replicate the transformation shown in <a href="ch12.html#ch12fig5">Figure 12-5</a> using the shorthand function with two arguments:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: translate(20px,15%); }</pre>
<p class="indent">And you are allowed to use only one value with the <code>translate()</code> shorthand:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: translate(20px); }</pre>
<p class="indent">In this case, the value provided is presumed to be the <code>translateX()</code> value, and a value of <code>0</code> (zero) is used for <code>translateY()</code>. So both of the following declarations are equivalent:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: translate(20px,0); }<br/><span class="codeitalic">E</span> { transform: translate(20px); }</pre>
<h5 class="h5" id="ch12leve1sec141"><strong>Using the translate() Function</strong></h5>
<p class="noindent">To illustrate how the <code>translate()</code> shorthand function works, here are two more examples:</p>
<pre class="programs">h2.translate-1 { transform: translate(-20px,20px); }<br/>h2.translate-2 { transform: translate(20px,-20px); }</pre>
<p class="indent">You can see the results of this code displayed in <a href="ch12.html#ch12fig6">Figure 12-6</a>, again with elements in a lighter gray showing the original position.</p>
<div class="image"><img alt="Image" src="graphics/f12-06.jpg"/></div>
<p class="figuret"><a id="ch12fig6"/><em>Figure 12-6: Elements showing effects of different values in the</em> <code><em>translate()</em></code> <em>function</em></p>
<p class="indent">In the first example, the <code>translate()</code> function has an initial argument of −20px and a second of 20px, so the element is translated 20px negatively on the horizontal axis (to the left) and 20px positively on the vertical axis (to the bottom). The second example has the opposite arguments, so the element is moved positively on the horizontal axis (to the right) and negatively on the vertical axis (to the top).</p>
<h4 class="h4" id="ch12leve1sec142"><a id="page_142"/><strong><em>scale</em></strong></h4>
<p class="noindent">You can make an element larger or smaller than the original by using <code>scale</code> functions. As with the <code>translate</code> functions, each of the horizontal and vertical values has a function, called <code>scaleX()</code> and <code>scaleY()</code>, respectively:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: scaleX(<span class="codeitalic">value</span>) scaleY(<span class="codeitalic">value</span>); }</pre>
<p class="indent">The <code>value</code>s for <code>scaleX()</code> and <code>scaleY()</code> are unitless numbers, which give a size ratio. The default size is 1; twice the default is 2, half the default is 0.5, and so on. You can also use negative numbers—I’ll explain the effect of negative numbers shortly.</p>
<p class="indent">To double an element’s original size on both axes, you use:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: scaleX(2) scaleY(2); }</pre>
<p class="indent">A shorthand function, <code>scale()</code>, is also available. Note, however, that unlike the <code>translate()</code> shorthand function, if only one value is provided, the other is presumed to be identical. Using the previous example, you could opt instead for the shorthand:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: scale(2); }</pre>
<p class="indent">I’ll demonstrate <code>scale</code> in action with a few examples. Here’s the code:</p>
<pre class="programs">h2.transform-1 { transform: scale(0.5); }<br/>h2.transform-2 { transform: scaleX(0.5); }<br/>h2.transform-3 { transform: scale(1,-1); }</pre>
<p class="indent">The results are shown in <a href="ch12.html#ch12fig7">Figure 12-7</a>. The first example has a <code>scale</code> value of 0.5, so the transformed element is half the size of the original—remember I specified only one value in the shorthand, so the other is presumed to be equal. In the second example, I used 0.5 as a value but this time for the <code>scaleX()</code> function, meaning the transformed element is the same height as the original but only half the width.</p>
<div class="image"><img alt="Image" src="graphics/f12-07.jpg"/></div>
<p class="figuret"><a id="ch12fig7"/><em>Figure 12-7: The effects of different values in the</em> <code><em>scale</em></code> <em>function</em></p>
<p class="indent">In the final example, I supplied two values to the <code>scale()</code> shorthand: The first is <code>1</code> (one), which sets the horizontal size to be the same as the original, but the second is <code>–1</code> (negative one). Using a negative value has the effect of flipping the element vertically, creating a “reflection” of the original element at the same scale.</p>
<h4 class="h4" id="ch12leve1sec143"><a id="page_143"/><strong><em>skew</em></strong></h4>
<p class="noindent">To <em>skew</em> an element is to alter the angle of its horizontal or vertical axis (or both axes). As with <code>translate()</code> and <code>scale()</code>, each axis has an individual function—this time called <code>skewX()</code> and <code>skewY()</code>.</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: skewX(<span class="codeitalic">value</span>) skewY(<span class="codeitalic">value</span>);}</pre>
<p class="indent">The arguments for the <code>skew</code> functions are angle values; I use degrees in my examples. Negative values are permitted. I’ll give you three demonstrations, using this code, to show you how they work:</p>
<pre class="programs">h2.transform-1 { transform: skewX(15deg); }<br/>h2.transform-2 { transform: skewY(5deg); }<br/>h2.transform-3 { transform: skewX(15deg) skewY(-15deg); }</pre>
<p class="indent">The results are illustrated in <a href="ch12.html#ch12fig8">Figure 12-8</a>.</p>
<div class="image"><img alt="Image" src="graphics/f12-08.jpg"/></div>
<p class="figuret"><a id="ch12fig8"/><em>Figure 12-8: Elements transformed by different values in the</em> <code><em>skew</em></code> <em>function</em></p>
<p class="indent">In the first example, the element is skewed by 15 degrees along its <em>x</em>-axis, causing the vertical edges to slope diagonally. In the second example, the skew is by 5 degrees on the <em>y</em>-axis, so the horizontal edges slope diagonally whereas the vertical edges remain unchanged. The final example shows the effect of two values being applied: 15 degrees on the <em>x</em>-axis and −15 degrees on the <em>y</em>-axis, so the element is sloped on both axes.</p>
<h5 class="h5" id="ch12leve1sec144"><strong>Rotating with skew</strong></h5>
<p class="noindent">By looking at the last example in the previous code block, you can see it’s possible to replicate the <code>rotate()</code> function using <code>skew</code>. To do this, the angle that you want to rotate the element by is given as a value to <code>skewX()</code> and the inverse value to <code>skewY()</code>; that is, if <code>skewX()</code> is 15 degrees, then <code>skewY()</code> should be −15 degrees, and vice versa. Therefore, the two functions in this code example perform the same job:</p>
<pre class="programs"><span class="codeitalic">E</span> {<br/>    transform: rotate(15deg);<br/>    transform: skewX(15deg) skewY(-15deg);<br/>}</pre>
<p class="indent">You’ll find this information useful when I introduce the <code>matrix()</code> function later in this chapter.</p>
<h5 class="h5" id="ch12leve1sec145"><a id="page_144"/><strong>The skew() Shorthand Function</strong></h5>
<p class="noindent">The CSS Transforms module and various online sources also list a shorthand <code>skew()</code> function that accepts the two individual <code>skew</code> functions as values (in the same way that <code>translate()</code> accepts the <code>translate</code> functions):</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: skew(<span class="codeitalic">skewX()</span>,<span class="codeitalic">skewY()</span>); }</pre>
<p class="indent">I highly recommend, however, you don’t use this function, as for some arcane mathematical reasons, which I don’t understand, it’s considered redundant. It’s only defined for legacy purposes; the shorthand function was implemented in some older browsers before the redundancy was noticed. If you require skew on both axes, use <code>skewX()</code> and <code>skewY()</code> instead.</p>
<h3 class="h3" id="ch12leve1sec146"><strong>An Important Note About Transformation Functions</strong></h3>
<p class="noindent">When you set the value of the <code>transform</code> property, any functions that you don’t list will be presumed to be reset to their default values. To see what I mean, take a look at this CSS snippet where a rule is applied to a <code>div</code> selector to rotate and scale it and another to a <code><em>.foo</em></code> selector to rotate it with a different value argument:</p>
<pre class="programs">div { transform: rotate(5deg) scale(2); }<br/>.<span class="codeitalic">foo</span> { transform: rotate(10deg); }</pre>
<p class="indent">If these rules were applied to a <code>div</code> with a class of <code>.<em>foo</em></code>, the element would be only rotated by 10 degrees and not scaled; as the <code>scale()</code> function is not specified, its value argument is treated as the default, <code>0deg</code>. To apply both properties, you have to update the code to include the <code>scale()</code> function in the rule applied to <code><em>.foo</em></code>:</p>
<pre class="programs">div { transform: rotate(5deg) scale(2); }<br/>.<span class="codeitalic">foo</span> { transform: rotate(10deg) scale(2); }</pre>
<h3 class="h3" id="ch12leve1sec147"><strong>Transforming Elements with Matrices</strong></h3>
<p class="noindent">Each of the transformation functions used in this chapter so far can also be expressed as a <em>transformation matrix</em>. Rather than explaining the theory behind transformation matrices (which is quite complex and could easily be a chapter of its own), I’ll just show you how they can be applied to elements in CSS through use of the <code>matrix()</code> function.</p>
<p class="indent">I’ll keep the explanation as simple as possible and just give you the practical basics. If you really want to dig into the theory, I suggest you read the W3C’s explanation in the SVG 1.1 module (<em><a href="http://www.w3.org/TR/SVG/coords.html#TransformMatrixDefined/">http://www.w3.org/TR/SVG/coords.html#TransformMatrixDefined/</a></em>).</p>
<p class="indent"><a id="page_145"/>The 2D transformation matrices, and the <code>matrix()</code> function, accept six values, the combination of which can be used to create the functions introduced already in this chapter. Here’s the syntax:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(<span class="codeitalic">a</span>,<span class="codeitalic">b</span>,<span class="codeitalic">c</span>,<span class="codeitalic">d</span>,<span class="codeitalic">X</span>,<span class="codeitalic">Y</span>); }</pre>
<p class="indent">All of the default values are 0 (zero), and they behave slightly differently depending on which values are supplied—I’ll explain what this means as I go along. I said that you can perform all of the functions introduced so far in this chapter with <code>matrix()</code>, but the process is not quite that simple—you need to know some trigonometry first.</p>
<p class="indent">Before getting to the hard stuff, I’ll start with something simple that doesn’t require any trig: scaling. If you want to scale an element, you can use <code><em>a</em></code> and <code><em>d</em></code> to equate to <code>scaleX()</code> and <code>scaleY()</code> and set values accordingly, leaving <code><em>b</em></code> and <code><em>c</em></code> at 0. Therefore, to double an element’s size, you use:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(2,0,0,2,0,0); }</pre>
<p class="indent">You can also translate an element with <code>matrix()</code> by providing horizontal and vertical offset values to <code><em>X</em></code> and <code><em>Y</em></code> (respectively). These values are unitless numbers, which represent pixel values (on HTML elements, anyway; in SVG, they are vector point values). That being the case, to double an element’s size and offset it by 15px both vertically and horizontally, you use this code:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(2,0,0,2,15,15); }</pre>
<p class="indent">If you want to skew an element using <code>matrix()</code>, well, this is where it becomes a lot more complex—here’s where I need to introduce the trigonometric functions. You can read a full explanation of these functions on Wikipedia (<em><a href="http://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine_and_tangent/">http://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine_and_tangent/</a></em>), but the following is a quick and dirty summary: The trigonometric functions are ratio values used to calculate angles in a triangle.</p>
<p class="indent">The first trigonometric function I’ll use is <em>tan (tangent)</em>, which is required to skew an element along the <em>x</em>- or <em>y</em>-axis. Referring to the original <code>matrix</code> syntax, the <em>x</em>-axis is supplied as a value to <code><em>b</em></code> and the <em>y</em> as a value to <code><em>c</em></code>. Here’s the syntax for each:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(1,<span class="codeitalic">tan</span>(<span class="codeitalic">angle</span>),0,1, <span class="codeitalic">X</span>,<span class="codeitalic">Y</span>); } /* X Axis */<br/><span class="codeitalic">E</span> { transform: matrix(1,0,<span class="codeitalic">tan</span>(<span class="codeitalic">angle</span>),1, <span class="codeitalic">X</span>,<span class="codeitalic">Y</span>); } /* Y Axis */</pre>
<p class="indent">The <code><em>angle</em></code> refers to the degrees (counterclockwise) of the angle you want to skew by. If you want to skew an element by 15 degrees, the value you’re looking for is the tangent of 15. So whip out your scientific calculator—if you don’t own one, your operating system’s calculator should have a scientific mode—and get the result that <code>tan(15) = 0.27</code>. This result is what you provide to the <code>matrix</code> function. For example, if you want the skew to be along the <em>x</em>-axis, you use this syntax:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(1,0.27,0,1,0,0); }</pre>
<p class="note"><a id="page_146"/><strong><small>NOTE</small></strong> <em>As I’m using degrees in my examples, make sure your calculator’s trigonometric type is set to</em> degrees <em>if you want to follow along. If you prefer working in gradians or radians, you can update all of these examples accordingly.</em></p>
<p class="indent">As mentioned, skew functions can also be used to rotate an element—and you can do the same with <code>matrix()</code>. This time you have to make use of the <em>sin (sine)</em> and <em>cos (cosine)</em> trigonometric functions. To rotate an element, the <code>matrix()</code> syntax is:</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(<span class="codeitalic">cos(angle)</span>,<span class="codeitalic">sin(angle)</span>,<span class="codeitalic">-sin(angle)</span>,<span class="codeitalic">cos(angle)</span>,<span class="codeitalic">X</span>,<span class="codeitalic">Y</span>); }</pre>
<p class="indent">Note that <code><em>a</em></code> and <code><em>d</em></code> take the same value, and <code><em>b</em></code> and <code><em>c</em></code> take inverse values (if <code><em>b</em></code> is a positive value, <code><em>c</em></code> is the negative of the same value, and vice versa). Once again, <code><em>angle</em></code> refers to the degrees of the angle you want to rotate the element by. To rotate by 60 degrees, you go back to your scientific calculator and calculate the cos and sin of 60. My calculator tells me that <code>cos(60) = 0.5</code> and <code>sin(60) = 0.87</code>, so the required code is</p>
<pre class="programs"><span class="codeitalic">E</span> { transform: matrix(0.5,0.87,-0.87,0.5,0,0); }</pre>
<p class="indent">Now let’s look at a few examples. Here’s the code I’ll use:</p>
<pre class="programs">h2.transform-1 { transform: matrix(1,0,0,-1,0,0); }<br/>h2.transform-2 { transform: matrix(1,0,0.268,1,-10,-20); }<br/>h2.transform-3 { transform: matrix(0.98,-0.17,0.17,0.98,0,0); }</pre>
<p class="indent">The output is shown in <a href="ch12.html#ch12fig9">Figure 12-9</a>.</p>
<div class="image"><img alt="Image" src="graphics/f12-09.jpg"/></div>
<p class="figuret"><a id="ch12fig9"/><em>Figure 12-9: Examples of transformations made with the</em> <code><em>matrix</em></code> <em>function</em></p>
<p class="indent">In the first example, I’ve flipped the element vertically, as I did earlier using <code>scale()</code> in <a href="ch12.html#ch12fig7">Figure 12-7</a>. In the next example, I’ve skewed the element by 15 degrees along the <em>y</em>-axis (after calculating that <code>tan(15) = 0.268</code>) and translated it along both axes. The final example shows the element rotated by 10 degrees; the values are the results of the calculations I showed you previously: <code>cos(10) = 0.98</code> and <code>sin(10) = 0.17</code>. As mentioned, the <code>sin</code> value is negative in position <code><em>b</em></code> and positive in position <code><em>c</em></code>, which makes the rotation uniform.</p>
<p class="indent"><a id="page_147"/>I know this is all quite complex, but hopefully I’ve simplified it enough for you to understand, without making it seem so easy you can’t see the scope for great flexibility—as long as you keep your scientific calculator with you at all times! And if this does seem overly complex, and you’re having trouble understanding it, remember you can perform all of these transformations using the individual functions, so you can happily forget about <code>matrix</code> and trigonometry, too, if you wish.</p>
<h3 class="h3" id="ch12leve1sec148"><strong>Summary</strong></h3>
<p class="noindent">This chapter has introduced the most complex property so far: the <code>matrix()</code> function. Although some might be tempted to say that if you want to perform complex operations, you have to deal with complex syntax, I think the other functions in this chapter do a good job of translating that complexity into something simple. Just remember, easier options are always available if you get fed up with <code>matrix()</code>.</p>
<p class="indent">This chapter has also introduced some of the most revolutionary properties so far—just a few years ago the notion that you could rotate, skew, and scale elements was just a pipe dream, but today you can do just that. And if you think what you’ve seen in this chapter is impressive, wait until the next one. I’m going to show you how to add an extra dimension—literally—to your transformation effects.</p>
<h3 class="h3" id="ch12leve1sec149"><strong>2D Transformations: Browser Support</strong></h3>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td class="table2a" valign="top"><p class="table"/></td>
<td class="table2a" valign="top"><p class="table"><strong>Chrome</strong></p></td>
<td class="table2a" valign="top"><p class="table"><strong>Firefox</strong></p></td>
<td class="table2a" valign="top"><p class="table"><strong>Safari</strong></p></td>
<td class="table2a" valign="top"><p class="table"><strong>IE</strong></p></td>
</tr>
<tr>
<td class="table2" valign="top"><p class="table">2D transformations</p></td>
<td class="table2" valign="top"><p class="table">Yes</p></td>
<td class="table2" valign="top"><p class="table">Yes</p></td>
<td class="table2" valign="top"><p class="table">Yes<sup><a id="footnote_28a"/><a href="ch12.html#footnote28a">*</a></sup></p></td>
<td class="table2" valign="top"><p class="table">IE9<a href="ch12.html#footnote28a">*</a>, IE10</p></td>
</tr>
</table>
<p class="footnote"><a id="footnote28a"/><a href="ch12.html#footnote_28a">*</a> With vendor prefix</p>
</body></html>