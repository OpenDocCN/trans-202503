<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><section>
<header>
<h1 class="chapter">
<span class="ChapterNumber"><span epub:type="pagebreak" title="9" id="Page_9"/><a class="XrefDestination" id="2"/><span class="XrefDestination" id="xref-503007c02-001"/>2</span><br/>
<span class="ChapterTitle"><a class="XrefDestination" id="creatingDatabasesandTables"/><span class="XrefDestination" id="xref-503007c02-002"/>Creating Databases and Tables</span></h1>
</header>
<figure class="opener">
<img src="image_fi/book_art/chapterart.png" alt="" width="200" height="200"/>
</figure>
<p class="ChapterIntro">In this chapter, you’ll use MySQL Workbench to view and create databases in MySQL. Then you’ll learn how to create tables to store data in those databases. You’ll define the name of the table and its columns and specify the type of data that the columns can contain. Once you’ve practiced these basics, you’ll improve your tables using two helpful MySQL features, constraints and indexes.</p>
<h2 id="h1-503007c02-0001"><a class="XrefDestination" id="UsingMySQLWorkbench"/><span class="XrefDestination" id="xref-503007c02-003"/>Using MySQL Workbench</h2>
<p class="BodyFirst">As you learned in <a class="xref" href="c01.xhtml">Chapter 1</a>, MySQL Workbench is a visual tool you can use to enter and run SQL commands and view their results. Here, we’ll walk through the basics of how to use MySQL Workbench to view databases.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<span epub:type="pagebreak" title="10" id="Page_10"/><h2><span class="NoteHead">Note</span></h2>
<p>	If you’re using another tool, such as PhpMyAdmin, MySQL Shell, or the MySQL command line client, be sure to read through this section anyway. The MySQL commands are the same regardless of the tool you use to connect to MySQL.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>You’ll start by opening MySQL Workbench by double-clicking its icon. The tool looks like <a href="#figure2-1" id="figureanchor2-1">Figure 2-1</a>.</p>
<figure>
<img src="image_fi/503007c02/f02001.png" class="keyline" alt="" width="694" height="425"/>
<figcaption><p><a id="figure2-1">Figure 2-1</a>: Showing databases with MySQL Workbench</p></figcaption>
</figure>
<p>In the top-right panel, enter the <code class="bold">show databases;</code> command. Make sure to include the semicolon, which indicates the end of the statement. Then click the lightning bolt icon, highlighted in <a href="#figure2-1">Figure 2-1</a>, to execute the command. The results, a list of available MySQL databases, appear in the Result Grid panel (your results will look different from mine):</p>
<pre><code>Database
--------
information_schema
location
music
mysql
performance_schema
restaurant
solar_system
subway
sys</code></pre>
<p>Some databases in this list are system databases that were created automatically when MySQL was installed—such as <code>information_schema</code>,<code> mysql</code>, and <code>performance_schema</code>—and others are databases I’ve created. Any databases you create should appear in this list.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="box">
<h2><span epub:type="pagebreak" title="11" id="Page_11"/><a class="XrefDestination" id="DatabaseTerminology"/><span class="XrefDestination" id="xref-503007c02-004"/>Database Terminology</h2>
<p class="BoxBodyFirst">In MySQL, the term <em>schema</em> is synonymous with <em>database</em>. You can use <code>show databases</code> or <code>show schemas</code> to return a list of all of your databases. Notice in <a href="#figure2-1">Figure 2-1</a> that <em>schemas</em> is the term MySQL Workbench uses.</p>
<p>Sometimes the term <em>database</em> gets conflated with <em>database system</em> or <em>relational database management system (RDBMS)</em>. For example, you might hear somebody ask, “Which database are you using, Oracle, MySQL, or PostgreSQL?” What they’re really asking is, “Which database <em>system</em> are you using?” A MySQL database is a place to organize your data, while a database system is software that is used to store and retrieve data.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>You can also browse databases by using the Navigator panel on the left. Click the <b>Schemas</b> tab at the bottom of the panel to show a list of databases, and click the right arrow (<span class="MenuArrow">▶</span>) to investigate the contents of your databases. Note that, by default, the Navigator panel doesn’t show the system databases that were automatically created when MySQL was installed.</p>
<p>Now that you’ve seen how to view the list of databases in MySQL, it’s time to try creating your own.</p>
<h2 id="h1-503007c02-0002"><a class="XrefDestination" id="CreatingaNewDatabase"/><span class="XrefDestination" id="xref-503007c02-005"/>Creating a New Database</h2>
<p class="BodyFirst">To create a new database, you use the <code>create database</code> command along with a name for the database you want to create:</p>
<pre><code>create database circus;

create database finance;

create database music;</code></pre>
<p>Your database’s name should describe the type of data stored there. In this example, the database called <code>circus</code> might contain tables for data on clowns, tightrope walkers, and trapeze acts. The <code>finance</code> database might have tables for accounts receivable, income, and cash flow. Tables of data on bands, songs, and albums might go in the <code>music</code> database.</p>
<p>To remove a database, use the <code>drop database</code> command:</p>
<pre><code>drop database circus;

drop database finance;

drop database music;</code></pre>
<p>These commands remove the three databases you just created, any tables in those databases, and all of the data in those tables.</p>
<p>Of course, you haven’t actually created any tables yet. You’ll do that now.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="boxcustom1">
<h2><span epub:type="pagebreak" title="12" id="Page_12"/>Try it Yourself</h2>
<p class="BoxListNumberCustom1"><b>2-1.</b>	Run <code class="bold">show databases</code> in MySQL Workbench. How many databases do you have?</p>
<p class="BoxListNumberCustom1"><b>2-2.</b>	Using MySQL Workbench, create a database named <code>cryptocurrency</code>. After you have created the database, run the <code class="bold">show databases</code> command. Do you see the new database in your list of databases? How many databases do you have now?</p>
<p class="BoxListNumberCustom1"><b>2-3.</b>	Drop the <code>cryptocurrency</code> database and then run <code class="bold">show databases</code> again. Is the database gone from your list of databases?</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<h2 id="h1-503007c02-0003"><a class="XrefDestination" id="CreatingaNewTable"/><span class="XrefDestination" id="xref-503007c02-007"/>Creating a New Table</h2>
<p class="BodyFirst">In this example, you’ll create a new table to hold global population data and specify what type of data the table can contain:</p>
<pre><code>create database land;

use land;

create table continent
(
   continent_id      int,
   continent_name    varchar(20),
   population        bigint
);</code></pre>
<p>First, you create a database called <code>land</code> using the <code>create database</code> command you saw earlier. On the next line, the <code>use</code> command tells MySQL to use the <code>land</code> database for the SQL statements that follow it. This ensures that your new table will be created in the <code>land</code> database.</p>
<p>Next, you use the <code>create table</code> command followed by a descriptive name for the table, <code>continent</code>. Within parentheses, you create three columns in the <code>continent</code> table—<code>continent_id</code>, <code>continent_name</code>, and <code>population</code>—and for each column you choose a MySQL data type that controls the type of data allowed in that column. Let’s go over this in more detail.</p>
<p>You define the <code>continent_id</code> column as an <code>int</code> so that it will accept integer (numeric) data. Each continent will have its own distinct ID number in this column (1, 2, 3, and so on). Then, you define the <code>continent_name</code> column as a <code>varchar(20)</code> to accept character data up to 20 characters long. Finally, you define the <code>population</code> as a <code>bigint</code> to accept big integers, as the population of an entire continent can be quite a large number.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">Note</span></h2>
<p>	<a class="xref" href="c04.xhtml">Chapter 4</a> covers MySQL data types, including <code>bigint</code>, in more depth.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p><span epub:type="pagebreak" title="13" id="Page_13"/>When you run this <code>create table</code> statement, MySQL creates an empty table. The table has a table name and its columns are defined, but it doesn’t have any rows yet. You can add, delete, and modify the rows in the table whenever you need.</p>
<p>If you try to add a row with data that doesn’t match one of the column’s data types, however, MySQL will reject the entire row. For example, because the <code>continent_id</code> column was defined as an <code>int</code>, MySQL won’t allow that column to store values like <code>Continent #1</code> or <code>A</code> because those values contain letters. MySQL won’t allow you to store a value like <code>The Continent of Atlantis</code> in the <code>continent_name</code> column either, since that value has more than 20 characters.</p>
<h3 id="h2-503007c02-0001"><a class="XrefDestination" id="Constraints"/><span class="XrefDestination" id="xref-503007c02-008"/>Constraints</h3>
<p class="BodyFirst">When you create your own database tables, MySQL allows you to put <em>constraints</em>, or rules, on the data they contain. Once you define constraints, MySQL will enforce them.</p>
<p>Constraints help maintain <em>data integrity</em>; that is, they help keep the data in your database accurate and consistent. For example, you might want to add a constraint to the <code>continent</code> table so that there can’t be two rows in the table with the same value in a particular column.</p>
<p>The constraints available in MySQL are <code>primary key</code>, <code>foreign key</code>, <code>not null</code>, <code>unique</code>, <code>check</code>, and <code>default</code>.</p>
<h4 id="h3-503007c02-0001"><a class="XrefDestination" id="PrimaryKeys"/><span class="XrefDestination" id="xref-503007c02-009"/>Primary Keys</h4>
<p class="BodyFirst">Identifying the primary key in a table is an essential part of database design. A primary key consists of a column, or more than one column, and uniquely identifies the rows in a table. When you create a database table, you need to determine which column(s) should make up the primary key, because that information will help you retrieve the data later. If you combine data from multiple tables, you’ll need to know how many rows to expect from each table and how to join the tables. You don’t want duplicate or missing rows in your result sets.</p>
<p>Consider this <code>customer</code> table with the columns <code>customer_id</code>, <code>first_name</code>, <code>last_name</code>, and <code>address</code>:</p>
<pre><code>customer_id   first_name   last_name   address
-----------   ----------   ---------   ---------------------------
     1        Bob          Smith       12 Dreary Lane
     2        Sally        Jones       76 Boulevard Meugler
     3        Karen        Bellyacher  354 Main Street</code></pre>
<p>To decide what the primary key for the table should be, you need to identify which column(s) uniquely identifies the rows in the table. For this table, the primary key should be <code>customer_id</code>, because every <code>customer_id</code> corresponds to only one row in the table.</p>
<p>No matter how many rows might be added to the table in the future, there will never be two rows with the same <code>customer_id</code>. This can’t be said of any other columns. Multiple people can have the same first name, last name, or address.</p>
<p><span epub:type="pagebreak" title="14" id="Page_14"/>A primary key can be composed of more than one column, but even the combination of the <code>first_name</code>, <code>last_name</code>, and <code>address</code> columns isn’t guaranteed to uniquely identify the rows. For example, Bob Smith at 12 Dreary Lane might live with his son of the same name.</p>
<p>To designate the <code>customer_id</code> column as the primary key, use the <code>primary key</code> syntax when you create the <code>customer</code> table, as shown in <a href="#listing2-1" id="listinganchor2-1">Listing 2-1</a>:</p>
<pre><code>create table customer
(
    customer_id     int,
    first_name      varchar(50),
    last_name       varchar(50),
    address         varchar(100),
    <b>primary key (customer_id)</b>
);</code></pre>
<p class="CodeListingCaption"><a id="listing2-1">Listing 2-1</a>: Creating a primary key</p>
<p>Here you define <code>customer_id</code> as a column that accepts integer values and as the primary key for the table.</p>
<p>Making <code>customer_id</code> the primary key benefits you in three ways. First, it prevents duplicate customer IDs from being inserted into the table. If someone using your database tries to add <code>customer_id</code> <code>3</code> when that ID already exists, MySQL will give an error message and not insert the row.</p>
<p>Second, making <code>customer_id</code> the primary key prevents users from adding a null value (that is, a missing or unknown value) for the <code>customer_id</code> column. When you define a column as the primary key, it’s designated as a special column whose values cannot be null. (You’ll learn more about null values later in this chapter.)</p>
<p>Those two benefits fall under the category of data integrity. Once you define this primary key, you can be assured that all rows in the table will have a unique <code>customer_id</code>, and that no <code>customer_id</code> will be null. MySQL will enforce this constraint, which will help keep the data in your database of a high quality.</p>
<p>The third advantage to creating a primary key is that it causes MySQL to create an index. An index will help speed up the performance of SQL queries that select from the table. We’ll look at indexes more in the <span class="xref" itemid="xref_target_“Indexes”">“Indexes”</span> section later in this chapter.</p>
<p>If a table has no obvious primary key, it often makes sense to add a new column that can serve as the primary key (like the <code>customer_id</code> column shown here). For performance reasons, it’s best to keep the primary key values as short as possible.</p>
<p>Now let’s look at a primary key that consists of more than one column, which is known as a <em>composite key</em>. The <code>high_temperature</code> table shown in <a href="#listing2-2" id="listinganchor2-2">Listing 2-2</a> stores cities and their highest temperature by year.</p>
<pre><code>city                      year   high_temperature
-----------------------   ----   ----------------
Death Valley, CA          2020   130
International Falls, MN   2020   78
<span epub:type="pagebreak" title="15" id="Page_15"/>New York, NY              2020   96
Death Valley, CA          2021   128
International Falls, MN   2021   77
New York, NY              2021   98</code></pre>
<p class="CodeListingCaption"><a id="listing2-2">Listing 2-2</a>: Creating multiple primary key columns</p>
<p>For this table, the primary key should consist of both the <code>city</code> and <code>year</code> columns, because there should be only one row in the table with the same city and year. For example, there’s currently a row for Death Valley for the year 2021 with a high temperature of 128, so when you define <code>city</code> and <code>year</code> as the primary key for this table, MySQL will prevent users from adding a second row for Death Valley for the year 2021.</p>
<p>To make <code>city</code> and <code>year</code> the primary key for this table, use MySQL’s <code>primary key</code> syntax with both column names:</p>
<pre><code>create table high_temperature
(
    city              varchar(50),
    year              int,
    high_temperature  int,
    <b>primary key (city, year)</b>
);</code></pre>
<p>The <code>city</code> column is defined to hold up to 50 characters, and the <code>year</code> and <code>high_temperature</code> columns are defined to hold an integer. The primary key is then defined to be both the <code>city</code> and <code>year</code> columns.</p>
<p>MySQL doesn’t require you to define a primary key for the tables you create, but you should for the data integrity and performance benefits cited earlier. If you can’t figure out what the primary key should be for a new table, that probably means you need to rethink your table design.</p>
<p>Every table can have at most one primary key.</p>
<h4 id="h3-503007c02-0002"><a class="XrefDestination" id="ForeignKeys"/><span class="XrefDestination" id="xref-503007c02-010"/>Foreign Keys</h4>
<p class="BodyFirst">A foreign key is a column (or columns) in a table that matches the table to the primary key column(s) of another table. Defining a foreign key establishes a relationship between two tables so that you will be able to retrieve one result set containing data from both tables.</p>
<p>You saw in <a href="#listing2-1">Listing 2-1</a> that you can create the primary key in the <code>customer</code> table using the <code>primary key</code> syntax. You’ll use similar syntax to create the foreign key in this <code>complaint</code> table:</p>
<pre><code>create table complaint
    (
    complaint_id  int,
    customer_id   int,
    complaint     varchar(200),
    primary key (complaint_id),
    <b>foreign key (customer_id) references customer(customer_id)</b>
    );</code></pre>
<p><span epub:type="pagebreak" title="16" id="Page_16"/>In this example, first you create the <code>complaint</code> table, define its columns and their data types, and specify <code>complaint_id</code> as the primary key. Then, the <code>foreign key</code> syntax allows you to define the <code>customer_id</code> column as a foreign key. With the <code>references</code> syntax, you specify that the <code>customer_id</code> column of the <code>complaint</code> table references the <code>customer_id</code> column of the <code>customer</code> table (you’ll learn what this means in a moment).</p>
<p>Here’s the <code>customer</code> table again:</p>
<pre><code>customer_id   first_name   last_name   address
-----------   ----------   ---------   ---------------------------
     1        Bob          Smith       12 Dreary Lane
     2        Sally        Jones       76 Boulevard Meugler
     3        Karen        Bellyacher  354 Main Street</code></pre>
<p>And here’s the data for the <code>complaint</code> table:</p>
<pre><code>complaint_id  customer_id  complaint
------------  -----------  -------------------------------
       1            3      I want to speak to your manager</code></pre>
<p>The foreign key allows you to see which customer <code>customer_id 3</code> in the <code>complaint</code> table is referring to in the <code>customer</code> table; in this case, <code>customer_id 3</code> references Karen Bellyacher. This arrangement, illustrated in <a href="#figure2-2" id="figureanchor2-2">Figure 2-2</a>, allows you to track which customers made which complaints.</p>
<figure>
<img src="image_fi/503007c02/f02002.png" class="" alt="" width="643" height="193"/>
<figcaption><p><a id="figure2-2">Figure 2-2</a>: Primary keys and foreign keys</p></figcaption>
</figure>
<p>In the <code>customer</code> table, the <code>customer_id</code> column has been defined as the primary key (labeled PK). In the <code>complaint</code> table, the <code>customer_id</code> column has been defined as a foreign key (FK) because it will be used to join the <code>complaint</code> table to the <code>customer</code> table.</p>
<p>Here’s where things get interesting. Because you defined the foreign key, MySQL won’t allow you to add a new row in the <code>complaint</code> table unless it is for a valid customer—that is, unless there is a <code>customer_id</code> row in the <code>customer</code> table that correlates with a <code>customer_id</code> in the <code>complaint</code> table. If you try to add a row in the <code>complaint</code> table for <code>customer_id</code> <code>4</code>, for example, MySQL will give an error. It doesn’t make sense to have a row in the <code>complaint</code> table for a customer that doesn’t exist, so MySQL prevents the row from being added in order to maintain data integrity.</p>
<p>Also, now that you’ve defined the foreign key, MySQL will not allow you to delete <code>customer_id 3</code> from the <code>customer</code> table. Deleting this ID would leave <span epub:type="pagebreak" title="17" id="Page_17"/>a row in the <code>complaint</code> table for <code>customer_id 3</code>, which would no longer correspond to any row in the <code>customer</code> table. Restricting data deletion is part of referential integrity.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="box">
<h2><a class="XrefDestination" id="DataIntegrityvsReferentialintegrity"/><span class="XrefDestination" id="xref-503007c02-011"/>Data Integrity vs. Referential integrity</h2>
<p class="BoxBodyFirst">Data integrity refers to the overall accuracy and consistency of the data in your database. You want high-quality data. People lose confidence in your data when they spot problems like a salary value that contains alpha characters or a percent increase value over 100 percent.</p>
<p>Referential integrity refers to the quality of the <em>relationships</em> between the data in your tables. If you have a complaint in the <code>complaint</code> table for a customer that doesn’t exist in the <code>customer</code> table, you have a referential integrity problem. By defining <code>customer_id</code> as a foreign key, you can be assured that every <code>customer_id</code> in the <code>complaint</code> table refers to a <code>customer_id</code> that exists in the <code>customer</code> table.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>There can be only one primary key per table, but a table can have more than one foreign key (see <a href="#figure2-3" id="figureanchor2-3">Figure 2-3</a>).</p>
<figure>
<img src="image_fi/503007c02/f02003.png" class="" alt="" width="643" height="574"/>
<figcaption><p><a id="figure2-3">Figure 2-3</a>: A table can have only one primary key, but it can have multiple foreign keys.</p></figcaption>
</figure>
<p><span epub:type="pagebreak" title="18" id="Page_18"/><a href="#figure2-3">Figure 2-3</a> shows an example of a table named <code>dog</code> that has three foreign keys, each pointing to the primary key of a different table. In the <code>dog</code> table, <code>owner_id</code> is a foreign key used to refer to the <code>owner</code> table, <code>breed_id</code> is a foreign key used to refer to the <code>breed</code> table, and <code>veterinarian_id</code> is a foreign key used to refer to the <code>veterinarian</code> table.</p>
<p>As with primary keys, when you create a foreign key, MySQL will automatically create an index that will speed up the access to the table. More on that shortly.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="boxcustom1">
<h2>Try it Yourself</h2>
<p class="BoxListNumberCustom1"><b>2-4.</b>	Create a database called <code>athletic</code> containing a table called <code>sport</code> and a table called <code>player</code>. Define the column names, primary key, and foreign key as shown here.</p>
<figure class="graphic"><img src="image_fi/503007c02/g02001.png" class="" alt="" width="643" height="203"/></figure>
<p class="ListBody">Have all the columns in the tables accept integer values except for <code>player_name</code> and <code>sport_name</code>, which should accept up to 50 characters. The primary key for the <code>player</code> table should be <code>player_id</code>. The primary key for the <code>sport</code> table should be <code>sport_id</code>. The <code>player</code> table should have a foreign key of <code>sport_id</code> that references the primary key of the <code>sport</code> table.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<h4 id="h3-503007c02-0003"><a class="XrefDestination" id="notnull"/><span class="XrefDestination" id="xref-503007c02-013"/>not null</h4>
<p class="BodyFirst">A null value represents an empty or undefined value. It is not the same as zero, an empty character string, or a space character.</p>
<p>Allowing null values in a column can be appropriate in some cases, but other times, permitting the absence of crucial information could result in the database missing data that is needed. Take a look at this table named <code>contact</code> that contains contact information:</p>
<pre><code>contact_id    name          city       phone      email_address
-----------   ----------    ---------  -------    -----------------
     1        Steve Chen    Beijing    123-3123   steve@schen21.org
     2        Joan Field    New York   321-4321   jfield@jfny99.com
     3        Bill Bashful  Lincoln    <b>null</b>       bb@shyguy77.edu</code></pre>
<p><span epub:type="pagebreak" title="19" id="Page_19"/>The value of the <code>phone</code> column for <code>contact_id 3</code> is <code>null</code> because Bill Bashful doesn’t own a phone. It is reasonable that the <code>contact</code> table would allow null values for the <code>phone</code> column, as a phone number might not be available or applicable for a contact.</p>
<p>On the other hand, the <code>name</code> column should not allow null values. It would be better not to allow the following row to be added to the <code>contact</code> table:</p>
<pre><code>contact_id    name          city       phone      email_address
-----------   ----------    ---------  -------    ---------------
     3        null          Lincoln    null       bb@shyguy77.edu</code></pre>
<p>There isn’t much point in saving information about a contact unless you know their name, so you can add a <code>not null</code> constraint to the <code>name</code> column to prevent this situation from occurring.</p>
<p>Create the <code>contact</code> table like so:</p>
<pre><code>create table contact
(
    contact_id     int,
    name           varchar(50) <b>not null</b>,
    city           varchar(50),
    phone          varchar(20),
    email_address  varchar(50),
    primary key(contact_id)
);</code></pre>
<p>Using the <code>not null</code> syntax when you define the <code>name</code> column prevents a value of <code>null</code> from being stored there and maintains data integrity. If you try to add a row with a null name, MySQL will display an error message and the row will be rejected.</p>
<p>For columns defined as the table’s primary key, such as the <code>contact_id</code> column in this example, specifying <code>not null</code> isn’t necessary. MySQL prevents null values for primary key columns automatically.</p>
<h4 id="h3-503007c02-0004"><a class="XrefDestination" id="unique"/><span class="XrefDestination" id="xref-503007c02-014"/>unique</h4>
<p class="BodyFirst">If you want to prevent duplicate values in a column, you can add a <code>unique</code> constraint to the column definition. Let’s return to the <code>contact</code> table from the previous example:</p>
<pre><code>create table contact
(
    contact_id     int,
    name           varchar(50)  not null,
    city           varchar(50),
    phone          varchar(20),
    email_address  varchar(50)  <b>unique</b>,
    primary key(contact_id)
);</code></pre>
<p><span epub:type="pagebreak" title="20" id="Page_20"/>Here, you prevent duplicate email addresses from being entered by using the <code>unique</code> syntax on the <code>email_address</code> column. Now MySQL will no longer allow two contacts in the table to have the same email address.</p>
<h4 id="h3-503007c02-0005"><a class="XrefDestination" id="check"/><span class="XrefDestination" id="xref-503007c02-015"/>check</h4>
<p class="BodyFirst">You can use a <code>check</code> constraint to make sure that a column contains certain values or a certain range of values. For example, let’s revisit the <code>high_temperature</code> table from <a href="#listing2-2">Listing 2-2</a>:</p>
<pre><code>create table high_temperature
(
    city              varchar(50),
    year              int,
    high_temperature  int,
    <b>constraint check (year between 1880 and 2200),</b>
<b>    constraint check (high_temperature &lt; 200),</b>
    primary key (city, year)
);</code></pre>
<p>In this example, you add a <code>check</code> constraint to the <code>year</code> column to make sure that any year entered into the table is between 1880 and 2200. Accurate temperature tracking wasn’t available until 1880, and your database probably won’t be in use after the year 2200. Trying to add a year that is outside of that range would most likely be an error, so the constraint will prevent that from occurring.</p>
<p>You’ve also added a <code>check</code> constraint to the <code>high_temperature</code> column to limit temperature values to less than 200 degrees, because a temperature higher than that would most likely be a data error.</p>
<h4 id="h3-503007c02-0006"><a class="XrefDestination" id="default"/><span class="XrefDestination" id="xref-503007c02-016"/>default</h4>
<p class="BodyFirst">Finally, you can add a <code>default</code> constraint to a column so that if a value isn’t supplied, a default value will be used. Take a look at the following <code>job</code> table:</p>
<pre><code>create table job
(
    job_id     int,
    job_desc   varchar(100),
    shift      varchar(50) <b>default '9-5'</b>,
    primary key (job_id)
);</code></pre>
<p>In this example, you add a <code>default</code> constraint to the <code>shift</code> column, which stores data on work schedules. The default shift is <code>9-5</code>, meaning that if a row doesn’t include any data for the shift column, <code>9-5</code> will be written to the column. If a value for <code>shift</code> is provided, the default won’t be used.</p>
<p>You’ve seen how different constraints can help you improve and maintain the integrity of the data in your tables. Let’s turn now to another MySQL feature that also offers performance benefits to your tables: indexes.</p>
<h3 id="h2-503007c02-0002"><span epub:type="pagebreak" title="21" id="Page_21"/><a class="XrefDestination" id="Indexes"/><span class="XrefDestination" id="xref-503007c02-017"/>Indexes</h3>
<p class="BodyFirst">MySQL lets you create indexes on your tables to speed up the process of retrieving data; in some cases, such as in tables with defined primary or foreign keys, MySQL will create indexes automatically. Just as an index in the back of a book can help you find information without needing to scan each page, indexes help MySQL find data in your tables without having to read every row.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">NOTE</span></h2>
<p>	You’ll see the terms <em>indexes</em> and <em>indices</em> in MySQL resources and documentation. Both are correct; it’s just a matter of individual preference.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>Say you create a <code>product</code> table like so</p>
<pre><code>create table product
(
    product_id      int,
    product_name    varchar(100),
    supplier_id     int
);</code></pre>
<p class="BodyContinued">and you want to make the process of retrieving information about suppliers more efficient. Here’s the syntax to create an index that will do that:</p>
<pre><code>create index product_supplier_index on product(supplier_id);</code></pre>
<p>In this example, you create an index, called <code>product_supplier_index</code>, on the <code>supplier_id</code> column of the <code>product</code> table. Now, when users retrieve data from the <code>product</code> table using the <code>supplier_id</code> column, the index should make that retrieval quicker.</p>
<p>Once you create an index, you won’t need to reference it by name—MySQL will use it behind the scenes. The new index won’t change anything about the way you use the table; it will just speed up access to it.</p>
<p>Although adding indexes can significantly improve performance, it wouldn’t make sense to index every column. Maintaining indexes has a performance cost, and creating indexes that don’t get used can actually decrease performance.</p>
<p>When you create tables, MySQL automatically creates most of the indexes that you’ll need. You don’t need to create indexes for columns that have been defined as primary keys, as foreign keys, or with <code>unique</code> constraints, because MySQL automatically indexes those columns.</p>
<p>Let’s look at how we would create the <code>dog</code> table from <a href="#figure2-3">Figure 2-3</a>:</p>
<pre><code>use pet;

create table dog
(
    dog_id            int,
    dog_name          varchar(50),
    owner_id          int,
    breed_id          int,
<span epub:type="pagebreak" title="22" id="Page_22"/>    veterinarian_id   int,
    primary key (dog_id),
    foreign key (owner_id) references owner(owner_id),
    foreign key (breed_id) references breed(breed_id),
    foreign key (veterinarian_id) references veterinarian(veterinarian_id)
);</code></pre>
<p>The primary key for the table is <code>dog_id</code>, and the foreign keys are <code>owner_id</code>, <code>breed_id</code>, and <code>veterinarian_id</code>. Note that you haven’t created any indexes with the <code>create index</code> command. MySQL has automatically created indexes, however, from the columns labeled as the primary key and the foreign keys. You can confirm this using the <code>show indexes</code> command:</p>
<pre><code>show indexes from dog;</code></pre>
<p>The results are shown in <a href="#figure2-4" id="figureanchor2-4">Figure 2-4</a>.</p>
<figure>
<img src="image_fi/503007c02/f02004.png" class="keyline" alt="" width="844" height="75"/>
<figcaption><p><a id="figure2-4">Figure 2-4</a>: Indexes automatically created by MySQL for the <span class="LiteralInCaption"><code>dog</code></span> table</p></figcaption>
</figure>
<p>You can see in the <code>Column_name</code> column that MySQL automatically created all of the indexes that you need for this table.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">NOTE</span></h2>
<p>	The <code>owner</code>, <code>breed</code>, and <code>veterinarian</code> tables must exist before the dog table gets created. The code to create those tables in the pet database is in <a href="https://github.com/ricksilva/mysql_cc/blob/main/chapter_2.sql" class="LinkURL">https://github.com/ricksilva/mysql_cc/blob/main/chapter_2.sql</a>.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<h2 id="h1-503007c02-0004"><a class="XrefDestination" id="DroppingandAlteringTables"/><span class="XrefDestination" id="xref-503007c02-018"/>Dropping and Altering Tables</h2>
<p class="BodyFirst">To <em>drop</em> a table, which removes the table and all of its data, use the <code>drop table</code> syntax:</p>
<pre><code>drop table product;</code></pre>
<p>Here you tell MySQL to drop the <code>product</code> table you created in the previous section.</p>
<p>To make changes to a table, use the <code>alter table</code> command. You can add columns, drop columns, change a column’s data type, rename columns, rename the table, add or remove constraints, and make other changes.</p>
<p>Try altering the <code>customer</code> table from <a href="#listing2-1">Listing 2-1</a>:</p>
<pre><code>alter table customer add column zip varchar(50);
alter table customer drop column address;
alter table customer rename column zip to zip_code;
alter table customer rename to valued_customer;</code></pre>
<p><span epub:type="pagebreak" title="23" id="Page_23"/>Here you alter the <code>customer</code> table in four ways: you add a column named <code>zip</code> that stores zip codes, remove the <code>address</code> column, rename the <code>zip</code> column to <code>zip_code</code> to make it more descriptive, and change the table name from <code>customer</code> to <code>valued_customer</code>.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">Warning</span></h2>
<p>	If you drop a table, you’ll lose all the data in the table as well.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<h2 id="h1-503007c02-0005"><a class="XrefDestination" id="Summary"/><span class="XrefDestination" id="xref-503007c02-019"/>Summary</h2>
<p class="BodyFirst">In this chapter, you saw how to use MySQL Workbench to run commands and view databases. You created your own database tables and learned how to optimize them using indexes and adding constraints.</p>
<p>In the next chapter, the beginning of Part II of the book, you’ll learn about retrieving data from MySQL tables using SQL, displaying your data in an ordered way, formatting SQL statements, and using comments in SQL.</p>
</section>
</div>
</div>
</body></html>