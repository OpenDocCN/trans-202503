<html><head></head><body><section class="chapter" title="Chapter&#xA0;11.&#xA0;Texture Painting" epub:type="chapter" id="texture_painting"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Texture Painting</h2></div></div></div><p><a id="iddle1015" class="indexterm"/><a id="iddle1210" class="indexterm"/><a id="iddle1257" class="indexterm"/><a id="iddle1418" class="indexterm"/><a id="iddle2037" class="indexterm"/><a id="iddle2476" class="indexterm"/><a id="iddle2501" class="indexterm"/><a id="iddle2504" class="indexterm"/><a id="iddle2627" class="indexterm"/>In the previous chapter, we used Blender to generate textures automatically; in this chapter, we’ll shift our focus to creating textures by hand. Using a mix of hand painting, working with photo textures, and utilizing the textures we created in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>, we’ll bring color and texture to the objects in our scenes. We’ll also cover creating such images as specular, hardness, and alpha maps, which we’ll use in <a class="xref" href="ch12.html" title="Chapter 12. Materials">Chapter 12</a> to influence other aspects of the materials we make, such as their shininess, smoothness, and transparency. We’ll look at creating both tileable textures that can be used on multiple objects and unique textures that are UV mapped to specific objects using a mix of both Blender and GIMP.</p><p>Let’s begin with a look at the tools available.</p><div class="sect1" title="Texturing in Blender"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="texturing_in_blender">Texturing in Blender</h2></div></div></div><p>In Blender, we can paint in 2D, using the UV Image editor, and we can paint directly on objects in 3D, using Texture Paint mode in the 3D Viewport. This gives us a great degree of flexibility in how we paint our models. The brushes work across both the UV Image editor and Texture Paint mode, making texturing with Blender straightforward and consistent.</p><p>Once you select a mesh that has been unwrapped and assigned an image in the UV Image editor, you can switch to Texture Paint mode in the 3D Viewport. (Use the mode drop-down menu in the header, as shown in <a class="xref" href="ch11.html#texture_paint_mode_in_blenderdot_herecom" title="Figure 11-1. Texture Paint mode in Blender. Here, I’ve used the modified UV Unwrapping Layout created in Chapter 8. This layout allows me to paint textures in the 3D Viewport (right), to see and edit the resulting image in the UV Image editor (left), and to edit materials and settings in the Properties editor.">Figure 11-1</a>.) By default, you’ll see the texture on your mesh and be able to paint on it using Blender’s texture brushes.</p><p>Blender offers several brush types that you can use to paint textures on your model:</p><p title="Draw, Brush, and Texdraw"><span class="title"><strong><span class="strong"><strong>Draw, Brush, and Texdraw</strong></span></strong></span>. These all offer the same basic functionality, allowing you to paint directly on your mesh with the color specified by the color picker.</p><p title="Clone"><span class="title"><strong><span class="strong"><strong>Clone</strong></span></strong></span>. This brush allows you to clone texture information from one part of your model to another or from one UV coordinate set to another. With the Clone option turned off in the Project Paint settings (see <a class="xref" href="ch11.html#project_paint" title="Project Paint">Project Paint</a>), the brush will take the texture information lying <a id="iddle2118" class="indexterm"/><a id="iddle2348" class="indexterm"/><a id="iddle2370" class="indexterm"/><a id="iddle2525" class="indexterm"/><a id="iddle2531" class="indexterm"/>under the 3D Viewport cursor and copy it to where you paint, allowing you to clone from one part of the model to another within the same texture. With the Clone option turned on in the Project Paint settings, the brush will instead clone texture information from the <span class="emphasis"><em>same part of the mesh</em></span> but from the texture assigned to a <span class="emphasis"><em>different UV coordinate set</em></span> (the one chosen in the Project Paint settings).</p><div class="figure"><a id="texture_paint_mode_in_blenderdot_herecom"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00210"/><img src="httpatomoreillycomsourcenostarchimages1538662.png.jpg" alt="Texture Paint mode in Blender. Here, I’ve used the modified UV Unwrapping Layout created in . This layout allows me to paint textures in the 3D Viewport (right), to see and edit the resulting image in the UV Image editor (left), and to edit materials and settings in the Properties editor."/></div></div><div class="figure-title">Figure 11-1. Texture Paint mode in Blender. Here, I’ve used the modified UV Unwrapping Layout created in <a class="xref" href="ch08.html" title="Chapter 8. UV Unwrapping">Chapter 8</a>. This layout allows me to paint textures in the 3D Viewport (right), to see and edit the resulting image in the UV Image editor (left), and to edit materials and settings in the Properties editor.</div></div><p title="Smear"><span class="title"><strong><span class="strong"><strong>Smear</strong></span></strong></span>. This will smear your texture in the direction of the brushstroke. It can be used to blend colors and to smudge out mistakes.</p><p title="Soften"><span class="title"><strong><span class="strong"><strong>Soften</strong></span></strong></span>. This blurs the texture under your stroke, reducing noise and fine details.</p><p>These brush types can be duplicated and modified just like Blender’s sculpt brushes, allowing you to create a variety of brushes tailored to your needs. Also, as in Sculpt mode, you can apply textures to your brush using the Texture panel of the Tool Options region. The texture you apply will then multiply with your brushstrokes while you paint.</p><div class="sect2" title="Project Paint"><div class="titlepage"><div><div><h3 class="title" id="project_paint">Project Paint</h3></div></div></div><p>Blender has two ways to paint textures in Texture Paint mode. The older, legacy method, while useful, has significant limitations. The newer Project Paint method offers a more advanced set of tools, including ones that allow you to mask and clone textures using other UV coordinates and images and to paint only on surfaces visible from your viewpoint. When enabled, Project Paint gives you the options shown in <a class="xref" href="ch11.html#project_paint_panel_has_a_variety_of_opt" title="Figure 11-2. The Project Paint panel has a variety of options for controlling how Blender’s texture brushes work.">Figure 11-2</a>. I discuss these options below in the order in which they appear on the Project Paint panel.</p><div class="figure"><a id="project_paint_panel_has_a_variety_of_opt"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00211"/><img src="httpatomoreillycomsourcenostarchimages1538664.png.jpg" alt="The Project Paint panel has a variety of options for controlling how Blender’s texture brushes work."/></div></div><div class="figure-title">Figure 11-2. The Project Paint panel has a variety of options for controlling how Blender’s texture brushes work.</div></div><p title="Occlude"><span class="title"><strong><span class="strong"><strong>Occlude</strong></span></strong></span>. <a id="iddle1060" class="indexterm"/><a id="iddle1164" class="indexterm"/><a id="iddle1182" class="indexterm"/><a id="iddle1258" class="indexterm"/><a id="iddle1323" class="indexterm"/><a id="iddle1343" class="indexterm"/><a id="iddle1564" class="indexterm"/><a id="iddle1959" class="indexterm"/><a id="iddle2004" class="indexterm"/><a id="iddle2133" class="indexterm"/><a id="iddle2232" class="indexterm"/><a id="iddle2423" class="indexterm"/><a id="iddle2515" class="indexterm"/><a id="iddle2529" class="indexterm"/><a id="iddle2628" class="indexterm"/>This prevents painting “through” the mesh onto surfaces behind visible ones.</p><p title="Cull"><span class="title"><strong><span class="strong"><strong>Cull</strong></span></strong></span>. This prevents painting on faces that face away from you.</p><p title="Normal"><span class="title"><strong><span class="strong"><strong>Normal</strong></span></strong></span>. This blends out the strength of your strokes depending on whether they are facing you (as with Cull, but with a smooth fade-out). You can control the limits of this fade out using the <span class="emphasis"><em>Angle</em></span> setting to the right of the checkbox.</p><div class="note" title="Note"><h3 class="title"><a id="ch11note01"/>Note</h3><p><span class="emphasis"><em>The above options are on by default, but it can be useful to turn them off to quickly paint large parts of your model with a single stroke.</em></span></p></div><p title="Stencil"><span class="title"><strong><span class="strong"><strong>Stencil</strong></span></strong></span>. This allows you to use an image mapped to the object’s UV coordinates (which can be a different set from the one you are painting on) to mask the effect of your brushstrokes. This setting can be used to restrict the area you are working on or to simplify adding texture to your model, as you’ll see later in this chapter. To the right of the stencil checkbox, you can select which UV coordinate set (and thus which image) to use for masking and whether to invert the mask.</p><p title="Clone"><span class="title"><strong><span class="strong"><strong>Clone</strong></span></strong></span>. This allows you to clone texture information from one UV map to another. (Your brushstrokes will clone to the image assigned to the active UV set from the one selected in the drop-down menu next to the checkbox for this option.) This setting lets you, for example, project your model onto a photo with one UV coordinate set and then clone that to another, more neatly laid out UV map for further texturing. (We’ll use this option later for the Jungle Temple.)</p><p title="Bleed"><span class="title"><strong><span class="strong"><strong>Bleed</strong></span></strong></span>. This determines the amount Blender bleeds textures outward from the edges of the UV islands when you paint over a seam. This prevents seams from appearing in your texture, similar to the Margin setting for texture baking.</p><p title="Quick Edit"><span class="title"><strong><span class="strong"><strong>Quick Edit</strong></span></strong></span>. This is very useful when texturing, particularly for cleaning up seams and texturing tricky areas where you might want the extra tools available to you in a 2D painting program like GIMP. Quick Edit takes a snapshot of your model from the current viewpoint and opens it in the image editor of your choosing. (To choose your image editor, open the File tab of Blender’s user preferences under Image Editor; then, simply set the path to GIMP or whatever image editor you wish to use.) You can then paint your texture in the image-editing program and save it. Clicking Apply in Blender will project that texture from the viewpoint it was originally taken from. (You don’t need to worry about moving the camera; Blender will remember that setting.) Later in this chapter, we’ll cover using this feature to fix seams.</p><p title="Apply Camera Image"><span class="title"><strong><span class="strong"><strong>Apply Camera Image</strong></span></strong></span>. Like Quick Edit, this projects an image from the camera’s current viewpoint. It will bring up a drop-down menu of any images you have already opened in Blender for you to choose from, and it’ll then project your chosen texture onto your model.</p><p title="Save All Edited"><span class="title"><strong><span class="strong"><strong>Save All Edited</strong></span></strong></span>. This saves any textures that you have edited while working in Texture Paint mode, though they must have already been saved once manually or Blender will not know where to save them. Generally, it’s better to remember to save manually anyway so that you can keep track of which textures you have worked on already.</p></div><div class="sect2" title="Painting in the UV Image Editor"><div class="titlepage"><div><div><h3 class="title" id="painting_in_the_uv_image_editor">Painting in the UV Image Editor</h3></div></div></div><p>You can also paint textures in Blender’s UV Image editor. To do so, click the paintbrush icon in the header of the UV Image editor region. You can then paint on the current image in the UV Image editor using the same brushes as in the 3D Viewport. By using the 3D Viewport and UV Image editor side by side (as in <a class="xref" href="ch11.html#texture_paint_mode_in_blenderdot_herecom" title="Figure 11-1. Texture Paint mode in Blender. Here, I’ve used the modified UV Unwrapping Layout created in Chapter 8. This layout allows me to paint textures in the 3D Viewport (right), to see and edit the resulting image in the UV Image editor (left), and to edit materials and settings in the Properties editor.">Figure 11-1</a>), you gain a lot of control when painting textures.</p><div class="note" title="Note"><h3 class="title"><a id="ch11note02"/>Note</h3><p><span class="emphasis"><em>Later we’ll render some of the projects in this book using Blender’s Cycles renderer, but while texture painting, it’s easier to leave the renderer set to Blender Internal. This is because Cycles can cause Blender to behave a little strangely when texturing objects with multiple UV coordinate sets.</em></span></p></div></div></div><div class="sect1" title="Texturing in GIMP"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="texturing_in_gimp">Texturing in GIMP</h2></div></div></div><p>While we can paint in 2D in Blender, GIMP offers a much wider array of painting tools, such as selections, masks, layers, and filters. This variety of tools makes GIMP (or another image editor, such as Photoshop) indispensable for working on textures. In particular, the ability to work with layers makes <a id="iddle1219" class="indexterm"/><a id="iddle1285" class="indexterm"/><a id="iddle1336" class="indexterm"/><a id="iddle1550" class="indexterm"/><a id="iddle1553" class="indexterm"/><a id="iddle1565" class="indexterm"/><a id="iddle1631" class="indexterm"/><a id="iddle1638" class="indexterm"/><a id="iddle2517" class="indexterm"/>it much easier to create textures as nondestructively as possible, building up one layer and then adding details in a new layer over the top.</p><p>The ability to work in layers also allows you to combine baked textures with your hand-painted textures easily. For example, you can add an ambient occlusion texture over another layer of your texture map to add shadowing. GIMP also has a more advanced brush system, making it easier to paint detailed textures. (I covered the basics of painting in GIMP in <a class="xref" href="ch02.html" title="Chapter 2. Introduction to GIMP">Chapter 2</a>, so we’ll cover only the more texturing-specific aspects of GIMP in this chapter.)</p><div class="sect2" title="Creating Brushes for Texturing in GIMP"><div class="titlepage"><div><div><h3 class="title" id="creating_brushes_for_texturing_in_gimp">Creating Brushes for Texturing in GIMP</h3></div></div></div><p>GIMP’s brushes are easy to edit and are capable of creating a wide variety of looks. When texturing, it can often be useful to create custom brushes that aid in quickly building up texture. In particular, when used as clone brushes or as paintbrushes, brushes with a speckled or grungy look are often useful in blending between different colors and textures.</p><p>For example, let’s create a grungy-looking brush that will come in handy when texturing the Jungle Temple. Its effect can be seen on the right of <a class="xref" href="ch11.html#left_our_new_brush_with_gimpapostrophes" title="Figure 11-5. Left: Our new brush with GIMP’s default brush dynamics. Right: The same brush with GIMP’s brush dynamics set to randomize the size and rotation of the brush.">Figure 11-5</a>. To create it, we start with a photo texture from CGTextures (<span class="emphasis"><em><a class="ulink" href="http://cgtextures.com/" target="_top">http://cgtextures.com/</a></em></span>) and then refine it into a brush that can be exported as a default GIMP brush, which can be used again and again for texturing or painting in GIMP.</p><p>GIMP brushes are image files that are used to control the shape of a brush. RGB (color) images are used as is (more like a stamp than a brush) and will not inherit the brush color. Black-and-white images interpret black as the shape of the brush and white as transparent, and they take their color from the color you have selected in GIMP’s color picker. To create a GIMP brush, all we have to do is create a black-and-white image and save it in one of GIMP’s brush formats (<span class="emphasis"><em>.gbr</em></span> or <span class="emphasis"><em>.gih—</em></span>I’ll discuss the difference between these in a second).</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Start with a photo of some paint splatter from CGTextures (see <a class="xref" href="ch11.html#image_weapostrophell_be_using_as_our_bru" title="Figure 11-3. The image we’ll be using as our brush texture">Figure 11-3</a>) and choose <span class="strong"><strong>Colors</strong></span>▸<span class="strong"><strong>Desaturate</strong></span> to convert the image to black and white, selecting the <span class="strong"><strong>Luminosity</strong></span> option for desaturating the image in order to give more variation in brightness.</p><div class="figure"><a id="image_weapostrophell_be_using_as_our_bru"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00212"/><img src="httpatomoreillycomsourcenostarchimages1538666.png.jpg" alt="The image we’ll be using as our brush texture"/></div></div><div class="figure-title">Figure 11-3. The image we’ll be using as our brush texture</div></div></li><li class="listitem"><p>Next, identify a square area that might make a good brush and select that area with the Rectangular Select tool (<span class="strong"><strong>R</strong></span>; press and hold <span class="smaller">SHIFT</span> while dragging to make a square selection). Copy this area (<span class="smaller">CTRL</span>-C) and paste it as a new image (<span class="smaller">CTRL-SHIFT</span>-V), which you’ll soon save as a new brush.</p></li><li class="listitem"><p>While you’ve already desaturated the image, it’s still encoded using RGB colors, so switch to using black and white values with <span class="strong"><strong>Image</strong></span>▸<span class="strong"><strong>Mode</strong></span>▸<span class="strong"><strong>Grayscale</strong></span>.</p></li><li class="listitem"><p>Next, make a few tweaks to the new image, painting out some of the splatter that clips the edge of the canvas. The texture is now ready to save, as shown in <a class="xref" href="ch11.html#portion_of_the_photocomma_copied_and_pas" title="Figure 11-4. A portion of the photo, copied and pasted into a new image and tweaked a little around the edges">Figure 11-4</a>.</p><div class="figure"><a id="portion_of_the_photocomma_copied_and_pas"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00213"/><img src="httpatomoreillycomsourcenostarchimages1538668.png.jpg" alt="A portion of the photo, copied and pasted into a new image and tweaked a little around the edges"/></div></div><div class="figure-title">Figure 11-4. A portion of the photo, copied and pasted into a new image and tweaked a little around the edges</div></div></li></ol></div></div><div class="sect2" title="Adding Variation to a Brush"><div class="titlepage"><div><div><h3 class="title" id="adding_variation_to_a_brush">Adding Variation to a Brush</h3></div></div></div><p><a id="iddle1052" class="indexterm"/><a id="iddle1211" class="indexterm"/><a id="iddle1335" class="indexterm"/><a id="iddle2034" class="indexterm"/><a id="iddle2063" class="indexterm"/><a id="iddle2110" class="indexterm"/><a id="iddle2516" class="indexterm"/>You could stop here and export the brush as a <span class="emphasis"><em>.gbr</em></span> brush file, but when used as a brush, it would simply repeat this one image over and over. To give the brush more variation, repeat the steps above, adding more layers to the brush image, and then save it as an animated <span class="emphasis"><em>.gih</em></span> GIMP brush. This brush will use a different layer of the brush image each time it paints part of the stroke, making the stroke look more varied. To do this, take the following steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Select more regions of the original image and copy and paste them as new layers into the brush image (<span class="smaller">CTRL</span>-V, then click <span class="strong"><strong>New Layer</strong></span> in GIMP’s layers dialog). After doing this a few times, you’ll have five different layers with different splatters on them.</p></li><li class="listitem"><p>Export this as a <span class="emphasis"><em>.gih</em></span> brush file to GIMP’s brushes folder<sup>[<a id="ch11fn01" href="#ftn.ch11fn01" epub:type="noteref" class="footnote">1</a>]</sup> (select <span class="strong"><strong>File</strong></span>▸<span class="strong"><strong>Export</strong></span>, set the file type to <span class="emphasis"><em>.gih</em></span>, and then click <span class="strong"><strong>Save</strong></span>).</p></li><li class="listitem"><p>GIMP should give you a dialog that lets you define how your brush is set up. You can stick with the defaults if you have placed each “frame” of your brush on a different layer; just be sure to change the brush’s description to something helpful and check that the Cells setting is the same as the number of layers in your image. If you wish, you can adjust the default offset of the brush or the distance between each brush mark placed on the canvas when you make a stroke. For heavy, painterly brushes, choose a small value, but for this grungy-looking brush, a wider spacing is more appropriate—say around 40.</p></li><li class="listitem"><p>With these settings in place, click <span class="strong"><strong>Export</strong></span>. Now if you click <span class="strong"><strong>Refresh Brushes</strong></span> at the bottom right of the Brushes dialog, you should be able to select the new brush and start testing it out. Its effects at the moment are shown on the left in <a class="xref" href="ch11.html#left_our_new_brush_with_gimpapostrophes" title="Figure 11-5. Left: Our new brush with GIMP’s default brush dynamics. Right: The same brush with GIMP’s brush dynamics set to randomize the size and rotation of the brush.">Figure 11-5</a>.</p></li><li class="listitem"><p>You’ve created an animated brush with a few different shapes, but notice that they repeat quite frequently (left image of <a class="xref" href="ch11.html#left_our_new_brush_with_gimpapostrophes" title="Figure 11-5. Left: Our new brush with GIMP’s default brush dynamics. Right: The same brush with GIMP’s brush dynamics set to randomize the size and rotation of the brush.">Figure 11-5</a>). To fix this, you can tweak GIMP’s brush dynamics to vary the brush some more along the length of the stroke.</p><div class="note" title="Note"><h3 class="title"><a id="ch11note03"/>Note</h3><p><span class="emphasis"><em>This assumes that you have a pressure-sensitive pen tablet (highly recommended) for painting. If you don’t have one, you can still use the brush dynamics settings, such as Velocity, Fade, and Random, to add effects to your brushstrokes. But obviously pen pressure does not apply to mouse clicks.</em></span></p></div></li><li class="listitem"><p>To tweak GIMP’s brush dynamics, open the Brush Dynamics dialog (<span class="strong"><strong>Windows</strong></span>▸<span class="strong"><strong>Dockable Dialogs</strong></span>▸<span class="strong"><strong>Paint Dynamics</strong></span> and click <span class="strong"><strong>New Dynamics</strong></span>, the second icon on the bottom left of the dialog). This opens the Paint Dynamics editor (see <a class="xref" href="ch11.html#paint_dynamics_editorcomma_shown_here_wi" title="Figure 11-6. The Paint Dynamics editor, shown here with settings for the dynamics of my grungy brush. Checking a box in the mapping matrix makes the variable in the corresponding column affect the brush property in the corresponding row.">Figure 11-6</a>), where you can use the mapping matrix (the large grid of checkboxes) to set the brush’s behavior. The top row of the mapping matrix lists all sorts of inputs that can be used to drive the brush’s behavior, and the left side of the matrix lists the brush settings these inputs can be used to affect. Set Pressure to affect the brush’s opacity and Random to affect the size and rotation of each brush mark. With these dynamics in place, you now get a nice random, grungy-looking brushstroke that you can use for all sorts of textures (see <a class="xref" href="ch11.html#left_our_new_brush_with_gimpapostrophes" title="Figure 11-5. Left: Our new brush with GIMP’s default brush dynamics. Right: The same brush with GIMP’s brush dynamics set to randomize the size and rotation of the brush.">Figure 11-5</a>, right line).</p></li></ol></div><div class="figure"><a id="left_our_new_brush_with_gimpapostrophes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00214"/><img src="httpatomoreillycomsourcenostarchimages1538670.png.jpg" alt="Left: Our new brush with GIMP’s default brush dynamics. Right: The same brush with GIMP’s brush dynamics set to randomize the size and rotation of the brush."/></div></div><div class="figure-title">Figure 11-5. Left: Our new brush with GIMP’s default brush dynamics. Right: The same brush with GIMP’s brush dynamics set to randomize the size and rotation of the brush.</div></div><div class="figure"><a id="paint_dynamics_editorcomma_shown_here_wi"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00215"/><img src="httpatomoreillycomsourcenostarchimages1538672.png.jpg" alt="The Paint Dynamics editor, shown here with settings for the dynamics of my grungy brush. Checking a box in the mapping matrix makes the variable in the corresponding column affect the brush property in the corresponding row."/></div></div><div class="figure-title">Figure 11-6. The Paint Dynamics editor, shown here with settings for the dynamics of my grungy brush. Checking a box in the mapping matrix makes the variable in the corresponding column affect the brush property in the corresponding row.</div></div></div></div><div class="sect1" title="Texturing the Bat Creature"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="texturing_the_bat_creature">Texturing the Bat Creature</h2></div></div></div><p><a id="iddle1140" class="indexterm"/><a id="iddle1147" class="indexterm"/><a id="iddle1576" class="indexterm"/><a id="iddle1755" class="indexterm"/><a id="iddle1824" class="indexterm"/><a id="iddle1944" class="indexterm"/><a id="iddle2502" class="indexterm"/><a id="iddle2503" class="indexterm"/><a id="iddle2505" class="indexterm"/><a id="iddle2512" class="indexterm"/><a id="iddle2608" class="indexterm"/>I wanted textures to make the Bat Creature look like a creature of the night: patchy, purplish skin and discolored nails, with some extra wrinkles, freckles, and veins to add some details on top of those I sculpted. To create them, I built up my textures in stages, first blocking in basic colors and then smoothing and refining them before adding the details.</p><p>I started by painting some flat colors in Blender’s Texture Paint mode. I then saved my work and opened it in GIMP for finer texturing—for example, I combined my painted texture map with the ambient occlusion map I baked in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>. I then used GIMP to manipulate and supplement the diffuse texture to create specular and hardness textures.</p><p>To begin blocking in my colors, I dropped into Edit mode and assigned a new blank image to the mesh for the Bat Creature (the mesh used for baking textures in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>, not the high-res sculpted mesh). The New Texture dialog lets us choose a color to fill the new image, so I set it to a muted pinkish purple—a sort of unhealthy skin color that might befit a denizen of the night.</p><p>Next, I established an overall palette of colors for my texture in the UV Image editor, selecting an unused space not mapped to any part of the mesh (see <a class="xref" href="ch11.html#choosing_some_initial_colors_to_paint_th" title="Figure 11-7. Choosing some initial colors to paint the Bat Creature’s skin makes it easy to return to the same colors again and to maintain a consistent color palette.">Figure 11-7</a>). I chose a darker purple for use in shadowed areas, like the area under the eyes; a lighter yellowish color for bony areas; a dark, saturated red for veins and areas with a lot of blood flow; and a darker and lighter version of the original base color to act as shadows and highlights. (We’re not painting lighting into our texture; I’m talking only about lighter and darker skin coloration in different areas.) I also chose a light contrasting color to act as a highlight in some areas. I painted a little of each onto my image so that I could color pick from them for use later, either in the UV Image editor or when painting in the 3D Viewport.</p><div class="figure"><a id="choosing_some_initial_colors_to_paint_th"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00216"/><img src="httpatomoreillycomsourcenostarchimages1538674.png.jpg" alt="Choosing some initial colors to paint the Bat Creature’s skin makes it easy to return to the same colors again and to maintain a consistent color palette."/></div></div><div class="figure-title">Figure 11-7. Choosing some initial colors to paint the Bat Creature’s skin makes it easy to return to the same colors again and to maintain a consistent color palette.</div></div><div class="sect2" title="Materials and UI Setup for Painting"><div class="titlepage"><div><div><h3 class="title" id="materials_and_ui_setup_for_painting">Materials and UI Setup for Painting</h3></div></div></div><p>When in Texture Paint mode, Blender will by default show the texture you are painting on applied to your mesh in the 3D view, with Blender’s default solid shading. As with sculpting, however, we can use Blender’s GLSL Shading mode to display the texture in different ways by adding simple lights to the scene (see <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a> for more on lighting) and a simple material to the mesh (see <a class="xref" href="ch12.html" title="Chapter 12. Materials">Chapter 12</a> for more on materials).</p><p>For the Bat Creature, I added a simple material to the bat object, which I named <span class="emphasis"><em>Body_TexturePaint</em></span>. In the Textures tab of the Properties editor, I added a new texture to this material, set its type to Image, selected my painted image that I had already assigned to the object’s UVs, and set the mapping type for the texture to UV.</p><div class="sect3" title="Adding a Light"><div class="titlepage"><div><div><h4 class="title" id="adding_a_light">Adding a Light</h4></div></div></div><p>To make the object visible in GLSL Shading mode, we need to add a light, so in Object mode, I created a new Hemi lamp to light my object. Switching into Textured Viewport mode (make sure that shading is set to GLSL in the Display panel of the Properties region), I could see that this lit the Bat Creature from above only, so I duplicated the lamp and rotated it 180 degrees to light the object from below. Next, I decreased the intensity of the new duplicate to around 0.3 in the Lamp’s Object Data tab in order to leave a little difference between the lighting from above and below the character. I also turned off the specular component for the lamps (see <a class="xref" href="ch11.html#adding_simple_lighting_and_materials_to" title="Figure 11-8. Adding simple lighting and materials to make texture painting in GLSL mode easier. Here, I’ve added a couple Hemi lamps and turned on GLSL shading.">Figure 11-8</a>) so that my mesh wouldn’t look shiny.</p><div class="figure"><a id="adding_simple_lighting_and_materials_to"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00217"/><img src="httpatomoreillycomsourcenostarchimages1538676.png.jpg" alt="Adding simple lighting and materials to make texture painting in GLSL mode easier. Here, I’ve added a couple Hemi lamps and turned on GLSL shading."/></div></div><div class="figure-title">Figure 11-8. Adding simple lighting and materials to make texture painting in GLSL mode easier. Here, I’ve added a couple Hemi lamps and turned on GLSL shading.</div></div><div class="note" title="Note"><h3 class="title"><a id="ch11note04"/>Note</h3><p><a id="iddle1021" class="indexterm"/><a id="iddle1146" class="indexterm"/><a id="iddle1559" class="indexterm"/><a id="iddle1725" class="indexterm"/><a id="iddle1735" class="indexterm"/><a id="iddle1924" class="indexterm"/><a id="iddle1958" class="indexterm"/><a id="iddle2029" class="indexterm"/><a id="iddle2296" class="indexterm"/><a id="iddle2511" class="indexterm"/><span class="emphasis"><em>If you find painting in Blender becoming unresponsive, create a lower-res mesh to paint on by duplicating the sculpted mesh and applying the Multires modifier at a lower level. Because this lower-res mesh shares the same UV coordinates, you can paint on it and apply the textures to the higher-resolution model later.</em></span></p></div></div><div class="sect3" title="Laying Out Basic Textures in Blender"><div class="titlepage"><div><div><h4 class="title" id="laying_out_basic_textures_in_blender">Laying Out Basic Textures in Blender</h4></div></div></div><p>I could now start laying out some basic textures on my model. Using the Standard brush in Texture Paint mode, I sampled from my palette of colors in the UV Image editor and then painted on my model in the 3D Viewport.</p><p>I began by using anatomical features as a guide for colors, making bony areas lighter and yellower; recessed areas, like the eyes, dark and purple; and the back darker. I made areas with a lot of blood flow or thin skin, like the wings and ears, redder and slightly highlighted some of the muscles on the torso and legs with lighter colors. I worked with Occlude turned on in Project Paint, but Normal and Cull turned off, as these settings allow you to paint smoothly on the mesh even at side-on angles. At this stage, the aim is only to establish a rough idea of the colors you want.</p></div><div class="sect3" title="Switching to GIMP"><div class="titlepage"><div><div><h4 class="title" id="switching_to_gimp">Switching to GIMP</h4></div></div></div><p>With my basic colors laid out, I needed more advanced painting tools to start blending colors and adding details. Thus, it was time to move to GIMP. I saved my texture in Blender as a <span class="emphasis"><em>.tga</em></span> image (press F3 in the UV Image editor to save the active image). I then loaded the saved image in GIMP and began cleaning up and smoothing out the colors I had painted in Blender, fixing artifacts and filling in awkward areas. This process is best done with the Paintbrush tool, using a relatively large, soft-edged brush to simply color pick (use <span class="smaller">CTRL</span>-click to do this without switching away from the Paintbrush tool) from existing colors and blend areas together (see <a class="xref" href="ch11.html#cleaning_up_our_texture_in_gimp_part_of" title="Figure 11-9. Cleaning up our texture in GIMP: part of the roughly painted texture created in Blender (left); after blending together and painting areas in GIMP (right)">Figure 11-9</a>). (Another way to blend colors is to use the Smudge tool and a grungy-looking brush, like the one we created earlier in this chapter, to blend back and forth between two areas, mixing their colors.)</p><p>To add detail to my texture, I incorporated the ambient occlusion map I baked in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>. Using File▸Open as Layers, I opened my baked ambient occlusion map as a new layer on top of my painted texture.</p><p>I cleaned up this layer a bit, as I had done for the rough diffuse color. For cleaning purposes, I used GIMP’s brushes and color picking, blending areas that didn’t look right with the Paint tool or using the Clone tool to fill in areas while preserving texture.</p></div></div><div class="sect2" title="Layer Modes and Opacity"><div class="titlepage"><div><div><h3 class="title" id="layer_modes_and_opacity">Layer Modes and Opacity</h3></div></div></div><p>Initially, our ambient occlusion map is imported as a normal layer on top of the texture, completely replacing it. To rectify this, we can use GIMP’s layer-blending modes to find a more appropriate way to blend the two.</p><p>GIMP’s Layers dialog shows each layer in your image (see <a class="xref" href="ch11.html#gimpapostrophes_layers_dialogdot_at_the" title="Figure 11-10. GIMP’s Layers dialog. At the top, Mode and Opacity set the layer-blending mode and opacity. Beneath these selections are options to lock the color and alpha of layers. Each layer has options to toggle its visibility and link layers (so that they stay aligned when moved, scaled, or rotated).">Figure 11-10</a>, with the Ambient Occlusion layer selected and its blend mode set to Multiply). At the top of the dialog, a drop-down menu lets you choose the Selected Layers blending mode. Different blending modes have different effects: <span class="emphasis"><em>Normal</em></span> lays one over the other, <span class="emphasis"><em>Multiply</em></span> multiplies the values of each pixel in the two layers together, and <span class="emphasis"><em>Add</em></span> adds them together. The Overlay mode causes the layer to brighten or darken the layers below it, depending on its value—dark values make areas darker, light values make them lighter, and mid-gray has no effect. Experiment with a variety of layer modes when combining images to find the one that works best. To combine the ambient occlusion map with my painted colors, I set the mode to Multiply.</p><div class="figure"><a id="cleaning_up_our_texture_in_gimp_part_of"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00218"/><img src="httpatomoreillycomsourcenostarchimages1538678.png.jpg" alt="Cleaning up our texture in GIMP: part of the roughly painted texture created in Blender (left); after blending together and painting areas in GIMP (right)"/></div></div><div class="figure-title">Figure 11-9. Cleaning up our texture in GIMP: part of the roughly painted texture created in Blender (left); after blending together and painting areas in GIMP (right)</div></div><div class="figure"><a id="gimpapostrophes_layers_dialogdot_at_the"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00219"/><img src="httpatomoreillycomsourcenostarchimages1538680.png.jpg" alt="GIMP’s Layers dialog. At the top, Mode and Opacity set the layer-blending mode and opacity. Beneath these selections are options to lock the color and alpha of layers. Each layer has options to toggle its visibility and link layers (so that they stay aligned when moved, scaled, or rotated)."/></div></div><div class="figure-title">Figure 11-10. GIMP’s Layers dialog. At the top, Mode and Opacity set the layer-blending mode and opacity. Beneath these selections are options to lock the color and alpha of layers. Each layer has options to toggle its visibility and link layers (so that they stay aligned when moved, scaled, or rotated).</div></div><p><a id="iddle1038" class="indexterm"/><a id="iddle1270" class="indexterm"/><a id="iddle2008" class="indexterm"/><a id="iddle2678" class="indexterm"/>You can control how much one layer blends with another with the layer’s Opacity setting (see <a class="xref" href="ch11.html#gimpapostrophes_layers_dialogdot_at_the" title="Figure 11-10. GIMP’s Layers dialog. At the top, Mode and Opacity set the layer-blending mode and opacity. Beneath these selections are options to lock the color and alpha of layers. Each layer has options to toggle its visibility and link layers (so that they stay aligned when moved, scaled, or rotated).">Figure 11-10</a>). Because my Ambient Occlusion layer darkened the underlying texture quite a lot, I reduced its opacity to about 40 percent. The result of the ambient occlusion layer at this opacity is shown at the top left of <a class="xref" href="ch11.html#incorporating_the_ambient_occlusion_map" title="Figure 11-11. Incorporating the ambient occlusion map into our texture. Top left: The ambient occlusion texture multiplied over the rough diffuse texture at 40 percent opacity, before any alteration. Bottom: Adjusting the colors of the ambient occlusion map with the Curves tool, to make it redder. Top right: The reddened ambient occlusion map multiplied over the diffuse texture at 40 percent opacity.">Figure 11-11</a>.</p><div class="sect3" title="Adjusting Colors"><div class="titlepage"><div><div><h4 class="title" id="adjusting_colors">Adjusting Colors</h4></div></div></div><p>GIMP has a variety of tools for manipulating the colors of an image, both from its wide array of filters and from the Colors menu. For example, you can adjust the exposure of an image—its hue and saturation—and the brightness of each channel using curves or sliders, among a wealth of other options.</p><p>At the moment, our texture for the Bat Creature looks rather gray because the black-and-white ambient occlusion texture is multiplied on top. To fix this, we can adjust the curves on the Ambient Occlusion layer to introduce some more red, making the shadows more saturated and redder. To do so, take the following steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Choose <span class="strong"><strong>Colors</strong></span>▸<span class="strong"><strong>Curves</strong></span> with the Ambient Occlusion layer selected, which brings up the Curves dialog.</p><div class="figure"><a id="incorporating_the_ambient_occlusion_map"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00220"/><img src="httpatomoreillycomsourcenostarchimages1538682.png.jpg" alt="Incorporating the ambient occlusion map into our texture. Top left: The ambient occlusion texture multiplied over the rough diffuse texture at 40 percent opacity, before any alteration. Bottom: Adjusting the colors of the ambient occlusion map with the Curves tool, to make it redder. Top right: The reddened ambient occlusion map multiplied over the diffuse texture at 40 percent opacity."/></div></div><div class="figure-title">Figure 11-11. Incorporating the ambient occlusion map into our texture. Top left: The ambient occlusion texture multiplied over the rough diffuse texture at 40 percent opacity, before any alteration. Bottom: Adjusting the colors of the ambient occlusion map with the Curves tool, to make it redder. Top right: The reddened ambient occlusion map multiplied over the diffuse texture at 40 percent opacity.</div></div></li><li class="listitem"><a id="iddle1040" class="indexterm"/><a id="iddle1098" class="indexterm"/><p><a id="iddle1124" class="indexterm"/><a id="iddle1237" class="indexterm"/><a id="iddle1260" class="indexterm"/><a id="iddle1271" class="indexterm"/><a id="iddle1468" class="indexterm"/><a id="iddle1526" class="indexterm"/><a id="iddle1568" class="indexterm"/><a id="iddle1591" class="indexterm"/><a id="iddle1668" class="indexterm"/><a id="iddle2077" class="indexterm"/><a id="iddle2215" class="indexterm"/><a id="iddle2236" class="indexterm"/><a id="iddle2467" class="indexterm"/><a id="iddle2552" class="indexterm"/><a id="iddle2692" class="indexterm"/><a id="iddle2711" class="indexterm"/>This lets you modify the values of each channel (red, green, blue, and alpha) in an image using a curve function.</p></li><li class="listitem"><p>To add red to the darker portions of the image, select the red channel from the Channel dropdown menu, grab the bottom left point of the curve, and drag it upward (see <a class="xref" href="ch11.html#incorporating_the_ambient_occlusion_map" title="Figure 11-11. Incorporating the ambient occlusion map into our texture. Top left: The ambient occlusion texture multiplied over the rough diffuse texture at 40 percent opacity, before any alteration. Bottom: Adjusting the colors of the ambient occlusion map with the Curves tool, to make it redder. Top right: The reddened ambient occlusion map multiplied over the diffuse texture at 40 percent opacity.">Figure 11-11</a>, bottom).</p></li><li class="listitem"><p>Click <span class="strong"><strong>OK</strong></span> to apply the curves, and the ambient occlusion map now gives nice saturated crevices and shadowed areas to the skin (see <a class="xref" href="ch11.html#incorporating_the_ambient_occlusion_map" title="Figure 11-11. Incorporating the ambient occlusion map into our texture. Top left: The ambient occlusion texture multiplied over the rough diffuse texture at 40 percent opacity, before any alteration. Bottom: Adjusting the colors of the ambient occlusion map with the Curves tool, to make it redder. Top right: The reddened ambient occlusion map multiplied over the diffuse texture at 40 percent opacity.">Figure 11-11</a>, top right).</p></li></ol></div></div><div class="sect3" title="Saving and Exporting Back to Blender"><div class="titlepage"><div><div><h4 class="title" id="saving_and_exporting_back_to_blender">Saving and Exporting Back to Blender</h4></div></div></div><p>The texture isn’t finished yet, but it’s important to save often, and doing so can be a useful way to see how our current work-in-progress texture looks in Blender on the model. GIMP distinguishes between saving (<span class="smaller">CTRL</span>-S) in its native <span class="emphasis"><em>.xcf</em></span> format, which preserves layers and other information, and exporting images to other formats, such as .<span class="emphasis"><em>jpg</em></span> or .<span class="emphasis"><em>tga</em></span> (<span class="smaller">CTRL</span>-E). We need to do both so that we have the GIMP file with all its layers available for further editing as well as an image that we can use in Blender.</p><p>First, I saved my image as a <span class="emphasis"><em>.xcf</em></span> file, and then I exported it as a <span class="emphasis"><em>.tga</em></span> image. To open this image in Blender, I selected my Bat Creature object, switched to Edit mode, and in the UV Image editor, used Image▸Replace Image to swap the old, roughly painted texture for the new one. (Remember to do this for the material, too—though if you used the same image for the texture as you applied to the mesh, it should update automatically.) You should then see your updated texture on your mesh. You could now start painting in Blender again, but I opted to stay in GIMP for the moment.</p></div><div class="sect3" title="Adding Details"><div class="titlepage"><div><div><h4 class="title" id="adding_details">Adding Details</h4></div></div></div><p>Back in GIMP, with our ambient occlusion now working well alongside our painted texture, we can start adding more details. I used a mix of hand painting and photographic textures.</p><p>To start, it’s handy to build up some texture using photos, followed by adjusting and supplementing the existing texture with some hand painting. To that end, I grabbed some elephant-skin photos from CGTextures, with some wrinkles and skin texture that complemented my texture nicely. I opened them as layers in my texture image file and scaled them so that the scale of the wrinkles in the texture roughly matched those of the Bat Creature.</p><p>I used the Move tool to spread out the textures on my image, knowing that their precise placement wouldn’t be important for the time being. I then created a new layer (<span class="smaller">SHIFT-CTRL</span>-N or Layer▸New Layer) and set its blending mode to Overlay. Next, by dragging the layer’s icon in the Layers dialog up or down, I placed it between my original color texture and my Ambient Occlusion layer in the layers stack.</p><p>Using the Clone tool (<span class="strong"><strong>C</strong></span>), I first set the clone source (<span class="smaller">CTRL</span>-click) to one of the skin textures, making sure it was selected in the Layers dialog first. Then, I switched to my new layer and began cloning the skin texture in various areas (see <a class="xref" href="ch11.html#cloning_in_texture_from_photographs_with" title="Figure 11-12. Cloning in texture from photographs with the Clone tool. I added the photograph as a new layer; then, on yet another new layer (set to Overlay), I cloned from the photo to create some skin detail for my texture.">Figure 11-12</a>). I frequently switched between the different skin textures to find areas that would suit the different parts of my creature’s skin. I also used the Flip (<span class="smaller">SHIFT</span>-F) and Rotate (<span class="smaller">SHIFT</span>-R) tools to flip and rotate the skin images to see whether they worked better in different orientations before cloning. To get at areas hidden by the skin images, I toggled their visibility using the eye icon in the Layers dialog or simply moved them to one side with the Move tool.</p><p>With a first layer of detail built up from photo images, I hid the photo textures and started working on some hand-painted details (see <a class="xref" href="ch11.html#some_close-ups_of_hand-painted_details" title="Figure 11-13. Some close-ups of hand-painted details">Figure 11-13</a>). First, I added some veins to the wings on a new layer using the Paintbrush tool and a soft-edged brush. Next (on another new layer), I added some spots to the skin in areas like the shoulders, temples, and back in both darker and lighter colors. The Grunge brush I used earlier works well for this with the spacing (found in the Brushes dialog) turned up higher, as does a simple, small, hard-edged brush for painting specific spots. Keeping different kinds of details on different layers makes it easy to mix and combine them in different ways and comes in handy when creating specular and other kinds of maps.</p></div><div class="sect3" title="Nails and Teeth"><div class="titlepage"><div><div><h4 class="title" id="nails_and_teeth">Nails and Teeth</h4></div></div></div><p>The nails and teeth of the Bat Creature are included in the same UV map as the body. For the nails, I painted a dark purplish color with some brighter yellowish highlights. For the teeth, I used a yellow color with some brown near where the teeth would meet the gums, as shown in <a class="xref" href="ch11.html#nails_and_teeth-id00019" title="Figure 11-14. The nails and teeth">Figure 11-14</a>.</p><div class="figure"><a id="cloning_in_texture_from_photographs_with"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00221"/><img src="httpatomoreillycomsourcenostarchimages1538684.png.jpg" alt="Cloning in texture from photographs with the Clone tool. I added the photograph as a new layer; then, on yet another new layer (set to Overlay), I cloned from the photo to create some skin detail for my texture."/></div></div><div class="figure-title">Figure 11-12. Cloning in texture from photographs with the Clone tool. I added the photograph as a new layer; then, on yet another new layer (set to Overlay), I cloned from the photo to create some skin detail for my texture.</div></div><div class="figure"><a id="some_close-ups_of_hand-painted_details"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00222"/><img src="httpatomoreillycomsourcenostarchimages1538686.png.jpg" alt="Some close-ups of hand-painted details"/></div></div><div class="figure-title">Figure 11-13. Some close-ups of hand-painted details</div></div><div class="figure"><a id="nails_and_teeth-id00019"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00223"/><img src="httpatomoreillycomsourcenostarchimages1538688.png.jpg" alt="The nails and teeth"/></div></div><div class="figure-title">Figure 11-14. The nails and teeth</div></div></div></div><div class="sect2" title="Fixing Seams"><div class="titlepage"><div><div><h3 class="title" id="fixing_seams">Fixing Seams</h3></div></div></div><p><a id="iddle1148" class="indexterm"/><a id="iddle1261" class="indexterm"/><a id="iddle1385" class="indexterm"/><a id="iddle1549" class="indexterm"/><a id="iddle1557" class="indexterm"/><a id="iddle1747" class="indexterm"/><a id="iddle1794" class="indexterm"/><a id="iddle1943" class="indexterm"/><a id="iddle2134" class="indexterm"/><a id="iddle2287" class="indexterm"/><a id="iddle2513" class="indexterm"/>With my texture for the skin nice and detailed, I headed back to Blender to check that it worked okay and then started fixing any seams in the texture. To do this, I exported my skin texture from GIMP and replaced the old skin texture in Blender with the new exported version.</p><p>There were bound to be some artifacts in the texture along UV seams, where I had painted over the edges of a UV island in GIMP. To fix these, use Blender’s Quick Edit feature:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>To fix a seam on one part of your model, navigate the 3D view to an angle where the seam is clearly visible.</p></li><li class="listitem"><p>To make sure that no shading is visible on screen, set the viewpoint display mode to <span class="strong"><strong>GLSL</strong></span> and set the material to <span class="strong"><strong>Shadeless</strong></span> in the Materials tab of the Properties editor.</p></li><li class="listitem"><p>In Texture Paint mode, set the Quick Edit resolution to <span class="strong"><strong>1024</strong></span> and click <span class="strong"><strong>Quick Edit</strong></span> from the Tool Shelf (see <a class="xref" href="ch11.html#exporting_a_screenshot_to_paint_over_in" title="Figure 11-15. Exporting a screenshot to paint over in GIMP with Quick Edit: the area with a seam in Blender 1; the view exported from Blender to GIMP with Quick Edit and painted over on a new layer 2; the new layer on its own, which will be saved over the original export 3; and the exported image applied to the texture, back in Blender, using the Apply operator 4">Figure 11-15</a> <span class="gray-background">2</span>). This opens a screenshot of that view in GIMP, which we can then start painting over.</p></li><li class="listitem"><p>For best results, scale up the screenshot in GIMP, using <span class="strong"><strong>Image</strong></span>▸<span class="strong"><strong>Image Size</strong></span>, and set the new size to <span class="strong"><strong>2048</strong></span>. Then, create a new transparent layer on which we will fix the seam (the reason for this will become clear shortly).</p></li><li class="listitem"><p>Using the <span class="strong"><strong>Clone</strong></span> tool, start cloning from the layer below to cover the seam; the Grunge brush shape works well for this. (Turning on <span class="strong"><strong>Sample Merged</strong></span> in the tool options will let you sample from all layers when you set the source, rather than having to switch layers first.)</p></li><li class="listitem"><p>With the seam painted out, disable the original layer, leaving only the newly painted layer that covers the seam. Use <span class="smaller">CTRL</span>-E to export the image and save over the original exported image from Blender.</p></li><li class="listitem"><p>Back in Blender, click <span class="strong"><strong>Apply</strong></span> to apply the painted-over image to your texture (see <a class="xref" href="ch11.html#exporting_a_screenshot_to_paint_over_in" title="Figure 11-15. Exporting a screenshot to paint over in GIMP with Quick Edit: the area with a seam in Blender 1; the view exported from Blender to GIMP with Quick Edit and painted over on a new layer 2; the new layer on its own, which will be saved over the original export 3; and the exported image applied to the texture, back in Blender, using the Apply operator 4">Figure 11-15</a> <span class="gray-background">4</span>). Because you saved only the areas of the image that covered the seam, only these areas are replaced. Repeat this process for any further seams on your model and then save the new fixed texture as a new image.</p></li></ol></div><div class="sect3" title="Reconciling Fixed Seams and Layered Images"><div class="titlepage"><div><div><h4 class="title" id="reconciling_fixed_seams_and_layered_imag">Reconciling Fixed Seams and Layered Images</h4></div></div></div><p>This process fixed my seams, but because I fixed the texture in Blender, I had only a single-layer image as a result. To get back to a layered format, I opened the corrected image in GIMP as a new layer in my texture file, on top of my other layers. I wanted to be able to keep my old layers visible where possible, so I needed to mask this layer to show through only in those areas where I fixed the seams. To accomplish this, do the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Set the new fixed layer’s blend mode to <span class="strong"><strong>Difference</strong></span> in the Layers dialog. The result of this blend mode is the difference between the colors on this layer and the pixels below, meaning that different areas look bright and unchanged areas remain black. Overall, it may look very dark at the moment because the differences are slight, but you’ll fix that shortly. You can use the result as the basis for a mask that shows only the fixed parts of the new layer.</p></li><li class="listitem"><p>Right-click on the top layer in the Layers dialog and select <span class="strong"><strong>New Layer from Visible</strong></span>. This creates a new layer that is a composite of all the layers below, merged into one. In our case, this is the difference between the fixed layer and the original layered image. Using the Levels tool (<span class="strong"><strong>Colors</strong></span>▸<span class="strong"><strong>Levels</strong></span>), you can increase the values of this layer to create something we can use as a mask. The Levels tool takes the current layer as the input and uses the settings you provide to adjust the values of the layer. You simply want to take any pixels that aren’t 100 percent black—areas where the fixed image differs from the original—and make them white. To do this, set the right-hand endpoint of the input gradient so that it’s close to the left-hand end by dragging it to the left (see <a class="xref" href="ch11.html#altering_the_values_of_a_layer_with_the" title="Figure 11-16. Altering the values of a layer with the Levels tool. Note how the handles for the input levels have been bunched up at the left side of the graph to increase the brightness of all but the darkest values to white.">Figure 11-16</a>) and click <span class="strong"><strong>OK</strong></span>.</p></li><li class="listitem"><p>The results may look slightly noisy and have some odd-looking colors, but the colors don’t matter because we’ll be using only the brightness of this layer as a mask. To smooth things out a bit, use the Gaussian Blur filter (<span class="strong"><strong>Filters</strong></span>▸<span class="strong"><strong>Blur</strong></span>▸<span class="strong"><strong>Gaussian Blur</strong></span>) to blur the layer by about 10 pixels.</p></li><li class="listitem"><p>Next, copy this new merged layer and use it as a mask for the fixed texture. Press <span class="smaller">CTRL</span>-A to select all and <span class="smaller">CTRL</span>-C to copy the layer to the clipboard.</p><div class="figure"><a id="exporting_a_screenshot_to_paint_over_in"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00224"/><img src="httpatomoreillycomsourcenostarchimages1538690.png.jpg" alt="Exporting a screenshot to paint over in GIMP with Quick Edit: the area with a seam in Blender 1; the view exported from Blender to GIMP with Quick Edit and painted over on a new layer 2; the new layer on its own, which will be saved over the original export 3; and the exported image applied to the texture, back in Blender, using the Apply operator 4"/></div></div><div class="figure-title">Figure 11-15. Exporting a screenshot to paint over in GIMP with Quick Edit: the area with a seam in Blender <span class="gray-background">1</span>; the view exported from Blender to GIMP with Quick Edit and painted over on a new layer <span class="gray-background">2</span>; the new layer on its own, which will be saved over the original export <span class="gray-background">3</span>; and the exported image applied to the texture, back in Blender, using the Apply operator <span class="gray-background">4</span></div></div><div class="figure"><a id="altering_the_values_of_a_layer_with_the"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00225"/><img src="httpatomoreillycomsourcenostarchimages1538692.png.jpg" alt="Altering the values of a layer with the Levels tool. Note how the handles for the input levels have been bunched up at the left side of the graph to increase the brightness of all but the darkest values to white."/></div></div><div class="figure-title">Figure 11-16. Altering the values of a layer with the Levels tool. Note how the handles for the input levels have been bunched up at the left side of the graph to increase the brightness of all but the darkest values to white.</div></div></li><li class="listitem"><p><a id="iddle1144" class="indexterm"/><a id="iddle1145" class="indexterm"/><a id="iddle1149" class="indexterm"/><a id="iddle1528" class="indexterm"/><a id="iddle1569" class="indexterm"/><a id="iddle1605" class="indexterm"/><a id="iddle1722" class="indexterm"/><a id="iddle1732" class="indexterm"/><a id="iddle2383" class="indexterm"/><a id="iddle2509" class="indexterm"/><a id="iddle2510" class="indexterm"/><a id="iddle2514" class="indexterm"/><a id="iddle2712" class="indexterm"/>Disable the merged layer’s visibility in the Layers dialog and set the Blend mode for the fixed layer back to <span class="strong"><strong>Normal</strong></span>. Then, to add a layer mask to the fixed layer, right-click on it and choose <span class="strong"><strong>Add Layer Mask</strong></span>. Choose white as the color of the layer mask and then click <span class="strong"><strong>Add</strong></span> to create it.</p></li><li class="listitem"><p>Press <span class="smaller">CTRL</span>-V to paste in the mask we created from the merged layer as a “floating” layer—one you can continue working on and moving around before anchoring it and applying it to the layer you pasted it into. Since we don’t need to make any changes to it, press <span class="smaller">CTRL</span>-H to anchor it.</p></li></ol></div><p>Our fixed image is now masked so that only the areas that differ from the original texture show over the layers below. This more or less completes the creation of our diffuse texture (see <a class="xref" href="ch11.html#finished_diffuse_texture" title="Figure 11-17. The finished diffuse texture">Figure 11-17</a>), so save the image as an <span class="emphasis"><em>.xcf</em></span> file and export a new <span class="emphasis"><em>.tga</em></span> image of the diffuse texture.</p></div></div><div class="sect2" title="Layer Masks"><div class="titlepage"><div><div><h3 class="title" id="layer_masks">Layer Masks</h3></div></div></div><p>A <span class="emphasis"><em>layer mask</em></span> is a black-and-white image that determines how a layer in GIMP mixes with the layer below it. White areas are applied 100 percent if the overall opacity of the layer is also 100 percent (otherwise the two are multiplied together), black areas are completely masked out, and values in between blend between the two extremes.</p><p>When you add a mask to a layer (as we did above), it appears to the right of that layer’s thumbnail in the Layers dialog. To edit the new layer mask, click its thumbnail, and you can paint on it just as you would on a normal layer (except that it allows only black and white values, so tools and filters that work with RGB colors are not available).</p><p>Click the thumbnail for the layer to go back to painting normally (the thumbnail of the active layer or mask is outlined in white). You can apply the effect of a layer mask by right-clicking the layer in the Layers dialog and choosing <span class="strong"><strong>Apply Layer Mask</strong></span>. This will apply the mask to the layer itself, making masked areas transparent.</p></div><div class="sect2" title="Creating Specular and Hardness Textures"><div class="titlepage"><div><div><h3 class="title" id="creating_specular_and_hardness_textures">Creating Specular and Hardness Textures</h3></div></div></div><p>With our diffuse texture painted and the seams cleared up, it’s time to create our specular and hardness textures. The <span class="emphasis"><em>specular texture</em></span> defines the color and intensity of our creature’s specular reflections: Dark areas will look matte, and bright areas will look shiny. The <span class="emphasis"><em>hardness map</em></span> determines how soft the highlights are: Low values create soft, spreadout reflections, and high values create smaller, more intense highlights.</p><p>To create these textures, we can duplicate and modify the layers of the diffuse map. We’ll work in the same GIMP <span class="emphasis"><em>.xcf</em></span> file to create these textures, which will give us ready access to the layers we’ve already created.</p></div><div class="sect2" title="Layer Groups"><div class="titlepage"><div><div><h3 class="title" id="layer_groups">Layer Groups</h3></div></div></div><p>To make it easier to manage creating specular and hardness textures, I used <span class="emphasis"><em>layer groups</em></span> to organize my layers. Layer groups allow you to group layers and expand and collapse those groups in the Layers dialog, making it simpler to keep things organized. To create a layer group, right-click on a layer in the Layers dialog, and choose <span class="strong"><strong>New Layer Group</strong></span> or click the folder icon at the bottom of the dialog. You can then drag other layers onto the group layer to assign them to the group. To organize my textures for the Bat Creature, I created three layer groups: one for the diffuse texture, one for my specular texture, and one for hardness (see <a class="xref" href="ch11.html#organizing_layers_with_layer_groups" title="Figure 11-18. Organizing layers with Layer Groups">Figure 11-18</a>).</p><div class="figure"><a id="finished_diffuse_texture"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00226"/><img src="httpatomoreillycomsourcenostarchimages1538694.png.jpg" alt="The finished diffuse texture"/></div></div><div class="figure-title">Figure 11-17. The finished diffuse texture</div></div><div class="figure"><a id="organizing_layers_with_layer_groups"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00227"/><img src="httpatomoreillycomsourcenostarchimages1538696.png.jpg" alt="Organizing layers with Layer Groups"/></div></div><div class="figure-title">Figure 11-18. Organizing layers with Layer Groups</div></div><div class="sect3" title="Specular Map"><div class="titlepage"><div><div><h4 class="title" id="specular_map">Specular Map</h4></div></div></div><p><a id="iddle1112" class="indexterm"/><a id="iddle1142" class="indexterm"/><a id="iddle1212" class="indexterm"/><a id="iddle1355" class="indexterm"/><a id="iddle1479" class="indexterm"/><a id="iddle1604" class="indexterm"/><a id="iddle1752" class="indexterm"/><a id="iddle2376" class="indexterm"/><a id="iddle2507" class="indexterm"/><a id="iddle2567" class="indexterm"/>For the specular map, I first created a new layer from the visible layers (Layer▸New Layer from Visible) and placed it in the layer group for my specular map. I inverted the colors of the texture (Colors▸Invert) and then tweaked the levels (Colors▸Levels) to give the layer some more contrast. Next, I changed the color of the layer using Colors▸Hue and Saturation and shifted the Hue slider to give it a more bluish tint (see <a class="xref" href="ch11.html#creating_the_specular_map_by_tweaking_th" title="Figure 11-19. Creating the specular map by tweaking the diffuse map: diffuse map 1; invert colors 2; adjust levels, hue, and saturation 3; and paint extra details 4.">Figure 11-19</a> at <span class="gray-background">3</span>). Although this already gave a pretty good specular texture, to get more variation, I duplicated the layers I created earlier for the diffuse map with speckles and spots on them and placed them in the layer group for the specular map, adjusting their colors appropriately.</p><p>Next, I started tweaking some areas to get the right level of specularity. For example, I wanted the lips and the area around the eye to look moist and shiny, and I wanted the torso and arms to look more matte and dry. I could have started painting over using a basic brush, but doing so would have lost a lot of the texture I’d already worked to create. Instead, I was able to preserve some texture by using a different Brush mode. The Brush mode can be set from the Tool Options dialog. Brush modes have the same options (normal, multiply, addition, and so on) that Blend modes for layers have. A good way to tweak the values in an image without losing detail is to use the paintbrush with the Brush mode set to Overlay and to use black to darken areas and white to brighten them.</p><p>In certain areas, I wanted to keep some texture while getting rid of very dark or light values, and here the Lighten Only and Darken Only brush modes came in handy. I used Darken Only and a midvalue color to get rid of overly bright areas without losing darker elements of the texture, and vice versa. <a class="xref" href="ch11.html#finished_specular_texture_left_parenthes" title="Figure 11-20. The finished specular texture (left) and hardness texture (right)">Figure 11-20</a> shows the finished specular texture.</p></div><div class="sect3" title="Hardness Map"><div class="titlepage"><div><div><h4 class="title" id="hardness_map">Hardness Map</h4></div></div></div><p>To create the hardness texture, I first made a New From Visible layer from the diffuse texture. (You can turn off the visibility of the specular texture layer group to make the diffuse texture visible again.) Next, I inverted the layer, adjusted the levels, and began tweaking by hand with the Paint tool, just as I did above. Because the hardness texture benefits from more variation, I created a new layer and painted in more speckles over the body (both lighter and darker ones). <a class="xref" href="ch11.html#finished_specular_texture_left_parenthes" title="Figure 11-20. The finished specular texture (left) and hardness texture (right)">Figure 11-20</a> also shows the finished hardness texture.</p></div></div><div class="sect2" title="Texturing the Eyes"><div class="titlepage"><div><div><h3 class="title" id="texturing_the_eyes">Texturing the Eyes</h3></div></div></div><p>With most of the texturing done, I moved on to texturing the eyes. For this I made a new image, which I painted by hand by taking the following steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Create a new image that is 1024×1024 pixels in size (<span class="strong"><strong>File</strong></span>▸<span class="strong"><strong>New Image</strong></span>). Then, to get a guide for the middle of the eye, create two guidelines through the middle of the image, horizontally and vertically. To do this, click <span class="strong"><strong>Image</strong></span>▸<span class="strong"><strong>Guides</strong></span>▸<span class="strong"><strong>New Guide by Percent.</strong></span> To create guidelines for placing the pupil, repeat this once for the vertical guide and once for the horizontal one, each at 50 percent of the image’s height or width.</p></li><li class="listitem"><p>Fill the first layer with a yellowish color and then create a new layer for the iris. To get the correct shape, use the <span class="strong"><strong>Ellipse Selection</strong></span> tool (<span class="strong"><strong>E</strong></span>) and click and drag from the center of the image to draw out a circle. Holding down <span class="smaller">CTRL</span> makes the selection expand from the center, and holding <span class="smaller">SHIFT</span> constrains the selection to be circular.</p><div class="figure"><a id="creating_the_specular_map_by_tweaking_th"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00228"/><img src="httpatomoreillycomsourcenostarchimages1538698.png.jpg" alt="Creating the specular map by tweaking the diffuse map: diffuse map 1; invert colors 2; adjust levels, hue, and saturation 3; and paint extra details 4."/></div></div><div class="figure-title">Figure 11-19. Creating the specular map by tweaking the diffuse map: diffuse map <span class="gray-background">1</span>; invert colors <span class="gray-background">2</span>; adjust levels, hue, and saturation <span class="gray-background">3</span>; and paint extra details <span class="gray-background">4</span>.</div></div><div class="figure"><a id="finished_specular_texture_left_parenthes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00229"/><img src="httpatomoreillycomsourcenostarchimages1538700.png.jpg" alt="The finished specular texture (left) and hardness texture (right)"/></div></div><div class="figure-title">Figure 11-20. The finished specular texture (left) and hardness texture (right)</div></div></li><li class="listitem"><a id="iddle1607" class="indexterm"/><a id="iddle2384" class="indexterm"/><p><a id="iddle1143" class="indexterm"/><a id="iddle1453" class="indexterm"/><a id="iddle1480" class="indexterm"/><a id="iddle1503" class="indexterm"/><a id="iddle1511" class="indexterm"/><a id="iddle1630" class="indexterm"/><a id="iddle1695" class="indexterm"/><a id="iddle1697" class="indexterm"/><a id="iddle1723" class="indexterm"/><a id="iddle2035" class="indexterm"/><a id="iddle2223" class="indexterm"/><a id="iddle2293" class="indexterm"/><a id="iddle2381" class="indexterm"/><a id="iddle2508" class="indexterm"/><a id="iddle2518" class="indexterm"/><a id="iddle2520" class="indexterm"/><a id="iddle2545" class="indexterm"/><a id="iddle2563" class="indexterm"/>Draw out a circular outline for the outside of the iris and then subtract the pupil shape from the middle of the iris selection (hold down <span class="smaller">CTRL</span> before clicking and dragging). This time, I created an elliptical shape to give the eye an evil look.</p></li><li class="listitem"><p>Feather (<span class="strong"><strong>Select</strong></span>▸<span class="strong"><strong>Feather, 20 Pixels</strong></span>) the selection to give the iris a more gradual transition into the rest of the eye. Then, convert the selection into a layer mask by right-clicking on the layer in the Layers dialog, selecting <span class="strong"><strong>Add Layer Mask</strong></span>, and under <span class="strong"><strong>Initialize Layer To</strong></span>, choosing <span class="strong"><strong>Selection</strong></span>. This creates a layer mask with your selection that allows you to paint on the layer itself (select it in the Layers dialog first) without losing the shape of the iris (see <a class="xref" href="ch11.html#mask_for_the_iriscomma_created_using_the" title="Figure 11-21. The mask for the iris, created using the Elliptical Select tools (left) and the eye texture (right)">Figure 11-21</a>).</p></li><li class="listitem"><p>Fill the iris with black using the <span class="strong"><strong>Fill</strong></span> tool and then use the <span class="strong"><strong>Paint</strong></span> tool and a large, soft brush to add color. I began with a bright orange and then added elements of red, green, and purple to build up different colors (use low pressure if you have a tablet, or set the brush opacity low). I left the edges of the iris black.</p></li><li class="listitem"><p>Now add color around the outside of the eye (the <span class="emphasis"><em>sclera</em></span>) on the layer below the iris. I painted a lighter yellow here and mixed it with a darker, reddish brown. I also filled the pupil with black on this layer. My eye texture now looked like <a class="xref" href="ch11.html#mask_for_the_iriscomma_created_using_the" title="Figure 11-21. The mask for the iris, created using the Elliptical Select tools (left) and the eye texture (right)">Figure 11-21</a>. I saved this texture as a <span class="emphasis"><em>.tga</em></span> file.</p></li></ol></div><div class="note" title="Note"><h3 class="title"><a id="ch11note05"/>Note</h3><p><span class="emphasis"><em>Because I decided to change the shape of the pupil slightly in my texture, I also tweaked the shape of the pupil on my model by selecting the pupil’s vertices and scaling them up on the <span class="italicAlt">z</span>-axis. I slightly adjusted the UV map, too (see <a class="xref" href="ch11.html#adjusting_the_pupil_to_fit_the_texturedo" title="Figure 11-22. Adjusting the pupil to fit the texture. Left: The adjusted UV coordinates. Right: The eye in Edit mode with the texture applied.">Figure 11-22</a>).</em></span></p></div><div class="figure"><a id="mask_for_the_iriscomma_created_using_the"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00230"/><img src="httpatomoreillycomsourcenostarchimages1538702.png.jpg" alt="The mask for the iris, created using the Elliptical Select tools (left) and the eye texture (right)"/></div></div><div class="figure-title">Figure 11-21. The mask for the iris, created using the Elliptical Select tools (left) and the eye texture (right)</div></div><div class="figure"><a id="adjusting_the_pupil_to_fit_the_texturedo"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00231"/><img src="httpatomoreillycomsourcenostarchimages1538704.png.jpg" alt="Adjusting the pupil to fit the texture. Left: The adjusted UV coordinates. Right: The eye in Edit mode with the texture applied."/></div></div><div class="figure-title">Figure 11-22. Adjusting the pupil to fit the texture. Left: The adjusted UV coordinates. Right: The eye in Edit mode with the texture applied.</div></div></div></div><div class="sect1" title="Texturing the Jungle Temple"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="texturing_the_jungle_temple-id00020">Texturing the Jungle Temple</h2></div></div></div><p>The textures for the Jungle Temple scene required a different approach. This project has a number of objects that require very similar textures, so texturing each one individually would be time consuming and unnecessary. Instead, I chose to use tileable, seamless textures to cover much of my scene and to supplement these with details in key places. Tileable textures allow a single texture to be used across multiple models.</p><div class="sect2" title="Hardness vs. Roughness"><div class="titlepage"><div><div><h3 class="title" id="hardness_vsdot_roughness">Hardness vs. Roughness</h3></div></div></div><p>For the Bat Creature, one of the texture types I created was a hardness texture, which will be used to define which areas of my materials have sharp, small specular reflections and which parts have blurry, more spread out specular reflections. To define these areas, the texture is mapped to the hardness value of the material’s specular shader. Dark areas of the texture then result in soft, blurry specular reflections, and bright areas result in sharp, hard specular reflections.</p><p>However, this is only the case when rendering in Blender Internal. When rendering with Cycles, materials are created differently (as we will see in <a class="xref" href="ch12.html" title="Chapter 12. Materials">Chapter 12</a>). And instead of a hardness value, specular shaders now have something called a <span class="emphasis"><em>roughness</em></span> value. This works in the opposite way to a hardness value, but defines roughly the same thing. For a roughness texture, bright areas denote soft, blurry reflections, and dark areas denote sharp reflections. Keep this in mind when creating your textures.</p></div><div class="sect2" title="Creating Seamless Textures with GIMP"><div class="titlepage"><div><div><h3 class="title" id="creating_seamless_textures_with_gimp">Creating Seamless Textures with GIMP</h3></div></div></div><p><a id="iddle1238" class="indexterm"/><a id="iddle1334" class="indexterm"/><a id="iddle1563" class="indexterm"/><a id="iddle1625" class="indexterm"/><a id="iddle1629" class="indexterm"/><a id="iddle1699" class="indexterm"/><a id="iddle1724" class="indexterm"/><a id="iddle2005" class="indexterm"/><a id="iddle2135" class="indexterm"/><a id="iddle2190" class="indexterm"/><a id="iddle2284" class="indexterm"/><a id="iddle2474" class="indexterm"/><a id="iddle2522" class="indexterm"/><a id="iddle2536" class="indexterm"/><a id="iddle2543" class="indexterm"/><a id="iddle2693" class="indexterm"/>To create a seamless texture, the edges of the image must align with one another, and the features of the image must continue smoothly across the boundary. It helps to make sure that the texture doesn’t have features that repeat too obviously when tiled (large, distinctive features are easily noticed when they repeat often). We also want to make the image square so that we won’t have to scale an object’s UV coordinates when applying the seamless texture.</p><p>To create a seamless rock texture for the stone blocks of the walls and floors, I began with a rock texture from CGTextures. First, I increased the size of the image to make it square with Image▸Canvas Size. Next, I used Layer▸Add Alpha Channel to give the layer a transparent background, which we’ll fill shortly, and Layer▸Layer to Image Size to match the size of the layer to the image.</p><p>Now we have to fill in the remainder of the image and make its edges align with each other. To do this, I used the Offset tool and the Resynthesize filter. First, I offset the image by 50 percent on the <span class="emphasis"><em>x</em></span>- and <span class="emphasis"><em>y</em></span>-axes (Layers▸Transform▸Offset), choosing the x/2 y/2 option and clicking Offset. This shifted the image and repeated it, placing the edges against one another, as shown in <a class="xref" href="ch11.html#making_an_image_seamless_increase_the_ca" title="Figure 11-23. Making an image seamless: Increase the canvas size to make it square 1; offset the image 2; fill in the blanks and fix the seams with the Resynthesize filter 3; and re-offset to check the texture and resynthesize any problem areas 4.">Figure 11-23</a> at <span class="gray-background">2</span>. The new edges now matched up because they were in the <span class="emphasis"><em>middle</em></span> of the image previously.</p><p>To fix the areas where the edges met, I used GIMP’s Resynthesize feature to fill selected areas seamlessly. To create a selection, I used GIMP’s Quick Mask feature (<span class="smaller">CTRL</span>-Q) to paint my selection directly with GIMP’s paint tools. Areas painted white are selected, while areas painted black are unselected. While working in Quick Mask mode, an image will be highlighted in red, but selected areas will appear as normal. I pressed <span class="smaller">CTRL</span>-Q to enable quick masking and roughly painted a white stripe down the seams where the image edges met, and filled in the gap left in the middle. Then, I pressed <span class="smaller">CTRL</span>-Q again to convert my quick mask to a selection.</p><p>Next, I used Filters▸Map▸Resynthesize to fill the selected area. I turned on Make Horizontally Tileable and Make Vertically Tileable, and kept the texture source as the current layer. After running the filter, I offset the image again by a different amount (a third in each direction) and resynthesized any remaining problem areas. The result is the texture shown on the right of <a class="xref" href="ch11.html#making_an_image_seamless_increase_the_ca" title="Figure 11-23. Making an image seamless: Increase the canvas size to make it square 1; offset the image 2; fill in the blanks and fix the seams with the Resynthesize filter 3; and re-offset to check the texture and resynthesize any problem areas 4.">Figure 11-23</a> at <span class="gray-background">4</span>. This texture will now tile seamlessly.</p><div class="sect3" title="Testing the Texture"><div class="titlepage"><div><div><h4 class="title" id="testing_the_texture">Testing the Texture</h4></div></div></div><p>To test the texture, create a duplicate of the image in GIMP (<span class="smaller">CTRL</span>-D) and scale it way down (for example, to 512×512). Then, use <span class="strong"><strong>Filters</strong></span>▸<span class="strong"><strong>Map</strong></span>▸<span class="strong"><strong>Tile</strong></span> to create a tiled version of the texture. If any areas show obvious repeats, remove them by going back to the full-size texture and selecting and resynthesizing any trouble spots. Once you’re happy with how the texture tiles, save it as a <span class="emphasis"><em>.tga</em></span> file.</p><p>To test your texture in Blender, select an object and then assign the image to it in the UV Texture editor. Switch to <span class="strong"><strong>Textured Viewport</strong></span> shading and set the shading type to <span class="strong"><strong>Multitexture</strong></span> in the display panel of the Properties region so that you can see the image assigned to the object. You may need to scale the UVs up or down or tweak the texture a bit to get the best results.</p></div><div class="sect3" title="Creating Additional Textures"><div class="titlepage"><div><div><h4 class="title" id="creating_additional_textures">Creating Additional Textures</h4></div></div></div><p>I repeated the process for producing a seamless texture to create a second rock texture, a bark texture for the trees, and a dirt texture for the ground, as you can see in <a class="xref" href="ch11.html#seamless_textures_for_the_jungle_temple" title="Figure 11-24. Seamless textures for the Jungle Temple scene, from left to right: dirt, two rock textures, and a bark texture. The top textures are diffuse maps and the bottom textures are specular maps.">Figure 11-24</a>. I also created specular maps using the same techniques to modify and supplement the diffuse maps that I used for the Bat Creature. For the bark texture, I didn’t make the texture square since I would be wrapping it around the trunk of the tree. Instead, I opted for a narrow, tall texture. This results in a more efficient use of texture space, as the texture will repeat often along the length of the tree while only once around the circumference of the trunk.</p><p>To make different textures—like the two rock textures—work better together, you can use GIMP’s Hue-Saturation and Curves tools. By adjusting the hue and saturation of an image, you can make the overall coloration of one texture more similar to the other, and by using the Curves tool, you can brighten or darken the image to make the range of values of the two textures more similar. For example, the two rock textures in <a class="xref" href="ch11.html#seamless_textures_for_the_jungle_temple" title="Figure 11-24. Seamless textures for the Jungle Temple scene, from left to right: dirt, two rock textures, and a bark texture. The top textures are diffuse maps and the bottom textures are specular maps.">Figure 11-24</a> initially had quite different colors and levels of brightness, but I adjusted them to make them look more similar. This makes it much easier to blend these two textures later on when creating further textures and materials.</p></div></div><div class="sect2" title="Texturing the Ground and Trees"><div class="titlepage"><div><div><h3 class="title" id="texturing_the_ground_and_trees">Texturing the Ground and Trees</h3></div></div></div><p>To create textures for the ground and the trees in my scene, I made heavy use of Blender’s Project <a id="iddle1589" class="indexterm"/>Paint tools to mix together the seamless textures I created in GIMP. This approach allowed me to quickly build up more unique textures by using the generic tileable texture I had already created as a starting point.</p><div class="figure"><a id="making_an_image_seamless_increase_the_ca"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00232"/><img src="httpatomoreillycomsourcenostarchimages1538706.png.jpg" alt="Making an image seamless: Increase the canvas size to make it square 1; offset the image 2; fill in the blanks and fix the seams with the Resynthesize filter 3; and re-offset to check the texture and resynthesize any problem areas 4."/></div></div><div class="figure-title">Figure 11-23. Making an image seamless: Increase the canvas size to make it square <span class="gray-background">1</span>; offset the image <span class="gray-background">2</span>; fill in the blanks and fix the seams with the Resynthesize filter <span class="gray-background">3</span>; and re-offset to check the texture and resynthesize any problem areas <span class="gray-background">4</span>.</div></div><div class="sect3" title="Ground Texture"><div class="titlepage"><div><div><h4 class="title" id="ground_texture">Ground Texture</h4></div></div></div><p>While I now had a seamless texture for the ground, it wasn’t particularly unique or tailored to the scene. To create a more interesting ground texture, I chose to project the existing seamless texture to a unique <a id="iddle1042" class="indexterm"/><a id="iddle1262" class="indexterm"/><a id="iddle1700" class="indexterm"/><a id="iddle2283" class="indexterm"/><a id="iddle2420" class="indexterm"/><a id="iddle2523" class="indexterm"/><a id="iddle2592" class="indexterm"/>unwrapped one and then to embellish it with some extra details. To accomplish this, take the following steps:</p><div class="figure"><a id="seamless_textures_for_the_jungle_temple"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00233"/><img src="httpatomoreillycomsourcenostarchimages1538708.png.jpg" alt="Seamless textures for the Jungle Temple scene, from left to right: dirt, two rock textures, and a bark texture. The top textures are diffuse maps and the bottom textures are specular maps."/></div></div><div class="figure-title">Figure 11-24. Seamless textures for the Jungle Temple scene, from left to right: dirt, two rock textures, and a bark texture. The top textures are diffuse maps and the bottom textures are specular maps.</div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Create a second set of UV coordinates, unwrapping the floor mesh to fill the new UV space as well as possible. Then, add a new blank image to the new UV set.</p></li><li class="listitem"><p>Use the <span class="strong"><strong>Clone</strong></span> tool to clone the seamless texture. I set the seamless soil texture as the image for the old UV coordinates and then selected my new set.</p></li><li class="listitem"><p>In Texture Paint mode, use the <span class="strong"><strong>Clone</strong></span> brush to clone the seamless texture onto your new unwrap. (Make sure that you also have Clone turned on in the Project Paint options and that the old UV map is set as the source for the cloning.)</p></li><li class="listitem"><p>To mix in a second texture, replace the old UV coordinate sets image with a different soil texture and repeat the cloning process again, this time adding only some small patches.</p></li><li class="listitem"><p>Finally, repeat the process using a mossy rock texture to add some stony patches to the ground. The final texture is a lot more distinctive and diverse, as shown in <a class="xref" href="ch11.html#projecting_seamless_textures_to_a_unique" title="Figure 11-25. Projecting seamless textures to a unique texture map in order to combine them and create something unique. Here, I’m using the Clone brush to clone from a seamless texture to my unique UV map.">Figure 11-25</a>.</p></li></ol></div></div><div class="sect3" title="Tree Textures"><div class="titlepage"><div><div><h4 class="title" id="tree_textures">Tree Textures</h4></div></div></div><p>To modify the texture for the trees, I began with a seamless bark texture and then blended in mossy and muddy elements to make the texture more interesting (see <a class="xref" href="ch11.html#texturing_the_treesdot_i_began_with_a_se" title="Figure 11-26. Texturing the trees. I began with a seamless bark texture and then blended in other textures in GIMP.">Figure 11-26</a>). This time, however, I projected the first seamless texture in Blender and then saved the image and switched to GIMP to add elements from other photographs. This let me use different brushes to clone together bits of different images and split my texture into layers while working. I then created specular and roughness maps for the tree from the diffuse map.</p></div></div><div class="sect2" title="Texturing the Statue"><div class="titlepage"><div><div><h3 class="title" id="texturing_the_statue">Texturing the Statue</h3></div></div></div><p>For the statue in the Jungle Temple scene, I wanted the more hidden parts to look mossy and overgrown and the exposed parts to be bare rock. To accomplish this, I could have cloned in the mossy areas by hand, but instead, I chose to use the ambient occlusion map I baked earlier, which is already darker in the crevices, as a mask.</p><p>To do this in Blender, I duplicated the UV coordinate set for the statue and assigned the ambient occlusion texture to it. Then, I used this UV set as a mask layer for cloning a mossy texture over a rock texture, as follows:</p><div class="figure"><a id="projecting_seamless_textures_to_a_unique"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00234"/><img src="httpatomoreillycomsourcenostarchimages1538710.png.jpg" alt="Projecting seamless textures to a unique texture map in order to combine them and create something unique. Here, I’m using the Clone brush to clone from a seamless texture to my unique UV map."/></div></div><div class="figure-title">Figure 11-25. Projecting seamless textures to a unique texture map in order to combine them and create something unique. Here, I’m using the Clone brush to clone from a seamless texture to my unique UV map.</div></div><div class="figure"><a id="texturing_the_treesdot_i_began_with_a_se"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00235"/><img src="httpatomoreillycomsourcenostarchimages1538712.png.jpg" alt="Texturing the trees. I began with a seamless bark texture and then blended in other textures in GIMP."/></div></div><div class="figure-title">Figure 11-26. Texturing the trees. I began with a seamless bark texture and then blended in other textures in GIMP.</div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a id="iddle1978" class="indexterm"/><a id="iddle2030" class="indexterm"/><a id="iddle2424" class="indexterm"/><a id="iddle2621" class="indexterm"/><a id="iddle2632" class="indexterm"/>Duplicate the original UV map twice by clicking the + icon in the UV Coordinates panel of the Object Data tab in the Properties editor. Rename each set so that you’ll know which is which. As the names for my sets, I chose <span class="emphasis"><em>Paint</em></span> for my final painted texture, <span class="emphasis"><em>Mask</em></span> for my mask image, and <span class="emphasis"><em>Cube</em></span>. I would use the Cube UV set for projecting my seamless textures, so I reunwrapped the statue in Edit mode using the <span class="strong"><strong>Cube Project</strong></span> option to give an unwrap with nice consistency between parts of the model.</p></li><li class="listitem"><p>Assign your seamless rock texture to the Cube UV set, scaling it to suit the details in the rock. Then, switch to your Paint UV set and use the <span class="strong"><strong>Clone</strong></span> tool (make sure Clone is turned on in the Project Paint panel) to clone the rock texture from the Cube project UV set to the painted texture.</p></li><li class="listitem"><p>To mix in the second texture, use the Project Paint <span class="strong"><strong>Stencil</strong></span> option. Switch to Edit mode and assign your ambient occlusion map to the Mask UV set by selecting the <span class="strong"><strong>Mask UV</strong></span> set in the Object Data tab of the Properties editor. Then, assign a different rock texture to the Cube UV set, but this time use a moss-covered rock texture.</p></li><li class="listitem"><p>Now return to texture painting on the Paint layer (again selecting it in the Properties editor to make it the active UV set). Switch on <span class="strong"><strong>Stencil</strong></span> in the Project Paint panel, choosing your mask UV set from the drop-down menu beside it. Then, with the <span class="strong"><strong>Clone</strong></span> brush, paint the second rock texture over the original one. The effect of the brush is automatically masked according to the ambient occlusion map, allowing you to easily paint only on the exposed areas, as shown in <a class="xref" href="ch11.html#using_the_project_paint_mask_setting_to" title="Figure 11-27. Using the Project Paint Mask setting to mask the effect of the Clone brush allowed me to mix textures according to an ambient occlusion map.">Figure 11-27</a>.</p></li></ol></div><p>After saving the resulting image as a <span class="emphasis"><em>.tga</em></span> file, I used the ambient occlusion map in GIMP to lighten the exposed areas of the texture by opening the painted texture and adding the ambient occlusion map over the top (using Open as Layer). Setting the ambient occlusion map’s blend mode to Overlay and reducing its opacity subtly lightened the exposed areas of the statue and darkened the crevices, as shown in <a class="xref" href="ch11.html#statue_texture_opened_in_gimp_with_an_am" title="Figure 11-28. The statue texture opened in GIMP with an ambient occlusion map overlaid on top">Figure 11-28</a>.</p><div class="figure"><a id="using_the_project_paint_mask_setting_to"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00236"/><img src="httpatomoreillycomsourcenostarchimages1538714.png.jpg" alt="Using the Project Paint Mask setting to mask the effect of the Clone brush allowed me to mix textures according to an ambient occlusion map."/></div></div><div class="figure-title">Figure 11-27. Using the Project Paint Mask setting to mask the effect of the Clone brush allowed me to mix textures according to an ambient occlusion map.</div></div><div class="figure"><a id="statue_texture_opened_in_gimp_with_an_am"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00237"/><img src="httpatomoreillycomsourcenostarchimages1538716.png.jpg" alt="The statue texture opened in GIMP with an ambient occlusion map overlaid on top"/></div></div><div class="figure-title">Figure 11-28. The statue texture opened in GIMP with an ambient occlusion map overlaid on top</div></div></div><div class="sect2" title="Texturing to Camera"><div class="titlepage"><div><div><h3 class="title" id="texturing_to_camera">Texturing to Camera</h3></div></div></div><p><a id="iddle1230" class="indexterm"/><a id="iddle1701" class="indexterm"/><a id="iddle2164" class="indexterm"/><a id="iddle2524" class="indexterm"/>When it came to the rocks and soil in the foreground of the Jungle Temple scene, tileable textures wouldn’t give quite the level of control I wanted. For this part of my scene, I opted to paint the textures for the ground and rocks as they appeared from the camera viewpoint. To do this, take the following steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Put the foreground rocks and soil on the same layer (use <span class="strong"><strong>M</strong></span> to move objects to a different layer and <span class="strong"><strong>P</strong></span> in Edit mode to part the selection from the current object if necessary).</p></li><li class="listitem"><p>Switch to <span class="strong"><strong>Textured</strong></span> view (with the shading set to <span class="strong"><strong>Single texture</strong></span> in the properties region) and assign your seamless textures to the UVs of your objects.</p></li><li class="listitem"><p>Use the <span class="strong"><strong>Render Active Viewport</strong></span> button (the camera icon) in the 3D Viewport header to render the current view to an image (see <a class="xref" href="ch11.html#rendering_the_view_to_an_image" title="Figure 11-29. Rendering the view to an image">Figure 11-29</a>). Then, save this as a .<span class="emphasis"><em>tga</em></span> image. (In order to be able to mix my rock textures together, I assigned my second rock texture to the stones and saved a second viewport render.)</p></li><li class="listitem"><p>Open these in the same document in GIMP (open the first normally and then open the second using <span class="strong"><strong>Open as Layers</strong></span>). Next, begin blending the two by adding a new layer mask to the top layer and painting in black areas to let the layer below show through.</p></li><li class="listitem"><p>Then, to soften the boundaries between the mud and rock, create a new layer and mix them together slightly using the <span class="strong"><strong>Clone</strong></span> tool and your <span class="strong"><strong>Grunge</strong></span> brush (see <a class="xref" href="ch11.html#editing_the_textures_projected_from_the" title="Figure 11-30. Editing the textures projected from the camera view. I filled in the background to prevent it from creating artifacts near the image boundary where the texture wraps around at the bottom. Then, I blended the textures on the objects in the foreground.">Figure 11-30</a>), saving the image as a <span class="emphasis"><em>.tga</em></span> file.</p></li></ol></div><p>Later on, this texture will be projected from the camera and used as part of the material for the foreground objects.</p><div class="figure"><a id="rendering_the_view_to_an_image"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00238"/><img src="httpatomoreillycomsourcenostarchimages1538718.png.jpg" alt="Rendering the view to an image"/></div></div><div class="figure-title">Figure 11-29. Rendering the view to an image</div></div></div><div class="sect2" title="Texturing the Leaves"><div class="titlepage"><div><div><h3 class="title" id="texturing_the_leaves">Texturing the Leaves</h3></div></div></div><p><a id="iddle1698" class="indexterm"/><a id="iddle1741" class="indexterm"/><a id="iddle2521" class="indexterm"/>For the leaves in the Jungle Temple scene, I wanted to create three textures: one for the color of the leaves, one for the specular map, and one for their transparency. I would use the transparency (alpha) map to make the parts of the mesh that are not actually part of a leaf transparent, thus giving the leaves detailed outlines without using geometry. This is doubly important for the leaves I generated with IvyGen, as these are just flat planes.</p><div class="sect3" title="Collecting the Leaf Images"><div class="titlepage"><div><div><h4 class="title" id="collecting_the_leaf_images">Collecting the Leaf Images</h4></div></div></div><p>I began by collecting leaf images that were roughly the shape I wanted. Then, I opened them in GIMP and selected the rough outline of the leaf with the Scissors tool, placing points around the edge of the leaf to trace its outline automatically. I could then refine this using Quick Masking and the Paintbrush tool with a hard-edged brush, painting with black or white to remove or add parts of the leaf selection. I used the leaf selection as a layer mask (Layers▸Mask▸Add Layer Mask and choosing Selection) to mask out the background of the leaf image.</p><div class="figure"><a id="editing_the_textures_projected_from_the"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00239"/><img src="httpatomoreillycomsourcenostarchimages1538720.png.jpg" alt="Editing the textures projected from the camera view. I filled in the background to prevent it from creating artifacts near the image boundary where the texture wraps around at the bottom. Then, I blended the textures on the objects in the foreground."/></div></div><div class="figure-title">Figure 11-30. Editing the textures projected from the camera view. I filled in the background to prevent it from creating artifacts near the image boundary where the texture wraps around at the bottom. Then, I blended the textures on the objects in the foreground.</div></div></div><div class="sect3" title="Alpha Map"><div class="titlepage"><div><div><h4 class="title" id="alpha_map">Alpha Map</h4></div></div></div><p>The next step was to create the alpha, color, and specular images. To create the alpha texture, I clicked the layer mask, pressed <span class="smaller">CTRL</span>-A to select all, and pressed <span class="smaller">CTRL</span>-C to copy the mask to the clipboard. Then, I clicked New Layer and pasted in the mask, now visible as a normal layer. <a class="xref" href="ch11.html#textures_for_a_single_leafcomma_from_lef" title="Figure 11-31. The textures for a single leaf, from left to right: diffuse, specular, and alpha. These textures are used on my IvyGen mesh.">Figure 11-31</a> shows the finished alpha map.</p></div><div class="sect3" title="Diffuse Map"><div class="titlepage"><div><div><h4 class="title" id="diffuse_map">Diffuse Map</h4></div></div></div><p>For the diffuse map, I added a uniform color background and got rid of any specular highlights in the photo to make it more suitable to use as a texture. For the background, I created a new layer and filled it with a green to match the leaf color so that when the material blended into transparency, there would <a id="iddle1413" class="indexterm"/><a id="iddle1516" class="indexterm"/><a id="iddle1665" class="indexterm"/><a id="iddle1666" class="indexterm"/><a id="iddle1740" class="indexterm"/><a id="iddle1920" class="indexterm"/><a id="iddle2377" class="indexterm"/>be no color change around the edges. I duplicated the leaf image layer and placed it on top of this background.</p><div class="figure"><a id="textures_for_a_single_leafcomma_from_lef"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00240"/><img src="httpatomoreillycomsourcenostarchimages1538722.png.jpg" alt="The textures for a single leaf, from left to right: diffuse, specular, and alpha. These textures are used on my IvyGen mesh."/></div></div><div class="figure-title">Figure 11-31. The textures for a single leaf, from left to right: diffuse, specular, and alpha. These textures are used on my IvyGen mesh.</div></div><p>To remove the specular highlights, I used the Dodge/Burn tool (<span class="smaller">SHIFT</span>-D) set to burn (hold <span class="smaller">CTRL</span> or change the settings in the Brush Tools palette) with a large, soft brush. I brushed lightly over the highlights to dim them (use a light pressure if you’re using a pressure-sensitive tablet, or simply set the Exposure setting of the Dodge/Burn tool down low if you’re using a mouse). To fix any areas that become oversaturated, I used the Paintbrush tool with a color from a good part of the texture. Then, I set the blend mode of the brush to Saturation and painted over any oversaturated areas to bring them in line with the rest of the texture. (<a class="xref" href="ch11.html#textures_for_a_single_leafcomma_from_lef" title="Figure 11-31. The textures for a single leaf, from left to right: diffuse, specular, and alpha. These textures are used on my IvyGen mesh.">Figure 11-31</a>, left, shows the diffuse texture.)</p></div><div class="sect3" title="Specular Map"><div class="titlepage"><div><div><h4 class="title" id="specular_map-id00021">Specular Map</h4></div></div></div><p>For the specular color, I duplicated my masked leaf image and used the Hue-Saturation tool to desaturate it a bit. Then, I shifted the specular color slightly toward yellow. I also painted in some highlights on smooth areas of the leaf and then blurred the texture slightly. You can see the specular texture in <a class="xref" href="ch11.html#textures_for_a_single_leafcomma_from_lef" title="Figure 11-31. The textures for a single leaf, from left to right: diffuse, specular, and alpha. These textures are used on my IvyGen mesh.">Figure 11-31</a> (center).</p><p>This completed the textures needed for a single leaf, so I saved each as a <span class="emphasis"><em>.tga</em></span> image and then saved an <span class="emphasis"><em>.xcf</em></span> file with my layers. I used this single leaf as my texture for the leaves generated by IvyGen. For the rest of the leaves in my scene, I wanted to combine as many as possible into one image so that I wouldn’t have to manage too many textures. So I repeated the cutting-out process for as many leaf images as I needed, skipping the specular textures for the time being. Later, I combined all these leaves onto a single map so it would be easier to do the specular map afterward.</p></div><div class="sect3" title="Combining Leaves onto a Single Texture"><div class="titlepage"><div><div><h4 class="title" id="combining_leaves_onto_a_single_texture">Combining Leaves onto a Single Texture</h4></div></div></div><p>For most of the foliage in my scene, I packed all of the leaves onto the same UV map. (In <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>, I baked a color map from the material color of the leaves to serve as a guide.) To make it easier to assemble all my leaves into one texture, I applied the layer masks that I had created earlier to the diffuse layer of each leaf texture. I then saved each of these leaves as images and opened them as layers on top of the guide image I baked in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>.</p><p>Next, I started arranging the leaves to fit the map, using the Move, Scale, and Rotate tools. After getting a leaf roughly in place, I used the IWarp tool (Filters▸Distort▸IWarp) to warp the leaves to more accurately fit the shapes I needed (see <a class="xref" href="ch11.html#using_the_iwarp_filter_to_warp_the_shape" title="Figure 11-32. Using the IWarp filter to warp the shape of a leaf">Figure 11-32</a>). IWarp allows you to move pixels around your selection fluidly in order to reshape areas of an image. For the leaves, I used the Move Deform mode in IWarp to fit the outline of the leaves to the shapes I needed. I repeated this, duplicating some of the leaves to cover each space that needed a leaf texture. For the unwrapped stems, I cloned from the bigger leaves to fill in the whole region with a rough green texture. The diffuse texture for all the leaves combined into a single texture is shown in <a class="xref" href="ch11.html#i_merged_the_textures_for_several_of_my" title="Figure 11-33. I merged the textures for several of my leaves onto a single image to keep the number of textures in my scene down.">Figure 11-33</a>. I then created the specular map for my grouped-together leaves the same way I did for the individual leaf.</p><div class="figure"><a id="using_the_iwarp_filter_to_warp_the_shape"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00241"/><img src="httpatomoreillycomsourcenostarchimages1538724.png.jpg" alt="Using the IWarp filter to warp the shape of a leaf"/></div></div><div class="figure-title">Figure 11-32. Using the IWarp filter to warp the shape of a leaf</div></div><div class="figure"><a id="i_merged_the_textures_for_several_of_my"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00242"/><img src="httpatomoreillycomsourcenostarchimages1538726.png.jpg" alt="I merged the textures for several of my leaves onto a single image to keep the number of textures in my scene down."/></div></div><div class="figure-title">Figure 11-33. I merged the textures for several of my leaves onto a single image to keep the number of textures in my scene down.</div></div><p><a id="iddle1035" class="indexterm"/><a id="iddle2408" class="indexterm"/><a id="iddle2526" class="indexterm"/>To get an alpha texture again, I simply merged the leaf textures into one layer and then rightclicked the layer in the Layers editor and chose Alpha to Selection. Then, I created a new black layer and filled the selection with white to get my alpha image. Finally, I exported each of my diffuse, specular, and alpha passes as <span class="emphasis"><em>.tga</em></span> images and saved the GIMP <span class="emphasis"><em>.xcf</em></span> file, too. The combined leaf textures can be seen in <a class="xref" href="ch11.html#textures_for_a_single_leafcomma_from_lef" title="Figure 11-31. The textures for a single leaf, from left to right: diffuse, specular, and alpha. These textures are used on my IvyGen mesh.">Figure 11-31</a>. This completed almost all of the textures for the Jungle Temple. I created any remaining ones in much the same way as those described already.</p></div></div></div><div class="sect1" title="Texturing the Spider Bot"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="texturing_the_spider_bot">Texturing the Spider Bot</h2></div></div></div><p>Texturing the Spider Bot was a bit simpler than texturing was for the other two images because this project relies largely on procedural materials. I made a UV texture that covered the body in order to take some of the hassle out of creating different materials later and to allow me to add some detail to the model.</p><div class="sect2" title="Creating Three Textures"><div class="titlepage"><div><div><h3 class="title" id="creating_three_textures">Creating Three Textures</h3></div></div></div><p><a id="iddle1360" class="indexterm"/><a id="iddle2220" class="indexterm"/><a id="iddle2385" class="indexterm"/><a id="iddle2410" class="indexterm"/><a id="iddle2528" class="indexterm"/>I began with my baked color map in GIMP and scaled it up to 4096×4096 pixels. Then, I opened my baked ambient occlusion map as a layer, scaled it to fit, and set its blend mode to Multiply at 40 percent opacity in order to add some subtle shadowing to the texture.</p><p>I needed to make three textures: diffuse, roughness, and specular. Because I wanted the body’s green areas to be shiny, I made the green area much darker for the diffuse texture and bright green for the specular texture. For the body’s white areas, I did the opposite: dark gray on the specular map to make it less shiny and light on the diffuse.</p><p>For the roughness map, I made the green areas (of the diffuse map) dark to give sharp, glossy reflections, and I made the white areas bright to give softer highlights. You can see the three textures in <a class="xref" href="ch11.html#textures_for_the_spider_botcomma_from_le" title="Figure 11-34. Textures for the Spider Bot, from left to right: diffuse, specular, and roughness. I incorporated some decals into the textures to make them more interesting, making sure to add them to the roughness and specular maps as well.">Figure 11-34</a>. To keep my textures organized, I created separate layer groups for each of the diffuse, specular, and roughness maps, just as I did for the Bat Creature.</p></div><div class="sect2" title="Adding Decals"><div class="titlepage"><div><div><h3 class="title" id="adding_decals">Adding Decals</h3></div></div></div><p>To make things a bit more interesting, I decided to add some decals to the Spider Bot. To make decals, I drew a few simple designs using 2D curves in Blender and rendered these in black and white. Then, I opened these as layers over my existing texture file in GIMP.</p><div class="figure"><a id="textures_for_the_spider_botcomma_from_le"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00243"/><img src="httpatomoreillycomsourcenostarchimages1538728.png.jpg" alt="Textures for the Spider Bot, from left to right: diffuse, specular, and roughness. I incorporated some decals into the textures to make them more interesting, making sure to add them to the roughness and specular maps as well."/></div></div><div class="figure-title">Figure 11-34. Textures for the Spider Bot, from left to right: diffuse, specular, and roughness. I incorporated some decals into the textures to make them more interesting, making sure to add them to the roughness and specular maps as well.</div></div><p>To make the background of the decals transparent, I used Colors▸Color to Alpha and selected the background color as the color to remove. I selected individual decals and spread them out over the body by selecting them and then scaling, moving, and rotating them into place. (It can be easier to do this if you split up each decal onto its own layer by selecting it and pressing <span class="smaller">CTRL-SHIFT</span>-L to float the selection and <span class="smaller">CTRL-SHIFT</span>-N to convert it to a layer. Then, you can scale and rotate it independently of the other decals. Once it’s in place, you can merge the details back onto the same layer.)</p><p>To get a better feel for the placement of your decals, you can mark in roughly where you want them in Blender’s Texture Paint mode. Then, save the image as a guide to use in GIMP. Once I had the decals laid out, I set their opacity to 60 percent for the diffuse map.</p><p>To make the decals stand out, I worked them into the specular and roughness maps too. I duplicated my decal layer from the diffuse map and placed copies in my layer groups for the specular and roughness maps. For the specular map, I used Colors▸Invert to make the decals white, which would make them shinier on the eventual material. For the roughness map, I made the decals black once again to give them sharp reflections (see <a class="xref" href="ch11.html#textures_for_the_spider_botcomma_from_le" title="Figure 11-34. Textures for the Spider Bot, from left to right: diffuse, specular, and roughness. I incorporated some decals into the textures to make them more interesting, making sure to add them to the roughness and specular maps as well.">Figure 11-34</a>).</p><p>With my textures complete, I saved a GIMP <span class="emphasis"><em>.xcf</em></span> file with all my layer groups and then exported <span class="emphasis"><em>.tga</em></span> files of my diffuse, specular, and roughness maps.</p></div></div><div class="sect1" title="In Review"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="in_review-id00022">In Review</h2></div></div></div><p><a id="iddle1141" class="indexterm"/><a id="iddle1696" class="indexterm"/><a id="iddle2409" class="indexterm"/><a id="iddle2506" class="indexterm"/><a id="iddle2519" class="indexterm"/><a id="iddle2527" class="indexterm"/>In this chapter, I’ve covered using both Blender and GIMP to create textures, starting with our baked textures as a foundation and building up layers of detail and different images. We’ve used Blender’s Texture Paint mode, cloned textures in both Blender and GIMP, and used seamless textures both on their own and as a basis for creating more distinctive textures.</p><p>For the Bat Creature, I built up my textures mainly by hand, blocking in simple colors in Blender and then refining these in GIMP, painting in extra details and supplementing them with elements from photographic textures, and then jumping back to Blender to clear up seams.</p><p>For the Jungle Temple, I created a variety of seamless textures, which formed a foundation for creating further textures for unique objects. By creating a range of tileable, reusable textures first, I achieved consistent textures across multiple elements in the scene and sped up the texturing process.</p><p>For the Spider Bot, I focused on creating relatively simple diffuse, specular, and roughness textures that I will later use to create some fairly complex materials. I used my ambient occlusion map and the solid color map I generated in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a> as a starting point and then created and added decals to embellish the design of the Spider Bot without crowding in too many details.</p><p>In <a class="xref" href="ch12.html" title="Chapter 12. Materials">Chapter 12</a>, we’ll create materials for use by both Blender’s Internal renderer and the new Cycles renderer, using the textures created in this chapter as inputs. We’ll look at the different ways to apply textures when working with the two renderers and the similarities and differences in creating materials with the two render engines in mind.</p></div><div class="footnotes" epub:type="footnotes"><br/><hr style="width: 100; align: left;"/><div class="footnote" epub:type="footnote" id="ftn.ch11fn01"><p><sup>[<a href="#ch11fn01" class="para">1</a>] </sup>You can find this location or add a new location for brushes from GIMP’s preferences (File▸Preferences) under Folders▸Brushes.</p></div></div></section></body></html>