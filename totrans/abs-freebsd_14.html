<html><head></head><body>
<h2 class="h2" id="ch14"><span epub:type="pagebreak" id="page_317"/><strong><span class="big">14</span><br/>EXPLORING /ETC</strong></h2>
<div class="image1"><img src="../images/common01.jpg" alt="image"/></div>
<p class="noindent">The <em>/etc</em> directory contains the basic configuration information needed to boot a Unix-like system. Every time I get saddled with an unfamiliar system, one of the first things I do is scope out <em>/etc</em>. The fastest way to go from a junior sysadmin to a midgrade one is to read <em>/etc</em> and the associated man pages. Yes, all of it. Yes, this is a lot of reading. Understanding <em>/etc</em> means that you understand how the system hangs together. As you progress as a sysadmin, you’re going to pick up this information piecemeal anyway, so you might as well take the easier route and master this part of your toolkit at the beginning.</p>
<p class="indent">I discuss many <em>/etc</em> files in chapters where they’re most important, such as <em>/etc/services</em> in <a href="ch07.xhtml#ch07">Chapter 7</a> and <em>/etc/fstab</em> in <a href="ch10.xhtml#ch10">Chapter 10</a>. Also, some files are of only historical interest or are gradually being removed. This chapter covers important <em>/etc</em> files that don’t quite fit anywhere else.</p>
<h3 class="h3" id="lev548"><span epub:type="pagebreak" id="page_318"/><strong>/etc Across Unix Species</strong></h3>
<p class="noindent">Different Unix-like systems use different <em>/etc</em> files. In many cases, these files are simply renamed or restructured files from primordial BSD. The first time I encountered an IBM AIX system, for example, I went looking for a BSD-style <em>/etc/fstab</em>. It wasn’t there. A little hunting led me to <em>/etc/filesystems</em>, which is an IBM-specific <em>/etc/fstab</em>. Apparently IBM felt that a file named for an abbreviation of <em>filesystem table</em> was confusing, so they renamed the file. Knowing this information existed somewhere in <em>/etc</em>, and knowing which files it obviously wasn’t in, greatly shortened my search.</p>
<p class="indent">Even radically different FreeBSD systems have almost identical <em>/etc</em> directories. While some add-on programs insert their own files here, you can expect certain files to be on every FreeBSD system you encounter.</p>
<p class="indent">Remember that <em>/etc</em> is the heart of FreeBSD and that changes to these files can damage or destroy your system. While having to manually recover a scrambled filesystem can turn an adequate sysadmin into a pretty good one, it’s one of the least pleasant ways to get there.</p>
<h3 class="h3" id="lev549"><strong>/etc/adduser.conf</strong></h3>
<p class="noindent">This file lets you configure the defaults for new users. See <a href="ch09.xhtml#ch09">Chapter 9</a> for details.</p>
<h3 class="h3" id="lev550"><strong>/etc/aliases</strong></h3>
<p class="noindent">This file lets you configure system-wide email forwarding. We cover it in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev551"><strong>/etc/amd.map</strong></h3>
<p class="noindent">FreeBSD has the ability to automatically mount and unmount NFS filesystems upon demand through the automounter daemon, amd(8). The automounter daemon is very old, however, and has largely been replaced by autofs(5) and automountd(8). Automounting is mostly useful for workstations, so we won’t go into it.</p>
<h3 class="h3" id="lev552"><strong>/etc/auto_master</strong></h3>
<p class="noindent">The <em>auto_master</em> file configures FreeBSD’s modern automounting service. It lets you configure mount options, determine how long an automounted filesystem should remain mounted, and so on. See auto_master(5), autofs(5), and automountd(8) for details.</p>
<h3 class="h3" id="lev553"><span epub:type="pagebreak" id="page_319"/><strong>/etc/blacklistd.conf</strong></h3>
<p class="noindent">FreeBSD includes an automated blacklist daemon, blacklistd(8), that’s comparable to fail2ban and similar programs. Programs that link against libblacklist(3) can direct blacklistd(8) to block intrusive hosts at the firewall. We configure blacklistd(8) in <a href="ch19.xhtml#ch19">Chapter 19</a>.</p>
<h3 class="h3" id="lev554"><strong>/etc/bluetooth, /etc/bluetooth.device.conf, and /etc/defaults/bluetooth.device.conf</strong></h3>
<p class="noindent">FreeBSD supports Bluetooth, a standard for short-range wireless communication. Unlike 802.11, Bluetooth is designed for short-range but high-level services, such as voice communications. This book is about servers, so we won’t cover Bluetooth, but you should know that your FreeBSD laptop can attach to your Bluetooth-equipped cellphone and connect to the internet if you desire.</p>
<h3 class="h3" id="lev555"><strong>/etc/casper</strong></h3>
<p class="noindent">The Capsicum security system lets programmers add sandboxing and security capabilities to their software. The <em>/etc/casper</em> directory contains sample capsicum(4) configurations.</p>
<h3 class="h3" id="lev556"><strong>/etc/crontab and /etc/cron.d</strong></h3>
<p class="noindent">The cron(8) daemon lets users schedule tasks. See <a href="ch20.xhtml#ch20">Chapter 20</a> for examples and details.</p>
<h3 class="h3" id="lev557"><strong>/etc/csh.*</strong></h3>
<p class="noindent">The <em>/etc/csh.*</em> files contain system-wide defaults for csh and tcsh. When a user logs in with either of these shells, the shell executes any commands it finds in <em>/etc/csh.login</em>. Similarly, when the user logs out, <em>/etc/csh.logout</em> is executed. You can place general shell configuration information in <em>/etc/csh.cshrc</em>.</p>
<p class="indent">Per-shell configuration is prone to errors, and you’ll have to maintain identical settings for any other shells. I recommend putting necessary environment variables in a login class (see “<a href="ch09.xhtml#lev300">Restricting System Usage</a>” on <a href="ch09.xhtml#page_188">page 188</a>).</p>
<h3 class="h3" id="lev558"><span epub:type="pagebreak" id="page_320"/><strong>/etc/ddb.conf</strong></h3>
<p class="noindent">The kernel debugger configuration utility ddb(8) reads <em>ddb.conf</em> for instructions. We’ll use this in <a href="ch24.xhtml#ch24">Chapter 24</a> to prepare kernel crash dumps on small systems.</p>
<h3 class="h3" id="lev559"><strong>/etc/devd.conf</strong></h3>
<p class="noindent">The device daemon devd(8) is best known for managing detachable hardware, such as USB, PCCard, and Cardbus devices. When you insert a USB network card into your laptop, devd(8) notices the arrival and fires up the appropriate system processes to configure the card as per <em>/etc/rc.conf</em>. More generally, it’s a state change daemon and can react on link up/down events, notify you about CPU overheating, process suspend/resume events, and more. We discuss devd(8) briefly in <a href="ch13.xhtml#ch13">Chapter 13</a>, but if you think you need to edit <em>/etc/devd.conf</em> on a server, you’re probably doing something wrong.</p>
<h3 class="h3" id="lev560"><strong>/etc/devfs.conf, /etc/devfs.rules, and /etc/defaults/devfs.rules</strong></h3>
<p class="noindent">FreeBSD manages device nodes through devfs(5), a virtual filesystem that dynamically provides device nodes as hardware boots, appears, and disappears. See <a href="ch13.xhtml#ch13">Chapter 13</a> for more information.</p>
<h3 class="h3" id="lev561"><strong>/etc/dhclient.conf</strong></h3>
<p class="noindent">Many operating systems give you very basic DHCP client configuration with no way to fine-tune or customize it; you either use it or you don’t. In most cases, an empty <em>/etc/dhclient.conf</em> file gives you full DHCP client functionality, but it won’t work correctly in all situations. Perhaps your network is having trouble or you’re at a conference where some script kiddie thinks it’s fun to set up a second DHCP server and route everyone’s traffic through his machine so he can capture passwords.</p>
<p class="indent">Your server better not be configured via DHCP (unless it’s diskless), so we won’t go into any depth on this. You should be aware that you can configure FreeBSD’s DHCP client functionality, however.</p>
<h3 class="h3" id="lev562"><strong>/etc/disktab</strong></h3>
<p class="noindent">Once upon a time, hard disks were rare and exotic creatures that came in only a few varieties. In <em>/etc/disktab</em>, you’ll find low-level descriptions of many different kinds of disks, from the 360KB floppy disk to a Panasonic 60MB laptop hard drive. (Yes, laptops came with 60MB hard drives, and we were durned happy to have them.)</p>
<p class="indent">Today, this file is mostly used for removable media, such as 1.44MB floppy disks and zip disks. While I described formatting flash drives in <a href="ch13.xhtml#ch13">Chapter 13</a>, this file contains the descriptions needed to format other removable media. If you want to put a filesystem on your LS 120 disk or zip drive, you’ll find the necessary label here at the beginning of an entry.</p>
<p class="indent">Editing <em>/etc/disktab</em> is useful only if you have multiple identical hard drives that you want to partition and format in exactly the same way. If you need to make your own entries, read disktab(5).</p>
<h3 class="h3" id="lev563"><span epub:type="pagebreak" id="page_321"/><strong>/etc/dma/</strong></h3>
<p class="noindent">The Dragonfly Mail Agent (DMA) stores its configuration in <em>/etc/dma/</em>. We discuss DMA in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev564"><strong>/etc/freebsd-update.conf</strong></h3>
<p class="noindent">This file is used by freebsd-update(8) when getting binary updates for your server. See <a href="ch18.xhtml#ch18">Chapter 18</a> for details.</p>
<h3 class="h3" id="lev565"><strong>/etc/fstab</strong></h3>
<p class="noindent">See <a href="ch10.xhtml#ch10">Chapter 10</a> for a discussion on the filesystem table, <em>/etc/fstab</em>.</p>
<h3 class="h3" id="lev566"><strong>/etc/ftp.*</strong></h3>
<p class="noindent">The FTP daemon ftpd(8) uses these files to determine who may access the system via FTP and what access they have upon a successful connection. Unless you’re running a large FTP site, you should be using sftp(1) instead.</p>
<h3 class="h3" id="lev567"><strong>/etc/group</strong></h3>
<p class="noindent">Assigning users to groups is covered in painful detail in <a href="ch09.xhtml#ch09">Chapter 9</a>.</p>
<h3 class="h3" id="lev568"><strong>/etc/hostid</strong></h3>
<p class="noindent">Certain software expects every host to have a universally unique ID, or UUID. If you’re running on real hardware, this UUID is burned into the mainboard and is accessible via kenv(8). Virtual hosts can generate a UUID from software. The <em>/etc/hostid</em> file contains that UUID.</p>
<h3 class="h3" id="lev569"><strong>/etc/hosts</strong></h3>
<p class="noindent">This file contains host-to-IP mappings, as discussed in <a href="ch08.xhtml#ch08">Chapter 8</a>.</p>
<h3 class="h3" id="lev570"><strong>/etc/hosts.allow</strong></h3>
<p class="noindent">The <em>/etc/hosts.allow</em> file controls who can access the daemons compiled with TCP Wrappers support. Learn about it in <a href="ch19.xhtml#ch19">Chapter 19</a>.</p>
<h3 class="h3" id="lev571"><strong>/etc/hosts.equiv</strong></h3>
<p class="noindent">The <em>/etc/hosts.equiv</em> file is used by the r-services (rlogin, rsh, etc.) to let trusted remote systems log in or run commands on the local system <span epub:type="pagebreak" id="page_322"/>without providing a password or even logging in. Hosts listed in this file are assumed to have performed user authentication on a trusted system, so the local system doesn’t have to bother reauthenticating the user.</p>
<p class="indent">Such blatant trust is very convenient on friendly networks, much as leaving the doors of your Manhattan townhouse unlocked saves you the trouble of digging out your door keys every time you get home. There’s no such thing as a friendly network.<sup><a href="footnote.xhtml#ch14fn1" id="ch14fn1a">1</a></sup> A single disgruntled employee can largely destroy a corporate network with this service, and a machine using the r-services is pretty much dog meat for the first script kiddie who wanders by. In fact, <em>/etc/hosts.equiv</em> and its related services have bitten even top-notch security experts who thought they could use it safely. I suggest leaving this file empty and perhaps even making it immutable (see <a href="ch09.xhtml#ch09">Chapter 9</a>).</p>
<h3 class="h3" id="lev572"><strong>/etc/hosts.lpd</strong></h3>
<p class="noindent">The <em>/etc/hosts.lpd</em> file is one of the simplest files in <em>/etc</em>. Hosts listed here, each on its own line, may print to the printer(s) controlled by this machine. While you can use hostnames, that would allow DNS issues to choke printing, so use IP addresses instead.</p>
<p class="indent">Unlike most other configuration files, <em>/etc/hosts.lpd</em> doesn’t accept network numbers or netmasks; you must list individual hostnames or IP addresses.</p>
<p class="indent">We configure FreeBSD as a printer client in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev573"><strong>/etc/inetd.conf</strong></h3>
<p class="noindent">inetd(8) handles incoming network connections for smaller daemons that don’t run frequently. See the section on inetd in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev574"><strong>/etc/libmap.conf</strong></h3>
<p class="noindent">FreeBSD’s linker lets you substitute one shared library for another. We discuss this in <a href="ch17.xhtml#ch17">Chapter 17</a>.</p>
<h3 class="h3" id="lev575"><strong>/etc/localtime</strong></h3>
<p class="noindent">This file contains local time zone data, as configured by tzsetup(8). It’s a binary file, and you can’t edit it with normal tools. tzsetup(8) actually copies this file from a subdirectory of <em>/usr/share/zoneinfo</em>. If your time zone changes, you’ll need to upgrade FreeBSD to get the new time zone files and then rerun tzsetup(8) to configure time correctly.</p>
<p class="indent">We discuss time in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev576"><span epub:type="pagebreak" id="page_323"/><strong>/etc/locate.rc</strong></h3>
<p class="noindent">locate(1) finds all files of a given name. For example, to find <em>locate.rc</em>, enter the following:</p>
<pre># <span class="codestrong1">locate locate.rc</span><br/>/etc/locate.rc<br/>/usr/share/examples/etc/locate.rc<br/>/usr/src/usr.bin/locate/locate/locate.rc<br/>/var/db/etcupdate/current/etc/locate.rc</pre>
<p class="indent">You’ll see that a file called <em>locate.rc</em> can be found in four places: in the main <em>/etc</em> directory, the system examples directory, the system source code, and a copy retained by etcupdate(8).</p>
<p class="indent">As part of periodic(8)’s weekly run (see <a href="ch21.xhtml#ch21">Chapter 21</a>), your FreeBSD system scans its disks, builds a list of everything it finds, and stores that list in a database. The list-building program, locate.updatedb(8), takes its settings from <em>/etc/locate.rc</em>. The following variables in this file all change how your locate.updatedb(8) builds your locate database:</p>
<ul>
<li class="noindent"><code>TMPDIR</code> contains the temporary directory used by locate.updatedb(8), and defaults to <em>/tmp</em>. If you’re short on space in <em>/tmp</em>, change this path to a place where you have more room.</li>
<li class="noindent">While you can change the location of the database itself with the <code>FCODES</code> variable, this affects other parts of FreeBSD that expect to find that database in its default location. Be prepared for odd results, especially if you leave an old locate database in the default location of <em>/var/db/locate.database</em>.</li>
<li class="noindent">The <code>SEARCHPATHS</code> variable gives the directory where you want to start building your database. This defaults to <em>/</em>, the whole disk. To index only a portion of your disk, set that value here.</li>
<li class="noindent"><code>PRUNEPATHS</code> lists directories you don’t want to index. This defaults to excluding temporary directories that traditionally contain only short-lived files.</li>
<li class="noindent">The <code>FILESYSTEMS</code> variable lists the types of filesystems you want to index. By default, locate.updatedb(8) indexes only UFS (FreeBSD) and ext2fs (Linux) filesystems. Listing NFS (see <a href="ch13.xhtml#ch13">Chapter 13</a>) filesystems is a bad idea: all of your servers simultaneously indexing the fileserver will bottleneck either the network or the fileserver.</li>
</ul>
<h3 class="h3" id="lev577"><strong>/etc/login.*</strong></h3>
<p class="noindent">You can control who may log into your system—and what resources those users may access—by using <em>/etc/login.access</em> and <em>/etc/login.conf</em>. See <a href="ch09.xhtml#ch09">Chapter 9</a> for instructions.</p>
<h3 class="h3" id="lev578"><span epub:type="pagebreak" id="page_324"/><strong>/etc/mail</strong></h3>
<p class="noindent">Most of the contents of <em>/etc/mail</em> are dedicated to Sendmail. The two exceptions are the aliases(5) file and mailer.conf(5). We discuss both in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev579"><strong>/etc/mail.rc</strong></h3>
<p class="noindent">While FreeBSD uses most <em>.rc</em> files for system startup, the <em>/etc/mail.rc</em> file is used to configure mail(1).</p>
<h3 class="h3" id="lev580"><strong>/etc/mail/mailer.conf</strong></h3>
<p class="noindent">FreeBSD allows you to choose any mail server program you like via <em>/etc/mail/mailer.conf</em>, as covered in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev581"><strong>/etc/make.conf</strong></h3>
<p class="noindent">To make, or compile, a program is to build it from source code into machine language. We’ll discuss building software in detail in <a href="ch17.xhtml#ch17">Chapter 17</a>. The <em>/etc/make.conf</em> contains settings that control how the building process works, letting you set options that directly affect software builds. Remember, anything you add to <em>make.conf</em> affects all software built on the system, including system upgrades. This may cause upgrade failures.<sup><a href="footnote.xhtml#ch14fn2" id="ch14fn2a">2</a></sup> Many of the options from <em>make.conf</em> are useful only to developers.</p>
<p class="indent">If you’re interested in setting options that affect only system upgrades, use <em>/etc/src.conf</em> instead.</p>
<p class="indent">Here are some common features set in <em>make.conf</em>. Any values set here require the same syntax used by make(1). If you insist on trying to optimize software builds, follow the examples in make.conf(5) or in the software’s documentation. Best of all, though, don’t muck with make at all.</p>
<h4 class="h4" id="lev582"><strong><em>CFLAGS</em></strong></h4>
<p class="noindent">This option specifies optimization settings for building nonkernel programs. Many other Unix-like operating systems suggest compiling software with particular <em>compiler flags</em>, or <code>CFLAGS</code>. This practice is actively discouraged on FreeBSD. System components that require compiler flags already have that specified in the software configuration, and add-on software has that configuration set for it separately. While people might recommend other settings for <code>CFLAGS</code>, custom options aren’t supported by the FreeBSD Project.</p>
<p class="indent"><span epub:type="pagebreak" id="page_325"/>In general, FreeBSD code is expected to compile most correctly out of the box. The only thing that adding compiler options can do is impair your performance. If you build FreeBSD or ports with nonstandard flags and have problems, remove those flags and build it again.</p>
<h4 class="h4" id="lev583"><strong><em>COPTFLAGS</em></strong></h4>
<p class="noindent">The <code>COPTFLAGS</code> optimizations are used only for building the kernel. Again, settings other than the defaults can build a nonworking kernel.</p>
<h4 class="h4" id="lev584"><strong><em>CXXFLAGS</em></strong></h4>
<p class="noindent"><code>CXXFLAGS</code> tells the compiler what optimizations to use when building C++ code. Be sure to use the += syntax when using <code>CXXFLAGS</code> so that you add your instructions to those specified in the software. Everything that I said earlier about <code>CFLAGS</code> applies equally well to <code>CXXFLAGS</code>.</p>
<h3 class="h3" id="lev585"><strong>/etc/master.passwd</strong></h3>
<p class="noindent">This file contains the confidential core information for all user accounts, as discussed in <a href="ch09.xhtml#ch09">Chapter 9</a>. Protect it.</p>
<h3 class="h3" id="lev586"><strong>/etc/motd</strong></h3>
<p class="noindent">The <em>message of the day (motd)</em> file is displayed to users when they log in. You can place system notices in this file or other information you want shell users to see. The <code>welcome</code> option in <em>/etc/login.conf</em> (see <a href="ch09.xhtml#ch09">Chapter 9</a>) can point users to different motd files, so you can have separate messages for each login class.</p>
<h3 class="h3" id="lev587"><strong>/etc/mtree</strong></h3>
<p class="noindent">mtree(1) builds directory hierarchies with permissions set according to a predefined standard. The <em>/etc/mtree</em> directory stores that standard for the FreeBSD base system. The FreeBSD upgrade process uses mtree records to install the system correctly. If you damage file or directory permissions in your base system, you can use mtree(1) to restore them to the defaults. While you don’t generally need to edit these files, they can be useful if you muck too much with your system. Diskless systems use these files to build memory-based <em>/var</em> filesystems. We’ll use this information in <a href="ch19.xhtml#ch19">Chapter 19</a> to inspect system security.</p>
<h3 class="h3" id="lev588"><strong>/etc/netconfig</strong></h3>
<p class="noindent">If you’re accustomed to SVR4-derived operating systems, you might expect to configure various parts of networking in <em>/etc/netconfig</em>. FreeBSD uses this file only for RPC code, though. I mention it only to keep old Solaris hands from thinking changes here will help them.</p>
<h3 class="h3" id="lev589"><span epub:type="pagebreak" id="page_326"/><strong>/etc/netstart</strong></h3>
<p class="noindent">This shell script is designed specifically for bringing up the network while in single-user mode. Having a network in single-user mode is terribly useful for any number of reasons, from mounting NFS shares to connecting to remote machines in order to verify configurations. Just run <em>/etc/netstart</em>. This script has no effect when in full multiuser mode.</p>
<h3 class="h3" id="lev590"><strong>/etc/network.subr</strong></h3>
<p class="noindent">This shell script isn’t intended for human use; rather, other network configuration scripts use the subroutines defined herein to support common functions.</p>
<h3 class="h3" id="lev591"><strong>/etc/newsyslog.conf</strong></h3>
<p class="noindent">This file configures the rotation and deletion of log files. See <a href="ch21.xhtml#ch21">Chapter 21</a> for more information.</p>
<h3 class="h3" id="lev592"><strong>/etc/nscd.conf</strong></h3>
<p class="noindent">The nscd(8) service caches the results of name service lookups to optimize system performance. It’s useful if you’re running LDAP, but for hostname lookups, you’re better off running a local caching resolver.</p>
<h3 class="h3" id="lev593"><strong>/etc/nsmb.conf</strong></h3>
<p class="noindent">FreeBSD’s Windows file-share mounting system uses <em>/etc/nsmb.conf</em> to define access to Windows systems, as described in <a href="ch13.xhtml#ch13">Chapter 13</a>.</p>
<h3 class="h3" id="lev594"><strong>/etc/nsswitch.conf</strong></h3>
<p class="noindent">Name Service Switching is covered in <a href="ch08.xhtml#ch08">Chapters 8</a> and <a href="ch20.xhtml#ch20">20</a>.</p>
<h3 class="h3" id="lev595"><strong>/etc/ntp/, /etc/ntp.conf</strong></h3>
<p class="noindent">Keeping correct time on your host simplifies . . . well, everything. The time daemon ntpd(8) uses these files, as <a href="ch20.xhtml#ch20">Chapter 20</a> illustrates.</p>
<h3 class="h3" id="lev596"><strong>/etc/opie*</strong></h3>
<p class="noindent"><em>One-time Passwords In Everything (OPIE)</em> is a one-time password system derived from S/Key. While still used in a few places, it’s no longer very popular. <span epub:type="pagebreak" id="page_327"/>You can read opie(4) if you’re interested. For the most part, OPIE has been largely replaced by systems like Kerberos, Google Authenticator, and other PAM plug-ins.</p>
<h3 class="h3" id="lev597"><strong>/etc/pam.d/*</strong></h3>
<p class="noindent"><em>Pluggable Authentication Modules (PAM)</em> allow the sysadmin to use different authentication, authorization, and access control systems. If you’re using Kerberos, LDAP, or some other centralized authentication system, you’ll need to configure PAM. PAM, unfortunately, fills an entire book on its own. If you’re trapped into going anywhere near PAM, permit me to recommend my book <em>PAM Mastery</em> (Tilted Windmill Press, 2016).</p>
<h3 class="h3" id="lev598"><strong>/etc/passwd</strong></h3>
<p class="noindent">This file contains user-visible account information. We talk about the password files in <a href="ch09.xhtml#ch09">Chapter 9</a>.</p>
<h3 class="h3" id="lev599"><strong>/etc/pccard_ether</strong></h3>
<p class="noindent">This script starts and stops removable network cards, such as Cardbus cards and USB Ethernet. Its name is just a leftover of history, when the only cards available were PC Cards. For the most part, devd(8) runs this script as needed, as discussed in <a href="ch13.xhtml#ch13">Chapter 13</a>.</p>
<h3 class="h3" id="lev600"><strong>/etc/periodic.conf and /etc/defaults/periodic.conf</strong></h3>
<p class="noindent">The system’s regular maintenance jobs that create those annoying mails to root are run by periodic(8), which just runs shell scripts stored in <em>/etc/periodic</em> and <em>/usr/local/etc/periodic</em>. Every one of these scripts can be enabled or disabled in <em>/etc/periodic.conf</em>.</p>
<p class="indent">periodic(8) runs programs either daily, weekly, or monthly. Each set of programs has its own settings—for example, daily programs are configured separately from monthly programs. These settings are controlled by entries in <em>/etc/periodic.conf</em>. While we show examples from only the daily scripts, you’ll find very similar settings for the weekly and monthly scripts.</p>
<h4 class="h4" id="lev601"><strong><em>daily_output=”root”</em></strong></h4>
<p class="noindent">If you want the status email to go to a user other than root, list that user’s name here. Unless you have a user whose job it is to specifically read periodic email, it’s best to leave this at the default and forward root’s email to an account you read. You could also give a full path to a file if you prefer and even have newsyslog(8) rotate the periodic log (see <a href="ch19.xhtml#ch19">Chapter 19</a>).</p>
<h4 class="h4" id="lev602"><span epub:type="pagebreak" id="page_328"/><strong><em>daily_show_success=”YES”</em></strong></h4>
<p class="noindent">With this set to <code>YES</code>, the daily message includes information on all successful checks.</p>
<h4 class="h4" id="lev603"><strong><em>daily_show_info=”YES”</em></strong></h4>
<p class="noindent">When set to <code>YES</code>, the daily message includes general information from the commands it runs.</p>
<h4 class="h4" id="lev604"><strong><em>daily_show_badconfig=”NO”</em></strong></h4>
<p class="noindent">When set to <code>YES</code>, the daily message includes information on periodic commands it tried to run but couldn’t. These messages are generally harmless and involve subsystems that your system just doesn’t support or include.</p>
<h4 class="h4" id="lev605"><strong><em>daily_local=”/etc/daily.local”</em></strong></h4>
<p class="noindent">You can define your own scripts to be run as part of the daily, weekly, and monthly periodic(8) jobs. These default to <em>/etc/daily.local</em>, <em>/etc/weekly.local</em>, and <em>/etc/monthly.local</em>, but you can place them anywhere you like.</p>
<p class="indent">Each script in the daily, weekly, and monthly subdirectories of <em>/etc/periodic</em> has a brief description at the top of the file, and most have configuration options in <em>/etc/defaults/periodic.conf</em>. Skim through these quickly, looking for things that are of interest to you. The defaults enabled are sensible for most circumstances, but there’s extra functionality you can enable with a simple setting in <em>/etc/periodic.conf</em>. For example, if you use GEOM-based disk features, you’ll find the daily GEOM status messages useful. Since anything I could list here would be obsolete before I could deliver this manuscript, let alone before the book reaches you, I won’t go into detail about the various scripts.</p>
<h3 class="h3" id="lev606"><strong>/etc/pf.conf, /etc/pf.os</strong></h3>
<p class="noindent">We cover the basics of the PF packet filter in <a href="ch19.xhtml#ch19">Chapter 19</a>.</p>
<p class="indent">One less-known feature of PF is its ability to identify operating systems by the packets they send. The <em>/etc/pf.os</em> file contains TCP fingerprints for different operating systems, allowing you to write firewall rules such as “Show FreeBSD users my real home page, but show Windows users a page suggesting that they get a real operating system.” See pf.os(5) for more information. I encourage you to peruse this file, if only to drive home how all these network stacks behave so differently.</p>
<h3 class="h3" id="lev607"><strong>/etc/phones</strong></h3>
<p class="noindent">Modem users can store phone numbers for remote modems in <em>/etc/phones</em>, aliasing them so that they can just type <code>home</code> instead of the full phone number. Only tip(1) and cu(1) use this file, however, so it’s not as useful as you might think.</p>
<h3 class="h3" id="lev608"><span epub:type="pagebreak" id="page_329"/><strong>/etc/portsnap.conf</strong></h3>
<p class="noindent">Portsnap provides updates for the ports tree, as discussed in <a href="ch18.xhtml#ch18">Chapter 18</a>.</p>
<h3 class="h3" id="lev609"><strong>/etc/ppp/</strong></h3>
<p class="noindent">FreeBSD supports outbound modems with ppp(8). Read the man page for more information.</p>
<h3 class="h3" id="lev610"><strong>/etc/printcap</strong></h3>
<p class="noindent">This file contains printer configuration information. Printing on Unix-like systems can be very complicated, especially with the vast variety of printers you can use. Making your FreeBSD machine send print jobs to a print server isn’t hard at all, however. We cover the topic in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev611"><strong>/etc/profile</strong></h3>
<p class="noindent">The <em>/etc/profile</em> files contain the default account configuration information for the <em>/bin/sh</em> shell, much like <em>/etc/csh.*</em> for csh and tcsh users. Whenever a <em>/bin/sh</em> user logs in, he inherits what’s in this file. Users can override <em>/etc/profile</em> with their own <em>.profile</em>. Bash and other sh derivatives also use this file.</p>
<p class="indent">While tcsh is the standard FreeBSD shell, sh and derivatives (particularly bash) are quite popular. Keep settings in <em>/etc/profile</em> and <em>/etc/csh.login</em> synchronized to ease troubleshooting in the future—or, better still, set necessary environment variables in a login class (see <a href="ch09.xhtml#ch09">Chapter 9</a>) so that they affect any shell the user needs.</p>
<h3 class="h3" id="lev612"><strong>/etc/protocols</strong></h3>
<p class="noindent">In <a href="ch07.xhtml#ch07">Chapter 7</a>, we discussed network protocols. The <em>/etc/protocols</em> file lists the various network protocols you might encounter. Remember, a TCP or UDP port number isn’t the same as a protocol number.</p>
<h3 class="h3" id="lev613"><strong>/etc/pwd.db</strong></h3>
<p class="noindent">This is the database version of the <em>/etc/passwd file</em>. It contains public information about user accounts, as discussed in <a href="ch09.xhtml#ch09">Chapter 9</a>.</p>
<h3 class="h3" id="lev614"><strong>/etc/rc*</strong></h3>
<p class="noindent">Whenever your system boots to the point where it can execute userland commands, it runs the shell script <em>/etc/rc</em>. This script mounts all filesystems, <span epub:type="pagebreak" id="page_330"/>brings up the network interfaces, configures devfs(5), finds and catalogs shared libraries, and performs all the other tasks required to set up a system. We discussed the FreeBSD startup system in <a href="ch04.xhtml#ch04">Chapter 4</a>.</p>
<p class="indent">Different systems have radically different startup tasks. A terminal server with three 48-port serial cards works completely differently from a web server. Instead of a single monolithic <em>/etc/rc</em> script that handles every task, FreeBSD segregates each startup process into a separate shell script that addresses a specific need.</p>
<p class="indent">Additionally, you’ll find a few scripts directly under <em>/etc</em>, such as <em>/etc/rc.firewall</em> and <em>/etc/rc.initdiskless</em>. These scripts were split out on their own years before the current startup system came along, and remain in their historical locations because there isn’t anything to be gained by moving them.</p>
<h3 class="h3" id="lev615"><strong>/et/regdomain.xml</strong></h3>
<p class="noindent">Wireless cards are subject to different regulatory rules depending on where in the world they’re used. The cards read <em>regdomain.xml</em> to learn which frequencies they may use and how strongly they’re allowed to transmit. Edit this at your own risk.</p>
<h3 class="h3" id="lev616"><strong>/etc/remote</strong></h3>
<p class="noindent">This file contains machine-readable configurations for connecting to remote systems over serial lines. Today, this is of interest only if you use your system as a serial client—for example, if you want to connect to a serial console. We discuss serial consoles in <a href="ch04.xhtml#ch04">Chapter 4</a>.</p>
<h3 class="h3" id="lev617"><strong>/etc/resolv.conf</strong></h3>
<p class="noindent">This file lets you set nameservers, domain search order, and more DNS client settings. See <a href="ch08.xhtml#ch08">Chapter 8</a> for the details.</p>
<h3 class="h3" id="lev618"><strong>/etc/rpc</strong></h3>
<p class="noindent"><em>Remote Procedure Calls (RPC)</em> is a method for executing commands on a remote computer. Much like TCP/IP, RPC has service and port numbers, and <em>/etc/rpc</em> contains a list of these services and their port numbers. The most common RPC consumer is NFS, discussed in <a href="ch13.xhtml#ch13">Chapter 13</a>.</p>
<h3 class="h3" id="lev619"><strong>/etc/security/</strong></h3>
<p class="noindent">This directory contains configuration information for the audit(8) security utility.</p>
<h3 class="h3" id="lev620"><span epub:type="pagebreak" id="page_331"/><strong>/etc/services</strong></h3>
<p class="noindent">This file contains a list of network services and their associated TCP/IP ports. We discussed <em>/etc/services</em> in <a href="ch07.xhtml#ch07">Chapter 7</a>.</p>
<h3 class="h3" id="lev621"><strong>/etc/shells</strong></h3>
<p class="noindent">This file contains the list of all legitimate user shells, as discussed in <a href="ch09.xhtml#ch09">Chapter 9</a>.</p>
<h3 class="h3" id="lev622"><strong>/etc/skel/</strong></h3>
<p class="noindent">In <em>/etc/skel/</em>, you’ll find shell dotfiles that get copied to the new user accounts.</p>
<h3 class="h3" id="lev623"><strong>/etc/snmpd.config</strong></h3>
<p class="noindent">FreeBSD includes a basic SNMP implementation, which we discuss in <a href="ch20.xhtml#ch20">Chapter 20</a>.</p>
<h3 class="h3" id="lev624"><strong>/etc/spwd.db</strong></h3>
<p class="noindent">This file contains the confidential database of the user password file <em>/etc/master.passwd</em>. See <a href="ch09.xhtml#ch09">Chapter 9</a> for all the inglorious detail.</p>
<h3 class="h3" id="lev625"><strong>/etc/src.conf</strong></h3>
<p class="noindent">This file contains machine instructions for building FreeBSD from source. It’s a parallel of <em>make.conf</em> for the source tree alone. Values set in <em>/etc/make.conf</em> affect building FreeBSD from source as well, though; the difference is that <em>/etc/src.conf</em> affects only building FreeBSD but not ports and packages. See <a href="ch18.xhtml#ch18">Chapter 18</a> for all your upgrading needs.</p>
<h3 class="h3" id="lev626"><strong>/etc/ssh/</strong></h3>
<p class="noindent">Configure the Secure Shell software suite (SSH) in <em>/etc/ssh</em>. This includes the client ssh(1) and the server sshd(8). <a href="ch20.xhtml#ch20">Chapter 20</a> touches on sshd(8).</p>
<h3 class="h3" id="lev627"><strong>/etc/ssl/</strong></h3>
<p class="noindent">FreeBSD includes the OpenSSL cryptographic software. <a href="ch19.xhtml#ch19">Chapter 19</a> discusses a few basic uses and configuration. The <em>/etc/ssl</em> directory contains most OpenSSL information.</p>
<h3 class="h3" id="lev628"><span epub:type="pagebreak" id="page_332"/><strong>/etc/sysctl.conf</strong></h3>
<p class="noindent">This file contains information on which kernel sysctls are set during the boot process. See <a href="ch06.xhtml#ch06">Chapter 6</a>.</p>
<h3 class="h3" id="lev629"><strong>/etc/syslog.conf, /etc/syslog.conf.d/</strong></h3>
<p class="noindent">This file controls which data goes into your system logs and where those logs are stored. See <a href="ch21.xhtml#ch21">Chapter 21</a>.</p>
<h3 class="h3" id="lev630"><strong>/etc/termcap, /etc/termcap.small</strong></h3>
<p class="noindent">This file contains the settings and capabilities of different terminal types. In the age when terminals came in dozens of different types and vendors released new terminals on an almost daily basis, understanding this file was vital. Now that the world has largely converged on vt100 as a standard, however, the default configuration is suitable for almost everyone.</p>
<p class="indent">The termcap file is a symlink to <em>/usr/share/misc/termcap</em>. This file might not be available in single-user mode. FreeBSD offers the <em>/etc/termcap.small</em> file to provide terminal information in single-user mode.</p>
<h3 class="h3" id="lev631"><strong>/etc/ttys</strong></h3>
<p class="noindent">This file contains all of the system terminal devices (the windows containing a command prompt). The name is a relic of the time when terminals were physical teletypes, but today most users use the virtual terminals generated by telnet or SSH.</p>
<p class="indent">We’ll use this file to set up serial logins in <a href="ch23.xhtml#ch23">Chapter 23</a>.</p>
<h3 class="h3" id="lev632"><strong>/etc/unbound/</strong></h3>
<p class="noindent">FreeBSD ships with the Unbound DNS client. The configuration information goes in <em>/etc/unbound/</em>. <a href="ch20.xhtml#ch20">Chapter 20</a> covers setting up Unbound as a local DNS resolver.</p>
<h3 class="h3" id="lev633"><strong>/etc/wall_cmos_clock</strong></h3>
<p class="noindent">This isn’t a vital file, but as I went to the trouble of digging up what it does, you get to learn about it. If this file exists, FreeBSD’s time-keeping routines have determined that the hardware’s CMOS clock keeps a time other than Coordinated Universal Time (UTC). If the file is missing, the CMOS clock is set to some other time. It’s documented in adjkerntz(8).</p>
<h3 class="h3" id="lev634"><span epub:type="pagebreak" id="page_333"/><strong>/etc/zfs/</strong></h3>
<p class="noindent">FreeBSD’s ZFS uses this directory to store NFS integration information. We discuss NFS in <a href="ch13.xhtml#ch13">Chapter 13</a>.</p>
<p class="indent">If you can crawl through all of <em>/etc</em>, you’ll be better prepared than most sysadmins. Now let’s add some software to your server.<span epub:type="pagebreak" id="page_334"/></p>
</body></html>