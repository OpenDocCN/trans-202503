<html><head></head><body>
<div id="sbo-rt-content"><section aria-labelledby="ch11" epub:type="chapter" role="doc-chapter">
<span aria-label="195" epub:type="pagebreak" id="pg_195" role="doc-pagebreak"/>
<hgroup>
<h2 class="CHAPTER" id="ch11">
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11</span></span>
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">CREATING AND PROCESSING WEB FORMS</span></span>
</h2>
</hgroup>
<figure class="opener"><img alt="" class="opener" height="380" src="../images/opener.jpg" width="380"/>
</figure>
<p class="INTRO">After simple, clickable links, web forms are perhaps the most common way people interact with websites. In this chapter, we’ll look at how web clients can submit form data to server scripts, and we’ll create a range of web forms that send data. We’ll also practice writing server-side PHP scripts to extract and process the incoming form data. You’ll learn to handle data from a range of web-form elements, sent with both <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> HTTP requests.</p>
<p class="TX">A <i>web form</i> is simply a portion of a web page that allows the user to enter data and then communicates that user input to server applications. Examples of web form interactions include creating a Facebook post, booking flights or entertainment tickets, and entering login information. As you’ll see, each form on a web page is defined between starting and ending HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;form&gt;</span> tags. The form data might be text input by the user, or it might come from mechanisms like radio buttons, selections lists, <span aria-label="196" epub:type="pagebreak" id="pg_196" role="doc-pagebreak"/>or checkboxes. We’ll discuss how to work with all these types of input in this chapter.</p>
<section aria-labelledby="sec1" epub:type="division">
<h3 class="H1" id="sec1"><span id="toc-link_154"/><span class="SANS_Futura_Std_Bold_B_11">Basic Client/Server Communication for Web Forms</span></h3>
<p class="TNI1">Behind the typical web form lies a sequence of four messages between a web client (such as the user’s browser) and a web server, whereby the form is requested, received, submitted, and processed. <a href="#fig11-1">Figure 11-1</a> summarizes these messages.</p>
<figure class="IMG"><a id="fig11-1"/><img alt="" class="img100" height="1131" src="../images/figure11-1.jpg" width="1322"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-1: The typical exchange of messages for displaying and processing a web form</span></p></figcaption>
</figure>
<p class="TX">First, the web browser client requests the HTML of the form from the server <span aria-label="annotation1" class="CodeAnnotation">❶</span>. The user triggers this request through an action such as clicking a link or a button. Next, the server retrieves and, in some cases, customizes the HTML for the form and sends it back to the client <span aria-label="annotation2" class="CodeAnnotation">❷</span>. Once the user has entered data and submitted the form, the form data is sent back to the server <span aria-label="annotation3" class="CodeAnnotation">❸</span>. Finally, the server processes the received data, constructs an appropriate message for the user, and sends that message back <span aria-label="annotation4" class="CodeAnnotation">❹</span>. This final message may be a simple confirmation of received data or an error message if an issue occurs, or it could be the original form with messages highlighting missing required data.</p>
<section aria-labelledby="sec2" epub:type="division">
<span aria-label="197" epub:type="pagebreak" id="pg_197" role="doc-pagebreak"/>
<h4 class="H2" id="sec2"><span id="toc-link_155"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">GET vs. POST Requests</span></h4>
<p class="TNI1">As mentioned in <span class="Xref"><a href="chapter10.xhtml">Chapter 10</a></span>, the two most common types of HTTP request sent from a client to a server are <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span>. When you create an HTML form, you can send the data to the server with either type of request, since both <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> can send variables from the browser client to the web server as part of the request. In almost all cases, the data variables sent from web forms to the server are simple name/value pairs, such as <span class="SANS_TheSansMonoCd_W5Regular_11">username=matt</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">q=chocolate</span>.</p>
<p class="TX">The request type you use comes down to the purposes of the form and how you want the form data to be sent. As you’ll see, the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method makes the submission variables visible in the URL, while the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method can hide the variables in the body of the HTTP request.</p>
<section aria-labelledby="sec3" epub:type="division">
<h5 class="H3" id="sec3"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Sending Data Visibly with GET</span></h5>
<p class="TNI1">An HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request is primarily for retrieving data or a web page from a server. While you can send data along with the request to help with this retrieval, a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request should never result in changes to content stored on the server (such as modifications to values in a database).</p>
<p class="TX">With a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request, any variables the server needs to complete the request, including values submitted through web forms, are added to the end of the URL of the request, after a question mark character (<span class="SANS_TheSansMonoCd_W5Regular_11">?</span>). This part of the URL after the question mark is known as a <i>query string</i>, and it will be visible in your browser’s address bar. The variables are encoded as name/value pairs in the form <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">name</span><span class="SANS_TheSansMonoCd_W5Regular_11">=</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">value</span>, such as <span class="SANS_TheSansMonoCd_W5Regular_11">username=matt</span>. For example, when you perform a search using Google or Bing, the terms you enter into the search engine’s web form are assigned to the variable <span class="SANS_TheSansMonoCd_W5Regular_11">q</span>, added to a URL query string, and sent using a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request.</p>
<p class="TX">Say you use Google to search the phrase <i>cheese cake</i>. When you view the search results, you should see something like <i>https://www.google.com/search?q=cheese+cake</i> in the address bar. The single letter <i>q</i> represents your search query and is paired with the value you entered into Google’s web form. This indicates your query was passed to Google’s servers through a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request.</p>
<p class="TX">Special rules define the characters allowed in a URL, and the variables sent via the HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method must follow these rules too. As a result, special characters and spaces can’t be represented verbatim in a query string but must instead be encoded as other symbols. For example, each space is replaced with either <span class="SANS_TheSansMonoCd_W5Regular_11">%20</span> or a plus sign (<span class="SANS_TheSansMonoCd_W5Regular_11">+</span>), which is why the Google search query string reads <i>q=cheese+cake</i> rather than <i>q=cheese cake</i>. When two or more variables are being encoded (for example, from separate fields in a form), the name/value pairs are separated by ampersand (<span class="SANS_TheSansMonoCd_W5Regular_11">&amp;</span>) characters, as in <i>?firstname=matt&amp;lastname=smith</i>. The web browser will look after this sort of encoding automatically, but knowing about it is handy since it explains why you’ll often see cryptic, percent-encoded characters when sending form data with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method.</p>
<p class="TX"><span aria-label="198" epub:type="pagebreak" id="pg_198" role="doc-pagebreak"/>One common use of the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method is to create a URL that’s easily bookmarked, perhaps to share with someone else via email or text message. The Google <i>cheese cake</i> query is one example: <i>https://www.google.com/search?q=cheese+cake</i>. Another example could be a Google Maps search, such as this one for Dublin, Ireland: <i>https://www.google.com/maps?q=dublin+ireland</i>. The variables in the URL can come from values entered into a web form, as is the case with a Google search, or they can be hardcoded by explicitly adding the question mark and the desired name/value pairs to the end of a URL.</p>
<p class="TX"><a href="#fig11-2">Figure 11-2</a> shows an example of the latter, where clicking the COMP H2029 -FT link initiates a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request that includes the name/value pair <span class="SANS_TheSansMonoCd_W5Regular_11">id=1499</span> in the query string. This <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> value doesn’t come from user input but rather was hardcoded into the logic of the website.</p>
<figure class="IMG"><a id="fig11-2"/><img alt="" class="img100" height="438" src="../images/figure11-2.jpg" width="1323"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-2: A link with a hardcoded value to be sent via the</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">GET</span> <span class="SANS_Futura_Std_Book_Oblique_11">request method</span></p></figcaption>
</figure>
<p class="TX">A web server doesn’t care how a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request is created. Whether the query-string variables come from form submissions or were hardcoded, the name/value pairs can be extracted by a server-side script for processing.</p>
</section>
<section aria-labelledby="sec4" epub:type="division">
<h5 class="H3" id="sec4"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Sending Data Invisibly with POST</span></h5>
<p class="TNI1">HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> requests send data primarily for the purposes of creating or modifying a resource on a server. With the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method, you can send variables in the body of the HTTP message, meaning they won’t be seen in the resulting URL. For any confidential data like usernames and passwords, you should use <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> requests so that people looking at the screen can’t see the data values being sent to the server. In fact, most web forms send their data by using the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method. <a href="#fig11-3">Figure 11-3</a> illustrates a <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method login form.</p>
<span aria-label="199" epub:type="pagebreak" id="pg_199" role="doc-pagebreak"/>
<figure class="IMG"><a id="fig11-3"/><img alt="" class="img100" height="701" src="../images/figure11-3.jpg" width="1691"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-3:</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <span class="SANS_Futura_Std_Book_Oblique_11">method variables in the request body</span></p></figcaption>
</figure>
<p class="TX">In this example, I’ve tried to log in to a site with a username of <span class="SANS_TheSansMonoCd_W5Regular_11">matt</span> and a password of <span class="SANS_TheSansMonoCd_W5Regular_11">smith</span>. The browser’s HTTP message inspection tool reveals that the username and password values were sent in the body of the HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> request. These values therefore don’t appear as part of the URL in the address bar.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>A</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <i>request can send data directly in the query string, like a</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">GET</span> <i>request, as well as in the request body. We’ll explore</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <i>requests that do both in “Sending Noneditable Data Along with Form Variables” on <a href="#pg_206">page 206</a>.</i></p>
</section>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h4 class="H2" id="sec5"><span id="toc-link_156"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">A Simple Example</span></h4>
<p class="TNI1">To more clearly understand how the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> methods send data differently, let’s build a simple site with a web form consisting of a single text box where the user can enter their name (see <a href="#fig11-4">Figure 11-4</a>). We’ll try passing data from the form by using both HTTP methods. As you’ll see, we can choose which method to use whenever we create an HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;form&gt;</span> element.</p>
<figure class="IMG"><a id="fig11-4"/><img alt="" class="img90" height="350" src="../images/figure11-4.jpg" width="1177"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-4: A simple web form displayed in the browser</span></p></figcaption>
</figure>
<p class="TX"><span aria-label="200" epub:type="pagebreak" id="pg_200" role="doc-pagebreak"/>Our project will consist of a <i>public</i> folder containing two PHP script files, <i>index.php</i> and <i>process.php</i>. Here, <i>index.php</i> is the default home-page script that will display the form, and <i>process.php</i> will receive the name submitted by the user from the index page and generate a <i>Hello &lt;name&gt;</i> message in response.</p>
<section aria-labelledby="sec6" epub:type="division">
<h5 class="H3" id="sec6"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Creating a Form with the GET Method</span></h5>
<p class="TNI1">We’ll start with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> version of our simple web form. Create a new project with a <i>public</i> folder, and inside that folder create a new PHP script file named <i>index.php</i>. Enter the code shown in <a href="#lis11-1">Listing 11-1</a>.</p>
<span id="lis11-1"/>
<pre><code>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;simple form&lt;/title&gt;&lt;/head&gt;&#13;
&lt;body&gt;&#13;
&lt;form method="GET" action="process.php"&gt;&#13;
    &lt;input name="firstName"&gt;&#13;
    &lt;input type="submit"&gt;&#13;
&lt;/form&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-1: The HTML code for a simple web form using the</span> <span class="TheSansMonoCd_W5Regular_Italic_11">GET</span> <span class="SANS_Futura_Std_Book_Oblique_11">method</span></p>
<p class="TX">The file consists entirely of HTML template text, including a <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;form&gt;</span> element that defines the web form. We use the element’s <span class="SANS_TheSansMonoCd_W5Regular_11">method</span> attribute to declare that the form data should be submitted with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> HTTP method, and the <span class="SANS_TheSansMonoCd_W5Regular_11">action</span> attribute to specify that the HTTP request and its data should be sent to the <i>process.php</i> server script. Note that the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> values of the <span class="SANS_TheSansMonoCd_W5Regular_11">method</span> HTML form attribute are case insensitive, so we could also write <span class="SANS_TheSansMonoCd_W5Regular_11">method="get"</span>.</p>
<p class="TX">Within the form, we create an <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;input&gt;</span> element and give it a <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> of <span class="SANS_TheSansMonoCd_W5Regular_11">firstName</span>. We also create a second <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;input&gt;</span> element with a <span class="SANS_TheSansMonoCd_W5Regular_11">type</span> of <span class="SANS_TheSansMonoCd_W5Regular_11">submit</span> to add a Submit button to the form. Since we don’t specify the <span class="SANS_TheSansMonoCd_W5Regular_11">type</span> of the <span class="SANS_TheSansMonoCd_W5Regular_11">firstName</span> input, HTML 5 automatically defines the default form input type to be a text box. Text boxes are displayed to the user as rectangular input boxes. If you wanted to explicitly declare the type of input, you could do so via <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;input type="text" name="firstName"&gt;</span>. You could go further and set the character width of the text box and other specs by using the various optional attributes for each type of HTML form input.</p>
<p class="TX">Since our form inputs only a single value, we don’t need to bother displaying a text label to the user. However, when several input controls are present, you should precede each with a prompt so that the user knows which text box (or radio button or other input type) relates to which value. For example, if we wanted the user to input an age, we might write the template text <span class="SANS_TheSansMonoCd_W5Regular_11">Age:</span> and then the form input, like so:</p>
<pre><code>Age: &lt;input name="age"&gt;</code></pre>
<p class="BodyContinued">Modern HTML good practice would also require us to add an <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> attribute to the age input with <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;input name="age" id="age"&gt;</span> and a <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;label&gt;</span> element around the template text with <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;label for="age"&gt;Age:&lt;/label&gt;</span>. This allows the user to click either the label or the text box to make <span class="SANS_TheSansMonoCd_W5Regular_11">age</span> the active form input.</p>
</section>
<section aria-labelledby="sec7" epub:type="division">
<span aria-label="201" epub:type="pagebreak" id="pg_201" role="doc-pagebreak"/>
<h5 class="H3" id="sec7"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Processing the GET Request</span></h5>
<p class="TNI1">We’ve created an HTML web form, but our work is only half done; we also need to write the <i>process.php</i> script to handle the data submitted through the form. All we need to know when writing processing scripts for simple forms is the name of the variable the script is to receive and whether that variable was submitted through the query string (as with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method) or in the request body (as with the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method).</p>
<p class="TX">In this case, the script should attempt to find a value for the <span class="SANS_TheSansMonoCd_W5Regular_11">firstName</span> variable in the query string received from the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request and then output HTML to present to the user a greeting featuring that name. Add <i>process.php</i> to the <i>public</i> folder of your project and enter the code in <a href="#lis11-2">Listing 11-2</a>.</p>
<span id="lis11-2"/>
<pre><code>&lt;?php&#13;
//----- (1) LOGIC -----&#13;
<span aria-label="annotation1" class="codeannotated_CodeAnnotation">❶</span> $firstName = filter_input(INPUT_GET, 'firstName');&#13;
?&gt;&#13;
&#13;
&lt;!-- (2) HTML template output --&gt;&#13;
&lt;!doctype html&gt; &lt;html&gt;&lt;head&gt;&lt;title&gt;process&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#13;
<span aria-label="annotation2" class="codeannotated_CodeAnnotation">❷</span> Hello &lt;?= $firstName ?&gt;&#13;
&lt;/body&gt;&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-2: A</span> <span class="SANS_Futura_Std_Book_11">process.php</span> <span class="SANS_Futura_Std_Book_Oblique_11">server script to respond to the web form</span></p>
<p class="TX">Notice that we use two kinds of comments in this script, since it mixes two languages: a PHP comment starting with <span class="SANS_TheSansMonoCd_W5Regular_11">//</span> and an HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;!--</span> comment. Inside the initial PHP code block, we call the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function to read data from the incoming HTTP request, storing the result in the <span class="SANS_TheSansMonoCd_W5Regular_11">$firstName</span> variable <span aria-label="annotation1" class="CodeAnnotation">❶</span>. The <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_GET</span> argument specifies that we want to read data embedded directly in the URL query string, and the '<span class="SANS_TheSansMonoCd_W5Regular_11">firstName'</span> argument identifies the specific HTML form variable we’re looking for. Form input variable names are case sensitive, so it’s important to carefully match the variable names defined in HTML forms when calling the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function. If we passed <span class="SANS_TheSansMonoCd_W5Regular_11">'firstname'</span> rather than <span class="SANS_TheSansMonoCd_W5Regular_11">'firstName'</span> as a function argument, for example, the script wouldn’t work. When passing the value of a form variable along to a PHP variable, as we’re doing here, it’s generally good practice to give the PHP variable the same name as the corresponding form variable.</p>
<p class="TX">Next, we declare the HTML that should be sent in response to the form submission. This includes the template text <span class="SANS_TheSansMonoCd_W5Regular_11">Hello</span> followed by the value of the <span class="SANS_TheSansMonoCd_W5Regular_11">$firstName</span> variable inside PHP short echo tags <span aria-label="annotation2" class="CodeAnnotation">❷</span>.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>The</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">INPUT_GET</span> <i>argument to</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">filter_input()</span> <i>is somewhat misleadingly named. Its purpose is to retrieve data from the URL query string, regardless of whether that data was sent via the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">GET</span> <i>method (where all variables are part of the query string) or via the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <i>method (where data can be either in the query string or in the request body). Therefore, when you see</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">GET</span> <i>while working on form-processing code in PHP, interpret this as</i> <span class="note">query-string variables</span> <i>and don’t necessarily assume they came from a</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">GET</span> <i>request.</i></p>
</section>
<section aria-labelledby="sec8" epub:type="division">
<span aria-label="202" epub:type="pagebreak" id="pg_202" role="doc-pagebreak"/>
<h5 class="H3" id="sec8"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Testing the Form</span></h5>
<p class="TNI1">Now that we’ve created the web form in <i>index.php</i> and written the <i>process.php</i> script to respond to it, let’s test our work. Launch the PHP web server at the command line by using the <span class="SANS_TheSansMonoCd_W7Bold_11">php -S localhost:8000 -t public</span> command, as discussed in <span class="Xref"><a href="chapter10.xhtml">Chapter 10</a></span>; then open a browser tab to <i>localhost:8000</i>. The form we’ve created should be displayed by default since the file is named <i>index.php</i>. You’ll see something like the form in <a href="#fig11-4">Figure 11-4</a>: a text box with a Submit button.</p>
<p class="TX">Enter your name into the form, then click <b>Submit</b>. When you do, the text entered should be sent as part of an HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request from the browser to the PHP server. The <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request triggers the server to execute the <i>process.php</i> script, as declared in the <span class="SANS_TheSansMonoCd_W5Regular_11">action</span> attribute of the HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;form&gt;</span> element in <i>index.php</i>. This script extracts the submitted value and injects it into its HTML template text, which is then added to the text buffer that becomes the body of the HTTP response message the server sends back to the requesting client (the web browser). You should see something like <a href="#fig11-5">Figure 11-5</a> as a result.</p>
<figure class="IMG"><a id="fig11-5"/><img alt="" class="img90" height="308" src="../images/figure11-5.jpg" width="1113"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-5: The result of the</span> <span class="SANS_Futura_Std_Book_11">process.php</span> <span class="SANS_Futura_Std_Book_Oblique_11">script, confirming the data received through the form</span></p></figcaption>
</figure>
<p class="TX">You see your name not only in the greeting displayed on the page (such as <i>Hello matt</i> in the figure) but also at the end of the URL in the browser’s address bar, because the form is submitted via a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request. For example, the URL I get when I submit <span class="SANS_TheSansMonoCd_W5Regular_11">matt</span> through the form is <i>localhost:8000/process.php?firstName=matt</i>. This indicates the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request is trying to access the <i>process.php</i> script and pass it a <span class="SANS_TheSansMonoCd_W5Regular_11">firstName</span> variable with a value of <span class="SANS_TheSansMonoCd_W5Regular_11">matt</span>. Notice the question mark separating the query string from the rest of the URL.</p>
</section>
<section aria-labelledby="sec9" epub:type="division">
<h5 class="H3" id="sec9"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Switching to the POST Method</span></h5>
<p class="TNI1">Let’s modify our project to send the form data with the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method rather than <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and see what difference it makes. Only a few minor changes are needed. First, update the <i>index.php</i> script as shown in <a href="#lis11-3">Listing 11-3</a>.</p>
<span id="lis11-3"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;simple form&lt;/title&gt;&lt;/head&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;body&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;form</span> method="POST" <span class="TheSansMonoCd_W5Regular_Grey_11">action="process.php"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;input name="firstName"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;input type="submit"&gt;</span>&#13;
<span aria-label="203" epub:type="pagebreak" id="pg_203" role="doc-pagebreak"/><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/form&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/body&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/html&gt;</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-3: Switching from</span> <span class="TheSansMonoCd_W5Regular_Italic_11">GET</span> <span class="SANS_Futura_Std_Book_Oblique_11">to</span> <span class="TheSansMonoCd_W5Regular_Italic_11">POST</span> <span class="SANS_Futura_Std_Book_Oblique_11">in</span> <span class="SANS_Futura_Std_Book_11">index.php</span></p>
<p class="TX">We now declare the <span class="SANS_TheSansMonoCd_W5Regular_11">method</span> of the <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;form&gt;</span> element to be <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span>. That’s it: no further changes are required to the index script to ensure that the web browser uses the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method instead of <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> to submit the form data. Next, update <i>process.php</i> as shown in <a href="#lis11-4">Listing 11-4</a>.</p>
<span id="lis11-4"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">//----- (1) LOGIC -----</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$firstName = filter_input(</span>INPUT_POST<span class="TheSansMonoCd_W5Regular_Grey_11">, 'firstName');</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">?&gt;</span>&#13;
&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;!-- (2) HTML template output --&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;!doctype html&gt; &lt;html&gt;&lt;head&gt;&lt;title&gt;process&lt;/title&gt;&lt;/head&gt;&lt;body&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">Hello &lt;?= $firstName ?&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/body&gt;&lt;/html&gt;</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-4: Switching from</span> <span class="TheSansMonoCd_W5Regular_Italic_11">GET</span> <span class="SANS_Futura_Std_Book_Oblique_11">to</span> <span class="TheSansMonoCd_W5Regular_Italic_11">POST</span> <span class="SANS_Futura_Std_Book_Oblique_11">in</span> <span class="SANS_Futura_Std_Book_11">process.php</span></p>
<p class="TX">This is another simple change: all we have to do is pass <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_POST</span> rather than <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_GET</span> as an argument to <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> to tell the function to look for a variable submitted in the body of the request with <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span>.</p>
<p class="TX">Try running the web server and submitting your name through the form again. You should still see the same <i>Hello &lt;name&gt;</i> greeting as before. If you look a little closer, however, you’ll see some key differences, as shown in <a href="#fig11-6">Figure 11-6</a>.</p>
<figure class="IMG"><a id="fig11-6"/><img alt="" class="img80" height="852" src="../images/figure11-6.jpg" width="1023"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-6: Viewing the HTTP</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <span class="SANS_Futura_Std_Book_Oblique_11">request and the</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">firstName</span> <span class="SANS_Futura_Std_Book_Oblique_11">variable with the browser developer tools</span></p></figcaption>
</figure>
<p class="TX"><span aria-label="204" epub:type="pagebreak" id="pg_204" role="doc-pagebreak"/>First, the URL in the browser’s address bar should read just <i>localhost:8000/ process.php</i>. Because the <span class="SANS_TheSansMonoCd_W5Regular_11">firstName</span> form variable is now being sent in the request body with <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span>, it no longer appears in the URL query string for all to see. You can verify that the variable is still being transmitted by viewing the request with the browser’s developer tools. In this example, I submitted the name <span class="SANS_TheSansMonoCd_W5Regular_11">Fred</span> through the form, and you can see in <a href="#fig11-6">Figure 11-6</a> that, indeed, the form data variable <span class="SANS_TheSansMonoCd_W5Regular_11">firstName=Fred</span> is shown in the body of the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> request.</p>
</section>
</section>
</section>
<section aria-labelledby="sec10" epub:type="division">
<h3 class="H1" id="sec10"><span id="toc-link_157"/><span class="SANS_Futura_Std_Bold_B_11">The filter_input() Function</span></h3>
<p class="TNI1">Our simple web form project illustrated how to receive incoming form data by using PHP’s <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function. This function makes it easy to extract values submitted with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> methods. Writing form-processing scripts wasn’t always so simple, however; in older versions of PHP, the usual way to extract data received from the user was to access one or both of the built-in <span class="SANS_TheSansMonoCd_W5Regular_11">$_GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">$_POST</span> <i>superglobal arrays</i>.</p>
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">$_GET</span> array contains key/value pairs representing all the variables received as part of the URL query string, while the <span class="SANS_TheSansMonoCd_W5Regular_11">$_POST</span> array contains key/value pairs representing all the variables received via the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> HTTP method. For instance, submitting the first name <span class="SANS_TheSansMonoCd_W5Regular_11">Matt</span> through the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request version of our simple web form would produce a <span class="SANS_TheSansMonoCd_W5Regular_11">$_GET</span> array containing <span class="SANS_TheSansMonoCd_W5Regular_11">['firstName' =&gt; 'Matt']</span> and an empty <span class="SANS_TheSansMonoCd_W5Regular_11">$_POST</span> array.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>The</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">$_GET</span> <i>and</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">$_POST</span> <i>arrays are examples of PHP’s</i> <span class="note">superglobals</span><i>. These are arrays that always exist and that can be accessed from anywhere in your PHP code (that is, from any scope), including inside functions and class methods.</i></p>
<p class="TX">Even in modern PHP programming, extracting form data from these two superglobal arrays is still theoretically possible. But PHP version 5.2 introduced the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function as a much better way of accessing submitted data. To illustrate the improvement, let’s look at what it takes to work with these superglobal arrays.</p>
<p class="TX">In <span class="Xref"><a href="chapter7.xhtml">Chapter 7</a></span>, you learned that trying to access a nonexistent key in an array will trigger a warning, which you can avoid by using the <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> function to verify that an array key exists before accessing its value. This kind of test makes scripts more robust and error-proof, and it’s especially important when working directly with the <span class="SANS_TheSansMonoCd_W5Regular_11">$_GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">$_POST</span> arrays. Unfortunately, such a test also adds extra code to a script. For example, <a href="#lis11-5">Listing 11-5</a> illustrates how to safely retrieve a <span class="SANS_TheSansMonoCd_W5Regular_11">$firstName</span> variable from the <span class="SANS_TheSansMonoCd_W5Regular_11">$_GET</span> array.</p>
<span id="lis11-5"/>
<pre><code>&lt;?php&#13;
if (isset($_GET['firstName'])) {&#13;
    $firstName = $_GET['firstName'];&#13;
    // Now use filters / apply sanitization/validation to extracted value&#13;
} else {&#13;
    $firstName = NULL;&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-5: Testing an array key with</span> <span class="TheSansMonoCd_W5Regular_Italic_11">isset()</span> <span class="SANS_Futura_Std_Book_Oblique_11">before attempting to extract a value from</span> <span class="TheSansMonoCd_W5Regular_Italic_11">$_GET</span></p>
<p class="TX"><span aria-label="205" epub:type="pagebreak" id="pg_205" role="doc-pagebreak"/>We use <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> in an <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement to check whether the <span class="SANS_TheSansMonoCd_W5Regular_11">'firstName'</span> key exists in the <span class="SANS_TheSansMonoCd_W5Regular_11">$_GET</span> array (indicating that a <span class="SANS_TheSansMonoCd_W5Regular_11">firstName</span> form variable was submitted through the incoming query string). If the key exists, we pass on its value to the <span class="SANS_TheSansMonoCd_W5Regular_11">$firstName</span> variable. Otherwise, we set <span class="SANS_TheSansMonoCd_W5Regular_11">$firstName</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">NULL</span>. This <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement saves us from getting a warning if we naively access a nonexistent value in the array.</p>
<p class="TX">Listing 11-5 will work fine, but it represents such a common series of actions in PHP form-processing code that <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> was introduced to encapsulate it. Our entire <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement can therefore be replaced with a single statement:</p>
<pre><code>$firstName = filter_input(INPUT_GET, 'firstName')</code></pre>
<p class="BodyContinued">The <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function automatically checks whether the desired variable exists before trying to access it and typically returns <span class="SANS_TheSansMonoCd_W5Regular_11">NULL</span> if it doesn’t. This spares us from writing clunky conditional tests like the one in <a href="#lis11-5">Listing 11-5</a>.</p>
<p class="TX">An additional advantage of the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function is that it can use filters to ignore and remove unwanted and potentially dangerous content from the received form data. This helps prevent security vulnerabilities such as cross-site scripting attacks. For example, to filter out (discard) any nonalphabetic characters from the user input, we could add a third argument of <span class="SANS_TheSansMonoCd_W5Regular_11">FILTER_SANITIZE_SPECIAL_CHARS</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> call:</p>
<pre><code>$firstName = filter_input(INPUT_GET, 'firstName',&#13;
FILTER_SANITIZE_SPECIAL_CHARS);</code></pre>
<aside aria-labelledby="box-9" class="box">
<h4 class="BoxTitle" id="box-9"><span class="SANS_Dogma_OT_Bold_B_11">DATA FILTERING IN PHP</span></h4>
<p class="BoxBodyFirst"><span class="SANS_Futura_Std_Book_11">PHP has two main types of filtering: sanitization and validation.</span> <span class="SANS_Futura_Std_Book_Oblique_11">Sanitization</span> <span class="SANS_Futura_Std_Book_11">removes characters that aren’t permitted and that may potentially be a security threat, such as the less-than (</span><span class="SANS_TheSansMonoCd_W5Regular_11">&lt;</span><span class="SANS_Futura_Std_Book_11">) and greater-than (</span><span class="SANS_TheSansMonoCd_W5Regular_11">&gt;</span><span class="SANS_Futura_Std_Book_11">) symbols for tags around JavaScript code. You can also sanitize characters when you display them back to the user; for example, you might display the Unicode symbol for a less-than sign when it’s something the user might reasonably have entered in a blog about programming, in order to prevent user-entered special characters from becoming executable code in the output HTML document. By contrast,</span> <span class="SANS_Futura_Std_Book_Oblique_11">validation</span> <span class="SANS_Futura_Std_Book_11">tests that a received value is acceptable.</span></p>
<p class="BoxBody"><span class="SANS_Futura_Std_Book_11">To illustrate the difference between the two processes, say someone submits the character sequence</span> <span class="SANS_TheSansMonoCd_W5Regular_11">3.14.15</span> <span class="SANS_Futura_Std_Book_11">through a form. This sequence is sanitized for floats, since it contains only digits and decimal-point characters. It isn’t a valid floating-point number, however, since it contains two decimal points, whereas valid numbers can contain only one.</span></p>
<p class="BoxBody"><span class="SANS_Futura_Std_Book_11">Sanitization filters take in a value and a filter type and return a value with any illegal characters removed (and in some cases, replaced). If all characters</span> <span aria-label="206" epub:type="pagebreak" id="pg_206" role="doc-pagebreak"/><span class="SANS_Futura_Std_Book_11">are illegal, or</span> <span class="SANS_TheSansMonoCd_W5Regular_11">NULL</span> <span class="SANS_Futura_Std_Book_11">is given, then an empty string or</span> <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> <span class="SANS_Futura_Std_Book_11">is returned (a value is always returned when using the</span> <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> <span class="SANS_Futura_Std_Book_11">function). Validation filters generally take a value and a filter type and return</span> <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> <span class="SANS_Futura_Std_Book_11">or</span> <span class="SANS_TheSansMonoCd_W5Regular_11">false</span><span class="SANS_Futura_Std_Book_11">, or sometimes</span> <span class="SANS_TheSansMonoCd_W5Regular_11">NULL</span><span class="SANS_Futura_Std_Book_11">, depending on whether the value is valid for the given filter.</span></p>
<p class="BoxBody"><span class="SANS_Futura_Std_Book_11">The sanitization filter</span> <span class="SANS_TheSansMonoCd_W5Regular_11">FILTER_SANITIZE_SPECIAL_CHARS</span> <span class="SANS_Futura_Std_Book_11">replaces HTML special characters (such as</span> <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">&amp;</span><span class="SANS_Futura_Std_Book_11">) with HTML entities (such as</span> <span class="SANS_TheSansMonoCd_W5Regular_11">&amp;lt;</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">&amp;amp;</span><span class="SANS_Futura_Std_Book_11">), so a received string and later output to a web page won’t mess up the HTML grammar with extra special characters.</span></p>
<p class="BoxBodyLast"><span class="SANS_Futura_Std_Book_11">Learn more about the data filters from the PHP documentation at</span> <span class="SANS_Futura_Std_Book_Oblique_11"><a href="https://www.php.net/manual/en/intro.filter.php">https://www.php.net/manual/en/intro.filter.php</a></span><span class="SANS_Futura_Std_Book_11">.</span></p>
</aside>
</section>
<section aria-labelledby="sec11" epub:type="division">
<h3 class="H1" id="sec11"><span id="toc-link_158"/><span class="SANS_Futura_Std_Bold_B_11">Other Ways to Send Data</span></h3>
<p class="TNI1">Taking user input through a web form isn’t the only way to send data via an HTTP request. In this section, we’ll consider other techniques for transmitting data to a server. We’ll look at how to embed noneditable data into a query string for submission along with user-entered form data, how to send data about the form’s Submit button itself, and how to add query-string variables to a regular hyperlink, separate from any web form. Along the way, you’ll also see how to process a mixture of query string and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> variables, and how to harness PHP arrays and loops to generate query-string variables programmatically.</p>
<section aria-labelledby="sec12" epub:type="division">
<h4 class="H2" id="sec12"><span id="toc-link_159"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Sending Noneditable Data Along with Form Variables</span></h4>
<p class="TNI1">Often you’ll want a web form to send extra data that the user can’t edit. Perhaps the most common example occurs when the user, maybe an employee, is editing details for an item in a database. The item, which might be a record about a product or a customer, already has an assigned ID that should be included with the form data, but the ID itself should never be changed via the form. For these cases, you can send the noneditable values as query-string variables at the end of the URL in the form’s <span class="SANS_TheSansMonoCd_W5Regular_11">action</span> attribute (for example, <span class="SANS_TheSansMonoCd_W5Regular_11">action="/process.php?id=1022"</span>).</p>
<p class="TX">To illustrate, let’s create a new web form for submitting information about movies. Start a new project containing a <i>public</i> folder and create an <i>index.php</i> script within it. Then enter the HTML code in <a href="#lis11-6">Listing 11-6</a> to create the web form.</p>
<span id="lis11-6"/>
<pre><code>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Movie Form 1&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#13;
&lt;h1&gt;Edit movie&lt;/h1&gt;&#13;
<span aria-label="annotation1" class="codeannotated_CodeAnnotation">❶</span> &lt;form method="POST" action="/process.php?id=1022"&gt;&#13;
  <span aria-label="annotation2" class="Code_CodeAnnotation">❷</span> &lt;label for="title"&gt;Title: &lt;/label&gt;&lt;input name="title" id="title"&gt;&#13;
<span aria-label="207" epub:type="pagebreak" id="pg_207" role="doc-pagebreak"/>    &lt;br&gt;&#13;
  <span aria-label="annotation3" class="Code_CodeAnnotation">❸</span> &lt;label for="price"&gt;Price: &lt;/label&gt;&lt;input name="price" id="price"&gt;&#13;
    &lt;br&gt;&#13;
    &lt;input type="submit"&gt;&#13;
&lt;/form&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-6: The HTML code for a movie form in</span> <span class="SANS_Futura_Std_Book_11">index.php</span></p>
<p class="TX">We declare a form using the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method <span aria-label="annotation1" class="CodeAnnotation">❶</span>. (In a more realistic scenario, this form would likely result in changes to a record in a database, so <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> rather than <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> is the appropriate method here.) For the form’s <span class="SANS_TheSansMonoCd_W5Regular_11">action</span> attribute, we specify that the script to process the form is <i>process.php</i>, and we also send a URL query-string variable named <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> with a hardcoded value of <span class="SANS_TheSansMonoCd_W5Regular_11">1022</span>. When the form is submitted, this extra name/value pair will be visible in the resulting URL itself (much like data sent with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method). Meanwhile, the form will also send two variables with user-entered values in the body of the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> request: <span class="SANS_TheSansMonoCd_W5Regular_11">title</span> <span aria-label="annotation2" class="CodeAnnotation">❷</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">price</span> <span aria-label="annotation3" class="CodeAnnotation">❸</span>.</p>
</section>
<section aria-labelledby="sec13" epub:type="division">
<h4 class="H2" id="sec13"><span id="toc-link_160"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Processing Mixed Query-String and POST Variables</span></h4>
<p class="TNI1">Now let’s write the <i>process.php</i> script to receive and extract data from this movie form. Unlike our earlier form-processing script, this one needs to extract multiple variables from the incoming <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> request, including the <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> variable sent through the query string and the <span class="SANS_TheSansMonoCd_W5Regular_11">title</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">price</span> variables embedded in the request body. Add <i>process.php</i> to your project’s <i>public</i> folder and enter the code in <a href="#lis11-7">Listing 11-7</a>.</p>
<span id="lis11-7"/>
<pre><code>&lt;?php&#13;
//----- (1) LOGIC -----&#13;
$id = filter_input(INPUT_GET, 'id');&#13;
$title = filter_input(INPUT_POST, 'title');&#13;
$price = filter_input(INPUT_POST, 'price');&#13;
?&gt;&#13;
&#13;
&lt;!-- (2) HTML template output --&gt;&#13;
&lt;!doctype html&gt; &lt;html&gt;&lt;head&gt;&lt;title&gt;process&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#13;
id = &lt;?= $id ?&gt;&#13;
&lt;br&gt;title = &lt;?= $title ?&gt;&#13;
&lt;br&gt;price = &lt;?= $price ?&gt;&#13;
&lt;/body&gt;&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-7: The PHP server script to process the movie form</span></p>
<p class="TX">We use the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function with the <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_GET</span> argument to read the <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> query-string variable into the corresponding PHP variable, <span class="SANS_TheSansMonoCd_W5Regular_11">$id</span>. (Remember, <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_GET</span> simply means we’re reading data from the query string, even if that data was sent with the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method rather than <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span>. The actual method of the HTTP request makes little difference from the server-side script’s perspective.) Then we use <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> twice more with <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_POST</span> to read the two values from the request body into the <span class="SANS_TheSansMonoCd_W5Regular_11">$title</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">$price</span> <span aria-label="208" epub:type="pagebreak" id="pg_208" role="doc-pagebreak"/>variables. After some basic HTML page tags, we output each variable’s name and value by using PHP short echo tags, separating them with HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;br&gt;</span> line breaks.</p>
<p class="TX"><a href="#fig11-7">Figure 11-7</a> shows how the <i>process.php</i> script handles the incoming form data.</p>
<figure class="IMG"><a id="fig11-7"/><img alt="" class="img80" height="676" src="../images/figure11-7.jpg" width="1078"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-7: An HTTP request sending query-string and</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <span class="SANS_Futura_Std_Book_Oblique_11">variables</span></p></figcaption>
</figure>
<p class="TX">In this example, I filled in <span class="SANS_TheSansMonoCd_W5Regular_11">The Lost World</span> in the title field of the form and <span class="SANS_TheSansMonoCd_W5Regular_11">9.99</span> in the <span class="SANS_TheSansMonoCd_W5Regular_11">price</span> field. The output in the browser shows these values echoed back, along with the <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> value of <span class="SANS_TheSansMonoCd_W5Regular_11">1022</span> that we hardcoded into the query string. You should also see the <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> variable in the URL in the browser’s address bar, and if you view the request with the browser developer tools, you should see <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> listed as a query-string parameter, while <span class="SANS_TheSansMonoCd_W5Regular_11">title</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">price</span> are listed as form data variables in the request body.</p>
</section>
<section aria-labelledby="sec14" epub:type="division">
<h4 class="H2" id="sec14"><span id="toc-link_161"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Offering Multiple Submit Buttons</span></h4>
<p class="TNI1">Another way to send data through a form is to give a <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute to the form’s Submit button. This is especially useful when you want a form to feature multiple Submit buttons so the user can choose how to process the data in a form.</p>
<p class="TX">For example, a customer renting an online movie might want to pay for it and immediately start watching it, or they might want to pay for it but start watching later. Each option could be triggered by a different Submit button, as illustrated in <a href="#fig11-8">Figure 11-8</a>. The server-side script can then detect the name of the button the user clicked and respond accordingly.</p>
<span aria-label="209" epub:type="pagebreak" id="pg_209" role="doc-pagebreak"/>
<figure class="IMG"><a id="fig11-8"/><img alt="" class="img60" height="423" src="../images/figure11-8.jpg" width="753"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-8: Two Submit buttons for the same form</span></p></figcaption>
</figure>
<p class="TX">Let’s design such a form with multiple Submit buttons. Create a new project containing a <i>public</i> folder with a PHP script file named <i>index.php</i>, and enter the code in <a href="#lis11-8">Listing 11-8</a>.</p>
<span id="lis11-8"/>
<pre><code>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Movie Rent Form 1&lt;/title&gt;&#13;
&lt;link rel="stylesheet"&#13;
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"&#13;
&gt; <span aria-label="annotation1" class="codewide_CodeAnnotation">❶</span>&#13;
&lt;/head&gt;&#13;
&lt;body class="container"&gt;&#13;
&lt;h1&gt;Rent movie&lt;/h1&gt;&#13;
&lt;form method="POST" action="process.php?movieId=80441"&gt; <span aria-label="annotation2" class="codewide_CodeAnnotation">❷</span>&#13;
    &lt;p&gt;&lt;label for="number"&gt;Credit card number:&lt;/label&gt;&#13;
    &lt;input name="number" id="number"&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&lt;label for="date"&gt;&#13;
    Expiry date:&lt;/label&gt;&#13;
    &lt;input name="date" id="date"&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&lt;label for="ccv"&gt;&#13;
    CCV code:&lt;/label&gt;&#13;
    &lt;input name="ccv" id="ccv"&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&#13;
    &lt;input type="submit" name="watchNow" <span aria-label="annotation3" class="codewide_CodeAnnotation">❸</span>&#13;
        value="Pay and start watching now" class="btn btn-success"&gt;&#13;
    &lt;input type="submit" name="watchLater" <span aria-label="annotation4" class="codewide_CodeAnnotation">❹</span>&#13;
        value="Pay and watch later" class="btn btn-success"&gt;&#13;
    &lt;/p&gt;&#13;
&lt;/form&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-8: The HTML code for a form with two Submit buttons</span></p>
<p class="TX">First, we read in the Bootstrap CSS stylesheet <span aria-label="annotation1" class="CodeAnnotation">❶</span>. This allows us to style the <span class="SANS_TheSansMonoCd_W5Regular_11">submit</span>-type inputs to look like nice green buttons by using <span class="SANS_TheSansMonoCd_W5Regular_11">class="btn btn-success"</span> without having to write any CSS code ourselves. Then we set up a form using the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method since this form submits data that would likely <span aria-label="210" epub:type="pagebreak" id="pg_210" role="doc-pagebreak"/>lead to changes on the server (processing the payment and recording the movie as being rented by the user) <span aria-label="annotation2" class="CodeAnnotation">❷</span>. Notice that we’ve hardcoded a <span class="SANS_TheSansMonoCd_W5Regular_11">movieID</span> variable into the query string through the form’s <span class="SANS_TheSansMonoCd_W5Regular_11">action</span> attribute, much as in the previous movie form example.</p>
<p class="TX">We give the form input fields for the user’s credit card information, and then we define two Submit buttons, one with a <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute of <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span> <span aria-label="annotation3" class="CodeAnnotation">❸</span> and the other with a <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute of <span class="SANS_TheSansMonoCd_W5Regular_11">watchLater</span> <span aria-label="annotation4" class="CodeAnnotation">❹</span>. These buttons also have <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attributes to define the text that will appear in each button. Thanks to these buttons’ <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attributes, when one of them is clicked, its name and value will be sent as a key/value pair in the body of the <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> request along with the other form data. For example, if the user clicks the <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span> button, a <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow=Pay and start watching now</span> will be sent with the request. The value portion is of little significance, but the server-side script can check for a key of <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span> among the form data to determine which Submit button was clicked. <a href="#lis11-9">Listing 11-9</a> shows a <i>process.php</i> file that does just that.</p>
<span id="lis11-9"/>
<pre><code>&lt;?php&#13;
if (filter_has_var(INPUT_POST, 'watchNow')) {&#13;
    print 'you clicked the button to &lt;b&gt;Watch Now&lt;/b&gt;';&#13;
} else {&#13;
    print 'you clicked the button to &lt;b&gt;Watch Later&lt;/b&gt;';&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-9: Detecting which Submit button was clicked in</span> <span class="SANS_Futura_Std_Book_11">process.php</span></p>
<p class="TX">Since the form has only two Submit buttons, we use an <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement to test whether one of them (<span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span>) was clicked; if not, we can safely assume that the other was clicked instead. (If we had three or more buttons, we could use <span class="SANS_TheSansMonoCd_W5Regular_11">elseif</span> statements or a <span class="SANS_TheSansMonoCd_W5Regular_11">switch</span> statement to detect the correct button.) In theory, we could call the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function as usual, extracting the value of the <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span> variable and checking that its value isn’t <span class="SANS_TheSansMonoCd_W5Regular_11">NULL</span> to determine whether that’s the button that was used. Since we aren’t interested in the value of <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span>, but rather in whether such a variable even exists in the incoming request, we instead use PHP’s <span class="SANS_TheSansMonoCd_W5Regular_11">filter_has_var()</span> function to set the <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement’s condition. This function takes two input parameters, the source of the variable (usually <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_GET</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_POST</span>) and the name of the variable, and returns <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">false</span> based on whether that named value is found.</p>
<p class="TX"><a href="#fig11-9">Figure 11-9</a> shows a sample submission through our movie rental web form.</p>
<span aria-label="211" epub:type="pagebreak" id="pg_211" role="doc-pagebreak"/>
<figure class="IMG"><a id="fig11-9"/><img alt="" class="img80" height="990" src="../images/figure11-9.jpg" width="1026"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-9: Finding a Submit button name among the</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">POST</span> <span class="SANS_Futura_Std_Book_Oblique_11">variables in the request body</span></p></figcaption>
</figure>
<p class="TX">In this example, I’ve used the <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span> button to submit the form data. The message on the resulting page confirms that the <i>process.php</i> script detected this button. Further, a look at the request with the browser developer tools shows <span class="SANS_TheSansMonoCd_W5Regular_11">watchNow</span> listed with the other <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> variables.</p>
</section>
<section aria-labelledby="sec15" epub:type="division">
<h4 class="H2" id="sec15"><span id="toc-link_162"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Encoding Data in Hyperlinks</span></h4>
<p class="TNI1">In addition to sending data through a web form, we can send data to a server by adding name/value pairs to the query string at the end of the URL in an HTML hyperlink. This data will be sent with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method, since whenever you click a link in a web page, your browser is making an HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request using the URL of the clicked link. An HTML hyperlink is represented with the anchor (<span class="SANS_TheSansMonoCd_W5Regular_11">&lt;a&gt;</span>) element; the link’s URL is set via the element’s <span class="SANS_TheSansMonoCd_W5Regular_11">href</span> attribute.</p>
<p class="TX">We’ll explore this additional way to send data via the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method through a typical example of a link that shows details about an item in an online shopping cart. <a href="#fig11-10">Figure 11-10</a> shows the button-styled links we want to create.</p>
<span aria-label="212" epub:type="pagebreak" id="pg_212" role="doc-pagebreak"/>
<figure class="IMG"><a id="fig11-10"/><img alt="" class="img50" height="317" src="../images/figure11-10.jpg" width="778"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-10: The Details hyperlinks styled as buttons in a shopping cart</span></p></figcaption>
</figure>
<p class="TX">Each item in the cart has a hyperlink (styled as a button) alongside it to show details about that item. The links might be to URLs such as <i>/show.php?id=102</i>. This URL would request the PHP script <i>show.php</i> via the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method, while passing the product’s ID (in this case, <span class="SANS_TheSansMonoCd_W5Regular_11">102</span>) through the query string <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> variable. The <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method is more appropriate than <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> in this case since the intended result is simply to display data (so no content is being changed on the server).</p>
<section aria-labelledby="sec16" epub:type="division">
<h5 class="H3" id="sec16"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Hardcoding the Links</span></h5>
<p class="TNI1">Let’s create the page shown in <a href="#fig11-10">Figure 11-10</a>. For simplicity, we’ll begin by hardcoding the product IDs into the hyperlinks. Create a new project containing a <i>public</i> folder and add an <i>index.php</i> script to that folder. Then enter the code in <a href="#lis11-10">Listing 11-10</a>.</p>
<span id="lis11-10"/>
<pre><code>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Basket Form 1&lt;/title&gt;&#13;
&lt;link rel="stylesheet"&#13;
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"&#13;
&gt;&#13;
&lt;/head&gt;&#13;
&lt;body class="container"&gt;&#13;
&lt;h1&gt;Your shopping cart&lt;/h1&gt;&#13;
&#13;
&lt;div class="row"&gt;&#13;
    &lt;div class="col-lg-3 text-end py-2"&gt;&#13;
        Hammer $ 19.99&#13;
        &lt;a href="/show.php?id=102" class="btn btn-primary"&gt;Details&lt;/a&gt; <span aria-label="annotation1" class="codewide_CodeAnnotation">❶</span>&#13;
    &lt;/div&gt;&#13;
&lt;/div&gt;&#13;
&#13;
&lt;div class="row"&gt;&#13;
    &lt;div class="col-lg-3 text-end py-2"&gt;&#13;
        Bucket of nails $ 9.99&#13;
        &lt;a href="/show.php?id=511" class="btn btn-primary"&gt;Details&lt;/a&gt; <span aria-label="annotation2" class="codewide_CodeAnnotation">❷</span>&#13;
    &lt;/div&gt;&#13;
&lt;/div&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-10: An</span> <span class="SANS_Futura_Std_Book_11">index.php</span> <span class="SANS_Futura_Std_Book_Oblique_11">file with data embedded in the Details hyperlinks</span></p>
<p class="TX"><span aria-label="213" epub:type="pagebreak" id="pg_213" role="doc-pagebreak"/>As in the previous example, we read in the Bootstrap CSS stylesheet as a shortcut for styling the page. In the page’s HTML, we create two links with the text <span class="SANS_TheSansMonoCd_W5Regular_11">Details</span>, styled as blue buttons using the Bootstrap CSS class <span class="SANS_TheSansMonoCd_W5Regular_11">btn btn-primary</span>: one for a hammer <span aria-label="annotation1" class="CodeAnnotation">❶</span> and one for a bucket of nails <span aria-label="annotation2" class="CodeAnnotation">❷</span>. Each link is to the PHP script <i>show.php</i>, with the ID of the product encoded into the URL in the fashion <span class="SANS_TheSansMonoCd_W5Regular_11">?id=102</span>. Clicking one of these links will send the appropriate <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> variable via a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request, as shown in <a href="#fig11-11">Figure 11-11</a>.</p>
<figure class="IMG"><a id="fig11-11"/><img alt="" class="img60" height="642" src="../images/figure11-11.jpg" width="930"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-11: The result of clicking one of the Details links</span></p></figcaption>
</figure>
<p class="TX">We won’t worry about writing the <i>show.php</i> script, but notice that clicking the Details link for the bucket of nails initiates a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request with an <span class="SANS_TheSansMonoCd_W5Regular_11">id</span> value of <span class="SANS_TheSansMonoCd_W5Regular_11">511</span> embedded in the query string.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>In a more realistic scenario, we wouldn’t hardcode</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">id</span> <i>values into links like this. Instead, we’d loop through an array representing the products in the user’s shopping cart and programmatically insert each product’s ID into its corresponding Details link. We’ll look at how to do this next.</i></p>
</section>
<section aria-labelledby="sec17" epub:type="division">
<h5 class="H3" id="sec17"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Generating the Links Programmatically</span></h5>
<p class="TNI1">Most of the content presented in web pages is dynamically generated at runtime based on values in the website’s database. Therefore, instead of hardcoding product ID values into links like <i>/show.php?id=102</i>, links are usually created programmatically with PHP statements looping through a collection of data representing the items in the user’s shopping cart. Each time through the loop, the product’s ID is looked up and dynamically inserted into a hyperlink. The product’s description and price are similarly dynamically inserted into generic HTML template text.</p>
<p class="TX">Let’s update our shopping cart page to try this approach. We’ll use an array to represent the shopping cart as a whole; each item in the array will itself be an array representing a particular cart item, with three values for the ID, description, and price of the product. Modify the <i>index.php</i> file as shown in <a href="#lis11-11">Listing 11-11</a>.</p>
<span id="lis11-11"/>
<pre><code><span aria-label="214" epub:type="pagebreak" id="pg_214" role="doc-pagebreak"/>&lt;?php&#13;
// Set up data array&#13;
$items = [&#13;
    ['id' =&gt; 102, 'description' =&gt; 'Hammer', 'price' =&gt; 9.99],&#13;
    ['id' =&gt; 511, 'description' =&gt; 'Bucket of nails', 'price' =&gt; 19.99],&#13;
];&#13;
?&gt;&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;</span>Cart From Array<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/title&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;link rel="stylesheet"</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/head&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;body class="container"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;h1&gt;Your shopping cart&lt;/h1&gt;</span>&#13;
&lt;?php foreach ($items as $item): ?&gt; <span aria-label="annotation1" class="codewide_CodeAnnotation">❶</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;div class="col-lg-3 text-end py-2"&gt;</span>&#13;
        &lt;?= $item['description'] ?&gt; $ &lt;?= $item['price'] ?&gt;&#13;
        &lt;a href="/show.php?id=&lt;?= $item['id'] ?&gt;" class="btn btn-primary"&gt;Details&lt;/a&gt; <span aria-label="annotation2" class="codewide_CodeAnnotation">❷</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;/div&gt;</span>&#13;
&lt;?php endforeach; ?&gt; <span aria-label="annotation3" class="codewide_CodeAnnotation">❸</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/body&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/html&gt;</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-11: Using a PHP loop to create the Details links for the shopping cart items</span></p>
<p class="TX">Before any HTML, we use a PHP code block to declare an <span class="SANS_TheSansMonoCd_W5Regular_11">$items</span> array containing information about our two products. (Of course, we’re still hardcoding the information, albeit within an array; in a more realistic scenario, we’d retrieve the product information from a database, as we’ll discuss in <span class="Xref"><a href="part6.xhtml">Part VI</a></span>). Then we begin the HTML template text. Under the <span class="SANS_TheSansMonoCd_W5Regular_11">Your shopping cart</span> heading, we use another PHP code block to begin a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop in which the <span class="SANS_TheSansMonoCd_W5Regular_11">$item</span> variable will represent the current element of the <span class="SANS_TheSansMonoCd_W5Regular_11">$items</span> array <span aria-label="annotation1" class="CodeAnnotation">❶</span>. We use alternative loop syntax with a colon (<span class="SANS_TheSansMonoCd_W5Regular_11">:</span>) to set up the start of the loop and <span class="SANS_TheSansMonoCd_W5Regular_11">endforeach</span> <span aria-label="annotation3" class="CodeAnnotation">❸</span> to close it. See <span class="Xref"><a href="chapter6.xhtml">Chapter 6</a></span> to review this alternative loop syntax which makes it easier to combine PHP with HTML.</p>
<p class="TX">Inside the loop, we use a mix of HTML and PHP short echo tags within a <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;div&gt;</span> to insert the current product’s <span class="SANS_TheSansMonoCd_W5Regular_11">'description'</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">'price'</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">'id'</span> values into the template text. In this way, we dynamically create a <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;div&gt;</span> element for each product, including a Bootstrap-styled Details link. Notice in particular that we embed the product’s ID into the <span class="SANS_TheSansMonoCd_W5Regular_11">href</span> property of the <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;a&gt;</span> element <span aria-label="annotation2" class="CodeAnnotation">❷</span>, which will result in hyperlinks like <i>/show.php?id=102</i>, just as before. Overall, the page should look exactly the same as <a href="#fig11-10">Figure 11-10</a>.</p>
</section>
</section>
</section>
<section aria-labelledby="sec18" epub:type="division">
<h3 class="H1" id="sec18"><span id="toc-link_163"/><span class="SANS_Futura_Std_Bold_B_11">Other Form Input Types</span></h3>
<p class="TNI1">Single text and numeric form inputs (<span class="SANS_TheSansMonoCd_W5Regular_11">text</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">password</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">textarea</span>, and so on) are all sent in the HTTP request as a name/value pair, but other types of form data aren’t quite so simple. It’s important to understand how the browser chooses the variable names and values for these other form elements so that <span aria-label="215" epub:type="pagebreak" id="pg_215" role="doc-pagebreak"/>you can write server scripts to correctly retrieve and validate the incoming data. In this section, we’ll discuss how to work with other common form elements like radio buttons, checkboxes, and single- and multiple-selection lists.</p>
<section aria-labelledby="sec19" epub:type="division">
<h4 class="H2" id="sec19"><span id="toc-link_164"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Radio Buttons</span></h4>
<p class="TNI1"><i>Radio buttons</i> are a set of two or more form input choices offered to the user, of which only one value can be chosen. Radio button inputs are declared in groups that share the same <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute, with each having a unique <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attribute to distinguish which input was selected. In this way, a set of radio buttons forms a group of mutually exclusive choices for the value assigned to the shared <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute. Except in rare situations where it’s acceptable for no option to be selected, one of the radio buttons should be automatically checked so the user is offered a default choice. This way, a value will definitely be sent in the HTTP request.</p>
<p class="TX">Let’s write the HTML for a form that uses radio buttons to present a choice between two Irish counties, as shown in <a href="#fig11-12">Figure 11-12</a>. This figure also illustrates the output when the form is processed by <i>process.php</i>.</p>
<figure class="IMG"><a id="fig11-12"/><img alt="" class="img50" height="478" src="../images/figure11-12.jpg" width="686"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-12: Radio buttons submitting values via a query-string parameter</span></p></figcaption>
</figure>
<p class="TX">Create a new project containing a <i>public</i> folder with an <i>index.php</i> script, then enter the code shown in <a href="#lis11-12">Listing 11-12</a>.</p>
<span id="lis11-12"/>
<pre><code>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt; Radio Buttons &lt;/title&gt;&#13;
&lt;link rel="stylesheet"&#13;
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"&#13;
&gt;&#13;
&lt;/head&gt;&#13;
&lt;body class="container"&gt;&#13;
&lt;form method="GET" action="process.php"&gt;&#13;
    &lt;br&gt;&#13;
    &lt;label&gt;&#13;
        &lt;input type="radio" name="county" value="dublin" checked&gt; <span aria-label="annotation1" class="codewide_CodeAnnotation">❶</span>&#13;
        Dublin&#13;
    &lt;/label&gt;&#13;
&#13;
<span aria-label="216" epub:type="pagebreak" id="pg_216" role="doc-pagebreak"/>    &lt;br&gt;&#13;
    &lt;label&gt;&#13;
        &lt;input type="radio" name="county" value="cork"&gt; <span aria-label="annotation2" class="codewide_CodeAnnotation">❷</span>&#13;
        Cork&#13;
    &lt;/label&gt;&#13;
    &lt;br&gt;&#13;
    &lt;input type="submit" class="btn btn-primary"&gt;&#13;
&lt;/form&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-12: An HTML form illustrating radio buttons</span></p>
<p class="TX">We create a form using the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method with an <span class="SANS_TheSansMonoCd_W5Regular_11">action</span> attribute to request the <i>process.php</i> script. Within the form, we declare two radio buttons (<span class="SANS_TheSansMonoCd_W5Regular_11">&lt;input&gt;</span> elements of type <span class="SANS_TheSansMonoCd_W5Regular_11">"radio"</span>), both with <span class="SANS_TheSansMonoCd_W5Regular_11">"county"</span> as a <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute. One has a <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> of <span class="SANS_TheSansMonoCd_W5Regular_11">"dublin"</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span>, and the other a <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> of <span class="SANS_TheSansMonoCd_W5Regular_11">"cork"</span> <span aria-label="annotation2" class="CodeAnnotation">❷</span>. We use the <span class="SANS_TheSansMonoCd_W5Regular_11">checked</span> attribute to set the Dublin option as the default. All the user sees for a radio button is a small circular input, so it’s important to add a text or image prompt immediately next to each radio button, and to use <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;label&gt;</span> elements so that the user can click either the text or the button.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>The labels show each county starting with a capital letter (such as</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Dublin</span><i>), while the corresponding values start with a lowercase letter (</i><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">dublin</span><i>). Personally, I always use lower camel case for the values of radio buttons, checkboxes, and other inputs. Having a consistent naming convention like this makes it easier to write the form-processing logic without having to look back at the form code itself and reduces the number of mistakes you’re likely to make.</i></p>
<p class="TX">Because this form uses the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method, we’ll see either <span class="SANS_TheSansMonoCd_W5Regular_11">?county=dublin</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">?county=cork</span> in the URL when the form is submitted. In other words, the <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute of the radio button group serves as the key for a query-string variable, and the <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attribute of the selected button serves as the variable’s value. We would therefore use <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input(INPUT_GET, 'county')</span> to extract the value submitted by the user through the button group.</p>
</section>
<section aria-labelledby="sec20" epub:type="division">
<h4 class="H2" id="sec20"><span id="toc-link_165"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Checkboxes</span></h4>
<p class="TNI1"><i>Checkboxes</i> offer Boolean (<span class="SANS_TheSansMonoCd_W5Regular_11">true</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">false</span>) choices to the user. They appear in the browser as small squares that can be checked or unchecked. You might use checkboxes in a form, for example, to allow the user to select toppings when ordering a pizza. Unlike radio buttons, checkboxes aren’t mutually exclusive; the user can check as many of the boxes as they want. As with radio buttons, adding text or an image prompt immediately next to each checkbox lets the user know what they’re selecting.</p>
<p class="TX">The checkboxes in a form can be treated individually or processed collectively as an array. We’ll look at both approaches.</p>
<section aria-labelledby="sec21" epub:type="division">
<span aria-label="217" epub:type="pagebreak" id="pg_217" role="doc-pagebreak"/>
<h5 class="H3" id="sec21"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Treated Individually</span></h5>
<p class="TNI1">When checkboxes are treated individually, each one should have a unique <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute. You can define a <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attribute for each checkbox as well, but it isn’t really necessary for processing the form. A checkbox will send its name/value pair with the HTTP request only if it has been selected, so on the receiving end, it’s sufficient to simply test for the box’s name with the <span class="SANS_TheSansMonoCd_W5Regular_11">filter_has_var()</span> function, regardless of the box’s value. If a checkbox is selected and no value was defined, the default value of <span class="SANS_TheSansMonoCd_W5Regular_11">on</span> will be submitted with the form data.</p>
<p class="TX">To see how this works, let’s use checkboxes to create a form for pizza toppings. <a href="#fig11-13">Figure 11-13</a> shows how the form should look.</p>
<figure class="IMG"><a id="fig11-13"/><img alt="" class="img50" height="493" src="../images/figure11-13.jpg" width="778"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-13: A form with checkboxes</span></p></figcaption>
</figure>
<p class="TX">Start a new project with a <i>public/index.php</i> file containing the code in <a href="#lis11-13">Listing 11-13</a> to design the pizza toppings form.</p>
<span id="lis11-13"/>
<pre><code>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt; Checkboxes &lt;/title&gt;&#13;
&lt;link rel="stylesheet"&#13;
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"&#13;
&gt;&#13;
&lt;/head&gt;&#13;
&lt;body class="container"&gt;&#13;
&lt;h1&gt;Extra pizza toppings&lt;/h1&gt;&#13;
&lt;form method="GET" action="process.php"&gt;&#13;
    &lt;p&gt;&lt;label&gt;&lt;input type="checkbox" name="olives"&gt; Olives&lt;/label&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&lt;label&gt;&lt;input type="checkbox" name="pepper"&gt; Pepper&lt;/label&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&lt;label&gt;&lt;input type="checkbox" name="garlic"&gt; Garlic salt&lt;/label&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&lt;input type="submit" class="btn btn-primary"&gt;&lt;/p&gt;&#13;
&lt;/form&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-13: An HTML form with checkboxes</span></p>
<p class="TX"><span aria-label="218" epub:type="pagebreak" id="pg_218" role="doc-pagebreak"/>Inside a form declared with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method, we create checkboxes for the olives, pepper, and garlic salt options, as well as a Submit button. Each checkbox has a unique <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute and is immediately followed by a text label to indicate which option the checkbox represents. Because the checkboxes don’t have explicitly declared <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attributes, when the user submits the form, each checkbox that has been selected will add a variable to the query string in the form <i>&lt;name&gt;=on</i>. For example, if only “Olives” is selected, the form will trigger a <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request with the URL <i>http://localhost:8000/process.php?olives=on</i>.</p>
<p class="TX">Listing 11-14 illustrates the sort of logic we might use in the <i>process.php</i> script to detect one of the checkboxes.</p>
<span id="lis11-14"/>
<pre><code>&lt;?php&#13;
$olivesSelected = filter_has_var(INPUT_GET, 'olives');&#13;
var_dump($olivesSelected);</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-14: Detecting an individual checkbox</span></p>
<p class="TX">We call <span class="SANS_TheSansMonoCd_W5Regular_11">filter_has_var()</span> with <span class="SANS_TheSansMonoCd_W5Regular_11">INPUT_GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">'olives'</span> to detect whether an <span class="SANS_TheSansMonoCd_W5Regular_11">olives</span> variable was sent with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request, indicating this box was checked. We store the resulting <span class="SANS_TheSansMonoCd_W5Regular_11">true/false</span> value in <span class="SANS_TheSansMonoCd_W5Regular_11">$olivesSelected</span>, which for simplicity we pass to <span class="SANS_TheSansMonoCd_W5Regular_11">var_dump()</span>. In a more realistic scenario, we might use the Boolean to set up conditional logic. We could use a similar <span class="SANS_TheSansMonoCd_W5Regular_11">filter_has_var()</span> test for the other checkboxes, as long as each is uniquely named.</p>
</section>
<section aria-labelledby="sec22" epub:type="division">
<h5 class="H3" id="sec22"><span class="SANS_Futura_Std_Bold_Condensed_B_11">Treated as an Array</span></h5>
<p class="TNI1">Sometimes it’s more practical to treat two or more checkboxes as related by giving them all the same <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute ending in square brackets. For example, the checkboxes in the pizza toppings form could all be given a name of <span class="SANS_TheSansMonoCd_W5Regular_11">toppings[]</span>. This way, all the toppings that are selected will be grouped into an array and sent in the HTTP request under the same <span class="SANS_TheSansMonoCd_W5Regular_11">toppings</span> variable name. When taking this approach, it’s vital to ensure that each checkbox has a unique <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attribute so the individual boxes can still be distinguished from one another.</p>
<p class="TX">Listing 11-15 shows how to rewrite the pizza toppings form to send all selected checkboxes as values in a single array.</p>
<span id="lis11-15"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;</span>Checkboxes array<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/title&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;link rel="stylesheet"</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/head&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;body class="container"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;h1&gt;Extra pizza toppings&lt;/h1&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;form method="GET" action="process.php"&gt;</span>&#13;
    &lt;p&gt;&lt;label&gt;&#13;
        &lt;input type="checkbox" name="toppings[]" value="olives"&gt; Olives&#13;
    &lt;/label&gt;&lt;/p&gt;&#13;
<span aria-label="219" epub:type="pagebreak" id="pg_219" role="doc-pagebreak"/>    &lt;p&gt;&lt;label&gt;&#13;
        &lt;input type="checkbox" name="toppings[]" value="pepper"&gt; Pepper&#13;
    &lt;/label&gt;&lt;/p&gt;&#13;
    &lt;p&gt;&lt;label&gt;&#13;
        &lt;input type="checkbox" name="toppings[]" value="garlic"&gt; Garlic salt&#13;
    &lt;/label&gt;&lt;/p&gt;&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;p&gt;&lt;input type="submit" class="btn btn-primary"&gt;&lt;/p&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/form&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/body&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/html&gt;</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-15: Grouping a form’s checkboxes into an array</span></p>
<p class="TX">As before, we declare checkboxes for the three topping options. However, this time we assign <span class="SANS_TheSansMonoCd_W5Regular_11">toppings[]</span> as the name for each checkbox so they will be grouped into a <span class="SANS_TheSansMonoCd_W5Regular_11">toppings</span> array. We also add a <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attribute to each checkbox, indicating the type of topping to be added to the array if selected. <a href="#fig11-14">Figure 11-14</a> shows how multiple values for <span class="SANS_TheSansMonoCd_W5Regular_11">toppings[]</span> appear in the query string when the form is submitted with all three boxes checked.</p>
<figure class="IMG"><a id="fig11-14"/><img alt="" class="img100" height="264" src="../images/figure11-14.jpg" width="1394"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-14: Checkbox values being submitted as values for a single array variable</span></p></figcaption>
</figure>
<p class="TX">To successfully process this form, we’ll have to ensure that the <i>process.php</i> script is set up to expect an array of checkbox values. The array may be empty if no checkboxes were selected, or it could contain one or more values. <a href="#lis11-16">Listing 11-16</a> uses an <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement to handle both cases, so it should work regardless of how many pizza toppings are selected.</p>
<span id="lis11-16"/>
<pre><code>&lt;?php&#13;
<span aria-label="annotation1" class="codeannotated_CodeAnnotation">❶</span> $toppings&#13;
      = filter_input(INPUT_GET, 'toppings', options: FILTER_REQUIRE_ARRAY);&#13;
&#13;
if (empty($toppings)) {&#13;
  <span aria-label="annotation2" class="Code_CodeAnnotation">❷</span> print 'no extra toppings selected';&#13;
} else {&#13;
  <span aria-label="annotation3" class="Code_CodeAnnotation">❸</span> $toppingsString = implode('+', $toppings);&#13;
    print "toppings: $toppingsString";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-16: Processing an array of checkbox values</span></p>
<p class="TX">Now that the values of the checkboxes matter, we need to use <span class="SANS_TheSansMonoCd_W5Regular_11">filter _input()</span> instead of <span class="SANS_TheSansMonoCd_W5Regular_11">filter_has_var()</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span>. As usual, we use the function’s first two arguments to retrieve a <span class="SANS_TheSansMonoCd_W5Regular_11">toppings</span> variable from the query string, but <span aria-label="220" epub:type="pagebreak" id="pg_220" role="doc-pagebreak"/>this time we also use a named argument of <span class="SANS_TheSansMonoCd_W5Regular_11">options: FILTER_REQUIRE_ARRAY</span> to specify that we’re looking for an array of values under the <span class="SANS_TheSansMonoCd_W5Regular_11">toppings</span> variable name. We store the resulting array in the <span class="SANS_TheSansMonoCd_W5Regular_11">$toppings</span> PHP variable.</p>
<p class="TX">We need to use a named argument here because <span class="SANS_TheSansMonoCd_W5Regular_11">$options</span> is the <span class="SANS_TheSansMonoCd_W5Regular_11">filter _input()</span> function’s fourth parameter. We’re skipping over the third parameter, <span class="SANS_TheSansMonoCd_W5Regular_11">$filter</span>, leaving it with its default value of <span class="SANS_TheSansMonoCd_W5Regular_11">FILTER_DEFAULT</span>. See <span class="note_Xref"><a href="chapter5.xhtml">Chapter 5</a></span> for a review of named and optional parameters.</p>
<p class="TX">We next use an <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement to check whether the <span class="SANS_TheSansMonoCd_W5Regular_11">$toppings</span> array is empty. If so, we print a message accordingly <span aria-label="annotation2" class="CodeAnnotation">❷</span>. Otherwise, we use the built-in <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> array function to collapse the array of toppings into a single string, with the topping names separated by plus signs <span aria-label="annotation3" class="CodeAnnotation">❸</span>. Look back at the bottom of <a href="#fig11-14">Figure 11-14</a> to see the resulting string of toppings when all three boxes are checked.</p>
</section>
</section>
<section aria-labelledby="sec23" epub:type="division">
<h4 class="H2" id="sec23"><span id="toc-link_166"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Single-Selection Lists</span></h4>
<p class="TNI1">A <i>single-selection list</i> displays as a drop-down menu enabling the user to choose one option. This list is created with an HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;select&gt;</span> element containing <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;option&gt;</span> elements representing the possible choices. The <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;select&gt;</span> element has a name that will be assigned the value of the chosen <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;option&gt;</span> element when the form is submitted, resulting in a straightforward name/value pair on the receiving end. <a href="#fig11-15">Figure 11-15</a> shows a form offering a simple single-selection list of flowers.</p>
<figure class="IMG"><a id="fig11-15"/><img alt="" class="img60" height="562" src="../images/figure11-15.jpg" width="725"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-15: A single-selection list</span></p></figcaption>
</figure>
<p class="TX">Let’s create this flower form. Start a new project with a <i>public/index.php</i> file and enter the contents of <a href="#lis11-17">Listing 11-17</a>.</p>
<span id="lis11-17"/>
<pre><code><span aria-label="221" epub:type="pagebreak" id="pg_221" role="doc-pagebreak"/>&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Single Selection list&lt;/title&gt;&#13;
&lt;link rel="stylesheet"&#13;
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"&#13;
&gt;&#13;
&lt;/head&gt;&#13;
&lt;body class="container"&gt;&#13;
&lt;h1&gt;Flower selection&lt;/h1&gt;&#13;
&lt;form method="GET" action="process.php"&gt;&#13;
&lt;div class="row"&gt;&#13;
    &lt;div class="col-lg-3 text-end py-2"&gt;&#13;
        &lt;input type="submit" value="Select a flower" class="btn btn-primary"&gt;&#13;
    &lt;/div&gt;&#13;
    &lt;div class="col-lg-3 text-end py-2"&gt;&#13;
        &lt;select name="flower" class="custom-select"&gt; <span aria-label="annotation1" class="codewide_CodeAnnotation">❶</span>&#13;
            &lt;option value="poppy"&gt;Poppy&lt;/option&gt;&#13;
            &lt;option value="daisy"&gt;Daisy&lt;/option&gt;&#13;
            &lt;option value="tulip"&gt;Tulip&lt;/option&gt;&#13;
        &lt;/select&gt;&#13;
    &lt;/div&gt;&#13;
&lt;/div&gt;&#13;
&lt;/form&gt;&#13;
&lt;/body&gt;&#13;
&lt;/html&gt;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-17: An HTML form with a single-selection list</span></p>
<p class="TX">We declare a form with the <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method containing a Submit button alongside a selection list with the name <span class="SANS_TheSansMonoCd_W5Regular_11">flower</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span>. The <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;select&gt;</span> element holds three <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;option&gt;</span> elements with <span class="SANS_TheSansMonoCd_W5Regular_11">value</span> attributes of <span class="SANS_TheSansMonoCd_W5Regular_11">poppy</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">daisy</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">tulip</span>. When the form is submitted, the selected flower will be sent in the HTTP request as a query parameter named <span class="SANS_TheSansMonoCd_W5Regular_11">flower</span>. In <a href="#fig11-15">Figure 11-15</a>, for example, <i>flower=poppy</i> appears in the query string when the poppy is selected.</p>
<p class="TX">We can process the choice submitted through a single-selection list by using <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> and the name of the <span class="SANS_TheSansMonoCd_W5Regular_11">select</span> element. In the case of our flower form, for example, we can use <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input(INPUT_GET, 'flower')</span> to extract the user’s chosen flower.</p>
</section>
<section aria-labelledby="sec24" epub:type="division">
<h4 class="H2" id="sec24"><span id="toc-link_167"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Multiple-Selection Lists</span></h4>
<p class="TNI1">A multiple-selection list allows the user to choose more than one option from a menu. This list is created by adding the <span class="SANS_TheSansMonoCd_W5Regular_11">multiple</span> attribute to the HTML <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;select&gt;</span> element. <a href="#fig11-16">Figure 11-16</a> shows a multiple-selection version of our flower form.</p>
<figure class="IMG"><a id="fig11-16"/><img alt="" class="img50" height="201" src="../images/figure11-16.jpg" width="736"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-16: A multiple-selection list</span></p></figcaption>
</figure>
<p class="TX"><span aria-label="222" epub:type="pagebreak" id="pg_222" role="doc-pagebreak"/>Whereas a single-selection list results in a simple name/value pair, a multiple-selection list should be handled similarly to the array approach we used for checkboxes: the list should have a <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> attribute ending with square brackets, as in <span class="SANS_TheSansMonoCd_W5Regular_11">flowers[]</span>. This way, we’ll get an array containing the zero, one, or more values selected from the list’s options. <a href="#lis11-18">Listing 11-18</a> shows how to modify the <i>index.php</i> file for our flower form to turn it into a multiple-selection list.</p>
<span id="lis11-18"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;</span>Multiple Selection list<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/title&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;link rel="stylesheet"</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;/head&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;body class="container"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;h1&gt;Flower selection&lt;/h1&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;form method="GET" action="process.php"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">&lt;div class="row"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;div class="col-lg-3 text-end py-2"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">        &lt;input type="submit" value="Select some flowers" class="btn btn-primary"&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;/div&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    &lt;div class="col-lg-3 text-end py-2"&gt;</span>&#13;
        &lt;select name="flowers[]" <span aria-label="annotation1" class="codewide_CodeAnnotation">❶</span>&#13;
                class="custom-select"&#13;
                size="3"&#13;
                multiple&gt; <span aria-label="annotation2" class="codewide_CodeAnnotation">❷</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">            &lt;option value="poppy"&gt;Poppy&lt;/option&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">            &lt;option value="daisy"&gt;Daisy&lt;/option&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">            &lt;option value="tulip"&gt;Tulip&lt;/option&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">        &lt;/select&gt;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Italic_11">--snip--</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-18: An HTML form illustrating a multiple-selection list as an array of values</span></p>
<p class="TX">We modify the selection list to have an array name of <span class="SANS_TheSansMonoCd_W5Regular_11">flowers[]</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span> and specify that it should be displayed in a box that fits three rows. We include the <span class="SANS_TheSansMonoCd_W5Regular_11">multiple</span> attribute to indicate that the user may select more than one item from the list (this attribute doesn’t need to be assigned a value) <span aria-label="annotation2" class="CodeAnnotation">❷</span>. When the form is submitted, any selected flowers will be sent in the HTTP request as an array named <span class="SANS_TheSansMonoCd_W5Regular_11">flowers</span>.</p>
<p class="TX">We can process this form by using similar logic to that of our script processing an array of checkboxes from <a href="#lis11-16">Listing 11-16</a>. We use an <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement to check whether the incoming array is empty, as shown in <a href="#lis11-19">Listing 11-19</a>.</p>
<span id="lis11-19"/>
<pre><code>&lt;?php&#13;
$flowers = filter_input(INPUT_GET, 'flowers', options: FILTER_REQUIRE_ARRAY);&#13;
&#13;
if (empty($flowers)) {&#13;
    print 'no flowers selected';&#13;
} else {&#13;
    $toppingsString = implode(' + ', $flowers);&#13;
    print "flowers: $toppingsString";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 11-19: Processing the array of values from a multiple-selection list</span></p>
<p class="TX"><span aria-label="223" epub:type="pagebreak" id="pg_223" role="doc-pagebreak"/>We extract the <span class="SANS_TheSansMonoCd_W5Regular_11">$flowers</span> array from the incoming <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> request, once again using the extra <span class="SANS_TheSansMonoCd_W5Regular_11">options: FILTER_REQUIRE_ARRAY</span> argument to <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> to specify that we’re looking for an array. Then, if the array isn’t empty, we use <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> to merge the received flowers into a string separated by plus signs.</p>
</section>
</section>
<section aria-labelledby="sec25" epub:type="division">
<h3 class="H1" id="sec25"><span id="toc-link_168"/><span class="SANS_Futura_Std_Bold_B_11">Summary</span></h3>
<p class="TNI1">In this chapter, we explored how to create web forms that submit data to server scripts, and we discussed the difference between submitting those forms with the HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> methods. We also covered how to write server-side scripts to identify and extract the submitted form data. We focused on how to use PHP’s <span class="SANS_TheSansMonoCd_W5Regular_11">filter_input()</span> function to extract the values of variables from an incoming HTTP request, as well as how to use <span class="SANS_TheSansMonoCd_W5Regular_11">filter _has_var()</span> when all we need to know is whether a variable exists at all. We applied this approach to a variety of form input types, including text inputs, radio buttons, checkboxes, and selection lists.</p>
</section>
<section aria-labelledby="sec26" epub:type="division">
<h3 class="H1" id="sec26"><span id="toc-link_169"/><span class="SANS_Futura_Std_Bold_B_11">Exercises</span></h3>
<p class="ListNumber">1.   Create a form for a costume-rental company that enables the user to submit the name of the superhero costume they want. Make the form submit data via the HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">GET</span> method to a PHP script called <i>costumeSearch.php</i>, and use <span class="SANS_TheSansMonoCd_W7Bold_11">hero</span> for the name of the text value entered by the user. Visit the form through your web server and submit the value <span class="SANS_TheSansMonoCd_W7Bold_11">superman</span>. You should see <i>costumeSearch.php?hero=superman</i> in the resulting URL.</p>
<p class="ListNumber">2.   Create a basic login form using the HTTP <span class="SANS_TheSansMonoCd_W5Regular_11">POST</span> method, with <span class="SANS_TheSansMonoCd_W5Regular_11">&lt;input&gt;</span> elements for a username (using the default <span class="SANS_TheSansMonoCd_W5Regular_11">text</span> type) and a password (use the <span class="SANS_TheSansMonoCd_W5Regular_11">password</span> type). Use your browser’s developer tools to inspect the form data when it’s submitted.</p>
<p class="ListNumber">3.   Create a form to input the user’s age and a script to process the received age. The processing script should return an HTML page containing a message stating how old the user will be on their next birthday.</p>
<p class="ListNumber">4.   Create a form with radio buttons asking the user whether they would be willing to pay more for an environmentally friendly car. If they say yes, return an HTML page containing a message recommending they buy an electric car. If they say no, recommend a gas car.</p>
<p class="ListNumber">5.   Create a form offering the user several options for a new car, each represented with a uniquely named checkbox. For example, offer options such as metallic paint, fog lights, and a reversing camera. Write a script that processes the form data and returns an HTML page containing a message confirming each selected option.</p>
<p class="ListNumber">6.   Duplicate your answer for Exercise 5 about car options, but change the checkboxes to send the data as part of an array variable named <span class="SANS_TheSansMonoCd_W5Regular_11">extras[]</span>. Update your form-processing code to handle the array. Think about whether you find the array approach easier or harder than processing the checkboxes individually.</p>
</section>
</section>
</div></body></html>