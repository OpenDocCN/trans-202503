<html><head></head><body>
<div id="sbo-rt-content" class="calibre1"><section aria-labelledby="ch9" epub:type="chapter" role="doc-chapter">
<hgroup>
<h2 class="title" id="ch9">
<span class="cn"><span aria-label=" Page 93. " epub:type="pagebreak" id="pg_93" role="doc-pagebreak" class="calibre2"/><span class="sans_dogma_ot_bold_b_">9</span></span>
<span class="ct1"><span class="sans_dogma_ot_bold_b_">LABELS AND NONSEQUENTIAL EXECUTION</span></span>
</h2>
</hgroup>
<figure class="opener"><img alt="" class="opener1" height="407" src="../images/chapter.jpg" width="408"/>
</figure>
<p class="chapterintro">In politics, labels have gotten a bad reputation, but at the most basic level, a <i class="calibre13">label</i> is an identifier that concisely defines a product or an object in as few words as possible. Commerce would grind to a halt if we didn’t have labels; grocery stores would contain shelves and shelves of mysterious canned products. What’s for dinner? It might be beans or pumpkin pie mix; we won’t know until we open it.</p>
<p class="tx">Without labels Batch wouldn’t be thrown into quite this level of disarray, but an important tool for creating more complex bat files would be missing from your coder’s toolbox. Up until now every bat file, snippet, and listing in this book has executed sequentially. The interpreter interprets each line, one by one, executing the first command first, followed by the second. This continues until one of two things happens: either the final command of the bat file is interpreted, or a syntax error crashes the bat file. Labels allow you to execute Batch commands in a nonsequential manner. In this chapter, I’ll introduce the concept of branching forward and <span aria-label=" Page 94. " epub:type="pagebreak" id="pg_94" role="doc-pagebreak"/>backward in the code, repeating some section of code based on a data condition and even creating a couple commands not intrinsic to Batch.</p>
<p class="tx">Labels will also afford me a great opportunity to discuss a topic that’s exceedingly important: coding conventions, in particular, indentation.</p>
<section aria-labelledby="sec1" epub:type="division">
<h3 class="h" id="sec1"><span id="h1-64"/><span class="sans_futura_std_bold_b_">Labels</span></h3>
<p class="tni">A <i class="calibre6">label</i> in Batch is what you might expect it to be, a tag defining a block of code. More specifically, a certain spot or location in the bat file is <i class="calibre6">labeled</i>. A label isn’t a command, and although it’s never executed, you’ll soon see that it’s critical to the execution flow.</p>
<p class="tx">Labels can contain letters, numbers, and some special characters, and, most important, they must start with a colon. Oddly, the name of the label can contain additional colons, but never in the second position. For example, here’s some code being defined or labeled for exactly what it does, checking the state of a specific variable:</p>
<pre class="pre"><code class="calibre11">:CheckStatus
 if /i "%status%" equ "fail"  &gt; con echo Failure
 if /i "%status%" equ "good"  &gt; con echo Success
</code></pre>
<p class="tx">Similarly, this bit of code handles a very rudimentary abort process and is labeled as such:</p>
<pre class="pre"><code class="calibre11">:Abort
 echo The Process is aborting
 exit /B 1
</code></pre>
<p class="tni">I’ll discuss the <span class="sans_thesansmonocd_w5regular_">exit</span> command in <span class="xref"><a href="chapter10.xhtml" class="calibre3">Chapter 10</a></span>. For now, it’s simply being used to get out of the bat file.</p>
<p class="tx">Defining a label is straightforward, but before getting into the impactfulness of labels and how to use them, allow me a digression, maybe even a rant, on coding conventions.</p>
</section>
<section aria-labelledby="sec2" epub:type="division">
<h3 class="h" id="sec2"><span id="h1-65"/><span class="sans_futura_std_bold_b_">Indentation</span></h3>
<p class="tni">Many Batch coders refuse to indent their code. I’m not sure why, as every other language I'm familiar with has some sort of a convention, if not a hard requirement, on indentation. My best guess is that at its core is a fundamental disrespect of the language, considering Batch a utilitarian nuisance that must be dispatched with as quickly as possible with no regard for readability, much less aesthetics. For your Batch code to garner the respect it merits, I recommend starting all commands with an indentation of two spaces. Indent all logic inside the code blocks of <span class="sans_thesansmonocd_w5regular_">if</span> commands (and similar structures yet to be discussed) another three spaces, with nested structures indented even more.</p>
<p class="tx">This topic might seem like a non sequitur in a chapter about labels, but in reality, it’s the ideal location. Labels should stand out a bit, or even more <span aria-label=" Page 95. " epub:type="pagebreak" id="pg_95" role="doc-pagebreak"/>than a bit. A well-formatted document of any kind has parts, chapters, sections, and/or subsections, where each often has some sort of a header or cue—or dare I say <i class="calibre6">label</i>—that visually stands out from the rest of the text with a different font, font size, emboldening, underlining, colorization, or a combination of some or all of the above. These options are unavailable when writing a bat file. Our arsenal for the task has been reduced to one significant item, indentation, with a nod to capitalization and whitespace.</p>
<p class="tx">Since the first character of a label is always a colon, I always place that colon in the second byte of the line, reducing my typical indentation to one character. Therefore, when anyone, including myself, views a bat file that I’ve written, all the labels stand out. I reserve the first character of a line for the start of a <span class="sans_thesansmonocd_w5regular_">rem</span> command. For instance, here’s a rudimentary remark, label, and two simple commands:</p>
<pre class="pre"><code class="calibre11">rem - This code does something.
 :DoSomething
  set do=something
  set doMore=somethingElse
</code></pre>
<p class="tni">The uppercase character after the colon in the label also adds to its prominence.</p>
<p class="tx">I hope I’m not coming across as the Stalin of Batch coding conventions. This is just one coder’s opinion, and other well-thought-out conventions exist that are different from mine. What’s important is that the code should be easy to read. There are many ways to accomplish this, but a complete lack of indenting most certainly fails the test, even if this topic brings out my autocratic side.</p>
</section>
<section aria-labelledby="sec3" epub:type="division">
<h3 class="h" id="sec3"><span id="h1-66"/><span class="sans_futura_std_bold_b_">The goto Command</span></h3>
<p class="tni">Now that we have a label defining a snippet of code, what good is it? Some coders actually use labels as makeshift remarks (which is fine, I guess), but the true function of a label is to direct the process flow to the code under the label. This is where the <span class="sans_thesansmonocd_w5regular_">goto</span> command comes into play, and it does what it sounds like it would do. It instructs the interpreter to skip to (or go to) a location in the code defined by a label. Consider these two commands:</p>
<pre class="pre"><code class="calibre11">goto :Abort
goto :DoSomething
</code></pre>
<p class="tni">The <span class="sans_thesansmonocd_w5regular_">goto</span> commands are sending control to the <span class="sans_thesansmonocd_w5regular_">:Abort</span> and <span class="sans_thesansmonocd_w5regular_">:DoSomething</span> labels defined previously in this chapter.</p>
<p class="tx">Well, that’s not entirely true; the first command sends the execution to the abort routine, and the second <span class="sans_thesansmonocd_w5regular_">goto</span> command never executes. In a bat file, a label itself can come before or after the <span class="sans_thesansmonocd_w5regular_">goto</span> command that branches to it, but what’s important to understand is that the execution never returns to the command immediately after the <span class="sans_thesansmonocd_w5regular_">goto</span> command. Once the <span class="sans_thesansmonocd_w5regular_">goto</span> is executed, we are totally at the mercy of the code under the label.</p>
<p class="tx"><span aria-label=" Page 96. " epub:type="pagebreak" id="pg_96" role="doc-pagebreak"/>To go to a label defined as <span class="sans_thesansmonocd_w5regular_">:Abort</span>, you can also do so with this command:</p>
<pre class="pre"><code class="calibre11">goto ABORT</code></pre>
<p class="tni">Two things are going on here. First, the colon has been dropped from the label name in the <span class="sans_thesansmonocd_w5regular_">goto</span> command. I suspect that this is an early bug that Microsoft won’t fix to maintain backward compatibility. Second, the actual label has only the <span class="sans_thesansmonocd_w5regular_">A</span> capitalized, but the <span class="sans_thesansmonocd_w5regular_">goto</span> command shows the entire label name capitalized.</p>
<p class="tx">This example demonstrates that the label name is case-insensitive, as Batch is in general, and that the colon is optional in the <span class="sans_thesansmonocd_w5regular_">goto</span> command. While the interpreter makes this permissible, I see no reason for the two label names to differ in any way as it can only breed confusion. Consistency is key.</p>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">call</span> command introduced in <span class="xref"><a href="chapter8.xhtml" class="calibre3">Chapter 8</a></span> is also used in conjunction with labels, but its behavior is quite distinct from the <span class="sans_thesansmonocd_w5regular_">goto</span> command. I’ll come back to the <span class="sans_thesansmonocd_w5regular_">call</span> command and those differences in <span class="xref"><a href="chapter10.xhtml" class="calibre3">Chapter 10</a></span>.</p>
<section aria-labelledby="sec4" epub:type="division">
<h4 class="h1" id="sec4"><span id="h2-27"/><span class="sans_futura_std_heavy_oblique_bi_">Branching Forward</span></h4>
<p class="tni">The <span class="sans_thesansmonocd_w5regular_">goto</span> command sends control or the process flow in one of two directions; one is to branch forward over code. Three <span class="sans_thesansmonocd_w5regular_">echo</span> commands write text to the console in this example, but only the first and third are executed:</p>
<pre class="pre"><code class="calibre11"> &gt; con echo Before GOTO
 goto :MyLabel
 &gt; con echo After GOTO
:MyLabel
 &gt; con echo After LABEL
</code></pre>
<p class="tx">It’s not hard to imagine more complex code using this technique. A <span class="sans_thesansmonocd_w5regular_">goto</span> command might be done conditionally based on the results of an <span class="sans_thesansmonocd_w5regular_">if</span> command, and instead of branching over a single <span class="sans_thesansmonocd_w5regular_">echo</span> command, it might be skipping a far larger section of code. For instance, you can skip the execution of one or more programs if a certain file is present or not present, or if a failure is detected, you can jump to the code that will abort the bat file’s execution, skipping everything else.</p>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">goto</span> can also be a tool to break out of a loop. Unfortunately, I haven’t discussed loops yet; in <a href="part2.xhtml" class="calibre3">Part II</a>, I’ll discuss the <span class="sans_thesansmonocd_w5regular_">for</span> command and loops extensively. But for now, to understand this logic you need to know only that this loop will execute once for each name listed in the <span class="sans_thesansmonocd_w5regular_">listOfNames</span> variable, regardless of how many names it contains:</p>
<pre class="pre"><code class="calibre11"> for %%n in (%listOfNames%) do (
    if /i "%%n" equ "Waldo"  goto :FoundName
 )
 &gt; con echo ** Name Not Found **
:FoundName
</code></pre>
<p class="tni"><span aria-label=" Page 97. " epub:type="pagebreak" id="pg_97" role="doc-pagebreak"/>The <span class="sans_thesansmonocd_w5regular_">if</span> command is searching for a particular name. If and when it’s found, the <span class="sans_thesansmonocd_w5regular_">goto</span> command breaks out of the loop, jumping down to the label on the last line.</p>
<p class="tx">This is important for two reasons. One, it’s efficient—if the name is found near the beginning of the list, CPU cycles aren’t wasted pointlessly searching the rest of the list. More important, the <span class="sans_thesansmonocd_w5regular_">echo</span> command is never executed if the name is found. Notice that the logic not only breaks out of the loop prematurely but also branches over the writing of the message that indicates that the name wasn’t found.</p>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h4 class="h1" id="sec5"><span id="h2-28"/><span class="sans_futura_std_heavy_oblique_bi_">Branching Backward</span></h4>
<p class="tni">The examples in the previous section use a <span class="sans_thesansmonocd_w5regular_">goto</span> command to skip forward in the code. Next, I’ll look at examples of a <span class="sans_thesansmonocd_w5regular_">goto</span> command going in the reverse direction. But first, I’ve already discussed how we can build certain components of more modern languages that aren’t explicitly part of Batch (think booleans and floats), but many others are yet to come. Batch doesn’t have a <span class="sans_thesansmonocd_w5regular_">while</span> command, nor does it support a <span class="sans_thesansmonocd_w5regular_">do...while</span> command. In other languages, a <span class="sans_thesansmonocd_w5regular_">while</span> command executes a block of code zero to multiple times until a condition is met. A <span class="sans_thesansmonocd_w5regular_">do...while</span> command is very similar; the only difference is that the code block will execute once before the condition is evaluated. Let’s create both of these in Batch.</p>
<section aria-labelledby="sec6" epub:type="division">
<h5 class="h2" id="sec6"><span class="sans_futura_std_bold_b_">The while “Command”</span></h5>
<p class="tni">To demonstrate the usefulness of a Batch <span class="sans_thesansmonocd_w5regular_">while</span> command, we’ll write some code that’ll strip all leading zeros off a value, a necessity for any coder not wanting to perform octal arithmetic accidentally (long story on that in <span class="xref"><a href="chapter6.xhtml" class="calibre3">Chapter 6</a></span> if you missed it). The <span class="sans_thesansmonocd_w5regular_">while</span> command might execute a bit of code as long as—or <i class="calibre6">while</i>—the first byte is <span class="sans_thesansmonocd_w5regular_">0</span>, and that code will do nothing more than strip off one leading byte.</p>
<p class="tx">The following code performs the task perfectly:</p>
<pre class="pre"><code class="calibre11">:StripLead0s
 if "%nbr:~0,1%" equ "0" (
    if "%nbr:~1,2%" neq "" (
       set nbr=%nbr:~1%
       goto :StripLead0s
 )  )
</code></pre>
<p class="tni">The interpreter essentially ignores the label when it’s first encountered and interrogates the first character of <span class="sans_thesansmonocd_w5regular_">nbr</span>. If it’s zero, the code next verifies that there’s a second byte—that is, that the <span class="sans_thesansmonocd_w5regular_">0</span> is in fact leading something. If both are true, the code block is entered, where it strips off the leading <span class="sans_thesansmonocd_w5regular_">0</span> before the <span class="sans_thesansmonocd_w5regular_">goto</span> command sends control back to the label just prior to the <span class="sans_thesansmonocd_w5regular_">if</span> command.</p>
<p class="tx">Let’s step through the code with three different numbers to really get a feel for the logic. If the variable has no leading <span class="sans_thesansmonocd_w5regular_">0</span>, the code block is never executed. If it has one leading <span class="sans_thesansmonocd_w5regular_">0</span>, the code block is executed once. Then the <span aria-label=" Page 98. " epub:type="pagebreak" id="pg_98" role="doc-pagebreak"/>leading byte is checked again, and since it’s no longer <span class="sans_thesansmonocd_w5regular_">0</span>, the execution flow proceeds to whatever comes next. If <span class="sans_thesansmonocd_w5regular_">nbr</span> has 17 leading <span class="sans_thesansmonocd_w5regular_">0</span>s, the code block removing a <span class="sans_thesansmonocd_w5regular_">0</span> executes 17 times, and after the leading byte is checked an 18th time, the execution moves on.</p>
<p class="tx">The word <i class="calibre6">while</i> doesn’t appear in that listing, but it does everything a proper <span class="sans_thesansmonocd_w5regular_">while</span> command would. As far as I’m concerned, it’s a Batch <span class="sans_thesansmonocd_w5regular_">while</span> command.</p>
<blockquote class="calibre8">
<p class="warning"><span class="sans_dogma_ot_bold_b_1">NOTE</span></p>
</blockquote>
<p class="warning-txt"><i class="calibre6">The previous snippet is the first example I’ve shown of one if command nested inside another, but you’ll see many more nested commands in the chapters ahead. As another note on coding conventions, I’ve stacked the two trailing close parentheses on a single line in that listing. This makes the code more compact, especially when nesting multiple levels deep, and it keeps the focus on the interesting logic, but I concede that I’m in the minority. Most Batch coders line up each close parenthesis with its respective if command. This requires more lines of code, but the following is functionally equivalent to my previous code:</i></p>
<pre class="pre1"><code class="calibre11"><span class="sans_thesansmonocd_w5regular_">:StripLead0s</span>
<span class="sans_thesansmonocd_w5regular_"> if "%nbr:~0,1%" equ "0" (</span>
<span class="sans_thesansmonocd_w5regular_">    if "%nbr:~1,2%" neq "" (</span>
<span class="sans_thesansmonocd_w5regular_">       set nbr=%nbr:~1%</span>
<span class="sans_thesansmonocd_w5regular_">       goto :StripLead0s</span>
<span class="sans_thesansmonocd_w5regular_">    )</span>
<span class="sans_thesansmonocd_w5regular_"> )</span>
</code></pre>
<blockquote class="calibre8">
<p class="notecontinued"><i class="calibre6">Do what feels right to you and do it consistently. Also, notice that the label name contains a numeric value. As mentioned previously, we aren’t restricted to letters of the alphabet. And by the way, doesn’t that indentation look nice?</i></p>
</blockquote>
</section>
<section aria-labelledby="sec7" epub:type="division">
<h5 class="h2" id="sec7"><span class="sans_futura_std_bold_b_">The do...while “Command”</span></h5>
<p class="tni">A Batch <span class="sans_thesansmonocd_w5regular_">do...while</span> command looks quite similar; the only difference is that the main logic must be executed at least once. In languages with a built-in <span class="sans_thesansmonocd_w5regular_">do...while</span> command, the conditional clause usually comes at the tail end of the structure (understandably after the main logic is executed once), and Batch is no different. Compared to the <span class="sans_thesansmonocd_w5regular_">while</span> command, the main logic is moved from inside the <span class="sans_thesansmonocd_w5regular_">if</span> command code block to just after the label and prior to the <span class="sans_thesansmonocd_w5regular_">if</span> command.</p>
<p class="tx">To demonstrate, let’s take an example where the <span class="sans_thesansmonocd_w5regular_">textStr</span> variable is to be right-padded with at least one space to build it out to a minimum of 25 bytes in length. If the original string is less than 25 bytes long, the result will be 25 bytes; if it’s originally at least 25 bytes long, a single space will be appended to the result. (The string might be part of some concatenated text to be displayed on the console, where the space-padding will line up the columns. But of course, we’ll want a space between it and whatever comes next, even if it requires an extra byte.)</p>
<p class="tx">The fact that the right padding must be done at least once lends itself to the <span class="sans_thesansmonocd_w5regular_">do...while</span> command:</p>
<pre class="pre"><code class="calibre11"><span aria-label=" Page 99. " epub:type="pagebreak" id="pg_99" role="doc-pagebreak"/>:PadRight
 set textStr=%textStr% &amp;
 if "%textStr:~24,1%" equ ""  goto :PadRight
</code></pre>
<p class="tx">As with the <span class="sans_thesansmonocd_w5regular_">while</span> command, the label precedes the bulk of the code, but the core logic immediately follows it, which in this case is a single <span class="sans_thesansmonocd_w5regular_">set</span> command padding the string with one space. Then the 25th byte is examined. (Remember, it’s zero-offset.) If it doesn’t exist, the <span class="sans_thesansmonocd_w5regular_">goto</span> command sends the execution back to the label so that another space can be appended to the string. This repeats until that 25th byte is populated, ensuring that the string is at least 25 bytes long and also that at least one space has been added regardless of the length.</p>
<p class="tx">In <span class="xref"><a href="chapter26.xhtml" class="calibre3">Chapter 26</a></span>, I’ll detail how to perform automatic restarts of a failed process that might work if tried again with little more than a label and a <span class="sans_thesansmonocd_w5regular_">goto</span> command—also known as the <span class="sans_thesansmonocd_w5regular_">do...while</span> command.</p>
</section>
</section>
</section>
<section aria-labelledby="sec8" epub:type="division">
<h3 class="h" id="sec8"><span id="h1-67"/><span class="sans_futura_std_bold_b_">The :eof Label</span></h3>
<p class="tni">One special label not created by the coder but intrinsic to all bat files is <span class="sans_thesansmonocd_w5regular_">:eof</span>, which stands for <i class="calibre6">end of file</i>. When the following <span class="sans_thesansmonocd_w5regular_">goto :eof</span> command executes in the main logic of a called bat file, control is returned to the calling bat file:</p>
<pre class="pre"><code class="calibre11">&gt; con echo We are about to exit the bat file.
goto :eof
&gt; con echo This command will never be executed.
</code></pre>
<p class="tni">Executing the same command in the high-level bat file will cease the process entirely even though no label defined as <span class="sans_thesansmonocd_w5regular_">:eof</span> exists in the bat file.</p>
<p class="tx">If you’re of the contrarian nature and decide to define your own <span class="sans_thesansmonocd_w5regular_">:eof</span> label, the interpreter will simply ignore it as if it were a nonsensical remark. In <span class="xref"><a href="chapter10.xhtml" class="calibre3">Chapter 10</a></span>, I’ll explore this unique label further, in particular, how the interpreter handles the <span class="sans_thesansmonocd_w5regular_">goto :eof</span> command when inside a callable routine.</p>
</section>
<section aria-labelledby="sec9" epub:type="division">
<h3 class="h" id="sec9"><span id="h1-68"/><span class="sans_futura_std_bold_b_">Variable Labels</span></h3>
<p class="tni">Working in a language that doesn’t have a compiler has some definite downsides, but I’ve already shown you some silver linings (delayed expansion, for example). One more is the ability to define the label name in a <span class="sans_thesansmonocd_w5regular_">goto</span> command at the time of execution, although the label itself must be hardcoded. To set that up, envision a different label for each month of the year. The first three are shown here without their respective month-centric code beneath them:</p>
<pre class="pre"><code class="calibre11">:MonthJanuary
:MonthFebruary
:MonthMarch
</code></pre>
<p class="tx"><span aria-label=" Page 100. " epub:type="pagebreak" id="pg_100" role="doc-pagebreak"/>Obviously, the following command will send the execution to one particular label in the previous snippet:</p>
<pre class="pre"><code class="calibre11">goto :MonthFebruary</code></pre>
<p class="tx">But that’s old news by now. More interesting, if the variable <span class="sans_thesansmonocd_w5regular_">month</span> is set to the value <span class="sans_thesansmonocd_w5regular_">February</span>, the following command will call the same label:</p>
<pre class="pre"><code class="calibre11">goto :Month%month%</code></pre>
<p class="tx">The argument to this <span class="sans_thesansmonocd_w5regular_">goto</span> command is the concatenation of the hardcoded <span class="sans_thesansmonocd_w5regular_">:Month</span> and the value of the <span class="sans_thesansmonocd_w5regular_">month</span> variable. After the variable is resolved, the command directs the execution to the label <span class="sans_thesansmonocd_w5regular_">:MonthFebruary</span>. The same goes for the other valid months, meaning that the same line of code also goes to <span class="sans_thesansmonocd_w5regular_">:MonthMarch</span> if <span class="sans_thesansmonocd_w5regular_">month</span> is set to the value of <span class="sans_thesansmonocd_w5regular_">March</span>.</p>
<p class="tx">But that does raise the question of what happens when the resulting label name doesn’t exist in the bat file, for instance, if <span class="sans_thesansmonocd_w5regular_">month</span> is set to <span class="sans_thesansmonocd_w5regular_">Erele</span> (February in the Yoruba language). The interpreter writes the following message to the console:</p>
<pre class="pre"><code class="calibre11">The system cannot find the batch label specified - MonthErele</code></pre>
<p class="tni">Unfortunately, you’ll never see this message because the process will immediately crash.</p>
<p class="tx">In <span class="xref"><a href="chapter10.xhtml" class="calibre3">Chapter 10</a></span>, you’ll see that Batch handles a bad label name better when used with a <span class="sans_thesansmonocd_w5regular_">call</span> command, but if you use this technique with a <span class="sans_thesansmonocd_w5regular_">goto</span> command, ensure that the argument resolves to a valid label.</p>
<aside aria-label="box-2" class="box">
<p class="boxtitle" id="box-2"><span class="sans_futura_std_bold_b_">A BRIEF HISTORY OF THE GOTO COMMAND</span></p>
<p class="boxbodyfirst"><span class="sans_futura_std_book_">I fear that I must address the elephant, maybe even the herd of pachyderms, in the room. For my first job as a coder, I was in a COBOL bootcamp for nine weeks. Bob Cook, our masterful instructor, demonstrated the COBOL</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">command, explaining that we might run across it in some archaic code written while I was still in diapers. We needed to understand what the code was doing, but he immediately followed this up with something along the lines of “Never, under any circumstance, code a</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">command. Never. Period. Did I mention not to do this ... ever?”</span></p>
<p class="boxbody"><span class="sans_futura_std_book_">Ill-advised use of</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">commands can produce</span> <span class="futura_std_book_oblique_i_">spaghetti code</span><span class="sans_futura_std_book_">, where control jumps from place to place making it nearly impossible to follow. Not long after the bootcamp, I had to make a small change to what should’ve been a simple program. It was so riddled with</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">commands that my simple change resulted in a cascade of unintended consequences. After wasting three days attempting to understand the program enough to make the minor tweak, I finally gave up and took another three days to rewrite it from scratch. Far more</span> <span aria-label=" Page 101. " epub:type="pagebreak" id="pg_101" role="doc-pagebreak"/><span class="sans_futura_std_book_">recently, I was giving some Batch pointers to a co-worker who was aghast that I used a</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">command, and I certainly understood their dismay. The DNA of all coders is rapidly and indelibly being hardwired with an aversion to the</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">in all instances.</span></p>
<p class="boxbodylast"><span class="sans_futura_std_book_">Without a doubt, the</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">has a bad reputation, and I agree completely with the ostracization of the command to the scrap heap of coding history—in compiled code. But in Batch, when done correctly, the command is quite useful, even necessary. It’s the best way to code around the lack of a true</span> <span class="sans_thesansmonocd_w5regular_">while</span> <span class="sans_futura_std_book_">command and the lack of a</span> <span class="sans_thesansmonocd_w5regular_">break</span> <span class="sans_futura_std_book_">command to break out of a loop. (In actuality, Batch does have a</span> <span class="sans_thesansmonocd_w5regular_">break</span> <span class="sans_futura_std_book_">command, but it doesn’t break out of anything or behave like synonymous commands in other languages. It’s a</span> <span class="futura_std_book_oblique_i_">no operation</span> <span class="sans_futura_std_book_">or</span> <span class="futura_std_book_oblique_i_">no-op</span> <span class="sans_futura_std_book_">command. Don’t ask.) The</span> <span class="sans_thesansmonocd_w5regular_">goto</span> <span class="sans_futura_std_book_">command provides a very nice means to these ends, and I’ll demonstrate even more uses in the next chapter. Don’t be afraid of the</span> <span class="sans_thesansmonocd_w5regular_">goto</span><span class="sans_futura_std_book_">, but use it cautiously and wisely.</span></p>
</aside>
</section>
<section aria-labelledby="sec10" epub:type="division">
<h3 class="h" id="sec10"><span id="h1-69"/><span class="sans_futura_std_bold_b_">Summary</span></h3>
<p class="tni">In this chapter, I introduced the concept of labels and how to navigate to them via the <span class="sans_thesansmonocd_w5regular_">goto</span> command. You learned how to create labels, explored tips on their use, and saw how instrumental they are in the building of the <span class="sans_thesansmonocd_w5regular_">while</span> and <span class="sans_thesansmonocd_w5regular_">do...while</span> commands. I also introduced the indispensable <span class="sans_thesansmonocd_w5regular_">:eof</span> label.</p>
<p class="tx">But you can navigate to labels in two distinct ways. Much of the next chapter will also focus on labels and how you can use them to create callable routines inside a bat file. I’ll also detail how to call one bat file from another, a crucial topic as you begin creating projects too complex for a single bat file.</p>
</section>
</section>
</div></body></html>