<html><head></head><body><section class="appendix" title="Appendix&#xA0;C.&#xA0;Perl1Line.Txt" epub:type="appendix" id="perl1line_txt"><div class="titlepage"><div><div><h2 class="title">Appendix C. Perl1Line.Txt</h2></div></div></div><p>As I was writing this book, I compiled all the one-liners in a file called <span class="emphasis"><em>perl1line.txt</em></span>. This appendix is that file. It comes in very handy when you need to quickly look up a one-liner. You can just open <span class="emphasis"><em>perl1line.txt</em></span> in a text editor and search for the action you want to perform. The latest version of this file can always be found at <span class="emphasis"><em><a class="ulink" href="http://www.catonmat.net/download/perl1line.txt" target="_top">http://www.catonmat.net/download/perl1line.txt</a></em></span>.</p><div class="sect1" title="C.1 Spacing"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_1_spacing">C.1 Spacing</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id340987"/></div></div></div><div class="sect3" title="Double-space a file"><div class="titlepage"><div><div><h4 class="title" id="double-space_a_file">Double-space a file</h4></div></div></div><a id="I_programlisting_id318684"/><pre class="programlisting">perl -pe '$\ = "\n"'
perl -pe 'BEGIN { $\ = "\n" }'
perl -pe '$_ .= "\n"'
perl -pe 's/$/\n/'
perl -nE 'say'</pre></div><div class="sect3" title="Double-space a file, excluding the blank lines"><div class="titlepage"><div><div><h4 class="title" id="double-space_a_file_excluding_the_blank">Double-space a file, excluding the blank lines</h4></div></div></div><a id="I_programlisting_id318698"/><pre class="programlisting">perl -pe '$_ .= "\n" unless /^$/'
perl -pe '$_ .= "\n" if /\S/'</pre></div><div class="sect3" title="Triple-space a file"><div class="titlepage"><div><div><h4 class="title" id="triple-space_a_file">Triple-space a file</h4></div></div></div><a id="I_programlisting_id318711"/><pre class="programlisting">perl -pe '$\ = "\n\n"'
perl -pe '$_ .= "\n\n"'
perl -pe 's/$/\n\n/'</pre></div><div class="sect3" title="N-space a file"><div class="titlepage"><div><div><h4 class="title" id="n-space_a_file">N-space a file</h4></div></div></div><a id="I_programlisting_id318725"/><pre class="programlisting">perl -pe '$_ .= "\n"x7'</pre></div><div class="sect3" title="Add a blank line before every line"><div class="titlepage"><div><div><h4 class="title" id="add_a_blank_line_before_every_line">Add a blank line before every line</h4></div></div></div><a id="I_programlisting_id318738"/><pre class="programlisting">perl -pe 's/^/\n/'</pre></div><div class="sect3" title="Remove all blank lines"><div class="titlepage"><div><div><h4 class="title" id="remove_all_blank_lines">Remove all blank lines</h4></div></div></div><a id="I_programlisting_id318752"/><pre class="programlisting">perl -ne 'print unless /^$/'
perl -lne 'print if length'
perl -ne 'print if /\S/'</pre></div><div class="sect3" title="Remove all consecutive blank lines, leaving only one"><div class="titlepage"><div><div><h4 class="title" id="remove_all_consecutive_blank_lines_leavi">Remove all consecutive blank lines, leaving only one</h4></div></div></div><a id="I_programlisting_id318766"/><pre class="programlisting">perl -00 -pe ''
perl -00pe0</pre></div><div class="sect3" title="Compress/expand all blank lines into N consecutive lines"><div class="titlepage"><div><div><h4 class="title" id="compress_expand_all_blank_lines_into_n_c">Compress/expand all blank lines into N consecutive lines</h4></div></div></div><a id="I_programlisting_id318780"/><pre class="programlisting">perl -00 -pe '$_ .= "\n"x2'</pre></div><div class="sect3" title="Double-space between all words"><div class="titlepage"><div><div><h4 class="title" id="double-space_between_all_words">Double-space between all words</h4></div></div></div><a id="I_programlisting_id318795"/><pre class="programlisting">perl -pe 's/ /  /g'</pre></div><div class="sect3" title="Remove all spacing between words"><div class="titlepage"><div><div><h4 class="title" id="remove_all_spacing_between_words">Remove all spacing between words</h4></div></div></div><a id="I_programlisting_id318809"/><pre class="programlisting">perl -pe 's/ +//g'
perl -pe 's/\s+//g'</pre></div><div class="sect3" title="Change all spacing between words to one space"><div class="titlepage"><div><div><h4 class="title" id="change_all_spacing_between_words_to_one">Change all spacing between words to one space</h4></div></div></div><a id="I_programlisting_id318823"/><pre class="programlisting">perl -pe 's/ +/ /g'</pre></div><div class="sect3" title="Insert a space between all characters"><div class="titlepage"><div><div><h4 class="title" id="insert_a_space_between_all_characters">Insert a space between all characters</h4></div></div></div><a id="I_programlisting_id318836"/><pre class="programlisting">perl -lpe 's// /g'</pre></div></div></div><div class="sect1" title="C.2 Numbering"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_2_numbering">C.2 Numbering</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id355038"/></div></div></div><div class="sect3" title="Number all lines in a file"><div class="titlepage"><div><div><h4 class="title" id="number_all_lines_in_a_file">Number all lines in a file</h4></div></div></div><a id="I_programlisting_id318864"/><pre class="programlisting">perl -pe '$_ = "$. $_"'
perl -ne 'print "$. $_"'</pre></div><div class="sect3" title="Number only non-empty lines in a file"><div class="titlepage"><div><div><h4 class="title" id="number_only_non-empty_lines_in_a_file">Number only non-empty lines in a file</h4></div></div></div><a id="I_programlisting_id318878"/><pre class="programlisting">perl -pe '$_ = ++$x." $_" if /./'
perl -pe '$_ = ++$x." $_" if /\S/'</pre></div><div class="sect3" title="Number and print only non-empty lines in a file (drop empty lines)"><div class="titlepage"><div><div><h4 class="title" id="number_and_print_only_non-empty_lines_in">Number and print only non-empty lines in a file (drop empty lines)</h4></div></div></div><a id="I_programlisting_id318893"/><pre class="programlisting">perl -ne 'print ++$x." $_" if /./'</pre></div><div class="sect3" title="Number all lines but print line numbers only for non-empty lines"><div class="titlepage"><div><div><h4 class="title" id="number_all_lines_but_print_line_numbers">Number all lines but print line numbers only for non-empty lines</h4></div></div></div><a id="I_programlisting_id318907"/><pre class="programlisting">perl -pe '$_ = "$. $_" if /./'</pre></div><div class="sect3" title="Number only lines that match a pattern; print others unmodified"><div class="titlepage"><div><div><h4 class="title" id="number_only_lines_that_match_a_pattern_p">Number only lines that match a pattern; print others unmodified</h4></div></div></div><a id="I_programlisting_id318921"/><pre class="programlisting">perl -pe '$_ = ++$x." $_" if /regex/'</pre></div><div class="sect3" title="Number and print only lines that match a pattern"><div class="titlepage"><div><div><h4 class="title" id="number_and_print_only_lines_that_match_a">Number and print only lines that match a pattern</h4></div></div></div><a id="I_programlisting_id318935"/><pre class="programlisting">perl -ne 'print ++$x." $_" if /regex/'</pre></div><div class="sect3" title="Number all lines but print line numbers only for lines that match a pattern"><div class="titlepage"><div><div><h4 class="title" id="number_all_lines_but_print_line-id00001">Number all lines but print line numbers only for lines that match a pattern</h4></div></div></div><a id="I_programlisting_id318949"/><pre class="programlisting">perl -pe '$_ = "$. $_" if /regex/'</pre></div><div class="sect3" title="Number all lines in a file using a custom format"><div class="titlepage"><div><div><h4 class="title" id="number_all_lines_in_a_file_using_a_custo">Number all lines in a file using a custom format</h4></div></div></div><a id="I_programlisting_id318964"/><pre class="programlisting">perl -ne 'printf "%-5d %s", $., $_'</pre></div><div class="sect3" title="Print the total number of lines in a file (emulate wc -l)"><div class="titlepage"><div><div><h4 class="title" id="print_the_total_number_of_lines_in_a_fil">Print the total number of lines in a file (emulate wc -l)</h4></div></div></div><a id="I_programlisting_id318978"/><pre class="programlisting">perl -lne 'END { print $. }'
perl -le 'print $n = () = &lt;&gt;'
perl -le 'print $n = (() = &lt;&gt;)'
perl -le 'print scalar(() = &lt;&gt;)'
perl -le 'print scalar(@foo = &lt;&gt;)'
perl -ne '}{print $.'</pre></div><div class="sect3" title="Print the number of non-empty lines in a file"><div class="titlepage"><div><div><h4 class="title" id="print_the_number_of_non-empty_lines_in_a">Print the number of non-empty lines in a file</h4></div></div></div><a id="I_programlisting_id318993"/><pre class="programlisting">perl -le 'print scalar(grep { /./ } &lt;&gt;)'
perl -le 'print ~~grep{/./}&lt;&gt;'
perl -le 'print~~grep/./,&lt;&gt;'
perl -lE 'say~~grep/./,&lt;&gt;'</pre></div><div class="sect3" title="Print the number of empty lines in a file"><div class="titlepage"><div><div><h4 class="title" id="print_the_number_of_empty_lines_in_a_fil">Print the number of empty lines in a file</h4></div></div></div><a id="I_programlisting_id319008"/><pre class="programlisting">perl -lne '$x++ if /^$/; END { print $x+0 }'
perl -lne '$x++ if /^$/; END { print int $x }'
perl -le 'print scalar(grep { /^$/ } &lt;&gt;)'
perl -le 'print ~~grep{ /^$/ } &lt;&gt;'</pre></div><div class="sect3" title="Print the number of lines in a file that match a pattern (emulate grep -c)"><div class="titlepage"><div><div><h4 class="title" id="print_the_number_of_lines_in_a_file_that">Print the number of lines in a file that match a pattern (emulate grep -c)</h4></div></div></div><a id="I_programlisting_id319024"/><pre class="programlisting">perl -lne '$x++ if /regex/; END { print $x+0 }'</pre></div><div class="sect3" title="Number words across all lines"><div class="titlepage"><div><div><h4 class="title" id="number_words_across_all_lines">Number words across all lines</h4></div></div></div><a id="I_programlisting_id319038"/><pre class="programlisting">perl -pe 's/(\w+)/++$i.".$1"/ge'</pre></div><div class="sect3" title="Number words on each individual line"><div class="titlepage"><div><div><h4 class="title" id="number_words_on_each_individual_line">Number words on each individual line</h4></div></div></div><a id="I_programlisting_id319052"/><pre class="programlisting">perl -pe '$i=0; s/(\w+)/++$i.".$1"/ge'</pre></div><div class="sect3" title="Replace all words with their numeric positions"><div class="titlepage"><div><div><h4 class="title" id="replace_all_words_with_their_numeric_pos">Replace all words with their numeric positions</h4></div></div></div><a id="I_programlisting_id319066"/><pre class="programlisting">perl -pe 's/(\w+)/++$i/ge'</pre></div></div></div><div class="sect1" title="C.3 Calculations"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_3_calculations">C.3 Calculations</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id370346"/></div></div></div><div class="sect3" title="Check if a number is a prime"><div class="titlepage"><div><div><h4 class="title" id="check_if_a_number_is_a_prime">Check if a number is a prime</h4></div></div></div><a id="I_programlisting_id319097"/><pre class="programlisting">perl -lne '(1x$_) !~ /^1?$|^(11+?)\1+$/ &amp;&amp; print "$_ is prime"'</pre></div><div class="sect3" title="Print the sum of all fields on each line"><div class="titlepage"><div><div><h4 class="title" id="print_the_sum_of_all_fields_on_each_line">Print the sum of all fields on each line</h4></div></div></div><a id="I_programlisting_id319111"/><pre class="programlisting">perl -MList::Util=sum -alne 'print sum @F'
perl -MList::Util=sum -F: -alne 'print sum @F'</pre></div><div class="sect3" title="Print the sum of all fields on all lines"><div class="titlepage"><div><div><h4 class="title" id="print_the_sum_of_all_fields_on_all_lines">Print the sum of all fields on all lines</h4></div></div></div><a id="I_programlisting_id319126"/><pre class="programlisting">perl -MList::Util=sum -alne 'push @S,@F; END { print sum @S }'
perl -MList::Util=sum -alne '$s += sum @F; END { print $s }'</pre></div><div class="sect3" title="Shuffle all fields on each line"><div class="titlepage"><div><div><h4 class="title" id="shuffle_all_fields_on_each_line">Shuffle all fields on each line</h4></div></div></div><a id="I_programlisting_id319141"/><pre class="programlisting">perl -MList::Util=shuffle -alne 'print "@{[shuffle @F]}"'
perl -MList::Util=shuffle -alne 'print join " ", shuffle @F'</pre></div><div class="sect3" title="Find the numerically smallest element (minimum element) on each line"><div class="titlepage"><div><div><h4 class="title" id="find_the_numerically_smallest_element_mi">Find the numerically smallest element (minimum element) on each line</h4></div></div></div><a id="I_programlisting_id319156"/><pre class="programlisting">perl -MList::Util=min -alne 'print min @F'</pre></div><div class="sect3" title="Find the numerically smallest element (minimum element) over all lines"><div class="titlepage"><div><div><h4 class="title" id="find_the_numerically_smallest_el-id00002">Find the numerically smallest element (minimum element) over all lines</h4></div></div></div><a id="I_programlisting_id319170"/><pre class="programlisting">perl -MList::Util=min -alne '@M = (@M, @F); END { print min @M }'
perl -MList::Util=min -alne '
  $min = min @F;
  $rmin = $min unless defined $rmin &amp;&amp; $min &gt; $rmin;
  END { print $rmin }
'
perl -MList::Util=min -alne '$min = min($min // (), @F); END { print $min }'</pre></div><div class="sect3" title="Find the numerically largest element (maximum element) on each line"><div class="titlepage"><div><div><h4 class="title" id="find_the_numerically_largest_element_max">Find the numerically largest element (maximum element) on each line</h4></div></div></div><a id="I_programlisting_id319186"/><pre class="programlisting">perl -MList::Util=max -alne 'print max @F'</pre></div><div class="sect3" title="Find the numerically largest element (maximum element) over all lines"><div class="titlepage"><div><div><h4 class="title" id="find_the_numerically_largest_ele-id00003">Find the numerically largest element (maximum element) over all lines</h4></div></div></div><a id="I_programlisting_id319201"/><pre class="programlisting">perl -MList::Util=max -alne '@M = (@M, @F); END { print max @M }'
perl -MList::Util=max -alne '
  $max = max @F;
  $rmax = $max unless defined $rmax &amp;&amp; $max &lt; $rmax;
  END { print $rmax }
'
perl -MList::Util=max -alne '$max = max($max // (), @F); END { print $max }'</pre></div><div class="sect3" title="Replace each field with its absolute value"><div class="titlepage"><div><div><h4 class="title" id="replace_each_field_with_its_absolute_val">Replace each field with its absolute value</h4></div></div></div><a id="I_programlisting_id319217"/><pre class="programlisting">perl -alne 'print "@{[map { abs } @F]}"'</pre></div><div class="sect3" title="Print the total number of fields on each line"><div class="titlepage"><div><div><h4 class="title" id="print_the_total_number_of_fields_on_each">Print the total number of fields on each line</h4></div></div></div><a id="I_programlisting_id319231"/><pre class="programlisting">perl -alne 'print scalar @F'</pre></div><div class="sect3" title="Print the total number of fields on each line, followed by the line"><div class="titlepage"><div><div><h4 class="title" id="print_the_total_number_of_fields-id00004">Print the total number of fields on each line, followed by the line</h4></div></div></div><a id="I_programlisting_id319245"/><pre class="programlisting">perl -alne 'print scalar @F, " $_"'</pre></div><div class="sect3" title="Print the total number of fields on all lines"><div class="titlepage"><div><div><h4 class="title" id="print_the_total_number_of_fields_on_all">Print the total number of fields on all lines</h4></div></div></div><a id="I_programlisting_id319260"/><pre class="programlisting">perl -alne '$t += @F; END { print $t }'</pre></div><div class="sect3" title="Print the total number of fields that match a pattern"><div class="titlepage"><div><div><h4 class="title" id="print_the_total_number_of_fields_that_ma">Print the total number of fields that match a pattern</h4></div></div></div><a id="I_programlisting_id319274"/><pre class="programlisting">perl -alne 'map { /regex/ &amp;&amp; $t++ } @F; END { print $t || 0 }'
perl -alne '$t += /regex/ for @F; END { print $t }'
perl -alne '$t += grep /regex/, @F; END { print $t }'</pre></div><div class="sect3" title="Print the total number of lines that match a pattern"><div class="titlepage"><div><div><h4 class="title" id="print_the_total_number_of_lines_that_mat">Print the total number of lines that match a pattern</h4></div></div></div><a id="I_programlisting_id319289"/><pre class="programlisting">perl -lne '/regex/ &amp;&amp; $t++; END { print $t || 0 }'</pre></div><div class="sect3" title="Print the number π"><div class="titlepage"><div><div><h4 class="title" id="print_the_number">Print the number π</h4></div></div></div><a id="I_programlisting_id319302"/><pre class="programlisting">perl -Mbignum=bpi -le 'print bpi(21)'
perl -Mbignum=PI -le 'print PI'</pre></div><div class="sect3" title="Print the number e"><div class="titlepage"><div><div><h4 class="title" id="print_the_number_e">Print the number <span class="emphasis"><em>e</em></span></h4></div></div></div><a id="I_programlisting_id319320"/><pre class="programlisting">perl -Mbignum=bexp -le 'print bexp(1,21)'
perl -Mbignum=e -le 'print e'</pre></div><div class="sect3" title="Print UNIX time (seconds since January 1, 1970, 00:00:00 UTC)"><div class="titlepage"><div><div><h4 class="title" id="print_unix_time_seconds_since_january_1">Print UNIX time (seconds since January 1, 1970, 00:00:00 UTC)</h4></div></div></div><a id="I_programlisting_id319334"/><pre class="programlisting">perl -le 'print time'</pre></div><div class="sect3" title="Print Greenwich Mean Time and local computer time"><div class="titlepage"><div><div><h4 class="title" id="print_greenwich_mean_time_and_local_comp">Print Greenwich Mean Time and local computer time</h4></div></div></div><a id="I_programlisting_id319348"/><pre class="programlisting">perl -le 'print scalar gmtime'
perl -le 'print scalar localtime'</pre></div><div class="sect3" title="Print yesterday’s date"><div class="titlepage"><div><div><h4 class="title" id="print_yesterdays_date">Print yesterday’s date</h4></div></div></div><a id="I_programlisting_id319362"/><pre class="programlisting">perl -MPOSIX -le '
  @now = localtime;
  $now[3] -= 1;
  print scalar localtime mktime @now
'</pre></div><div class="sect3" title="Print the date 14 months, 9 days, and 7 seconds ago"><div class="titlepage"><div><div><h4 class="title" id="print_the_date_14_months_9_days_and_7_se">Print the date 14 months, 9 days, and 7 seconds ago</h4></div></div></div><a id="I_programlisting_id319377"/><pre class="programlisting">perl -MPOSIX -le '
  @now = localtime;
  $now[0] -= 7;
  $now[3] -= 9;
  $now[4] -= 14;
  print scalar localtime mktime @now
'</pre></div><div class="sect3" title="Calculate the factorial"><div class="titlepage"><div><div><h4 class="title" id="calculate_the_factorial">Calculate the factorial</h4></div></div></div><a id="I_programlisting_id319391"/><pre class="programlisting">perl -MMath::BigInt -le 'print Math::BigInt-&gt;new(5)-&gt;bfac()'
perl -le '$f = 1; $f *= $_ for 1..5; print $f'</pre></div><div class="sect3" title="Calculate the greatest common divisor"><div class="titlepage"><div><div><h4 class="title" id="calculate_the_greatest_common_divisor">Calculate the greatest common divisor</h4></div></div></div><a id="I_programlisting_id319406"/><pre class="programlisting">perl -MMath::BigInt=bgcd -le 'print bgcd(@list_of_numbers)'
perl -MMath::BigInt=bgcd -le 'print bgcd(20,60,30)'
perl -MMath::BigInt=bgcd -anle 'print bgcd(@F)'
perl -le '
  $n = 20; $m = 35;
  ($m,$n) = ($n,$m%$n) while $n;
  print $m
'</pre></div><div class="sect3" title="Calculate the least common multiple"><div class="titlepage"><div><div><h4 class="title" id="calculate_the_least_common_multiple">Calculate the least common multiple</h4></div></div></div><a id="I_programlisting_id319421"/><pre class="programlisting">perl -MMath::BigInt=blcm -le 'print blcm(35,20,8)'
perl -MMath::BigInt=blcm -anle 'print blcm(@F)'
perl -le '
  $a = $n = 20;
  $b = $m = 35;
  ($m,$n) = ($n,$m%$n) while $n;
  print $a*$b/$m
'</pre></div><div class="sect3" title="Generate 10 random numbers between 5 and 15 (excluding 15)"><div class="titlepage"><div><div><h4 class="title" id="generate_10_random_numbers_between_5_and">Generate 10 random numbers between 5 and 15 (excluding 15)</h4></div></div></div><a id="I_programlisting_id319437"/><pre class="programlisting">perl -le 'print join ",", map { int(rand(15-5))+5 } 1..10'
perl -le '
  $n=10;
  $min=5;
  $max=15;
  $, = " ";
  print map { int(rand($max-$min))+$min } 1..$n;
'</pre></div><div class="sect3" title="Generate all permutations of a list"><div class="titlepage"><div><div><h4 class="title" id="generate_all_permutations_of_a_list">Generate all permutations of a list</h4></div></div></div><a id="I_programlisting_id319452"/><pre class="programlisting">perl -MAlgorithm::Permute -le '
  $l = [1,2,3,4,5];
  $p = Algorithm::Permute-&gt;new($l);
  print "@r" while @r = $p-&gt;next
'
 perl -MAlgorithm::Permute -le '
  @l = (1,2,3,4,5);
  Algorithm::Permute::permute { print "@l" } @l
'</pre></div><div class="sect3" title="Generate the powerset"><div class="titlepage"><div><div><h4 class="title" id="generate_the_powerset">Generate the powerset</h4></div></div></div><a id="I_programlisting_id319467"/><pre class="programlisting">perl -MList::PowerSet=powerset -le '
  @l = (1,2,3,4,5);
  print "@$_" for @{powerset(@l)}
'</pre></div><div class="sect3" title="Convert an IP address to an unsigned integer"><div class="titlepage"><div><div><h4 class="title" id="convert_an_ip_address_to_an_unsi-id00005">Convert an IP address to an unsigned integer</h4></div></div></div><a id="I_programlisting_id319482"/><pre class="programlisting">perl -le '
  $i=3;
  $u += ($_&lt;&lt;8*$i--) for "127.0.0.1" =~ /(\d+)/g;
  print $u
'
 perl -le '
  $ip="127.0.0.1";
  $ip =~ s/(\d+)\.?/sprintf("%02x", $1)/ge;
  print hex($ip)
'
 perl -le 'print unpack("N", 127.0.0.1)'
 perl -MSocket -le 'print unpack("N", inet_aton("127.0.0.1"))'</pre></div><div class="sect3" title="Convert an unsigned integer to an IP address"><div class="titlepage"><div><div><h4 class="title" id="convert_an_unsigned_integer_to_an_ip_add">Convert an unsigned integer to an IP address</h4></div></div></div><a id="I_programlisting_id319498"/><pre class="programlisting">perl -MSocket -le 'print inet_ntoa(pack("N", 2130706433))'
perl -le '
  $ip = 2130706433;
  print join ".", map { (($ip&gt;&gt;8*($_))&amp;0xFF) } reverse 0..3
'
perl -le '
  $ip = 2130706433;
  $, = ".";
  print map { (($ip&gt;&gt;8*($_))&amp;0xFF) } reverse 0..3
'
perl -le '
  $ip = 2130706433;
  $, = ".";
  print map { (($ip&gt;&gt;8*($_))&amp;0xFF) } 3,2,1,0
'</pre></div></div></div><div class="sect1" title="C.4 Working with Arrays and Strings"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_4_working_with_arrays_and_strings">C.4 Working with Arrays and Strings</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id629106"/></div></div></div><div class="sect3" title="Generate and print the alphabet"><div class="titlepage"><div><div><h4 class="title" id="generate_and_print_the_alphabet">Generate and print the alphabet</h4></div></div></div><a id="I_programlisting_id319528"/><pre class="programlisting">perl -le 'print a..z'
perl -le 'print ("a".."z")'
perl -le '$, = ","; print ("a".."z")'
perl -le '$alphabet = join ",", ("a".."z"); print $alphabet'</pre></div><div class="sect3" title="Generate and print all the strings from “a” to “zz”"><div class="titlepage"><div><div><h4 class="title" id="generate_and_print_all_the_strings_from">Generate and print all the strings from “a” to “zz”</h4></div></div></div><a id="I_programlisting_id319542"/><pre class="programlisting">perl -le 'print join ",", ("a".."zz")'
perl -le 'print join ",", "aa".."zz"'</pre></div><div class="sect3" title="Create a hex lookup table"><div class="titlepage"><div><div><h4 class="title" id="create_a_hex_lookup_table">Create a hex lookup table</h4></div></div></div><a id="I_programlisting_id319556"/><pre class="programlisting">@hex = (0..9, "a".."f")
perl -le '
  $num = 255;
  @hex = (0..9, "a".."f");
  while ($num) {
    $s = $hex[($num % 16)].$s;
    $num = int $num/16;
  }
  print $s
'
perl -le 'printf("%x", 255)'
perl -le '$num = "ff"; print hex $num'</pre></div><div class="sect3" title="Generate a random eight-character password"><div class="titlepage"><div><div><h4 class="title" id="generate_a_random_eight-character_passwo">Generate a random eight-character password</h4></div></div></div><a id="I_programlisting_id319572"/><pre class="programlisting">perl -le 'print map { ("a".."z")[rand 26] } 1..8'
perl -le 'print map { ("a".."z", 0..9)[rand 36] } 1..8'</pre></div><div class="sect3" title="Create a string of specific length"><div class="titlepage"><div><div><h4 class="title" id="create_a_string_of_specific_length">Create a string of specific length</h4></div></div></div><a id="I_programlisting_id319587"/><pre class="programlisting">perl -le 'print "a"x50'
perl -e 'print "a"x1024'
perl -le '@list = (1,2)x20; print "@list"'</pre></div><div class="sect3" title="Create an array from a string"><div class="titlepage"><div><div><h4 class="title" id="create_an_array_from_a_string">Create an array from a string</h4></div></div></div><a id="I_programlisting_id319601"/><pre class="programlisting">@months = split ' ', "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
@months = qw/Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec/</pre></div><div class="sect3" title="Create a string from the command-line arguments"><div class="titlepage"><div><div><h4 class="title" id="create_a_string_from_the_command-line_ar">Create a string from the command-line arguments</h4></div></div></div><a id="I_programlisting_id319616"/><pre class="programlisting">perl -le 'print "(", (join ",", @ARGV), ")"' val1 val2 val3
perl -le '
  print "INSERT INTO table VALUES (", (join ",", @ARGV), ")"
' val1 val2 val3</pre></div><div class="sect3" title="Find the numeric values for characters in a string"><div class="titlepage"><div><div><h4 class="title" id="find_the_numeric_values_for_characters_i">Find the numeric values for characters in a string</h4></div></div></div><a id="I_programlisting_id319631"/><pre class="programlisting">perl -le 'print join ", ", map { ord } split //, "hello world"'
perl -le 'print join ", ", unpack("C*", "hello world")'
perl -le '
  print join ", ", map { sprintf "0x%x", ord $_ } split //, "hello world"
'
perl -le '
  print join ", ", map { sprintf "%o", ord $_ } split //, "hello world"
'
perl -le '
  print join ", ", map { sprintf "%#o", ord $_ } split //, "hello world"
'</pre></div><div class="sect3" title="Convert a list of numeric ASCII values into a string"><div class="titlepage"><div><div><h4 class="title" id="convert_a_list_of_numeric_ascii_values_i">Convert a list of numeric ASCII values into a string</h4></div></div></div><a id="I_programlisting_id319648"/><pre class="programlisting">perl -le '
  @ascii = (99, 111, 100, 105, 110, 103);
  print pack("C*", @ascii)
'
perl -le '
  @ascii = (99, 111, 100, 105, 110, 103);
  $str = join "", map chr, @ascii;
  print $str
'
perl -le 'print map chr, 99, 111, 100, 105, 110, 103'
perl -le 'print map chr, @ARGV' 99 111 100 105 110 103</pre></div><div class="sect3" title="Generate an array with odd numbers from 1 to 100"><div class="titlepage"><div><div><h4 class="title" id="generate_an_array_with_odd_numbers_from">Generate an array with odd numbers from 1 to 100</h4></div></div></div><a id="I_programlisting_id319665"/><pre class="programlisting">perl -le '@odd = grep {$_ % 2 == 1} 1..100; print "@odd"'
perl -le '@odd = grep { $_ &amp; 1 } 1..100; print "@odd"'</pre></div><div class="sect3" title="Generate an array with even numbers from 1 to 100"><div class="titlepage"><div><div><h4 class="title" id="generate_an_array_with_even_numbers_from">Generate an array with even numbers from 1 to 100</h4></div></div></div><a id="I_programlisting_id319679"/><pre class="programlisting">perl -le '@even = grep {$_ % 2 == 0} 1..100; print "@even"'</pre></div><div class="sect3" title="Find the length of a string"><div class="titlepage"><div><div><h4 class="title" id="find_the_length_of_a_string">Find the length of a string</h4></div></div></div><a id="I_programlisting_id319693"/><pre class="programlisting">perl -le 'print length "one-liners are great"'</pre></div><div class="sect3" title="Find the number of elements in an array"><div class="titlepage"><div><div><h4 class="title" id="find_the_number_of_elements_in_an_array">Find the number of elements in an array</h4></div></div></div><a id="I_programlisting_id319707"/><pre class="programlisting">perl -le '@array = ("a".."z"); print scalar @array'
perl -le '@array = ("a".."z"); print $#array + 1'
perl -le 'print scalar @ARGV' *.txt
perl -le 'print scalar (@ARGV=&lt;*.txt&gt;)'</pre></div></div></div><div class="sect1" title="C.5 Text Conversion and Substitution"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_5_text_conversion_and_substitution">C.5 Text Conversion and Substitution</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id629358"/></div></div></div><div class="sect3" title="ROT13 a string"><div class="titlepage"><div><div><h4 class="title" id="rot13_a_string">ROT13 a string</h4></div></div></div><a id="I_programlisting_id319741"/><pre class="programlisting">perl -le '$str = "bananas"; $str =~ y/A-Za-z/N-ZA-Mn-za-m/; print $str'
perl -lpe 'y/A-Za-z/N-ZA-Mn-za-m/' file
perl -pi.bak -e 'y/A-Za-z/N-ZA-Mn-za-m/' file</pre></div><div class="sect3" title="Base64-encode a string"><div class="titlepage"><div><div><h4 class="title" id="base64-encode_a_string">Base64-encode a string</h4></div></div></div><a id="I_programlisting_id319755"/><pre class="programlisting">perl -MMIME::Base64 -e 'print encode_base64("string")'
perl -MMIME::Base64 -0777 -ne 'print encode_base64($_)' file</pre></div><div class="sect3" title="Base64-decode a string"><div class="titlepage"><div><div><h4 class="title" id="base64-decode_a_string">Base64-decode a string</h4></div></div></div><a id="I_programlisting_id319770"/><pre class="programlisting">perl -MMIME::Base64 -le 'print decode_base64("base64string")'
perl -MMIME::Base64 -0777 -ne 'print decode_base64($_)' file</pre></div><div class="sect3" title="URL-escape a string"><div class="titlepage"><div><div><h4 class="title" id="url-escape_a_string">URL-escape a string</h4></div></div></div><a id="I_programlisting_id319784"/><pre class="programlisting">perl -MURI::Escape -le 'print uri_escape("http://example.com")'</pre></div><div class="sect3" title="URL-unescape a string"><div class="titlepage"><div><div><h4 class="title" id="url-unescape_a_string">URL-unescape a string</h4></div></div></div><a id="I_programlisting_id319798"/><pre class="programlisting">perl -MURI::Escape -le 'print uri_unescape("http%3A%2F%2Fexample.com")'</pre></div><div class="sect3" title="HTML-encode a string"><div class="titlepage"><div><div><h4 class="title" id="html-encode_a_string">HTML-encode a string</h4></div></div></div><a id="I_programlisting_id319812"/><pre class="programlisting">perl -MHTML::Entities -le 'print encode_entities("&lt;html&gt;")'</pre></div><div class="sect3" title="HTML-decode a string"><div class="titlepage"><div><div><h4 class="title" id="html-decode_a_string">HTML-decode a string</h4></div></div></div><a id="I_programlisting_id319826"/><pre class="programlisting">perl -MHTML::Entities -le 'print decode_entities("&amp;lt;html&amp;gt;")'</pre></div><div class="sect3" title="Convert all text to uppercase"><div class="titlepage"><div><div><h4 class="title" id="convert_all_text_to_uppercase">Convert all text to uppercase</h4></div></div></div><a id="I_programlisting_id319840"/><pre class="programlisting">perl -nle 'print uc'
perl -ple '$_ = uc'
perl -nle 'print "\U$_"'</pre></div><div class="sect3" title="Convert all text to lowercase"><div class="titlepage"><div><div><h4 class="title" id="convert_all_text_to_lowercase">Convert all text to lowercase</h4></div></div></div><a id="I_programlisting_id319854"/><pre class="programlisting">perl -nle 'print lc'
perl -nle 'print "\L$_"'</pre></div><div class="sect3" title="Uppercase only the first letter of each line"><div class="titlepage"><div><div><h4 class="title" id="uppercase_only_the_first_letter_of_each">Uppercase only the first letter of each line</h4></div></div></div><a id="I_programlisting_id319869"/><pre class="programlisting">perl -nle 'print ucfirst lc'
perl -nle 'print "\u\L$_"'</pre></div><div class="sect3" title="Invert the letter case"><div class="titlepage"><div><div><h4 class="title" id="invert_the_letter_case">Invert the letter case</h4></div></div></div><a id="I_programlisting_id319882"/><pre class="programlisting">perl -ple 'y/A-Za-z/a-zA-Z/'</pre></div><div class="sect3" title="Title-case each line"><div class="titlepage"><div><div><h4 class="title" id="title-case_each_line">Title-case each line</h4></div></div></div><a id="I_programlisting_id319895"/><pre class="programlisting">perl -ple 's/(\w+)/\u$1/g'</pre></div><div class="sect3" title="Strip leading whitespace (spaces, tabs) from the beginning of each line"><div class="titlepage"><div><div><h4 class="title" id="strip_leading_whitespace_spaces_tabs_fro">Strip leading whitespace (spaces, tabs) from the beginning of each line</h4></div></div></div><a id="I_programlisting_id319910"/><pre class="programlisting">perl -ple 's/^[ \t]+//'
perl -ple 's/^\s+//'</pre></div><div class="sect3" title="Strip trailing whitespace (spaces, tabs) from the end of each line"><div class="titlepage"><div><div><h4 class="title" id="strip_trailing_whitespace_spaces_tabs_fr">Strip trailing whitespace (spaces, tabs) from the end of each line</h4></div></div></div><a id="I_programlisting_id319924"/><pre class="programlisting">perl -ple 's/[ \t]+$//'
perl -ple 's/\s+$//'</pre></div><div class="sect3" title="Strip whitespace (spaces, tabs) from the beginning and end of each line"><div class="titlepage"><div><div><h4 class="title" id="strip_whitespace_spaces_tabs_from_the_be">Strip whitespace (spaces, tabs) from the beginning and end of each line</h4></div></div></div><a id="I_programlisting_id319938"/><pre class="programlisting">perl -ple 's/^[ \t]+|[ \t]+$//g'
perl -ple 's/^\s+|\s+$//g'</pre></div><div class="sect3" title="Convert UNIX newlines to DOS/Windows newlines"><div class="titlepage"><div><div><h4 class="title" id="convert_unix_newlines_to_dos_windows_new">Convert UNIX newlines to DOS/Windows newlines</h4></div></div></div><a id="I_programlisting_id319953"/><pre class="programlisting">perl -pe 's|\012|\015\012|'</pre></div><div class="sect3" title="Convert DOS/Windows newlines to UNIX newlines"><div class="titlepage"><div><div><h4 class="title" id="convert_dos_windows_newlines_to_unix_new">Convert DOS/Windows newlines to UNIX newlines</h4></div></div></div><a id="I_programlisting_id319967"/><pre class="programlisting">perl -pe 's|\015\012|\012|'</pre></div><div class="sect3" title="Convert UNIX newlines to Mac newlines"><div class="titlepage"><div><div><h4 class="title" id="convert_unix_newlines_to_mac_newlines">Convert UNIX newlines to Mac newlines</h4></div></div></div><a id="I_programlisting_id319981"/><pre class="programlisting">perl -pe 's|\012|\015|'</pre></div><div class="sect3" title="Substitute (find and replace) “foo” with “bar” on each line"><div class="titlepage"><div><div><h4 class="title" id="substitute_find_and_replace_foo_with_bar">Substitute (find and replace) “foo” with “bar” on each line</h4></div></div></div><a id="I_programlisting_id319995"/><pre class="programlisting">perl -pe 's/foo/bar/'
perl -pe 's/foo/bar/g'</pre></div><div class="sect3" title="Substitute (find and replace) “foo” with “bar” on lines that match “baz”"><div class="titlepage"><div><div><h4 class="title" id="substitute_find_and_replace_foo-id00006">Substitute (find and replace) “foo” with “bar” on lines that match “baz”</h4></div></div></div><a id="I_programlisting_id320009"/><pre class="programlisting">perl -pe '/baz/ &amp;&amp; s/foo/bar/'
perl -pe 's/foo/bar/ if /baz/'</pre></div><div class="sect3" title="Print paragraphs in reverse order"><div class="titlepage"><div><div><h4 class="title" id="print_paragraphs_in_reverse_order">Print paragraphs in reverse order</h4></div></div></div><a id="I_programlisting_id320024"/><pre class="programlisting">perl -00 -e 'print reverse &lt;&gt;' file</pre></div><div class="sect3" title="Print all lines in reverse order"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_in_reverse_order">Print all lines in reverse order</h4></div></div></div><a id="I_programlisting_id320038"/><pre class="programlisting">perl -lne 'print scalar reverse $_'
perl -lne 'print scalar reverse'
perl -lpe '$_ = reverse $_'
perl -lpe '$_ = reverse'</pre></div><div class="sect3" title="Print columns in reverse order"><div class="titlepage"><div><div><h4 class="title" id="print_columns_in_reverse_order">Print columns in reverse order</h4></div></div></div><a id="I_programlisting_id320052"/><pre class="programlisting">perl -alne 'print "@{[reverse @F]}"'
perl -F: -alne 'print "@{[reverse @F]}"'
perl -F: -alne '$" = ":"; print "@{[reverse @F]}"'</pre></div></div></div><div class="sect1" title="C.6 Selectively Printing and Deleting Lines"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_6_selectively_printing_and_deletin">C.6 Selectively Printing and Deleting Lines</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id629766"/></div></div></div><div class="sect3" title="Print the first line of a file (emulate head -1)"><div class="titlepage"><div><div><h4 class="title" id="print_the_first_line_of_a_file_emulate_h">Print the first line of a file (emulate head -1)</h4></div></div></div><a id="I_programlisting_id320084"/><pre class="programlisting">perl -ne 'print; exit' file
perl -i -ne 'print; exit' file
perl -i.bak -ne 'print; exit' file</pre></div><div class="sect3" title="Print the first 10 lines of a file (emulate head -10)"><div class="titlepage"><div><div><h4 class="title" id="print_the_first_10_lines_of_a_file_emula">Print the first 10 lines of a file (emulate head -10)</h4></div></div></div><a id="I_programlisting_id320099"/><pre class="programlisting">perl -ne 'print if $. &lt;= 10' file
perl -ne '$. &lt;= 10 &amp;&amp; print' file
perl -ne 'print if 1..10' file
perl -ne 'print; exit if $. == 10' file</pre></div><div class="sect3" title="Print the last line of a file (emulate tail -1)"><div class="titlepage"><div><div><h4 class="title" id="print_the_last_line_of_a_file_emulate_ta">Print the last line of a file (emulate tail -1)</h4></div></div></div><a id="I_programlisting_id320114"/><pre class="programlisting">perl -ne '$last = $_; END { print $last }' file
perl -ne 'print if eof' file</pre></div><div class="sect3" title="Print the last 10 lines of a file (emulate tail -10)"><div class="titlepage"><div><div><h4 class="title" id="print_the_last_10_lines_of_a_file_emulat">Print the last 10 lines of a file (emulate tail -10)</h4></div></div></div><a id="I_programlisting_id320128"/><pre class="programlisting">perl -ne 'push @a, $_; @a = @a[@a-10..$#a] if @a&gt;10; END { print @a }' file
perl -ne 'push @a, $_; shift @a if @a&gt;10; END { print @a }' file</pre></div><div class="sect3" title="Print only lines that match a regular expression"><div class="titlepage"><div><div><h4 class="title" id="print_only_lines_that_match_a_regular_ex">Print only lines that match a regular expression</h4></div></div></div><a id="I_programlisting_id320144"/><pre class="programlisting">perl -ne '/regex/ &amp;&amp; print'
perl -ne 'print if /regex/'</pre></div><div class="sect3" title="Print only lines that do not match a regular expression"><div class="titlepage"><div><div><h4 class="title" id="print_only_lines_that_do_not_match_a_reg">Print only lines that do not match a regular expression</h4></div></div></div><a id="I_programlisting_id320158"/><pre class="programlisting">perl -ne '!/regex/ &amp;&amp; print'
perl -ne 'print if !/regex/'
perl -ne 'print unless /regex/'
perl -ne '/regex/ || print'</pre></div><div class="sect3" title="Print every line preceding a line that matches a regular expression"><div class="titlepage"><div><div><h4 class="title" id="print_every_line_preceding_a_line_that_m">Print every line preceding a line that matches a regular expression</h4></div></div></div><a id="I_programlisting_id320173"/><pre class="programlisting">perl -ne '/regex/ &amp;&amp; $last &amp;&amp; print $last; $last = $_'</pre></div><div class="sect3" title="Print every line following a line that matches a regular expression"><div class="titlepage"><div><div><h4 class="title" id="print_every_line_following_a_line_that_m">Print every line following a line that matches a regular expression</h4></div></div></div><a id="I_programlisting_id320187"/><pre class="programlisting">perl -ne 'if ($p) { print; $p = 0 } $p++ if /regex/'
perl -ne '$p &amp;&amp; print &amp;&amp; ($p = 0); $p++ if /regex/'
perl -ne '$p &amp;&amp; print; $p = /regex/'</pre></div><div class="sect3" title="Print lines that match regular expressions AAA and BBB in any order"><div class="titlepage"><div><div><h4 class="title" id="print_lines_that_match_regular_expressio">Print lines that match regular expressions AAA and BBB in any order</h4></div></div></div><a id="I_programlisting_id320202"/><pre class="programlisting">perl -ne '/AAA/ &amp;&amp; /BBB/ &amp;&amp; print'</pre></div><div class="sect3" title="Print lines that don’t match regular expressions AAA and BBB"><div class="titlepage"><div><div><h4 class="title" id="print_lines_that_dont_match_regular_expr">Print lines that don’t match regular expressions AAA and BBB</h4></div></div></div><a id="I_programlisting_id320216"/><pre class="programlisting">perl -ne '!/AAA/ &amp;&amp; !/BBB/ &amp;&amp; print'</pre></div><div class="sect3" title="Print lines that match regular expression AAA followed by BBB followed by CCC"><div class="titlepage"><div><div><h4 class="title" id="print_lines_that_match_regular_e-id00007">Print lines that match regular expression AAA followed by BBB followed by CCC</h4></div></div></div><a id="I_programlisting_id320230"/><pre class="programlisting">perl -ne '/AAA.*BBB.*CCC/ &amp;&amp; print'</pre></div><div class="sect3" title="Print lines that are at least 80 characters long"><div class="titlepage"><div><div><h4 class="title" id="print_lines_that_are_at_least_80_charact">Print lines that are at least 80 characters long</h4></div></div></div><a id="I_programlisting_id320244"/><pre class="programlisting">perl -ne 'print if length &gt;= 80'
perl -lne 'print if length &gt;= 80'</pre></div><div class="sect3" title="Print lines that are fewer than 80 characters long"><div class="titlepage"><div><div><h4 class="title" id="print_lines_that_are_fewer_than_80_chara">Print lines that are fewer than 80 characters long</h4></div></div></div><a id="I_programlisting_id320259"/><pre class="programlisting">perl -ne 'print if length() &lt; 80'</pre></div><div class="sect3" title="Print only line 13"><div class="titlepage"><div><div><h4 class="title" id="print_only_line_13">Print only line 13</h4></div></div></div><a id="I_programlisting_id320272"/><pre class="programlisting">perl -ne '$. == 13 &amp;&amp; print &amp;&amp; exit'</pre></div><div class="sect3" title="Print all lines except line 27"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_except_line_27">Print all lines except line 27</h4></div></div></div><a id="I_programlisting_id320286"/><pre class="programlisting">perl -ne '$. != 27 &amp;&amp; print'
perl -ne 'print if $. != 27'
perl -ne 'print unless $. == 27'</pre></div><div class="sect3" title="Print only lines 13, 19, and 67"><div class="titlepage"><div><div><h4 class="title" id="print_only_lines_13_19_and_67">Print only lines 13, 19, and 67</h4></div></div></div><a id="I_programlisting_id320301"/><pre class="programlisting">perl -ne 'print if $. == 13 || $. == 19 || $. == 67'
perl -ne '
  @lines = (13, 19, 88, 290, 999, 1400, 2000);
  print if grep { $_ == $. } @lines
'</pre></div><div class="sect3" title="Print all lines from 17 to 30"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_from_17_to_30">Print all lines from 17 to 30</h4></div></div></div><a id="I_programlisting_id320315"/><pre class="programlisting">perl -ne 'print if $. &gt;= 17 &amp;&amp; $. &lt;= 30'
perl -ne 'print if 17..30'</pre></div><div class="sect3" title="Print all lines between two regular expressions (including the lines that match)"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_between_two_regular_expr">Print all lines between two regular expressions (including the lines that match)</h4></div></div></div><a id="I_programlisting_id320330"/><pre class="programlisting">perl -ne 'print if /regex1/../regex2/'</pre></div><div class="sect3" title="Print the longest line"><div class="titlepage"><div><div><h4 class="title" id="print_the_longest_line">Print the longest line</h4></div></div></div><a id="I_programlisting_id320344"/><pre class="programlisting">perl -ne '
  $l = $_ if length($_) &gt; length($l);
  END { print $l }
'</pre></div><div class="sect3" title="Print the shortest line"><div class="titlepage"><div><div><h4 class="title" id="print_the_shortest_line">Print the shortest line</h4></div></div></div><a id="I_programlisting_id320358"/><pre class="programlisting">perl -ne '
  $s = $_ if $. == 1;
  $s = $_ if length($_) &lt; length($s);
  END { print $s }
'</pre></div><div class="sect3" title="Print all lines containing digits"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_containing_digits">Print all lines containing digits</h4></div></div></div><a id="I_programlisting_id320372"/><pre class="programlisting">perl -ne 'print if /\d/'</pre></div><div class="sect3" title="Print all lines containing only digits"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_containing_only_digits">Print all lines containing only digits</h4></div></div></div><a id="I_programlisting_id320386"/><pre class="programlisting">perl -ne 'print if /^\d+$/'
perl -lne 'print unless /\D/'</pre></div><div class="sect3" title="Print all lines containing only alphabetic characters"><div class="titlepage"><div><div><h4 class="title" id="print_all_lines_containing_only_alphabet">Print all lines containing only alphabetic characters</h4></div></div></div><a id="I_programlisting_id320400"/><pre class="programlisting">perl -ne 'print if /^[[:alpha:]]+$/</pre></div><div class="sect3" title="Print every second line"><div class="titlepage"><div><div><h4 class="title" id="print_every_second_line-id00008">Print every second line</h4></div></div></div><a id="I_programlisting_id320414"/><pre class="programlisting">perl -ne 'print if $. % 2'</pre></div><div class="sect3" title="Print every second line, beginning with the second line"><div class="titlepage"><div><div><h4 class="title" id="print_every_second_line_beginning_with_t">Print every second line, beginning with the second line</h4></div></div></div><a id="I_programlisting_id320428"/><pre class="programlisting">perl -ne 'print if $. % 2 == 0'
perl -ne 'print unless $. % 2'</pre></div><div class="sect3" title="Print all repeated lines only once"><div class="titlepage"><div><div><h4 class="title" id="print_all_repeated_lines_only_once">Print all repeated lines only once</h4></div></div></div><a id="I_programlisting_id320442"/><pre class="programlisting">perl -ne 'print if ++$a{$_} == 2'</pre></div><div class="sect3" title="Print all unique lines"><div class="titlepage"><div><div><h4 class="title" id="print_all_unique_lines">Print all unique lines</h4></div></div></div><a id="I_programlisting_id320456"/><pre class="programlisting">perl -ne 'print unless $a{$_}++'</pre></div></div></div><div class="sect1" title="C.7 Useful Regular Expressions"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="c_7_useful_regular_expressions">C.7 Useful Regular Expressions</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title" id="id630241"/></div></div></div><div class="sect3" title="Match something that looks like an IP address"><div class="titlepage"><div><div><h4 class="title" id="match_something_that_looks_like_an_ip_ad">Match something that looks like an IP address</h4></div></div></div><a id="I_programlisting_id320485"/><pre class="programlisting">/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/
/^(\d{1,3}\.){3}\d{1,3}$/
perl -ne 'print if /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/'</pre></div><div class="sect3" title="Test whether a number is in the range 0 to 255"><div class="titlepage"><div><div><h4 class="title" id="test_whether_a_number_is_in_the_range_0">Test whether a number is in the range 0 to 255</h4></div></div></div><a id="I_programlisting_id320499"/><pre class="programlisting">/^([0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/
perl -le '
  map { $n++ if /^([0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/ } 0..255;
  END { print $n }
'
perl -le '
  map { $n++ if /^([0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/ } 0..1000;
  END { print $n }
'</pre></div><div class="sect3" title="Match an IP address"><div class="titlepage"><div><div><h4 class="title" id="match_an_ip_address">Match an IP address</h4></div></div></div><a id="I_programlisting_id320515"/><pre class="programlisting">my $ip_part = qr/[0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]/;
if ($ip =~ /^$ip_part\.$ip_part\.$ip_part\.$ip_part$/) {
  print "valid ip\n";
}
if ($ip =~ /^($ip_part\.){3}$ip_part$/) {
  print "valid ip\n";
}
perl -ne '
  $ip_part = qr|([0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])|;
  print if /^($ip_part\.){3}$ip_part$/
'</pre></div><div class="sect3" title="Check whether a string looks like an email address"><div class="titlepage"><div><div><h4 class="title" id="check_whether_a_string_looks_like_an_ema">Check whether a string looks like an email address</h4></div></div></div><a id="I_programlisting_id320532"/><pre class="programlisting">/\S+@\S+\.\S+/
use Email::Valid;
print Email::Valid-&gt;address('cats@catonmat.net') ? 'valid email' : 'invalid email';
perl -MEmail::Valid -ne 'print if Email::Valid-&gt;address($_)'</pre></div><div class="sect3" title="Check whether a string is a number"><div class="titlepage"><div><div><h4 class="title" id="check_whether_a_string_is_a_number">Check whether a string is a number</h4></div></div></div><a id="I_programlisting_id320546"/><pre class="programlisting">/^\d+$/
/^[+-]?\d+$/
/^[+-]?\d+\.?\d*$/
perl -MRegexp::Common -ne 'print if /$RE{num}{real}/'
perl -MRegexp::Common -ne 'print if /$RE{num}{hex}/'
perl -MRegexp::Common -ne 'print if /$RE{num}{oct}/'
perl -MRegexp::Common -ne 'print if /$RE{num}{bin}/'</pre></div><div class="sect3" title="Check whether a word appears in a string twice"><div class="titlepage"><div><div><h4 class="title" id="check_whether_a_word_appears_in_a_string">Check whether a word appears in a string twice</h4></div></div></div><a id="I_programlisting_id320562"/><pre class="programlisting">/(word).*\1/</pre></div><div class="sect3" title="Increase all integers in a string by one"><div class="titlepage"><div><div><h4 class="title" id="increase_all_integers_in_a_string_by_one">Increase all integers in a string by one</h4></div></div></div><a id="I_programlisting_id320576"/><pre class="programlisting">$str =~ s/(\d+)/$1+1/ge
perl -MRegexp::Common -pe 's/($RE{num}{real})/$1+1/ge'</pre></div><div class="sect3" title="Extract the HTTP User-Agent string from HTTP headers"><div class="titlepage"><div><div><h4 class="title" id="extract_the_http_user-agent_string_from">Extract the HTTP User-Agent string from HTTP headers</h4></div></div></div><a id="I_programlisting_id320590"/><pre class="programlisting">/^User-Agent: (.+)$/</pre></div><div class="sect3" title="Match printable ASCII characters"><div class="titlepage"><div><div><h4 class="title" id="match_printable_ascii_characters">Match printable ASCII characters</h4></div></div></div><a id="I_programlisting_id320604"/><pre class="programlisting">/[ -~]/</pre></div><div class="sect3" title="Extract text between two HTML tags"><div class="titlepage"><div><div><h4 class="title" id="extract_text_between_two_html_tags">Extract text between two HTML tags</h4></div></div></div><a id="I_programlisting_id320618"/><pre class="programlisting">m|&lt;strong&gt;([^&lt;]*)&lt;/strong&gt;|
m|&lt;strong&gt;(.*?)&lt;/strong&gt;|</pre></div><div class="sect3" title="Replace all &lt;b&gt; tags with &lt;strong&gt;"><div class="titlepage"><div><div><h4 class="title" id="replace_all_b_tags_with_strong">Replace all &lt;b&gt; tags with &lt;strong&gt;</h4></div></div></div><a id="I_programlisting_id320632"/><pre class="programlisting">$html =~ s|&lt;(/)?b&gt;|&lt;$1strong&gt;|g</pre></div><div class="sect3" title="Extract all matches from a regular expression"><div class="titlepage"><div><div><h4 class="title" id="extract_all_matches_from_a_regular_expre">Extract all matches from a regular expression</h4></div></div></div><a id="I_programlisting_id320646"/><pre class="programlisting">my @matches = $text =~ /regex/g;</pre></div></div></div></section></body></html>