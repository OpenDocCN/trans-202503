<html><head></head><body>
<h2 class="h2" id="ch6"><span epub:type="pagebreak" id="page_125"/><span class="big"><strong>6</strong></span></h2>&#13;
<h2 class="h2a">DECIPHERING SECRET MESSAGES</h2>&#13;
<div class="image21"><img src="../images/circle.jpg" alt="Image"/></div>&#13;
<p class="noindent">You’ve probably sent secret, encoded notes to your friends to try to hide the messages from your parents or teachers. In this chapter, we’ll be doing something similar as we create a Secret Messages app.</p>&#13;
<p class="indent">Our previous app, the Hi-Lo guessing game, was all about numbers—too high, too low, or just right. By contrast, our Secret Messages app will focus on text. You’ll learn to work with text strings and manipulate character values in Java to produce the encoded messages.</p>&#13;
<h3 class="h3"><a id="toc_lev100"/>The Caesar Cipher</h3>&#13;
<p class="noindent">Our app will encode and decode secret messages using the <em>Caesar cipher</em>, an algorithm developed more than 2,000 years ago that uses letter substitutions to encode messages.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_126"/><img src="../images/f0126-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig1"/>Figure 6-1: A Caesar cipher disk, showing a key value of 13</em></p>&#13;
<p class="indent">The Caesar cipher is named for the  Roman emperor Julius Caesar (100–44 BCE). Historians say Caesar liked to encode his private messages, such as notes to his military generals, by “shifting” the letters of the alphabet. For example, the cipher disk shown in <a href="ch6.xhtml#ch6fig1">Figure 6-1</a> shifts the alphabet by 13 letters.</p>&#13;
<p class="indent">In the disk, the outer letters align with the inner letters they should be substituted with, so an <em>A</em> becomes an <em>N</em>, a <em>B</em> becomes an <em>O</em>, and so on. This is the cipher that created the following example:</p>&#13;
<p class="pre">Secret messages are so cool!<br/>&#13;
Frperg zrffntrf ner fb pbby!</p>&#13;
<p class="indent">The first line is the <em>plaintext</em>: the original, readable version of the message. The second line is the <em>ciphertext</em>, the encoded version of the same message.</p>&#13;
<p class="indent">Try decoding this message back to its original plaintext by reversing the substitution: find each inner letter and substitute it with the corresponding outer letter.</p>&#13;
<p class="indent">Not all Caesar ciphers are symmetric like this one. <em>Symmetric</em> means that the same process can be used for both encoding and decoding a message. For example, <em>F</em> becomes <em>S</em> when encoding by adding 13, and <em>S</em> becomes <em>F</em> when decoding by subtracting 13, and you can use the same disk and <em>key</em>—the number used to shift the letters—for both processes. The number to shift the letters by (in this case 13) is called a key because knowing it “unlocks” the cipher. The Secret Messages app we’ll build will allow us to use any key value.</p>&#13;
<h3 class="h3"><a id="toc_lev101"/>Setting Up the Secret Messages App</h3>&#13;
<p class="noindent">We’ll build the Secret Messages app just like we did the Hi-Lo guessing game: first, we’ll create a command line version, then a GUI for the desktop, and, finally, an Android mobile app. The command line version will look fairly simple, as shown in <a href="ch6.xhtml#ch6fig2">Figure 6-2</a>, but it will allow us to test the secret message algorithm quickly and easily.</p>&#13;
<div class="imagef"><img src="../images/f0126-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig2"/>Figure 6-2: The command line version of the Secret Messages app</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_127"/>As you can see in <a href="ch6.xhtml#ch6fig2">Figure 6-2</a>, the program asks the user to enter a message to encode or decode, followed by a secret key value. The program then responds with the encoded message. Note that when we start coding the app, the entire message will be encoded, including spaces and punctuation. In the final version, we’ll add some logic to encode only letters, as shown in <a href="ch6.xhtml#ch6fig2">Figure 6-2</a>.</p>&#13;
<h4 class="h4"><em><a id="toc_lev102"/>Creating the Secret Messages Project in Eclipse</em></h4>&#13;
<p class="noindent">Let’s begin by opening Eclipse. If you still have files open from previous projects, close those files now. To create a new Java Project, go to <strong>File</strong> <span class="ent">▸</span> <strong>New</strong> <span class="ent">▸</span> <strong>Java Project</strong> and name the project <em>SecretMessages</em>. Click <strong>Finish</strong>.</p>&#13;
<p class="indent">In the Package Explorer pane, expand the <em>SecretMessages</em> project folder to see the <em>src</em> folder. Right-click the <em>src</em> folder and go to <strong>New</strong> <span class="ent">▸</span> <strong>Class</strong> to create a new Java source code file, which you’ll also name <em>SecretMessages</em>. Select the checkbox to create a <code>main()</code> method, as shown in <a href="ch6.xhtml#ch6fig3">Figure 6-3</a>.</p>&#13;
<div class="imagef"><img src="../images/f0127-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig3"/>Figure 6-3: Create a new Java project, with a new class file called</em> SecretMessages, <em>and select the checkbox to create a main() method stub.</em></p>&#13;
<p class="indent">Click <strong>Finish</strong>, and you’ll see the <em>SecretMessages.java</em> file in the main window in Eclipse. Let’s get started coding the Secret Messages app!</p>&#13;
<h4 class="h4"><span epub:type="pagebreak" id="page_128"/><em><a id="toc_lev103"/>Beginning to Code SecretMessages.java</em></h4>&#13;
<p class="noindent">At the top of the <em>SecretMessages.java</em> file, above the <code>public class SecretMessages</code> declaration, add the <code>import</code> statement for <code>java.util.Scanner</code> so we can ask the user for input:</p>&#13;
<p class="pre">import java.util.Scanner;<br/>&#13;
public class SecretMessages {<br/>&#13;
    public static void main(String[] args) {  <br/>&#13;
      <span class="ent">➊</span> Scanner scan = new Scanner(System.<span class="codeitalic">in</span>);<br/>&#13;
      <span class="ent">➋</span> System.<span class="codeitalic">out</span>.println("Enter a message to encode or decode:");<br/>&#13;
    }<br/>&#13;
}</p>&#13;
<p class="indent">Inside the <code>main()</code> method, at <span class="ent">➊</span>, we set up a <code>Scanner</code> object named <code>scan</code>. Then, at <span class="ent">➋</span>, we prompt the user to enter a message to encode or decode.</p>&#13;
<p class="indent">After the user prompt, we’ll create a <code>String</code> variable, called <code>message</code>, to accept the line of text the user enters:</p>&#13;
<p class="pre">      <span class="ash">System.<span class="codeitalic">out</span>.println("Enter a message to encode or decode:");</span><br/>      String message = scan.nextLine();</p>&#13;
<p class="indent">Then, we get the user’s next full line of input, up to an <small>ENTER</small> or <small>RETURN</small> character, using the <code>nextLine()</code> method of the <code>scan</code> object, and we store it in the string <code>message</code>.</p>&#13;
<p class="indent">So far, the app can ask the user for a message and scan that message into a variable. Now we need to learn how to manipulate the characters inside a string to create an encoded version of the message. Save your file before continuing to the next section.</p>&#13;
<h4 class="h4"><em><a id="toc_lev104"/>Messing with Strings</em></h4>&#13;
<p class="noindent">Up to this point, the Secret Messages app looks pretty similar to the Hi-Lo guessing game app. We set up an input scanner, prompt the user for some input, scan the console for the user’s response, and then capture the input in a variable. What’s going to make the Secret Messages app different is its ability to work with the characters inside the string.</p>&#13;
<p class="indent">The Caesar cipher command line app will take a lot of steps to complete, so we’ll build our app in <em>iterations</em>. That means that instead of writing out the whole app all at once and hoping the code works in the end, we’ll create our app bit by bit, or one iteration at a time, and test it as we go along so that we’ll have a functioning app at each point. Each iteration might not have all the features we need, but we’ll eventually get to the complete, full-featured app.</p>&#13;
<p class="indent">We’ll need to use text processing to manipulate the inputted string into an output string. To begin working with strings of text in Java, we’ll build a simple message reverser. In other words, we’ll take the message the user entered and then give it back to them with the letters in reverse order. So, for example, <code>"Meet me at the arcade at 5pm"</code> would become <code>"mp5 ta edacra eht ta em teeM"</code>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_129"/>First, we create a variable called <code>output</code> for the reversed string and set it equal to an empty string:</p>&#13;
<p class="pre">      <span class="ash">String message = scan.nextLine();</span><br/>&#13;
      String output = "";</p>&#13;
<p class="indent">We’ll need a loop to run through the characters in the message. We can choose a <code>for</code> loop for convenience, because we know the number of characters in the message. (Later, we’ll use the <code>message.length()</code> method to tell us how many characters the message contains.) A <code>for</code> loop declaration in Java needs to do three things: <em>initialize</em> a loop variable, test a <em>condition</em> to keep going, and <em>update</em> the loop variable before the next iteration. We place semicolons between each of the three parts to separate them. The syntax looks like this:</p>&#13;
<p class="pre">for ( <span class="codeitalic">initialization</span>; <span class="codeitalic">condition</span>; <span class="codeitalic">update</span> ) { <span class="codeitalic">body</span> }</p>&#13;
<p class="indent">For example, open JShell and enter this code to create a <code>for</code> loop:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">for ( int x = 0; x &lt; 10; x++ ) { System.out.println(x); }</span></p>&#13;
<p class="indent">This loop will print the numbers <code>0</code> through <code>9</code>. The initialization sets the first looping variable <code>x</code> to <code>0</code>. The condition tests to make sure <code>x</code> is less than <code>10</code> before proceeding. Finally, the update adds 1 to <code>x</code> after each pass through the loop. <code>x++</code> uses a shortcut called the <em>increment operator</em> because it increments, or adds 1 to, <code>x</code> each time through the loop. <code>x++</code> is equivalent to the statement <code>x = x</code> <code>+</code> <code>1</code>. In this example, the <code>for</code> loop prints the value of <code>x</code> each time through the loop, repeating 10 times and stopping when <code>x</code> is no longer less than <code>10</code>.</p>&#13;
<p class="indent">So, to reverse the characters in the message string, we might initialize a variable to the position number, or <em>index</em>, of the last character in the string and then loop through the characters from last to first (in reverse order), going backward through the string. In our example, this would look like:</p>&#13;
<p class="pre">      for ( int x = message.length()-1; x &gt;= 0; x-- ) { }</p>&#13;
<p class="indent">The character positions in a string in Java are numbered from <code>0</code> (the index of the first character) to the length minus 1. The first character is at index <code>0</code>, and the <em>n</em>th character in a string is at index (<em>n</em> − 1).</p>&#13;
<p class="indent">In <a href="ch6.xhtml#ch6fig4">Figure 6-4</a>, the first 10 characters of our sample message are shown. The index of each character in the string is shown below the character. The first letter, <code>M</code>, is at index <code>0</code>, the first <code>e</code> is at index <code>1</code>, and so on. Notice that spaces count as characters—there are two spaces shown here, at indexes <code>4</code> and <code>7</code>. The 10th character in the message is at index <code>9</code>, the letter <code>t</code>. This continues all the way to the last character in the message, at index <code>message.length()-1</code>.</p>&#13;
<div class="imagef"><img src="../images/f0129-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig4"/>Figure 6-4: The characters in a message labeled with their indexes</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_130"/>We want to start our reversed message at the end of the string, so we initialize <code>x</code> to the <code>message.length()-1</code>, the index of the last character in the message. The condition is <code>x &gt;=</code> <code>0</code> because we want to keep going all the way down to the first character of the message, at index <code>0</code>. Finally, the update is <code>x--</code> because we’re stepping backward through the string. The opposite of <code>x++</code>, <code>x--</code> uses the <em>decrement operator</em>, which decreases the value of <code>x</code> by 1 each time. Come back into Eclipse and begin writing the <code>for</code> loop just below the previous line of code:</p>&#13;
<p class="pre">       <span class="ash">String output = "";</span><br/>       for ( int x = message.length()-1; x &gt;= 0; x-- ) {<br/>       }</p>&#13;
<p class="indent">To get the character at a specific position in a string, we use the <code>charAt()</code> (“character at”) method and give it the index location of the character we want. To append or add a character to a string, we use the <code>+</code> operator. Putting those together, we can build the reverse version of the string <code>message</code> and store it in the string <code>output</code>:</p>&#13;
<p class="pre">      <span class="ash">for ( int x = message.length()-1; x &gt;= 0; x-- ) {</span><br/>&#13;
          output += message.charAt(x);<br/>&#13;
      <span class="ash">}</span></p>&#13;
<p class="indent">The body of the <code>for</code> loop is a single line. We’re getting the character at the <code>x</code>th index of <code>message</code> and adding it to <code>output</code>. Remember to use open and close braces around the body of the <code>for</code> loop, because we’ll want to add more lines inside the loop as the app grows.</p>&#13;
<p class="indent">Now we just need to show the output message to the screen, which we can do with <code>System.out.println(output)</code>. The full message-reversing iteration of the app is shown in <a href="ch6.xhtml#ch6list1">Listing 6-1</a>.</p>&#13;
<p class="pre">import java.util.Scanner;<br/>&#13;
public class SecretMessages {<br/>&#13;
    public static void main(String[] args) {<br/>&#13;
        Scanner scan = new Scanner(System.<em>in</em>);<br/>&#13;
        System.<em>out</em>.println("Enter a message to encode or decode:");<br/>&#13;
        String message = scan.nextLine();<br/>&#13;
        String output = "";<br/>&#13;
        for ( int x = message.length()-1; x &gt;= 0; x-- ) {<br/>&#13;
            output += message.charAt(x);<br/>&#13;
        }<br/>&#13;
        System.<em>out</em>.println(output);<br/>&#13;
    }<br/>&#13;
}</p>&#13;
<p class="noindentt"><em><a id="ch6list1"/>Listing 6-1: The first iteration of the Secret Messages app reverses the characters in the user’s message.</em></p>&#13;
<p class="indentt">You can run the program in Eclipse and test it with your own message, as shown in <a href="ch6.xhtml#ch6fig5">Figure 6-5</a>. This isn’t our finished Secret Messages app, but it does make the message harder to read and easy to decode.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_131"/><img src="../images/f0131-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig5"/>Figure 6-5: Run the program and enter your own message to reverse in the console window at the bottom of the screen.</em></p>&#13;
<p class="indent">You can even decode a message by copying the encoded, reversed message and pasting it into the program, as shown in <a href="ch6.xhtml#ch6fig6">Figure 6-6</a>. So you can type a message, encode it, and paste it into a message to a friend, and then they can decode it by pasting the encoded message into the same program. You’ve built your first secret message encoder!</p>&#13;
<div class="imagef"><img src="../images/f0131-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig6"/>Figure 6-6: Copy and paste an encoded message into the running program to decode it.</em></p>&#13;
<p class="indent">This version of the app is simple enough that you can read the messages without running them through the program, so it’s not a very secure way to send messages to your friends. But you did learn how to loop through a string of text using a <code>for</code> loop, how to get the string’s <code>length()</code>, how to access a specific character at a given index or position in the string using <code>charAt()</code>, and how to add characters to the end of a string using the <code>+</code> operator. In the next section, you’ll learn how to change the values of the individual characters in the message to make it harder to read, but still easy for our program to decode.</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_132"/><a id="toc_lev105"/>Characters and Values in Java</h3>&#13;
<p class="noindent">Building a better secret message encoder requires the ability to work with character values in strings of text. For the Caesar cipher, we need to be able to shift those values—for example, changing an <em>A</em> to an <em>N</em>, and an <em>N</em> to an <em>A</em>. To do this, you need to understand how characters are stored in a computer.</p>&#13;
<p class="indent">In Java, individual characters, such as <code>'A'</code>, can be stored in their own data type: <code>char</code>. Notice that we use single quotation marks to contain character values. The <code>charAt()</code> method of a string returns a <code>char</code> value representing a single character. Java uses 16-bit Unicode characters. <em>Unicode</em> is an international character set containing thousands of characters and symbols from all over the world that are represented as numeric values. The <code>char</code> type is a way to store Unicode characters, such as <code>'A'</code>, <code>'ñ'</code>, and <code>'ç'</code>, by their numeric values.</p>&#13;
<p class="indent">We can add to a Unicode <code>char</code> value in the same way we can add to an <code>int</code> variable. With the Secret Messages app, we want to add the <code>char</code> value for <code>'A'</code> (<code>65</code>) to the key (<code>13</code>) to get the new <code>char</code> value (<code>78</code>), which represents the encoded letter (<code>'N'</code>).</p>&#13;
<p class="indent">For our second iteration of the app, let’s begin coding the Caesar cipher by setting up a <code>char</code> variable called <code>key</code> and storing the value <code>13</code> in it. We’ll add this below the <code>String output</code> line:</p>&#13;
<p class="pre">      <span class="ash">String output = "";</span><br/>&#13;
      char key = 13;</p>&#13;
<p class="indent">We also need to modify the <code>for</code> loop to go from the beginning of the string to the end. We’re starting at index <code>0</code> this time and moving through the string while <code>x</code> is less than <code>message.length()</code>. Each time we repeat the loop, we’re adding 1 to <code>x</code>, the character position. Here is the new <code>for</code> loop:</p>&#13;
<p class="pre">      <span class="ash">char key = 13;</span><br/>&#13;
      for ( int x = 0; x &lt; message.length(); x++ ) {</p>&#13;
<p class="indent">Finally, instead of adding the original characters of the <code>message</code> string to the <code>output</code> string, we need to add the key value to each character, making sure we get a <code>char</code> value that we can add to the output string:</p>&#13;
<p class="pre">           output += (char)(message.charAt(x) + key);</p>&#13;
<p class="indent">We’ve added the key value to each character in the <code>message</code> string, and then we’ve taken that sum and cast it to a <code>char</code>. Putting <code>char</code> in parentheses before an expression forces the value to its right to fit into a <code>char</code> data type, or <em>casts</em> the value to that type. We have to cast the output value to <code>(char)</code> here because in Java, the right side of this equation may result in an <code>int</code> value by default. <a href="ch6.xhtml#ch6list2">Listing 6-2</a> shows the program with these changes.</p>&#13;
<p class="pre">import java.util.Scanner;<br/>&#13;
public class SecretMessages {<br/>&#13;
    public static void main(String[] args) {<br/>&#13;
       Scanner scan = new Scanner(System.<span class="codeitalic">in</span>);<br/>&#13;
       System.<span class="codeitalic">out</span>.println("Enter a message to encode or decode:");<br/>&#13;
       String message = scan.nextLine();<br/>&#13;
       String output = "";<br/>&#13;
       char key = 13;<br/>&#13;
       for ( int x = 0; x &lt; message.length(); x++ ) {<br/>&#13;
           output += (char)(message.charAt(x) + key);<br/>&#13;
       }<br/>&#13;
       System.<span class="codeitalic">out</span>.println(output);<br/>&#13;
    }<br/>&#13;
}</p>&#13;
<p class="noindentt"><span epub:type="pagebreak" id="page_133"/><em><a id="ch6list2"/>Listing 6-2: The Secret Messages app is still short at just 14 lines, but it encodes strings of text now!</em></p>&#13;
<p class="indentt">If you run the program at this point and enter a message, you should see output like the following:</p>&#13;
<p class="pre">Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">Secret messages are so cool!</span><br/>&#13;
`rp□r?-zr??ntr?-n□r-?|-p||y.</p>&#13;
<p class="indent">The message is encoded, but it’s not quite what we were expecting. First of all, we’re encoding all characters, including spaces and punctuation marks. Second, we’re not wrapping around to the front of the alphabet yet, because we’re <em>always</em> adding 13 to every character, not taking into account the fact that the letters at the end need to wrap back around to the beginning of the alphabet, resulting in odd symbols and unprintable characters in the output message. We’ll cover both of these issues in the next section. Before moving on, save your program.</p>&#13;
<h3 class="h3"><a id="toc_lev106"/>Encoding Just the Letters</h3>&#13;
<p class="noindent">Our second iteration of the Secret Messages app gave us an encoded message, but it lacks some features that we want in the final app. The upgrades needed to create the final app will require some logic in the form of <code>if</code> statements and conditions to encode only letters (not spaces or punctuation) and to make the alphabet wrap around during encoding. We’ll tackle these improvements in our third iteration.</p>&#13;
<p class="indent">First, we want to perform some tests on each character in the input message instead of just adding the character directly to the output message. Let’s change the body of the <code>for</code> loop as follows:</p>&#13;
<p class="pre">      <span class="ash">for ( int x = 0; x &lt; message.length(); x++ ) {</span><br/>&#13;
          char input = message.charAt(x);<br/>&#13;
      <span class="ash">}</span></p>&#13;
<p class="indent">The character stored in <code>input</code> will be the first character in <code>message</code>, then the second, and so on. We need to test each character one by one to check whether it’s a character that we want to encode. We want to encode letters <span epub:type="pagebreak" id="page_134"/>by adding the key value to them and wrapping to the front of the alphabet if necessary. Otherwise, if the character is a space or punctuation, we’ll leave the character unchanged and add it to the output message.</p>&#13;
<p class="indent">Let’s add the following <code>if</code> statement in the body of our <code>for</code> loop:</p>&#13;
<p class="pre">         <span class="ash">char input = message.charAt(x);</span><br/>         if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')</p>&#13;
<p class="indent">In the condition inside the <code>if</code> statement, we can use either <code>65</code> (the value of <code>'A'</code>) or the character literal <code>'A'</code> itself. The condition tests whether the character stored in <code>input</code> is greater than or equal to <code>'A'</code> and less than or equal to <code>'Z'</code>—in other words, whether <code>input</code> contains an uppercase letter. If this condition is <code>true</code>, we want to add the key value to <code>input</code> to shift it, producing the Caesar cipher value to substitute for that letter. Notice that this is only for uppercase letters—lowercase letters will require a separate test.</p>&#13;
<p class="indent">Now, in the body of the <code>if</code> statement, we’ll add the key value to the <code>input</code> character to encode the letter. This is also where we’ll handle wrapping around to the front of the alphabet if the key value shifts a letter past <code>'Z'</code>. So the code inside the <code>for</code> loop will become:</p>&#13;
<p class="pre">     <span class="ash">for ( int x = 0; x &lt; message.length(); x++ ) {</span><br/>&#13;
         char input = message.charAt(x);<br/>&#13;
         if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')<br/>&#13;
         {<br/>&#13;
          <span class="ent">➊</span> input += key;<br/>&#13;
          <span class="ent">➋</span> if (input &gt; 'Z')<br/>&#13;
              <span class="ent">➌</span> input -= 26;<br/>&#13;
         }<br/>&#13;
      <span class="ent">➍</span> output += input;<br/>&#13;
     }</p>&#13;
<p class="indent">After getting the next character from the message and checking to make sure it’s an uppercase letter, we encode the letter by adding the key to it <span class="ent">➊</span>. Then, we check whether adding the key value pushed the letter past <code>Z</code> <span class="ent">➋</span>. If so, at <span class="ent">➌</span> we subtract <code>26</code> (the number of letters in the English alphabet) from the encoded <code>input</code> value to wrap it back around to the front of the alphabet. Finally, we can add the resulting <code>input</code> character to the <code>output</code> string <span class="ent">➍</span>.</p>&#13;
<p class="indent">If you run the program now, you can encode an all-uppercase message as follows:</p>&#13;
<p class="pre">Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">SECRET MESSAGES ARE SO COOL!</span><br/>&#13;
FRPERG  ZRFFNTRF  NER FB  PBBY!</p>&#13;
<p class="indent">Notice the punctuation and spaces stay the same, and all uppercase letters are shifted by 13 characters, wrapping around so that <code>S</code> becomes <code>F</code>, and so on.</p>&#13;
<p class="indent">Encoding the lowercase letters is logically identical to handling the uppercase letters. You can copy and paste the same <code>if</code> statement code, but <span epub:type="pagebreak" id="page_135"/>change the <code>A</code> and <code>Z</code> to lowercase letters. Don’t forget to add an <code>else</code> before the second <code>if</code> statement. Try it yourself; but if you get stuck, the complete code is provided in <a href="ch6.xhtml#ch6list3">Listing 6-3</a> in the next section.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebar-title"><strong>ENCODING MESSAGES IN OTHER LANGUAGES</strong></p>&#13;
<p class="noindent">The version of the program we’re writing will only work consistently for basic Latin characters from <em>A</em> to <em>Z</em> and <em>a</em> to <em>z</em>. If your preferred language is not English, however, you can adjust the program as long as Unicode has the alphabet or symbols of your language grouped together in a contiguous set, one after the other. You can test for the first and last character of your preferred language just like the English encoder/decoder in this chapter. If your language either isn’t provided in a complete set or uses some of the basic Latin alphabet plus certain other characters (like how Spanish uses the ñ and French uses the ç, along with other accented characters), you could add the key to any character as we did in <a href="ch6.xhtml#ch6list2">Listing 6-2</a>. Optionally, you could leave spaces in the message by testing with the <code>Character.isSpace()</code> method and encode everything except spaces. Play with different methods for the alphabet or language of your choice to find the encoding scheme that works best for you. Change the program and make it do something new—that’s the best way to learn!</p>&#13;
</div>&#13;
<h3 class="h3"><a id="toc_lev107"/>Closing the Scanner</h3>&#13;
<p class="noindent">There’s one touch we can add here that you may recall from <a href="ch2.xhtml#ch2">Chapter 2</a>. The <code>Scanner</code> variable <code>scan</code> should have a yellow underline, indicating a warning in Eclipse telling you there is a resource leak. When you hover your mouse over the warning, it pops up with the message <code>'scan' is never closed</code>. Remember that we need to close all input/output resources, such as <code>Scanner</code> objects, when we’re finished using them. To do so, we’ll add the command <code>scan.close()</code> right after the final <code>System.out.println</code> in the <code>main()</code> method of the program:</p>&#13;
<p class="pre">    <span class="ash">System.<span class="codeitalic">out</span>.println(output);</span><br/>&#13;
       scan.close();</p>&#13;
<p class="indent">Adding this line removes the resource leak warning. See <a href="ch6.xhtml#ch6list3">Listing 6-3</a> for a fully functional Caesar cipher encoder and decoder with a key value of <code>13</code>.</p>&#13;
<p class="pre">import java.util.Scanner;<br/>&#13;
public class SecretMessages {<br/>&#13;
    public static void main(String[] args) {<br/>&#13;
        Scanner scan = new Scanner(System.<em>in</em>);<br/>&#13;
        System.<em>out</em>.println("Enter a message to encode or decode:");<br/>&#13;
        String message = scan.nextLine();<br/>&#13;
        String output = "";<br/>&#13;
        char key = 13;<br/>&#13;
        for ( int x = 0; x &lt; message.length(); x++ ) {<br/>&#13;
            char input = message.charAt(x);<br/>&#13;
            if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'Z')<br/>&#13;
                    input -= 26;<br/>&#13;
        }<br/>&#13;
        else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')<br/>&#13;
        {<br/>&#13;
            input += key;<br/>&#13;
            if (input &gt; 'z')<br/>&#13;
              input -= 26;<br/>&#13;
         }<br/>&#13;
          output += input;<br/>&#13;
    }<br/>&#13;
    System.<em>out</em>.println(output);<br/>&#13;
    scan.close();<br/>&#13;
   }<br/>&#13;
 }</p>&#13;
<p class="noindentt"><em><a id="ch6list3"/>Listing 6-3: This version of the app is a fully functional Caesar cipher encoder and decoder with a key value of 13</em>.</p>&#13;
<p class="indentt"><span epub:type="pagebreak" id="page_136"/>Try it out by first running the program and encoding a message. Then copy the encoded output and run the program again; when prompted, paste the encoded message and press <small>ENTER</small>. The program will respond with the original, decoded message. Here are two sample runs of the program in which I’ve copied the encoded output from the first message to use as the input for the second run:</p>&#13;
<p class="pre">Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">Secret messages are so cool!</span><br/>&#13;
Frperg zrffntrf ner fb pbby!<br/>&#13;
Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">Frperg zrffntrf ner fb pbby!</span><br/>&#13;
Secret messages are so cool!</p>&#13;
<p class="indent">Because the Caesar cipher is symmetric, running the program on an encoded message decodes the message back to its original plaintext. This means you can run this program as it’s written in <a href="ch6.xhtml#ch6list3">Listing 6-3</a> to encode a message, send the encoded version to a friend who also has the encoder program, and have them decode your message instantly.</p>&#13;
<p class="indent">Unfortunately, this means <em>anyone</em> running the program (or anyone who figures out the cipher) can decode your messages just as quickly as you can. For our next iteration, let’s make the code a little more interesting by allowing the user to set their own key value. Then, you can pick a different key to send messages to different people, or you can use a new key every time.</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_137"/><a id="toc_lev108"/>Adding a Custom Key Value</h3>&#13;
<p class="noindent">The secret message encoder works well with a key value of <code>13</code>, but what if we want to encode and decode messages using a different key value, such as <code>3</code> (the classical Caesar cipher shift) or <code>5</code> or <code>25</code>?</p>&#13;
<p class="indent">We’ll need to prompt the user for a key value in addition to the message. We can do that by adding a prompt before the line that creates the <code>char</code> key variable:</p>&#13;
<p class="pre">       <span class="ash">String output = "";</span><br/>&#13;
       System.<span class="codeitalic">out</span>.println("Enter a secret key (-25 to 25):");<br/>&#13;
       <span class="ash">char key = 13;</span></p>&#13;
<p class="indent">We’re allowing negative key values as a convenience for decoding messages. If you use a key value of <code>5</code> to encode your message and send it to a friend, your friend can use a key value of <code>-5</code> to decode the message.</p>&#13;
<p class="indent">When the user responds with their desired secret key value, we can scan the line of input they provide, parse the integer value out of the line of input, and store the value in an <code>int</code> variable:</p>&#13;
<p class="pre">       <span class="ash">String output = "";</span><br/>&#13;
       <span class="ash">System.<span class="codeitalic">out</span>.println("Enter a secret key (-25 to 25):");</span><br/>&#13;
       int keyVal = Integer.<span class="codeitalic">parseInt</span>(scan.nextLine());</p>&#13;
<p class="indent">Finally, instead of using <code>13</code> as the <code>key</code> variable, we’ll change the variable key to the following:</p>&#13;
<p class="pre">       <span class="ash">int keyVal = Integer.<span class="codeitalic">parseInt</span>(scan.nextLine());</span><br/>&#13;
       char key = (char) keyVal;<br/>&#13;
       <span class="ash">for ( int x = 0; x &lt; message.length(); x++ ) {</span></p>&#13;
<p class="indent">Here, we’re casting the <code>keyVal</code> entered to a <code>char</code> and storing that value in the variable <code>key</code>, since we can’t store an integer directly into a <code>char</code>.</p>&#13;
<p class="indent">To handle negative key values for the decoding process, we’ll need to make a change to the logic inside the <code>if</code> statements. We have to check whether <em>subtracting</em> a value (or adding a negative key) would shift the letter past the beginning of the alphabet (or less than <code>'A'</code>). If that happens, we can shift the letter back into the range from <code>A</code> to <code>Z</code> by <em>adding</em> <code>26</code>. Add the following code to the <code>if</code> statement for uppercase letters:</p>&#13;
<p class="pre">        <span class="ash">if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')</span><br/>&#13;
        <span class="ash">{</span><br/>&#13;
           <span class="ash">input += key;</span><br/>&#13;
           <span class="ash">if (input &gt; 'Z')</span><br/>&#13;
               <span class="ash">input -= 26;</span><br/>&#13;
           if (input &lt; 'A')<br/>&#13;
               input += 26;<br/>&#13;
       <span class="ash">}</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_138"/>If we input a negative <code>key</code>, we check whether we shifted before <code>A</code> and add <code>26</code> to wrap back around to the end of the alphabet.</p>&#13;
<p class="indent">Remember to do the same for the lowercase logic inside the <code>else-if</code> statement that follows:</p>&#13;
<p class="pre">        <span class="ash">else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')</span><br/>&#13;
        <span class="ash">{</span><br/>&#13;
            <span class="ash">input += key;</span><br/>&#13;
             <span class="ash">if (input &gt; 'z')</span><br/>&#13;
                 <span class="ash">input -= 26;</span><br/>&#13;
             if (input &lt; 'a')<br/>&#13;
                 input += 26;<br/>&#13;
        <span class="ash">}</span></p>&#13;
<p class="indent">After these changes, you’ll be able to run the program to encode and decode messages with your own, custom key. Your program should work like the following example:</p>&#13;
<p class="pre">Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">You've written a really cool app in Java!</span><br/>&#13;
Enter a secret key (-25 to 25):<br/>&#13;
<span class="codestrong">7</span><br/>&#13;
Fvb'cl dypaalu h ylhssf jvvs hww pu Qhch!<br/>&#13;
Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">Fvb'cl dypaalu h ylhssf jvvs hww pu Qhch!</span><br/>&#13;
Enter a secret key (-25 to 25):<br/>&#13;
<span class="codestrong">-7</span><br/>&#13;
You've written a really cool app in Java!</p>&#13;
<p class="indent">The first time we ran the program, we used a key of <code>7</code>. So, to decode the secret message, we ran the program again with the key value <code>-7</code>, revealing the original plaintext message.</p>&#13;
<p class="indent">Go ahead and try it out!</p>&#13;
<h3 class="h3"><a id="toc_lev109"/>Encoding Digits</h3>&#13;
<p class="noindent">Now we have encoded letters, but if we encode a message like the following, any digits remain unencoded, in their original plaintext:</p>&#13;
<p class="pre">Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">Meet me at the arcade at 5pm.</span><br/>&#13;
Enter a secret key (-25 to 25):<br/>&#13;
<span class="codestrong">8</span><br/>&#13;
Ummb um ib bpm izkilm ib 5xu.</p>&#13;
<p class="indent">Notice the <code>5</code> in <code>5pm</code> remains a <code>5</code> in the output message. If we want to encode numbers as well as letters, we need to add one more section of logic to the <code>for</code> loop. We’ll need to check whether a character falls between <code>0</code> <span epub:type="pagebreak" id="page_139"/>and <code>9</code> and then encode that character as a different digit. We’ll also have to remember to wrap back around to the front or back of the set of 10 digits. We’ll have to handle this differently from wrapping around in the set of 26 letters since we’re dealing with numbers now.</p>&#13;
<p class="indent">First, let’s add another <code>else-if</code> statement right after the <code>else-if</code> that handles lowercase letters:</p>&#13;
<p class="pre">        <span class="ash">else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')</span><br/>&#13;
        <span class="ash">{</span> <br/>&#13;
          <span class="ash">  input += key;</span><br/>&#13;
          <span class="ash">  if (input &gt; 'z')</span><br/>&#13;
            <span class="ash">    input -= 26;</span><br/>&#13;
          <span class="ash">  if (input &lt; 'a')</span><br/>&#13;
            <span class="ash">    input += 26;</span><br/>&#13;
          <span class="ash">}</span><br/>&#13;
          else if (input &gt;= '0' &amp;&amp; input &lt;= '9')<br/>&#13;
          <span class="ash">output += input;</span></p>&#13;
<p class="indent">This part looks similar to the previous two <code>if</code> conditions, except that we’re using the digits <code>'0'</code> through <code>'9'</code>, instead of the letters <code>'A'</code> to <code>'Z'</code>, as the range.</p>&#13;
<p class="indent">The next line, inside the brace for the <code>if</code> statement, looks a bit different:</p>&#13;
<p class="pre">        <span class="ash">else if (input &gt;= '0' &amp;&amp; input &lt;= '9')</span><br/>&#13;
        {<br/>&#13;
            input += (keyVal % 10);</p>&#13;
<p class="indent">First, we’re using the <em>integer</em> version of the secret key, <code>keyVal</code>, which the user entered earlier in the program. Second, we’ve used the modulo operator (<code>%</code>) to keep the shift value for digits between <code>-10</code> and <code>+10</code>.</p>&#13;
<p class="indent">We also need to test whether adding the <code>keyVal</code> pushed a digit past <code>9</code> or before <code>0</code>, just as we checked whether encoding a letter pushed it past <code>Z</code> or before <code>A</code>. But, instead of subtracting <code>26</code> to wrap back around to the beginning of the alphabet, we need to subtract <code>10</code> to keep a digit between <code>0</code> and <code>9</code>:</p>&#13;
<p class="pre"><span class="ash">else if (input &gt;= '0' &amp;&amp; input &lt;= '9')</span><br/>&#13;
            <span class="ash">{</span><br/>&#13;
                <span class="ash">input += (keyVal % 10);</span><br/>&#13;
                if (input &gt; '9')<br/>&#13;
                    input -= 10;<br/>&#13;
                if (input &lt; '0')<br/>&#13;
                    input += 10;<br/>&#13;
            }<br/>&#13;
            <span class="ash">output += input;</span></p>&#13;
<p class="indent">If encoding a digit pushes it past <code>9</code>, we subtract <code>10</code>. And, if decoding moves a digit below <code>0</code>, we add <code>10</code>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_140"/>Now we can encode both numbers and letters in the messages we send:</p>&#13;
<p class="pre">Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">Meet me at the arcade at 5pm and bring $2 to play Pac-Man :)</span><br/>&#13;
Enter a secret key (-25 to 25):<br/>&#13;
<span class="codestrong">7</span><br/>&#13;
Tlla tl ha aol hyjhkl ha 2wt huk iypun $9 av wshf Whj-Thu :)</p>&#13;
<p class="indent">The <code>5</code> in <code>5pm</code> is correctly shifted by seven and wraps back around to <code>2wt</code> in the encoded message. The <code>2</code> in <code>$2</code> is shifted by seven to <code>$9</code>. You can test the preceding secret message by decoding it with a key of <code>-7</code>, and you should get the original plaintext message back, including the numbers.</p>&#13;
<p class="indent">The full, final text-based version of the Secret Messages app is given in <a href="ch6.xhtml#ch6list4">Listing 6-4</a>.</p>&#13;
<p class="pre">import java.util.Scanner;<br/>&#13;
public class SecretMessages {<br/>&#13;
    public static void main(String[] args) {<br/>&#13;
        Scanner scan = new Scanner(System.<span class="codeitalic">in</span>);<br/>&#13;
        System.<span class="codeitalic">out</span>.println("Enter a message to encode or decode:");<br/>&#13;
        String message = scan.nextLine();<br/>&#13;
        String output = "";<br/>&#13;
        System.<span class="codeitalic">out</span>.println("Enter a secret key (-25 to 25):");<br/>&#13;
        int keyVal = Integer.<span class="codeitalic">parseInt</span>(scan.nextLine());<br/>&#13;
        char key = (char) keyVal;<br/>&#13;
        for ( int x = 0; x &lt; message.length(); x++ ) {<br/>&#13;
            char input = message.charAt(x);<br/>&#13;
            if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'Z')<br/>&#13;
                    input -= 26;<br/>&#13;
                if (input &lt; 'A')<br/>&#13;
                    input += 26;<br/>&#13;
            }<br/>&#13;
            else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'z')<br/>&#13;
                    input -= 26;<br/>&#13;
                if (input &lt; 'a')<br/>&#13;
                    input += 26;<br/>&#13;
            }<br/>&#13;
            else if (input &gt;= '0' &amp;&amp; input &lt;= '9')<br/>&#13;
            {<br/>&#13;
                input += (keyVal % 10);<br/>&#13;
                if (input &gt; '9')<br/>&#13;
                    input -= 10;<br/>&#13;
                if (input &lt; '0')<br/>&#13;
                    input += 10;<br/>&#13;
            }<br/>&#13;
            output += input;<br/>&#13;
      }<br/>&#13;
        System.<em>out</em>.println(output);<br/>&#13;
        scan.close();<br/>&#13;
    }<br/>&#13;
}</p>&#13;
<p class="noindentt"><em><a id="ch6list4"/>Listing 6-4: The finished command line version of the Secret Messages app</em></p>&#13;
<p class="indentt"><span epub:type="pagebreak" id="page_141"/>This Secret Messages app can be a fun way to share scrambled messages back and forth with friends. But some of your friends may not have Eclipse or the Java JDK installed on their computer. Wouldn’t it be nice to be able to share the Secret Messages app with them too? In the next section, we’ll see how to run a command line Java app without opening Eclipse.</p>&#13;
<h3 class="h3"><a id="toc_lev110"/>Running Command Line Apps Without Eclipse</h3>&#13;
<p class="noindent">We’ve built two command line apps so far, but we’ve always run them from inside Eclipse. Eclipse provides a convenient console emulator to let us see how a command line app would look and feel, but what if we wanted to run the app from an actual command line, such as the Command Prompt in Windows or the Terminal on macOS? Or what if we wanted to send one of our command line apps to a friend who doesn’t have Eclipse installed on their computer?</p>&#13;
<p class="indent">Fortunately, most people have at least the JRE, or Java Runtime Environment, installed on their computers.</p>&#13;
<h4 class="h4"><em><a id="toc_lev111"/>Finding Your Workspace Folders</em></h4>&#13;
<p class="noindent">To run the app you’ve written and compiled in Eclipse, first start by finding your Eclipse <em>workspace</em> folder. Open it in File Explorer (or Finder), as shown in <a href="ch6.xhtml#ch6fig7">Figure 6-7</a>.</p>&#13;
<div class="imagef"><img src="../images/f0141-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig7"/>Figure 6-7: My</em> workspace <em>folder has folders inside it for each of the projects we’ve built so far, plus some Eclipse default folders.</em></p>&#13;
<p class="indent">Open the <em>SecretMessages</em> project folder inside your workspace, and you’ll see a few files and folders inside it, as shown in <a href="ch6.xhtml#ch6fig8">Figure 6-8</a>. The <em>src</em> folder has your source code files (ending in <em>.java</em>), and the <em>bin</em> folder has the compiled version of your app (ending in <em>.class</em>).</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_142"/><img src="../images/f0142-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig8"/>Figure 6-8: Find the</em> bin <em>folder inside the</em> SecretMessages <em>project folder.</em></p>&#13;
<h4 class="h4"><em><a id="toc_lev112"/>Opening a Command Line Window</em></h4>&#13;
<p class="noindent">Next, open a command line window. On Windows, you can do this by pressing the <strong>Start</strong> button, going to the search bar, and typing <span class="codestrong"><code>cmd</code></span> (short for <em>command</em>) and pressing <small>ENTER</small>. On macOS, use the Spotlight search bar to find Terminal, or from a new Finder window, go to <strong>Applications</strong> <span class="ent">▸</span> <strong>Utilities</strong> <span class="ent">▸</span> <strong>Terminal</strong>. On Linux, open the Terminal application or use Search to find Terminal.</p>&#13;
<p class="indent">We need to browse into the <em>bin</em> folder described earlier from the command line or Terminal prompt. Type <span class="codestrong"><code>cd</code></span> (“change directory”) followed by a space in your terminal window. Then, to change directories into the <em>bin</em> folder for your app, drag the <em>bin</em> folder from your File Explorer or Finder window and drop it into the Command Prompt or Terminal window, as shown in <a href="ch6.xhtml#ch6fig9">Figure 6-9</a>.</p>&#13;
<div class="imagef"><img src="../images/f0142-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig9"/>Figure 6-9: You can drag and drop the</em> bin <em>folder from File Explorer or Finder into the command line window to easily copy the directory path.</em></p>&#13;
<p class="indent">Notice that the full path appears after the <code>cd</code> command and looks something like the following (your <em>workspace/SecretMessages/bin</em> folder will be in a slightly different location from mine, of course):</p>&#13;
<p class="pre"><span class="codestrong">cd "C:\Users\Bryson Payne\workspace_ch06\SecretMessages\bin"</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_143"/>On macOS, the command will be:</p>&#13;
<p class="pre">cd /Users/BrysonPayne/Desktop/workspace_ch06/SecretMessages/bin</p>&#13;
<p class="indent">Press <small>ENTER</small> after this command, and the terminal will change the prompt to show you that you’re now inside the <em>bin</em> folder. On Windows, this looks like:</p>&#13;
<p class="pre">C:\Users\Bryson Payne\workspace_ch06\SecretMessages\bin&gt;<span class="codestrong">_</span></p>&#13;
<p class="indent">Now we’re inside the <em>bin</em> folder, where the file <em>SecretMessages.class</em> has been compiled. To run the program contained in the <em>SecretMessages.class</em> bytecode file, enter the following command:</p>&#13;
<p class="pre">C:\Users\Bryson Payne\workspace_ch06\SecretMessages\bin&gt;<span class="codestrong">java SecretMessages</span></p>&#13;
<p class="indent">Spelling, capitalization, and spacing all matter in the command, so you’ll need to match the name you gave your Java class precisely. If you typed the command correctly, the app should run, and you can test it with a message and secret key like so:</p>&#13;
<p class="pre">C:\Users\Bryson Payne\workspace_ch06\SecretMessages\bin&gt;<span class="codestrong">java SecretMessages</span><br/>&#13;
Enter a message to encode or decode:<br/>&#13;
<span class="codestrong">I'm running my app directly from the command line terminal!</span><br/>&#13;
Enter a secret key (-25 to 25):<br/>&#13;
<span class="codestrong">12</span><br/>&#13;
U'y dgzzuzs yk mbb pudqofxk rday ftq oayymzp xuzq fqdyuzmx!</p>&#13;
<p class="indent">You can run the app again by retyping the line <span class="codestrong"><code>java SecretMessages</code></span> or by pressing the up arrow key on your keyboard and pressing <small>ENTER</small>. <a href="ch6.xhtml#ch6fig10">Figure 6-10</a> shows a couple of runs encoding and decoding a message from a Windows command prompt.</p>&#13;
<div class="imagef"><img src="../images/f0143-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch6fig10"/>Figure 6-10: Now that you can run your Java app from the command line, you can encode and decode messages on any computer with Java installed, with or without Eclipse.</em></p>&#13;
<p class="indent">Now that you know how to run the app on your computer, you can share the <em>SecretMessages.class</em> file with your friends to exchange encoded <span epub:type="pagebreak" id="page_144"/>messages. If their computer has Java (JDK or JRE) installed, all they’ll have to do is open their command line program, change directories into the folder containing the <em>SecretMessages.class</em> file, and run the same <span class="codestrong"><code>java SecretMessages</code></span> command. To exchange messages, just agree on a key value to use. You can choose to use the same key every time or use different key values with different friends! Remember, though, this message app is just for fun—anyone with this program, or with a little time on their hands, can break a simple Caesar cipher. We’ll see how to break Caesar ciphers easily in <a href="ch7.xhtml#ch7">Chapter 7</a>.</p>&#13;
<h3 class="h3"><a id="toc_lev113"/>What You Learned</h3>&#13;
<p class="noindent">The Secret Messages app provided a fun way to delve into the world of manipulating characters and strings of text in Java. Among the new things you learned in this chapter were:</p>&#13;
<p class="bull">• Using the Caesar cipher to encode and decode simple messages</p>&#13;
<p class="bull">• Understanding the <code>char</code> data type for storing single Unicode characters</p>&#13;
<p class="bull">• Getting a specific character in a string with the <code>charAt()</code> method</p>&#13;
<p class="bull">• Accessing a specific location in a string using the index, or position number, of a character in the string</p>&#13;
<p class="bull">• Adding strings and characters together using the <code>+</code> operator</p>&#13;
<p class="bull">• Looping through a string with a <code>for</code> loop, using its <code>length()</code> function to get the number of characters</p>&#13;
<p class="bull">• Understanding how the computer stores characters and other data represented by number values</p>&#13;
<p class="bull">• Running command line apps directly from the command line, without Eclipse</p>&#13;
<h3 class="h3"><a id="toc_lev114"/>Programming Challenges</h3>&#13;
<p class="noindent">Try these programming challenge exercises to review and practice what you’ve learned, as well as to expand your programming skills by trying something new. Visit the book’s website at <em><a href="https://www.nostarch.com/learnjava/">https://www.nostarch.com/learnjava/</a></em> to download sample solutions.</p>&#13;
<h4 class="h4"><em><a id="toc_lev115"/>#1: Looping the Loop</em></h4>&#13;
<p class="noindent">We’ve built a fun message encoder/decoder app that will let us send and receive secret texts, emails, tweets, and so on. For your first programming challenge, add a loop to the Secret Messages app that will allow you to keep encoding and decoding messages as many times as you like.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_145"/>You can choose to use the same key every time, or you can ask the user for a new key each time. If you ask the user to enter a secret key each time through the loop, you can enable them to encode and decode messages, one after the other (entering <code>8</code>, for example, to encode a message to a friend, and <code>-8</code> to decode a message from that same friend).</p>&#13;
<p class="indent">One way to do this is to prompt the user to enter a new message to encode or decode or tell them to press <small>ENTER</small> to quit. Then, use an <code>if</code> statement to check whether the user entered a message or just pressed <small>ENTER</small>.</p>&#13;
<p class="indent">Give it a shot!</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>HINT</strong></span></p>&#13;
<p class="notep"><em>message.length() will be greater than zero if the user typed something.</em></p>&#13;
</div>&#13;
<h4 class="h4"><em><a id="toc_lev116"/>#2: Reversing and Encoding</em></h4>&#13;
<p class="noindent">Let’s make our messages even harder to decipher by reversing the message before we encode it with the Caesar cipher. This double-encoding version of the app will combine the message-reversing approach of the first version in <a href="ch6.xhtml#ch6list1">Listing 6-1</a> on <a href="ch6.xhtml#page_130">page 130</a> with the Caesar cipher features of the final version from <a href="ch6.xhtml#ch6list4">Listing 6-4</a> on <a href="ch6.xhtml#page_140">page 140</a>.</p>&#13;
<p class="indent">Reversing the order of the message is another example of symmetric encryption—doing it once reverses the message, and doing it again restores the message. Combining the string reversal with the Caesar cipher shift doesn’t make the program much more difficult, but it can make your messages even more confusing to an eavesdropper.</p>&#13;
<p class="indent">Make sure your app correctly encodes and decodes messages, and remember that your friends will need the new version of the program to be able to decipher your new, doubly scrambled messages! Enjoy!</p>&#13;
<h4 class="h4"><em><a id="toc_lev117"/>#3: Safely Handling Keys with try and catch</em></h4>&#13;
<p class="noindent">A final improvement you could make to the Secret Messages app would be to safely handle bad numeric input when the user enters a key value. Remember the <code>try-catch</code> statement?</p>&#13;
<p class="indent">Adding the <code>try-catch</code> blocks to this app can be a bit tricky. In addition to adding the exception-handling code to prevent the user from crashing the program by giving a bad number (for example, by entering text instead of a number when prompted for the key value), you’ll need to think about what the app should do when bad input is provided. Should it tell the user their key was invalid and use a predefined key instead (say, <code>13</code>)? Or should it create a loop that will keep asking the user for a valid key?</p>&#13;
<p class="indent">Try coding it both ways and pick the one you like best!<span epub:type="pagebreak" id="page_146"/></p>&#13;
</body></html>