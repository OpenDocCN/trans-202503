<html><head></head><body><div id="sbo-rt-content"><section>&#13;
<header>&#13;
<h1 class="chapter">&#13;
<span class="ChapterNumber"><span epub:type="pagebreak" title="1" id="Page_1"/>1</span><br/>&#13;
<span class="ChapterTitle">Setting Up Your Coding Environment</span></h1>&#13;
</header>&#13;
<figure class="opener">&#13;
<img src="Images/chapterart.png" alt="" width="200" height="200"/>&#13;
</figure>&#13;
<p class="ChapterIntro">Let’s begin by installing the resources you’ll need to complete the exercises in the book. In this chapter, you’ll install a text editor, download the example code and data, and then install the PostgreSQL database system and its companion graphical user interface, pgAdmin. I’ll also tell you how to get help if you need it. When you’re finished, your computer will have a robust environment for you to learn how to analyze data with SQL.</p>&#13;
<p>Avoid the temptation to skip ahead to the next chapter. My high school teacher (clearly a fan of alliteration) used to tell us that “proper planning prevents poor performance.” If you follow all the steps in this chapter, you’ll avoid headaches later.</p>&#13;
<p>Our first task is to set up a text editor suitable for working with data.</p>&#13;
<h2 id="h1-501065c01-0001"><span epub:type="pagebreak" title="2" id="Page_2"/>Installing a Text Editor</h2>&#13;
<p class="BodyFirst">The source data you’ll add to a SQL database is typically stored in multiple <em>text files</em>, often in a format called <em>comma-separated values (CSV)</em>. You’ll learn more about the CSV format in <span class="xref" itemid="xref_target_Chapter 5">Chapter 5</span>, in the section “Working with Delimited Text Files,” but for now let’s make sure you have a text editor that will let you open those files without inadvertently harming the data.</p>&#13;
<p>Common business applications—word processors and spreadsheet programs—tend to introduce styles or hidden characters into files without asking, and that makes using them for data work problematic, as data software expects data in precise formats. For example, if you open a CSV file with Microsoft Excel, the program will automatically alter some data to make it more human-readable; it will assume, for example, that an item code of <code>3-09</code> is a date and format it as <code>9-Mar</code>. Text editors deal exclusively with plain text with no embellishments such as formatting, and for that reason programmers use them to edit files that hold source code, data, and software configurations—all cases where you want your text to be treated as text, and nothing more.</p>&#13;
<p>Any text editor should work for the book’s purposes, so if you have a favorite, feel free to use it. Here are some I have used and recommend. Except where noted, they are free and available for macOS, Windows, and Linux.</p>&#13;
<ul>&#13;
<li>Visual Studio Code by Microsoft: <a href="https://code.visualstudio.com/" class="LinkURL">https://code.visualstudio.com/</a></li>&#13;
<li>Atom by GitHub: <a href="https://atom.io/" class="LinkURL">https://atom.io/</a></li>&#13;
<li>Sublime Text by Sublime HQ (free to evaluate but requires purchase for continued use): <a href="https://www.sublimetext.com/" class="LinkURL">https://www.sublimetext.com/</a></li>&#13;
<li>Notepad++ by author Don Ho (Windows only): <a href="https://notepad-plus-plus.org/" class="LinkURL">https://notepad-plus-plus.org/</a> (note that this is a different application than <em>Notepad.exe</em>, which comes with Windows)</li>&#13;
</ul>&#13;
<p>More advanced users who prefer to work in the command line may want to use one of these two text editors, which are installed by default in macOS and Linux:</p>&#13;
<ul>&#13;
<li><code>vim</code> by author Bram Moolenaar and the open source community: <a href="https://www.vim.org/" class="LinkURL">https://www.vim.org/</a></li>&#13;
<li>GNU <code>nano</code> by author Chris Allegretta and the open source community: <a href="https://www.nano-editor.org/" class="LinkURL">https://www.nano-editor.org/</a></li>&#13;
</ul>&#13;
<p>If you don’t have a text editor, download and install one and get familiar with the basics of opening folders and working with files.</p>&#13;
<p>Next, let’s get the book’s example code and data.</p>&#13;
<h2 id="h1-501065c01-0002"><span epub:type="pagebreak" title="3" id="Page_3"/>Downloading Code and Data from GitHub</h2>&#13;
<p class="BodyFirst">All of the code and data you’ll need for working through the book’s exercises are available for download. To get it, follow these steps:</p>&#13;
<ol class="decimal">&#13;
<li value="1">Visit the book’s page on the No Starch Press website at <a href="https://nostarch.com/practical-sql-2nd-edition/" class="LinkURL">https://nostarch.com/practical-sql-2nd-edition/</a>.</li>&#13;
<li value="2">On the page, click <b>Download the code from GitHub</b> to visit the repository on <a href="https://github.com/" class="LinkURL">https://github.com/</a> that holds the material.</li>&#13;
<li value="3">On the Practical SQL 2nd Edition page at GitHub, you should see a <b>Code</b> button. Click it, and then select <b>Download ZIP</b> to save the ZIP file to your computer. Place it in a location where you can easily find it, such as your desktop. (If you’re a GitHub user, you can also clone or fork the repository.)</li>&#13;
<li value="4">Unzip the file. You should then see a folder named <em>practical-sql-2-master</em> that contains the various files and subfolders for the book. Again, place this folder where you can easily find it.</li>&#13;
</ol>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/></div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	Windows users will need to provide permission for the PostgreSQL database you will install to read and write to the contents of the <em>practical-sql-2-master</em> folder. To do so, right-click the folder, click <b>Properties</b>, and click the <b>Security</b> tab. Click <b>Edit</b> and then <b>Add</b>. Type the name <b>Everyone</b> into the object names box and click <b>OK</b>. Highlight Everyone in the user list, select all boxes under Allow, and then click <b>Apply</b> and <b>OK</b>.</p>&#13;
<div class="bottom hr"><hr/></div>&#13;
</section>&#13;
</aside>&#13;
<p>Inside the <em>practical-sql-2-master</em> folder, for each chapter you’ll find a subfolder named <em>Chapter_XX</em> (<em>XX</em> is the chapter number). Inside subfolders, each chapter that includes code examples will also have a file named <em>Chapter_XX</em> that ends with a <em>.sql</em> extension. This is a SQL code file that you can open with your text editor or with the PostgreSQL administrative tool you’ll install later in this chapter. Note that in the book several code examples are truncated to save space, but you’ll need the full listing from the <em>.sql</em> file to complete the exercise. You’ll know an example is truncated when you see <var>--snip--</var> in the listing.</p>&#13;
<p>The chapter folders also contain the public data you’ll use in the exercises, stored in CSV and other text-based files. As noted, it’s fine to view CSV files with a true text editor, but don’t open these files with Excel or a word processor.</p>&#13;
<p>Now, with the prerequisites complete, let’s load the database software.</p>&#13;
<h2 id="h1-501065c01-0003">Installing PostgreSQL and pgAdmin</h2>&#13;
<p class="BodyFirst">In this section, you’ll install both the PostgreSQL database system and a companion graphical administrative tool, pgAdmin. Think of pgAdmin as a helpful visual workspace for managing your PostgreSQL database. Its interface lets you see your database objects, manage settings, import and <span epub:type="pagebreak" title="4" id="Page_4"/>export data, and write queries, which is the code that retrieves data from your database.</p>&#13;
<p>One benefit of using PostgreSQL is that the open source community has provided excellent guidelines that make it easy to get PostgreSQL up and running. The following sections outline installation for Windows, macOS, and Linux as of this writing, but the steps might change as new versions of the software or operating systems are released. Check the documentation noted in each section as well as the GitHub repository with the book’s resources; I’ll maintain files there with updates and answers to frequently asked questions.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/></div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	I recommend you install the latest available version of PostgreSQL for your operating system to ensure that it’s up-to-date on security patches and new features. For this book, I’ll assume you’re using version 11.0 or later.</p>&#13;
<div class="bottom hr"><hr/></div>&#13;
</section>&#13;
</aside>&#13;
<h3 id="h2-501065c01-0001">Windows Installation</h3>&#13;
<p class="BodyFirst">For Windows, I recommend using the installer provided by the company EDB (formerly EnterpriseDB), which offers support and services for PostgreSQL users. When you download the PostgreSQL package bundle from EDB, you also get pgAdmin and Stack Builder, which includes a few other tools you’ll use in this book and throughout your SQL career.</p>&#13;
<p>To get the software, visit <a href="https://www.postgresql.org/download/windows/" class="LinkURL">https://www.postgresql.org/download/windows/</a> and click <b>Download the installer</b> in the EDB section. This should lead to a downloads page on the EDB site. Select the latest available 64-bit Windows version of PostgreSQL unless you’re using an older PC with 32-bit Windows.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/></div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	The following section covers installation for Windows 10. If you’re using Windows 11, please check the GitHub repository with the book’s resources for notes about any adjustments to these instructions.</p>&#13;
<div class="bottom hr"><hr/></div>&#13;
</section>&#13;
</aside>&#13;
<p>After you download the installer, follow these steps to install PostgreSQL, pgAdmin, and additional components:</p>&#13;
<ol class="decimal">&#13;
<li value="1">Right-click the installer and select <b>Run as administrator</b>. Answer <b>Yes</b> to the question about allowing the program to make changes to your computer. The program will perform a setup task and then present an initial welcome screen. Click through it.</li>&#13;
<li value="2">Choose your installation directory, accepting the default.</li>&#13;
<li value="3">On the Select Components screen, select the boxes to install PostgreSQL Server, the pgAdmin tool, Stack Builder, and the command line tools.</li>&#13;
<li value="4">Choose the location to store data. You can choose the default, which is in a <em>data</em> subdirectory in the PostgreSQL directory.</li>&#13;
<li value="5">Choose a password. PostgreSQL is robust with security and permissions. This password is for the default initial database superuser account, which is called <code>postgres</code>.</li>&#13;
<li value="6"><span epub:type="pagebreak" title="5" id="Page_5"/>Select the default port number where the server will listen. Unless you have another database or application using it, use the default, which should be <code>5432</code>. You can substitute <code>5433</code> or another number if you already have an application using the default port.</li>&#13;
<li value="7">Select your locale. Using the default is fine. Then click through the summary screen to begin the installation, which will take several minutes.</li>&#13;
<li value="8">When the installation is done, you’ll be asked whether you want to launch EnterpriseDB’s Stack Builder to obtain additional packages. Make sure the box is checked and click <b>Finish</b>.</li>&#13;
<li value="9">When Stack Builder launches, choose the PostgreSQL installation on the drop-down menu and click <b>Next</b>. A list of additional applications should download.</li>&#13;
<li value="10">Expand the Spatial Extensions menu and select the PostGIS Bundle for the version of PostgreSQL you installed. You may see more than one listed; if so, choose the newest version. Also, expand the <b>Add-ons, tools and utilities</b> menu and select <b>EDB Language Pack</b>, which installs support for programming languages including Python. Click through several times; you’ll need to wait while the installer downloads the additional components.</li>&#13;
<li value="11">When installation files have been downloaded, click <b>Next</b> to install the language and PostGIS components. For PostGIS, you’ll need to agree to the license terms; click through until you’re asked to Choose Components. Make sure PostGIS and Create spatial database are selected. Click <b>Next</b>, accept the default install location, and click <b>Next</b> again.</li>&#13;
<li value="12">Enter your database password when prompted and continue through the prompts to install PostGIS.</li>&#13;
<li value="13">Answer <b>Yes</b> when asked to register the <code>PROJ_LIB</code> and <code>GDAL_DATA</code> environment variables. Also, answer <b>Yes</b> to the questions about setting <code>POSTGIS_ENABLED_DRIVERS</code> and enabling the <code>POSTGIS_ENABLE_OUTDB_RASTERS</code> environment variable. Finally, click through the final Finish steps to complete the installation and exit the installers. Depending on the version, you may be prompted to restart your computer.</li>&#13;
</ol>&#13;
<p>When finished, you should have two new folders in your Windows Start menu: one for PostgreSQL and another for PostGIS.</p>&#13;
<p>If you’d like to get started right away, you can skip ahead to the section “Working with pgAdmin.” Otherwise, follow the steps in the next section to set environment variables for optional Python language support. We cover using Python with PostgreSQL in <span class="xref" itemid="xref_target_Chapter 17">Chapter 17</span>; you can wait until then to set up Python if you’d like to move ahead now.</p>&#13;
<h4 id="h3-501065c01-0001">Configuring Python Language Support</h4>&#13;
<p class="BodyFirst">In <span class="xref" itemid="xref_target_Chapter 17">Chapter 17</span>, you’ll learn how to use the Python programming language with PostgreSQL. In the previous section, you installed the EDB Language <span epub:type="pagebreak" title="6" id="Page_6"/>Pack, which provides Python support. Follow these steps to add the location of the Language Pack files to your Windows system’s environment variables:</p>&#13;
<ol class="decimal">&#13;
<li value="1">Open the Windows Control Panel by clicking the <b>Search</b> icon on the Windows taskbar, entering <b>Control Panel</b>, and then clicking the <b>Control Panel</b> icon.</li>&#13;
<li value="2">In the Control Panel app, enter <b>Environment</b> in the search box. In the list of search results displayed, click <b>Edit the System Environment Variables</b>. A System Properties dialog will appear.</li>&#13;
<li value="3">In the System Properties dialog, on the Advanced tab, click <b>Environment Variables</b>. The dialog that opens has two sections: User variables and System variables. In the System variables section, if you don’t see a <code>PATH</code> variable, continue to step a to create a new one. If you do see an existing <code>PATH</code> variable, continue to step b to modify it.&#13;
<ol class="lower-alpha">&#13;
<li value="1">If you don’t see <code>PATH</code> in the System variables section, click <b>New</b> to open a New System Variable dialog, shown in <a href="#figure1-1" id="figureanchor1-1">Figure 1-1</a>.&#13;
<figure>&#13;
<img src="Images/f01001.png" alt="f01001" class="keyline" width="694" height="197"/>&#13;
<figcaption><p><a id="figure1-1">Figure 1-1</a>: Creating a new <span class="LiteralInCaption"><code>PATH</code></span> environment variable in Windows 10</p></figcaption>&#13;
</figure>&#13;
<p class="ListBody">	In the Variable name box, enter <b>PATH</b>. In the Variable value box, enter <b>C:\edb\languagepack\v2\Python-3.9</b>. (Instead of typing, you can click <b>Browse Directory</b> and navigate to the directory in the Browse For Folder dialog.) When you’ve either entered the path manually or browsed to it, click <b>OK</b> on the dialog to close it.</p>&#13;
</li>&#13;
<li value="2">If you do see an existing <code>PATH</code> variable in the System variables section, highlight it and click <b>Edit</b>. In the list of variables that displays, click <b>New</b> and enter <b>C:\edb\languagepack\v2\Python-3.9</b>. (Instead of typing, you can click Browse Directory and navigate to the directory in the Browse For Folder dialog.)&#13;
<p class="ListBody">Once you’ve added the Language Pack path, highlight it in the list of variables and click <b>Move Up</b> until the path is at the top of the variables list. That way, PostgreSQL will find the correct Python version if you have additional Python installations.</p>&#13;
<p class="ListBody">The result should look like the highlighted line in <a href="#figure1-2" id="figureanchor1-2">Figure 1-2</a>. Click <b>OK</b> to close the dialog.</p>&#13;
<span epub:type="pagebreak" title="7" id="Page_7"/><figure>&#13;
<img src="Images/f01002.png" alt="f01002" class="keyline" width="625" height="687"/>&#13;
<figcaption><p><a id="figure1-2">Figure 1-2</a>: Editing existing <span class="LiteralInCaption"><code>PATH</code></span> environment variables in Windows 10</p></figcaption>&#13;
</figure>&#13;
</li>&#13;
</ol>&#13;
</li>&#13;
<li value="4">Finally, in the System variables section, click <b>New</b>. In the New System Variable dialog, enter <b>PYTHONHOME</b> in the Variable name box. In the Variable value box, enter <b>C:\edb\languagepack\v2\Python-3.9</b>. When you’re finished, click <b>OK</b> in all dialogs to close them. Note that these Python path settings will take effect the next time you restart your system.</li>&#13;
</ol>&#13;
<p>If you experience any hiccups during the PostgreSQL install, check the resources for the book, where I will note changes that occur as the software is developed and can also answer questions. If you’re unable to install PostGIS via Stack Builder, try downloading a separate installer from the PostGIS site at <a href="https://postgis.net/windows_downloads/" class="LinkURL">https://postgis.net/windows_downloads/</a> and consult the guides at <a href="https://postgis.net/documentation/" class="LinkURL">https://postgis.net/documentation/</a>.</p>&#13;
<p>Now, you can move ahead to the section “Working with pgAdmin.”</p>&#13;
<h3 id="h2-501065c01-0002"><span epub:type="pagebreak" title="8" id="Page_8"/>macOS Installation</h3>&#13;
<p class="BodyFirst">For macOS users, I recommend obtaining Postgres.app, an open source macOS application that includes PostgreSQL as well as the PostGIS extension and a few other goodies. Separately, you’ll need to install the pgAdmin GUI and the Python language for use in functions.</p>&#13;
<h4 id="h3-501065c01-0002">Installing Postgres.app and pgAdmin</h4>&#13;
<p class="BodyFirst">Follow these steps:</p>&#13;
<ol class="decimal">&#13;
<li value="1">Visit <a href="https://postgresapp.com/" class="LinkURL">https://postgresapp.com/</a> and download the latest release of the app. This will be a Disk Image file that ends in <em>.dmg</em>.</li>&#13;
<li value="2">Double-click the <em>.dmg</em> file to open it, and then drag and drop the app icon into your <em>Applications</em> folder.</li>&#13;
<li value="3">In your <em>Applications</em> folder, double-click the app icon to launch Postgres.app. (If you see a dialog that says the app cannot be opened because the developer cannot be verified, click <b>Cancel</b>. Then right-click the app icon and choose <b>Open</b>.) When Postgres.app opens, click <b>Initialize</b> to create and start a PostgreSQL database server.</li>&#13;
</ol>&#13;
<p>A small elephant icon will appear in your menu bar to indicate that you now have a database running. To set up the included PostgreSQL command line tools so you’re able to use them in future, open your Terminal application and run the following single line of code at the prompt (you can copy the code as a single line from the Postgres.app site at <a href="https://postgresapp.com/documentation/install.html" class="LinkURL">https://postgresapp.com/documentation/install.html</a>):</p>&#13;
<pre><code><b>sudo mkdir -p /etc/paths.d &amp;&amp;</b>&#13;
<b>echo /Applications/Postgres.app/Contents/Versions/latest/bin | sudo tee /etc/paths.d/postgresapp</b></code></pre>&#13;
<p>You may be prompted for the password you use to log in to your Mac. Enter that. The commands should execute without providing any output.</p>&#13;
<p>Next, because Postgres.app doesn’t include pgAdmin, follow these steps to install pgAdmin:</p>&#13;
<ol class="decimal">&#13;
<li value="1">Visit the pgAdmin site’s page for macOS downloads at <a href="https://www.pgadmin.org/download/pgadmin-4-macos/" class="LinkURL">https://www.pgadmin.org/download/pgadmin-4-macos/</a>.</li>&#13;
<li value="2">Select the latest version and download the installer (look for a Disk Image file that ends in <em>.dmg</em>).</li>&#13;
<li value="3">Double-click the <em>.dmg</em> file, click through the prompt to accept the terms, and then drag pgAdmin’s elephant app icon into your<em> Applications</em> folder.</li>&#13;
</ol>&#13;
<p>Installation on macOS is relatively simple, but if you encounter any issues, review the documentation for Postgres.app at <a href="https://postgresapp.com/documentation/" class="LinkURL">https://postgresapp.com/documentation/</a> and for pgAdmin at <a href="https://www.pgadmin.org/docs/" class="LinkURL">https://www.pgadmin.org/docs/</a>.</p>&#13;
<h4 id="h3-501065c01-0003"><span epub:type="pagebreak" title="9" id="Page_9"/>Installing Python</h4>&#13;
<p class="BodyFirst">In <span class="xref" itemid="xref_target_Chapter 17">Chapter 17</span>, you’ll learn how to use the Python programming language with PostgreSQL. To use Python with Postgres.app, you must install a specific version of the language even though macOS comes with Python pre-installed (and you might have set up an additional Python environment). To enable Postgres.app’s optional Python language support, follow these steps:</p>&#13;
<ol class="decimal">&#13;
<li value="1">Visit the official Python site at <a href="https://www.python.org/" class="LinkURL">https://www.python.org/</a> and click the <b>Downloads</b> menu.</li>&#13;
<li value="2">In the list of releases, find and download the latest version of Python 3.9. Choose the appropriate installer for your Mac’s processor—an Intel chip on older Macs or Apple Silicon for newer models. The download is an Apple software package file that ends in <em>.pkg</em>.</li>&#13;
<li value="3">Double-click the package file to install Python, clicking through license agreements. Close the installer when finished.</li>&#13;
</ol>&#13;
<p>Python requirements for Postgres.app may change over time. Check its Python documentation at <a href="https://postgresapp.com/documentation/plpython.html" class="LinkURL">https://postgresapp.com/documentation/plpython.html</a> as well as the resources for this book for updates.</p>&#13;
<p>You’re now ready to move ahead to the section “Working with pgAdmin.”</p>&#13;
<h3 id="h2-501065c01-0003">Linux Installation</h3>&#13;
<p class="BodyFirst">If you’re a Linux user, installing PostgreSQL becomes simultaneously easy and difficult, which in my experience is very much the way it is in the Linux universe. Most times you can accomplish an installation with a few commands, but finding those commands requires some Internet sleuth work. Thankfully, most popular Linux distributions—including Ubuntu, Debian, and CentOS—bundle PostgreSQL in their standard package. However, some distributions stay on top of updates more than others, so there’s a chance the PostgreSQL you have downloaded may not be the latest. The best path is to consult your distribution’s documentation for the best way to install PostgreSQL if it’s not already included or if you want to upgrade to a more recent version.</p>&#13;
<p>Alternatively, the PostgreSQL project maintains complete up-to-date package repositories for Red Hat variants, Debian, and Ubuntu. Visit <a href="https://yum.postgresql.org/" class="LinkURL">https://yum.postgresql.org/</a> and <a href="https://wiki.postgresql.org/wiki/Apt" class="LinkURL">https://wiki.postgresql.org/wiki/Apt</a> for details. The packages you’ll want to install include the client and server for PostgreSQL, pgAdmin (if available), PostGIS, and PL/Python. The exact names of these packages will vary according to your Linux distribution. You might also need to manually start the PostgreSQL database server.</p>&#13;
<p>The pgAdmin app is rarely part of Linux distributions. To install it, refer to the pgAdmin site at <a href="https://www.pgadmin.org/download/" class="LinkURL">https://www.pgadmin.org/download/</a> for the latest instructions and to see whether your platform is supported. If you’re feeling adventurous, you can find instructions on building the app from source code at <a href="https://www.pgadmin.org/download/pgadmin-4-source-code/" class="LinkURL">https://www.pgadmin.org/download/pgadmin-4-source-code/</a>. Once finished, you can move ahead to the section “Working with pgAdmin.”</p>&#13;
<h4 id="h3-501065c01-0004"><span epub:type="pagebreak" title="10" id="Page_10"/>Ubuntu Installation Example</h4>&#13;
<p class="BodyFirst">To give you a sense of what a PostgreSQL Linux install looks like, here are the steps I took to load PostgreSQL, pgAdmin, PostGIS, and PL/Python on Ubuntu 21.04, codenamed Hirsute Hippo. It’s a combination of the directions found at <a href="https://wiki.postgresql.org/wiki/Apt%20" class="LinkURL">https://wiki.postgresql.org/wiki/Apt </a>plus the “Basic Server Setup” section at <a href="https://help.ubuntu.com/community/PostgreSQL/" class="LinkURL">https://help.ubuntu.com/community/PostgreSQL/</a>. You can follow along if you’re on Ubuntu.</p>&#13;
<p>Open your Terminal by pressing <span class="KeyCaps">ctrl-alt-T</span>. Then, at the prompt, enter the following lines to import a key for the PostgreSQL APT repository:</p>&#13;
<pre><code><b>sudo apt-get install curl ca-certificates gnupg</b>&#13;
<b>curl https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -</b></code></pre>&#13;
<p>Next, run this single line to create the file <em>/etc/apt/sources.list.d/pgdg.list</em>:</p>&#13;
<pre><code><b>sudo sh -c 'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</b></code></pre>&#13;
<p>Once that’s done, update the package lists and install PostgreSQL and pgAdmin with the next two lines. Here, I installed PostgreSQL 13; you can choose a newer version if available.</p>&#13;
<pre><code><b>sudo apt-get update</b>&#13;
<b>sudo apt-get install postgresql-13</b></code></pre>&#13;
<p>You should now have PostgreSQL running. At the Terminal, enter the next line, which allows you to log in to the server and connect as the default <code>postgres</code> user to the <code>postgres</code> database using the <code>psql</code> interactive terminal, which we’ll cover in depth in <span class="xref" itemid="xref_target_Chapter 18">Chapter 18</span>:</p>&#13;
<pre><code><b>sudo -u postgres psql postgres</b></code></pre>&#13;
<p>When <code>psql</code> launches, it displays version information as well as a <code>postgres=#</code> prompt. Enter the following at the prompt to set a password:</p>&#13;
<pre><code><code>postgres=#</code> <b>\password postgres</b></code></pre>&#13;
<p>I also like to create a user account with a name that matches my Ubuntu username. To do this, at the <code>postgres=#</code> prompt, enter the following line, substituting your Ubuntu username where you see <code>anthony</code>:</p>&#13;
<pre><code><code>postgres=#</code> <b>CREATE USER </b><b>anthony SUPERUSER;</b></code></pre>&#13;
<p>Exit <code>psql</code> by entering <code class="bold">\q</code> at the prompt. You should be back at your Terminal prompt once again.</p>&#13;
<p>To install pgAdmin, first import a key for the repository:</p>&#13;
<pre><code><b>curl https://www.pgadmin.org/static/packages_pgadmin_org.pub | sudo apt-key add</b></code></pre>&#13;
<p><span epub:type="pagebreak" title="11" id="Page_11"/>Next, run this single line to create the file <em>/etc/apt/sources.list.d/pgadmin4.list</em> and update package lists:</p>&#13;
<pre><code><b>sudo sh -c 'echo "deb https://ftp.postgresql.org/pub/pgadmin/pgadmin4/apt/$(lsb_release -cs) pgadmin4 main" &gt; /etc/apt/sources.list.d/pgadmin4.list &amp;&amp; apt update'</b></code></pre>&#13;
<p>Then you can install pgAdmin 4:</p>&#13;
<pre><code><b>sudo apt-get install pgadmin4-desktop</b></code></pre>&#13;
<p>Finally, to install the PostGIS and PL/Python extensions, run the following lines in your terminal (substituting the version numbers of your PostgreSQL version):</p>&#13;
<pre><code><b>sudo apt install</b> <b>postgresql-13-postgis-3</b>&#13;
<b>sudo apt install</b> <b>postgresql-plpython3-13</b></code></pre>&#13;
<p>Check the official Ubuntu and PostgreSQL documentation for updates. If you experience any errors, typically with Linux an online search will yield helpful tips.</p>&#13;
<h2 id="h1-501065c01-0004">Working with pgAdmin</h2>&#13;
<p class="BodyFirst">The final piece of your setup puzzle is to get familiar with pgAdmin, an administration and management tool for PostgreSQL. The pgAdmin software is free, but don’t underestimate its performance; it’s a full-featured tool as powerful as paid tools such as Microsoft’s SQL Server Management Studio. With pgAdmin, you get a graphical interface where you can configure multiple aspects of your PostgreSQL server and databases, and—most appropriately for this book—use a SQL query tool for writing, running, and saving queries.</p>&#13;
<h3 id="h2-501065c01-0004">Launching pgAdmin and Setting a Master Password</h3>&#13;
<p class="BodyFirst">Assuming you followed the installation steps for your operating system earlier in the chapter, here’s how to launch pgAdmin:</p>&#13;
<ul>&#13;
<li><b>Windows</b>: Go to the Start menu, find the PostgreSQL folder for the version you installed, click it, and then select <b>pgAdmin4</b>.</li>&#13;
<li><b>macOS</b>: Click the <b>pgAdmin</b> icon in your <em>Applications</em> folder, making sure you’ve also launched Postgres.app.</li>&#13;
<li><b>Linux</b>: Startup may differ depending on your Linux distribution. Typically, at your Terminal prompt, enter <code class="bold">pgadmin4</code> and press <span class="KeyCaps">enter</span>. In Ubuntu, pgAdmin appears as an app in the Activities Overview.</li>&#13;
</ul>&#13;
<p>You should see the pgAdmin splash screen, followed by the application opening, as in <a href="#figure1-3" id="figureanchor1-3">Figure 1-3</a>. If it’s your first time launching pgAdmin, you’ll also receive a prompt to set a master password. This password is not related <span epub:type="pagebreak" title="12" id="Page_12"/>to the one you set up during the PostgreSQL install. Set a master password and click <b>OK</b>.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/></div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	On macOS, when you launch pgAdmin the first time, a dialog might appear that displays “pgAdmin4.app can’t be opened because it is from an unidentified developer.” Right-click the icon and click <b>Open</b>. The next dialog should give you the option to open the app; going forward, your Mac will remember you’ve granted this permission.</p>&#13;
<div class="bottom hr"><hr/></div>&#13;
</section>&#13;
</aside>&#13;
<figure>&#13;
<img src="Images/f01003.png" alt="f01003" class="keyline" width="694" height="425"/>&#13;
<figcaption><p><a id="figure1-3">Figure 1-3</a>: The pgAdmin app running on Windows 10</p></figcaption>&#13;
</figure>&#13;
<p>The pgAdmin layout includes a left vertical pane that displays an object browser where you can view available servers, databases, users, and other objects. Across the top of the screen is a collection of menu items, and below those are tabs to display various aspects of database objects and performance. Next, let’s connect to your database.</p>&#13;
<h3 id="h2-501065c01-0005">Connecting to the Default postgres Database</h3>&#13;
<p class="BodyFirst">PostgreSQL is a <em>database management system</em>, which means it’s software that allows you to define, manage, and query databases. When you installed PostgreSQL, it created a <em>database server</em>—an instance of the application running on your computer—that includes a default database called <code>postgres</code>. A database is a collection of objects that includes tables, functions, and much more, and this is where your actual data will lie. We use the SQL language (as well as pgAdmin) to manage objects and data stored in the database.</p>&#13;
<p>In the next chapter, you’ll create your own database on your PostgreSQL server to organize your work. For now, let’s connect to the default <code>postgres</code> database to explore pgAdmin. Use the following steps:</p>&#13;
<ol class="decimal">&#13;
<li value="1">In the object browser, click the downward-pointing arrow to the left of the Servers node to show the default server. Depending on <span epub:type="pagebreak" title="13" id="Page_13"/>your operating system, the default server name could be <em>localhost</em> or <em>PostgreSQL x</em>, where <em>x</em> is the Postgres version number.</li>&#13;
<li value="2">Double-click the server name. If prompted, enter the database password you chose during installation (you can choose to save the password so you don’t need type it in the future). A brief message appears while pgAdmin is establishing a connection. When you’re connected, several new object items should display under the server name.</li>&#13;
<li value="3">Expand Databases and then expand the default database <code>postgres</code>.</li>&#13;
<li value="4">Under <code>postgres</code>, expand the Schemas object, and then expand public.</li>&#13;
</ol>&#13;
<p>Your object browser pane should look similar to <a href="#figure1-4" id="figureanchor1-4">Figure 1-4</a>.</p>&#13;
<figure>&#13;
<img src="Images/f01004.png" alt="f01004" class="keyline" width="298" height="652"/>&#13;
<figcaption><p><a id="figure1-4">Figure 1-4</a>: The pgAdmin object browser</p></figcaption>&#13;
</figure>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/></div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	If pgAdmin doesn’t show a default under Servers, you’ll need to add it. Right-click Servers, and click <b>Create</b><span class="MenuArrow">▶</span><b>Server</b>. In the dialog, type a name for your server in the General tab. On the Connection tab, in the Host name/address box, enter <code class="bold">localhost</code>. Fill in your username and the password you supplied when installing PostgreSQL and then click <b>Save</b>. You should now see your server listed.</p>&#13;
<div class="bottom hr"><hr/></div>&#13;
</section>&#13;
</aside>&#13;
<p><span epub:type="pagebreak" title="14" id="Page_14"/>This collection of objects defines every feature of your database server. That includes tables, where we store data. To view a table’s structure or perform actions on it with pgAdmin, you can access the table here. In <span class="xref" itemid="xref_target_Chapter 2">Chapter 2</span>, you’ll use this browser to create a new database and leave the default <code>postgres</code> as is.</p>&#13;
<h3 id="h2-501065c01-0006">Exploring the Query Tool</h3>&#13;
<p class="BodyFirst">The pgAdmin app includes a <em>Query Tool</em>, which is where you write and execute code. To open the Query Tool, in pgAdmin’s object browser, first click once on any database to highlight it. For example, click the <code>postgres</code> database and then select <b>Tools</b><span class="MenuArrow">▶</span><b>Query Tool</b>. You’ll see three panes: a Query Editor, a Scratch Pad for holding code snippets while you work, and a Data Output pane that displays query results. You can open multiple tabs to connect to and write queries for different databases or just to organize your code the way you would like. To open another tab, click a database in the object browser and open the Query Tool again via the menu.</p>&#13;
<p>Let’s run a simple query and see its output, using the statement in <a href="#listing1-1" id="listinganchor1-1">Listing 1-1</a> that returns the version of PostgreSQL you’ve installed. This code, along with all the examples in this book, is available for download via the resources at <a href="https://nostarch.com/practical-sql-2nd-edition/" class="LinkURL">https://nostarch.com/practical-sql-2nd-edition/</a> by clicking the link <b>Download the code from GitHub</b>.</p>&#13;
<pre><code>SELECT version();</code></pre>&#13;
<p class="CodeListingCaption"><a id="listing1-1">Listing 1-1</a>: Checking your PostgreSQL version</p>&#13;
<p>Enter the code into the Query Editor or, if you downloaded the book’s code from GitHub, click the <b>Open File</b> icon on the pgAdmin toolbar and navigate to the folder where you saved the code to open the file <em>Chapter_01.sql</em> in the <em>Chapter_01</em> folder. To execute the statement, highlight the line beginning with <code>SELECT</code> and click the <b>Execute/Refresh</b> icon in the toolbar (it’s shaped like a play button). PostgreSQL should return the server’s version as a result in the pgAdmin Data Output pane, as in <a href="#figure1-5" id="figureanchor1-5">Figure 1-5</a> (you may need to expand the column in the Data Output pane by clicking on the right edge and dragging to your right to see the full results).</p>&#13;
<p>You’ll learn much more about queries later in the book, but for now all you need to know is that this query uses a PostgreSQL-specific <em>function</em> called <code>version()</code> to retrieve the version information for the server. In my case, the output shows that I’m running PostgreSQL 13.3, and it provides additional specifics on the build of the software.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/></div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	Most of the sample code files you can download from GitHub contain more than one query. To run just one query at a time, first highlight the code for that query and then click <b>Execute/Refresh</b>.</p>&#13;
<div class="bottom hr"><hr/></div>&#13;
</section>&#13;
</aside>&#13;
<span epub:type="pagebreak" title="15" id="Page_15"/><figure>&#13;
<img src="Images/f01005.png" alt="f01005" class="keyline" width="694" height="460"/>&#13;
<figcaption><p><a id="figure1-5">Figure 1-5</a>: The pgAdmin Query Tool displaying query results</p></figcaption>&#13;
</figure>&#13;
<h3 id="h2-501065c01-0007">Customizing pgAdmin</h3>&#13;
<p class="BodyFirst">Selecting <b>File</b><span class="MenuArrow">▶</span><b>Preferences</b> from the pgAdmin menu opens a dialog where you can customize pgAdmin’s appearance and options. Here are three you may want to visit now:</p>&#13;
<ul>&#13;
<li><b>Miscellaneous</b><span class="MenuArrow">▶</span><b>Themes</b> lets you choose between the standard light pgAdmin theme and a dark theme.</li>&#13;
<li><b>Query Tool</b><span class="MenuArrow">▶</span><b>Results grid</b> lets you set a maximum column width in query results. In that dialog, choose <b>Column data</b> and enter a value of <b>300</b> in <b>Maximum column width</b>.</li>&#13;
<li>The <b>Browser</b> section lets you configure the pgAdmin layout and set keyboard shortcuts.</li>&#13;
</ul>&#13;
<p>To get help on pgAdmin options, choose <b>Help</b><span class="MenuArrow">▶</span><b>Online Help</b> from the menu. Feel free to explore the preferences further before moving on.</p>&#13;
<h2 id="h1-501065c01-0005">Alternatives to pgAdmin</h2>&#13;
<p class="BodyFirst">Although pgAdmin is great for beginners, you’re not required to use it for these exercises. If you prefer another administrative tool that works with PostgreSQL, feel free to use it. If you want to use your system’s command line for all the exercises in this book, <span class="xref" itemid="xref_target_Chapter 18">Chapter 18</span> provides instructions on using the PostgreSQL interactive terminal <code>psql</code> from the command line. (The appendix lists PostgreSQL resources you can explore to find additional administrative tools.)</p>&#13;
<h2 id="h1-501065c01-0006"><span epub:type="pagebreak" title="16" id="Page_16"/>Wrapping Up</h2>&#13;
<p class="BodyFirst">Now that you’ve set up your environment with code, a text editor, PostgreSQL, and pgAdmin, you’re ready to start learning SQL and use it to discover valuable insights into your data!</p>&#13;
<p>In <span class="xref" itemid="xref_target_Chapter 2">Chapter 2</span>, you’ll learn how to create a database and a table, and then you’ll load some data to explore its contents. Let’s get started!</p>&#13;
</section>&#13;
</div></body></html>