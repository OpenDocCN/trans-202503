<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Composite Photography"><div class="titlepage"><div><div><h1 class="title"><a id="composite_photography"/>Chapter 5. Composite Photography</h1></div></div></div><p><a id="iddle1880" class="indexterm"/><a id="iddle2651" class="indexterm"/><a id="iddle3638" class="indexterm"/><a id="iddle3688" class="indexterm"/><a id="iddle4390" class="indexterm"/><a id="iddle4617" class="indexterm"/><a id="iddle5064" class="indexterm"/><a id="iddle5629" class="indexterm"/>In <a class="xref" href="ch02.html" title="Chapter 2. Photograph Retouching">Chapter 2</a>, we retouched existing images. In this chapter, we show you how to create unique pictures, using multiple photographs to build composite images.</p></div>
<div class="sect1" title="5.1 Tutorial: Building a Composite Portrait"><div class="titlepage"><div><div><h1 class="title"><a id="fivedot1_tutorial_building_a_composite_p"/>5.1 Tutorial: Building a Composite Portrait</h1></div></div></div><p>A <span class="emphasis"><em>composite portrait</em></span> is an image that combines several different portraits to build a new portrait. For example, you could merge several artists’ renderings of eyewitness accounts to create the most accurate possible likeness of a dangerous criminal. You could also use these techniques to guess what the child of two people would look like or to invent a strange hybrid animal.</p><p>In this example, we create a composite of several young women who kindly agreed to let us use their pictures for this demonstration.</p><p>Each portrait was taken in front of the same neutral background, with the same lighting, and with the girls in approximately the same position. But differences in skin hue or in the tilt of their head will create some interesting challenges. Using photographs taken under disparate conditions would be much more difficult, though. Imagine trying to copy a nose lit from the left onto a face lit from the right. Of course, you could flip the first image vertically, but that could lead to undesirable effects elsewhere in the image. Scaling a feature because the source photograph is much larger—or much smaller— than the target one would lead to differences in sharpness. And putting the chin of a middle-age man on the face of a young woman, or vice versa, would, for many reasons, look odd. For this example, we chose conditions that make the project feasible and simple while still being instructive.</p><p>Begin with the four 900 × 1200 portraits shown in <a class="xref" href="ch05s01.html#four_source_portraits" title="Figure 5-1. The four source portraits">Figure 5-1</a>. The four portraits are arranged as layers within a single image. Our composite will have the eyes from portrait 1, the hair from portrait 2, the nose from portrait 3, and the mouth and chin from portrait 4.</p><p>The first thing you need to do is correct the lighting so it’s the same across all four portraits. Use the <span class="strong"><strong>Image: Colors &gt; Levels</strong></span> tool on each layer separately: Select the layer in the Layers dialog and then the Levels tool, and click A<span class="smaller">UTO</span>. The result is shown in <a class="xref" href="ch05s01.html#after_lighting_correction" title="Figure 5-2. After lighting correction">Figure 5-2</a>. The skin hues still vary widely but less than they did before the adjustment.</p><div class="figure"><a id="four_source_portraits"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00381"/><img src="httpatomoreillycomsourcenostarchimages1454682.png.jpg" alt="The four source portraits"/></div></div><p class="title">Figure 5-1. The four source portraits</p></div><div class="figure"><a id="after_lighting_correction"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00382"/><img src="httpatomoreillycomsourcenostarchimages1454684.png.jpg" alt="After lighting correction"/></div></div><p class="title">Figure 5-2. After lighting correction</p></div><div class="sect2" title="Taking Features from Different Portraits"><div class="titlepage"><div><div><h2 class="title"><a id="taking_features_from_different_portraits"/>Taking Features from Different Portraits</h2></div></div></div><p><a id="iddle1657" class="indexterm"/><a id="iddle2192" class="indexterm"/><a id="iddle2664" class="indexterm"/><a id="iddle3603" class="indexterm"/><a id="iddle3924" class="indexterm"/><a id="iddle3954" class="indexterm"/><a id="iddle4189" class="indexterm"/><a id="iddle4786" class="indexterm"/><a id="iddle5341" class="indexterm"/><a id="iddle5478" class="indexterm"/>Of all the features, the girls’ hair is the most difficult to copy. No selection tool could capture it precisely, and correcting it with the Quick Mask tool would be tedious—and extremely difficult. The best solution is, therefore, to copy the other features onto the face with the hair you want (for this example, portrait 2). The composite girl will be wearing the black shirt from this portrait, but all of the girls are dressed in black anyway, so the shirt doesn’t make much of a difference.</p><p>To create the new image that will be the composite portrait, simply click and drag the layer of portrait 2 from the Layers dialog to the Toolbox. Immediately save this image (<span class="inlinemediaobject"><a id="inline_id00162"/><img src="httpatomoreillycomsourcenostarchimages1453852.png.jpg" alt=""/></span>, and from time to time, save it again (<span class="inlinemediaobject"><a id="inline_id00163"/><img src="httpatomoreillycomsourcenostarchimages1453858.png.jpg" alt=""/></span>), so you don’t risk losing all your work.</p><p>Next, copy the features from the other portraits. You can do this in two ways:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Select the feature in the source image, copy it, paste it into the target image, and create a new layer (<span class="inlinemediaobject"><a id="inline_id00164"/><img src="httpatomoreillycomsourcenostarchimages1454182.png.jpg" alt=""/></span>) with the resulting floating selection.</p></li><li class="listitem"><p>Use the Clone tool to copy from the source image to the target one, preferably into a new transparent layer.</p></li></ul></div><p>Each technique has advantages and drawbacks, so we show you both techniques and let you decide which one works best for you. Creating a new layer for each new feature is important because it allows you to change one feature without having to rebuild the whole portrait. Containing the features in different layers also lets you make adjustments to the color, <a id="iddle2387" class="indexterm"/><a id="iddle2638" class="indexterm"/><a id="iddle2652" class="indexterm"/><a id="iddle2665" class="indexterm"/><a id="iddle3598" class="indexterm"/><a id="iddle3955" class="indexterm"/><a id="iddle4618" class="indexterm"/>orientation, or size of one feature without changing the rest of the portrait.</p><div class="figure"><a id="selecting_the_mouth_and_chin"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00383"/><img src="httpatomoreillycomsourcenostarchimages1454686.png.jpg" alt="Selecting the mouth and chin"/></div></div><p class="title">Figure 5-3. Selecting the mouth and chin</p></div><div class="figure"><a id="pasting_the_mouth_and_chin"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00384"/><img src="httpatomoreillycomsourcenostarchimages1454688.png.jpg" alt="Pasting the mouth and chin"/></div></div><p class="title">Figure 5-4. Pasting the mouth and chin</p></div><p>Once you’re satisfied with the placement, size, and coloration of the copied features, you can flatten the image and then do some minor retouching to better incorporate the new features into the face.</p><p>Zoom the initial portraits and your new portrait to the same zoom factor, for example 50%. Make sure portrait 4 is the active layer. Select the Free Select tool (<span class="inlinemediaobject"><a id="inline_id00165"/><img src="httpatomoreillycomsourcenostarchimages1453982.png.jpg" alt=""/></span>). Check the F<span class="smaller">EATHER EDGES</span> box and choose a R<span class="smaller">ADIUS</span> of 10. Build a tight selection around the mouth and chin of portrait 4, as shown in <a class="xref" href="ch05s01.html#selecting_the_mouth_and_chin" title="Figure 5-3. Selecting the mouth and chin">Figure 5-3</a>. If you copy too large an area, you might end up with discrepancies in skin color.</p><p>Copy the selection made in portrait 4, and paste it into the composite picture. Press <span class="inlinemediaobject"><a id="inline_id00166"/><img src="httpatomoreillycomsourcenostarchimages1454182.png.jpg" alt=""/></span> to create a new layer with the floating selection. The copy appears in the center of the image; move the copy to its proper place with the Move tool. Because the girl in portrait 4 tilted her head, the new mouth and chin are crooked. To correct this, flip the new layer horizontally with <span class="strong"><strong>Image: Layer &gt; Transform &gt; Flip Horizontally</strong></span> and then rotate it (<span class="inlinemediaobject"><a id="inline_id00167"/><img src="httpatomoreillycomsourcenostarchimages1453928.png.jpg" alt=""/></span>) into the proper position. The mouth and chin are now aligned, but the color is uneven, as shown in <a class="xref" href="ch05s01.html#pasting_the_mouth_and_chin" title="Figure 5-4. Pasting the mouth and chin">Figure 5-4</a>. We’ll correct this later. Double-click the new layer in the Layers dialog and change the name to <code class="literal">mouth</code>.</p><div class="figure"><a id="selecting_the_eyes-id00053"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00385"/><img src="httpatomoreillycomsourcenostarchimages1454690.png.jpg" alt="Selecting the eyes"/></div></div><p class="title">Figure 5-5. Selecting the eyes</p></div><div class="figure"><a id="after_pasting_the_eyes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00386"/><img src="httpatomoreillycomsourcenostarchimages1454692.png.jpg" alt="After pasting the eyes"/></div></div><p class="title">Figure 5-6. After pasting the eyes</p></div><p>Make sure portrait 1 is visible and active and then copy the eyes, again using the Free Select tool. To avoid selecting the eyebrows and the bridge of the nose, build the selection in two parts. First, draw a circle around one eye, press and hold the <span class="inlinemediaobject"><a id="inline_id00168"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> key, and draw a second circle around the other eye. See <a class="xref" href="ch05s01.html#selecting_the_eyes-id00053" title="Figure 5-5. Selecting the eyes">Figure 5-5</a>. You could also change the M<span class="smaller">ODE</span> in the tool’s options, rather than pressing <span class="inlinemediaobject"><a id="inline_id00169"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>.</p><p>Again, copy the selection, paste it into the composite picture, and create a new layer from the floating selection. Name this layer <code class="literal">eyes</code>. Move the layer into place, and rotate it slightly (<span class="inlinemediaobject"><a id="inline_id00170"/><img src="httpatomoreillycomsourcenostarchimages1453928.png.jpg" alt=""/></span>). The result, shown in <a class="xref" href="ch05s01.html#after_pasting_the_eyes" title="Figure 5-6. After pasting the eyes">Figure 5-6</a>, isn’t bad, although you could improve the skin color transition.</p><p>For the nose, use the Clone tool (<span class="inlinemediaobject"><a id="inline_id00171"/><img src="httpatomoreillycomsourcenostarchimages1454096.png.jpg" alt=""/></span>). Create a new transparent layer and call it <code class="literal">nose</code>. Select <a id="iddle2175" class="indexterm"/><a id="iddle2265" class="indexterm"/><a id="iddle2332" class="indexterm"/><a id="iddle2495" class="indexterm"/><a id="iddle2925" class="indexterm"/><a id="iddle2977" class="indexterm"/><a id="iddle3194" class="indexterm"/><a id="iddle3304" class="indexterm"/><a id="iddle4644" class="indexterm"/><a id="iddle5121" class="indexterm"/><a id="iddle5254" class="indexterm"/><a id="iddle5535" class="indexterm"/><a id="iddle5566" class="indexterm"/><a id="iddle5603" class="indexterm"/><a id="iddle5817" class="indexterm"/><a id="iddle5926" class="indexterm"/>the Clone tool and select the <code class="literal">Hardness 075</code> brush. Set the Clone tool’s size option to 20, and select A<span class="smaller">LIGNED</span> as your A<span class="smaller">LIGNMENT</span> option. Using a tablet stylus if you have one, or the mouse if you don’t, <span class="inlinemediaobject"><a id="inline_id00172"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-click the tip of the nose in portrait 3 and then paint on the composite picture, beginning at the tip of the nose. The resulting image has two main problems: First, the skin color is inconsistent, and second, the tilt of the nose isn’t quite right. The nose tilt can be corrected by rotating the new layer slightly. One possible result appears in <a class="xref" href="ch05s01.html#copying_the_nose" title="Figure 5-7. Copying the nose">Figure 5-7</a>.</p><div class="figure"><a id="copying_the_nose"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00387"/><img src="httpatomoreillycomsourcenostarchimages1454694.png.jpg" alt="Copying the nose"/></div></div><p class="title">Figure 5-7. Copying the nose</p></div></div><div class="sect2" title="Smoothing Transitions"><div class="titlepage"><div><div><h2 class="title"><a id="smoothing_transitions"/>Smoothing Transitions</h2></div></div></div><p>Next, smooth the features to create a more coherent composite portrait. Here, we demonstrate a few of the ways you can do this.</p><p>For the mouth and chin, use the Levels tool. Select it, and with the mouth layer active, move the right and middle triangles slightly for each of the three color channels. You should get a skin color similar to that of the original portrait. The area under the chin is still much too dark, however. Because the chin is on a separate layer, you can simply erase the part you don’t need. Select the Eraser tool (<span class="inlinemediaobject"><a id="inline_id00173"/><img src="httpatomoreillycomsourcenostarchimages1454130.png.jpg" alt=""/></span>), and choose the brush and size that you used with the Clone tool. Zoom in to work more precisely, and if you have one, use a tablet pen. You’ll still see a hue discrepancy between the chin and the neck, but don’t worry about that.</p><div class="figure"><a id="final_composite_picture"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00388"/><img src="httpatomoreillycomsourcenostarchimages1454696.png.jpg" alt="The final composite picture"/></div></div><p class="title">Figure 5-8. The final composite picture</p></div><p>The main problem now is the color of the nose. Correct it using the Levels tool. Move the middle triangle in the Value channel liberally toward the left. Try somewhere near 1.8.</p><p>Now you’ve done all you can with a multilayer image. To complete the composite portrait, you need to flatten the image. As a precaution, save the multilayer image and then duplicate it (<span class="inlinemediaobject"><a id="inline_id00174"/><img src="httpatomoreillycomsourcenostarchimages1454698.png.jpg" alt=""/></span>), and work on the copy. Merge all layers (<span class="strong"><strong>Layers: right-click &gt; Flatten Image</strong></span>), so you can use the Smudge, Dodge/Burn, or Clone tools on the image as a whole.</p><p>Several parts of the composite portrait require delicate touch-ups. Use the Smudge tool (<span class="inlinemediaobject"><a id="inline_id00175"/><img src="httpatomoreillycomsourcenostarchimages1454162.png.jpg" alt=""/></span>) to smooth the transitions between the various components of the final portrait, especially around the nose and on the upper part of the mouth and chin fragment copied from portrait 4. You can also use the Healing tool (<span class="inlinemediaobject"><a id="inline_id00176"/><img src="httpatomoreillycomsourcenostarchimages1454700.png.jpg" alt=""/></span>) to correct slight irregularities on the nose bridge or on the cheekbones.</p><p>Finally, select the whole face, but not the hair, and apply a very light Gaussian blur with a radius of 1 or 2 pixels. This makes the face smoother <a id="iddle2388" class="indexterm"/><a id="iddle3138" class="indexterm"/><a id="iddle4321" class="indexterm"/><a id="iddle4326" class="indexterm"/><a id="iddle4340" class="indexterm"/><a id="iddle4514" class="indexterm"/><a id="iddle4537" class="indexterm"/><a id="iddle4908" class="indexterm"/><a id="iddle4957" class="indexterm"/><a id="iddle4998" class="indexterm"/><a id="iddle5717" class="indexterm"/><a id="iddle5751" class="indexterm"/><a id="iddle5757" class="indexterm"/><a id="iddle5798" class="indexterm"/><a id="iddle6093" class="indexterm"/>and helps to hide any visible borders that remain between the features and the face. <a class="xref" href="ch05s01.html#final_composite_picture" title="Figure 5-8. The final composite picture">Figure 5-8</a> shows the final result.</p></div></div>
<div class="sect1" title="5.2 Selections, Overlaying, and Blending Modes"><div class="titlepage"><div><div><h1 class="title"><a id="fivedot2_selectionscomma_overlayingcomma"/>5.2 Selections, Overlaying, and Blending Modes</h1></div></div></div><p>This chapter focuses on the construction of composite images using elements from several different photographs. The three main tools for this process are selections, overlaying, and blending modes.</p><div class="sect2" title="Masks and Selections"><div class="titlepage"><div><div><h2 class="title"><a id="masks_and_selections"/>Masks and Selections</h2></div></div></div><p>As the preceding tutorial demonstrates, making selections is one of the most important, and trickiest, tasks involved in photo manipulation. So we’ll spend some time clarifying the functionality of the selection tools available in GIMP.</p><p>When you build a selection with the Rectangle Select tool, you get an area bounded by a simple geometric form. The simplicity makes it easy to tell whether pixels are within the selection. If you choose to feather the edges of the selection, however, the boundary is less clear: Some pixels are clearly out of the selection and some are deep within it, but what about those pixels on the feathered border?</p><p>The situation is even more complicated when you use the Fuzzy Select tool or the Select by Color tool. The selections that these tools build are usually not defined by clear and simple outlines. This shortcoming is obvious when you turn on Quick Mask, which displays the unselected pixels in red (by default). If the selection is feathered, you see that some pixels are completely red (unselected); others aren’t red at all (selected); and some pixels are, well, reddish. <a class="xref" href="ch05s02.html#feathered_selection_made_by_the_select_b" title="Figure 5-9. A feathered selection made by the Select by Color tool">Figure 5-9</a> shows a feathered selection made with the Select by Color tool, whereas <a class="xref" href="ch05s02.html#selection_as_a_quick_mask" title="Figure 5-10. The selection as a Quick Mask">Figure 5-10</a> shows the same selection with the Quick Mask tool active. Both images are shown with a zoom factor of 800%.</p><div class="figure"><a id="feathered_selection_made_by_the_select_b"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00389"/><img src="httpatomoreillycomsourcenostarchimages1454702.png.jpg" alt="A feathered selection made by the Select by Color tool"/></div></div><p class="title">Figure 5-9. A feathered selection made by the Select by Color tool</p></div><div class="figure"><a id="selection_as_a_quick_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00390"/><img src="httpatomoreillycomsourcenostarchimages1454704.png.jpg" alt="The selection as a Quick Mask"/></div></div><p class="title">Figure 5-10. The selection as a Quick Mask</p></div><p>As you may have guessed, those reddish pixels are partially selected. A selection and a mask are actually the same thing. They are both grayscale images that specify to what degree each pixel is selected. If the pixel value of the mask is 0 (i.e., black), the corresponding pixel in the image is not selected at all. If this value is 255 (i.e., white), the corresponding pixel is fully selected. A partially selected pixel has a value somewhere between 0 and 255.</p><div class="figure"><a id="selection_saved_in_the_channels_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00391"/><img src="httpatomoreillycomsourcenostarchimages1454706.png.jpg" alt="A selection saved in the Channels dialog"/></div></div><p class="title">Figure 5-11. A selection saved in the Channels dialog</p></div><p><a id="iddle1038" class="indexterm"/><a id="iddle1613" class="indexterm"/><a id="iddle1615" class="indexterm"/><a id="iddle1625" class="indexterm"/><a id="iddle1705" class="indexterm"/><a id="iddle2290" class="indexterm"/><a id="iddle2389" class="indexterm"/><a id="iddle3130" class="indexterm"/><a id="iddle3516" class="indexterm"/><a id="iddle3628" class="indexterm"/><a id="iddle3775" class="indexterm"/><a id="iddle4013" class="indexterm"/><a id="iddle4150" class="indexterm"/><a id="iddle4780" class="indexterm"/><a id="iddle5686" class="indexterm"/>Along the feathered edge of a selection, pixels are partially selected. All actions made to the selection affect these partially selected pixels to a lesser degree: Painting is semitransparent; burning is partial; cutting leaves some of the pixels in place; and so on. Partial selections are what make selections so useful in photo manipulation. They allow you to build composite pictures that don’t look like clumsy collages.</p><p>Because a selection and a mask are the same thing, and a mask is a grayscale image, you can manipulate it with the same tools that you would use on an image. You can paint on it with the painting tools demonstrated in <a class="xref" href="ch03.html" title="Chapter 3. Drawing and Illustration">Chapter 3</a>. You can select and edit specific areas. And you can save it and use it later with <span class="strong"><strong>Image: Select &gt; Save to Channel</strong></span>. The mask appears as an additional channel in the Channels dialog, as shown in <a class="xref" href="ch05s02.html#selection_saved_in_the_channels_dialog" title="Figure 5-11. A selection saved in the Channels dialog">Figure 5-11</a>. In this figure, the channel is selected (its line is emphasized), so if you paint on the image now, you’ll be painting on the mask. To paint on the image itself, switch to the Layers tab, select the layer you want to modify, and begin painting.</p><p>You can also use this property to change the mask in the same way we use the Quick Mask tool. To do this, open the Channels dialog and click the box to the left of the mask so the eye is visible. The mask now appears over the image (in gray by default). You can change the mask’s display color by selecting <span class="strong"><strong>Channels: right-click &gt; Edit Channel Attributes</strong></span> to open the dialog shown in <a class="xref" href="ch05s02.html#edit_channel_attributes_dialog" title="Figure 5-12. The Edit Channel Attributes dialog">Figure 5-12</a>. You can change the channel’s name and its opacity, as well as the color of the mask. Click the large button on the right to open the Color chooser, where you can pick any color you want. But keep in mind that using a color that contrasts with the image is generally best.</p><div class="figure"><a id="edit_channel_attributes_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00392"/><img src="httpatomoreillycomsourcenostarchimages1454708.png.jpg" alt="The Edit Channel Attributes dialog"/></div></div><p class="title">Figure 5-12. The Edit Channel Attributes dialog</p></div><p>When a selection (a mask) is saved in a channel, you can use it again later by simply clicking the red square button at the bottom of the Channels dialog. If you hover the pointer over the button, you’ll see that the standard key combinations allow you to activate different selection modes. You can save an unlimited number of selections as masks in the Channels dialog.</p><p>A mask used to determine the transparency of pixels in a layer is known as a <span class="emphasis"><em>layer mask</em></span>. A layer mask is a part of a specific layer, and its pixels specify the transparency of the corresponding pixels in that layer. If a mask pixel is white, the corresponding layer pixel is opaque and thus visible in the image if not hidden by another pixel located in an upper layer. If a mask pixel is black, the corresponding layer pixel is transparent and thus invisible. Intermediate values for the mask pixels produce intermediate transparency levels for the layer pixels. Note, however, that the layer itself is unchanged.</p><p>You can add a layer mask by applying Add Layer Mask from the <span class="strong"><strong>Image: Layer &gt; Mask</strong></span> menu. Once added, you can access its options via the same menu. You can also add or manipulate a layer mask by right-clicking in the Layers dialog. When you add a mask to a layer, you can choose among several options: a completely <a id="iddle1064" class="indexterm"/><a id="iddle1222" class="indexterm"/><a id="iddle4515" class="indexterm"/><a id="iddle4909" class="indexterm"/><a id="iddle4958" class="indexterm"/><a id="iddle5752" class="indexterm"/><a id="iddle5758" class="indexterm"/>white or completely black mask, the current selection, a specified channel, and others. Once you’ve built the mask, you can change it by painting on it, for example, with Quick Mask. You can change some of its properties, such as how it displays on the image. Finally, you can apply it to the layer, making its effect final.</p><div class="figure"><a id="first_photograph"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00393"/><img src="httpatomoreillycomsourcenostarchimages1454710.png.jpg" alt="The first photograph"/></div></div><p class="title">Figure 5-13. The first photograph</p></div><div class="figure"><a id="second_photograph"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00394"/><img src="httpatomoreillycomsourcenostarchimages1454712.png.jpg" alt="The second photograph"/></div></div><p class="title">Figure 5-14. The second photograph</p></div><p>We already demonstrated some of these options in previous chapters, and we come back to them later in this chapter.</p></div><div class="sect2" title="Overlaying Images"><div class="titlepage"><div><div><h2 class="title"><a id="overlaying_images"/>Overlaying Images</h2></div></div></div><p>Simply overlaying opaque images isn’t very interesting. Modifying the opacity of the top layer sometimes yields a satisfying result, but doing so doesn’t give us much control over it. Once you build a selection, however, you can create your own unique and imaginative images.</p><p>For example, take the photographs shown in <a class="xref" href="ch05s02.html#first_photograph" title="Figure 5-13. The first photograph">Figure 5-13</a> and <a class="xref" href="ch05s02.html#second_photograph" title="Figure 5-14. The second photograph">Figure 5-14</a>. Open the first one, and add the second one as a layer (<span class="inlinemediaobject"><a id="inline_id00177"/><img src="httpatomoreillycomsourcenostarchimages1454210.png.jpg" alt=""/></span>). Then, with the Fuzzy Select and Select by Color tools, select the sky in the top layer, which requires about a dozen clicks in several areas of the sky. Recall that pressing <span class="inlinemediaobject"><a id="inline_id00178"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> allows you to add to the selection, whereas pressing <span class="inlinemediaobject"><a id="inline_id00179"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span> allows you to subtract from the selection. The completed selection is shown as a Quick Mask in <a class="xref" href="ch05s02.html#selecting_the_sky-id00054" title="Figure 5-15. Selecting the sky">Figure 5-15</a>.</p><div class="figure"><a id="selecting_the_sky-id00054"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00395"/><img src="httpatomoreillycomsourcenostarchimages1454714.png.jpg" alt="Selecting the sky"/></div></div><p class="title">Figure 5-15. Selecting the sky</p></div><div class="figure"><a id="final_result-id00055"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00396"/><img src="httpatomoreillycomsourcenostarchimages1454716.png.jpg" alt="The final result"/></div></div><p class="title">Figure 5-16. The final result</p></div><p>Our goal is to make the sky transparent so the building from the other photograph is visible behind the tropical vegetation. If we simply cut the selection, however, the sky is replaced by opaque white because the layer doesn’t contain any transparency (indicated by the boldface layer name) and so any cut pixels are replaced by the background color. To add transparency, add an Alpha channel to the top layer: <span class="strong"><strong>Layers: right-click &gt; Add Alpha Channel</strong></span>. Now if you cut the selection, you get <a class="xref" href="ch05s02.html#final_result-id00055" title="Figure 5-16. The final result">Figure 5-16</a>.</p><p>You can also use a selection to copy something from one photograph and paste it into another one. You did this earlier on a smaller scale when you created the composite portrait at the beginning of the chapter. Moving larger <a id="iddle1006" class="indexterm"/><a id="iddle1009" class="indexterm"/><a id="iddle1116" class="indexterm"/><a id="iddle1600" class="indexterm"/><a id="iddle2658" class="indexterm"/><a id="iddle2670" class="indexterm"/><a id="iddle2902" class="indexterm"/><a id="iddle3544" class="indexterm"/><a id="iddle3612" class="indexterm"/><a id="iddle3614" class="indexterm"/><a id="iddle3956" class="indexterm"/><a id="iddle4975" class="indexterm"/><a id="iddle5583" class="indexterm"/><a id="iddle5775" class="indexterm"/>objects from one photograph to another presents its own challenges, as you’ll soon see.</p><div class="figure"><a id="first_photograph-id00056"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00397"/><img src="httpatomoreillycomsourcenostarchimages1454718.png.jpg" alt="The first photograph"/></div></div><p class="title">Figure 5-17. The first photograph</p></div><div class="figure"><a id="second_photograph-id00057"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00398"/><img src="httpatomoreillycomsourcenostarchimages1454720.png.jpg" alt="The second photograph"/><div class="caption"><p>Credit: Vincent Lecarme</p></div></div></div><p class="title">Figure 5-18. The second photograph</p></div><div class="figure"><a id="pasting_the_man"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00399"/><img src="httpatomoreillycomsourcenostarchimages1454722.png.jpg" alt="Pasting the man"/></div></div><p class="title">Figure 5-19. Pasting the man</p></div><p>As you saw previously, newly pasted objects are added to an image as a <span class="emphasis"><em>floating selection</em></span>. They appear in the Layers dialog (which you should always keep visible in your workspace) and act somewhat like a layer located on the top of the stack. But as long as a floating selection exists, you can’t change anything else in the image. The other layers are inactivated, just as the unselected regions of an image are inactive as long as a selection exists.</p><div class="figure"><a id="new_layer_as_a_floating_selection"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00400"/><img src="httpatomoreillycomsourcenostarchimages1454724.png.jpg" alt="The new layer as a floating selection"/></div></div><p class="title">Figure 5-20. The new layer as a floating selection</p></div><div class="figure"><a id="final_result-id00058"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00401"/><img src="httpatomoreillycomsourcenostarchimages1454726.png.jpg" alt="The final result"/></div></div><p class="title">Figure 5-21. The final result</p></div><p>With a floating selection, you can do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Create a new layer to contain the object you’ve just pasted.</p></li><li class="listitem"><p><span class="emphasis"><em>Anchor</em></span> the pasted content to whatever was active just before you created the floating selection. This layer might be the active layer (high-lighted in the Layers dialog) or the active layer mask (see the previous section), but not the active channel.</p></li></ul></div><p>Let’s say you want to combine elements from the photographs shown in <a class="xref" href="ch05s02.html#first_photograph-id00056" title="Figure 5-17. The first photograph">Figure 5-17</a> and <a class="xref" href="ch05s02.html#second_photograph-id00057" title="Figure 5-18. The second photograph">Figure 5-18</a>. You’ve decided to place an overdressed man in front of a sunny villa on the French Riviera. Select the man on the right, as shown in <a class="xref" href="ch05s02.html#second_photograph-id00057" title="Figure 5-18. The second photograph">Figure 5-18</a>. Make the selection with the Free Select tool and complete it by painting with Quick Mask. Don’t very careful when selecting his legs, however, because they won’t be visible.</p><div class="figure"><a id="upper_layer_and_the_lower_layer"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00402"/><img src="httpatomoreillycomsourcenostarchimages1454728.png.jpg" alt="The upper layer and the lower layer"/></div></div><p class="title">Figure 5-22. The upper layer and the lower layer</p></div><p><a id="iddle1318" class="indexterm"/><a id="iddle1321" class="indexterm"/><a id="iddle1328" class="indexterm"/><a id="iddle1362" class="indexterm"/><a id="iddle1371" class="indexterm"/><a id="iddle1938" class="indexterm"/><a id="iddle2128" class="indexterm"/><a id="iddle2134" class="indexterm"/><a id="iddle2144" class="indexterm"/><a id="iddle2666" class="indexterm"/><a id="iddle2671" class="indexterm"/><a id="iddle3636" class="indexterm"/><a id="iddle3692" class="indexterm"/><a id="iddle3894" class="indexterm"/><a id="iddle3986" class="indexterm"/><a id="iddle4027" class="indexterm"/><a id="iddle5633" class="indexterm"/>Copy the selection from <a class="xref" href="ch05s02.html#second_photograph-id00057" title="Figure 5-18. The second photograph">Figure 5-18</a> and paste it onto the image in <a class="xref" href="ch05s02.html#first_photograph-id00056" title="Figure 5-17. The first photograph">Figure 5-17</a>. The man appears in the center of the image, as shown in <a class="xref" href="ch05s02.html#pasting_the_man" title="Figure 5-19. Pasting the man">Figure 5-19</a>, as a floating selection (see <a class="xref" href="ch05s02.html#new_layer_as_a_floating_selection" title="Figure 5-20. The new layer as a floating selection">Figure 5-20</a>).</p><p>Create a new layer for this floating selection and move the man to the bottom-right corner of the sunny scene. He’s darker than his surroundings, so select the Levels tool and add some light and contrast. Also apply <span class="strong"><strong>Image: Layer &gt; Transform &gt; Flip Horizontally</strong></span> to flip him around. You can see the result in <a class="xref" href="ch05s02.html#final_result-id00058" title="Figure 5-21. The final result">Figure 5-21</a>.</p></div><div class="sect2" title="Using Blending Modes"><div class="titlepage"><div><div><h2 class="title"><a id="using_blending_modes"/>Using Blending Modes</h2></div></div></div><p>GIMP has 21 blending modes, which you can select from the Layers dialog. The M<span class="smaller">ODE</span> option contains a drop-down menu with a list of blending modes that will act on the active layer. Each blending mode uses a different mathematical model to compute a new pixel value from the active layer and the layer below. Although we won’t go into any detail regarding the mathematics of blending modes, we will introduce some of the modes most useful for overlaying images.</p><p>Begin with the photographs from <a class="xref" href="ch05s02.html#upper_layer_and_the_lower_layer" title="Figure 5-22. The upper layer and the lower layer">Figure 5-22</a>. Put them into the same image with the first one as the upper layer. The blending modes are arranged in a logical order, as explained in <a class="xref" href="ch12.html" title="Chapter 12. Color">Chapter 12</a>. In the following list, we briefly introduce these modes, in a different order, so we can run through them more quickly.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>If the mode is set to Normal, the upper layer completely hides the lower one, except if its opacity is less than 100%. <a class="xref" href="ch05s02.html#normal_mode_and_dissolve_modecomma_50per" title="Figure 5-23. Normal mode and Dissolve mode, 50% opacity; Multiply mode">Figure 5-23</a> (left) shows an image with a top layer opacity of 50%. Each new pixel contains half of the upper pixel and half of the lower one.</p></li><li class="listitem"><p>Dissolve mode looks the same as Normal mode until you reduce the opacity of the top layer. As you decrease the opacity of the top layer, the layers are blended using <span class="emphasis"><em>dithering</em></span>, and the resulting pixels are a random mixture of the upper and lower pixels. Opacity corresponds to the likelihood that the new pixel value will be taken from the upper layer. <a class="xref" href="ch05s02.html#normal_mode_and_dissolve_modecomma_50per" title="Figure 5-23. Normal mode and Dissolve mode, 50% opacity; Multiply mode">Figure 5-23</a> (middle) shows the effect of Dissolve mode with the top layer at 50% opacity.</p></li><li class="listitem"><p>In Multiply mode, the pixels’ values are multiplied and then <span class="emphasis"><em>normalized</em></span>. The resulting pixels are darker than those of the initial layers. <a class="xref" href="ch05s02.html#normal_mode_and_dissolve_modecomma_50per" title="Figure 5-23. Normal mode and Dissolve mode, 50% opacity; Multiply mode">Figure 5-23</a> (right) shows the result of Multiply mode: black pixels whenever one of the pixels is black and light pixels only when both pixels are light.</p></li><li class="listitem"><p>Divide mode divides and normalizes the pixel values. The result depends largely on the upper pixel. If the upper pixel is black, the <a id="iddle1338" class="indexterm"/><a id="iddle1378" class="indexterm"/><a id="iddle1384" class="indexterm"/><a id="iddle1390" class="indexterm"/><a id="iddle3189" class="indexterm"/><a id="iddle4073" class="indexterm"/><a id="iddle4889" class="indexterm"/><a id="iddle5140" class="indexterm"/>result is almost white, as shown in <a class="xref" href="ch05s02.html#divide_modecomma_screen_modecomma_and_ov" title="Figure 5-24. Divide mode, Screen mode, and Overlay mode">Figure 5-24</a> (left).</p><div class="figure"><a id="normal_mode_and_dissolve_modecomma_50per"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00403"/><img src="httpatomoreillycomsourcenostarchimages1454730.png.jpg" alt="Normal mode and Dissolve mode, 50% opacity; Multiply mode"/></div></div><p class="title">Figure 5-23. Normal mode and Dissolve mode, 50% opacity; Multiply mode</p></div><div class="figure"><a id="divide_modecomma_screen_modecomma_and_ov"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00404"/><img src="httpatomoreillycomsourcenostarchimages1454732.png.jpg" alt="Divide mode, Screen mode, and Overlay mode"/></div></div><p class="title">Figure 5-24. Divide mode, Screen mode, and Overlay mode</p></div></li><li class="listitem"><p>The mathematics of Screen mode are more complicated. As <a class="xref" href="ch05s02.html#divide_modecomma_screen_modecomma_and_ov" title="Figure 5-24. Divide mode, Screen mode, and Overlay mode">Figure 5-24</a> (middle) shows, the dark areas in the top layer are more transparent than the light ones. If you want to learn more about Screen mode, flip ahead to <a class="xref" href="ch12.html" title="Chapter 12. Color">Chapter 12</a>.</p></li><li class="listitem"><p>Overlay mode combines Multiply and Screen modes and results in a washed-out upper layer. As <a class="xref" href="ch05s02.html#divide_modecomma_screen_modecomma_and_ov" title="Figure 5-24. Divide mode, Screen mode, and Overlay mode">Figure 5-24</a> (right) shows, the upper layer is no more than a ghost in the picture.</p></li><li class="listitem"><p>Dodge and Burn are the traditional techniques used in analog photo development to make areas in a picture lighter or darker. As you can see in <a class="xref" href="ch05s02.html#dodge_modecomma_burn_modecomma_and_hard" title="Figure 5-25. Dodge mode, Burn mode, and Hard light mode">Figure 5-25</a> (left and middle), these modes operate according to the same principles: The upper layer is used to dodge or burn the lower one, and the intensity of the action corresponds to the value of the upper layer.</p></li><li class="listitem"><p>Hard light and Soft light are similar combinations of Multiply and Screen. As shown in <a class="xref" href="ch05s02.html#dodge_modecomma_burn_modecomma_and_hard" title="Figure 5-25. Dodge mode, Burn mode, and Hard light mode">Figure 5-25</a> (right), Hard light mode isn’t very <a id="iddle1315" class="indexterm"/><a id="iddle1330" class="indexterm"/><a id="iddle1335" class="indexterm"/><a id="iddle2081" class="indexterm"/><a id="iddle3101" class="indexterm"/><a id="iddle3106" class="indexterm"/>useful in this example because the upper layer almost completely hides the lower one. As <a class="xref" href="ch05s02.html#soft_light_modecomma_grain_extract_modec" title="Figure 5-26. Soft light mode, Grain extract mode, and Grain merge mode">Figure 5-26</a> (left) shows, Soft light mode produces a more interesting result, although in this example, the result is very similar to Overlay mode (see <a class="xref" href="ch05s02.html#divide_modecomma_screen_modecomma_and_ov" title="Figure 5-24. Divide mode, Screen mode, and Overlay mode">Figure 5-24</a>, right).</p><div class="figure"><a id="dodge_modecomma_burn_modecomma_and_hard"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00405"/><img src="httpatomoreillycomsourcenostarchimages1454734.png.jpg" alt="Dodge mode, Burn mode, and Hard light mode"/></div></div><p class="title">Figure 5-25. Dodge mode, Burn mode, and Hard light mode</p></div><div class="figure"><a id="soft_light_modecomma_grain_extract_modec"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00406"/><img src="httpatomoreillycomsourcenostarchimages1454736.png.jpg" alt="Soft light mode, Grain extract mode, and Grain merge mode"/></div></div><p class="title">Figure 5-26. Soft light mode, Grain extract mode, and Grain merge mode</p></div></li><li class="listitem"><p>Grain extract and Grain merge are another pair of sibling modes. Grain extract is similar to Difference mode, whereas Grain merge is similar to Addition mode (which we explain next). These modes are suppose to mimic film grain, but sometimes the similarity isn’t apparent. <a class="xref" href="ch05s02.html#soft_light_modecomma_grain_extract_modec" title="Figure 5-26. Soft light mode, Grain extract mode, and Grain merge mode">Figure 5-26</a> (middle) illustrates how Grain extract uses the light areas from the upper layer to exaggerate the light areas in the lower one. <a class="xref" href="ch05s02.html#soft_light_modecomma_grain_extract_modec" title="Figure 5-26. Soft light mode, Grain extract mode, and Grain merge mode">Figure 5-26</a> (right) shows the more subtle effects of Grain merge, which uses the texture of the upper layer to change the lower layer.</p></li><li class="listitem"><p>Difference, Addition, and Subtract are also sibling modes. Difference mode, shown in <a class="xref" href="ch05s02.html#difference_modecomma_addition_modecomma" title="Figure 5-27. Difference mode, Addition mode, and Subtract mode">Figure 5-27</a> (left), subtracts the lower pixel from the upper one and uses the absolute value of the result. The resulting image is <a id="iddle1028" class="indexterm"/><a id="iddle1275" class="indexterm"/><a id="iddle1297" class="indexterm"/><a id="iddle1307" class="indexterm"/><a id="iddle1341" class="indexterm"/><a id="iddle1351" class="indexterm"/><a id="iddle1380" class="indexterm"/><a id="iddle1393" class="indexterm"/><a id="iddle1395" class="indexterm"/><a id="iddle1698" class="indexterm"/><a id="iddle2039" class="indexterm"/><a id="iddle3256" class="indexterm"/><a id="iddle3269" class="indexterm"/><a id="iddle3703" class="indexterm"/><a id="iddle4773" class="indexterm"/><a id="iddle5225" class="indexterm"/><a id="iddle5911" class="indexterm"/><a id="iddle5919" class="indexterm"/><a id="iddle5927" class="indexterm"/>difficult to predict. Addition mode, shown in <a class="xref" href="ch05s02.html#difference_modecomma_addition_modecomma" title="Figure 5-27. Difference mode, Addition mode, and Subtract mode">Figure 5-27</a> (middle), adds pixel values, and values greater than 255 appear white. The resulting image is much lighter. Subtract mode, shown in <a class="xref" href="ch05s02.html#difference_modecomma_addition_modecomma" title="Figure 5-27. Difference mode, Addition mode, and Subtract mode">Figure 5-27</a> (right), subtracts the pixel values, and values that would be negative appear black.</p><div class="figure"><a id="difference_modecomma_addition_modecomma"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00407"/><img src="httpatomoreillycomsourcenostarchimages1454738.png.jpg" alt="Difference mode, Addition mode, and Subtract mode"/></div></div><p class="title">Figure 5-27. Difference mode, Addition mode, and Subtract mode</p></div><div class="figure"><a id="darken_only_modecomma_lighten_only_modec"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00408"/><img src="httpatomoreillycomsourcenostarchimages1454740.png.jpg" alt="Darken only mode, Lighten only mode, and Hue mode"/></div></div><p class="title">Figure 5-28. Darken only mode, Lighten only mode, and Hue mode</p></div></li><li class="listitem"><p>Darken only and Lighten only, shown in <a class="xref" href="ch05s02.html#darken_only_modecomma_lighten_only_modec" title="Figure 5-28. Darken only mode, Lighten only mode, and Hue mode">Figure 5-28</a> (left and middle), do what their names imply: The darkest or the lightest pixel is selected from the two layers.</p></li><li class="listitem"><p>The last four modes are related: The new pixel gets some combination of HSV components from the initial layers. In Hue mode (<a class="xref" href="ch05s02.html#darken_only_modecomma_lighten_only_modec" title="Figure 5-28. Darken only mode, Lighten only mode, and Hue mode">Figure 5-28</a>, right), the upper layer colorizes the lower one. Saturation mode (<a class="xref" href="ch05s02.html#saturation_modecomma_color_modecomma_and" title="Figure 5-29. Saturation mode, Color mode, and Value mode">Figure 5-29</a>, left) takes the hue and value components from the lower layer. Color mode (<a class="xref" href="ch05s02.html#saturation_modecomma_color_modecomma_and" title="Figure 5-29. Saturation mode, Color mode, and Value mode">Figure 5-29</a>, middle) takes only the value from the lower layer. Value mode (<a class="xref" href="ch05s02.html#saturation_modecomma_color_modecomma_and" title="Figure 5-29. Saturation mode, Color mode, and Value mode">Figure 5-29</a>, right) is the exact opposite: It takes only the value from the upper layer.</p></li></ul></div><div class="figure"><a id="saturation_modecomma_color_modecomma_and"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00409"/><img src="httpatomoreillycomsourcenostarchimages1454742.png.jpg" alt="Saturation mode, Color mode, and Value mode"/></div></div><p class="title">Figure 5-29. Saturation mode, Color mode, and Value mode</p></div></div></div>
<div class="sect1" title="5.3 Building a Panorama"><div class="titlepage"><div><div><h1 class="title"><a id="fivedot3_building_a_panorama"/>5.3 Building a Panorama</h1></div></div></div><p><a id="iddle1962" class="indexterm"/><a id="iddle2100" class="indexterm"/><a id="iddle2118" class="indexterm"/><a id="iddle2367" class="indexterm"/><a id="iddle2909" class="indexterm"/><a id="iddle3061" class="indexterm"/><a id="iddle3279" class="indexterm"/><a id="iddle3751" class="indexterm"/><a id="iddle4181" class="indexterm"/><a id="iddle4275" class="indexterm"/><a id="iddle4358" class="indexterm"/><a id="iddle5094" class="indexterm"/><a id="iddle5145" class="indexterm"/><a id="iddle6061" class="indexterm"/>With a digital camera, you can easily take several pictures of the same subject and capture a view from multiple vantage points. You can also build <span class="emphasis"><em>panoramic images</em></span> (i.e., wide pictures that cover a larger area than you can see at any one time).</p><p>Software tools that specialize in building panoramas are available. One of them is Hugin (see <span class="emphasis"><em><a class="ulink" href="http://hugin.sourceforge.net/">http://hugin.sourceforge.net/</a></em></span>), which is free and works on GNU/Linux, Mac OS X, and Windows. It uses a powerful algorithm called <span class="emphasis"><em>SIFT</em></span>, which was developed at the University of British Columbia. It builds the panorama in a completely automated way. The algorithm finds a collection of <span class="emphasis"><em>control points</em></span> in the different photographs. The result is spectacular, but the algorithm is processor intensive, especially if the panorama is being built from a lot of large photographs.</p><p>We also use Pandora, a GIMP plug-in developed by Akkana Peck, at the end of this section. After you install it, Pandora is accessible in <span class="strong"><strong>Image: Filters &gt; Combine</strong></span>.</p><div class="sect2" title="Taking the Pictures"><div class="titlepage"><div><div><h2 class="title"><a id="taking_the_pictures"/>Taking the Pictures</h2></div></div></div><p>Some digital cameras offer a panorama mode designed to ensure the images overlap sufficiently. Don’t worry if your camera lacks that feature; taking the pictures you need for your panorama, using normal settings, is easy. Just follow this advice:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Keep your feet firmly planted as you shoot. Rotate the top of your body to capture each successive shot, but try to keep the camera at the same height as you move across the landscape so each shot has the same amount of sky visible. Too much vertical motion can reduce your final panorama to a very narrow strip. If feasible, use a tripod for greater stability.</p></li><li class="listitem"><p>Do not change the exposure as you move: The settings must be the same for all pictures, even if the lighting conditions are not the same. Choose the optimal settings for some part of the intended panorama (the center, for example), fix them, and then take all the pictures. If you’re not sure how to do this, refer to your camera’s manual.</p></li><li class="listitem"><p>Take more pictures than necessary. To build a panorama, you need a lot of overlap. A camera’s optical system generally distorts the corners, and sometimes the sides, of every image. Only the center of an image isn’t distorted in any perceptible way. This is why you build your panorama using mainly the center of each picture.</p></li></ul></div><div class="figure"><a id="adding_the_first_photograph"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00410"/><img src="httpatomoreillycomsourcenostarchimages1454744.png.jpg" alt="Adding the first photograph"/></div></div><p class="title">Figure 5-30. Adding the first photograph</p></div><p><a id="iddle2101" class="indexterm"/><a id="iddle2103" class="indexterm"/><a id="iddle2107" class="indexterm"/><a id="iddle2616" class="indexterm"/><a id="iddle3937" class="indexterm"/><a id="iddle5065" class="indexterm"/><a id="iddle5873" class="indexterm"/><a id="iddle5903" class="indexterm"/><a id="iddle5983" class="indexterm"/>Perhaps your camera can take photos with a really high pixel count. For example, Olivier’s camera has a maximum image size of 3888 × 2592. When loaded in GIMP, an image of that size occupies 90.9MB. If you load six of them, probably the minimum number for a panorama, they occupy 545.4MB, which is too much for most computers to handle. And as soon as you begin working on an image, its size increases because of the stored information that allows you to undo. Basically, unless your computer is an extraordinary beast with a huge amount of memory, building an enormous panorama causes it to crash.</p><p>Generally, really large panoramas are impractical anyway. A panorama intended for a web page shouldn’t be much wider than 1000 pixels. If you want to print the image, a width of 4000 pixels results in a print size of 13.3 inches or 33.9 cm when printed at 300 ppi.</p><p>You can take the pictures for your panorama using the highest setting available on your camera and then scale them down to a usable size. Be careful not to scale down too much, however, or you’ll lose precision and sharpness.</p></div><div class="sect2" title="Superimposing the Pictures"><div class="titlepage"><div><div><h2 class="title"><a id="superimposing_the_pictures"/>Superimposing the Pictures</h2></div></div></div><p>Olivier took eight photographs of the view from his balcony, following the advice in the previous section. The images are 3888 × 2592, but we scaled them down to 1200 × 800. When scaling an image, choose the Sinc (Lanczos) algorithm, which, although somewhat processor intensive, does the best job. After scaling down, we applied the <span class="strong"><strong>Image: Filters &gt; Enhance &gt; Unsharp Mask</strong></span> filter with its default parameters to compensate for the loss of sharpness caused by scaling.</p><p>Because these photographs overlapped a lot, as they should, the complete panorama will not be more than 2800 pixels wide. As keeping the camera at exactly the same height for all shots was difficult, we created a new image that was 2800 × 1000, which happened to give us some wiggle room. This image isn’t extremely large, but it will have to be scaled down for a web page. On the other hand, this image is rather small <a id="iddle1402" class="indexterm"/><a id="iddle2108" class="indexterm"/><a id="iddle3525" class="indexterm"/><a id="iddle3585" class="indexterm"/><a id="iddle3784" class="indexterm"/><a id="iddle3967" class="indexterm"/><a id="iddle4028" class="indexterm"/><a id="iddle4491" class="indexterm"/><a id="iddle5448" class="indexterm"/>for printing. Here’s how we would build the panorama.</p><div class="figure"><a id="loading_the_second_photograph"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00411"/><img src="httpatomoreillycomsourcenostarchimages1454746.png.jpg" alt="Loading the second photograph"/></div></div><p class="title">Figure 5-31. Loading the second photograph</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Load the first photograph into this new image with <span class="inlinemediaobject"><a id="inline_id00180"/><img src="httpatomoreillycomsourcenostarchimages1454210.png.jpg" alt=""/></span>. The new layer appears in the center of the image; move it completely to the left, as shown in <a class="xref" href="ch05s03.html#adding_the_first_photograph" title="Figure 5-30. Adding the first photograph">Figure 5-30</a>.</p></li><li class="listitem"><p>Load the second photograph as a new layer and change its opacity to 50% so you can see whether it’s positioned correctly. Move it so the overlapping areas of the two photographs align. Focus on superimposing the house in the middle so it’s as sharp as possible. Use the arrow keys to tap it into place. As <a class="xref" href="ch05s03.html#loading_the_second_photograph" title="Figure 5-31. Loading the second photograph">Figure 5-31</a> shows, a perfect superimposition is impossible because of the lens distortion. Here, we are able to get the house in sharp focus, but the surrounding hills are blurry and the electric pole on the left is doubled. We can tell from the horizon that the camera was slightly tilted when the second picture was taken.</p></li><li class="listitem"><p>To improve the transition from one photo to the other, add a white layer mask to the top layer. Select the Blend tool and choose a linear gradient from black to white without repetition. You want the top layer to transition from transparent on the left to opaque on the right. To create a perfectly horizontal gradient, press <span class="inlinemediaobject"><a id="inline_id00181"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span> while dragging from left to right, beginning somewhat to the right of the left edge and ending at the house.</p></li><li class="listitem"><p>Once the gradient is built, click the layer thumbnail to select the layer itself. Set the opacity of this layer back to 100% and move it very slightly (with the arrow keys) so the house is as sharp as possible. You also need to rotate the top layer a tiny bit to compensate for the camera’s tilt. This is tricky because partial transparency disappears while you are using the rotation tool. <a class="xref" href="ch05s03.html#positioning_the_second_photograph" title="Figure 5-32. Positioning the second photograph">Figure 5-32</a> shows the result so far as well as the Layers dialog.</p></li></ol></div></div><div class="sect2" title="Touching Up the Panorama"><div class="titlepage"><div><div><h2 class="title"><a id="touching_up_the_panorama"/>Touching Up the Panorama</h2></div></div></div><p>Repeat this process for the remaining photographs: Load the photograph, set transparency to 50%, position it, remove the <a id="iddle1363" class="indexterm"/><a id="iddle3526" class="indexterm"/><a id="iddle3536" class="indexterm"/><a id="iddle3629" class="indexterm"/><a id="iddle3785" class="indexterm"/><a id="iddle3795" class="indexterm"/><a id="iddle3895" class="indexterm"/>transparency, add a layer mask, draw a gradient on this mask, and finish positioning the photograph. To avoid creating weird artifacts in the scenery, be careful not to make the gradient too wide and avoid placing it in an area with a lot of fine detail. As you add layers, the size of the image increases and, in this case, is 123.4MB after we’ve added all eight photographs.</p><div class="figure"><a id="positioning_the_second_photograph"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00412"/><img src="httpatomoreillycomsourcenostarchimages1454748.png.jpg" alt="Positioning the second photograph"/></div></div><p class="title">Figure 5-32. Positioning the second photograph</p></div><div class="figure"><a id="all_the_photographs_are_positioneddot"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00413"/><img src="httpatomoreillycomsourcenostarchimages1454750.png.jpg" alt="All the photographs are positioned."/></div></div><p class="title">Figure 5-33. All the photographs are positioned.</p></div><p>Sometimes, if a detail from the lower layer appears out of place, changing the gradient is helpful. You can adjust the gradient by painting on the layer mask, or you can add another gradient over the problem area—above the existing gradient. Set the second gradient to Multiply mode (from the M<span class="smaller">ODE</span> menu in the tool options dialog). To see the layer mask itself, <span class="inlinemediaobject"><a id="inline_id00182"/><img src="httpatomoreillycomsourcenostarchimages1454752.png.jpg" alt=""/></span>-click its thumbnail or right-click in the Layers dialog.</p><p>The current result appears in <a class="xref" href="ch05s03.html#all_the_photographs_are_positioneddot" title="Figure 5-33. All the photographs are positioned.">Figure 5-33</a>. The color of the sky is uneven at a couple of the junctions between photographs. Because the sky contains clouds and a light haze on the extreme right, replacing it completely with some <a id="iddle1165" class="indexterm"/><a id="iddle1658" class="indexterm"/><a id="iddle2176" class="indexterm"/><a id="iddle2272" class="indexterm"/><a id="iddle2647" class="indexterm"/><a id="iddle3566" class="indexterm"/><a id="iddle4180" class="indexterm"/><a id="iddle4261" class="indexterm"/><a id="iddle5479" class="indexterm"/><a id="iddle5536" class="indexterm"/>gradient between two different shades of blue would detract from the image. We prefer to leave the panorama as is, although some careful (and tedious) work with the Dodge/Burn tool (in Dodge mode) or the Clone tool could improve the result.</p><div class="figure"><a id="final_panorama"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00414"/><img src="httpatomoreillycomsourcenostarchimages1454754.png.jpg" alt="The final panorama"/></div></div><p class="title">Figure 5-34. The final panorama</p></div><div class="figure"><a id="pandora_filter_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00415"/><img src="httpatomoreillycomsourcenostarchimages1454756.png.jpg" alt="The Pandora filter dialog"/></div></div><p class="title">Figure 5-35. The Pandora filter dialog</p></div><p>With all the pictures in place, all that’s left is to crop and flatten the image. Our final panorama appears in <a class="xref" href="ch05s03.html#final_panorama" title="Figure 5-34. The final panorama">Figure 5-34</a>.</p></div><div class="sect2" title="The Pandora Plug-in"><div class="titlepage"><div><div><h2 class="title"><a id="pandora_plug-in"/>The Pandora Plug-in</h2></div></div></div><p>The Pandora plug-in, mentioned at the beginning of this section, can also be used to build a panorama. Here’s how you use it:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Load all the photographs as layers in a new image. Do this quickly using <span class="inlinemediaobject"><a id="inline_id00183"/><img src="httpatomoreillycomsourcenostarchimages1454210.png.jpg" alt=""/></span>.</p></li><li class="listitem"><p>Select the <span class="strong"><strong>Image: Filters &gt; Combine &gt; Spread out layers</strong></span> filter. In the dialog that appears (<a class="xref" href="ch05s03.html#pandora_filter_dialog" title="Figure 5-35. The Pandora filter dialog">Figure 5-35</a>), select the O<span class="smaller">VERLAP</span> quantity between images (in this case, 80 is better than 50) and decide whether the top layer is on the left or right. Note that the last image loaded becomes the top layer.</p><div class="figure"><a id="original_image-id00059"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00416"/><img src="httpatomoreillycomsourcenostarchimages1454758.png.jpg" alt="The original image"/></div></div><p class="title">Figure 5-36. The original image</p></div></li><li class="listitem"><p>The finishing touches are left up to you. Move the layers and fine-tune the layer masks to get a smooth panorama.</p></li></ol></div></div></div>
<div class="sect1" title="5.4 Image Overlaying"><div class="titlepage"><div><div><h1 class="title"><a id="fivedot4_image_overlaying"/>5.4 Image Overlaying</h1></div></div></div><p>In the previous section, we considered a very specific application of image overlaying. Now, we show you techniques for more general use.</p><div class="sect2" title="Digital Collage"><div class="titlepage"><div><div><h2 class="title"><a id="digital_collage"/>Digital Collage</h2></div></div></div><p>Begin with the photograph shown in <a class="xref" href="ch05s03.html#original_image-id00059" title="Figure 5-36. The original image">Figure 5-36</a>. We want to replace the seascape, seen through the window, with <a class="xref" href="ch05s04.html#new_background" title="Figure 5-37. A new background">Figure 5-37</a>. To do this, you need to make the seascape transparent. You could try selecting it with the Select by Color tool or the Fuzzy Select tool, but this time try a brand new method instead.</p><div class="figure"><a id="new_background"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00417"/><img src="httpatomoreillycomsourcenostarchimages1454760.png.jpg" alt="A new background"/></div></div><p class="title">Figure 5-37. A new background</p></div><div class="figure"><a id="apply_threshold_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00418"/><img src="httpatomoreillycomsourcenostarchimages1454762.png.jpg" alt="The Apply Threshold dialog"/></div></div><p class="title">Figure 5-38. The Apply Threshold dialog</p></div><p><a id="iddle1120" class="indexterm"/><a id="iddle1166" class="indexterm"/><a id="iddle2942" class="indexterm"/><a id="iddle3532" class="indexterm"/><a id="iddle3586" class="indexterm"/><a id="iddle3596" class="indexterm"/><a id="iddle3644" class="indexterm"/><a id="iddle3670" class="indexterm"/><a id="iddle3791" class="indexterm"/><a id="iddle4044" class="indexterm"/><a id="iddle4190" class="indexterm"/><a id="iddle5184" class="indexterm"/><a id="iddle5296" class="indexterm"/><a id="iddle5611" class="indexterm"/><a id="iddle5836" class="indexterm"/>Duplicate the layer, and choose the <span class="strong"><strong>Image: Colors &gt; Threshold</strong></span> tool, which opens the dialog shown in <a class="xref" href="ch05s04.html#apply_threshold_dialog" title="Figure 5-38. The Apply Threshold dialog">Figure 5-38</a>. Move the black triangle to the left until you see a silhouette of the window only. Invert it with <span class="strong"><strong>Image: Colors &gt; Invert</strong></span> to get the result in <a class="xref" href="ch05s04.html#threshold_result_after_inversion" title="Figure 5-39. Threshold result after inversion">Figure 5-39</a>. Use this as a mask to make the window fully transparent.</p><p>Now do the following:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Select the top layer and copy it.</p></li><li class="listitem"><p>Open the image shown in <a class="xref" href="ch05s04.html#new_background" title="Figure 5-37. A new background">Figure 5-37</a> as a new layer by selecting <span class="strong"><strong>Image: File &gt; Open as Layers</strong></span> or pressing <span class="inlinemediaobject"><a id="inline_id00184"/><img src="httpatomoreillycomsourcenostarchimages1454210.png.jpg" alt=""/></span>.</p></li><li class="listitem"><p>Duplicate the bottom layer, and move it to the top of the layer stack.</p></li><li class="listitem"><p>Add to it a layer mask (<span class="strong"><strong>Layers: right-click &gt; Add Layer Mask</strong></span>).</p></li><li class="listitem"><p>Paste the copy made earlier, and anchor it to the layer mask (<span class="inlinemediaobject"><a id="inline_id00185"/><img src="httpatomoreillycomsourcenostarchimages1454184.png.jpg" alt=""/></span> and <span class="inlinemediaobject"><a id="inline_id00186"/><img src="httpatomoreillycomsourcenostarchimages1454186.png.jpg" alt=""/></span>).</p></li><li class="listitem"><p>Arrange the layers as shown in <a class="xref" href="ch05s04.html#layers_dialog_for_figure_5dot41" title="Figure 5-40. The Layers dialog for Figure 5-41">Figure 5-40</a>.</p></li></ol></div><div class="figure"><a id="threshold_result_after_inversion"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00419"/><img src="httpatomoreillycomsourcenostarchimages1454764.png.jpg" alt="Threshold result after inversion"/></div></div><p class="title">Figure 5-39. Threshold result after inversion</p></div><div class="figure"><a id="layers_dialog_for_figure_5dot41"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00420"/><img src="httpatomoreillycomsourcenostarchimages1454766.png.jpg" alt="The Layers dialog for"/></div></div><p class="title">Figure 5-40. The Layers dialog for <a class="xref" href="ch05s04.html#with_the_new_background_added" title="Figure 5-41. With the new background added">Figure 5-41</a></p></div><div class="figure"><a id="with_the_new_background_added"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00421"/><img src="httpatomoreillycomsourcenostarchimages1454768.png.jpg" alt="With the new background added"/></div></div><p class="title">Figure 5-41. With the new background added</p></div><p>The resulting image appears in <a class="xref" href="ch05s04.html#with_the_new_background_added" title="Figure 5-41. With the new background added">Figure 5-41</a>. You could stop here. But the wall is so dark that its stones are almost invisible. Fortunately you can adjust this without altering the landscape seen through the window: In the Layers dialog, click the thumbnail in the top layer to select the layer and not the layer mask. Use the Levels tool (<span class="strong"><strong>Image: Colors &gt; Levels</strong></span>) to adjust the Gamma triangle until you’re satisfied. Only the layer is affected, not the layer mask or the other layers in the stack. If, on the other hand, you want <a id="iddle1065" class="indexterm"/><a id="iddle2667" class="indexterm"/><a id="iddle2765" class="indexterm"/><a id="iddle2903" class="indexterm"/><a id="iddle3622" class="indexterm"/><a id="iddle3645" class="indexterm"/><a id="iddle4086" class="indexterm"/><a id="iddle4391" class="indexterm"/><a id="iddle4976" class="indexterm"/><a id="iddle5185" class="indexterm"/><a id="iddle5584" class="indexterm"/><a id="iddle5672" class="indexterm"/><a id="iddle5776" class="indexterm"/>to adjust the layer mask, you could select its thumbnail and then use the Brush tool to add to or remove from the mask.</p><div class="figure"><a id="final_result-id00060"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00422"/><img src="httpatomoreillycomsourcenostarchimages1454770.png.jpg" alt="The final result"/></div></div><p class="title">Figure 5-42. The final result</p></div><div class="figure"><a id="frame"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00423"/><img src="httpatomoreillycomsourcenostarchimages1454772.png.jpg" alt="The frame"/></div></div><p class="title">Figure 5-43. The frame</p></div><p>The final image appears in <a class="xref" href="ch05s04.html#final_result-id00060" title="Figure 5-42. The final result">Figure 5-42</a>. Note the initial image is still present and unchanged in the bottom layer.</p><p>Next, use the same principles to build an image that’s slightly more complicated. The photograph shown in <a class="xref" href="ch05s04.html#frame" title="Figure 5-43. The frame">Figure 5-43</a> will serve as a frame for the portrait shown in <a class="xref" href="ch05s04.html#portrait" title="Figure 5-44. The portrait">Figure 5-44</a>. You want this portrait to appear in the open French windows, larger than life, but with the landscape still visible behind her. You first need to remove the beige background that’s currently behind the subject, which is easy enough. Once you’ve done that, however, you can’t simply copy the portrait and paste it in because her shoulders would extend beyond the window frame.</p><div class="figure"><a id="portrait"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00424"/><img src="httpatomoreillycomsourcenostarchimages1454774.png.jpg" alt="The portrait"/></div></div><p class="title">Figure 5-44. The portrait</p></div><p>To position the portrait properly in its unconventional frame, follow these steps:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Open the image shown in <a class="xref" href="ch05s04.html#frame" title="Figure 5-43. The frame">Figure 5-43</a>. Add an Alpha channel (<span class="strong"><strong>Image: Layer &gt; Transparency &gt; Add an Alpha Channel</strong></span> or <span class="strong"><strong>Layers: right-click &gt; Add an Alpha Channel</strong></span>).</p></li><li class="listitem"><p>Using the Free Select tool, make a selection by clicking the four corners of the French windows.</p></li><li class="listitem"><p>When the selection is complete, cut it and then paste it back into the image as a floating selection. Create a new layer from the floating selection (click the leftmost button at the bottom of the Layers dialog or press <span class="inlinemediaobject"><a id="inline_id00187"/><img src="httpatomoreillycomsourcenostarchimages1454182.png.jpg" alt=""/></span>). Move the new layer to the bottom of the layer stack. The image looks the same, but it’s divided into two different layers.</p></li><li class="listitem"><p>Open the photograph shown in <a class="xref" href="ch05s04.html#portrait" title="Figure 5-44. The portrait">Figure 5-44</a> as a new layer. Add an Alpha channel to this layer. Select the Fuzzy Select tool and select the beige background. Decrease the T<span class="smaller">HRESHOLD</span> in the tool options, and as usual, press <a id="iddle4287" class="indexterm"/><a id="iddle4392" class="indexterm"/><a id="iddle4804" class="indexterm"/><a id="iddle5740" class="indexterm"/><span class="inlinemediaobject"><a id="inline_id00188"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to add to, or <span class="inlinemediaobject"><a id="inline_id00189"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span> to remove from, the selection as you build. Take care when selecting the area around her hair. When you’re finished, cut the selection (<span class="inlinemediaobject"><a id="inline_id00190"/><img src="httpatomoreillycomsourcenostarchimages1454122.png.jpg" alt=""/></span>) and discard it (<span class="inlinemediaobject"><a id="inline_id00191"/><img src="httpatomoreillycomsourcenostarchimages1454172.png.jpg" alt=""/></span>).</p><div class="figure"><a id="layers_dialog_for_figure_5dot46"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00425"/><img src="httpatomoreillycomsourcenostarchimages1454776.png.jpg" alt="The Layers dialog for"/></div></div><p class="title">Figure 5-45. The Layers dialog for <a class="xref" href="ch05s04.html#final_result-id00061" title="Figure 5-46. The final result">Figure 5-46</a></p></div><div class="figure"><a id="final_result-id00061"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00426"/><img src="httpatomoreillycomsourcenostarchimages1454778.png.jpg" alt="The final result"/></div></div><p class="title">Figure 5-46. The final result</p></div></li><li class="listitem"><p>Select the Scale tool (<span class="inlinemediaobject"><a id="inline_id00192"/><img src="httpatomoreillycomsourcenostarchimages1453992.png.jpg" alt=""/></span>), choose N<span class="smaller">UMBER OF LINES</span> in the G<span class="smaller">UIDES</span> options, and click in the portrait layer. Enlarge the portrait, and move it into the window opening.</p><div class="figure"><a id="initial_photograph-id00062"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00427"/><img src="httpatomoreillycomsourcenostarchimages1454780.png.jpg" alt="The initial photograph"/><div class="caption"><p>Credit: Vincent Lecarme</p></div></div></div><p class="title">Figure 5-47. The initial photograph</p></div><div class="figure"><a id="self-compositing_in_hard_light_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00428"/><img src="httpatomoreillycomsourcenostarchimages1454782.png.jpg" alt="Self-compositing in Hard light mode"/></div></div><p class="title">Figure 5-48. Self-compositing in Hard light mode</p></div><div class="figure"><a id="duplicating_the_top_layer_twice_more"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00429"/><img src="httpatomoreillycomsourcenostarchimages1454784.png.jpg" alt="Duplicating the top layer twice more"/></div></div><p class="title">Figure 5-49. Duplicating the top layer twice more</p></div></li><li class="listitem"><p>Finally, arrange the layers so the French window is on top, the portrait layer is in the middle, and the cutout landscape is at the bottom, as shown in <a class="xref" href="ch05s04.html#layers_dialog_for_figure_5dot46" title="Figure 5-45. The Layers dialog for Figure 5-46">Figure 5-45</a>.</p></li></ol></div><p>The final result should resemble <a class="xref" href="ch05s04.html#final_result-id00061" title="Figure 5-46. The final result">Figure 5-46</a>.</p></div><div class="sect2" title="Self-Compositing"><div class="titlepage"><div><div><h2 class="title"><a id="self-compositing"/>Self-Compositing</h2></div></div></div><p>Here, begin with a photograph of a winter scene, shown in <a class="xref" href="ch05s04.html#initial_photograph-id00062" title="Figure 5-47. The initial photograph">Figure 5-47</a>, that is almost uniformly gray and flat. To transform this picture into the image shown in <a class="xref" href="ch05s04.html#self-compositing_in_hard_light_mode" title="Figure 5-48. Self-compositing in Hard light mode">Figure 5-48</a>, simply duplicate the <a id="iddle1339" class="indexterm"/><a id="iddle1385" class="indexterm"/><a id="iddle1939" class="indexterm"/><a id="iddle3190" class="indexterm"/><a id="iddle3527" class="indexterm"/><a id="iddle3671" class="indexterm"/><a id="iddle3685" class="indexterm"/><a id="iddle3786" class="indexterm"/><a id="iddle3864" class="indexterm"/><a id="iddle4890" class="indexterm"/><a id="iddle4933" class="indexterm"/><a id="iddle5612" class="indexterm"/><a id="iddle5626" class="indexterm"/><a id="iddle5655" class="indexterm"/>layer and change the mode of the top layer to Hard light. By repeating this process, you can increase the contrast further, but this adds a strong blue cast to the image, as shown in <a class="xref" href="ch05s04.html#duplicating_the_top_layer_twice_more" title="Figure 5-49. Duplicating the top layer twice more">Figure 5-49</a>. Correct this effect using the Levels tool.</p><div class="figure"><a id="initial_photograph-id00063"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00430"/><img src="httpatomoreillycomsourcenostarchimages1454786.png.jpg" alt="The initial photograph"/></div></div><p class="title">Figure 5-50. The initial photograph</p></div><div class="figure"><a id="self-compositing_in_screen_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00431"/><img src="httpatomoreillycomsourcenostarchimages1454788.png.jpg" alt="Self-compositing in Screen mode"/></div></div><p class="title">Figure 5-51. Self-compositing in Screen mode</p></div><p>The photograph shown in <a class="xref" href="ch05s04.html#initial_photograph-id00063" title="Figure 5-50. The initial photograph">Figure 5-50</a> (taken from an airplane) is much too dark. To lighten it, begin by duplicating the layer, as you did in the previous example, but this time use Screen mode.</p><p><a class="xref" href="ch05s04.html#self-compositing_in_screen_mode" title="Figure 5-51. Self-compositing in Screen mode">Figure 5-51</a> shows the result after two duplications. Now the color and detail in the foreground are visible, but some details in the lighter areas of the background have been lost.</p><p>To bring back some of that background detail, select the light areas in the image (i.e., the sky and the clouds) with the Fuzzy Select tool, but this time, forget about pressing <span class="inlinemediaobject"><a id="inline_id00193"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> or <span class="inlinemediaobject"><a id="inline_id00194"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>. Instead, click somewhere in the sky, and then drag the cursor down or to the right. As you do, the tool threshold increases, which increases the selected area. If you drag the cursor up or to the left, the selected area decreases. The result appears in <a class="xref" href="ch05s04.html#selecting_the_light_areas-id00064" title="Figure 5-52. Selecting the light areas">Figure 5-52</a>.</p><div class="figure"><a id="selecting_the_light_areas-id00064"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00432"/><img src="httpatomoreillycomsourcenostarchimages1454790.png.jpg" alt="Selecting the light areas"/></div></div><p class="title">Figure 5-52. Selecting the light areas</p></div><div class="figure"><a id="adding_a_layer_mask_to_shield_the_lighte"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00433"/><img src="httpatomoreillycomsourcenostarchimages1454792.png.jpg" alt="Adding a layer mask to shield the lighter parts"/></div></div><p class="title">Figure 5-53. Adding a layer mask to shield the lighter parts</p></div><p>Invert the selection (<span class="inlinemediaobject"><a id="inline_id00195"/><img src="httpatomoreillycomsourcenostarchimages1453948.png.jpg" alt=""/></span>), add a layer mask to the top layer, and in the dialog that appears, choose to create the mask from the current selection. Do this for the top layer only, however, to avoid creating an unnatural effect on the lighter areas of the mountains. <a class="xref" href="ch05s04.html#adding_a_layer_mask_to_shield_the_lighte" title="Figure 5-53. Adding a layer mask to shield the lighter parts">Figure 5-53</a> shows the result. The image could be improved more by adjusting the Gamma pointer in the Levels tool and by removing a few minor, age-related imperfections from the photograph, as you saw in <a class="xref" href="ch02.html" title="Chapter 2. Photograph Retouching">Chapter 2</a>.</p><p>Self-compositing photographs can also be used to create some artistic, filter-like effects. Open the photograph shown in <a class="xref" href="ch05s04.html#initial_photograph-id00065" title="Figure 5-54. The initial photograph">Figure 5-54</a> and duplicate the layer. If you set the top layer’s mode to Difference, the resulting image will be completely black because the difference between two equal quantities is always zero. But if you use the Move tool to move the top layer a few pixels up and to the left, you get the <a id="iddle1322" class="indexterm"/><a id="iddle1331" class="indexterm"/><a id="iddle2145" class="indexterm"/><a id="iddle3102" class="indexterm"/><a id="iddle4029" class="indexterm"/>image shown in <a class="xref" href="ch05s04.html#using_difference_mode" title="Figure 5-55. Using Difference mode">Figure 5-55</a>, which is a bit more interesting.</p><div class="figure"><a id="initial_photograph-id00065"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00434"/><img src="httpatomoreillycomsourcenostarchimages1454794.png.jpg" alt="The initial photograph"/></div></div><p class="title">Figure 5-54. The initial photograph</p></div><div class="figure"><a id="using_difference_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00435"/><img src="httpatomoreillycomsourcenostarchimages1454796.png.jpg" alt="Using Difference mode"/></div></div><p class="title">Figure 5-55. Using Difference mode</p></div><div class="figure"><a id="using_grain_extract_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00436"/><img src="httpatomoreillycomsourcenostarchimages1454798.png.jpg" alt="Using Grain extract mode"/></div></div><p class="title">Figure 5-56. Using Grain extract mode</p></div><div class="figure"><a id="using_divide_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00437"/><img src="httpatomoreillycomsourcenostarchimages1454800.png.jpg" alt="Using Divide mode"/></div></div><p class="title">Figure 5-57. Using Divide mode</p></div><div class="figure"><a id="initial_photograph-id00066"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00438"/><img src="httpatomoreillycomsourcenostarchimages1454802.png.jpg" alt="The initial photograph"/></div></div><p class="title">Figure 5-58. The initial photograph</p></div><p>Change the top layer’s mode to Grain extract to get <a class="xref" href="ch05s04.html#using_grain_extract_mode" title="Figure 5-56. Using Grain extract mode">Figure 5-56</a>. Then change it to Divide mode to get <a class="xref" href="ch05s04.html#using_divide_mode" title="Figure 5-57. Using Divide mode">Figure 5-57</a>. You can create variations on these effects by changing the amount and direction of offset or the top layer’s opacity or by adding new layers in different modes, and so on.</p></div><div class="sect2" title="A Composite Photography Project"><div class="titlepage"><div><div><h2 class="title"><a id="composite_photography_project"/>A Composite Photography Project</h2></div></div></div><p>The photograph shown in <a class="xref" href="ch05s04.html#initial_photograph-id00066" title="Figure 5-58. The initial photograph">Figure 5-58</a> was taken early in the morning when clouds partly filled in the valleys in front of Olivier’s house. He planned to use that image in a composite photography project, but he snapped the photo in a rush and the image doesn’t truly capture what he saw.</p><div class="figure"><a id="blue_channelapostrophes_histogram"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00439"/><img src="httpatomoreillycomsourcenostarchimages1454804.png.jpg" alt="The Blue channel’s histogram"/></div></div><p class="title">Figure 5-59. The Blue channel’s histogram</p></div><div class="figure"><a id="after_extending_the_levels"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00440"/><img src="httpatomoreillycomsourcenostarchimages1454806.png.jpg" alt="After extending the levels"/></div></div><p class="title">Figure 5-60. After extending the levels</p></div><p><a id="iddle1181" class="indexterm"/><a id="iddle1287" class="indexterm"/><a id="iddle1308" class="indexterm"/><a id="iddle1323" class="indexterm"/><a id="iddle1424" class="indexterm"/><a id="iddle1548" class="indexterm"/><a id="iddle2040" class="indexterm"/><a id="iddle2146" class="indexterm"/><a id="iddle2487" class="indexterm"/><a id="iddle2969" class="indexterm"/><a id="iddle3686" class="indexterm"/><a id="iddle5627" class="indexterm"/>If you call the Levels tool and look at the color histograms, you see the Green and Blue channels are truncated on the right. The Blue channel, which appears in <a class="xref" href="ch05s04.html#blue_channelapostrophes_histogram" title="Figure 5-59. The Blue channel’s histogram">Figure 5-59</a>, is the worst. Simply clicking the A<span class="smaller">UTO</span> button corrects this, and you get the result shown in <a class="xref" href="ch05s04.html#after_extending_the_levels" title="Figure 5-60. After extending the levels">Figure 5-60</a>. This landscape is now very much as Olivier remembers, so he decided to use it in the following creative project, shown in <a class="xref" href="ch05s04.html#compositing_with_another_image_in_darken" title="Figure 5-61. Compositing with another image in Darken only mode">Figure 5-61</a>.</p><p>Here’s how to create this image:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Add the image shown in <a class="xref" href="ch05s03.html#original_image-id00059" title="Figure 5-36. The original image">Figure 5-36</a> to Olivier’s landscape as a new layer.</p></li><li class="listitem"><p>Scale this layer to the same width as the underlying image (<span class="strong"><strong>Image: Layer &gt; Scale Layer</strong></span>).</p></li><li class="listitem"><p>Set the top layer to Darken only mode.</p></li><li class="listitem"><p>Crop the image.</p></li></ol></div><div class="figure"><a id="compositing_with_another_image_in_darken"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00441"/><img src="httpatomoreillycomsourcenostarchimages1454808.png.jpg" alt="Compositing with another image in Darken only mode"/></div></div><p class="title">Figure 5-61. Compositing with another image in Darken only mode</p></div><div class="figure"><a id="another_image_to_be_composited"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00442"/><img src="httpatomoreillycomsourcenostarchimages1454810.png.jpg" alt="Another image to be composited"/></div></div><p class="title">Figure 5-62. Another image to be composited</p></div><div class="figure"><a id="compositing_with_another_image_in_burn_m"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00443"/><img src="httpatomoreillycomsourcenostarchimages1454812.png.jpg" alt="Compositing with another image in Burn mode"/></div></div><p class="title">Figure 5-63. Compositing with another image in Burn mode</p></div><p>Similarly, add the photograph shown in <a class="xref" href="ch05s04.html#another_image_to_be_composited" title="Figure 5-62. Another image to be composited">Figure 5-62</a> to the image as another layer, and select Burn mode. You’ll get the image shown in <a class="xref" href="ch05s04.html#compositing_with_another_image_in_burn_m" title="Figure 5-63. Compositing with another image in Burn mode">Figure 5-63</a>.</p><p>In the following examples, we duplicated an image layer and then coupled various blending modes with a Gaussian blur of radius 10 that we applied to the top layer. <a class="xref" href="ch05s04.html#blurred_layer_in_divide_mode" title="Figure 5-64. A blurred layer in Divide mode">Figure 5-64</a> shows the result when the top layer is set to Divide mode.</p><div class="figure"><a id="blurred_layer_in_divide_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00444"/><img src="httpatomoreillycomsourcenostarchimages1454814.png.jpg" alt="A blurred layer in Divide mode"/></div></div><p class="title">Figure 5-64. A blurred layer in Divide mode</p></div><div class="figure"><a id="blurred_layer_in_difference_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00445"/><img src="httpatomoreillycomsourcenostarchimages1454816.png.jpg" alt="A blurred layer in Difference mode"/></div></div><p class="title">Figure 5-65. A blurred layer in Difference mode</p></div><div class="figure"><a id="top_layer_in_burn_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00446"/><img src="httpatomoreillycomsourcenostarchimages1454818.png.jpg" alt="The top layer in Burn mode"/></div></div><p class="title">Figure 5-66. The top layer in Burn mode</p></div><p><a id="iddle1288" class="indexterm"/><a id="iddle1316" class="indexterm"/><a id="iddle1549" class="indexterm"/><a id="iddle2082" class="indexterm"/><a id="iddle3672" class="indexterm"/><a id="iddle4182" class="indexterm"/><a id="iddle5122" class="indexterm"/><a id="iddle5613" class="indexterm"/><a id="iddle5818" class="indexterm"/>To create <a class="xref" href="ch05s04.html#blurred_layer_in_difference_mode" title="Figure 5-65. A blurred layer in Difference mode">Figure 5-65</a>, we chose Difference mode, and we also adjusted the Levels by moving the Gamma triangle to the left.</p><p>In <a class="xref" href="ch05s04.html#top_layer_in_burn_mode" title="Figure 5-66. The top layer in Burn mode">Figure 5-66</a>, we removed the Gaussian blur and set the layer to Burn mode. Note how this enhances the clouds in the foreground.</p><p>You can add depth by moving the top layer 10 pixels up and to the left. The offset images in <a class="xref" href="ch05s04.html#offset_layer_in_divide_mode" title="Figure 5-67. An offset layer in Divide mode">Figure 5-67</a> and <a class="xref" href="ch05s04.html#offset_layer_in_difference_mode" title="Figure 5-68. An offset layer in Difference mode">Figure 5-68</a> were cropped to illustrate the effect.</p><div class="figure"><a id="offset_layer_in_divide_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00447"/><img src="httpatomoreillycomsourcenostarchimages1454820.png.jpg" alt="An offset layer in Divide mode"/></div></div><p class="title">Figure 5-67. An offset layer in Divide mode</p></div><div class="figure"><a id="offset_layer_in_difference_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00448"/><img src="httpatomoreillycomsourcenostarchimages1454822.png.jpg" alt="An offset layer in Difference mode"/></div></div><p class="title">Figure 5-68. An offset layer in Difference mode</p></div></div></div>
<div class="sect1" title="5.5 Exercises"><div class="titlepage"><div><div><h1 class="title"><a id="fivedot5_exercises"/>5.5 Exercises</h1></div></div></div><p><span class="strong"><strong>Exercise 5.1.</strong></span> Finding a single set of images that can be used to accurately demonstrate all blending modes is a difficult task. The choice made in <a class="xref" href="ch05s02.html#using_blending_modes" title="Using Blending Modes">Using Blending Modes</a> is not ideal. Find a better set of images for this demonstration.</p><p><span class="strong"><strong>Exercise 5.2.</strong></span> Creating a uniform sky is often the most difficult part of panorama construction. Explore solutions to the problems seen in <a class="xref" href="ch05s03.html#final_panorama" title="Figure 5-34. The final panorama">Figure 5-34</a>. Adjust the layer mask before merging the layers or touch up the final result using the Smudge tool, for example.</p><p><span class="strong"><strong>Exercise 5.3.</strong></span> The photograph shown in <a class="xref" href="ch05s04.html#frame" title="Figure 5-43. The frame">Figure 5-43</a> contains two potted plants with large leaves, which might look nice in front of the subject instead of behind her. Devise a method to do this.</p><p><span class="strong"><strong>Exercise 5.4.</strong></span> Using the concepts demonstrated in <a class="xref" href="ch05s04.html#self-compositing" title="Self-Compositing">Self-Compositing</a>, create a unique work of art with your own digital photos.</p></div></body></html>