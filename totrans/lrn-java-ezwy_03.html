<html><head></head><body>
<h2 class="h2" id="ch3"><span epub:type="pagebreak" id="page_43"/><span class="big"><strong>3</strong></span></h2>&#13;
<h2 class="h2a">CREATING A GUI FOR OUR GUESSING GAME</h2>&#13;
<div class="image21"><img src="../images/circle.jpg" alt="Image"/></div>&#13;
<p class="noindent">In this chapter, we’ll create a GUI version of the Hi-Lo guessing game from <a href="ch2.xhtml#ch2">Chapter 2</a>, as shown in <a href="ch3.xhtml#ch3fig1">Figure 3-1</a>. When this version of the program runs, it presents a graphical, or visual, interface that users will interact with. The GUI version allows the user to play the game in a desktop window like the applications you use every day. It’s a professional, windowed app complete with a text field for the user’s guess, a button to submit the guess, and a label that tells the user if they’ve guessed too high, too low, or correctly.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_44"/><img src="../images/f0044-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig1"/>Figure 3-1: A GUI version of the Hi-Lo guessing game running on Windows (left) and on macOS (right)</em></p>&#13;
<p class="indent">Best of all, the exact same Java source code produced both versions of the app in <a href="ch3.xhtml#ch3fig1">Figure 3-1</a>. With the GUI code we’ll write in this chapter, our game will be playable on Windows, macOS, and Linux!</p>&#13;
<h3 class="h3"><a id="toc_lev36"/>Practicing with JShell</h3>&#13;
<p class="noindent">JShell works at the command line, accepting text commands and usually responding with text output. However, JShell also has access to the full set of Java libraries—prewritten packages of code—and isn’t limited to just text. Before we start programming our game, let’s create a simple GUI in JShell as practice.</p>&#13;
<h4 class="h4"><em><a id="toc_lev37"/>Creating a GUI in Four Lines of Code</em></h4>&#13;
<p class="noindent">We can create a simple GUI window with just four lines of code in JShell. Let’s take each statement one at a time. First, enter an <code>import</code> statement into JShell to import the <code>javax.swing.JFrame</code> class:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">import javax.swing.JFrame</span></p>&#13;
<p class="indent">The <code>JFrame</code> class we’ve just imported creates a frame or window using Java. Next, let’s create a frame using that class. Enter the following declaration to create a <code>JFrame</code> called <code>myFrame</code>:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">JFrame myFrame = new JFrame("Hello!")</span></p>&#13;
<p class="indent">The <code>new</code> keyword creates a new object of the <code>JFrame</code> class—in this case, a GUI window that we’ll program to say <code>"Hello!"</code> in its title bar. JShell responds with a long line letting us know some of the default properties the window will have:</p>&#13;
<p class="pre">myFrame ==&gt; javax.swing.JFrame[frame1,0,0,0x0,invalid,hidden,layout=java.awt.BorderLayou ...</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_45"/>The information shown after the square bracket is a string representation of <code>myFrame</code> and its property values, like its size (<code>0x0</code>, which is 0 by 0 pixels) and whether it’s hidden or visible. Let’s change one of those properties by setting the size to something bigger than 0 by 0 pixels.</p>&#13;
<p class="indent">The third line of code sets the size of the window in pixels by specifying a width and height for the frame:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">myFrame.setSize(300,200)</span></p>&#13;
<p class="indent">This tells Java to make the window 300 pixels wide and 200 pixels tall, big enough for us to see the window and title bar.</p>&#13;
<p class="indent">Finally, let’s show the window on the screen by calling the <code>setVisible()</code> method:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">myFrame.setVisible(true)</span></p>&#13;
<p class="indent">We use <code>setVisible(true)</code> to show a window and <code>setVisible(false)</code> to hide it. Since we’ve called <code>myFrame.setVisible(true)</code>, you should see your window appear on the screen, as shown in <a href="ch3.xhtml#ch3fig2">Figure 3-2</a>.</p>&#13;
<div class="image"><img src="../images/f0045-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig2"/>Figure 3-2: Our GUI window on Windows (left) and on macOS (right)</em></p>&#13;
<p class="indent">We’ve created a GUI window by entering just four snippets of code into JShell!</p>&#13;
<h4 class="h4"><em><a id="toc_lev38"/>Creating an Interactive GUI in 10 Lines of Code!</em></h4>&#13;
<p class="noindent">I showed the previous example to my students at the university and to my sons at home, and both groups responded with something like “That’s really cool, but can you make the window <em>do</em> something?”</p>&#13;
<p class="indent">Thankfully, the answer is yes. By adding just a few more lines of code, we can add a button to the window that prints something every time you click it.</p>&#13;
<p class="indent">Let’s begin with a fresh JShell. Clear your JShell history by entering <span class="codestrong"><code>/reset</code></span> at the JShell prompt:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">/reset</span><br/>&#13;
|  Resetting state.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_46"/>Next, let’s use the built-in JShell editor to write a 10-line snippet of code to create an interactive GUI app that responds to your click. At the JShell prompt, enter <span class="codestrong"><code>/edit</code></span> to open the JShell editor:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">/edit</span></p>&#13;
<p class="indent">The JShell Edit Pad, which is helpful when we want to write several lines of code at once or when we want to go back and edit a line we’ve typed earlier, appears with an empty window as shown in <a href="ch3.xhtml#ch3fig3">Figure 3-3</a>.</p>&#13;
<div class="image"><img src="../images/f0046-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig3"/>Figure 3-3: The JShell Edit Pad is a convenient editor for writing longer snippets of code.</em></p>&#13;
<p class="indent">In this case, we want to type 10 lines of code that will create an interactive GUI window with a button that prints something when it’s clicked. Enter the following lines, being extra careful with your capitalization and adding a semicolon at the end of each complete statement to separate the multiple commands:</p>&#13;
<p class="pre">  import javax.swing.*;<br/>&#13;
  JFrame window = new JFrame("Bryson's Window");<br/>&#13;
<span class="ent">➊</span> JPanel panel = new JPanel();<br/>&#13;
  JButton button = new JButton(<span class="ent">➋</span>"Click me!");<br/>&#13;
<span class="ent">➌</span> panel.add(button);<br/>&#13;
<span class="ent">➍</span> window.add(panel);<br/>&#13;
  window.setSize(<span class="ent">➎</span>300,100);<br/>&#13;
<span class="ent">➏</span> button.addActionListener(e -&gt;<br/>&#13;
       System.out.println("Ouch! You clicked me!"));<br/>&#13;
<span class="ent">➐</span> window.setVisible(true);</p>&#13;
<p class="indent">First, we import all the Swing GUI classes, including <code>JFrame</code>, <code>JPanel</code>, and <code>JButton</code>. An asterisk (<code>*</code>) at the end of a Java library is called a <em>wildcard character</em> and means “include every class in this package.” Then, we create a <code>JFrame</code> just like we did in the previous example. At <span class="ent">➊</span>, we create a panel inside the window. The panel will serve as a container for other GUI components like labels and buttons.</p>&#13;
<p class="indent">Next, we add a button with the text “Click me!” <span class="ent">➋</span> printed on it. At <span class="ent">➌</span>, we add the button to our GUI panel, and then we add the panel to the window at <span class="ent">➍</span>. Then, we set the size of the window to 300 pixels wide by 100 pixels high <span class="ent">➎</span>, similar to the previous example.</p>&#13;
<p class="indent">The lines at <span class="ent">➏</span> are where the magic happens: here we add an action listener to the “Click me!” button to respond every time the user clicks the <span epub:type="pagebreak" id="page_47"/>button. The action listener will print <code>"Ouch! You clicked me!"</code> to the console whenever the user clicks the GUI button. We’ll use listeners like this one in the GUI apps we build in this book to make the programs interact with the user whenever the user performs an action.</p>&#13;
<p class="indent">Finally, we make the window visible <span class="ent">➐</span>, and we’re ready to test the program by clicking the button.</p>&#13;
<p class="indent">When you’ve finished typing all 10 lines of code and double-checked them for accuracy, click the <strong>Accept</strong> button in JShell Edit Pad to accept the code and run it in JShell, as shown in <a href="ch3.xhtml#ch3fig4">Figure 3-4</a>.</p>&#13;
<p class="indent">After accepting the code, click <strong>Exit</strong> to close the JShell Edit Pad. JShell will run the code snippet, and if you’ve typed everything correctly, you’ll see a small window pop up like the one in <a href="ch3.xhtml#ch3fig5">Figure 3-5</a>.</p>&#13;
<div class="image"><img src="../images/f0047-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig4"/>Figure 3-4: After typing all 10 lines of code into the JShell Edit Pad, click</em> <strong><em>Accept</em></strong>.</p>&#13;
<div class="image"><img src="../images/f0047-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig5"/>Figure 3-5: An interactive GUI window with a clickable button</em></p>&#13;
<p class="indent">Click the button labeled <strong>Click me!</strong> with your mouse, and you’ll see Java respond as follows in the JShell window:</p>&#13;
<p class="pre">jshell&gt; Ouch! You clicked me!<br/>&#13;
Ouch! You clicked me!<br/>&#13;
Ouch! You clicked me!<br/>&#13;
Ouch! You clicked me!</p>&#13;
<p class="indent">If you close the small GUI window, all you have to do to get it back is repeat the last line that sets the window to visible. Press <small>ENTER</small> a couple of times after clicking back into the JShell command line window to get the prompt and cursor back and then enter the following:</p>&#13;
<p class="pre">jshell&gt; <span class="codestrong">window.setVisible(true)</span></p>&#13;
<p class="indent">The window reappears when we set the visible property to <code>true</code>; if you close the window, the visible property becomes <code>false</code>.</p>&#13;
<p class="indent">This 10-line snippet is cool enough, but now you’ll learn how to build a game with a GUI!</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_48"/><a id="toc_lev39"/>Setting Up the GUI App in Eclipse</h3>&#13;
<p class="noindent">If you still have the <em>HiLo</em> project open in Eclipse from <a href="ch2.xhtml#ch2">Chapter 2</a>, as in <a href="ch3.xhtml#ch3fig6">Figure 3-6</a>, close or minimize the editor window for any other Java files you may have been working on <span class="ent">➊</span>. Also, collapse the <em>HiLo</em> project by clicking the small down arrow next to the <em>HiLo</em> folder in the Package Explorer on the left side <span class="ent">➋</span>. This allows us to keep projects together in a single workspace without getting files mixed up.</p>&#13;
<div class="image"><img src="../images/f0048-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig6"/>Figure 3-6: Close any open files and collapse the</em> HiLo <em>project folder.</em></p>&#13;
<p class="indent">From the Eclipse menu bar, go to <strong>File</strong> <span class="ent">▸</span> <strong>New</strong> <span class="ent">▸</span> <strong>Java Project</strong> and name the project <em>GuessingGame</em>. After you’ve typed in the project name, click the <strong>Finish</strong> button at the lower right. This creates the new project folder in which we’ll develop the GUI version of the guessing game.</p>&#13;
<p class="indent">Expand the <em>GuessingGame</em> folder in the Package Explorer window and find the <em>src</em> folder. Right-click (or, on macOS, <small>CONTROL</small>-click) the <em>src</em> folder and select <strong>New</strong> <span class="ent">▸</span> <strong>Class</strong>. Name the new class <span class="codestrong"><code>GuessingGame</code></span>. Be sure to use camel case, beginning with an uppercase <em>G</em> for the class name. Check the box next to the <strong>public static void main(String[] args)</strong> method stub. This adds the skeleton of a <code>main()</code> method so that we can run our app as a stand-alone program.</p>&#13;
<p class="indent">Before we finish, we’ll need to do one more step differently than in the command line app we built in <a href="ch2.xhtml#ch2">Chapter 2</a>. We’re going to change the superclass from the default <code>java.lang.Object</code> to the <code>javax.swing.JFrame</code> class, like the <code>JFrame</code> we used in JShell at the beginning of this chapter. A <em>superclass</em> or <em>parent class</em> in Java is a class that we extend in order to reuse code that’s already been written, which in this case is the code needed to build a graphical, windowed interface. The <code>JFrame</code> class in the <code>javax.swing</code> package is one way we can include GUI components in our own apps, so we’ll use <code>JFrame</code> to create a window and then customize a version of it to add some more features. Since the <code>JFrame</code> class is an extension of the <code>Object</code> superclass itself, we don’t need <code>java.lang.Object</code> because <code>JFrame</code> will <em>inherit</em> the <code>Object</code> superclass’s code. That means that <code>JFrame</code> will have all the features of the <code>Object</code> class, plus some. We’ll see how extensions work in a bit.</p>&#13;
<p class="indent"><a href="ch3.xhtml#ch3fig7">Figure 3-7</a> shows these settings in the New Java Class dialog for our guessing game.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_49"/><img src="../images/f0049-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig7"/>Figure 3-7: Be sure to change the superclass to javax.swing.JFrame to prepare for a GUI class.</em></p>&#13;
<p class="indent">Click <strong>Finish</strong> to see the following source code for <em>GuessingGame.java</em>:</p>&#13;
<p class="pre"><span class="ent">➊</span> import javax.swing.JFrame;<br/>&#13;
   public class GuessingGame <span class="ent">➋</span>extends JFrame {<br/>&#13;
       public static void main(String[] args) {<br/>&#13;
           // TODO Auto-generated method stub<br/>&#13;
       }<br/>&#13;
}</p>&#13;
<p class="indent">On the first line, Eclipse has imported the <code>javax.swing.JFrame</code> class <span class="ent">➊</span> to allow our program to use the GUI capabilities of Swing’s set of packages. In the second line, we use a new coding superpower, the <code>extends</code> keyword <span class="ent">➋</span>.</p>&#13;
<p class="indent">In object-oriented programming, a parent class or superclass can have <em>child classes</em> that inherit all the methods and attributes contained in the parent class. Once we write a class that does something important that we plan to reuse, we can refer to that original class and <em>extend</em> it to add new functionality without changing the code in the parent class. In this case, a <code>JFrame</code> parent class has the ability to display text fields, labels, buttons, and other GUI components that we can customize and arrange for the new guessing game app.</p>&#13;
<p class="indent">The <code>JFrame</code> parent class we’re extending in this app will enable us to display a window with GUI elements like text fields, labels, and buttons by designing the GUI layout with the WindowBuilder Editor in Eclipse. Let’s see how the WindowBuilder Editor works next.</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_50"/><a id="toc_lev40"/>GUI Design with Eclipse’s WindowBuilder Editor</h3>&#13;
<p class="noindent">The most popular Java IDEs include tools to help programmers build an attractive GUI in a design view, with a what-you-see-is-what-you-get (WYSIWYG) interface. WYSIWYG interfaces allow users to position design elements as they will look in the final product. For instance, Microsoft Word is a WYSIWYG interface, because it allows you to edit text as it will look in its final print form. In the same way, Java IDE tools like the WindowBuilder Editor allow programmers to place GUI components like text fields, labels, and buttons as they will look in the final windowed application, helping programmers deliver professional-looking GUI apps.</p>&#13;
<p class="indent">To open the WindowBuilder Editor, right-click the <em>GuessingGame.java</em> file in the Package Explorer on the left and then select <strong>Open With</strong> <span class="ent">▸</span> <strong>WindowBuilder Editor</strong>. A new window that looks like a regular text editor will open. But, if you look at the lower-left corner of the window, you’ll see two new tabs, Source and Design. The Source tab is the plain text, source code view of your application. If you click the Design tab, you’ll see the design view shown in <a href="ch3.xhtml#ch3fig8">Figure 3-8</a>.</p>&#13;
<p class="indent">The WindowBuilder Editor appears only for GUI classes, such as <code>GuessingGame</code>, that extend <code>JFrame</code> or one of the other GUI superclasses. Notice that the preview window has a title bar with a Java icon on the left side and three buttons to minimize, maximize, and close the window. The preview window in <a href="ch3.xhtml#ch3fig8">Figure 3-8</a> looks slightly different on Windows, macOS, and Linux. This window will be our playground for building a GUI guessing game that looks and feels like a real app.</p>&#13;
<div class="image"><img src="../images/f0050-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig8"/>Figure 3-8: The WindowBuilder Editor’s Design tab makes it easy to build GUI windowed apps.</em></p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_51"/><a id="toc_lev41"/>Designing the User Interface</h3>&#13;
<p class="noindent">Double-click the <em>GuessingGame.java</em> tab at the top of the WindowBuilder Editor to expand the WindowBuilder design view to fullscreen. This will create more room for designing the GUI layout. You can double-click the tab again to restore the normal Java perspective when you’re ready to get back to programming.</p>&#13;
<h4 class="h4"><em><a id="toc_lev42"/>Setting GUI Properties in the Properties Pane</em></h4>&#13;
<p class="noindent">We’ll use the Properties pane to start customizing the GUI window for our guessing game. The Properties pane can be found on the bottom left of the Design tab in the WindowBuilder Editor. As you can see in <a href="ch3.xhtml#ch3fig9">Figure 3-9</a>, if you click a component in the Components pane (on the left under Structure), the Properties pane immediately below it lists several properties and values we can view and edit for that component.</p>&#13;
<div class="image"><img src="../images/f0051-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig9"/>Figure 3-9: The Properties pane helps you customize the properties of each GUI component in your app.</em></p>&#13;
<p class="indent">We’re going to build a customized GUI window for the guessing game app. First, let’s change the title property of this <code>JFrame</code>. In the Components pane, click <strong>javax.swing.JFrame</strong>, then scroll down in the Properties pane until you see the <code>title</code> property. Click in the empty box to the right of <code>title</code> and enter <span class="codeitalic"><span class="codestrong"><code>Your Name</code></span></span><span class="codestrong"><code>'s</code> <code>Hi-Lo Guessing Game</code></span>. (Replace the italicized text with your name; this is your app, after all!) After you enter the title text, press <small>ENTER</small>. The GUI preview on the right will automatically update to show <em>Your Name</em>’s Hi-Lo Guessing Game in the title bar.</p>&#13;
<p class="indent">With the title done, let’s set a few other properties to make the GUI look and behave like we want for the guessing game. Scroll up in the Properties pane to find <code>defaultCloseOperation</code> (it may just display part of the <span epub:type="pagebreak" id="page_52"/>name like <code>defaultClose...</code> or something similar if the pane is too narrow). Click the box to the right of <code>defaultCloseOperation</code> and select <strong>EXIT_ON _CLOSE</strong> from the drop-down menu. This means that when you click the close window button on the title bar of this <code>JFrame</code>, you’ll exit the program. This is usually the default, but there might be times you want to close a window but not close the whole application—for example, in a save dialog or a pop-up window. For this single-window game, though, we want to exit the application when the main window closes.</p>&#13;
<p class="indent">Next, we’ll change the way GUI components are arranged inside the app window. Click the <strong>getContentPane()</strong> entry in the Components pane, just under <code>javax.swing.JFrame</code>. A <em>content pane</em> is the <em>interior</em> of the <code>JFrame</code>, where we’ll build the guessing game GUI layout. Now, find Layout in the Properties pane and click the down arrow in the right edge of the field. Select <strong>Absolute Layout</strong> from the drop-down list of values; this enables us to place GUI elements with pixel-perfect precision.</p>&#13;
<h4 class="h4"><em><a id="toc_lev43"/>Customizing GUI Components in the Palette Pane</em></h4>&#13;
<p class="noindent">Let’s start customizing our guessing game app. You can find the elements you’ll need for almost any GUI app in the Palette pane. The Palette pane can be found in the middle of the WindowBuilder Editor on the Design tab. Note that you can expand or collapse a pane by clicking the small arrow to the left of the pane’s title. Click the arrow once to collapse the pane. Click the arrow again to expand the pane. This can be handy when you need extra room for a large, complex GUI layout.</p>&#13;
<p class="indent">In the Palette, scroll down until you see the Components section, as shown in <a href="ch3.xhtml#ch3fig10">Figure 3-10</a>.</p>&#13;
<p class="indent">The Palette contains all the standard components you’re probably already familiar with, like labels (<code>JLabel</code>), text fields (<code>JTextField</code>), buttons (<code>JButton</code>), and checkboxes (<code>JCheckBox</code>). You might have noticed that GUI components in the <code>javax.swing</code> package all begin with an uppercase J, followed by the name of the component in camel case. This makes it easy to remember the class name for each of the GUI elements in an app that uses the Swing toolkit.</p>&#13;
<p class="indent">Let’s place a label at the top of the GUI window that says <em>Your Name</em>’s Hi-Lo Guessing Game. Click <strong>JLabel</strong> under Components in the Palette. Then, mouse over the GUI preview on the right; you should see gridlines appear. By default, the WindowBuilder Editor provides these gridlines to help you place elements. Now, hover your mouse near the top center of the gray content pane (the interior of the <code>JFrame</code>) and click to place a <code>JLabel</code> in that spot.</p>&#13;
<div class="image"><img src="../images/f0052-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig10"/>Figure 3-10: The Components section in the Palette pane is where we’ll find the most common GUI components.</em></p>&#13;
<p class="indent">When you first place the <code>JLabel</code>, you can edit the text in the label directly in the GUI preview. Type <span class="codeitalic"><span class="codestrong"><code>Your Name</code></span></span><span class="codestrong"><code>'s Hi-Lo Guessing Game</code></span> and press <span epub:type="pagebreak" id="page_53"/><small>ENTER</small>. If you want to change the text later, go to the <code>text</code> property of the <code>JLabel</code> in the Properties pane on the lower left and type in your text. At first, you’ll probably only see part of the text in the label, because the label is too small to show the full text. Click the label, and you’ll see small black resizing squares on each corner. Click the lower-left corner of the label and drag it to the left border of the content pane to stretch the label to the content pane’s left edge. Then, click the label’s lower-right corner and drag to resize it to the content pane’s right edge.</p>&#13;
<p class="indent">Now your full label text should fit inside the label at the top of the GUI preview. Next let’s make the label text centered and bold. First, find the <code>horizontalAlignment</code> property of the label in the Properties pane. Click the value and choose <strong>CENTER</strong> from the drop-down list. Next, find the <code>font</code> property of the label and click the three dots to the right of the <code>font</code> property’s value. A font chooser window will open, allowing you to choose a font, style, and size. I chose Tahoma, 15 point, and Bold, as shown in <a href="ch3.xhtml#ch3fig11">Figure 3-11</a>. Note that you may have to resize your label to fit a larger font.</p>&#13;
<div class="image"><img src="../images/f0053-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig11"/>Figure 3-11: The first label, customized and in place, at the top of the content pane</em></p>&#13;
<p class="indent">Let’s add a label for the first prompt a user will see in the game. Click <strong>JLabel</strong> in the Palette pane, then place the new label just above the middle of the content pane. Enter <span class="codestrong"><code>Guess a number between 1 and 100:</code></span> as the text of the label. You’ll need to resize the label a little wider than the text for extra padding.</p>&#13;
<p class="indent">Just to the right of the label, let’s place a text field for the user to enter their guess. Click <strong>JTextField</strong> on the Palette and then drop the text field into place to the right of the label you just placed.</p>&#13;
<p class="indent">Resize it so it’s just big enough to hold a three-digit number. Click the label again and change its <code>horizontalAlignment</code> property to <strong>RIGHT</strong> to bring the text closer to the text field, as shown in <a href="ch3.xhtml#ch3fig12">Figure 3-12</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_54"/><img src="../images/f0054-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig12"/>Figure 3-12: The guessing game now has a label and text field for the user’s guess.</em></p>&#13;
<p class="indent">Next, let’s place a button the user can push to submit their guess. On the Palette, find and click <strong>JButton</strong>. Mouse over the middle of the GUI preview window and click to place the <code>JButton</code>. Change the text to <span class="codestrong"><code>Guess!</code></span>.</p>&#13;
<p class="indent">Finally, place a <code>JLabel</code> below the button, give it the text <span class="codestrong"><code>Enter a number above and click Guess!</code></span>, and resize the label to the full width of the <code>JFrame</code>. Then, change the <code>horizontalAlignment</code> to <strong>CENTER</strong>. Later, this label will also be where we tell users whether they guessed too high, too low, or correctly. The alignment of each component may not be perfect yet, but your GUI layout should look something like <a href="ch3.xhtml#ch3fig13">Figure 3-13</a>.</p>&#13;
<div class="image"><img src="../images/f0054-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig13"/>Figure 3-13: The GUI layout has all the components, just not perfectly aligned yet.</em></p>&#13;
<p class="indent">Now that we have all the GUI components on the screen, we’re ready to make a few tweaks to balance and center the layout. First, be sure to save your file.</p>&#13;
<h4 class="h4"><em><a id="toc_lev44"/>Aligning GUI Elements</em></h4>&#13;
<p class="noindent">So far, we’ve been positioning GUI components by eye, trying to space them correctly and center them as much as possible. However, when we run a program, we expect the layout to be “perfect.” Fortunately, Eclipse has built-in tools to help us align components.</p>&#13;
<p class="indent">First, let’s distribute the four main elements evenly, spacing them the same distance apart vertically. Select the three labels and the button by clicking each one while holding down the <small>SHIFT</small> button. For now, don’t click the text field where the user enters their guess. You should see a small row of alignment tools appear above the GUI preview window. Mouse over <span epub:type="pagebreak" id="page_55"/>each tool to see a tool tip that tells you what that button does. You may need to resize your Eclipse window if you don’t see all the tools at first.</p>&#13;
<p class="indent">Click the tool that looks like stacked buttons (the rightmost icon in <a href="ch3.xhtml#ch3fig14">Figure 3-14</a>). All four selected items should now be spaced an equal distance apart from top to bottom.</p>&#13;
<p class="indent">Now select just the text field. Move it to realign it with the label prompting the user to guess a number. We didn’t include the text field originally because Eclipse would have distributed all five components evenly, separating the text field and its label from each other and creating five rows instead of four.</p>&#13;
<div class="image"><img src="../images/f0055-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig14"/>Figure 3-14: You can align and space components evenly using the tools above the GUI preview window.</em></p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>If you ever mess up while aligning things (or doing anything else) in WindowBuilder, you can undo your previous action by pressing CTRL-Z or</em> <img src="../images/symbol.jpg" alt="Image"/><em>-Z. This is a great safety feature in the WindowBuilder Editor and lets you try new things without permanently messing up the layout.</em></p>&#13;
</div>&#13;
<p class="indent">Finally, click the button labeled <strong>Guess!</strong> and click the alignment button above the GUI preview (the one near the far right with the tool tip “Center horizontally in window”). You can center or adjust the other components as desired. If you want to move two or more components together, you can <small>SHIFT</small>-click to select both, then click and drag to move them.</p>&#13;
<p class="indent">When you’re happy with the layout, it’s time to prepare for coding by naming the components. Take a moment to save your changes.</p>&#13;
<h4 class="h4"><em><a id="toc_lev45"/>Naming GUI Components for Coding</em></h4>&#13;
<p class="noindent">The user interface of the guessing game app is ready for the player. To make the app easier to work with, however, we need to make a few final tweaks over in the Java source code file, where we’ll be programming the rest of the game. We need to name each component so that we’ll know how to refer to it inside the source code.</p>&#13;
<p class="indent">This step is sometimes called “wiring up,” because we’ll be connecting each GUI component needed in the program to variable names that we can access in the Java source code. Eclipse has been naming each GUI element for us as we’ve added them, but we’ll want to change those names. Select the text field where the user will enter their guess. If you look in the Properties pane, you’ll see the very top property is <code>Variable</code>. The variable name Eclipse has given your first text field by default is probably something like <code>textField</code>. Click the value field beside the <code>Variable</code> property and rename the variable for this text field to <span class="codestrong"><code>txtGuess</code></span>, as shown in <a href="ch3.xhtml#ch3fig15">Figure 3-15</a>.</p>&#13;
<div class="image"><img src="../images/f0055-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig15"/>Figure 3-15: Rename the variables for each GUI element so we can use them easily in the Java source code.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_56"/>The name <code>txtGuess</code> will remind us that it’s a text field and that it stores the user’s guess. You’ll find that naming GUI components consistently and logically will help you code more quickly and efficiently, with fewer errors.</p>&#13;
<p class="indent">After you’ve renamed the text field, select the label at the bottom of the GUI window that reads “Enter a number above and click Guess!”. This is the label that will output information for the user to read, like <code>Too high</code>, <code>Too low</code>, or <code>You win!</code>, so let’s rename the variable <span class="codestrong"><code>lblOutput</code></span>. This name will help us remember it’s a GUI label (<code>lbl</code>) and that it’s the one we want to use for output to display information to the user.</p>&#13;
<p class="indent">In the Source tab at the lower left of the WindowBuilder Editor window, you’ll see that Eclipse has been writing the Java source code to produce the GUI layout you’ve been designing (<a href="ch3.xhtml#ch3fig16">Figure 3-16</a>).</p>&#13;
<div class="image"><img src="../images/f0056-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig16"/>Figure 3-16: Click the Source tab, and you’ll see Eclipse has coded the GUI components in Java for us.</em></p>&#13;
<p class="indent">Notice that the new variable names you gave the text field (<code>txtGuess</code>) and output label (<code>lblOutput</code>) are both visible in the source code. Now is a good time to save the file with all the changes you’ve made so far.</p>&#13;
<p class="indent">But before we start writing the code for the guessing game app, we’re going to make an adjustment to the source code.</p>&#13;
<h4 class="h4"><em><a id="toc_lev46"/>Connecting the GUI to Your Java Code</em></h4>&#13;
<p class="noindent">Scroll up to the top of the <code>GuessingGame</code> class, and you’ll see that Eclipse has declared the <code>JTextField txtGuess</code> right at the top of the <code>GuessingGame</code> class:</p>&#13;
<p class="pre">public class GuessingGame extends JFrame {<br/>&#13;
    private JTextField txtGuess;</p>&#13;
<p class="indent">Eclipse does this for text fields by default for a reason. Declaring text fields at the top level of the class makes it possible to access the text field (to see if the user’s guess is too high or too low, for example) from <span epub:type="pagebreak" id="page_57"/><em>anywhere</em> inside the class. Text fields are usually used in this way, so Eclipse declares a <code>private JTextField txtGuess</code> right at the top of the <code>GuessingGame</code> class instead of in a method or function further down in the class. The modifier <code>private</code> is used as an object-oriented programming <em>best practice</em> (a recommended way of doing things). Making something <code>private</code> keeps other classes from being able to see that part of the code. Since <code>txtGuess</code> is <code>private</code>, classes other than <code>GuessingGame</code> won’t be able to access it or accidentally change the <code>txtGuess</code> variable, which is what we want.</p>&#13;
<p class="indent">In this guessing game app, we want to be able to access the value the user enters into the <code>txtGuess</code> text field, so it’s great that Eclipse has declared it at the top level of the class. We also want to access the label <code>lblOutput</code> to be able to change the text displayed to the user (when their guess is too high, too low, or correct). So we need to add one more declaration to the top of the class, right under the declaration of <code>txtGuess</code>:</p>&#13;
<p class="pre"><span class="ash">public class GuessingGame extends JFrame {</span><br/>&#13;
    <span class="ash">private JTextField txtGuess;</span><br/>&#13;
    private JLabel lblOutput;</p>&#13;
<p class="indent">This line of code declares <code>lblOutput</code> as a variable that refers to a <code>JLabel</code> object in the GUI layout for the app. We’ve chosen to make this object reference <code>private</code> to hide this data from outside programs, but we’ll still be able to use it throughout the <code>GuessingGame</code> class.</p>&#13;
<p class="indent">One final change is to correct the line where <code>lblOutput</code> was originally declared, down near the bottom of the class. Find the line that looks like this, further down in the code:</p>&#13;
<p class="pre">  JLabel lblOutput = new JLabel("Enter a number above and click Guess!");</p>&#13;
<p class="indent">And change it to this:</p>&#13;
<p class="pre">  lblOutput = new JLabel("Enter a number above and click Guess!");</p>&#13;
<p class="indent">Notice we’ve removed the additional <code>JLabel</code> declaration. If you leave this second <code>JLabel</code> declaration in the program, your app won’t work because you’ve already declared <code>lblOutput</code> to be of type <code>JLabel</code> at the top of your class. If you leave the second <code>JLabel</code> declaration, Java will think you mean to have <em>two</em> separate <code>JLabel</code> objects named <code>lblOutput</code>. By removing the second <code>JLabel</code> declaration, you’re telling Java to use the <em>one</em> <code>JLabel lblOutput</code> you’ve created at the top of the program and initialize it with a text value of <code>"Enter a number above and click Guess!"</code>.</p>&#13;
<p class="indent">While we’re declaring variables at the top level of the <code>GuessingGame</code> class, let’s add one more important variable: <code>theNumber</code>. Remember in the text-based version of the game, this is what we named the secret, random number the user is trying to guess. Add a declaration for <code>theNumber</code> after <code>txtGuess</code> and <code>lblOutput</code> as follows:</p>&#13;
<p class="pre"><span class="ash">public class GuessingGame extends JFrame {</span><br/>&#13;
    <span class="ash">private JTextField txtGuess;</span><br/>&#13;
    <span class="ash">private JLabel lblOutput;</span><br/>&#13;
    private int theNumber;</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_58"/>Now that our variables are correctly declared at the top of the class, we’re ready to begin coding the GUI version of the guessing game app. In the next section, you’ll learn how we can get the user’s guess from the GUI text field and check to see if it’s too high or too low. We’ll also show the output text in the GUI label <code>lblOutput</code> to help the user make their next guess.</p>&#13;
<h3 class="h3"><a id="toc_lev47"/>Adding a Method to Check the Player’s Guess</h3>&#13;
<p class="noindent">Now that the GUI is wired to the Java source code with the private variables we added, <code>txtGuess</code> and <code>lblOutput</code>, we’ll begin coding the logic of the guessing game.</p>&#13;
<p class="indent">Let’s write a method called <code>checkGuess()</code> near the top of the <code>GuessingGame</code> class. The signature, or skeleton, of this method will look like this:</p>&#13;
<p class="pre"><span class="ash">public class GuessingGame extends JFrame {</span><br/>&#13;
    <span class="ash">private JTextField txtGuess;</span><br/>&#13;
    <span class="ash">private JLabel lblOutput;</span><br/>&#13;
    <span class="ash">private int theNumber;</span><br/>&#13;
    public void checkGuess() {<br/>&#13;
    }</p>&#13;
<p class="indent">Notice that the method is declared as <code>public</code>. Variables in a class are usually declared as <code>private</code>, but methods or functions that operate on those variables are usually declared as <code>public</code> so other classes can call on them. You can think of it like your checking account. Your balance is private and can only be accessed by you or the bank, but the function of making deposits is public (other people can deposit money into your account).</p>&#13;
<p class="indent">The second term, <code>void</code>, tells Java that we’re not expecting a <em>return</em> value, which is a value that a function or method outputs, from this function. For example, a conversion calculator for Fahrenheit to Celsius called <code>convertFtoC()</code> could take a value representing a temperature in Fahrenheit and return a numeric value representing the converted temperature in Celsius. In this guessing game application, the <code>checkGuess()</code> method will not return information like this to the rest of the program. Instead, we’re going to program the app to display information to the user through the graphical user interface, so we use the <code>void</code> return type, which doesn’t return a value.</p>&#13;
<p class="indent">Finally, we’ve named the method <code>checkGuess()</code> and provided the opening and closing braces that will contain the code that tells the program how we want to check a user’s guess.</p>&#13;
<h4 class="h4"><span epub:type="pagebreak" id="page_59"/><em><a id="toc_lev48"/>Getting Text from a JTextField</em></h4>&#13;
<p class="noindent">Let’s start building the <code>checkGuess()</code> method, which will take the string the user enters and check it against the number to guess. Add this line between the two braces for the <code>checkGuess()</code> method:</p>&#13;
<p class="pre">  <span class="ash">public void checkGuess() {</span><br/>&#13;
      String guessText = txtGuess.getText();<br/>&#13;
  <span class="ash">}</span></p>&#13;
<p class="indent">This line creates a new <code>String</code> variable called <code>guessText</code> that will hold the number the user enters into the GUI text field. To get the text the user entered, we’ll need to use the <code>getText()</code> method by calling <code>txtGuess.getText()</code> and storing the result in the new string variable called <code>guessText</code>.</p>&#13;
<p class="indent">You may see a window pop up near where you’re typing when you add the dot operator (<code>.</code>) after <code>txtGuess</code>, as shown in <a href="ch3.xhtml#ch3fig17">Figure 3-17</a>.</p>&#13;
<div class="image"><img src="../images/f0059-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig17"/>Figure 3-17: After you type txtGuess and the dot operator (</em>.<em>), you may see a helpful code recommendation window appear.</em></p>&#13;
<p class="indent">This is known as a <em>content assist</em>—Eclipse is trying to help by suggesting lines of code to finish the statement you’re working on. This particular kind of content assist is also called a <em>code recommender</em>, because it recommends common code options, like methods in the current class or object. Code recommendation is one feature that makes Eclipse a powerful IDE for professional Java developers. It’s not only faster in most cases to select a code recommender suggestion, but doing so also helps prevent errors and makes coders more efficient as they develop complex applications.</p>&#13;
<p class="indent">Now, we need to create a string to hold the message telling the user whether their guess was too high, too low, or correct. Let’s declare one additional string:</p>&#13;
<p class="pre">  <span class="ash">public void checkGuess() {</span><br/>&#13;
      <span class="ash">String guessText = txtGuess.getText();</span><br/>&#13;
      String message = "";<br/>&#13;
  <span class="ash">}</span></p>&#13;
<p class="indent">We don’t know yet whether the user’s guess is too high or too low, so we’ve initialized <code>message</code> to an empty string with a pair of double quotes (<code>""</code>). <span epub:type="pagebreak" id="page_60"/>After we test the user’s guess against the random number, or <code>theNumber</code>, we’ll update this string with more information before we output it in the GUI label. To test the user’s guess, we’ll need to turn their text entry, currently stored in <code>guessText</code>, into numeric form so that we can compare it to <code>theNumber</code>.</p>&#13;
<h4 class="h4"><em><a id="toc_lev49"/>Converting Strings to Numbers</em></h4>&#13;
<p class="noindent">In the text-based version of this app we made in <a href="ch2.xhtml#ch2">Chapter 2</a>, we used a <code>Scanner</code> object to scan a number value from the keyboard text the user entered. A scanner could work in a GUI, but there’s a more compact way to do this that will work better for this version.</p>&#13;
<p class="indent">Just like the <code>Math</code> class had <code>Math.random()</code> so that we could generate a random number, there is also a class for working with integers, called <code>Integer</code>. The <code>Integer</code> class has several functions that are useful for working with whole numbers, including a method to look for integers in strings of text, <code>Integer.parseInt()</code>. Enter the following line below <code>String message = ""</code>.</p>&#13;
<p class="pre">  <span class="ash">public void checkGuess() {</span><br/>&#13;
      <span class="ash">String guessText = txtGuess.getText();</span><br/>&#13;
      <span class="ash">String message = "";</span><br/>&#13;
      int guess = Integer.<em>parseInt</em>(guessText);<br/>&#13;
  <span class="ash">}</span></p>&#13;
<p class="indent">First, this line declares <code>guess</code> to be an integer variable. Then, it searches for, or <em>parses</em>, an integer from the text the user entered. For example, the string <code>"50"</code> will become the <em>number</em> <code>50</code>. Finally, it stores the number in the variable <code>guess</code>. We need the numeric version of the user’s guess in order to compare it to <code>theNumber</code>, using the comparison operators <code>&lt;</code> and <code>&gt;</code>.</p>&#13;
<p class="indent">With the user’s guess stored in the variable <code>guess</code>, we’re ready to test it against the computer’s secret, random number <code>theNumber</code>. We haven’t actually programmed <code>theNumber</code> to hold a value yet, but we’ll do that soon. Comparing the guess with <code>theNumber</code> will look like it did in the text-based version of the game, except we won’t print to the console using <code>System.out.println()</code>. Instead, we’ll store output for the user in the string variable <code>message</code> that we created:</p>&#13;
<p class="pre">    <span class="ash">String guessText = txtGuess.getText();</span><br/>&#13;
    <span class="ash">String message = "";</span><br/>&#13;
    <span class="ash">int guess = Integer.</span><span class="ash"><em>parseInt</em></span><span class="ash">(guessText);</span><br/>&#13;
    if (guess &lt; theNumber)<br/>&#13;
        message = guess + " is too low. Try again.";<br/>&#13;
    else if (guess &gt; theNumber)<br/>&#13;
        message = guess + " is too high. Try again.";<br/>&#13;
    else<br/>&#13;
        message = guess + " is correct. You win!";<br/>&#13;
  <span class="ash">}</span></p>&#13;
<p class="indent">Notice the three <code>if-else</code> statements are virtually identical to those in the text-based version of the game, except that we’re storing the output <code>message</code> (too high, too low, or correct) in a variable instead of outputting it directly to the console window. We still need to show <code>message</code> to the <span epub:type="pagebreak" id="page_61"/>user, so we’ll do that using the <code>lblOutput</code> GUI label. We’ll use the <code>setText()</code> method like so:</p>&#13;
<p class="pre">     <span class="ash">else</span><br/>&#13;
         <span class="ash">message = guess + " is correct. You win!";</span><br/>&#13;
     lblOutput.setText(message);<br/>&#13;
  <span class="ash">}</span></p>&#13;
<p class="indent">This command will show the output message to the user in the GUI window by changing the text property of the <code>JLabel</code> called <code>lblOutput</code> to the correct <code>String</code> variable <code>message</code> based on the user’s guess.</p>&#13;
<p class="indent">Your completed <code>checkGuess()</code> code should look like the following:</p>&#13;
<p class="pre">  public void checkGuess() {<br/>&#13;
      String guessText = txtGuess.getText();<br/>&#13;
      String message = "";<br/>&#13;
      int guess = Integer.<em>parseInt</em>(guessText);<br/>&#13;
      if (guess &lt; theNumber)<br/>&#13;
          message = guess + " is too low. Try again.";<br/>&#13;
      else if (guess &gt; theNumber)<br/>&#13;
          message = guess + " is too high. Try again.";<br/>&#13;
      else<br/>&#13;
          message = guess + " is correct. You win!";<br/>&#13;
      lblOutput.setText(message);<br/>&#13;
  }</p>&#13;
<p class="indent">Next, we need to write the code that assigns a random value to <code>theNumber</code>. We’ll use the <code>newGame()</code> method, because we want to have a new random number every time the user begins a new game.</p>&#13;
<h3 class="h3"><a id="toc_lev50"/>Starting a New Game</h3>&#13;
<p class="noindent">We want to tell the computer to pick a new, secret, random number whenever a new round of the guessing game starts, so it makes sense to do this in a method in the <code>GuessingGame</code> class. By doing it this way, we’ll be able to call on the method every time the user wins and wants to play a new game.</p>&#13;
<p class="indent">The method signature of the <code>newGame()</code> method looks similar to the <code>checkGuess()</code> method. Place it just after the closing brace for <code>checkGuess()</code> and before <code>public GuessingGame()</code>:</p>&#13;
<p class="pre">      <span class="ash">lblOutput.setText(message);</span><br/>&#13;
  <span class="ash">}</span><br/>&#13;
  public void newGame() {<br/>&#13;
  }<br/>&#13;
  <span class="ash">public GuessingGame() {</span></p>&#13;
<p class="indent">We’ll make this method <code>public</code> so that it can be called from an outside class. We also need to let Java know that just like the <code>checkGuess()</code> method, this method has no information that needs to be returned, so its return type is <code>void</code>. Finally, the method’s name is <code>newGame</code>, and it includes open and <span epub:type="pagebreak" id="page_62"/>close parentheses, <code>()</code>. The method body is empty right now, with nothing between the braces, but we’ll address that next.</p>&#13;
<p class="indent">A new game in this app just means that we’re telling the computer to pick a new random number. The code to assign this random value to <code>theNumber</code> will look and function like it did in the text-based version of the game, except now we’re putting this code inside its own, separate method. So, the finished <code>newGame()</code> method should look like this:</p>&#13;
<p class="pre">  <span class="ash">public void newGame() {</span><br/>&#13;
      theNumber = (int)(Math.<em>random</em>() * 100 + 1);<br/>&#13;
  <span class="ash">}</span></p>&#13;
<p class="indent">That’s it! Now we have all the necessary pieces in place to build a functional guessing game app, so we just have to connect them to the GUI interface. Once the app can listen for user events so it can respond to the user clicking the “Guess!” button, we’ll be ready to run the game!</p>&#13;
<h3 class="h3"><a id="toc_lev51"/>Listening for User Events: Click to Guess!</h3>&#13;
<p class="noindent">The last step we need to complete before running the app is to connect the <code>btnGuess</code> button (labeled “Guess!”) with the function that checks the user’s guess, <code>checkGuess()</code>. With Java, we can use <em>event listeners</em> to do this. Event listeners are just code that tells the program to wait, or <em>listen</em>, for user interaction <em>events</em>, like button clicks, mouse movement, or keyboard entries.</p>&#13;
<p class="indent">Go back to the GUI preview of the app by clicking on the Design tab. In the GUI preview window, find the “Guess!” button, as shown in <a href="ch3.xhtml#ch3fig18">Figure 3-18</a>, and double-click it.</p>&#13;
<div class="image"><img src="../images/f0062-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig18"/>Figure 3-18: In the Design view, double-click the “Guess!” button to add an event listener to the code.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_63"/>Double-clicking the “Guess!” button automatically opens the Source tab, where you’ll notice Eclipse has added new code. This new code is the skeleton of an event listener—in this case, an <code>ActionListener()</code> for the event that occurs when the user takes an action on the <code>JButton btnGuess</code>. In this case, the action is clicking the button.</p>&#13;
<p class="indent">Eclipse has added everything except the action we want to perform when the user clicks the button. Let’s take a look at the event listener code Eclipse has created for us.</p>&#13;
<p class="pre">        <span class="ash">JButton btnGuess = new JButton("Guess!");</span><br/>&#13;
      <span class="ent">➊</span> btnGuess.addActionListener(new <span class="ent">➋</span>ActionListener() {<br/>&#13;
          <span class="ent">➌</span> public void actionPerformed(ActionEvent e) {<br/>&#13;
            }<br/>&#13;
        });<br/>&#13;
        <span class="ash">btnGuess.setBounds(172, 149, 89, 23);</span><br/>&#13;
        <span class="ash">getContentPane().add(btnGuess);</span></p>&#13;
<p class="indent">The event listener for an <code>ActionListener()</code>, the specific listener that handles button clicks, is connected to <code>btnGuess</code> with the <code>addActionListener()</code> method at <span class="ent">➊</span>. The next couple of lines of code are all built inside the parentheses for the <code>addActionListener()</code> function.</p>&#13;
<p class="indent">Inside the <code>addActionListener()</code> method, the first thing we see is the keyword <code>new</code>, letting us know that Eclipse is creating a new object of the <code>ActionListener</code> class at <span class="ent">➋</span>. What makes this new object different from the ones we’ve seen in the past, though, is that it’s an <em>anonymous inner class</em>, meaning that it doesn’t have a variable that refers to it and it’s created entirely <em>inside</em> the <code>GuessingGame</code> class. Anonymous inner classes can help us code faster since we don’t need to build a completely separate class to handle short, quick events like a button click. Instead, we can insert the code for an event handler right where we create the button. In this case, the <code>ActionListener</code> will be listening for just a button click, so it’s a perfect candidate for an anonymous inner class.</p>&#13;
<p class="indent">Eclipse creates the skeleton for the anonymous inner class, but we still need to code the button’s behavior. This next section of code will go inside the braces of the <code>actionPerformed()</code> method at <span class="ent">➌</span>. The <code>actionPerformed()</code> method is where we describe what we want the app to do when the user has clicked <code>btnGuess</code>. The method accepts an <code>ActionEvent</code> as an argument, which is the event, or user action, the listener is listening for. In this case we’ve named the <code>ActionEvent e</code>, but you can use any variable name you’d like. When the user enters a guess and clicks the “Guess!” button, that action is assigned to <code>e</code>, and we need to check their guess with the <code>checkGuess()</code> method we created earlier:</p>&#13;
<p class="pre">      <span class="ash">btnGuess.addActionListener(new ActionListener() {</span><br/>&#13;
          <span class="ash">public void actionPerformed(ActionEvent e) {</span><br/>&#13;
              checkGuess();<br/>&#13;
          <span class="ash">}</span><br/>&#13;
      <span class="ash">});</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_64"/>Thanks to Eclipse, the only part we had to add was the <code>checkGuess();</code> command. The automatic code completion feature has saved us time and helped us avoid typographical errors.</p>&#13;
<p class="indent">With this section of code in place, now we just need to tell the app what to do on startup. Take a moment to save your work so far.</p>&#13;
<h3 class="h3"><a id="toc_lev52"/>Setting Up the GUI Window</h3>&#13;
<p class="noindent">Before we run the game for the first time, we need to tell the program what to do to set up the GUI window. This includes building the GUI interface, starting a new game by calling the <code>newGame()</code> method, and setting the desired width and height dimensions of the window.</p>&#13;
<p class="indent">Inside the braces for the <code>main()</code> method near the bottom of the file, add the following lines of code:</p>&#13;
<p class="pre">    <span class="ash">public static void main(String[] args) {</span><br/>&#13;
     <span class="ent">➊</span> GuessingGame theGame = new GuessingGame();<br/>&#13;
     <span class="ent">➋</span> theGame.newGame();<br/>&#13;
    <span class="ash">}</span><br/>&#13;
<span class="ash">}</span></p>&#13;
<p class="indent">The line of code at <span class="ent">➊</span> creates a new <code>GuessingGame</code> called <code>theGame</code>. The line at <span class="ent">➋</span> will start the guessing game with a new random number.</p>&#13;
<p class="indent">Now, let’s give Java an idea of the size we want the window to be. For a GUI desktop app, we can specify the size of the frame for the app using the <code>setSize()</code> method, entering the width and height of the window we want to create.</p>&#13;
<p class="pre">    <span class="ash">public static void main(String[] args) {</span><br/>&#13;
        <span class="ash">GuessingGame theGame = new GuessingGame();</span><br/>&#13;
        <span class="ash">theGame.newGame();</span><br/>&#13;
        theGame.setSize(new Dimension(450,300));</p>&#13;
<p class="indent">The <code>setSize()</code> method requires a parameter of the <code>Dimension</code> type that’s built into the <code>java.awt</code> library (<code>.awt</code> is short for <em>abstract window toolkit</em>). The <code>new Dimension()</code> inside the parentheses for <code>setSize()</code> tells Java to create an object of type <code>Dimension</code> with width and height parameters of 450 pixels wide by 300 pixels tall. But we haven’t imported the <code>java.awt</code> library yet, which means Eclipse doesn’t know what <code>Dimension</code> refers to, so your Eclipse editor will tell you there’s an error with this statement by underlining the class name <code>Dimension</code> in red. If you click the word <code>Dimension</code> in the editor, Eclipse shows you a list of Quick Fix options, as shown in <a href="ch3.xhtml#ch3fig19">Figure 3-19</a>. (If you aren’t able to get the Quick Fix pop-up to display, press <small>CTRL</small>-1 or <img src="../images/symbol.jpg" alt="Image"/>-1 after placing your cursor in <code>Dimension</code>.)</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_65"/><img src="../images/f0065-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig19"/>Figure 3-19: Eclipse recommends Quick Fix options for the new code we’ve entered; choose the top option to import the correct class.</em></p>&#13;
<p class="indent">We want to make use of the <code>Dimension</code> class that’s already provided in the <code>java.awt</code> package, so the topmost Quick Fix option, <strong>Import 'Dimension' (java.awt)</strong>, is the right one for this situation. Click it, and Eclipse will add <code>java.awt.Dimension</code> to the list of imported classes at the top of the file.</p>&#13;
<p class="pre"><span class="ash">import javax.swing.JFrame;</span><br/>&#13;
<span class="ash">import javax.swing.JLabel;</span><br/>&#13;
<span class="ash">import javax.swing.SwingConstants;</span><br/>&#13;
import java.awt.Dimension;<br/>&#13;
<span class="ash">import java.awt.Font;</span><br/>&#13;
<span class="ash">import javax.swing.JTextField;</span></p>&#13;
<p class="indent">Finally, add this line to the <code>main()</code> method to make the app visible on the screen:</p>&#13;
<p class="pre">      <span class="ash">theGame.setSize(new Dimension(450,300));</span><br/>&#13;
      theGame.setVisible(true);<br/>&#13;
  }</p>&#13;
<p class="indent">This command calls the <code>setVisible()</code> method on the <code>GuessingGame</code> object <code>theGame</code>. Remember, <code>GuessingGame</code> extended the class <code>JFrame</code>, so <code>theGame</code> is also a <em>descendent</em> of the <code>JFrame</code> parent class. We want to set the visible property of the main <code>JFrame</code> holding the GUI version of the guessing game to <code>true</code>, which is a Boolean value.</p>&#13;
<p class="indent">There are only two <em>Boolean values</em>, <code>true</code> and <code>false</code> (both spelled with all lowercase letters), and these are used in Boolean expressions. <em>Boolean expressions</em> are any set of arguments that can be evaluated to <code>true</code> or <code>false</code>. The <code>if</code> statements we used in the <code>checkGuess()</code> method, like the expression <code>(guess &lt; theNumber)</code>, are just one example we’ve already seen. When we evaluate this expression and check whether <code>guess</code> is less than <code>theNumber</code>, the expression evaluates to either <code>true</code> (meaning <code>guess</code> is less than <code>theNumber</code>) or <code>false</code> (<code>guess</code> is not less than <code>theNumber</code>). The result of that Boolean expression determines whether the statement following the <code>if</code> statement will run.</p>&#13;
<p class="indent">The complete <code>main()</code> method for the <code>GuessingGame</code> class is as follows:</p>&#13;
<p class="pre">  public static void main(String[] args) {<br/>&#13;
      GuessingGame theGame = new GuessingGame();<br/>&#13;
      theGame.newGame();<br/>&#13;
      theGame.setSize(new Dimension(450,300));<br/>&#13;
      theGame.setVisible(true);<br/>&#13;
  }</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_66"/><a id="toc_lev53"/>Time to Play!</h3>&#13;
<p class="noindent">With your code complete, now is a good time to save the <em>GuessingGame.java</em> file. Once you’ve done so, click the run button or select <strong>Run</strong> <span class="ent">▸</span> <strong>Run</strong> from the menu. The game window will appear.</p>&#13;
<p class="indent">Try entering some guesses and see if the app works. While you’re playing the game, check each component to make sure it works. Make sure to test the “Guess!” button, the label at the bottom, and the text field. If you spot problems, go back and check your code. Pay attention to when or where the error occurs to narrow down the source. You’ll get better at finding errors as you learn to code. <a href="ch3.xhtml#ch3fig20">Figure 3-20</a> shows how the app might look when it’s working properly.</p>&#13;
<div class="image"><img src="../images/f0066-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig20"/>Figure 3-20: The “Guess!” button works!</em></p>&#13;
<p class="indent">When your game is playable all the way through, you’re ready to take the next step.</p>&#13;
<p class="indent">Right now, the game is playable, but only until you win. The current version of the app doesn’t have the code to tell Java to start a new game every time we win the current one.</p>&#13;
<p class="indent">First, let’s set it up so we can keep playing the game even after we win once, and then we’ll make a few tweaks to the user interface to provide a better user experience.</p>&#13;
<h3 class="h3"><a id="toc_lev54"/>Adding a Play Again Feature</h3>&#13;
<p class="noindent">Just like we did in the first text-based version of the game, let’s add a play again feature. We created a <code>newGame()</code> method already, but we only called that method when setting up the game for its initial display in the <code>main()</code> method of the app.</p>&#13;
<p class="indent">We need to either change the GUI or change the app behavior. We could add a Play Again button for the user to click when they want to play another round, or we could just make the app automatically start a new game every time the user wins.</p>&#13;
<p class="indent">The benefit of adding a Play Again button is that it would be easy to understand from the user’s perspective. However, we wouldn’t want the Play Again button to be visible in the GUI window all the time, because it’s <span epub:type="pagebreak" id="page_67"/>needed only when the user wins. One option would be to add a button but make it invisible while the game is running, having it become visible only when the user wins. In order to keep our game simple, we won’t do this here, but if you’re interested in trying it out, see Programming Challenge #2 on <a href="ch3.xhtml#page_73">page 73</a>.</p>&#13;
<p class="indent">Instead of adding a button, let’s change the app’s behavior so that a new number is picked automatically after the user wins the current round. This requires changing only one section of the program, the <code>else</code> statement that handles a guess matching the random number. If the user has won a round, a new round should begin automatically. This makes intuitive sense—no extra buttons, no decisions to make. If the player decides they’re done playing, they can simply close the window. We’ll add this behavior by changing the following lines:</p>&#13;
<p class="pre">      else<br/>&#13;
          message = guess + " is correct. You win!";</p>&#13;
<p class="indent">We’ll call <code>newGame()</code> to start a new game. To add the call to the <code>newGame()</code> method inside this <code>else</code> statement, we’ll group two statements (setting the variable <code>message</code> and calling <code>newGame()</code>) together as one block like so:</p>&#13;
<p class="pre">      <span class="ash">else</span> {<br/>&#13;
          message = guess +<br/>&#13;
                  " is correct. You win! Let's play again!";<br/>&#13;
          newGame();<br/>&#13;
      }</p>&#13;
<p class="indent">The braces group these two statements as a single block of code to be executed together whenever the <code>else</code> statement is selected as the correct program path. Without the braces, only the first line after the <code>else</code> statement would be executed, and the <code>newGame()</code> method would run after the <code>if-else</code> statements are evaluated. This would make the game change the secret number every time the user tried to guess.</p>&#13;
<p class="indent">Notice also that we added <code>Let's play again!</code> to the end of the message string. This lets the user know that they’re able to play again just by guessing and can expect the computer to pick a new number each round. Make these changes, save the program, and run it again to see the new version of the game!</p>&#13;
<h3 class="h3"><a id="toc_lev55"/>Improving the UX</h3>&#13;
<p class="noindent">As you play the game, you may notice a few elements of gameplay that could make the user interface even better. For example, if we could have the app accept a new guess either when the user clicks the “Guess!” button or when they press <small>ENTER</small> from the keyboard, that would provide a more natural and intuitive <em>user experience (UX)</em>.</p>&#13;
<p class="indent">One other problem is that when we want to guess a new number, we have to highlight and select the old number (or, alternatively, press the <span epub:type="pagebreak" id="page_68"/><small>DELETE</small> or <small>BACKSPACE</small> key) to clear the previous guess. We also have to click back into the text field, because the focus switches to the “Guess!” button. To improve the user interface, we could have the cursor return to the text field after each guess and automatically highlight or delete the previous guess’s text so that the new guess replaces the old one.</p>&#13;
<p class="indent">Let’s tackle these two items now.</p>&#13;
<h4 class="h4"><em><a id="toc_lev56"/>Allowing Users to Press Enter to Guess</em></h4>&#13;
<p class="noindent">The first improvement we’ll make is to allow the user to press <small>ENTER</small></p>&#13;
<p class="indent">to submit their guess. First, go to the Design tab and right-click the “Guess!” button. In the pop-up menu, select <strong>Add event handler</strong> <span class="ent">▸</span> <strong>action</strong> <span class="ent">▸</span> <strong>actionPerformed</strong>.</p>&#13;
<p class="indent">Just like when we created an event handler for <code>btnGuess</code>, Eclipse will automatically add the code to create an action listener for <code>txtGuess</code>, as shown in the following code snippet. And, just like we did before, we’ll add the <code>checkGuess()</code> method inside the braces of the <code>actionPerformed()</code> portion of this code. The only action event we usually want to handle from inside a text field is the user pressing the <small>ENTER</small> key.</p>&#13;
<p class="pre">      txtGuess.addActionListener(new ActionListener() {<br/>&#13;
          public void actionPerformed(ActionEvent e) {<br/>&#13;
              checkGuess();<br/>&#13;
          }<br/>&#13;
      });</p>&#13;
<p class="indent">After you add this line, save the file and run it again. Now when we press the <small>ENTER</small> key, it activates the <code>checkGuess()</code> method. The “Guess!” button still works, so the user has their choice of interacting only by keyboard or with their mouse.</p>&#13;
<h4 class="h4"><em><a id="toc_lev57"/>Automatically Removing Old Guesses</em></h4>&#13;
<p class="noindent">Now let’s solve the issue of having to click back into the text field to delete our old guesses. To address this, we’ll need to learn a couple of new methods for working with <code>JTextField</code> objects like <code>txtGuess</code>.</p>&#13;
<p class="indent">First we have to consider when we want text to be selected. For the guessing game, after the user’s guess is evaluated is probably the right time to enable the user to guess again. In the code, this would be at the end of the <code>checkGuess()</code> method, as we want it to occur after the user has made one guess and is ready to make another.</p>&#13;
<p class="indent">So, we know we need to add code inside the end of the <code>checkGuess()</code> method to place the cursor back into the <code>txtGuess</code> text field and select the text from the user’s previous guess. But how do we know which commands would place the cursor in the text field and select all the text? This is a great time to use the content assist feature in Eclipse. Type the name of the object, <span class="codestrong"><code>txtGuess</code></span>, followed by the dot operator (<span class="codestrong"><code>.</code></span>), and Eclipse will display a list of available methods, as shown in <a href="ch3.xhtml#ch3fig21">Figure 3-21</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_69"/><img src="../images/f0069-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig21"/>Figure 3-21: The content assist feature displays all the methods available for the JTextField txtGuess</em>.</p>&#13;
<p class="indent">You’ll see that there are dozens of methods available for working with <code>JTextField</code>s like <code>txtGuess</code>, but the one we’re looking for is <code>requestFocus()</code>. The documentation for this function says, “Requests that this Component gets the input focus.” The <em>focus</em> in this case is the cursor. This method will do exactly what we want and request that the cursor be placed back in the text field every time the user guesses again.</p>&#13;
<p class="indent">Finally, we want to select all the text from the user’s previous guess so that their new guess will replace the old one automatically. To select all the text in a text field, use the <code>selectAll()</code> method, which is also listed in Eclipse’s content assist feature suggestions. Add both these lines to the end of the <code>checkGuess()</code> method, right after the line for <code>lblOutput.setText(message);</code> and right before the closing brace:</p>&#13;
<p class="pre">        <span class="ash">lblOutput.setText(message);</span><br/>&#13;
        txtGuess.requestFocus();<br/>&#13;
        txtGuess.selectAll();<br/>&#13;
    <span class="ash">}</span></p>&#13;
<p class="indent">Now is a good time to save your application. When you try running the game again, you should feel a much smoother, more intuitive user experience. The guessing game finally has an elegant, easy-to-use GUI that provides a simple UX. Our game is easy to play, but a challenge to master. It’s just like the games that we play for fun, but we’ve built this one from scratch, using Java and the Swing toolkit for a professional appearance.</p>&#13;
<p class="indent">Now, we have a great app all around, except for one important thing: security. You may ask, “What? Security? I thought we were just building a fun GUI game!” And that’s true—the program works beautifully, but only as long as the user enters their numbers correctly.</p>&#13;
<p class="indent">What happens if the user’s fingers slip and they press <small>ENTER</small> or click the “Guess!” button before they’ve typed their guess? What if they enter any noninteger text, like <span class="codestrong"><code>blah</code></span>, as a guess? <a href="ch3.xhtml#ch3fig22">Figure 3-22</a> shows what happens in Eclipse when the user enters bad input.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_70"/><img src="../images/f0070-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig22"/>Figure 3-22: Bad things happen when the user enters bad data, like blah, in the text field.</em></p>&#13;
<p class="indent">As you can see, our console window is now filled with errors. The bad input resulted in an <em>exception</em>—an unexpected or faulty programming situation. The first line of output in <a href="ch3.xhtml#ch3fig22">Figure 3-22</a> tells us there was a <code>NumberFormatException</code> because the string <code>"blah"</code> is not recognized as a number. You’ll need to learn how to handle exceptions in the programs you create.</p>&#13;
<h3 class="h3"><a id="toc_lev58"/>Handling Bad User Input</h3>&#13;
<p class="noindent">Java provides a safe way of anticipating and dealing with exceptions, the bad things that can happen when a program runs. In addition to bad user input like we just discussed, exceptions can include missing files (a file gets deleted, or you remove a USB drive unexpectedly) or network problems (such as a missing connection or a bad server).</p>&#13;
<p class="indent">We call the code built for dealing with exceptions an <em>exception handler</em>. An exception handler deals with exceptional situations. But how do we know when an exception might occur? Do we have to predict everything bad that could happen when a program is running?</p>&#13;
<p class="indent">Many of the situations in which errors could occur are particular types of events, like user input, file input/output, or network access. For example, think about the exceptions we listed previously. Bad user input could happen any time we ask the user for input of a certain type. A missing file could be a problem whenever we’re reading or writing files; for example, when viewing and saving pictures from a photo app. If we can anticipate possible exceptions and write exception handlers to deal with those exceptions, our code will be safer, more secure from malicious hackers who might want to crash your program by entering bad input, and more reliable.</p>&#13;
<p class="indent">In the case of the guessing game, the exception occurred when we asked the user for a number, but they entered text instead. Specifically, the exception was triggered when we tried to parse an integer out of a string that didn’t contain an integer. User input is a common source of exceptions, both accidental and intentional. An example of the latter is a hacker trying to break your program.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_71"/>Java gives us a clean way of handling exceptions with the <code>try-catch</code> statement. The idea of a <code>try-catch</code> block is that we want the program to <em>try</em> to do something that we know might cause an exception and <em>catch</em>, or handle, the exception that might occur rather than allowing it to break the program. The <code>catch</code> block executes only when an exception happens.</p>&#13;
<p class="indent">The last part of a <code>try-catch</code> is the optional <code>finally</code> block. In a <code>try-catch-finally</code> statement, the <code>finally</code> block will <em>always</em> execute if it’s provided, regardless of whether there’s an exception. If there’s no exception, the <code>finally</code> block will still run after the <code>try</code> block finishes. If an exception occurs, the <code>finally</code> block will run after the <code>catch</code> block has completed.</p>&#13;
<p class="indent">The format of a <code>try-catch</code> typically looks something like this (don’t type this into your code; this is just an example of the format):</p>&#13;
<p class="pre">    try {<br/>&#13;
        // Something that could cause an exception, like getting bad input<br/>&#13;
    } catch (Exception e) {<br/>&#13;
        // Handle or recover from the exception, like asking for good input<br/>&#13;
    } finally {<br/>&#13;
        // Any wrap-up code; this will always run last, exception or not<br/>&#13;
    }</p>&#13;
<p class="indent">Notice we group statements for each part of the <code>try-catch-finally</code> statement with braces, just like we do for <code>if-else</code> and loop statements. The <code>catch</code> part requires an <code>Exception</code> parameter; this can be a specific exception, like <code>NumberFormatException</code>, or we can use the base class <code>Exception</code>. This parameter will receive information about the <code>Exception</code>, like what line number the exception occurred on.</p>&#13;
<p class="indent">To place the <code>try-catch-finally</code> blocks correctly in our game’s code, we need to think about where the exception might occur (and wrap that code inside a <code>try</code> block), what we want to do if there is an exception (and put that in a <code>catch</code> block), and what we want to do after either the <code>try</code> or <code>catch</code> block finishes (this part goes inside the <code>finally</code> block).</p>&#13;
<p class="indent">Because the user input problem occurred when we tried to parse an integer out of text the user entered, we want to wrap that code in a <code>try</code> block. Let’s put the <code>try</code> keyword and an opening brace right before the line that parses the integer out of the text:</p>&#13;
<p class="pre">    <span class="ash">public void checkGuess() {</span><br/>&#13;
        <span class="ash">String guessText = txtGuess.getText();</span><br/>&#13;
        <span class="ash">String message = "";</span><br/>&#13;
        try {<br/>&#13;
            <span class="ash">int guess = Integer.</span><span class="ash"><em>parseInt</em></span><span class="ash">(guessText);</span><br/>&#13;
            <span class="ash">if (guess &lt; theNumber)</span></p>&#13;
<p class="indent">If the user didn’t enter a number, we can’t test for too high or too low, so the <code>try</code> clause will go all the way to the end of this pair of <code>if-else</code> statements. Place a closing brace for the <code>try</code> block after the closing brace for the <code>else</code> statement, as shown in the following listing. The <code>catch</code> keyword should <span epub:type="pagebreak" id="page_72"/>go next. In this game, if a user enters bad input, we just want to ask them to enter a whole number between <code>1</code> and <code>100</code>. We can do that with the <code>message</code> string that gets displayed in <code>lblOutput</code> later. So, the <code>catch</code> block should look like this:</p>&#13;
<p class="pre">        <span class="ash">else {</span><br/>&#13;
            <span class="ash">message = guess +</span><br/>&#13;
                    <span class="ash">" is correct. You win! Let's play again!";</span><br/>&#13;
            <span class="ash">newGame();</span><br/>&#13;
        <span class="ash">}</span><br/>&#13;
    } catch (Exception e) {<br/>&#13;
        message = "Enter a whole number between 1 and 100.";<br/>&#13;
    }</p>&#13;
<p class="indent">The last step we want to take, whether there was an exception or not, is to show the output message, request the focus for the text field, and select all the text to prepare for the next entry. These three statements will go into the <code>finally</code> block, after the closing brace of the <code>catch</code> statement we just added:</p>&#13;
<p class="pre">      <span class="ash">}</span> finally {<br/>&#13;
          <span class="ash">lblOutput.setText(message);</span><br/>&#13;
          <span class="ash">txtGuess.requestFocus();</span><br/>&#13;
          <span class="ash">txtGuess.selectAll();</span><br/>&#13;
      }<br/>&#13;
  <span class="ash">}</span><br/>&#13;
  <span class="ash">public void newGame() {</span></p>&#13;
<p class="indent">You may notice that the statements inside each of the <code>try-catch-finally</code> blocks are indented to make the code easier to read. Remember, there’s a shortcut in Eclipse that will automatically indent everything correctly after you’ve made any changes. Just select all the code, then go to <strong>Source</strong> <span class="ent">▸</span> <strong>Correct Indentation</strong>.</p>&#13;
<p class="indent">Save your app and run it a few times to test the user interface. Test a few nonintegers to make sure the exception handling works the way it’s supposed to. If you run into errors that prevent the file from compiling, check your braces. Whenever we add blocks around existing code, braces are the first place to check for errors. Once your <code>try-catch-finally</code> statements are in place, you’ve got a more reliable, more predictable, and safer version of the GUI guessing game app.</p>&#13;
<p class="indent">Safe programming isn’t just a nice touch—it’s often a critical part of writing good software. For our guessing game, the consequences of bad code don’t seem dire. But think about the code running on a medical device, a satellite, a car, an airplane, or the power grid that delivers electricity to your home and city. Secure code is vital to our safety and security. And even a small game or app running unsecure code on your smartphone could expose your data to hackers. Safe programming is always a smart practice.</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_73"/><a id="toc_lev59"/>What You Learned</h3>&#13;
<p class="noindent">In the GUI version of the guessing game app, we’ve grown our Java skills to include all the following:</p>&#13;
<p class="bull">• Creating GUI windows by importing the <code>javax.swing</code> package</p>&#13;
<p class="bull">• Setting up a GUI app in Eclipse</p>&#13;
<p class="bull">• Designing a GUI with the WindowBuilder Editor</p>&#13;
<p class="bull">• Using the Properties pane to change GUI component properties</p>&#13;
<p class="bull">• Naming GUI components consistently for easy use in Java code</p>&#13;
<p class="bull">• Connecting GUI elements to Java variables and programming code</p>&#13;
<p class="bull">• Getting user text from a <code>JTextField</code> and using it in a program</p>&#13;
<p class="bull">• Listening for user events, like button clicks</p>&#13;
<p class="bull">• Improving the user experience, or UX, by testing the app with the user in mind</p>&#13;
<p class="bull">• Handling exceptions with <code>try-catch-finally</code></p>&#13;
<h3 class="h3"><a id="toc_lev60"/>Programming Challenges</h3>&#13;
<p class="noindent">Try these challenges to review and practice what you’ve learned and to expand your programming skills by trying something new. If you get stuck, visit <em><a href="https://www.nostarch.com/learnjava/">https://www.nostarch.com/learnjava/</a></em> for sample solutions.</p>&#13;
<h4 class="h4"><em><a id="toc_lev61"/>#1: Showing Users How Many Tries They Took</em></h4>&#13;
<p class="noindent">Try changing the winning message to tell the user how many tries they took when they win, as in the following:</p>&#13;
<p class="pre">62 is correct! You win after 7 tries!</p>&#13;
<p class="indent">To accomplish this task, you’ll need to create a new variable (like <code>numberOfTries</code>) to store how many times the user guessed, add to the number of tries every time the <code>checkGuess()</code> method runs successfully, and display the number of tries to the user when they win.</p>&#13;
<p class="indent">As an alternative version, you could begin the game with seven or eight tries and then subtract a try every time the user guesses. When the last guess has been used, you could tell the user they lost, show them what the correct number was, and start a new game. Give it a shot!</p>&#13;
<h4 class="h4"><em><a id="toc_lev62"/>#2: Showing and Hiding a Play Again Button</em></h4>&#13;
<p class="noindent">When we built the GUI for this chapter’s guessing game, we decided not to include a Play Again button because it would have cluttered the interface when it wasn’t in use and it would really only be needed at the end of the game. As it turns out, we can hide a GUI component with the <code>setVisible(false)</code> method. Then we can show it again with <code>setVisible(true)</code>, just as we did with our <code>JFrame</code>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_74"/>First, we could add a Play Again button, called <code>btnPlayAgain</code>, to the GUI layout. In the code after the button is created, we could call <code>btnPlayAgain .setVisible(false)</code> to hide the button. In the winning <code>else</code> statement in <code>checkGuess()</code>, we could call <code>btnPlayAgain.setVisible(true)</code> to show the button instead of starting a new game. Once you’ve written that code, remember to double-click the button in the GUI preview to add an event listener, call <code>newGame()</code> in that listener, and then hide the button again.</p>&#13;
<p class="indent">One important note before you start: unlike with the other button (<code>btnGuess</code>), you need to change the the <code>visible</code> property to hide and show the button from several places in the code. As with <code>txtGuess</code> and <code>lblOutput</code>, you’ll need to declare <code>private JButton btnPlayAgain</code> at the top of the class, but make sure not to redeclare the button in the code below it.</p>&#13;
<p class="indent">When you get it working, the game should start with the Play Again button hidden, and the button should appear when you win the game. When you click the button, a new game will start, and the button will disappear again. Play the game with the button, and if you think of any other improvements for the UX, go ahead and try them!</p>&#13;
<h4 class="h4"><em><a id="toc_lev63"/>#3: Creating a GUI MadLib</em></h4>&#13;
<p class="noindent">Look back at the <em>MadLibs.java</em> program you built in <a href="ch2.xhtml#ch2">Chapter 2</a> (Programming Challenge #3 on <a href="ch2.xhtml#page_41">page 41</a>) and create a new <em>MadLibGUI.java</em> app that prompts the user for several words in a graphical user interface with labels and text fields, like <code>txtColor</code>, <code>txtPastTenseVerb</code>, <code>txtAdjective</code>, and <code>txtNoun</code>. Add a button that the user can press to generate a MadLibs-style story.</p>&#13;
<p class="indent">Explore and play around with several more properties of the GUI elements in the WindowBuilder Editor, including background colors, fonts, initial text values, and more. When the user clicks the button, the program should display the completed MadLibs story in a <code>JLabel</code> or a <code>JTextArea</code>, as shown in <a href="ch3.xhtml#ch3fig23">Figure 3-23</a>.</p>&#13;
<div class="image"><img src="../images/f0074-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch3fig23"/>Figure 3-23: A GUI MadLibs app</em></p>&#13;
</body></html>