<html xmlns="http://www.w3.org/1999/xhtml" xmlns:dk="http://www.kirsanov.com" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en">
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
		<title>Appendix A: An SVG Primer</title>
		<link href="NSTemplate_v1_inkbook.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:53262340-c02e-40d5-9273-c34656cedc88" name="Adept.expected.resource"/>
	</head>
	<body>
		<section><a id="chA"/>
		<header>
				<h1 class="chapterTitle"><span class="ChapterNumber"><span epub:type="pagebreak" id="Page_473" title="473"/>A</span><br/><span class="ChapterTitle">An SVG Primer</span></h1>
			</header>
			<p class="ChapterIntro"><a id="473"/>This appendix is a very high-level glance at
the workings of SVG and its implementation in Inkscape. 
If you want the final, complete, and authoritative reference on SVG,
refer to the W3C’s SVG specification at <a href="https://w3.org/Graphics/SVG/">https://w3.org/Graphics/SVG/</a>. As of this writing,
SVG 2.0 is still a draft; Inkscape supports the latest released version of the standard, 1.1, that you can find at <a href="https://w3.org/TR/SVG11/">https://w3.org/TR/SVG11/</a>.</p>
			<p>Knowledge of SVG and, more generally, XML (SVG is based on XML) is not strictly necessary for mastering
Inkscape—but it helps. It will allow you to peek under the hood of Inkscape drawings, and it will often reveal the
true reasons behind some of Inkscape's features (or lack thereof). Let's start with a quick intro
to XML that you may find useful in many situations, even those that don't involve Inkscape or SVG.</p>
			<a id="sectionA.1"/><h2>A.1 A Quick Introduction to XML</h2>
			<p>
				If you've ever looked at a web page’s source code, you
already know what XML looks like, because XHTML, the markup language used on
the web today, is one of the subspecies of XML—more precisely, an <em>XML
vocabulary</em>. SVG is another such vocabulary.</p>
			<p><a id="474"/><span epub:type="pagebreak" id="Page_474" title="474"/>XML is a standardized way to record structured information in plaintext. It is easy for computers to
parse and yet quite understandable for humans.  Unlike most computer-related concepts that tend
to be as complex as you think they are (or more), XML is almost unbelievably simple.</p>
			<p>
				The basic building block of an XML document is an <em>element</em>. Here is an
example of an element containing some text:</p>
			<pre>&lt;example&gt;Here goes some text.&lt;/example&gt;</pre>
			<p>
				The text inside the element is called its <em>content</em>, and
that content is delimited by <em>tags</em>. Everything between the less-than sign (<code>&lt;</code>) and the greater-than sign 
(<code>&gt;</code>) is a tag. Here, the opening tag and the closing tag are almost
identical, except the closing one has a forward slash (<code>/</code>) before the
element name, which in this case is <code>example</code>.</p>
			<p>An element may have no content at all:</p>
			<pre>&lt;example&gt;&lt;/example&gt;</pre>
			<p>or</p>
			<pre>&lt;example/&gt;</pre>
			<p>
				These two <em>empty elements</em> are equivalent; the second one, consisting of a
single tag, is just a spelling variant of the first. Note the different position of the
forward slash (<code>/</code>) in the single-tag empty element.</p>
			<p>
				In addition to text, elements can also contain other elements, but those elements
must lie <em>entirely</em> within the containing element. For example, this
is wrong:</p>
			<pre>&lt;a&gt;&lt;b&gt;&lt;/a&gt;&lt;/b&gt;</pre>
			<p>
				because the element <code>b</code> starts inside <code>a</code> but ends outside it. If an element starts
inside some other element, it must also end within that element. Here is an example
of correct XML:</p>
			<pre>&lt;a&gt;&lt;b/&gt;&lt;c/&gt;&lt;d&gt;&lt;e/&gt;&lt;/d&gt;&lt;/a&gt;</pre>
			<p>
				We say that <code>a</code> is the <em>parent element</em> of <code>b</code>,<code>c</code>, and <code>d</code>, while <code>d</code> is the parent of<code>e</code>. An element may have multiple children, but it has only one 
parent (except for the root element of the document, which has no parent at all). <a href="#figA-1">Figure A-1</a> is a graphic representation of this XML fragment.</p>
			<a id="figA-1"/><figure>
				<img alt="" src="03/tree.svg.png"/>
				<figcaption>
					<p>Figure A-1: A tree representing the XML code</p>
				</figcaption>
			</figure>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p><a id="475"/><span epub:type="pagebreak" id="Page_475" title="475"/>This explains why groups of objects in Inkscape cannot contain objects from
different layers (<a href="c04.xhtml#section4.8">4.8</a>). A group is a parent element for its children—but so is a
layer. A group may be contained inside a single layer, but it can't be scattered
across several layers, because that would mean it has several parents.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				Apart from child elements, XML elements may have <em>attributes</em>. Each
attribute is a name with some associated value. Attributes are specified in the opening
tag of an element:</p>
			<pre>&lt;text type="important" font-size="10"&gt;Here is some text.&lt;/text&gt;</pre>
			<p>
				Note the equal sign (<code>=</code>) and the double-quotation marks around attribute
values. Both are mandatory.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>
						An element cannot have two attributes with the same name. The order of
the attributes in the opening tag doesn't affect anything: attributes in XML are<em>unordered</em>.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				An entire XML document is just a single element (called the<em>root</em>), possibly with some text content and child elements—which, in turn, can have more
content and more children, and so on. An XML document can thus be thought of as a tree
growing from a single root. For example, the following is a complete and valid SVG document whose root 
element, <code>svg</code>, contains two elements representing a rectangle and a text string:</p>
			<pre>&lt;svg&gt; &lt;rect x="100" y="100" width="300" height="50" fill="blue"/&gt; &lt;text x="100" y="150"&gt;This is a text string.&lt;/text&gt;
&lt;/svg&gt;</pre>
			<a id="sectionA.2"/><h2>A.2 Vocabularies and Namespaces</h2>
			<p>XML itself is just a foundation—and you can erect a lot of different buildings on that foundation. You won't believe how many 
work hours were wasted, before the advent of XML, on inventing new data formats for each application, formulating their rules, writing and testing software to
support them, and working around the inevitable bugs, exceptions, and version incompatibilities.</p>
			<p>
				These days, if you need to record some data, you no longer need to go into the low-level details of which characters have special meanings
and what the sizes of various fields are.  By choosing XML (and you need serious reasons<em>not</em> to choose it), you can concentrate on what really matters: the structure of your data and how to name elements and attributes to best express that
structure.</p>
			<p>
				Moreover, you may not even need to do that, because a common standardized XML <em>vocabulary</em> likely already exists for your kind of data.
Each vocabulary defines a set of elements and
attributes, detailing what they are supposed to mean, in what contexts they may be used,
what is obligatory or optional, and so on. SVG is one such vocabulary;
XHTML is another. Standardized XML vocabularies exist for many exotic things, from dog genealogies to star catalogs.
Many of them reuse parts of other vocabularies.</p>
			<p><a id="476"/><span epub:type="pagebreak" id="Page_476" title="476"/>To be able to mix different vocabularies without confusion, XML uses<em>namespaces</em>. A namespace is a way to indicate where a specific element or
attribute comes from. For example, here's an <code>image</code> element from the SVG
vocabulary, representing a linked bitmap image inside an SVG document:</p>
			<pre>&lt;svg:image xlink:href="/dir/file.png" width="200" height="100"/&gt;</pre>
			<p>
				Note that the element name and one of the attributes use a colon
(<code>:</code>). The part of the name before the colon is called the <em>namespace
prefix</em>. To find out which namespace corresponds to that prefix, look for a
namespace declaration in the form of a special <code>xmlns</code>-prefixed attribute
(<code>xmlns</code> is short for <em>XML NameSpace</em>), either on the same element or on any of its ancestor elements
up the tree.</p>
			<p>
				It is customary to place all namespace declaration attributes on the root
element, so you will likely find the declarations for <code>svg</code> and<code>xlink</code> prefixes in the root <code>svg</code> element:</p>
			<pre>&lt;svg:svg ... xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ... &gt;</pre>
			<p>
				This means that the <code>svg</code> prefix is bound to the namespace of<code>http://www.w3.org/2000/svg</code>, and the <code>xlink</code> prefix corresponds to<code>http://www.w3.org/1999/xlink</code>. Here, the namespaces are URLs, but they don't need
to be; the only requirement is that they are globally unique, and URLs are the
easiest way to ensure that.</p>
			<p>
				The namespace URL for SVG, <code>http://www.w3.org/2000/svg</code>, must look exactly
as shown. If the namespace prefix of the elements in your SVG document does not resolve
to <code>http://www.w3.org/2000/svg</code>, Inkscape (or any other SVG software) will not
recognize the document as SVG. The namespace <em>prefix</em>, however, may be arbitrary,
so long as it's bound to the correct namespace. The prefix can even be empty if you
declare it thus:</p>
			<pre>&lt;svg ... xmlns="http://www.w3.org/2000/svg" ... &gt;</pre>
			<p>
				Inside the element with that declaration, any element name <em>without</em> a prefix
is assumed to be in the SVG namespace. For example, the following will be
recognized as a valid SVG <code>image</code> element that links an external image
file in PNG format:</p>
			<pre>&lt;image xlink:href="/dir/portrait.png" width="200" height="100"/&gt;</pre>
			<p>Namespace errors, such as no namespace declared for a prefix or a wrong namespace URL,
are the most common when you edit SVG by hand—watch out for them!</p>
			<a id="sectionA.3"/><h2>
				A.3 <a id="477"/><span epub:type="pagebreak" id="Page_477" title="477"/>Root</h2>
			<p>
				Here's a typical root <code>svg</code> element of an Inkscape SVG document with a
bunch of namespace declarations and other attributes:</p>
			<pre>&lt;svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="385.6" height="210" id="svg2" sodipodi:version="0.32" inkscape:version="1.0 (4035a4fb49, 2020-05-01)" version="1.1" sodipodi:docid="file.svg"
&gt;</pre>
			<p>
				SVG uses the SVG namespace (<code>http://www.w3.org/2000/svg</code>) for its own
elements and the XLink namespace (<code>http://www.w3.org/1999/xlink</code>) for the
linking attributes (<a href="#sectionA.9">A.9</a>). On top of that, Inkscape adds elements and attributes in
the namespaces belonging to Inkscape (<code>http://www.inkscape.org/namespaces/inkscape</code>)
and its predecessor Sodipodi
(<code>http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd</code>; see <a href="c01.xhtml#section1.6">1.6</a> for a brief
history of Inkscape). Other namespaces declared here are used for metadata elements 
(general information about the document) and
license identifiers (<a href="#sectionA.4">A.4</a>).</p>
			<p>
				In this example root element, the only attributes defined in the SVG standard are<code>width</code> and <code>height</code> (defining the size of the canvas),<code>id</code>, and <code>version</code>. The rest are either namespace declarations or
attributes in the Inkscape/Sodipodi namespaces.</p>
			<p>
				The <code>inkscape:version</code> specifies the version of Inkscape in which this document was
created, in this case 1.0 (with a build number and date in parentheses). It also claims that the version of
Sodipodi that this document will work with is 0.32
(<code>sodipodi:version="0.32"</code>), because after that version Inkscape forked off
Sodipodi. The non-namespaced <code>version</code> attribute refers to the version of the
SVG specification this document implements, 1.1.</p>
			<p>
				When you save a document, you have a choice between Inkscape SVG and Plain SVG formats;
the only difference is that
Plain SVG strips away all the elements and
attributes in the Inkscape and Sodipodi namespaces, leaving only the standard
namespaces. Generally, no Inkscape-specific elements or attributes are allowed to 
alter how the document <em>looks</em>; they can affect only the way it<em>behaves</em> when edited in Inkscape (for example, an attribute on a <code>g</code> element may 
tell Inkscape to treat that element as a 3D box instead of a simple group; see <a href="c11.xhtml#section11.3">11.3</a>). 
Thus, saving as a Plain SVG will make a file a little smaller but at the cost of losing some of its Inkscape
editability. If you find a file that renders differently after being saved as Plain SVG,
you've found a bug—please report it to the developers!</p>
			<a id="sectionA.4"/><h2>
				A.4 <a id="478"/><span epub:type="pagebreak" id="Page_478" title="478"/>Defs, View, and Metadata</h2>
			<p>Let's descend from the root element of a typical Inkscape SVG document to see what
else is in there.</p>
			<p>
				First comes the <code>defs</code> element. A part of the SVG standard, <code>defs</code> is a
storage bin for things that, by themselves, are not displayed on the canvas but may be
referred to by other elements. This includes gradients, patterns, markers (arrowheads,<a href="c09.xhtml#section9.5">9.5</a>), clipping paths, masks, filters, and so on, which are all stored as child elements of the<code>defs</code> element. The SVG specification allows you to place multiple <code>defs</code>
elements almost anywhere in the document, but Inkscape always uses a single<code>defs</code> under the root <code>svg</code>. Here's an example <code>defs</code>
element containing a gradient:</p>
			<pre>&lt;defs id="defs4"&gt; &lt;linearGradient inkscape:collect="always" id="linearGradient2798"&gt; &lt;stop style="stop-color:#000000;stop-opacity:1;" offset="0" id="stop2800"/&gt; &lt;stop style="stop-color:#000000;stop-opacity:0;" offset="1" id="stop2802"/&gt; &lt;/linearGradient&gt;
&lt;/defs&gt;</pre>
			<p>
				Adding the <code>linearGradient</code> element to <code>defs</code>, by itself, does not
change anything on the canvas. Now, however, any object can reference (<a href="c10.xhtml#section10.2.1">10.2.1</a>) this
gradient for painting its fill or stroke.</p>
			<p>
				Most of the stuff in <code>defs</code> is kept even if no visible element uses
it. Exceptions are the elements with the <code>inkscape:collect="always"</code> attribute; such elements are automatically deleted when no
longer used. Inkscape often uses this flag to mark various supplemental elements it 
creates on its own and can safely dispose of; it will never delete anything that you have created or explicitly added without your permission.
This way, you can reuse things you once defined but then stopped using.</p>
			<p>
				Because of this, <code>defs</code> may grow larger and larger as you work on your document.
To remove any unused definitions from <code>defs</code>, use the<span class="ui"><strong>File<span class="MenuArrow"> ▶ </span>Clean Up Document</strong></span> command. Sometimes, this command may fail to
delete <em>all</em> unused stuff in <code>defs</code> on the first try; you may
need to quit, reload the document, and clean it up again.</p>
			<p>
				The next element under the root of an Inkscape SVG document is<code>sodipodi:namedview</code>:</p>
			<pre>&lt;sodipodi:namedview inkscape:window-height="950" inkscape:window-width="1280" inkscape:window-x="0" inkscape:window-y="24" inkscape:pageshadow="2" inkscape:pageopacity="0.0" bordercolor="#666666" pagecolor="#ffffff" inkscape:zoom="0.64306408" inkscape:cx="836.6226" inkscape:cy="619.40089" inkscape:current-layer="layer2" showguides="true" /&gt;</pre>
			<p><a id="479"/><span epub:type="pagebreak" id="Page_479" title="479"/>This Inkscape-specific element holds, in its
attributes, all kinds of options specific to this document: the zoom level and
scroll position that Inkscape will use upon loading the document, the rotation angle of the canvas, the colors and spacing of the
grids, various snapping modes, the current layer, document units, and so on. From within
Inkscape, you can set most of these options via the <span class="ui">File<span class="MenuArrow"> ▶ </span>Document
Properties</span> dialog (<a href="c03.xhtml#section3.1.2">3.1.2</a>).</p>
			<p>
				Finally, the <code>metadata</code> element appears right before the document’s content actually starts.
It stores information about the document's author, its purpose, date, license, and so on,
and it corresponds to the <span class="ui">File<span class="MenuArrow"> ▶ </span>Document Metadata</span> dialog in Inkscape. The elements inside <code>metadata</code>
use the RDF standard (see <a href="https://w3.org/RDF/">https://w3.org/RDF/</a>), which
may employ additional XML namespaces to describe different sorts of information.</p>
			<a id="sectionA.5"/><h2>A.5 Layers and Groups</h2>
			<p>
				After the <code>metadata</code> element, the SVG document’s actual visible content begins. Naturally, each document <em>object</em> corresponds to an
SVG <em>element</em>. Moreover, the order of the elements in the file corresponds to the
order in which the objects are visually stacked on the canvas (<a href="c04.xhtml#section4.4">4.4</a>): elements closer to
the end of the file are painted on top of those at the beginning.</p>
			<p>
				When you group objects together (<a href="c04.xhtml#section4.8">4.8</a>), they are placed inside a<code>g</code> element. For example, here's a group that contains a rectangle and a text object:</p>
			<pre>&lt;g id="g2893"&gt; &lt;rect id="rect2310" y="350" x="100" width="300" height="150" style="opacity:1;fill:#ff0000;stroke:#000000;stroke-width:1px;" /&gt; &lt;text id="text2889" y="400" x="200" style="font-size:40px;font-style:normal;font-weight:normal;fill:#000000; stroke:none;font-family:Bitstream Vera Sans" xml:space="preserve"&gt;Text in rectangle&lt;/text&gt;
&lt;/g&gt;</pre>
			<p>
				Besides groups, another way to organize your objects is via layers (<a href="c04.xhtml#section4.9">4.9</a>). SVG does
not have a special element type for layers; instead, Inkscape uses an SVG <code>g</code> element, adding a custom attribute so it knows to treat the
group as a layer when the file is edited.</p>
			<pre>&lt;g inkscape:groupmode="layer" inkscape:label="Layer 1" id="layer1"&gt; ...contents of the layer...
&lt;/g&gt;</pre>
			<p>
				Since layers are thus a specific type of groups, it is easy to see how Inkscape
can "enter a group," treating it temporarily as a layer (<a href="c04.xhtml#section4.9.1">4.9.1</a>). This is also why,<a id="480"/><span epub:type="pagebreak" id="Page_480" title="480"/>upon importing Inkscape's SVG file into another vector editor (such as Adobe
Illustrator), you usually lose layers but objects get additional layers of
grouping: the other editor knows nothing about Inkscape's convention of using
some <code>g</code> elements as layers and treats all of them as regular groups.</p>
			<p>
				Inside layers and groups, other SVG elements represent the actual objects of
your drawing. See <a href="https://w3.org/TR/SVG11/eltindex.html">https://w3.org/TR/SVG11/eltindex.html</a> for a complete list
of elements in SVG 1.1, but note that Inkscape doesn’t support all of them yet.</p>
			<a id="sectionA.6"/><h2>A.6 Coordinates and Units</h2>
			<p>
				You can use a number of units to express distances and coordinates in SVG drawings:
centimeters (<code>cm</code>), millimeters (<code>mm</code>), inches (<code>in</code>), points (<code>pt</code>), and a few others. One unit,
however, is special: the <em>SVG pixel</em> (abbreviated <code>px</code>) is sometimes
called the <em>anonymous unit</em> because you can write it without any unit designation
at all. For example, in this <code>rect</code> element, <code>x</code>, <code>y</code>,<code>width</code>, and <code>height</code> are expressed in SVG pixels:</p>
			<pre>&lt;rect id="rect2310" y="350" x="100" width="300" height="150" /&gt;</pre>
			<p>You could also specify these same lengths in millimeters:</p>
			<pre>&lt;rect id="rect2310" y="92.604mm" x="26.458mm" width="79.375mm" height="39.688mm" /&gt;</pre>
			<p>and Inkscape would understand it
correctly. However, if you change and resave this SVG file, Inkscape
will convert all sizes back to SVG pixels.</p>
			<p>
				An SVG pixel is not the same as a <em>screen pixel</em>. When you zoom in,
a distance of one SVG pixel becomes larger than one pixel on your screen; when you zoom
out, it becomes smaller than one screen pixel.
However, when your zoom level (displayed at the right end of the status bar of your Inkscape window; see <a href="c02.xhtml#fig2-2">Figure 2-2</a>) is 100 percent,
one SVG pixel exactly corresponds to one screen pixel, which is 
convenient when creating graphics for screen viewing.</p>
			<p>
				In Inkscape, 96 SVG pixels are equal to one inch, so when you export your
image at the resolution of 96 dpi (pixels per inch), it will show up exactly as displayed
in Inkscape at 100 percent zoom. In most places where you can specify sizes or distances in
Inkscape's UI, there's a way to specify the units, and the <code>px</code> unit (SVG pixel) is the
default. You can choose a different default as the <span class="ui">Display unit</span> for your document in the <span class="ui">Document Properties</span>, <span class="ui">Page</span> tab.</p>
			<p>
				SVG uses rectangular Cartesian coordinates for specifying objects'
positions on canvas. The coordinate origin in SVG is in the top-left corner of the page,
and the <code>y</code> coordinate grows downward. By default, Inkscape's UI uses the same convention,
although you can switch the origin to the bottom-left corner with <code>y</code> <a id="481"/><span epub:type="pagebreak" id="Page_481" title="481"/>growing upward (<span class="ui"><strong>Preferences<span class="MenuArrow"> ▶ </span>Interface</strong></span>, uncheck<span class="ui"><strong>Origin at upper left</strong></span> that is checked by default). In older Inkscape versions, origin
at bottom left was the only available option, even though it was always against the SVG convention.</p>
			<a id="sectionA.7"/><h2>A.7 Transformations</h2>
			<p>
				Every object in SVG has its own natural place on the canvas. For example, for a
rectangle,
the <code>rect</code> element's <code>x</code> and <code>y</code> coordinates define this place:</p>
			<pre>&lt;rect id="rect2310" y="350" x="100" width="300" height="150" /&gt;</pre>
			<p>
				However, one of SVG’s most interesting features is that this position can be
affected by the <code>transform</code> attribute. Often, this attribute contains
a sequence of six numbers inside a <code>matrix(...)</code>:</p>
			<pre>&lt;rect transform="matrix(0.96333,0.26831,-0.26831,0.96333,203.200,-160.066)" id="rect2310" y="350" x="100" width="300" height="150" /&gt;</pre>
			<p>
				In this form, the attribute represents an <em>affine transformation matrix</em>. A 
treatment of matrix algebra is outside the scope of this book, but here's a list of transformations that are called affine:</p>
			<ul>
				<li>
					Any <em>moves</em>, also called <em>translations</em> (<a href="c06.xhtml#fig6-1">Figure 6-1</a>).</li>
				<li>
					Any <em>scalings</em>, including both uniform and nonuniform; for example, scaling only width or only height (<a href="c06.xhtml#fig6-2">Figure 6-2</a>).</li>
				<li>
					Any <em>rotations</em> around any center (<a href="c06.xhtml#fig6-6">Figure 6-6</a>).</li>
				<li>
					Any <em>skews</em>, sometimes called <em>shears</em> (<a href="c06.xhtml#fig6-7">Figure 6-7</a>).</li>
			</ul>
			<p>
				Not coincidentally, these transformations are exactly those that the Selector tool can
perform (<a href="c06.xhtml#ch6">Chapter 6</a>). For example, perspective transformations are <em>not</em> affine:
they cannot be expressed by a <code>transform</code> attribute and cannot be performed by the Selector
tool.</p>
			<p>
				An element with a <code>transform</code> attribute tells Inkscape to draw this element at its natural
position and size, and then move, scale, rotate, or skew it as specified in the <code>transform</code>.</p>
			<p>
				A <code>transform</code> value on an element's parent (for example, on the<code>g</code> element that contains this object) affects the object, too. All the
transforms on the object and all its ancestors are <em>combined</em>. This is why, for example,
when you move or scale a group, all objects belonging to the group are moved and scaled
by the same amount, although it is only the parent <code>g</code> element whose<code>transform</code> attribute is modified.</p>
			<p><a id="482"/><span epub:type="pagebreak" id="Page_482" title="482"/>On the <span class="ui">Behavior<span class="MenuArrow"> ▶ </span>Transforms</span> page of the <span class="ui">Preferences</span> dialog (<a href="c03.xhtml#section3.1">3.1</a>),
there's a <span class="ui">Store transformations</span> choice with the values of <span class="ui">Optimized</span> and<span class="ui">Preserved</span>. This determines the strategy Inkscape uses when transforming objects.
With <span class="ui">Preserved</span>, it will always record all transformations of all objects as<code>transform</code> attributes, leaving all other attributes intact. With<span class="ui">Optimized</span> (default), Inkscape will try, whenever possible, to record the transformation into
the object's other attributes and not <code>transform</code>. For example, when you move
a rectangle, in the optimized mode, it will change the rectangle's <code>x</code> and<code>y</code> attributes instead of adding or changing its <code>transform</code>. Not
all kinds of transformations and not all types of objects allow for such optimization,
however, so even in the optimized mode, <code>transform</code> attributes will still be
created. The only object type that can optimize any kinds of transformations and 
make do without the <code>transform</code> at all times is <code>path</code>.</p>
			<a id="sectionA.8"/><h2>A.8 Style</h2>
			<p>
				Naturally, the style properties of an object can be represented as attributes of
the corresponding element. Such attributes are called <em>presentation
attributes</em>. For example, this rectangle has blue fill and black stroke 1 px wide:</p>
			<pre>&lt;rect id="rect2310" y="350" x="100" width="300" height="150" fill="blue" stroke="black" stroke-width="1" /&gt;</pre>
			<p>
				This, however, is only one of the ways to record style properties in XML. Another
way is to pack all the properties into a single attribute, called <code>style</code>,
using semicolons (<code>;</code>) to separate properties and
colons (<code>:</code>) to separate the name from the value in each property:</p>
			<pre>&lt;rect id="rect2310" y="350" x="100" width="300" height="150" style="fill:blue;stroke:black;stroke-width:1" /&gt;</pre>
			<p>
				Inkscape understands both methods—but when writing properties to SVG, for historical
reasons, it uses only the second one, with a single <code>style</code> attribute. When both are present, 
the properties in the <code>style</code> attribute take precedence over the same 
properties in presentation attributes.</p>
			<p>
				This appendix
does not list all the style properties SVG uses (for a complete list, see<a href="https://w3.org/TR/SVG11/propidx.html">https://w3.org/TR/SVG11/propidx.html</a>), but you should
be able to recognize the most common ones.</p>
			<p>
				SVG prescribes that most (but not all) style properties can be inherited
by children from their parents, provided a child does not specify its own value for
that property. For example, if a rectangle has no <code>fill</code> property specified
but its <a id="483"/><span epub:type="pagebreak" id="Page_483" title="483"/>parent <code>g</code> has <code>fill="blue"</code>, the rectangle will be
painted blue. In Inkscape, such inheritance rarely plays a role, because
normally, objects have most of their properties explicitly set whether you changed them or
not. However, for <code>fill</code> and <code>stroke</code> properties, there's a way to remove, or <em>unset</em>,
these properties via the UI, making it possible to inherit these properties from
the parent element (<a href="c08.xhtml#section8.2">8.2</a>).</p>
			<a id="sectionA.9"/><h2>A.9 Linking</h2>
			<p>
				Often, elements in SVG need to refer, or <em>link</em>, to one another. This is most
common when visible elements on the canvas use some of the definitions in<code>defs</code> (<a href="#sectionA.4">A.4</a>). For example, if you have a rectangle filled with a linear gradient, the<code>rect</code> element describes only the rectangle itself.
A different element called <code>linearGradient</code> in the document’s <code>defs</code> describes its gradient,
and the rectangle links to that gradient definition.</p>
			<p>
				In order to be linkable, an element must have an <code>id</code> attribute whose
value is unique inside this document. Inkscape provides unique <code>id</code>s for all
elements automatically. The URL for linking to an element is simply its <code>id</code>
preceded by a hash mark (<code>#</code>)—for example,<code>#linearGradient2128</code>. To use this URL from a <code>style</code> property, you
need to enclose it in parentheses and prefix it with the string <code>url</code>. For
example, here's a <code>linearGradient</code> element and a rectangle linking to it from
its <code>fill</code> property:</p>
			<pre>&lt;defs&gt; &lt;linearGradient id="linearGradient2128"&gt; &lt;stop id="stop2286" offset="0" style="stop-color:#0000ff;stop-opacity:0;" /&gt; &lt;stop id="stop2284" offset="1" style="stop-color:#0000ff;stop-opacity:1;" /&gt; &lt;/linearGradient&gt;
&lt;/defs&gt;
...
&lt;rect id="rect2310" y="350" x="100" width="300" height="150" style="fill:url(#linearGradient2128)" /&gt;</pre>
			<p>
				Linking is not always done by style properties; for example, the SVG
standard says that gradients can link to one another in order to share color stops and
other attributes. In such cases, SVG uses the <code>xlink:href</code> attribute (in other
words, the <code>href</code> attribute in the XLink namespace; XLink is another W3C standard,
separate from SVG, used in many XML vocabularies for linking). The<code>xlink:href</code> attribute uses the plain URL without the <code>url()</code>
wrapper—for example, <code>xlink:href="#linearGradient2128"</code>.</p>
			<p>
				SVG allows you to link not only to other elements in the same document but
also to other documents, accessible locally or on the internet, as well as to elements
inside them. Inkscape does not yet support such cross-document
linking to SVG documents—although it can link to external bitmap files inserted as
bitmap objects in a document (<a href="c18.xhtml#section18.2.1">18.2.1</a>).</p>
			<a id="sectionA.10"/><h2>
				A.10 <a id="484"/><span epub:type="pagebreak" id="Page_484" title="484"/>Object Types</h2>
			<p>
				Inkscape can create various object
types, each object remembering its type and providing controls and
behaviors specific to that type (<a href="c11.xhtml#ch11">Chapter 11</a>).
SVG directly supports some of these object types; for example, <code>rect</code> elements from SVG represent Inkscape’s rectangles. 
But others are unique to Inkscape—for example, SVG
has no special elements for spirals, stars, or 3D boxes. How can Inkscape use these
object types while staying compatible with SVG?</p>
			<p>
				The solution is the <code>sodipodi:type</code> attribute. Inkscape saves
a star as a universal <code>path</code> element that can represent any shape,
but adds to it the <code>sodipodi:type</code> indicating it's actually a star, as well
as some other extension attributes storing various star-specific parameters. The <code>path</code>'s
standard <code>d</code> attribute, meanwhile, provides an exact representation of the
star's shape:</p>
			<pre>&lt;path sodipodi:type="star" style="fill:#ff0000;" sodipodi:sides="5" sodipodi:cx="342.85715" sodipodi:cy="703.79077" sodipodi:r1="105.75289" sodipodi:r2="40.397606" sodipodi:arg1="0.90027477" sodipodi:arg2="1.5285933" inkscape:flatsided="false" inkscape:rounded="0" inkscape:randomized="0" d="M 408.571,786.647 L 344.561,744.152 L 284.362,791.893  L 304.997,717.884 L 240.990,675.383 L 317.754,672.139  L 338.395,598.132 L 365.202,670.135 L 441.965,666.897  L 381.770,714.642 L 408.571,786.647 z" /&gt;</pre>
			<p>
				When loading a document with such an element, Inkscape recognizes the<code>sodipodi:type</code> and, for editing, treats the object as a star rather than a path. When
any other SVG software loads the same file, it ignores any Inkscape-specific attributes
and interprets this element as a simple path—which, however, <em>looks</em> exactly the same as
the star displayed in Inkscape. In other words, while only Inkscape can <em>edit</em> the star as a
star, using the standard <code>path</code> as the base for this object type ensures that
it remains compatible with any SVG software.</p>
			<a id="sectionA.11"/><h2>A.11 Inkscape's SVG Extensions</h2>
			<p>To conclude this necessary but very superficial appendix, I give a list of
the most important extension elements and attributes that you may see in Inkscape SVG
files.</p>
			<p>One point bears repeating: none of these additional elements and attributes make
Inkscape documents invalid SVG. The X in "XML" stands for "eXtensible" for a reason: the
ability to mix different vocabularies freely was one of XML's goals from the very
beginning. This means that any Inkscape SVG file must—and does—render
absolutely the same in all compliant SVG renderers.</p>
			<ul>
				<li><a id="485"/><span epub:type="pagebreak" id="Page_485" title="485"/>The <code>inkscape:version</code> attribute on the root element identifies the version of Inkscape in which the file was last edited and saved.</li>
				<li>
					The <code>inkscape:collect</code> attribute is added to those elements in<code>defs</code> that can be deleted automatically if no longer used (<a href="#sectionA.4">A.4</a>).</li>
				<li><span class="NoteHead">[1.1]</span> <br/>The <code>inkscape:isstock</code> attribute is set on those elements in <code>defs</code>
that are taken from Inkscape's stock markers, patterns, gradients, and so on, as opposed to those you created
yourself. The <code>inkscape:stockid</code> attribute provides the <code>id</code> that this element had in its stock source.</li>
				<li>
					The <code>sodipodi:namedview</code> element and its attributes are where Inkscape stores per-document
preferences (<a href="#sectionA.4">A.4</a>).</li>
				<li>
					The <code>sodipodi:type</code> attribute is what Inkscape uses to mark objects of non-SVG types
(<a href="#sectionA.10">A.10</a>). An element with this attribute usually has a bunch of other
Inkscape-specific attributes that store various parameters unique to this object type.</li>
				<li>
					The <code>inkscape:transform-center-x</code> and<code>inkscape:transform-center-y</code> attributes are set on an object if you have moved
its fixed point (<a href="c06.xhtml#section6.4">6.4</a>). Inkscape remembers the position of this point for
each object for which it was changed.</li>
				<li>
					The <code>sodipodi:nodetypes</code> attribute is where Inkscape stores the types of all
nodes of a path that you edited with the Node tool. Classifying nodes as smooth,
symmetric, and cusp (<a href="c12.xhtml#section12.5.5">12.5.5</a>) is something Inkscape allows you to do, but SVG has no provisions
for—hence the need for an extension attribute.</li>
				<li>
					The <code>sodipodi:role</code> attribute with the value of <code>line</code> is set on those <code>tspan</code> elements
inside a <code>text</code> element that represents a line (<a href="c15.xhtml#section15.2.1">15.2.1</a>).</li>
				<li>
					The <code>inkscape:groupmode</code> attribute on a <code>g</code> is what differentiates
a group from a layer in Inkscape (<a href="#sectionA.5">A.5</a>). For a layer, this attribute stores the value<code>layer</code>.</li>
				<li>
					The <code>inkscape:label</code> attribute can be set on any element to provide a
human-readable label for the corresponding object (the<code>id</code> attribute is bad for this purpose because it cannot contain spaces and
punctuation; <code>inkscape:label</code> is free from those limitations, <a href="c04.xhtml#section4.1">4.1</a>).
In this attribute, Inkscape stores the human-readable name of a layer.</li>
				<li>
					The <code>inkscape:menu</code> and <code>inkscape:menu-tooltip</code> attributes appear on a <code>filter</code> element in <code>defs</code> when you apply
one of the preset filters (<a href="c17.xhtml#section17.4">17.4</a>) to an object in your document. They store the submenu from which this filter came and its brief
description (which Inkscape uses for a status bar tip when you browse the menus).</li>
				<li>
					The <code>inkscape:perspective</code> element is stored in <code>defs</code> when you use the 3D Box tool (<a href="c11.xhtml#section11.3">11.3</a>);
it stores a shared perspective to which multiple 3D box objects may refer.</li>
				<li>
					A collection of <code>inkscape:tile-*</code> attributes appear on an object after you use the clone tiler on it (<a href="c16.xhtml#section16.6">16.6</a>);
they store the tile's saved size and position.</li>
				<li>
					The <code>inkscape:export-filename</code> attribute,  which you can set on any element (including root),
stores the filename, including the path, into which this object (or, in case of root element, the entire document) was last exported <a id="486"/><span epub:type="pagebreak" id="Page_486" title="486"/>as
a bitmap. This value is automatically placed into the <span class="ui">Filename</span> field of the <span class="ui">Export
PNG Image</span> dialog (<a href="c18.xhtml#section18.6.1.4">18.6.1.4</a>), so you can quickly redo exporting to the same file. (This is why Inkscape claims that the document has
changed and needs resaving after you do a bitmap export from it.) Similarly, the <code>inkscape:export-xdpi</code> and <code>inkscape:export-ydpi</code> attributes
contain the horizontal and vertical resolution you last used for exporting this document.</li>
			</ul>
		</section>
	</body>
</html>