<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="z3998: http://www.daisy.org/z3998/2012/vocab/structure/#" lang="en" xml:lang="en">
  <head>
    <title>Project 6: An LCD Reminder</title>
    <link href="../styles/9781593278717.css" rel="stylesheet" type="text/css"/>
    <link href="../68851547a55f.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="sbo-rt-content"><h2 class="h2" id="ch06"><span epub:type="pagebreak" id="page_84"/><strong>6<br/>AN LCD Reminder</strong></h2>
<p class="noindent"><span class="green2">In this project, you’ll connect a character LCD to your Raspberry Pi to display a scrolling reminder message. You’ll start by displaying static text for short messages and then learn how to display scrolling text ideal for longer messages.</span></p>
<div class="image"><span epub:type="pagebreak" id="page_85"/><img src="../images/f0085-01.jpg" alt="image"/></div>
<p class="cap"><span class="green2"><strong>PARTS REQUIRED</strong></span></p>
<p class="cap1">Raspberry Pi</p>
<p class="cap1">Breadboard</p>
<p class="cap1">16×2 Hi tachi HD44780-compatible LCD</p>
<p class="cap1">10 kΩ potent iometer</p>
<p class="cap1">Jumper wires</p>
<p class="cap"><span class="green2"><strong>SOFTWARE REQUIRED</strong></span></p>
<p class="cap1">Adafruit_CharLCD library</p>
<h3 class="h3" id="lev64"><span epub:type="pagebreak" id="page_86"/><span class="green2"><strong>INTRODUCING THE LIQUID CRYSTAL DISPLAY</strong></span></h3>
<p class="noindent">The simplest and cheapest display screen around is the <em>liquid crystal display (LCD)</em>. LCDs are found in everyday electronics devices like vending machines, calculators (see <a href="ch06.xhtml#ch06fig1">Figure 6-1</a>), parking meters, and printers, and are ideal for displaying text or small icons.</p>
<div class="image"><a id="ch06fig1"/><img src="../images/f0086-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 6-1:</strong> Calculator with an LCD</p>
<p class="indent">LCDs are measured according to the number of rows and columns of characters that fit on the screen. A 16×2 LCD can display 2 rows of 16 characters each. You’ll find sizes ranging from 8×1 to 40×4.</p>
<p class="indent">LCDs also vary in background color. You can find a wide variety of background colors, including RGB background lights that let you create any color.</p>
<p class="indent">The most common LCD modules use the Hitachi HD44780 chip, which allows you to use custom characters. <a href="ch06.xhtml#ch06fig2">Figure 6-2</a> shows a standard 16×2 Hitachi HD44780–compatible LCD; we recommend using this type for this project. Most 16×2 screens will be compatible, but before you buy one, check the part’s data sheet just to be safe. You can also use 20×4 LCDs as long as they are Hitachi HD44780–compatible.</p>
<div class="image"><a id="ch06fig2"/><img src="../images/f0086-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 6-2:</strong> A standard 16×2 Hitachi HD44780–compatible LCD</p>
<p class="indent"><span epub:type="pagebreak" id="page_87"/>If you look closely at <a href="ch06.xhtml#ch06fig2">Figure 6-2</a>, you’ll see 32 rectangles made of 5×8 pixels. The combination of on and off pixels is what makes up the character shapes.</p>
<h4 class="h4" id="lev65"><span class="green2"><strong>Soldering the Headers</strong></span></h4>
<p class="noindent">More likely than not, your LCD module will come with the header pins separate, as shown in <a href="ch06.xhtml#ch06fig3">Figure 6-3</a>. You’ll need to solder the pins to your module to make it breadboard-friendly. Put the pins in the available holes—there should be 16 pins for 16 holes—with the long end pointing down and solder them in place.</p>
<div class="image"><a id="ch06fig3"/><img src="../images/f0087-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 6-3:</strong> LCD with separate header pins</p>
<h4 class="h4" id="lev66"><span class="green2"><strong>The LCD Module Pinout</strong></span></h4>
<p class="noindent">The LCD module pins are numbered from 1 to 16, from left to right when the pins are above the screen:</p>
<table class="topbot-d">
<thead>
<tr>
<td style="vertical-align: top;" class="border_thc"><p class="tab_th"><strong>PIN</strong></p></td>
<td style="vertical-align: top;" class="border_tha"><p class="tab_th"><strong>SYMBOL</strong></p></td>
<td style="vertical-align: top;" class="border_thc"><p class="tab_th"><strong>DESCRIPTION</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">1</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">VSS</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Ground</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">2</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">VDD</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Power supply</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">3</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">V0</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Contrast adjustment</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">4</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">RS</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Register selection</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">5</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">R/W</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Read/Write selection</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">6</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">E</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Enable</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">7–14</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">DB0–DB7</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Data pins</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">15</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">LEDA</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Backlight anode (5V)</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">16</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">LEDK</span></p></td>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">Backlight cathode (–)</span></p></td>
</tr>
</tbody>
</table>
<div class="note">
<p class="notet"><span epub:type="pagebreak" id="page_88"/><span class="red"><strong>WARNING</strong></span></p>
<p class="notep"><em>The Raspberry Pi GPIOs are designed for 3.3 V, but most LCDs are 5 V. This isn’t a problem as long as you’re only sending data out of the Pi and not reading data from the screen to the Pi. With a 5 V screen,</em> do not connect the R/W pin of the display to the Pi. <em>This pin sends data at 5 V, and it will very likely fry your Pi!</em></p>
</div>
<p class="indent">VSS is a ground pin and should be connected to GND. VDD is a power pin and should be given 5 V or 3.3 V depending on the type of LCD you are working with; most require 5 V.</p>
<p class="indent">V0 allows you to adjust the contrast between the characters and the backlight when the LCD is connected to a potentiometer.</p>
<p class="indent">RS, R/W, and E are control pins. When using the screen to display text only, as in this project, you should permanently connect R/W directly to ground; in other words, you’ll only be writing to the LCD and not reading from it.</p>
<p class="indent">Pins 7 to 14 are data pins, used to send information. Pins 15 and 16 are the anode and cathode for the backlight.</p>
<p class="indent">Though the LCD module has 16 pins, you need only 6 of them to communicate with your Raspberry Pi: 4, 6, 11, 12, 13, and 14.</p>
<h3 class="h3" id="lev67"><span class="green2"><strong>WIRING YOUR CIRCUIT</strong></span></h3>
<p class="noindent">Now that your LCD is ready to use, you can start building this project’s circuit. Follow these steps to wire the LCD and Pi, using the circuit diagram in <a href="ch06.xhtml#ch06fig4">Figure 6-4</a> for reference.</p>
<ol>
<li class="noindent"><p class="list">Connect the breadboard power rails to 5 V and GND.</p></li>
<li class="noindent"><p class="list">To power the LCD, connect 5 V from the power rails to LCD pin 2 (VDD) and to LCD pin 15 (LEDA). Connect LCD pin 1 (VSS), pin 5 (R/W), and pin 16 (LEDK) to the GND rail on the breadboard.</p></li>
<li class="noindent"><p class="list">Add a potentiometer to adjust the contrast: connect one of the outer leads to the GND and the other outer lead to 5 V, and then connect the middle lead to LCD pin 3 (V0).</p></li>
<li class="noindent"><p class="list">Connect the Pi’s GPIO pins as shown in the following table.</p></li>
</ol>
<table class="topbot-d">
<thead>
<tr>
<td style="vertical-align: top;" class="border_thc"><p class="tab_th"><strong>LCD</strong></p></td>
<td style="vertical-align: top;" class="border_tha"><p class="tab_th"><strong>RASPBERRY PI</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">4 (RS)</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">GPIO 27</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">6 (E)</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">GPIO 22</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">11 (DB4)</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">GPIO 25</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">12 (DB5)</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">GPIO 24</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">13 (DB6)</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">GPIO 23</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-ch"><p class="tabc"><span class="green2">14 (DB7)</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="green2">GPIO 18</span></p></td>
</tr>
</tbody>
</table>
<div class="image"><span epub:type="pagebreak" id="page_89"/><a id="ch06fig4"/><img src="../images/f0089-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 6-4:</strong> LCD wired to the Raspberry Pi</p>
<p class="indent">When you’re finished wiring, try adjusting the LCD contrast by rotating the potentiometer; you should see the backlighting change. If the contrast doesn’t change, double-check the wiring before moving on.</p>
<h3 class="h3" id="lev68"><span class="green2"><strong>WRITING THE SCRIPT</strong></span></h3>
<p class="noindent">Before you can write the script to display messages on the LCD, you need to install the Python library for a character LCD, Adafruit_CharLCD. This library features a lot of functions that make it easy to control the LCD.</p>
<h4 class="h4" id="lev69"><span class="green2"><strong>Installing the Python Library for a Character LCD</strong></span></h4>
<p class="noindent">Go to the Raspberry Pi desktop taskbar and open the terminal. Before installing the Adafruit_CharLCD library, you need to install the following dependencies:</p>
<div class="box">
<pre>pi@raspberrypi:~ $ <span class="codestrong">sudo apt update</span><br/>pi@raspberrypi:~ $ <span class="codestrong">sudo apt install build-essential python3</span><br/><span class="codestrong">python-dev python-smbus python3-pip git-core</span></pre>
</div>
<p class="indent">When prompted, type <span class="codestrong">y</span> and press <small>ENTER</small>.</p>
<p class="indent">Navigate to the desktop, create a folder called <em>Libraries</em>, and change directory to the newly created folder with the following commands:</p>
<div class="box">
<pre>pi@raspberrypi:~ $ <span class="codestrong">cd ~/Desktop</span><br/>pi@raspberrypi:~/Desktop $ <span class="codestrong">mkdir Libraries</span><br/>pi@raspberrypi:~/Desktop $ <span class="codestrong">cd Libraries</span><br/>pi@raspberrypi:~/Desktop/Libraries $</pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_90"/>Download the installation files by entering the following command:</p>
<div class="box">
<pre>pi@raspberrypi:~/Desktop/Libraries $ <span class="codestrong">git clone https://github.com/</span><br/><span class="codestrong">adafruit/Adafruit_Python_CharLCD.git</span></pre>
</div>
<p class="indent">Navigate to the <em>Adafruit_Python_CharLCD</em> directory:</p>
<div class="box">
<pre>pi@raspberrypi:~/Desktop/Libraries $ <span class="codestrong">cd Adafruit_Python_CharLCD</span></pre>
</div>
<p class="indent">Finally, execute the following command to install the Adafruit_CharLCD library:</p>
<div class="box">
<pre>pi@raspberrypi:~/Desktop/Libraries/Adafruit_Python_CharLCD $ <span class="codestrong">sudo</span><br/><span class="codestrong">python3 setup.py install</span></pre>
</div>
<p class="indent">Congratulations! You successfully installed the Python library for a character LCD. We encourage you to navigate through the <em>Examples</em> folder and take a look.</p>
<h4 class="h4" id="lev70"><span class="green2"><strong>Displaying a Character Message</strong></span></h4>
<p class="noindent">Go to your <em>Projects</em> folder and create a new folder called <em>Displays</em>. Open <strong>Python 3 (IDLE)</strong> and go to <strong>File</strong> <span class="ent">▸</span> <strong>New File</strong> to create a new script. Then, enter the following code into the Python Editor and save the script as <em>character_lcd.py</em> (remember that you can download all the scripts at <em><a href="https://www.nostarch.com/RaspberryPiProject/">https://www.nostarch.com/RaspberryPiProject/</a></em>):</p>
<div class="box">
<pre><span class="ent">➊</span> <span class="orange">import</span> Adafruit_CharLCD <span class="orange">as</span> LCD<br/><br/>  <span class="red1">#Raspberry Pi pin configuration</span><br/><span class="ent">➋</span> lcd_rs = 27<br/>  lcd_en = 22<br/>  lcd_d4 = 25<br/>  lcd_d5 = 24<br/>  lcd_d6 = 23<br/>  lcd_d7 = 18<br/>  lcd_backlight = 4<br/><br/>  <span class="red1">#define the LCD size</span><br/><span class="ent">➌</span> lcd_columns = 16<br/>  lcd_rows = 2<br/><br/>  <span class="red1">#initialize the LCD</span><br/><span class="ent">➍</span> lcd = LCD.Adafruit_CharLCD(lcd_rs, lcd_en, lcd_d4, lcd_d5, lcd_d6, <br/>  lcd_d7, lcd_columns, lcd_rows, lcd_backlight)<br/><br/>  <span class="red1">#write your message</span><br/><span class="ent">➎</span> lcd.message(<span class="green">'It works\nYou rock!'</span>)</pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_91"/>You start by importing the previously installed character LCD library at <span class="ent">➊</span>. Then, at <span class="ent">➋</span> you configure your Pi pins. At <span class="ent">➌</span>, you define your LCD size. If you’re using a 20×4 LCD, you need to change those two lines of code accordingly.</p>
<p class="indent">After that, the LCD is initialized <span class="ent">➍</span>, and you write your message inside the function <code>lcd.message('</code><span class="codeitalic">string</span><code>')</code> between the single quotes <span class="ent">➎</span>. The <code>\n</code> escape character tells the LCD to display the text that follows on the next line. Feel free to change this message to anything you like!</p>
<p class="indent">Press <strong>F5</strong> or go to <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong> to run the script, and your LCD should display the text, as in <a href="ch06.xhtml#ch06fig5">Figure 6-5</a>.</p>
<div class="image"><a id="ch06fig5"/><img src="../images/f0091-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 6-5:</strong> Your circuit displaying a static message</p>
<h4 class="h4" id="lev71"><span class="green2"><strong>Adding Other Functionality</strong></span></h4>
<p class="noindent">It’s worth knowing a few other useful functions you can use for more than just displaying text; you may want to set the cursor to a certain position or clear the display in preparation for new messages, for example. The library you’ve installed provides the following functions for you:</p>
<ul>
<li class="noindent"><code>lcd.message(</code><span class="codeitalic">string</span><code>)</code> displays the message written between brackets.</li>
<li class="noindent"><code>lcd.clear()</code> clears the display.</li>
<li class="noindent"><code>lcd.show_cursor(</code><span class="codeitalic">boolean</span><code>)</code> shows the cursor after the message.</li>
<li class="noindent"><code>lcd.blink(</code><span class="codeitalic">boolean</span><code>)</code> shows a blinking cursor.</li>
<li class="noindent"><span epub:type="pagebreak" id="page_92"/><code>lcd.move_right()</code> moves the displayed message one character to the right.</li>
<li class="noindent"><code>lcd.move_left()</code> moves the displayed message one character to the left.</li>
<li class="noindent"><code>lcd.home()</code> sets the cursor to the first column and first row (0,0).</li>
<li class="noindent"><code>lcd.set_cursor(int, int)</code> sets the cursor to the specified column and row. For example, <code>lcd.set_cursor(2, 1)</code> sets the cursor to the third column and second row.</li>
</ul>
<p class="indent">The data types shown in italic tell you what kind of value you need to enter as an argument; for example, in place of <span class="codeitalic">boolean</span> you’d enter <code>True</code> or <code>False</code>.</p>
<h4 class="h4" id="lev72"><span class="green2"><strong>Scrolling a Reminder Message</strong></span></h4>
<p class="noindent">This LCD screen is pretty small, so you’ll get stuck if you try to display messages longer than 32 characters. So, now we’ll show you how to write a script to display a longer message that scrolls across the screen, like a reminder for a doctor appointment you can’t miss. In the first row, you’ll have a title for your message, like “Reminder” or “Don’t forget,” and in the second row your reminder message will scroll by.</p>
<p class="indent">Displaying a scrolling message is not as straightforward as showing a static message, so let’s think about what we want to happen before we write our code:</p>
<ul>
<li class="noindent">The first row displays a static title.</li>
<li class="noindent">The second row displays a scrolling message.</li>
<li class="noindent">The scrolling message moves from right to left.</li>
<li class="noindent">The characters should appear from the rightmost column.</li>
<li class="noindent">The characters should disappear at the leftmost column.</li>
</ul>
<p class="indent">The message scrolls forever until stopped. Inside the <em>Displays</em> folder, create a new script with <strong>Python 3 (IDLE)</strong> called <em>scrolling_text.py</em> and enter the following code:</p>
<div class="box">
<pre>  <span class="orange">import</span> Adafruit_CharLCD <span class="orange">as</span> LCD<br/><span class="ent">➊</span> <span class="orange">import</span> time<br/><br/>  <span class="red1">#Raspberry Pi pin configuration</span><br/>  lcd_rs = 27<br/>  lcd_en = 22<br/>  lcd_d4 = 25<br/>  lcd_d5 = 24<br/><span epub:type="pagebreak" id="page_93"/>  lcd_d6 = 23<br/>  lcd_d7 = 18<br/>  lcd_backlight = 4<br/><br/>  <span class="red1">#define the LCD size</span><br/>  lcd_columns = 16<br/>  lcd_rows = 2<br/><br/>  <span class="red1">#initialize the LCD</span><br/>  lcd = LCD.Adafruit_CharLCD(lcd_rs, lcd_en, lcd_d4, lcd_d5, lcd_d6,<br/>  lcd_d7, lcd_columns, lcd_rows, lcd_backlight)<br/><br/>  <span class="red1">#write your message</span><br/><span class="ent">➋</span> title = <span class="green">"Don't forget!"</span><br/><span class="ent">➌</span> reminder = <span class="green">"You have a doctor appointment next Monday"</span><br/><br/>  <span class="red1">#set the delay for scroll</span><br/><span class="ent">➍</span> delay = 0.3<br/><br/>  <span class="red1">#write a function to scroll the message</span><br/><span class="ent">➎</span> <span class="orange">def</span> <span class="blue">scroll_message</span>(reminder, delay):<br/>      padding = <span class="green">' '</span> * lcd_columns<br/>      reminder_message = padding + reminder + <span class="green">' '</span><br/>    <span class="ent">➏</span> <span class="orange">for</span> i <span class="orange">in</span> <span class="purple">range</span>(<span class="purple">len</span>(reminder_message)):<br/>          lcd.set_cursor(0, 1)<br/>          lcd.message(reminder_message[i:(i+lcd_columns)])<br/>          time.sleep(delay)<br/><br/><span class="ent">➐</span> lcd.clear()<br/>  lcd.home()<br/>  lcd.message(title)<br/><br/>  <span class="red1">#scroll the message in an infinite loop</span><br/><span class="ent">➑</span> <span class="orange">while</span> <span class="orange">True</span>:<br/>      scroll_message(reminder, delay)</pre>
</div>
<p class="indent">You’re already familiar with importing the Adafruit_CharLCD library, configuring the Raspberry Pi pins, defining the screen size, and initializing the LCD.</p>
<p class="indent">For this example, you also need to import the time library <span class="ent">➊</span> to use functions related to time. At <span class="ent">➋</span> and <span class="ent">➌</span>, you assign the text that will be displayed as the title and reminder messages, respectively. The <code>delay</code> <span class="ent">➍</span> will be the time a character stays in one place before moving one character to the left. In this case, you set the delay to <code>0.3</code> seconds; the lower the delay, the faster the text will scroll.</p>
<p class="indent">At <span class="ent">➎</span>, you create a function called <code>scroll_message(</code><code><em>string</em>, <em>float</em>)</code> that accepts two parameters: a string that will be your <code>reminder</code> and a float that will be the <code>delay</code>. Inside the function you start by creating <span epub:type="pagebreak" id="page_94"/>a <code>padding</code> variable that consists of a blank character multiplied by the number of columns your LCD has. This will fill all your character slots initially with a blank square variable, creating the illusion that characters are appearing gradually. Then you create a new variable called <code>reminder_message</code> that is the concatenation of the <code>padding</code>, the <code>reminder</code>, and one blank space. You need to add this extra blank space to create the disappearing effect of the <code>reminder_message</code>.</p>
<p class="indent">The function goes through a <code>for</code> <span class="ent">➏</span> loop from <code>0</code> to the length of the <code>reminder_message</code>. The function <code>len(</code><span class="codeitalic">object</span><code>)</code> returns the length of an object—in this case, the number of characters in the <code>reminder_message</code> string, which tells us how many times to loop.</p>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>Python uses</em> zero-based indexing, <em>which means that indexes start counting at zero. For instance, the first character of a string has index <code>0</code>.</em></p>
</div>
<p class="indent">Inside the loop, the code starts by setting the cursor to the first column, second row, where you want to start displaying your reminder. In the next line, <code>reminder_message[i:(i+lcd_columns)]</code> truncates your <code>reminder_message</code>, returning the characters from index <code>i</code> to index number <code>i+lcd_columns</code> exclusively.</p>
<p class="indent">Each time the loop runs, you will display a different part of your message; this is what actually creates the scrolling effect (see <a href="ch06.xhtml#ch06fig6">Figure 6-6</a>).</p>
<div class="image"><a id="ch06fig6"/><img src="../images/f0094-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 6-6:</strong> Truncating a string to make a scrolling effect</p>
<p class="indent">After displaying the full message, the code waits the number of seconds assigned in the <code>delay</code> variable.</p>
<p class="indent">At <span class="ent">➐</span>, you clear the screen and display the <code>title</code> message from the first column, in the first row.</p>
<p class="indent"><span epub:type="pagebreak" id="page_95"/>Finally, at <span class="ent">➑</span>, you create a <code>while</code> loop that is always <code>True</code>. This is a little trick to make something run forever and ever. Inside that loop you call the function <code>scroll_message(</code><code><em>string</em>, <em>float</em>)</code> with your own arguments: <code>reminder</code> and <code>delay</code>.</p>
<h4 class="h4" id="lev73"><span class="green2"><strong>Running the Script</strong></span></h4>
<p class="noindent">Press <strong>F5</strong> or go to <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong> to run the script. Unfortunately, we can’t show the text moving in a book, but you get the idea!</p>
<h3 class="h3" id="lev74"><span class="green2"><strong>TAKING IT FURTHER</strong></span></h3>
<p class="noindent">We recommend that you modify the sample script we’ve given you with the coding tricks you’ve learned here and earlier, and experiment with the functions shown in <a href="ch06.xhtml#lev71">“Adding Other Functionality”</a> on <a href="ch06.xhtml#page_91">page 91</a> to get familiar with the LCD. When you’re done, here are some projects to try:</p>
<ul>
<li class="noindent">Build a weather forecaster using the LCD display—take a look at <a href="ch07.xhtml#ch07">Project 7</a>, in which we show how to get weather data.</li>
<li class="noindent">Display messages based on weather conditions, like “Don’t forget your umbrella.”</li>
<li class="noindent">Display sensor data on the LCD—check out <a href="ch09.xhtml#ch09">Projects 9</a>–<a href="ch12.xhtml#ch12">12</a> to learn how to read data from a sensor.</li>
</ul>
</div>
  </body>
</html>
