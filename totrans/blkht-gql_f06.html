<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en">
<head>
<title>Introduction</title>
<link href="NSTemplate_v1.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:c77cce49-9403-4fd1-99ba-33d115574b0c" name="Adept.expected.resource"/>
</head>
<body epub:type="frontmatter">
<section>
<header><h1 class="FrontmatterTitle" id="fm-502840f06-0001"><span epub:type="pagebreak" id="Page_xxi" title="xxi"/><a class="XrefDestination" id="Introduction"/><span class="XrefDestination" id="xref-502840f06-001"/>Introduction</h1></header>
<figure class="opener">
<img alt="" src="image_fi/book_art/chapterart.png"/>
</figure>
<p class="ChapterIntro">In 2015, we met for the first time at a coffee shop in downtown Toronto, hoping to establish a local hacking community. That meeting was the genesis of Toronto’s official DEFCON chapter. Ever since then, we’ve collaborated to break web applications, cars, locks, smart buildings, and APIs. In more recent years, we’ve focused our attention on yet another challenge: the vast world of offensive GraphQL security.</p>
<p>A relatively new technology, the GraphQL query language has shifted the API paradigm, appealing to many companies looking to optimize performance, scale, and ease of use. However, fully understanding this query language’s security implications takes time. Our collaboration has unlocked a vast number of novel insights about GraphQL and its ecosystem. In fact, many of the vulnerabilities and exploits referenced in this book have never before been published. We uncovered several of them, including unique, <span epub:type="pagebreak" id="Page_xxii" title="xxii"/>never-before-seen weaknesses, through our joint research. In addition, we ourselves are the authors and maintainers of many of the GraphQL security tools, educational security platforms, and exploits highlighted herein.</p>
<p>This book provides a practical resource for offensive security engineers as well as defenders. By bridging the gap between the hacking community and the GraphQL ecosystem, we aim to improve this increasingly popular technology, strengthening the security of the many industries that use it and educating engineers on how to attack and defend their GraphQL APIs.</p>
<h2 id="h1-502840f06-0001"><a class="XrefDestination" id="WhoThisBookIsFor"/><span class="XrefDestination" id="xref-502840f06-002"/>Who This Book Is For</h2>
<p class="BodyFirst">This book is for anyone interested in learning how to break and protect GraphQL APIs through applied offensive security testing. Whether you’re a penetration tester who has heard of GraphQL and want to develop your hacking expertise, a security analyst looking to improve your knowledge of how to defend GraphQL APIs, or a software engineer planning to build a GraphQL-backed application, you should gain a lot of useful information from this book. By learning how to attack GraphQL APIs, you can develop hardening procedures, build automated security testing into your integration-and-delivery pipeline, and effectively validate controls.</p>
<p>This book assumes that you have no prior exposure to GraphQL. If you already understand the technology, the first three chapters will reinforce some basics of the language, as well as discuss advanced topics. You can then delve into the offensive security aspects beginning in <span class="xref" itemid="xref_target_Chapter 4">Chapter 4</span>.</p>
<h2 id="h1-502840f06-0002"><a class="XrefDestination" id="TheBook’sLabandCodeRepository"/><span class="XrefDestination" id="xref-502840f06-003"/>The Book’s Lab and Code Repository</h2>
<p class="BodyFirst">You can practice everything covered in this book in its dedicated security lab, which we’ve curated specifically for GraphQL hacking. We highly recommend experimenting with the material shared throughout the 10 chapters by running the various tools and querying GraphQL APIs. You’ll set up the lab in <span class="xref" itemid="xref_target_Chapter 2">Chapter 2</span>.</p>
<p>In addition, we encourage you to clone the book’s code repository, located at <a class="LinkURL" href="https://github.com/dolevf/Black-Hat-GraphQL">https://github.com/dolevf/Black-Hat-GraphQL</a>. The repository includes artifacts sorted by chapter, such as GraphQL code samples, exploits, queries, and more. We also acknowledge that, as the security community better learns how to hack and secure GraphQL APIs, new tools and research papers will emerge. As such, we’ve created a special section of the repository for documenting these resources for your arsenal, under the <em>tools</em> folder.</p>
<h2 id="h1-502840f06-0003"><a class="XrefDestination" id="What’sinThisBook"/><span class="XrefDestination" id="xref-502840f06-004"/>What’s in This Book</h2>
<p class="BodyFirst">The book lays out fundamental and advanced GraphQL concepts in the first three chapters, as well as guides you in setting up the lab tools that security professionals need for security testing of GraphQL APIs. By <span class="xref" itemid="xref_target_Chapter 4">Chapter 4</span>, you will have a solid understanding how GraphQL as a technology works. The remainder of the book is reserved for learning and practicing the art of GraphQL penetration testing, which will allow you to confidently test GraphQL APIs in your future security endeavors. At the end of this book in <span class="xref" itemid="xref_target_Appendix A">Appendix A</span> you can find a GraphQL security testing cheat sheet, as well as additional extracurricular resources to learn more about GraphQL in <span class="xref" itemid="xref_target_Appendix B">Appendix B</span>. The following summary provides more detail about each chapter.</p>
<p>In <b>Chapter 1: A Primer on GraphQL</b>, you’ll be introduced to the technology and learn how it differs from other API protocols. In particular, we’ll demonstrate the differences between GraphQL and REST APIs by walking through an example using each. This should illustrate their relative advantages and disadvantages, as well as clarify why GraphQL is slowly gaining market share in the API space. You’ll also run your first GraphQL query.</p>
<p><b>Chapter 2: Setting Up a GraphQL Security Lab</b> gathers some of the best GraphQL security tools available for your long-term penetration testing lab environment. We’ll guide you through installing and configuring them. Some of these tools we authored ourselves, while others were kindly released as open source software by other security professionals.</p>
<p>If you are new to GraphQL, play close attention to <b>Chapter 3: The GraphQL Attack Surface</b>. This chapter has two goals: introducing you to the many components of the technology and enabling you to think about these concepts in a hacking context. In this chapter, you’ll learn about the GraphQL language and type system. After learning the type system, you’ll understand how GraphQL schemas work under the hood. And after learning the language system, you’ll know how to build and execute queries against GraphQL APIs. We’ll also provide an overview of the common weaknesses in GraphQL in preparation for <span class="xref" itemid="xref_target_Chapters 4 through 9">Chapters 4 through 9</span>.</p>
<p>In <b>Chapter 4: Reconnaissance</b>, we’ll use data collection and target mapping to apply tools and techniques to learn as much about our target as possible. Without doing this homework, we’d be shooting in the dark and wasting valuable time. You’ll learn information-gathering techniques that will allow you to make educated guesses about a GraphQL target’s infrastructure and increase your chances of success.</p>
<p>In <b>Chapter 5: Denial of Service</b>, you’ll learn how to achieve either a performance degradation or complete server takedown. Denial of service is one of the most prevalent vulnerabilities in GraphQL, and this chapter covers numerous techniques to destabilize servers by executing special queries. You’ll also learn about how GraphQL APIs can be built with more resiliency in mind, using defensive GraphQL security controls.</p>
<p>Knowledge is power, and as you’ll learn in <b>Chapter 6: Information Disclosure</b>, certain GraphQL design decisions can lead to information disclosure vulnerabilities. We’ll leverage insecure configurations and abuse GraphQL features to reconstruct the schema on a hardened target. We’ll also take advantage of error and debugging mechanisms in GraphQL servers to infer important information about the target.</p>
<p>You should expect to find authorization and authentication controls in any application or API that hosts valuable data, yet these aren’t always <span epub:type="pagebreak" id="Page_xxiv" title="xxiv"/>easy to implement securely. <b>Chapter 7: Authentication and Authorization Bypasses</b> will teach you how to test for bypasses in these two important controls, enabling us to impersonate users, take actions we’re not authorized to take, and view information we’re not authorized to see.</p>
<p>Processing user input is a necessary evil. Most applications need it, yet we should never trust it, because it might be malicious. <b>Chapter 8: Injection</b> will cover several injection types and how they can be introduced in GraphQL interfaces that accept user input. We’ll use manual techniques as well as automated tools to uncover injection-based vulnerabilities in servers, databases, and client browsers.</p>
<p>In <b>Chapter 9: Request Forgery and Hijacking</b>, we’ll discuss cross-site request forgery and server-side request forgery, two forgery-based vulnerabilities that impact clients and servers. We’ll also discuss cross-site WebSocket hijacking: an attack, used to steal user sessions, that impacts GraphQL subscriptions. By using several HTTP methods to send GraphQL queries, we’ll target clients and force a server to request sensitive information on our behalf.</p>
<p>In <b>Chapter 10: Disclosed Vulnerabilities and Exploits</b>, we’ll explore more than a dozen vulnerability-disclosure reports and review exploit code that impacts GraphQL APIs. We’ll dissect these artifacts to reinforce the takeaways of previous chapters and reveal how vulnerabilities have impacted large companies that run GraphQL APIs in production.</p>
<p>As computer-security enthusiasts, we’re honored to contribute to the hacking community by sharing our knowledge with the industry. Armed with our perspective, you too can help businesses better secure their GraphQL applications. Remember that the content of this book is intended for educational purposes only. We highly encourage you to receive formal authorization before performing any penetration test against applications.</p>
</section>
</body>
</html>