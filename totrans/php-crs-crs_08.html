<html><head></head><body>
<div id="sbo-rt-content"><section aria-labelledby="ch6" epub:type="chapter" role="doc-chapter">
<span aria-label="111" epub:type="pagebreak" id="pg_111" role="doc-pagebreak"/>
<hgroup>
<h2 class="CHAPTER" id="ch6">
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">6</span></span>
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">LOOPS</span></span>
</h2>
</hgroup>
<figure class="opener"><img alt="" class="opener" height="380" src="../images/opener.jpg" width="380"/>
</figure>
<p class="INTRO">This chapter introduces the <i>loop</i>, a control structure that allows you to repeat a sequence of statements over and over again. Once you understand how to use loops, you’ll be able to easily create scripts to process large volumes of data and perform repetitive tasks with efficiently written code.</p>
<p class="TX">We’ll cover two main types of PHP loops: the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop and the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop. A <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop is used for repeating a series of actions until a specific condition is met, while a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop is used for repeating a series of actions a fixed number of times. We’ll also look at <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loops, a variation on <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loops. A fourth type of PHP loop, the <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop, is specifically designed for looping through collections of data, such as arrays. We’ll look at <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loops when we introduce arrays in <span class="Xref"><a href="chapter7.xhtml">Chapter 7</a></span>.</p>
<section aria-labelledby="sec1" epub:type="division">
<span aria-label="112" epub:type="pagebreak" id="pg_112" role="doc-pagebreak"/>
<h3 class="H1" id="sec1"><span id="toc-link_89"/><span class="SANS_Futura_Std_Bold_B_11">while Loops</span></h3>
<p class="TNI1">One kind of PHP loop is the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop: a sequence of statements is repeatedly executed <i>while</i> a certain condition is true. <a href="#fig6-1">Figure 6-1</a> illustrates how this works.</p>
<figure class="IMG"><a id="fig6-1"/><img alt="" class="img100" height="450" src="../images/figure6-1.jpg" width="1233"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 6-1: The flow of logic for a</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">while</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p></figcaption>
</figure>
<p class="TX">When a script features a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop, some statements are typically executed before the loop begins. Then the PHP engine checks the condition controlling the loop. If the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>, the statements in the loop will never be executed, and the program skips ahead to the statements after the loop. If the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, the statements in the loop are executed once, then the condition is checked a second time. If it’s still <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, the statements in the loop are executed again. This cycle continues, with the PHP engine checking the condition before each new repetition until it’s found to be <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>, and the loop ends.</p>
<p class="TX">To write a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop, start with the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> keyword, followed in parentheses by the Boolean condition that will control the loop. Then enclose the statement that should be repeated in curly brackets. If the loop contains only a single statement, the curly brackets are optional, but most programmers include them anyway to emphasize that the statement is part of the loop.</p>
<p class="TX"><a href="#lis6-1">Listing 6-1</a> shows a script that uses a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop to test the length of a password. The loop keeps prompting the user to enter a new password until the result is long enough.</p>
<span id="lis6-1"/>
<pre><code>&lt;?php&#13;
$password = "cat";&#13;
&#13;
while (strlen($password) &lt; 6) {&#13;
    $password = readline("enter new password (at least 6 characters): ");&#13;
}&#13;
&#13;
print "password now set to '$password'";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-1: A</span> <span class="TheSansMonoCd_W5Regular_Italic_11">while</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop requesting a password of six characters or more</span></p>
<p class="TX">Before the loop, we set the <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> variable to an initial value of <span class="SANS_TheSansMonoCd_W5Regular_11">"cat"</span>. Then we declare the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop, using <span class="SANS_TheSansMonoCd_W5Regular_11">strlen($password) &lt; 6</span> as the condition. <span aria-label="113" epub:type="pagebreak" id="pg_113" role="doc-pagebreak"/>Before each repetition of the loop, PHP will check the length of <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span>. If it’s shorter than six characters, the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, so the statement in the loop will execute. If it’s six or more characters, the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>, so the loop will end. Since <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> starts out being three characters long, we know the loop will execute at least once.</p>
<p class="TX">Inside the loop, we use the built-in <span class="SANS_TheSansMonoCd_W5Regular_11">readline()</span> function to take in a password from the user. The function displays the string passed as an argument as a command line prompt, then reads whatever the user types at the command line before pressing <small>ENTER</small>. We store the result back into the <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> variable, so now we’ll have a new value to check before the next repetition of the loop. Once the password is long enough and the loop ends, we confirm the new value of <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> back to the user.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>This program is</i> <span class="note">not</span> <i>a good example of secure password protocols since the password is being shown onscreen, where anyone could read it. But it’s a handy illustration of a</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">while</span> <i>loop.</i></p>
<p class="TX">The following is a sample run of this script. I’ve entered a few passwords that are too short before providing an acceptable one:</p>
<pre><code>enter new password (at least 6 characters): <b>dog</b>&#13;
enter new password (at least 6 characters): <b>whale</b>&#13;
enter new password (at least 6 characters): <b>catdog123</b>&#13;
password now set to 'catdog123'</code></pre>
<p class="TX">Here’s what happens each time the PHP engine checks the <span class="SANS_TheSansMonoCd_W5Regular_11">strlen($password) &lt; 6</span> condition during this run of the script:</p>
<p class="ListNumberF">1.   <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> contains <span class="SANS_TheSansMonoCd_W5Regular_11">"cat"</span>, so the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>. The loop executes once.</p>
<p class="ListNumber">2.   <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> contains <span class="SANS_TheSansMonoCd_W5Regular_11">"dog"</span>, so the condition is still <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>. The loop executes a second time.</p>
<p class="ListNumber">3.   <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> contains <span class="SANS_TheSansMonoCd_W5Regular_11">"whale"</span>, so the condition is still <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>. The loop executes a third time.</p>
<p class="ListNumberL">4.   <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> contains <span class="SANS_TheSansMonoCd_W5Regular_11">"catdog123"</span>, so the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>. The loop ends, and the final <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement executes.</p>
<p class="TX">In all, the PHP engine checks the loop’s condition four times and repeats the loop’s contents three times. There will always be one more check of the condition than there are repetitions of a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop, since the condition check happens <i>before</i> the loop’s contents are executed. Try changing the initial value of <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> to text at least six characters long and running the script again. You’ll find that the script skips straight to the final <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement, since the first check of the loop condition evaluates to <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>.</p>
<section aria-labelledby="sec2" epub:type="division">
<h4 class="H2" id="sec2"><span id="toc-link_90"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">do...while Loops</span></h4>
<p class="TNI1">A <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop is an alternate form of a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop: the condition check happens <i>after</i> each repetition of the loop, rather than before. This way, the <span aria-label="114" epub:type="pagebreak" id="pg_114" role="doc-pagebreak"/>statement(s) in the loop are guaranteed to be executed at least once, and the number of loop repetitions will match the number of times the condition is checked. <a href="#fig6-2">Figure 6-2</a> shows how this works.</p>
<figure class="IMG"><a id="fig6-2"/><img alt="" class="img100" height="274" src="../images/figure6-2.jpg" width="1233"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 6-2: The flow of logic for a</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">do...while</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p></figcaption>
</figure>
<p class="TX">With a <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop, first we go once through the statements in the loop. Then we test the loop condition. If the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>, we move on to the statements after the loop, so the loop will have executed only the one time. If the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, the loop statements are executed again, and so on until the condition is <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>.</p>
<p class="TX">To write a <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop, start with the <span class="SANS_TheSansMonoCd_W5Regular_11">do</span> keyword, followed in curly brackets by the statements that should be repeated. After the closing curly bracket, write the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> keyword, then the loop condition in parentheses. For example, <a href="#lis6-2">Listing 6-2</a> shows how to rewrite the password-checking script from <a href="#lis6-1">Listing 6-1</a> by using a <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop instead of a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop. The changes are shown in black text.</p>
<span id="lis6-2"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
do <span class="TheSansMonoCd_W5Regular_Grey_11">{</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    $password = readline("enter new password (at least 6 characters): ");</span>&#13;
} while (strlen($password) &lt; 6);&#13;
&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">print "password now set to '$password'";</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-2: A modified version of <a href="#lis6-1">Listing 6-1</a> using a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">do...while</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p>
<p class="TX">We begin the loop with the <span class="SANS_TheSansMonoCd_W5Regular_11">do</span> keyword. Then, after our statement with the <span class="SANS_TheSansMonoCd_W5Regular_11">readline()</span> function, on the same line as the closing curly bracket, we write the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> keyword and then, inside parentheses, the same <span class="SANS_TheSansMonoCd_W5Regular_11">strlen ($password) &lt; 6</span> loop condition we had before. Notice that we need to include a semicolon after the condition to end the statement.</p>
<p class="TX">The key difference between this and the previous version of the script is that we no longer need to set an initial value for the <span class="SANS_TheSansMonoCd_W5Regular_11">$password</span> variable before entering the loop. Instead, we read in an initial password from the user during the first run of the loop before testing its value and deciding whether a repetition is necessary. In general, if you know you’ll want the statements in a loop to be executed at least once, a <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop may be a better choice than a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop.</p>
</section>
<section aria-labelledby="sec3" epub:type="division">
<h4 class="H2" id="sec3"><span id="toc-link_91"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Boolean Flags</span></h4>
<p class="TNI1">If the logic governing whether to continue looping is more complex than a single condition, it’s often clearer to control the loop by using a Boolean <span aria-label="115" epub:type="pagebreak" id="pg_115" role="doc-pagebreak"/>variable known as a <i>flag</i>. Typically, you set the flag to <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, then enter the loop, using the flag as the condition. The loop itself features logic (perhaps a series of <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statements) to set the value of the flag to <span class="SANS_TheSansMonoCd_W5Regular_11">false</span> when the loop is ready to end.</p>
<p class="TX">For example, say we want to repeatedly prompt the user for input until they type either <i>quit</i> or <i>q</i>. We could accomplish that with a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop that starts this way:</p>
<pre><code>while (($userInput != 'q') &amp;&amp; ($userInput != 'quit')) {</code></pre>
<p class="BodyContinued">The condition for this loop is borderline hard to read, and it would become even more convoluted if we wanted to watch for a third input. Controlling the loop with a Boolean flag clarifies the code, as shown in <a href="#lis6-3">Listing 6-3</a>.</p>
<span id="lis6-3"/>
<pre><code>&lt;?php&#13;
$continueLooping = true;&#13;
while ($continueLooping) {&#13;
    $userInput = readline("type something (or: quit): ");&#13;
&#13;
    if ($userInput == 'quit') {&#13;
        $continueLooping = false;&#13;
    }&#13;
    if ($userInput == 'q') {&#13;
        $continueLooping = false;&#13;
    }&#13;
&#13;
    print "you typed '$userInput'\n";&#13;
}&#13;
&#13;
print '--- I have left the loop! ---';</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-3: Using a Boolean flag variable as the loop condition</span></p>
<p class="TX">We first create the Boolean flag variable <span class="SANS_TheSansMonoCd_W5Regular_11">$continueLooping</span> and set it to <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>. Then we declare a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop with this flag as the loop condition. Notice that this is much clearer than the compound condition shown earlier. Since the condition is initially <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, we’ll enter the loop and execute the loop statement group at least once. After prompting the user for text and storing it in the <span class="SANS_TheSansMonoCd_W5Regular_11">$userInput</span> variable, we use two <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statements to check whether the variable contains <span class="SANS_TheSansMonoCd_W5Regular_11">'quit'</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">'q'</span>. These <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statements take the place of the original compound loop condition; both set the flag to <span class="SANS_TheSansMonoCd_W5Regular_11">false</span> to end the loop when the user asks to quit. After the <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statements, we print the user’s input. Then, outside the loop, we print a message confirming that the loop is over.</p>
<p class="TX">Here’s a sample run of the script:</p>
<pre><code>type something (or: quit): <b>the</b>&#13;
you typed 'the'&#13;
type something (or: quit): <b>cat sat</b>&#13;
you typed 'cat sat'&#13;
<span aria-label="116" epub:type="pagebreak" id="pg_116" role="doc-pagebreak"/>type something (or: quit): <b>on</b>&#13;
you typed 'on '&#13;
type something (or: quit): <b>the mat</b>&#13;
you typed 'the mat'&#13;
type something (or: quit): <b>quit</b>&#13;
you typed 'quit'&#13;
--- I have left the loop! ---</code></pre>
<p class="TX">As you can see, the script prints out whatever text the user enters. In this case, the loop ended after I typed <i>quit</i>, but it’ll also end if you type the letter <i>q</i>.</p>
</section>
<section aria-labelledby="sec4" epub:type="division">
<h4 class="H2" id="sec4"><span id="toc-link_92"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">break Statements</span></h4>
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> keyword immediately exits a loop, without allowing any remaining statements in the loop to execute. In the previous script’s output, you may have noticed that when I typed <i>quit</i>, that word was repeated by the loop’s final <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement (<span class="SANS_TheSansMonoCd_W5Regular_11">you typed 'quit'</span>) before the loop terminated. With a <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statement, we could immediately halt the loop as soon as the user enters <i>quit</i> or <i>q</i>, before that <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement runs.</p>
<p class="TX">Using <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> also eliminates the need for a Boolean flag. Instead, we can simply use the literal Boolean value <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> as the looping condition by writing <span class="SANS_TheSansMonoCd_W5Regular_11">while (true)</span>. Since <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> is always <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, this loop will theoretically repeat forever, or at least until some conditional logic triggers a <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statement. <a href="#lis6-4">Listing 6-4</a> shows how to update our user input script with <span class="SANS_TheSansMonoCd_W5Regular_11">while (true)</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">break</span>.</p>
<span id="lis6-4"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span aria-label="annotation1" class="codeannotated_CodeAnnotation">❶</span> while (true) {&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    $userInput = readline("type something (or: quit): ");</span>&#13;
&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    if ($userInput == 'quit'){</span>&#13;
        break;&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    }</span>&#13;
&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    if ($userInput == 'q'){</span>&#13;
        break;&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    }</span>&#13;
&#13;
  <span aria-label="annotation2" class="Code_CodeAnnotation">❷</span> <span class="TheSansMonoCd_W5Regular_Grey_11">print "you typed '$userInput'\n";</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">}</span>&#13;
&#13;
<span aria-label="annotation3" class="codeannotated_CodeAnnotation">❸</span> <span class="TheSansMonoCd_W5Regular_Grey_11">print '--- I have left the loop! ---';</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-4: An updated version of <a href="#lis6-3">Listing 6-3</a>, using</span> <span class="TheSansMonoCd_W5Regular_Italic_11">break</span> <span class="SANS_Futura_Std_Book_Oblique_11">to exit a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">while (true)</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p>
<p class="TX">We’ve deleted our <span class="SANS_TheSansMonoCd_W5Regular_11">$continueLooping</span> Boolean flag and replaced the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop’s condition with the literal <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span>. Inside the loop, we still have our two <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statements testing whether <span class="SANS_TheSansMonoCd_W5Regular_11">$userInput</span> contains the string <span class="SANS_TheSansMonoCd_W5Regular_11">'quit'</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">'q'</span>, but this time each <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement simply contains the <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> keyword to immediately exit the loop. This way, if either <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement passes, we’ll jump <span aria-label="117" epub:type="pagebreak" id="pg_117" role="doc-pagebreak"/>straight to the final <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement <span aria-label="annotation3" class="CodeAnnotation">❸</span>, without executing the <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement inside the loop <span aria-label="annotation2" class="CodeAnnotation">❷</span>.</p>
<p class="TX">Here’s a sample run of this updated version of the script:</p>
<pre><code>type something (or: quit): <b>hello</b>&#13;
you typed 'hello'&#13;
type something (or: quit): <b>world</b>&#13;
you typed 'world'&#13;
type something (or: quit): <b>quit</b>&#13;
--- I have left the loop! ---</code></pre>
<p class="TX">This time, when I enter the word <i>quit</i>, no <span class="SANS_TheSansMonoCd_W5Regular_11">you typed 'quit'</span> message appears. Instead, the loop ends immediately, so the next message is <span class="SANS_TheSansMonoCd_W5Regular_11">--- I have left the loop! ---</span>.</p>
<p class="TX">In many cases, it’s a matter of personal preference whether you use <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statements or a Boolean flag in the loop condition to terminate a loop. If you’re coming from a language that doesn’t support <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statements, Boolean flags might feel more natural. On the other hand, if lots of conditions are being tested to decide whether the loop should end, <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statements can be more practical. When writing a code compiler or programming language tool, for example, tens or hundreds of tests might be included. Using <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statements can save you from having to scroll through pages of code to see what might be happening in the later loop statements, after all the tests have been conducted.</p>
</section>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h3 class="H1" id="sec5"><span id="toc-link_93"/><span class="SANS_Futura_Std_Bold_B_11">for Loops</span></h3>
<p class="TNI1">A <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop is a style of loop that repeats a set number of times. If you know exactly how many times you want to repeat a task (for example, giving a user three chances to enter the correct password, or testing students with exactly 10 questions selected randomly from a test bank), a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop may be a better choice than a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop. A <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop hinges around a <i>counter variable</i>, customarily called <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> (short for <i>iterator</i>), that governs the number of repetitions. Declaring a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop requires three expressions, all featuring this counter variable:</p>
<p class="ListNumber">1.   An expression initializing the counter to a starting value</p>
<p class="ListNumber">2.   An expression testing the counter’s value to determine when the loop should stop</p>
<p class="ListNumber">3.   An expression to increment (or decrement) the counter after each repetition of the loop</p>
<p class="TX">To declare a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop, all three of these expressions are written in this sequence on a single line, immediately after the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> keyword, enclosed in a set of parentheses. Here’s an example:</p>
<pre><code>for ($i = 1; $i &lt;= 5; $i++) {</code></pre>
<p class="TX"><span aria-label="118" epub:type="pagebreak" id="pg_118" role="doc-pagebreak"/>Here <span class="SANS_TheSansMonoCd_W5Regular_11">$i = 1</span> initializes the counter variable to <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>. Then <span class="SANS_TheSansMonoCd_W5Regular_11">$i &lt;= 5</span> sets the looping condition; as long as <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is less than or equal to 5, the loop will continue repeating. PHP will check this condition <i>before</i> each new repetition of the loop. Finally, <span class="SANS_TheSansMonoCd_W5Regular_11">$i++</span> uses the increment operator (<span class="SANS_TheSansMonoCd_W5Regular_11">++</span>) to tell PHP to add 1 to <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> <i>after</i> each pass through the loop. This way, <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> gets a new value for each cycle of the loop that can be tested against the looping condition. In this case, <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> will have a value of <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> the first time through, then <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> the second time through, and so on. The fifth time through the loop, when <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> has a value of <span class="SANS_TheSansMonoCd_W5Regular_11">5</span>, the <span class="SANS_TheSansMonoCd_W5Regular_11">$i &lt;= 5</span> condition still passes, but at the end of the fifth repetition, <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> will be incremented to <span class="SANS_TheSansMonoCd_W5Regular_11">6</span>. At this point, <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is no longer less than or equal to 5, so the loop ends after five repetitions.</p>
<p class="TX">To verify that the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop works as we expect, let’s fill in the loop’s body with a simple <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement, as shown in <a href="#lis6-5">Listing 6-5</a>. This script should print the same message five times.</p>
<span id="lis6-5"/>
<pre><code>&lt;?php&#13;
for ($i = 1; $i &lt;= 5; $i++) {&#13;
    print "I am a for loop\n";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-5: An example of a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">for</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p>
<p class="TX">We declare a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop, using the same set of expressions with the looping variable <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> we just discussed. Inside the curly brackets delineating the loop’s statement group, we write a <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement. Here’s the output of running the script:</p>
<pre><code>I am a for loop&#13;
I am a for loop&#13;
I am a for loop&#13;
I am a for loop&#13;
I am a for loop</code></pre>
<p class="TX">As you can see, the message indeed prints five times, thanks to the way the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop’s counter variable increments from <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> until it’s no longer less than or equal to 5.</p>
<section aria-labelledby="sec6" epub:type="division">
<h4 class="H2" id="sec6"><span id="toc-link_94"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Using the Counter in the Loop</span></h4>
<p class="TNI1">Part of the power of <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loops is that the counter variable <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is available for use within the body of the loop. This can facilitate working with mathematical tasks, or with organized sets of data indexed or identified by a sequence of integers. For example, we might want to work with all the items in a database table whose IDs are a sequence of integers starting at <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> (see <span class="Xref"><a href="part6.xhtml">Part VI</a></span> for more on databases). Or we might want to loop sequentially through all the elements of an integer-indexed array (see <span class="Xref"><a href="chapter7.xhtml">Chapter 7</a></span>).</p>
<p class="TX">To demonstrate, <a href="#lis6-6">Listing 6-6</a> shows an updated version of our original <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop that incorporates the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> into the printed message. Since <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> <span aria-label="119" epub:type="pagebreak" id="pg_119" role="doc-pagebreak"/>has a different value during each repetition of the loop, each message will now be unique.</p>
<span id="lis6-6"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">for ($i = 1; $i &lt;= 5; $i++) {</span>&#13;
    print "I am repetition $i of a for loop\n";&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">}</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-6: Using the counter variable</span> <span class="TheSansMonoCd_W5Regular_Italic_11">$i</span> <span class="SANS_Futura_Std_Book_Oblique_11">within a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">for</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p>
<p class="TX">We’ve updated the loop’s <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement to include the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span>. Here’s the result:</p>
<pre><code>I am repetition 1 of a for loop&#13;
I am repetition 2 of a for loop&#13;
I am repetition 3 of a for loop&#13;
I am repetition 4 of a for loop&#13;
I am repetition 5 of a for loop</code></pre>
<p class="TX">Notice that the number in each output line changes based on the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span>. The output helps illustrate how the counter variable is working: it starts at <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> and increases by 1 with each repetition of the loop. Once <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> gets to <span class="SANS_TheSansMonoCd_W5Regular_11">6</span>, the <span class="SANS_TheSansMonoCd_W5Regular_11">$i &lt;=5</span> condition no longer passes, so the loop ends without printing <span class="SANS_TheSansMonoCd_W5Regular_11">I am repetition 6 of a for loop</span>.</p>
<p class="TX">So far we’ve been initializing <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, but you can initialize it to any value you want. In fact, you’ll find many examples of <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loops using a counter variable that starts at <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>. This is because <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loops are often used in conjunction with arrays, collections of items that are numbered starting from 0. We’ll discuss arrays, and how to loop through them, in <span class="Xref"><a href="chapter7.xhtml">Chapter 7</a></span>.</p>
<p class="TX">When you initialize the counter variable to <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, it’s also common to set the looping condition with the less-than operator (<span class="SANS_TheSansMonoCd_W5Regular_11">&lt;</span>) instead of with less-than-or-equal-to (<span class="SANS_TheSansMonoCd_W5Regular_11">&lt;=</span>), like this:</p>
<pre><code>for ($i = 0; $i &lt; 3; $i++) {</code></pre>
<p class="TX">This loop will run as long as <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is less than 3. Since <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> starts at <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, the loop will repeat three times, when <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> equals <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">2</span>.</p>
</section>
<section aria-labelledby="sec7" epub:type="division">
<h4 class="H2" id="sec7"><span id="toc-link_95"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Skipping Loop Statements</span></h4>
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> keyword stops the current repetition of a loop, but unlike the <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> keyword, it doesn’t end the loop entirely. Instead, the loop immediately jumps ahead to the next repetition. This is useful if you want to skip certain passes through a loop. For example, maybe you’re retrieving entries from a database and want to ignore certain values, or you want to use only certain numbers in a sequence, such as a random sample of every third item in a randomized collection of data.</p>
<p class="TX"><a href="#lis6-7">Listing 6-7</a> shows an example of a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop with a <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> statement. Here we’re using <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> to skip odd values of counter variable <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span>, so we <span aria-label="120" epub:type="pagebreak" id="pg_120" role="doc-pagebreak"/>end up printing only the even values. The listing also illustrates how a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop can decrement the counter variable instead of incrementing it.</p>
<span id="lis6-7"/>
<pre><code>&lt;?php&#13;
for ($i = 8; $i &gt; 0; $i--) {&#13;
  <span aria-label="annotation1" class="Code_CodeAnnotation">❶</span> $odd = ($i % 2);&#13;
&#13;
    if ($odd) {&#13;
        continue;&#13;
    }&#13;
  <span aria-label="annotation2" class="Code_CodeAnnotation">❷</span> print "I am an even number: $i\n";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-7: Skipping parts of a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">for</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop with</span> <span class="TheSansMonoCd_W5Regular_Italic_11">continue</span></p>
<p class="TX">We declare a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop with the <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> counter variable starting at <span class="SANS_TheSansMonoCd_W5Regular_11">8</span> and decreasing by 1 after each repetition, thanks to the <span class="SANS_TheSansMonoCd_W5Regular_11">$i--</span> decrementing expression. The loop will count down to <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, then stop when <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> equals <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>. Inside the loop, we use the modulo operator (<span class="SANS_TheSansMonoCd_W5Regular_11">%</span>) to test whether the current value of <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is even or odd <span aria-label="annotation1" class="CodeAnnotation">❶</span>. If even, <span class="SANS_TheSansMonoCd_W5Regular_11">$i % 2</span> will be <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, or if odd, <span class="SANS_TheSansMonoCd_W5Regular_11">$i % 2</span> will be <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>. Either way, we store the result in the <span class="SANS_TheSansMonoCd_W5Regular_11">$odd</span> variable, then use that variable as the condition of an <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement.</p>
<p class="TX">Since an <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement requires a Boolean condition, <span class="SANS_TheSansMonoCd_W5Regular_11">$odd</span> will be type-juggled to a Boolean: <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> for <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">false</span> for <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>. This way, when the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is odd, we’ll execute the <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement, which contains just the <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> keyword to interrupt the current repetition of the loop and skip to the next one. When <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is even, we don’t execute the <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement body, allowing us to complete the current repetition of the loop by executing the <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement <span aria-label="annotation2" class="CodeAnnotation">❷</span>. The net effect is that we print out only even values of <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span>, as the output shows:</p>
<pre><code>I am an even number: 8&#13;
I am an even number: 6&#13;
I am an even number: 4&#13;
I am an even number: 2</code></pre>
<p class="TX">We’ve successfully skipped the odd numbers thanks to our conditional logic triggering the <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> statement in our loop.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>The</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">continue</span> <i>keyword works in</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">while</span> <i>loops just as it does in</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">for</span> <i>loops. Likewise, the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">break</span> <i>keyword also works to completely stop a</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">for</span> <i>loop.</i></p>
</section>
<section aria-labelledby="sec8" epub:type="division">
<h4 class="H2" id="sec8"><span id="toc-link_96"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Handling the Last Iteration Differently</span></h4>
<p class="TNI1">Sometimes you might want to do something different during the final repetition of a loop. With a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop, you can’t know if it’s the final repetition until the loop has already ended, but with a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop, you can anticipate the last repetition with conditional logic and write code that treats that last repetition differently.</p>
<p class="TX">For example, say we’re using a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop to build up a string containing a list of items entered by the user, and we want to separate each item with a comma. We might be tempted to write something like <a href="#lis6-8">Listing 6-8</a>.</p>
<span id="lis6-8"/>
<pre><code><span aria-label="121" epub:type="pagebreak" id="pg_121" role="doc-pagebreak"/>&lt;?php&#13;
$message = "go to the market and buy: ";&#13;
$numItems = 3;&#13;
for ($i = 1; $i &lt;= $numItems; $i++) {&#13;
    $item = readline("type something to buy: ");&#13;
    $message .= "$item, ";&#13;
}&#13;
&#13;
print $message;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-8: A</span> <span class="TheSansMonoCd_W5Regular_Italic_11">for</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop creating a list of items, separated by commas</span></p>
<p class="TX">We initialize a <span class="SANS_TheSansMonoCd_W5Regular_11">$message</span> variable with the string <span class="SANS_TheSansMonoCd_W5Regular_11">"go to the market and buy: "</span>. Then we assign <span class="SANS_TheSansMonoCd_W5Regular_11">$numItems</span> the value <span class="SANS_TheSansMonoCd_W5Regular_11">3</span>. This will be the number of repetitions of our <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop. Next, we declare the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop, where <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> counts up from <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">$numItems</span> (<span class="SANS_TheSansMonoCd_W5Regular_11">3</span>). Each time through the loop, we prompt the user to enter an item to buy, storing the input in the <span class="SANS_TheSansMonoCd_W5Regular_11">$item</span> variable. We then append the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$item</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">$message</span> string, followed by a comma and a space. When the loop ends, we print out the <span class="SANS_TheSansMonoCd_W5Regular_11">$message</span> string that we’ve constructed.</p>
<p class="TX">The problem is that we’re treating each repetition of the loop the same, so every item in the final message will have a comma after it, including the last one. You can see this in the following sample run of the script:</p>
<pre><code>type something to buy: <b>bread</b>&#13;
type something to buy: <b>butter</b>&#13;
type something to buy: <b>apples</b>&#13;
go to the market and buy: bread, butter, apples,</code></pre>
<p class="TX">Our script has built up a message including the three items entered at the command line, and unfortunately, a comma appears after the last item, <span class="SANS_TheSansMonoCd_W5Regular_11">apples</span>. We can fix this by adding a test to determine whether we’re on the last repetition of the loop. Then we’ll add a comma only if it isn’t the last repetition. <a href="#lis6-9">Listing 6-9</a> shows how to update the script.</p>
<span id="lis6-9"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$message = "go to the market and buy: ";</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$numItems = 3;</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">for ($i = 1; $i &lt;= $numItems; $i++) {</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    $item = readline("type something to buy: ");</span>&#13;
    $message .= $item;&#13;
    $lastIteration = ($i == $numItems);&#13;
    if (!$lastIteration) {&#13;
        $message .= ', ';&#13;
    }&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">}</span>&#13;
&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">print $message;</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-9: Updating the script from <a href="#lis6-8">Listing 6-8</a> to leave off the final comma</span></p>
<p class="TX"><span aria-label="122" epub:type="pagebreak" id="pg_122" role="doc-pagebreak"/>This time we first append just the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$item</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">$message</span> string, without a comma and space after it. Then we create the Boolean variable <span class="SANS_TheSansMonoCd_W5Regular_11">$lastIteration</span>, giving it the value of the expression <span class="SANS_TheSansMonoCd_W5Regular_11">$i == $numItems</span>. This expression will be <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> only the last time through the loop. Next, we have an <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement with <span class="SANS_TheSansMonoCd_W5Regular_11">!$lastIteration</span> as the condition. Thanks to the NOT operator (<span class="SANS_TheSansMonoCd_W5Regular_11">!</span>), this condition will be <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> for all repetitions except the final one. Inside the <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement, we append a comma and space to <span class="SANS_TheSansMonoCd_W5Regular_11">$message</span>. This way, all but the last item in the list will have a comma after it.</p>
<p class="TX">Here’s a sample run of the updated script:</p>
<pre><code>type something to buy: <b>bread</b>&#13;
type something to buy: <b>butter</b>&#13;
type something to buy: <b>apples</b>&#13;
go to the market and buy: bread, butter, apples</code></pre>
<p class="BodyContinued">We no longer have a comma after <span class="SANS_TheSansMonoCd_W5Regular_11">apples</span>, the last item in the list, since we’re treating the final repetition of the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop differently from the others.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>Once we start working with arrays, we’ll be able to avoid this kind of last-repetition-is-special loop logic by using the built-in</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">implode()</span> <i>function. It intelligently adds a separator between each item in a list, but not after the last item. We’ll discuss this in <a href="chapter7.xhtml">Chapter 7</a>.</i></p>
</section>
</section>
<section aria-labelledby="sec9" epub:type="division">
<h3 class="H1" id="sec9"><span id="toc-link_97"/><span class="SANS_Futura_Std_Bold_B_11">Alternative Loop Syntax</span></h3>
<p class="TNI1">PHP provides an alternative syntax for writing <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loops, setting off the contents of the loop with a colon (<span class="SANS_TheSansMonoCd_W5Regular_11">:</span>) rather than enclosed in curly brackets. Just like the alternative syntax for <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statements we discussed in <span class="Xref"><a href="chapter4.xhtml">Chapter 4</a></span>, this other way of writing loops is often useful when combing PHP statements in a script with templating text such as HTML for web applications. To demonstrate, <a href="#lis6-10">Listing 6-10</a> uses the alternative syntax to rewrite the password-setting <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop from <a href="#lis6-1">Listing 6-1</a>.</p>
<span id="lis6-10"/>
<pre><code>&lt;?php&#13;
$password = "cat";&#13;
&#13;
while (strlen($password) &lt; 6):&#13;
    $password = readline("enter new password (at least 6 characters): ");&#13;
endwhile;&#13;
&#13;
print "password now set to '$password'";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-10: An alternative syntax for the</span> <span class="TheSansMonoCd_W5Regular_Italic_11">while</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop from <a href="#lis6-1">Listing 6-1</a></span></p>
<p class="TX">Notice that the line declaring the <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop ends with a colon rather than an opening curly bracket. In lieu of a closing curly bracket, we signal the end of the loop with the <span class="SANS_TheSansMonoCd_W5Regular_11">endwhile</span> keyword.</p>
<p class="TX"><a href="#lis6-11">Listing 6-11</a> likewise shows the alternative syntax for the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop from <a href="#lis6-6">Listing 6-6</a>.</p>
<span id="lis6-11"/>
<pre><code><span aria-label="123" epub:type="pagebreak" id="pg_123" role="doc-pagebreak"/>&lt;?php&#13;
for ($i = 1; $i &lt;= 5; $i++):&#13;
    print "I am repetition $i of a for loop\n";&#13;
endfor;</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-11: An alternative syntax for the</span> <span class="TheSansMonoCd_W5Regular_Italic_11">for</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop from <a href="#lis6-6">Listing 6-6</a></span></p>
<p class="BodyContinued">Again, notice the colon at the end of the line declaring the loop, and the <span class="SANS_TheSansMonoCd_W5Regular_11">endfor</span> keyword to indicate the end of the loop.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>PHP has no alternative syntax for a</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">do...while</span> <i>loop.</i></p>
</section>
<section aria-labelledby="sec10" epub:type="division">
<h3 class="H1" id="sec10"><span id="toc-link_98"/><span class="SANS_Futura_Std_Bold_B_11">Avoiding Infinite Loops</span></h3>
<p class="TNI1">It’s all too easy to accidentally get trapped in an infinite loop that keeps repeating forever because the stopping condition is never met. To avoid this, it’s important to make sure the condition controlling the loop can and will be <span class="SANS_TheSansMonoCd_W5Regular_11">false</span> when appropriate. One way to mistakenly write an infinite <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop is to set the increment expression to move in the wrong direction relative to the looping condition. For example, consider this code:</p>
<pre><code>for ($i = 1; $i &gt; 0; $i++) {</code></pre>
<p class="TX">This increment expression adds <span class="SANS_TheSansMonoCd_W5Regular_11">1</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> after each repetition. Meanwhile, the looping condition tests whether <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is greater than <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>. Since <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> is growing with each repetition, it will always be greater than <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, so the loop will never end. The solution is to make <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> decrement rather than increment, or to change the looping condition to some kind of less-than comparison.</p>
<p class="TX">With <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loops, you can get stuck repeating forever if the variables in the loop condition don’t have a chance to be changed correctly in the loop statements. For example, say we want to write a script that totals up prices entered by the user until the total exceeds $100, then print out the result. We might accidentally create an infinite loop by writing something like <a href="#lis6-12">Listing 6-12</a>.</p>
<span id="lis6-12"/>
<pre><code>&lt;?php&#13;
$total = 0;&#13;
&#13;
do {&#13;
    $costString = readline("enter item cost: ");&#13;
&#13;
    if (is_numeric($costString)) {&#13;
      <span aria-label="annotation1" class="Code_CodeAnnotation">❶</span> $total = floatval($costString);&#13;
    }&#13;
} while ($total &lt; 100);&#13;
&#13;
print "grant total = \$$total\n";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 6-12: An unintentionally infinite</span> <span class="TheSansMonoCd_W5Regular_Italic_11">do...while</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop</span></p>
<p class="TX"><span aria-label="124" epub:type="pagebreak" id="pg_124" role="doc-pagebreak"/>We set <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, then enter a <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop that keeps repeating while <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span> is less than 100. Inside the loop, we take in a line of input from the user and verify it’s numeric. If it is, we convert the input to a float and store the value in <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span>.</p>
<p class="TX">Do you see the problem? We should have used something like <span class="SANS_TheSansMonoCd_W5Regular_11">$total += floatval($costString);</span> to add the latest input to the value already in <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span>, but we’ve used a regular assignment operator (<span class="SANS_TheSansMonoCd_W5Regular_11">=</span>) rather than an addition assignment operator (<span class="SANS_TheSansMonoCd_W5Regular_11">+=</span>). As a result, the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span> will always be the last value entered. If the user ever enters a value greater than 100, the loop will end, and the <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement will echo back that last value. Otherwise, we’ll be stuck in an infinite loop, without really calculating a running total.</p>
<p class="TX">An infinite <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loop also occurs when the variable tested in the loop condition never changes, so once the loop is entered, it’s never exited. Returning to <a href="#lis6-12">Listing 6-12</a>, for example, we might use a <span class="SANS_TheSansMonoCd_W5Regular_11">$grandTotal</span> variable to set the looping condition, as in <span class="SANS_TheSansMonoCd_W5Regular_11">while ($grandTotal &lt; 100)</span>, but then increment the <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span> variable inside the loop instead of <span class="SANS_TheSansMonoCd_W5Regular_11">$grandTotal</span>. This way, <span class="SANS_TheSansMonoCd_W5Regular_11">$grandTotal</span> would never change, so the loop would run forever.</p>
</section>
<section aria-labelledby="sec11" epub:type="division">
<h3 class="H1" id="sec11"><span id="toc-link_99"/><span class="SANS_Futura_Std_Bold_B_11">Summary</span></h3>
<p class="TNI1">In this chapter, we examined <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> loops, <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loops, and <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loops, which all offer different methods of repeating a sequence of statements. The key to these looping control structures is determining how long the loop should keep repeating, either by setting a condition for when the loop should stop, as in a <span class="SANS_TheSansMonoCd_W5Regular_11">while</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop, or by specifying a fixed number of repetitions, as in a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop. In addition to the basic structure of these loops, we discussed <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> statements, which provide a mechanism for abruptly ending an entire loop or the current repetition of a loop, respectively. Armed with control structures like loops and choice statements, you’ll be able to write sophisticated programs that perform repetitive tasks and make decisions in response to the current conditions.</p>
</section>
<section aria-labelledby="sec12" epub:type="division">
<h3 class="H1" id="sec12"><span id="toc-link_100"/><span class="SANS_Futura_Std_Bold_B_11">Exercises</span></h3>
<p class="ListNumber">1.   Use a <span class="SANS_TheSansMonoCd_W5Regular_11">do...while</span> loop to keep taking in words input by the user until they enter one that begins with a capital letter.</p>
<p class="ListBody">Hint: Compare the string entered with the value returned by the <span class="SANS_TheSansMonoCd_W5Regular_11">ucfirst()</span> function.</p>
<p class="ListNumber">2.   Use a <span class="SANS_TheSansMonoCd_W5Regular_11">break</span> statement with a <span class="SANS_TheSansMonoCd_W5Regular_11">while (true)</span> loop to keep taking in strings input by the user until one is numeric.</p>
<p class="ListBody">Hint: Use the <span class="SANS_TheSansMonoCd_W5Regular_11">is_numeric()</span> function.</p>
<p class="ListNumber">3.   Use a <span class="SANS_TheSansMonoCd_W5Regular_11">continue</span> statement in a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop to print out all the multiples of 3 up to 21 (3, 6, 9, and so on).</p>
</section>
</section>
</div></body></html>