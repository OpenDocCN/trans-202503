<html><head></head><body>
<h2 class="h2" id="ch09"><span epub:type="pagebreak" id="page_111"/><span class="big"><span class="blue"><strong>9</strong></span></span><br/><strong>USING DECISIONS TO MAKE GAMES</strong></h2>&#13;
<div class="imagec"><img alt="image" src="graphics/common01.jpg"/></div>&#13;
<p class="noindent">Sometimes decisions are complicated. Let’s say a boy and a girl want to see a movie. She wants to see an action movie, but he wants to see a comedy. She’s willing to see a comedy if it has action, if it has good reviews, and if it stars an actress she likes. But the movie has to start before 10 <small>PM</small> and must be within a 10-mile radius of the restaurant where the couple is having dinner. Imagine what the code would look like to make a decision like that!</p>&#13;
<p class="indent">In this chapter, we’ll continue the topic of decision-making and look at some new statements. We’ll first introduce the <code>If/ElseIf</code> statement and show how it makes writing nested <code>If</code> statements easier. Then, you’ll explore the logical operators <code>And</code> and <code>Or</code>, which let you do even more with your <code>If</code> <span epub:type="pagebreak" id="page_112"/>statements. We’ll also introduce the <code>Shapes</code> object so you get more comfortable working with graphics. And you’ll put all this new information into action by building a game called Guess My Coordinates!</p>&#13;
<h3 class="h3" id="ch09lev1sec01"><span class="blue"><strong>The If/ElseIf Ladder</strong></span></h3>&#13;
<p class="noindent">It’s all over the news! Franko, the alien monster, has escaped from custody. Luckily, you have your laser gun with you when you spot him attacking people in your neighborhood. You aim and shoot. Run the program in <a href="ch09.html#ch9ex1">Listing 9-1</a> to see what happens next!</p>&#13;
<pre> 1 <span class="green"><span class="codeitalic">' AlienAttack.sb</span></span><br/> 2 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"A salivating alien monster approaches. "</span><span class="brown">)</span><br/> 3 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Press any key to shoot..."</span><span class="brown">)</span><br/> 4 <span class="blue1">TextWindow</span><span class="brown">.PauseWithoutMessage()</span><br/> 5<br/> 6 damage <span class="brown">=</span> <span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="red">5</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' Randomly picks an outcome</span></span><br/> 7 <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>damage <span class="brown">=</span> <span class="red">1</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 8   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Wow! You got him. "</span><span class="brown">)</span><br/> 9   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Now you can watch SpongeBob!"</span><span class="brown">)</span><br/>10 <span class="purple"><span class="codestrong">ElseIf</span></span> <span class="brown">(</span>damage <span class="brown">=</span> <span class="red">2</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>11   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"You injured him. "</span><span class="brown">)</span><br/>12   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"He wants a Band-aid."</span><span class="brown">)</span><br/>13 <span class="purple"><span class="codestrong">ElseIf</span></span> <span class="brown">(</span>damage <span class="brown">=</span> <span class="red">3</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>14   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Weak shot. Run for your life! "</span><span class="brown">)</span><br/>15   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Now dance! You'll confuse him."</span><span class="brown">)</span><br/>16 <span class="purple"><span class="codestrong">Else</span></span><br/>17   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"You missed! He got you. "</span><span class="brown">)</span><br/>18   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"You should stick to video games."</span><span class="brown">)</span><br/>19 <span class="purple"><span class="codestrong">EndIf</span></span></pre>&#13;
<p class="listcap"><a id="ch9ex1"/><em>Listing 9-1: Climbing the</em> <code><span class="codeitalic">If/ElseIf</code></span> <em>ladder</em></p>&#13;
<p class="indent">The program picks a random number between 1 and 5 (line 6) and then checks that number to decide the alien’s fate. Lines 7–19 are called the <code>If/ElseIf</code> ladder, which is commonly used to build a chain of <code>If</code> statements. Its general form is illustrated in <a href="ch09.html#ch9fig1">Figure 9-1</a>.</p>&#13;
<p class="indent">Starting from the first statement, the program runs through each test condition. As soon as it finds a true condition, it runs the statement(s) associated with that condition and moves down to the statement after the <code>EndIf</code>, skipping the rest of the ladder. If none of the conditions is true, the program runs the statements inside the <code>Else</code> clause at the end of the ladder, and then the program moves to the statement after the <code>EndIf</code>.</p>&#13;
<p class="indent">That’s why the final <code>Else</code> statement is often called the <em>default case</em>. If you don’t include the final <code>Else</code> statement in the ladder and all the test conditions are false, the <code>If/ElseIf</code> ladder does nothing, and the program continues after the <code>EndIf</code> keyword.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_113"/><img alt="image" src="graphics/f09-01.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig1"/><em>Figure 9-1: The structure of the</em> <code><span class="codeitalic">If/ElseIf</code></span> <em>ladder</em></p>&#13;
<p class="indent">Let’s look at another way to use the <code>If/ElseIf</code> ladder.</p>&#13;
<h4 class="h4" id="ch09lev2sec01"><em><strong>Letter Grades</strong></em></h4>&#13;
<p class="noindent">In this example, you’ll create a program that reads a test score between 0 and 100, and displays a letter grade from <a href="ch09.html#ch9table1">Table 9-1</a>.</p>&#13;
<p class="tablecap"><a id="ch9table1"/><strong>Table 9-1:</strong> Letter-Grade Scores</p>&#13;
<table class="topbot">&#13;
<thead>&#13;
<tr>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>Score</strong></p></td>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>Letter grade</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table">score ≥ 90</p></td>&#13;
<td style="vertical-align: top;"><p class="table">A</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table">80 ≤ score &lt; 90</p></td>&#13;
<td style="vertical-align: top;"><p class="table">B</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table">70 ≤ score &lt; 80</p></td>&#13;
<td style="vertical-align: top;"><p class="table">C</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table">60 ≤ score &lt; 70</p></td>&#13;
<td style="vertical-align: top;"><p class="table">D</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table">score &lt; 60</p></td>&#13;
<td style="vertical-align: top;"><p class="table">F</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">The complete program is shown in <a href="ch09.html#ch9ex2">Listing 9-2</a>.</p>&#13;
<pre> 1 <span class="green"><span class="codeitalic">' GradeLetter.sb</span></span><br/> 2 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Enter the score: "</span><span class="brown">)</span><br/> 3 score <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 4 <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>score <span class="brown">&gt;=</span> <span class="red">90</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 5   grade <span class="brown">=</span> <span class="red">"A"</span><br/> 6 <span class="purple"><span class="codestrong">ElseIf</span></span> <span class="brown">(</span>score <span class="brown">&gt;=</span> <span class="red">80</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 7   grade <span class="brown">=</span> <span class="red">"B"</span><br/> 8 <span class="purple"><span class="codestrong">ElseIf</span></span> <span class="brown">(</span>score <span class="brown">&gt;=</span> <span class="red">70</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 9   grade <span class="brown">=</span> <span class="red">"C"</span><br/>10 <span class="purple"><span class="codestrong">ElseIf</span></span> <span class="brown">(</span>score <span class="brown">&gt;=</span> <span class="red">60</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>11   grade <span class="brown">=</span> <span class="red">"D"</span><br/>12 <span class="purple"><span class="codestrong">Else</span></span><br/>13   grade <span class="brown">=</span> <span class="red">"F"</span><br/>14 <span class="purple"><span class="codestrong">EndIf</span></span><br/>15 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"The grade is "</span> <span class="brown">+</span> grade<span class="brown">)</span></pre>&#13;
<p class="listcap"><a id="ch9ex2"/><em>Listing 9-2: Grading papers</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_114"/>Try running the program and inputting some numbers to see the results. Here are some output examples:</p>&#13;
<pre>Enter the score: <span class="codestrong">90</span><br/>The grade is A<br/>Enter the score: <span class="codestrong">72</span><br/>The grade is C</pre>&#13;
<p class="indent">This program uses an <code>If/ElseIf</code> ladder to run tests on the entered score. Let’s walk through how this program works.</p>&#13;
<p class="indent">The program tests whether the first condition, <code>score &gt;= 90</code>, is true (line 4). If it is true, <code>grade</code> is set to <code>A</code> and the program jumps to line 15.</p>&#13;
<p class="indent">If it’s not true, <code>score</code> must be less than 90, so the program checks the next condition, <code>score &gt;= 80</code>, on line 6. If this condition is true (which means that <code>score</code> is greater than or equal to 80 but less than 90), <code>grade</code> is set to <code>B</code> and the program jumps to line 15.</p>&#13;
<p class="indent">If that’s not true, then <code>score</code> must be less than 80, so the program checks the condition <code>score &gt;= 70</code> on line 8. If this condition’s true (which means that <code>score</code> is greater than or equal to 70 but less than 80), <code>grade</code> is set to <code>C</code> and the program jumps to line 15.</p>&#13;
<p class="indent">If that’s not true either, then <code>score</code> must be less than 70. In this case, the program checks the condition <code>score &gt;= 60</code> on line 10. If this condition is true (which means that <code>score</code> is greater than or equal to 60 but less than 70), <code>grade</code> is set to <code>D</code> and the program jumps to line 15.</p>&#13;
<p class="indent">Finally, if that last condition is still not true, <code>score</code> must be less than 60. In this case, no conditions are checked, <code>grade</code> is set to <code>F</code>, and the program jumps to line 15.</p>&#13;
<h4 class="h4" id="ch09lev2sec02"><em><strong>The Bug on the Ladder</strong></em></h4>&#13;
<p class="noindent">When you’re writing <code>If/ElseIf</code> ladders, the order of the conditional statements is very important. Be very careful with the order when testing your conditions. For example, go back to <a href="ch09.html#ch9ex2">Listing 9-2</a> and replace lines 4–7 with the following code:</p>&#13;
<pre><span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>score <span class="brown">&gt;=</span> <span class="red">80</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>  grade <span class="brown">=</span> <span class="red">"B"</span><br/><span class="purple"><span class="codestrong">ElseIf</span></span> <span class="brown">(</span>score <span class="brown">&gt;=</span> <span class="red">90</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>  grade <span class="brown">=</span> <span class="red">"A"</span></pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_115"/>This change to the program means that you check the condition <code>score &gt;= 80</code> first instead of <code>score &gt;= 90</code>. Now, if the user enters 95, the program just tests the first condition, sees that <code>score &gt;= 80</code> is true, and sets the <code>grade</code> to <code>B</code>. In this code, <code>grade</code> never gets set to <code>A</code>, no matter how high the value of <code>score</code> is. Nobody gets an <code>A</code>! When the program finds a true condition in this <code>If/ElseIf</code> ladder, it skips all the other statements and goes directly to <code>EndIf</code>.</p>&#13;
<p class="indent">To avoid this problem, make sure the conditions in the <code>If/ElseIf</code> ladder are in the correct order. You’ll probably never want to check a middle value first. Also, be sure to run your program a few times to test the values and catch any problems before your users do.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch09sb01"><strong>TRY IT OUT 9-1</strong></p>&#13;
<p class="noindent">In <a href="ch09.html#ch9ex2">Listing 9-2</a>, you started by checking the condition <code>score &gt;= 90</code>. You can also start by checking the last condition, <code>score &lt; 60</code>, then <code>60 &lt;= score &lt; 70</code>, then <code>70 &lt;= score &lt; 80</code>, and so on. Rewrite the program using this reverse order of checking the grade.</p>&#13;
</div>&#13;
<h3 class="h3" id="ch09lev1sec02"><span class="blue"><strong>Let’s Get Logical</strong></span></h3>&#13;
<p class="noindent">Sometimes you might want to check multiple conditions to see whether to run a statement. For example, you might adopt a dog only if the dog is big, is potty trained, and has three heads. One way to test multiple conditions is to nest <code>If</code> and <code>If/Else</code> statements like you have been doing in previous chapters. Another way is to use <em>logical operators</em> (also called <em>Boolean operators</em>). With logical operators, you can write test conditions that combine two or more logical expressions. Let’s see how.</p>&#13;
<p class="indent">Do you remember something like 5 &lt; <em>x</em> &lt; 10 when you learned about <em>inequalities</em> in your elementary math class? This expression describes a number, <em>x</em>, that is greater than 5 and less than 10. <a href="ch09.html#ch9fig2">Figure 9-2</a> shows you how to write this expression in Small Basic.</p>&#13;
<div class="image"><img alt="image" src="graphics/f09-02.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig2"/><em>Figure 9-2: A compound condition in Small Basic</em></p>&#13;
<p class="indent">This is a <em>compound condition</em> that’s made up of two logical expressions, <em>x</em> &gt; 5 and <em>x</em> &lt; 10, that you combine using the logical operator <code>And</code>. In order for this compound condition to be true, both of the expressions must be true.</p>&#13;
<p class="indent">Small Basic supports two logical operators: <code>And</code> and <code>Or</code>. <a href="ch09.html#ch9fig3">Figure 9-3</a> describes how they work.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_116"/><img alt="image" src="graphics/f09-03.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig3"/><em>Figure 9-3: Explaining the logical operators</em> <code><span class="codeitalic">And</code></span> <em>and</em> <code><span class="codeitalic">Or</code></span></p>&#13;
<p class="indent">Next, we’ll explain these operators a bit more.</p>&#13;
<h4 class="h4" id="ch09lev2sec03"><em><strong>Logical Operators in the Zoo</strong></em></h4>&#13;
<p class="noindent">Look at <a href="ch09.html#ch9fig4">Figure 9-4</a> and answer this question: how would the monkey reach the banana? That’s right: Door 1 <code>And</code> Door 2 <code>And</code> Door 3 must be open. If any one of the three doors is closed, the poor monkey won’t get the banana!</p>&#13;
<div class="image"><img alt="image" src="graphics/f09-04.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig4"/><em>Figure 9-4: Performing logic with the</em> <code><span class="codeitalic">And</code></span> <em>operator</em></p>&#13;
<p class="indent">Now look at <a href="ch09.html#ch9fig5">Figure 9-5</a>. In this case, the monkey just needs one door to be open: Door 1 <code>Or</code> Door 2 <code>Or</code> Door 3. This monkey likes its chances!</p>&#13;
<div class="image"><img alt="image" src="graphics/f09-05.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig5"/><em>Figure 9-5: Performing logic with the</em> <code><span class="codeitalic">Or</code></span> <em>operator</em></p>&#13;
<p class="indent">In <a href="ch09.html#ch9fig6">Figure 9-6</a>, the monkey has two options.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_117"/><img alt="image" src="graphics/f09-06.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig6"/><em>Figure 9-6: Performing logic with</em> <code><span class="codeitalic">And</code></span> <em>and</em> <code><span class="codeitalic">Or</code></span></p>&#13;
<p class="indent">If it takes the upper path, it needs both doors (Door 1 <code>And</code> Door 2) to be open. If it takes the lower path, it needs just Door 3 to be open. If you were programming this condition, you’d describe it like this:</p>&#13;
<pre><span class="brown">((</span>Door1 <span class="brown">=</span> open<span class="brown">) And (</span>Door2 <span class="brown">=</span> open<span class="brown">)) Or (</span>Door3 <span class="brown">=</span> open<span class="brown">)</span></pre>&#13;
<p class="indent">Are you ready to practice using <code>And</code> and <code>Or</code>?</p>&#13;
<h4 class="h4" id="ch09lev2sec04"><em><strong>The And Operator</strong></em></h4>&#13;
<p class="noindent">The <code>And</code> operator takes two logical expressions as operands. <em>Operand</em> refers to the term that an operator acts on. <a href="ch09.html#ch9table2">Table 9-2</a> (called a truth table) lists the output of the <code>And</code> operator for all possible combinations of its two operands, <code>X</code> and <code>Y</code>.</p>&#13;
<p class="tablecap"><a id="ch9table2"/><strong>Table 9-2:</strong> Truth Table for the <code>And</code> Operator</p>&#13;
<table class="topbot">&#13;
<thead>&#13;
<tr>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>If</strong> <code><span class="codestrong">X</code></span> <strong>is</strong></p></td>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>If</strong> <code><span class="codestrong">Y</code></span> <strong>is</strong></p></td>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>Then</strong> <code><span class="codestrong">(X And Y)</code></span> <strong>is</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">If both <code>X</code> and <code>Y</code> are true, then <code>X And Y</code> is true too. But if one of the operands is false, then <code>X And Y</code> is also false.</p>&#13;
<p class="indent"><a href="ch09.html#ch9ex3">Listing 9-3</a> shows two conditions (<code>gameLevel = 1</code> and <code>score &gt; 100</code>) combined using the <code>And</code> operator. The message <code>You get 200 bonus points!</code> is displayed when both conditions are true.</p>&#13;
<pre><span epub:type="pagebreak" id="page_118"/> 1 <span class="green"><span class="codeitalic">' AndDemo.sb</span></span><br/> 2 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Game level: "</span><span class="brown">)</span><br/> 3 gameLevel <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 4<br/> 5 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Score.....: "</span><span class="brown">)</span><br/> 6 score <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 7<br/> 8 <span class="purple"><span class="codestrong">If</span></span> <span class="brown">((</span>gameLevel <span class="brown">=</span> <span class="red">1</span><span class="brown">) And (</span>score <span class="brown">&gt;</span> <span class="red">100</span><span class="brown">))</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 9   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"You get 200 bonus points!"</span><span class="brown">)</span><br/>10 <span class="purple"><span class="codestrong">EndIf</span></span></pre>&#13;
<p class="listcap"><a id="ch9ex3"/><em>Listing 9-3: The</em> <code><span class="codeitalic">And</code></span> <em>operator</em></p>&#13;
<p class="indent">The statement inside the <code>If</code> block (line 9) is run only if <code>gameLevel</code> equals 1 and <code>score</code> is greater than 100. If either of these two conditions is false, the entire condition is found false and Small Basic won’t run the <code>WriteLine()</code> method on line 9.</p>&#13;
<p class="indent">You can perform the same check by replacing lines 8–10 with the following nested <code>If</code> statements:</p>&#13;
<pre><span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>gameLevel <span class="brown">=</span> <span class="red">1</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>  <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>score <span class="brown">&gt;</span> <span class="red">100</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>    <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"You get 200 bonus points!"</span><span class="brown">)</span><br/>  <span class="purple"><span class="codestrong">EndIf</span></span><br/><span class="purple"><span class="codestrong">EndIf</span></span></pre>&#13;
<p class="indent">Do you see how the <code>And</code> operator is a more concise way to test multiple conditions? The nested <code>If</code> statements require five lines of code, but using <code>And</code>, you can do the same thing in only three lines of code!</p>&#13;
<h4 class="h4" id="ch09lev2sec05"><em><strong>The Or Operator</strong></em></h4>&#13;
<p class="noindent">How do you like your pizza? You might want to eat pizza only if it has four kinds of meat or if the crust is gooey. When you have multiple conditions but only one condition needs to be true, the <code>Or</code> operator comes into play. Take a look at the truth table for the <code>Or</code> operator in <a href="ch09.html#ch9table3">Table 9-3</a>.</p>&#13;
<p class="tablecap"><a id="ch9table3"/><strong>Table 9-3:</strong> Truth Table for the <code>Or</code> Operator</p>&#13;
<table class="topbot">&#13;
<thead>&#13;
<tr>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>If</strong> <code><span class="codestrong">X</code></span> <strong>is</strong></p></td>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>If</strong> <code><span class="codestrong">Y</code></span> <strong>is</strong></p></td>&#13;
<td class="table_th" style="vertical-align: top;"><p class="table"><strong>Then</strong> <code><span class="codestrong">(X Or Y)</code></span> <strong>is</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
<td class="table_1" style="vertical-align: top;"><p class="table"><code>"True"</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
<td style="vertical-align: top;"><p class="table"><code>"False"</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">If either of the two operands is true, or if they’re both true, the combined logical expression is true. The logical expression is false only when both operands are false.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_119"/><a href="ch09.html#ch9ex4">Listing 9-4</a> shows an example of using the <code>Or</code> operator. The goal is to end the game if there’s no more time to play (<code>timeLeft = 0</code>) or if the player has lost all their energy (<code>energyLevel = 0</code>).</p>&#13;
<pre> 1 <span class="green"><span class="codeitalic">' OrDemo.sb</span></span><br/> 2 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Time left: "</span><span class="brown">)</span><br/> 3 timeLeft <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 4<br/> 5 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Energy level: "</span><span class="brown">)</span><br/> 6 energyLevel <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 7<br/> 8 <span class="purple"><span class="codestrong">If</span></span> <span class="brown">((</span>timeLeft <span class="brown">=</span> <span class="red">0</span><span class="brown">) Or (</span>energyLevel <span class="brown">=</span> <span class="red">0</span><span class="brown">))</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 9   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Game Over!"</span><span class="brown">)</span><br/>10 <span class="purple"><span class="codestrong">EndIf</span></span></pre>&#13;
<p class="listcap"><a id="ch9ex4"/><em>Listing 9-4: The</em> <code><span class="codeitalic">Or</code></span> <em>operator</em></p>&#13;
<p class="indent">If <code>timeLeft</code> is 0 or <code>energyLevel</code> is 0, Small Basic runs the command inside the <code>If</code> block (line 9). Run this program several times using different inputs to make sure you understand how the <code>Or</code> operator works.</p>&#13;
<p class="indent">You could use nested <code>If</code> statements to do the same thing. For example, you could replace lines 8–10 with the following code:</p>&#13;
<pre><span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>timeLeft <span class="brown">=</span> <span class="red">0</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>  <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Game Over!"</span><span class="brown">)</span><br/><span class="purple"><span class="codestrong">Else</span></span><br/>  <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>energyLevel <span class="brown">=</span> <span class="red">0</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>    <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Game Over!"</span><span class="brown">)</span><br/>  <span class="purple"><span class="codestrong">EndIf</span></span><br/><span class="purple"><span class="codestrong">EndIf</span></span></pre>&#13;
<p class="indent">However, as you can see, using nested <code>If</code> statements takes up seven lines of code, but using <code>Or</code> took only three! Using the <code>Or</code> operator is a more concise way to test multiple conditions.</p>&#13;
<h4 class="h4" id="ch09lev2sec06"><em><strong>The Cosmic Order of Evaluation</strong></em></h4>&#13;
<p class="noindent">Look at the following condition. How does Small Basic evaluate this expression?</p>&#13;
<pre><span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>A <span class="brown">=</span> <span class="red">1</span> <span class="brown">Or</span> B <span class="brown">=</span> <span class="red">1</span> <span class="brown">And</span> C <span class="brown">=</span> <span class="red">1</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span></pre>&#13;
<p class="indent">As it turns out, Small Basic gives <code>And</code> a higher priority than <code>Or</code>. This means it finds <code>B = 1 And C = 1</code> first, and then the result is used as the right operand for the <code>Or</code> expression. To change the order, you can use parentheses, like this:</p>&#13;
<pre><span class="purple"><span class="codestrong">If</span></span> <span class="brown">((</span>A <span class="brown">=</span> <span class="red">1</span> <span class="brown">Or</span> B <span class="brown">=</span> <span class="red">1</span><span class="brown">) And</span> C <span class="brown">=</span> <span class="red">1</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span></pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_120"/>This code finds <code>A = 1 Or B = 1</code> first and uses the result as the left operand for the <code>And</code> expression. We recommend you use parentheses to avoid any confusion!</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="notes"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>Logical operators like</em> <code><span class="codeitalic">And</code></span> <em>and</em> <code><span class="codeitalic">Or</code></span> <em>are evaluated</em> after <em>any arithmetic operators (</em><code><span class="codeitalic">+</code></span>, <code><span class="codeitalic">–</code></span>, <code><span class="codeitalic">*</code></span>, <code><span class="codeitalic">/</code></span><em>) and relational operators (</em><code><span class="codeitalic">=</code></span>, <code><span class="codeitalic">&lt;</code></span>, <code><span class="codeitalic">&lt;=</code></span>, <code><span class="codeitalic">&gt;</code></span>, <code><span class="codeitalic">&gt;=</code></span>, <code><span class="codeitalic">&lt;&gt;</code></span><em>) in combined expressions. Among the logical operators</em>, <code><span class="codeitalic">And</code></span> <em>takes priority over</em> <code><span class="codeitalic">Or</code></span><em>; use parentheses to change the order and make your code easier to read.</em></p>&#13;
</div>&#13;
<p class="indent">It’s almost time to apply all the decision-making information you’ve learned and build some exciting applications. But first we need to introduce a new Small Basic object, the <code>Shapes</code> object, which lets you build your applications using rich graphics. Let’s make some pretty pictures!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch09sb02"><strong>TRY IT OUT 9-2</strong></p>&#13;
<p class="noindent">Open the file <em>DiceGame_Incomplete.sb</em> from this chapter’s folder, and write the missing code to complete this game. The player enters their bet (from $1 to $10) and then throws a pair of dice. If the sum of the dice is 2 or 12, the player wins three times their bet. If the sum is 4 or 10, the player wins two times their bet. If the sum is 7 or 11, the player loses their bet. Otherwise, the player’s balance doesn’t change, and the player rolls the dice again.</p>&#13;
</div>&#13;
<h3 class="h3" id="ch09lev1sec03"><span class="blue"><strong>The Shapes Object</strong></span></h3>&#13;
<p class="noindent">In <a href="ch03.html#ch03">Chapter 3</a>, you learned how to draw all sorts of shapes and images in the graphics window. But those shapes were <em>fixed</em>: once you drew a shape at a location, the only way to move it to a different spot was to clear the entire window and redraw that shape in the new place. If you need to move some shapes around in a program (like moving a character when the player presses a key), it’s best to use the <code>Shapes</code> object.</p>&#13;
<p class="indent">The <code>Shapes</code> object lets you add, move, and rotate shapes in the graphics window. Run this code to draw a rectangle:</p>&#13;
<pre>rectID <span class="brown">=</span> <span class="blue1">Shapes</span><span class="brown">.AddRectangle(</span><span class="red">100</span><span class="brown">,</span> <span class="red">50</span><span class="brown">)</span><br/><span class="blue1">Program</span><span class="brown">.Delay(</span><span class="red">1000</span><span class="brown">)</span><br/><span class="blue1">Shapes</span><span class="brown">.Move(</span>rectID<span class="brown">,</span> <span class="red">400</span><span class="brown">,</span> <span class="red">200</span><span class="brown">)</span></pre>&#13;
<p class="indent">The program calls <code>AddRectangle()</code> to add a 100×50 rectangle and saves the identifier of the created shape in <code>rectID</code>. The created rectangle appears by default in the upper-left corner of the graphics window. The second statement pauses the program for 1 second so you can see the rectangle’s initial position. The third statement calls <code>Move()</code> to move this rectangle so its upper-left corner is at (400, 200). Note how <code>rectID</code> is passed as the first argument to <code>Move()</code> to let it know the identity of the shape to move.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_121"/>Think of the <code>Shapes</code> object as a “shape factory”—a factory that manufactures lines, triangles, rectangles, ellipses, and other shapes. When you ask it to create a new shape, it’ll make the shape and return an identifier. Every time you want to do something with the shape you created, you’ll pass this identifier to the <code>Shapes</code> object (as an argument to the method you call).</p>&#13;
<p class="indent">We won’t cover all the methods of the <code>Shapes</code> object here. Instead, we’ll discuss the ones you’ll use in the next program. You’ll learn the other methods as you progress through this book.</p>&#13;
<p class="indent">The two methods we’ll use now are <code>AddImage()</code> and <code>Move()</code>. To understand how these methods work, open the file <em>ImageDemo.sb</em> from this chapter’s folder. You’ll see the code shown in <a href="ch09.html#ch9ex5">Listing 9-5</a>, which moves an image.</p>&#13;
<pre>1 <span class="green"><span class="codeitalic">' ImageDemo.sb</span></span><br/>2 path <span class="brown">=</span> <span class="blue1">Program</span><span class="brown">.Directory +</span> <span class="red">"\Flower.png"</span><br/>3 imgID <span class="brown">=</span> <span class="blue1">Shapes</span><span class="brown">.AddImage(</span>path<span class="brown">)</span><br/>4 <span class="blue1">Shapes</span><span class="brown">.Move(</span>imgID<span class="brown">,</span> <span class="red">60</span><span class="brown">,</span> <span class="red">20</span><span class="brown">)</span></pre>&#13;
<p class="listcap"><a id="ch9ex5"/><em>Listing 9-5: Moving an image using the</em> <code><span class="codeitalic">Shapes</code></span> <em>object</em></p>&#13;
<p class="indent">Click the <strong>Run</strong> button. The output of this program is illustrated in <a href="ch09.html#ch9fig7">Figure 9-7</a> (we added the gridlines and the numbers to show how the code works).</p>&#13;
<div class="image"><img alt="image" src="graphics/f09-07.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig7"/><em>Figure 9-7: Moving the flower image</em></p>&#13;
<p class="indent">Let’s assume that this program is saved to <em>C:\Book\Ch09\ImageDemo</em>. The <em>imageDemo</em> folder also contains the <em>Flower.png</em> image file. The <code>Program.Directory</code> property (line 2) points to the directory <em>C:\Book\Ch09\ImageDemo</em>, which contains the executable program (the <em>.exe</em> file). Line 2 uses the <code>+</code> symbol to append two things to the directory: a slash (\) and the image filename (<em>Flower.png</em>). When the program runs line 2, the <code>path</code> variable’s given the full file path (<em>C:\Book\Ch09\ImageDemo\Flower.png</em>).</p>&#13;
<p class="indent">Line 3 calls the <code>AddImage()</code> method and passes the <code>path</code> variable as an argument. This method loads the image from the file and returns an identifier of the loaded image; this identifier is saved in a variable named <code>imgID</code>. An identifier is like a tag that the <code>Shapes</code> object uses to keep track of the shapes it creates (for example, <code>"Image1"</code>, <code>"Rectangle3"</code>, <code>"Line100"</code>, and so on). The loaded image is displayed in the upper-left corner of the graphics window.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_122"/>Line 4 calls the <code>Move()</code> method to move the image. The first argument is the shape’s identifier, which the program got from <code>AddImage()</code> and was saved into <code>imgID</code> (line 3). The other two arguments are the upper-left coordinates of the new position. <a href="ch09.html#ch9fig7">Figure 9-7</a> shows the flower image with its upper-left corner at (60, 20).</p>&#13;
<p class="indent">The <em>Flower.png</em> image’s width is 100 pixels, and its height is 140 pixels. If you want to move the image so its center’s at (100, 100), you’d write this:</p>&#13;
<pre><span class="blue1">Shapes</span><span class="brown">.Move(</span>imgID<span class="brown">,</span> <span class="red">100</span> <span class="brown">-</span> <span class="red">50</span><span class="brown">,</span> <span class="red">100</span> <span class="brown">-</span> <span class="red">70</span><span class="brown">)</span></pre>&#13;
<p class="indent">Because you want the image’s center to be at (100, 100), you need to subtract half the image’s width (50) to center it horizontally and subtract half the image’s height (70) to center it vertically.</p>&#13;
<p class="indent">This is all the information you need to learn about the <code>Shapes</code> object for you to build the application in the next section. Time to make a guessing game!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch09sb03"><strong>TRY IT OUT 9-3</strong></p>&#13;
<p class="noindent">Use code like the following to point to a small image on your computer and display it in the graphics window:</p>&#13;
<pre>imgID <span class="brown">=</span> <span class="blue1">Shapes</span><span class="brown">.AddImage(</span><span class="red">"C:\Temp\icon.png"</span><span class="brown">)</span><br/><span class="blue1">Shapes</span><span class="brown">.Move(</span>imgID<span class="brown">,</span> <span class="red">40</span><span class="brown">,</span> <span class="red">60</span><span class="brown">)</span></pre>&#13;
<p class="indent">Update the path with the correct path for your image. Change the second statement to move your image to each of these positions: (100, 40), (10, 10), (27, 78), and then center it in the middle of the graphics window.</p>&#13;
</div>&#13;
<h3 class="h3" id="ch09lev1sec04"><span class="blue"><strong>Create a Game: Guess My Coordinates</strong></span></h3>&#13;
<p class="noindent">It’s game time! In this section, you’ll develop an interactive game called Guess My Coordinates that tests people’s knowledge of the Cartesian coordinate system, or how well they can read an x, y graph. The game displays a star that represents a point on the Cartesian grid; <a href="ch09.html#ch9fig8">Figure 9-8</a> shows what the interface looks like. During each round of the game, the star moves to a random location and asks the player to guess its x- and y-coordinates. The game checks the player’s answers and displays a feedback message. It’s like <em>Battleship</em> but more fun for math geeks!</p>&#13;
<p class="indent">The game uses the graphics window and the text window at the same time. The graphics window shows the grid and the star, and the text window reads the player’s answers and shows the program’s feedback. Now we’ll walk you through the steps to create this game.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_123"/><img alt="image" src="graphics/f09-08.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig8"/><em>Figure 9-8: The user interface for the Guess My Coordinates game</em></p>&#13;
<h4 class="h4" id="ch09lev2sec07"><em><strong>Step 1: Open the Startup File</strong></em></h4>&#13;
<p class="noindent">Start by opening the <em>GuessMyCoordinate_Incomplete.sb</em> file from this chapter’s folder. This file contains only comments. You’ll add all the code one step at a time.</p>&#13;
<p class="indent">The chapter’s folder also contains the two images you’ll use (<em>Grid.png</em> and <em>Star.png</em>). <em>Grid.png</em> is a 480×360 image of the Cartesian grid, and <em>Star.png</em> is a 24×24 image of a star.</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="notes"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>If you run into any problems, check out the finished program</em> (GuessMyCoordinates.sb) <em>included in the chapter folder to see what you did wrong.</em></p>&#13;
</div>&#13;
<h4 class="h4" id="ch09lev2sec08"><em><strong>Step 2: Set Up the Game</strong></em></h4>&#13;
<p class="noindent">Enter the code in <a href="ch09.html#ch9ex6">Listing 9-6</a> to set up the game’s user interface. This goes at the beginning of the file.</p>&#13;
<pre> 1 <span class="blue1">GraphicsWindow</span><span class="brown">.Title =</span> <span class="red">"Guess My Coordinates"</span><br/> 2 <span class="blue1">GraphicsWindow</span><span class="brown">.CanResize =</span> <span class="red">"False"</span><br/> 3 <span class="blue1">GraphicsWindow</span><span class="brown">.Width =</span> <span class="red">480</span>   <span class="green"><span class="codeitalic">' Same as background image</span></span><br/> 4 <span class="blue1">GraphicsWindow</span><span class="brown">.Height =</span> <span class="red">360</span>  <span class="green"><span class="codeitalic">' Same as background image</span></span><br/> 5 <span class="blue1">GraphicsWindow</span><span class="brown">.Top =</span> <span class="red">200</span>     <span class="green"><span class="codeitalic">' Position on your desktop</span></span><br/> 6 <span class="blue1">GraphicsWindow</span><span class="brown">.Left =</span> <span class="red">50</span>     <span class="green"><span class="codeitalic">' Position on your desktop</span></span><br/> 7 <span class="blue1">TextWindow</span><span class="brown">.Title =</span> <span class="red">"Guess My Coordinates"</span><br/> 8 <span class="blue1">TextWindow</span><span class="brown">.Top =</span> <span class="blue1">GraphicsWindow</span><span class="brown">.Top</span><br/> 9 <span class="blue1">TextWindow</span><span class="brown">.Left =</span> <span class="blue1">GraphicsWindow</span><span class="brown">.Left +</span> <span class="blue1">GraphicsWindow</span><span class="brown">.Width +</span> <span class="red">15</span><br/>10<br/>11 path <span class="brown">=</span> <span class="blue1">Program</span><span class="brown">.Directory</span>                     <span class="green"><span class="codeitalic">' Program's directory</span></span><br/>12 bkgnd <span class="brown">=</span> <span class="blue1">Shapes</span><span class="brown">.AddImage(</span>path <span class="brown">+</span> <span class="red">"\Grid.png"</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Bkgnd (480 x 360)</span></span><br/>13 star <span class="brown">=</span> <span class="blue1">Shapes</span><span class="brown">.AddImage(</span>path <span class="brown">+</span> <span class="red">"\Star.png"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' Star image (24 x 24)</span></span><br/>14<br/>15 <span class="purple"><span class="codestrong">While</span></span> <span class="brown">(</span><span class="red">"True"</span><span class="brown">)</span>                               <span class="green"><span class="codeitalic">' Runs forever</span></span><br/>16   <span class="green"><span class="codeitalic">' You'll add code from Listings 9-7 and 9-8 here</span></span><br/>17 <span class="purple"><span class="codestrong">EndWhile</span></span></pre>&#13;
<p class="listcap"><a id="ch9ex6"/><em>Listing 9-6: Setting up the game</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_124"/>Lines 1–6 set the title, size, and position of the graphics window. The window’s size is set to be equal to the size of the grid image (lines 3–4). Lines 7–9 set the title of the text window and position it to the right of the graphics window (see <a href="ch09.html#ch9fig8">Figure 9-8</a>). The program then saves the program’s directory (line 11) into <code>path</code>, which you’ll use to make the full path for both images so you can draw them on the screen. Next, the program loads the two images and saves their identifiers (which are returned by the <code>Shapes</code> object) in these two variables: <code>bkgnd</code> and <code>star</code> (lines 12–13).</p>&#13;
<p class="indent">The <code>While</code>/<code>EndWhile</code> keywords on lines 15 and 17 are explained in detail in <a href="ch14.html#ch14">Chapter 14</a>. For now, you just need to know that this code creates an <em>infinite loop</em> (a loop that repeats forever, like the Pete and Repeat program, <em>GotoDemo.sb</em>, you wrote in the <a href="ch08.html#ch08">Chapter 8</a>). You’ll add the remaining code for the application between these <code>While</code>/<code>EndWhile</code> keywords.</p>&#13;
<p class="indent">Test what you’ve written so far. You should see the two windows side by side, just like in <a href="ch09.html#ch9fig8">Figure 9-8</a>. The star image appears in the upper-left corner of the graphics window but doesn’t do anything because you didn’t write any code to move it yet.</p>&#13;
<p class="indent">Now close either the graphics window or the text window so you can add the remaining code.</p>&#13;
<h4 class="h4" id="ch09lev2sec09"><em><strong>Step 3: Hide the Star</strong></em></h4>&#13;
<p class="noindent">During each round of the game, you’ll move the star to a random position on the grid and then ask the player to guess its coordinates. Let’s add the code to move the star.</p>&#13;
<p class="indent">Add the code in <a href="ch09.html#ch9ex7">Listing 9-7</a> inside the <code>While</code> loop (line 16 back in <a href="ch09.html#ch9ex6">Listing 9-6</a>).</p>&#13;
<pre>1   <span class="green"><span class="codeitalic">' Finds the star's random position (in grid units)</span></span><br/>2   X0 <span class="brown">=</span> <span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="red">23</span><span class="brown">) -</span> <span class="red">12</span> <span class="green"><span class="codeitalic">' Ranges from -11 to 11</span></span><br/>3   Y0 <span class="brown">=</span> <span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="red">17</span><span class="brown">) -</span> <span class="red">9</span>  <span class="green"><span class="codeitalic">' Ranges from -8 to 8</span></span><br/>4   pt <span class="brown">=</span> <span class="red">"("</span> <span class="brown">+</span> X0 <span class="brown">+</span> <span class="red">", "</span> <span class="brown">+</span> Y0 <span class="brown">+</span> <span class="red">")"</span>    <span class="green"><span class="codeitalic">' Example: (5, -3)</span></span><br/>5<br/>6   <span class="green"><span class="codeitalic">' Sets to pixel units and moves the star to the random position</span></span><br/>7   xPos <span class="brown">= ((</span>X0 <span class="brown">+</span> <span class="red">12</span><span class="brown">) *</span> <span class="red">20</span><span class="brown">) -</span> <span class="red">12</span>   <span class="green"><span class="codeitalic">' Sets 12 pixels to the left</span></span><br/>8   yPos <span class="brown">= ((</span><span class="red">9</span> <span class="brown">-</span> Y0<span class="brown">) *</span> <span class="red">20</span><span class="brown">) -</span> <span class="red">12</span>    <span class="green"><span class="codeitalic">' And 12 pixels up</span></span><br/>9   <span class="blue1">Shapes</span><span class="brown">.Move(</span>star<span class="brown">,</span> xPos<span class="brown">,</span> yPos<span class="brown">)</span>  <span class="green"><span class="codeitalic">' Moves the star</span></span></pre>&#13;
<p class="listcap"><a id="ch9ex7"/><em>Listing 9-7: Placing the star</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_125"/>In <a href="ch09.html#ch9fig8">Figure 9-8</a>, you see that the grid goes from –12 to 12 in the x-direction and from –9 to 9 in the y-direction. If you place the star at any point on the grid’s boundaries, the player sees only part of it; the part of the star outside the grid gets clipped. That’s why you’ll restrict the star’s x-coordinate to the range [–11, 11] and its y-coordinate to the range [–8, 8].</p>&#13;
<p class="indent">But how do you create a random number between –11 and 11? That’s easy! From –11 to 11 there are 23 integers (–11, –10, ..., 10, 11). If you call <code>GetRandomNumber(23)</code>, you’ll get a random integer between 1 and 23. If you subtract 12 from this integer, the result will be an integer between –11 (1 – 12) and 11 (23 – 12), which is what you need. Next, we’ll explain the code.</p>&#13;
<p class="indent">You use two variables, <code>X0</code> and <code>Y0</code>, to hold the random coordinates of the star. In line 2, the <code>X0</code> variable is given a random value between –11 and 11, as explained earlier. In line 3, the <code>Y0</code> variable is given a random number between –8 and 8. These random values for <code>X0</code> and <code>Y0</code> tell you which grid intersection point the star lands on. Next, the program builds a string named <code>pt</code> (short for point) in the form <code>(X0, Y0)</code>. This string shows the correct coordinates to the player if they enter the wrong answer.</p>&#13;
<p class="indent">Now you need to move the star to this new coordinate that you just created, <code>(X0, Y0)</code>. <a href="ch09.html#ch9fig9">Figure 9-9</a> shows part of the grid and an example of where the star might be set. As you can see in the figure, each unit on the grid maps to 20 pixels in the graphics window; compare this with <a href="ch09.html#ch9fig8">Figure 9-8</a> to understand the full scaling of the grid.</p>&#13;
<div class="image"><img alt="image" src="graphics/f09-09.jpg"/></div>&#13;
<p class="figcap"><a id="ch9fig9"/><em>Figure 9-9: Grid coordinates for pixel positions in the graphics window</em></p>&#13;
<p class="indent">To move the star to a random position, you’ll first need to translate the <code>(X0, Y0)</code> grid units (what your user sees on the grid image) into <code>(xPos, yPos)</code> pixel units (what Small Basic sees). Let’s do that now.</p>&#13;
<p class="indent">If the star’s x-coordinate is –11, you need to draw the star at horizontal position 20 in the graphics window. If the star’s x-coordinate is –10, you need to draw it at horizontal position 40, and so on. So you need a formula to map the star’s x-coordinates, <code>X0</code> = {–11, –10, –9, ..., 0}, to their corresponding horizontal positions, <code>xPos</code> = {20, 40, 60, ..., 240}, in the graphics <span epub:type="pagebreak" id="page_126"/>window. To do this, you add 12 to <code>X0</code> to get {1, 2, 3, ..., 12} and multiply the result by 20. Test it out! When <code>X0</code> = –11, (–11 + 12) × 20 = 20. When <code>X0</code> = –10, (–10 + 12) × 20 = 40, and so on. This is exactly what you want.</p>&#13;
<p class="indent">Mapping for the y-coordinate works the same way. If 8 is the star’s y-coordinate, you need to draw it at vertical position 20 in the graphics window. If 7 is the star’s y-coordinate, you need to draw it at vertical position 40, and so on. So you need a formula to map the star’s y-coordinates, <code>Y0</code> = {8, 7, 6, ..., 0}, to their corresponding vertical positions, <code>yPos</code> = {20, 40, 60, ..., 180}, in the graphics window. You do this by subtracting <code>Y0</code> from 9 and multiplying the result by 20. Let’s test this out! When <code>Y0</code> = 8, (9 – 8) × 20 = 20. When <code>Y0</code> = 7, (9 – 7) × 20 = 40, and so on, which is what you need.</p>&#13;
<p class="indent">You still have one minor detail to consider. Let’s say the star’s <code>(X0, Y0)</code> coordinates are (–10, 2), as shown in <a href="ch09.html#ch9fig9">Figure 9-9</a>. You map these coordinates to pixels and find that you need to show the star at point <code>(xPos, yPos)</code> = (40, 140) in the graphics window. But you need that star’s center to be at (40, 140). Because the star image is 24×24 pixels, the star’s left position must be 28 (40 – 12), and the star’s top position must be 128 (140 – 12). These are the numbers you need to pass to the <code>Move()</code> method. In other words, to align the star’s center with the intersection of the grid lines, you have to subtract the star’s width (12 pixels) from <code>xPos</code> and the star’s height (12 pixels) from <code>yPos</code>.</p>&#13;
<p class="indent">In <a href="ch09.html#ch9ex7">Listing 9-7</a>, line 7 finds the star’s <code>xPos</code> and line 8 finds the star’s <code>yPos</code> in the graphics window. Line 9 then calls the <code>Move()</code> method to place the star at the desired position on the grid.</p>&#13;
<h4 class="h4" id="ch09lev2sec10"><em><strong>Step 4: Let the User Guess</strong></em></h4>&#13;
<p class="noindent">Now that the star is displayed on the grid, you need to ask the player to guess its coordinates. Add the code in <a href="ch09.html#ch9ex8">Listing 9-8</a> right after the code you added from <a href="ch09.html#ch9ex7">Listing 9-7</a>, still inside the <code>While</code> loop.</p>&#13;
<pre> 1   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"What is the x-coordinate? "</span><span class="brown">)</span><br/> 2   xAns <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 3   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>xAns <span class="brown">=</span> X0<span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span>    <span class="green"><span class="codeitalic">' Player guessed the correct x-coordinate</span></span><br/> 4     <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"What is the y-coordinate? "</span><span class="brown">)</span><br/> 5     yAns <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span><br/> 6     <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>yAns <span class="brown">=</span> Y0<span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span>  <span class="green"><span class="codeitalic">' Player guessed the correct y-coordinate</span></span><br/> 7       <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Good job! You're a star!"</span><span class="brown">)</span><br/> 8     <span class="purple"><span class="codestrong">Else</span></span> <span class="green"><span class="codeitalic">' Player entered an incorrect y-coordinate</span></span><br/> 9       <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Sorry. The star is at "</span> <span class="brown">+</span> pt<span class="brown">)</span><br/>10     <span class="purple"><span class="codestrong">EndIf</span></span><br/>11   <span class="purple"><span class="codestrong">Else</span></span>  <span class="green"><span class="codeitalic">' Player entered an incorrect x-coordinate</span></span><br/>12     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Sorry. The star is at "</span> <span class="brown">+</span> pt<span class="brown">)</span><br/>13   <span class="purple"><span class="codestrong">EndIf</span></span><br/>14<br/>15   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">""</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Empties the line before a new round</span></span></pre>&#13;
<p class="listcap"><a id="ch9ex8"/><em>Listing 9-8: Guessing the coordinates</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_127"/>This code asks the player to enter the x-coordinate of the star, and it waits for an answer (lines 1–2). Then it checks whether the x-coordinate guess is correct (line 3). If the answer is incorrect, the program moves to line 12 to display the correct coordinates of the star (see the box labeled <em>2nd Round</em> in <a href="ch09.html#ch9fig8">Figure 9-8</a>). But if the x-coordinate guess is correct, the code asks the player to enter the y-coordinate of the star and waits for an answer (lines 4–5). If the player answers correctly (line 7), the program displays <code>Good Job! You're a star!</code>. If not, the program moves to line 9 to display the correct coordinates.</p>&#13;
<p class="indent">In all these cases, the program ends up at line 15 to display an empty line, and the <code>While</code> loop repeats for another round of the game. The game never ends! (This is exactly how your parents feel when you’re playing video games.)</p>&#13;
<p class="indent">The game is now complete. Try playing it now!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch09sb04"><strong>TRY IT OUT 9-4</strong></p>&#13;
<p class="noindent">Change <a href="ch09.html#ch9ex8">Listing 9-8</a> to ask the player to enter the x- and y-coordinates, and then use the <code>And</code> operator to check <code>xAns</code> and <code>yAns</code> in a single <code>If</code> statement.</p>&#13;
</div>&#13;
<h3 class="h3a" id="ch09lev1sec05"><span class="blues"><strong>Programming Challenges</strong></span></h3>&#13;
<p class="noindent">If you get stuck, check out <em><a href="http://nostarch.com/smallbasic/">http://nostarch.com/smallbasic/</a></em> for the solutions and for more resources and review questions for teachers and students.</p>&#13;
<ol>&#13;
<li><p class="noindenta">A love meter gives a number from 1 to 5 that indicates the warmth of your heart (a lower number is warmer). Write a program that asks the user to input their love indicator number and then displays one of these messages:</p>&#13;
<pre>1: Your heart is lava hot!<br/>2: Your heart is warm.<br/>3: Your heart is neutral.<br/>4: Your heart is cold, like the North Pole!<br/>5: If your heart was a movie, it would be Frozen!</pre></li>&#13;
<li><p class="noindenta">Write a program to simulate a mouse’s search for food (see the following figure). The mouse starts at room 1. From there, have the mouse go to either room 2 or room 4 (decide randomly). Pause to display this movement to the user. If the mouse goes to room 4, then for the next step it can move to room 1, room 2, or room 5 (decide randomly and then display the move). Make your simulation end when the mouse goes to room 3 (and finds the cheese) or goes to room 5, where the cat is patiently waiting for its snack. Open the file <em>HungryMouse_Incomplete.sb</em> from this chapter’s folder, and follow the instructions to complete the simulation.</p>&#13;
<div class="image1"><span epub:type="pagebreak" id="page_128"/><img alt="image" src="graphics/f0128-01.jpg"/></div></li>&#13;
<li><p class="noindenta">Obi-Wan Kenobi needs to know the day of the week. But R2-D2 just beeps at him. Obi-Wan counts the beeps, but he needs your help to translate that number into the day of the week. Write an <code>If/ElseIf</code> ladder that compares the value of the variable <code>dayNum</code> with 1, 2, 3, ..., 7 and sets the value of the variable <code>dayName</code> to <code>"Sunday"</code>, <code>"Monday"</code>, <code>"Tuesday"</code>, ..., <code>"Saturday"</code> (so 1 is Sunday and 7 is Saturday). Help Obi Wan Kenobi. You’re his only hope!</p></li>&#13;
</ol>&#13;
</body></html>