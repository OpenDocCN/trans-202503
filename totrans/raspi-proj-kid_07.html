<html><head></head><body>
<h2 class="h2" id="ch07"><span epub:type="pagebreak" id="page_115"/>7<br/>RADIO INVASION</h2>&#13;
<p class="noindent"><span class="big1">THE RASPBERRY PI NEVER CEASES TO AMAZE ME. WITH JUST A SINGLE JUMPER WIRE, YOU CAN CONVERT THE RASPBERRY PI INTO A RADIO TRANSMITTER. THAT’S RIGHT: YOU CAN USE IT TO BROADCAST MESSAGES TO A REAL RADIO.</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_116"/>In this chapter’s project, you’ll create a simple soundboard to trigger and control broadcasts to the radio. You’ll record sounds or phrases, such as “Listen up, everybody” or “I want a cookie,” or create an emergency broadcast message. Then you’ll assign each sound file to its own button, which you’ll click to broadcast your message to any radios tuned in to the correct frequency. By hijacking radio waves, you’ll be able to prank unsuspecting listeners, share important gossip, or create a personal announcement system.</p>&#13;
<p class="indent">Radio waves are everywhere. When you watch your television, the program is likely being transmitted to you via radio waves. The Wi-Fi router in your house broadcasts data packets as radio waves. In fact, many cars now use data encoded in radio waves to unlock doors or start the engine. So how do you hack a Raspberry Pi to turn it into a radio transmitter?</p>&#13;
<p class="indent">Well, GPIO pin 4 can generate a spread-spectrum clock signal, which extends the bandwidth, resulting in a signal that’s spread over a range of up to 40 m. You’ll use software called PiFM to control the pin and enable it to send your FM radio waves. You can read more about the science and the project at <em><a href="http://www.icrobotics.co.uk/wiki/index.php/Turning_the_Raspberry_Pi_Into_an_FM_Transmitter">http://www.icrobotics.co.uk/wiki/index.php/Turning_the_Raspberry_Pi_Into_an_FM_Transmitter</a></em>.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong><span class="purple">LEGAL ISSUES</span></strong></p>&#13;
<p class="notep">Before you get started, be aware that this project is purely for educational and learning purposes, not for commercial use. The standard 4-inch jumper wire supports a legal broadcast radius of approximately 30–40 m. You’re responsible for researching your country’s laws and requirements. It’s also your responsibility to conform to the requirements of those laws. This project should <strong><em>not</em></strong> be used near any airports or military bases.</p>&#13;
</div>&#13;
<h3 class="h3" id="ch07lev1sec1">WHAT YOU’LL NEED</h3>&#13;
<p class="noindent">Here are the items you’ll need for the project:</p>&#13;
<ul>&#13;
<li class="noindent">Raspberry Pi Zero or the original Pi model (alternative: Raspberry Pi Model B+ V1.2 2014 or Raspberry Pi Model A+ V1.1 2014)</li>&#13;
<li class="noindent">Jumper wire</li>&#13;
<li class="noindent">USB microphone (recommended) or other microphone</li>&#13;
<li class="noindent">FM-enabled radio (digital or analog, preferably with two speakers, either external or built-in)</li>&#13;
</ul>&#13;
<h3 class="h3" id="ch07lev1sec2">PREPARING THE RASPBERRY PI</h3>&#13;
<p class="noindent">Before building the main project, you’ll install the PiFM software, set up the radio, and then check that it works correctly. This is an easy project to set up.</p>&#13;
<p class="indent">To set up the hardware, connect one jumper wire to GPIO pin 4—the fourth physical pin on the left of the Pi, as shown in <a href="ch07.xhtml#ch07fig01">Figure 7-1</a>. That’s it; that’s all the hardware you need to set up to broadcast your signal.</p>&#13;
<div class="image"><img alt="Image" src="../images/07fig01.jpg"/></div>&#13;
<p class="figcap" id="ch07fig01"><strong>FIGURE 7-1</strong> <span epub:type="pagebreak" id="page_117"/>Attaching the jumper wire to the Raspberry Pi</p>&#13;
<p class="indent">Follow these steps to set up the project:</p>&#13;
<ol>&#13;
<li class="noindent"><strong>Create a new folder:</strong> You’ll create a folder to store the program software and sound files. Open the terminal and enter the following:&#13;
<pre><span class="codegreen1">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">mkdir Radio</span></pre>&#13;
<p class="indent">This <code>mkdir</code> command creates a folder named <em>Radio</em>. Navigate to the <em>Radio</em> folder by entering the following command into the terminal:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">cd Radio</span></pre>&#13;
<p class="indent">The text in the command line’s prompt should now show that you’re in the <em>Radio</em> folder by changing to something like this:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">~/Radio</span></pre>&#13;
</li>&#13;
<li class="noindent"><strong>Download the Python library:</strong> Download the required PiFM library by entering this line in the terminal:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">wget http://www.tecoed.co.uk/uploads/1/4/2/4/14249012/pifm.tar.gz</span></pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_118"/>This line downloads the program file to your <em>Radio</em> folder. The file is compressed, so you’ll need to uncompress it to access the files. To do so, enter this command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">tar xvzf pifm.tar.gz</span></pre>&#13;
<p class="indent">Then press <span class="small">ENTER</span> to extract the program files into the <em>Radio</em> folder.</p></li>&#13;
</ol>&#13;
<h3 class="h3" id="ch07lev1sec3">RUNNING A TEST PROGRAM</h3>&#13;
<p class="noindent">You need to check whether the radio works before you load your own sounds:</p><ol>&#13;
<li class="noindent"><strong>Tune in to the radio:</strong> Plug in your radio and turn it on. Ensure that it’s on the FM setting and tune it to 100.0 MHz. You should hear the hiss of the radio, because nothing else is being broadcast on that frequency.</li>&#13;
<li class="noindent"><strong>Run the program:</strong> Return to the terminal window and enter the following code:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo ./pifm sound.wav 100.0</span></pre>&#13;
<p class="indent">Press <span class="small">ENTER</span>; you should hear a familiar tune broadcast to your radio. If you have a portable radio, you can test the broadcast radius by walking around your home or even going outside.</p></li>&#13;
<li class="noindent"><strong>Change the frequency:</strong> You can change your frequency for broadcasting by changing the value at the end of the command. For example, to broadcast on frequency 105.0, enter this:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo ./pifm sound.wav 105.0</span></pre></li>&#13;
<li class="noindent"><strong>Broadcast in stereo:</strong> The downloaded program folder includes an audio file to test your radio’s stereo setting. You’ll need two speakers: a left and a right speaker. Enter the same command line in the terminal as before, but this time use the <em>left_right.wav</em> file, like this:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo ./pifm left_right.wav 100.0</span></pre></li>&#13;
</ol>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_119"/>The tune will play on your radio again, but this time, if your radio has two separate speakers, the output will play through both, creating a stereo sound. If you don’t hear any sound, check the following:</p>&#13;
<ul>&#13;
<li class="noindent">You’re using the correct Raspberry Pi model. (Raspberry Pi Zero, original Pi model, Raspberry Pi Model B+ V1.2 2014, or Raspberry Pi Model A+ V1.1 2014)</li>&#13;
<li class="noindent">You’ve connected the jumper wire to GPIO pin 4.</li>&#13;
<li class="noindent">The radio is tuned to the correct frequency.</li>&#13;
<li class="noindent">The frequency in the command line matches the frequency on the radio.</li>&#13;
<li class="noindent">In the terminal window, you’ve navigated to the <em>Radio</em> folder and run the program code from this folder.</li>&#13;
</ul>&#13;
<p class="indent">Sometimes, if a previous file hasn’t stopped playing before another is executed, the file won’t play or you might hear a single auditory tone from the radio. Restart your Raspberry Pi and run the program again.</p>&#13;
<h3 class="h3" id="ch07lev1sec4">STREAMING AN MP3 MUSIC FILE</h3>&#13;
<p class="noindent">So far, you’ve broadcast only WAV files, but your radio can also stream MP3 files, so you can play your regular music. A WAV file has a higher sound quality than an MP3 file. But it takes up more storage space on your device, making WAV files unsuitable for streaming and downloading music. MP3 files are still high quality but take up a lot less storage space, so you can store more on your device and stream music without buffering or lag time. Most music files use MP3 as a standard format, which means you can create a kind of portable speaker with your Pi. Give it a try by following these steps:</p>&#13;
<ol>&#13;
<li class="noindent"><strong>Download an MP3 file:</strong> Download your favorite songs and transfer them onto your Raspberry Pi (see “Transferring Files” on <a href="ch01.xhtml#page_31">page 31</a>); make sure it’s an MP3 file with an <em>.mp3</em> extension. Save this file to the <em>Radio</em> folder. Also, I recommend renaming the file to a short name to reduce the likelihood of errors when you type it in the command to play the song.</li>&#13;
<li class="noindent"><strong>Install FFmpeg:</strong> Sound isn’t digital, so the signal needs to be converted from analog into a string of zeros and ones in order to be played on a computer. The process of <em>sampling</em> captures audio so it can be converted. The higher the sample rate is, the more captures per second there are, and the higher the audio <span epub:type="pagebreak" id="page_120"/>quality will be. Most MP3 files aren’t sampled at a rate that’s compatible with the PiFM program, so you need to install the <em>FFmpeg</em> program, which adjusts the MP3 file’s sample rate in real time as it’s broadcast. In the terminal, enter this line:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo apt install ffmpeg</span></pre>&#13;
<p class="indent">This command installs the <em>FFmpeg</em> program.</p></li>&#13;
<li class="noindent"><strong>Play the MP3 file:</strong> After installing <em>FFmpeg</em>, navigate to the <em>Radio</em> folder by using this command:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">cd Radio</span></pre>&#13;
<p class="indent">Then enter the following command, replacing <span class="codestrongitalic">name_of_your_file.mp3</span> with the name of your MP3 file (now you see why I encouraged you to change the filename!):</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">ffmpeg -i</span> <span class="codestrongi">name_of_your_file.mp3</span> <span class="codestrong1">-f s16le -ar</span>&#13;
<span class="codestrong1">22.05k -ac 1 -|sudo ./pifm –</span></pre>&#13;
<p class="indent">Press <span class="small">ENTER</span> to execute the line of code. Then turn on your radio and tune it until you hear the MP3 playing. Congratulations, your song is on the radio! To stop the song, press <strong>Q</strong> to quit or press <span class="small">CTRL-</span>X.</p></li>&#13;
</ol>&#13;
<h3 class="h3" id="ch07lev1sec5">RECORDING AND BROADCASTING YOUR OWN FILE</h3>&#13;
<p class="noindent">Now you’ll create your own sound files and play them. Creating and editing audio files requires a lot of processing power, so it’s easiest to use another device, such as a laptop or a desktop computer. Most of these devices have built-in microphones that you can use, or if you prefer, you can attach a USB microphone.</p>&#13;
<h4 class="h4" id="ch07lev2sec1">Setting Up Your Microphone and Speakers</h4>&#13;
<p class="noindent">To edit audio files, you’ll need to install a free, open source audio editor called <em>Audacity</em>. If you’re using a Windows or macOS computer, navigate to the website <em><a href="https://www.audacityteam.org/">https://www.audacityteam.org/</a></em>. Click the link to download the software. Then install it on your device. If you’re using Linux, download the software using the usual terminal method.</p>&#13;
<p class="indent">Plug your microphone into one of the USB ports. First, you’ll record a sound just to test the mic and the speakers; you’ll need <span epub:type="pagebreak" id="page_121"/>to change some settings before recording the final sound to broadcast. Once you’re ready, open Audacity and click the <strong>Record</strong> button, shown in <a href="ch07.xhtml#ch07fig02">Figure 7-2</a>, to start recording.</p>&#13;
<div class="image"><img alt="Image" src="../images/07fig02.jpg"/></div>&#13;
<p class="figcap" id="ch07fig02"><strong>FIGURE 7-2</strong> Using the Audacity controls</p>&#13;
<p class="indent">Speak into your microphone. Remember that you’re only testing the program’s ability to pick up the microphone and record sound, so it doesn’t matter what you say. Once you’re finished, click the <strong>Stop</strong> button to stop recording. Click the <strong>Play</strong> button to hear your recording. Don’t forget to ensure that your speakers are turned on and the volume is turned up. If you can hear the sound, your setup is working.</p>&#13;
<h4 class="h4" id="ch07lev2sec2">Making and Playing Your Recording on the Raspberry Pi</h4>&#13;
<p class="noindent">To broadcast your new sound correctly, you’ll need to adjust the sample size before recording. The sample size is displayed at the bottom left of the program, in the <strong>Project Rate (Hz)</strong> drop-down list, as shown in <a href="ch07.xhtml#ch07fig03">Figure 7-3</a>. Click the drop-down arrow and select <strong>11025</strong> from the list.</p>&#13;
<div class="image"><img alt="Image" src="../images/07fig03.jpg"/></div>&#13;
<p class="figcap" id="ch07fig03"><strong>FIGURE 7-3</strong> Changing the Project Rate to 11025 Hz</p>&#13;
<p class="indent">Now make your recording by clicking the <strong>Record</strong> button as you did earlier.</p>&#13;
<p class="indent">Once you’re happy with your sound recording, you need to export it to the required format to use it with the PiFM program and broadcast it. From the menu, click <strong>File</strong>▸<strong>export</strong>. From the list that appears, select <strong>WAV (Microsoft)</strong>, with the option <strong>signed 16-bit PCM</strong> where applicable. The program will present you with the option to add metadata to the file. <em>Metadata</em> is information about the audio track, such as its name, its length, and the year it was made. You can skip this option by clicking <strong>OK</strong>. <a href="ch07.xhtml#ch07fig04">Figure 7-4</a> shows both drop-down menus.</p>&#13;
<div class="image"><img alt="Image" src="../images/07fig04.jpg"/></div>&#13;
<p class="figcap" id="ch07fig04"><strong>FIGURE 7-4</strong> <span epub:type="pagebreak" id="page_122"/>Exporting the audio file</p>&#13;
<p class="indent">Next, you need to transfer your sound to your Raspberry Pi and save it to the <em>Radio</em> folder. Use one of the transfer methods discussed in “Transferring Files” on <a href="ch01.xhtml#page_31">page 31</a>, or you might find it quicker to copy the file onto a USB memory stick and then insert and copy the file to your Raspberry Pi. Ensure that you save the file to the <em>Radio</em> folder.</p>&#13;
<h4 class="h4" id="ch07lev2sec3">Broadcasting the File</h4>&#13;
<p class="noindent">To play your new sound file, open the terminal and enter <span class="codestrong">cd Radio</span> to navigate to the <em>Radio</em> folder. Then list the contents of the folder by entering this line:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">ls</span></pre>&#13;
<p class="indent">You should see your newly recorded WAV file. Enter the following command replacing <span class="codestrongitalic">myfile</span> with the name of your new sound file:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo ./pifm</span> <span class="codestrongi">myfile</span><span class="codestrong1">.wav 100.0</span></pre>&#13;
<p class="indent">Turn on your radio, tune it to the frequency 100.0, and press <span class="small">ENTER</span>. Your recording should play!</p>&#13;
<p class="indent">Sometimes you might hear a single audio tone instead of your recording. This occurs if the previous broadcast has been interrupted before it completes. Simply restart your Raspberry Pi and run the command again.</p>&#13;
<h3 class="h3" id="ch07lev1sec6"><span epub:type="pagebreak" id="page_123"/>CODING THE SOUNDBOARD</h3>&#13;
<p class="noindent">Now that you know how to record audio files and broadcast them through the radio, you’ll create a simple <em>graphical user interface</em> (<em>GUI</em>) soundboard to trigger and control broadcasts. A GUI gives a program a user-friendly appearance to make it easier to use. GUIs are a staple of most computing devices, TVs, phones, and game consoles, because a GUI uses windows, icons, menus, and pointers to help users control the device. You’ll create a GUI with buttons to trigger sounds to avoid having to enter code into a terminal.</p>&#13;
<p class="indent">This project uses <code>guizero</code>, a Python library that makes it very simple to create GUIs. If you want to read more about <code>guizero</code> or add more features, check out this website: <em><a href="https://lawsie.github.io/guizero/">https://lawsie.github.io/guizero/</a></em>. With the GUI, you’ll assign each of your homemade MP3 sound files to its own button, as shown in <a href="ch07.xhtml#ch07fig05">Figure 7-5</a>. When you click a button, the corresponding message broadcasts to any radios tuned to the same frequency.</p>&#13;
<div class="image"><img alt="Image" src="../images/07fig05.jpg"/></div>&#13;
<p class="figcap" id="ch07fig05"><strong>FIGURE 7-5</strong> The final soundboard GUI</p>&#13;
<h4 class="h4" id="ch07lev2sec4">Creating the GUI Functions</h4>&#13;
<p class="noindent">Download and install the <code>guizero</code> Python library by opening the terminal and entering the following command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo pip3 install guizero</span></pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_124"/>As the <code>guizero</code> library is further developed, its creators will add more features and functionality. You can upgrade your version to the current one by using this command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo pip3 install guizero --upgrade</span></pre>&#13;
<p class="indent">Before you begin creating your soundboard, you’ll need to record and create at least three personal sound files containing the phrases you want to broadcast. To record the sound files, use the instructions in “Recording and Broadcasting Your Own File” on <a href="ch07.xhtml#page_120">page 120</a>. If you don’t want to record your own files, you can download sample files from the book’s resources at <em><a href="https://www.nostarch.com/raspiforkids/">https://www.nostarch.com/raspiforkids/</a></em>. The resources also have an image you can use for the GUI window. You must save all the sound files, the code, and the image for your soundboard in the <em>Radio</em> folder you created at the beginning of the chapter.</p>&#13;
<p class="indent">You’ll create the program for building the soundboard in IDLE. Open the Python IDLE editor, and then open a new script by clicking <strong>File</strong>▸<strong>New File</strong>. Save your new Python file to the <em>Radio</em> folder as <em>radio_gui.py</em> and enter the code in <a href="ch07.xhtml#ch07ex01">Listing 7-1</a>.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">import</span> os&#13;
   <span class="codeorg">import</span> time &#13;
   <span class="codeorg">from</span> guizero <span class="codeorg">import</span> App, Text, PushButton, info, Picture&#13;
&#13;
<span class="ent">❷</span> <span class="codeorg">def</span> <span class="codeblue1">message1</span>():&#13;
     <span class="codepurple">print</span> (<span class="codegreen1">"Hello"</span>)&#13;
     os.system(<span class="codegreen1">"sudo ./pifm hello.wav 100.0"</span>)&#13;
     time.sleep(1)&#13;
&#13;
<span class="ent">❸</span> <span class="codeorg">def</span> <span class="codeblue1">message2</span>():&#13;
     <span class="codepurple">print</span> (<span class="codegreen1">"Bring me food"</span>)&#13;
   os.system(<span class="codegreen1">"sudo ./pifm bringmefood.wav 100.0"</span>)&#13;
   time.sleep(1)&#13;
&#13;
<span class="ent">❹</span> <span class="codeorg">def</span> <span class="codeblue1">message3</span>():&#13;
   <span class="codepurple">print</span> (<span class="codegreen1">"Let's take a selfie"</span>)&#13;
     os.system(<span class="codegreen1">"sudo ./pifm selfie.wav 100.0"</span>)&#13;
     time.sleep(1)&#13;
&#13;
<span class="ent">❺</span> <span class="codeorg">def</span> <span class="codeblue1">close_message</span>():&#13;
     info(<span class="codegreen1">"Goodbye", "See you soon"</span>)&#13;
     app.destroy()</pre>&#13;
<p class="caption"><a id="ch07ex01"/><strong>LISTING 7-1</strong> Building a soundboard</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_125"/>The program begins by importing the operating system module <code>os</code> <span class="ent">❶</span>. This module allows you to run terminal commands within Python code and programs. As a result, you can assign a terminal command to each button to avoid having to type out the commands each time you want to play a sound.</p>&#13;
<p class="indent">Next, you import the <code>time</code> module and the <code>guizero</code> library, and then you import the <code>App</code>, <code>Text</code>, <code>PushButton</code>, <code>info</code>, and <code>Picture</code> widgets. I won’t discuss each of these, but together they allow you to control the GUI application, create push buttons to trigger the sounds, display informational pop-up windows, and add an image to the soundboard.</p>&#13;
<p class="indent">Then you create four separate functions; each holds the instructions to trigger one of the sound files and broadcast it to the radio.</p>&#13;
<p class="indent">The first function is <code>message1()</code> <span class="ent">❷</span>, which plays the audio file that matches the name of the WAV file it contains. It also prints <code>Hello</code> to the screen to let you know the file has been triggered.</p>&#13;
<p class="indent">You’ll recognize the code line including <code>sudo ./pifm</code> from earlier in the chapter. Notice that this time it begins with <code>os.system()</code>, which tells Python to run the line of code as if it were written and executed from the terminal, not from the Python editor. The code <code>os.system()</code> is required because you’re using Python code to write the GUI program, and PiFM uses Linux commands. The <code>os.system()</code> function enables you to trigger Linux commands from within a Python program. Replace <em>hello.wav</em> in the code with the name of your first sound file, and adjust the broadcast frequency if necessary. Then add the second <span class="ent">❸</span> and third <span class="ent">❹</span> functions for your other audio messages, remembering to change the filenames to match the names of your audio WAV files.</p>&#13;
<p class="indent">The fourth function closes the GUI window <span class="ent">❺</span>. This function prints a short goodbye message and then destroys the app! This is less drastic than it sounds: the function <code>app.destroy()</code> simply closes the GUI.</p>&#13;
<h4 class="h4" id="ch07lev2sec5">Creating the Window and Buttons</h4>&#13;
<p class="noindent">Now you’re ready to add the code section that creates the actual GUI window and buttons. Add the lines in <a href="ch07.xhtml#ch07ex02">Listing 7-2</a> to your <em>radio_gui.py</em> Python program.</p>&#13;
<pre><span epub:type="pagebreak" id="page_126"/>   <span class="codered"># sets the size of the app window</span>&#13;
<span class="ent">❶</span> app = App(title = <span class="codegreen1">"My Radio"</span>, width=270, height=350, layout=<span class="codegreen1">"grid"</span>)&#13;
&#13;
   <span class="codered"># adds the title</span>&#13;
<span class="ent">❷</span> Title = Text(app, text=<span class="codegreen1">"CLICK A MESSAGE TO BROADCAST"</span>, size=11,&#13;
   font=<span class="codegreen1">"consolas"</span>, grid=[0,0], align=<span class="codegreen1">'top'</span>)&#13;
&#13;
   <span class="codered"># adds the image</span>&#13;
<span class="ent">❸</span> radio = Picture(app, image=<span class="codegreen1">"sound.gif"</span>, grid=[2,0], align=<span class="codegreen1">'top'</span>)</pre>&#13;
<p class="caption"><a id="ch07ex02"/><strong>LISTING 7-2</strong> Building the GUI appearance</p>&#13;
<p class="indent">The first line of code sets up the GUI window’s title and the window’s width and height in pixels <span class="ent">❶</span>. You also set the window’s layout to a grid layout, which means you can use coordinates to plot and place the buttons within the window.</p>&#13;
<p class="indent">Next, you add a title to the window to tell the user what the GUI does <span class="ent">❷</span>. You set the size of the font and the font type: you can change these to personalize your GUI, but keep in mind that you might need to alter the width and height of your GUI window to fit bigger fonts.</p>&#13;
<p class="indent">You set the title to grid positions 0 and 0, which is the top line of the grid, and then you align it to the center of the window, making it look neat and tidy.</p>&#13;
<p class="indent">Then you add the image from the book’s resources to the window <span class="ent">❸</span>. The image must be in <em>.gif</em> format and be in the <em>Radio</em> folder. Again, you set the image’s grid position, this time on the second line, and align it to the top, which places it in the center of the GUI window.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>If you use a different image, you’ll need to adjust the window dimensions on the line at</em> <span class="ent">❶</span> <em>to ensure that the image fits.</em></p>&#13;
</div>&#13;
<p class="indent">With the functions and GUI built, you can add the last section of the program that creates the buttons and assigns each function to a button. When you run the program, clicking a button will trigger the function to execute and then broadcast the audio message. Add the code in <a href="ch07.xhtml#ch07ex03">Listing 7-3</a> to your program.</p>&#13;
<pre>   <span class="codered"># sound1</span>&#13;
<span class="ent">❶</span> button1 = PushButton(app, command = message1, text=<span class="codegreen1">"Hello"</span>,&#13;
   grid=[3,0], align=<span class="codegreen1">'top'</span>)&#13;
&#13;
   <span class="codered"># sound2</span>&#13;
<span class="ent">❷</span> button2 = PushButton(app, command = message2, text=<span class="codegreen1">"Bring me food"</span>,&#13;
   grid=[4,0], align=<span class="codegreen1">'top'</span>)&#13;
<span epub:type="pagebreak" id="page_127"/>   <span class="codered"># sound3</span>&#13;
<span class="ent">❸</span> button3 = PushButton(app, command = message3, text=<span class="codegreen1">"Let's take a</span>&#13;
   <span class="codegreen1">selfie"</span>, grid=[5,0], align=<span class="codegreen1">'top'</span>)&#13;
&#13;
   <span class="codered"># quit the program</span>&#13;
<span class="ent">❹</span> quit_button = PushButton(app, command = close_message, text=<span class="codegreen1">"QUIT</span>&#13;
   <span class="codegreen1">PROGRAM"</span>, grid=[6,0], align=<span class="codegreen1">'top'</span>)&#13;
&#13;
<span class="ent">❺</span> app.display()</pre>&#13;
<p class="caption"><a id="ch07ex03"/><strong>LISTING 7-3</strong> Creating the buttons and allocating functionality</p>&#13;
<p class="indent">You create a button with the <code>PushButton()</code> function <span class="ent">❶</span>. For each button, you need to include the <code>guizero</code> class <code>PushButton</code>, which selects the function that will run when you click that button. Next, you add a label to the button by using text that tells the user what the button does. On the first button, the label <code>Hello</code> indicates that the button will broadcast the “Hello” sound. Then you set the button’s grid position within the GUI window. This button is located on line 3 of the grid and aligned to the top, which places it in the center of the window.</p>&#13;
<p class="indent">You use the same format to code the other three buttons <span class="ent">❷</span> <span class="ent">❸</span> <span class="ent">❹</span>. Remember that if you’ve used a different image or different text lengths or sizes, you’ll need to change the grid coordinates and alignment to fit the content to your GUI window.</p>&#13;
<p class="indent">The last line is the code to create the GUI <span class="ent">❺</span>. This code pulls together all the elements you created and displays them. After entering the code, save your program, ensuring that you save it to the <em>Radio</em> folder.</p>&#13;
<h3 class="h3" id="ch07lev1sec7">RUNNING YOUR PROGRAM</h3>&#13;
<p class="noindent">To run your program, follow these steps:</p>&#13;
<ol>&#13;
<li class="noindent">Turn on your radio and tune it to the broadcast frequency, which in this program is 100.0 MHz.</li>&#13;
<li class="noindent">Press <strong>F5</strong> on the keyboard to run the program. Your GUI should load, and you should see the main image and four buttons.</li>&#13;
<li class="noindent">Click one of the buttons to broadcast a sound file. The button will stay depressed while the sound file plays, preventing you from <em>spamming</em> the button (pressing the button over and over again) and blocking a broadcast.</li>&#13;
</ol>&#13;
<h3 class="h3" id="ch07lev1sec8"><span epub:type="pagebreak" id="page_128"/>WRAPPING UP</h3>&#13;
<p class="noindent">You can improve this project to make it do more. Try some of these enhancements for starters:</p>&#13;
<ul>&#13;
<li class="noindent">Add more buttons.</li>&#13;
<li class="noindent">Create a simple music machine that lets you select a song that is then broadcast to the radio.</li>&#13;
<li class="noindent">Create a Halloween scare machine by recording and sharing spooky messages or scary sounds with listeners.</li>&#13;
</ul>&#13;
</body></html>