<html><head></head><body>
<div class="image1"><img alt="image" src="../images/f085-01.jpg"/></div>&#13;
<h2 class="h2" id="ch04"><span epub:type="pagebreak" id="page_61"/><strong><span class="big">4</span><br/>Pebble Economy: Using Variables to Count Items</strong></h2>&#13;
<p class="noindent">In the previous chapter, you used some basic Twine techniques to add text effects, display a random selection from a list of book titles, and link to a menu of passage links. You learned about Boolean variables that have two different values, which you used with conditionals to make decisions in your game. You also learned how to use integer variables to assign different events to specific conditions. In this chapter, you’ll build on what you learned to create more complicated scripts and discover what variables are really capable of!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_62"/>This chapter is a short one. If it seems like a little too much to wrap your head around, don’t be afraid to skip it. Maybe you’ll come back to it when you have more experience scripting in Twine and want to try some more advanced stuff!</p>&#13;
<h3 class="h3" id="lev50">Counting Fairy Pebbles</h3>&#13;
<p class="noindent">Similar to regular numbers, you can use <em>integer</em> variables to add, subtract, and check how low or high their value is. You might also use an integer variable to count the number of cats the player has petted or to remember how many sandwiches the player has made for their picnic. Let’s explore how to keep track of the number of pebbles the player is carrying around using a game called <em>The Pebble Economy</em>.</p>&#13;
<div class="image"><img alt="image" src="../images/f086-01.jpg"/></div>&#13;
<p class="indent"><em>The Pebble Economy</em> contains an example of how you might use integer variable numbers in Twine. In this short game, the player has to find enough pebbles to pay a fairy toll: it costs five pebbles to enter the Fairy Kingdom. Check out the game at <em><a href="https://nostarch.com/twinegames/">https://nostarch.com/twinegames/</a></em>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_63"/><img alt="image" src="../images/f087-01.jpg"/></div>&#13;
<p class="indent">We’ll use the variable <span class="literal">$pebbles</span> to track the number of pebbles the player has found.</p>&#13;
<p class="indent">Each time the player searches for pebbles at the old creek, they find one, two, three, or zero pebbles (they find a weird frog instead), which are added to their total. We use <span class="literal">display</span> and <span class="literal">either</span> to randomly choose the passage the player sees, which determines the number of pebbles they find. As you learned in <a href="ch03.xhtml">Chapter 3</a>, you can use <span class="literal">either</span> to choose a random passage and <span class="literal">display</span> to make the contents of that passage appear. Each passage gives the player a different number of pebbles.</p>&#13;
<p class="indent">For example, we can use the following line to add two new pebbles the player has found in a passage to their total number of pebbles:</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$pebbles</span> to <span class="programblue">$pebbles</span> + <span class="codeorange">2</span><span class="codestrong1">)</span></span></p>&#13;
<p class="indent">This line tells Twine to set <span class="literal">$pebbles</span> to the current value of <span class="literal">$pebbles</span> plus 2. So if the value of <span class="literal">$pebbles</span> was 2, this line’s value would increase to 4.</p>&#13;
<p class="indent">To display the value of a variable, just enter its name in a sentence to show the player how many pebbles they have:</p>&#13;
<p class="programs">You have <span class="programblue">$pebbles</span> pebbles.</p>&#13;
<p class="indent">This line displays the total number using the value stored in the <span class="literal">$pebbles</span> variable. The player should see “You have 4 pebbles,” “You <span epub:type="pagebreak" id="page_64"/>have 10 pebbles,” or “You have 500 pebbles,” depending on how many pebbles the player has found up to that point.</p>&#13;
<h4 class="h4" id="lev51">Using elseif to Check Integer Values</h4>&#13;
<p class="noindent">It makes sense to use <span class="literal">if</span> and <span class="literal">else</span> for Booleans because they’re either true or false, on or off. If they’re not one value, they must be the other. But integers can have more than two possibilities. For example, you might have enough pebbles to pay the toll. You might have no pebbles at all! Or you might have <em>some</em> pebbles but not enough! That’s three different conditions to check for, which means that using <span class="literal">if</span> and <span class="literal">else</span> alone isn’t going to cut it!</p>&#13;
<p class="indent">Fortunately, we can use <span class="literal">elseif</span> to keep track of a third value:</p>&#13;
<p class="programs"><span class="codeitalic1"><span class="programblue">{</span></span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$pebbles</span> &gt;= <span class="codeorange">5</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You have enough pebbles!<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">elseif:</span> <span class="programblue">$pebbles</span> is <span class="codeorange">0</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You don't have ANY pebbles!<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">else:</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You only have <span class="programblue">$pebbles</span> pebbles!<span class="codestrong1">]</span><br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">The <span class="literal">elseif</span> statement works like a regular <span class="literal">if</span> statement with an additional condition! In this example, Twine first checks whether <span class="literal">$pebbles</span> is greater than or equal to 5 using the hook <span class="literal">(if: $pebbles &gt;= 5)</span>.</p>&#13;
<p class="indent">If <span class="literal">$pebbles</span> is greater than or equal to 5, Twine displays “You have enough pebbles!” and that’s that. But if it isn’t, Twine tries the <span class="literal">elseif</span> hook <span class="literal">(elseif: $pebbles is 0)</span> to check if <span class="literal">$pebbles</span> is equal to 0. If it is, Twine displays “You don’t have ANY pebbles!” to let the player know they need more pebbles.</p>&#13;
<p class="indent">If neither condition is true, then Twine moves on to the <span class="literal">else</span> statement. The <span class="literal">else</span> part covers every possible case other than those covered by the <span class="literal">if</span> and <span class="literal">elseif</span>, which is when the player has 1, 2, 3, and 4 pebbles. We tell Twine to display <span class="literal">[You only have $pebbles pebbles!]</span>, where <span class="literal">$pebbles</span> represents the number of pebbles the player has.</p>&#13;
<h4 class="h4" id="lev52">The Order of Things Is Important!</h4>&#13;
<p class="noindent">Keep in mind that the order in which you write your code is important. When Twine decides what code to execute, and in what order to do it, it reads from top to bottom, the same way you read a page in this book. <span epub:type="pagebreak" id="page_65"/>When you write code for your games, make sure it’s written in the order that will make the most sense in Twine. For example, we write the <span class="literal">else</span> statement at the very end because we want Twine to do this only after checking the first two conditions.</p>&#13;
<p class="indent">But what if you want an additional condition? You might want to add an encouraging message if the player is <em>really</em> close to having enough pebbles for the toll. We can update the existing code with another <span class="literal">elseif</span> statement like this:</p>&#13;
<p class="programs"><span class="codeitalic1"><span class="programblue">{</span></span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$pebbles</span> &gt;= <span class="codeorange">5</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You have enough pebbles!<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">elseif:</span> <span class="programblue">$pebbles</span> &gt;= <span class="codeorange">3</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You have <span class="programblue">$pebbles</span> pebbles! Almost<br/>there!<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">elseif:</span> <span class="programblue">$pebbles</span> is <span class="codeorange">0</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You don't have ANY pebbles!<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">else:</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>You only have <span class="programblue">$pebbles</span> pebbles!<span class="codestrong1">]</span><br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">Now there’s a different message for the player when they have 3 or more pebbles. Notice that we put the <span class="literal">elseif</span> statement second from the top. That’s because if we put this <span class="literal">elseif</span> statement before the <span class="literal">if</span> statement, a player would see the “Almost there!” message even when they had 6 pebbles because 6 is <em>also</em> greater than or equal to 3. But that doesn’t make sense, because the player already has enough pebbles to pay the toll! Only if the player <em>doesn’t</em> have at least 5 pebbles do we want Twine to check whether they have 3 or more.</p>&#13;
<p class="indent">Twine always starts by checking the <span class="literal">if</span> case. Then it checks each of the <span class="literal">elseif</span> statements in order from top to bottom. You can write as many <span class="literal">elseif</span> statements as you want. As soon as Twine finds a condition that is true, Twine stops there and does what you told it to do in that case. If none of the <span class="literal">elseif</span> statements are true, <em>only then</em> does it check for the <span class="literal">else</span>. The <span class="literal">else</span> statement is Twine’s last resort.</p>&#13;
<p class="indent">Whenever code you’ve written doesn’t work the way you expected, read through your code from top to bottom to check that your conditions are in the right order. Perhaps Twine stopped before it got to the case you expected because an earlier condition was also true. Sometimes, simply rearranging the order in which Twine looks for conditions can solve a problem.</p>&#13;
<h4 class="h4" id="lev53"><span epub:type="pagebreak" id="page_66"/>String Variables</h4>&#13;
<p class="noindent"><em>Strings</em> are a type of variable that contains text: a word, phrase, or sentence. Your Twine games are mostly text already, but sometimes you’ll need to keep track of a <em>particular</em> piece of text. For example, you can use string variables to keep track of whether the player put on a “red baseball cap” or a “plastic tiara” before leaving the house this morning.</p>&#13;
<div class="image"><img alt="image" src="../images/f090-01.jpg"/></div><p class="indent">To see a string variable in action, enter the following:</p>&#13;
<p class="programs"><span class="codeitalic1"><span class="programblue">{</span></span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$hat</span> to "plastic baseball tiara"<span class="codestrong1">)</span></span><br/>The wind is so strong that your <span class="programblue">$hat</span> is blown right off your<br/>head!<br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">Try hitting play! Twine should print “The wind is so strong that your plastic baseball tiara is blown right off your head!” Try changing the description of the hat. The game should change to match what you typed!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_67"/>The important thing is that you make sure there are quotes (<span class="literal">"</span>) on either side of the string. That’s how Twine knows where the string starts and stops. If it’s inside the quotes, it’s a string. If it’s outside, it’s code.</p>&#13;
<p class="indent">Can you think of how this technique might be useful in a story? Maybe the game starts in the player’s bedroom, where a few of their favorite hats are hanging. Whatever hat they choose, you can set $hat to match the description of the hat. That way when the story mentions the player’s hat, it can mention the specific one that they chose!</p>&#13;
<p class="indent">You could ask them to pick their favorite color. You could ask whether they’d like a pet cat or a pet dog. There’s a piece of code that will let the player type something in—you can ask them to name their pet, then refer to the pet by the name they chose! Read through the Twine wiki and see if you can figure out how.</p>&#13;
<div class="boxbgpink">&#13;
<p class="boxhead">A Note on Story Formats</p>&#13;
<p class="boxnoindent">In this book, I use Twine 2’s default story format, which is Harlowe. Twine 2 has two other story formats: Snowman and SugarCube. To change your game’s story format, click its name, and then choose Change Story Format. But keep in mind that all the hooks you’ve learned so far are specific to Harlowe. Other story formats can do the same things, but the code you’ll need to write will be a little different.</p>&#13;
<p class="boxindent">You’ll find plenty of information about story formats at <a href="http://twine2.neocities.org"><em>http://twine2.neocities.org</em></a>/ and on Twine’s Help page.</p>&#13;
</div>&#13;
<div class="image"><img alt="image" src="../images/f091-01.jpg"/></div>&#13;
<h3 class="h3" id="lev54"><span epub:type="pagebreak" id="page_68"/>What You Learned</h3>&#13;
<p class="noindent">In this rather short chapter, you learned more about how variables work and how you can change what’s stored inside them. In particular, you learned that integer variables contain numbers and that string variables contain words or phrases.</p>&#13;
<p class="indent">In the next and final chapter, I’ll show you more Twine games that you can play (created by people other than me!) as well as provide you with some challenges to try in your own game design practice.</p>&#13;
<div class="image"><img alt="image" src="../images/f092-01.jpg"/></div>&#13;
</body></html>