<html><head></head><body>
<h2 class="h2" id="ch03"><span epub:type="pagebreak" id="page_49"/>3<br/>HOT GLUE NIGHT-LIGHT</h2>&#13;
<p class="noindent"><span class="big1">IN THIS PROJECT, YOU’LL CREATE A TINY, CUSTOMIZED LIGHT BY USING A HOT GLUE GUN, A SILICONE ICE CUBE OR BAKING MOLD, AND AN LED. THEN YOU’LL WRITE A PROGRAM TO MAKE THE LIGHT FLASH ON AND OFF OR FADE IN AND OUT. YOU’LL TAKE THIS PROJECT FURTHER BY ADDING A LIGHT SENSOR TO MAKE A NIGHT-LIGHT THAT TURNS ON AUTOMATICALLY IN THE DARK AND TURNS OFF AS THE SUN COMES UP.</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_50"/>Hot glue is a type of plastic adhesive that’s runny when hot, so it’s ideal for filling up any shape and drying quickly into that shape. Silicone molds are heat resistant, which prevents the glue from sticking to the mold, making it easy to pop out the glue when it’s set. <a href="ch03.xhtml#ch03fig01">Figure 3-1</a> shows a completed light.</p>&#13;
<div class="image"><img alt="Image" src="../images/03fig01.jpg"/></div>&#13;
<p class="figcap" id="ch03fig01"><strong>FIGURE 3-1</strong> R2-D2 glue gun light</p>&#13;
<h3 class="h3" id="ch03lev1sec1">WHAT YOU’LL NEED</h3>&#13;
<p class="noindent">Here are the items you’ll need for this project:</p>&#13;
<ul>&#13;
<li class="noindent">Raspberry Pi</li>&#13;
<li class="noindent">Glue gun</li>&#13;
<li class="noindent">Glue sticks</li>&#13;
<li class="noindent">Silicone mold</li>&#13;
<li class="noindent">LEDs</li>&#13;
<li class="noindent">Female-to-female wires</li>&#13;
<li class="noindent">Breadboard</li>&#13;
<li class="noindent">Photoresistor (LDR)</li>&#13;
<li class="noindent">Resistor (between 220 and 330 ohms)</li>&#13;
<li class="noindent">0.1 uF capacitor</li>&#13;
</ul>&#13;
<p class="indent">Choose any shape of mold that suits your fancy! Recently, I made a green R2-D2 LED and a red Death Star. I also located some Avengers molds, so I created a green Hulk fist that pulses, a blue Captain America shield, and a red Iron Man face.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_51"/>Just make sure the mold is silicone so it’s heat resistant. In addition, you should know that photoresistors are also called <em>light-dependent resistors</em> <em>(LDRs)</em> or <em>photocells</em>.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong>WARNING</strong></p>&#13;
<p class="notep"><em>The glue gun will get very hot. Never touch the end of the gun or the glue until it has cooled down. Also, be wary of dripping glue: don’t get it on your shoes, clothes, or the floor. Consider putting newspaper down on your build surface first to protect it.</em></p>&#13;
</div>&#13;
<h3 class="h3" id="ch03lev1sec2">BUILDING THE CUSTOM NIGHT-LIGHT</h3>&#13;
<p class="noindent">The custom night-light build has two stages. First, you’ll physically make the light. Second, you’ll code a program to give the light its instructions. Let’s get started.</p>&#13;
<p class="indent">Follow these steps to construct the light:</p>&#13;
<ol>&#13;
<li class="noindent"><strong>Prepare the glue gun:</strong> Slide a glue stick into the glue gun, plug it in, and let it heat up for a few minutes. A small amount of glue will usually drip from the end when it’s ready to use.</li>&#13;
<li class="noindent"><strong>Prepare the mold:</strong> Place your silicone mold onto a stable surface. You might want to place some paper or a dust cover underneath the mold to protect the surface. Ensure that the mold is dust free and dry.</li>&#13;
<li class="noindent"><strong>Prepare the LED:</strong> Pick up the LED and look at the two wires, also called <em>legs</em>. Notice that one is slightly longer than the other, as shown in <a href="ch03.xhtml#ch03fig02">Figure 3-2</a>. The longer leg is the positive leg; the shorter leg is negative. This detail is important to remember when you’re attaching the LED to the molded figure. If you wire the legs the wrong way, the circuit won’t close and current won’t flow through the LED, meaning the LED won’t light up.</li>&#13;
</ol>&#13;
<div class="image"><img alt="Image" src="../images/03fig02.jpg"/></div>&#13;
<p class="figcap" id="ch03fig02"><strong>FIGURE 3-2</strong> LED legs</p>&#13;
<p class="indent">Because you need to access the legs when the glue is set, check where you want the LED to sit in the mold before you add the hot glue. Do you want the legs to stick straight out, or maybe bend downward or outward? Your placement of the LED will depend on your mold’s shape. You want your LED, including the legs, approximately halfway into the mold. Too far in, and the <span epub:type="pagebreak" id="page_52"/>LED will stick out; not in far enough, and it won’t remain securely in the glue. Roughly estimate where to place the LED.</p>&#13;
<ol start="4">&#13;
<li class="noindent"><strong>Add the resistor:</strong> Wrap one end of the resistor around the LED’s longer positive leg. The resistor prevents the LED from overheating and burning out.</li>&#13;
<li class="noindent"><strong>Add glue to the mold:</strong> When you know where you want to place your LED, take it out of the mold. Then, using the preheated glue gun, begin to slowly squeeze the glue into the mold. When the mold is about 80 percent full, gently push the LED into the glue, holding it by the legs. Once the glue has settled, you might need to add a little more glue until the mold is full. Hold on to the LED, but don’t get hot glue on your fingers. <a href="ch03.xhtml#ch03fig03">Figure 3-3</a> shows a good position for the LED.</li>&#13;
</ol>&#13;
<div class="image"><img alt="Image" src="../images/03fig03.jpg"/></div>&#13;
<p class="figcap" id="ch03fig03"><strong>FIGURE 3-3</strong> Filling the mold with hot glue</p>&#13;
<ol start="6">&#13;
<li class="noindent"><strong>Position and hold the LED:</strong> When the mold is full, put the glue gun down. Continue to hold the LED so it’s positioned exactly where you want it while the glue dries.&#13;
<p class="indent">After a few minutes, the glue will begin to turn a whitish color. At this point, you can let go of the LED and let the glue set for about 15 minutes. Then gently touch the glue. If it’s no longer sticky, carefully peel the mold away from the glue. If the glue figure doesn’t come out easily, you might need to leave it alone for a few more minutes so it can completely set.</p></li>&#13;
<li class="noindent"><span epub:type="pagebreak" id="page_53"/><strong>Wire up the LED:</strong> When the glue has totally set and cooled down, take two female-to-female jumper wires and attach one to each of the LED’s legs. The positive leg has the resistor wrapped around it, so attach the wire to the end of the resistor. Attach the wire from the positive, <em>longer</em> leg to GPIO pin 18, which is physical pin number 12 on the Pi. Connect the <em>shorter</em>, negative leg to any one of the ground pins on the Pi: you can choose from physical number 9, 14, 20, 30, 34, or 39. <a href="ch03.xhtml#ch03fig04">Figure 3-4</a> shows the wiring for hooking up the LED, the positive leg is the straight leg.</li>&#13;
</ol>&#13;
<div class="image"><img alt="Image" src="../images/03fig04.jpg"/></div>&#13;
<p class="figcap" id="ch03fig04"><strong>FIGURE 3-4</strong> Wiring diagram for the LED</p>&#13;
<h4 class="h4" id="ch03lev2sec1">Coding the Night-Light</h4>&#13;
<p class="noindent">Now it’s time to add the software. Here are the steps:</p>&#13;
<ol>&#13;
<li class="noindent">Plug in and boot up your Raspberry Pi.</li>&#13;
<li class="noindent">Load Python either by opening the terminal and entering <span class="codestrong">sudo idle3</span> or by clicking the Pi icon and selecting <strong>Start</strong> ▶ <strong>Programming</strong> ▶ <strong>Python 3</strong>.</li>&#13;
<li class="noindent">From the IDLE window, select <strong>File</strong> ▶ <strong>New File</strong>, as shown in <a href="ch03.xhtml#ch03fig05">Figure 3-5</a>.</li>&#13;
</ol>&#13;
<div class="image"><span epub:type="pagebreak" id="page_54"/><img alt="Image" src="../images/03fig05.jpg"/></div>&#13;
<p class="figcap" id="ch03fig05"><strong>FIGURE 3-5</strong> Opening a new file in IDLE</p>&#13;
<ol start="4">&#13;
<li class="noindent">Enter the simple code in <a href="ch03.xhtml#ch03ex01">Listing 3-1</a> to make the LED flash on and off.&#13;
<pre>   <span class="codeorg">from</span> gpiozero <span class="codeorg">import</span> LED&#13;
   <span class="codeorg">from</span> time <span class="codeorg">import</span> sleep&#13;
<span class="ent">❶</span> led = LED(18)&#13;
<span class="ent">❷</span> <span class="codeorg">while</span> <span class="codeorg">True</span>:&#13;
    <span class="ent">❸</span> led.on()&#13;
    <span class="ent">❹</span> sleep(1)&#13;
       led.off()&#13;
       sleep(1)</pre>&#13;
<p class="caption" id="ch03ex01"><strong>LISTING 3-1</strong> Flashing the LED</p></li>&#13;
</ol>&#13;
<p class="indent">Let’s look at how this code works. First, you import the LED class from the <span class="literal">gpiozero</span> library, which contains commands to help you control the LED. You also import the <span class="literal">sleep()</span> function. A <em>function</em> consists of code that performs a particular task but is represented by a single word (or two) that acts as the function name. When you call that function name in your code, Python runs the instructions in the function, sparing you from having to enter all those lines again. You can name the function whatever you desire, although it’s best to use a word that describes what the function does. For example, in the previous chapter, when we used the code <span class="literal">print ("hello")</span>, the word <span class="literal">print</span> is a function. The IDLE editor colors all function names light purple, making them easy to identify. The <span class="literal">print()</span> function contains several code lines that display in the IDLE window the text inside the parentheses. You’ll use the <span class="literal">print()</span> function a lot in many of the chapters.</p>&#13;
<p class="indent">The <span class="literal">sleep()</span> function adds a delay between instructions. This means you can flash the LED on and off at different speeds. If you use a lower delay value, the LED flashes faster. Then you tell the Pi which pin the LED is connected to, which is pin 18 <span class="ent">❶</span>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_55"/>You create a <em>loop</em> that repeats the instructions indented below it forever unless you stop the program <span class="ent">❷</span>. Finally, you add the instructions to the loop: turn the LED on <span class="ent">❸</span>, wait for 1 second <span class="ent">❹</span>, turn the LED off, and wait for 1 second. The LED will flash forever.</p>&#13;
<h4 class="h4" id="ch03lev2sec2">Running Your Program</h4>&#13;
<p class="noindent">To run the program and make the LED flash, press <strong>F5</strong> on your keyboard. You should be prompted to save the file. Name and save your program: your LED mold should then come to life! To end the program, close the Python window by clicking the <strong>X</strong>.</p>&#13;
<h4 class="h4" id="ch03lev2sec3">Modify: Fading the LED</h4>&#13;
<p class="noindent">You can modify your program so the LED fades in and out, also known as <em>pulsing</em>, instead of flashing on and off. Open a new Python file and add the code in <a href="ch03.xhtml#ch03ex02">Listing 3-2</a>. This program gradually makes the LED brighter, and then it fades out.</p>&#13;
<pre><span class="codeorg">from</span> gpiozero <span class="codeorg">import</span> PWMLED&#13;
<span class="codeorg">from</span> signal <span class="codeorg">import</span> pause&#13;
led = PWMLED(18)&#13;
led.pulse()&#13;
pause()</pre>&#13;
<p class="caption" id="ch03ex02"><strong>LISTING 3-2</strong> Fading the LED</p>&#13;
<p class="indent">Here you import the <span class="literal">PWMLED</span> class to enable you to pulse the LED, set the GPIO pin number you’re using for the LED, and then set the pulse. You also add a pause, which ensures that the program continuously runs and reduces the load on the CPU, making it run faster. Normally, the program runs once and then the GPIO pins are reset. The <span class="literal">pause()</span> instruction ensures that the signal to the GPIO program is not stopped: the program continues to run so the LED flashes until you exit the program.</p>&#13;
<p class="indent">Save this code and run it to see the difference!</p>&#13;
<h3 class="h3" id="ch03lev1sec3">BUILDING THE LED NIGHT-LIGHT</h3>&#13;
<p class="noindent">Let’s level up the night-light project. You’ll add a photoresistor to make a simple night-light to add atmosphere to your room, as shown in <a href="ch03.xhtml#ch03fig06">Figure 3-6</a>. A <em>photoresistor</em> is a sensor that measures the amount of light in the room and returns a value. This value can trigger the light to turn on or off, depending on how dark it is.</p>&#13;
<p class="indent">Light readings are <em>analog</em>, which means they can be any value, not just on or off. Think of the sun rising or setting: it doesn’t just appear in the morning; instead, the light gradually increases. <span epub:type="pagebreak" id="page_56"/>Computers, on the other hand, are <em>digital</em>, meaning they understand only on or off values. Computers use millions of tiny switches that can be turned on or off (like a light switch).</p>&#13;
<p class="indent">However, if you have a dimmer switch, you can adjust the light to different levels of brightness. You’ll use a similar technique here.</p>&#13;
<p class="indent">When light hits the photoresistor, it creates a small electrical charge. You’ll store this charge in a <em>capacitor</em>, which is a small device designed to store electrical charge. You can then use the amount of charge stored in the capacitor to indicate how much light was detected.</p>&#13;
<p class="indent">If the capacitor is fully charged, the reading will be a value of 1, meaning the room is fully lit and you don’t need the night-light on. A reading of 0.4 means that the room is lit about 40 percent and that it’s dark enough for your Pi to turn on the light.</p>&#13;
<div class="image"><img alt="Image" src="../images/03fig06.jpg"/></div>&#13;
<p class="figcap" id="ch03fig06"><strong>FIGURE 3-6</strong> An Ironman night-light</p>&#13;
<h4 class="h4" id="ch03lev2sec4">Wiring Your Night-Light</h4>&#13;
<p class="noindent">You need to keep your LED light attached to GPIO pin 18. <a href="ch03.xhtml#ch03fig07">Figure 3-7</a> shows the wiring diagram for reference.</p>&#13;
<p class="indent">Follow these steps to wire the light:</p>&#13;
<ol>&#13;
<li class="noindent"><strong>Add the new parts:</strong> Place the legs of the photoresistor into your breadboard, leaving at least one line of space between the legs. Add the capacitor to the breadboard, with one of the legs in the same row as the right leg of the photoresistor, as shown in <a href="ch03.xhtml#ch03fig07">Figure 3-7</a>.</li>&#13;
</ol>&#13;
<div class="image"><img alt="Image" src="../images/03fig07.jpg"/></div>&#13;
<p class="figcap" id="ch03fig07"><strong>FIGURE 3-7</strong> Adding the capacitor and the photoresistor to the breadboard</p>&#13;
<ol start="2">&#13;
<li class="noindent"><span epub:type="pagebreak" id="page_57"/><strong>Add the wires:</strong> Add wire 1 in line with the left leg of the photoresistor. Add wire 2 in line with the right leg of the photoresistor and the left leg of the capacitor. Place wire 3 in line with the left leg of the capacitor. These wires are shown in <a href="ch03.xhtml#ch03fig07">Figure 3-7</a>.</li>&#13;
<li class="noindent"><strong>Connect to your Raspberry Pi:</strong> Connect wire 1 to the first physical pin, the 3V3 pin, which provides the power. Connect wire 2 to GPIO pin 4: this is the fourth physical pin on the left. Connect wire 3 to the ground pin, GND. I recommend you use the nearest ground pin, number 6.</li></ol>&#13;
<h4 class="h4" id="ch03lev2sec5">Coding the Night-Light</h4>&#13;
<p class="noindent">To code the night-light, start a new Python file and then add the program in <a href="ch03.xhtml#ch03ex03">Listing 3-3</a>.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">from</span> gpiozero <span class="codeorg">import</span> LightSensor, LED&#13;
<span class="ent">❷</span> <span class="codeorg">import</span> time&#13;
<span class="ent">❸</span> ldr = LightSensor(4)&#13;
<span class="ent">❹</span> led = LED(18)&#13;
<span class="ent">❺</span> <span class="codeorg">while</span> <span class="codeorg">True</span>:&#13;
       <span class="codepurple">print</span> (ldr.value)&#13;
       time.sleep(2)&#13;
    <span class="ent">❻</span>  <span class="codeorg">if</span> ldr.value &lt;= 0.4:&#13;
           <span class="codepurple">print</span> (<span class="codegreen">"light on"</span>)&#13;
           led.on()&#13;
    <span class="ent">❼</span> <span class="codeorg">else</span>:&#13;
           led.off()</pre>&#13;
<p class="caption" id="ch03ex03"><strong>LISTING 3-3</strong> Coding the night-light</p>&#13;
<p class="indent">You import the <span class="literal">LightSensor</span> and <span class="literal">LED</span> classes from the <span class="literal">gpiozero</span> library to help you control the photoresistor and LED, respectively <span class="ent">❶</span>. Then you import the <span class="literal">time</span> module so you can add a short pause <span epub:type="pagebreak" id="page_58"/>between each light reading <span class="ent">❷</span>. To begin with, you’ll set the value to 2. This will enable you to test the program by placing your hand over the photoresistor. When you use the program as a night-light, you can increase the time delay. Because a sunset can take several minutes, taking a reading every second would be pointless; reaching the required light level could take 45 minutes, and your Pi would have to take more than 2700 readings, using up processing time and power.</p>&#13;
<p class="indent">At <span class="ent">❸</span> you tell the program that the photoresistor is attached to GPIO 4. Then you tell the program that the LED is attached to GPIO pin 18 <span class="ent">❹</span>.</p>&#13;
<p class="indent">You create a <span class="literal">while True</span> loop to make the program continuously take light readings and check the value so it doesn’t miss the sunset <span class="ent">❺</span>.You print the light reading value to the screen and add a short pause of 2 seconds. You might be interested in the light value readings, and seeing them onscreen will make it easier for you to test if the program is working correctly.</p>&#13;
<p class="indent">You then use a conditional to check whether the light reading is less than or equal to the value 0.4 (remember that 0 is no light and 1 is full sunlight) <span class="ent">❻</span>. A <em>conditional</em> is an instruction that tells the program to run certain commands only <em>if</em> something is true. This <span class="literal">if</span> statement tells the program that if the value is less than or equal to 0.4, it’s getting dark, so the program should print an optional warning message and turn on the night-light. You can adjust the light level to match your environment. For example, if you live in a city, you might need to set the value higher to account for streetlights.</p>&#13;
<p class="indent">The <span class="literal">else</span> statement is another conditional that tells the computer that if the reading is above 0.4, it should turn off the LED <span class="ent">❼</span>.</p>&#13;
<h4 class="h4" id="ch03lev2sec6">Running Your Program</h4>&#13;
<p class="noindent">To run the program and test your photoresistor, press <strong>F5</strong> on your keyboard. This will prompt you to save your file with a recognizable name, and then it will run. Test your night-light by placing a cloth or your fingers over the sensor to block the light: this should trigger your night-light to turn on.</p>&#13;
<p class="indent">You can adjust the sensitivity by reducing or increasing the value on line 8 of the program. For example, try changing the line to the following:</p>&#13;
<pre> <span class="codeorg">if</span> ldr.value &lt;= 0.2:</pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_59"/>This line will trigger the light only when it’s very dark. To end the program, close the Python window by clicking the <strong>X</strong>.</p>&#13;
<p class="indent">The light in your room and the type of LED you’re using will determine the best values for you to use. Experiment with photoresistor values to find the one most appropriate for your environment.</p>&#13;
<h3 class="h3" id="ch03lev1sec4">WRAPPING UP</h3>&#13;
<p class="noindent">You now have a working, custom-built night-light. Here are a few ideas for improving your light:</p>&#13;
<ul>&#13;
<li class="noindent">Create more LED creatures and add them to your collection.</li>&#13;
<li class="noindent">Use different-colored LEDs to make different-colored lights.</li>&#13;
<li class="noindent">Add glitter to the glue before the glue sets to make it sparkle.</li>&#13;
<li class="noindent">Use a small coin-style battery to make the feature portable by placing the battery between the LED legs.</li>&#13;
<li class="noindent">Reverse the light value so the LED light is an alarm and flashes when the light value is above 0.80.<span epub:type="pagebreak" id="page_60"/></li></ul>&#13;
</body></html>