<html><head></head><body>
<h2 class="h2" id="ch04"><a id="page_63"/><strong>4</strong></h2>
<p class="h2a"><strong>ZOMBIE ALARMS</strong></p>
<div class="image1"><img src="graphics/f0001-01.jpg" alt="image"/></div>
<p class="noindent">Movies tell us that zombies can’t move around without groaning. They’re also clumsy and liable to crash into things. However, there’s still the possibility that they will catch you unaware. After all, you have to sleep sometime. So, one of the first uses of your newly generated electricity should be to make some zombie alarms (<a href="ch04.html#ch04fig1">Figure 4-1</a>).</p>
<p class="indent">This chapter has two zombie detector projects: a decidedly low-tech trip wire alarm and a more sophisticated passive infrared (PIR) proximity alarm.</p>
<div class="image"><a id="page_64"/><img src="graphics/f04-01.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig1">Figure 4-1:</a> Zombie detection</p>
<h3 class="h3" id="ch00lev1sec71"><strong>PROJECT 5: TRIP WIRE ALARM</strong></h3>
<p class="noindent">Zombies will keep finding their way into your compound, either because they’re attracted to the smell and noise or just through aimless wandering. You need a way to detect them so that you can grab a baseball bat or ax and head off to do battle at the breach in your defenses.</p>
<p class="indent">Alternatively, you may decide to create a “killing field” into which unsuspecting zombies (is there another kind?) will wander, ready for swift dispatching. Either way, you’ll need to be alerted to their presence, and a trip wire is a good way to make sure that happens.</p>
<p class="indent">Zombies are notorious for dragging their feet. They also frequently fail to look where they’re going, since they’re mostly guided by the smell of human flesh. So, even a trip wire that wouldn’t fool the most clumsy and shortsighted of humans will work just fine on a zombie (<a href="ch04.html#ch04fig2">Figure 4-2</a>). This alarm uses parts that are easily scavenged to sound a car horn when triggered.</p>
<div class="image"><a id="page_65"/><img src="graphics/f04-02.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig2">Figure 4-2:</a> A trip wire alarm</p>
<h3 class="h3" id="ch00lev1sec72"><strong>WHAT YOU WILL NEED</strong></h3>
<p class="noindent">To make this project, you’ll need the following items. (The microswitch can also be obtained from the door safety interlock of a microwave.)</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="100%">
<thead>
<tr>
<th valign="top" class="table_th"><p class="table1"><strong>ITEMS</strong></p></th>
<th valign="top" class="table_th"><p class="table1"><strong>NOTES</strong></p></th>
<th valign="top" class="table_th"><p class="table1"><strong>SOURCE</strong></p></th>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> String</p></td>
<td valign="top" class="table"><p class="table">Long enough to stretch across the gap where you want to detect zombies</p></td>
<td valign="top" class="table"><p class="table">Hardware store</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Nails or screws</p></td>
<td valign="top" class="table"><p class="table">To fix the trip wire and microswitch</p></td>
<td valign="top" class="table"><p class="table">Hardware store, Scavenge</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Microswitch</p></td>
<td valign="top" class="table"><p class="table"> </p></td>
<td valign="top" class="table"><p class="table">Fry’s (2314449), microwave oven</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Double-core bell wire or speaker cable</p></td>
<td valign="top" class="table"><p class="table">To connect the microswitch to the battery and car horn</p></td>
<td valign="top" class="table"><p class="table">Hardware store, Scavenge</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Car horn</p></td>
<td valign="top" class="table"><p class="table">The louder the better. Even zombies can look surprised when a car horn blares a few feet from their head, and few things are funnier than a surprised-looking zombie.</p></td>
<td valign="top" class="table"><p class="table">Auto parts store, Scavenge</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> 12V battery</p></td>
<td valign="top" class="table"><p class="table">This can be a car battery, but a smaller battery will also be just fine.</p></td>
<td valign="top" class="table"><p class="table">Auto parts store, Scavenge</p></td>
</tr>
</tbody>
</table>
<p class="indent">You could scavenge most of these parts easily, and you probably won’t have enough electricity to run a microwave, so you may as well strip it down <a id="page_66"/>for the microswitch. Of course, if you’re practicing before the zombies have completely taken over, it would clearly be a terrible waste to destroy a microwave oven just for a $2 switch; in that case, only use a microwave that is already dead. It’s dangerous to keep a zombie microwave around, anyway.</p>
<p class="indent">The 12V battery I used is a small, sealed lead-acid battery. These are effectively miniature car batteries. But if you have a car battery all set up from <a href="ch02.html#ch02">Chapter 2</a>, then you will probably just want to use that one.</p>
<div class="note">
<p class="notet"><span class="font1"><strong>WARNING</strong></span></p>
<p class="noindent">The following procedure describes how to disassemble a microwave oven. You must only do this with the oven unplugged from the AC outlet. This procedure will render the oven at best nonfunctional and at worst very dangerous, so the microwave must be scrapped after this. Do not attempt to use the damaged microwave as a radiation weapon against the zombies (but using it as a blunt object is okay).</p>
</div>
<h4 class="h4" id="ch00lev1sec73"><strong>CONSTRUCTION</strong></h4>
<p class="noindent">In a postapocalyptic world, low-tech traps, like this one, will usually be the most reliable. The hardest part of the build is probably extracting the microswitch from a microwave oven, and that’s where I’ll start. Of course, if you plan ahead, you can also just buy a switch; skip to “<a href="ch04.html#ch00lev1sec75">Step 2: Identify the Microswitch Terminals</a>” on <a href="ch04.html#page_68">page 68</a> if you already have your switch prepared.</p>
<p class="indent">As with most of the projects in this book, it is a good idea to get them working safely on your workbench before deploying them in an active zombie area. It’s very difficult to concentrate on your soldering when a groaning heap of rotting flesh is bearing down on you.</p>
<h5 class="h5" id="ch00lev1sec74"><strong>STEP 1: OBTAIN A MICROSWITCH</strong></h5>
<p class="noindent">All microwave ovens are slightly different, so you’ll need to adapt these instructions to your particular microwave. The basic principle is to keep taking out screws and removing parts of the microwave until you get to the door switch. Most microwave ovens have a U-shaped outer case that, once removed, gives you a clear view of the oven’s inner workings (<a href="ch04.html#ch04fig3">Figure 4-3</a>). The microswitch next to the door latch is then easily accessible.</p>
<p class="indent">In <a href="ch04.html#ch04fig3">Figure 4-3</a>, the microwave door is to the right, the back of the area with all the control buttons and knobs is at the top right, and the inside of the door latch is close to the circled area.</p>
<div class="image"><a id="page_67"/><img src="graphics/f04-03.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig3">Figure 4-3:</a> Inside the microwave oven</p>
<p class="indent">The microswitch you are trying to find will have clips attached to its terminals (<a href="ch04.html#ch04fig4">Figure 4-4</a>). You can pull those clips off, or you can simply cut the wires down to the clip to make the microswitch easier to remove.</p>
<div class="note">
<p class="notet"><span class="font1"><strong>NOTE</strong></span></p>
<p class="noindent">If you can’t see the microswitch at first, then just disassemble the oven a bit more until its location is obvious. Some ovens have more than one microswitch.</p>
</div>
<p class="indent">After you remove the microswitch, if the attached wires are long enough, you can just leave them in place and cut them. Otherwise, desolder the wires and attach new wires of the correct length. The microwave also contains a lot of other useful lengths of wire, particularly those with spade terminals attached.</p>
<p class="indent">Unfortunately, not much more of the oven is going to be of use in this project, though the remainder of the microwave oven makes an extremely effective zombie head crusher if dropped from a height into the groaning host of undead. Just attach a rope to it first so you can reel it back and use it multiple times. There’s an apocalypse on, so it’s even more important to recycle.</p>
<h5 class="h5" id="ch00lev1sec75"><a id="page_68"/><strong>STEP 2: IDENTIFY THE MICROSWITCH TERMINALS</strong></h5>
<p class="noindent">The microswitch will have three connections (<a href="ch04.html#ch04fig4">Figure 4-4</a>). If you look closely, you’ll see that they are marked COM (common), NC (normally closed), and NO (normally open). When pushed toward the left, the long lever pushes in the little button on the side of the switch.</p>
<div class="image"><img src="graphics/f04-04.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig4">Figure 4-4:</a> A microswitch</p>
<p class="indent">You’ll always use the common connection when you add one of these switches to a circuit. The other terminal you connect to will depend on whether you want the switch to cause something to happen when it’s activated or when it’s released. The normally open terminal of the switch is left open when the switch is not activated, meaning it has no connection to the common terminal until the button is pressed. The normally closed terminal works the other way around. You want your alarm to go off when a zombie hits the trip wire, thus activating the switch, so this project uses the NO connection.</p>
<h5 class="h5" id="ch00lev1sec76"><strong>STEP 3: PREVIEW THE ELECTRONIC CIRCUIT</strong></h5>
<p class="noindent">Now let’s have a look at how that little switch will become a key part of your advance zombie-warning system.</p>
<p class="indent">The schematic of the trip wire alarm (<a href="ch04.html#ch04fig5">Figure 4-5</a>) shows an electronic circuit that is about as simple as one can get. If one of the car horn’s terminals is explicitly marked positive, you’ll connect it to the positive terminal of the battery; otherwise, it doesn’t matter which side of the horn you attach there. The battery’s negative terminal is connected to the microswitch’s COM terminal, and the microswitch’s NO connection completes the circuit back to the car horn.</p>
<div class="image"><a id="page_69"/><img src="graphics/f04-05.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig5">Figure 4-5:</a> Schematic for the trip wire alarm</p>
<div class="note">
<p class="notet"><span class="font1"><strong>NOTE</strong></span></p>
<p class="noindent">Car horns normally require a full 12V before they’ll make much noise. Naturally, a car battery is well suited for this project. See <a href="ch02.html#ch02">Chapter 2</a> for more information on using batteries.</p>
</div>
<p class="indent">One big advantage of this alarm is that it doesn’t draw any current at all from the battery until the alarm is triggered. This means that your battery will provide effective zombie protection for a long while.</p>
<h5 class="h5" id="ch00lev1sec77"><strong>STEP 4: PREPARE THE WIRES</strong></h5>
<p class="noindent">You’re going to need two lengths of cable: a longer length of double-core cable leading to the switch and a short single length (perhaps 6 inches, or 15 cm) of wire to connect the positive terminals of the battery and horn.</p>
<p class="indent">Strip and trim the ends of all the wires. If you need help doing this, see “<a href="app02.html#ch00lev1sec225">Stripping Wires</a>” on <a href="app02.html#page_227">page 227</a>.</p>
<h5 class="h5" id="ch00lev1sec78"><strong>STEP 5: CONNECT THE BATTERY AND HORN</strong></h5>
<p class="noindent">If you’re using a small 12V battery with solder tabs, solder the short single length of wire between the positive terminal of the battery and the positive terminal of the horn (<a href="ch04.html#ch04fig6">Figure 4-6</a>). If, on the other hand, you’re using a car battery, then don’t try to solder directly to the terminal. Instead, use an alligator clip, as you did with many of the leads in <a href="ch02.html#ch02">Chapter 2</a> (see, for example, <a href="ch02.html#ch02fig10">Figure 2-10</a> on <a href="ch02.html#page_32">page 32</a>).</p>
<div class="image"><a id="page_70"/><img src="graphics/f04-06.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig6">Figure 4-6:</a> Connecting the horn and battery</p>
<p class="indent">Again, if the horn doesn’t have a terminal marked with a +, then it doesn’t matter which terminal of the horn you connect the battery to.</p>
<h5 class="h5" id="ch00lev1sec79"><strong>STEP 6: CONNECT THE SWITCH</strong></h5>
<p class="noindent">Solder the two wires of one end of the long length of double-core cable to the COM and NO terminals of the switch (<a href="ch04.html#ch04fig7">Figure 4-7</a>). It doesn’t matter which wire goes to which switch terminal, as long as you use COM and NO. In fact, sometimes there won’t be an NC terminal on the microswitch at all.</p>
<div class="image"><img src="graphics/f04-07.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig7">Figure 4-7:</a> Soldering wires to the switch</p>
<p class="indent"><a id="page_71"/>Now connect the other ends of the double-core cable to the unused terminal of the horn and the negative terminal of the battery (<a href="ch04.html#ch04fig8">Figure 4-8</a>).</p>
<div class="image"><img src="graphics/f04-08.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig8">Figure 4-8:</a> The finished wiring</p>
<p class="indent">With all the wiring complete, you’ll find that when you activate the switch by moving the lever, the horn will sound. Car horns are really loud, so it’s best not to test this out in an enclosed space—and warn your fellow survivors before you try it!</p>
<h4 class="h4" id="ch00lev1sec80"><strong>USING THE TRIP WIRE ALARM</strong></h4>
<p class="noindent">Clearly, you need to choose your moment to deploy this project so that you don’t become a zombie yourself before you finish setting it up. When you’ve identified the opening that you want to protect, fix a screw or nail (or find some other way of securing one end of the string) about 6 inches (15 cm) off the ground. This will allow the switch to be triggered both by foot-dragging zombies and more athletic zombies that may simply tread on the string.</p>
<p class="indent">Fix the microswitch on the opposite side of the passageway you’re protecting and at the same height as the anchor for the string. Most microswitches have holes that make them easy to affix with small screws. If not, you can glue the switch in place with epoxy-based glue or a hot glue gun.</p>
<p class="indent">Position the switch so that the lever is on the other side from the space being protected. Tie the string around the top end of the lever (<a href="ch04.html#ch04fig9">Figure 4-9</a>).</p>
<div class="image"><a id="page_72"/><img src="graphics/f04-09.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig9">Figure 4-9:</a> The switch fixed in place</p>
<p class="indent">Don’t make your string too taut. After all, you want it to detach without pulling the microswitch off the wall when a zombie walks through it. Tying a bow at one end or the other is a good idea.</p>
<p class="indent">Although I used a car horn, you could use anything that makes a noise and operates from 12V. Or, if you’d prefer a silent alarm, you could use a 12V car light bulb in place of the car horn.</p>
<p class="indent">Neither approach is very sophisticated, however, so in the next project, you’ll level up your zombie alarm with something a little more high-tech.</p>
<h3 class="h3" id="ch00lev1sec81"><strong>PROJECT 6: PIR ZOMBIE DETECTOR</strong></h3>
<p class="noindent">The second zombie detector project in this book uses a <em>passive infrared (PIR) detector</em>. These detectors are the same type used in intruder alarms—they sense movement of heat—and I guess few things are more intrusive than a group of zombies intent on eating you.</p>
<p class="indent"><a id="page_73"/>You can of course just buy (or scavenge) an intruder alarm that uses PIR sensors, rather than make this project from scratch, but I thought it would be more fun to make something that uses an Arduino. In fact, if you just add the extra components needed for the PIR alarm to “<a href="ch03.html#ch00lev1sec63">Project 4: Battery Monitor</a>” on <a href="ch03.html#page_53">page 53</a>, the same Arduino can both monitor your battery and alert you to a zombie attack, using the same buzzer and display.</p>
<p class="indent">When a zombie triggers the PIR sensor, the LCD display will show the message <em>ZOMBIES!!</em> (<a href="ch04.html#ch04fig10">Figure 4-10</a>). Since the last thing you want to do while fending off a zombie is attract more zombies, this project also allows you to silence the alarm by pressing any button on the LCD shield.</p>
<div class="image"><img src="graphics/f04-10.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig10">Figure 4-10:</a> PIR zombie detector</p>
<h3 class="h3" id="ch00lev1sec82"><strong>WHAT YOU WILL NEED</strong></h3>
<p class="noindent">To make this PIR alarm, you’ll need the following parts. If you’ve already made the battery monitor of “<a href="ch03.html#ch00lev1sec63">Project 4: Battery Monitor</a>” on <a href="ch03.html#page_53">page 53</a>, you’ll already have the Arduino, screwshield, and alligator clips.</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="100%">
<thead>
<tr>
<th valign="top" class="table_th"><p class="table1"><strong>ITEMS</strong></p></th>
<th valign="top" class="table_th"><p class="table1"><strong>NOTES</strong></p></th>
<th valign="top" class="table_th"><p class="table1"><strong>SOURCE</strong></p></th>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Arduino</p></td>
<td valign="top" class="table"><p class="table">Arduino Uno R3</p></td>
<td valign="top" class="table"><p class="table">Adafruit, Fry’s (7224833), Sparkfun</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Arduino screwshield</p></td>
<td valign="top" class="table"><p class="table">Screwshield</p></td>
<td valign="top" class="table"><p class="table">Adafruit (196)</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> PIR module</p></td>
<td valign="top" class="table"><p class="table"> </p></td>
<td valign="top" class="table"><p class="table">Adafruit (189), Fry’s (6726705), security store</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Small alligator clip leads</p></td>
<td valign="top" class="table"><p class="table"> </p></td>
<td valign="top" class="table"><p class="table">Auto parts store</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> 3-core cable wire</p></td>
<td valign="top" class="table"><p class="table">Long enough to reach the PIR sensor</p></td>
<td valign="top" class="table"><p class="table">Scavenge</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table-b"><img src="graphics/square.jpg" alt="image"/> Terminal block</p></td>
<td valign="top" class="table"><p class="table">3-way, 2A terminal strip</p></td>
<td valign="top" class="table"><p class="table">Auto parts store, electrical store</p></td>
</tr>
</tbody>
</table>
<div class="sidebar">
<p class="sidebart"><a id="page_74"/><strong>ZOMBIES AND PIR DETECTORS</strong></p>
<p class="noindent">One important thing that we haven’t discussed is whether zombies can even trigger a PIR detector, which relies on detecting heat.</p>
<p class="indent">While zombies are generally considered to be dead, and by implication cold, it isn’t possible to move muscles without also generating a small amount of heat. Also, if the cold zombie walks between a source of heat and the PIR sensor, the sensor will register the movement. So, while zombies are generally cooler than humans, you can expect attacking zombies to register on a PIR sensor.</p>
</div>
<h4 class="h4" id="ch00lev1sec83"><strong>CONSTRUCTION</strong></h4>
<p class="noindent">This is another project that can be assembled without any soldering, and my instructions assume that you’re building on top of Project 4. If you haven’t already built Project 4, then you’ll need to build a slightly modified version of that project first, as the hardware for the PIR zombie detector is mostly the same.</p>
<h5 class="h5" id="ch00lev1sec84"><strong>STEP 1: BUILD THE SCREWSHIELD</strong></h5>
<p class="noindent">Flip to Project 4, “<a href="ch04.html#ch00lev1sec83">Construction</a>” on <a href="ch03.html#page_55">page 55</a> and follow Steps 1 to 3. In Step 1, download the sketch (Arduino’s word for program) <em>Project_06_PIR_Alarm</em> from <em><a href="http://www.nostarch.com/zombies/">http://www.nostarch.com/zombies/</a></em> and use that in place of the sketch for Project 4. Also, when it comes to Step 3, you don’t need to include the two resistors unless you also want to monitor the battery voltage.</p>
<h5 class="h5" id="ch00lev1sec85"><strong>STEP 2: MAKE A LEAD FOR THE PIR SENSOR</strong></h5>
<p class="noindent">There’s little point in making a zombie detector that detects zombies only after they’re already in the same room as you. Chances are you’ll have already thoroughly detected them if they get that far. Therefore, you need to attach a long lead to the PIR detector so that it can monitor the corridor, porch, or other area outside your living space.</p>
<p class="indent">The PIR detector has three leads: two that supply power and one output that indicates that motion has been detected. This means you’ll need a three-wire lead. You could find some wire from an intruder alarm, or you could use three of the wires in a telephone extension lead. Pretty much any lead with three or more wires in it will be just fine.</p>
<p class="indent">You could either solder the ends of this lead to the lead that comes with the PIR sensor or use a terminal block, as I have (<a href="ch04.html#ch04fig11">Figure 4-11</a>).</p>
<div class="image"><a id="page_75"/><img src="graphics/f04-11.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig11">Figure 4-11:</a> PIR lead and terminal block</p>
<p class="indent">I harvested my three-lead cable from a telephone extension lead. The cable contained four solid-core insulated wires. These wires were color coded, so I used blue for GND (ground), orange for 5V, and stripy white for the output; I left the final wire unused. The lead was about 30 feet (9 m) long, which worked fine for the sensor. You can probably use longer leads, but try it out first before you lay all the cabling.</p>
<h5 class="h5" id="ch00lev1sec86"><strong>STEP 3: CONNECT THE PIR TO THE SCREWSHIELD</strong></h5>
<p class="noindent">Now that you’ve extended your sensor wires to a useful length, attach the wires to the Arduino screwshield (<a href="ch04.html#ch04fig12">Figure 4-12</a>; note that the two resistors from Project 4 are shown at the bottom left).</p>
<div class="image"><img src="graphics/f04-12.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig12">Figure 4-12:</a> Connecting the PIR lead to the Arduino screwshield</p>
<p class="indent"><a id="page_76"/>If you look at the back of the PIR sensor, you’ll see that the three pins are labeled GND, OUT, and +5V. Connect GND on the PIR sensor to one of the GND connections on the screwshield; it doesn’t matter which one. Then, connect +5V on the PIR sensor to the 5V connection on the screwshield. Finally, connect OUT on the PIR sensor to D2 on the screwshield.</p>
<h4 class="h4" id="ch00lev1sec87"><strong>SOFTWARE</strong></h4>
<p class="noindent">If you just want to make this project on its own, without any of the earlier Arduino-based projects, then use the sketch <em>Project_06_PIR_Alarm</em>. On the other hand, if you’ve made one or more of the other Arduino projects and wish to include them, then use the sketch <em>All_Sensors</em> and change the constants at the top to select the projects that you have made.</p>
<p class="indent">The first few lines of the <em>All_Sensors</em> sketch are shown below:</p>
<pre>/*<br/>Any projects that you want to exclude from this program should have a<br/>value of "false". That way, you will not get any false alarms because<br/>of missing hardware.<br/>*/<br/>const boolean project4 = true; // Battery Monitor<br/>const boolean project6 = true; // PIR Alarm<br/>const boolean project10 = false; // Door Monitor<br/>const boolean project11 = false; // Fire Alarm<br/>const boolean project12 = false; // Temperature Monitor</pre>
<p class="indent">In this case, only the battery monitor (Project 4) and PIR alarm (Project 6) are enabled. If you’ve made more of the projects, then change the value next to those projects from <code>false</code> to <code>true</code>. If you are working your way through this book in order, then the program should look as shown.</p>
<p class="indent">All the source code for this book is available from <em><a href="http://www.nostarch.com/zombies/">http://www.nostarch.com/zombies/</a></em>. See <a href="app03.html#app03">Appendix C</a> for instructions on installing the programs.</p>
<p class="indent">The PIR detector code follows the same pattern as Project 4, so for more information on how the program as a whole works, please refer to “<a href="ch11.html#ch00lev1sec215">Software</a>” on <a href="ch03.html#page_57">page 57</a>. Here, I’ll just describe the code specific to this project.</p>
<p class="indent">The first change to the earlier code is the addition of a new constant for the PIR’s OUT pin. I added the <code>pirPIN</code> constant on the line after the <code>switchPin</code> constant.</p>
<pre>const int pirPin = 2;</pre>
<p class="indent"><a id="page_77"/>I set <code>pirPin</code> to <code>2</code> because the output of the PIR sensor will be connected to pin 2 on the Arduino. The next addition to the sketch occurs in the setup function, where that same pin 2 is set to be an input.</p>
<pre>pinMode(pirPin, INPUT);</pre>
<p class="indent">Although pins on an Arduino default to inputs unless specified as outputs, declaring the pin to be an input makes the code easier to follow.</p>
<p class="indent">The loop function now needs to check the sensor, so I added a call to the function <code>checkPIR</code>.</p>
<pre>checkPIR();</pre>
<p class="indent">This new function, <code>checkPIR</code>, will, as the name suggests, check the PIR sensor and take the appropriate action if the sensor is triggered. The function is defined right at the end of the sketch.</p>
<pre>void checkPIR()<br/>{<br/>  if (digitalRead(pirPin))<br/>  {<br/>    alarm("ZOMBIES!!");<br/>  }<br/>}</pre>
<p class="indent">The <code>checkPIR</code> function makes a <code>digitalRead</code> of the <code>pirPin</code> to decide whether the output from the PIR detector is <code>HIGH</code> or <code>LOW</code>. If movement has been detected, then the <code>alarm</code> function is used to display an appropriate message. For more information on using the inputs and outputs of an Arduino, see <a href="app03.html#app03">Appendix C</a>.</p>
<h4 class="h4" id="ch00lev1sec88"><strong>USING THE PIR ZOMBIE DETECTOR</strong></h4>
<p class="noindent">The project works well in combination with the battery monitor, as you can just run both off the same battery. But whether you combine the two projects or not, be mindful of your wires when you deploy the PIR detector around your base of operations. If you’re using cable that contains solid-core wires, then affix the cable to the wall at regular intervals along the cable length. Solid-core wires don’t take kindly to being repeatedly flexed.</p>
<h4 class="h4" id="ch00lev1sec89"><strong>SCAVENGED PIR SENSORS</strong></h4>
<p class="noindent">The Adafruit PIR module used in this project is designed to work with microcontroller modules like the Arduino. But following an apocalypse, you may <a id="page_78"/>find it easier to obtain the type of regular PIR sensor intended for use with a security system, such as the unbranded unit obtained from eBay for a couple of dollars, shown opened up in <a href="ch04.html#ch04fig13">Figure 4-13</a>.</p>
<div class="image"><img src="graphics/f04-13.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig13">Figure 4-13:</a> A PIR module intended for intruder alarms</p>
<p class="indent">This sensor won’t operate at 5V but rather requires a power supply of 12V. The sensor has a logic level output that will rise to 3.6V, which is enough to register as <code>HIGH</code>, just like the Adafruit module. The only difference in wiring is to connect this sensor’s red wire to the Arduino’s V<sub>in</sub> rather than to 5V.</p>
<p class="indent">Be aware that other sensors may look like this one but have a different output voltage. Some (with an open collector output) require a pull-up resistor (of, say, 1 kΩ) between the output and 5V on the Arduino. If the output of the sensor does not give a useful voltage when you wave your hand in front of it, then it almost certainly needs a pull-up resistor.</p>
<p class="indent">Other types of PIR sensors, especially those intended to control lighting, have a relay output. This output works just like a switch, closing when movement is detected. The schematics show how to connect three types of PIR modules to the Arduino (<a href="ch04.html#ch04fig14">Figure 4-14</a>).</p>
<p class="indent">Wherever possible, choose a device that you have documentation for so you don’t have to guess how its output works and how to wire it up.</p>
<div class="image"><a id="page_79"/><img src="graphics/f04-14.jpg" alt="image"/></div>
<p class="figuret"><a id="ch04fig14">Figure 4-14:</a> Connecting different types of PIR module to the Arduino</p>
<p class="indent">The next chapter advances from automatic zombie detection to walk through a number of surveillance projects that will allow you to see what is going on before it trips over your doorstep. You’ll be able to spot the zombies remotely using webcams.<a id="page_80"/></p>
</body></html>