<html><head></head><body>
<h2 class="h2" id="ch8"><span epub:type="pagebreak" id="page_175"/><span class="big"><strong>8</strong></span></h2>&#13;
<h2 class="h2a">MAKE SECRET MESSAGES A PHONE APP TO SHARE WITH FRIENDS!</h2>&#13;
<div class="image21"><img src="../images/circle.jpg" alt="Image"/></div>&#13;
<p class="noindent">In this chapter, we’ll complete our Secret Messages app experience by building a mobile app version that can send secret messages by text or email and can even post to social media.</p>&#13;
<p class="indent">The app will look similar to the GUI version in <a href="ch7.xhtml#ch7">Chapter 7</a>, with labels, text fields, and the ability to slide through different key values to quickly encode and decode messages. You’ll also be able to copy and paste messages from the app into emails and text messages, but by the end of the chapter, you’ll be able to send an email or text directly from the Secret Messages app itself! <a href="ch8.xhtml#ch8fig1">Figure 8-1</a> shows the app in action on a real Android device.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_176"/><img src="../images/f0176-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig1"/>Figure 8-1: The Secret Messages encoder/decoder app (left) can send secret text and email messages directly from inside the app, at just the touch of a button (right).</em></p>&#13;
<p class="indent">We’ll reuse the working code from the desktop app by keeping the names of the GUI components in the Android version and by taking advantage of Java’s consistent language and structure across multiple platforms.</p>&#13;
<h3 class="h3"><a id="toc_lev137"/>Setting Up the Mobile GUI</h3>&#13;
<p class="noindent">Let’s begin building the Secret Messages app with Android Studio. Android Studio may ask you to perform updates as you open the program, which is usually a good idea. Updating carries a bit of risk, as it can change the look and feel of the program by moving icons or menu items, but the updates also include important new security fixes and the latest Android features.</p>&#13;
<p class="indent">When you first open Android Studio, you may see the most recent project you were working on—in our case, the Hi-Lo guessing game app. You can close it by selecting <strong>File</strong> <span class="ent">▸</span> <strong>Close Project</strong>.</p>&#13;
<p class="indent">To begin building the new Secret Messages app, either select <strong>File</strong> <span class="ent">▸</span> <strong>New Project</strong> from inside Android Studio or choose <strong>Start a new Android Studio project</strong> from the Welcome screen.</p>&#13;
<p class="indent">Name the new project <span class="codestrong"><code>SecretMessages</code></span>, save it in your preferred location, and click <strong>Next</strong>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_177"/>On the Target Android Devices screen, choose <strong>API 16: Android 4.1 (Jelly Bean)</strong> for the <strong>Phone and Tablet Minimum SDK</strong>, as we did for the Hi-Lo guessing game app, and then click <strong>Next</strong>. Choose <strong>Basic Activity</strong> on the Add an Activity screen and click <strong>Next</strong>. On the Customize the Activity screen, keep all the default names and click <strong>Finish</strong>.</p>&#13;
<p class="indent">It may take a moment for the new project to configure and open. When the new project opens, double-click the <em>content_main.xml</em> file under <em>app</em> <span class="ent">▸</span> <em>res</em> <span class="ent">▸</span> <em>layout</em> in the Project Explorer on the left. You may need to close a pop-up message about the floating action button (we’ll use that later).</p>&#13;
<p class="indent">Your screen should look similar to <a href="ch8.xhtml#ch8fig2">Figure 8-2</a>. (You may have to click the Design tab to see the GUI preview.)</p>&#13;
<div class="image"><img src="../images/f0177-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig2"/>Figure 8-2: The starting view of the app in Android Studio</em></p>&#13;
<h3 class="h3"><a id="toc_lev138"/>Designing the Mobile GUI</h3>&#13;
<p class="noindent">Now that we have a new project set up, let’s start designing the layout of our app. First, delete the “Hello World!” text shown in the design preview by clicking to select it and then pressing the <small>DELETE</small> key. Then, as we did in the previous app, let’s add a RelativeLayout to hold our GUI elements: in the Palette pane, under Layouts, select <strong>RelativeLayout</strong> and drag it onto the Preview pane or onto the ConstraintLayout under the Component Tree.</p>&#13;
<p class="indent">Next, let’s add a title to the top of the app by selecting the <strong>TextView</strong> widget under Widgets in the Palette. Place the <code>TextView</code> widget at the top center of the screen, change the text to <span class="codestrong"><span class="codeitalic"><code>Your Name</code></span></span><span class="codestrong"><code>'s Secret Messages App</code></span>, and then change the <code>textAppearance</code> property in the Properties pane to <strong>Material.Large</strong>, as I’ve done in <a href="ch8.xhtml#ch8fig3">Figure 8-3</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_178"/><img src="../images/f0178-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig3"/>Figure 8-3: Add a Large text title to the top center of your app, customizing it with your name.</em></p>&#13;
<p class="indent">In the Properties pane, expand <strong>textAppearance</strong> to find <strong>textStyle</strong> and click the <strong>bold</strong> checkbox to make the title text stand out more.</p>&#13;
<p class="indent">Now, let’s place the <code>EditText</code> text fields for the user’s input message. In the Palette, under Text, select <strong>Multiline Text</strong>. Zoom in on the design preview and place the text field about 30 dp below the title. Change the text to <span class="codestrong"><code>Secret messages \n are so cool, \n aren't they?</code></span> as shown in <a href="ch8.xhtml#ch8fig4">Figure 8-4</a>. The <code>\n</code> escape sequence will add <em>newline characters</em>; these characters don’t show up onscreen, but they represent the new line you get by pressing <small>ENTER</small> on the keyboard. Putting the text across multiple lines shows the user they can enter a multiline message as well.</p>&#13;
<div class="image"><img src="../images/f0178-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig4"/>Figure 8-4: Add a Multiline Text field for the user’s input message, using the \n escape sequence to span multiple lines of text.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_179"/>You can also change the number of lines of text that a user can see at any one time. Under the expanded Properties pane for the Multiline Text, you can change the <code>lines</code> property to <code>4</code>, for example. To be able to see the multiline message across all devices, select the <strong>textMultiLine</strong> checkbox in the <code>inputType</code> property’s drop-down list.</p>&#13;
<p class="indent">Finally, let’s change the input text field’s <code>id</code> property to <code>txtIn</code>, both to help us use it in the code later and to maintain naming consistency with the GUI desktop version of the app. Now drag the left and right borders of the text field to stretch it to the full width of the app, as shown in <a href="ch8.xhtml#ch8fig5">Figure 8-5</a>.</p>&#13;
<div class="image"><img src="../images/f0179-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig5"/>Figure 8-5: Change the id of the input text field to txtIn so that we can code with it later.</em></p>&#13;
<p class="indent">We’re going to add four components to the middle of the Secret Messages app: a <code>SeekBar</code> for the user to swipe a bar to find a key, a label, a text field to display the secret key, and an Encode/Decode button. The <code>SeekBar</code> will function similarly to the <code>JSlider</code> in the desktop version of the app. Don’t worry if all your components don’t line up perfectly when you first place them—we’ll be able to fix that later.</p>&#13;
<p class="indent">First, find the <code>SeekBar</code> in the Widgets section of the Palette pane. Place it a comfortable margin, 30 dp or so, below the input text field along the left margin, as shown in <a href="ch8.xhtml#ch8fig6">Figure 8-6</a>. You can set the top margin manually in the Properties pane by going to <strong>View all properties</strong> (the left and right double-arrows at the top of the Properties pane). Under <strong>Layout_Margin</strong>, enter <span class="codestrong"><code>30dp</code></span> for the <strong>layout_marginTop</strong>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_180"/><img src="../images/f0180-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig6"/>Figure 8-6: The SeekBar will function like the slider in the GUI desktop version of the app, allowing the user to slide among different key values.</em></p>&#13;
<p class="indent">Next, add a <code>TextView</code> widget beside the <code>SeekBar</code> to serve as a label for the text field of the user’s secret key value. Change the <code>textAppearance</code> property to <strong>Material.Medium</strong> and the <code>text</code> property to <strong>Key:</strong> in the Properties pane.</p>&#13;
<p class="indent">Then, select a <strong>Number</strong> text field for the user’s secret key value and center it horizontally, with a text property of <code>13</code> or another default key value of your choice. Modify the width of the text field to fit the number comfortably by changing its <code>width</code> property (under <strong>View all properties</strong>) to approximately <span class="codestrong"><code>40dp</code></span>, and then change the <code>id</code> property to <span class="codestrong"><code>txtKey</code></span>.</p>&#13;
<p class="indent">With the <code>txtKey</code> text field in place, you should be able to drag the <code>Key:</code> label over to be directly beside it. You should also be able to stretch the <code>SeekBar</code> to fill the gap, as shown in <a href="ch8.xhtml#ch8fig7">Figure 8-7</a>.</p>&#13;
<p class="indent">Complete the middle row of the layout by adding the Encode/Decode button. Choose <strong>Button</strong> under Widgets in the Palette and insert the button along the right margin beside the text field. Change the <code>text</code> property to <span class="codestrong"><code>Encode/Decode</code></span>.</p>&#13;
<p class="indent">Finally, create a text field for the output message by copying the <code>txtIn</code> text field and pasting it below the middle row of widgets. Delete the text in the text field, stretch it to the width of the app window, and rename the <code>id</code> property to <span class="codestrong"><code>txtOut</code></span>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_181"/><img src="../images/f0181-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig7"/>Figure 8-7: After placing the txtKey text field, adjust the placement of the Key: label and stretch the SeekBar</em>.</p>&#13;
<p class="indent">That’s it—the finished GUI layout is shown in <a href="ch8.xhtml#ch8fig8">Figure 8-8</a>.</p>&#13;
<div class="image"><img src="../images/f0181-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig8"/>Figure 8-8: The finished layout for the Secret Messages mobile app</em></p>&#13;
<p class="indent">Before moving on, make sure your input text field has an <code>id</code> of <code>txtIn</code>, the output text is <code>txtOut</code>, and the middle text field for the key is <code>txtKey</code>. We’ll need all of these elements to be correctly named in order for the code to work in the next section.</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_182"/><a id="toc_lev139"/>Wiring the GUI to the Java Code</h3>&#13;
<p class="noindent">It’s time to connect the GUI layout to the Java source code to begin programming the behavior of the Secret Messages mobile app. Switch to the <em>MainActivity.java</em> file by clicking the tab at the upper left of the main content window.</p>&#13;
<p class="indent">Add the following five lines directly to the <code>public class</code> <code>MainActivity</code> declaration:</p>&#13;
<p class="pre"><span class="ash">public class MainActivity extends AppCompatActivity {</span><br/>&#13;
    EditText txtIn;<br/>&#13;
    EditText txtKey;<br/>&#13;
    EditText txtOut;<br/>&#13;
    SeekBar sb;<br/>&#13;
    Button btn;<br/>&#13;
</p>&#13;
<p class="indent">You may need to press <small>ALT</small>-<small>ENTER</small> or <small>OPTION</small>-<small>ENTER</small> after each line to import the widgets into the Java code.</p>&#13;
<p class="indent">These five variables point to the GUI components in the visual layout for the app. We can connect these variable names to the actual widgets by adding five lines of code to the <code>onCreate()</code> method, right below the <code>setSupportActionBar(toolbar);</code> statement:</p>&#13;
<p class="pre"><span class="ash">protected void onCreate(Bundle savedInstanceState) {</span><br/>&#13;
    <span class="ash">super.onCreate(savedInstanceState);</span><br/>&#13;
    <span class="ash">setContentView(R.layout.<em>activity_main</em>);</span><br/>&#13;
    <span class="ash">Toolbar toolbar = (Toolbar) findViewById(R.id.<em>toolbar</em>);</span><br/>&#13;
    <span class="ash">setSupportActionBar(toolbar);</span><br/>&#13;
    txtIn = (EditText)findViewById(R.id.<em>txtIn</em>);<br/>&#13;
    txtKey = (EditText)findViewById(R.id.<em>txtKey</em>);<br/>&#13;
    txtOut = (EditText)findViewById(R.id.<em>txtOut</em>);<br/>&#13;
    sb = (SeekBar)findViewById(R.id.<em>seekBar</em>);<br/>&#13;
    btn = (Button)findViewById(R.id.<em>button</em>); <br/>&#13;
</p>&#13;
<p class="indent">You can rely on Android Studio’s code assist to autocomplete most of these entries—all you have to do is type the first few characters, then click the entry from the list or press <small>ENTER</small> to accept the code recommendation. It’s faster and will help you avoid common typing errors.</p>&#13;
<h4 class="h4"><em><a id="toc_lev140"/>Connecting the Encode Button to the encode() Method</em></h4>&#13;
<p class="noindent">Now that we have the code connected to the components in the GUI layout, we can copy the <code>encode()</code> method from the desktop version of the app from <a href="ch7.xhtml#ch7">Chapter 7</a>. We’ll paste the method into the <code>public class MainActivity</code> declaration, right below the five lines you added declaring the variables that point to the GUI components in the layout.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_183"/>Open your <em>SecretMessagesGUI</em> desktop project in Eclipse and highlight the entire <code>encode()</code> method. Copy this code and paste it into the <code>public class MainActivity</code> declaration in Android Studio:</p>&#13;
<p class="pre"><span class="ash">public class MainActivity extends AppCompatActivity {</span><br/>&#13;
    <span class="ash">EditText txtIn;</span><br/>&#13;
    <span class="ash">EditText txtKey;</span><br/>&#13;
    <span class="ash">EditText txtOut;</span><br/>&#13;
    <span class="ash">SeekBar sb;</span><br/>&#13;
    <span class="ash">Button btn;</span><br/>&#13;
    public String encode( String message, int keyVal ) {<br/>&#13;
        String output = "";<br/>&#13;
        char key = (char) keyVal;<br/>&#13;
        for ( int x = 0; x &lt; message.length(); x++ ) {<br/>&#13;
            char input = message.charAt(x);<br/>&#13;
            if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'Z')<br/>&#13;
                    input -= 26;<br/>&#13;
                if (input &lt; 'A')<br/>&#13;
                    input += 26;<br/>&#13;
            }<br/>&#13;
            else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'z')<br/>&#13;
                    input -= 26;<br/>&#13;
                if (input &lt; 'a')<br/>&#13;
                    input += 26;<br/>&#13;
            }<br/>&#13;
            else if (input &gt;= '0' &amp;&amp; input &lt;= '9')<br/>&#13;
            {<br/>&#13;
                input += (keyVal % 10);<br/>&#13;
                if (input &gt; '9')<br/>&#13;
                    input -= 10;<br/>&#13;
                if (input &lt; '0')<br/>&#13;
                    input += 10;<br/>&#13;
            }<br/>&#13;
            output += input;<br/>&#13;
        }<br/>&#13;
        return output;<br/>&#13;
    }<br/>&#13;
</p>&#13;
<p class="indent">Now that we have the <code>encode()</code> method in place, we just need to call that method whenever the Encode/Decode button is clicked. We’ll create an <code>OnClickListener</code> for the Encode/Decode button and call the <code>encode()</code> method from there.</p>&#13;
<p class="indent">Inside the <code>onCreate()</code> method in <em>MainActivity.java</em>, start typing the code <span class="codestrong"><code>btn.setOnCl</code></span> until a code recommendation list pops up, as shown in <a href="ch8.xhtml#ch8fig9">Figure 8-9</a>. On the list, choose <span class="codestrong"><code>setOnClickListener()</code></span>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_184"/><img src="../images/f0184-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig9"/>Figure 8-9: You can rely on code recommendations from Android Studio to autofill code for you, as shown here with the setOnClickListener() for the Encode/Decode button.</em></p>&#13;
<p class="indent">After clicking the <code>setOnClickListener()</code> code recommendation, click inside the parentheses of that method and begin typing <span class="codestrong"><code>new OnClickListener</code></span>, as shown in <a href="ch8.xhtml#ch8fig10">Figure 8-10</a>, double-clicking the first code recommendation that pops up:</p>&#13;
<div class="image"><img src="../images/f0184-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig10"/>Figure 8-10: Use the code assist once more to fill in the OnClickListener</em>. <em>This time, Android Studio provides several lines of code.</em></p>&#13;
<p class="indent">You’ll notice that Android Studio fills in several lines of code for you for the <code>OnClickListener()</code> event handler:</p>&#13;
<p class="pre">    btn.setOnClickListener(new View.OnClickListener() {<br/>&#13;
        @Override<br/>&#13;
        public void onClick(View v) {<br/>&#13;
        }<br/>&#13;
    });<br/>&#13;
</p>&#13;
<p class="indent">These few lines create an event listener using an anonymous inner class of type <code>View.OnClickListener()</code>, with an <code>onClick()</code> event handler to respond when the user clicks the button.</p>&#13;
<p class="indent">Next we’ll set up the <code>encode()</code> method. <code>encode()</code> doesn’t care what’s happening in the rest of our code as long as we give it two arguments that are the right data types. This means we don’t have to change <code>encode()</code> to fit our new app, but we do need to set up new values to give it as arguments.</p>&#13;
<p class="indent">To encode the message the user typed into <code>txtIn</code>, we’ll first need to retrieve the key value they entered into <code>txtKey</code>. Then, we’ll get the string of text the user entered into <code>txtIn</code>. We’ll pass both of those values to the <span epub:type="pagebreak" id="page_185"/><code>encode()</code> method as arguments and store the encoded result in a variable called <code>output</code>. Finally, we’ll set the text of the <code>txtOut</code> field to the encoded output string <code>output</code>.</p>&#13;
<p class="indent">Add the following four lines within the braces of the <code>onClick()</code> method:</p>&#13;
<p class="pre"><span class="ash1">btn.setOnClickListener(new View.OnClickListener() {</span><br/>&#13;
    <span class="ash1">public void onClick(View v) {</span><br/>&#13;
      <span class="ent">➊</span> int key = Integer.<span class="codeitalic">parseInt</span>(txtKey.getText().toString());<br/>&#13;
      <span class="ent">➋</span> String message = txtIn.getText().toString();<br/>&#13;
      <span class="ent">➌</span> String output = encode(message, key);<br/>&#13;
      <span class="ent">➍</span> txtOut.setText(output);<br/>&#13;
      <span class="ash1">}</span><br/>&#13;
<span class="ash1">});</span></p>&#13;
<p class="indent">At <span class="ent">➊</span>, we’ve used the <code>Integer.parseInt()</code> method to convert text from the user into an integer value <code>key</code>. The only difference between this <code>parseInt()</code> and others we’ve used before is that <code>txtKey</code> is followed by two methods: <code>getText()</code> and <code>toString()</code>. In Android, the <code>getText()</code> method on an <code>EditText</code> (that is, a text field) doesn’t return a string directly—it returns a flexible type called <code>Editable</code>. All of the <code>EditText</code> types, from Plain to Password to Number, return an <code>Editable</code> object, because the text inside an <code>EditText</code> is meant to change and be editable by the user. We use the <code>toString()</code> method to turn the text from the <code>EditText</code> into a string that we can parse, to find the number the user entered.</p>&#13;
<p class="indent">The same is true at <span class="ent">➋</span>: we need both methods, <code>getText()</code> and <code>toString()</code>, to get the input message from <code>txtIn</code> and turn it into a string that we can encode. At <span class="ent">➌</span>, we use the <code>encode()</code> method on the <code>message</code> and <code>key</code> value the user provided to encode the message, then store the result in <code>output</code>. Finally, at <span class="ent">➍</span>, we set the text of the <code>txtOut</code> text field to display the encoded <code>output</code> message.</p>&#13;
<p class="indent">Now, our app is functional enough for a first test. Let’s run the app in the Android Emulator to see the Encode/Decode button at work.</p>&#13;
<h4 class="h4"><em><a id="toc_lev141"/>Testing the App</em></h4>&#13;
<p class="noindent">Save your progress so far. Then, go to <strong>Run</strong> <span class="ent">▸</span> <strong>Run ‘app’</strong>. Select an emulator you set up back in <a href="ch4.xhtml#ch4">Chapter 4</a>, such as My Nexus 6P, as shown in <a href="ch8.xhtml#ch8fig11">Figure 8-11</a>.</p>&#13;
<div class="image"><img src="../images/f0185-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig11"/>Figure 8-11: Choosing an emulator</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_186"/>The emulator may take a few minutes to run the first time—remember, you can leave it running while working in Android Studio to avoid the long startup each time you want to run the app. You can also run the app directly on your Android device, as we did in <a href="ch4.xhtml#ch4">Chapter 4</a>, and skip the emulator if you wish.</p>&#13;
<p class="indent">When the emulator starts up and the Secret Messages app loads, you’ll see the initial layout, as shown in <a href="ch8.xhtml#ch8fig12">Figure 8-12</a> (left). Type in a key value, then press the Encode/Decode button, and you’ll see Android convert the message into ciphertext, as shown in <a href="ch8.xhtml#ch8fig12">Figure 8-12</a> (right).</p>&#13;
<div class="image"><img src="../images/f0186-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig12"/>Figure 8-12: The Secret Messages app running on the Nexus 6P Android Emulator (left); clicking the Encode/Decode button creates the encoded text (right).</em></p>&#13;
<p class="indent">You can copy and paste between the fields, but the slider/<code>SeekBar</code> doesn’t work yet. The floating action button—the email envelope symbol in the lower right—also doesn’t do anything yet. Don’t worry; we’ll work on those shortly.</p>&#13;
<p class="indent">Notice there’s one other user experience issue: the encoded message (<code>Frperg zrffntrf...</code>) is underlined because it looks like misspelled text to the computer. To turn off spellcheck, go back to the <em>content_main.xml</em> layout file and select the <strong>txtOut</strong> text field. Under the Properties pane, expand <code>inputType</code> and select the <strong>textNoSuggestions</strong> property. You can also turn off spelling suggestions for the <code>txtIn</code> text field, if you’d like, either separately or by selecting both text fields while holding down <small>SHIFT</small> in the layout view and then selecting the <strong>textNoSuggestions</strong> property. Now rerun the app on the emulator. No more spellcheck!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_187"/>With this small tweak, we’re ready to bring the <code>SeekBar</code> online so we can slide among different key values easily and quickly.</p>&#13;
<h4 class="h4"><em><a id="toc_lev142"/>Working with the SeekBar</em></h4>&#13;
<p class="noindent">We’re going to wire the <code>SeekBar</code> to change the output message whenever the user slides left or right, so we need to modify a few of its properties to get it ready for use.</p>&#13;
<p class="indent">First, let’s learn a little about the <code>SeekBar</code> widget. You’ve probably seen a <code>SeekBar</code> when playing a video on your mobile device. For example, on a YouTube video the <code>SeekBar</code> shows where you are in a video, and it allows you to skip forward or backward—this is sometimes called <em>seeking</em>.</p>&#13;
<p class="indent">The <code>SeekBar</code> differs from a <code>JSlider</code> in a few ways. First, a <code>SeekBar</code> can have only positive values. Zero is the minimum, but we can set the maximum to any positive value, like <code>26</code>. Also, a <code>SeekBar</code> doesn’t show increment marks or labels on the bar itself. This means that if we want to allow our users to use negative key values, we’ll have to use a bit of math to convert positive values to negative so that the user can slide the key value through the range of values from, say, <code>-13</code> to <code>+13</code>. To do this, we’ll make the <code>SeekBar</code> range from <code>0</code> to <code>26</code>. And we’ll need to update the <code>txtKey</code> field to show the values changing as the user slides the <code>SeekBar</code> to let them know the <code>SeekBar</code>’s current value. Let’s begin by changing some of the properties of the <code>SeekBar</code> in the GUI layout.</p>&#13;
<p class="indent">Switch back to the <em>content_main.xml</em> layout file and select the <code>SeekBar</code> in the design preview. Under the Properties pane for the <code>SeekBar</code>, find <code>max</code> and <code>progress</code> and change both to <span class="codestrong"><code>26</code></span>.</p>&#13;
<p class="indent">The <code>max</code> property is the maximum value the <code>SeekBar</code> will display. For the Secret Messages app, we need at least 26 values to cover the whole alphabet. We want the range to be <code>-13</code> to <code>+13</code> so that encoding and decoding is easy for the user. That would be 27 values total, so we’ll choose <code>26</code> as the <code>max</code> (since that makes for 27 values when 0 is included). The <code>progress</code> property is the current value of the <code>SeekBar</code>, similar to the value property of a <code>JSlider</code>. We’ll use the <code>getProgress()</code> method on the <code>SeekBar</code> to get the value the <code>SeekBar</code> is currently pointing to.</p>&#13;
<p class="indent">Save your changes and then switch back to the <em>MainActivity.java</em> source code file. Inside the <code>onCreate()</code> method, right below the closing line <code>});</code> of the <code>btn.setOnClickListener()</code> code, begin typing <span class="codestrong"><code>sb.set</code></span> and use the code recommender to find <code>setOnSeekBarChangeListener()</code>. This will store your <code>SeekBar</code> in the variable <code>sb</code>.</p>&#13;
<p class="indent">The code for the <code>SeekBar</code> listener is different from that for the Encode/Decode button. We want to listen for more than just click events on the <code>SeekBar</code>. We want to listen for all changes, including the user pressing the <code>SeekBar</code> and sliding it left or right. For that, we need an <code>OnSeekBarChangeListener</code>.</p>&#13;
<p class="indent">Just as with the button code, though, we’ll use the code recommender to automatically generate the new <code>OnSeekBarChangeListener</code>. Inside the parentheses after <code>sb.setOnSeekBarChangeListener()</code>, begin typing <span class="codestrong"><code>new OnSeekBar</code></span> and use the code recommendation.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_188"/>Android Studio will fill in the <code>OnSeekBarChangeListener</code> code with three methods: <code>onProgressChanged()</code>, <code>onStartTrackingTouch()</code>, and <code>onStopTrackingTouch()</code>. We want to use <code>onProgressChanged()</code>, as this will tell us when the user has changed the value of the <code>SeekBar</code>.</p>&#13;
<p class="indent">The steps we want to program into the <code>SeekBar</code> event listener are similar to the code for the Encode/Decode button, except that we need to calculate the key based on the <code>SeekBar</code>’s value. We also need to show the key in the <code>txtKey</code> field. Add the following lines of code to the <code>onProgressChanged()</code> method:</p>&#13;
<p class="pre"><span class="ash">sb.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {</span><br/>&#13;
    <span class="ash">@Override</span><br/>&#13;
    <span class="ash">public void onProgressChanged(SeekBar seekBar, int progress, boolean</span> <span class="ash">fromUser) {</span><br/>&#13;
      <span class="ent">➊</span> int key = sb.getProgress() - 13;<br/>&#13;
        String message = txtIn.getText().toString();<br/>&#13;
        String output = encode(message, key);<br/>&#13;
        txtOut.setText(output);<br/>&#13;
      <span class="ent">➋</span> txtKey.setText("" + key);<br/>&#13;
}</p>&#13;
<p class="indent">At <span class="ent">➊</span>, we create a variable named <code>key</code>. We get the progress value from the <code>SeekBar</code> <code>sb</code> variable, and we subtract <code>13</code> from that value. The <code>SeekBar</code> can go only from <code>0</code> to <code>26</code>, so subtracting <code>13</code> will give a range from <code>-13</code> to <code>+13</code>, perfect for encoding and decoding messages. The next three lines are identical to those in the Encode/Decode button event handler code, which get the message, encode the message using the <code>encode()</code> method, and then display the encoded text in <code>txtOut</code>.</p>&#13;
<p class="indent">The line at <span class="ent">➋</span> is new. When the user moves the <code>SeekBar</code> slider, we want the <code>txtKey</code> readout to change. Since <code>key</code> is an integer, we add an empty string (<code>""</code>) to it to convert the result to a text string that will be displayed to the user. You could have also used the command <code>Integer.toString(key)</code> to convert the <code>key</code> value into a string using the <code>Integer</code> class’s <code>toString()</code> method, but adding an empty string to an <code>int</code> is just a handy shortcut.</p>&#13;
<h3 class="h3"><a id="toc_lev143"/>Running the App on the Emulator and on an Android Device</h3>&#13;
<p class="noindent">Save your changes and then try running the app again on the emulator. You can now slide the <code>SeekBar</code> left and right and see the ciphertext change immediately with each key value, as shown in <a href="ch8.xhtml#ch8fig13">Figure 8-13</a>.</p>&#13;
<p class="indent">It’s been a few chapters since we connected a physical Android device, so let’s review that quickly. First, connect a compatible USB cable between your Android device and your computer. When a pop-up appears asking whether you want to allow USB Debugging, click <strong>Yes</strong>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_189"/><img src="../images/f0189-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig13"/>Figure 8-13: The SeekBar</em>  <em>is now fully functional,  as shown on the Android Emulator, with a key  value of 5</em>.</p>&#13;
<p class="indent">In Android Studio, click the run button, and you’ll see a Select Deployment Target dialog. (You may need to close the app in your emulator window to get the dialog to show up.) Find the entry for the Android device you’ve connected and click <strong>OK</strong>.</p>&#13;
<p class="indent">When you run the app on your real Android device, you’ll notice the <code>SeekBar</code> is more responsive, and you have access to a few options when you click certain parts of the app. When you click the ciphertext and choose <strong>Select All</strong>, a context menu will appear, as shown in <a href="ch8.xhtml#ch8fig14">Figure 8-14</a>, offering you the option to Cut, Copy, Share, or Assist.</p>&#13;
<p class="indent">If you click Share, the selected text can be sent via email, text message, chat, Bluetooth, Twitter, Facebook, or any other app you have configured for <span epub:type="pagebreak" id="page_190"/>sharing on your device, as shown in <a href="ch8.xhtml#ch8fig15">Figure 8-15</a> (left). With the Share option, you can send encoded messages to anyone from inside the app! You can even email a secret message to a friend who has the desktop GUI version of the Secret Messages app, as shown in <a href="ch8.xhtml#ch8fig15">Figure 8-15</a> (right). All they have to do is copy the ciphertext from the email you send them into the Secret Messages GUI app while it’s running, then use the opposite of the secret key to decode the message: for example, <code>-8</code> would decode a message sent with a key value of <code>8</code>.</p>&#13;
<div class="image"><img src="../images/f0189-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig14"/>Figure 8-14: The context menu allows you to Cut, Copy, or Share your encoded messages.</em></p>&#13;
<div class="image"><img src="../images/f0190-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig15"/>Figure 8-15: The Share option allows you to share your message via email, text message, Twitter, Facebook, or any other app you’ve configured for sharing (left). Selecting the email option will automatically create an email message with your encoded text (right).</em></p>&#13;
<p class="indent">So now we have a fully functional Secret Messages mobile app that allows us to share our messages by email, text, or social media with anyone.</p>&#13;
<p class="indent">There’s only one feature left to make our app complete: adding our own custom action to the floating action button. This will enable us to let the user share their messages at the touch of a finger!</p>&#13;
<h3 class="h3"><a id="toc_lev144"/>Bonus: Customizing the Floating Action Button</h3>&#13;
<p class="noindent">So far, we’ve been ignoring the floating action button (also known as the <em>fab icon</em>), the circular email envelope symbol in the lower-right corner of the app screen, shown in <a href="ch8.xhtml#ch8fig16">Figure 8-16</a>.</p>&#13;
<p class="indent">The fab icon gives us a way to provide the user with a shortcut to perform a specific action, such as sharing their message via email, text, or social media.</p>&#13;
<div class="image"><img src="../images/f0190-02.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig16"/>Figure 8-16: The floating action button</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_191"/>Android Studio automatically includes some code for the fab icon that displays a new type of pop-up message—called a “Snackbar” in Android lingo—in the <code>onCreate()</code> method:</p>&#13;
<p class="pre">FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.<span class="codeitalic">fab</span>);<br/>&#13;
fab.setOnClickListener(new View.OnClickListener() {<br/>&#13;
    @Override<br/>&#13;
    public void onClick(View view) {<br/>&#13;
        Snackbar.<em>make</em>(view, "Replace with your own action", Snackbar.<em>LENGTH_LONG</em><code>)</code><br/>&#13;
                .setAction("Action", null).show();<br/>&#13;
    }<br/>&#13;
});<br/>&#13;
</p>&#13;
<p class="indent">All we need to do is replace the code in the <code>onClick()</code> method of the <code>fab.setOnClickListener()</code> with code that does what we want.</p>&#13;
<p class="indent">First, delete the code between the braces of the <code>onClick()</code> method. Next, type the following code into the <code>onClick()</code> method:</p>&#13;
<p class="pre"><span class="ash">FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.<span class="codeitalic">fab</span>);</span><br/>&#13;
<span class="ash">fab.setOnClickListener(new View.OnClickListener() {</span><br/>&#13;
    <span class="ash">@Override</span><br/>&#13;
    <span class="ash">public void onClick(View view) {</span><br/>&#13;
     <span class="ent">➊</span> Intent shareIntent = new Intent(Intent.<em>ACTION_SEND</em>);<br/>&#13;
     <span class="ent">➋</span> shareIntent.setType("text/plain");<br/>&#13;
     <span class="ent">➌</span> shareIntent.putExtra(Intent.<em>EXTRA_SUBJECT</em>, "Secret Message "+<br/>&#13;
               DateFormat.<em>getDateTimeInstance</em>().format(new Date()));<br/>&#13;
     <span class="ent">➍</span> shareIntent.putExtra(Intent.<em>EXTRA_TEXT</em>, txtOut.getText().toString());<br/>&#13;
     <span class="ent">➎</span> try {<br/>&#13;
           startActivity(Intent.<em>createChooser</em>(shareIntent, "Share message..."));<br/>&#13;
           finish();<br/>&#13;
       }<br/>&#13;
     <span class="ent">➏</span> catch (android.content.ActivityNotFoundException ex) {<br/>&#13;
           Toast.<em>makeText</em>(MainActivity.this, "Error: Couldn't share.",<br/>&#13;
                   Toast.<em>LENGTH_SHORT</em>).show();<br/>&#13;
       }<br/>&#13;
    <span class="ash">}</span><br/>&#13;
<span class="ash">});</span><br/>&#13;
</p>&#13;
<p class="indent">Now let’s look at what each line does. At <span class="ent">➊</span>, we create an <code>Intent</code> called <code>shareIntent</code>. An <code>Intent</code> in Android is an activity that we want to start or launch, such as email, Twitter, or the camera. The <code>shareIntent</code> uses <code>ACTION_SEND</code>, which means we want to send some information to another app on the Android device.</p>&#13;
<p class="indent">We set the type of the <code>Intent</code> to <code>text/plain</code> <span class="ent">➋</span>, which is what we need for an email, tweet, or social media post, and then add a subject line to the activity <span class="ent">➌</span>. If the user chooses to share their message by email or via another app that uses a subject line, it will read “Secret Message” plus the date. The <code>DateFormat</code> class will format the date in text form based on your region, like <code>"Dec 7, 2017 4:33:12 PM"</code>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_192"/>The line at <span class="ent">➍</span> sends the encoded message from <code>txtOut</code> as the body of an email, tweet, or post, depending on which app the user chooses to share their message through.</p>&#13;
<p class="indent">Next is a <code>try</code> statement <span class="ent">➎</span>. Lots of things could go wrong when we try to call one app from inside another. What if the user doesn’t have an email app installed? What if the app is busy or the network can’t be reached? The <code>try</code> statement is made for situations like this. The first line of code inside the <code>try</code> statement attempts to start the activity the user selected (like email, text messaging, or Twitter), then passes the information to the selected app, and finally finishes the activity in the next line.</p>&#13;
<p class="indent">If there’s an error or exception, the <code>catch</code> statement <span class="ent">➏</span> will display a Toast message (a kind of pop-up) that reads <code>"Error: Couldn't share."</code>.</p>&#13;
<p class="indent">That’s all we need to get the fab icon working. Remember to import new classes by pressing <small>ALT</small>-<small>ENTER</small> (or <small>OPTION</small>-<small>ENTER</small>) while typing the lines of code. Remember, if Android Studio underlines a new class in red, it’s often because the class hasn’t been imported, so pressing <small>ALT</small>-<small>ENTER</small> (or <small>OPTION</small>-<small>ENTER</small>) will automatically add the correct <code>import</code> statement, just as we did in <a href="ch4.xhtml#ch4">Chapter 4</a>.</p>&#13;
<p class="indent">Once you’ve added the code and imported the classes, run the app again.</p>&#13;
<p class="indent">After you encode a message, hide the keyboard by pressing the down triangle at the bottom of your screen. Then, tap the fab icon on the bottom right of the screen, as shown in <a href="ch8.xhtml#ch8fig17">Figure 8-17</a> (left). Select your email app from the apps under <strong>Share message...</strong>, and the app should start, with a subject line and the encoded message in the body of the email, as shown in <a href="ch8.xhtml#ch8fig17">Figure 8-17</a> (right).</p>&#13;
<div class="image"><img src="../images/f0192-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig17"/>Figure 8-17: Pressing the fab icon in the lower right pops up a sharing menu (left). Choosing the email app from the sharing menu automatically creates an email with the secret message as the body and today’s date and time in the subject line (right).</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_193"/>Now we can send secret messages from the app with just the touch of an icon! But to make this app truly worthy of the Google Play Store, we need to give it the ability to <em>receive</em> secret messages from outside the app.</p>&#13;
<h3 class="h3"><a id="toc_lev145"/>Receiving Secret Messages from Other Apps</h3>&#13;
<p class="noindent">Let’s make one last upgrade to the mobile version of the Secret Messages app. We can share, email, or tweet encoded messages from the app, but what if we want to <em>receive</em> text <em>from</em> emails, tweets, and posts without copying and pasting into the app? To address this, we can add our app to the Share list in Android so that other apps can send text directly to the Secret Messages app—and it only takes a few lines of code!</p>&#13;
<p class="indent">This is an advanced technique, so let’s walk through the process step-by-step. First, open your app’s <em>AndroidManifest.xml</em> file under <strong>manifests</strong> <span class="ent">▸</span>  <strong>AndroidManifest.xml</strong> in the Project Explorer pane. The manifest file stores the “shipping” information for your app, much as a ship’s manifest lists all the cargo traveling on the ship. You can declare properties for your entire app and include the details an Android device needs to run the app, just as you can declare the contents of a crate or package when you ship it overseas.</p>&#13;
<p class="indent">In order to do this, you’ll need to edit some XML. XML files contain <em>tags</em> to label information held in the file. Usually a tag is formatted with its name between angled brackets, like <code>&lt;tag&gt;</code>. In this case, we need to modify the manifest’s <code>intent-filter</code> tag entry, which has information about what data the app will accept. Add the following five lines of XML near the end of your <em>AndroidManifest.xml</em> file, before the <code>&lt;/activity&gt;</code> tag:</p>&#13;
<p class="pre">          <span class="ash">&lt;intent-filter&gt;</span><br/>&#13;
              <span class="ash">&lt;action android:name="android.intent.action.MAIN" /&gt;</span><br/>&#13;
              <span class="ash">&lt;category android:name="android.intent.category.LAUNCHER" /&gt;</span><br/>&#13;
          <span class="ash">&lt;/intent-filter&gt;</span><br/>&#13;
        <span class="ent">➊</span> &lt;intent-filter&gt;<br/>&#13;
            <span class="ent">➋</span> &lt;action android:name="android.intent.action.SEND" /&gt;<br/>&#13;
            <span class="ent">➌</span> &lt;category android:name="android.intent.category.DEFAULT" /&gt;<br/>&#13;
            <span class="ent">➍</span> &lt;data android:mimeType="text/*" /&gt;<br/>&#13;
        <span class="ent">➎</span> &lt;/intent-filter&gt;<br/>&#13;
       <span class="ash">&lt;/activity&gt;</span><br/>&#13;
    <span class="ash">&lt;/application&gt;</span><br/>&#13;
<span class="ash">&lt;/manifest&gt;</span><br/>&#13;
</p>&#13;
<p class="indent">At <span class="ent">➊</span>, we add a new <code>intent-filter</code> to the app. Earlier we used an <code>Intent</code> object to send text out to another app, such as email, Twitter, or Facebook. In this case, we’re creating a filter to <em>receive</em> <code>Intent</code> objects sent from other apps on our phone <span class="ent">➋</span>. (We used <code>Intent.ACTION_SEND</code> in the fab icon code on <a href="ch8.xhtml#page_191">page 191</a> to send <code>Intent</code> messages to other apps; here we’re doing the opposite.)</p>&#13;
<p class="indent">The line at <span class="ent">➌</span> uses the <code>DEFAULT</code> sharing category to add the Secret Messages app to the list of apps on your phone that you can share with. With the <code>DEFAULT</code> category, your app can receive data from any app. (There <span epub:type="pagebreak" id="page_194"/>are other categories for when you want to filter or restrict the types of apps that can send data to your app. For example, the <code>BROWSABLE</code> category is used by apps that should receive data from only a web browser.) At <span class="ent">➍</span>, we tell Android that the Secret Messages app should receive any kind of text data from other apps. (If you write an app that accepts images as input, your <code>mimeType</code> might be <code>"image/*"</code>, or <code>"image/png"</code> for just PNG images. For video, there’s <code>"video/mp4"</code>, and so on.)</p>&#13;
<p class="indent">Finally, we close the <code>intent-filter</code> entry <span class="ent">➎</span> in your app’s manifest. XML tags need to be <em>closed</em>, which is usually done with a forward slash and the name of the XML tag that’s being closed, as in <code>&lt;/intent-filter&gt;</code>. This lets the computer know you’ve completed code for the <code>intent-filter</code>. Save your <em>AndroidManifest.xml</em> file and then open the <em>MainActivity.java</em> file to begin editing the Java source code.</p>&#13;
<p class="indent">Scroll down inside <em>MainActivity.java</em> to find the <code>onCreate()</code> method. Immediately after the code that connects the GUI components to the variables from <code>txtIn</code> through <code>btn</code>, add the four statements shown here:</p>&#13;
<p class="pre"><span class="ash">protected void onCreate(Bundle savedInstanceState) {</span><br/>&#13;
    <span class="ash">super.onCreate(savedInstanceState);</span><br/>&#13;
    <span class="ash">setContentView(R.layout.<em>activity_main</em>);</span><br/>&#13;
    <span class="ash">Toolbar toolbar = (Toolbar) findViewById(R.id.<em>toolbar</em>);</span><br/>&#13;
    <span class="ash">setSupportActionBar(toolbar);</span><br/>&#13;
    <span class="ash">txtIn = (EditText)findViewById(R.id.<em>txtIn</em>);</span><br/>&#13;
    <span class="ash">txtKey = (EditText)findViewById(R.id.<em>txtKey</em>);</span><br/>&#13;
    <span class="ash">txtOut = (EditText)findViewById(R.id.<em>txtOut</em>);</span><br/>&#13;
    <span class="ash">sb = (SeekBar)findViewById(R.id.<em>seekBar</em>);</span><br/>&#13;
    <span class="ash">btn = (Button)findViewById(R.id.<em>button</em>);</span><br/>&#13;
  <span class="ent">➊</span> Intent receivedIntent = getIntent();<br/>&#13;
  <span class="ent">➋</span> String receivedText = receivedIntent.getStringExtra(Intent.<em>EXTRA_TEXT</em>);<br/>&#13;
  <span class="ent">➌</span> if (receivedText != null)<br/>&#13;
     <span class="ent">➍</span> txtIn.setText(receivedText);<br/>&#13;
    <span class="ash">btn.setOnClickListener(new View.OnClickListener() {</span><br/>&#13;
</p>&#13;
<p class="indent">At <span class="ent">➊</span>, we create a variable called <code>receivedIntent</code> to accept the incoming <code>Intent</code> message shared from another app. Then, we get the text from the <code>Intent</code> message by calling the <code>getStringExtra()</code> method <span class="ent">➋</span>. The parts of a message sent by an <code>Intent</code> are referred to as <em>extra</em> data. An <code>if</code> statement <span class="ent">➌</span> checks to make sure the <code>receivedText</code> variable isn’t <code>null</code> and, if so, changes the text in the <code>txtIn</code> text field at the top of the Secret Messages app to the received text <span class="ent">➍</span>.</p>&#13;
<p class="indent">Believe it or not, that’s all the work necessary to accept messages shared from other apps into the Secret Messages app! Now, you can not only send encoded messages from the app but also decode messages from email, tweets, and posts directly. <a href="ch8.xhtml#ch8fig18">Figure 8-18</a> shows what it looks like to share a message from email to the Secret Messages app for quick decoding.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_195"/><img src="../images/f0195-01.jpg" alt="Image"/></div>&#13;
<p class="fig-cap"><em><a id="ch8fig18"/>Figure 8-18: Now the Secret Messages app can send and receive messages back and forth with other apps on your phone, including your email.</em></p>&#13;
<p class="indent">Select text in your favorite email app, or in Twitter or Facebook, and press the <strong>Share</strong> button. The Secret Messages app will appear on the list of apps that accept a shared message. Select <strong>SecretMessages</strong> as the app to share with, and the selected text will be shown in the input text field of the Secret Messages app. You can encode or decode with ease; just remember you may need to change the key value depending on how the message was encoded.</p>&#13;
<p class="indent">Congratulations! You’ve built a fully social Secret Messages mobile app. Enjoy it and share it with a friend!</p>&#13;
<p class="indent">Let’s take a look at the skills you developed in this chapter and try a couple of additional programming challenges.</p>&#13;
<h3 class="h3"><a id="toc_lev146"/>What You Learned</h3>&#13;
<p class="noindent">We reused code in this app from the GUI desktop version of the Secret Messages app, and we added so much more to make this a truly complete mobile app. Here are some of the new things you’ve learned and some of the skills you’ve reinforced in this chapter:</p>&#13;
<p class="bull">• Writing event handlers for Android components, including buttons, <code>SeekBar</code>s, and the floating action button</p>&#13;
<p class="bull">• Customizing Android GUI components</p>&#13;
<p class="bull"><span epub:type="pagebreak" id="page_196"/>• Using multiline text inputs in an Android app</p>&#13;
<p class="bull">• Adding a <code>SeekBar</code> and using it like a slider interface</p>&#13;
<p class="bull">• Running Android apps on both the emulator and real devices</p>&#13;
<p class="bull">• Customizing the action of the floating action button</p>&#13;
<p class="bull">• Creating custom <code>Intent</code> objects to call special activities, including sending data to other apps, from inside an app</p>&#13;
<p class="bull">• Creating custom <code>Intent</code> filters to receive text (or image or video) data sent from other apps</p>&#13;
<h3 class="h3"><a id="toc_lev147"/>Programming Challenges</h3>&#13;
<p class="noindent">Try these programming challenges to review and practice what you’ve learned, and to expand your programming skills by trying something new. Visit the book’s website at <em><a href="https://www.nostarch.com/learnjava/">https://www.nostarch.com/learnjava/</a></em> for sample solutions.</p>&#13;
<h4 class="h4"><em><a id="toc_lev148"/>#1: Creating a Move Up Button</em></h4>&#13;
<p class="noindent">This programming challenge is to create a Move Up ^ button similar to the one in <a href="ch7.xhtml#ch7">Chapter 7</a> (Programming Challenge #1 on <a href="ch7.xhtml#page_172">page 172</a>) that moves text up from the output field into the input field.</p>&#13;
<p class="indent">Place the Move Up ^ button below the <code>txtOut</code> text field. Then add an event handler that gets the text from the <code>txtOut</code> text field and sets it as the text of the <code>txtIn</code> text field. As an added bonus, you could have the event handler for the Move Up ^ button also change the <code>SeekBar</code> to the opposite of its value. An encryption key of <code>7</code> would become <code>-7</code>, the decryption key. The result will be that clicking the button swaps the encoded message up and automatically decodes it!</p>&#13;
<h4 class="h4"><em><a id="toc_lev149"/>#2: Changing the SeekBar’s Progress</em></h4>&#13;
<p class="noindent">A second improvement you could make to the user experience would be to change the <code>SeekBar</code>’s progress property whenever the user enters a key value manually in the <code>txtKey</code> field. Give it a try!</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>HINT</strong></span></p>&#13;
<p class="noindent"><em>Instead of creating an event handler for the txtKey field, modify the code for the Encode/Decode button to change the SeekBar’s progress to match the value in txtKey + 13—remember the SeekBar goes from 0 to 26, not -13 to +13</em>. <em>One or two lines of code should be all you need.</em></p>&#13;
</div>&#13;
</body></html>