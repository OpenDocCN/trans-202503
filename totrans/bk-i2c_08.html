<html><head></head><body>
<div id="sbo-rt-content"><section>&#13;
<header>&#13;
<h1 class="chapter">&#13;
<span class="ChapterNumber"><span epub:type="pagebreak" id="Page_93" title="93"/>6</span><br/>&#13;
<span class="ChapterTitle">I<sup>2</sup>C On Common Single-Board Computers</span></h1>&#13;
</header>&#13;
<figure class="opener">&#13;
<img alt="" height="203" src="image_fi/book_art/chapterart.png" width="203"/>&#13;
</figure>&#13;
<p class="ChapterIntro">Several common single-board computers provide at least one I<sup>2</sup>C port for interfacing with I<sup>2</sup>C peripherals. While some low-end boards might use a software implementation (or a quasi-hardware implementation, like that of the ATtiny84), I<sup>2</sup>C support is near universal on most hobbyist-level and professional SBCs. This chapter provides a brief introduction to the I<sup>2</sup>C implementations found on many common SBCs. </p>&#13;
<p>The list of SBCs in this chapter is far from exhaustive and focuses on more commonly used, low-cost SBCs. I intend not to provide low-level details of the I<sup>2</sup>C interfaces on these SBCs but to give an overview of the various boards that support I<sup>2</sup>C communications. I include links to the various web pages (see “For More Information” at the end of this chapter) that describe each of these boards in more detail for those who are interested in following up on them. </p>&#13;
<p><span epub:type="pagebreak" id="Page_94" title="94"/>Of course, many new single-board computers that support the I<sup>2</sup>C interface will appear after this book’s publication. The online chapters (available at <a class="LinkURL" href="https://bookofi2c.randallhyde.com">https://bookofi2c.randallhyde.com</a>) will include continuously updated information on many new SBCs that do not appear in this chapter.</p>&#13;
<h2 id="h1-502468c06-0001">	6.1	The Arduino Family</h2>&#13;
<p class="BodyFirst">The Arduino family is one of the more popular choices for connecting I<sup>2</sup>C devices. Whenever someone exhausts the limited I/O ports (analog or digital) on the Arduino board or wants to connect something that doesn’t have a simple digital or analog interface (such as a thermocouple or a small display), the I<sup>2</sup>C interface often provides the solution.</p>&#13;
<p>The Arduino is not a single computer board. True, when most people use the term <em>Arduino</em>, they’re probably referring to the Arduino Uno Rev3 SBC. However, a wide variety of Arduino boards exists with many different types of I<sup>2</sup>C interfaces on them.</p>&#13;
<p>First, Arduino<sup>®</sup> is a registered trademark of Arduino. However, the Arduino design is open source and open hardware, so there are many different single-board computers out there that are, more or less, compatible with the Arduino system. This book will adopt the attitude that any SBC you can program using the Arduino IDE and Arduino libraries is an Arduino or, more correctly, is <em>Arduino compatible</em>. For example, because you typically program it using the Arduino IDE, this book considers the SparkFun ATTO84 board used in Chapter 3 (see section 3.2, “Basic ATtiny84 and ATtiny85 Hardware,” in Chapter 3) as Arduino compatible even though it lacks many of the features found on common Arduino-compatible devices, including a fully supported hardware I<sup>2</sup>C interface.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/>&#13;
</div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">NOTE</span></h2>&#13;
<p>	The Arduino trademark lawyers would disagree with the idea that any SBC you can program using the Arduino IDE and Arduino libraries is an Arduino. An SBC product may not include the word <em>Arduino</em> as part of the product name, at least in most parts of the world. See <a class="LinkURL" href="https://www.arduino.cc/en/Trademark/HomePage">https://www.arduino.cc/en/Trademark/HomePage</a> for all the legal stuff.</p>&#13;
<div class="bottom hr"><hr/>&#13;
</div>&#13;
</section>&#13;
</aside>&#13;
<p>Because a large number of Arduino-compatible boards is available, discussing “the I<sup>2</sup>C port on an Arduino” as though it were a standard connection is difficult. I<sup>2</sup>C ports on Arduino-class devices may differ from one another in the following ways:</p>&#13;
<ul>&#13;
<li>Some ports are 3.3 V; some are 5 V.</li>&#13;
<li>Different Arduino-class devices can have zero, one, two, or more hardware I<sup>2</sup>C ports available.</li>&#13;
<li>Some devices might not support hardware-based peripheral mode.</li>&#13;
<li>Some devices might not support multiple controllers on the same I<sup>2</sup>C bus.</li>&#13;
<li>Some devices might not support other I<sup>2</sup>C bus features, such as clock stretching.</li>&#13;
</ul>&#13;
<p class="BodyContinued"><span epub:type="pagebreak" id="Page_95" title="95"/>The bottom line is that you must look carefully at the documentation for your particular “Arduino” board to determine which I<sup>2</sup>C features it supports (if it supports I<sup>2</sup>C at all).</p>&#13;
<p>Even from Arduino, you have a wide variety of Arduino models to choose from. The following subsections describe some popular models and their support for I<sup>2</sup>C.</p>&#13;
<h3 id="h2-502468c06-0001">6.1.1	The Arduino Uno Rev3 and Leonardo</h3>&#13;
<p class="BodyFirst">The Uno Rev3 is the classic Arduino unit. It has a 16-MHz, 8-bit ATmega328P with the following features:</p>&#13;
<ul>&#13;
<li>5-V operation</li>&#13;
<li>Standard Arduino pinout and expansion bus (for shields)</li>&#13;
<li>Single I<sup>2</sup>C interface (5 V)</li>&#13;
<li>32-KB flash ROM for program storage</li>&#13;
<li>2-KB RAM</li>&#13;
<li>1-KB EEPROM (nonvolatile storage) </li>&#13;
</ul>&#13;
<p><a href="#figure6-1" id="figureanchor6-1">Figure 6-1</a> shows the location of the I<sup>2</sup>C lines on the Arduino bus. </p>&#13;
<figure>&#13;
<img alt="" class="" height="556" src="image_fi/502468c06/f06001.png" width="694"/>&#13;
<figcaption><p><a id="figure6-1">Figure 6-1</a>: Arduino Uno Rev3 (and Leonardo) pinouts</p></figcaption>&#13;
</figure>&#13;
<p><span epub:type="pagebreak" id="Page_96" title="96"/>The Arduino Leonardo uses (mostly) the same CPU and pinouts that the Arduino Uno Rev3 uses. The major difference is that the Leonardo was the first Arduino to include a built-in USB port that could be programmed to act as a keyboard or other USB device; it also has an ATmega32u4 with 2.5-KB RAM. Of course, the Uno Rev3 (versus the original Uno) also has a built-in USB, so there is little benefit to the Leonardo over the Uno Rev3 (though the Leonard does have more analog I/O pins). See “For More Information” for more details.</p>&#13;
<p>Note that the Arduino pinouts appearing in this chapter come from the Arduino website (<a class="LinkURL" href="https://www.arduino.cc">https://www.arduino.cc</a>). These images are covered under the Creative Commons 4.0 license (free to use with attribution). See <a class="LinkURL" href="https://www.arduino.cc/en/Main/FAQ">https://www.arduino.cc/en/Main/FAQ</a> and <a class="LinkURL" href="https://www.arduino.cc/en/Trademark/HomePage">https://www.arduino.cc/en/Trademark/HomePage</a> for more legal rigmarole from Arduino.</p>&#13;
<h3 id="h2-502468c06-0002">6.1.2	The Arduino Nano</h3>&#13;
<p class="BodyFirst">The Arduino Nano uses the same CPU as that of the Arduino Uno Rev3, which means their tech specs are the same, but the Arduino Nano is packaged into a much smaller footprint for use in space-critical applications. <a href="#figure6-2" id="figureanchor6-2">Figure 6-2</a> shows the pinouts for the Nano.</p>&#13;
<figure>&#13;
<img alt="" class="" height="583" src="image_fi/502468c06/f06002.png" width="694"/>&#13;
<figcaption><p><a id="figure6-2">Figure 6-2</a>: Arduino Nano pinouts</p></figcaption>&#13;
</figure>&#13;
<p><span epub:type="pagebreak" id="Page_97" title="97"/>The Arduino Nano uses pins A4 and A5 for the SDA and SCL lines, respectively; these are the standard pins for I<sup>2</sup>C on many Arduino units. </p>&#13;
<h3 id="h2-502468c06-0003">6.1.3	The Arduino Micro</h3>&#13;
<p class="BodyFirst">The Arduino Micro is another small form factor Arduino unit. It has a slightly beefier CPU than that of the Nano:</p>&#13;
<ul>&#13;
<li>ATmega32U4 CPU at 16 MHz</li>&#13;
<li>32-KB flash for program storage</li>&#13;
<li>2.5-KB RAM</li>&#13;
<li>1-KB EEPROM</li>&#13;
</ul>&#13;
<p><a href="#figure6-3" id="figureanchor6-3">Figure 6-3</a> shows the Arduino Micro pinouts. </p>&#13;
<figure>&#13;
<img alt="" class="" height="547" src="image_fi/502468c06/f06003.png" width="694"/>&#13;
<figcaption><p><a id="figure6-3">Figure 6-3</a>: Arduino Micro pinouts</p></figcaption>&#13;
</figure>&#13;
<p>The I<sup>2</sup>C bus appears on pins D2 (SDA) and D3 (SCL). </p>&#13;
<h3 id="h2-502468c06-0004"><span epub:type="pagebreak" id="Page_98" title="98"/>6.1.4	The Arduino Nano Every</h3>&#13;
<p class="BodyFirst">The Arduino Nano Every is a much beefier version of the Nano (and Micro) while still using a compact form factor. The Arduino Nano Every has the following features:</p>&#13;
<ul>&#13;
<li>ATMega4809 at 20 MHz</li>&#13;
<li>5-V operation</li>&#13;
<li>48-KB flash storage</li>&#13;
<li>6-KB RAM</li>&#13;
<li>256-byte EEPROM</li>&#13;
</ul>&#13;
<p><a href="#figure6-4" id="figureanchor6-4">Figure 6-4</a> shows the Arduino Nano Every pinouts. </p>&#13;
<figure>&#13;
<img alt="" class="" height="494" src="image_fi/502468c06/f06004.png" width="694"/>&#13;
<figcaption><p><a id="figure6-4">Figure 6-4</a>: Arduino Nano Every pinouts</p></figcaption>&#13;
</figure>&#13;
<p>The Nano Every supports a single I<sup>2</sup>C port on pins D18 (PA2) and D19 (PA3).</p>&#13;
<h3 id="h2-502468c06-0005">6.1.5	The Arduino Mega 2560 Rev3</h3>&#13;
<p class="BodyFirst">The Arduino Mega 2560 Rev3 (or just “Arduino Mega”) is physically the largest of the common Arduino boards. It has the following feature set:</p>&#13;
<ul>&#13;
<li>5-V operation</li>&#13;
<li>8-bit CPU running at 16 MHz</li>&#13;
<li>Mega expansion shield capabilities (which is mostly an upwards-compatible variant of the standard Arduino Shield connections)</li>&#13;
<li><span epub:type="pagebreak" id="Page_99" title="99"/>Single I<sup>2</sup>C interface (5 V)</li>&#13;
<li>256-KB flash ROM for program storage</li>&#13;
<li>8-KB RAM</li>&#13;
<li>4-KB EEPROM (nonvolatile storage) </li>&#13;
</ul>&#13;
<p>Because of the large number of I/O pins, the Arduino Mega board is laid out differently from the Uno. However, most standard Uno shields will fit on the corresponding connectors on the Mega board (see <a href="#figure6-5" id="figureanchor6-5">Figure 6-5</a>).</p>&#13;
<figure>&#13;
<img alt="" class="" height="697" src="image_fi/502468c06/f06005.png" width="694"/>&#13;
<figcaption><p><a id="figure6-5">Figure 6-5</a>: Arduino Mega 2560 Rev3 pinouts</p></figcaption>&#13;
</figure>&#13;
<p>The Arduino Uno Rev3 is upwards compatible with the Arduino Mega 2560 Rev3’s bus. Therefore, the I<sup>2</sup>C pins appear at the same physical locations as they do on the Uno Rev3; however, note that electrically, these signals appear on the D20 and D21 signals rather than on the D18 and D19 signals of the Rev3.</p>&#13;
<h3 id="h2-502468c06-0006"><span epub:type="pagebreak" id="Page_100" title="100"/>6.1.6	The Arduino Zero</h3>&#13;
<p class="BodyFirst">The Arduino Zero is a high-performance, 32-bit board based on the ARM Cortex M0+. It has 256KB of flash memory for program storage and 32KB of RAM (no EEPROM). Electrically, there is one huge difference between the Arduino Zero and its 8-bit brothers: all pins on the Zero are 3.3 V, including its I<sup>2</sup>C pins. See <a href="#figure6-6" id="figureanchor6-6">Figure 6-6</a> for the Arduino Zero pinouts.</p>&#13;
<figure>&#13;
<img alt="" class="" height="472" src="image_fi/502468c06/f06006.png" width="694"/>&#13;
<figcaption><p><a id="figure6-6">Figure 6-6</a>: Arduino Zero pinouts</p></figcaption>&#13;
</figure>&#13;
<p>The pins on the board are laid out to be physically compatible with the Arduino Uno. However, keep in mind they are not <em>electrically</em> compatible, as they are 3.3-V logic.</p>&#13;
<h3 id="h2-502468c06-0007">6.1.7	The Arduino Due</h3>&#13;
<p class="BodyFirst">The Arduino Due is currently the highest-performance official Arduino board. It has the following features:</p>&#13;
<ul>&#13;
<li>32-bit CPU at 84 MHz, based on the Atmel SAM3X8E ARM Cortex M3  </li>&#13;
<li>512-KB flash memory for program storage</li>&#13;
<li>96-KB RAM</li>&#13;
<li>Massive number of I/O pins (comparable to Mega 2560)</li>&#13;
<li>3.3-V operation</li>&#13;
</ul>&#13;
<p><a href="#figure6-7" id="figureanchor6-7">Figure 6-7</a> provides the pinouts.</p>&#13;
<span epub:type="pagebreak" id="Page_101" title="101"/><figure>&#13;
<img alt="" class="" height="690" src="image_fi/502468c06/f06007.png" width="694"/>&#13;
<figcaption><p><a id="figure6-7">Figure 6-7</a>: Arduino Due pinouts</p></figcaption>&#13;
</figure>&#13;
<p>The Arduino Due is basically the 32-bit version of the Arduino Mega 2560 (but with 3.3-V pins). It drops four ADC inputs and replaces them with DAC and CANBUS ports. </p>&#13;
<h3 id="h2-502468c06-0008">6.1.8	Other Arduino-Brand Single-Board Computers</h3>&#13;
<p class="BodyFirst">This section has covered the main SBCs available from Arduino. However, this chapter ignores several additional boards intended for the Internet of Things (IoT), and Arduino is constantly producing new products. Visit its website at <a class="LinkURL" href="https://www.arduino.cc">https://www.arduino.cc</a> to check out the latest offerings.</p>&#13;
<h2 id="h1-502468c06-0002">	6.2	Adafruit Single-Board Computers</h2>&#13;
<p class="BodyFirst">Adafruit produces many SBCs that provide I<sup>2</sup>C capability and Arduino compatibility. Perhaps number one on this list is the Adafruit Metro 328 (<a class="LinkURL" href="https://www.adafruit.com/product/50">https://www.adafruit.com/product/50</a>), which is a clone of an Arduino Uno with a few <span epub:type="pagebreak" id="Page_102" title="102"/>improvements. Adafruit also provides several small form factor Arduino IDE–compatible boards. Here are some of the SBCs Adafruit offered as this chapter was being written. You can find technical information for each at the links provided:</p>&#13;
<ul>&#13;
<li>Adafruit Metro Mini 328: a “stick of gum”-sized version of the Metro 328: <a class="LinkURL" href="https://www.adafruit.com/product/2590">https://www.adafruit.com/product/2590</a></li>&#13;
<li>Adafruit METRO M0 Express: a 32-bit version of the Metro 328: <a class="LinkURL" href="https://www.adafruit.com/product/3505">https://www.adafruit.com/product/3505</a></li>&#13;
<li>Adafruit Metro M4 Express AirLift and Metro M4 Feat: 32-bit versions (AirLift has built-in Wi-Fi) and high speed (120 MHz) with hardware floating-point support: <a class="LinkURL" href="https://www.adafruit.com/product/4000">https://www.adafruit.com/product/4000</a> and <a class="LinkURL" href="https://www.adafruit.com/product/3382">https://www.adafruit.com/product/3382</a></li>&#13;
<li>Adafruit Grand Central M4 Express: similar to the Arduino Due with a high-performance, 32-bit CPU and lots of I/O pins: <a class="LinkURL" href="https://www.adafruit.com/product/4064">https://www.adafruit.com/product/4064</a></li>&#13;
<li>Arduino Pro Mini 328: another small unit (3.3-V and 5-V versions): <a class="LinkURL" href="https://www.adafruit.com/product/2378">https://www.adafruit.com/product/2378</a></li>&#13;
<li>Adafruit FLORA, GEMMA M0, and Circuit Playground (or Circuit Playground Express) Miniature wearable electronic platform devices: &#13;
<ul>&#13;
<li>Circuit Playground Express: <a class="LinkURL" href="https://www.adafruit.com/product/3333">https://www.adafruit.com/product/3333</a></li>&#13;
<li>Circuit Playground Classic: <a class="LinkURL" href="https://www.adafruit.com/product/3000">https://www.adafruit.com/product/3000</a> </li>&#13;
<li>Flora: <a class="LinkURL" href="https://www.adafruit.com/product/659">https://www.adafruit.com/product/659</a></li>&#13;
<li>Gemma v2: <a class="LinkURL" href="https://www.adafruit.com/product/1222">https://www.adafruit.com/product/1222</a></li>&#13;
<li>Gemma M0: <a class="LinkURL" href="https://www.adafruit.com/product/3501">https://www.adafruit.com/product/3501</a></li>&#13;
</ul>&#13;
</li>&#13;
<li>Adafruit Trinket M0: a very small form factor, 32-bit SBC: <a class="LinkURL" href="https://www.adafruit.com/product/3500">https://www.adafruit.com/product/3500</a></li>&#13;
<li>Adafruit ItsyBitsy M0 Express and ItsyBitsy 32u4: modern versions of the Trinket with lots of I/O pins: <a class="LinkURL" href="https://www.adafruit.com/product/3727">https://www.adafruit.com/product/3727</a> and <a class="LinkURL" href="https://www.adafruit.com/product/3677">https://www.adafruit.com/product/3677</a></li>&#13;
<li>Adafruit Bluefruit LE Micro: a mini-SBC with built-in Bluetooth: <a class="LinkURL" href="https://www.adafruit.com/product/2661">https://www.adafruit.com/product/2661</a></li>&#13;
</ul>&#13;
<p>Because of the wide variety of available boards, this chapter doesn’t include the pinouts for each of these boards. See the Adafruit website for that information. </p>&#13;
<p>In addition to these SBCs, Adafruit offers a large line of Adafruit Feather SBCs. See section 7.1.2, “I<sup>2</sup>C on the Feather Bus,” in Chapter 7 for more information about the Feather bus. </p>&#13;
<p>Adafruit is constantly creating new SBCs that support the I<sup>2</sup>C bus, particularly Feather-based units. Almost all Adafruit SBCs fully support I<sup>2</sup>C in <span epub:type="pagebreak" id="Page_103" title="103"/>hardware. By the time you’re reading this, Adafruit has probably introduced many other boards that do not appear here, and no doubt I’ve missed a few while fishing for information on the Adafruit website. Visit <a class="LinkURL" href="https://www.adafruit.com/category/17">https://www.adafruit.com/category/17</a> to check out any new Arduino IDE–compatible units Adafruit may have developed. </p>&#13;
<h2 id="h1-502468c06-0003">	6.3	SparkFun Single-Board Computers</h2>&#13;
<p class="BodyFirst">SparkFun is the “little brother” to Adafruit. Both companies cater to electronics and software hobbyists and makers by supplying a wide variety of SBCs and modules that plug into those SBCs. Whereas Adafruit is famous for its Feather modules, SparkFun is known for the creation of the Qwiic (“quick”) bus based on I<sup>2</sup>C technology. SparkFun provides a wide variety of SBCs that support I<sup>2</sup>C, quite often using a Qwiic connector. The following are some of its most recent offerings: </p>&#13;
<ul>&#13;
<li>SparkFun RedBoard: SparkFun’s variant of the Arduino Uno: <a class="LinkURL" href="https://www.sparkfun.com/products/13975">https://www.sparkfun.com/products/13975</a> and <a class="LinkURL" href="https://www.sparkfun.com/products/15123">https://www.sparkfun.com/products/15123</a></li>&#13;
<li>SparkFun Qwiic Pro Micro, USB-C: small form factor Arduino-compatible module: <a class="LinkURL" href="https://www.sparkfun.com/products/15795">https://www.sparkfun.com/products/15795</a></li>&#13;
<li>SparkFun RedBoard Turbo: 32-bit Cortex M0+ (ARM) variant of the RedBoard: <a class="LinkURL" href="https://www.sparkfun.com/products/14812">https://www.sparkfun.com/products/14812</a></li>&#13;
<li>SparkFun Pro nRF52840 Mini: a mini board with Bluetooth capabilities: <a class="LinkURL" href="https://www.sparkfun.com/products/15025">https://www.sparkfun.com/products/15025</a></li>&#13;
<li>SparkFun Thing Plus, ESP32 WROOM: an ESP-32–based module that supports Bluetooth and Wi-Fi: <a class="LinkURL" href="https://www.sparkfun.com/products/15663">https://www.sparkfun.com/products/15663</a></li>&#13;
<li>SparkFun RedBoard Artemis Nano: a small-footprint, high-performance SBC with four on-board I<sup>2</sup>C ports: <a class="LinkURL" href="https://www.sparkfun.com/products/15443">https://www.sparkfun.com/products/15443</a></li>&#13;
<li>SparkFun RedBoard Artemis: a high-performance, 32-bit CPU with up to six independent I<sup>2</sup>C buses in an Arduino Uno form factor: <a class="LinkURL" href="https://www.sparkfun.com/products/15444">https://www.sparkfun.com/products/15444</a></li>&#13;
<li>SparkFun RedBoard Artemis ATP: a mega-footprint version of the Artemis with up to six I<sup>2</sup>C buses: <a class="LinkURL" href="https://www.sparkfun.com/products/15442">https://www.sparkfun.com/products/15442</a></li>&#13;
<li>SparkFun Thing Plus, Artemis: an Artemis module in a Feather form factor (see section 7.1.2, “I<sup>2</sup>C on the Feather Bus,”<span class="xref" itemid="xref_target_"/> in Chapter 7) that supports two I<sup>2</sup>C buses: <a class="LinkURL" href="https://www.sparkfun.com/products/15574">https://www.sparkfun.com/products/15574</a></li>&#13;
<li>SparkFun Thing Plus, SAMD51: Cortex M4 (ARM)-based high-performance module in a very small footprint: <a class="LinkURL" href="https://www.sparkfun.com/products/14713">https://www.sparkfun.com/products/14713</a></li>&#13;
<li>FreeSoC2 Development Board: Freescale Cortex M3 (ARM)-based board: <a class="LinkURL" href="https://www.sparkfun.com/products/13714">https://www.sparkfun.com/products/13714</a></li>&#13;
<li><span epub:type="pagebreak" id="Page_104" title="104"/>SparkFun RED-V RedBoard: a RISC-V–based Arduino Uno form factor board. Note that this board is not programmed using the Arduino IDE (at least, as this was being written): <a class="LinkURL" href="https://www.sparkfun.com/products/15594">https://www.sparkfun.com/products/15594</a></li>&#13;
<li>SparkFun RED-V Thing Plus: small form factor version of the RED-V: <a class="LinkURL" href="https://www.sparkfun.com/products/15799">https://www.sparkfun.com/products/15799</a></li>&#13;
<li>SparkFun Edge Development Board, Apollo3 Blue: a Cortex M4–based development module for edge (AI) computing: <a class="LinkURL" href="https://www.sparkfun.com/products/15170">https://www.sparkfun.com/products/15170</a></li>&#13;
<li>Alchitry Au FPGA Development Board: not a single-board <em>computer</em> at all. This is a Field Programmable Gate Array (FPGA) module with I<sup>2</sup>C support. Two versions are available: Alchitry Au (Gold) at <a class="LinkURL" href="https://www.sparkfun.com/products/16527">https://www.sparkfun.com/products/16527</a> and Alchitry Cu (Copper) at <a class="LinkURL" href="https://www.sparkfun.com/products/16526">https://www.sparkfun.com/products/16526</a>.</li>&#13;
</ul>&#13;
<p>Because of the wide variety of available boards, this chapter will not include the pinouts for each of these boards. See the SparkFun website for that information. For more on the Qwiic bus in this book, see section 7.2, “I<sup>2</sup>C on the SparkFun Qwiic Bus,” in Chapter 7.</p>&#13;
<p>As usual, you can expect that this list has expanded since this chapter was written. Visit the SparkFun website (<a class="LinkURL" href="https://www.sparkfun.com">https://www.sparkfun.com</a>) to check out what is currently available.</p>&#13;
<h2 id="h1-502468c06-0004">	6.4	The Teensy Family</h2>&#13;
<p class="BodyFirst">The Teensy series from PJRC is a popular set of microcontroller boards that you can program using the Arduino IDE with a set of libraries that PJRC provides. The Teensy series is popular with designers who want to program high-performance embedded systems using very small (dare I say, <em>teensy</em>) MCU modules.</p>&#13;
<p>As this was being written, PJRC was selling eight different SBC modules:</p>&#13;
<ul>&#13;
<li>Teensy 2.0: based on an 8-bit CPU (soon to be deprecated). Provides a single I<sup>2</sup>C port.</li>&#13;
<li>Teensy++ 2.0: an expanded (I/O) version of the Teensy 2.0 (also soon to be deprecated). Provides a single I<sup>2</sup>C port. </li>&#13;
<li>Teensy LC: a low-cost, 32-bit version of the Teensy, 3.3 V only. Provides two I<sup>2</sup>C ports.</li>&#13;
<li>Teensy 3.2: a 32-bit, Cortex M4 (ARM) CPU running at 72 MHz (overclockable to 96 MHz), 3.3 V with 5-V–tolerant pins. About the size of two postage stamps. Provides two I<sup>2</sup>C ports.</li>&#13;
<li>Teensy 3.5: a 32-bit, Cortex M4 CPU running at 120 MHz, 3.3 V with 5-V–tolerant pins. About the size of a big stick of gum. Provides three I<sup>2</sup>C ports.</li>&#13;
<li><span epub:type="pagebreak" id="Page_105" title="105"/>Teensy 3.6: a 32-bit, Cortex M4 CPU running at 180 MHz, 3.3 V only (no 5-V–tolerant pins). About the size of a big stick of gum. Provides four I<sup>2</sup>C ports.</li>&#13;
<li>Teensy 4.0: a 32-bit, Cortex M7 (ARM) CPU running at 600 MHz (overclockable to 1 GHz), 3.3 V only. About the size of two postage stamps. Provides three I<sup>2</sup>C ports.</li>&#13;
<li>Teensy 4.1: a 32-bit, Cortex M7 (ARM) CPU running at 600 MHz (overclockable to 1 GHz), 3.3V only. Expanded I/O version of Teensy 4.0 with Ethernet and SD card support. About the size of a big stick of gum. Provides three I<sup>2</sup>C ports.</li>&#13;
</ul>&#13;
<p>All Teensy I<sup>2</sup>C interfaces are hardware controlled. With Teensy-specific library code, you can operate these I<sup>2</sup>C interfaces at 400 MHz. Read about these SBCs at <a class="LinkURL" href="https://www.pjrc.com/store/index.xhtml">https://www.pjrc.com/store/index.xhtml</a>.</p>&#13;
<h2 id="h1-502468c06-0005">	6.5	Other Arduino-Compatible Single-Board Computers</h2>&#13;
<p class="BodyFirst">Because the Arduino design is open source and open hardware, many different companies produce Arduino-compatible boards. You can find some Chinese knock-offs for less than $10 online if you look hard enough. One vendor to look at is Seeed Studio, which is advertising Arduino-compatible boards for less than $8 on its website as I was writing this (<a class="LinkURL" href="https://www.seeedstudio.com/Seeeduino-V4-2-p-2517.xhtml">https://www.seeedstudio.com/Seeeduino-V4-2-p-2517.xhtml</a>). Seeed Studio also promotes the Grove interconnection bus (see section 7.4, “I<sup>2</sup>C on the Seeed Studio Grove Bus,” in Chapter 7), which has a large ecosystem of sensors and other devices that connect to Grove-compatible boards.</p>&#13;
<p>If you’re interested in other sources of Arduino-compatible boards, check out the following Wikipedia page that lists Arduinos and Arduino-compatible devices: <a class="LinkURL" href="https://en.wikipedia.org/wiki/List_of_Arduino_boards_and_compatible_systems">https://en.wikipedia.org/wiki/List_of_Arduino_boards_and_compatible_systems</a>.</p>&#13;
<p>Many various boards are compatible with the Arduino IDE that cover many different performance levels, memory capabilities, and I/O capabilities. Almost all Arduino-compatible boards include at least one hardware I<sup>2</sup>C interface, as I<sup>2</sup>C is one of the most common ways to expand the I/O capabilities of an Arduino device.</p>&#13;
<h2 id="h1-502468c06-0006">	6.6	The Raspberry Pi</h2>&#13;
<p class="BodyFirst">After the Arduino SBCs, the Raspberry Pi is perhaps the next most popular SBC used for interfacing to real-world devices via I<sup>2</sup>C. <a href="#figure6-8" id="figureanchor6-8">Figure 6-8</a> shows the pins on the Raspberry Pi GPIO connector where the <em>hardware</em> I<sup>2</sup>C pins are located. I emphasize hardware because the Pi also supports software-controlled I<sup>2</sup>C ports (more about that a little later).</p>&#13;
<span epub:type="pagebreak" id="Page_106" title="106"/><figure>&#13;
<img alt="" class="" height="947" src="image_fi/502468c06/f06008.png" width="659"/>&#13;
<figcaption><p><a id="figure6-8">Figure 6-8</a>: GPIO pinouts on the Raspberry Pi (40-pin connector). This image is copyrighted by the Raspberry Pi Foundation. Use here is allowed by the Creative Commons 4.0 license.</p></figcaption>&#13;
</figure>&#13;
<p>The Raspberry Pi is a 3.3-V device. Therefore, you must connect only 3.3-V I<sup>2</sup>C devices to the Pi’s GPIO connector. Connecting 5-V devices could damage the Raspberry Pi. If you need to use 5-V devices with the Pi, be sure <span epub:type="pagebreak" id="Page_107" title="107"/>to use a level converter, such as the TXB0104 Bi-Directional Level Shifter (<a class="LinkURL" href="https://www.adafruit.com/product/1875">https://www.adafruit.com/product/1875</a>).</p>&#13;
<p>There are a couple of known issues with the Raspberry Pi I<sup>2</sup>C interface. In particular, it does not support (at least at the time of writing) hardware clock stretching, so you cannot connect devices that add wait states by stretching the clock. However, you can specify a lower clock frequency; in some cases, this will solve the problem. It is also possible to use a software-based I<sup>2</sup>C system (using a pair of the GPIO pins as SDA and SCL). Software-based solutions can support clock stretching. See <a class="LinkURL" href="https://github.com/fivdi/i2c-bus/blob/master/doc/raspberry-pi-software-i2c.md">https://github.com/fivdi/i2c-bus/blob/master/doc/raspberry-pi-software-i2c.md</a> for details on setting up a software-based I<sup>2</sup>C port on the Raspberry Pi. Also see <a class="LinkURL" href="https://forums.raspberrypi.com/viewtopic.php?t=302381">https://forums.raspberrypi.com/viewtopic.php?t=302381</a> for information concerning clock stretching on the Pi 4.</p>&#13;
<h2 id="h1-502468c06-0007">	6.7	The Raspberry Pi Pico</h2>&#13;
<p class="BodyFirst">In 2021, the Raspberry Pi folks introduced their own embedded microcontroller, the RP2040, along with a small single-board computer, the Raspberry Pi Pico. This device was built to compete with the likes of Arduino boards in small, real-time embedded applications. The RP2040 has the following feature set:</p>&#13;
<ul>&#13;
<li>Dual-core Arm Cortex M0+ at 133 MHz</li>&#13;
<li>264KB of on-chip RAM</li>&#13;
<li>Support for up to 16MB of off-chip flash memory via a dedicated QSPI bus (the Pico board provides 2MB of flash ROM)</li>&#13;
<li>DMA controller</li>&#13;
<li>Interpolator and integer divider peripherals</li>&#13;
<li>30 GPIO pins, 4 of which can be used as analog inputs</li>&#13;
<li>Two UARTs, two SPI controllers, and two I<sup>2</sup>C controllers</li>&#13;
<li>16 PWM channels</li>&#13;
<li>One USB 1.1 controller and PHY, with host and device support</li>&#13;
<li>Eight Raspberry Pi Programmable I/O (PIO) state machines</li>&#13;
<li>USB mass-storage boot mode with UF2 support, for drag-and-drop programming</li>&#13;
<li>Cost of only $4 at the time of writing</li>&#13;
</ul>&#13;
<p>The Raspberry Pi Pico supports two independent I<sup>2</sup>C ports, which can be assigned to any pair of digital I/O pins on the device (see <a href="#figure6-9" id="figureanchor6-9">Figure 6-9</a>). The Raspberry Pi Pico is a 3.3-V device, which means you can connect only 3.3-V I<sup>2</sup>C devices to the Pico’s I<sup>2</sup>C pins. Connecting 5-V devices could damage the Raspberry Pi Pico. If you need to use 5-V devices with the Pico, use a level converter.</p>&#13;
<span epub:type="pagebreak" id="Page_108" title="108"/><figure>&#13;
<img alt="" class="" height="559" src="image_fi/502468c06/f06009.png" width="694"/>&#13;
<figcaption><p><a id="figure6-9">Figure 6-9</a>: GPIO pinouts on the Raspberry Pi Pico (40-pin header). This image is copyrighted by the Raspberry Pi Foundation. Use here is allowed by the Creative Commons 4.0 license.</p></figcaption>&#13;
</figure>&#13;
<p>Although the Raspberry Pi Pico isn’t the speediest little board around (the Teensy 4.<em>x</em> probably holds that honor among the more popular low-cost boards), at 133 MHz, it’s no sloth. Furthermore, unlike most Arduino-class SBCs, the Pico actually has two CPU cores on board, which you can program using the Pico SDK (C/C++) or Micro Python. At the time of writing, some enterprising individuals had actually hacked the Arduino IDE to program the Pico. Shortly afterward, Arduino provided official support (<a class="LinkURL" href="https://www.tomshardware.com/news/raspberry-pi-pico-arduino-official">https://www.tomshardware.com/news/raspberry-pi-pico-arduino-official</a>).</p>&#13;
<h2 id="h1-502468c06-0008">	6.8	The BeagleBone Black</h2>&#13;
<p class="BodyFirst">The BeagleBone Black is a low-cost, open source, and open hardware alternative to the Raspberry Pi. Technically, it provides three separate I<sup>2</sup>C interfaces, although only one pair of lines (I2C2) is available in the standard (default) configuration. The SCL and SDA lines appear on pins 19 and 20, respectively, of the P9 connector on the BeagleBone Black (see <a href="#figure6-10" id="figureanchor6-10">Figure 6-10</a>).</p>&#13;
<p>Unlike the Raspberry Pi, the BeagleBone Black seems to support clock stretching just fine. The I<sup>2</sup>C interface(s) can run at 100 kHz or 400 kHz.</p>&#13;
<span epub:type="pagebreak" id="Page_109" title="109"/><figure>&#13;
<img alt="" class="" height="624" src="image_fi/502468c06/f06010.png" width="660"/>&#13;
<figcaption><p><a id="figure6-10">Figure 6-10</a>: P9 pinouts on BeagleBone Black</p></figcaption>&#13;
</figure>&#13;
<h2 id="h1-502468c06-0009">	6.9	The PINE A64 and ROCKPro64</h2>&#13;
<p class="BodyFirst">The PINE A64 and ROCKPro64 SBCs were an attempt to make a very low-cost, 64-bit, Raspberry Pi–like system. The original Pine A64 sold for $15. The ROCKPro64 was a higher-end unit featuring on-board EMMC (flash) memory, six compute cores, USB-C/3.0, a PCI-e slot, and much more. Both boards include a 40-pin connector that is compatible with the Raspberry Pi GPIO connector, including the I<sup>2</sup>C interface. </p>&#13;
<p>For more information about the PINE64 products, visit <a class="LinkURL" href="https://www.pine64.org">https://www.pine64.org</a>.</p>&#13;
<h2 id="h1-502468c06-0010">	6.10	The Onion Omega</h2>&#13;
<p class="BodyFirst">The Onion Omega series is composed of some very tiny, low-cost SBCs running Linux variants. The Onion Omega2+ features an MT7688 SoC that incorporates a 580-MHz MIPS CPU, Wi-Fi, and 10/100 Mbs Ethernet. It includes 128MB of DDR2 DRAM memory and 32MB of on-board flash <span epub:type="pagebreak" id="Page_110" title="110"/>storage—and it supports I<sup>2</sup>C. A typical Onion Omega2+ module sells for under $15, though the purchase of other modules in the system might raise the price depending on what features you add.</p>&#13;
<p>Although the Onion Omega2+ modules are very small (about 1 inch × 1.7 inches, or 2.5 cm × 4.4 cm), the actual system size is a bit larger because the Onion system consists of a series of stackable modules. For example, to gain easy access to the I<sup>2</sup>C pins, you’ll likely want to use an Onion Dock module (though this is optional, as the Omega Onion2+ module has some breadboard-friendly I<sup>2</sup>C pins that you can wire directly into a circuit). The Omega2 pinout appears in <a href="#figure6-11" id="figureanchor6-11">Figure 6-11</a>.</p>&#13;
<figure>&#13;
<img alt="" class="" height="454" src="image_fi/502468c06/f06011.png" width="694"/>&#13;
<figcaption><p><a id="figure6-11">Figure 6-11</a>: Onion Omega2+ pinout</p></figcaption>&#13;
</figure>&#13;
<p>You can find more information about the Onion products at <a class="LinkURL" href="https://onion.io/omega2">https://onion.io/omega2</a>. SparkFun sells the Onion Omega line; visit its site at <a class="LinkURL" href="https://www.sparkfun.com/search/results?term=onion">https://www.sparkfun.com/search/results?term=onion</a>. </p>&#13;
<h2 id="h1-502468c06-0011">	6.11	The STM32 Single-Board Computer Family</h2>&#13;
<p class="BodyFirst">STMicroelectronics produces a wide set of development boards for its ARM microcontrollers. These SBCs provide different evaluation environments for CPUs operating at different speeds and with varying amount of I/O. Many of the units are programmable using the Arduino IDE, although STMicroelectronics provides its own development software for more professional use, as well as the MBED real-time operating system running on various STM32 boards.</p>&#13;
<p>Although the list of STMicroelectronics boards is too long to include here, the following sections provide details on a few of the boards used in this book. </p>&#13;
<h3 id="h2-502468c06-0009"><span epub:type="pagebreak" id="Page_111" title="111"/>6.11.1	STM32F767/Nucleo-144</h3>&#13;
<p class="BodyFirst">The STM32F767/Nucleo-144 is based on an ARM Cortex M7 at 216 MHz. It comes with 2-MB flash memory, 512-KB RAM, USB and Ethernet interfaces, and other I/O. It provides a set of headers that are compatible with Arduino Uno V3 (though 3.3 V only).</p>&#13;
<p>Because the STM32F767/Nucleo-144 provides a (3.3 V) set of connections that is mostly compatible with Arduino Uno, you can find the I<sup>2</sup>C pins in the usual place, which turns out to be pins PB8 (SCL) and PB9 (SDA) on the device (also corresponding to Arduino A4 and A5 pins). For more information on this board, see <a class="LinkURL" href="https://www.st.com/en/evaluation-tools/nucleo-f767zi.xhtml">https://www.st.com/en/evaluation-tools/nucleo-f767zi.xhtml</a>.</p>&#13;
<h3 id="h2-502468c06-0010">6.11.2	STM32F746G-Disco</h3>&#13;
<p class="BodyFirst">The STM32F746G-Disco (as in discovery kit, not disco music) is another 216-MHz, M7 device with an Arduino-compatible pinout (though still only 3.3 V), a color LCD display, Ethernet, USB, audio, camera interface, and other I/O. As it contains an Arduino-compatible shield connector, you can find the I<sup>2</sup>C pins in the usual place. For more information, visit the STMicroelectronics website for this module at <a class="LinkURL" href="https://www.st.com/en/evaluation-tools/32f746gdiscovery.xhtml">https://www.st.com/en/evaluation-tools/32f746gdiscovery.xhtml</a>. </p>&#13;
<h3 id="h2-502468c06-0011">6.11.3	STM32 Boards Galore</h3>&#13;
<p class="BodyFirst">STMicroelectronics makes a wide variety of evaluation boards with different amounts and types of I/O. If you’re interested in these boards, visit the product evaluation website at <a class="LinkURL" href="https://www.st.com/en/evaluation-tools/mcu-mpu-eval-tools.xhtml#products">https://www.st.com/en/evaluation-tools/mcu-mpu-eval-tools.xhtml#products</a>.</p>&#13;
<h2 id="h1-502468c06-0012">	6.12	The NetBurner MOD54415</h2>&#13;
<p class="BodyFirst">Most of the SBCs appearing in this chapter could probably be labeled hobbyist, discovery, or evaluation devices. Although plenty of real-world professional systems use these boards, professional embedded engineers might question the pedigree of such SBCs. Personally, I avoid religious or elitist arguments about what is “professional” and what is “hobbyist.” If a board does the job, that’s a sufficient argument for using it. Nevertheless, a big world exists beyond Arduino and Raspberry Pi single-board computers, and I would be remiss not to mention at least one example of a serious SBC commonly used in real-world professional embedded applications. </p>&#13;
<p>One such board is the NetBurner MOD54415 SBC, a small board built around a 250-MHz Coldfire CPU running the µC/OS real-time operating system (NetBurner also has the MODM7AE70, a Cortex M7 variant running at 300 MHz). The well-written TCP/IP stack and the use of an RTOS differentiate the NetBurner offerings from many of the hobbyist-level products. I’ll provide several programming examples using the MOD54415 later in this book.</p>&#13;
<p>For more information on NetBurner products, see <a class="LinkURL" href="https://www.netburner.com">https://www.netburner.com</a>.</p>&#13;
<h2 id="h1-502468c06-0013"><span epub:type="pagebreak" id="Page_112" title="112"/>	6.13	I<sup>2</sup>C on the Personal Computer</h2>&#13;
<p class="BodyFirst">Although most PCs (Windows, macOS, and Linux) support I<sup>2</sup>C communication for internal reasons (for example, SMBus for power management and VESA E-DDC on displays), few user programs have access to these I<sup>2</sup>C controllers. Even if they did, you couldn’t easily attach I<sup>2</sup>C peripherals to these buses. Wouldn’t it be nice if there were an I<sup>2</sup>C port on your PC to interface to I<sup>2</sup>C peripherals directly?</p>&#13;
<p>Well, there are several ways to do this. Of course, you could use an Arduino or other SBC as a coprocessor connected to a PC to handle I<sup>2</sup>C communications. However, that’s a lot of work. Another way to do this is to grab a Bus Pirate or I<sup>2</sup>C Driver device (see section 4.3, <span class="xref" itemid="xref_target_“The I2C Driver,”">“The I<sup>2</sup>C Driver,”</span> and section 4.4, <span class="xref" itemid="xref_target_“The Bus Pirate”">“The Bus Pirate”</span><span class="xref" itemid="xref_target_"/>). These devices allow you to send commands from the PC to an I<sup>2</sup>C bus using various commands (from a terminal window with the Bus Pirate or from an application with the I<sup>2</sup>C Driver). While using these devices makes it possible to control I<sup>2</sup>C from a PC application, it’s not very convenient.</p>&#13;
<p>Fortunately, FTDI (<a class="LinkURL" href="https://www.ftdichip.com">https://www.ftdichip.com</a>) has created an IC that does most of the work for you. The folks at Adafruit have built a little board with this chip on it to allow you to control I<sup>2</sup>C from a PC’s USB port. This device is the Adafruit FT232H Breakout – General Purpose USB to GPIO, SPI, I2C – USB C &amp; Stemma QT/Qwiic (<a class="LinkURL" href="https://www.adafruit.com/product/2264">https://www.adafruit.com/product/2264</a>). As its name suggests, it connects the USB to the I<sup>2</sup>C bus, to the SPI bus, or to generic GPIO pins. Along with some libraries that FTDI provides, you can easily control I<sup>2</sup>C peripherals directly from a PC application. </p>&#13;
<p>In addition to the FT232H Breakout, Adafruit sells a little board, the Adafruit MCP2221A Breakout – General Purpose USB to GPIO ADC I2C – Stemma QT/Qwiic (<a class="LinkURL" href="https://www.adafruit.com/product/4471">https://www.adafruit.com/product/4471</a>) that is also capable of driving an I<sup>2</sup>C bus from a USB. While it doesn’t provide as many GPIO pins as the FT232H Breakout, it is about half the price. It also includes a Qwiic connector (<em>Stemma QT</em> in Adafruit-speak) for easy connection to Qwiic-compatible devices.</p>&#13;
<h2 id="h1-502468c06-0014">	6.14	Chapter Summary</h2>&#13;
<p class="BodyFirst">This chapter provided a generic overview of numerous hobbyist- and professional-level SBCs that support I<sup>2</sup>C communication and concluded with a brief mention of controller I<sup>2</sup>C devices using a traditional PC. Its list of SBCs is by no means exhaustive. If you want more information about the products this chapter discusses, see the web links associated with each item. To delve into the many SBCs not discussed here, see “For More Information” next.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/>&#13;
</div>&#13;
<section class="box">&#13;
<h2><span epub:type="pagebreak" id="Page_113" title="113"/>For More Information</h2>&#13;
<p class="BoxBodyFirst">Hundreds, if not thousands, of SBCs in the real world support I<sup>2</sup>C communication. If none of the boards listed in this chapter suits your needs, a simple web search should turn up many additional candidates. If you’re building your own SBC and you want to incorporate I<sup>2</sup>C communication on the board, consult the datasheet for the MCU you are intending to use for more details.</p>&#13;
<p>As a starting point, here are some URLs that can help you locate various single-board computers that support I<sup>2</sup>C communications:</p>&#13;
<ol class="none">&#13;
<li>Raspberry Pi alternatives: <a class="LinkURL" href="https://www.seeedstudio.com/blog/2020/10/20/raspberry-pi-alternatives-17-best-single-board-computers-in-2020">https://www.seeedstudio.com/blog/2020/10/20/raspberry-pi-alternatives-17-best-single-board-computers-in-2020</a></li>&#13;
<li>Raspberry Pi Pico: <a class="LinkURL" href="https://www.raspberrypi.org/products/raspberry-pi-pico">https://www.raspberrypi.org/products/raspberry-pi-pico</a></li>&#13;
<li>Arduino-compatible systems: <a class="LinkURL" href="https://en.wikipedia.org/wiki/List_of_Arduino_boards_and_compatible_systems">https://en.wikipedia.org/wiki/List_of_Arduino_boards_and_compatible_systems</a></li>&#13;
<li>BeagleBone Black: <a class="LinkURL" href="https://beagleboard.org/black">https://beagleboard.org/black</a></li>&#13;
<li>SBC reviews: <a class="LinkURL" href="https://www.slant.co/topics/1629/~best-single-board-computers">https://www.slant.co/topics/1629/~best-single-board-computers</a></li>&#13;
<li>Low-cost SBCs: <a class="LinkURL" href="https://all3dp.com/2/cheapest-single-board-computer">https://all3dp.com/2/cheapest-single-board-computer</a></li>&#13;
<li>Seeed Studio Arduino-compatible SBCs: <a class="LinkURL" href="https://www.seeedstudio.com">https://www.seeedstudio.com</a></li>&#13;
<li>Teensy documentation: <a class="LinkURL" href="https://www.pjrc.com">https://www.pjrc.com</a></li>&#13;
<li>Arduino Leonardo documentation: <a class="LinkURL" href="https://www.arduino.cc/en/Guide/ArduinoLeonardoMicro">https://www.arduino.cc/en/Guide/ArduinoLeonardoMicro</a> and <a class="LinkURL" href="https://store-usa.arduino.cc/products/arduino-leonardo-with-headers">https://store-usa.arduino.cc/products/arduino-leonardo-with-headers</a></li>&#13;
</ol>&#13;
<div class="bottom hr"><hr/>&#13;
</div>&#13;
</section>&#13;
</aside>&#13;
</section>&#13;
</div>&#13;
</body></html>