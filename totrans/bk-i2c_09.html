<html><head></head><body>
<div id="sbo-rt-content"><section>&#13;
<header>&#13;
<h1 class="chapter">&#13;
<span class="ChapterNumber"><span epub:type="pagebreak" id="Page_115" title="115"/>7</span><br/>&#13;
<span class="ChapterTitle">I<sup>2</sup>C On Vendor Buses</span></h1>&#13;
</header>&#13;
<figure class="opener">&#13;
<img alt="" height="203" src="image_fi/book_art/chapterart.png" width="203"/>&#13;
</figure>&#13;
<p class="ChapterIntro">This chapter describes three popular vendor buses that support I<sup>2</sup>C signals: the Adafruit Feather bus, the SparkFun Qwiic bus (which Adafruit calls Stemma QT), and the Seeed Studio Grove bus. Hundreds of peripheral devices can connect to these buses, so it’s essential to familiarize yourself with them if you want to use a large number of existing peripheral devices in your systems. You’re also likely to encounter these buses in existing systems.</p>&#13;
<p>To connect a pair of I<sup>2</sup>C devices, you need only three wires: SCL, SDA, and Gnd. Outfits like Adafruit, Seeed Studio, and SparkFun sell a wide variety of I<sup>2</sup>C breakout boards that connect to systems using pins with these three signals. </p>&#13;
<p><span epub:type="pagebreak" id="Page_116" title="116"/>Unfortunately, breakout board designers tend to bring out the IC’s signals to arbitrary header pins on the board. Two breakout boards, even from the same manufacturer, might bring out SCL and SDA signals to different sets of pins. This makes it difficult to swap different breakout boards. A few companies have attempted to organize these signals, along with ground and power supply lines, using a consistent interconnection scheme. Sadly, none of those systems was widely adopted, so you can’t mix and match modules from different vendors using the same connector. </p>&#13;
<p>In some respects, the Arduino, Raspberry Pi, and BeagleBone GPIO connectors provide a de facto standard for connecting I<sup>2</sup>C devices to embedded systems. It was not uncommon to see <em>shields</em> (Arduino add-on boards), <em>hats</em> (Raspberry Pi add-on boards), and <em>capes</em> (BeagleBone add-on boards) connecting I<sup>2</sup>C peripherals to these computer systems. However, these add-on boards are physically large and proportionately expensive. It’s a waste of space and money to build an I<sup>2</sup>C peripheral on one of these platforms when you typically need only four wires (SDA, SCL, Gnd, and power) for the actual connection.</p>&#13;
<p>For this reason, vendors created the Feather, Qwiic, Grove, and other buses that incorporate I<sup>2</sup>C signals, and sometimes other signals as well, into more compact form factors. These buses provide a well-defined mechanical connector for I<sup>2</sup>C devices, allowing you to easily connect peripherals and controllers, typically by simply plugging in a cable between the two devices, no soldering required. Many controller and peripheral devices support these buses, making it easy to prototype systems with them.</p>&#13;
<h2 id="h1-502468c07-0001">	7.1	The Adafruit Feather Bus</h2>&#13;
<p class="BodyFirst">Adafruit developed the Feather bus to meet industry demands for a consistent platform that had a smaller form factor and was <em>CPU and peripheral agnostic</em>, pairable with any mix of appropriate CPUs and peripherals. As the Arduino devices became more popular, some designers wanted smaller devices that could easily fit in small spaces or even be included as part of a costume. The standard Arduino Uno and Mega 2560 boards were way too big for this purpose. To solve this problem, the Arduino company developed the Arduino Micro and Nano devices. Likewise, third parties developed devices like the Adafruit Trinket series. However, all these new devices used different pinouts for the signals coming off the PCBs. As such, a vibrant ecosystem of add-on boards similar to the Arduino shields for the Uno never developed. This made it difficult to design products that could easily swap out different CPUs, peripherals, battery packs, and other devices as with the standard Arduino Uno platform.</p>&#13;
<p>The Feather bus solved this problem by defining a standardized physical connection between an arbitrary CPU and an arbitrary set of peripheral devices using a fixed set of signals on 28 header pins (16 pins on one header, 12 on another). Because the signal lines exist in fixed positions on the Feather bus, Adafruit and many other vendors were able to create a whole set of add-on boards that could be used on a wide variety of SBCs that support the Feather bus.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/>&#13;
</div>&#13;
<section class="note">&#13;
<span epub:type="pagebreak" id="Page_117" title="117"/><h2><span class="NoteHead">NOTE</span></h2>&#13;
<p>	Read more about the history of the Feather bus and its design goals here: <a class="LinkURL" href="https://learn.adafruit.com/adafruit-feather/feather-history">https://learn.adafruit.com/adafruit-feather/feather-history</a>.</p>&#13;
<div class="bottom hr"><hr/>&#13;
</div>&#13;
</section>&#13;
</aside>&#13;
<p>The Feather bus has become very popular with costume designers and other system engineers who need compact, low-power designs. While it contains quite a few signals beyond I<sup>2</sup>C, its small form factor makes it a reasonable platform even if you’re hooking up only the I<sup>2</sup>C lines, power, and Gnd. Many vendors have produced Feather bus components, creating a large Feather ecosystem.</p>&#13;
<p>The Feather bus supports two basic component types: Feathers and FeatherWings. The <em>Feather</em> is a small SBC that brings out various analog, digital, and other signals, including I<sup>2</sup>C. Different Feather implementations include 8-bit and 32-bit CPUs with a wide degree of performance, memory, and power consumption features, allowing a system designer to pick a CPU or other Feather feature ideal for the task at hand while still connecting the wide range of Feather peripherals to that SBC.</p>&#13;
<p>A <em>FeatherWing</em> is an add-on board, like an Arduino shield, Pi HAT, or BeagleBone cape, holding the peripheral to connect to the controller. Although it is common to have only a single FeatherWing connected to a single Feather, it is possible to connect several FeatherWings to a single Feather (SBC) by stacking FeatherWings or by using FeatherWing expansion boards. This allows you to, for example, connect both OLED display and Ethernet FeatherWings to the same Feather. </p>&#13;
<p>A particular FeatherWing board might not use all the I/O pins on the bus; indeed, many FeatherWings use only the I<sup>2</sup>C and Gnd pins on the bus and don’t connect to any of the other pins. Many FeatherWings also don’t use the I<sup>2</sup>C signals at all—they might use just some of the digital or analog pins, or perhaps the SPI pins on the Feather bus. This book discusses only those FeatherWings that use the I<sup>2</sup>C pins on the bus.</p>&#13;
<p>Adafruit provides formal specifications for Feathers and FeatherWings; see the Adafruit Feature bus specification for more details (link provided in “For More Information” at the end of this chapter). For Feathers, the basic specifications are the following:</p>&#13;
<ul>&#13;
<li>Standard Feathers and Wings are 0.9 inches × 2.0 inches with 0.1-inch holes at each corner. The Feather length can vary a bit, but it should always maintain a width of 2.0 inches.</li>&#13;
<li>A 16-pin header strip appears on the bottom side, centered 1.0 inch from the left edge.</li>&#13;
<li>A 12-pin header strip appears on the top side, 1.2 inches from the left side. </li>&#13;
<li>The spacing between the two strips must remain 0.8 inches to ensure compatibility with FeatherWings.</li>&#13;
<li>All Feathers and FeatherWings use 3.3-V logic for all digital inputs and outputs. Analog inputs may vary, but they are usually 3.3 V as well.</li>&#13;
</ul>&#13;
<p><span epub:type="pagebreak" id="Page_118" title="118"/>SparkFun calls its Feather-compatible boards <em>Thing Plus</em> boards. Particle also has a set of Feather-compatible boards it calls <em>Photon</em>. See their websites for details (links provided in “For More Information”).</p>&#13;
<h3 id="h2-502468c07-0001">7.1.1	Feather Bus Pinouts</h3>&#13;
<p class="BodyFirst"><a href="#figure7-1" id="figureanchor7-1">Figure 7-1</a> shows a typical pinout organization for the Feather bus. I say “typical” because the pin assignments are not absolute. Not all Feathers support all the pin types present on the Feather bus. For example, not all devices support six analog inputs. Whenever a particular CPU does not support a particular pin type, that Feather will attempt to map some other appropriate CPU function in its place. For example, if a CPU doesn’t support six analog inputs, its Feather may substitute a digital I/O pin in its place.</p>&#13;
<figure>&#13;
<img alt="" class="keyline" height="660" src="image_fi/502468c07/f07001.png" width="365"/>&#13;
<figcaption><p><a id="figure7-1">Figure 7-1</a>: Typical Feather bus pinouts</p></figcaption>&#13;
</figure>&#13;
<p>In <a href="#figure7-1">Figure 7-1</a> I attached pin numbers to the 16-pin and 12-pin headers. This is not a standard Feather bus feature, however. Feather pins are generally identified by their function, not by a pin number. </p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/>&#13;
</div>&#13;
<section class="note">&#13;
<span epub:type="pagebreak" id="Page_119" title="119"/><h2><span class="NoteHead">NOTE</span></h2>&#13;
<p> <a href="#figure7-1">Figure 7-1</a> uses the modern names Controller Out, Peripheral In (COPI) and Controller In, Peripheral Out (CIPO) for the SPI signals MOSI and MISO. See “A Note About Terminology” in the Introduction for the reason I’ve changed these names.</p>&#13;
<div class="bottom hr"><hr/>&#13;
</div>&#13;
</section>&#13;
</aside>&#13;
<p>Often, the pins on the Feather bus can take on other functions based on the CPU’s feature set. For example, most Arduino-class CPUs allow you to redefine analog pins as digital I/O pins if you don’t require the analog input functionality, so many Feathers support digital I/O on pins A0 through A5. Similarly, a few CPUs provide a digital-to-analog output facility. By convention, most Feathers that have this feature attempt to map the DAC output to the A0 pin, so various FeatherWings that require this functionality can find it on a common pin.</p>&#13;
<p>The A0 through A5 pin designations do not necessarily correspond to Arduino analog pin numbers. For example, the Adafruit Feather 32u4 Basic maps the Arduino analog pins shown in <a href="#table7-1" id="tableanchor7-1">Table 7-1</a>.</p>&#13;
<figure>&#13;
<figcaption class="TableTitle"><p><a id="table7-1">Table 7-1</a>: Arduino-to-Feather Pin Mapping</p></figcaption>&#13;
<table border="1" id="table-502468c07-0001">&#13;
<thead>&#13;
<tr>&#13;
<td><b>Arduino pin</b></td>&#13;
<td><b>Feather pin</b></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td>ADC 7</td>&#13;
<td>A0</td>&#13;
</tr>&#13;
<tr>&#13;
<td>ADC 6</td>&#13;
<td>A1</td>&#13;
</tr>&#13;
<tr>&#13;
<td>ADC 5</td>&#13;
<td>A2</td>&#13;
</tr>&#13;
<tr>&#13;
<td>ADC 4</td>&#13;
<td>A3</td>&#13;
</tr>&#13;
<tr>&#13;
<td>ADC 1</td>&#13;
<td>A4</td>&#13;
</tr>&#13;
<tr>&#13;
<td>ADC 0</td>&#13;
<td>A5</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</figure>&#13;
<p>Feathers usually maintain the Arduino pin numbering for digital pins, since the I<sup>2</sup>C and SPI FeatherWings often use these pins as interrupt inputs and as chip selects. For example, D10 is the common chip select signal for the SPI bus.</p>&#13;
<h3 id="h2-502468c07-0002">7.1.2	I<sup>2</sup>C on the Feather Bus</h3>&#13;
<p class="BodyFirst">This book is about the I<sup>2</sup>C bus, not the Feather bus. While many Feather bus pins might prove useful to someone wanting to use an I<sup>2</sup>C FeatherWing—for example, to provide a reset line or an interrupt input—the main pins of interest to us in this book are the SCL (pin 27 in <a href="#figure7-1">Figure 7-1</a>) and SDA (pin 28) lines. Because the SDA and SCL lines are <em>always</em> brought out to the same pins on the Feather bus, any I<sup>2</sup>C-based FeatherWing peripheral will automatically work.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/>&#13;
</div>&#13;
<section class="note">&#13;
<h2><span class="NoteHead">Note</span></h2>&#13;
<p>	The Feather bus provides only one set of I<sup>2</sup>C lines. If the particular CPU on the Feather supports multiple I<sup>2</sup>C interfaces, only the first of these is brought out to the Feather bus. Technically, the other signals could come out on a pair of the other Feather bus pins if they just happen to map to those signals as an alternate function. However, this is not something you can count on. Furthermore, unless you built the FeatherWing yourself, it would not recognize the alternate I<sup>2</sup>C bus pins.</p>&#13;
<div class="bottom hr"><hr/>&#13;
</div>&#13;
</section>&#13;
</aside>&#13;
<p><span epub:type="pagebreak" id="Page_120" title="120"/>Because the Feather bus is a 3.3-V–only bus, the SDA and SCL lines have pullup resistors to the 3.3-V supply. If FeatherWings were to put 5 V on these lines, they could damage the underlying Feather CPU.</p>&#13;
<p>Feathers generally provide their own pullup resistors, as do most FeatherWings. If you attach multiple FeatherWings to a single Feather, each having its own set of pullup resistors, the cumulative pullup resistance could drop to a low value that interferes with I<sup>2</sup>C bus operation. FeatherWings that supply their own I<sup>2</sup>C pullups will often provide solder jumpers you can cut to remove the resistance from the lines (or, at the very least, the documentation will describe which resistors you remove). Consult your FeatherWing documentation for more details.</p>&#13;
<h3 id="h2-502468c07-0003">7.1.3	Multicontroller Operation</h3>&#13;
<p class="BodyFirst">The Feather bus assumes there is a single Feather (the controller) controlling one or more FeatherWings (peripherals). Multicontroller operation is not generally possible with the Feather bus. You might be able to wire a separate controller device to the SDA and SCL lines, but the Feather’s CPU may not support this. Generally, you should assume single-controller operation with the Feather bus. Of course, multiple peripherals are perfectly fine.</p>&#13;
<h3 id="h2-502468c07-0004">7.1.4	Feathers and FeatherWings</h3>&#13;
<p class="BodyFirst">Adafruit and several other manufacturers produce a wide variety of Feather CPU modules and an even wider variety of FeatherWings peripherals. Although every Feather module supports I<sup>2</sup>C, not all FeatherWings use I<sup>2</sup>C: some use the SPI bus, and some use just the digital and analog pins on the Feather bus. <a href="#table7-2" id="tableanchor7-2">Table 7-2</a> lists many of the Feathers available from multiple vendors. </p>&#13;
<figure>&#13;
<figcaption class="TableTitle"><p><a id="table7-2">Table 7-2</a>: Common Feather Modules</p></figcaption>&#13;
<table border="1" id="table-502468c07-0002">&#13;
<thead>&#13;
<tr>&#13;
<td><b>Name</b></td>&#13;
<td><b>Manufacturer</b></td>&#13;
<td><b>Description</b></td>&#13;
<td><b>Link</b></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td>nRF52840 Express</td>&#13;
<td>Adafruit</td>&#13;
<td>Bluetooth LE with Cortex M4 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4062">https://www.adafruit.com/product/4062</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>32u4 Bluefruit LE</td>&#13;
<td>Adafruit</td>&#13;
<td>Bluetooth LE with ATmega32u4 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/2829">https://www.adafruit.com/product/2829</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>M0 Bluefruit LE</td>&#13;
<td>Adafruit</td>&#13;
<td>Bluetooth LE with Cortex M0 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/2995">https://www.adafruit.com/product/2995</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>M0 WiFi</td>&#13;
<td>Adafruit</td>&#13;
<td>WiFi with Cortex M0+ CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3010">https://www.adafruit.com/product/3010</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>HUZZAH32ESP32</td>&#13;
<td>Adafruit</td>&#13;
<td>WiFi plus Bluetooth with ESP 32 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3405">https://www.adafruit.com/product/3405</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Feather 32u4 RFM95</td>&#13;
<td>Adafruit</td>&#13;
<td>LoRa Radio plus ATmega32u4 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3078">https://www.adafruit.com/product/3078</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>M0 RFM69HCW Packet Radio</td>&#13;
<td>Adafruit</td>&#13;
<td>Packet radio transceiver plus Cortex M0 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3176">https://www.adafruit.com/product/3176</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td><span epub:type="pagebreak" id="Page_121" title="121"/>STM32F405 Express</td>&#13;
<td>Adafruit</td>&#13;
<td>High-performance Cortex M4 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4382">https://www.adafruit.com/product/4382</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>WICED WiFi </td>&#13;
<td>Adafruit</td>&#13;
<td>WiFi plus Cortex M3 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3056">https://www.adafruit.com/product/3056</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Teensy 3.x Feather Adapter</td>&#13;
<td>Adafruit</td>&#13;
<td>Puts Teensy 3.2 on Feather bus</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3200">https://www.adafruit.com/product/3200</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Thing Plus SAMD51</td>&#13;
<td>SparkFun</td>&#13;
<td>Cortex M4 CPU</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/14713">https://www.sparkfun.com/products/14713</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Thing Plus Artemis</td>&#13;
<td>SparkFun</td>&#13;
<td>Artemis module (Cortex M4F, for machine learning)</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/15574">https://www.sparkfun.com/products/15574</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Thing Plus ESP32 WROOM</td>&#13;
<td>SparkFun</td>&#13;
<td>WiFi with ESP32 module</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/15663">https://www.sparkfun.com/products/15663</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>RED-V Thing Plus</td>&#13;
<td>SparkFun</td>&#13;
<td>RISC-V CPU</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/15799">https://www.sparkfun.com/products/15799</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Particle Boron LTE</td>&#13;
<td>Particle</td>&#13;
<td>Cellular modem plus nRF52840 SoC (Cortex M4) CPU</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3998">https://www.adafruit.com/product/3998</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Particle Argon</td>&#13;
<td>Particle</td>&#13;
<td>WiFi plus Bluetooth with nRF52840 and ESP32 processors</td>&#13;
<td><a class="LinkURL" href="https://docs.particle.io/argon">https://docs.particle.io/argon</a></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</figure>&#13;
<p><a href="#table7-3" id="tableanchor7-3">Table 7-3</a> lists some FeatherWings that interface via the I<sup>2</sup>C bus.</p>&#13;
<figure>&#13;
<figcaption class="TableTitle"><p><a id="table7-3">Table 7-3</a>: Examples of I<sup>2</sup>C-Based FeatherWing Modules</p></figcaption>&#13;
<table border="1" id="table-502468c07-0003">&#13;
<thead>&#13;
<tr>&#13;
<td><b>Name</b></td>&#13;
<td><b>Manufacturer</b></td>&#13;
<td><b>Description</b></td>&#13;
<td><b>Link</b></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td>128×64 OLED </td>&#13;
<td>Adafruit</td>&#13;
<td>Small OLED display for Feather</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4650">https://www.adafruit.com/product/4650</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>RTC plus SD Add-on</td>&#13;
<td>Adafruit</td>&#13;
<td>I<sup>2</sup>C-based real-time clock and SPI-based SD card interface</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/2922">https://www.adafruit.com/product/2922</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>DS3231 Precision RTC </td>&#13;
<td>Adafruit</td>&#13;
<td>High-precision real-time clock</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3028">https://www.adafruit.com/product/3028</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>8-Channel PWM or Servo</td>&#13;
<td>Adafruit</td>&#13;
<td>Eight-channel motor (servo) controller</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/2928">https://www.adafruit.com/product/2928</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>4-Digit 7-Segment LED Matrix Display</td>&#13;
<td>Adafruit</td>&#13;
<td>Seven-segment display driver</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3088">https://www.adafruit.com/product/3088</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>AMG8833 IR Thermal Camera </td>&#13;
<td>Adafruit</td>&#13;
<td>Infrared thermal imaging camera</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3622">https://www.adafruit.com/product/3622</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td><span epub:type="pagebreak" id="Page_122" title="122"/>14-Segment Alphanumeric LED </td>&#13;
<td>Adafruit</td>&#13;
<td>14-segment display driver</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3089">https://www.adafruit.com/product/3089</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>8×16 LED Matrix</td>&#13;
<td>Adafruit</td>&#13;
<td>Driver for 8×16 LED matrix</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3090">https://www.adafruit.com/product/3090</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Joy FeatherWing</td>&#13;
<td>Adafruit</td>&#13;
<td>Joystick and game button adapter</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/3632">https://www.adafruit.com/product/3632</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>LSM6DSOX plus LIS3MDL FeatherWing Precision 9-DoF IMU</td>&#13;
<td>Adafruit</td>&#13;
<td>Nine degrees of freedom sensor</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4565">https://www.adafruit.com/product/4565</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>ADXL343 plus ADT7410 Sensor </td>&#13;
<td>Adafruit</td>&#13;
<td>Motion and temperature sensing</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4147">https://www.adafruit.com/product/4147</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Qwiic Shield for Thing Plus</td>&#13;
<td>SparkFun</td>&#13;
<td>Breakout Qwiic connectors from Feather bus</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/16790">https://www.sparkfun.com/products/16790</a></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</figure>&#13;
<p>See “For More Information” for links to a more complete and up-to-date list of Adafruit Feather modules, SparkFun modules, and vendors selling Feathers (SBCs) and FeatherWing (peripheral) boards. </p>&#13;
<h2 id="h1-502468c07-0002">	7.2	I<sup>2</sup>C on the SparkFun Qwiic Bus</h2>&#13;
<p class="BodyFirst">Unlike the Feather bus, the SparkFun Qwiic bus is strictly an I<sup>2</sup>C bus. The idea behind Qwiic was to create a standard plug and receptacle for connecting I<sup>2</sup>C devices. As with the Adafruit Feather bus, the Qwiic connectors have become immensely popular with many compatible products employing the Qwiic bus, both peripherals and CPU modules.</p>&#13;
<p>Qwiic connectors are four-pin JST SH connectors with very tiny pins (1-mm pitch). The connectors have a standardized pinout given in <a href="#table7-4" id="tableanchor7-4">Table 7-4</a>.</p>&#13;
<figure>&#13;
<figcaption class="TableTitle"><p><a id="table7-4">Table 7-4</a>: Qwiic Connector Pinout</p></figcaption>&#13;
<table border="1" id="table-502468c07-0004">&#13;
<thead>&#13;
<tr>&#13;
<td><b>Pin </b></td>&#13;
<td><b>Function</b></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td>1</td>&#13;
<td>Gnd</td>&#13;
</tr>&#13;
<tr>&#13;
<td>2</td>&#13;
<td>Vcc</td>&#13;
</tr>&#13;
<tr>&#13;
<td>3</td>&#13;
<td>SDA</td>&#13;
</tr>&#13;
<tr>&#13;
<td>4</td>&#13;
<td>SCL</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</figure>&#13;
<p><a href="#figure7-2" id="figureanchor7-2">Figure 7-2</a> shows the connector layout.</p>&#13;
<span epub:type="pagebreak" id="Page_123" title="123"/><figure>&#13;
<img alt="" class="" height="130" src="image_fi/502468c07/f07002.png" width="277"/>&#13;
<figcaption><p><a id="figure7-2">Figure 7-2</a>: Qwiic pinout</p></figcaption>&#13;
</figure>&#13;
<p>The Qwiic bus is 3.3 V only. Connecting a 5-V device onto the Qwiic bus could damage the device, other devices on the bus, or the controller on the bus.</p>&#13;
<p>Though it was designed for a single controller, the Qwiic bus can, in theory, support multiple controllers. However, like the Feather bus, physical constraints prevent this. For example, the controller is generally responsible for putting 3.3 V on the Qwiic bus. If two different controllers each supply different values for 3.3 V to the bus, this could create some problems. In theory, you could cut the 3.3 V from multiple controllers and use an independent 3.3-V supply or allow a single controller to provide the voltage. In practice, you’d likely run into problems.</p>&#13;
<p>Adafruit also makes several controller and peripheral devices that connect to the Qwiic bus. While it has some “pure” Qwiic devices, for the most part its modules use the name STEMMA/QT rather than Qwiic. STEMMA/QT is upward compatible from Qwiic, the major difference being that it supports 5-V devices as well as 3.3-V devices. STEMMA/QT peripherals contain level-shifting circuitry on every board to allow them to work properly with either 3.3-V or 5-V signal lines. In theory, this is a great idea, allowing 5-V parts to be used on the bus alongside the 3.3-V part. In practice, almost all Qwiic bus peripherals and controllers are 3.3 V today, so this extension seems to have gone to waste.</p>&#13;
<p>As with the Feather bus, a fair number of different manufacturers have created Qwiic bus–compatible products: SparkFun has dozens of boards, Adafruit makes several, and Smart Prototyping makes a bunch (such as Zio; the link is provided in “For More Information”), as do many other outfits. See the next section, “Qwiic Bus Peripherals,” for a small sampling of the Qwiic-compatible products available.</p>&#13;
<h2 id="h1-502468c07-0003">	7.3	Qwiic Bus Peripherals</h2>&#13;
<p class="BodyFirst">At the time of writing, SparkFun had created more than 150 different Qwiic-compatible modules (SBCs and peripheral devices). Many other vendors also produce Qwiic-compatible boards. <a href="#table7-5" id="tableanchor7-5">Table 7-5</a> provides a tiny sampling of the Qwiic peripherals you can purchase.</p>&#13;
<figure>&#13;
<figcaption class="TableTitle"><p><a id="table7-5">Table 7-5</a>: Qwiic Peripheral Devices<span epub:type="pagebreak" id="Page_124" title="124"/></p></figcaption>&#13;
<table border="1" id="table-502468c07-0005">&#13;
<thead>&#13;
<tr>&#13;
<td><b>Name</b></td>&#13;
<td><b>Manufacturer</b></td>&#13;
<td><b>Description</b></td>&#13;
<td><b>Link</b></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td>Zio Qwiic MUX</td>&#13;
<td>Smart Prototyping</td>&#13;
<td>Eight-channel I<sup>2</sup>C multiplexer</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-Qwiic-Mux.xhtml">https://www.smart-prototyping.com/Zio-Qwiic-Mux.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Zio OLED Display</td>&#13;
<td>Smart Prototyping</td>&#13;
<td>128×32 OLED display</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-OLED-Display-0-91-in-128-32-Qwiic.xhtml">https://www.smart-prototyping.com/Zio-OLED-Display-0-91-in-128-32-Qwiic.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Zio 16 Servo Controller</td>&#13;
<td>Smart Prototyping</td>&#13;
<td>16-channel servo controller</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-16-Servo-Controller.xhtml">https://www.smart-prototyping.com/Zio-16-Servo-Controller.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Zio Qwiic IO Expander </td>&#13;
<td>Smart Prototyping</td>&#13;
<td>16-channel GPIO expander</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-Qwiic-IO-Expander.xhtml">https://www.smart-prototyping.com/Zio-Qwiic-IO-Expander.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Zio 4 DC Motor Controller</td>&#13;
<td>Smart Prototyping</td>&#13;
<td>Two-channel bidirectional motor control</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-4-DC-Motor-Controller.xhtml">https://www.smart-prototyping.com/Zio-4-DC-Motor-Controller.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Zio TOF Distance Sensor RFD77402 </td>&#13;
<td>Smart Prototyping</td>&#13;
<td>Time of flight distance measurement (10 cm to 200 cm)</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-TOF-Distance-Sensor-RFD77402.xhtml">https://www.smart-prototyping.com/Zio-TOF-Distance-Sensor-RFD77402.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Zio 9DoF IMU BNO055</td>&#13;
<td>Smart Prototyping</td>&#13;
<td>Nine degrees of freedom position measurement</td>&#13;
<td><a class="LinkURL" href="https://www.smart-prototyping.com/Zio-9DOF-IMU-BNO055.xhtml">https://www.smart-prototyping.com/Zio-9DOF-IMU-BNO055.xhtml</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>9DoF Sensor Stick</td>&#13;
<td>SparkFun</td>&#13;
<td>Nine degrees of freedom position measurement</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/13944">https://www.sparkfun.com/products/13944</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>6 Degrees of Freedom Breakout LSM6DS3</td>&#13;
<td>SparkFun</td>&#13;
<td>Six degrees of freedom position measurement</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/13339">https://www.sparkfun.com/products/13339</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Atmospheric Sensor Breakout BME280</td>&#13;
<td>SparkFun</td>&#13;
<td>Barometric pressure, humidity, and temperature</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/13676">https://www.sparkfun.com/products/13676</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>I<sup>2</sup>C DAC Breakout</td>&#13;
<td>SparkFun</td>&#13;
<td>12-bit digital-to-analog converter</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/12918">https://www.sparkfun.com/products/12918</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>16 Output I/O Expander Breakout SX1509</td>&#13;
<td>SparkFun</td>&#13;
<td>16-channel GPIO expander</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/13601">https://www.sparkfun.com/products/13601</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>GPS Breakout XA1110</td>&#13;
<td>SparkFun</td>&#13;
<td>Global Positioning Satellite module</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/14414">https://www.sparkfun.com/products/14414</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>RFID Qwiic Reader</td>&#13;
<td>SparkFun</td>&#13;
<td>Radio Frequency ID tag reader</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/15191">https://www.sparkfun.com/products/15191</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Qwiic Thermocouple Amplifier MCP9600 </td>&#13;
<td>SparkFun</td>&#13;
<td>Read temperatures with a thermocouple</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/16295">https://www.sparkfun.com/products/16295</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td><span epub:type="pagebreak" id="Page_125" title="125"/>Qwiic Quad Solid State Relay Kit</td>&#13;
<td>SparkFun</td>&#13;
<td>Four-channel high-current/high-voltage SSRs</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/16833">https://www.sparkfun.com/products/16833</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>Qwiic Twist RGB Rotary Encoder Breakout</td>&#13;
<td>SparkFun</td>&#13;
<td>Rotary encoder with RGB LED</td>&#13;
<td><a class="LinkURL" href="https://www.sparkfun.com/products/15083">https://www.sparkfun.com/products/15083</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>BH1750 Light Sensor</td>&#13;
<td>Adafruit</td>&#13;
<td>Ambient light sensor</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4681">https://www.adafruit.com/product/4681</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>LPS25 Pressure Sensor</td>&#13;
<td>Adafruit</td>&#13;
<td>Atmospheric pressure sensor</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4530">https://www.adafruit.com/product/4530</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>PCF8591 Quad 8-bit ADC plus 8-bit DAC</td>&#13;
<td>Adafruit</td>&#13;
<td>Four-channel 8-bit ADC and single-channel 8-bit DAC</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4648">https://www.adafruit.com/product/4648</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>DS3502 I<sup>2</sup>C Digital 10K Potentiometer Breakout</td>&#13;
<td>Adafruit</td>&#13;
<td>10 kΩ digital potentiometer</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4286">https://www.adafruit.com/product/4286</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>MCP4728 Quad DAC with EEPROM</td>&#13;
<td>Adafruit</td>&#13;
<td>Four-channel 12-bit DAC </td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4470">https://www.adafruit.com/product/4470</a></td>&#13;
</tr>&#13;
<tr>&#13;
<td>PMSA003I Air Quality Breakout</td>&#13;
<td>Adafruit</td>&#13;
<td>Air quality monitor</td>&#13;
<td><a class="LinkURL" href="https://www.adafruit.com/product/4632">https://www.adafruit.com/product/4632</a></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</figure>&#13;
<p>See “For More Information” for links to information on Zio devices, SparkFun devices, and Adafruit STEMMA/QT devices.</p>&#13;
<h2 id="h1-502468c07-0004">	7.4	I<sup>2</sup>C on the Seeed Studio Grove Bus</h2>&#13;
<p class="BodyFirst">The Grove bus, created by Seeed Studio in 2010, was one of the earliest attempts at a standardized hobbyist interconnection system. It uses a proprietary four-pin locking connector on 2-mm centers, though it’s easy enough to force a JST PH four-pin female connector into the Grove socket.</p>&#13;
<p>The Grove system looks like somebody went to the expense of creating a custom connector and then tried to utilize that connector for as many different things as possible. Grove uses a single connector to carry 3.3-V and 5-V versions of digital signals, analog signals, I<sup>2</sup>C signals, and UART signals. This means it’s easy to damage a device by plugging it into a connector with a different set of signals or voltages on the same pins. You must be careful to ensure you’re mating compatible devices because the connector offers no protection or indication of the types of signals present.</p>&#13;
<p><a href="#figure7-3" id="figureanchor7-3">Figure 7-3</a> shows the pin layout for the Grove connector.</p>&#13;
<span epub:type="pagebreak" id="Page_126" title="126"/><figure>&#13;
<img alt="" class="" height="146" src="image_fi/502468c07/f07003.png" width="286"/>&#13;
<figcaption><p><a id="figure7-3">Figure 7-3</a>: Grove connector</p></figcaption>&#13;
</figure>&#13;
<p>This book will not consider the UART, digital, or analog functions of the Grove connection system; <a href="#table7-6" id="tableanchor7-6">Table 7-6</a> simply lists the different possible functions for each Grove pin to show that the I<sup>2</sup>C signals share the same pins as other functions in the Grove system. Be aware that different devices might expect different voltages on the Vcc pin (that is, 3.3 V or 5 V).</p>&#13;
<figure>&#13;
<figcaption class="TableTitle"><p><a id="table7-6">Table 7-6</a>: Grove Connector Pin Functions</p></figcaption>&#13;
<table border="1" id="table-502468c07-0006">&#13;
<thead>&#13;
<tr>&#13;
<td><b>Pin</b></td>&#13;
<td><b>I<sup>2</sup>C function</b></td>&#13;
<td><b>UART function</b></td>&#13;
<td><b>Digital function</b></td>&#13;
<td><b>Analog function</b></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td>1</td>&#13;
<td>SCL</td>&#13;
<td>Rx</td>&#13;
<td>D<em>n</em></td>&#13;
<td>A<em>n</em></td>&#13;
</tr>&#13;
<tr>&#13;
<td>2</td>&#13;
<td>SDA</td>&#13;
<td>Tx</td>&#13;
<td>D<em>n+1</em></td>&#13;
<td>A<em>n+1</em></td>&#13;
</tr>&#13;
<tr>&#13;
<td>3</td>&#13;
<td>Vcc</td>&#13;
<td>Vcc</td>&#13;
<td>Vcc</td>&#13;
<td>Vcc</td>&#13;
</tr>&#13;
<tr>&#13;
<td>4</td>&#13;
<td>Gnd</td>&#13;
<td>Gnd</td>&#13;
<td>Gnd</td>&#13;
<td>Gnd</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</figure>&#13;
<p>Although a few manufacturers have placed Grove receptacles on their CPU boards, Seeed Studio seems to be the primary (if not only) manufacturer of Grove modules. The Seeed Studio Wiki gives specs for the Grove interconnection system and a list of the Grove products the company currently manufactures (link provided in “For More Information”).</p>&#13;
<h2 id="h1-502468c07-0005">	7.5	Chapter Summary</h2>&#13;
<p class="BodyFirst">This chapter discussed three common vendor-defined buses that support the I<sup>2</sup>C bus: the Adafruit Feather bus, the SparkFun Qwiic bus, and Seeed Studio’s Grove connection. </p>&#13;
<p>The Adafruit Feather bus is probably the most popular of the three, in terms of the number of Feathers (CPU boards) and Featherwings (peripheral boards) available. The SparkFun Qwiic bus is also very popular. The main difference between the two is that the Qwiic bus is I<sup>2</sup>C (plus power) only, whereas the Feather bus also contains other signals. The Qwiic connection system is more convenient for attaching and detaching small devices to a breadboard system. </p>&#13;
<p>The Grove connection system is similar to Qwiic insofar as it is a four-wire system. Different variants of the Grove connector support I<sup>2</sup>C, SPI, serial, analog, and digital signals, though you must take care not to confuse signal types when using the Grove bus.</p>&#13;
<p><span epub:type="pagebreak" id="Page_127" title="127"/>The main advantage of these vendor buses is the <em>ecosystem</em> support they provide. Several different manufacturers provide small boards that attach to these buses, making it easy to add functionality to systems you are assembling.</p>&#13;
<aside epub:type="sidebar">&#13;
<div class="top hr"><hr/>&#13;
</div>&#13;
<section class="box">&#13;
<h2>For More Information</h2>&#13;
<ol class="none">&#13;
<li>The Arduino (Uno) connector: <a class="LinkURL" href="https://content.arduino.cc/assets/Pinout-UNOrev3_latest.pdf%20">https://content.arduino.cc/assets/Pinout-UNOrev3_latest.pdf </a></li>&#13;
<li>Pinouts for various Arduino boards: <a class="LinkURL" href="https://arduino.pinout.guide">https://arduino.pinout.guide</a></li>&#13;
<li>The Raspberry Pi GPIO connector: <a class="LinkURL" href="https://www.raspberrypi.org/documentation/usage/gpio">https://www.raspberrypi.org/documentation/usage/gpio</a></li>&#13;
<li>The Adafruit Feather bus: <a class="LinkURL" href="https://learn.adafruit.com/adafruit-feather/feather-specification">https://learn.adafruit.com/adafruit-feather/feather-specification</a></li>&#13;
<li>Complete and up-to-date list of Adafruit Feather modules: <a class="LinkURL" href="https://www.adafruit.com/feather">https://www.adafruit.com/feather</a></li>&#13;
<li>SparkFun: <a class="LinkURL" href="https://sparkfun.com">https://sparkfun.com</a></li>&#13;
<li>SparkFun modules: <a class="LinkURL" href="https://www.sparkfun.com/search/results?term=Feather">https://www.sparkfun.com/search/results?term=Feather</a> </li>&#13;
<li>Vendors selling Feathers (SBCs) and FeatherWing (peripheral) boards: <a class="LinkURL" href="https://github.com/adafruit/awesome-feather">https://github.com/adafruit/awesome-feather</a></li>&#13;
<li>The SparkFun Qwiic system: <a class="LinkURL" href="https://www.sparkfun.com/qwiic">https://www.sparkfun.com/qwiic</a></li>&#13;
<li>Particle: <a class="LinkURL" href="https://www.particle.io">https://www.particle.io</a></li>&#13;
<li>Adafruit’s STEMMA/QT (their variant of Qwiic): <a class="LinkURL" href="https://learn.adafruit.com/introducing-adafruit-stemma-qt/technical-specs">https://learn.adafruit.com/introducing-adafruit-stemma-qt/technical-specs</a></li>&#13;
<li>The Grove interconnect: <a class="LinkURL" href="https://wiki.seeedstudio.com/Grove_System">https://wiki.seeedstudio.com/Grove_System</a></li>&#13;
<li>Zio: <a class="LinkURL" href="https://www.smart-prototyping.com/Zio">https://www.smart-prototyping.com/Zio</a></li>&#13;
<li>Particle Photon: <a class="LinkURL" href="https://docs.particle.io/datasheets/wi-fi/photon-2-datasheet">https://docs.particle.io/datasheets/wi-fi/photon-2-datasheet</a></li>&#13;
<li>Smart Prototyping Zio modules: <a class="LinkURL" href="https://www.smart-prototyping.com/blog/Introducing-I%C2%B2C-with-ZIO-and-Qwiic">https://www.smart-prototyping.com/blog/Introducing-I²C-with-ZIO-and-Qwiic</a></li>&#13;
</ol>&#13;
<div class="bottom hr"><hr/>&#13;
</div>&#13;
</section>&#13;
</aside>&#13;
</section>&#13;
</div>&#13;
</body></html>