- en: Chapter 1. Setting Up Your Virtual Lab
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 1 章 设置您的虚拟实验室
- en: As you work through this book, you’ll get hands-on experience using different
    tools and techniques for penetration testing by working in a virtual lab running
    in the VMware virtualization software. I’ll walk you through setting up your lab
    to run multiple operating systems inside your base operating system in order to
    simulate an entire network using just one physical machine. We’ll use our lab
    to attack target systems throughout this book.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的学习过程中，您将通过在 VMware 虚拟化软件中运行的虚拟实验室中实践渗透测试的不同工具和技术。我将引导您设置实验室，以便在您的基础操作系统中运行多个操作系统，从而仅用一台物理机器模拟整个网络。我们将利用这个实验室来攻击本书中的目标系统。
- en: Installing VMware
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 VMware
- en: As the first step in setting up your virtual lab, download and install a desktop
    VMware product. VMware Player is available free for personal use for Microsoft
    Windows and Linux operating systems (*[http://www.vmware.com/products/player/](http://www.vmware.com/products/player/)*).
    VMware also offers VMware Workstation (*[http://www.vmware.com/products/workstation/](http://www.vmware.com/products/workstation/)*)
    for Windows and Linux, which includes additional features such as the ability
    to take snapshots of the virtual machine that you can revert to in case you break
    something. VMware Workstation is available for free for 30 days, but after that,
    you will need to buy it or switch back to using VMware Player.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 设置虚拟实验室的第一步是下载并安装一个桌面 VMware 产品。VMware Player 提供了适用于 Microsoft Windows 和 Linux
    操作系统的个人免费版本（* [http://www.vmware.com/products/player/](http://www.vmware.com/products/player/)
    *）。VMware 还为 Windows 和 Linux 提供 VMware Workstation（* [http://www.vmware.com/products/workstation/](http://www.vmware.com/products/workstation/)
    *），该版本包含额外的功能，比如能够拍摄虚拟机快照，万一操作失误可以恢复到先前状态。VMware Workstation 提供 30 天免费试用，但过后需要购买，或者切换回使用
    VMware Player。
- en: Mac users can run a trial version of VMware Fusion (*[http://www.vmware.com/products/fusion/](http://www.vmware.com/products/fusion/)*)
    free for 30 days, and it costs only about $50 after that. As a Mac user, I’ll
    use VMware Fusion throughout the book, but setup instructions are also included
    for VMware Player.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Mac 用户可以免费试用 VMware Fusion（* [http://www.vmware.com/products/fusion/](http://www.vmware.com/products/fusion/)
    *）30天，之后只需约 $50。作为一名 Mac 用户，我将在整本书中使用 VMware Fusion，但也提供了 VMware Player 的设置说明。
- en: Download the version of VMware that matches your operating system and architecture
    (32- or 64-bit). If you encounter any problems installing VMware, you’ll find
    plenty of support at the VMware website.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 下载与您的操作系统和架构（32 位或 64 位）匹配的 VMware 版本。如果在安装 VMware 时遇到任何问题，您可以在 VMware 网站上找到丰富的支持资源。
- en: Setting Up Kali Linux
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置 Kali Linux
- en: Kali Linux is a Debian-based Linux distribution that comes with a wide variety
    of preinstalled security tools that we’ll use throughout this book. This book
    is written for Kali 1.0.6, the current version as of this writing. You’ll find
    a link to a torrent containing a copy of Kali 1.0.6 at this book’s website (*[http://nostarch.com/pentesting/](http://nostarch.com/pentesting/)*).
    As time passes, newer versions of Kali will be released. If you would like, feel
    free to download the latest version of Kali Linux from *[http://www.kali.org/](http://www.kali.org/)*.
    Keep in mind, though, that many of the tools we’ll use in this book are in active
    development, so if you use a newer version of Kali, some of the exercises may
    differ from the walkthroughs in this book. If you prefer everything to work as
    written, I recommend using the version of Kali 1.0.6 provided in the torrent (a
    file called *kali-linux-1.0.6-vm-i486.7z*), which is a prebuilt VMware image compressed
    with 7-Zip.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux 是一个基于 Debian 的 Linux 发行版，预装了多种安全工具，我们将在本书中使用这些工具。本书是基于 Kali 1.0.6
    版本编写的，这是写作时的最新版本。您可以在本书网站上找到包含 Kali 1.0.6 版本的种子链接（* [http://nostarch.com/pentesting/](http://nostarch.com/pentesting/)
    *）。随着时间的推移，Kali 会发布更新的版本。如果您愿意，您可以从 * [http://www.kali.org/](http://www.kali.org/)
    * 下载 Kali Linux 的最新版本。然而，请记住，我们在本书中使用的许多工具仍在积极开发中，因此如果您使用更新版本的 Kali，某些练习可能与本书中的操作步骤有所不同。如果您希望一切如书中所述运行，我建议使用种子中提供的
    Kali 1.0.6 版本（一个名为 *kali-linux-1.0.6-vm-i486.7z* 的文件），这是一个预构建的 VMware 镜像，已使用 7-Zip
    压缩。
- en: Note
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You can find 7-Zip programs for Windows and Linux platforms at *[http://www.7-zip.org/download.html](http://www.7-zip.org/download.html)*.
    For Mac users, I recommend Ez7z from *[http://ez7z.en.softonic.com/mac/](http://ez7z.en.softonic.com/mac/)*.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在 * [http://www.7-zip.org/download.html](http://www.7-zip.org/download.html)
    * 找到适用于 Windows 和 Linux 平台的 7-Zip 程序。对于 Mac 用户，我推荐从 * [http://ez7z.en.softonic.com/mac/](http://ez7z.en.softonic.com/mac/)
    * 下载 Ez7z。
- en: Once the 7-Zip archive is decompressed, in VMware go to **File** ▸ **Open**
    and direct it to the file *Kali Linux 1.0.6 32 bit.vmx* in the decompressed *Kali
    Linux 1.0.6 32 bit* folder.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦7-Zip归档文件解压完成，在VMware中转到**文件** ▸ **打开**，并指向解压后的*Kali Linux 1.0.6 32位*文件夹中的*Kali
    Linux 1.0.6 32 bit.vmx*文件。
- en: Once the virtual machine opens, click the **Play** button and, when prompted
    as shown in [Figure 1-1](ch01.xhtml#opening_the_kali_linux_virtual_machine "Figure 1-1. Opening
    the Kali Linux virtual machine"), choose **I copied it**.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦虚拟机启动，点击**播放**按钮，并在如[图1-1](ch01.xhtml#opening_the_kali_linux_virtual_machine
    "图1-1. 打开Kali Linux虚拟机")所示的提示下，选择**我复制了它**。
- en: As Kali Linux boots up, you will be prompted as shown in [Figure 1-2](ch01.xhtml#booting_kali_linux
    "Figure 1-2. Booting Kali Linux"). Choose the top (default) highlighted option.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当Kali Linux启动时，您将看到如[图1-2](ch01.xhtml#booting_kali_linux "图1-2. 启动Kali Linux")所示的提示。选择顶部（默认）高亮显示的选项。
- en: '![Opening the Kali Linux virtual machine](httpatomoreillycomsourcenostarchimages2030194.png.jpg)Figure 1-1. Opening
    the Kali Linux virtual machine![Booting Kali Linux](httpatomoreillycomsourcenostarchimages2030196.png.jpg)Figure 1-2. Booting
    Kali Linux'
  id: totrans-13
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![打开Kali Linux虚拟机](httpatomoreillycomsourcenostarchimages2030194.png.jpg)图1-1.
    打开Kali Linux虚拟机 ![启动Kali Linux](httpatomoreillycomsourcenostarchimages2030196.png.jpg)图1-2.
    启动Kali Linux'
- en: Once Kali Linux boots, you will be presented with a login screen like the one
    shown in [Figure 1-3](ch01.xhtml#kali_login_screen "Figure 1-3. Kali login screen").
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦Kali Linux启动，您将看到一个如[图1-3](ch01.xhtml#kali_login_screen "图1-3. Kali登录屏幕")所示的登录屏幕。
- en: '![Kali login screen](httpatomoreillycomsourcenostarchimages2030198.png.jpg)Figure 1-3. Kali
    login screen'
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![Kali登录屏幕](httpatomoreillycomsourcenostarchimages2030198.png.jpg)图1-3. Kali登录屏幕'
- en: Click **Other** and enter the default credentials for Kali Linux, *root:toor*,
    as shown in [Figure 1-4](ch01.xhtml#logging_into_kali "Figure 1-4. Logging into
    Kali"). Then click the **Log In** button.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**其他**，并输入Kali Linux的默认凭据，*root:toor*，如[图1-4](ch01.xhtml#logging_into_kali
    "图1-4. 登录Kali")所示。然后点击**登录**按钮。
- en: '![Logging into Kali](httpatomoreillycomsourcenostarchimages2030200.png.jpg)Figure 1-4. Logging
    into Kali'
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![登录到Kali](httpatomoreillycomsourcenostarchimages2030200.png.jpg)图1-4. 登录到Kali'
- en: You will be presented with a screen like the one shown in [Figure 1-5](ch01.xhtml#kali_linux_gui
    "Figure 1-5. The Kali Linux GUI").
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将看到如[图1-5](ch01.xhtml#kali_linux_gui "图1-5. Kali Linux图形用户界面")所示的屏幕。
- en: '![The Kali Linux GUI](httpatomoreillycomsourcenostarchimages2030202.png.jpg)Figure 1-5. The
    Kali Linux GUI'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![Kali Linux图形用户界面](httpatomoreillycomsourcenostarchimages2030202.png.jpg)图1-5.
    Kali Linux图形用户界面'
- en: Configuring the Network for Your Virtual Machine
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置虚拟机的网络
- en: 'Because we’ll be using Kali Linux to attack our target systems over a network,
    we need to place all our virtual machines on the same virtual network (we will
    see an example of moving between networks in [Chapter 13](ch13.xhtml "Chapter 13. Post
    Exploitation"), which covers post exploitation). VMware offers three options for
    virtual network connections: bridged, NAT, and host only. You should choose the
    bridged option, but here’s a bit of information about each:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们将使用Kali Linux通过网络攻击我们的目标系统，所以我们需要将所有虚拟机放置在同一个虚拟网络中（我们将在[第13章](ch13.xhtml
    "第13章. 后期利用")中看到如何在网络之间移动的示例，该章节讲解了后期利用）。VMware提供了三种虚拟网络连接选项：桥接、NAT和仅主机。你应该选择桥接选项，以下是每种选项的一些信息：
- en: The *bridged network* connects the virtual machine directly to the local network
    using the same connection as the host system. As far as the local network is concerned,
    our virtual machine is just another node on the network with its own IP address.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*桥接网络*使用与主机系统相同的连接，将虚拟机直接连接到本地网络。就本地网络而言，我们的虚拟机只是网络上的另一个节点，拥有自己的IP地址。'
- en: '*NAT*, short for *network address translation*, sets up a private network on
    the host machine. The private network translates outgoing traffic from the virtual
    machine to the local network. On the local network, traffic from the virtual machine
    will appear to come from the host machine’s IP address.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*NAT*，即*网络地址转换*，在主机机器上设置一个私有网络。私有网络将虚拟机的外发流量转换为本地网络的流量。在本地网络中，虚拟机的流量将显示为来自主机机器的IP地址。'
- en: The *host-only* network limits the virtual machine to a local private network
    on the host. The virtual machine will be able to communicate with other virtual
    machines in the host-only network as well as the host machine itself, but it will
    not be able to send or receive any traffic with the local network or the Internet.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*仅主机* 网络将虚拟机限制在主机上的局部私有网络中。虚拟机可以与主机仅限网络中的其他虚拟机以及主机本身进行通信，但不能与本地网络或互联网进行任何数据交换。'
- en: Note
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Because our target virtual machines will have multiple known security vulnerabilities,
    use caution when attaching them to your local network because anyone else on that
    network can also attack these machines. For this reason, I do not recommend working
    through this book on a public network where you do not trust the other users.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们的目标虚拟机存在多个已知的安全漏洞，在将它们连接到本地网络时需要小心，因为该网络上的其他人也可能攻击这些机器。因此，我不建议在不信任其他用户的公共网络上通过本书进行操作。
- en: By default, the Kali Linux virtual machine network adapter is set to NAT. Here’s
    how to change that option on both Windows and Mac OS.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Kali Linux 虚拟机的网络适配器设置为 NAT。以下是如何在 Windows 和 Mac OS 中更改该选项的方法。
- en: VMware Player on Microsoft Windows
  id: totrans-28
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Microsoft Windows 上的 VMware Player
- en: To change the virtual network on VMware Player for Windows, start VMware Player
    and then click your Kali Linux virtual machine. Choose **Edit virtual machine
    settings**, as shown in [Figure 1-6](ch01.xhtml#changing_the_vmware_network_adapter
    "Figure 1-6. Changing the VMware network adapter"). (If you’re still running Kali
    Linux in VMware Player, choose **Player** ▸ **Manage** ▸ **Virtual machine settings**.)
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Windows 上的 VMware Player 中更改虚拟网络，启动 VMware Player 然后点击你的 Kali Linux 虚拟机。选择
    **编辑虚拟机设置**，如[图 1-6](ch01.xhtml#changing_the_vmware_network_adapter "图 1-6. 更改
    VMware 网络适配器")所示。（如果你仍在 VMware Player 中运行 Kali Linux，选择 **播放器** ▸ **管理** ▸ **虚拟机设置**。）
- en: '![Changing the VMware network adapter](httpatomoreillycomsourcenostarchimages2030204.png.jpg)Figure 1-6. Changing
    the VMware network adapter'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '![更改 VMware 网络适配器](httpatomoreillycomsourcenostarchimages2030204.png.jpg)图
    1-6. 更改 VMware 网络适配器'
- en: On the next screen, choose **Network Adapter** in the Hardware tab and choose
    the **Bridged** option in the **Network connection** section, as shown in [Figure 1-7](ch01.xhtml#changing_the_network_adapter_settings
    "Figure 1-7. Changing the network adapter settings").
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，选择硬件标签中的 **网络适配器**，然后在 **网络连接** 部分选择 **桥接** 选项，如[图 1-7](ch01.xhtml#changing_the_network_adapter_settings
    "图 1-7. 更改网络适配器设置")所示。
- en: '![Changing the network adapter settings](httpatomoreillycomsourcenostarchimages2030206.png.jpg)Figure 1-7. Changing
    the network adapter settings'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '![更改网络适配器设置](httpatomoreillycomsourcenostarchimages2030206.png.jpg)图 1-7. 更改网络适配器设置'
- en: Now click the **Configure Adapters** button and check the network adapter that
    you’re using with your host operating system. As you can see in [Figure 1-8](ch01.xhtml#selecting_a_network_adapter
    "Figure 1-8. Selecting a network adapter"), I’ve selected only the Realtek wireless
    adapter. Once you’ve made your selection, press **OK**.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在点击 **配置适配器** 按钮，并勾选你在主机操作系统中使用的网络适配器。如[图 1-8](ch01.xhtml#selecting_a_network_adapter
    "图 1-8. 选择网络适配器")所示，我仅选择了 Realtek 无线适配器。做出选择后，点击 **确定**。
- en: '![Selecting a network adapter](httpatomoreillycomsourcenostarchimages2030208.png.jpg)Figure 1-8. Selecting
    a network adapter'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '![选择网络适配器](httpatomoreillycomsourcenostarchimages2030208.png.jpg)图 1-8. 选择网络适配器'
- en: VMware Fusion on Mac OS
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Mac OS 上的 VMware Fusion
- en: To change the virtual network connection in VMware Fusion, go to **Virtual Machine**
    ▸ **Network Adapter** and change from NAT to Bridged, as shown in [Figure 1-9](ch01.xhtml#changing_the_network_adapter
    "Figure 1-9. Changing the network adapter").
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 VMware Fusion 中更改虚拟网络连接，进入 **虚拟机** ▸ **网络适配器**，并将设置从 NAT 更改为桥接（如[图 1-9](ch01.xhtml#changing_the_network_adapter
    "图 1-9. 更改网络适配器")所示）。
- en: '![Changing the network adapter](httpatomoreillycomsourcenostarchimages2030210.png.jpg)Figure 1-9. Changing
    the network adapter'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '![更改网络适配器](httpatomoreillycomsourcenostarchimages2030210.png.jpg)图 1-9. 更改网络适配器'
- en: Connecting the Virtual Machine to the Network
  id: totrans-38
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 连接虚拟机到网络
- en: Kali Linux should automatically pull an IP address from the Bridged network
    once you make the switch. To verify your IP address, open a Linux terminal by
    clicking the terminal icon(a black rectangle with the symbols >_) at the top left
    of the Kali screen (or choose **Applications** ▸ **Accessories** ▸ **Terminal**).
    Then run the command `ifconfig` to see your network information, as shown in [Example 1-1](ch01.xhtml#networking_information
    "Example 1-1. Networking information").
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦切换，Kali Linux 应该会自动从桥接网络中获取 IP 地址。要验证你的 IP 地址，点击 Kali 屏幕左上方的终端图标（一个带有符号 >_
    的黑色矩形，或选择 **应用程序** ▸ **附件** ▸ **终端**）打开 Linux 终端。然后运行命令 `ifconfig` 查看你的网络信息，如[示例
    1-1](ch01.xhtml#networking_information "示例 1-1。网络信息")中所示。
- en: Example 1-1. Networking information
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 示例 1-1。网络信息
- en: '[PRE0]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The prompt `root@kali:~#` is the superuser (root) prompt. We will learn more
    about this and the other Linux commands we use for setup in [Chapter 2](ch02.xhtml
    "Chapter 2. Using Kali Linux").
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 提示符 `root@kali:~#` 是超级用户（root）提示符。我们将在[第二章](ch02.xhtml "第二章。使用 Kali Linux")中学习更多关于这个提示符以及我们在设置过程中使用的其他
    Linux 命令。
- en: The IPv4 address for this virtual machine is 192.168.20.9, as highlighted in
    bold in [Example 1-1](ch01.xhtml#networking_information "Example 1-1. Networking
    information"). (The IP address for your machine will likely differ.)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这台虚拟机的 IPv4 地址是 192.168.20.9，如[示例 1-1](ch01.xhtml#networking_information "示例
    1-1。网络信息")中加粗标出的那样。（你的机器的 IP 地址可能会有所不同。）
- en: Testing Your Internet Access
  id: totrans-45
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 测试你的互联网访问
- en: Now let’s make sure that Kali Linux can connect to the Internet. We’ll use the
    ping network utility to see if we can reach Google. Make sure your computer is
    connected to the Internet, open a Linux terminal, and enter the following.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们确保 Kali Linux 可以连接到互联网。我们将使用 ping 网络工具检查是否能够访问 Google。确保你的计算机已经连接到互联网，打开
    Linux 终端并输入以下内容。
- en: '[PRE1]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: If you see something like the following in response, you’re online. (We’ll learn
    more about the `ping` command in [Chapter 3](ch03.xhtml "Chapter 3. Programming").)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看到类似以下的响应，说明你已经联网。（我们将在[第三章](ch03.xhtml "第三章。编程")中进一步了解 `ping` 命令。）
- en: '[PRE2]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: If you do not receive a response, make sure that you have set your network adapter
    to Bridged, that Kali Linux has an IP address, and, of course, that your host
    system currently has Internet access.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有收到回应，请确保你的网络适配器已设置为桥接模式，Kali Linux 已经获取到 IP 地址，并且你的主机系统当前已连接到互联网。
- en: Installing Nessus
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Nessus
- en: Although Kali Linux has just about every tool we’ll need, we do need to install
    a few additional programs. First, we’ll install Tenable Security’s Nessus Home
    vulnerability scanner. This scanner is free for home use only (you’ll see a description
    of limitations on the Nessus website). Note that Nessus is very actively developed,
    so the current version as well as its GUI may have changed a bit since this book
    went to press.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管 Kali Linux 几乎包含了我们所需的所有工具，但我们仍然需要安装一些额外的程序。首先，我们将安装 Tenable Security 的 Nessus
    Home 漏洞扫描器。此扫描器仅限家庭使用（你将在 Nessus 网站上看到相关的限制描述）。请注意，Nessus 在不断积极开发，因此当前的版本以及其图形用户界面（GUI）可能与本书出版时有所不同。
- en: 'Use the following steps to install Nessus Home from within Kali:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤从 Kali 内部安装 Nessus Home：
- en: Open **Applications** ▸ **Internet** ▸ **Iceweasel Web Browser** and enter *[http://www.tenable.com/products/nessus-home/](http://www.tenable.com/products/nessus-home/)*
    in the address bar. Complete the Register for an Activation Code information and
    click **Register**. (Use a real email address—you’ll need the activation code
    later.)
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 **应用程序** ▸ **互联网** ▸ **Iceweasel Web 浏览器**，并在地址栏中输入 *[http://www.tenable.com/products/nessus-home/](http://www.tenable.com/products/nessus-home/)*。完成注册获取激活码的相关信息后，点击
    **注册**。（请使用真实的电子邮件地址——稍后你会需要激活码。）
- en: Once you reach the Downloads page, choose the latest version of Nessus for the
    Linux Debian 32-bit platform (*Nessus-5.2.5-debian6_i386.deb* as of this writing)
    and download it to your root directory (the default download location).
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦进入下载页面，选择适用于 Linux Debian 32 位平台的最新版本 Nessus（截至目前是 *Nessus-5.2.5-debian6_i386.deb*），并将其下载到你的根目录（默认的下载位置）。
- en: Open a Linux terminal (click the terminal icon at the top of the Kali screen)
    to open a root prompt.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Linux 终端（点击 Kali 屏幕顶部的终端图标）以打开 root 提示符。
- en: Enter **`ls`** to see a list of the files in your root directory. You should
    see the Nessus file that you just downloaded.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 **`ls`** 查看根目录中的文件列表。你应该能看到刚刚下载的 Nessus 文件。
- en: Enter **`dpkg -i`** followed by the name of the file you downloaded (you can
    type the first letter of the filename and press tab to use tab completion) and
    press enter to begin the install process. Installation may take a while as Nessus
    processes various plugins. Progress is shown by a line of hash symbols (`#`).
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 **`dpkg -i`**，后面跟上你下载的文件名（你可以输入文件名的第一个字母并按 Tab 键进行自动补全），然后按回车键开始安装过程。安装可能需要一段时间，因为
    Nessus 需要处理各种插件。进度通过一行哈希符号（`#`）来显示。
- en: '[PRE3]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Once you’re returned to the root prompt with no errors, Nessus should be installed,
    and you should see a message like this.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你返回到根提示符且没有错误，Nessus 应该已经安装完成，你应该会看到类似下面的信息。
- en: '[PRE4]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now enter the following to start Nessus.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在输入以下命令启动 Nessus。
- en: '[PRE5]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Open the URL *https://kali:8834/* in the Iceweasel web browser. You should see
    a SSL certificate warning, similar to that in [Figure 1-10](ch01.xhtml#invalid_ssl_certificate_warning
    "Figure 1-10. Invalid SSL certificate warning").
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Iceweasel 浏览器中打开网址 *https://kali:8834/*。你应该会看到一个 SSL 证书警告，类似于[图 1-10](ch01.xhtml#invalid_ssl_certificate_warning
    "图 1-10. 无效的 SSL 证书警告")中的警告。
- en: Note
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you access Nessus from outside the Iceweasel browser in Kali, you will need
    to go to *https://<ipaddressofKali>:8834* instead.
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你从 Kali 中的 Iceweasel 浏览器以外的地方访问 Nessus，你需要改为访问 *https://<ipaddressofKali>:8834*。
- en: '![Invalid SSL certificate warning](httpatomoreillycomsourcenostarchimages2030212.png.jpg)Figure 1-10. Invalid
    SSL certificate warning'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![无效的 SSL 证书警告](httpatomoreillycomsourcenostarchimages2030212.png.jpg)图 1-10.
    无效的 SSL 证书警告'
- en: Expand **I Understand the Risks** and click **Add Exception**. Then click **Confirm
    Security Exception**, as shown in [Figure 1-11](ch01.xhtml#confirming_the_security_exception
    "Figure 1-11. Confirming the security exception").
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开 **我理解风险** 并点击 **添加例外**。然后点击 **确认安全例外**，如[图 1-11](ch01.xhtml#confirming_the_security_exception
    "图 1-11. 确认安全例外")所示。
- en: '![Confirming the security exception](httpatomoreillycomsourcenostarchimages2030214.png.jpg)Figure 1-11. Confirming
    the security exception'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![确认安全例外](httpatomoreillycomsourcenostarchimages2030214.png.jpg)图 1-11. 确认安全例外'
- en: Click **Get Started** at the bottom left of the opening Nessus page and enter
    a username and password on the following page. I’ve chosen *georgia:password*
    for my example. If you choose something else, remember it because we’ll use Nessus
    in [Chapter 6](ch06.xhtml "Chapter 6. Finding Vulnerabilities"). (Note that I
    use poor passwords throughout this book, as will many clients you encounter. In
    production, you should use much better passwords than *password*.)
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的 Nessus 页面左下角点击 **开始使用**，然后在接下来的页面输入用户名和密码。我在示例中选择了 *georgia:password*。如果你选择了其他内容，记得保存，因为我们将在[第
    6 章](ch06.xhtml "第 6 章. 查找漏洞")中使用 Nessus。（请注意，我在本书中使用了简单的密码，就像你遇到的许多客户一样。在生产环境中，你应该使用比
    *password* 更强的密码。）
- en: At the next page, enter the activation code you received via email from Tenable
    Security.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，输入你通过电子邮件从 Tenable Security 获得的激活码。
- en: Once registered with Tenable Security, choose the option to download plugins
    (downloading will take some time). Once Nessus processes the plugins, it will
    initialize.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注册 Tenable Security 后，选择下载插件的选项（下载将需要一些时间）。一旦 Nessus 处理完插件，它将进行初始化。
- en: When Nessus finishes downloading plugins and configuring the software, you should
    see the Nessus login screen, as shown in [Figure 1-12](ch01.xhtml#login_screen_of_the_nessus_web_interface
    "Figure 1-12. Login screen of the Nessus web interface"). You should be able to
    use the credentials for the account you created during setup to log in.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 当 Nessus 下载完插件并配置好软件后，你应该会看到 Nessus 登录屏幕，如[图 1-12](ch01.xhtml#login_screen_of_the_nessus_web_interface
    "图 1-12. Nessus 网页界面的登录屏幕")所示。你应该能使用在设置过程中创建的账户凭证进行登录。
- en: '![Login screen of the Nessus web interface](httpatomoreillycomsourcenostarchimages2030216.png.jpg)Figure 1-12. Login
    screen of the Nessus web interface'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '![Nessus 网页界面的登录屏幕](httpatomoreillycomsourcenostarchimages2030216.png.jpg)图
    1-12. Nessus 网页界面的登录屏幕'
- en: To close Nessus, just close its tab in the browser. We will come back to Nessus
    in [Chapter 6](ch06.xhtml "Chapter 6. Finding Vulnerabilities").
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 要关闭 Nessus，只需关闭浏览器中的标签页即可。我们将在[第 6 章](ch06.xhtml "第 6 章. 查找漏洞")中再次使用 Nessus。
- en: Installing Additional Software
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装额外的软件
- en: We’re not done yet. Follow these instructions to complete your Kali Linux install.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还没有完成。请按照这些说明完成 Kali Linux 的安装。
- en: The Ming C Compiler
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Ming C 编译器
- en: We need to install a cross compiler so we can compile C code to run on Microsoft
    Windows systems. The Ming compiler is included in the Kali Linux repositories
    but is not installed by default. Install it with this command.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要安装一个交叉编译器，以便将 C 代码编译为可在 Microsoft Windows 系统上运行的程序。Ming 编译器包含在 Kali Linux
    仓库中，但默认情况下未安装。使用此命令安装它。
- en: '[PRE6]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Hyperion
  id: totrans-81
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Hyperion
- en: We’ll use the Hyperion encryption program to bypass antivirus software. Hyperion
    is not currently included in the Kali repositories. Download Hyperion with `wget`,
    unzip it, and compile it with the Ming cross compiler you installed in the previous
    step, as shown in [Example 1-2](ch01.xhtml#installing_hyperion "Example 1-2. Installing
    Hyperion").
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 Hyperion 加密程序绕过防病毒软件。Hyperion 当前未包含在 Kali 仓库中。使用`wget`下载 Hyperion，解压并使用在上一步安装的
    Ming 跨编译器进行编译，如[示例 1-2](ch01.xhtml#installing_hyperion "示例 1-2. 安装 Hyperion")所示。
- en: Example 1-2. Installing Hyperion
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 示例 1-2. 安装 Hyperion
- en: '[PRE7]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Veil-Evasion
  id: totrans-85
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Veil-Evasion
- en: Veil-Evasion is a tool that generates payload executables you can use to bypass
    common antivirus solutions. Install Veil-Evasion Kali (see [Example 1-3](ch01.xhtml#installing_veil-evasion
    "Example 1-3. Installing Veil-Evasion")) by first downloading it with the command
    `wget`. Next, unzip the downloaded file *master.zip* and change to the *Veil-master/setup*
    directory. Finally, enter **`./setup.sh`** and follow the default prompts.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: Veil-Evasion 是一个生成有效载荷可执行文件的工具，你可以用它绕过常见的防病毒解决方案。首先使用命令 `wget` 下载 Veil-Evasion
    Kali（参见[示例 1-3](ch01.xhtml#installing_veil-evasion "示例 1-3. 安装 Veil-Evasion")）。接下来，解压下载的文件
    *master.zip*，并切换到 *Veil-master/setup* 目录。最后，输入 **`./setup.sh`** 并按照默认提示进行操作。
- en: Example 1-3. Installing Veil-Evasion
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 示例 1-3. 安装 Veil-Evasion
- en: '[PRE8]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Ettercap
  id: totrans-89
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Ettercap
- en: Ettercap is a tool for performing man-in-the-middle attacks. Before running
    it for the first time, we need to make a couple of changes to its configuration
    file at /*etc/ettercap/etter.conf*. Open its configuration file from a Kali root
    prompt in the nano editor.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: Ettercap 是一个用于执行中间人攻击的工具。在第一次运行它之前，我们需要对其配置文件 /*etc/ettercap/etter.conf* 进行一些修改。从
    Kali root 提示符下用 nano 编辑器打开其配置文件。
- en: '[PRE9]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: First change the `userid` and `groupid` values to **`0`** so Ettercap can run
    with root privileges. Scroll down to where you see the following lines in the
    file. Replace whatever values you see following the equal signs (`=`) with a `0`.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 首先将 `userid` 和 `groupid` 值更改为 **`0`**，以便 Ettercap 可以使用 root 权限运行。向下滚动，直到看到文件中的以下行。将等号（`=`）后面的任何值替换为
    `0`。
- en: '[PRE10]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Now scroll down to the `Linux` section of the file and uncomment (remove the
    leading `#` characters) before the two lines shown at ❶ and ❷ in [Example 1-4](ch01.xhtml#ettercap_configuration_file
    "Example 1-4. Ettercap configuration file") to set Iptables firewall rules to
    redirect the traffic.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 现在向下滚动到文件的 `Linux` 部分，在[示例 1-4](ch01.xhtml#ettercap_configuration_file "示例 1-4.
    Ettercap 配置文件")中，取消注释（去掉前面的 `#` 字符）❶ 和 ❷ 所示的两行，以设置 Iptables 防火墙规则以重定向流量。
- en: Example 1-4. Ettercap configuration file
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 示例 1-4. Ettercap 配置文件
- en: '[PRE11]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Save and exit the file by pressing ctrl-X and then Y to save the changes.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 按下 ctrl-X 然后按 Y 保存更改并退出文件。
- en: Setting Up Android Emulators
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置 Android 模拟器
- en: Now we’ll set up three Android emulators on Kali to use for mobile testing in
    [Chapter 20](ch20.xhtml "Chapter 20. Using the Smartphone Pentest Framework").
    First we’ll need to download the Android SDK.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将在 Kali 上设置三个 Android 模拟器，用于[第 20 章](ch20.xhtml "第 20 章. 使用智能手机渗透框架")的移动测试。首先，我们需要下载
    Android SDK。
- en: Open the Iceweasel web browser from within Kali and visit *[https://developer.android.com/sdk/index.html](https://developer.android.com/sdk/index.html)*.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Kali 中打开 Iceweasel 浏览器，访问 *[https://developer.android.com/sdk/index.html](https://developer.android.com/sdk/index.html)*。
- en: Download the current version of the ADT bundle for 32-bit Linux and save it
    to your root directory.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载当前版本的适用于 32 位 Linux 的 ADT 包并保存到根目录。
- en: Open a terminal, list the files there (`ls`), and extract the compressed archive
    that you just downloaded with unzip (the *x*’s represent the name of your file,
    as versions may have changed since this was written).
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端，列出其中的文件（`ls`），并使用 unzip 解压刚刚下载的压缩文件（*x* 代表你的文件名，因为版本可能在写作时已经发生变化）。
- en: '[PRE12]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Now use `cd` to go into the new directory (with the same name as the file without
    the *.zip* extension).
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在使用 `cd` 进入新目录（文件名相同，去掉 *.zip* 扩展名）。
- en: '[PRE13]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The Android SDK Manager should open, as shown in [Figure 1-13](ch01.xhtml#android_sdk_manager
    "Figure 1-13. The Android SDK Manager").
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Android SDK 管理器应该会打开，如[图 1-13](ch01.xhtml#android_sdk_manager "图 1-13. Android
    SDK 管理器")所示。
- en: '![The Android SDK Manager](httpatomoreillycomsourcenostarchimages2030218.png.jpg)Figure 1-13. The
    Android SDK Manager'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![Android SDK 管理器](httpatomoreillycomsourcenostarchimages2030218.png.jpg)图
    1-13. Android SDK 管理器'
- en: We’ll download any updates to the Android SDK tools and Android SDK platform
    tools (checked by default), as well as Android 4.3 and a couple of older versions
    of Android with specific vulnerabilities, Android 2.2 and Android 2.1\. Select
    the boxes to the left of each Android version. Then (leaving Updates/New and Installed
    checked) click **Install packages**, as shown in [Figure 1-14](ch01.xhtml#installing_android_software
    "Figure 1-14. Installing Android software"). Accept the license agreement, and
    the Android SDK should download and install the chosen packages. Installation
    will likely take several minutes.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将下载 Android SDK 工具和 Android SDK 平台工具的所有更新（默认已选中），以及 Android 4.3 和几个具有特定漏洞的旧版本
    Android，即 Android 2.2 和 Android 2.1。选中每个 Android 版本左侧的框。然后（保持 Updates/New 和 Installed
    选中）点击 **Install packages**，如 [图 1-14](ch01.xhtml#installing_android_software "图
    1-14. 安装 Android 软件") 所示。接受许可协议，Android SDK 应该会下载并安装所选的包。安装过程可能需要几分钟。
- en: '![Installing Android software](httpatomoreillycomsourcenostarchimages2030220.png.jpg)Figure 1-14. Installing
    Android software'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '![安装 Android 软件](httpatomoreillycomsourcenostarchimages2030220.png.jpg)图 1-14.
    安装 Android 软件'
- en: Now it’s time to set up our Android virtual devices. Open the Android SDK Manager
    and choose **Tools** ▸ **Manage AVDs**. You should see the window shown in [Figure 1-15](ch01.xhtml#android_virtual_device_manager
    "Figure 1-15. Android Virtual Device Manager").
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候设置我们的 Android 虚拟设备了。打开 Android SDK 管理器，选择 **Tools** ▸ **Manage AVDs**。你应该能看到如
    [图 1-15](ch01.xhtml#android_virtual_device_manager "图 1-15. Android 虚拟设备管理器")
    所示的窗口。
- en: '![Android Virtual Device Manager](httpatomoreillycomsourcenostarchimages2030222.png.jpg)Figure 1-15. Android
    Virtual Device Manager'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '![Android 虚拟设备管理器](httpatomoreillycomsourcenostarchimages2030222.png.jpg)图
    1-15. Android 虚拟设备管理器'
- en: We’ll create three Android emulators based on Android 4.3, 2.2, and 2.1, as
    shown in [Figure 1-16](ch01.xhtml#creating_an_android_emulator "Figure 1-16. Creating
    an Android emulator"). Use the values shown in the figure for each emulator but
    set the value of Target to the Android version of the emulator you would like
    to build (the Google API versions of Android 4.3 [Google APIs version 18], 2.2
    [Google APIs version 8], and 2.1 [Google APIs version 7]). Fill the AVD Name field
    with a descriptive value. Add a small SD Card value (100MB should be more than
    sufficient) so you can download files to your Android emulators. Set Device to
    **Nexus 4** and Skin to **Skin with dynamic hardware controls**. Leave the rest
    of the options at their defaults.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将基于 Android 4.3、2.2 和 2.1 创建三个 Android 模拟器，如 [图 1-16](ch01.xhtml#creating_an_android_emulator
    "图 1-16. 创建 Android 模拟器") 所示。使用图中显示的每个模拟器的值，但将目标的值设置为你希望构建的 Android 版本（Android
    4.3 的 Google API 版本 18，2.2 的 Google API 版本 8，和 2.1 的 Google API 版本 7）。在 AVD 名称字段中填入一个描述性值。添加一个较小的
    SD 卡值（100MB 应该足够），以便你可以将文件下载到 Android 模拟器中。将设备设置为 **Nexus 4**，并将皮肤设置为 **具有动态硬件控制的皮肤**。其余选项保持默认值。
- en: '![Creating an Android emulator](httpatomoreillycomsourcenostarchimages2030224.png.jpg)Figure 1-16. Creating
    an Android emulator'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '![创建 Android 模拟器](httpatomoreillycomsourcenostarchimages2030224.png.jpg)图 1-16.
    创建 Android 模拟器'
- en: Once you’ve built all three emulators, your AVD Manager should look like [Figure 1-17](ch01.xhtml#android_emulators_created_in_android_vir
    "Figure 1-17. Android emulators created in Android Virtual Device Manager") (device
    names may be different of course).
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你构建了所有三个模拟器，你的 AVD 管理器应该如下所示 [图 1-17](ch01.xhtml#android_emulators_created_in_android_vir
    "图 1-17. 在 Android 虚拟设备管理器中创建的 Android 模拟器")（设备名称当然可能不同）。
- en: '![Android emulators created in Android Virtual Device Manager](httpatomoreillycomsourcenostarchimages2030226.png.jpg)Figure 1-17. Android
    emulators created in Android Virtual Device Manager'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '![在 Android 虚拟设备管理器中创建的 Android 模拟器](httpatomoreillycomsourcenostarchimages2030226.png.jpg)图
    1-17. 在 Android 虚拟设备管理器中创建的 Android 模拟器'
- en: To start an emulator, highlight it and click **Start**. Then click **Launch**
    in the pop-up, as shown in [Figure 1-18](ch01.xhtml#launching_an_android_emulator
    "Figure 1-18. Launching an Android emulator").
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动模拟器，选中它并点击 **Start**。然后在弹出的窗口中点击 **Launch**，如 [图 1-18](ch01.xhtml#launching_an_android_emulator
    "图 1-18. 启动 Android 模拟器") 所示。
- en: '![Launching an Android emulator](httpatomoreillycomsourcenostarchimages2030228.png.jpg)Figure 1-18. Launching
    an Android emulator'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![启动 Android 模拟器](httpatomoreillycomsourcenostarchimages2030228.png.jpg)图 1-18.
    启动 Android 模拟器'
- en: It may take a few minutes for the emulator to boot up for the first time, but
    once it does, you should have something that looks and feels much like a real
    Android device. The Android 4.3 emulator is shown in [Figure 1-19](ch01.xhtml#android_4dot3_emulator
    "Figure 1-19. Android 4.3 emulator").
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟器第一次启动可能需要几分钟时间，但一旦启动，你应该能看到和感觉到像一个真实的Android设备一样的界面。[图1-19](ch01.xhtml#android_4dot3_emulator
    "图1-19 Android 4.3模拟器")中展示了Android 4.3模拟器。
- en: '![Android 4.3 emulator](httpatomoreillycomsourcenostarchimages2030230.png.jpg)Figure 1-19. Android
    4.3 emulator'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '![Android 4.3模拟器](httpatomoreillycomsourcenostarchimages2030230.png.jpg)图1-19.
    Android 4.3模拟器'
- en: Note
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To run the Android emulators in Kali, you will likely need to increase the performance
    of your virtual machine by increasing its RAM and CPU cores. I am able to run
    all three emulators with 3GB RAM and two CPU cores allocated to Kali. You can
    make these changes in the virtual machine settings in your VMware product. The
    amount of power you can give to Kali will, of course, depend on the resources
    available on your host machine. As an alternative, instead of running the Android
    emulators on Kali Linux, you can install Android and the emulators on your host
    system or even another system on the local network. The exercises in [Chapter 20](ch20.xhtml
    "Chapter 20. Using the Smartphone Pentest Framework") will work as long as the
    emulators can communicate with Kali.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Kali中运行Android模拟器，你可能需要通过增加虚拟机的内存和CPU核心数来提高其性能。我能够在分配给Kali的3GB内存和两个CPU核心的情况下运行所有三个模拟器。你可以在VMware产品的虚拟机设置中进行这些更改。你能给Kali分配的资源量，当然取决于主机计算机上可用的资源。作为替代方案，除了在Kali
    Linux上运行Android模拟器，你还可以在主机系统或甚至本地网络中的其他系统上安装Android和模拟器。[第20章](ch20.xhtml "第20章
    使用智能手机渗透框架")中的练习只要模拟器能够与Kali通信就可以运行。
- en: Smartphone Pentest Framework
  id: totrans-122
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 智能手机渗透框架
- en: Next, download and install the Smartphone Pentest Framework (SPF), which we’ll
    use for mobile attacks. Use `git` to download the source code. Change to the downloaded
    *Smartphone-Pentest-Framework* directory as shown here.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，下载并安装智能手机渗透框架（SPF），我们将用它进行移动攻击。使用`git`下载源代码。切换到已下载的*Smartphone-Pentest-Framework*目录，如下所示。
- en: '[PRE14]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Now open the file *kaliinstall* in the nano text editor. The first few lines
    are shown in [Example 1-5](ch01.xhtml#installing_smartphone_pentest_framework
    "Example 1-5. Installing Smartphone Pentest Framework"). Note the lines that refer
    to */root/adt-bundle-linux-x86-20131030/sdk/tools/android*. If the name of your
    ADT bundle folder is different (due to the release of a subsequent version), change
    this value to match the correct place where you installed the Android ADT in the
    previous section.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 现在在nano文本编辑器中打开文件*kaliinstall*。前几行如[示例1-5](ch01.xhtml#installing_smartphone_pentest_framework
    "示例1-5 安装智能手机渗透框架")所示。注意其中提到的*/root/adt-bundle-linux-x86-20131030/sdk/tools/android*行。如果你的ADT包文件夹名称不同（由于发布了后续版本），请将该值更改为你在上一节中安装Android
    ADT的正确位置。
- en: Example 1-5. Installing Smartphone Pentest Framework
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 示例1-5. 安装智能手机渗透框架
- en: '[PRE15]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Now run the *kaliinstall* script, as shown here.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在运行*kaliinstall*脚本，如下所示。
- en: '[PRE16]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: This will set up the SPF, which we’ll use in [Chapter 20](ch20.xhtml "Chapter 20. Using
    the Smartphone Pentest Framework").
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这将设置SPF，我们将在[第20章](ch20.xhtml "第20章 使用智能手机渗透框架")中使用它。
- en: Finally, we need to make one more change to the configuration file for SPF.
    Change directories to *Smartphone-Pentest-Framework/frameworkconsole* and open
    the file *config* in nano. Look for the option `#LOCATION OF ANDROID` `SDK`. If
    your ADT bundle folder name has changed since the version current at the time
    of this writing, change it accordingly in the line that begins with `ANDROIDSDK=`.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们需要对SPF的配置文件进行最后一次更改。切换到*Smartphone-Pentest-Framework/frameworkconsole*目录，并在nano中打开*config*文件。查找选项`#LOCATION
    OF ANDROID` `SDK`。如果自本文编写时以来你的ADT包文件夹名称发生了变化，请在以`ANDROIDSDK=`开头的行中相应地更改它。
- en: '[PRE17]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Target Virtual Machines
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 目标虚拟机
- en: 'We’ll use three custom-built target machines to simulate vulnerabilities often
    found in client environments: Ubuntu 8.10, Windows XP SP3, and Windows 7 SP1.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用三台定制的目标机器来模拟客户端环境中常见的漏洞：Ubuntu 8.10、Windows XP SP3和Windows 7 SP1。
- en: You’ll find a link to a torrent containing the Ubuntu virtual machine at *[http://www.nostarch.com/pentesting/](http://www.nostarch.com/pentesting/)*.
    The target system is compressed using the 7-Zip archive, and *1stPentestBook?!*
    is the password for the archive. You can use 7-Zip programs to open the archives
    for all platforms. For the Windows and Linux packages, use *[http://www.7-zip.org/download.html](http://www.7-zip.org/download.html)*;
    for Mac OS, use Ez7z at *[http://ez7z.en.softonic.com/mac/](http://ez7z.en.softonic.com/mac/)*.
    The archive is ready for use as soon as it is unzipped.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在 *[http://www.nostarch.com/pentesting/](http://www.nostarch.com/pentesting/)*
    上找到包含 Ubuntu 虚拟机的 torrent 链接。目标系统使用 7-Zip 压缩包，密码为 *1stPentestBook?!*，可以使用 7-Zip
    程序在所有平台上打开压缩包。对于 Windows 和 Linux 版本，请访问 *[http://www.7-zip.org/download.html](http://www.7-zip.org/download.html)*；对于
    Mac OS，请使用 Ez7z，下载链接为 *[http://ez7z.en.softonic.com/mac/](http://ez7z.en.softonic.com/mac/)*。解压后即可开始使用该压缩包。
- en: To set up the Windows virtual machines, you’ll need to install and configure
    Windows XP SP3 and 32-bit Windows 7 SP1\. Sources for the installation media include
    TechNet and MSDN (the Microsoft Developer Network), among others. (You should
    be able to use your Windows virtual machines on a trial basis for 30 days without
    a license key.)
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置 Windows 虚拟机，您需要安装并配置 Windows XP SP3 和 32 位 Windows 7 SP1。安装介质的来源包括 TechNet
    和 MSDN（Microsoft 开发者网络）等。（您应该能够在没有许可证密钥的情况下，试用 Windows 虚拟机 30 天。）
- en: Creating the Windows XP Target
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 Windows XP 目标
- en: Your Windows XP target should be a base installation of Windows XP SP3 with
    no additional security updates. (Visit my website at *[http://www.bulbsecurity.com/](http://www.bulbsecurity.com/)*
    for more information about finding a copy of Windows XP.) Once you have a copy
    of Windows XP SP3, here’s how to install it on Microsoft Windows or Mac OS.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 您的 Windows XP 目标应该是一个基础安装的 Windows XP SP3，并且没有额外的安全更新。（更多关于如何找到 Windows XP 复制版本的信息，请访问我的网站
    *[http://www.bulbsecurity.com/](http://www.bulbsecurity.com/)*。）一旦您拥有了 Windows
    XP SP3 的副本，下面是如何在 Microsoft Windows 或 Mac OS 上安装它。
- en: VMware Player on Microsoft Windows
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VMware Player 在 Microsoft Windows 上
- en: 'To install Windows XP on VMware Player for Windows:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 VMware Player for Windows 上安装 Windows XP：
- en: Choose **Create A New Virtual Machine** in VMware Player and point the New Virtual
    Machine Wizard to the Windows XP installation disk or ISO image. Depending on
    your source disk or image, you may be offered the option to use Easy Install (if
    you’re installing a version with a license key), or you may see a yellow triangle
    warning, “Could not detect which operating system is in this disc image. You will
    need to specify which operating system will be installed.” In the latter case,
    just press **Next**.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 VMware Player 中选择 **创建一个新虚拟机**，并将新虚拟机向导指向 Windows XP 安装光盘或 ISO 镜像。根据您的源光盘或镜像，您可能会看到一个选项，允许您使用
    Easy Install（如果您安装的是带有许可证密钥的版本），或者您可能会看到一个黄色三角形警告，“无法检测此光盘映像中的操作系统。您需要指定将安装哪个操作系统。”
    在后者的情况下，直接点击 **下一步**。
- en: In the Select a Guest Operating System dialog, select **Microsoft Windows**
    in the Guest operating system section and your version of Windows XP in the drop-down
    box, as shown in [Figure 1-20](ch01.xhtml#selecting_your_version_of_windows_xp
    "Figure 1-20. Selecting your version of Windows XP"), and press **Next**.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择客户操作系统对话框中，在客户操作系统部分选择 **Microsoft Windows**，并在下拉框中选择您的 Windows XP 版本，如 [图
    1-20](ch01.xhtml#selecting_your_version_of_windows_xp "图 1-20. 选择您的 Windows XP
    版本") 所示，然后点击 **下一步**。
- en: '![Selecting your version of Windows XP](httpatomoreillycomsourcenostarchimages2030232.png.jpg)Figure 1-20. Selecting
    your version of Windows XP'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![选择您的 Windows XP 版本](httpatomoreillycomsourcenostarchimages2030232.png.jpg)图
    1-20. 选择您的 Windows XP 版本'
- en: In the next dialog, enter **`Bookxp XP SP3`** as the name of your virtual machine
    and press **Next**.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个对话框中，输入 **`Bookxp XP SP3`** 作为虚拟机的名称，然后点击 **下一步**。
- en: In the Specify Disk Capacity dialog, accept the recommended hard disk size for
    your virtual machine of 40GB and check the box for **Store virtual disk as a single
    file**, as shown in [Figure 1-21](ch01.xhtml#specifying_the_disk_capacity "Figure 1-21. Specifying
    the disk capacity"), and press **Next**.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在指定磁盘容量对话框中，接受为您的虚拟机推荐的 40GB 硬盘大小，并勾选 **将虚拟磁盘存储为一个单一文件**，如 [图 1-21](ch01.xhtml#specifying_the_disk_capacity
    "图 1-21. 指定磁盘容量") 所示，然后点击 **下一步**。
- en: '![Specifying the disk capacity](httpatomoreillycomsourcenostarchimages2030234.png.jpg)Figure 1-21. Specifying
    the disk capacity'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![指定磁盘容量](httpatomoreillycomsourcenostarchimages2030234.png.jpg)图 1-21. 指定磁盘容量'
- en: Note
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The Virtual Machine will not take up the entire 40GB; it will only take up space
    on your hard drive as needed. This is just a maximum value.
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 虚拟机不会占用整个 40GB 的空间；它只会根据需要占用硬盘空间。这只是一个最大值。
- en: In the Ready to Create Virtual Machine dialog, shown in [Figure 1-22](ch01.xhtml#customizing_your_hardware
    "Figure 1-22. Customizing your hardware"), click **Customize Hardware**.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在准备创建虚拟机对话框中，如[图 1-22](ch01.xhtml#customizing_your_hardware "图 1-22. 自定义硬件")所示，点击**自定义硬件**。
- en: '![Customizing your hardware](httpatomoreillycomsourcenostarchimages2030236.png.jpg)Figure 1-22. Customizing
    your hardware'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![自定义硬件](httpatomoreillycomsourcenostarchimages2030236.png.jpg)图 1-22. 自定义硬件'
- en: 'In the Hardware dialog, choose **Network Adapter**, and in the Network Connection
    field that appears, select **Bridged: Connected directly to the physical network**.
    Next, click **Configure Adapters** and select the adapter you’re using to connect
    to the Internet, as shown in [Figure 1-23](ch01.xhtml#configuring_your_network_adapter_as_brid
    "Figure 1-23. Configuring your network adapter as bridged"). Then press **OK**,
    **Close**, and **Finish**.'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在硬件对话框中，选择**网络适配器**，然后在出现的网络连接字段中选择**桥接：直接连接到物理网络**。接下来，点击**配置适配器**并选择您用来连接互联网的适配器，如[图
    1-23](ch01.xhtml#configuring_your_network_adapter_as_brid "图 1-23. 将网络适配器配置为桥接模式")所示。然后按**确定**、**关闭**和**完成**。
- en: '![Configuring your network adapter as bridged](httpatomoreillycomsourcenostarchimages2030238.png.jpg)Figure 1-23. Configuring
    your network adapter as bridged'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '![将网络适配器配置为桥接模式](httpatomoreillycomsourcenostarchimages2030238.png.jpg)图 1-23.
    将网络适配器配置为桥接模式'
- en: You should now be able to play your Windows XP virtual machine. Continue to
    the instructions for installing and activating Windows XP in [Installing and Activating
    Windows](ch01.xhtml#installing_and_activating_windows "Installing and Activating
    Windows").
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您应该能够启动您的 Windows XP 虚拟机。继续查看[安装和激活 Windows](ch01.xhtml#installing_and_activating_windows
    "安装和激活 Windows")中的安装和激活 Windows XP 的说明。
- en: VMware Fusion on Mac OS
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 Mac OS 上的 VMware Fusion
- en: In VMware Fusion, go to **File** ▸ **New** ▸ **Import from disk or image** and
    point it to the Windows XP installation disk or image, as shown in [Figure 1-24](ch01.xhtml#creating_a_new_virtual_machine
    "Figure 1-24. Creating a new virtual machine").
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在 VMware Fusion 中，转到**文件** ▸ **新建** ▸ **从磁盘或镜像导入**，并将其指向 Windows XP 安装光盘或镜像，如[图
    1-24](ch01.xhtml#creating_a_new_virtual_machine "图 1-24. 创建一个新虚拟机")所示。
- en: Follow the prompts to create a fresh installation of Windows XP SP3.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 按照提示创建一个全新的 Windows XP SP3 安装。
- en: '![Creating a new virtual machine](httpatomoreillycomsourcenostarchimages2030240.png.jpg)Figure 1-24. Creating
    a new virtual machine'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '![创建新虚拟机](httpatomoreillycomsourcenostarchimages2030240.png.jpg)图 1-24. 创建新虚拟机'
- en: Installing and Activating Windows
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装和激活 Windows
- en: As part of the installation process, you will be prompted for a Windows license
    key. If you have one, enter it here. If not, you should be able to use the virtual
    machine on a trial basis for 30 days. To continue without entering a license key,
    click **Next** when prompted for the key. A pop-up will warn you that entering
    a license key is recommended and ask if you would like to enter one now, as shown
    in [Figure 1-25](ch01.xhtml#license_key_dialog "Figure 1-25. License key dialog").
    Just click **No**.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 作为安装过程的一部分，系统会提示您输入 Windows 许可证密钥。如果您有密钥，请在此输入。如果没有，您应该能够在 30 天的试用期内使用虚拟机。要继续而不输入许可证密钥，请在提示输入密钥时点击**下一步**。弹出窗口将警告您建议输入许可证密钥，并询问您是否希望现在输入，如[图
    1-25](ch01.xhtml#license_key_dialog "图 1-25. 许可证密钥对话框")所示。只需点击**否**。
- en: '![License key dialog](httpatomoreillycomsourcenostarchimages2030242.png.jpg)Figure 1-25. License
    key dialog'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '![许可证密钥对话框](httpatomoreillycomsourcenostarchimages2030242.png.jpg)图 1-25. 许可证密钥对话框'
- en: As shown in [Figure 1-26](ch01.xhtml#setting_the_computer_name_and_administra
    "Figure 1-26. Setting the computer name and Administrator password"), when prompted,
    set **Computer name** to **`Bookxp`**. Set **Administrator password** to **`password`**.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图 1-26](ch01.xhtml#setting_the_computer_name_and_administra "图 1-26. 设置计算机名称和管理员密码")所示，系统提示时，将**计算机名称**设置为**`Bookxp`**。将**管理员密码**设置为**`password`**。
- en: '![Setting the computer name and Administrator password](httpatomoreillycomsourcenostarchimages2030244.png.jpg)Figure 1-26. Setting
    the computer name and Administrator password'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '![设置计算机名称和管理员密码](httpatomoreillycomsourcenostarchimages2030244.png.jpg)图 1-26.
    设置计算机名称和管理员密码'
- en: You can leave the date/time and TCP/IP settings at their defaults when prompted.
    Likewise, leave the Windows XP target as part of the workgroup WORKGROUP instead
    of joining it to a domain, as shown in [Figure 1-27](ch01.xhtml#workgroup_settings
    "Figure 1-27. Workgroup settings").
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在提示时，你可以保持日期/时间和TCP/IP设置为默认值。同样，保持Windows XP目标为工作组WORKGROUP的一部分，而不是将其加入域，如[图 1-27](ch01.xhtml#workgroup_settings
    "图 1-27。工作组设置")所示。
- en: '![Workgroup settings](httpatomoreillycomsourcenostarchimages2030246.png.jpg)Figure 1-27. Workgroup
    settings'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '![工作组设置](httpatomoreillycomsourcenostarchimages2030246.png.jpg)图 1-27。工作组设置'
- en: Tell Windows not to automatically install security updates, as shown in [Figure 1-28](ch01.xhtml#turning_off_automatic_security_updates
    "Figure 1-28. Turning off automatic security updates"). This step is important,
    because some of the exploits we will run rely on missing Windows patches.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如图所示，告诉Windows不要自动安装安全更新，[图 1-28](ch01.xhtml#turning_off_automatic_security_updates
    "图 1-28。关闭自动安全更新")。这一步很重要，因为我们将运行的某些漏洞依赖于缺失的Windows补丁。
- en: '![Turning off automatic security updates](httpatomoreillycomsourcenostarchimages2030248.png.jpg)Figure 1-28. Turning
    off automatic security updates'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '![关闭自动安全更新](httpatomoreillycomsourcenostarchimages2030248.png.jpg)图 1-28。关闭自动安全更新'
- en: You will then be prompted to activate Windows. If you entered a license key,
    go ahead and activate it. Otherwise you can choose **No, remind me every few days**,
    as shown in [Figure 1-29](ch01.xhtml#activating_windows "Figure 1-29. Activating
    Windows").
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，系统会提示你激活Windows。如果你已输入许可证密钥，继续激活。如果没有，你可以选择**否，每隔几天提醒我一次**，如[图 1-29](ch01.xhtml#activating_windows
    "图 1-29。激活Windows")所示。
- en: '![Activating Windows](httpatomoreillycomsourcenostarchimages2030250.png.jpg)Figure 1-29. Activating
    Windows'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '![激活Windows](httpatomoreillycomsourcenostarchimages2030250.png.jpg)图 1-29。激活Windows'
- en: Now create user accounts *georgia* and *secret*, as shown in [Figure 1-30](ch01.xhtml#adding_users
    "Figure 1-30. Adding users"). We will create passwords for these users after setup
    is finished.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 现在创建用户账户*georgia*和*secret*，如[图 1-30](ch01.xhtml#adding_users "图 1-30。添加用户")所示。我们将在设置完成后为这些用户创建密码。
- en: '![Adding users](httpatomoreillycomsourcenostarchimages2030252.png.jpg)Figure 1-30. Adding
    users'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '![添加用户](httpatomoreillycomsourcenostarchimages2030252.png.jpg)图 1-30。添加用户'
- en: When Windows starts up, log in as the user *georgia* with no password.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 当Windows启动时，以用户*georgia*身份登录，无需密码。
- en: Installing VMware Tools
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装VMware工具
- en: Now install VMware Tools, which will make it easier to use your virtual machine
    by, for example, letting you copy/paste and drag programs onto the virtual machine
    from the host system.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 现在安装VMware工具，这将使你更容易使用虚拟机，例如，允许你从宿主系统将程序复制/粘贴或拖放到虚拟机中。
- en: VMware Player on Microsoft Windows
  id: totrans-174
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 在Microsoft Windows上使用VMware Player
- en: In VMware Player, install VMware Tools from **Player** ▸ **Manage** ▸ **Install
    VMware Tools**, as shown in [Figure 1-31](ch01.xhtml#installing_vmware_tools_in_vmware_player
    "Figure 1-31. Installing VMware Tools in VMware Player"). The VMware Tools installer
    should automatically run in Windows XP.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在VMware Player中，从**播放器** ▸ **管理** ▸ **安装VMware工具**安装VMware工具，如[图 1-31](ch01.xhtml#installing_vmware_tools_in_vmware_player
    "图 1-31。安装VMware工具")所示。VMware工具安装程序应该会在Windows XP中自动运行。
- en: '![Installing VMware Tools in VMware Player](httpatomoreillycomsourcenostarchimages2030254.png.jpg)Figure 1-31. Installing
    VMware Tools in VMware Player'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '![在VMware Player中安装VMware工具](httpatomoreillycomsourcenostarchimages2030254.png.jpg)图 1-31。在VMware
    Player中安装VMware工具'
- en: VMware Fusion on Mac OS
  id: totrans-177
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 在Mac OS上的VMware Fusion
- en: Install VMware Tools from **Virtual Machines** ▸ **Install VMware Tools**, as
    shown in [Figure 1-32](ch01.xhtml#installing_vmware_tools_in_vmware_fusion "Figure 1-32. Installing
    VMware Tools in VMware Fusion"). The VMware Tools installer should automatically
    run in Windows XP.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 从**虚拟机** ▸ **安装VMware工具**安装VMware工具，如[图 1-32](ch01.xhtml#installing_vmware_tools_in_vmware_fusion
    "图 1-32。在VMware Fusion中安装VMware工具")所示。VMware工具安装程序应该会在Windows XP中自动运行。
- en: '![Installing VMware Tools in VMware Fusion](httpatomoreillycomsourcenostarchimages2030256.png.jpg)Figure 1-32. Installing
    VMware Tools in VMware Fusion'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '![在VMware Fusion中安装VMware工具](httpatomoreillycomsourcenostarchimages2030256.png.jpg)图 1-32。在VMware
    Fusion中安装VMware工具'
- en: Turning Off Windows Firewall
  id: totrans-180
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关闭Windows防火墙
- en: Now open the Control Panel from the Windows Start menu. Click **Security Center**
    ▸ **Windows Firewall** to turn off the Windows Firewall, as shown in [Figure 1-33](ch01.xhtml#turning_off_the_windows_firewall
    "Figure 1-33. Turning off the Windows firewall").
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 现在从Windows开始菜单打开控制面板。点击**安全中心** ▸ **Windows防火墙**来关闭Windows防火墙，如[图 1-33](ch01.xhtml#turning_off_the_windows_firewall
    "图 1-33。关闭Windows防火墙")所示。
- en: '![Turning off the Windows firewall](httpatomoreillycomsourcenostarchimages2030258.png.jpg)Figure 1-33. Turning
    off the Windows firewall'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '![关闭 Windows 防火墙](httpatomoreillycomsourcenostarchimages2030258.png.jpg)图 1-33.
    关闭 Windows 防火墙'
- en: Setting User Passwords
  id: totrans-183
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置用户密码
- en: Again in the Control Panel, go to User Accounts. Click the user **georgia**
    and then select **Create a password**. Set *georgia*’s password to **`password`**,
    as shown in [Figure 1-34](ch01.xhtml#setting_a_user_password "Figure 1-34. Setting
    a user password"). Do the same thing for the user *secret*, but set *secret*’s
    password to **`Password123`**.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 再次进入控制面板，点击“用户账户”。点击用户**georgia**，然后选择**创建密码**。将*georgia*的密码设置为**`password`**，如[图
    1-34](ch01.xhtml#setting_a_user_password "图 1-34. 设置用户密码")所示。对用户*secret*进行相同操作，但将*secret*的密码设置为**`Password123`**。
- en: '![Setting a user password](httpatomoreillycomsourcenostarchimages2030260.png.jpg)Figure 1-34. Setting
    a user password'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '![设置用户密码](httpatomoreillycomsourcenostarchimages2030260.png.jpg)图 1-34. 设置用户密码'
- en: Setting a Static IP Address
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置静态 IP 地址
- en: Next, set a static IP address so your networking information won’t change as
    you work through the book. But first we need to figure out the address of our
    default gateway.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，设置一个静态 IP 地址，这样在你继续阅读本书时，网络信息就不会发生变化。但首先我们需要找出默认网关的地址。
- en: Ensure that your Windows XP system is set to use bridged networking in VMware.
    By default, your virtual machine will automatically pull an IP address using DHCP.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你的 Windows XP 系统在 VMware 中设置为使用桥接网络。默认情况下，你的虚拟机会使用 DHCP 自动获取 IP 地址。
- en: To find the default gateway, open a Windows command prompt by going to **Start**
    ▸ **Run**, entering **`cmd`**, and clicking **OK**. In the command prompt, enter
    **`ipconfig`**. This will show you the networking information, including the default
    gateway.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 要查找默认网关，请通过点击**开始** ▸ **运行**，输入**`cmd`**并点击**确定**来打开 Windows 命令提示符。在命令提示符中，输入**`ipconfig`**。这将显示网络信息，包括默认网关。
- en: '[PRE18]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: In my case, the IP address is 192.168.20.10, the subnet mask is 255.255.255.0,
    and the default gateway is 192.168.20.1.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在我的情况下，IP 地址是 192.168.20.10，子网掩码是 255.255.255.0，默认网关是 192.168.20.1。
- en: In the Control Panel, go to **Network and Internet Connections** and click **Network
    Connections** at the bottom of the screen.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在控制面板中，进入**网络和互联网连接**，并点击屏幕底部的**网络连接**。
- en: Right-click **Local Area Connection** and then select **Properties**.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击**本地连接**，然后选择**属性**。
- en: Highlight **Internet Protocol (TCP/IP)** and select **Properties**. Now enter
    a static IP address and set the Subnet mask and Default gateway to match the data
    you found with the `ipconfig` command, as shown in [Figure 1-35](ch01.xhtml#setting_a_static_ip_address-id00006
    "Figure 1-35. Setting a static IP address"). Set the Preferred DNS server to your
    default gateway as well.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高亮显示**互联网协议（TCP/IP）**并选择**属性**。现在输入一个静态 IP 地址，并将子网掩码和默认网关设置为与你通过`ipconfig`命令找到的数据匹配，如[图
    1-35](ch01.xhtml#setting_a_static_ip_address-id00006 "图 1-35. 设置静态 IP 地址")所示。将首选
    DNS 服务器设置为你的默认网关。
- en: Now it’s time to see if our virtual machines can communicate. Once you’re sure
    that the settings match, return to the Kali virtual machine (start it if you had
    shut it down) and enter **`ping <`**`static` `ip address of your Windows XP virtual
    machine`**`>`**, as shown here.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候检查我们的虚拟机是否能够通信了。一旦确认设置匹配，返回到 Kali 虚拟机（如果已经关闭，请启动它），并输入**`ping <`**`你 Windows
    XP 虚拟机的静态` `IP 地址`**`>`**，如图所示。
- en: Note
  id: totrans-196
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: My IP address is 192.168.20.10\. Throughout the book, you should replace this
    value with the IP address of your systems.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 我的 IP 地址是 192.168.20.10。在本书中，你应该将这个值替换为你系统的 IP 地址。
- en: '[PRE19]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '![Setting a static IP address](httpatomoreillycomsourcenostarchimages2030262.png.jpg)Figure 1-35. Setting
    a static IP address'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '![设置静态 IP 地址](httpatomoreillycomsourcenostarchimages2030262.png.jpg)图 1-35.
    设置静态 IP 地址'
- en: Enter ctrl-C to stop the `ping` command. If you see output beginning with `64
    bytes from <`*`ip address of XP`*`>`, as shown previously, your virtual machines
    are able to communicate. Congratulations! You’ve set up a network of virtual machines.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 ctrl-C 停止`ping`命令。如果你看到以`64 bytes from <`*`XP 的 IP 地址`*`>` 开头的输出，如前所示，说明你的虚拟机能够通信。恭喜！你已经成功设置了虚拟机网络。
- en: 'If instead you see a message including the text `Destination Host` `Unreachable`,
    troubleshoot your networking: Make sure your virtual machines are on the same
    bridged virtual network, check that your default gateway is correct, and so on.'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看到包含`Destination Host` `Unreachable`的消息，请排查网络问题：确保虚拟机处于相同的桥接虚拟网络中，检查默认网关是否正确等。
- en: Making XP Act Like It’s a Member of a Windows Domain
  id: totrans-202
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 让 XP 像 Windows 域成员一样工作
- en: Finally, we need to modify a setting in Windows XP so that it will behave as
    if it were a member of a Windows domain, as many of your clients will be. I’m
    not having you set up an entire Windows domain here, but during post exploitation,
    a couple of exercises will simulate a domain environment. Return to your XP virtual
    machine and follow these steps.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们需要修改 Windows XP 中的一个设置，使其表现得像是 Windows 域的成员，因为你的许多客户端将会是域成员。我并没有要求你在这里设置整个
    Windows 域，但在后期的利用过程中，几个练习将模拟域环境。返回到你的 XP 虚拟机，并按照以下步骤操作。
- en: Select **Start** ▸ **Run** and enter **`secpol.msc`** to open the Local Security
    Settings panel.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**开始** ▸ **运行**，然后输入**`secpol.msc`**以打开本地安全设置面板。
- en: Expand **Local Policies** on the left and double-click **Security Options**
    on the right.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开左侧的**本地策略**，然后双击右侧的**安全选项**。
- en: 'In the Policy list in the pane on the right, double-click **Network access:
    Sharing and security model for local accounts** and choose **Classic - local users
    authenticate as themselves** from the drop-down list, as shown in [Figure 1-36](ch01.xhtml#changing_a_local_security_setting_to_mak
    "Figure 1-36. Changing a local security setting to make your target act like a
    member of a Windows domain").'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在右侧窗格中的策略列表中，双击**网络访问：本地帐户的共享和安全模型**，然后从下拉列表中选择**经典 - 本地用户以其自身身份进行身份验证**，如[图
    1-36](ch01.xhtml#changing_a_local_security_setting_to_mak "图 1-36. 更改本地安全设置，使目标像
    Windows 域的成员一样工作")所示。
- en: '![Changing a local security setting to make your target act like a member of
    a Windows domain](httpatomoreillycomsourcenostarchimages2030264.png.jpg)Figure 1-36. Changing
    a local security setting to make your target act like a member of a Windows domain'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![更改本地安全设置，使目标像 Windows 域的成员一样工作](httpatomoreillycomsourcenostarchimages2030264.png.jpg)图
    1-36. 更改本地安全设置，使目标像 Windows 域的成员一样工作'
- en: Click **Apply** and then **OK**.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**应用**，然后点击**确定**。
- en: Close any open windows in your virtual machine.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭虚拟机中任何打开的窗口。
- en: Installing Vulnerable Software
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装脆弱软件
- en: In this section we’ll install some vulnerable software on our Windows XP virtual
    machine. We’ll be attacking this software in later chapters. Open your Windows
    XP virtual machine and, while still logged in as user *georgia*, follow the directions
    to install each of the packages listed here.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将会在 Windows XP 虚拟机上安装一些脆弱的软件。在后续章节中，我们将会攻击这些软件。打开你的 Windows XP 虚拟机，并在仍然以用户*georgia*身份登录的情况下，按照以下步骤安装此处列出的每个软件包。
- en: Zervit 0.4
  id: totrans-212
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Zervit 0.4
- en: Download Zervit version 0.4 from *[http://www.exploit-db.com/exploits/12582/](http://www.exploit-db.com/exploits/12582/)*.
    (Click the Vulnerable App option to download the files.) Unzip the downloaded
    archive and double-click the Zervit program to open and run it. Then enter port
    number **`3232`** in the console when the software starts. Answer **`Y`** to allowing
    directory listing, as shown in [Figure 1-37](ch01.xhtml#starting_zervit_0dot4
    "Figure 1-37. Starting Zervit 0.4"). Zervit will not automatically restart when
    you reboot Windows XP, so you will need to restart it if you reboot.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 从*[http://www.exploit-db.com/exploits/12582/](http://www.exploit-db.com/exploits/12582/)*下载
    Zervit 0.4 版本。（点击“Vulnerable App”选项下载文件。）解压下载的压缩包，双击 Zervit 程序以打开并运行它。然后在软件启动时，在控制台中输入端口号**`3232`**。如[图
    1-37](ch01.xhtml#starting_zervit_0dot4 "图 1-37. 启动 Zervit 0.4")所示，回答**`Y`**以允许目录列表。Zervit
    在你重新启动 Windows XP 后不会自动重启，所以如果重启系统，你需要手动重启它。
- en: '![Starting Zervit 0.4](httpatomoreillycomsourcenostarchimages2030266.png)Figure 1-37. Starting
    Zervit 0.4'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '![启动 Zervit 0.4](httpatomoreillycomsourcenostarchimages2030266.png)图 1-37.
    启动 Zervit 0.4'
- en: SLMail 5.5
  id: totrans-215
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: SLMail 5.5
- en: Download and run SLMail version 5.5 from *[http://www.exploit-db.com/exploits/638/](http://www.exploit-db.com/exploits/638/)*,
    using the default options when prompted. Just click **Next** for all of the options
    and don’t change anything. If you get a warning about a domain name, just ignore
    it and click **OK**. We don’t really need to deliver any email here.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 从*[http://www.exploit-db.com/exploits/638/](http://www.exploit-db.com/exploits/638/)*下载并运行
    SLMail 5.5 版本，在提示时使用默认选项。所有选项直接点击**下一步**，不要更改任何设置。如果你收到有关域名的警告，直接忽略它并点击**确定**。我们这里不需要发送任何电子邮件。
- en: Once SLMail is installed, restart your virtual machine. Then open **Start**
    ▸ **All Programs** ▸ **SL Products** ▸ **SLMail** ▸ **SLMail Configuration**.
    In the Users tab (default), right-click the **SLMail Configuration** window and
    choose **New** ▸ **User**, as shown in [Figure 1-38](ch01.xhtml#adding_a_user_in_slmail
    "Figure 1-38. Adding a user in SLMail").
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完SLMail后，重启虚拟机。然后打开**开始** ▸ **所有程序** ▸ **SL产品** ▸ **SLMail** ▸ **SLMail配置**。在用户标签页（默认）中，右键点击**SLMail配置**窗口，选择**新建**
    ▸ **用户**，如[图1-38](ch01.xhtml#adding_a_user_in_slmail "图1-38. 在SLMail中添加用户")所示。
- en: '![Adding a user in SLMail](httpatomoreillycomsourcenostarchimages2030268.png)Figure 1-38. Adding
    a user in SLMail'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '![在SLMail中添加用户](httpatomoreillycomsourcenostarchimages2030268.png)图1-38. 在SLMail中添加用户'
- en: Click the newly created user icon, enter username **georgia**, and fill in the
    information for the user, as shown in [Figure 1-39](ch01.xhtml#setting_the_user_information_in_slmail
    "Figure 1-39. Setting the user information in SLMail"). The mailbox name should
    be *georgia* with password *password*. Keep the defaults and press **OK** once
    you’ve finished.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 点击新创建的用户图标，输入用户名**georgia**，并填写该用户的信息，如[图1-39](ch01.xhtml#setting_the_user_information_in_slmail
    "图1-39. 在SLMail中设置用户信息")所示。邮箱名应为*georgia*，密码为*password*。保持默认设置，完成后点击**确定**。
- en: '![Setting the user information in SLMail](httpatomoreillycomsourcenostarchimages2030270.png.jpg)Figure 1-39. Setting
    the user information in SLMail'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '![在SLMail中设置用户信息](httpatomoreillycomsourcenostarchimages2030270.png.jpg)图1-39.
    在SLMail中设置用户信息'
- en: 3Com TFTP 2.0.1
  id: totrans-221
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3Com TFTP 2.0.1
- en: Next, download 3Com TFTP version 2.0.1 as a zipped file from *[http://www.exploit-db.com/exploits/3388/](http://www.exploit-db.com/exploits/3388/)*.
    Extract the files and copy *3CTftpSvcCtrl* and *3CTftpSvc* to the directory *C:\Windows*,
    as shown in [Figure 1-40](ch01.xhtml#copying_3com_tftp_to_cslashwindows "Figure 1-40. Copying
    3Com TFTP to C:\Windows").
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，从*【http://www.exploit-db.com/exploits/3388/](http://www.exploit-db.com/exploits/3388/)*下载3Com
    TFTP版本2.0.1的压缩文件。解压文件并将*3CTftpSvcCtrl*和*3CTftpSvc*复制到目录*C:\Windows*，如[图1-40](ch01.xhtml#copying_3com_tftp_to_cslashwindows
    "图1-40. 将3Com TFTP复制到C:\Windows")所示。
- en: '![Copying 3Com TFTP to C:\Windows](httpatomoreillycomsourcenostarchimages2030272.png.jpg)Figure 1-40. Copying
    3Com TFTP to C:\Windows'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '![将3Com TFTP复制到C:\Windows](httpatomoreillycomsourcenostarchimages2030272.png.jpg)图1-40.
    将3Com TFTP复制到C:\Windows'
- en: Then open *3CTftpSvcCtrl* (the blue *3* icon) and click **Install Service**,
    as shown in [Figure 1-41](ch01.xhtml#installing_3com_tftp "Figure 1-41. Installing
    3Com TFTP").
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 然后打开*3CTftpSvcCtrl*（蓝色的*3*图标），点击**安装服务**，如[图1-41](ch01.xhtml#installing_3com_tftp
    "图1-41. 安装3Com TFTP")所示。
- en: '![Installing 3Com TFTP](httpatomoreillycomsourcenostarchimages2030274.png.jpg)Figure 1-41. Installing
    3Com TFTP'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '![安装3Com TFTP](httpatomoreillycomsourcenostarchimages2030274.png.jpg)图1-41.
    安装3Com TFTP'
- en: Click **Start Service** to start 3Com TFTP for the first time. From now on,
    it will automatically start when you boot up the computer. Press **Quit** to exit.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**启动服务**以第一次启动3Com TFTP。从此以后，每次开机时它将自动启动。点击**退出**以退出。
- en: XAMPP 1.7.2
  id: totrans-227
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: XAMPP 1.7.2
- en: Now we’ll install an older version of the XAMPP software, version 1.7.2, from
    *[http://www.oldapps.com/xampp.php?old_xampp=45/](http://www.oldapps.com/xampp.php?old_xampp=45/)*.
    (The older version of Internet Explorer on Windows XP seems to have some trouble
    opening this page. If you have trouble, download the software from your host system
    and copy it onto Windows XP’s desktop.)
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将从*【http://www.oldapps.com/xampp.php?old_xampp=45/](http://www.oldapps.com/xampp.php?old_xampp=45/)*安装XAMPP软件的旧版本1.7.2。（Windows
    XP上的旧版Internet Explorer似乎有些问题无法打开此页面。如果遇到问题，可以从主机系统下载软件并将其复制到Windows XP的桌面上。）
- en: Run the installer and accept the default options as they’re presented to you.
    When installation is finished, choose option **`1\. start XAMPP Control Panel`**,
    as shown in [Figure 1-42](ch01.xhtml#starting_xampp_control_panel "Figure 1-42. Starting
    XAMPP Control Panel").
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行安装程序，并接受默认选项。当安装完成后，选择**`1. 启动XAMPP控制面板`**，如[图1-42](ch01.xhtml#starting_xampp_control_panel
    "图1-42. 启动XAMPP控制面板")所示。
- en: '![Starting XAMPP Control Panel](httpatomoreillycomsourcenostarchimages2030276.png)Figure 1-42. Starting
    XAMPP Control Panel'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![启动XAMPP控制面板](httpatomoreillycomsourcenostarchimages2030276.png)图1-42. 启动XAMPP控制面板'
- en: In the XAMPP Control Panel, install the Apache, MySQL, and FileZilla services
    (select the **Svc** checkbox to the left of the service name). Then click the
    **Start** button for each service. Your screen should look like the one shown
    in [Figure 1-43](ch01.xhtml#installing_and_starting_xampp_services "Figure 1-43. Installing
    and starting XAMPP services").
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在XAMPP控制面板中，安装Apache、MySQL和FileZilla服务（选中服务名称左侧的**Svc**复选框）。然后点击每个服务的**Start**按钮。你的屏幕应与[图1-43](ch01.xhtml#installing_and_starting_xampp_services
    "图1-43. 安装和启动XAMPP服务")中的界面相同。
- en: '![Installing and starting XAMPP services](httpatomoreillycomsourcenostarchimages2030278.png.jpg)Figure 1-43. Installing
    and starting XAMPP services'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![安装和启动XAMPP服务](httpatomoreillycomsourcenostarchimages2030278.png.jpg)图1-43.
    安装和启动XAMPP服务'
- en: Click the **Admin** button for FileZilla in the XAMPP Control Panel. The Admin
    panel is shown in [Figure 1-44](ch01.xhtml#filezilla_admin_panel "Figure 1-44. FileZilla
    Admin panel").
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Admin**按钮，进入XAMPP控制面板中的FileZilla管理界面。管理员面板如[图1-44](ch01.xhtml#filezilla_admin_panel
    "图1-44. FileZilla 管理面板")所示。
- en: '![FileZilla Admin panel](httpatomoreillycomsourcenostarchimages2030280.png)Figure 1-44. FileZilla
    Admin panel'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![FileZilla管理面板](httpatomoreillycomsourcenostarchimages2030280.png)图1-44. FileZilla
    管理面板'
- en: Go to **Edit** ▸ **Users** to open the Users dialog, shown in [Figure 1-45](ch01.xhtml#adding_an_ftp_user
    "Figure 1-45. Adding an FTP user").
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入**编辑** ▸ **用户**以打开用户对话框，如[图1-45](ch01.xhtml#adding_an_ftp_user "图1-45. 添加FTP用户")所示。
- en: Click the **Add** button on the right of the dialog box.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击对话框右侧的**Add**按钮。
- en: In the Add User Account dialog box, enter **`georgia`** and press **OK**.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在添加用户账户对话框中，输入**`georgia`**并按**OK**。
- en: '![Adding an FTP user](httpatomoreillycomsourcenostarchimages2030282.png.jpg)Figure 1-45. Adding
    an FTP user'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![添加FTP用户](httpatomoreillycomsourcenostarchimages2030282.png.jpg)图1-45. 添加FTP用户'
- en: With *georgia* highlighted, check the **Password** box under Account Settings
    and enter **`password`**.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*georgia*高亮状态下，选中账户设置中的**Password**复选框并输入**`password`**。
- en: Click **OK**. When prompted to share a folder, browse to the *georgia’*s *Documents*
    folder on Windows and select it to share it, as shown in [Figure 1-46](ch01.xhtml#sharing_a_folder_via_ftp
    "Figure 1-46. Sharing a folder via FTP"). Leave the defaults for all other checkboxes,
    as shown in the figure. Click **OK** once you’ve finished and exit the various
    open windows.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**OK**。当提示你共享文件夹时，浏览到Windows上的*georgia*的*Documents*文件夹并选择共享，如[图1-46](ch01.xhtml#sharing_a_folder_via_ftp
    "图1-46. 通过FTP共享文件夹")所示。对于其他所有复选框，保持默认设置，如图所示。完成后点击**OK**并退出所有打开的窗口。
- en: '![Sharing a folder via FTP](httpatomoreillycomsourcenostarchimages2030284.png.jpg)Figure 1-46. Sharing
    a folder via FTP'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '![通过FTP共享文件夹](httpatomoreillycomsourcenostarchimages2030284.png.jpg)图1-46.
    通过FTP共享文件夹'
- en: Adobe Acrobat Reader
  id: totrans-242
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Adobe Acrobat Reader
- en: Now we’ll install Adobe Acrobat Reader version 8.1.2 from *[http://www.oldapps.com/adobe_reader.php?old_adobe=17/](http://www.oldapps.com/adobe_reader.php?old_adobe=17/)*.
    Follow the default prompts to install it. Click **Finish** once you’re done. (Here
    again you may need to download the file to your host system and copy it to Windows
    XP’s desktop.)
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将从*[http://www.oldapps.com/adobe_reader.php?old_adobe=17/](http://www.oldapps.com/adobe_reader.php?old_adobe=17/)*下载并安装Adobe
    Acrobat Reader 8.1.2版本。按照默认提示进行安装，完成后点击**Finish**。（在这里，你可能需要先将文件下载到主机系统，然后将其复制到Windows
    XP的桌面上。）
- en: War-FTP
  id: totrans-244
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: War-FTP
- en: Next, download and install War-FTP version 1.65 from *[http://www.exploit-db.com/exploits/3570/](http://www.exploit-db.com/exploits/3570/)*.
    Download the executable from *exploit-db.com* to *georgia*’s desktop and run the
    downloaded executable to install. You do not need to start the FTP service; we
    will turn it on when we discuss exploit development in [Chapter 16](ch16.xhtml
    "Chapter 16. A Stack-Based Buffer Overflow in Linux") through [Chapter 19](ch19.xhtml
    "Chapter 19. Fuzzing, Porting Exploits, and Metasploit Modules").
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，从*[http://www.exploit-db.com/exploits/3570/](http://www.exploit-db.com/exploits/3570/)*下载并安装War-FTP
    1.65版。将可执行文件从*exploit-db.com*下载到*georgia*的桌面上，并运行该可执行文件进行安装。你无需启动FTP服务；我们将在[第16章](ch16.xhtml
    "第16章. Linux中的基于堆栈的缓冲区溢出")至[第19章](ch19.xhtml "第19章. Fuzzing、移植漏洞和Metasploit模块")讨论漏洞开发时开启它。
- en: WinSCP
  id: totrans-246
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: WinSCP
- en: Download and install the latest version of WinSCP from *[http://winscp.net/](http://winscp.net/)*.
    Choose the **Typical Installation** option. You can uncheck the additional add-ons.
    Click **Finish** once you’re done.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 从*[http://winscp.net/](http://winscp.net/)*下载并安装最新版本的WinSCP。选择**典型安装**选项。你可以取消选择附加的插件。安装完成后点击**Finish**。
- en: Installing Immunity Debugger and Mona
  id: totrans-248
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Immunity Debugger和Mona
- en: Now we’ll finish up the Windows XP virtual machine by installing a debugger,
    a tool that helps detect errors in computer programs. We’ll be using the debugger
    in the exploit development chapters. Visit the Immunity Debugger registration
    page at *[http://debugger.immunityinc.com/ID_register.py](http://debugger.immunityinc.com/ID_register.py)*.
    Complete the registration and then press the **Download** button. Run the installer.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将通过安装调试器来完成 Windows XP 虚拟机的设置，调试器是一个帮助检测计算机程序错误的工具。我们将在漏洞开发章节中使用调试器。访问 Immunity
    Debugger 注册页面 *[http://debugger.immunityinc.com/ID_register.py](http://debugger.immunityinc.com/ID_register.py)*。完成注册后，点击
    **Download** 按钮，运行安装程序。
- en: When asked if you want to install Python, click **Yes**. Accept the license
    agreement and follow the default installation prompts. When you close the installer,
    the Python installation will automatically run. Use the default installation values.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 当系统询问你是否要安装 Python 时，点击 **Yes**。接受许可协议，并按照默认的安装提示进行操作。关闭安装程序时，Python 安装会自动运行。使用默认的安装值。
- en: Once Immunity Debugger and Python have been installed, download *mona.py* from
    *[http://redmine.corelan.be/projects/mona/repository/raw/mona.py/](http://redmine.corelan.be/projects/mona/repository/raw/mona.py/)*.
    Copy *mona.py* to *C:\Program Files\Immunity Inc\Immunity Debugger\PyCommands*,
    as shown in [Figure 1-47](ch01.xhtml#installing_mona "Figure 1-47. Installing
    Mona").
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了 Immunity Debugger 和 Python，下载 *mona.py* 文件，地址为 *[http://redmine.corelan.be/projects/mona/repository/raw/mona.py/](http://redmine.corelan.be/projects/mona/repository/raw/mona.py/)*。将
    *mona.py* 复制到 *C:\Program Files\Immunity Inc\Immunity Debugger\PyCommands*，如 [图
    1-47](ch01.xhtml#installing_mona "图 1-47. 安装 Mona") 所示。
- en: Open Immunity Debugger, and at the command prompt at the bottom of the window,
    enter **`!mona config -set workingfolder c:\logs\%p`**, as shown in [Figure 1-48](ch01.xhtml#setting_up_monaapostrophes_logs
    "Figure 1-48. Setting up Mona’s logs"). This command tells mona to log its output
    to *C:\logs\<program name>*, where *<program name>* is the program Immunity Debugger
    is currently debugging.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 打开 Immunity Debugger，在窗口底部的命令提示符下，输入 **`!mona config -set workingfolder c:\logs\%p`**，如
    [图 1-48](ch01.xhtml#setting_up_monaapostrophes_logs "图 1-48. 设置 Mona 的日志") 所示。此命令告诉
    Mona 将其输出日志记录到 *C:\logs\<program name>*，其中 *<program name>* 是 Immunity Debugger
    当前正在调试的程序。
- en: Now our Windows XP target is set up and ready to go.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们的 Windows XP 目标已设置完成，可以开始使用。
- en: '![Installing Mona](httpatomoreillycomsourcenostarchimages2030286.png.jpg)Figure 1-47. Installing
    Mona![Setting up Mona’s logs](httpatomoreillycomsourcenostarchimages2030288.png)Figure 1-48. Setting
    up Mona’s logs'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: '![安装 Mona](httpatomoreillycomsourcenostarchimages2030286.png.jpg)图 1-47. 安装
    Mona ![设置 Mona 的日志](httpatomoreillycomsourcenostarchimages2030288.png)图 1-48.
    设置 Mona 的日志'
- en: Setting Up the Ubuntu 8.10 Target
  id: totrans-255
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置 Ubuntu 8.10 目标
- en: Because Linux is open source, you can simply download the Linux virtual machine
    as part of the torrent for this book. Unzip the 7-Zip archive *BookUbuntu.7zip*
    and use the password *1stPentestBook?!* to open the archive. Open the *.vmx* file
    in VMware. If you are prompted with a message that says the virtual machine appears
    to be in use, click **Take Ownership** and, as with Kali, select **I copied it**.
    The username and password for the virtual machine itself are *georgia:password*.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Linux 是开源的，你可以直接下载本书的 torrent 文件中的 Linux 虚拟机。解压 *BookUbuntu.7zip* 压缩文件，使用密码
    *1stPentestBook?!* 解开压缩文件。在 VMware 中打开 *.vmx* 文件。如果系统提示虚拟机正在使用中，点击 **Take Ownership**，并与
    Kali 一样选择 **I copied it**。虚拟机的用户名和密码是 *georgia:password*。
- en: Once you have the Ubuntu virtual machine loaded, make sure the network interface
    is set to Bridged in VMware and click the networking icon (two computers) at the
    top right of the screen to attach the virtual machine to the network. Do not install
    any updates if prompted. As with Windows XP, we will exploit out-of-date software
    on this system. Now this virtual machine is all set up. (I’ll show you how to
    set a static IP address in Linux in [Chapter 2](ch02.xhtml "Chapter 2. Using Kali
    Linux").)
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 当你加载好 Ubuntu 虚拟机后，确保在 VMware 中将网络接口设置为桥接模式，并点击屏幕右上方的网络图标（两个计算机图标），将虚拟机连接到网络。如果有提示不要安装任何更新。与
    Windows XP 一样，我们将在此系统上利用过时的软件。现在，这个虚拟机已完全设置好。（我将在[第 2 章](ch02.xhtml "第 2 章 使用
    Kali Linux")中向你展示如何在 Linux 中设置静态 IP 地址。）
- en: Creating the Windows 7 Target
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 Windows 7 目标
- en: 'As with Windows XP, you’ll need to install a copy of Windows 7 SP1 in VMware
    by loading your image or DVD. A 30-day trial version of 32-bit Windows 7 Professional
    SP1 will work fine, but you’ll need to activate it after 30 days if you wish to
    continue using it. To find a legal version of Windows 7 SP1, try one of the following:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 与Windows XP一样，你需要通过加载镜像或DVD在VMware中安装Windows 7 SP1的副本。32位Windows 7 Professional
    SP1的30天试用版可以正常使用，但如果你希望继续使用它，30天后需要激活。要获取合法的Windows 7 SP1版本，可以尝试以下方式：
- en: Visit *[http://www.softpedia.com/get/System/OS-Enhancements/Windows-7.shtml](http://www.softpedia.com/get/System/OS-Enhancements/Windows-7.shtml)*.
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问*[http://www.softpedia.com/get/System/OS-Enhancements/Windows-7.shtml](http://www.softpedia.com/get/System/OS-Enhancements/Windows-7.shtml)*。
- en: Visit *[http://technet.microsoft.com/en-us/evalcenter/dn407368](http://technet.microsoft.com/en-us/evalcenter/dn407368)*.
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问*[http://technet.microsoft.com/en-us/evalcenter/dn407368](http://technet.microsoft.com/en-us/evalcenter/dn407368)*。
- en: Note
  id: totrans-262
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Your school or workplace may have access to programs like DreamSpark or BizSpark
    that give you access to Windows operating systems. You can also check my website
    (*[http://www.bulbsecurity.com/](http://www.bulbsecurity.com/)*) for more resources.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 你的学校或工作场所可能有访问DreamSpark或BizSpark等项目的权限，这些项目可以让你访问Windows操作系统。你还可以查看我的网站(*[http://www.bulbsecurity.com/](http://www.bulbsecurity.com/)*)，获取更多资源。
- en: Creating a User Account
  id: totrans-264
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建用户账户
- en: After installing Windows 7 Professional SP1, opt out of security updates and
    create user *Georgia Weidman* as an administrator with a password of *password*,
    as shown in [Figure 1-49](ch01.xhtml#setting_a_username "Figure 1-49. Setting
    a username") and [Figure 1-50](ch01.xhtml#setting_a_password_for_the_user_georgia
    "Figure 1-50. Setting a password for the user Georgia Weidman").
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完Windows 7 Professional SP1后，选择不进行安全更新，并创建用户*Georgia Weidman*，设置为管理员，并使用*password*作为密码，如[图1-49](ch01.xhtml#setting_a_username
    "图1-49. 设置用户名")和[图1-50](ch01.xhtml#setting_a_password_for_the_user_georgia "图1-50.
    为用户Georgia Weidman设置密码")所示。
- en: Again opt out of automatic updates. When prompted, set the computer’s current
    location to a work network. Once the installation has finished, log in to the
    account *Georgia Weidman*. Leave the Windows Firewall enabled. VMware will reboot
    Windows 7 a few times as it installs everything.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 再次选择不自动更新。当提示时，将计算机的当前位置设置为工作网络。安装完成后，登录账户*Georgia Weidman*。保持启用Windows防火墙。VMware会在安装过程中多次重启Windows
    7。
- en: Now tell VMware to install VMware Tools, as you did in the Windows XP section.
    After instructing VMware to install VMware Tools in the virtual machine, if the
    installer does not automatically run, go to My Computer and run the VMware Tools
    installer from the virtual machine’s DVD drive, as shown in [Figure 1-51](ch01.xhtml#installing_vmware_tools-id00007
    "Figure 1-51. Installing VMware Tools").
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 现在按照你在Windows XP部分中的步骤告诉VMware安装VMware工具。指示VMware在虚拟机中安装VMware工具后，如果安装程序没有自动运行，请转到“我的电脑”，并从虚拟机的DVD驱动器运行VMware工具安装程序，如[图1-51](ch01.xhtml#installing_vmware_tools-id00007
    "图1-51. 安装VMware工具")所示。
- en: '![Setting a username](httpatomoreillycomsourcenostarchimages2030290.png.jpg)Figure 1-49. Setting
    a username![Setting a password for the user Georgia Weidman](httpatomoreillycomsourcenostarchimages2030292.png.jpg)Figure 1-50. Setting
    a password for the user Georgia Weidman![Installing VMware Tools](httpatomoreillycomsourcenostarchimages2030294.png.jpg)Figure 1-51. Installing
    VMware Tools'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: '![设置用户名](httpatomoreillycomsourcenostarchimages2030290.png.jpg)图1-49. 设置用户名![为用户Georgia
    Weidman设置密码](httpatomoreillycomsourcenostarchimages2030292.png.jpg)图1-50. 为用户Georgia
    Weidman设置密码![安装VMware工具](httpatomoreillycomsourcenostarchimages2030294.png.jpg)图1-51.
    安装VMware工具'
- en: Opting Out of Automatic Updates
  id: totrans-269
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选择不进行自动更新
- en: Though our attacks on Windows 7 will largely rely on flaws in third-party software
    rather than missing Windows patches, let’s once again opt out of Windows updates
    for this virtual machine. To do this, go to **Start** ▸ **Control Panel** ▸ **System
    and Security**. Then under Windows Update, click **Turn Automatic Updating On
    or Off**. Set Important updates to **Never check for updates (not recommended)**
    as shown in [Figure 1-52](ch01.xhtml#opting_out_of_automatic_updates-id00008 "Figure 1-52. Opting
    out of automatic updates"). Click **OK**.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们对Windows 7的攻击主要依赖于第三方软件中的漏洞，而非Windows缺失的补丁，但我们仍然需要再次选择不进行Windows更新。为此，请进入**开始**
    ▸ **控制面板** ▸ **系统和安全**。然后在Windows更新下，点击**启用或禁用自动更新**。将重要更新设置为**从不检查更新（不推荐）**，如[图1-52](ch01.xhtml#opting_out_of_automatic_updates-id00008
    "图1-52. 选择不进行自动更新")所示。点击**确定**。
- en: '![Opting out of automatic updates](httpatomoreillycomsourcenostarchimages2030296.png.jpg)Figure 1-52. Opting
    out of automatic updates'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: '![取消自动更新](httpatomoreillycomsourcenostarchimages2030296.png.jpg)图 1-52. 取消自动更新'
- en: Setting a Static IP Address
  id: totrans-272
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置静态 IP 地址
- en: Set a static IP address by choosing **Start** ▸ **Control Panel** ▸ **Network
    and Internet** ▸ **Network and Sharing Center** ▸ **Change Adapter Settings**
    ▸ **Local Area Network**. Now right-click and choose **Properties** ▸ **Internet
    Protocol Version 4 (TCP/IPv4)** ▸ **Properties**. Set these values as you did
    for Windows XP (discussed in [Setting a Static IP Address](ch01.xhtml#setting_a_static_ip_address
    "Setting a Static IP Address")), but use a different value for the Windows 7 IP
    address, as shown in [Figure 1-53](ch01.xhtml#setting_a_static_ip_address-id00010
    "Figure 1-53. Setting a static IP address"). If asked whether to configure this
    network as Home, Work, or Public, choose **Work**. (Be sure that your virtual
    machine network setting is configured to use a bridged adapter.)
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 通过选择 **Start** ▸ **Control Panel** ▸ **Network and Internet** ▸ **Network and
    Sharing Center** ▸ **Change Adapter Settings** ▸ **Local Area Network** 来设置静态
    IP 地址。现在右键点击并选择 **Properties** ▸ **Internet Protocol Version 4 (TCP/IPv4)** ▸
    **Properties**。按照你为 Windows XP 设置静态 IP 地址的方式（在[设置静态 IP 地址](ch01.xhtml#setting_a_static_ip_address
    "设置静态 IP 地址")中讨论），但使用不同的 Windows 7 IP 地址，如[图 1-53](ch01.xhtml#setting_a_static_ip_address-id00010
    "图 1-53. 设置静态 IP 地址")所示。如果询问是否将此网络配置为家庭、工作还是公共网络，选择 **Work**。（确保你的虚拟机网络设置已配置为使用桥接适配器。）
- en: '![Setting a static IP address](httpatomoreillycomsourcenostarchimages2030298.png.jpg)Figure 1-53. Setting
    a static IP address'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '![设置静态 IP 地址](httpatomoreillycomsourcenostarchimages2030298.png.jpg)图 1-53.
    设置静态 IP 地址'
- en: Because the Windows firewall is turned on, Windows 7 won’t respond to a ping
    from our Kali system. Therefore, we’ll ping our Kali system from Windows 7\. Start
    your Kali Linux virtual machine, and from your Windows 7 virtual machine, click
    the **Start** button. Then enter **`cmd`** in the Run dialog to open a Windows
    command prompt. At the prompt, enter the following.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Windows 防火墙已启用，Windows 7 不会响应来自我们 Kali 系统的 ping 请求。因此，我们将从 Windows 7 向 Kali
    系统发送 ping 请求。启动你的 Kali Linux 虚拟机，在你的 Windows 7 虚拟机中点击 **Start** 按钮。然后在运行对话框中输入
    **`cmd`** 打开 Windows 命令提示符。在提示符下输入以下命令。
- en: '[PRE20]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: If everything is working, you should see replies to the ping request as in [Setting
    a Static IP Address](ch01.xhtml#setting_a_static_ip_address "Setting a Static
    IP Address").
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切正常，你应该能看到 ping 请求的回复，如[设置静态 IP 地址](ch01.xhtml#setting_a_static_ip_address
    "设置静态 IP 地址")中所示。
- en: Adding a Second Network Interface
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加第二个网络接口
- en: Now shut down your Windows 7 virtual machine. We’re going to add a second network
    interface to the Windows 7 virtual machine that will allow the Windows 7 system
    to be part of two networks. We’ll use this setup during post exploitation to simulate
    attacking additional systems on a second network.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 现在关闭你的 Windows 7 虚拟机。我们将为 Windows 7 虚拟机添加第二个网络接口，使 Windows 7 系统能够连接到两个网络。在后期利用这个设置，我们将模拟在第二个网络上攻击其他系统。
- en: In VMware Player on Microsoft Windows, choose **Player** ▸ **Manage** ▸ **Virtual
    Machine Settings** ▸ **Add**, select **Network Adapter**, and press **Next**.
    This adapter will be Network Adapter 2\. In VMware Fusion on Mac OS, go to **Virtual
    Machine Settings**, select **Add a Device**, and select a network adapter. Set
    this new adapter to the Host Only network. Press **OK**, and the virtual machine
    should restart. (We do not need to set a static IP address for Network Adapter
    2.) When the virtual machine restarts, open Virtual Machine Settings again, and
    you should see the two network adapters listed. Both should be connected when
    your computer powers on.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Microsoft Windows 上的 VMware Player 中，选择 **Player** ▸ **Manage** ▸ **Virtual
    Machine Settings** ▸ **Add**，选择 **Network Adapter**，然后按 **Next**。这个适配器将是网络适配器
    2。在 Mac OS 上的 VMware Fusion 中，进入 **Virtual Machine Settings**，选择 **Add a Device**，然后选择网络适配器。将这个新适配器设置为
    Host Only 网络。按 **OK**，虚拟机应会重启。（我们不需要为网络适配器 2 设置静态 IP 地址。）当虚拟机重启后，再次打开 Virtual
    Machine Settings，你应该能看到列出的两个网络适配器。只要计算机启动，它们应该都已连接。
- en: Installing Additional Software
  id: totrans-281
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装额外的软件
- en: 'Now install the following software in your Windows 7 virtual machine, using
    default settings across the board:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在你的 Windows 7 虚拟机中安装以下软件，保持默认设置。
- en: Java 7 Update 6, an out-of-date version of Java, from *[http://www.oldapps.com/java.php?old_java=8120/](http://www.oldapps.com/java.php?old_java=8120/).*
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 *[http://www.oldapps.com/java.php?old_java=8120/](http://www.oldapps.com/java.php?old_java=8120/)*
    下载一个过时的 Java 7 Update 6 版本。
- en: Winamp version 5.55 from *[http://www.oldapps.com/winamp.php?old_winamp=247/](http://www.oldapps.com/winamp.php?old_winamp=247/).*
    (Uncheck the changes to your search engine and so on.)
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从*[http://www.oldapps.com/winamp.php?old_winamp=247/](http://www.oldapps.com/winamp.php?old_winamp=247/)*下载
    Winamp 版本 5.55。 (取消更改搜索引擎等设置。)
- en: The latest version of Mozilla Firefox from *[http://www.mozilla.org/](http://www.mozilla.org/).*
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从*[http://www.mozilla.org/](http://www.mozilla.org/)*下载最新版本的 Mozilla Firefox。
- en: Microsoft Security Essentials from *[http://windows.microsoft.com/en-us/windows/security-essentials-download/](http://windows.microsoft.com/en-us/windows/security-essentials-download/)*.
    (Download the latest antivirus signatures, making sure to download the correct
    version for your 32-bit Windows install. Don’t turn on automatic sample submission
    or scan on install. Also, disable real-time protection for now. We will enable
    this feature when we study bypassing antivirus software in [Chapter 12](ch12.xhtml
    "Chapter 12. Bypassing Antivirus Applications"). This setting can be found on
    the Settings tab under Real-time Protection. Uncheck **Turn on real-time protection
    (recommended)**, as shown in [Figure 1-54](ch01.xhtml#turning_off_real-time_protection
    "Figure 1-54. Turning off real-time protection"). Click **Save changes**.)
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从*[http://windows.microsoft.com/en-us/windows/security-essentials-download/](http://windows.microsoft.com/en-us/windows/security-essentials-download/)*下载微软安全防护软件。
    (下载最新的病毒定义，确保下载适用于你 32 位 Windows 系统的版本。不要启用自动提交样本或安装时扫描。此外，现在暂时禁用实时保护。我们将在第[12章](ch12.xhtml
    "第12章。绕过杀毒软件")学习如何绕过杀毒软件时启用此功能。此设置可以在“设置”选项卡下的“实时保护”中找到。取消选中**启用实时保护（推荐）**，如图[1-54](ch01.xhtml#turning_off_real-time_protection
    "图 1-54. 关闭实时保护")所示。点击**保存更改**。)
- en: '![Turning off real-time protection](httpatomoreillycomsourcenostarchimages2030300.png.jpg)Figure 1-54. Turning
    off real-time protection'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '![关闭实时保护](httpatomoreillycomsourcenostarchimages2030300.png.jpg)图 1-54. 关闭实时保护'
- en: Finally, install the *BookApp* custom web application found in the torrent for
    this book. (*1stPentestBook?!* is the password for the archive.) Drag and drop
    the *BookApp* folder on the Windows 7 virtual machine. Then follow the instructions
    in *InstallApp.pdf* detailing how to install BookApp. Here is a high-level overview
    of the instructions.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，安装从本书的种子中找到的*BookApp*自定义 Web 应用程序。(*1stPentestBook?!* 是该压缩包的密码。）将*BookApp*文件夹拖放到
    Windows 7 虚拟机中。然后按照*InstallApp.pdf*中的说明安装 BookApp。以下是安装步骤的高层次概览。
- en: Run *Step1-install-iis.bat* as an administrator by right-clicking the *.bat*
    file and choosing **Run as administrator**. (Once install finishes, you can close
    any DOS windows that are still up.)
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份运行*Step1-install-iis.bat*，通过右键点击*.bat*文件并选择**以管理员身份运行**。（安装完成后，你可以关闭任何仍然打开的
    DOS 窗口。）
- en: Navigate to the *SQL* folder and run *SQLEXPRWT_x86_ENU.EXE*. Detailed instructions
    with screenshots are included in the InstallApp PDF.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到*SQL*文件夹并运行*SQLEXPRWT_x86_ENU.EXE*。详细的安装说明和截图已包含在 InstallApp PDF 中。
- en: Install Service Pack 3 by running *SQLServer2008SP3-KB2546951-x86-ENU.exe*.
    When warned that program has known compatibility issues, click **OK** to run it
    and complete the install. Choose to accept any changes.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行*SQLServer2008SP3-KB2546951-x86-ENU.exe*安装服务包 3。当出现已知兼容性问题的警告时，点击**确定**以运行该程序并完成安装。选择接受所有更改。
- en: Using SQL Server Configuration Manager, enable **Named Pipes**.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 SQL Server 配置管理器启用**命名管道**。
- en: Navigate back to the main app folder and run *Step2-Modify-FW.bat* as an administrator.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回主应用程序文件夹，以管理员身份运行*Step2-Modify-FW.bat*。
- en: Install XML support for MS SQL with *sqlxml_x86-v4.exe* from the SQL folder.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用*sqlxml_x86-v4.exe*安装 MS SQL 的 XML 支持，文件在 SQL 文件夹中。
- en: Run *Step3-Install-App.bat* as an administrator from the main app folder.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从主应用程序文件夹中以管理员身份运行*Step3-Install-App.bat*。
- en: Use MS SQL Management Studio to run *db.sql* from the SQL folder, as described
    in detail in the InstallApp PDF.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 MS SQL 管理工作室运行 SQL 文件夹中的*db.sql*，具体细节参见 InstallApp PDF。
- en: Finally, change the user permissions on the *AuthInfo.xml* file in the book
    app folder to give full permissions to IIS_USERS.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，修改书籍应用文件夹中*AuthInfo.xml*文件的用户权限，给予 IIS_USERS 完全权限。
- en: Summary
  id: totrans-298
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: We set up our virtual environment, downloaded and customized Kali Linux for
    attacks, configured our virtual network, and configured our target operating systems—Windows
    XP, Windows 7, and Ubuntu.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 我们设置了虚拟环境，下载并定制了用于攻击的 Kali Linux，配置了虚拟网络，并配置了我们的目标操作系统——Windows XP、Windows 7
    和 Ubuntu。
- en: In the next chapter, we will get used to working with the Linux command line,
    and we’ll be on our way to learning how to use the many pentesting tools and techniques
    in this book.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将习惯于使用 Linux 命令行，并且我们将开始学习如何使用本书中的许多渗透测试工具和技术。
