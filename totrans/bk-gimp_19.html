<html><head></head><body><div class="chapter" title="Chapter&#xA0;12.&#xA0;Color"><div class="titlepage"><div><div><h1 class="title"><a id="color"/>Chapter 12. Color</h1></div></div></div><p><a id="iddle1821" class="indexterm"/><a id="iddle2120" class="indexterm"/><a id="iddle4522" class="indexterm"/><a id="iddle4525" class="indexterm"/>Representing and handling colors is one of the fundamental tasks of an image-manipulation program like GIMP. Thus, we cover the topic in several places in this book. In this chapter, we present the main concepts and tools. In <a class="xref" href="apa.html" title="Appendix A. Vision and Image Representation">Appendix A</a>, we discuss the foundations of color perception, so refer to that appendix if you need to refresh your knowledge. The theories of color and vision form the foundation of color handling in GIMP, and a thorough understanding of that appendix will help you to understand this chapter fully.</p><p>Additionally, <a class="xref" href="ch19.html" title="Chapter 19. Obtaining and Printing Images">Chapter 19</a> contains information about 16-bit color depth and handling photographs from a digital camera in raw format. <a class="xref" href="ch20.html" title="Chapter 20. Image Formats">Chapter 20</a> describes all the image formats handled by GIMP, focusing on the definition and use of color palettes. And in <a class="xref" href="ch22.html" title="Chapter 22. Customizing GIMP">Chapter 22</a>, we explain how to set the parameters of color management.</p></div>
<div class="sect1" title="12.1 Concepts"><div class="titlepage"><div><div><h1 class="title"><a id="one2dot1_concepts"/>12.1 Concepts</h1></div></div></div><p>The concept of color is a very complex one, and many books have been written on the subject. Great thinkers like Aristotle, Huygens, Newton, Goethe, and many others developed theories of color. These theories dealt with physiology, philosophy, psychology, and even physics and high-level mathematics. The modern technology of computers, display screens, and printers now relies on a well-established theory that you can read about in any text on color theory.</p><p>In this section, we begin by briefly reviewing color models, which are presented in more detail in <a class="xref" href="apas03.html" title="A.3 Color Representation">A.3 Color Representation</a>. We’ll then consider the three internal representations that GIMP uses to store image information while you work. External formats used to store images on hard disks or on the Web are considered in <a class="xref" href="ch20.html" title="Chapter 20. Image Formats">Chapter 20</a>.</p><div class="sect2" title="Color Models"><div class="titlepage"><div><div><h2 class="title"><a id="color_models"/>Color Models</h2></div></div></div><p>GIMP handles raster images, which are composed of <span class="emphasis"><em>pixels</em></span>. A pixel is the smallest image component and represents a single color (and any associated transparency). Each color is made up of a unique mixture of components, which depend on the chosen color model. Several color models exist, and GIMP uses three of them. In all the models, a given color is represented as coordinates in some number of dimensions, generally three. The size of the coordinate range indicates the number of possible colors. Due to file size constraints, the coordinates are generally integers, at least when stored on external media. A floating number needs 32 <a id="iddle1031" class="indexterm"/><a id="iddle1058" class="indexterm"/><a id="iddle1093" class="indexterm"/><a id="iddle1667" class="indexterm"/><a id="iddle1677" class="indexterm"/><a id="iddle1760" class="indexterm"/><a id="iddle1769" class="indexterm"/><a id="iddle1780" class="indexterm"/><a id="iddle1794" class="indexterm"/><a id="iddle1870" class="indexterm"/><a id="iddle2948" class="indexterm"/><a id="iddle3221" class="indexterm"/><a id="iddle3232" class="indexterm"/><a id="iddle3259" class="indexterm"/><a id="iddle3272" class="indexterm"/><a id="iddle4305" class="indexterm"/><a id="iddle4324" class="indexterm"/><a id="iddle4471" class="indexterm"/><a id="iddle4478" class="indexterm"/><a id="iddle4622" class="indexterm"/><a id="iddle4661" class="indexterm"/><a id="iddle4662" class="indexterm"/><a id="iddle4690" class="indexterm"/><a id="iddle4700" class="indexterm"/><a id="iddle4702" class="indexterm"/><a id="iddle4758" class="indexterm"/><a id="iddle5227" class="indexterm"/><a id="iddle5913" class="indexterm"/><a id="iddle5931" class="indexterm"/><a id="iddle6069" class="indexterm"/>or even 64 bits, while all color representations on files use at most 8 bits per color.</p><p>The RGB model is additive, meaning that a color with a value of zero in each of its components is black, and a color with a maximum value in each of its components is white. The three fundamental colors are red, green, and blue, and the combination of two fundamental colors is a complementary color: red + green = yellow, red + blue = magenta, and green + blue = cyan. This model can be depicted as a cube, the contents of which define the gamut (or range) of colors that can be represented (see <a class="xref" href="apas03.html#rgb_cube" title="Figure A-37. The RGB cube">Figure A-37</a>).</p><p>The CMY model is a subtractive model, so a pixel with a value of zero in each of its components is white, and a pixel with a maximum value in each of its components is black. The three fundamental colors are cyan, magenta, and yellow. They are combined to create the complementary colors of the CMY model, which are the fundamental colors of the RGB model: cyan + magenta = blue, cyan + yellow = green, and magenta + yellow = red. The CMY cube (<a class="xref" href="apas03.html#cmy_cube" title="Figure A-40. The CMY cube">Figure A-40</a>) is the opposite of the RGB cube but defines the same gamut.</p><p>The HSV model is neither additive nor subtractive. The hue component represents an angle on a circle that goes from red to violet and purple, ending in red again. The saturation component is a percentage of color, from 0% for white (no color at all) to 100% for full saturation. The value component is also a percentage, from 0% for black (no light at all) to 100% for full intensity (maximum light). This model can be depicted as a cone or a cylinder.</p><p>Display devices generate color by combining the light of different colors and usually use the RGB model. This model also corresponds to the main internal representation in the computer, as you’ll see later in this chapter. Printing devices, which generate color by superimposing inks, use the CMY model. To reduce the cost of ink, a fourth component, black, is often added, resulting in the CMYK model. With this model, black can be represented in many ways. For example, 100% C, M, and Y with 0% K and 100% K with 0% C, M, and Y would both result in a black color, but the former would look muddier and require more ink and a longer time to dry. The CMY and CMYK models, therefore, have the same gamut, and the appropriate choice depends on the printer. The HSV model was designed to be intuitive for humans. It provides a visual interface. Rather than inputting a color as a combination of three numeric coordinates, you can choose a hue (H) component and then set the saturation (S) and value (V) components.</p></div><div class="sect2" title="Stored Representations"><div class="titlepage"><div><div><h2 class="title"><a id="stored_representations"/>Stored Representations</h2></div></div></div><p>In GIMP memory, a pixel is always represented in the RGB model. In GIMP 2.8, each RGB component is represented by 1 byte, which means that its range is [0 to 255]. The number of different colors is thus 256<sup>3</sup> = 16, 777, 216. This seems like a lot of colors, but in some cases, it’s not enough, as you’ll see later. A pixel requires 3 bytes if there is no transparency. If there is an Alpha channel for transparency, this component is represented by one additional byte.</p><p>When an image is stored in the XCF format native to GIMP, just the three or four necessary bytes are stored. Storage and retrieval do not require any conversion, but an image file can still be quite large. A 10-megapixel image with an Alpha channel, for example, takes up 40MB.</p><p>The <span class="emphasis"><em>mode</em></span> of an image, found in <span class="strong"><strong>Image: Image &gt; Mode</strong></span>, doesn’t determine how an image is represented in memory. Rather, it determines how the image is handled. <span class="emphasis"><em>RGB mode</em></span> is the most powerful because it corresponds to the stored representation of the image and allows for storage of a large number of different colors.</p><p>For a grayscale image, RGB representation is overkill. In <span class="emphasis"><em>Grayscale mode</em></span>, only one component per pixel (assuming no Alpha channel) is present; this component represents the intensity of light, from 0 for black to the maximum value for white. In GIMP 2.8, a grayscale pixel uses <a id="iddle1749" class="indexterm"/><a id="iddle3395" class="indexterm"/><a id="iddle3397" class="indexterm"/><a id="iddle4173" class="indexterm"/><a id="iddle4292" class="indexterm"/><a id="iddle4311" class="indexterm"/><a id="iddle4677" class="indexterm"/><a id="iddle5979" class="indexterm"/>1 byte, so the value range is [0 to 255]. This range is not very large, and a very large grayscale gradient—for example, in the sky of a landscape photograph—can appear striped. A grayscale image is best stored in that mode in GIMP, but keep in mind, any operation dealing with color won’t work unless you change the image mode to RGB.</p><div class="figure"><a id="initial_image-id00091"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00721"/><img src="httpatomoreillycomsourcenostarchimages1455440.png.jpg" alt="The initial image"/></div></div><p class="title">Figure 12-1. The initial image</p></div><p>The third and last internal mode is the <span class="emphasis"><em>Indexed mode</em></span>. In this mode, a pixel is not represented by the direct value of its color components but by an index in a table of predefined colors, called a <span class="emphasis"><em>colormap</em></span>. This table can be of any size up to 256 entries, so an image in Indexed mode contains at most 256 different colors. This has several advantages and disadvantages:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A pixel takes up only 1 byte or less if the colormap is smaller than 256 entries.</p></li><li class="listitem"><p>By simply changing entries in the colormap, full image transformations can be done easily and efficiently.</p></li><li class="listitem"><p>This mode is ideal if you’re creating a tapestry or a mosaic because such designs contain only a limited number of colors.</p></li><li class="listitem"><p>Many image manipulations are impossible to achieve because the necessary colors cannot be represented.</p></li><li class="listitem"><p>The image quality that’s achievable in this mode is acceptable only in very specific or simple cases, for example, when the image is small or is a sketch.</p></li></ul></div><div class="figure"><a id="indexed_color_conversion_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00722"/><img src="httpatomoreillycomsourcenostarchimages1455442.png.jpg" alt="The Indexed Color Conversion dialog"/></div></div><p class="title">Figure 12-2. The Indexed Color Conversion dialog</p></div><div class="figure"><a id="optimum_palette_with_256_colors"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00723"/><img src="httpatomoreillycomsourcenostarchimages1455444.png.jpg" alt="Optimum palette with 256 colors"/></div></div><p class="title">Figure 12-3. Optimum palette with 256 colors</p></div><p>Now, let’s consider Indexed mode in more detail.</p></div><div class="sect2" title="Indexed Mode"><div class="titlepage"><div><div><h2 class="title"><a id="indexed_mode"/>Indexed Mode</h2></div></div></div><p><a class="xref" href="ch12s01.html#initial_image-id00091" title="Figure 12-1. The initial image">Figure 12-1</a> shows a part of an image in RGB mode, zoomed to show the individual pixels. To convert it to Indexed mode, select <span class="strong"><strong>Image: Image &gt; Mode &gt; Indexed</strong></span>, which opens the dialog shown in <a class="xref" href="ch12s01.html#indexed_color_conversion_dialog" title="Figure 12-2. The Indexed Color Conversion dialog">Figure 12-2</a>. The following Colormap choices are available:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>G<span class="smaller">ENERATE OPTIMUM PALETTE</span> allows you to choose the maximum number of colors, and GIMP then attempts to generate the best palette for the image. Even with the maximum of 256 colors, <a class="xref" href="ch12s01.html#optimum_palette_with_256_colors" title="Figure 12-3. Optimum palette with 256 colors">Figure 12-3</a> shows that the conversion results in a clear decrease in image quality.</p></li><li class="listitem"><p>U<span class="smaller">SE WEB</span>-<span class="smaller">OPTIMIZED PALETTE</span> uses a specific palette that’s supposed to have a consistent <a id="iddle1258" class="indexterm"/><a id="iddle1283" class="indexterm"/><a id="iddle1300" class="indexterm"/><a id="iddle1326" class="indexterm"/><a id="iddle1732" class="indexterm"/><a id="iddle1750" class="indexterm"/><a id="iddle2135" class="indexterm"/><a id="iddle2677" class="indexterm"/><a id="iddle2990" class="indexterm"/><a id="iddle3398" class="indexterm"/><a id="iddle4162" class="indexterm"/><a id="iddle4301" class="indexterm"/><a id="iddle4338" class="indexterm"/><a id="iddle5297" class="indexterm"/><a id="iddle5837" class="indexterm"/>appearance on different screens. Unfortunately, the appearance is consistently bad, and this mode is now considered obsolete.</p><div class="figure"><a id="image_dithered_to_black_and_white"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00724"/><img src="httpatomoreillycomsourcenostarchimages1455446.png.jpg" alt="An image dithered to black and white"/></div></div><p class="title">Figure 12-4. An image dithered to black and white</p></div><div class="figure"><a id="using_floyd-steinberg_left_parenthesisno"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00725"/><img src="httpatomoreillycomsourcenostarchimages1455448.png.jpg" alt="Using Floyd-Steinberg (normal) dithering"/></div></div><p class="title">Figure 12-5. Using Floyd-Steinberg (normal) dithering</p></div></li><li class="listitem"><p>U<span class="smaller">SE BLACK AND WHITE</span> (1-<span class="smaller">BIT</span>) <span class="smaller">PALETTE</span> converts the image to black and white in the same way as the <span class="strong"><strong>Image: Colors &gt; Threshold</strong></span> tool, unless color dithering is used. With color dithering, a usable black and white copy of an image can be created, as shown in <a class="xref" href="ch12s01.html#image_dithered_to_black_and_white" title="Figure 12-4. An image dithered to black and white">Figure 12-4</a>.</p></li><li class="listitem"><p>U<span class="smaller">SE CUSTOM PALETTE</span> allows you to choose from the available palettes, which are usually not as good as the optimum palette that GIMP can generate.</p></li></ul></div><p>The R<span class="smaller">EMOVE UNUSED COLORS FROM COLORMAP</span> checkbox is useful only when you select U<span class="smaller">SE CUSTOM PALETTE</span>.</p><p>As <a class="xref" href="ch12s01.html#optimum_palette_with_256_colors" title="Figure 12-3. Optimum palette with 256 colors">Figure 12-3</a> shows, indexing can lead to image degradation. A better result can be achieved with dithering, which uses a diffusion of pixels in available colors to approximate the colors that are not available. Four dithering algorithms are provided in the Index Color Conversion dialog, and <a class="xref" href="ch12s01.html#using_floyd-steinberg_left_parenthesisno" title="Figure 12-5. Using Floyd-Steinberg (normal) dithering">Figure 12-5</a> shows the result of the first one. E<span class="smaller">NABLE DITHERING OF TRANSPARENCY</span> can be used to help smooth boundaries in a GIF image that includes transparent areas.</p><div class="figure"><a id="available_layer_blending_modes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00726"/><img src="httpatomoreillycomsourcenostarchimages1455450.png.jpg" alt="The available layer blending modes"/></div></div><p class="title">Figure 12-6. The available layer blending modes</p></div></div></div>
<div class="sect1" title="12.2 Blending Modes"><div class="titlepage"><div><div><h1 class="title"><a id="one2dot2_blending_modes"/>12.2 Blending Modes</h1></div></div></div><p>The blending modes apply an additional color plane to an image, either as a layer or as a design created with the painting tools. <a class="xref" href="ch12s01.html#available_layer_blending_modes" title="Figure 12-6. The available layer blending modes">Figure 12-6</a> shows 21 of the 23 blending modes available for painting tools. In layers, the Behind and Color erase modes are not available.</p><p>The blending modes are arranged in the menu according to their effect. The first four modes (Normal, Dissolve, Behind, and Color erase, or just the first two for layers) leave the pixels intact and change only which pixels are displayed. The next four modes (Lighten only, Screen, Dodge, and Addition) lighten the <a id="iddle1302" class="indexterm"/><a id="iddle1320" class="indexterm"/><a id="iddle1353" class="indexterm"/><a id="iddle1373" class="indexterm"/><a id="iddle1767" class="indexterm"/><a id="iddle2130" class="indexterm"/><a id="iddle3219" class="indexterm"/><a id="iddle3988" class="indexterm"/><a id="iddle4031" class="indexterm"/><a id="iddle4653" class="indexterm"/><a id="iddle4759" class="indexterm"/><a id="iddle5914" class="indexterm"/>image and are arranged by impact, from least to greatest. The next three modes (Darken only, Multiply, and Burn) darken the image, and they are also arranged by impact, from least to greatest. The next three modes (Overlay, Soft light, and Hard light) alter the image’s luminosity. The next five modes (Difference, Subtract, Grain extract, Grain merge, and Divide) distort the image’s hues rather than just its saturation and value. The last four modes (Hue, Saturation, Color, and Value) use the HSV model components as the basis for blending the layers.</p><div class="figure"><a id="top_layer"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00727"/><img src="httpatomoreillycomsourcenostarchimages1455452.png.jpg" alt="The top layer"/></div></div><p class="title">Figure 12-7. The top layer</p></div><div class="figure"><a id="bottom_layer"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00728"/><img src="httpatomoreillycomsourcenostarchimages1455454.png.jpg" alt="The bottom layer"/></div></div><p class="title">Figure 12-8. The bottom layer</p></div><p>To demonstrate the blending modes, we’ll build an image with two layers. <a class="xref" href="ch12s02.html#top_layer" title="Figure 12-7. The top layer">Figure 12-7</a> is the top layer, and <a class="xref" href="ch12s02.html#bottom_layer" title="Figure 12-8. The bottom layer">Figure 12-8</a> is the bottom layer. We’ll use specific examples for the two modes that exist only with the painting tools.</p><div class="figure"><a id="normal_modecomma_50percent_opacity"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00729"/><img src="httpatomoreillycomsourcenostarchimages1455456.png.jpg" alt="Normal mode, 50% opacity"/></div></div><p class="title">Figure 12-9. Normal mode, 50% opacity</p></div><p>We also need a notation for explaining the mathematics underlying the blending modes. Recall that a pixel is made of three values—the channels R, G, and B—and so can be thought of as a vector. We’ll use <span class="emphasis"><em>U</em></span> to refer to the vector of a pixel in the upper layer, <span class="emphasis"><em>L</em></span> to refer to the vector of a pixel in the lower layer, and <span class="emphasis"><em>R</em></span> to refer to the vector of the resulting pixel.</p><div class="sect2" title="Modes That Leave Pixels Intact"><div class="titlepage"><div><div><h2 class="title"><a id="modes_that_leave_pixels_intact"/>Modes That Leave Pixels Intact</h2></div></div></div><p>The four modes in this category have an important property in common: They all assign a value to <span class="emphasis"><em>R</em></span> by taking the exact values either from <span class="emphasis"><em>U</em></span> or from <span class="emphasis"><em>L</em></span>.</p><p>In <span class="emphasis"><em>Normal</em></span> mode, the upper pixel is always chosen (i.e., <span class="emphasis"><em>R</em></span> = <span class="emphasis"><em>U</em></span>). But if <span class="emphasis"><em>U</em></span> isn’t fully opaque, then the value of <span class="emphasis"><em>R</em></span> is a combination of <span class="emphasis"><em>U</em></span> and <span class="emphasis"><em>L</em></span>. If the opacity of <span class="emphasis"><em>U</em></span> is set to percentage <span class="emphasis"><em>x</em></span>, then</p><div class="informalfigure"><a id="med_id00730a"/><div class="mediaobject"><a id="med_id00730"/><img src="httpatomoreillycomsourcenostarchimages1455458.png.jpg" alt="image with no caption"/></div></div><p><a class="xref" href="ch12s02.html#normal_modecomma_50percent_opacity" title="Figure 12-9. Normal mode, 50% opacity">Figure 12-9</a> shows the result when the top layer opacity is 50%. Opacity works in the same way for all of the blending modes.</p><p>In <span class="emphasis"><em>Dissolve</em></span> mode, the choice between the upper and lower pixel is random but proportional to the opacity. Given a function <span class="emphasis"><em>f</em></span>(<span class="emphasis"><em>r</em></span>) that yields a random result between 0 and 1, the formula is <span class="emphasis"><em>R</em></span> = [if 100 × <span class="emphasis"><em>f</em></span>(<span class="emphasis"><em>r</em></span>) <span class="emphasis"><em>&lt; x</em></span>] then <span class="emphasis"><em>U,</em></span> else <span class="emphasis"><em>L</em></span>. <a class="xref" href="ch12s02.html#dissolve_modecomma_50percent_opacity" title="Figure 12-10. Dissolve mode, 50% opacity">Figure 12-10</a> shows this result with 50% opacity, <a id="iddle1259" class="indexterm"/><a id="iddle1284" class="indexterm"/><a id="iddle1352" class="indexterm"/><a id="iddle1388" class="indexterm"/><a id="iddle1824" class="indexterm"/><a id="iddle3704" class="indexterm"/><a id="iddle4893" class="indexterm"/>and <a class="xref" href="ch12s02.html#zooming_in_on_a_part_of_figure_12dot10" title="Figure 12-11. Zooming in on a part of Figure 12-10">Figure 12-11</a> magnifies a portion of this image.</p><div class="figure"><a id="dissolve_modecomma_50percent_opacity"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00731"/><img src="httpatomoreillycomsourcenostarchimages1455460.png.jpg" alt="Dissolve mode, 50% opacity"/></div></div><p class="title">Figure 12-10. Dissolve mode, 50% opacity</p></div><div class="figure"><a id="zooming_in_on_a_part_of_figure_12dot10"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00732"/><img src="httpatomoreillycomsourcenostarchimages1455462.png.jpg" alt="Zooming in on a part of"/></div></div><p class="title">Figure 12-11. Zooming in on a part of <a class="xref" href="ch12s02.html#dissolve_modecomma_50percent_opacity" title="Figure 12-10. Dissolve mode, 50% opacity">Figure 12-10</a></p></div><p>To demonstrate <span class="emphasis"><em>Behind</em></span> mode, we’ll use <a class="xref" href="ch12s02.html#image_with_transparency" title="Figure 12-12. An image with transparency">Figure 12-12</a>. We first removed the portrait’s background, replacing it with transparency. An underlying white layer is visible beneath the portrait layer. If we paint on this image in Behind mode, only the transparent pixels are affected, as shown in <a class="xref" href="ch12s02.html#painting_in_behind_mode" title="Figure 12-13. Painting in Behind mode">Figure 12-13</a>. If semitransparency had been used rather than full transparency, we would see a combination of the green and semi-transparent background color.</p><p><span class="emphasis"><em>Color erase</em></span> mode removes the color that you’re painting with from the image and replaces it with partial transparency. In <a class="xref" href="ch12s02.html#painting_in_color_erase_mode" title="Figure 12-14. Painting in Color erase mode">Figure 12-14</a>, we used a large round brush and selected the hue of the face as the foreground color by <span class="inlinemediaobject"><a id="inline_id00338"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-clicking the girl’s left cheek. The white background layer is visible through the semitransparency.</p><div class="figure"><a id="image_with_transparency"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00733"/><img src="httpatomoreillycomsourcenostarchimages1455464.png.jpg" alt="An image with transparency"/></div></div><p class="title">Figure 12-12. An image with transparency</p></div><div class="figure"><a id="painting_in_behind_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00734"/><img src="httpatomoreillycomsourcenostarchimages1455466.png.jpg" alt="Painting in Behind mode"/></div></div><p class="title">Figure 12-13. Painting in Behind mode</p></div></div><div class="sect2" title="Lightening Modes"><div class="titlepage"><div><div><h2 class="title"><a id="lightening_modes"/>Lightening Modes</h2></div></div></div><p>When you use lightening modes, the image will be lighter than in Normal mode.</p><p>In <span class="emphasis"><em>Lighten only</em></span> mode, the resulting pixel is the same as the lighter of the two pixels being blended. In <a class="xref" href="ch12s02.html#lighten_only_mode" title="Figure 12-15. Lighten only mode">Figure 12-15</a>, the brightly lit seascape was taken from the upper layer, and the rest was taken from the lower layer. The formula is simply <span class="emphasis"><em>R</em></span> = max(<span class="emphasis"><em>U, L</em></span>).</p><p><span class="emphasis"><em>Screen</em></span> mode yields an even lighter result via a more complicated formula:</p><div class="informalfigure"><a id="med_id00735a"/><div class="mediaobject"><a id="med_id00735"/><img src="httpatomoreillycomsourcenostarchimages1455468.png.jpg" alt="image with no caption"/></div></div><p>The upper and lower pixels are inverted, which is done by subtracting their value from 255 (in 8-bit depth). The results are multiplied, <a id="iddle1029" class="indexterm"/><a id="iddle1276" class="indexterm"/><a id="iddle2178" class="indexterm"/><a id="iddle2368" class="indexterm"/><a id="iddle4152" class="indexterm"/><a id="iddle4663" class="indexterm"/><a id="iddle5688" class="indexterm"/>and then the product is normalized to subrange [0 to 255] by dividing it by 255 and inverting it again. As you see in <a class="xref" href="ch12s02.html#screen_mode" title="Figure 12-16. Screen mode">Figure 12-16</a>, the dark areas of the upper layer disappear, the light areas look washed out, and the image seems to be more transparent.</p><div class="figure"><a id="painting_in_color_erase_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00736"/><img src="httpatomoreillycomsourcenostarchimages1455470.png.jpg" alt="Painting in Color erase mode"/></div></div><p class="title">Figure 12-14. Painting in Color erase mode</p></div><div class="figure"><a id="lighten_only_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00737"/><img src="httpatomoreillycomsourcenostarchimages1455472.png.jpg" alt="Lighten only mode"/></div></div><p class="title">Figure 12-15. Lighten only mode</p></div><p><span class="emphasis"><em>Dodge</em></span> mode exaggerates the lighting. The formula for this mode is:</p><div class="informalfigure"><a id="med_id00738a"/><div class="mediaobject"><a id="med_id00738"/><img src="httpatomoreillycomsourcenostarchimages1455474.png.jpg" alt="image with no caption"/></div></div><p>The lower pixel value is multiplied by 256 and then divided by the inverse value of the upper pixel. To prevent division by 0, 1 is added to the divisor. <a class="xref" href="ch12s02.html#dodge_mode" title="Figure 12-17. Dodge mode">Figure 12-17</a> shows the result. This mode works best when used with a painting tool to simulate the dodging process used in the darkroom to decrease exposure in specific areas. This mode can be used to bring out details in the darkest areas of an image.</p><div class="figure"><a id="screen_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00739"/><img src="httpatomoreillycomsourcenostarchimages1455476.png.jpg" alt="Screen mode"/></div></div><p class="title">Figure 12-16. Screen mode</p></div><div class="figure"><a id="dodge_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00740"/><img src="httpatomoreillycomsourcenostarchimages1455478.png.jpg" alt="Dodge mode"/></div></div><p class="title">Figure 12-17. Dodge mode</p></div><p><span class="emphasis"><em>Addition</em></span> mode exaggerates the lighting even further without any color inversion. Some areas may become completely white, as shown in <a class="xref" href="ch12s02.html#addition_mode" title="Figure 12-18. Addition mode">Figure 12-18</a>. To achieve this result, the pixel values are added, and then the result is truncated to 255 because greater values can’t be represented in the RGB cube. The formula is <span class="emphasis"><em>R</em></span> = min(<span class="emphasis"><em>U</em></span> + <span class="emphasis"><em>L,</em></span> 255).</p></div><div class="sect2" title="Darkening Modes"><div class="titlepage"><div><div><h2 class="title"><a id="darkening_modes"/>Darkening Modes</h2></div></div></div><p>With these modes, the resulting image is darker than the original.</p><div class="figure"><a id="addition_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00741"/><img src="httpatomoreillycomsourcenostarchimages1455480.png.jpg" alt="Addition mode"/></div></div><p class="title">Figure 12-18. Addition mode</p></div><div class="figure"><a id="darken_only_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00742"/><img src="httpatomoreillycomsourcenostarchimages1455482.png.jpg" alt="Darken only mode"/></div></div><p class="title">Figure 12-19. Darken only mode</p></div><p><a id="iddle1309" class="indexterm"/><a id="iddle1366" class="indexterm"/><a id="iddle2041" class="indexterm"/><a id="iddle2369" class="indexterm"/><a id="iddle3898" class="indexterm"/><span class="emphasis"><em>Darken only</em></span> mode is the opposite of Lighten only mode: The resulting pixel is the darker of the two pixels being blended. As shown in <a class="xref" href="ch12s02.html#darken_only_mode" title="Figure 12-19. Darken only mode">Figure 12-19</a>, the resulting image contains content from the upper layer where it’s darker and the lower layer elsewhere. The formula is <span class="emphasis"><em>R</em></span> = min(<span class="emphasis"><em>U,L</em></span>).</p><p>In <span class="emphasis"><em>Multiply</em></span> mode, the pixel values are multiplied, and the result is normalized by dividing by 255: <span class="emphasis"><em>R</em></span> = (<span class="emphasis"><em>U</em></span> × <span class="emphasis"><em>L</em></span>)<span class="emphasis"><em>/</em></span>255. As <a class="xref" href="ch12s02.html#multiply_mode" title="Figure 12-20. Multiply mode">Figure 12-20</a> shows, the result is much darker than the two layers.</p><p><span class="emphasis"><em>Burn</em></span> mode simulates a darkroom process, similar to Dodge mode, and also works best with painting tools. This mode decreases the exposure of the image and can lead to a loss of detail in dark areas. The formula for this mode is:</p><div class="figure"><a id="multiply_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00743"/><img src="httpatomoreillycomsourcenostarchimages1455484.png.jpg" alt="Multiply mode"/></div></div><p class="title">Figure 12-20. Multiply mode</p></div><div class="figure"><a id="burn_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00744"/><img src="httpatomoreillycomsourcenostarchimages1455486.png.jpg" alt="Burn mode"/></div></div><p class="title">Figure 12-21. Burn mode</p></div><div class="informalfigure"><a id="med_id00745a"/><div class="mediaobject"><a id="med_id00745"/><img src="httpatomoreillycomsourcenostarchimages1455488.png.jpg" alt="image with no caption"/></div></div><p>The lower pixel value is inverted and divided by the upper pixel value. That number is then normalized by multiplying by 256, and the result is inverted. Again, 1 is added to the divisor to prevent division by 0. In <a class="xref" href="ch12s02.html#burn_mode" title="Figure 12-21. Burn mode">Figure 12-21</a>, the only parts that are not completely burned out are those that were light in both layers.</p></div><div class="sect2" title="Luminosity Modes"><div class="titlepage"><div><div><h2 class="title"><a id="luminosity_modes"/>Luminosity Modes</h2></div></div></div><p>The three modes in this section are so similar that the first two currently have identical effects.</p><div class="figure"><a id="overlay_or_soft_light_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00746"/><img src="httpatomoreillycomsourcenostarchimages1455490.png.jpg" alt="Overlay or Soft light mode"/></div></div><p class="title">Figure 12-22. Overlay or Soft light mode</p></div><p><a id="iddle1340" class="indexterm"/><a id="iddle1379" class="indexterm"/><a id="iddle1391" class="indexterm"/><a id="iddle3191" class="indexterm"/><a id="iddle4074" class="indexterm"/><a id="iddle5141" class="indexterm"/>These modes deal with the luminosity of the image rather than its colors.</p><p><span class="emphasis"><em>Overlay</em></span> mode combines Multiply and Screen modes, and it darkens the image a little less than Multiply. Its complicated equation is theoretically this:</p><div class="informalfigure"><a id="med_id00747a"/><div class="mediaobject"><a id="med_id00747"/><img src="httpatomoreillycomsourcenostarchimages1455492.png.jpg" alt="image with no caption"/></div></div><p>But in GIMP 2.8, this mode actually uses the equation for Soft light mode. This bug has intentionally been left because correcting it would result in unexpected changes appearing in existing images that use Overlay mode. Developers are currently working on a strategy to correct the bug without altering existing images.</p><p>The equation for <span class="emphasis"><em>Soft light</em></span> mode incorporates the result of the Screen mode calculation, here called <span class="emphasis"><em>R</em></span><span class="emphasis"><em><sub>S</sub></em></span>:</p><div class="informalfigure"><a id="med_id00748a"/><div class="mediaobject"><a id="med_id00748"/><img src="httpatomoreillycomsourcenostarchimages1455494.png.jpg" alt="image with no caption"/></div></div><p>As <a class="xref" href="ch12s02.html#overlay_or_soft_light_mode" title="Figure 12-22. Overlay or Soft light mode">Figure 12-22</a> shows, the resulting image is darker than the original image, having dim colors and softened edges.</p><p><span class="emphasis"><em>Hard light</em></span> mode uses the most complicated equation of all the modes. It handles darker colors differently than brighter colors. Hard light is yet another combination of Multiply and Screen, and it results in brighter colors and sharper edges (i.e., the exact opposite of Soft light). The upper layer is treated differently than the lower layer, unlike most of the modes already considered. <a class="xref" href="ch12s02.html#hard_light_mode" title="Figure 12-23. Hard light mode">Figure 12-23</a> and <a class="xref" href="ch12s02.html#hard_light_mode_with_the_layers_reversed" title="Figure 12-24. Hard light mode with the layers reversed">Figure 12-24</a> show two examples, with the layer order reversed in the second one. The equation is as follows:</p><p>If <span class="emphasis"><em>U</em></span> &gt; 128:</p><div class="informalfigure"><a id="med_id00751a"/><div class="mediaobject"><a id="med_id00751"/><img src="httpatomoreillycomsourcenostarchimages1455496.png.jpg" alt="image with no caption"/></div></div><p>If <span class="emphasis"><em>U</em></span> ≤ 128: <span class="emphasis"><em>R</em></span> = (2 × <span class="emphasis"><em>U</em></span> × <span class="emphasis"><em>L</em></span>)/256</p><div class="figure"><a id="hard_light_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00749"/><img src="httpatomoreillycomsourcenostarchimages1455498.png.jpg" alt="Hard light mode"/></div></div><p class="title">Figure 12-23. Hard light mode</p></div><div class="figure"><a id="hard_light_mode_with_the_layers_reversed"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00750"/><img src="httpatomoreillycomsourcenostarchimages1455500.png.jpg" alt="Hard light mode with the layers reversed"/></div></div><p class="title">Figure 12-24. Hard light mode with the layers reversed</p></div></div><div class="sect2" title="Color Distortion Modes"><div class="titlepage"><div><div><h2 class="title"><a id="color_distortion_modes"/>Color Distortion Modes</h2></div></div></div><p>These modes distort colors in various ways.</p><p>In <span class="emphasis"><em>Difference</em></span> mode, the resulting pixel is the absolute value of the difference between the <a id="iddle1317" class="indexterm"/><a id="iddle1324" class="indexterm"/><a id="iddle1332" class="indexterm"/><a id="iddle1337" class="indexterm"/><a id="iddle1394" class="indexterm"/><a id="iddle2083" class="indexterm"/><a id="iddle2147" class="indexterm"/><a id="iddle3103" class="indexterm"/><a id="iddle3108" class="indexterm"/><a id="iddle5226" class="indexterm"/>upper and lower pixels: <span class="emphasis"><em>R</em></span> = <span class="emphasis"><em>|</em></span><span class="emphasis"><em>U</em></span> – <span class="emphasis"><em>L</em></span><span class="emphasis"><em>|</em></span>. For example, if <span class="emphasis"><em>U</em></span> = 50 and <span class="emphasis"><em>L</em></span> = 200, then <span class="emphasis"><em>R</em></span> will be the absolute value of –150, which is 150. When this occurs, the colors appear to be inverted, as shown in <a class="xref" href="ch12s02.html#difference_mode" title="Figure 12-25. Difference mode">Figure 12-25</a>.</p><div class="figure"><a id="difference_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00752"/><img src="httpatomoreillycomsourcenostarchimages1455502.png.jpg" alt="Difference mode"/></div></div><p class="title">Figure 12-25. Difference mode</p></div><div class="figure"><a id="subtract_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00753"/><img src="httpatomoreillycomsourcenostarchimages1455504.png.jpg" alt="Subtract mode"/></div></div><p class="title">Figure 12-26. Subtract mode</p></div><p><span class="emphasis"><em>Subtract</em></span> mode is based on the same idea as Difference mode, but it doesn’t take the absolute value after subtraction. This means the order of the layers affects the result, as illustrated by <a class="xref" href="ch12s02.html#subtract_mode" title="Figure 12-26. Subtract mode">Figure 12-26</a> and <a class="xref" href="ch12s02.html#subtract_mode_with_the_layers_reversed" title="Figure 12-27. Subtract mode with the layers reversed">Figure 12-27</a>. Subtract mode deals with negative values by setting them to 0, according to the following formula: <span class="emphasis"><em>R</em></span> = max(<span class="emphasis"><em>U</em></span> – <span class="emphasis"><em>L</em></span>, 0). Any 0 values correspond to black areas.</p><p>According to its name, the <span class="emphasis"><em>Grain extract</em></span> mode should extract the film grain from a layer, but whether it does this is debatable. Some people think it gives images an embossed appearance. <a class="xref" href="ch12s02.html#grain_extract_mode" title="Figure 12-28. Grain extract mode">Figure 12-28</a> and <a class="xref" href="ch12s02.html#grain_extract_mode_with_the_layers_rever" title="Figure 12-29. Grain extract mode with the layers reversed">Figure 12-29</a> show the effect of Grain extract on our example images. The official formula is <span class="emphasis"><em>R</em></span> = <span class="emphasis"><em>L</em></span> – <span class="emphasis"><em>U</em></span> + 128, but negative values or values greater than 255 are truncated. Negative values are replaced with 0, and values greater than 255 are replaced with 255.</p><div class="figure"><a id="subtract_mode_with_the_layers_reversed"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00754"/><img src="httpatomoreillycomsourcenostarchimages1455506.png.jpg" alt="Subtract mode with the layers reversed"/></div></div><p class="title">Figure 12-27. Subtract mode with the layers reversed</p></div><div class="figure"><a id="grain_extract_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00755"/><img src="httpatomoreillycomsourcenostarchimages1455508.png.jpg" alt="Grain extract mode"/></div></div><p class="title">Figure 12-28. Grain extract mode</p></div><p>Whereas Grain extract mode extracts the grain from the layer, <span class="emphasis"><em>Grain merge</em></span> mode merges the grain layer into the current layer. This mode is symmetric, so the order of the layers doesn’t matter. Our result is shown in <a class="xref" href="ch12s02.html#grain_merge_mode" title="Figure 12-30. Grain merge mode">Figure 12-30</a>. The formula for this mode is <span class="emphasis"><em>R</em></span> = <span class="emphasis"><em>U</em></span> + <span class="emphasis"><em>L</em></span> – 128, and again, values that are negative or greater than 255 are truncated.</p><p><span class="emphasis"><em>Divide</em></span> mode is yet another nonsymmetrical mode, wherein the value of the lower pixel is divided by that of the upper pixel (plus 1). The <a id="iddle1298" class="indexterm"/><a id="iddle1342" class="indexterm"/><a id="iddle1381" class="indexterm"/><a id="iddle1396" class="indexterm"/><a id="iddle1699" class="indexterm"/><a id="iddle3260" class="indexterm"/><a id="iddle3270" class="indexterm"/><a id="iddle4760" class="indexterm"/><a id="iddle4774" class="indexterm"/><a id="iddle5915" class="indexterm"/><a id="iddle5920" class="indexterm"/>result is multiplied by 256 to normalize the value. The result, shown in <a class="xref" href="ch12s02.html#divide_mode" title="Figure 12-31. Divide mode">Figure 12-31</a>, is lighter than the original and completely white in some places. The equation is</p><div class="informalfigure"><a id="med_id00756a"/><div class="mediaobject"><a id="med_id00756"/><img src="httpatomoreillycomsourcenostarchimages1455510.png.jpg" alt="image with no caption"/></div></div><div class="figure"><a id="grain_extract_mode_with_the_layers_rever"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00757"/><img src="httpatomoreillycomsourcenostarchimages1455512.png.jpg" alt="Grain extract mode with the layers reversed"/></div></div><p class="title">Figure 12-29. Grain extract mode with the layers reversed</p></div><div class="figure"><a id="grain_merge_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00758"/><img src="httpatomoreillycomsourcenostarchimages1455514.png.jpg" alt="Grain merge mode"/></div></div><p class="title">Figure 12-30. Grain merge mode</p></div></div><div class="sect2" title="HSV Modes"><div class="titlepage"><div><div><h2 class="title"><a id="hsv_modes"/>HSV Modes</h2></div></div></div><p>The last four modes operate in the HSV space. They work by replacing one component (hue, saturation, or value) in the upper layer with the corresponding component from the lower layer.</p><p>In <span class="emphasis"><em>Hue</em></span> mode, the resulting pixel has the hue of the upper pixel and the saturation and value of the lower pixel. But if the saturation of the upper pixel is 0, the hue is also taken from the lower pixel. This explains why in <a class="xref" href="ch12s02.html#hue_mode" title="Figure 12-32. Hue mode">Figure 12-32</a>, the pixels corresponding to the black areas in the upper layer are completely replaced with the pixels from the lower layer.</p><div class="figure"><a id="divide_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00759"/><img src="httpatomoreillycomsourcenostarchimages1455516.png.jpg" alt="Divide mode"/></div></div><p class="title">Figure 12-31. Divide mode</p></div><div class="figure"><a id="hue_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00760"/><img src="httpatomoreillycomsourcenostarchimages1455518.png.jpg" alt="Hue mode"/></div></div><p class="title">Figure 12-32. Hue mode</p></div><p>In <span class="emphasis"><em>Saturation</em></span> mode, the saturation is taken only from the upper layer. Because the saturation of the top layer was low throughout most of the image, the result, shown in <a class="xref" href="ch12s02.html#saturation_mode" title="Figure 12-33. Saturation mode">Figure 12-33</a>, is almost completely unsaturated.</p><p>In <span class="emphasis"><em>Color</em></span> mode, the hue and saturation are taken from the upper layer, whereas the value is taken from the lower layer. As shown in <a class="xref" href="ch12s02.html#color_mode" title="Figure 12-34. Color mode">Figure 12-34</a>, the effect is that the lower layer is painted with the upper layer’s colors.</p><p>In <span class="emphasis"><em>Value</em></span> mode, the value is taken from the upper layer, and the saturation and hue are taken from the lower layer. As shown in <a class="xref" href="ch12s03.html#value_mode" title="Figure 12-35. Value mode">Figure 12-35</a>, <a id="iddle1744" class="indexterm"/><a id="iddle1800" class="indexterm"/><a id="iddle1848" class="indexterm"/><a id="iddle1851" class="indexterm"/><a id="iddle1861" class="indexterm"/><a id="iddle2094" class="indexterm"/><a id="iddle2096" class="indexterm"/><a id="iddle2949" class="indexterm"/><a id="iddle3412" class="indexterm"/><a id="iddle4476" class="indexterm"/><a id="iddle4818" class="indexterm"/><a id="iddle4884" class="indexterm"/><a id="iddle6065" class="indexterm"/>the result of this mode is the reverse of Color mode: The upper layer is painted with the colors of the lower layer.</p><div class="figure"><a id="saturation_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00761"/><img src="httpatomoreillycomsourcenostarchimages1455520.png.jpg" alt="Saturation mode"/></div></div><p class="title">Figure 12-33. Saturation mode</p></div><div class="figure"><a id="color_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00762"/><img src="httpatomoreillycomsourcenostarchimages1455522.png.jpg" alt="Color mode"/></div></div><p class="title">Figure 12-34. Color mode</p></div></div></div>
<div class="sect1" title="12.3 Color Management"><div class="titlepage"><div><div><h1 class="title"><a id="one2dot3_color_management"/>12.3 Color Management</h1></div></div></div><p>Color perception is one of the most complicated aspects of image processing. We see images in the real world, capture them with a camera or maybe scan them, and then we look at them on a screen and perhaps print them. All these stages change the image, rendering the visible colors and the values differently. The purpose of color management is to control these changes so what others see on the screen or in print is the image as we intended them to see it.</p><div class="figure"><a id="value_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00763"/><img src="httpatomoreillycomsourcenostarchimages1455524.png.jpg" alt="Value mode"/></div></div><p class="title">Figure 12-35. Value mode</p></div><div class="sect2" title="Color-Managed Workflow"><div class="titlepage"><div><div><h2 class="title"><a id="color-managed_workflow"/>Color-Managed Workflow</h2></div></div></div><p>The gamuts of devices (i.e., the sets of colors those devices are able to represent) are inevitably smaller than the gamut of normal human vision. (See <a class="xref" href="apas02.html#digitalization" title="Digitalization">Digitalization</a> for an in-depth discussion of image representation.) Furthermore, the digital camera or the scanner that digitalized the image, the monitor that displays it, and the printer that makes a copy all use different color spaces that are characterized by their gamuts and some adjustable parameters. <a class="xref" href="ch12s03.html#color-managed_workflow-id00092" title="Figure 12-36. A color-managed workflow">Figure 12-36</a> shows a diagram of a computer using a device-independent <span class="emphasis"><em>working color space</em></span>, usually RGB. A working color space includes the color spaces of the most commonly used devices. It should include the color spaces of a scanner and a camera and those of a standard screen and of most printers. The working color space should contain only colors that can be represented on the devices being used. When an image file is loaded from a scanner or a digital camera, it must first be converted from its initial color space to the working one, and a similar conversion must be done when displaying the image on a monitor or printing it.</p><p>This conversion process is automatic if we have the necessary information, which is stored as a <span class="emphasis"><em>color profile</em></span>. A color profile provides the information needed to convert from one color space to another. One profile describes the camera color space and is attached to the image file <a id="iddle1175" class="indexterm"/><a id="iddle1271" class="indexterm"/><a id="iddle1849" class="indexterm"/><a id="iddle1854" class="indexterm"/><a id="iddle1858" class="indexterm"/><a id="iddle1859" class="indexterm"/><a id="iddle1967" class="indexterm"/><a id="iddle2308" class="indexterm"/><a id="iddle3062" class="indexterm"/><a id="iddle3284" class="indexterm"/><a id="iddle3828" class="indexterm"/><a id="iddle3830" class="indexterm"/><a id="iddle4437" class="indexterm"/><a id="iddle4444" class="indexterm"/><a id="iddle4576" class="indexterm"/><a id="iddle4819" class="indexterm"/><a id="iddle4826" class="indexterm"/><a id="iddle5032" class="indexterm"/><a id="iddle5142" class="indexterm"/><a id="iddle5180" class="indexterm"/>of a digital photograph. Other profiles specify the color spaces of the scanner, printer, and monitor.</p><div class="figure"><a id="color-managed_workflow-id00092"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00764"/><img src="httpatomoreillycomsourcenostarchimages1455526.png.jpg" alt="A color-managed workflow"/></div></div><p class="title">Figure 12-36. A color-managed workflow</p></div><div class="figure"><a id="image_image_greater_than_mode_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00765"/><img src="httpatomoreillycomsourcenostarchimages1455528.png.jpg" alt="The Image: Image &gt; Mode menu"/></div></div><p class="title">Figure 12-37. The Image: Image &gt; Mode menu</p></div><div class="figure"><a id="assigning_a_color_profile"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00766"/><img src="httpatomoreillycomsourcenostarchimages1455530.png.jpg" alt="Assigning a color profile"/></div></div><p class="title">Figure 12-38. Assigning a color profile</p></div><p>You can assign a color profile to an image if it doesn’t have one or if you want to change the assigned one. The <span class="strong"><strong>Image: Image &gt; Mode</strong></span> menu (<a class="xref" href="ch12s03.html#image_image_greater_than_mode_menu" title="Figure 12-37. The Image: Image &gt; Mode menu">Figure 12-37</a>) contains two entries that allow you to edit the color profile. Select the A<span class="smaller">SSIGN</span> C<span class="smaller">OLOR</span> P<span class="smaller">ROFILE</span> entry to open the dialog shown in <a class="xref" href="ch12s03.html#assigning_a_color_profile" title="Figure 12-38. Assigning a color profile">Figure 12-38</a>. In the A<span class="smaller">SSIGN</span> field, you can choose a previously used profile or search for a profile on the computer. On a GNU/Linux platform, the profiles are generally located in the <code class="literal">/usr/share/color/icc/</code> folder.</p><div class="figure"><a id="converting_to_a_color_profile"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00767"/><img src="httpatomoreillycomsourcenostarchimages1455532.png.jpg" alt="Converting to a color profile"/></div></div><p class="title">Figure 12-39. Converting to a color profile</p></div><p><span class="strong"><strong>Image: Image &gt; Mode &gt; Convert to Color Profile</strong></span> opens the dialog shown in <a class="xref" href="ch12s03.html#converting_to_a_color_profile" title="Figure 12-39. Converting to a color profile">Figure 12-39</a>. In addition to the name of the profile, this dialog allows you to choose the rendering intent and black point compensation, which we’ll discuss in <a class="xref" href="ch12s03.html#using_color_management" title="Using Color Management">Using Color Management</a>.</p><p>Color management can also be used to simulate the result of converting an image to the color space of another device. The gamut of a printer is smaller than the gamut of a monitor. Printers are especially poor at rendering saturated colors, particularly shades of blue and green. A picture that we painstakingly crafted in GIMP may look terrible when printed if the conversion isn’t managed. If you intend to print your image, displaying the image so it looks like the final printed result is best, rather than creating an image that exploits monitor capabilities that aren’t shared by the printer. This technique is called <span class="emphasis"><em>softproofing</em></span>.</p><p>Color profiles are generally known as <span class="emphasis"><em>ICC profiles</em></span> because they are defined by the International Color Consortium. The two most frequently used profiles are shown in <a class="xref" href="ch12s03.html#adobe_rgb_and_srgb_gamuts" title="Figure 12-40. Adobe RGB and sRGB gamuts">Figure 12-40</a>. Although using the profile with the largest gamut (i.e., Adobe RGB) might seem best, this is generally not the case because color distortion can occur when converting the image to the more restricted printer gamut. Thus, the default color space is usually sRGB.</p><p>In fact, if we load an image into GIMP without any embedded color profile, GIMP assumes <a id="iddle1554" class="indexterm"/><a id="iddle1700" class="indexterm"/><a id="iddle1710" class="indexterm"/><a id="iddle1822" class="indexterm"/><a id="iddle1842" class="indexterm"/><a id="iddle3831" class="indexterm"/><a id="iddle4153" class="indexterm"/><a id="iddle4414" class="indexterm"/><a id="iddle4577" class="indexterm"/><a id="iddle4761" class="indexterm"/><a id="iddle5143" class="indexterm"/><a id="iddle5164" class="indexterm"/><a id="iddle5330" class="indexterm"/><a id="iddle5689" class="indexterm"/>it’s sRGB, although we can assign another profile. If an embedded profile exists, GIMP will ask whether you want to use it, and generally you should select yes.</p><div class="figure"><a id="adobe_rgb_and_srgb_gamuts"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00768"/><img src="httpatomoreillycomsourcenostarchimages1455534.png.jpg" alt="Adobe RGB and sRGB gamuts"/></div></div><p class="title">Figure 12-40. Adobe RGB and sRGB gamuts</p></div><p>Getting the color profile for a device is not always easy. This is especially true for monitors, which often require the purchase of a display calibration device. The retrieval of color profiles is beyond the scope of this book, but if you would like more information, we recommend the excellent website by Norman Koren (<span class="emphasis"><em><a class="ulink" href="http://www.normankoren.com/color_management.html">http://www.normankoren.com/color_management.html</a></em></span>).</p></div><div class="sect2" title="Using Color Management"><div class="titlepage"><div><div><h2 class="title"><a id="using_color_management"/>Using Color Management</h2></div></div></div><p>You can set the color management parameters in two places in GIMP. One is the <span class="strong"><strong>Image: Edit &gt; Preferences</strong></span> dialog, described in <a class="xref" href="ch22s01.html#color_management" title="Color Management">Color Management</a>. The other is the <span class="strong"><strong>Image: View &gt; Display Filters</strong></span> tool, described in <a class="xref" href="ch22s03.html#display_filters" title="Display Filters">Display Filters</a>.</p><p>Apply <span class="emphasis"><em>rendering intent</em></span> via the <span class="strong"><strong>Image: Edit &gt; Preferences</strong></span> dialog. Rendering intent can be used to generate the so-called softproof of an image that you want to print. It specifies how colors are converted from one gamut to another. If no conversion is carried out, the colors in the first gamut that cannot be represented in the second one are simply clipped, leading to ugly distortions. By using a more sophisticated conversion technique, you can often achieve a much more satisfactory result. The two main techniques, perceptual and colorimetric, are shown in <a class="xref" href="ch12s03.html#perceptual_and_colorimetric_gamut_mappin" title="Figure 12-41. Perceptual and colorimetric gamut mappings">Figure 12-41</a>.</p><div class="figure"><a id="perceptual_and_colorimetric_gamut_mappin"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00769"/><img src="httpatomoreillycomsourcenostarchimages1455536.png.jpg" alt="Perceptual and colorimetric gamut mappings"/></div></div><p class="title">Figure 12-41. Perceptual and colorimetric gamut mappings</p></div><p>With <span class="emphasis"><em>perceptual intent</em></span>, the color spectrum is compressed, and so the differences among colors are maintained. This process affects fully saturated colors much more than those with low saturation. If it is done with a large enough color depth, this process is mostly reversible and so is a good choice if you will be converting the image between color spaces multiple times. This is also a good choice if the image contains saturated colors.</p><p><span class="emphasis"><em>Colorimetric intent</em></span> leaves the colors that belong to both gamuts completely unaltered and clips the others to the nearest color. This process is not reversible, and although it preserves the whites, it often yields poor results for images with saturated colors.</p></div></div>
<div class="sect1" title="12.4 The Major Color Tools"><div class="titlepage"><div><div><h1 class="title"><a id="one2dot4_the_major_color_tools"/>12.4 The Major Color Tools</h1></div></div></div><p>In the rest of this chapter, we’ll discuss the tools that you can use to adjust the colors in an image. Here we delve into the Color chooser, Levels, and Curves tools.</p><div class="sect2" title="The Color Chooser"><div class="titlepage"><div><div><h2 class="title"><a id="color_chooser"/>The Color Chooser</h2></div></div></div><p>The Color chooser is the main tool for choosing a color for any painting tool. To open the Color chooser from the Toolbox, click one of the rectangles <a id="iddle1198" class="indexterm"/><a id="iddle1772" class="indexterm"/><a id="iddle1792" class="indexterm"/><a id="iddle2375" class="indexterm"/><a id="iddle2731" class="indexterm"/><a id="iddle3213" class="indexterm"/><a id="iddle3224" class="indexterm"/><a id="iddle3251" class="indexterm"/><a id="iddle3261" class="indexterm"/><a id="iddle4623" class="indexterm"/><a id="iddle4654" class="indexterm"/><a id="iddle4693" class="indexterm"/><a id="iddle4762" class="indexterm"/><a id="iddle5165" class="indexterm"/><a id="iddle5916" class="indexterm"/><a id="iddle6008" class="indexterm"/>that display the current foreground and background colors, as shown in (<a class="xref" href="ch12s04.html#opening_the_color_chooser_dialog" title="Figure 12-42. Opening the Color chooser dialog">Figure 12-42</a>).</p><div class="figure"><a id="opening_the_color_chooser_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00770"/><img src="httpatomoreillycomsourcenostarchimages1455538.png.jpg" alt="Opening the Color chooser dialog"/></div></div><p class="title">Figure 12-42. Opening the Color chooser dialog</p></div><p>The Color chooser appears as shown in <a class="xref" href="ch12s04.html#color_chooser-id00093" title="Figure 12-43. The Color chooser">Figure 12-43</a>. This dialog is packed with features, so we’ll break our discussion into several areas and look at them separately.</p><p>The top-right quadrant of the dialog contains six sliders corresponding to the channels in the HSV and RGB models. To the right of the sliders are counters that you can use to make precise changes. The radio buttons on the left are related to the first tab in the top-left quadrant, the one with Wilber’s head displayed on it. If any of the other tabs are selected, these buttons are not active.</p><p>The sliders are correlated, so if we move one of them, several others are also affected. For example, moving the S slider also changes all the RGB sliders. Moving one of the RGB sliders changes the H slider and can also change the S and V sliders, depending on their initial values. The color spectrum for the sliders changes to display the effect based on the current selection. Only the H slider always displays the same rainbow of colors.</p><p>The bottom-right quadrant of the dialog contains a number of controls. The HTML <span class="smaller">NOTATION</span> field contains the hexadecimal representation of the current color in HTML code. This code is composed of three groups of two hexadecimal digits, representing the values of the three RGB channels. If we choose a color elsewhere in the dialog, the code will change to match, but we can also type a number into the field and look at the result, or we can even type in a color name. If we type the beginning of a name, all the available names that begin with those letters are displayed, as shown in <a class="xref" href="ch12s04.html#typing_a_color_name_in_the_html_notation" title="Figure 12-44. Typing a color name in the HTML notation field">Figure 12-44</a>.</p><p>The small button to the right of the field is used to select a color from an image or from anywhere on the screen. If we click this button, the mouse pointer icon becomes an eyedropper. When we click somewhere on the screen (even outside of a GIMP window), the corresponding pixel color is selected for the Color chooser, and this color defines the value of the six sliders and the HTML notation field.</p><p>Below this field are 12 colored buttons that represent the <span class="emphasis"><em>color history</em></span>. The button on the left with a <code class="literal">&gt;</code> sign is used to add the current color to this history and remove the oldest color (the bottom-right one). If we click any of these buttons, its color becomes the current one.</p><p>The three buttons in the bottom-right corner of the dialog are mostly self-explanatory. R<span class="smaller">ESET</span> changes the current color to black but does not affect the history.</p><p>The bottom-left quadrant of the dialog contains only three controls. C<span class="smaller">URRENT</span> and O<span class="smaller">LD</span> represent, respectively, the current color as defined in the Color chooser dialog and the color defined before that. Click and drag the color from either of these two buttons to an image to fill the current selection. The H<span class="smaller">ELP</span> button does what you’d expect.</p><p>The top-left quadrant contains a rectangular display and five tabs, which give five different ways to finely tune the desired color. <a class="xref" href="ch12s04.html#color_chooser-id00093" title="Figure 12-43. The Color chooser">Figure 12-43</a> shows the Wilber tab, the only one that uses the six radio buttons to the left of the HSV and RGB sliders. Here, the selected radio button is H, which means the spectrum to the right of the large rectangular area shows the Hue scale. The pointer in this display indicates the current hue, whereas the rectangle on the left represents the possible variations of saturation and value when this hue is chosen. If we click this rectangle, we choose a specific value (in the horizontal scale) and a specific saturation (in the vertical scale). Two perpendicular lines <a id="iddle1678" class="indexterm"/><a id="iddle1773" class="indexterm"/><a id="iddle3225" class="indexterm"/><a id="iddle3262" class="indexterm"/><a id="iddle5301" class="indexterm"/>cross at the chosen point, and the sliders on the right side of the dialog change to reflect the new saturation and value.</p><div class="figure"><a id="color_chooser-id00093"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00771"/><img src="httpatomoreillycomsourcenostarchimages1455540.png.jpg" alt="The Color chooser"/></div></div><p class="title">Figure 12-43. The Color chooser</p></div><div class="figure"><a id="typing_a_color_name_in_the_html_notation"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00772"/><img src="httpatomoreillycomsourcenostarchimages1455542.png.jpg" alt="Typing a color name in the HTML notation field"/></div></div><p class="title">Figure 12-44. Typing a color name in the HTML notation field</p></div><p>Selecting a different radio button changes the rectangular display on the left. For example, <a class="xref" href="ch12s04.html#wilber_tabcomma_blue_selection" title="Figure 12-45. The Wilber tab, Blue selection">Figure 12-45</a> shows the display when the B (blue) radio button has been selected. The thin vertical rectangle allows us to choose the quantity of blue, and the large rectangle allows us to adjust the quantities of red and green. Occasionally, the combination that’s activated when you check the B radio button is more convenient, but usually the default (H) works best.</p><p>The Triangle tab has an icon showing a thumbnail of that tab’s display (<a class="xref" href="ch12s04.html#triangle_tab" title="Figure 12-46. The Triangle tab">Figure 12-46</a>). This tab offers another graphical way to choose the color using the HSV model. Clicking the hue circle selects the H component. A click in the triangle then changes the values of the S and V components. At one of the triangle’s points, S is 0; at another point, V is 0; at the final point, both are at the maximum (100). Some people find this tab more intuitive than the Wilber tab.</p><div class="figure"><a id="wilber_tabcomma_blue_selection"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00773"/><img src="httpatomoreillycomsourcenostarchimages1455544.png.jpg" alt="The Wilber tab, Blue selection"/></div></div><p class="title">Figure 12-45. The Wilber tab, Blue selection</p></div><p>The tab with a paintbrush icon behaves like a simulation of watercolor painting (<a class="xref" href="ch12s04.html#watercolor_tab" title="Figure 12-47. The Watercolor tab">Figure 12-47</a>). A click anywhere in the rectangle adds a small quantity of that color to the current one. The vertical slider sets the quantity of color being added, from 0 at the bottom to the maximum at the top. Because colors are added to the existing color, this tab uses the CMY model, and <a id="iddle1668" class="indexterm"/><a id="iddle1719" class="indexterm"/><a id="iddle1832" class="indexterm"/><a id="iddle3489" class="indexterm"/><a id="iddle3805" class="indexterm"/><a id="iddle4176" class="indexterm"/><a id="iddle4472" class="indexterm"/><a id="iddle4763" class="indexterm"/>the color obtained becomes stronger the more we click. If we click one of the rectangle’s sides, the saturation increases. If we click in the center of the rectangle, the value decreases. This tab is especially useful for building a light color, like a pastel, beginning with a full white.</p><div class="figure"><a id="triangle_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00774"/><img src="httpatomoreillycomsourcenostarchimages1455546.png.jpg" alt="The Triangle tab"/></div></div><p class="title">Figure 12-46. The Triangle tab</p></div><div class="figure"><a id="watercolor_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00775"/><img src="httpatomoreillycomsourcenostarchimages1455548.png.jpg" alt="The Watercolor tab"/></div></div><p class="title">Figure 12-47. The Watercolor tab</p></div><p>The tab marked with a printer icon contains options based on the CMYK color model (<a class="xref" href="ch12s04.html#print_tab" title="Figure 12-48. The Print tab">Figure 12-48</a>). This tab is useful mainly for gathering information about how the colors will be mixed when printing rather than as a way to adjust a color, particularly because you can’t automatically change the CMY channels when changing the K channel, which is a common printing adjustment.</p><div class="figure"><a id="print_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00776"/><img src="httpatomoreillycomsourcenostarchimages1455550.png.jpg" alt="The Print tab"/></div></div><p class="title">Figure 12-48. The Print tab</p></div><div class="figure"><a id="palette_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00777"/><img src="httpatomoreillycomsourcenostarchimages1455552.png.jpg" alt="The Palette tab"/></div></div><p class="title">Figure 12-49. The Palette tab</p></div><p>The remaining tab has an icon showing a finger on a palette (<a class="xref" href="ch12s04.html#palette_tab" title="Figure 12-49. The Palette tab">Figure 12-49</a>). The center square shows the contents of the current palette, a concept explained in <a class="xref" href="ch22s07.html" title="22.7 Building New Palettes">22.7 Building New Palettes</a>. The only colors you can choose are from this palette, but you can change the palette in the Palettes dialog, which you open via <span class="strong"><strong>Image: Windows &gt; Dockable Dialogs &gt; Palettes</strong></span>.</p><p>Access a simplified dockable dialog for choosing colors by selecting <span class="strong"><strong>Image: Windows &gt; Dockable dialogs &gt; Colors</strong></span>, as shown in <a class="xref" href="ch12s04.html#colors_dialogcomma_wilber_tab" title="Figure 12-50. The Colors dialog, Wilber tab">Figure 12-50</a>. The Colors dialog is a modified version of the left portion of the Color chooser. The Wilber tab contains six buttons on the right, used to choose the color model and the master channel. The Triangle, Watercolor, Printer, and Palette tabs are identical to those on the Color chooser. The last tab is a slightly modified version of the right portion of the Color chooser dialog (<a class="xref" href="ch12s04.html#colors_dialogcomma_sliders_tab" title="Figure 12-51. The Colors dialog, Sliders tab">Figure 12-51</a>).</p><div class="figure"><a id="colors_dialogcomma_wilber_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00778"/><img src="httpatomoreillycomsourcenostarchimages1455554.png.jpg" alt="The Colors dialog, Wilber tab"/></div></div><p class="title">Figure 12-50. The Colors dialog, Wilber tab</p></div><div class="figure"><a id="colors_dialogcomma_sliders_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00779"/><img src="httpatomoreillycomsourcenostarchimages1455556.png.jpg" alt="The Colors dialog, Sliders tab"/></div></div><p class="title">Figure 12-51. The Colors dialog, Sliders tab</p></div><p><a id="iddle1230" class="indexterm"/><a id="iddle2376" class="indexterm"/><a id="iddle2732" class="indexterm"/><a id="iddle3252" class="indexterm"/><a id="iddle3666" class="indexterm"/><a id="iddle3689" class="indexterm"/><a id="iddle4423" class="indexterm"/><a id="iddle5630" class="indexterm"/>The bottom of the Colors dialog contains several useful buttons. On the left are the buttons for setting the foreground and background colors. On the right is the button for applying the eyedropper and the field containing the HTML notation for the current color.</p></div><div class="sect2" title="Levels"><div class="titlepage"><div><div><h2 class="title"><a id="levels"/>Levels</h2></div></div></div><p>The Levels tool, opened by selecting <span class="strong"><strong>Image: Colors &gt; Levels</strong></span> or <span class="strong"><strong>Image: Tools &gt; Color Tools &gt; Levels</strong></span>, is one of the most useful tools in GIMP for photo processing. In a nutshell, use the Levels tool (and the Curves tool, discussed in the next section) to adjust the relationship between initial pixel values (the input) and pixel values in the new, transformed image (the output). The Levels tool dialog is shown in <a class="xref" href="ch12s04.html#levels_dialog-id00094" title="Figure 12-52. The Levels dialog">Figure 12-52</a>.</p><div class="figure"><a id="levels_dialog-id00094"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00780"/><img src="httpatomoreillycomsourcenostarchimages1455558.png.jpg" alt="The Levels dialog"/></div></div><p class="title">Figure 12-52. The Levels dialog</p></div><div class="figure"><a id="preset_settings"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00781"/><img src="httpatomoreillycomsourcenostarchimages1455560.png.jpg" alt="Preset settings"/></div></div><p class="title">Figure 12-53. Preset settings</p></div><p>The P<span class="smaller">RESETS</span> field at the top of the Levels dialog opens a menu of previously saved settings. The settings are identified in ISO format by the date and time they were saved (see <a class="xref" href="ch12s04.html#preset_settings" title="Figure 12-53. Preset settings">Figure 12-53</a>). The plus sign on the right saves the current settings. This is more convenient than <a id="iddle1051" class="indexterm"/><a id="iddle1094" class="indexterm"/><a id="iddle1272" class="indexterm"/><a id="iddle1599" class="indexterm"/><a id="iddle1936" class="indexterm"/><a id="iddle5932" class="indexterm"/><a id="iddle6004" class="indexterm"/>remembering the ISO date and time when you used a specific setting. Named settings are listed at the end of the saved settings. The same capabilities are available in the other color tools. The small triangle on the far right opens the menu shown in <a class="xref" href="ch12s04.html#levels_dialog_menu" title="Figure 12-54. The Levels dialog menu">Figure 12-54</a>. Use the first two entries to import or export settings to or from a file. The last entry opens the dialog shown in <a class="xref" href="ch12s04.html#settings_management" title="Figure 12-55. Settings management">Figure 12-55</a>, which lists the saved settings and contains three buttons to import settings, export settings, and delete the selected settings.</p><div class="figure"><a id="levels_dialog_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00782"/><img src="httpatomoreillycomsourcenostarchimages1455562.png.jpg" alt="The Levels dialog menu"/></div></div><p class="title">Figure 12-54. The Levels dialog menu</p></div><div class="figure"><a id="settings_management"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00783"/><img src="httpatomoreillycomsourcenostarchimages1455564.png.jpg" alt="Settings management"/></div></div><p class="title">Figure 12-55. Settings management</p></div><p>The next line of the Levels dialog contains a menu to select the Channel that will be affected. The choices are Value, Red, Green, Blue, and Alpha (if an Alpha channel is available). When you select the Value channel, all three color channels change. The Value channel is the only channel available for a grayscale image. The R<span class="smaller">ESET</span> C<span class="smaller">HANNEL</span> button resets the selected channel to its initial value without affecting any changes made elsewhere in the dialog.</p><p>The two buttons on the right set the characteristic of the histogram shown below. The histogram is a way to display the frequency of different values in the chosen channel. In 8-bit depth representation, there are 256 different values, from 0 on the left to 255 on the right. The height of a bar in the graph is proportional to the number of pixels in the image with this value. If the leftmost button is pressed, the peak corresponds literally to the number of pixels, whereas in the logarithmic histogram, which you select with the rightmost button, the values are calculated using a logarithm. As <a class="xref" href="ch12s04.html#logarithmic_histogram" title="Figure 12-56. A logarithmic histogram">Figure 12-56</a> shows, the logarithmic histogram better illustrates variations in the low values, whereas the linear histogram (shown in <a class="xref" href="ch12s04.html#levels_dialog-id00094" title="Figure 12-52. The Levels dialog">Figure 12-52</a>) exaggerates the peaks.</p><div class="figure"><a id="logarithmic_histogram"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00784"/><img src="httpatomoreillycomsourcenostarchimages1455566.png.jpg" alt="A logarithmic histogram"/></div></div><p class="title">Figure 12-56. A logarithmic histogram</p></div><p>The purpose of the Levels tool is to change the histogram by assigning new values to certain pixels. Generally, images look best when pixels are distributed across the full range. As you can see, the values greater than 200 are not represented at all in the example we’ve used.</p><p>Just under the histogram are three movable triangles. The black one on the left corresponds to the <span class="emphasis"><em>black point</em></span>: All pixels with a value less than or equal to the position of this triangle are set to 0 (i.e., black for color channels or full transparency for the Alpha channel). When this point moves to the right, more pixels become black, which is generally only beneficial if the histogram is empty on the left. The white triangle on the right corresponds to the <span class="emphasis"><em>white point</em></span>: All pixels with a value greater than or equal to the position of that triangle are set to 255 (i.e., the maximum). Our example image would benefit from this adjustment because values greater than 200 are not represented at all. If we move the white triangle to 200, the full range of available values is represented in the image, which improves the contrast. The result is shown in <a class="xref" href="ch12s04.html#figure_12dot8_after_moving_the_white_tri" title="Figure 12-57. Figure 12-8 after moving the white triangle to 200">Figure 12-57</a>, which you can compare to the original image, shown in <a class="xref" href="ch12s02.html#bottom_layer" title="Figure 12-8. The bottom layer">Figure 12-8</a>.</p><div class="figure"><a id="figure_12dot8_after_moving_the_white_tri"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00785"/><img src="httpatomoreillycomsourcenostarchimages1455568.png.jpg" alt="after moving the white triangle to 200"/></div></div><p class="title">Figure 12-57. <a class="xref" href="ch12s02.html#bottom_layer" title="Figure 12-8. The bottom layer">Figure 12-8</a> after moving the white triangle to 200</p></div><p><a id="iddle1052" class="indexterm"/><a id="iddle1140" class="indexterm"/><a id="iddle1185" class="indexterm"/><a id="iddle1828" class="indexterm"/><a id="iddle1929" class="indexterm"/><a id="iddle2377" class="indexterm"/><a id="iddle2943" class="indexterm"/><a id="iddle3431" class="indexterm"/><a id="iddle3818" class="indexterm"/><a id="iddle4063" class="indexterm"/><a id="iddle4642" class="indexterm"/><a id="iddle4643" class="indexterm"/><a id="iddle5033" class="indexterm"/><a id="iddle5933" class="indexterm"/>The middle, gray triangle corresponds to the <span class="emphasis"><em>midpoint</em></span>. Moving it to the left makes the image lighter in the Value channel, more saturated in a color channel, or more opaque in the Alpha channel. Moving it to the right has the opposite effect. This slider changes the value of the <span class="emphasis"><em>Gamma factor</em></span>, or Gamma correction, which specifies the shape of the <span class="emphasis"><em>answering curve</em></span>. The answering curve represents the relationship between the input (initial pixel) and the output (new pixel) values. If Gamma = 1, the curve is a straight line. Increasing Gamma makes the curve convex, and decreasing it makes the curve concave.</p><p>Instead of moving one of the triangles by hand, we can also change the corresponding numeric field. Additionally, two eyedroppers, one for the black point and the other for the white point, are available. By clicking one of them and then clicking in the image on a pixel of the corresponding shade, we can adjust the triangles so they bracket the values that are represented in the image.</p><p>All the settings covered so far deal with the I<span class="smaller">NPUT</span> L<span class="smaller">EVELS</span>, which enlarge the range of pixel values in the image to build a new image. Just below those controls are two triangles that alter the O<span class="smaller">UTPUT</span> L<span class="smaller">EVELS</span>. Moving the O<span class="smaller">UTPUT</span> L<span class="smaller">EVELS</span> triangles toward each other restricts the range of possible values. In the Value channel, for example, this reduces the image contrast, making the image duller, as shown in <a class="xref" href="ch12s04.html#figure_12dot8_after_restricting_the_outp" title="Figure 12-58. Figure 12-8 after restricting the output levels to [100 to 200]">Figure 12-58</a>.</p><div class="figure"><a id="figure_12dot8_after_restricting_the_outp"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00786"/><img src="httpatomoreillycomsourcenostarchimages1455570.png.jpg" alt="after restricting the output levels to [100 to 200]"/></div></div><p class="title">Figure 12-58. <a class="xref" href="ch12s02.html#bottom_layer" title="Figure 12-8. The bottom layer">Figure 12-8</a> after restricting the output levels to [100 to 200]</p></div><div class="figure"><a id="figure_12dot8_after_inverting_the_output"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00787"/><img src="httpatomoreillycomsourcenostarchimages1455572.png.jpg" alt="after inverting the output levels"/></div></div><p class="title">Figure 12-59. <a class="xref" href="ch12s02.html#bottom_layer" title="Figure 12-8. The bottom layer">Figure 12-8</a> after inverting the output levels</p></div><p>If we move the white triangle to the left side and the black triangle to the right side, then we invert the image, as illustrated in <a class="xref" href="ch12s04.html#figure_12dot8_after_inverting_the_output" title="Figure 12-59. Figure 12-8 after inverting the output levels">Figure 12-59</a>. Doing this accomplishes the same thing as applying <span class="strong"><strong>Image: Colors &gt; Invert</strong></span>, except that when using the Levels tool, we can invert each of the RGB color channels separately.</p><p>So far we’ve discussed the manual settings, which alter only the selected channel. The Levels tool also includes some automatic settings, which act on all channels at the same time. The simplest and most useful of these is the A<span class="smaller">UTO</span> button, which extends the input range of the three color channels as far as possible. <a id="iddle2017" class="indexterm"/><a id="iddle3667" class="indexterm"/><a id="iddle3819" class="indexterm"/><a id="iddle4415" class="indexterm"/><a id="iddle5513" class="indexterm"/><a class="xref" href="ch12s04.html#figure_12dot8_after_using_the_auto_butto" title="Figure 12-60. Figure 12-8 after using the Auto button">Figure 12-60</a> shows the result for our image. Generally this improves the image, but in this example, the change is too dramatic.</p><div class="figure"><a id="figure_12dot8_after_using_the_auto_butto"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00788"/><img src="httpatomoreillycomsourcenostarchimages1455574.png.jpg" alt="after using the Auto button"/></div></div><p class="title">Figure 12-60. <a class="xref" href="ch12s02.html#bottom_layer" title="Figure 12-8. The bottom layer">Figure 12-8</a> after using the Auto button</p></div><div class="figure"><a id="levels_tool_options"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00789"/><img src="httpatomoreillycomsourcenostarchimages1455576.png.jpg" alt="The Levels tool options"/></div></div><p class="title">Figure 12-61. The Levels tool options</p></div><p>The three eyedroppers on the right, like the histogram eyedroppers, can be used to select the black and white points and also a midpoint in the image. But unlike the histogram eyedroppers, these eyedroppers change all the channels, which can lead to strange and unnatural effects. Note that the order in which these points are picked is significant, and picking them all is not necessary. Generally, the midpoint is the most difficult to pick accurately.</p><p>Although the Levels tool is, by default, not accessed from the Toolbox (change this in the <span class="strong"><strong>Image: Edit &gt; Preferences</strong></span> dialog, T<span class="smaller">OOLBOX</span> entry), it does have Toolbox options, which appear when the tool is selected. These are shown in <a class="xref" href="ch12s04.html#levels_tool_options" title="Figure 12-61. The Levels tool options">Figure 12-61</a>. The H<span class="smaller">ISTOGRAM</span> S<span class="smaller">CALE</span> radio buttons do the same thing as the buttons at the top right of the Levels dialog. The S<span class="smaller">AMPLE AVERAGE</span> option, if checked, sets the radius of the area used to pick a color in the image when using one of the eyedroppers. This square appears if you press the mouse button when clicking the image with the eyedropper selected.</p><div class="figure"><a id="curves_dialog-id00095"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00790"/><img src="httpatomoreillycomsourcenostarchimages1455578.png.jpg" alt="The Curves dialog"/></div></div><p class="title">Figure 12-62. The Curves dialog</p></div><p>Use the Curves tool to make the same adjustments as the Levels tool, but the Curves tool offers more control. Below the three eyedroppers in the Levels dialog is an E<span class="smaller">DIT THESE</span> S<span class="smaller">ETTINGS AS</span> C<span class="smaller">URVES</span> button, which retains any changes that were made in the Levels dialog and applies the Curves tool. The P<span class="smaller">REVIEW</span> button allows you to see the effect of your changes and should always be checked. The four buttons at the bottom of the Levels dialog are self-explanatory.</p></div><div class="sect2" title="Curves"><div class="titlepage"><div><div><h2 class="title"><a id="curves"/>Curves</h2></div></div></div><p>The Curves tool is found via <span class="strong"><strong>Image: Colors &gt; Curves</strong></span> or <span class="strong"><strong>Image: Tools &gt; Color Tools &gt; Curves</strong></span> and opens the dialog shown in <a class="xref" href="ch12s04.html#curves_dialog-id00095" title="Figure 12-62. The Curves dialog">Figure 12-62</a>. The Curves tool’s effect is similar to that of the Levels tool, but it offers fewer automatized options and more control.</p><p>The top and the bottom of the Curves dialog are the same as the Levels dialog. In the rectangle at the center of the Curves dialog, you’ll see an image of the histogram. The diagonal of this <a id="iddle1141" class="indexterm"/><a id="iddle2012" class="indexterm"/><a id="iddle2018" class="indexterm"/><a id="iddle2029" class="indexterm"/><a id="iddle3432" class="indexterm"/><a id="iddle4064" class="indexterm"/><a id="iddle4632" class="indexterm"/><a id="iddle5514" class="indexterm"/>rectangle represents the answering curve. Input values vary horizontally, and output values vary vertically. Initially, the input and output values are equal. When the mouse pointer is in the rectangle, its coordinates are displayed in the top-left corner.</p><div class="figure"><a id="smooth_curve"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00791"/><img src="httpatomoreillycomsourcenostarchimages1455580.png.jpg" alt="A smooth curve"/></div></div><p class="title">Figure 12-63. A smooth curve</p></div><div class="figure"><a id="freehand_curve"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00792"/><img src="httpatomoreillycomsourcenostarchimages1455582.png.jpg" alt="A freehand curve"/></div></div><p class="title">Figure 12-64. A freehand curve</p></div><p>By clicking and dragging the answering curve, we can change its shape. If the C<span class="smaller">URVE TYPE</span> button shows S<span class="smaller">MOOTH</span>, as it does by default, the curve, which remains smooth, is adjusted to pass by the points added, as shown in <a class="xref" href="ch12s04.html#smooth_curve" title="Figure 12-63. A smooth curve">Figure 12-63</a>. These points, called <span class="emphasis"><em>anchors</em></span>, are automatically added every time you click in the histogram. The current anchor is a black dot. Move it by clicking and dragging or by using the up and down arrow keys on the keyboard. Press <span class="inlinemediaobject"><a id="inline_id00339"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to move the arrow keys by 15 pixels at a time, rather than the default of 1 pixel. The left and right arrow keys select the next anchor in the corresponding direction. If you click near an existing anchor, you can drag it to another position, thus changing the curve. To remove an anchor, drag it into one of the other anchors.</p><p>While the tool is in use, the mouse pointer takes the form of an eyedropper when you hover over the image. If you click the image, a vertical line appears in the Curves dialog at the value of the clicked pixel. <span class="inlinemediaobject"><a id="inline_id00340"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>-clicking creates an anchor in the selected channel, and <span class="inlinemediaobject"><a id="inline_id00341"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-clicking creates an anchor in all the channels. The anchor is inserted only when the mouse button is released, so we can drag the point around the image to find a target value.</p><div class="figure"><a id="result_of_the_freehand_curve"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00793"/><img src="httpatomoreillycomsourcenostarchimages1455584.png.jpg" alt="The result of the freehand curve"/></div></div><p class="title">Figure 12-65. The result of the freehand curve</p></div><p>If the C<span class="smaller">URVE TYPE</span> is set to F<span class="smaller">REEHAND</span>, the curve is built by clicking and dragging in the rectangle and generally comes out jagged, as shown in <a class="xref" href="ch12s04.html#freehand_curve" title="Figure 12-64. A freehand curve">Figure 12-64</a>. The result is also more difficult to control, as illustrated in <a class="xref" href="ch12s04.html#result_of_the_freehand_curve" title="Figure 12-65. The result of the freehand curve">Figure 12-65</a>. But if we then choose S<span class="smaller">MOOTH</span> as the curve type, the curve is automatically smoothed, and the necessary anchors are added.</p><p>The options for the Curves tool are the same as for the Levels tool (see <a class="xref" href="ch12s04.html#levels_tool_options" title="Figure 12-61. The Levels tool options">Figure 12-61</a>).</p><p>The Curves tool does not have any automatic controls and can be more difficult to master than the Levels tool, but it allows for more precise color handling. If we keep the curve straight and move only its end anchors horizontally, the effect is the same as moving the end triangles under I<span class="smaller">NPUT</span> L<span class="smaller">EVELS</span> in the Levels tool. Moving them vertically has the same effect as moving the triangles under O<span class="smaller">UTPUT</span> L<span class="smaller">EVELS</span>. Adding an anchor in the middle of the curve and moving it vertically does the same thing as moving the middle triangle in the Levels tool and is a more intuitive visualization of the Gamma value.</p><div class="figure"><a id="inverting_the_curve"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00794"/><img src="httpatomoreillycomsourcenostarchimages1455586.png.jpg" alt="Inverting the curve"/></div></div><p class="title">Figure 12-66. Inverting the curve</p></div><p><a id="iddle1679" class="indexterm"/><a id="iddle1694" class="indexterm"/><a id="iddle1815" class="indexterm"/><a id="iddle1835" class="indexterm"/><a id="iddle1863" class="indexterm"/><a id="iddle1871" class="indexterm"/><a id="iddle2013" class="indexterm"/><a id="iddle3200" class="indexterm"/><a id="iddle3822" class="indexterm"/><a id="iddle4694" class="indexterm"/><a id="iddle5055" class="indexterm"/><a id="iddle5324" class="indexterm"/><a id="iddle5487" class="indexterm"/><a id="iddle5934" class="indexterm"/>Inverting the curve by putting the left (lower) anchor in the top-left corner and the right (upper) anchor in the bottom-right corner results in a negative image, as shown in <a class="xref" href="ch12s04.html#inverting_the_curve" title="Figure 12-66. Inverting the curve">Figure 12-66</a>. We can also do this in one channel only, with strange and colorful results. If we change the curves of individual color channels, they appear in their respective colors on the histogram, whereas the current curve is always black. These colored curves are not displayed when the Value channel is selected. Adjusting the shape of the curve can be tricky. Deforming the curve too much is easy and results in exaggerated, unnatural colors.</p></div></div>
<div class="sect1" title="12.5 Additional Color Tools"><div class="titlepage"><div><div><h1 class="title"><a id="one2dot5_additional_color_tools"/>12.5 Additional Color Tools</h1></div></div></div><p>The <span class="strong"><strong>Image: Colors</strong></span> menu contains lots of entries (see <a class="xref" href="ch12s05.html#image_colors_menu" title="Figure 12-67. The Image: Colors menu">Figure 12-67</a>). The first section of the menu contains the more basic tools, including Levels and Curves, which we just discussed. Now, we’ll demonstrate the other tools in this part of the menu using the photograph shown in <a class="xref" href="ch12s05.html#sample_image" title="Figure 12-68. A sample image">Figure 12-68</a>. (Tip: You can access these entries by placing them in the Toolbox or via <span class="strong"><strong>Image: Tools &gt; Color Tools</strong></span>.)</p><div class="sect2" title="Color Balance"><div class="titlepage"><div><div><h2 class="title"><a id="color_balance"/>Color Balance</h2></div></div></div><p>The adjustments you can make with the Color Balance tool can also be made with the Levels or Curves tool, but some people find the Color Balance tool more intuitive. Its dialog is shown in <a class="xref" href="ch12s05.html#color_balance_dialog-id00096" title="Figure 12-69. The Color Balance dialog">Figure 12-69</a>. The top of this dialog contains the same settings as the Levels and Curves tools, settings that are also shared by the next four tools in the menu: Hue-Saturation, Colorize, Brightness-Contrast, and Threshold.</p><div class="figure"><a id="image_colors_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00795"/><img src="httpatomoreillycomsourcenostarchimages1455588.png.jpg" alt="The Image: Colors menu"/></div></div><p class="title">Figure 12-67. The Image: Colors menu</p></div><p>Adjust the color balance using three sliders [–100 to +100], one for each combination of a fundamental color and complementary color in the RGB and CMY models. Recall that the pairings are the same in these two models, but the designation of fundamental versus complementary differs.</p><p>Balance tool to make adjustments in three different ranges: Shadows, Midtones, and Highlights. These ranges overlap, and precisely distinguishing them in an image is difficult. Because the sliders are very sensitive, achieving a natural-looking result is hard, as demonstrated in <a class="xref" href="ch12s05.html#after_using_the_color_balance_tool" title="Figure 12-70. After using the Color Balance tool">Figure 12-70</a>. Each of the ranges can be reset <a id="iddle1680" class="indexterm"/><a id="iddle1763" class="indexterm"/><a id="iddle1782" class="indexterm"/><a id="iddle1793" class="indexterm"/><a id="iddle2030" class="indexterm"/><a id="iddle3234" class="indexterm"/><a id="iddle3278" class="indexterm"/><a id="iddle4424" class="indexterm"/><a id="iddle4705" class="indexterm"/><a id="iddle4764" class="indexterm"/><a id="iddle5515" class="indexterm"/><a id="iddle5605" class="indexterm"/>individually (by setting the value to 0), which makes adjusting an image by trial and error easier. Leave the two boxes at the bottom of the dialog checked to preview the effects of an adjustment.</p><div class="figure"><a id="sample_image"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00796"/><img src="httpatomoreillycomsourcenostarchimages1455590.png.jpg" alt="A sample image"/></div></div><p class="title">Figure 12-68. A sample image</p></div><div class="figure"><a id="color_balance_dialog-id00096"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00797"/><img src="httpatomoreillycomsourcenostarchimages1455592.png.jpg" alt="The Color Balance dialog"/></div></div><p class="title">Figure 12-69. The Color Balance dialog</p></div></div><div class="sect2" title="Hue-Saturation"><div class="titlepage"><div><div><h2 class="title"><a id="hue-saturation"/>Hue-Saturation</h2></div></div></div><p>This tool offers yet another way to make adjustments that you could also make using the Curves tool. The advantage of Hue-Saturation is that the controls are based on the three color models: RGB, CMY, and HSV. Another important difference is that Hue-Saturation deals with color ranges rather than color channels. For example, how would you change the saturation of yellow pixels using the Curves tool? With Hue-Saturation, it’s easy.</p><div class="figure"><a id="after_using_the_color_balance_tool"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00798"/><img src="httpatomoreillycomsourcenostarchimages1455594.png.jpg" alt="After using the Color Balance tool"/></div></div><p class="title">Figure 12-70. After using the Color Balance tool</p></div><div class="figure"><a id="hue-saturation_dialog-id00097"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00799"/><img src="httpatomoreillycomsourcenostarchimages1455596.png.jpg" alt="The Hue-Saturation dialog"/></div></div><p class="title">Figure 12-71. The Hue-Saturation dialog</p></div><p>The Hue-Saturation dialog, shown in <a class="xref" href="ch12s05.html#hue-saturation_dialog-id00097" title="Figure 12-71. The Hue-Saturation dialog">Figure 12-71</a>, begins with the customary line for the P<span class="smaller">RESETS</span> settings.</p><div class="figure"><a id="after_using_the_hue-saturation_tool"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00800"/><img src="httpatomoreillycomsourcenostarchimages1455598.png.jpg" alt="After using the Hue-Saturation tool"/></div></div><p class="title">Figure 12-72. After using the Hue-Saturation tool</p></div><div class="figure"><a id="colorize_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00801"/><img src="httpatomoreillycomsourcenostarchimages1455600.png.jpg" alt="The Colorize dialog"/></div></div><p class="title">Figure 12-73. The Colorize dialog</p></div><p><a id="iddle1475" class="indexterm"/><a id="iddle1738" class="indexterm"/><a id="iddle1783" class="indexterm"/><a id="iddle3235" class="indexterm"/><a id="iddle3263" class="indexterm"/><a id="iddle4425" class="indexterm"/><a id="iddle4678" class="indexterm"/><a id="iddle4765" class="indexterm"/><a id="iddle5455" class="indexterm"/><a id="iddle5491" class="indexterm"/>The next part of the dialog lets us select what color range to change. The center button, called M<span class="smaller">ASTER</span>, allows us to change all the colors simultaneously. The six colored buttons specify color ranges, each representing a sixth of the hue circle. The O<span class="smaller">VERLAP</span> slider [0 to 100] extends the chosen range into the two neighboring ranges.</p><p>The next three sliders are based on the HSV model. (Here, Value is called Lightness). The effect of adjusting any of the three sliders is visible not only in the image but also in the color buttons in the upper part of the dialog. Adjust the hue, saturation, or lightness of any of the six colors, or select the Master control. The many different possible combinations make this tool a difficult one to master. One possible result of the Hue-Saturation tool is shown in <a class="xref" href="ch12s05.html#after_using_the_hue-saturation_tool" title="Figure 12-72. After using the Hue-Saturation tool">Figure 12-72</a>.</p><div class="figure"><a id="creating_a_sepia_photograph_with_the_col"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00802"/><img src="httpatomoreillycomsourcenostarchimages1455602.png.jpg" alt="Creating a sepia photograph with the Colorize tool"/></div></div><p class="title">Figure 12-74. Creating a sepia photograph with the Colorize tool</p></div><div class="figure"><a id="brightness-contrast_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00803"/><img src="httpatomoreillycomsourcenostarchimages1455604.png.jpg" alt="The Brightness-Contrast dialog"/></div></div><p class="title">Figure 12-75. The Brightness-Contrast dialog</p></div></div><div class="sect2" title="Colorize"><div class="titlepage"><div><div><h2 class="title"><a id="colorize"/>Colorize</h2></div></div></div><p>The Colorize tool first desaturates the image and then adds color to a grayscale version in RGB mode. Its dialog (<a class="xref" href="ch12s05.html#colorize_dialog" title="Figure 12-73. The Colorize dialog">Figure 12-73</a>) begins with the standard color tool P<span class="smaller">RESETS</span> option. Below that are sliders to specify the HSV components to apply to the image. The effect is similar to looking at a grayscale image through colored glass. The parameters shown in <a class="xref" href="ch12s05.html#colorize_dialog" title="Figure 12-73. The Colorize dialog">Figure 12-73</a> produce the sepia photograph in <a class="xref" href="ch12s05.html#creating_a_sepia_photograph_with_the_col" title="Figure 12-74. Creating a sepia photograph with the Colorize tool">Figure 12-74</a>.</p></div><div class="sect2" title="Brightness-Contrast"><div class="titlepage"><div><div><h2 class="title"><a id="brightness-contrast"/>Brightness-Contrast</h2></div></div></div><p>The Brightness-Contrast tool is very simple, as you can see from its dialog (<a class="xref" href="ch12s05.html#brightness-contrast_dialog" title="Figure 12-75. The Brightness-Contrast dialog">Figure 12-75</a>). As the name implies, you can use it to adjust <a id="iddle1186" class="indexterm"/><a id="iddle1459" class="indexterm"/><a id="iddle1927" class="indexterm"/><a id="iddle1932" class="indexterm"/><a id="iddle2065" class="indexterm"/><a id="iddle3798" class="indexterm"/><a id="iddle3909" class="indexterm"/><a id="iddle4404" class="indexterm"/><a id="iddle4646" class="indexterm"/><a id="iddle5298" class="indexterm"/><a id="iddle5527" class="indexterm"/><a id="iddle5710" class="indexterm"/><a id="iddle5838" class="indexterm"/>two characteristics of an image: brightness and contrast.</p><div class="figure"><a id="adjusting_brightness_and_contrast"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00804"/><img src="httpatomoreillycomsourcenostarchimages1455606.png.jpg" alt="Adjusting brightness and contrast"/></div></div><p class="title">Figure 12-76. Adjusting brightness and contrast</p></div><p>Because this tool’s abilities are rather limited, a button is included (E<span class="smaller">DIT THESE</span> S<span class="smaller">ETTINGS AS</span> L<span class="smaller">EVELS</span>) that opens the Levels tool, which you can use to edit brightness and contrast with much more flexibility. The sliders in the Brightness-Contrast tool work in the usual way, but when the tool is active, we can also click and drag in the image itself: Vertical strokes change the brightness, horizontal strokes change the contrast. <a class="xref" href="ch12s05.html#adjusting_brightness_and_contrast" title="Figure 12-76. Adjusting brightness and contrast">Figure 12-76</a> shows the result of the settings shown in <a class="xref" href="ch12s05.html#brightness-contrast_dialog" title="Figure 12-75. The Brightness-Contrast dialog">Figure 12-75</a>.</p></div><div class="sect2" title="Threshold"><div class="titlepage"><div><div><h2 class="title"><a id="threshold"/>Threshold</h2></div></div></div><p>The Threshold tool transforms the current layer into a black and white image. Pixels that have a value within the set range are white, and those that have a value outside the range are black. Set the range by moving the two triangles below the histogram. Generally, you can achieve a better result by setting the threshold manually than by using the A<span class="smaller">UTO</span> button. The settings shown in <a class="xref" href="ch12s05.html#threshold_dialog" title="Figure 12-77. The Threshold dialog">Figure 12-77</a> generate the result in <a class="xref" href="ch12s05.html#after_applying_the_threshold_tool" title="Figure 12-78. After applying the Threshold tool">Figure 12-78</a>.</p><p>Use the Threshold tool to generate a <span class="emphasis"><em>natural mask</em></span>, as described in <a class="xref" href="ch14s03.html#building_a_natural_mask" title="Building a Natural Mask">Building a Natural Mask</a>.</p><div class="figure"><a id="threshold_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00805"/><img src="httpatomoreillycomsourcenostarchimages1455608.png.jpg" alt="The Threshold dialog"/></div></div><p class="title">Figure 12-77. The Threshold dialog</p></div><div class="figure"><a id="after_applying_the_threshold_tool"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00806"/><img src="httpatomoreillycomsourcenostarchimages1455610.png.jpg" alt="After applying the Threshold tool"/></div></div><p class="title">Figure 12-78. After applying the Threshold tool</p></div></div><div class="sect2" title="Posterize"><div class="titlepage"><div><div><h2 class="title"><a id="posterize"/>Posterize</h2></div></div></div><p>The Posterize tool reduces the number of colors in an image. The only slider, which has a range of [2 to 256], is used to set the number of colors in each RGB channel. Setting the level to 8 generates the result shown in <a class="xref" href="ch12s05.html#after_posterization" title="Figure 12-79. After posterization">Figure 12-79</a>.</p></div><div class="sect2" title="Desaturate"><div class="titlepage"><div><div><h2 class="title"><a id="desaturate"/>Desaturate</h2></div></div></div><p>The Desaturate tool removes all color from the current layer, but the image remains in RGB mode, so you can add color later. The dialog includes three ways to compute the gray levels of the pixels.</p><div class="figure"><a id="after_posterization"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00807"/><img src="httpatomoreillycomsourcenostarchimages1455612.png.jpg" alt="After posterization"/></div></div><p class="title">Figure 12-79. After posterization</p></div><div class="figure"><a id="after_desaturation"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00808"/><img src="httpatomoreillycomsourcenostarchimages1455614.png.jpg" alt="After desaturation"/></div></div><p class="title">Figure 12-80. After desaturation</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><a id="iddle1788" class="indexterm"/><a id="iddle1829" class="indexterm"/><a id="iddle1872" class="indexterm"/><a id="iddle3240" class="indexterm"/><a id="iddle3744" class="indexterm"/><a id="iddle4624" class="indexterm"/><a id="iddle5845" class="indexterm"/><a id="iddle5943" class="indexterm"/>L<span class="smaller">IGHTNESS</span> is the average between the maximum and minimum of the three RGB values.</p></li><li class="listitem"><p>L<span class="smaller">UMINOSITY</span> is a weighted average among the three RGB values. The coefficients used correspond to <span class="emphasis"><em>luminance</em></span> in colorimetry are: 0.21 × <span class="emphasis"><em>R</em></span> + 0.71 × <span class="emphasis"><em>G</em></span> + 0.07 × <span class="emphasis"><em>B</em></span>.</p></li><li class="listitem"><p>A<span class="smaller">VERAGE</span> is the average of the three RGB values.</p></li></ul></div><p><a class="xref" href="ch12s05.html#after_desaturation" title="Figure 12-80. After desaturation">Figure 12-80</a> shows the result of applying L<span class="smaller">UMINOSITY</span>.</p><div class="figure"><a id="after_applying_invert"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00809"/><img src="httpatomoreillycomsourcenostarchimages1455616.png.jpg" alt="After applying Invert"/></div></div><p class="title">Figure 12-81. After applying Invert</p></div><div class="figure"><a id="after_applying_value_invert"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00810"/><img src="httpatomoreillycomsourcenostarchimages1455618.png.jpg" alt="After applying Value Invert"/></div></div><p class="title">Figure 12-82. After applying Value Invert</p></div></div><div class="sect2" title="Inversion"><div class="titlepage"><div><div><h2 class="title"><a id="inversion"/>Inversion</h2></div></div></div><p>The two inversion tools operate instantly on the current layer. <span class="strong"><strong>Image: Colors &gt; Invert</strong></span> generates the result shown in <a class="xref" href="ch12s05.html#after_applying_invert" title="Figure 12-81. After applying Invert">Figure 12-81</a>. The colors are inverted (i.e., they are replaced by their complementary color, as in a photographic negative). <span class="strong"><strong>Image: Colors &gt; Value Invert</strong></span> generates the result shown in <a class="xref" href="ch12s05.html#after_applying_value_invert" title="Figure 12-82. After applying Value Invert">Figure 12-82</a>. When this tool is used, only the Value component in the HSV model is inverted via the formula <span class="emphasis"><em>V</em></span> = 100 – <span class="emphasis"><em>V</em></span>, where <span class="emphasis"><em>V</em></span> is the pixel value. Rounding errors can lead to a strong color distortion.</p><div class="figure"><a id="auto_submenu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00811"/><img src="httpatomoreillycomsourcenostarchimages1455620.png.jpg" alt="The Auto submenu"/></div></div><p class="title">Figure 12-83. The Auto submenu</p></div><div class="figure"><a id="initial_image_with_its_histogram"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00812"/><img src="httpatomoreillycomsourcenostarchimages1455622.png.jpg" alt="The initial image with its histogram"/></div></div><p class="title">Figure 12-84. The initial image with its histogram</p></div></div></div>
<div class="sect1" title="12.6 The Color Submenus"><div class="titlepage"><div><div><h1 class="title"><a id="one2dot6_the_color_submenus"/>12.6 The Color Submenus</h1></div></div></div><p><a id="iddle1460" class="indexterm"/><a id="iddle1774" class="indexterm"/><a id="iddle1836" class="indexterm"/><a id="iddle2326" class="indexterm"/><a id="iddle3209" class="indexterm"/><a id="iddle3226" class="indexterm"/><a id="iddle4657" class="indexterm"/><a id="iddle4766" class="indexterm"/><a id="iddle5560" class="indexterm"/><a id="iddle5846" class="indexterm"/><a id="iddle6001" class="indexterm"/>The next part of the <span class="strong"><strong>Image: Colors</strong></span> menu contains four submenus: Auto, Components, Map, and Info. We’ll consider them each in turn.</p><div class="sect2" title="The Auto Submenu"><div class="titlepage"><div><div><h2 class="title"><a id="auto_submenu-id00098"/>The Auto Submenu</h2></div></div></div><p>The Auto submenu is shown in <a class="xref" href="ch12s05.html#auto_submenu" title="Figure 12-83. The Auto submenu">Figure 12-83</a>. It contains tools that have no corresponding dialogs. When selected, they adjust the image instantly, using automatic settings, as the name suggests. Because you can’t customize the settings for these tools, their utility depends on the image being processed. To demonstrate their effects, we have included the Histogram dialog with each demonstration image and with the initial image, which is shown in <a class="xref" href="ch12s05.html#initial_image_with_its_histogram" title="Figure 12-84. The initial image with its histogram">Figure 12-84</a>.</p><div class="figure"><a id="after_applying_equalize"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00813"/><img src="httpatomoreillycomsourcenostarchimages1455624.png.jpg" alt="After applying Equalize"/></div></div><p class="title">Figure 12-85. After applying Equalize</p></div><div class="sect3" title="Equalize"><div class="titlepage"><div><div><h3 class="title"><a id="equalize"/>Equalize</h3></div></div></div><p>The Equalize tool automatically adjusts the brightness of all colors, so that each possible brightness value occurs about the same number of times in the image. The histogram for the image in <a class="xref" href="ch12s06.html#after_applying_equalize" title="Figure 12-85. After applying Equalize">Figure 12-85</a> shows that the color values that occur most frequently, in this case [0 to 80], are stretched the most: See the flat part in the middle of the histogram. In this example, the result is bizarre and is not an improvement. In other cases, the result may look better.</p></div><div class="sect3" title="White Balance"><div class="titlepage"><div><div><h3 class="title"><a id="white_balance"/>White Balance</h3></div></div></div><p>The White Balance tool operates separately on each of the RGB channels. It removes the least-used pixel values from both ends of the histogram and then stretches the remaining pixels to extend across the full range. In <a class="xref" href="ch12s06.html#after_applying_white_balance" title="Figure 12-86. After applying White Balance">Figure 12-86</a>, the brightest pixels disappeared, and the remaining pixels were stretched along the full range. The picture is much lighter, and this time the result could be considered an improvement.</p></div><div class="sect3" title="Color Enhance"><div class="titlepage"><div><div><h3 class="title"><a id="color_enhance"/>Color Enhance</h3></div></div></div><p>The Color Enhance tool makes adjustments using the HSV model: It increases the saturation <a id="iddle2643" class="indexterm"/><a id="iddle3206" class="indexterm"/><a id="iddle3273" class="indexterm"/><a id="iddle3433" class="indexterm"/><a id="iddle3695" class="indexterm"/><a id="iddle3991" class="indexterm"/><a id="iddle4065" class="indexterm"/><a id="iddle5636" class="indexterm"/><a id="iddle5661" class="indexterm"/><a id="iddle5847" class="indexterm"/><a id="iddle6002" class="indexterm"/>without changing the hue or the value. The effect on this image, shown in <a class="xref" href="ch12s06.html#after_applying_color_enhance" title="Figure 12-87. After applying Color Enhance">Figure 12-87</a>, is rather unpleasant. The Color Enhance tool flattened the histogram without extending the color range. The result is slightly better when we apply the White Balance tool first, but automatic tools such as this one clearly have limitations.</p><div class="figure"><a id="after_applying_white_balance"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00814"/><img src="httpatomoreillycomsourcenostarchimages1455626.png.jpg" alt="After applying White Balance"/></div></div><p class="title">Figure 12-86. After applying White Balance</p></div><div class="figure"><a id="after_applying_color_enhance"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00815"/><img src="httpatomoreillycomsourcenostarchimages1455628.png.jpg" alt="After applying Color Enhance"/></div></div><p class="title">Figure 12-87. After applying Color Enhance</p></div><div class="figure"><a id="before_applying_normalize"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00816"/><img src="httpatomoreillycomsourcenostarchimages1455630.png.jpg" alt="Before applying Normalize"/></div></div><p class="title">Figure 12-88. Before applying Normalize</p></div><div class="figure"><a id="after_applying_normalize"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00817"/><img src="httpatomoreillycomsourcenostarchimages1455632.png.jpg" alt="After applying Normalize"/></div></div><p class="title">Figure 12-89. After applying Normalize</p></div></div><div class="sect3" title="Normalize"><div class="titlepage"><div><div><h3 class="title"><a id="normalize"/>Normalize</h3></div></div></div><p>The Normalize tool stretches the brightness of the image so the darkest point is black and the brightest point is as bright as possible in its current hue. To best demonstrate this, we’ll use the image shown in <a class="xref" href="ch12s06.html#before_applying_normalize" title="Figure 12-88. Before applying Normalize">Figure 12-88</a>, which we modified with the Levels tool: We moved the right triangle under I<span class="smaller">NPUT</span> L<span class="smaller">EVELS</span> to position 212 to remove the few pixels brighter than this value and the right triangle under O<span class="smaller">UTPUT</span> L<span class="smaller">EVELS</span> to the same <a id="iddle1598" class="indexterm"/><a id="iddle1785" class="indexterm"/><a id="iddle1951" class="indexterm"/><a id="iddle3214" class="indexterm"/><a id="iddle3237" class="indexterm"/><a id="iddle4062" class="indexterm"/><a id="iddle4552" class="indexterm"/><a id="iddle4626" class="indexterm"/><a id="iddle4647" class="indexterm"/><a id="iddle5212" class="indexterm"/><a id="iddle5215" class="indexterm"/><a id="iddle5469" class="indexterm"/><a id="iddle5828" class="indexterm"/><a id="iddle5831" class="indexterm"/><a id="iddle5935" class="indexterm"/><a id="iddle6088" class="indexterm"/>position to retain the same overall brightness in the image. When applied to this modified image, the Normalize tool produces a visible effect (<a class="xref" href="ch12s06.html#after_applying_normalize" title="Figure 12-89. After applying Normalize">Figure 12-89</a>), which it does only when there are no pixels on the far left or right of the histogram.</p><div class="figure"><a id="after_applying_stretch_contrast"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00818"/><img src="httpatomoreillycomsourcenostarchimages1455634.png.jpg" alt="After applying Stretch Contrast"/></div></div><p class="title">Figure 12-90. After applying Stretch Contrast</p></div></div><div class="sect3" title="Stretch Contrast"><div class="titlepage"><div><div><h3 class="title"><a id="stretch_contrast"/>Stretch Contrast</h3></div></div></div><p>The Stretch Contrast tool works the same way as the Normalize tool, but rather than stretching the Value channel, it stretches the RGB channels separately. These two tools result in visibly different effects only if the RGB channel ranges differ significantly, and when the Stretch Contrast tool does produce a unique result, it can generate color distortions. To create <a class="xref" href="ch12s06.html#after_applying_stretch_contrast" title="Figure 12-90. After applying Stretch Contrast">Figure 12-90</a>, we began with the same modified example that we used for the Normalize tool, and the result is very similar.</p></div><div class="sect3" title="Stretch HSV"><div class="titlepage"><div><div><h3 class="title"><a id="stretch_hsv"/>Stretch HSV</h3></div></div></div><p>The Stretch HSV tool works the same way as the Stretch Contrast tool, but it operates on the three channels of the HSV model instead of on the three RGB channels. This method can produce a better or worse result, depending on the image. Our result, shown in <a class="xref" href="ch12s06.html#after_applying_stretch_hsv" title="Figure 12-91. After applying Stretch HSV">Figure 12-91</a>, is almost identical to the initial image.</p><div class="figure"><a id="after_applying_stretch_hsv"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00819"/><img src="httpatomoreillycomsourcenostarchimages1455636.png.jpg" alt="After applying Stretch HSV"/></div></div><p class="title">Figure 12-91. After applying Stretch HSV</p></div><div class="figure"><a id="components_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00820"/><img src="httpatomoreillycomsourcenostarchimages1455638.png.jpg" alt="The Components menu"/></div></div><p class="title">Figure 12-92. The Components menu</p></div></div></div><div class="sect2" title="The Components Submenu"><div class="titlepage"><div><div><h2 class="title"><a id="components_submenu"/>The Components Submenu</h2></div></div></div><p>The Components menu is shown in <a class="xref" href="ch12s06.html#components_menu" title="Figure 12-92. The Components menu">Figure 12-92</a>. Its four tools operate on the RGB channels.</p><div class="sect3" title="Channel Mixer"><div class="titlepage"><div><div><h3 class="title"><a id="channel_mixer"/>Channel Mixer</h3></div></div></div><p>This tool uses the values from all three of the RGB channels to compute new values for each one of them. Initially, each output channel receives only the corresponding input channel. <a class="xref" href="ch12s06.html#channel_mixer_dialogcomma_red_channel" title="Figure 12-93. The Channel Mixer dialog, Red channel">Figure 12-93</a> shows the Red channel dialog.</p><p>At the top of the Channel Mixer dialog is a preview of the image, with zooming and panning enabled. Below that is the O<span class="smaller">UTPUT CHANNEL</span> selection menu. The next three sliders, which have a range of [–200 to +200], allow you to set the percentage of the corresponding channel that will be assigned to the current output channel. If we change the output channel, we can define another set of percentages.</p><div class="figure"><a id="channel_mixer_dialogcomma_red_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00821"/><img src="httpatomoreillycomsourcenostarchimages1455640.png.jpg" alt="The Channel Mixer dialog, Red channel"/></div></div><p class="title">Figure 12-93. The Channel Mixer dialog, Red channel</p></div><p><a id="iddle2047" class="indexterm"/><a id="iddle2739" class="indexterm"/><a id="iddle3124" class="indexterm"/><a id="iddle3134" class="indexterm"/><a id="iddle4473" class="indexterm"/><a id="iddle4530" class="indexterm"/><a id="iddle4627" class="indexterm"/><a id="iddle4635" class="indexterm"/><a id="iddle4696" class="indexterm"/><a id="iddle5521" class="indexterm"/>If we check the M<span class="smaller">ONOCHROME</span> box, the image becomes grayscale, and we can use the sliders to set the proportion of each of the RGB channels that are used to build the monochrome image. For example, when we select <span class="strong"><strong>Image: Image &gt; Mode &gt; Grayscale</strong></span>, a grayscale image is created using the values 21, 72, and 7 for the three RGB channels, from top to bottom.</p><p>The P<span class="smaller">RESERVE LUMINOSITY</span> checkbox maintains the initial luminosity of each pixel, which prevents the resulting image from being overly bright.</p><p>The set of buttons at the bottom of the dialog allow us to save the current settings, reload previously saved settings, and reset everything to the initial values.</p><p>You can make very fine adjustments to the colors of an image with this tool, but mastering it is difficult.</p></div><div class="sect3" title="Decompose"><div class="titlepage"><div><div><h3 class="title"><a id="decompose"/>Decompose</h3></div></div></div><p>The Decompose tool separates the channels of the image into separate grayscale images or layers based on the chosen color model. Its dialog, shown in <a class="xref" href="ch12s06.html#decompose_dialog" title="Figure 12-94. The Decompose dialog">Figure 12-94</a>, is fairly simple. At the top is the C<span class="smaller">OLOR MODEL</span> menu, and below that are two checkboxes. Checking the first box decomposes the image to layers; otherwise the decomposition results in separate images. The second box is included for CMYK printing purposes. When checked, every pixel that’s part of the current foreground color will be black in the decomposed images or layers. This is commonly used to show crop marks on all channels as a way to aid in alignment.</p><div class="figure"><a id="decompose_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00822"/><img src="httpatomoreillycomsourcenostarchimages1455642.png.jpg" alt="The Decompose dialog"/></div></div><p class="title">Figure 12-94. The Decompose dialog</p></div><div class="figure"><a id="color_models-id00099"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00823"/><img src="httpatomoreillycomsourcenostarchimages1455644.png.jpg" alt="Color models"/></div></div><p class="title">Figure 12-95. Color models</p></div><p>The available color models, shown in <a class="xref" href="ch12s06.html#color_models-id00099" title="Figure 12-95. Color models">Figure 12-95</a>, are explained next.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>RGB: This decomposition allows us to work on the channels separately and then recompose the image. One of the channels can also be used as a mask.</p><div class="figure"><a id="hue_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00824"/><img src="httpatomoreillycomsourcenostarchimages1455646.png.jpg" alt="The Hue channel"/></div></div><p class="title">Figure 12-96. The Hue channel</p></div><div class="figure"><a id="saturation_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00825"/><img src="httpatomoreillycomsourcenostarchimages1455648.png.jpg" alt="The Saturation channel"/></div></div><p class="title">Figure 12-97. The Saturation channel</p></div></li><li class="listitem"><p><a id="iddle1005" class="indexterm"/><a id="iddle1053" class="indexterm"/><a id="iddle1255" class="indexterm"/><a id="iddle1669" class="indexterm"/><a id="iddle1681" class="indexterm"/><a id="iddle1805" class="indexterm"/><a id="iddle1853" class="indexterm"/><a id="iddle1862" class="indexterm"/><a id="iddle1876" class="indexterm"/><a id="iddle1909" class="indexterm"/><a id="iddle3140" class="indexterm"/><a id="iddle3274" class="indexterm"/><a id="iddle3504" class="indexterm"/><a id="iddle3661" class="indexterm"/><a id="iddle3921" class="indexterm"/><a id="iddle4474" class="indexterm"/><a id="iddle4712" class="indexterm"/><a id="iddle4726" class="indexterm"/><a id="iddle4776" class="indexterm"/><a id="iddle5936" class="indexterm"/><a id="iddle6084" class="indexterm"/>RGBA: Similar to the RGB model, except with this model, an Alpha layer or image is also created for the image’s Alpha channel.</p></li><li class="listitem"><p>HSV: The layers or images represent the components of the HSV model. The Hue channel is rather compressed, and the result has no natural meaning, as shown in <a class="xref" href="ch12s06.html#hue_channel" title="Figure 12-96. The Hue channel">Figure 12-96</a>. The Saturation channel is also not very meaningful (<a class="xref" href="ch12s06.html#saturation_channel" title="Figure 12-97. The Saturation channel">Figure 12-97</a>). In contrast, the Value channel returns an accurate grayscale representation of the image.</p></li><li class="listitem"><p>HSL: Similar to the HSV model, but the Value channel is replaced with Lightness, which is similar conceptually but calculated a little differently. The calculations for the Saturation channel also differ slightly.</p><div class="figure"><a id="alpha_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00826"/><img src="httpatomoreillycomsourcenostarchimages1455650.png.jpg" alt="The Alpha channel"/></div></div><p class="title">Figure 12-98. The Alpha channel</p></div></li><li class="listitem"><p>CMY and CMYK: These models are generally used to decompose an image in order to pass it to printing software that requires decomposition.</p></li><li class="listitem"><p>A<span class="smaller">LPHA</span>: A new image is created from the Alpha channel of the image. For example, <a class="xref" href="ch12s06.html#alpha_channel" title="Figure 12-98. The Alpha channel">Figure 12-98</a> was generated from an Alpha channel built with <span class="strong"><strong>Image: Colors &gt; Color to Alpha</strong></span>, using white as the color.</p></li><li class="listitem"><p>L<span class="smaller">AB</span>: The Lab (or L*a*b*) color space includes several models that are intended to be more representative of human vision than the other color models. The L channel represents luminosity, and the A and B channels represent color in the form of <span class="emphasis"><em>opponent color axes</em></span>. The Lab color space was designed based on the <span class="emphasis"><em>opponent process theory</em></span>, which states that signals received by the rods and cones are processed antagonistically: red versus green signals (A channel), yellow versus blue signals (B channel), and black versus white signals (L channel).</p></li><li class="listitem"><p>YC<span class="smaller">B</span>C<span class="smaller">R</span>: The last four color models are based on this color space, which has channels for Luminance, Blue, and Red. This color space <a id="iddle1068" class="indexterm"/><a id="iddle1608" class="indexterm"/><a id="iddle1617" class="indexterm"/><a id="iddle1682" class="indexterm"/><a id="iddle1764" class="indexterm"/><a id="iddle1787" class="indexterm"/><a id="iddle1790" class="indexterm"/><a id="iddle1877" class="indexterm"/><a id="iddle3123" class="indexterm"/><a id="iddle3239" class="indexterm"/><a id="iddle4531" class="indexterm"/><a id="iddle4688" class="indexterm"/><a id="iddle4697" class="indexterm"/><a id="iddle5711" class="indexterm"/>is used for digital video, and the various decompositions correspond to different recommendations by the International Telecommunication Union.</p></li></ul></div><div class="figure"><a id="compose_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00827"/><img src="httpatomoreillycomsourcenostarchimages1455652.png.jpg" alt="The Compose dialog"/></div></div><p class="title">Figure 12-99. The Compose dialog</p></div><p>Generally, you’ll use only the RGB, CMY, and HSV color models to make adjustments to an image. The other models are mainly for transferring the image information to an application.</p></div><div class="sect3" title="Recompose"><div class="titlepage"><div><div><h3 class="title"><a id="recompose"/>Recompose</h3></div></div></div><p>You can use the Recompose tool only on an image that has been decomposed with the Decompose tool. When this tool is applied, the original image is rebuilt using the component images or layers, allowing you to decompose the image, manipulate the layers or images separately, and then recompose the image.</p></div><div class="sect3" title="Compose"><div class="titlepage"><div><div><h3 class="title"><a id="compose"/>Compose</h3></div></div></div><p>The Compose tool is much more powerful than the Recompose tool because any grayscale image can be used to represent the channels. As <a class="xref" href="ch12s06.html#compose_dialog" title="Figure 12-99. The Compose dialog">Figure 12-99</a> shows, the dialog first asks us to choose the C<span class="smaller">OLOR MODEL</span>. The available choices are the same as for the Decompose tool.</p><p>Next, choose the C<span class="smaller">HANNEL</span> R<span class="smaller">EPRESENTATIONS</span>. If the current image has multiple layers, use the successive layers as the channels. If the image is in grayscale with only one layer, then that layer is initially used for all the channels. For each channel, we can either choose one of the available grayscale images or layers, or a mask value. If we choose a mask value, the slider on the right becomes operational, and we can choose a value in the range [0 to 255], which replaces the channel for all pixels. But at least one of the channels must be an image or a layer.</p><div class="figure"><a id="interpreting_rgb_channels_as_hsl_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00828"/><img src="httpatomoreillycomsourcenostarchimages1455654.png.jpg" alt="Interpreting RGB channels as HSL channels"/></div></div><p class="title">Figure 12-100. Interpreting RGB channels as HSL channels</p></div><div class="figure"><a id="map_submenu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00829"/><img src="httpatomoreillycomsourcenostarchimages1455656.png.jpg" alt="The Map submenu"/></div></div><p class="title">Figure 12-101. The Map submenu</p></div><p>The Compose tool lets you exchange channels without changing the color model, use channels from one color model and interpret them with another model, add an Alpha channel taken from another image (if a model with an Alpha channel, such as RGBA, has been chosen), or replace a channel with a constant value. As you can see, this tool is powerful. <a class="xref" href="ch12s06.html#interpreting_rgb_channels_as_hsl_channel" title="Figure 12-100. Interpreting RGB channels as HSL channels">Figure 12-100</a> was obtained by decomposing in the RGB model and then composing the layers in the HSL model.</p><div class="figure"><a id="sample_image_before_colormapping"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00830"/><img src="httpatomoreillycomsourcenostarchimages1455658.png.jpg" alt="A sample image before colormapping"/></div></div><p class="title">Figure 12-102. A sample image before colormapping</p></div><div class="figure"><a id="rearranging_the_colormap"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00831"/><img src="httpatomoreillycomsourcenostarchimages1455660.png.jpg" alt="Rearranging the colormap"/></div></div><p class="title">Figure 12-103. Rearranging the colormap</p></div></div></div><div class="sect2" title="The Map Submenu"><div class="titlepage"><div><div><h2 class="title"><a id="map_submenu-id00100"/>The Map Submenu</h2></div></div></div><p><a id="iddle1049" class="indexterm"/><a id="iddle1751" class="indexterm"/><a id="iddle2136" class="indexterm"/><a id="iddle2678" class="indexterm"/><a id="iddle3135" class="indexterm"/><a id="iddle3399" class="indexterm"/><a id="iddle4174" class="indexterm"/><a id="iddle4679" class="indexterm"/><a id="iddle4691" class="indexterm"/><a id="iddle5437" class="indexterm"/>The Map submenu, shown in <a class="xref" href="ch12s06.html#map_submenu" title="Figure 12-101. The Map submenu">Figure 12-101</a>, is separated into two sections. Tools in the first section apply only to images in Indexed mode. Tools in the second section apply only to images in RGB mode or, for some of the entries, Grayscale mode. We’ll use the image in <a class="xref" href="ch12s06.html#sample_image_before_colormapping" title="Figure 12-102. A sample image before colormapping">Figure 12-102</a> as an example and convert a copy of it to Indexed mode with an optimal palette of 256 colors and Floyd-Steinberg dithering to demonstrate the first two tools (see <a class="xref" href="ch12s01.html#indexed_mode" title="Indexed Mode">Indexed Mode</a> for more information about indexing).</p><div class="figure"><a id="choosing_a_colormap"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00832"/><img src="httpatomoreillycomsourcenostarchimages1455662.png.jpg" alt="Choosing a colormap"/></div></div><p class="title">Figure 12-104. Choosing a colormap</p></div><div class="sect3" title="Rearrange Colormap"><div class="titlepage"><div><div><h3 class="title"><a id="rearrange_colormap"/>Rearrange Colormap</h3></div></div></div><p>This tool does not change the image. It simply changes the numbering of the entries in the colormap. As shown in <a class="xref" href="ch12s06.html#rearranging_the_colormap" title="Figure 12-103. Rearranging the colormap">Figure 12-103</a> (only a quarter of the actual window is visible), we can move the entries by dragging and dropping. Right-click anywhere in the window to sort the colormap according to one of the HSV components or to reverse or reset the order.</p></div><div class="sect3" title="Set Colormap"><div class="titlepage"><div><div><h3 class="title"><a id="set_colormap"/>Set Colormap</h3></div></div></div><p>The Set Colormap tool opens a dialog in which we can only choose a new colormap from among those available (<a class="xref" href="ch12s06.html#choosing_a_colormap" title="Figure 12-104. Choosing a colormap">Figure 12-104</a>). Some of the colormaps yield odd results, as you can see in <a class="xref" href="ch12s06.html#after_setting_the_colormap_to_blues" title="Figure 12-105. After setting the colormap to Blues">Figure 12-105</a>.</p></div><div class="sect3" title="Alien Map"><div class="titlepage"><div><div><h3 class="title"><a id="alien_map"/>Alien Map</h3></div></div></div><p>The Alien Map tool transforms the colors of an image in the RGB or the HSL model by applying trigonometric functions to the pixel values.</p><p>The dialog shown in <a class="xref" href="ch12s06.html#alien_map_dialog" title="Figure 12-106. The Alien Map dialog">Figure 12-106</a> begins with a preview. Then we choose the color model, <a id="iddle1706" class="indexterm"/><a id="iddle1733" class="indexterm"/><a id="iddle1825" class="indexterm"/><a id="iddle3079" class="indexterm"/><a id="iddle3092" class="indexterm"/><a id="iddle3215" class="indexterm"/><a id="iddle3882" class="indexterm"/><a id="iddle4625" class="indexterm"/><a id="iddle4628" class="indexterm"/><a id="iddle5488" class="indexterm"/><a id="iddle5937" class="indexterm"/><a id="iddle6029" class="indexterm"/>called <span class="emphasis"><em>mode</em></span> in this dialog. The checkboxes on the right control which of the channels will be affected.</p><div class="figure"><a id="after_setting_the_colormap_to_blues"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00833"/><img src="httpatomoreillycomsourcenostarchimages1455664.png.jpg" alt="After setting the colormap to Blues"/></div></div><p class="title">Figure 12-105. After setting the colormap to Blues</p></div><div class="figure"><a id="alien_map_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00834"/><img src="httpatomoreillycomsourcenostarchimages1455666.png.jpg" alt="The Alien Map dialog"/></div></div><p class="title">Figure 12-106. The Alien Map dialog</p></div><p>Each channel has two sliders: frequency [0 to 20] and phaseshift [0 to 360]. Frequencies that are less than 0.7 yield a result similar to the original. Higher values give an increasingly “alien” result. <a class="xref" href="ch12s06.html#after_applying_alien_map" title="Figure 12-107. After applying Alien Map">Figure 12-107</a> is the result of using a frequency of 6.00 in the three RGB channels and a phaseshift of 0.00 in the three HSV channels.</p><div class="figure"><a id="after_applying_alien_map"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00835"/><img src="httpatomoreillycomsourcenostarchimages1455668.png.jpg" alt="After applying Alien Map"/></div></div><p class="title">Figure 12-107. After applying Alien Map</p></div></div><div class="sect3" title="Color Exchange"><div class="titlepage"><div><div><h3 class="title"><a id="color_exchange"/>Color Exchange</h3></div></div></div><p>As its name indicates, this tool replaces a color in the image with a different one.</p><p>The dialog, shown in <a class="xref" href="ch12s06.html#color_exchange_dialog" title="Figure 12-108. The Color Exchange dialog">Figure 12-108</a>, contains a preview that you middle-click to define the F<span class="smaller">ROM</span> C<span class="smaller">OLOR</span>. This color can also be defined by clicking the corresponding button, which opens the Color chooser, or by setting the three sliders for the RGB channels. Each channel also has threshold sliders [0 to 1], which you adjust to set how much of the channel will be replaced.</p><p>The pixels in the image that are similar to the chosen F<span class="smaller">ROM</span> C<span class="smaller">OLOR</span>, within the threshold limits, are replaced with the T<span class="smaller">O</span> C<span class="smaller">OLOR</span>, which you select using the button or the three sliders.</p></div><div class="sect3" title="Gradient Map"><div class="titlepage"><div><div><h3 class="title"><a id="gradient_map"/>Gradient Map</h3></div></div></div><p>The Gradient Map tool has no dialog. It uses the current gradient, which you can change in the Gradients dialog, usually a dockable dialog in the multi-dialog window below the layers tab. The mapping occurs between the color intensities in the image (represented as the Value channel in the Levels tool, for example) and the colors in the gradient. The left end of the gradient is mapped to the darkest pixel, and the <a id="iddle2156" class="indexterm"/><a id="iddle3080" class="indexterm"/><a id="iddle4166" class="indexterm"/><a id="iddle4169" class="indexterm"/>right end to the lightest pixel. <a class="xref" href="ch12s06.html#after_applying_gradient_map" title="Figure 12-109. After applying Gradient Map">Figure 12-109</a> shows the result using the <code class="literal">Greens</code> gradient.</p><div class="figure"><a id="color_exchange_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00836"/><img src="httpatomoreillycomsourcenostarchimages1455670.png.jpg" alt="The Color Exchange dialog"/></div></div><p class="title">Figure 12-108. The Color Exchange dialog</p></div><div class="figure"><a id="after_applying_gradient_map"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00837"/><img src="httpatomoreillycomsourcenostarchimages1455672.png.jpg" alt="After applying Gradient Map"/></div></div><p class="title">Figure 12-109. After applying Gradient Map</p></div></div><div class="sect3" title="Palette Map"><div class="titlepage"><div><div><h3 class="title"><a id="palette_map"/>Palette Map</h3></div></div></div><p>The Palette Map tool works like the Gradient Map tool, only it uses the current palette instead of the current gradient. Change the current palette via the Palettes dialog. This dialog can be opened by clicking the small button to the right of any dockable dialog or from the <span class="strong"><strong>Image: Windows &gt; Dockable Dialogs</strong></span> menu. <a class="xref" href="ch12s06.html#after_applying_palette_map" title="Figure 12-110. After applying Palette Map">Figure 12-110</a> shows the result using the <code class="literal">Gold</code> palette.</p><div class="figure"><a id="after_applying_palette_map"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00838"/><img src="httpatomoreillycomsourcenostarchimages1455674.png.jpg" alt="After applying Palette Map"/></div></div><p class="title">Figure 12-110. After applying Palette Map</p></div><div class="figure"><a id="rotate_colors_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00839"/><img src="httpatomoreillycomsourcenostarchimages1455676.png.jpg" alt="The Rotate Colors dialog"/></div></div><p class="title">Figure 12-111. The Rotate Colors dialog</p></div><div class="figure"><a id="after_applying_rotate_colors"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00840"/><img src="httpatomoreillycomsourcenostarchimages1455678.png.jpg" alt="After applying Rotate Colors"/></div></div><p class="title">Figure 12-112. After applying Rotate Colors</p></div></div><div class="sect3" title="Rotate Colors"><div class="titlepage"><div><div><h3 class="title"><a id="rotate_colors"/>Rotate Colors</h3></div></div></div><p><a id="iddle3275" class="indexterm"/><a id="iddle4067" class="indexterm"/><a id="iddle4729" class="indexterm"/><a id="iddle4740" class="indexterm"/>The Rotate Colors tool uses the Hue color circle to alter the image colors. A hue subrange is defined on the F<span class="smaller">ROM</span> circle as a sector, and another sector is defined on the T<span class="smaller">O</span> circle. The colors in the input range are mapped to the colors in the output range. The other colors are not affected.</p><div class="figure"><a id="gray_options_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00841"/><img src="httpatomoreillycomsourcenostarchimages1455680.png.jpg" alt="The Gray Options tab"/></div></div><p class="title">Figure 12-113. The Gray Options tab</p></div><p>This dialog is shown in <a class="xref" href="ch12s06.html#rotate_colors_dialog" title="Figure 12-111. The Rotate Colors dialog">Figure 12-111</a>. You can adjust the two color ranges in various ways. The previews on the left show the original image and the current result. To get the dramatic change shown in <a class="xref" href="ch12s06.html#after_applying_rotate_colors" title="Figure 12-112. After applying Rotate Colors">Figure 12-112</a>, we clicked the C<span class="smaller">HANGE</span> O<span class="smaller">RDER OF</span> A<span class="smaller">RROWS</span> button.</p><div class="figure"><a id="sample_colorize_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00842"/><img src="httpatomoreillycomsourcenostarchimages1455682.png.jpg" alt="The Sample Colorize dialog"/></div></div><p class="title">Figure 12-114. The Sample Colorize dialog</p></div><p><a id="iddle1403" class="indexterm"/><a id="iddle1556" class="indexterm"/><a id="iddle3264" class="indexterm"/><a id="iddle4068" class="indexterm"/><a id="iddle4680" class="indexterm"/><a id="iddle4730" class="indexterm"/><a id="iddle4745" class="indexterm"/><a id="iddle4767" class="indexterm"/><a id="iddle5450" class="indexterm"/><a id="iddle5738" class="indexterm"/><a id="iddle5938" class="indexterm"/>This dialog contains a second tab, shown in <a class="xref" href="ch12s06.html#gray_options_tab" title="Figure 12-113. The Gray Options tab">Figure 12-113</a>. On this tab, we specify a color in the image to replace with gray, as long as the C<span class="smaller">HANGE TO THIS</span> radio button is checked. The center circle is a visual representation of the G<span class="smaller">RAY</span> T<span class="smaller">HRESHOLD</span> saturation: It extends when the threshold saturation is increased. The position of the small circle defines the hue and saturation of the color that will be converted to gray. If the T<span class="smaller">REAT AS THIS</span> radio button is checked, the hue that will be converted to gray is defined by the rotation specified on the Main Options tab.</p></div><div class="sect3" title="Sample Colorize"><div class="titlepage"><div><div><h3 class="title"><a id="sample_colorize"/>Sample Colorize</h3></div></div></div><p>The Sample Colorize tool uses a sampling image to colorize a destination image.</p><p>The destination image must be in RGB mode but can be either grayscale or color. Its colors will be discarded; only the Value channel will be used in the resulting image. <a class="xref" href="ch12s06.html#sample_colorize_dialog" title="Figure 12-114. The Sample Colorize dialog">Figure 12-114</a> shows the dialog for this tool. We created a sample image by applying a linear gradient to a blank canvas, using the Blend tool and the <code class="literal">Incandescent</code> gradient. The drop-down menus at the top of the dialog contain all of the images currently open in GIMP; use them to select a sample or use the current gradient as the sample, either as is or reversed. We can use the triangles or the numbers below the sample image preview to restrict the output range. We can also change the prominence of dark, medium, and light tones, using the triangles or the numbers in the input range below the destination image preview.</p><p>Various checkboxes set the parameters. H<span class="smaller">OLD INTENSITY</span> applies the average light intensity of the source image to the destination image. O<span class="smaller">RIGINAL INTENSITY</span> inactivates the Input levels intensity settings. U<span class="smaller">SE SUBCOLORS</span> makes the colors of an output pixel a mixture of the source and destination image values; otherwise, only the dominant color (the color with the maximum value) is used. S<span class="smaller">MOOTH SAMPLES</span> improves the transition between colors selected after clicking the G<span class="smaller">ET</span> S<span class="smaller">AMPLE</span> C<span class="smaller">OLORS</span> button.</p></div></div><div class="sect2" title="The Info Submenu"><div class="titlepage"><div><div><h2 class="title"><a id="info_submenu"/>The Info Submenu</h2></div></div></div><p>The Info submenu is shown in <a class="xref" href="ch12s06.html#info_submenu-id00101" title="Figure 12-115. The Info submenu">Figure 12-115</a>. These entries don’t change the image. Rather, <a id="iddle3210" class="indexterm"/><a id="iddle3883" class="indexterm"/><a id="iddle4553" class="indexterm"/><a id="iddle4641" class="indexterm"/><a id="iddle5939" class="indexterm"/><a id="iddle6030" class="indexterm"/>they offer ways to gather information about the image properties, which allow you to make informed adjustments using the other tools.</p><div class="figure"><a id="info_submenu-id00101"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00843"/><img src="httpatomoreillycomsourcenostarchimages1455684.png.jpg" alt="The Info submenu"/></div></div><p class="title">Figure 12-115. The Info submenu</p></div><div class="figure"><a id="value_histogram"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00844"/><img src="httpatomoreillycomsourcenostarchimages1455686.png.jpg" alt="The Value histogram"/></div></div><p class="title">Figure 12-116. The Value histogram</p></div><div class="sect3" title="Histogram"><div class="titlepage"><div><div><h3 class="title"><a id="histogram"/>Histogram</h3></div></div></div><p>The Histogram tool opens a dockable dialog that can be selected via <span class="strong"><strong>Image: Windows &gt; Dockable Dialogs &gt; Histogram</strong></span> and docked in one of the multi-dialog windows.</p><p>Keeping this dialog open on the screen is helpful, because it’s automatically updated when the current image changes and it provides a way to track the effect of various adjustments. Adjust its size, either to reduce the histogram and save space on the screen or to extend the histogram and show more precise information. In <a class="xref" href="ch12s06.html#value_histogram" title="Figure 12-116. The Value histogram">Figure 12-116</a>, only the Value channel is displayed in linear mode. Numeric data about the image pixels is displayed at the bottom of the dialog: the mean, standard deviation, and median of the values, and the number of pixels.</p><div class="figure"><a id="red_histogram_with_reduced_range"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00845"/><img src="httpatomoreillycomsourcenostarchimages1455688.png.jpg" alt="The Red histogram with reduced range"/></div></div><p class="title">Figure 12-117. The Red histogram with reduced range</p></div><div class="figure"><a id="rgb_histogram_in_logarithmic_mode"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00846"/><img src="httpatomoreillycomsourcenostarchimages1455690.png.jpg" alt="The RGB histogram in Logarithmic mode"/></div></div><p class="title">Figure 12-118. The RGB histogram in Logarithmic mode</p></div><p>In <a class="xref" href="ch12s06.html#red_histogram_with_reduced_range" title="Figure 12-117. The Red histogram with reduced range">Figure 12-117</a>, we’ve displayed the Red channel and defined a subrange by moving the white triangle below the histogram. Because this is an informational dialog, the image doesn’t change, but the data does: The pixel count is different from the total, and the percentile is less than 100.</p><p>In <a class="xref" href="ch12s06.html#rgb_histogram_in_logarithmic_mode" title="Figure 12-118. The RGB histogram in Logarithmic mode">Figure 12-118</a>, we’ve displayed the three RGB channels at the same time, and the histogram is logarithmic. In Logarithmic mode, the low values are more prominent, which is generally better since small differences in small values are much easier to see than small differences in high values.</p><div class="figure"><a id="border_average_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00847"/><img src="httpatomoreillycomsourcenostarchimages1455692.png.jpg" alt="The Border Average dialog"/></div></div><p class="title">Figure 12-119. The Border Average dialog</p></div></div><div class="sect3" title="Border Average"><div class="titlepage"><div><div><h3 class="title"><a id="border_average"/>Border Average</h3></div></div></div><p><a id="iddle1195" class="indexterm"/><a id="iddle1439" class="indexterm"/><a id="iddle1730" class="indexterm"/><a id="iddle1837" class="indexterm"/><a id="iddle2475" class="indexterm"/><a id="iddle2635" class="indexterm"/><a id="iddle2733" class="indexterm"/><a id="iddle4164" class="indexterm"/><a id="iddle4668" class="indexterm"/><a id="iddle5117" class="indexterm"/><a id="iddle5878" class="indexterm"/><a id="iddle5988" class="indexterm"/>The Border Average tool is useful for finding an appropriate background color to go behind an image on a web page. It determines which color occurs most often along the border of the current layer and sets it as the foreground color. Because this does not change the image itself, this tool has no undo capability.</p><p>The Border Average dialog, shown in <a class="xref" href="ch12s06.html#border_average_dialog" title="Figure 12-119. The Border Average dialog">Figure 12-119</a>, contains only two settings. The thickness of the B<span class="smaller">ORDER</span> S<span class="smaller">IZE</span> specifies how much of the current layer is used in the calculation. The N<span class="smaller">UMBER OF</span> C<span class="smaller">OLORS</span> is specified by the bucket size in the following way: Colors found in the border are placed in different buckets, depending on their similarity. The bucket containing the most colors is used to set the foreground color. A small bucket size leads to a large number of buckets and, often, an unexpected result. For example, when we applied the tool for the image in <a class="xref" href="ch12s06.html#sample_image_before_colormapping" title="Figure 12-102. A sample image before colormapping">Figure 12-102</a>, a bucket size of 16 yielded black, because the model’s black shirt spans much of the bottom border of the image and the tone is fairly consistent. A bucket size of 64 yielded a gray color, which is a mixture of the beige in the background of the photograph and the black of the woman’s shirt.</p></div><div class="sect3" title="Colorcube Analysis"><div class="titlepage"><div><div><h3 class="title"><a id="colorcube_analysis"/>Colorcube Analysis</h3></div></div></div><p>This tool has been more or less obsolete since GIMP 2.4: Its dialog (<a class="xref" href="ch12s06.html#colorcube_analysis_dialog" title="Figure 12-120. The Colorcube Analysis dialog">Figure 12-120</a>) only displays the RGB logarithmic histogram, the image dimensions, and the number of unique colors.</p><div class="figure"><a id="colorcube_analysis_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00848"/><img src="httpatomoreillycomsourcenostarchimages1455694.png.jpg" alt="The Colorcube Analysis dialog"/></div></div><p class="title">Figure 12-120. The Colorcube Analysis dialog</p></div><div class="figure"><a id="generated_palette"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00849"/><img src="httpatomoreillycomsourcenostarchimages1455696.png.jpg" alt="The generated palette"/></div></div><p class="title">Figure 12-121. The generated palette</p></div><div class="figure"><a id="smooth_palette_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00850"/><img src="httpatomoreillycomsourcenostarchimages1455698.png.jpg" alt="The Smooth Palette dialog"/></div></div><p class="title">Figure 12-122. The Smooth Palette dialog</p></div></div><div class="sect3" title="Smooth Palette"><div class="titlepage"><div><div><h3 class="title"><a id="smooth_palette"/>Smooth Palette</h3></div></div></div><p>This tool uses the various colors in the current layer to generate a palette in the form of a series of color stripes, as shown in <a class="xref" href="ch12s06.html#generated_palette" title="Figure 12-121. The generated palette">Figure 12-121</a>. We use it mainly with the Flame filter (see <a class="xref" href="ch17s13.html#flame" title="Flame">Flame</a>).</p><p>In the dialog shown in <a class="xref" href="ch12s06.html#smooth_palette_dialog" title="Figure 12-122. The Smooth Palette dialog">Figure 12-122</a>, the first two parameters set the dimensions of the new image for the palette. S<span class="smaller">EARCH DEPTH</span> [1 to 1024] generates more colors when you increase the value.</p></div></div><div class="sect2" title="The Remaining Color Tools"><div class="titlepage"><div><div><h2 class="title"><a id="remaining_color_tools"/>The Remaining Color Tools</h2></div></div></div><p>The last part of the Colors menu contains six tools that aren’t really related but are grouped here. We’ll use the sample image shown in <a class="xref" href="ch12s06.html#sample_image-id00102" title="Figure 12-123. The sample image">Figure 12-123</a> to demonstrate the effect of each of these tools.</p><div class="figure"><a id="sample_image-id00102"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00851"/><img src="httpatomoreillycomsourcenostarchimages1455700.png.jpg" alt="The sample image"/></div></div><p class="title">Figure 12-123. The sample image</p></div><div class="figure"><a id="color_to_alpha_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00852"/><img src="httpatomoreillycomsourcenostarchimages1455702.png.jpg" alt="The Color to Alpha dialog"/></div></div><p class="title">Figure 12-124. The Color to Alpha dialog</p></div><div class="sect3" title="Color to Alpha"><div class="titlepage"><div><div><h3 class="title"><a id="color_to_alpha"/>Color to Alpha</h3></div></div></div><p><a id="iddle1724" class="indexterm"/><a id="iddle1734" class="indexterm"/><a id="iddle1806" class="indexterm"/><a id="iddle1930" class="indexterm"/><a id="iddle2414" class="indexterm"/><a id="iddle2443" class="indexterm"/><a id="iddle4163" class="indexterm"/>The Color to Alpha tool replaces some chosen color with transparency. Its dialog, shown in <a class="xref" href="ch12s06.html#color_to_alpha_dialog" title="Figure 12-124. The Color to Alpha dialog">Figure 12-124</a>, contains a preview and a button for choosing the color, which opens a simplified version of the Color chooser. We chose a color from the picture using the eyedropper, and the result appears in <a class="xref" href="ch12s06.html#after_applying_color_to_alpha" title="Figure 12-125. After applying Color to Alpha">Figure 12-125</a>.</p></div><div class="sect3" title="Colorify"><div class="titlepage"><div><div><h3 class="title"><a id="colorify"/>Colorify</h3></div></div></div><p>The Colorify tool desaturates the image and then colorizes it, as if it were a grayscale image seen through colored glass. The Colorify tool actually does the same thing as the Colorize tool but with a different user interface. Its dialog, shown in <a class="xref" href="ch12s06.html#colorify_dialog" title="Figure 12-126. The Colorify dialog">Figure 12-126</a>, contains a preview; a small palette of fully saturated colors; and a button for defining a custom color, which opens a simplified version of the Color chooser. Choosing a light color is best because darker colors reduce the contrast in the image, as demonstrated in <a class="xref" href="ch12s06.html#after_applying_colorify" title="Figure 12-127. After applying Colorify">Figure 12-127</a>.</p><div class="figure"><a id="after_applying_color_to_alpha"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00853"/><img src="httpatomoreillycomsourcenostarchimages1455704.png.jpg" alt="After applying Color to Alpha"/></div></div><p class="title">Figure 12-125. After applying Color to Alpha</p></div><div class="figure"><a id="colorify_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00854"/><img src="httpatomoreillycomsourcenostarchimages1455706.png.jpg" alt="The Colorify dialog"/></div></div><p class="title">Figure 12-126. The Colorify dialog</p></div></div><div class="sect3" title="Filter Pack"><div class="titlepage"><div><div><h3 class="title"><a id="filter_pack"/>Filter Pack</h3></div></div></div><p>As its name suggests, this entry is actually a collection of tools, called <span class="emphasis"><em>filters</em></span>, although they don’t have any specific connection to the collection of tools found in the <span class="strong"><strong>Image: Filters</strong></span> menu.</p><div class="figure"><a id="after_applying_colorify"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00855"/><img src="httpatomoreillycomsourcenostarchimages1455708.png.jpg" alt="After applying Colorify"/></div></div><p class="title">Figure 12-127. After applying Colorify</p></div><div class="figure"><a id="filter_pack_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00856"/><img src="httpatomoreillycomsourcenostarchimages1455710.png.jpg" alt="The Filter Pack dialog"/></div></div><p class="title">Figure 12-128. The Filter Pack dialog</p></div><p><a id="iddle1873" class="indexterm"/><a id="iddle2415" class="indexterm"/><a id="iddle4658" class="indexterm"/>Its dialog, shown in <a class="xref" href="ch12s06.html#filter_pack_dialog" title="Figure 12-128. The Filter Pack dialog">Figure 12-128</a>, contains the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Two previews, before and after the filter. These previews are very small and you can’t zoom in, so we often find it useful to first make a small selection in the image, work on that selection, invert it, and apply the tool again with the same parameters.</p><div class="figure"><a id="hue_variations"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00857"/><img src="httpatomoreillycomsourcenostarchimages1455712.png.jpg" alt="The Hue variations"/></div></div><p class="title">Figure 12-129. The Hue variations</p></div></li><li class="listitem"><p>S<span class="smaller">HOW</span> allows you to change what’s shown in the preview. To use the trick just described, choose to show only the selection rather than the entire image.</p></li><li class="listitem"><p>The four checkboxes in W<span class="smaller">INDOWS</span> open corresponding windows, which are explained next.</p></li><li class="listitem"><p>A<span class="smaller">FFECTED</span> R<span class="smaller">ANGE</span> works in the same way as in the Color Balance tool (see <a class="xref" href="ch12s05.html#color_balance" title="Color Balance">Color Balance</a>).</p></li><li class="listitem"><p>S<span class="smaller">ELECT</span> P<span class="smaller">IXELS</span> B<span class="smaller">Y</span> further determines which subrange will be affected by the changes.</p></li><li class="listitem"><p>The R<span class="smaller">OUGHNESS</span> slider [0 to 1] sets the strength of changes made when you click a window.</p></li></ul></div><p>The windows, which open when the corresponding boxes in the Filter Pack dialog are checked, each contain a filter linked to the main dialog but offering a unique way to edit the image. The four windows are these:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>H<span class="smaller">UE</span>: Its dialog, shown in <a class="xref" href="ch12s06.html#hue_variations" title="Figure 12-129. The Hue variations">Figure 12-129</a>, contains seven previews. The center one displays the current state of the image. The others correspond to the three RGB colors and their complementary colors. Clicking one of the previews adds the corresponding color to the <a id="iddle2507" class="indexterm"/><a id="iddle3201" class="indexterm"/><a id="iddle3212" class="indexterm"/><a id="iddle3280" class="indexterm"/><a id="iddle3745" class="indexterm"/><a id="iddle3807" class="indexterm"/><a id="iddle3823" class="indexterm"/><a id="iddle4611" class="indexterm"/><a id="iddle4768" class="indexterm"/><a id="iddle5639" class="indexterm"/><a id="iddle5726" class="indexterm"/>selected subrange (set in the Filter Pack dialog) with the current R<span class="smaller">OUGHNESS</span>. Subtract a color by clicking its complementary color.</p><div class="figure"><a id="saturation_variations"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00858"/><img src="httpatomoreillycomsourcenostarchimages1455714.png.jpg" alt="The Saturation variations"/></div></div><p class="title">Figure 12-130. The Saturation variations</p></div><div class="figure"><a id="value_variations"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00859"/><img src="httpatomoreillycomsourcenostarchimages1455716.png.jpg" alt="The Value variations"/></div></div><p class="title">Figure 12-131. The Value variations</p></div><div class="figure"><a id="advanced_filter_pack_options_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00860"/><img src="httpatomoreillycomsourcenostarchimages1455718.png.jpg" alt="The Advanced Filter Pack Options dialog"/></div></div><p class="title">Figure 12-132. The Advanced Filter Pack Options dialog</p></div></li><li class="listitem"><p>S<span class="smaller">ATURATION</span>: Its dialog, shown in <a class="xref" href="ch12s06.html#saturation_variations" title="Figure 12-130. The Saturation variations">Figure 12-130</a>, contains only three previews, allowing you to increase or decrease the saturation in the current subrange.</p></li><li class="listitem"><p>V<span class="smaller">ALUE</span>: Its dialog, shown in <a class="xref" href="ch12s06.html#value_variations" title="Figure 12-131. The Value variations">Figure 12-131</a>, also contains three previews, allowing you to increase or decrease the value in the image.</p></li><li class="listitem"><p>A<span class="smaller">DVANCED</span>: This checkbox opens the dialog shown in <a class="xref" href="ch12s06.html#advanced_filter_pack_options_dialog" title="Figure 12-132. The Advanced Filter Pack Options dialog">Figure 12-132</a>. The P<span class="smaller">REVIEW</span> S<span class="smaller">IZE</span> slider [50 to 125] allows you to change the size of the preview slightly. The A<span class="smaller">FFECTED</span> R<span class="smaller">ANGE</span> specifies the meaning of Shadows, Midtones, and Highlights. The blue triangle allows you to remove the darkest pixels from the affected subrange. You can use the two other triangles to define the limits of the three subranges. The shape of the curve depends on the range chosen in the main window, on the roughness, and on the position of the bottom slider [0 to 1]. This shape represents the intensity of the changes that will be made to the image.</p></li></ul></div><div class="figure"><a id="hot_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00861"/><img src="httpatomoreillycomsourcenostarchimages1455720.png.jpg" alt="The Hot dialog"/></div></div><p class="title">Figure 12-133. The Hot dialog</p></div></div><div class="sect3" title="Hot"><div class="titlepage"><div><div><h3 class="title"><a id="hot"/>Hot</h3></div></div></div><p>The Hot tool selects pixels that could cause problems when displayed in NTSC or PAL video. In its dialog, shown in <a class="xref" href="ch12s06.html#hot_dialog" title="Figure 12-133. The Hot dialog">Figure 12-133</a>, you can select the video mode as well as the process used to mitigate the potential problem. You can reduce luminance or saturation or blacken the pixels. By default, the changes made with this tool are done on an additional, transparent layer.</p></div><div class="sect3" title="Maximum RGB"><div class="titlepage"><div><div><h3 class="title"><a id="maximum_rgb"/>Maximum RGB</h3></div></div></div><p>The Maximum RGB tool keeps only the RGB component with the maximum (or minimum) value. This explains why in its dialog, shown in <a class="xref" href="ch12s06.html#maximum_rgb_dialog" title="Figure 12-134. The Maximum RGB dialog">Figure 12-134</a>, the preview shows an image that’s mainly red, except for the eyes, which are blue. If we choose the minimal channels, the result is mainly blue, except for the eyes, which are now red.</p></div><div class="sect3" title="Retinex"><div class="titlepage"><div><div><h3 class="title"><a id="retinex"/>Retinex</h3></div></div></div><p>Retinex algorithms are designed to mimic the dynamics of human vision, making images viewed on a screen appear more realistic. The human eye distinguishes colors even in poor or colored lighting. The Retinex tool uses the MSRCR algorithm, which is used in digital photography or for processing astronomical and medical photographs.</p><div class="figure"><a id="maximum_rgb_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00862"/><img src="httpatomoreillycomsourcenostarchimages1455722.png.jpg" alt="The Maximum RGB dialog"/></div></div><p class="title">Figure 12-134. The Maximum RGB dialog</p></div><p>The options in its <a class="xref" href="ch12s06.html#retinex_dialog" title="Figure 12-135. The Retinex dialog">Figure 12-135</a>, assume that the user has some knowledge of the mathematics of the Retinex MSRCR algorithm. Those who don’t possess the required knowledge can simply fiddle with the options and sliders until the result is appealing. An example is shown in <a class="xref" href="ch12s06.html#after_applying_retinex" title="Figure 12-136. After applying Retinex">Figure 12-136</a>.</p><div class="figure"><a id="retinex_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00863"/><img src="httpatomoreillycomsourcenostarchimages1455724.png.jpg" alt="The Retinex dialog"/></div></div><p class="title">Figure 12-135. The Retinex dialog</p></div><div class="figure"><a id="after_applying_retinex"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00864"/><img src="httpatomoreillycomsourcenostarchimages1455726.png.jpg" alt="After applying Retinex"/></div></div><p class="title">Figure 12-136. After applying Retinex</p></div></div></div></div></body></html>