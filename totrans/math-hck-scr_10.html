<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><h2 class="h2-h"><span epub:type="pagebreak" id="page_175"/><span class="color2"><strong>A</strong></span></h2>&#13;
<h2 class="h2-hd"><strong>Programming Challenge Hints</strong></h2>&#13;
<div class="imagec"><img src="../images/common.jpg" alt="Image" width="167" height="189"/></div>&#13;
<p class="noindent">Studying math involves learning and understanding mathematical concepts in class, using textbooks and worksheets. It can be a passive process, where you just try to absorb information. On the other hand, <em>doing</em> math involves actively applying concepts to solve problems and create new mathematical models. This process requires creativity and problem-solving skills, as well as the ability to think critically and logically.</p>&#13;
<p class="indent">Programming is an important part of doing math, as it lets you automate complex calculations and constructions in order to explore mathematical ideas in ways that would be impossible on paper or in your head. This book has been all about using Scratch to do math—writing algorithms and performing numerical computations—with the programming challenges being an invitation for you to “get your hands dirty” on some real problems. This chapter provides some comments and code snippets to help you solve those challenges.</p>&#13;
<h3 class="h3" id="app01lev1"><span epub:type="pagebreak" id="page_176"/><a href="ch01.xhtml"><span class="blue95">Chapter 1: What Computers Think About Numbers</span></a></h3>&#13;
<h4 class="h4a" id="app01lev2">Challenge 1.1</h4>&#13;
<p class="noindent">As a first step, you could make a list of the digits in the base <em>b</em> number with a loop like the one in <a href="app01.xhtml#chAfig1">Figure A-1</a>. Then, you could put the digits together in a string to make the answer look like a base <em>b</em> number with code like that in <a href="app01.xhtml#chAfig2">Figure A-2</a>.</p>&#13;
<div class="image"><img id="chAfig1" src="../images/pg196_Image_242.jpg" alt="Image" width="551" height="248"/></div>&#13;
<p class="figcap"><em>Figure A-1: Converting to base</em> b</p>&#13;
<p class="noindent">For base 11 or 12, check if <span class="literal">convert mod b</span> is <span class="literal">10</span> or <span class="literal">11</span> and, if so, substitute <span class="literal">T</span> or <span class="literal">E</span> before adding the result to the <span class="literal">digits</span> list.</p>&#13;
<div class="image"><img id="chAfig2" src="../images/pg196_Image_243.jpg" alt="Image" width="691" height="279"/></div>&#13;
<p class="figcap"><em>Figure A-2: Joining the digits into a string</em></p>&#13;
<h4 class="h4a" id="app01lev3">Challenge 1.2</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig3">Figure A-3</a> shows some code that works for base 11 or base 12. You can add cases to it to support base 16.</p>&#13;
<div class="image"><img id="chAfig3" src="../images/pg196_Image_244.jpg" alt="Image" width="389" height="429"/></div>&#13;
<p class="figcap"><em>Figure A-3: Substituting letters for numbers</em></p>&#13;
<p class="indent">When you go from binary to hexadecimal, each group of four binary digits (counting from the least significant, or rightmost, digit) is equivalent to a single hexadecimal digit. For example, 1011 in binary becomes E in hexadecimal.</p>&#13;
<h4 class="h4a" id="app01lev4"><span epub:type="pagebreak" id="page_177"/>Challenge 1.3</h4>&#13;
<p class="noindent">You can grow a list by adding new items to it. Suppose you’ve asked the user to specify a starting value for the list, what the change should be (stored in the variable <span class="literal">change</span>), and how long the list should be (stored in the variable <span class="literal">length</span>). <a href="app01.xhtml#chAfig4">Figure A-4</a> shows some code to calculate the remaining values in the list based on exponential and linear growth. Each type of growth gets its own list.</p>&#13;
<div class="image"><img id="chAfig4" src="../images/pg197_Image_245.jpg" alt="Image" width="890" height="243"/></div>&#13;
<p class="figcap"><em>Figure A-4: Comparing exponential and linear growth</em></p>&#13;
<h4 class="h4a" id="app01lev5">Challenge 1.4</h4>&#13;
<p class="noindent">With linear growth it would take a hopelessly long time to count to Scratch’s absolute maximum number, but with exponential growth (see <a href="app01.xhtml#app01lev4">Challenge 1.3</a>) you can get there very quickly. By doubling, for example, it takes just 1,024 steps. The largest number Scratch can represent is about 1.08 ⋅ 10<sup>308</sup>; beyond that, the value reported is <span class="literal">Infinity</span>. <a href="app01.xhtml#chAfig5">Figure A-5</a> shows how to get there.</p>&#13;
<h4 class="h4a" id="app01lev6">Challenge 1.5</h4>&#13;
<p class="noindent">The best way to approach this challenge is to treat the 64 binary digits in the IEEE representation as a string. Luckily, there’s room on the Scratch stage to show the complete value of a variable holding 64 characters. <a href="app01.xhtml#chAfig6">Figure A-6</a> numbers the characters (grouped by tens) to demonstrate how wide the screen is, though you’ll want use just the characters 0 and 1 for the actual binary representation.</p>&#13;
<div class="image"><img id="chAfig5" src="../images/pg197_Image_246.jpg" alt="Image" width="371" height="587"/></div>&#13;
<p class="figcap"><em>Figure A-5: Doubling your way to infinity</em></p>&#13;
<div class="image"><img id="chAfig6" src="../images/pg197_Image_247.jpg" alt="Image" width="891" height="284"/></div>&#13;
<p class="figcap"><em>Figure A-6: There’s room on the stage for 64 bits.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_178"/>Treating the binary representation as a string lets you pick out individual bits with the <span class="literal">letter of</span> block. You might want to store the bits in a list to make it easier to manipulate them.</p>&#13;
<h4 class="h4a" id="app01lev7">Challenge 1.6</h4>&#13;
<p class="noindent">To calculate 3<sup><em>n</em></sup>, all you need to do is change the multiplier from <span class="literal">2</span> to <span class="literal">3</span> in the <span class="literal">replace item</span> block <span class="ent">❶</span> in <a href="ch01.xhtml#ch1fig13">Figure 1-13</a>. <a href="app01.xhtml#chAfig7">Figure A-7</a> shows the updated block.</p>&#13;
<div class="image"><img id="chAfig7" src="../images/pg198_Image_248.jpg" alt="Image" width="699" height="84"/></div>&#13;
<p class="figcap"><em>Figure A-7: Calculating powers of 3 rather than powers of 2</em></p>&#13;
<h4 class="h4a" id="app01lev8">Challenge 1.7</h4>&#13;
<p class="noindent">Make sure that when you translate the answer back from a list of five-digit blocks to a string, smaller numbers are padded with an appropriate number of zeros. If the “digit” is 435, for example, it should become 00435 before being joined to the string. You can do this with a few <span class="literal">if</span> blocks.</p>&#13;
<h4 class="h4a" id="app01lev9">Challenge 1.8</h4>&#13;
<p class="noindent">Start by prompting for a number. Treat it as a string and make a list of digits by taking the characters from the string one at a time, beginning with the rightmost character (the least significant digit). Make a similar list from the second number. Add the corresponding digits in the two lists and keep the carry separate, if one occurs, so you can add it to the next pair of digits. If the numbers have a different amount of digits, you can pad the smaller number with 0 entries in its list of digits to finish the addition.</p>&#13;
<h3 class="h3" id="app01lev10"><a href="ch02.xhtml"><span class="blue95">Chapter 2: Exploring Divisibility and Primes</span></a></h3>&#13;
<h4 class="h4a" id="app01lev11">Challenge 2.1</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig8">Figure A-8</a> shows a custom block that can be used in an infinite loop both for Scratch Cat’s turn and for screening your answer to see if you have the pattern correct. It checks if a number is divisible by 5, 7, or 35 (both 5 and 7) and “translates” the number to the appropriate phrase.</p>&#13;
<div class="image"><img id="chAfig8" src="../images/pg198_Image_249.jpg" alt="Image" width="378" height="609"/></div>&#13;
<p class="figcap"><em>Figure A-8: A block to play Fizz-Buzz</em></p>&#13;
<h4 class="h4a" id="app01lev12"><span epub:type="pagebreak" id="page_179"/>Challenge 2.2</h4>&#13;
<p class="noindent">To calculate the alternating digit sum, it helps to view the input number <span class="literal">n</span> as a string, like we do in the casting out nines program from <a href="ch02.xhtml#ch2fig2">Figure 2-2</a>. Then, the digits of <span class="literal">n</span> can be treated as characters and pulled out for individual treatment as <span class="literal">letter i of n</span>. To alternate between addition and subtraction, make a variable called <span class="literal">plus minus</span> and toggle it back and forth between <span class="literal">1</span> and <span class="literal">-1</span> by multiplying it by <span class="literal">-1</span> after each digit. <a href="app01.xhtml#chAfig9">Figure A-9</a> has some code to get you started.</p>&#13;
<div class="image"><img id="chAfig9" src="../images/pg199_Image_250.jpg" alt="Image" width="647" height="311"/></div>&#13;
<p class="figcap"><em>Figure A-9: Testing for divisibility by 11 using an alternating digit sum</em></p>&#13;
<h4 class="h4a" id="app01lev13">Challenge 2.3</h4>&#13;
<p class="noindent">The code in <a href="app01.xhtml#chAfig10">Figure A-10</a> counts how many random numbers are divisible by 9.</p>&#13;
<div class="image"><img id="chAfig10" src="../images/pg199_Image_251.jpg" alt="Image" width="672" height="472"/></div>&#13;
<p class="figcap"><em>Figure A-10: Testing random numbers for divisibility by 9</em></p>&#13;
<p class="indent">This is a bit of a trick problem, though. You would think that about 1/9 of the numbers would be divisible by 9, but in the particular range from 1 to 100 there are 100 numbers and only 11 multiples of 9, so the actual probability is 11/100, which is a little smaller than 1/9. Still, with such a small sample size it would be hard to spot the difference.</p>&#13;
<h4 class="h4a" id="app01lev14"><span epub:type="pagebreak" id="page_180"/>Challenge 2.4</h4>&#13;
<p class="noindent">At the end of the casting out nines program, the variable <span class="literal">x</span> holds the “check digit.” It’s easy to add that digit to the original number if you treat the numbers as strings and use a <span class="literal">join</span> block, as in <a href="app01.xhtml#chAfig11">Figure A-11</a>.</p>&#13;
<div class="image"><img id="chAfig11" src="../images/pg200_Image_252.jpg" alt="Image" width="663" height="399"/></div>&#13;
<p class="figcap"><em>Figure A-11: Adding a “check digit” to a number</em></p>&#13;
<p class="indent">Scratch Cat doesn’t have to say the answer with the check digit. You can just leave the variable <span class="literal">with check digit</span> visible on the stage.</p>&#13;
<h4 class="h4a" id="app01lev15">Challenge 2.5</h4>&#13;
<p class="noindent">Casting out nines won’t help catch an error of transposition, since the sum of the digits is the same no matter what order the digits are in.</p>&#13;
<h4 class="h4a" id="app01lev16">Challenge 2.6</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAtab1">Table A-1</a> shows how the ratio of primes evolves as the upper bound increases.</p>&#13;
<p class="tabcap"><a id="chAtab1"/><strong>Table A-1:</strong> The Ratio of Primes</p>&#13;
<table class="border-bt">&#13;
<thead>&#13;
<tr>&#13;
<th class="border-b"><p class="tabnoind"><strong>Upper bound</strong></p></th>&#13;
<th class="border-b"><p class="tabnoind"><strong>Prime count</strong></p></th>&#13;
<th class="border-b"><p class="tabnoind"><strong>Ratio</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p class="tabnoind">10</p></td>&#13;
<td><p class="tabnoind">4</p></td>&#13;
<td><p class="tabnoind">0.4</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="bg-g"><p class="tabnoind">100</p></td>&#13;
<td class="bg-g"><p class="tabnoind">25</p></td>&#13;
<td class="bg-g"><p class="tabnoind">0.25</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p class="tabnoind">1,000</p></td>&#13;
<td><p class="tabnoind">168</p></td>&#13;
<td><p class="tabnoind">0.168</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="bg-g"><p class="tabnoind">10,000</p></td>&#13;
<td class="bg-g"><p class="tabnoind">1,229</p></td>&#13;
<td class="bg-g"><p class="tabnoind">0.1229</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p class="tabnoind">100,000</p></td>&#13;
<td><p class="tabnoind">9,592</p></td>&#13;
<td><p class="tabnoind">0.09592</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="noindent">The relative number of primes appears to decrease.</p>&#13;
<h4 class="h4a" id="app01lev17">Challenge 2.7</h4>&#13;
<p class="noindent">You’re looking for consecutive runs of <span class="literal">false</span> in the sieve output. There are 77 in a row starting at 188,030.</p>&#13;
<h4 class="h4a" id="app01lev18"><span epub:type="pagebreak" id="page_181"/>Challenge 2.8</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig12">Figure A-12</a> shows a snippet of code to add to scan the <span class="literal">primes</span> list for twin primes.</p>&#13;
<div class="image"><img id="chAfig12" src="../images/pg201_Image_253.jpg" alt="Image" width="1018" height="421"/></div>&#13;
<p class="figcap"><em>Figure A-12: Looking for twin primes</em></p>&#13;
<h4 class="h4a" id="app01lev19">Challenge 2.9</h4>&#13;
&#13;
<p class="noindent">The easiest way to do this is probably to make a new list where each entry contains six consecutive numbers from the original <span class="literal">primes</span> list joined together in a string. When you view the resulting list on the Scratch stage, it will look like a table with six columns. You’ll have to be careful with the formatting, though, so that numbers of different lengths in each column line up nicely. (See <a href="ch05.xhtml#ch05lev13">Project 21</a> in <a href="ch05.xhtml#ch05">Chapter 5</a> for an example of how to achieve this sort of formatting.)</p>&#13;
<p class="indent">Column 2 consists of all numbers that are congruent to 2 mod 6, which are divisible by 2. The elements in columns 4 and 6 are also all divisible by 2, and the elements in column 3 are divisible by 3. This means the only places primes could be after the first row are in columns 1 and 5.</p>&#13;
<h4 class="h4a" id="app01lev20">Challenge 2.10</h4>&#13;
<p class="noindent">As discussed in “Hacking the Code” on <a href="ch02.xhtml#ch02lev16">page 39</a> (<a href="ch02.xhtml#ch02lev14">Project 9</a>), you can keep track of runtimes using the <span class="literal">timer</span> block in the Sensing section of Scratch’s block menu. Set a variable called <span class="literal">timer1</span> when you start a calculation and one called <span class="literal">timer2</span> when you’re done, and calculate the difference (<span class="literal">timer2 - timer1</span>) to see how much time has elapsed, in seconds.</p>&#13;
<p class="indent">If you’re trying to time something that happens really quickly, it might be hard to tell how much time the computer is spending working on your problem and how much time it’s spending on its own background tasks. To get a better estimate, you could have the computer repeat your problem a bunch of times—say, 100—and then divide the total elapsed time by that number to find the average time per run.</p>&#13;
<h4 class="h4a" id="app01lev21">Challenge 2.11</h4>&#13;
<p class="noindent">You can add a step counter to the custom <span class="literal">gcd</span> block from <a href="ch02.xhtml#ch2fig17">Figure 2-17</a> to see how many cycles the algorithm takes. <a href="app01.xhtml#chAfig13">Figure A-13</a> shows the updated block definition.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_182"/><img id="chAfig13" src="../images/pg202_Image_254.jpg" alt="Image" width="417" height="645"/></div>&#13;
<p class="figcap"><em>Figure A-13: Counting the steps to complete Euclid’s algorithm</em></p>&#13;
<p class="indent">The algorithm takes longer when the quotients are smaller, so keep them at 1 to make a pretty pattern of values for remainders. Work backward from 3 = 1 ⋅ 2 + 1 to 5 = 1 ⋅ 3 + 2, 8 = 1 ⋅ 5 + 3, and so on. You’ll see this pattern again in <a href="ch04.xhtml#ch04">Chapter 4</a>!</p>&#13;
<h3 class="h3" id="app01lev22"><a href="ch03.xhtml"><span class="blue95">Chapter 3: Splitting Numbers with Prime Factorization</span></a></h3>&#13;
<h4 class="h4a" id="app01lev23">Challenge 3.1</h4>&#13;
<p class="noindent">To find a perfect number, simply check if the result of the sum of divisors code (<a href="ch03.xhtml#ch03lev7">Project 12</a>, <a href="ch03.xhtml#ch3fig8">Figure 3-8</a>) is equal to the original input number. It turns out any even perfect number <em>n</em> satisfies the following equation, where 2<sup><em>p</em></sup> – 1 is a prime number:</p>&#13;
<p class="center"><em>n</em> = 2<sup><em>p</em> – 1</sup>(2<sup>p</sup> – 1)</p>&#13;
<p class="indent">When <em>p</em> = 2, the equation gives the perfect number 6. When <em>p</em> = 3, it gives 28. When <em>p</em> = 5, it gives 496, and when <em>p</em> = 7, it gives 8,128.</p>&#13;
<p class="indent">Nobody knows if there are any odd perfect numbers.</p>&#13;
<h4 class="h4a" id="app01lev24">Challenge 3.2</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig14">Figure A-14</a> shows some code to identify if a number is perfect, abundant, or deficient. Add it to the end of the sum of divisors program in <a href="ch03.xhtml#ch3fig8">Figure 3-8</a>. Notice that since the sum of divisors includes the original number, <span class="literal">answer</span>, we first subtract <span class="literal">answer</span> to keep track of the <span class="literal">sum of proper divisors</span> <span class="ent">❶</span>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_183"/><img id="chAfig14" src="../images/pg203_Image_256.jpg" alt="Image" width="1016" height="532"/></div>&#13;
<p class="figcap"><em>Figure A-14: Determining if a number is perfect, abundant, or deficient</em></p>&#13;
<p class="indent">Now you need to write a counting routine that loops up to some upper bound, automatically inputting numbers into the sum of divisors program. Use three variables to keep track of the number of abundant, perfect, and deficient numbers, incrementing the appropriate variable whenever each type of number is found. There are no abundant numbers up to 10, but there are 22 of them up to 100 and 246 of them up to 1,000. There are 9 deficient numbers up to 10 and 751 of them up to 1,000.</p>&#13;
<h4 class="h4a" id="app01lev25">Challenge 3.3</h4>&#13;
<p class="noindent">The code gives the correct answer for a 0 exponent, even when the base is 0.</p>&#13;
<h4 class="h4a" id="app01lev26">Challenge 3.4</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig15">Figure A-15</a> shows a modification of <a href="ch03.xhtml#ch3fig7">Figure 3-7</a> that allows for positive or negative exponents.</p>&#13;
<h4 class="h4a" id="app01lev27">Challenge 3.5</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig16">Figure A-16</a> shows how you might preserve the list of exponents when you want to calculate <em>τ</em>(<em>n</em>). This code replaces the original <span class="literal">repeat</span> loop from the <a href="ch03.xhtml#page_47">Project 11</a> code (see <a href="ch03.xhtml#ch3fig6">Figure 3-6</a>).</p>&#13;
<div class="image"><img id="chAfig15" src="../images/pg203_Image_257.jpg" alt="Image" width="422" height="637"/></div>&#13;
<p class="figcap"><em>Figure A-15: Working with positive or negative exponents</em></p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_184"/><img id="chAfig16" src="../images/pg204_Image_258.jpg" alt="Image" width="793" height="315"/></div>&#13;
<p class="figcap"><em>Figure A-16: Preserving the</em> <span class="codeitalic">exponents</span> <em>list</em></p>&#13;
<p class="indent">You can use the same index variable, <span class="literal">i</span>, to step through both the prime factors and the exponents when calculating <em>σ</em>(<em>n</em>).</p>&#13;
<h4 class="h4a" id="app01lev28">Challenge 3.6</h4>&#13;
<p class="noindent">The custom block in <a href="app01.xhtml#chAfig17">Figure A-17</a> uses a Boolean variable, <span class="literal">primeQ</span>, to keep track of its answer. We start by setting <span class="literal">primeQ</span> to <span class="literal">true</span> and loop to change its value to <span class="literal">false</span> if <span class="literal">p</span> can be divided evenly by any number. We have to look only for divisors up to the square root of <span class="literal">p</span>.</p>&#13;
<div class="image"><img id="chAfig17" src="../images/pg204_Image_259.jpg" alt="Image" width="429" height="537"/></div>&#13;
<p class="figcap"><em>Figure A-17: Testing if a number is prime</em></p>&#13;
<p class="indent">You can make the code in <a href="app01.xhtml#chAfig17">Figure A-17</a> run more quickly by exiting after the first <span class="literal">false</span>.</p>&#13;
<h4 class="h4a" id="app01lev29"><span epub:type="pagebreak" id="page_185"/>Challenge 3.7</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig18">Figure A-18</a> shows a block that finds the next prime number after <span class="literal">n</span>.</p>&#13;
<div class="image"><img id="chAfig18" src="../images/pg205_Image_260.jpg" alt="Image" width="357" height="429"/></div>&#13;
<p class="figcap"><em>Figure A-18: Finding the next prime number</em></p>&#13;
<p class="indent">The block steps forward from <span class="literal">n</span>, passing values into the prime checking block from Challenge 3.6, until it reaches a number where <span class="literal">primeQ</span> is <span class="literal">true</span>.</p>&#13;
<h4 class="h4a" id="app01lev30">Challenge 3.8</h4>&#13;
<p class="noindent">Think about the track the inner wheel follows as a straight line instead of the inside of a ring. For each complete rotation, the ring adds 96 teeth to the straight line track. There are LCM(<em>b</em>, 96) teeth in the shortest track common to 96 teeth and <em>b</em> teeth—that’s when the wheel will end up back where it started and the drawing will be complete. A point is determined every <em>b</em> teeth, so there will be LCM(<em>b</em>, 96) / <em>b</em> points in all.</p>&#13;
<h4 class="h4a" id="app01lev31">Challenge 3.9</h4>&#13;
<p class="noindent">You can complete this challenge with the custom block from Challenge 3.6.</p>&#13;
<h4 class="h4a" id="app01lev32">Challenge 3.10</h4>&#13;
<p class="noindent">To compare the factorization methods, you can use the timer hack from <a href="ch02.xhtml#ch2fig19">Figure 2-19</a>. The trial division method is usually quicker for numbers below flintmax, but if the number <em>n</em> being factored is a biprime with both prime factors close to <img class="inline" src="../images/pg206_Image_261a.jpg" alt="Image" width="29" height="22"/>, then Fermat factorization can be faster.</p>&#13;
<h4 class="h4a" id="app01lev33">Challenge 3.11</h4>&#13;
<p class="noindent">Here’s some general code that uses the Pen extension to paint the stage with pixels whose color values (0 for white and 1 for black) are derived from a binary message. We’ll start with the <span class="literal">initial setup</span> block in <a href="app01.xhtml#chAfig19">Figure A-19</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_186"/><img id="chAfig19" src="../images/pg206_Image_261.jpg" alt="Image" width="611" height="1103"/></div>&#13;
<p class="figcap"><em>Figure A-19: Getting ready to draw a message</em></p>&#13;
<p class="indent">This block first sets the starting coordinates to a position near the upper-left corner of the stage <span class="ent">❶</span>. It then asks for a <span class="literal">width</span> and <span class="literal">height</span>, which are the numbers of columns and rows you want your message to contain. Next, it determines the size of each block in the message by dividing the stage’s overall width and height by the width and height of the message. The sprite that will draw the message by adding stamps in the appropriate pixel locations is a 9×9 black square, which is scaled to fit in the grid being drawn <span class="ent">➋</span>.</p>&#13;
<p class="indent">The code in <a href="app01.xhtml#chAfig20">Figure A-20</a> does the work of drawing the message.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_187"/><img id="chAfig20" src="../images/pg207_Image_262.jpg" alt="Image" width="567" height="1018"/></div>&#13;
<p class="figcap"><em>Figure A-20: Drawing the message</em></p>&#13;
<p class="indent">We specify the size of the rectangle for the message in two loops, one for the <span class="literal">height</span> and one for the <span class="literal">width</span>. The <span class="literal">message</span> is a string of bits (0s and 1s). We use the variable <span class="literal">n</span> to look at the message bit by bit, drawing a stamp for each bit that’s a 1 <span class="ent">❶</span>. At the end of each row, we move the cursor to the start of the next row <span class="ent">➋</span>.</p>&#13;
<p class="indent">You can use this program to draw the contents of the Arecibo message by copying and pasting in its 1,679 bits, or entering them by hand if you want to. Or you can test the program on the smaller message included in the <span class="literal">sample message</span> variable used in the “3-PC11 Binary message to pixels” Scratch project created by rumpus88366 (<em><a href="https://scratch.mit.edu/projects/771257850">https://scratch.mit.edu/projects/771257850</a></em>), shown in <a href="app01.xhtml#chAfig21">Figure A-21</a>.</p>&#13;
<div class="image"><img id="chAfig21" src="../images/pg207_Image_263.jpg" alt="Image" width="714" height="70"/></div>&#13;
<p class="figcap"><em>Figure A-21: A test message</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_188"/>This message gives a much simpler output when drawn as a rectangle seven columns wide by five rows high (see <a href="app01.xhtml#chAfig22">Figure A-22</a>). Let’s call it an <em>S</em> for <em>Scratch</em>!</p>&#13;
<div class="image"><img id="chAfig22" src="../images/pg208_Image_264.jpg" alt="Image" width="247" height="244"/></div>&#13;
<p class="figcap"><em>Figure A-22: Visualizing the test message</em></p>&#13;
<p class="indent">You could extend this program in various ways. For example, the program could just ask for the message and factor the message’s length to find appropriate dimensions for the rectangle, assuming the length is a biprime.</p>&#13;
<h3 class="h3" id="app01lev34"><a href="ch04.xhtml"><span class="blue95">Chapter 4: Finding Patterns in Sequences</span></a></h3>&#13;
<h4 class="h4a" id="app01lev35">Challenge 4.1</h4>&#13;
<p class="noindent">The Lucas sequence begins 2, 1, 3, 4, 7, 11, 18, 29, 47, . . . . There are lots of interesting relationships between Lucas numbers (represented with an <em>l</em>) and Fibonacci numbers (represented with an <em>f</em>). For example:</p>&#13;
<p class="center"><em>f<sub>n</sub></em> <sub>– 2</sub> + <em>f<sub>n</sub></em> = <em>l<sub>n</sub></em></p>&#13;
<h4 class="h4a" id="app01lev36">Challenge 4.2</h4>&#13;
<p class="noindent">To extend the Fibonacci numbers backward from <em>f</em><sub>1</sub>, we need to make sense of <em>f</em><sub>0</sub>, <em>f</em><sub>–1</sub>, <em>f</em><sub>–2</sub>, and so on. We can start by saying <em>f</em><sub>0</sub> should be whatever we need to add to <em>f</em><sub>1</sub> = 1 to get <em>f</em><sub>2</sub> = 1. Therefore, <em>f</em><sub>0</sub> = 0. To maintain the recurrence, we need <em>f</em><sub>–1</sub> = 1, <em>f</em><sub>–2</sub> = –1, <em>f</em><sub>–3</sub> = 2, and so on. It’s the original Fibonacci sequence, but every other value is negative.</p>&#13;
<p class="indent">The program in <a href="app01.xhtml#chAfig23">Figure A-23</a> uses a series of <span class="literal">if</span> statements to report the Fibonacci number with a given index, negative indices included.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_189"/><img id="chAfig23" src="../images/pg209_Image_266.jpg" alt="Image" width="844" height="1399"/></div>&#13;
<p class="figcap"><em>Figure A-23: Calculating positive and negative Fibonacci terms</em></p>&#13;
<p class="indent">The first few <span class="literal">if</span> statements account for the initial values of the sequence, between indices –2 and +2. For other indices, the custom <span class="literal">Fibonacci</span> block calculates the Fibonacci number as if the index were positive. For odd negative indices, the result is switched to a negative number.</p>&#13;
<h4 class="h4a" id="app01lev37"><span epub:type="pagebreak" id="page_190"/>Challenge 4.3</h4>&#13;
<p class="noindent">The last value before flintmax is at row 78. The last value before the result is reported as <span class="literal">Infinity</span> is at row 1,476.</p>&#13;
<h4 class="h4a" id="app01lev38">Challenge 4.4</h4>&#13;
<p class="noindent">To generate the coefficients, you need to know the values of terms 0, 1, and 2 in the sequence. Let’s call these values <em>r</em>, <em>s</em>, and <em>t</em>, respectively. (In <a href="ch04.xhtml#ch04">Chapter 4</a>, we mostly talked about sequences as starting with term 1, but they can also have a term 0.) We can think of these three values as the results of the quadratic polynomial function <em>f</em> (<em>x</em>) = <em>ax</em><sup>2</sup> + <em>bx</em> + <em>c</em> when <em>x</em> equals 0, 1, and 2.</p>&#13;
<p class="indent">Think about what happens to the quadratic polynomial when <em>x</em> is 0:</p>&#13;
<div class="imagec"><img src="../images/pg210_Image_267.jpg" alt="Image" width="312" height="155"/></div>&#13;
<p class="noindent">The coefficients <em>a</em> and <em>b</em> go away, leaving only <em>c</em>. So what we’re calling <em>r</em>, the value of term 0 in the sequence, must also be the value of <em>c</em>. What about the case where <em>x</em> = 1?</p>&#13;
<div class="imagec"><img src="../images/pg210_Image_268.jpg" alt="Image" width="285" height="67"/></div>&#13;
<p class="noindent">This tells us that term 1 in the sequence, what we’re calling <em>s</em>, is the sum of the three coefficients. And what about when <em>x</em> = 2?</p>&#13;
<div class="imagec"><img src="../images/pg210_Image_269.jpg" alt="Image" width="303" height="67"/></div>&#13;
<p class="noindent">This is equivalent to term 2 in the sequence, what we’re calling <em>t</em>.</p>&#13;
<p class="indent">With a little algebra, we can use these results to write individual formulas for <em>a</em>, <em>b</em>, and <em>c</em>. They are:</p>&#13;
<div class="imagec"><img src="../images/pg210_Image_270.jpg" alt="Image" width="490" height="59"/></div>&#13;
<p class="indent">In your program, you’ll take terms 0, 1, and 2 from a sequence and plug them into these formulas as the variables <span class="literal">r</span>, <span class="literal">s</span>, and <span class="literal">t</span>. For the sequence of pentagonal numbers, you should get <em>a</em> = 3/2, <em>b</em> = –1/2, and <em>c</em> = 0.</p>&#13;
<p class="indent">This neat math hack for figuring out the coefficients from the first few values of the quadratic polynomial is called the <em>method of undetermined coefficients</em>.</p>&#13;
<h4 class="h4a" id="app01lev39">Challenge 4.5</h4>&#13;
<p class="noindent">This is a sneaky way of asking for the longest set of consecutive composite numbers you can find. You solved that problem in Challenge 2.7.</p>&#13;
<h4 class="h4a" id="app01lev40">Challenge 4.6</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig24">Figure A-24</a> modifies the decimal-to-binary converter from <a href="ch01.xhtml#ch01lev3">Project 1</a> to generate a list of binary numbers. The new <span class="literal">How many ones?</span> block counts the number of 1s in <span epub:type="pagebreak" id="page_191"/>each binary number and stores the results in a separate list to create the desired sequence.</p>&#13;
<div class="image"><img id="chAfig24" src="../images/pg211_Image_271.jpg" alt="Image" width="886" height="1119"/></div>&#13;
<p class="figcap"><em>Figure A-24: Counting the 1s in binary numbers</em></p>&#13;
<p class="indent">One way to think about the sequence is to see it as blocks of 1, 2, 4, 8, . . . , elements. (The length of each block is a power of 2.) To get the next block, first copy the previous block, then follow this with a second copy of the previous block but with 1 added to each element. For example:</p>&#13;
<ul class="itemize1">&#13;
<li class="itemize"><img class="inline" src="../images/pg18_Image_5.jpg" alt="Image" width="17" height="17"/><span class="space"/>The first block is 1.</li>&#13;
<li class="itemize"><img class="inline" src="../images/pg18_Image_5.jpg" alt="Image" width="17" height="17"/><span class="space"/>The second block is 1, 1 + 1 (or 1, 2).</li>&#13;
<li class="itemize"><img class="inline" src="../images/pg18_Image_5.jpg" alt="Image" width="17" height="17"/><span class="space"/>The third block is 1, 2, 1 + 1, 2 + 1 (or 1, 2, 2, 3).</li>&#13;
<li class="itemize"><img class="inline" src="../images/pg18_Image_5.jpg" alt="Image" width="17" height="17"/><span class="space"/>The fourth block is 1, 2, 2, 3, 1 + 1, 2 + 1, 2 + 1, 3 + 1 (or 1, 2, 2, 3, 2, 3, 3, 4).</li></ul>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_192"/>An interesting feature of this sequence is the way it contains copies of itself. If you look at just the elements in positions 2, 4, 6, 8, 10, . . . , you’ll see that they’re exactly the same as the original sequence!</p>&#13;
<h4 class="h4a" id="app01lev41">Challenge 4.7</h4>&#13;
<p class="noindent">The Fibonacci numbers show up again in the first, second, and higher differences.</p>&#13;
<h4 class="h4a" id="app01lev42">Challenge 4.8</h4>&#13;
<p class="noindent">Similar to the Fibonacci numbers, the powers of 2 show up again in the first, second, and higher differences. It’s the underlying exponential growth of both sequences that makes their differences show the same pattern.</p>&#13;
<h4 class="h4a" id="app01lev43">Challenge 4.9</h4>&#13;
<p class="noindent">Third differences are constant, and fourth and higher differences are 0. It’s significant that for the sequence of squares, the second differences are constant with a value of 2 ⋅ 1 = 2, whereas for cubes, the third differences are constant with a value of 3 ⋅ 2 ⋅ 1 = 6. One more pattern to check out!</p>&#13;
<h3 class="h3" id="app01lev44"><a href="ch05.xhtml"><span class="blue95">Chapter 5: From Sequences to Arrays</span></a></h3>&#13;
<h4 class="h4a" id="app01lev45">Challenge 5.1</h4>&#13;
<p class="noindent">There’s a zero at the end of <em>n</em>! for every factor of 10. A factor of 10 comes from a factor of 5 and a factor of 2. There are lots of factors of 2, so it’s easier to count factors of 5. Every fifth number is a multiple of 5 and contributes a factor of 5 to <em>n</em>! There are <span class="literal">floor of n/5</span> multiples of 5 up to <span class="literal">n</span>. In addition, there are extra factors of 5 that come from higher powers of 5. For example, every 25th number is a multiple of 25, which contributes an extra factor of 5, and every 125th number is a multiple of 125, contributing yet another extra factor of 5. The program in <a href="app01.xhtml#chAfig25">Figure A-25</a> counts just the factors of 5 the first time through the <span class="literal">repeat until</span> loop, then uses additional cycles of the loop to count the extra factors that come from factors of higher powers of 5.</p>&#13;
<div class="image"><img id="chAfig25" src="../images/pg212_Image_272.jpg" alt="Image" width="578" height="617"/></div>&#13;
<p class="figcap"><em>Figure A-25: Calculating the number of zeros at the end of</em> n <em>factorial</em></p>&#13;
<p class="indent">The program reports that there are six zeros at the end of 25 factorial.</p>&#13;
<h4 class="h4a" id="app01lev46"><span epub:type="pagebreak" id="page_193"/>Challenge 5.2</h4>&#13;
<p class="noindent">You can adapt the row-generating program from <a href="ch05.xhtml#ch05lev7">Project 19</a> (<a href="ch05.xhtml#ch5fig7">Figure 5-7</a>) to grab row entries after the row is calculated. <a href="app01.xhtml#chAfig26">Figure A-26</a> shows a custom block to calculate the row and extract the <em>k</em>th entry. You could also do the calculation as a quotient of factorials, as we did in <a href="ch05.xhtml#ch05lev4">Project 18</a> (<a href="ch05.xhtml#ch5fig1">Figure 5-1</a>), but this way gives answers that are accurate for more rows.</p>&#13;
<div class="image"><img id="chAfig26" src="../images/pg213_Image_273.jpg" alt="Image" width="889" height="902"/></div>&#13;
<p class="figcap"><em>Figure A-26: Calculating a specific binomial coefficient</em></p>&#13;
<p class="indent">You’ll want to call this custom block repeatedly for successive values of <span class="literal">n</span> while holding <span class="literal">k</span> constant at <span class="literal">2</span>, adding each set of results to its own list. You should find that the numbers down the <em>C</em>(<em>n</em>, 2) diagonal are the triangular numbers.</p>&#13;
<h4 class="h4a" id="app01lev47">Challenge 5.3</h4>&#13;
<p class="noindent">The trick is to take mod 2 of each value, so even numbers end up as 0s and odd numbers end up as 1s. <a href="app01.xhtml#chAfig27">Figure A-27</a> shows an interpretation of the first 32 rows of Pascal’s triangle, mod 2. Here, the 1s are visualized as black squares and the 0s as blank spaces.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_194"/><img id="chAfig27" src="../images/pg214_Image_274.jpg" alt="Image" width="362" height="363"/></div>&#13;
<p class="figcap"><em>Figure A-27: Pascal’s triangle mod 2</em></p>&#13;
<p class="indent">The resulting pattern is known as the Sierpiński triangle. It’s a famous example of a <em>fractal</em>, a pattern that repeats itself at different scales.</p>&#13;
<h4 class="h4a" id="app01lev48">Challenge 5.4</h4>&#13;
<p class="noindent">You can use the custom <span class="literal">gcd</span> block from <a href="ch02.xhtml#ch02lev14">Project 9</a> (see <a href="ch02.xhtml#ch2fig17">Figure 2-17</a>) to filter the row and column indices, then include in the table only entries where the row and column indices are both relatively prime to the modulus. <a href="app01.xhtml#chAfig28">Figure A-28</a> shows the updates to the code.</p>&#13;
<div class="image"><img id="chAfig28" src="../images/pg214_Image_275.jpg" alt="Image" width="772" height="229"/></div>&#13;
<p class="figcap"><em>Figure A-28: Restricting the operations table to rows and columns that are relatively prime to the modulus</em></p>&#13;
<p class="indent">The stack on the left goes in the definition for the <span class="literal">Make index row</span> block (see <a href="ch05.xhtml#ch5fig15">Figure 5-15</a>), taking the place of the <span class="literal">set row</span> block inside the <span class="literal">repeat modulus</span> loop. The stack on the right goes into the main program stack (see <a href="ch05.xhtml#ch5fig17">Figure 5-17</a>), replacing the current <span class="literal">add row to table</span> block.</p>&#13;
<p class="indent">With these changes, the mod 12 multiplication table comes out looking like <a href="app01.xhtml#chAfig29">Figure A-29</a>.</p>&#13;
<div class="image"><img id="chAfig29" src="../images/pg214_Image_276.jpg" alt="Image" width="314" height="380"/></div>&#13;
<p class="figcap"><em>Figure A-29: A reduced multiplication table mod 12</em></p>&#13;
<h4 class="h4a" id="app01lev49">Challenge 5.5</h4>&#13;
<p class="noindent">You can modify the custom <span class="literal">power</span> block from <a href="ch03.xhtml#ch03lev7">Project 12</a> (see <a href="ch03.xhtml#ch3fig7">Figure 3-7</a>) to work with modular arithmetic so it takes in a base and a power and calculates the appropriate power of the base, mod <span class="literal">p</span>. Then, you can build a custom <span epub:type="pagebreak" id="page_195"/>Boolean block to test if a particular number <span class="literal">n</span> is a primitive root of a particular prime <span class="literal">p</span>. <a href="app01.xhtml#chAfig30">Figure A-30</a> shows these two blocks.</p>&#13;
<div class="image"><img id="chAfig30" src="../images/pg215_Image_277.jpg" alt="Image" width="893" height="627"/></div>&#13;
<p class="figcap"><em>Figure A-30: Looking for a primitive root</em></p>&#13;
<p class="indent">The loop in the <span class="literal">primitive root?</span> block goes to <span class="literal">p - 2</span> because if you haven’t found a power of <span class="literal">n</span> that equals 1 by this time, the last power will be 1, and <span class="literal">n</span> will be a primitive root.</p>&#13;
<p class="indent">With those pieces, the main program is just a loop to ask for a prime and find the first number that works as a primitive root. Two math questions to consider as a follow-up are why primes must have primitive roots and whether primitive roots exist for any composite numbers.</p>&#13;
<h4 class="h4a" id="app01lev50">Challenge 5.6</h4>&#13;
<p class="noindent">You can strip down the <span class="literal">Make index row</span> block from <a href="ch05.xhtml#ch5fig15">Figure 5-15</a> to eliminate the work of formatting the table with an index row and padding appropriately with spaces. Then, modify the custom <span class="literal">pad</span> block in <a href="ch05.xhtml#ch5fig16">Figure 5-16</a> to insert a comma before <span class="literal">x</span> instead of one or more spaces.</p>&#13;
<p class="indent">You might also want to strip off the initial comma at the start of each row before adding it to the table. You can do that with another custom block. Scratch doesn’t have a command to identify and modify characters in strings the way it lets us work with elements of lists, so you can just rewrite the string from the second character on, as shown in <a href="app01.xhtml#chAfig31">Figure A-31</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_196"/><img id="chAfig31" src="../images/pg216_Image_278.jpg" alt="Image" width="667" height="447"/></div>&#13;
<p class="figcap"><em>Figure A-31: Removing the first character from a string</em></p>&#13;
<h3 class="h3" id="app01lev51"><a href="ch06.xhtml"><span class="blue95">Chapter 6: Making Codes, and Cracking Them Too</span></a></h3>&#13;
<h4 class="h4a" id="app01lev52">Challenge 6.1</h4>&#13;
<p class="noindent">Make a single ring of letters in your favorite drawing program, similar to <a href="app01.xhtml#chAfig32">Figure A-32</a>. Import it into Scratch as a sprite labeled <span class="literal">Outer Wheel</span>.</p>&#13;
<div class="image"><img id="chAfig32" src="../images/pg216_Image_279.jpg" alt="Image" width="481" height="484"/></div>&#13;
<p class="figcap"><em>Figure A-32: A letter ring</em></p>&#13;
<p class="indent">Now shrink the <span class="literal">Outer Wheel</span> sprite to make a new sprite that’s small enough to fit inside it, and label this <span class="literal">Inner Wheel</span>. The only code you need is a bit of code to manipulate the smaller sprite, as shown in <a href="app01.xhtml#chAfig33">Figure A-33</a>.</p>&#13;
<div class="image"><img id="chAfig33" src="../images/pg216_Image_280.jpg" alt="Image" width="683" height="137"/></div>&#13;
<p class="figcap"><em>Figure A-33: Rotating</em> <span class="codeitalic">Inner Wheel</span> <em>one letter at a time</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_197"/>This code rotates the inner wheel to the left or right. The angle of 13.846 degrees is 360 / 26, so each key press shifts the inner wheel by one letter at a time relative to the outer wheel.</p>&#13;
<h4 class="h4a" id="app01lev53">Challenge 6.2</h4>&#13;
<p class="noindent">H becomes I, A becomes B, and L becomes M (see <a href="app01.xhtml#chAfig34">Figure A-34</a>).</p>&#13;
<div class="image"><img id="chAfig34" src="../images/pg217_Image_281.jpg" alt="Image" width="481" height="480"/></div>&#13;
<p class="figcap"><em>Figure A-34: Shifting “HAL” by 1</em></p>&#13;
<h4 class="h4a" id="app01lev54">Challenge 6.3</h4>&#13;
<p class="noindent"><em>Yes</em> in French is <em>oui</em>. Your decoder ring can translate this word for you using a shift of 16: Y becomes O, E becomes U, and S becomes I (see <a href="app01.xhtml#chAfig35">Figure A-35</a>). Sadly, its magical translation capabilities don’t extend much further!</p>&#13;
<div class="image"><img id="chAfig35" src="../images/pg217_Image_282.jpg" alt="Image" width="479" height="478"/></div>&#13;
<p class="figcap"><em>Figure A-35: YES?</em></p>&#13;
<h4 class="h4a" id="app01lev55">Challenge 6.4</h4>&#13;
<p class="noindent">This is a job for the program from <a href="ch06.xhtml#ch06lev5">Project 23</a> (see <a href="ch06.xhtml#ch6fig9">Figure 6-9</a>). A shift of 16 reveals the message “THERE WILL BE A HOT TIME IN THE OLD TOWN TONIGHT!”</p>&#13;
<h4 class="h4a" id="app01lev56"><span epub:type="pagebreak" id="page_198"/>Challenge 6.5</h4>&#13;
<p class="noindent">The trouble here is that, due to the order of operations, the multiplication happens before the shift when you run the linear transformation code. If you try to undo both at once, the multiplier acts on the shift as well, so the shift ends up being incorrect. This is why we originally performed the decryption in two steps, to force the shift to be reversed before the multiplication.</p>&#13;
<p class="indent">If <em>s</em> is the original shift factor, the fix is to take –<em>s</em> and multiply it by the modular inverse (mod the alphabet size). Then, use the result as the new shift factor for the decryption, while using the modular inverse as the new multiplier. This way, when the multiplier is applied, the inverse cancels out and you get the shift you want.</p>&#13;
<h4 class="h4a" id="app01lev57">Challenge 6.6</h4>&#13;
<p class="noindent">The program in <a href="app01.xhtml#chAfig36">Figure A-36</a> achieves this. After prompting for a <span class="literal">modulus</span>, which is the alphabet size, and a <span class="literal">multiplier</span>, it calls our custom <span class="literal">gcd</span> block (from <a href="ch02.xhtml#ch2fig17">Figure 2-17</a>) to make sure a modular inverse exists. The program exits if no inverse exists, and otherwise it calculates the inverse by trial and error <span class="ent">❶</span>. Then, it prompts for the <span class="literal">shift</span> and calculates the inverse transformation’s shift <span class="ent">➋</span>.</p>&#13;
<div class="image"><img id="chAfig36" src="../images/pg218_Image_283.jpg" alt="Image" width="713" height="661"/></div>&#13;
<p class="figcap"><em>Figure A-36: Finding the numbers to undo a linear transformation cipher</em></p>&#13;
<h4 class="h4a" id="app01lev58">Challenge 6.7</h4>&#13;
<p class="noindent">If the multiplier isn’t relatively prime to the alphabet size, the scrambled alphabet won’t be complete. Some letters will occur more than once, and others won’t appear at all. Also, there’s no modular inverse, so no decryption is possible.</p>&#13;
<h4 class="h4a" id="app01lev59">Challenge 6.8</h4>&#13;
<p class="noindent">You can reuse some of the code we wrote earlier in the chapter for this challenge, including the <span class="literal">Alphabet</span> block from <a href="ch06.xhtml#ch6fig2">Figure 6-2</a> to build the <span class="literal">alphabet</span> list and the <span class="literal">Scramble</span> <span epub:type="pagebreak" id="page_199"/>block from <a href="ch06.xhtml#ch6fig19">Figure 6-19</a> to mix up the alphabet. You’ll also need an <span class="literal">Initialize</span> block to set up the <span class="literal">alphabet</span> list and prompt for a message (you won’t need it to prompt for a shift and a multiplier, since you’re going to generate all possible shifts and multipliers yourself), as well as our old friend the <span class="literal">gcd</span> block from <a href="ch02.xhtml#ch02lev14">Project 9</a> (<a href="ch02.xhtml#ch2fig17">Figure 2-17</a>). <a href="app01.xhtml#chAfig37">Figure A-37</a> shows the new code.</p>&#13;
<div class="image"><img id="chAfig37" src="../images/pg219_Image_284.jpg" alt="Image" width="776" height="1323"/></div>&#13;
<p class="figcap"><em>Figure A-37: Generating every possible linear transformation decryption</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_200"/>The outer <span class="literal">repeat</span> loop moves through every possible multiplier <span class="ent">❶</span>, while the inner <span class="literal">repeat</span> loop moves through every possible shift for that multiplier <span class="ent">➌</span>. Together, these loops generate every possible linear transformation, using <span class="literal">Scramble</span> to mix up the alphabet based on the current <span class="literal">multiple</span> and <span class="literal">shift</span> parameters <span class="ent">➍</span>. Each possible message is built up character by character in the <span class="literal">encrypted</span> variable, then added to the list of possible decodings <span class="ent">➎</span>. Before exploring a given multiplier, the <span class="literal">gcd</span> test <span class="ent">➋</span> confirms that the multiplier and the alphabet size are relatively prime. This indicates that a modular inverse exists for the multiplier and therefore that the multiplier is valid.</p>&#13;
<h4 class="h4a" id="app01lev60">Challenge 6.9</h4>&#13;
<p class="noindent">An easy way to mix up the alphabet is to swap each letter with a random letter. <a href="app01.xhtml#chAfig38">Figure A-38</a> shows a program that does this using a custom <span class="literal">swap</span> block. Notice that you need an extra variable, <span class="literal">x</span>, to temporarily hold one of the swapped values.</p>&#13;
<div class="image"><img id="chAfig38" src="../images/pg220_Image_285.jpg" alt="Image" width="691" height="705"/></div>&#13;
<p class="figcap"><em>Figure A-38: Randomly scrambling the alphabet</em></p>&#13;
<p class="indent">If you’d like to see the entire scrambled alphabet on the stage, you can build a string from the <span class="literal">alphabet</span> list, adding one character at a time (see <a href="app01.xhtml#chAfig39">Figure A-39</a>).</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_201"/><img id="chAfig39" src="../images/pg221_Image_286.jpg" alt="Image" width="761" height="441"/></div>&#13;
<p class="figcap"><em>Figure A-39: Viewing the scrambled alphabet as a single string</em></p>&#13;
<h4 class="h4a" id="app01lev61">Challenge 6.10</h4>&#13;
<p class="noindent">Start with an extension of the <span class="literal">gcd</span> code, shown in <a href="app01.xhtml#chAfig40">Figure A-40</a>, that remembers the quotients and remainders as <span class="literal">qlist</span> and <span class="literal">rlist</span>.</p>&#13;
<div class="image"><img id="chAfig40" src="../images/pg221_Image_287.jpg" alt="Image" width="498" height="699"/></div>&#13;
<p class="figcap"><em>Figure A-40: Listing quotients and remainders from Euclid’s algorithm</em></p>&#13;
<p class="indent">You can now make linear combinations of the remainders to represent the greatest common divisor. As you substitute up from the bottom, you end up with a linear combination of the original numbers <span class="literal">a</span> and <span class="literal">b</span> that gives the GCD. <a href="app01.xhtml#chAfig41">Figure A-41</a> shows how this works.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_202"/><img id="chAfig41" src="../images/pg222_Image_288.jpg" alt="Image" width="893" height="1297"/></div>&#13;
<p class="figcap"><em>Figure A-41: Finding</em> <span class="codeitalic">x</span> <em>and</em> <span class="codeitalic">y</span></p>&#13;
<p class="indent">As an example, if you ask the program to use <em>b</em> = 26 and <em>a</em> = 17, you’ll end up with <span class="literal">x = 2</span> and <span class="literal">y = -3</span>. That means (2 ⋅ 26) – (3 ⋅ 17) = 1, which tells you that –3 ⋅ 17 ≡ 1 mod 26. So you can use –3, or 26 – 3 = 23, as the modular inverse for 17. <a href="app01.xhtml#chAfig42">Figure A-42</a> shows the output for this scenario.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_203"/><img id="chAfig42" src="../images/pg223_Image_289.jpg" alt="Image" width="767" height="477"/></div>&#13;
<p class="figcap"><em>Figure A-42: Identifying –3 (or +23) as the modular inverse of 17</em></p>&#13;
<h4 class="h4a" id="app01lev62">Challenge 6.11</h4>&#13;
<p class="noindent">The logic of this program is in its main part, shown in <a href="app01.xhtml#chAfig43">Figure A-43</a>.</p>&#13;
<div class="image"><img id="chAfig43" src="../images/pg223_Image_290.jpg" alt="Image" width="462" height="517"/></div>&#13;
<p class="figcap"><em>Figure A-43: Guessing a letter and seeing how it fits</em></p>&#13;
<p class="indent">The custom <span class="literal">Initialize</span> block asks for a cryptogram to solve and sets up the stage display, showing the puzzle and the shape of its solution. Then, the <span class="literal">forever</span> loop asks for a letter in the puzzle to guess and what it should be replaced with. It’s easier to process the guess if the solution is maintained as a list of individual characters rather than as a string, so there’s some background coding to convert back and forth between <span class="literal">Solution</span>, which is displayed, and <span class="literal">Solution list</span>, which remains hidden. The bookkeeping is done in the <span class="literal">update</span> block, shown in <a href="app01.xhtml#chAfig44">Figure A-44</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_204"/><img id="chAfig44" src="../images/pg224_Image_291.jpg" alt="Image" width="735" height="835"/></div>&#13;
<p class="figcap"><em>Figure A-44: Updating the solution</em></p>&#13;
<h4 class="h4a" id="app01lev63">Challenge 6.12</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig45">Figure A-45</a> shows a quick way to tell whether a character is a letter or not. The Boolean variable <span class="literal">letterQ</span> is set to <span class="literal">true</span> for upper- or lowercase letters, or <span class="literal">false</span> otherwise. (The <span class="literal">contains</span> block doesn’t care about capitalization.)</p>&#13;
<div class="image"><img id="chAfig45" src="../images/pg224_Image_292.jpg" alt="Image" width="672" height="326"/></div>&#13;
<p class="figcap"><em>Figure A-45: Testing for letters of the alphabet</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_205"/>Once you have this block, you can use it to test each character in a string, one at a time. Keep only those characters that result in a <span class="literal">letterQ</span> value of <span class="literal">true</span>.</p>&#13;
<h3 class="h3" id="app01lev64"><a href="ch07.xhtml"><span class="blue95">Chapter 7: Experiments in Counting</span></a></h3>&#13;
<h4 class="h4a" id="app01lev65">Challenge 7.1</h4>&#13;
<p class="noindent">The program in <a href="app01.xhtml#chAfig46">Figure A-46</a> lists Catalan numbers using the alternative recurrence.</p>&#13;
<div class="image"><img id="chAfig46" src="../images/pg225_Image_293.jpg" alt="Image" width="783" height="677"/></div>&#13;
<p class="figcap"><em>Figure A-46: Another Catalan recurrence</em></p>&#13;
<p class="indent">The calculation is implemented inside the <span class="literal">repeat</span> loop <span class="ent">❶</span>. Notice that the formula is a single-term recurrence, meaning we need only <em>C</em>(<em>n</em> – 1) to calculate <em>C</em>. This means we can just use the <span class="literal">C</span> variable over and over, without having to look up earlier values in the list. Also, term <em>C</em>(0) doesn’t have to be included in the list at all, so the list’s index numbers are correct from the start. This recurrence produces accurate values up to flintmax.</p>&#13;
<h4 class="h4a" id="app01lev66">Challenge 7.2</h4>&#13;
<p class="noindent">The input for this program will be a row of the <span class="literal">Catalan</span> list generated by the code for <a href="ch07.xhtml#ch07lev3">Project 28</a> (<a href="ch07.xhtml#ch7fig1">Figures 7-1</a> through <a href="ch07.xhtml#ch7fig3">7-3</a>), consisting of forward slash (<span class="literal">/</span>) and backslash (<span class="literal">\</span>) characters. Say you’ve extracted one of the rows into the <span class="literal">input pattern</span> variable. You can then draw the pattern with the code in <a href="app01.xhtml#chAfig47">Figure A-47</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_206"/><img id="chAfig47" src="../images/pg226_Image_294.jpg" alt="Image" width="1005" height="1163"/></div>&#13;
<p class="figcap"><em>Figure A-47: Visualizing Catalan paths</em></p>&#13;
<p class="indent">The custom <span class="literal">draw</span> block sets <span class="literal">step size</span> to make the drawing fit nicely on the stage. Then, the <span class="literal">repeat</span> loop in the main stack uses the characters as a recipe for drawing the diagram, ignoring all characters in <span class="literal">input pattern</span> except for the slashes. It draws a diagonal line upward for each forward slash and a diagonal line downward for each backslash.</p>&#13;
<h4 class="h4a" id="app01lev67">Challenge 7.3</h4>&#13;
<p class="noindent">The pattern to notice is that the <em>n</em>th Catalan number is <em>C</em>(2<em>n</em>, <em>n</em>) / (<em>n</em> + 1).</p>&#13;
<h4 class="h4a" id="app01lev68"><span epub:type="pagebreak" id="page_207"/>Challenge 7.4</h4>&#13;
<p class="noindent">All you have to do is change every <span class="literal">/</span> to a left parenthesis and every <span class="literal">\</span> to a right parenthesis. To label the parentheses with letters (placing the label after a left parenthesis and before a right parenthesis) so it looks like a multiplication problem, it might be easiest to do two passes through each string in the <span class="literal">Catalan</span> list. The first pass can change each slash to the appropriate parenthesis and add a placeholder symbol for a letter (the code in <a href="app01.xhtml#chAfig48">Figure A-48</a> uses a <span class="literal">+</span> symbol). The second pass can then replace each placeholder with the next unused letter in the alphabet.</p>&#13;
<div class="image"><img id="chAfig48" src="../images/pg227_Image_295.jpg" alt="Image" width="555" height="377"/></div>&#13;
<p class="figcap"><em>Figure A-48: Representing Catalan numbers with parentheses</em></p>&#13;
<p class="indent"><a href="app01.xhtml#chAfig49">Figure A-49</a> shows what the output would look like for a given input string.</p>&#13;
<div class="image"><img id="chAfig49" src="../images/pg227_Image_296.jpg" alt="Image" width="347" height="134"/></div>&#13;
<p class="figcap"><em>Figure A-49: The</em> <span class="codeitalic">pretty output</span> <em>variable substitutes letters for plus signs.</em></p>&#13;
<h4 class="h4a" id="app01lev69">Challenges 7.5 and 7.6</h4>&#13;
<p class="noindent">Let’s assume that a partition is presented as a string of summands connected by + signs, as we saw in the list shown in <a href="ch07.xhtml#ch7fig15">Figure 7-15</a>. We’ll also assume the summands are in increasing order. Since you need to look at each summand, the first step could be to change the string into a list of individual summands called <span class="literal">parts</span>. Then, you can define custom blocks to report Boolean values if the list has no even elements (say, <span class="literal">oddpartsQ</span>) and if the list has no duplicated elements (say, <span class="literal">distinctpartsQ</span>). The output might look like <a href="app01.xhtml#chAfig50">Figure A-50</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_208"/><img id="chAfig50" src="../images/pg228_Image_297.jpg" alt="Image" width="664" height="379"/></div>&#13;
<p class="figcap"><em>Figure A-50: Testing for all odd and all distinct summands</em></p>&#13;
<p class="indent">An interesting observation made by mathematician Leonhard Euler, the namesake of Project Euler, is that the number of partitions of <em>n</em> with only odd summands is the same as the number of partitions of <em>n</em> with all distinct summands.</p>&#13;
<h4 class="h4a" id="app01lev70">Challenge 7.7</h4>&#13;
<p class="noindent">Ramanujan made two other observations that are relevant here: the number of partitions of any number that is 5 more than a multiple of 7 is itself divisible by 7, and the number of partitions of any number that is 6 more than a multiple of 11 is itself divisible by 11. For example, <em>P</em>(19) = <em>P</em>(2 ⋅ 7 + 5) = 490, a multiple of 7, and <em>P</em>(17) = <em>P</em>(1 ⋅ 11 + 6) = 297, a multiple of 11.</p>&#13;
<h3 class="h3" id="app01lev71"><a href="ch08.xhtml"><span class="blue95">Chapter 8: Three Helpings of Pi</span></a></h3>&#13;
<h4 class="h4a" id="app01lev72">Challenge 8.1</h4>&#13;
<p class="noindent">The length of the perimeter of the inscribed triangle is equal to 3<img class="inline" src="../images/pg228_Image_299.jpg" alt="Image" width="29" height="21"/>, so we should take <em>b</em>, the lower bound, to be 3<img class="inline" src="../images/pg228_Image_299.jpg" alt="Image" width="29" height="21"/> / 2. The length of the perimeter of the circumscribed triangle is equal to 6<img class="inline" src="../images/pg228_Image_299.jpg" alt="Image" width="29" height="21"/>, so <em>a</em> should be half of that, or 3<img class="inline" src="../images/pg228_Image_299.jpg" alt="Image" width="29" height="21"/>. <a href="app01.xhtml#chAfig51">Figure A-51</a> shows these new starting values.</p>&#13;
<div class="image"><img id="chAfig51" src="../images/pg228_Image_298.jpg" alt="Image" width="409" height="134"/></div>&#13;
<p class="figcap"><em>Figure A-51: Starting values for the inscribed and circumscribed triangles</em></p>&#13;
<p class="indent">As <a href="app01.xhtml#chAfig52">Figure A-52</a> shows, running the program with these starting values does indeed produce the same results, from the second line on, as running it with starting values from hexagons.</p>&#13;
<div class="image"><img id="chAfig52" src="../images/pg228_Image_300.jpg" alt="Image" width="661" height="265"/></div>&#13;
<p class="figcap"><em>Figure A-52: The first few rows of output, starting from triangles</em></p>&#13;
<h4 class="h4a" id="app01lev73"><span epub:type="pagebreak" id="page_209"/>Challenge 8.2</h4>&#13;
<p class="noindent">All you need to do to choose random non-integer coordinates is change the two <span class="literal">set</span> blocks <span class="ent">➋</span> in <a href="ch08.xhtml#ch8fig11">Figure 8-11</a>. The updated blocks are shown in <a href="app01.xhtml#chAfig53">Figure A-53</a>.</p>&#13;
<div class="image"><img id="chAfig53" src="../images/pg229_Image_301.jpg" alt="Image" width="437" height="133"/></div>&#13;
<p class="figcap"><em>Figure A-53: Randomly choosing non-integer coordinates</em></p>&#13;
<p class="indent">Not only does the code still work with non-integers, but it also gives much better approximations of <em>π</em>.</p>&#13;
<h4 class="h4a" id="app01lev74">Challenge 8.3</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig54">Figure A-54</a> shows a loop to calculate a partial sum for the series up to a given number of terms.</p>&#13;
<div class="image"><img id="chAfig54" src="../images/pg229_Image_302.jpg" alt="Image" width="525" height="867"/></div>&#13;
<p class="figcap"><em>Figure A-54: Calculating partial sums for π<sup>2</sup>/6</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_210"/>There are two hacks to notice here. First, we’re using a custom block to calculate the <em>n</em>th term of the series <span class="ent">❶</span>. That makes it easy to adapt the code to study other series. In this case, the custom block calculates 1/<em>n</em><sup>2</sup>, as shown in <a href="app01.xhtml#chAfig55">Figure A-55</a>.</p>&#13;
<div class="image"><img id="chAfig55" src="../images/pg230_Image_303.jpg" alt="Image" width="398" height="180"/></div>&#13;
<p class="figcap"><em>Figure A-55: Calculating one term of the sum</em></p>&#13;
<p class="indent">The second hack is that once we’ve generated a list of <em>n</em> terms in the series, we find their sum by adding backward from the last term to the first <span class="ent">➋</span>. This is necessary because the series consists of decreasing terms, and some of the decimal places of the later terms might be wiped out if they were added to the sum of the prior (larger) terms.</p>&#13;
<p class="indent">If you run this program for increasingly more terms, you’ll approach the value of <em>π</em><sup>2</sup>/6, which is approximately 1.644934.</p>&#13;
<h4 class="h4a" id="app01lev75">Challenge 8.4</h4>&#13;
<p class="noindent">You can reuse the code from Challenge 8.3 that sums the first <em>n</em> terms in a series to solve this problem. You just need to define a different custom block for calculating each term, as shown in <a href="app01.xhtml#chAfig56">Figure A-56</a>.</p>&#13;
<div class="image"><img id="chAfig56" src="../images/pg230_Image_304.jpg" alt="Image" width="506" height="461"/></div>&#13;
<p class="figcap"><em>Figure A-56: Calculating one term of the sum for π/4</em></p>&#13;
<p class="indent">This time, the terms being added are odd integers, not squares, and the signs alternate from one term to the next. So you need to introduce a new variable, <span class="literal">sign</span>, that switches back and forth between <span class="literal">1</span> and <span class="literal">-1</span> for each term.</p>&#13;
<p class="indent">The value to aim for is about 0.785398, but alternating series are notoriously slow to converge, so it might take a while to get there. Multiplying this value by 4 gives an approximation of <em>π</em>.</p>&#13;
<h4 class="h4a" id="app01lev76"><span epub:type="pagebreak" id="page_211"/>Challenge 8.5</h4>&#13;
<p class="noindent">The series in Challenge 8.3 consistently reports the first three digits of <em>π</em> correctly after 202 terms. For the alternating series in Challenge 8.4, it takes 626 terms before the first three digits are stable.</p>&#13;
<h4 class="h4a" id="app01lev77">Challenge 8.6</h4>&#13;
<p class="noindent">Unlike in the random sampling code for <a href="ch08.xhtml#ch08lev6">Project 31</a>, you don’t have the option of using non-integer coordinates (see <a href="app01.xhtml#app01lev73">Challenge 8.2</a>) here because you need integers to calculate a GCD. You can still use the <span class="literal">pick random</span> block to generate random lattice points, though. The code in <a href="app01.xhtml#chAfig57">Figure A-57</a> has a loop using random choices of lattice point coordinates.</p>&#13;
<div class="image"><img id="chAfig57" src="../images/pg231_Image_305.jpg" alt="Image" width="690" height="942"/></div>&#13;
<p class="figcap"><em>Figure A-57: Randomly sampling lattice points</em></p>&#13;
<p class="indent">It gives approximations for <em>π</em> that are about as good as the exhaustive enumeration using the code in <a href="ch08.xhtml#ch8fig13">Figure 8-13</a>.</p>&#13;
<h3 class="h3" id="app01lev78"><span epub:type="pagebreak" id="page_212"/><a href="ch09.xhtml"><span class="blue95">Chapter 9: What Next?</span></a></h3>&#13;
<h4 class="h4a" id="app01lev79">Challenge 9.1</h4>&#13;
<p class="noindent"><a href="app01.xhtml#chAfig58">Figure A-58</a> shows a program that finds the sum of the multiples of any two numbers up to a limit.</p>&#13;
<div class="image"><img id="chAfig58" src="../images/pg232_Image_306.jpg" alt="Image" width="895" height="965"/></div>&#13;
<p class="figcap"><em>Figure A-58: Finding the sum of any two multiples</em></p>&#13;
<p class="indent">Instead of hardcoding the values of <span class="literal">3</span> and <span class="literal">5</span> into the program, as we did in <a href="ch09.xhtml#ch09lev3">Project 33</a>, here we take in two values from the user and reference them as the <span class="literal">first</span> and <span class="literal">second</span> variables.</p>&#13;
<h4 class="h4a" id="app01lev80">Challenge 9.2</h4>&#13;
<p class="noindent">You might think you can just multiply the two numbers together to get the correction, but that won’t work if the numbers aren’t relatively prime. Instead, you need to find the least common multiple (LCM) of the two numbers (which for relative primes happens to be the equivalent of their product). Calculating the LCM <span epub:type="pagebreak" id="page_213"/>is easy using our <span class="literal">gcd</span> code from <a href="ch02.xhtml#ch02lev14">Project 9</a> (<a href="ch02.xhtml#ch2fig17">Figure 2-17</a>), since the LCM of <em>b</em> and <em>a</em> is the product of <em>b</em> and <em>a</em> divided by their GCD, as we noted in <a href="ch03.xhtml#ch03">Chapter 3</a>.</p>&#13;
<p class="indent"><a href="app01.xhtml#chAfig59">Figure A-59</a> shows an updated program that sums the multiples of any two numbers using the triangular number trick and the LCM for inclusion–exclusion.</p>&#13;
<div class="image"><img id="chAfig59" src="../images/pg233_Image_307.jpg" alt="Image" width="893" height="949"/></div>&#13;
<p class="figcap"><em>Figure A-59: Summing the multiples of any two numbers</em></p>&#13;
<p class="indent">We use a custom <span class="literal">lcm</span> block, which first calls our trusty <span class="literal">gcd</span> block and then calculates the LCM based on the result.</p>&#13;
<h4 class="h4a" id="app01lev81">Challenge 9.3</h4>&#13;
<p class="noindent">If the multiples are <em>a</em>, <em>b</em>, and <em>c</em>, first add the multiples of <em>a</em>, <em>b</em>, and <em>c</em> separately, then subtract the multiples of <em>a</em> ⋅ <em>b</em>, <em>a</em> ⋅ <em>c</em>, and <em>b</em> ⋅ <em>c</em>. Finally, add the multiples of <em>a</em> ⋅ <em>b</em> ⋅ <em>c</em> back in.<span epub:type="pagebreak" id="page_214"/></p>&#13;
</div>
</div>
</body></html>