- en: '**9**'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**ZOMBIE DISTRACTORS**'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f0001-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
- en: It doesn’t take much to fool a zombie so you can make a quick escape (see [Figure
    9-1](ch09.html#ch09fig1)). They are rather lacking in brains, after all. The projects
    in this chapter are designed to draw zombies’ attention away from you using flashes
    of light, loud sounds, and decoy movements. Imagine you have a herd of zombies
    lurching around the garage door but you need to get to your last remaining car
    battery. These distractors will allow you to draw the zombies away from the door
    or even lure them into a fatal zombie trap, perhaps involving fire and a big hole
    in the ground.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: The first project uses flash units from disposable cameras to produce a disorienting
    series of flashes to confuse the zombies. The second project uses sound and movement
    to attract the zombies’ attention. Build these projects and affix them to key
    locations in your base so you can direct zombies away from you.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-01.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-1: Smile please!'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: '**PROJECT 15: ARDUINO FLASH DISTRACTOR**'
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This flash distractor combines an Arduino and old disposable cameras to produce
    a timed series of flashes that will confound your brain-hungry foes. Proprietors
    of old-fashioned photo developer stores are often happy for you to take armfuls
    of used disposable film cameras off their hands. This is especially true if the
    proprietors are the animated deceased. They might appear to grumble at you, but
    I assure you, whatever groaning noises they make are entirely coincidental.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 9-2](ch09.html#ch09fig2) shows the completed zombie flash distractor
    with three salvaged single-use flash cameras, modified to allow the flashes to
    be triggered by an Arduino. The three cameras are taped together as a block with
    all the flashes pointing outward.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-02.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-2: The completed zombie flash distractor'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: The three flash modules are arranged so that each one points at a right angle
    to every other, giving 270 degrees of coverage. You will need a separate Arduino
    for this project as you will not want to position this right next to your control
    center.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: '**WARNING**'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: If you have a pacemaker or heart problems, or if flashing lights give you seizures,
    do not build this project.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: '**WARNING: HIGH VOLTAGES AND BRIGHT FLASHES**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: 'Flashguns in disposable cameras operate at up to 400V DC. If you want to avoid
    an unpleasant shock, exercise extreme caution when taking the cameras apart and
    handling the flash modules. Many parts of the module will be at high voltage and
    can remain so for hours or even days. Before using the modules, make sure to follow
    the instructions in “[Step 3: Make the Camera Safe](ch09.html#ch00lev1sec161)!”
    on [page 163](ch09.html#page_163) to safely discharge the capacitor.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '**WHAT YOU WILL NEED**'
  id: totrans-17
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To make this project, you will need the following parts:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: '| **ITEMS** | **NOTES** | **SOURCE** |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) Relay shield | 4-channel relay shield | eBay,
    [http://www.sainsmart.com/](http://www.sainsmart.com/) |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) Disposable cameras | 3 used disposable flash
    cameras | Photo store |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) 9V battery | PP3 type 9V battery, or larger
    9V or 12V battery pack | Hardware store |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) 9V Arduino battery lead | DC power jack to
    9V battery clip adapter | Adafruit (80), eBay |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) Double-core wire | Three 6-inch (15 cm) lengths
    of bell wire or other double-core wire | Hardware store, scavenge |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) Gaffer or electrical tape |  | Auto parts store
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
- en: '| ![image](graphics/square.jpg) 100 Ω resistor | For discharging the camera’s
    flash capacitor | Mouser (293-100-RC) |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
- en: There are few uses for spent disposable cameras and a store’s only alternative
    is to pay for someone to take them away, so if you ask store owners nicely, they
    may give you a stack for free.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: Along with a perfectly fine flash module, each camera will generally have an
    almost unused AA or AAA battery. Try to get a set of cameras that are similar
    to each other, ideally cameras of the same make. (In the bag of cameras I took
    away, the most common brand was Fuji, so I based the project on that design. However,
    the instructions should be sufficiently general to work with any disposable camera.)
    Also, find cameras that have a switch that turns the flash on for multiple photos,
    not the sort that make you press the flash button between each shot. For example,
    look at the camera at the front of [Figure 9-2](ch09.html#ch09fig2). It has a
    kind of lever that keeps the flash turned on (bottom center of the figure).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: The relay shield was bought on eBay, and when you attach it to the Arduino,
    it connects a relay to Arduino pins 4, 5, 6, and 7\. If you end up with a slightly
    different relay shield, just check which digital Arduino pins it uses and make
    the necessary changes in the Arduino sketch (see “[Software](ch11.html#ch00lev1sec215)”
    on [page 166](ch09.html#page_166)).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: The 100 Ω resistor is used to discharge the large, high-voltage capacitor used
    in the flash module to avoid the risk of electric shocks. It plays no other part
    in the build.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: '**CONSTRUCTION**'
  id: totrans-33
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[Figure 9-3](ch09.html#ch09fig3) shows the wiring involved in this project.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-03.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-3: The flash distractor, spread out'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: Each of the disposable cameras has a short length of double-core wire leaving
    one side of its case. These wires connect to the switch contact inside the camera
    that is used to trigger the flash. I’ll describe how to create this setup for
    one camera in construction Steps 2 to 5, and you’ll need to repeat those steps
    for all three cameras.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: Each pair of leads connects to one pair of relay contacts on the shield so that
    the Arduino can trigger each flash independently.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: Each camera also has its own AA or AAA battery that powers the flash, while
    the Arduino and relay shield are powered from a 9V battery connected to the DC
    barrel jack of the Arduino. This makes the project completely portable, so you
    can place it wherever needed to create a distraction that lets you escape.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 1: SORT THE CAMERAS**'
  id: totrans-40
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: First, sort your bag of cameras by type. To make this project simpler to build,
    try to pick out three identical cameras. The modules I used were all Fujifilm,
    though the branding on the cardboard covers differed.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '**WARNING**'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Do not try out the Flash of the camera at this stage! It will charge the camera’s
    capacitor, and you’ll get shocked later when you lever the camera body apart with
    your fingers. seriously, this really hurts!
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 2: REMOVE THE TOP CASING FROM A CAMERA**'
  id: totrans-44
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Used cameras may have already been partly disassembled when the photo processor
    removed the 35mm film canister. The processors do this quickly rather than tidily,
    so there’ll probably be cardboard and bits of plastic hanging off. [Figure 9-4](ch09.html#ch09fig4)
    shows the steps involved in taking a camera case apart.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-04.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-4: Disassembling a camera'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: You are at risk of shock during this step, so take care not to touch the circuit
    board or any contacts or wires within the camera.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: First, remove the cardboard from the camera body ([Figure 9-4](ch09.html#ch09fig4)a).
    Next, use a flathead screwdriver with a plastic handle (to provide insulation
    from shock) to lever apart the plastic catches holding the two halves of the camera
    body together. Remove the front half of the camera case, exposing the PCB and
    lens ([Figure 9-4](ch09.html#ch09fig4)b). Now remove the lens assembly. Break
    it off if you have to; it’s not needed anymore. This will expose the two contacts
    shown circled in [Figure 9-4](ch09.html#ch09fig4)c, which fire the flash when
    they are touched together.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 3: MAKE THE CAMERA SAFE!**'
  id: totrans-50
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Before you have rendered the camera module safe, treat it the same way you would
    a small but vicious rodent. Don’t handle it directly. If you need to move it around
    or flip it over, poke it with something like a plastic pen. Otherwise, you might
    injure yourself, and you need to be in top condition to stay ahead of the zombies.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: Identify the flash module’s capacitor. The capacitor will be a large metallic
    cylinder with two leads connecting it to the PCB. The capacitor stores all the
    energy that is rapidly discharged into the flash to set it off. In [Figure 9-5](ch09.html#ch09fig5),
    the entire flash module has been removed from the camera body to make it easier
    to see the capacitor, but follow the capacitor discharge steps below without removing
    the whole PCB if you can.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-05.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-5: Discharging the capacitor'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: To discharge the flash module’s capacitor, bend the legs of your 100 Ω resistor
    so they are roughly as far apart as the legs of the capacitor. Gently grip the
    body of the resistor with pliers (with insulated handles) and touch the resistor
    leads across the capacitor leads. If the capacitor is charged, there will probably
    be a very small spark. Hold the resistor in place for a second or so to make sure
    the capacitor actually discharges.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: Now, check whether the capacitor is empty by measuring the voltage with your
    voltmeter set to its maximum DC voltage range. (The voltage range needs to be
    500V or more.) It doesn’t matter if there are a few volts left in the capacitor,
    but if you see more than 10V, then discharge it a bit longer with the resistor.
    Once the voltage is below 10V, it is safe for you to handle the PCB without fear
    of electrical shock.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 4: ATTACH LEADS TO THE TRIGGER CONTACTS**'
  id: totrans-57
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Solder about 6 inches (15 cm) of double-core wire to the flash contacts, as
    shown in [Figure 9-6](ch09.html#ch09fig6). In the camera I used, there was a handy
    plastic peg that allowed the two contacts to be kept well apart. If this is not
    the case for your camera, then you may need to wrap the soldered contacts in electrical
    insulating tape or put heatshrink over the contacts to keep them apart.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-06.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-6: Leads soldered to the trigger contacts'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 5: REASSEMBLE AND TEST THE MODIFIED FLASH MODULE**'
  id: totrans-61
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Fit the front cover of the camera back on, allowing the double-core wire to
    escape through one side of the camera. If you need more space to snake the wires
    out, use a pair of diagonal cutters to cut a hole in the plastic cover.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: Test this flash before repeating the procedure for the other two cameras. The
    trigger contacts of these cameras are sometimes at 400V, so for safety, use a
    screwdriver with an insulated handle.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: Turn on the flash switch for the camera. You should see a charging light or
    LED come on. The camera will probably make a whining noise as the flash charges.
    This sound is created by the capacitor filling up. When you think the charging
    is complete (or after, say, 10 seconds), use the screwdriver to connect the two
    trigger leads, as shown in [Figure 9-7](ch09.html#ch09fig7).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: The camera should flash when you connect the leads with the screwdriver. Hurray!
    That’s one camera ready for action. Before moving on to Step 6, repeat Steps 2
    through 5 for the other two cameras.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-07.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-7: Testing the modified camera'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 6: CONNECT THE CAMERAS TO THE RELAY SHIELD**'
  id: totrans-68
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Fit the relay shield onto your Arduino, making sure that all the pins of the
    shield engage properly with the sockets on the Arduino.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 9-8](ch09.html#ch09fig8) shows how the cameras are wired up to the
    relay shield.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-08.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-8: Attaching leads from the cameras to the relay shield’s trigger
    contacts'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: 'Each relay on the relay shield has three screw terminals: NO, COM, and NC.
    When the relay is not activated, the terminals NC and COM are connected, but when
    the relay is activated, COM becomes connected to NO. This means that the leads
    to each camera need to go into the COM and NO connections of each relay. It does
    not matter which way around the leads go.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: When your cameras are connected to their relays, attach the battery clip–to–barrel
    jack adapter to the Arduino, as shown in [Figure 9-9](ch09.html#ch09fig9).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-09.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-9: Attaching the battery lead to the Arduino'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: Before attaching the battery itself, however, you need to upload the software
    for the project, so you may as well power the Arduino from the USB lead while
    you program it.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: '**SOFTWARE**'
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: All the source code for this book is available at *[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*.
    Visit the link provided there and download the code now, if you’ve not done so
    already. See [Appendix C](app03.html#app03) for instructions on how to install
    the Arduino sketch.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: The Arduino sketch for this project is called *Project_15_Flasher*, and it’s
    in the source file directory of the same name. I’ll walk you through this sketch
    now.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: 'To begin, we define a constant integer array, `flashPins`:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `flashPins` array defines the Arduino pins used to trigger each of the flash
    modules. Change these pin numbers if your relay shield uses different pins to
    control the relays.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we define two more constants, which you can alter to adjust the zombie
    distractor:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `overallDelay` constant determines how many seconds elapse between each
    flashing cycle. This value is set to 20 seconds by default. Note, this delay needs
    to be long enough to enable the capacitor inside the camera to recharge.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: The `delayBetweenFlashes` value sets the gap between each of the flashes being
    triggered in a cycle. This is set to one second by default. Note that both constants
    are `long` rather than `int`. That’s because `int` constants have a maximum value
    of +/–32,767, which would give a maximum delay of 32.767 seconds; that might not
    be long enough to keep a zombie distracted while you escape. Fortunately, the
    `long` data type has a maximum value of over +/–2,000,000\. You can run a long
    way in 2,000 seconds!
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: 'Now we add a `setup` function:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The `setup` function sets all the relay pins to be digital outputs.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: 'With the `pinMode` functions in place, we add a short `loop` function:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This `loop` function calls the `flashCircle` function and waits for `overallDelay`
    *seconds* before starting the whole process again.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s look at the `flashCircle` function definition now:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This function loops over the flash pins and gives each a `HIGH` pulse for 200
    milliseconds, setting off the flash. There is then a pause before the next flash,
    set by `delayBetweenFlashes`. The value of `delayBetweenFlashes` is multiplied
    by 1,000 because in Arduino, the `delay` function’s parameter is in milliseconds.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '**USING THE FLASH DISTRACTOR**'
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用闪光干扰器**'
- en: Before you tape together all the parts of the flash distractor, test it with
    the parts laid out as shown in [Figure 9-3](ch09.html#ch09fig3). Turn on the flash
    switches of each camera and attach the 9V battery to the battery clip. The flash
    units should flash in turn, before pausing for 20 seconds and then repeating the
    cycle.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在将干扰器的所有部件粘合在一起之前，按照图 9-3](ch09.html#ch09fig3)所示，将部件铺开进行测试。打开每个相机的闪光开关，并将9V电池连接到电池夹上。闪光单元应该依次闪烁，然后暂停20秒，再重复这个周期。
- en: When you know your Arduino can activate the flashes, tape everything together,
    or if you prefer, stick the cameras together with a hot glue gun. Make sure to
    leave yourself access to the cameras’ battery compartments so you can change the
    batteries.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当你确定Arduino能够启动闪光时，将所有部件粘合在一起，或者如果你更喜欢的话，也可以用热熔胶枪将相机粘在一起。确保你能够方便地更换相机的电池。
- en: The small 9V battery that powers the Arduino will probably last about four or
    five hours. If you need to power the distractor for longer, then [Figure 9-10](ch09.html#ch09fig10)
    shows some other options.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 为Arduino供电的小型9V电池大约能持续四到五小时。如果你需要让干扰器工作更长时间，图 9-10](ch09.html#ch09fig10)展示了一些其他选择。
- en: '![image](graphics/f09-10.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-10.jpg)'
- en: 'Figure 9-10: Options for powering the Arduino'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-10：为Arduino供电的选项
- en: A 6 × AA battery holder will last around 10 times as long as the PP3 9V battery,
    but for the ultimate battery duration, you can use one of your car batteries with
    the cigarette lighter–to–barrel jack adapter shown on the left of [Figure 9-10](ch09.html#ch09fig10).
    However, the AA batteries in the cameras won’t last more than a few hundred flashes
    before they need replacing, so if you plan to reuse your distractors—as you might
    if you’re in a zombie-rich neighborhood—keep an extra set of batteries on you.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 一个6 × AA电池座的使用寿命大约是PP3 9V电池的10倍，但为了获得最长的电池使用时间，你可以使用车载电池并配合图 9-10](ch09.html#ch09fig10)左侧展示的打火机–到–桶形插座适配器。然而，相机中的AA电池在闪光几百次后就需要更换，所以如果你计划重新使用你的干扰器——如果你正处于僵尸遍布的街区——记得随身携带额外的电池。
- en: I suggest you stockpile a few flash distractors and always keep one complete
    unit in your bag when you venture out for supplies or reconnaissance. Then, if
    there’s a mob of zombies between you and that grocery store you want to scavenge
    from, just set up the distractor, wait out of sight as it draws the zombies, and
    when the coast is clear, make a stealthy dash for the doors.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议你储备一些闪光干扰器，并始终在外出采购或侦察时随身携带一整套设备。如果有一群僵尸挡住了你去杂货店的路，那么只需设置好干扰器，躲在视线之外，让它吸引僵尸，等情况清晰时，再悄悄冲向门口。
- en: You might want to use the flash distractor in combination with the next project
    to maximize your ability to distract the undead.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能希望将闪光干扰器与下一个项目结合使用，以最大限度地发挥干扰僵尸的能力。
- en: '**NOTE**'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: 'This project has no on/off switch, so when you are not using it, unplug the
    9V battery and turn off the flash switches on the cameras. You could also use
    an in-line power switch like this: [https://www.adafruit.com/products/1125/](https://www.adafruit.com/products/1125/).'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目没有开关，因此当你不使用时，请拔掉9V电池并关闭相机上的闪光灯开关。你也可以使用像这样的直通电源开关：[https://www.adafruit.com/products/1125/](https://www.adafruit.com/products/1125/)。
- en: '**PROJECT 16: ARDUINO MOVEMENT AND SOUND DISTRACTOR**'
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目 16：Arduino 运动与声音干扰器**'
- en: 'Remember the smoke alarm that we used to make “[Project 11: Quiet Fire Alarm](ch07.html#ch00lev1sec121)”
    on [page 120](ch07.html#page_120)? In this project, we’ll use the piezo buzzer
    we removed from that smoke alarm, along with a waving flag powered by a servo
    motor, to make a lot of distracting noise and movement.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 记得我们用来制作“[项目 11：安静的火灾警报器](ch07.html#ch00lev1sec121)”的烟雾警报器吗？它位于[第120页](ch07.html#page_120)。在这个项目中，我们将使用从该烟雾警报器中取出的压电蜂鸣器，并配合由伺服电机驱动的挥舞旗帜，制造大量干扰性噪音和运动。
- en: '[Figure 9-11](ch09.html#ch09fig11) shows the project in action. Next to the
    project, I’ve shown a coiled cigarette lighter adapter, which you can use as an
    alternative to the AA battery pack if you want to power the setup from a car battery
    for long-term usage.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 9-11](ch09.html#ch09fig11)展示了该项目的实际应用。在项目旁边，我展示了一个卷曲的打火机适配器，如果你希望从车载电池为系统提供电力以供长期使用，可以使用它替代AA电池组。'
- en: '![image](graphics/f09-11.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-11.jpg)'
- en: 'Figure 9-11: Sound and movement in disharmony'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-11：声音与运动的不和谐
- en: '**WHAT YOU WILL NEED**'
  id: totrans-113
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**所需材料**'
- en: 'To make this project, you will need the following parts:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 为了制作这个项目，你需要以下部件：
- en: '| **ITEMS** | **NOTES** | **SOURCE** |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| **项目** | **备注** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) Arduino Uno | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
- en: '| ![image](graphics/square.jpg) 6 × AA battery holder | 9V battery pack | Adafruit
    (248) |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 6 × AA 电池座 | 9V 电池组 | Adafruit (248) |'
- en: '| ![image](graphics/square.jpg) 9V Arduino battery lead | DC power jack-to-9V
    battery clip adapter | Adafruit (80), eBay |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 9V Arduino 电池线 | 直流电源插座到 9V 电池夹适配器 | Adafruit
    (80), eBay |'
- en: '| ![image](graphics/square.jpg) Jumper wires | 3 long male-to-male jumper wires
    | Adafruit (760) |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 跳线 | 3 根长的公对公跳线 | Adafruit (760) |'
- en: '| ![image](graphics/square.jpg) 100 Ω Resistor | 2W or 1/4W | Mouser (594-5083NW100R0J
    or 293-100-RC) |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 100 Ω 电阻 | 2W 或 1/4W | Mouser (594-5083NW100R0J
    或 293-100-RC) |'
- en: '| ![image](graphics/square.jpg) Pin header | 2-way pin header | Adafruit (392),
    eBay |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 排针 | 2 针排针 | Adafruit (392), eBay |'
- en: '| ![image](graphics/square.jpg) Servo motor | Small or standard | Adafruit
    (155 or 196), eBay, hobby store |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 伺服电机 | 小型或标准 | Adafruit (155 或 196), eBay,
    爱好商店 |'
- en: '| ![image](graphics/square.jpg) Buzzer | Discarded from the smoke detector
    of Project 11 or another high-volume buzzer | Security store, smoke alarm |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 蜂鸣器 | 从项目 11 的烟雾探测器中丢弃或其他高音量蜂鸣器 | 安全商店，烟雾报警器
    |'
- en: '| ![image](graphics/square.jpg) Wooden upright (a post or rod) |  | Hardware
    store |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 木制立柱（支柱或杆） |  | 五金店 |'
- en: '| ![image](graphics/square.jpg) Base | Wood or plastic, for attachment of the
    upright | Hardware store |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 底座 | 木材或塑料，用于固定立柱 | 五金店 |'
- en: '| ![image](graphics/square.jpg) Wooden food skewer and paper | To make a flag
    | Household items |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 木制食品串和纸 | 用于制作旗帜 | 家庭用品 |'
- en: 'The power for this project is supplied through the Arduino barrel jack. The
    same power options as used in “[Project 15: Arduino Flash Distractor](ch09.html#ch00lev1sec156)”
    on [page 158](ch09.html#page_158) also apply to this project.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目的电源通过 Arduino 圆筒插孔供电。与 “[项目 15：Arduino 闪光干扰器](ch09.html#ch00lev1sec156)”
    第158页中使用的电源选项相同，也适用于本项目。
- en: If you just want to wave a small, lightweight flag like the one shown in [Figure
    9-11](ch09.html#ch09fig11), a small servo motor will work just fine, but for something
    bigger, use a standard servo. Just be aware that if you use a bigger servo, you
    may find that your Arduino resets because of voltage drops caused by the load
    of the bigger motor. In this case, you can power the servo from a separate 6V
    battery pack as described at *[http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/](http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/)*.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你只想挥舞一个像 [图 9-11](ch09.html#ch09fig11) 中显示的小型轻量旗帜，那么小型伺服电机就能很好地工作；但对于更大的旗帜，使用标准伺服电机。只需注意，如果使用较大的伺服电机，可能会因为较大电机的负载导致电压下降，从而使
    Arduino 重启。在这种情况下，你可以按照 *[http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/](http://communityofrobots.com/tutorial/kawal/how-connect-servo-arduino/)*
    上的说明，使用单独的 6V 电池组为伺服电机供电。
- en: 'Also note that while this project is intended to use the buzzer removed from
    the smoke detector of “[Project 11: Quiet Fire Alarm](ch07.html#ch00lev1sec121)”
    on [page 120](ch07.html#page_120), you can also just use a new buzzer.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 还需注意，尽管本项目计划使用从 “[项目 11：安静的火灾报警器](ch07.html#ch00lev1sec121)” 第120页中的烟雾探测器中取出的蜂鸣器，但你也可以使用一个新的蜂鸣器。
- en: '**CONSTRUCTION**'
  id: totrans-131
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建**'
- en: '[Figure 9-12](ch09.html#ch09fig12) shows the wiring diagram for the project.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 9-12](ch09.html#ch09fig12) 展示了该项目的接线图。'
- en: '![image](graphics/f09-12.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f09-12.jpg)'
- en: 'Figure 9-12: Wiring diagram for the distractor'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9-12：干扰器的接线图
- en: The male-to-male jumper wires in the supply list will link the servo motor,
    which terminates in a three-way socket, to the Arduino. You’ll connect the resistor
    and one buzzer lead to a pair of header pins so that you can plug the buzzer into
    the Arduino, too.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 供电清单中的公对公跳线将把伺服电机连接到 Arduino，伺服电机末端是一个三孔插座。你还将把电阻器和一个蜂鸣器引线连接到一对排针，以便将蜂鸣器也插入到
    Arduino。
- en: '**STEP 1: REMOVE THE PIEZO BUZZER FROM THE SMOKE ALARM COVER**'
  id: totrans-136
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 1：从烟雾报警器外壳中取出压电蜂鸣器**'
- en: The smoke alarm’s buzzer may be integrated into the smoke alarm cover. In that
    case, don’t try to remove the buzzer; you can use it while it’s still attached
    to the cover, or you can just scavenge a different buzzer. If the buzzer looks
    like it will come away, then remove it as shown in [Figure 9-13](ch09.html#ch09fig13)
    to make the project a little more compact.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-13.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-13: Removing the buzzer from the smoke alarm cover'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 2: SOLDER THE HEADER PINS, BUZZER, AND RESISTOR**'
  id: totrans-140
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'Check your buzzer: you only need two buzzer leads, so if it has three, see
    “[Project 11: Quiet Fire Alarm](ch07.html#ch00lev1sec121)” on [page 120](ch07.html#page_120)
    to work out which two of the three leads you need.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: Once you have that cleared up, solder the 100 Ω resistor to one buzzer lead—it
    doesn’t matter which one. Solder the other end of the resistor to one of the header
    pins and the other buzzer lead to the other header pin. You may wish to strengthen
    these soldered connections using heatshrink (see “[Using Heatshrink](app02.html#ch00lev1sec230)”
    on [page 235](app02.html#page_235)) or electrical tape. These connections are
    shown in [Figure 9-14](ch09.html#ch09fig14).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-14.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-14: Soldering the buzzer, resistor, and header pins'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 3: TEST THE PIEZO SOUNDER**'
  id: totrans-145
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Before we go further, we’ll test the buzzer using the USB connection to power
    the Arduino. This step will help us find the optimum frequency of the buzzer to
    make it as loud as possible.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
- en: Plug the header pins into the Arduino pins 8 and 9\. It does not matter which
    way around the pins are ([Figure 9-15](ch09.html#ch09fig15)).
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-15.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-15: Connecting the buzzer to the Arduino'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: If you haven’t downloaded all of this book’s programs yet, go to *[https://www.nostarch.com/zombies/](https://www.nostarch.com/zombies/)*
    and download the *Project_16_Sounder_Test* Arduino sketch. Load this sketch onto
    your Arduino and then open the serial monitor ([Figure 9-16](ch09.html#ch09fig16)).
    This is not the final sketch for the project; it’s just a test sketch that will
    let us find the best frequency value to use in the main sketch.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-16.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-16: Setting the frequency using the serial monitor'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: In the input field, enter 4000 and click **Send**—this number is the frequency
    of the sound your buzzer will emit. You should hear a very loud sound at that
    frequency for a second. Try entering different frequency values to find the one
    that gives the highest volume; it will probably be around `4000`.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: To reduce the strain on your ears, you can turn the buzzer over or cover the
    hole where the sound emerges to muffle the volume. When you have found the optimum
    frequency, make a note of the value.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: This is definitely something to do when there are no zombies around.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: '**PIEZO BUZZERS**'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: Piezo buzzers (also called sounders) contain crystals that change shape when
    a current is passed through them. The current changes hundreds of times per second,
    and as the crystals change shape, sound waves are produced. Although you can drive
    a piezo buzzer by connecting one lead to GND and supplying a signal to the other
    lead, you get a higher volume by using two Arduino outputs to completely reverse
    the polarity of the buzzer with each cycle. [Figure 9-17](ch09.html#ch09fig17)
    shows how this works.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-17.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-17: Generating an alternating voltage on the piezo buzzer with an
    Arduino. Pins A and B are outputs on the Arduino.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: When one Arduino output is high, the other is low and vice versa. This complete
    reversal of the polarity across the piezo buzzer effectively allows a 10V peak
    swing of voltage across the buzzer rather than the 5V obtainable from just switching
    one pin.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
- en: Your distractor will not be as loud as the original smoke detector, which typically
    uses the same trick but with 9V rather than 5V. However, it should be pretty loud.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 4: MAKE A FLAG**'
  id: totrans-163
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: My distractor waves a flag, but yours doesn’t have to. Once you have the servo
    moving, you can attach pretty much anything that will attract the attention of
    zombies. Try a scrap of rotting meat to get a good zombie-attracting scent going,
    or if your servo is powerful enough, you might salvage a severed hand for a more
    realistic human distraction.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Assuming that you just want to wave a flag, the simple arrangement from [Figure
    9-11](ch09.html#ch09fig11) uses a piece of paper folded and glued to a wooden
    kebab skewer.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 5: ATTACH THE FLAG TO THE SERVO MOTOR**'
  id: totrans-166
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Servo motors generally come with a range of arms and a retaining screw to fix
    the arm in place on the motor. In this project, I chose the wheel fixture and
    glued the skewer to it with strong epoxy glue ([Figure 9-18](ch09.html#ch09fig18)).
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-18.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-18: Attaching the flag to the servo'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: Don’t fit the servo motor’s retaining screw just yet, as you will need to adjust
    the position of the servo arm to accommodate the range of movement (around 160
    degrees) once the whole project is up and running.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 6: ATTACH THE SERVO MOTOR TO A BASE**'
  id: totrans-171
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: For an upright to attach to the servo motor, I’ve used a length of wood. To
    attach the servo, cut a little notch in the wood to fit the servo using a wood
    saw or small electric hobby cutter. Then use the servo mounting holes and some
    small screws to fix the servo in place.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: As an exercise in ingenuity, I’ll leave it up to you to find the best way to
    attach your servo to your upright. Here, I used a small piece of scrap aluminum
    to hold the servo in the notch. Epoxy glue would also work.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: Now, attach the upright to a base. I drilled a hole in the underside of a flat
    piece of acrylic and attached the wooden upright with a screw. You may prefer
    to fix the upright directly to some existing structure, rather than using a freestanding
    arrangement. (Again, I’ll leave the details to your discretion.)
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: I used the Arduino mounting holes and two more screws to fix the Arduino to
    the upright as well, but this is entirely optional. Similarly, I stuck the buzzer
    onto the upright with some glue ([Figure 9-19](ch09.html#ch09fig19)).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: '![image](graphics/f09-19.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-19: Attaching the Arduino and buzzer to the upright'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: '**STEP 7: CONNECTING THE SERVO**'
  id: totrans-178
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'Servo motors have leads with three connections that terminate in a single three-hole
    socket: the black or brown lead is the ground connection, the red lead is the
    positive power supply, and the third orange or yellow lead is the control signal.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: 'To begin wiring, plug the three male-to-male header leads into the servo’s
    three-hole socket. Run the orange (or yellow) control lead of the servo to pin
    10 of the Arduino. Run the black (or brown) ground lead to one of the GND terminals
    on the Arduino. Finally, connect the red positive supply of the servo to the 5V
    Arduino pin. Remember: if you are using a large servo, you will probably need
    an external 6V battery pack, as discussed in “[What You Will Need](ch11.html#ch00lev1sec207)”
    on [page 170](ch09.html#page_170).'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: '**SOFTWARE**'
  id: totrans-181
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: All the source code for this book is available from *[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*,
    and the Arduino sketch for this project is called *Project_16_sound_ movement*.
    Download it now and load it onto your Arduino. If you need a refresher on how,
    follow the directions in [Appendix C](app03.html#app03).
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: Servos are often used with Arduinos, so there is a built-in library that makes
    them easy to use together. We import this library at the top of the sketch.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Three constants define the behavior of the servo, and tweaking the values of
    these constants will alter the servo’s actions:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Servos have a range of movement of 180 degrees. The constants `minServoAngle`
    and `maxServoAngle` restrict this range between 10 and 170 degrees rather than
    the full 0 to 180 degrees, because most servos struggle to cover the full 180
    degrees.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
- en: The constant `stepPause` sets the delay in milliseconds between each movement
    of the servo. If you really want to grab a zombie’s attention, reduce this number
    to make the servo move more quickly.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: In the next section of code, we define constants for each Arduino pin used.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'A final constant called `f` specifies the buzzer frequency:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Set `f` to your buzzer’s loudest frequency, which you should have noted in
    “[Step 3: Test the Piezo Sounder](ch09.html#ch00lev1sec172)” on [page 173](ch09.html#page_173).'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, to use the servo library, we define a `Servo` object called `arm`:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'With all the constants and global variables defined, we add a `setup` function
    to initialize the servo and define the two pins used for the buzzer:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The `loop` function that follows calls two functions to wave the flag and to
    sound the buzzer:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The `wave` function is called twice to waggle the flag back and forth. In case
    a bit of movement isn’t enough to catch a zombie’s attention, `makeNoise` is also
    called to sound the buzzer. With any luck, the zombies will mistake the noises
    and movement for something with a brain and will head straight for the distraction!
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: 'At the end of the sketch, define the functions that cause the distractions:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The `wave` function contains two loops: one loop moves the servo from its minimum
    to its maximum angle at the preselected speed, and the second loop does the reverse.'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let’s look at `makeNoise`:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: This function contains a loop that calls the `beep` function five times for
    five beeps of the buzzer. The parameter to `beep` is the duration of the sound
    in milliseconds (in this case, 500). Between each beep there is a delay of one
    second (1000 milliseconds).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: If using the same values all the time causes local zombies to become immune
    to your distractor’s effects, try tweaking the numbers you pass to beep and delay.
    You could even randomize the values, using Arduino’s random() function.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: 'The `beep` function itself generates the AC signal on the two buzzer pins:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: First, we calculate the period of each oscillation ➊ using the frequency `f`.
    The resulting value must be further divided by 2 ➋, because what we really want
    is the duration of delay between swapping the polarity of the pins, and we need
    two such delays for a complete oscillation.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: Using that divided period, the `beep` function calculates the total number of
    cycles needed to produce a beep of the correct duration. The `for` loop that follows
    uses this information to generate the pulses that are needed.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: '**USING THE SOUND AND MOVEMENT DISTRACTOR**'
  id: totrans-213
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Both of the projects in this chapter need to be kept dry. To weatherproof the
    sound and movement distractor, you might craft some kind of housing or protective
    roof shelter. If your build is freestanding, a large plastic bin with a lid could
    do the trick. I’m sure you can scavenge one from the nearest abandoned discount
    retail store.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
- en: 'Just cut off one side of the bin so the zombies can see and hear the distractor,
    affix the project itself to the lid, and snap the bin on top, upside down. Attach
    this box to a lever and pulley system, and you could even lower it to the ground
    from the safety of your base, creating a new sport: zombie fishing. Who says you
    can’t have fun during an apocalypse?'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: 'Of course, the sound and movement distractor has many practical postapocalyptic
    uses, too:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: • Place it opposite the most vulnerable point in your stronghold to draw away
    attacking zombie hordes and give you time to reinforce your bunker.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
- en: • Plant it by your zombie pit to draw them into the trap.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
- en: • Sneak it into your neighbor’s yard to thin out the competition for survivor
    salvage.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: In case you want to find other survivors (whether to join forces or avoid them),
    in the next chapter, we’ll look at using wireless technology to communicate.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
