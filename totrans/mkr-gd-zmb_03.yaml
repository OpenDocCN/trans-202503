- en: '**3**'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**3**'
- en: '**USING ELECTRICITY**'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**使用电力**'
- en: '![image](graphics/f0001-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f0001-01.jpg)'
- en: Now that you have a neat row of car batteries all charged up and ready to use,
    it’s time to use them to improve your standard of living (see [Figure 3-1](ch03.html#ch03fig1)).
    First, you’ll learn how to connect those batteries to something useful, and then
    in this chapter’s first project, you’ll build a simple lighting circuit.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经准备好一排整齐的汽车电池，并且它们都已经充满电，可以开始使用它们来提高你的生活水平（请参见[图 3-1](ch03.html#ch03fig1)）。首先，你将学习如何将这些电池连接到有用的设备上，然后在本章的第一个项目中，你将搭建一个简单的照明电路。
- en: The second project in this chapter will show you how to use an Arduino microcontroller
    board and a few extra components to make a simple battery monitor. You wouldn’t
    want to lose your brains just because your defenses’ batteries died!
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的第二个项目将展示如何使用Arduino微控制器板和一些额外的组件制作一个简单的电池监控器。你可不想因为防御系统的电池耗尽而丧失大脑！
- en: '![image](graphics/f03-01.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-01.jpg)'
- en: 'Figure 3-1: Car batteries have a variety of uses in the postapocalyptic world.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-1：汽车电池在后末日世界中有多种用途。
- en: '**POWERING DEVICES FROM A CAR BATTERY**'
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**从汽车电池为设备供电**'
- en: Let’s look at how you can use all that energy to make your life more comfortable
    while you keep those pesky zombies at bay. Of course, you first have to get the
    electricity from the battery to your device. There are two common connectors you’ll
    want to have on hand.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何利用这些能量让你的生活更加舒适，同时击退那些恼人的僵尸。当然，你首先需要将电力从电池传输到设备。你将需要准备两种常见的连接器。
- en: '**CIGARETTE LIGHTER SOCKETS**'
  id: totrans-9
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**点烟器插座**'
- en: As DC voltages go, 12V is pretty useful. It’s the same voltage you find in the
    cigarette lighter socket of a car, and there are lots of 12V appliances that you
    can just connect straight to the battery. This includes various types of lighting,
    fans, drink warmers, air compressors, DVD players, mini fridges, and more.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在直流电压中，12V是相当有用的。这是汽车点烟器插座中的电压，而有许多12V电器可以直接连接到电池上。这些电器包括各种类型的照明设备、电风扇、饮料加热器、空气压缩机、DVD
    播放器、小冰箱等。
- en: In fact, there are so many 12V appliances with a cigarette lighter plug on the
    end that it’s worth making an adapter lead that will allow you to plug them right
    in, without having to modify them.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，有很多12V电器配有点烟器插头，因此制作一个适配器线，允许你直接插入这些电器，而不需要修改它们，是很值得的。
- en: 'You can buy a cigarette lighter socket adapter, like the one on the left in
    [Figure 3-2](ch03.html#ch03fig2), at your local auto parts store. Having acquired
    it, you can strip the leads and attach alligator clips so you can hook the adapter
    up to the battery. For info about how to join the wires/attach the alligator clip,
    see Project 1, “[Step 3: Wire Up the Battery and Charge Controller](ch02.html#ch00lev1sec40)”
    on [page 30](ch02.html#page_30).'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在当地的汽车零件商店购买点烟器插座适配器，就像[图 3-2](ch03.html#ch03fig2)左边的那款。购买后，你可以剥去电线并连接鳄鱼夹，这样你就可以将适配器连接到电池上。有关如何连接电线/安装鳄鱼夹的信息，请参见项目
    1，“[步骤 3：连接电池和充电控制器](ch02.html#ch00lev1sec40)”第[30页](ch02.html#page_30)。
- en: '![image](graphics/f03-02.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-02.jpg)'
- en: 'Figure 3-2: Making a cigarette lighter socket adapter'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-2：制作点烟器插座适配器
- en: '**WARNING**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告**'
- en: 'Never assume that a car battery is harmless just because it’s only 12V! While
    you can’t get an electric shock from 12V, you can most certainly receive nasty
    burns from it. If a wrench or screwdriver accidentally shorts across the terminals
    of a car battery, hundreds of amps will flow through it, turning the tool into
    flying molten metal that can easily burn or even blind you. Just remember: Car
    batteries store a lot of energy, which can easily be released by such an accident.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 切勿以为汽车电池只有12V就对它毫无危险！虽然12V电压不会让你触电，但它绝对可以引起严重的烧伤。如果扳手或螺丝刀不小心短接了汽车电池的端子，数百安培的电流将通过它流动，导致工具变成飞溅的熔化金属，这些金属可以轻易地烧伤你，甚至致盲。记住：汽车电池储存了大量能量，若发生这样的事故，能量会很容易被释放出来。
- en: 'Now that you’re starting to connect things to your battery, you need to make
    sure the battery is protected from accidental damage. Some adapters may already
    incorporate a fuse, but if yours doesn’t have a fuse, you should include a fuse
    holder in the circuit. A 10A fuse, like the one used in “[Project 2: Bicycle Generator](ch02.html#ch00lev1sec43)”
    on [page 34](ch02.html#page_34), will work just fine. Always remember to keep
    spare fuses around. It’s not so easy to nip out to the shops if the neighborhood
    is overrun with zombies. Notice that I’ve included a fuse in the design in [Figure
    3-2](ch03.html#ch03fig2); the fuse will prevent any problems of a fiery nature,
    should an accidental short circuit occur.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你开始将设备连接到电池时，需要确保电池免受意外损坏。一些适配器可能已经内置了保险丝，但如果你的适配器没有保险丝，你应该在电路中加入一个保险丝座。一个10A的保险丝，就像在
    “[项目 2：自行车发电机](ch02.html#ch00lev1sec43)” 中使用的那样，在[第34页](ch02.html#page_34)就能正常工作。永远记得备用保险丝。毕竟，如果附近被僵尸占领，你可不容易出去买保险丝。我在[图
    3-2](ch03.html#ch03fig2)中的设计中包含了一个保险丝；如果发生意外短路，保险丝将防止任何火灾问题。
- en: 'An alternative (or supplementary) way to protect your battery is to position
    the solar charge controller from “[Project 1: Solar Recharging](ch02.html#ch00lev1sec33)”
    on [page 26](ch02.html#page_26) between the battery and the *load*, or anything
    you want to power from that battery ([Figure 3-3](ch03.html#ch03fig3)).'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种（或补充）保护电池的方法是将 “[项目 1：太阳能充电](ch02.html#ch00lev1sec33)” 中的太阳能充电控制器放置在电池和*负载*之间，或者任何你希望从电池供电的设备之间（[图
    3-3](ch03.html#ch03fig3)）。
- en: When set up this way, the charge controller monitors the battery voltage and
    will automatically disconnect the load when the battery voltage drops below a
    certain threshold. This is advantageous because if the battery is discharged too
    much beyond this point, then it can be so damaged that it will no longer accept
    charge, and then good luck recharging it.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 当以这种方式设置时，充电控制器会监控电池电压，并在电池电压低于某个特定阈值时自动断开负载。这是有利的，因为如果电池在这个点之后继续过度放电，它可能会被损坏到无法再接受充电的程度，这时再想重新充电就非常困难了。
- en: '![image](graphics/f03-03.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-03.jpg)'
- en: 'Figure 3-3: Use a charge controller to protect your battery. The solar panel
    is optional.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-3：使用充电控制器保护你的电池。太阳能板是可选的。
- en: 'In “[Project 4: Battery Monitor](ch03.html#ch00lev1sec63)” on [page 53](ch03.html#page_53),
    you will learn how to build a battery monitor that will alert you when your battery
    runs low.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在 “[项目 4：电池监视器](ch03.html#ch00lev1sec63)” 中的[第53页](ch03.html#page_53)，你将学习如何构建一个电池监视器，当电池电量低时，它会提醒你。
- en: '**USB POWER**'
  id: totrans-23
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**USB 电源**'
- en: Largely due to the influence of the USB charger lead, 5V has become the most
    common operating voltage for small DC devices. Jumping from 12V to 5V is much
    easier than from 120V AC to 5V DC. At the auto parts store, you will find 12V
    cigarette lighter to 5V USB power adapters.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 由于USB充电线的影响，5V已成为小型直流设备中最常见的工作电压。从12V到5V的转换比从120V交流电到5V直流电的转换要容易得多。在汽车配件商店，你会找到12V点烟器到5V
    USB电源适配器。
- en: The adapter in [Figure 3-4](ch03.html#ch03fig4) has the benefit of combining
    both 12V sockets and 5V USB sockets. Another type of adapter just has a 12V cigarette
    lighter–shaped plug with one or two USB sockets built into the end of the plug.
    You could either plug the type of adapter shown in [Figure 3-4](ch03.html#ch03fig4)
    into the adapter of [Figure 3-2](ch03.html#ch03fig2). Alternatively, you could
    chop off the plug from the adapter of [Figure 3-4](ch03.html#ch03fig4) and add
    alligator clips to it, just as you did to the adapter in [Figure 3-2](ch03.html#ch03fig2).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 3-4](ch03.html#ch03fig4)中的适配器有一个优点，它结合了12V插座和5V USB插座。另一种适配器仅有一个12V点烟器形状的插头，并在插头末端内置一个或两个USB插座。你可以将[图
    3-4](ch03.html#ch03fig4)中显示的适配器插入[图 3-2](ch03.html#ch03fig2)中的适配器。或者，你也可以剪掉[图
    3-4](ch03.html#ch03fig4)适配器的插头，并为其添加鳄鱼夹，就像你对[图 3-2](ch03.html#ch03fig2)中的适配器所做的那样。'
- en: '![image](graphics/f03-04.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-04.jpg)'
- en: 'Figure 3-4: 12V to USB adapter'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-4：12V 到 USB 适配器
- en: You could, of course, use this adapter to charge your cell phone. But the cellular
    network will probably be one of the first services to collapse during the zombie
    apocalypse, first suffering overload from callers flooding the network, trying
    to get in touch with loved ones, and then succumbing to system failures due to
    power outages and lack of maintenance.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你可以使用这个适配器为你的手机充电。但在僵尸 apocalypse 中，蜂窝网络可能是首先崩溃的服务之一，首先会因接入的用户数量过多而超载，大家都在试图联系亲人，接着由于电力中断和缺乏维护，系统会发生故障。
- en: '**AC INVERTERS**'
  id: totrans-29
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**交流逆变器**'
- en: It’s possible to convert the 12V DC of a battery into 120V (or 220V) AC using
    an *inverter*. This device has terminals that connect to a 12V battery and an
    AC outlet, which you can plug regular AC appliances into.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 使用*逆变器*，你可以将电池的12V直流电转换为120V（或220V）交流电。这个设备有端子可以连接12V电池和交流电插座，你可以把普通的交流电设备插入其中。
- en: You cannot, however, plug in very high-powered AC devices. A wattage rating
    printed on the inverter will specify the maximum power load it can handle. Small
    models intended for powering laptops may only be 50W, but 200W or 400W inverters
    are neither hard to find nor particularly expensive.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，你不能插入功率非常高的交流电设备。逆变器上印刷的功率额定值会指定它可以承载的最大功率负荷。用于给笔记本电脑供电的小型逆变器可能只有50W，但200W或400W的逆变器既不难找，也不特别昂贵。
- en: Where possible, using DC devices is much better, as inverters aren’t very efficient.
    They generate high-voltage AC and waste quite a lot of energy as heat; just look
    at the large heat sinks on the sides of most inverters. They also often use significant
    amounts of current even when nothing is plugged into them, so you have to remember
    to turn them off when not in use.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可能，使用直流设备要比使用逆变器更好，因为逆变器效率较低。它们生成高压交流电，并且会浪费大量的能量转化为热量；只需看看大多数逆变器侧面的大型散热器即可。即便没有设备连接，它们通常仍会消耗相当大的电流，因此你必须记得在不使用时关闭它们。
- en: In the next section, you’ll learn how to make a low-voltage lighting setup that
    can provide lighting intensity similar to that of AC lighting but by using 12V
    DC lamps powered directly by a car battery.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，你将学习如何制作一个低电压照明系统，使用12V直流灯泡直接由汽车电池供电，提供与交流电照明相似的光照强度。
- en: '**PROJECT 3: LED LIGHTING**'
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目 3：LED 照明**'
- en: LEDs offer the most light per watt of any type of illumination and are a natural
    choice for postapocalyptic lighting. This project uses three 12V, MR16 LED light
    bulbs. These bulbs are available in powers from 2W to 10W or more, and any of
    these wattages are suitable for this project.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: LED 提供的每瓦光照强度是所有照明类型中最强的，是末日后照明的自然选择。这个项目使用了三只12V的MR16 LED灯泡。这些灯泡的功率从2W到10W或更高不等，任何这些功率都适合本项目。
- en: You can string together more than three of these bulbs if you like. Just use
    a longer lead and more bulbs. You may, for example, have a long corridor that
    you wish to defend, and good illumination is essential for effective zombie fighting.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你愿意，可以将超过三个这样的灯泡串联起来。只需使用更长的电缆和更多的灯泡。例如，你可能有一条很长的走廊需要照明，而良好的照明对有效的僵尸战斗至关重要。
- en: In fact, almost any 12V light source could be used, including high-power halogen
    light bulbs of 50W or more. However, the higher the wattage, the faster the battery
    will drain.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，几乎任何12V的光源都可以使用，包括功率为50W或更高的高功率卤素灯泡。不过，功率越大，电池消耗的速度就越快。
- en: '**WHAT YOU WILL NEED**'
  id: totrans-38
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**你将需要的物品**'
- en: To make this project, you’ll need the following items.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 为了制作这个项目，你需要以下物品。
- en: '| **ITEM** | **NOTES** | **SOURCE** |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| **物品** | **备注** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Car Battery | 12V | Auto parts store, scavenge
    |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 汽车电池 | 12V | 汽车零件店，回收 |'
- en: '| ![image](graphics/square.jpg) 2x heavy-duty alligator clip | 7A or more |
    Auto parts store |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 2x 重型鳄鱼夹 | 7A 或更高 | 汽车零件店 |'
- en: '| ![image](graphics/square.jpg) LED lamps MR16 | 12V 2W-10W | Hardware store
    |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) LED 灯泡 MR16 | 12V 2W-10W | 五金店 |'
- en: '| ![image](graphics/square.jpg) MR16 lamp sockets | Sockets with trailing leads
    | Hardware store |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) MR16 灯座 | 带导线的灯座 | 五金店 |'
- en: '| ![image](graphics/square.jpg) Switch | Inline switch (5A) | Hardware store
    |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 开关 | 内联开关（5A） | 五金店 |'
- en: '| ![image](graphics/square.jpg) Electrical cable | 7A | Scavenge |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 电缆 | 7A | 回收 |'
- en: '| ![image](graphics/square.jpg) Fuse | 10A fuse and holder | Auto parts store
    |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 熔断器 | 10A 熔断器和座 | 汽车零件店 |'
- en: '**CONSTRUCTION**'
  id: totrans-49
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建**'
- en: The LED lights for this project are wired in parallel ([Figure 3-5](ch03.html#ch03fig5)).
    In this arrangement, each of the lights gets the full 12V from the battery, and
    if one of the lights fails for any reason, the other lights will keep working.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目的LED灯是并联接线的（[图 3-5](ch03.html#ch03fig5)）。在这种布置中，每盏灯都能从电池获得完整的12V电压，如果其中一盏灯因任何原因失败，其他灯仍将继续工作。
- en: '![image](graphics/f03-05.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-05.jpg)'
- en: 'Figure 3-5: 12V lighting system'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-5：12V 照明系统
- en: '**STEP 1: PREPARE THE ELECTRICAL CABLE**'
  id: totrans-53
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 1：准备电缆**'
- en: If you’re using a fairly small number of low-power LED light bulbs (up to five,
    at up to 5W each), then double-core bell wire will be just fine. Cable designed
    for speakers is also a good choice. In my design ([Figure 3-5](ch03.html#ch03fig5)),
    I used three bulbs, so I cut three lengths of cable, stripping half an inch (15
    mm) of the insulation off the ends.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是数量较少的低功率LED灯泡（最多五个，每个不超过5W），那么双核钟铃线就足够了。专为音响设计的电缆也是一个不错的选择。在我的设计中（[图3-5](ch03.html#ch03fig5)），我使用了三个灯泡，因此我切了三段电缆，剥去每端半英寸（15毫米）的绝缘层。
- en: The first of these leads (labeled ➊ in [Figure 3-5](ch03.html#ch03fig5)) will
    go from the battery’s positive terminal to the switch and then to the first lamp.
    The second length will continue on to the second lamp (➋), and the final lead
    (➌) will go to the last lamp.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这些引线中的第一根（在[图3-5](ch03.html#ch03fig5)中标为 ➊）将从电池的正极连接到开关，再连接到第一个灯泡。第二根电线将继续连接到第二个灯泡（➋），最后一根引线（➌）将连接到最后一个灯泡。
- en: Where the wires join, there needs to be a three-way twisting of each wire of
    the cable with both the next length of cable and the lamp holder ([Figure 3-6](ch03.html#ch03fig6)).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在电线连接处，每根电缆需要与下一段电缆以及灯座进行三重扭接连接（[图3-6](ch03.html#ch03fig6)）。
- en: '![image](graphics/f03-06.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![图片](graphics/f03-06.jpg)'
- en: 'Figure 3-6: Connecting the lamp holder'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图3-6：连接灯座
- en: For a more permanent connection, solder the twisted connection. Whether you
    solder them or not, wrap the connections in electrical tape. For a guide on how
    to make this kind of twisted-wire connection, see “[Joining Wires by Twisting](app02.html#ch00lev1sec226)”
    on [page 229](app02.html#page_229).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 对于更永久的连接，焊接扭接的连接。如果你是否焊接它们并不重要，但无论如何，都应该用电工胶带包裹连接点。关于如何制作这种扭接线连接的指南，请参阅 “[通过扭线连接电缆](app02.html#ch00lev1sec226)”
    在 [第229页](app02.html#page_229)。
- en: '**STEP 2: WIRE UP THE FUSE AND SWITCH**'
  id: totrans-60
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 2：接线保险丝和开关**'
- en: Complete the wiring by attaching the fuse and alligator clip to the start of
    the wiring. Note that these MR16 light bulbs include a circuit to automatically
    switch the polarity of the LED. This means you can connect them either way around.
    If you use a different type of 12V LED, check whether it has separate positive
    and negative connections. If so, make sure that you connect the positive side
    to the switch lead and the negative side to the lead you’ll attach to the negative
    terminal on the battery.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将保险丝和鳄鱼夹连接到电线的起始端来完成接线。请注意，这些MR16灯泡包含一个电路，可以自动切换LED的极性。这意味着你可以随意连接它们。如果你使用的是其他类型的12V
    LED灯泡，检查它们是否有单独的正负连接端。如果有，确保将正极连接到开关引线，负极连接到你将连接到电池负极端子的引线。
- en: The alligator clip attaches to the fuse lead, which is attached to the switch
    ([Figure 3-7](ch03.html#ch03fig7)). Once again, these leads can be twisted together,
    and for a more reliable finish, you can solder the twisted joint. The in-line
    switch uses screw terminals to attach the wires. One side is just a metal connector
    that passes straight through, and the other side has spring contacts, which connect
    with each other when the switch is in the on position.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 鳄鱼夹连接到保险丝引线，后者连接到开关（[图3-7](ch03.html#ch03fig7)）。这些引线同样可以扭接在一起，为了更可靠，可以焊接这个扭接的接头。串联开关使用螺丝端子连接电线。一侧是简单的金属连接器，电流通过，而另一侧有弹簧触点，在开关处于开启位置时，这些触点会相互接触。
- en: '![image](graphics/f03-07.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](graphics/f03-07.jpg)'
- en: 'Figure 3-7: Connecting the fuse and alligator clip for a lighting system'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图3-7：为照明系统连接保险丝和鳄鱼夹
- en: '**STEP 3: INSTALL THE LAMPS**'
  id: totrans-65
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 3：安装灯具**'
- en: Now that everything is wired up, attach the alligator clips to the battery and
    make sure that the bulbs light when the switch is flicked. Once you know the lights
    turn on, just affix them to the ceiling, the wall, or wherever you want them.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 现在所有的电路都接好了，将鳄鱼夹夹到电池上，确保开关一拨，灯泡就会亮。确认灯亮了之后，只需将它们固定在天花板、墙壁或者任何你想放置的地方。
- en: '**USING THE LIGHTING**'
  id: totrans-67
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用照明设备**'
- en: Murphy’s law dictates that batteries will run out of juice and shut off the
    lights just as the zombies attack. To anticipate and avoid this situation, it’s
    good to know roughly how many hours of light you’re going to get from your battery
    before you need to do some more pedaling or otherwise put some juice into it.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 墨菲定律规定，电池会在僵尸攻击时耗尽电量，导致灯光熄灭。为了预防并避免这种情况，了解你的电池大概能提供多少小时的灯光非常重要，以便你知道何时需要再次踩踏或为电池充电。
- en: That number of hours depends on the size and quality of your battery. Looking
    back at [Table 2-1](ch02.html#ch02tab1) on [page 21](ch02.html#page_21), you can
    see that a 5W LED is expected to last 120 hours. Therefore, a string of six 5W
    LEDs should be good for about 20 hours. If you go all out and put up a string
    of three 60W 12V halogen lamps, you’ll only get about 4 hours of light before
    needing another charge.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 小时数取决于你电池的大小和质量。回顾一下[表 2-1](ch02.html#ch02tab1)中第[21页](ch02.html#page_21)的数据，你可以看到一个
    5W 的 LED 灯预计能持续工作 120 小时。因此，一串六个 5W 的 LED 灯大约能使用 20 小时。如果你全力以赴，使用三盏 60W 的 12V
    卤素灯，你大约只能获得 4 小时的照明，之后需要重新充电。
- en: Whatever your lighting setup, it would be great to have advance notice that
    the battery is getting low—and this is the goal of the next project.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你的照明系统如何，能提前知道电池电量低是很有帮助的——这正是下一个项目的目标。
- en: '**PROJECT 4: BATTERY MONITOR**'
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目 4: 电池监控器**'
- en: I recommend keeping a good stock of car batteries charged up and ready to go
    at all times. That way, if zombies damage your solar panels, or you fall ill and
    can’t pedal your generator, you won’t be plunged into darkness and left powerless
    (in both senses of the word). It is therefore of paramount importance that you
    have an early warning system that will monitor the battery, telling you when it
    starts to get low so you can swap in a new one.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议随时保持充足的汽车电池库存，并确保电池随时待命。这样，如果僵尸损坏了你的太阳能电池板，或者你生病无法蹬动发电机，你就不会陷入黑暗中，无法行动（在字面和比喻上）。因此，拥有一个监控电池、在电池电量开始下降时提醒你的预警系统是至关重要的。
- en: This project uses an Arduino, a useful little board that’s great for putting
    together electronic projects that require a bit of logic. In this case, the logic
    is simply to measure the battery voltage, display it, and sound a buzzer when
    it falls below a certain critical level.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目使用的是 Arduino，它是一块非常实用的小板，适用于需要一些逻辑的电子项目。在这个案例中，逻辑仅仅是测量电池电压、显示电压，并在电压低于某个临界值时触发蜂鸣器。
- en: The Arduino will be powered from the same car battery that it’s monitoring.
    The Arduino uses less than 1W to operate, so it’s okay to leave the board connected
    to the battery continuously.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino 将由它正在监控的同一辆车电池供电。Arduino 的功耗低于 1W，因此可以将板子持续连接到电池上。
- en: In the battery monitor setup ([Figure 3-8](ch03.html#ch03fig8)), alligator clips
    connect the battery monitor to the battery. If the battery has large alligator
    clips attached to it, then these smaller clips can be attached to the handles
    of the big clips.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在电池监控器设置中（[图 3-8](ch03.html#ch03fig8)），鳄鱼夹将电池监控器连接到电池。如果电池上已经附有大型鳄鱼夹，那么这些小夹子可以连接到大夹子的手柄上。
- en: '![image](graphics/f03-08.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-08.jpg)'
- en: 'Figure 3-8: Battery monitor'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '图 3-8: 电池监控器'
- en: The left lead of the left resistor ([Figure 3-8](ch03.html#ch03fig8)) is connected
    to the positive battery terminal, and the right lead of the right resistor is
    connected to the negative battery terminal.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 左侧电阻的左引脚（[图 3-8](ch03.html#ch03fig8)）连接到电池的正极，右侧电阻的右引脚连接到电池的负极。
- en: '**WHAT YOU WILL NEED**'
  id: totrans-79
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**你需要的东西**'
- en: To make this project, you’ll need the following items.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 要制作这个项目，你需要以下物品。
- en: '| **ITEM** | **NOTES** | **SOURCE** |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| **物品** | **备注** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Arduino | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) Arduino | Arduino Uno R3 | Adafruit, Fry’s
    (7224833), Sparkfun |'
- en: '| ![image](graphics/square.jpg) Arduino screwshield | Screwshield | Adafruit
    (196) |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) Arduino 螺丝盾 | 螺丝盾 | Adafruit (196) |'
- en: '| ![image](graphics/square.jpg) LCD shield | LCD 16x2 display shield | eBay,
    Sparkfun (DEV-11851) |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) LCD 盾 | LCD 16x2 显示屏盾 | eBay, Sparkfun (DEV-11851)
    |'
- en: '| ![image](graphics/square.jpg) Buzzer | Small piezo buzzer | Adafruit (1740),
    eBay |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 蜂鸣器 | 小型压电蜂鸣器 | Adafruit (1740), eBay |'
- en: '| ![image](graphics/square.jpg) 270Ω resistor |  | Mouser (293-270-RC) |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 270Ω 电阻 |  | Mouser (293-270-RC) |'
- en: '| ![image](graphics/square.jpg) 470Ω resistor |  | Mouser (293-470-RC) |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 470Ω 电阻 |  | Mouser (293-470-RC) |'
- en: '| ![image](graphics/square.jpg) Small alligator clip leads |  | Auto parts
    store |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 小型鳄鱼夹引线 |  | 汽车配件商店 |'
- en: One great thing about using an Arduino is that there are many different ready-made
    modules, called *shields*, that fit on top of the Arduino and add extra features
    to it without any complex electronic construction. This project uses two such
    shields that are stacked on top of each other.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Arduino的一个好处是，有许多不同的现成模块，称为*扩展板*，它们可以安装在Arduino上，并为其增加额外功能，而无需复杂的电子构建。这个项目使用了两个这样的扩展板，它们堆叠在一起。
- en: The first shield that fits on top of the Arduino is a *screwshield*, sometimes
    called a *wing shield*. This shield allows you to attach wires to the Arduino
    using screw terminals and a screw driver. The second and topmost shield that you’ll
    attach to the Arduino is an LCD display shield. This shield will tell you the
    battery level as a measurement of voltage and as a bar graph display of the state
    of charge (SOC) of the battery. The project also has an option to mute the buzzer
    to avoid attracting zombies, if you suspect they are shuffling about nearby.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 安装在Arduino顶部的第一个扩展板是*螺丝扩展板*，有时也叫*翼型扩展板*。这个扩展板允许你通过螺丝端子和螺丝刀将电线连接到Arduino上。你将安装的第二个也是最上面的扩展板是LCD显示屏扩展板。这个扩展板会显示电池电压，并通过条形图展示电池的充电状态（SOC）。如果你怀疑附近有僵尸徘徊，这个项目还有一个静音蜂鸣器的选项，以避免吸引它们的注意。
- en: The only other electronic components in this project are a pair of resistors
    and a buzzer. The resistors are needed because although the Arduino has inputs
    to measure voltage, it can only measure voltages up to 5V. Any more than that
    would damage the Arduino. You’ll use the pair of resistors in an arrangement called
    a *voltage divider*. The resistors I’ve chosen for my divider reduce the voltage
    to the Arduino by a factor of 2.74 so that the 12V or 13V that we might find at
    the battery will be reduced to 4.7V or less.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目中唯一的其他电子元件是一对电阻和一个蜂鸣器。需要这些电阻是因为虽然Arduino有输入端口来测量电压，但它只能测量最高5V的电压。超过这个电压会损坏Arduino。你将使用这对电阻组成一个叫做*电压分压器*的电路。我选择的电阻将电压降低了2.74倍，这样我们可能在电池上找到的12V或13V就会被降低到4.7V或更低。
- en: '**VOLTAGE DIVIDERS**'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '**电压分压器**'
- en: Using two resistors as a voltage divider ([Figure 3-9](ch03.html#ch03fig9))
    is a great way to reduce the voltage you are trying to measure to a level where
    it can be directly measured by, say, an Arduino.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 使用两个电阻作为电压分压器（[图3-9](ch03.html#ch03fig9)）是将你想测量的电压降低到一个可以直接由Arduino测量的水平的好方法。
- en: '![image](graphics/f03-09.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-09.jpg)'
- en: 'Figure 3-9: Voltage divider'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图3-9：电压分压器
- en: The formula to calculate V[out] if you know V[in], R1, and R2 is
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你知道V[in]、R1和R2，计算V[out]的公式是
- en: '![image](graphics/f0055-01.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f0055-01.jpg)'
- en: For example, if R1 is 470 Ω, R2 is 270 Ω, and the maximum voltage of V[in] is
    13V, then
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果R1是470Ω，R2是270Ω，V[in]的最大电压为13V，那么
- en: '![image](graphics/f0055-02.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f0055-02.jpg)'
- en: In other words, even if your battery is fully charged and managing to provide
    13V, only a maximum of 4.74V (below the critical 5V level) will find its way to
    the Arduino. If the input voltage is lower than this, then V[out] will scale proportionally.
    For example, if the battery voltage is 6.5V (which would indicate a bit of a problem,
    by the way), V[out] would be 2.37V.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，即使你的电池已充满电并且能够提供13V，最多只有4.74V（低于关键的5V电压）会到达Arduino。如果输入电压低于这个值，V[out]将按比例缩放。例如，如果电池电压为6.5V（顺便说一下，这通常意味着出现了一些问题），则V[out]为2.37V。
- en: '**CONSTRUCTION**'
  id: totrans-102
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建**'
- en: Remarkably, no soldering at all is needed to make this project. The only tool
    you need is a screwdriver.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，这个项目完全不需要焊接。你只需要一个螺丝刀。
- en: '**STEP 1: PROGRAM THE ARDUINO**'
  id: totrans-104
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**第一步：编程Arduino**'
- en: Arduino programs, which are called *sketches*, can change whether a connection,
    or *pin*, on the Arduino is an input or an output. The Arduino remembers whether
    each pin was set to input or output, even after you disconnect it from the rest
    of the circuit. Thus, if one of your Arduino pins was an output the last time
    you used it, connecting the Arduino to new hardware that expects the pin to be
    an input could damage the Arduino or the circuit you’re connecting it to. By uploading
    the program to the Arduino before doing anything else, you’ll ensure that each
    pin functions the way your circuit expects it to.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino 程序，称为 *sketches*，可以改变 Arduino 上某个连接或 *引脚* 是输入还是输出。Arduino 会记住每个引脚是设置为输入还是输出，即使你将其从电路中断开。因此，如果你上次使用某个
    Arduino 引脚时将其设置为输出，将 Arduino 连接到期望该引脚为输入的新硬件时，可能会损坏 Arduino 或你连接的电路。在做任何其他操作之前将程序上传到
    Arduino，可以确保每个引脚按照你的电路预期的方式工作。
- en: You’ll find detailed instructions on getting started with the Arduino, connecting
    it to your computer, and uploading a sketch to it in [Appendix B](app02.html#app02).
    In this case, the sketch is called *Project_04_Battery_monitor* and can be found
    with all the other program files used in this book at *[http://nostarch.com/zombies/](http://nostarch.com/zombies/)*.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[附录 B](app02.html#app02)中找到关于如何开始使用 Arduino、将其连接到计算机以及向其上传程序的详细说明。在这种情况下，程序名为*Project_04_Battery_monitor*，并且可以在本书中使用的所有其他程序文件中找到，网址为
    *[http://nostarch.com/zombies/](http://nostarch.com/zombies/)*。
- en: '**STEP 2: BUILD THE ARDUINO SANDWICH**'
  id: totrans-107
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 2：搭建 Arduino 三明治**'
- en: When used with the two shields, the Arduino Uno is on the bottom, the screwshield
    is plugged into that, and, finally, the LCD display shield goes on top of the
    screwshield ([Figure 3-10](ch03.html#ch03fig10)). The LCD shield has to be at
    the top of the stack or you won’t be able to see what it says!
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 当与两个扩展板一起使用时，Arduino Uno 位于底部，螺丝盾连接到其上，最后 LCD 显示屏扩展板位于螺丝盾的顶部（见[图 3-10](ch03.html#ch03fig10)）。LCD
    扩展板必须放在堆叠的最上面，否则你将无法看到它显示的内容！
- en: '![image](graphics/f03-10.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-10.jpg)'
- en: 'Figure 3-10: An Arduino “sandwich”'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-10：Arduino “三明治”
- en: When pushing the pins of a shield into an Arduino or the screwshield, be careful
    to check that all the pins meet the holes correctly so you don’t damage them.
    It’s quite easy for one of the pins to splay out as you are pushing the pins in.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在将扩展板的引脚插入 Arduino 或螺丝盾时，请小心检查所有引脚是否正确对接孔，以免损坏它们。在推引脚时，很容易有一个引脚会弯曲出去。
- en: '**STEP 3: ATTACH THE RESISTORS AND BUZZER**'
  id: totrans-112
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 3：连接电阻器和蜂鸣器**'
- en: You’ll attach the resistors and buzzer to the screw terminals of the screwshield
    ([Figure 3-11](ch03.html#ch03fig11)).
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 你将把电阻器和蜂鸣器连接到螺丝盾的螺丝端子上（见[图 3-11](ch03.html#ch03fig11)）。
- en: '![image](graphics/f03-11.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f03-11.jpg)'
- en: 'Figure 3-11: Connecting components to the screwshield'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3-11：将组件连接到螺丝盾
- en: The two resistors can be identified either by measuring their resistance using
    a multimeter (see “Using a Multimeter” on [page 237](app02.html#page_237)) or
    by reading the colored stripes on the resistor body. The 470 Ω resistor will have
    stripes of yellow, purple, and brown; the 270 Ω resistor will have red, purple,
    and brown stripes. In “[Resistor Color Codes](app01.html#ch00lev1sec224)” on [page
    225](app01.html#page_225), you will find a resistor color code table and instructions
    on how to identify resistors by their stripes.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 这两只电阻器可以通过使用万用表测量其电阻来识别（请参见[第 237 页](app02.html#page_237)的《使用万用表》），或者通过读取电阻体上的彩条来识别。470
    Ω 电阻器的彩条是黄色、紫色和棕色；270 Ω 电阻器的彩条是红色、紫色和棕色。在[第 225 页](app01.html#page_225)的《电阻颜色代码》部分，你将找到电阻颜色代码表以及如何通过彩条识别电阻的说明。
- en: Some buzzers will have a positive red lead and a negative black lead. If this
    is the case, connect the black lead to GND (ground) and the red lead to D11 on
    the Arduino. Other buzzers will have identical leads; if this is the case, it
    doesn’t matter which way around they are connected.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 一些蜂鸣器会有红色的正极导线和黑色的负极导线。如果是这种情况，连接黑色导线到 GND（地），红色导线到 Arduino 的 D11 引脚。其他蜂鸣器可能会有相同的导线；如果是这种情况，连接方式无关紧要。
- en: '**SOFTWARE**'
  id: totrans-118
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**软件**'
- en: The sketch for this program is mostly concerned with making sure that the right
    text is displayed on the LCD at the right time. I’ll walk you through it in full,
    though you don’t have to understand or follow how this sketch works to finish
    the project. You can just upload it exactly as it is into the Arduino board, following
    the steps explained in “[Installing the Antizombie Sketches](app03.html#ch00lev1sec241)”
    on [page 248](app03.html#page_248).
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 这个程序的主要任务是确保LCD在正确的时间显示正确的文本。我将带你一步步走过它，尽管你不必理解或遵循这段程序的运作方式就能完成项目。你只需按照[“安装Antizombie
    Sketches”](app03.html#ch00lev1sec241)中解释的步骤，将其准确地上传到Arduino板上即可，详见[第248页](app03.html#page_248)。
- en: 'If you want to learn more about Arduino programming, see [Appendix C](app03.html#app03)
    or take a look at my book *Programming Arduino: Getting Started with Sketches*
    (McGraw-Hill, 2012).'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想深入了解Arduino编程，请参见[附录C](app03.html#app03)或阅读我的书《*编程Arduino：开始使用Sketches*》（McGraw-Hill，2012年）。
- en: The sketch starts by importing the *LiquidCrystal* library, which is responsible
    for controlling the LCD shield. Because this library is included as a standard
    part of the Arduino software, there is nothing to download and install for this
    library.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 这段程序首先导入了*LiquidCrystal*库，它负责控制LCD显示屏。由于这个库是Arduino软件的标准部分，所以无需下载和安装此库。
- en: '[PRE0]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: After the library command, three constants are defined for key battery voltages.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在库命令之后，定义了三个常量，用于表示关键电池电压。
- en: '[PRE1]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: These voltages are, in order, the fully charged battery voltage, the minimum
    voltage that you want the battery to be allowed to discharge to, and the voltage
    at which the buzzer should sound. These last two are both set to 11.7V. These
    values are pretty standard for a lead-acid car battery, but if you use a different
    type of battery, you can tweak them. Because they hold decimal values, the variables
    are of a type called *float*. You can find out more about Arduino data types in
    [Appendix C](app03.html#app03).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这些电压分别是：完全充电的电池电压、你希望电池放电的最低电压，以及蜂鸣器应响起的电压。这最后两个值都设置为11.7V。对于铅酸车载电池来说，这些值相当标准，但如果你使用不同类型的电池，可以进行调整。由于这些值包含小数，变量的类型是*float*。你可以在[附录C](app03.html#app03)中了解更多关于Arduino数据类型的信息。
- en: The next few lines define constants for the Arduino pins that are used.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的几行定义了用于Arduino的引脚常量。
- en: '[PRE2]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The Arduino’s various pins are normally identified simply by a number, so these
    constants give them meaningful names. You don’t need to change these pin designations
    unless you decide to wire up your battery monitor differently.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino的各种引脚通常仅通过一个数字来标识，因此这些常量赋予了它们有意义的名称。除非你决定以不同的方式连接电池监视器，否则无需更改这些引脚的名称。
- en: The final section defines constants for the values of the resistors used in
    the potential divider.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的部分定义了用于电压分压器中电阻器值的常量。
- en: '[PRE3]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The constant `k` is the resulting factor the input voltage will be reduced by
    in order to fit into the 5V measurement range of the Arduino. The next line of
    code initializes the LCD display, specifying which pins are used.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 常量`k`是输入电压需要减少的因子，以便适应Arduino的5V测量范围。下一行代码初始化LCD显示屏，并指定使用的引脚。
- en: '[PRE4]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The comment line starting with `//` just identifies which of the Arduino pin
    numbers on the line beneath it correspond to which pins on the LCD module. The
    line after that defines a *Boolean* (a value that can be true or false) variable,
    `mute`, which is used to mute the buzzer.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 以`//`开头的注释行仅仅是标明了下面这行代码中哪些Arduino引脚号对应LCD模块上的哪些引脚。接下来的一行定义了一个*布尔*变量`mute`，用于将蜂鸣器静音。
- en: The setup function that comes next is run just once, when the Arduino starts.
    In this case, it begins by setting the backlight pin (D10) to be an input.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的`setup`函数只会在Arduino启动时运行一次。在这种情况下，它通过将背光引脚（D10）设置为输入来开始。
- en: '[PRE5]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The backlight pin is used only on some LCD shields, but a significant number
    of LCD shields have a design flaw that can destroy the Arduino they are connected
    to if this pin is set to an output and also set high. To be on the safe side,
    D10 is set to an input. The rest of the function initializes the LCD display and
    writes out the word `Battery`, which will be a permanent fixture of the message
    displayed.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 背光引脚仅在某些LCD显示屏上使用，但许多LCD显示屏存在设计缺陷，如果将此引脚设置为输出并设置为高电平，可能会损坏与之连接的Arduino。为了安全起见，将D10设置为输入。函数的其余部分初始化LCD显示器，并写出单词`Battery`，它将成为显示消息的永久部分。
- en: The loop function that follows the setup function is run repeatedly. That is,
    as soon as all the commands in the function have been executed, the function will
    start again from the top.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 跟在设置函数后的循环函数会反复执行。也就是说，一旦函数中的所有命令执行完毕，它将从头开始重新执行。
- en: '[PRE6]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The display is updated inside the loop function. This is also where you’ll check
    that the battery voltage hasn’t dropped below the warning voltage and check for
    key presses to toggle the battery monitor’s mute mode.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 显示器的更新在循环函数内进行。在这里，您还将检查电池电压是否低于警告电压，并检查按键是否被按下以切换电池监视器的静音模式。
- en: This loop function makes use of a number of other functions further down in
    the file. The first of these is `displayVoltage`.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 这个循环函数使用了文件中其他位置的多个函数。第一个函数是`displayVoltage`。
- en: '[PRE7]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: This function starts at column 8 and overwrites the eight character positions
    on the top line by printing eight spaces ➊. It then moves the cursor back to column
    8 and writes the battery voltage in that gap ➋ before writing the *V* character
    at the end of the line.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能从第8列开始，通过打印八个空格➊覆盖顶部行的八个字符位置。然后，光标会返回到第8列，在那个空白处写入电池电压➋，最后在行尾写上字符*V*。
- en: The `displayVoltage` function makes use of the `readVoltage` function to convert
    the raw reading from the Arduino’s analog input into a voltage.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '`displayVoltage`函数利用`readVoltage`函数将Arduino模拟输入的原始读数转换为电压值。'
- en: '[PRE8]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Readings from an Arduino analog pin give a result between 0 and 1,023, where
    0 means 0V and 1,023 means 5V. So, the value of `vout` in `readVoltage` is the
    output voltage of the potential divider—that is, the reduced voltage. You need
    to work backward to calculate the original battery voltage `vin`, then return
    this value to be displayed.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 从Arduino模拟引脚读取的数值范围在0到1,023之间，0表示0V，1,023表示5V。因此，`readVoltage`中的`vout`值是电压分压器的输出电压——也就是降低后的电压。您需要逆向计算原始电池电压`vin`，然后返回这个值以供显示。
- en: The final function in the sketch displays the bar graph showing how much power
    is left in the battery and, if the battery monitor is in mute mode, the `MUTE`
    notification.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 程序中的最后一个函数显示了条形图，显示电池剩余电量，并且如果电池监视器处于静音模式，则会显示`MUTE`通知。
- en: '[PRE9]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The `displayBar` function steps through each of the 16 character positions of
    the second row of the display and then displays either a `*` or a space character,
    depending on the measure of `fullness` of the battery.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '`displayBar`函数逐一检查显示器第二行的16个字符位置，然后根据电池的`充满程度`显示`*`或空格字符。'
- en: '**USING THE BATTERY MONITOR**'
  id: totrans-149
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用电池监视器**'
- en: As soon as you connect the battery monitor to the battery, the LCD should light
    up and show a readout of the battery voltage on the top row of the display. The
    second row of the display will show a number of `*` characters to indicate the
    juice remaining in the battery. Also, if you press any of the button switches
    below the display to disable the buzzer, the message `MUTE` should toggle on and
    off.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您将电池监视器连接到电池，LCD屏幕应该会亮起，并在显示器的顶部行显示电池电压读数。显示器的第二行将显示若干个`*`字符，以指示电池剩余的电量。另外，如果您按下显示器下方的任意按钮开关以禁用蜂鸣器，消息`MUTE`应该会切换显示。
- en: If your display appears blank or difficult to read, then you may need to adjust
    the contrast. Just use a small, flat-headed screwdriver to turn the small variable
    resistor at the top right of the LCD shield ([Figure 3-11](ch03.html#ch03fig11)).
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 如果显示器出现空白或难以阅读，您可能需要调整对比度。只需使用一个小的平头螺丝刀旋转LCD屏蔽板右上角的小可调电阻器([图3-11](ch03.html#ch03fig11))即可。
- en: Now that you have the basics of power generation and lighting sorted out, turn
    your attention to detecting zombies. You’ll find out how to know they’re coming
    in [Chapter 4](ch04.html#ch04).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经掌握了基本的电力生成和照明功能，接下来可以关注如何检测僵尸。您将在[第4章](ch04.html#ch04)中了解如何判断它们的到来。
