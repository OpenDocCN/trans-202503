["```\n},\n**{**\n  **test: Modernizr.canvas,**\n  **yep: [\"_js/renderer.js\",\"_js/sprite.js\"]**\n**},**\n{\n  load: \"_js/game.js\",\n  complete: function(){\n    $(function(){\n      var game = new BubbleShoot.Game();\n      game.init();\n    })\n }\n**}**]);\n```", "```\n$(\".but_start_game\").bind(\"click\",startGame);\n```", "```\n<canvas id=\"game_canvas \" width=\"1000\" height=\"620\"></canvas>\n```", "```\n#game_canvas\n{\n  width: 1000px;\n  height: 620px;\n}\n```", "```\ndocument.getElementById(\"game_canvas\").getContext(\"2d\");\n```", "```\n$(\"#game_canvas\").get(0).getContext(\"2d\");\n```", "```\ndocument.getElementById(\"game_canvas\").getContext(\"2d\").\ndrawImage(imageObject,x,y);\n```", "```\n$(\"#game_canvas\").get(0).getContext(\"2d\").drawImage(imageObject,x,y);\n```", "```\n$(\"#game_canvas\").get(0).getContext(\"2d\").clearRect(0, 0, 1000, 620);\n```", "```\n➊ var canvas = $(\"#game_canvas\").get(0);\n➋ var context = canvas.getContext(\"2d\");\n➌ context.clearRect(0, 0, canvas.width, canvas.height);\n➍ context.translate(150, 150);\n➎ context.rotate(Math.PI/6);\n➏ context.drawImage(imageObject, -50, -50);\n➐ context.rotate(-Math.PI/6);\n➑ context.translate(-150, -150);\n```", "```\n   var canvas = $(\"#game_canvas\").get(0);\n   var context = canvas.getContext(\"2d\");\n   context.clearRect(0, 0, canvas.width, canvas.height);\n➊ context.save();\n   context.translate(150, 150);\n   context.rotate(Math.PI/6);\n   context.drawImage(imageObject, -50, -50);\n➋ context.restore();\n```", "```\n<canvas id=\"game_canvas\" width=\"2000\" height=\"1240\"></canvas>\n```", "```\n$(\"#game_canvas\").get(0).getContext(\"2d\").drawImage(imageObject,2000,1240);\n```", "```\n{\n  left: 1000px;\n  top: 620px;\n}\n```", "```\ncontext.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);\n```", "```\n$(\"#canvas\").get(0).getContext(\"2d\").drawImage(spriteSheet,0,50,50,50,200,150,\n50,50);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Bubble = (function($){\n➊  **BubbleShoot.BubbleState = {**\n      **CURRENT : 1,**\n      **ON_BOARD : 2,**\n      **FIRING : 3,**\n      **POPPING : 4,**\n      **FALLING : 5,**\n      **POPPED : 6,**\n      **FIRED : 7,**\n      **FALLEN : 8**\n    **}**;\n    var Bubble = function(row,col,type,sprite){\n      var that = this;\n➋    **var state;**\n      **var stateStart = Date.now();**\n      **this.getState = function(){ return state;};**\n➌    **this.setState = function(stateIn){**\n        **state = stateIn;**\n➍      **stateStart = Date.now();**\n      **};**\n➎    **this.getTimeInState = function(){**\n        **return Date.now() - stateStart;**\n      **};**\n      --*snip*--\n    };\n    Bubble.create = function(rowNum,colNum,type){\n      --*snip*--\n    };\n    return Bubble;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Game = (function($){\n    var Game = function(){\n      var curBubble;\n      var board;\n      var numBubbles;\n➊    **var bubbles = [];**\n      var MAX_BUBBLES = 70;\n      this.init = function(){\n        --*snip*--\n      };\n      var startGame = function(){\n        $(\".but_start_game\").unbind(\"click\");\n          numBubbles = MAX_BUBBLES\n          BubbleShoot.ui.hideDialog();\n          board = new BubbleShoot.Board();\n➋        **bubbles = board.getBubbles();**\n          curBubble = getNextBubble();\n        BubbleShoot.ui.drawBoard(board);\n        $(\"#game\").bind(\"click\",clickGameScreen);\n      };\n      var getNextBubble = function(){\n        var bubble = BubbleShoot.Bubble.create();\n➌      **bubbles.push(bubble);**\n➍      **bubble.setState(BubbleShoot.BubbleState.CURRENT);**\n        bubble.getSprite().addClass(\"cur_bubble\");\n        $(\"#board\").append(bubble.getSprite());\n        BubbleShoot.ui.drawBubblesRemaining(numBubbles);\n        numBubbles--;\n        return bubble;\n      };\n      --*snip*--\n    };\n    return Game;\n  })(jQuery);\n```", "```\nvar BubbleShoot = window.BubbleShoot || {};\nBubbleShoot.Board = (function($){\n  var NUM_ROWS = 9;\n  var NUM_COLS = 32;\n  var Board = function(){\n    var that = this;\n    --*snip*--\n    **this.getBubbles = function(){**\n      **var bubbles = [];**\n      **var rows = this.getRows();**\n      **for(var i=0;i<rows.length;i++){**\n        **var row = rows[i];**\n        **for(var j=0;j<row.length;j++){**\n          **var bubble = row[j];**\n          **if(bubble){**\n            **bubbles.push(bubble);**\n          **};**\n        **};**\n      **};**\n      **return bubbles;**\n    **};**\n    return this;\n  };\n  --*snip*--\n  return Board;\n})(jQuery);\n```", "```\nvar BubbleShoot = window.BubbleShoot || {};\nBubbleShoot.Board = (function($){\n  var NUM_ROWS = 9;\n  var NUM_COLS = 32;\n  var Board = function(){\n    --*snip*-\n  };\n  var createLayout = function(){\n    var rows = [];\n    for(var i=0;i<NUM_ROWS;i++){\n      var row = [];\n      var startCol = i%2 == 0 ? 1 : 0;\n      for(var j=startCol;j<NUM_COLS;j+=2){\n        var bubble = BubbleShoot.Bubble.create(i,j);\n        **bubble.setState(BubbleShoot.BubbleState.ON_BOARD);**\n        row[j] = bubble;\n      };\n      rows.push(row);\n    };\n    return rows;\n  };\n  return Board;\n})(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.ui = (function($){\n    var ui = {\n      --*snip*--\n      fireBubble : function(bubble,coords,duration){\n➊      **bubble.setState(BubbleShoot.BubbleState.FIRING);**\n        var complete = function(){\n          if(typeof(bubble.getRow()) !== undefined){\n            bubble.getSprite().css(Modernizr.prefixed(\"transition\"),\"\");\n            bubble.getSprite().css({\n              left : bubble.getCoords().left - ui.BUBBLE_DIMS/2,\n              top : bubble.getCoords().top - ui.BUBBLE_DIMS/2\n            });\n➋          **bubble.setState(BubbleShoot.BubbleState.ON_BOARD);**\n          **}else{**\n➌          **bubble.setState(BubbleShoot.BubbleState.FIRED);**\n          **};**\n        --*snip*--\n      },\n      --*snip*--\n    };\n    return ui;\n  } )(jQuery);\n```", "```\n  var Game = function(){\n    --*snip*--\n    var popBubbles = function(bubbles,delay){\n      $.each(bubbles,function(){\n        var bubble = this;\n        setTimeout(function(){\n➊        **bubble.setState(BubbleShoot.BubbleState.POPPING);**\n          bubble.animatePop();\n➋        **setTimeout(function(){**\n            **bubble.setState(BubbleShoot.BubbleState.POPPED);**\n          **},200);**\n        },delay);\n        board.popBubbleAt(bubble.getRow(),bubble.getCol());\n        delay += 60;\n      });\n    };\n    var dropBubbles = function(bubbles,delay){\n      $.each(bubbles,function(){\n        var bubble = this;\n        board.popBubbleAt(bubble.getRow(),bubble.getCol());\n        setTimeout(function(){\n➌        **bubble.setState(BubbleShoot.BubbleState.FALLING);**\n          bubble.getSprite().kaboom({\n            callback : function(){\n              bubble.getSprite().remove();\n➍            **bubble.setState(BubbleShoot.BubbleState.FALLEN);**\n            }\n          })\n        },delay);\n      });\n    };\n  };\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Game = (function($){\n    var Game = function(){\n      --*snip*--\n      this.init = function(){\n➊    **if(BubbleShoot.Renderer){**\n➋      **BubbleShoot.Renderer.init(function(){**\n➌          **$(\".but_start_game\").click(\"click\",startGame);**\n        **});**\n      **}else{**\n          $(\".but_start_game\").click(\"click\",startGame);\n      **};**\n      --*snip*--\n    };\n    return Game;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Renderer = (function($){\n➊  var canvas;\n    var context;\n    var Renderer = {\n➋    init : function(callback){\n➌      canvas = document.createElement(\"canvas\");\n        $(canvas).addClass(\"game_canvas\");\n➍      $(\"#game\").prepend(canvas);\n➎      $(canvas).attr(\"width\",$(canvas).width());\n        $(canvas).attr(\"height\",$(canvas).height());\n        context = canvas.getContext(\"2d\");\n        callback();\n      }\n    };\n    return Renderer;\n  })(jQuery);\n```", "```\n.game_canvas\n{\n  width: 1000px;\n  height: 620px;\n}\n```", "```\n  BubbleShoot.SpriteWrapper = (function($){\n➊  var SpriteWrapper = function(id){\n      var wrappedObject;\n➋    if(BubbleShoot.Renderer){\n➌      wrappedObject = getSpriteObject(id);\n      }else{\n➍      wrappedObject = getJQueryObject(id);\n      }\n➎    this.position = function(){\n        return wrappedObject.position();\n      };\n    };\n    return SpriteWrapper;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Sprite = (function($){\n    var Sprite = function(){\n      var that = this;\n➊    var left;\n      var top;\n➋    this.position = function(){\n        return {\n          left : left,\n          top : top\n        };\n      };\n➌    this.setPosition = function(args){\n        if(arguments.length > 1){\n          return;\n        };\n        if(args.left !== null)\n          left = args.left;\n        if(args.top !== null)\n          top = args.top;\n      };\n➍    this.css = this.setPosition;\n      return this;\n    };\n➎  Sprite.prototype.width = function(){\n      return BubbleShoot.ui.BUBBLE_DIMS;\n    };\n➏  Sprite.prototype.height = function(){\n      return BubbleShoot.ui.BUBBLE_DIMS;\n    };\n➐  Sprite.prototype.removeClass = function(){};\n    Sprite.prototype.addClass = function(){};\n    Sprite.prototype.remove = function(){};\n    Sprite.prototype.kaboom = function(){\n      jQuery.fn.kaboom.apply(this);\n    };\n    return Sprite;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Bubble = (function($){\n    --*snip*--\n    var Bubble = function(row,col,type,sprite){\n      --*snip*--\n    };\n    Bubble.create = function(rowNum,colNum,type){\n      if(!type){\n        type = Math.floor(Math.random() * 4);\n      };\n➊    **if(!BubbleShoot.Renderer){**\n        var sprite = $(document.createElement(\"div\"));\n        sprite.addClass(\"bubble\");\n        sprite.addClass(\"bubble_\" + type);\n      **}else{**\n➋      **var sprite = new BubbleShoot.Sprite();**\n      **}**\n      var bubble = new Bubble(rowNum,colNum,type,sprite);\n      return bubble;\n    };\n    return Bubble;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Board = (function($){\n    var NUM_ROWS = 9;\n    var NUM_COLS = 32;\n    var Board = function(){\n      --*snip*--\n      return this;\n    };\n    var createLayout = function(){\n      var rows = [];\n      for(var i=0;i<NUM_ROWS;i++){\n        var row = [];\n        var startCol = i%2 == 0 ? 1 : 0;\n        for(var j=startCol;j<NUM_COLS;j+=2){\n          var bubble = BubbleShoot.Bubble.create(i,j);\n          bubble.setState(BubbleShoot.BubbleState.ON_BOARD);\n➊        **if(BubbleShoot.Renderer){**\n➋          **var left = j * BubbleShoot.ui.BUBBLE_DIMS/2;**\n            **var top = i * BubbleShoot.ui.ROW_HEIGHT;**\n➌          **bubble.getSprite().setPosition({**\n              **left : left,**\n              **top : top**\n            **});**\n          **};**\n          row[j] = bubble;\n        };\n        rows.push(row);\n      };\n      return rows;\n    };\n    return Board;\n  })(jQuery);\n```", "```\nvar BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Game = (function($){\n  var Game = function(){\n    --*snip*--\n    var getNextBubble = function(){\n      var bubble = BubbleShoot.Bubble.create();\n      bubbles.push(bubble);\n      bubble.setState(BubbleShoot.BubbleState.CURRENT);\n      bubble.getSprite().addClass(\"cur_bubble\");\n      **var top = 470;**\n      **var left = ($(\"#board\").width() - BubbleShoot.ui.BUBBLE_DIMS)/2;**\n      **bubble.getSprite().css({**\n        **top : top,**\n        **left : left**\n      **});**\n      $(\"#board\").append(bubble.getSprite());\n      BubbleShoot.ui.drawBubblesRemaining(numBubbles);\n      numBubbles--;\n      return bubble;\n    };\n    --*snip*-\n  };\n  return Game;\n})(jQuery);\n```", "```\nvar BubbleShoot = window.BubbleShoot || {};\n    var Game = function(){\n      var curBubble;\n      var board;\n      var numBubbles;\n      var bubbles = [];\n      var MAX_BUBBLES = 70;\n➊    **var requestAnimationID;**\n      this.init = function(){\n      };\n      --*snip*--\n        var startGame = function(){\n        $(\".but_start_game\").unbind(\"click\");\n        $(\"#board .bubble\").remove();\n        numBubbles = MAX_BUBBLES;\n        BubbleShoot.ui.hideDialog();\n        board = new BubbleShoot.Board();\n        bubbles = board.getBubbles();\n➋      **if(BubbleShoot.Renderer)**\n        **{**\n          **if(!requestAnimationID)**\n➌          **requestAnimationID = setTimeout(renderFrame,40);**\n        **}else{**\n          BubbleShoot.ui.drawBoard(board);\n        **};**\n        curBubble = getNextBubble(board);\n        $(\"#game\").bind(\"click\",clickGameScreen);\n      };\n    };\n    return Game;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Renderer = (function($){ var canvas;\n    var context;\n➊  **var spriteSheet;**\n➋  **var BUBBLE_IMAGE_DIM = 50;**\n    var Renderer = {\n      init : function(callback){\n        canvas = document.createElement(\"canvas\");\n        $(canvas).addClass(\"game_canvas\");\n        $(\"#game\").prepend(canvas);\n        $(canvas).attr(\"width\",$(canvas).width());\n        $(canvas).attr(\"height\",$(canvas).height());\n        context = canvas.getContext(\"2d\");\n        **spriteSheet = new Image();**\n➌      **spriteSheet.src = \"_img/bubble_sprite_sheet.png\";**\n➍      **spriteSheet.onload = function() {**\n          callback();\n        **};**\n      }\n    };\n    return Renderer;\n  })(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Renderer = (function($){\n    --*snip*--\n    var Renderer = {\n      init : function(callback){\n        --*snip*--\n      },\n➊    **render : function(bubbles){**\n        **context.clearRect(0,0,canvas.width,canvas.height);**\n        **context.translate(120,0);**\n➋      **$.each(bubbles,function(){**\n          **var bubble = this;**\n➌        **var clip = {**\n            **top : bubble.getType() * BUBBLE_IMAGE_DIM,**\n            **left : 0**\n          **};**\n➍        **Renderer.drawSprite(bubble.getSprite(),clip);**\n        **});**\n        **context.translate(-120,0);**\n      **},**\n      **drawSprite : function(sprite,clip){**\n➎      **context.translate(sprite.position().left + sprite.width()/2,sprite.**\n          **position().top + sprite.height()/2);**\n➏      **context.drawImage(spriteSheet,clip.left,clip.top,BUBBLE_IMAGE_DIM,**\n          **BUBBLE_IMAGE_DIM,-sprite.width()/2,-sprite.height()/2,BUBBLE_IMAGE_**\n          **DIM,BUBBLE_IMAGE_DIM);**\n➐      **context.translate(-sprite.position().left - sprite.width()/2,**\n          **-sprite.position().top - sprite.height()/2);**\n      **}**\n    };\n    return Renderer;\n  })(jQuery);\n```", "```\nvar BubbleShoot = window.BubbleShoot || {};\n  var Game = function(){\n    --*snip*--\n    **var renderFrame = function(){**\n      **BubbleShoot.Renderer.render(bubbles);**\n      **requestAnimationID = setTimeout(renderFrame,40);**\n    **};**\n  };\n  return Game;\n})(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Sprite = (function($){\n    var Sprite = function(){\n      --*snip*--\n      this.css = function(args){\n        --*snip*--\n      };\n➊    **this.animate = function(destination,config){**\n➋      **var duration = config.duration;**\n➌      **var animationStart = Date.now();**\n➍      **var startPosition = that.position();**\n➎      **that.updateFrame = function(){**\n          **var elapsed = Date.now() - animationStart;**\n          **var proportion = elapsed/duration;**\n          **if(proportion > 1)**\n            **proportion = 1;**\n➏        **var posLeft = startPosition.left + (destination.left - startPosition.**\n            **left) * proportion;**\n          **var posTop = startPosition.top + (destination.top - startPosition.top)**\n            *** proportion;**\n➐        **that.css({**\n            **left : posLeft,**\n            **top : posTop**\n          **});**\n        **};**\n➑      **setTimeout(function(){**\n➒        **that.updateFrame = null;**\n➓        **if(config.complete)**\n            **config.complete();**\n        **},duration);**\n      **};**\n      return this;\n    };\n    --*snip*--\n    return Sprite;\n  })(jQuery);\n```", "```\n{top: 100,left: 100}\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n    var Game = function(){\n      --*snip*--\n      var renderFrame = function(){\n➊      **$.each(bubbles,function(){**\n➋        **if(this.getSprite().updateFrame)**\n➌          **this.getSprite().updateFrame();**\n        **});**\n        BubbleShoot.Renderer.render(bubbles);\n        requestAnimationID = setTimeout(renderFrame,40);\n      };\n    };\n    return Game;\n  })(jQuery);\n```", "```\nvar BubbleShoot = window.BubbleShoot || {};\nBubbleShoot.ui = (function($){\n  var ui = {\n    --*snip*--\n    fireBubble : function(bubble,coords,duration){\n      --*snip*--\n      if(Modernizr.csstransitions **&& !BubbleShoot.Renderer**){\n        --*snip*--\n      }else{\n        --*snip*--\n      }\n    },\n    --*snip*--\n  };\n  return ui;\n} )(jQuery);\n```", "```\n  var BubbleShoot = window.BubbleShoot || {};\n  BubbleShoot.Renderer = (function($){\n    --*snip*--\n    var Renderer = {\n      init : function(callback){\n        --*snip*--\n      },\n      render : function(bubbles){\n        bubbles.each(function(){\n          var bubble = this;\n          var clip = {\n            top : bubble.getType() * BUBBLE_IMAGE_DIM,\n            left : 0\n          };\n➊        **switch(bubble.getState()){**\n            **case BubbleShoot.BubbleState.POPPING:**\n➋            **var timeInState = bubble.getTimeInState();**\n➌            **if(timeInState < 80){**\n                **clip.left = BUBBLE_IMAGE_DIM;**\n➍            **}else if(timeInState < 140){**\n                **clip.left = BUBBLE_IMAGE_DIM*2;**\n➎            **}else{**\n                **clip.left = BUBBLE_IMAGE_DIM*3;**\n              **};**\n              **break;**\n➏          **case BubbleShoot.BubbleState.POPPED:**\n              **return;**\n➐          **case BubbleShoot.BubbleState.FIRED:**\n              **return;**\n➑          **case BubbleShoot.BubbleState.FALLEN:**\n              **return;**\n          **}**\n  ➒        Renderer.drawSprite(bubble.getSprite(),clip);\n        });\n      },\n      drawSprite : function(sprite,clip){\n        --*snip*--\n      }\n    };\n    return Renderer;\n  })(jQuery);\n```"]