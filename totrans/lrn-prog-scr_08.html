<html><head></head><body><section epub:type="chapter" id="lists" title="Chapter&#xA0;9.&#xA0;Lists"><div class="titlepage"><div class="book"><div class="book"><h2 class="title1">Chapter 9. Lists</h2></div></div></div><p class="calibre3"><a class="calibre" id="iddle1450"/>The programs we’ve written so far have used ordinary variables to store single
pieces of data. Such variables are not as useful, however, when you want to store a bunch of values,
such as your friends’ phone numbers, names of books, or a month of temperature
readings.</p><p class="calibre3">For example, if you wanted your program to remember the phone numbers of 20 of your friends,
you’d need 20 variables! Certainly, writing and maintaining a program with 20 variables would
be tedious. In this chapter, we’ll explore another built-in data type, called a
<span class="calibre"><em class="calibre6">list</em></span>, which offers a convenient way to group related values. Here’s what
we’ll cover:</p><div class="book"><ul class="itemizedlist"><li class="listitem1"><p class="calibre3">How to create and manipulate lists</p></li><li class="listitem1"><p class="calibre3">Initializing and accessing individual elements in a list</p></li><li class="listitem1"><p class="calibre3">Basic sorting and search techniques</p></li><li class="listitem1"><p class="calibre3">Using lists to create powerful applications</p></li></ul></div><p class="calibre3">First, I’ll explain how to make lists in Scratch, demonstrate the commands you can use
with them, and show you how to populate lists with data <a class="calibre" id="iddle1233"/><a class="calibre" id="iddle1323"/><a class="calibre" id="iddle1457"/><a class="calibre" id="iddle1508"/><a class="calibre" id="iddle1849"/><a class="calibre" id="iddle2009"/>entered by a user. We’ll then discuss numeric lists and common operations
performed on them, such as finding the minimum, the maximum, and the average value of their
elements. After that, we’ll learn one algorithm for sorting the elements in a list.
We’ll end with several example programs that demonstrate some real-world applications of
lists.</p><div class="book" title="Lists in Scratch"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="lists_in_scratch">Lists in Scratch</h2></div></div></div><p class="calibre3">A list is like a container where you can store and access multiple values. You can think of it
as a dresser with many drawers, with each drawer storing a single item. When you create a list, you
name it just as you would a variable. You can then access the individual elements of the list using
their storage position in the list. <a class="xref" href="ch09.html#list_that_contains_the_days_of_the_week" title="Figure 9-1. A list that contains the days of the week">Figure 9-1</a>, for
example, depicts a list named <code class="literal">dayList</code> that stores the names of the seven days of
the week.</p><p class="calibre3">You can refer to the items contained in a list using their <span class="calibre"><em class="calibre6">storage index</em></span>
(or position). In Scratch, the first item has an index of 1, the second item is 2, and so on. For
example, since Tuesday is third in the list, it has an index of 3. Therefore, you can refer to the
third element of our <code class="literal">dayList</code> using a command of the form “item 3 of
<code class="literal">dayList</code>.”</p><p class="calibre3">Let’s jump right in and create some lists in Scratch. We’ll also look at the
commands that allow us to manage and manipulate lists in our programs and learn how Scratch responds
to invalid list commands.</p><div class="figure"><a id="list_that_contains_the_days_of_the_week" class="calibre"/><div class="book"><div class="book"><a id="med_id00305" class="calibre"/><img alt="A list that contains the days of the week" src="httpatomoreillycomsourcenostarchimages2134957.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-1. A list that contains the days of the week</div></div><div class="book" title="Creating Lists"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="creating_lists">Creating Lists</h3></div></div></div><p class="calibre3">Creating a list is almost identical to creating a variable. Select the
<span class="calibre"><em class="calibre6">Data</em></span> palette and click <span class="calibre"><strong class="calibre5">Make a List</strong></span> to bring
up the dialog in <a class="xref" href="ch09.html#creating_a_list_in_scratch_is_similar_to" title="Figure 9-2. Creating a list in Scratch is similar to creating a variable.">Figure 9-2</a> (right). Next, enter the
name of the list (we’ll use <code class="literal">dayList</code>) and specify its scope. Choosing the
For all sprites option creates a <span class="calibre"><em class="calibre6">global</em></span> list that any sprite in your
application can access, while the For this sprite only option creates a <span class="calibre"><em class="calibre6">local</em></span>
list that belongs to the currently selected sprite. Local lists can only be read (and written to) by
the owner sprite.</p><p class="calibre3">When you click <span class="calibre"><strong class="calibre5">OK</strong></span> to confirm your input, Scratch creates a
new <span class="calibre"><em class="calibre6">empty list</em></span> and shows the list-related blocks, as illustrated in <a class="xref" href="ch09.html#command_and_function_blocks_that_you_can" title="Figure 9-3. Command and function blocks that you can use with lists">Figure 9-3</a>. This is similar to what you’d see when
you create a new variable. An empty list is a list that does not contain any items.</p><p class="calibre3">You can use these new commands to manipulate the contents of your list while your script is
running. You can append new items, insert items at specific positions, delete certain items, or
replace the values of existing items.</p><div class="figure"><a id="creating_a_list_in_scratch_is_similar_to" class="calibre"/><div class="book"><div class="book"><a id="med_id00306" class="calibre"/><img alt="Creating a list in Scratch is similar to creating a variable." src="httpatomoreillycomsourcenostarchimages2134959.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-2. Creating a list in Scratch is similar to creating a variable.</div></div><div class="figure"><a id="command_and_function_blocks_that_you_can" class="calibre"/><div class="book"><div class="book"><a id="med_id00307" class="calibre"/><img alt="Command and function blocks that you can use with lists" src="httpatomoreillycomsourcenostarchimages2134961.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-3. Command and function blocks that you can use with lists</div></div><p class="calibre3"><a class="calibre" id="iddle1174"/><a class="calibre" id="iddle1250"/><a class="calibre" id="iddle1257"/><a class="calibre" id="iddle1260"/><a class="calibre" id="iddle1540"/>When a new list is created, Scratch also shows the list’s monitor on the Stage, as
illustrated in <a class="xref" href="ch09.html#monitor_of_a_newly_created_list_is_shown" title="Figure 9-4. The monitor of a newly created list is shown on the Stage.">Figure 9-4</a>. The list will initially
be empty, so its length starts at 0. You can use this monitor block to add entries to your list as
you design a program.</p><div class="figure"><a id="monitor_of_a_newly_created_list_is_shown" class="calibre"/><div class="book"><div class="book"><a id="med_id00308" class="calibre"/><img alt="The monitor of a newly created list is shown on the Stage." src="httpatomoreillycomsourcenostarchimages2134963.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-4. The monitor of a newly created list is shown on the Stage.</div></div><p class="calibre3">If you know the data that you want to store in the list (as is the case for our
<code class="literal">dayList</code>), you can add it to the list at this point. <a class="xref" href="ch09.html#populating_the_daylist" title="Figure 9-5. Populating the dayList">Figure 9-5</a> shows how you can add days to the <code class="literal">dayList</code>
using its monitor.</p><div class="figure"><a id="populating_the_daylist" class="calibre"/><div class="book"><div class="book"><a id="med_id00309" class="calibre"/><img alt="Populating the dayList" src="httpatomoreillycomsourcenostarchimages2134965.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-5. Populating the <code class="literal">dayList</code></div></div><p class="calibre3"><a class="calibre" id="iddle1076"/><a class="calibre" id="iddle1170"/><a class="calibre" id="iddle1172"/><a class="calibre" id="iddle1246"/><a class="calibre" id="iddle1249"/><a class="calibre" id="iddle1452"/><a class="calibre" id="iddle1454"/>Click the plus sign at the lower-left corner seven times to create seven entries and
then enter a day of the week inside each edit box. Use the TAB key to navigate through the list
items. Pressing TAB once highlights the next list item with a yellow border. Pressing TAB another
time highlights the editable text of the selected item and removes the yellow border. If you click
the plus sign while the currently selected item is surrounded by a yellow border, the new list item
will be added after the current item; otherwise, it will be added before the current item. Try
navigating the list!</p><div class="sidebar"><a id="try_it_out_9-1" class="calibre"/><div class="sidebar-title">Try It Out 9-1</div><p class="calibre3">Populate <code class="literal">dayList</code> with the names of the weekdays, as shown in <a class="xref" href="ch09.html#populating_the_daylist" title="Figure 9-5. Populating the dayList">Figure 9-5</a>.</p></div></div><div class="book" title="List Commands"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="list_commands">List Commands</h3></div></div></div><p class="calibre3"><a class="xref" href="ch09.html#command_and_function_blocks_that_you_can" title="Figure 9-3. Command and function blocks that you can use with lists">Figure 9-3</a> described all the blocks that
Scratch added when we created our <code class="literal">dayList</code>. In this section, we’ll look more
closely at these blocks to better understand their function.</p><div class="book" title="Add and Delete"><div class="titlepage1"><div class="book"><div class="book"><h4 class="title5" id="add_and_delete">Add and Delete</h4></div></div></div><p class="calibre3">The <span class="calibre"><strong class="calibre5">add</strong></span> command places a new item at the end of a list,
while the <span class="calibre"><strong class="calibre5">delete</strong></span> command removes an item from a specific
position. <a class="xref" href="ch09.html#list_before_and_after_add_and_delete_are" title="Figure 9-6. A list before and after add and delete are used to change its contents">Figure 9-6</a> shows these commands in
action.</p><p class="calibre3">The script first executes the <span class="calibre"><strong class="calibre5">delete</strong></span> command to remove the
second item of the list, which is “Orange.” The script then puts “Lemon” at
the end of the list using the <span class="calibre"><strong class="calibre5">add</strong></span> command.</p><div class="figure"><a id="list_before_and_after_add_and_delete_are" class="calibre"/><div class="book"><div class="book"><a id="med_id00310" class="calibre"/><img alt="A list before and after add and delete are used to change its contents" src="httpatomoreillycomsourcenostarchimages2134967.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-6. A list before and after <span class="calibre">add</span> and <span class="calibre">delete</span> are used to change its contents</div></div><p class="calibre3"><a class="calibre" id="iddle1175"/><a class="calibre" id="iddle1253"/><a class="calibre" id="iddle1258"/><a class="calibre" id="iddle1456"/>The <span class="calibre"><strong class="calibre5">add</strong></span> command is straightforward, but let’s
examine the <span class="calibre"><strong class="calibre5">delete</strong></span> command more closely. You can type the index
of the element you want to delete directly into the block’s parameter slot, or you can click
the drop-down arrow. The drop-down menu (see <a class="xref" href="ch09.html#list_before_and_after_add_and_delete_are" title="Figure 9-6. A list before and after add and delete are used to change its contents">Figure 9-6</a>) shows three options: 1, last, and all. Select
1 to delete the first item (“Apple”) from the list, select last to delete the last item
(“Mango”), or select all to delete all the items from the list.</p></div><div class="book" title="Insert and Replace"><div class="titlepage1"><div class="book"><div class="book"><h4 class="title5" id="insert_and_replace">Insert and Replace</h4></div></div></div><p class="calibre3">Let’s say you want to store your friends’ names and phone numbers alphabetically
in a list, just like the contacts list in your cell phone. As you make your list, you need to insert
each friend’s contact information at the proper position. Later, if one friend gets a new
phone number, you’ll need to edit the list to enter it. The <span class="calibre"><strong class="calibre5">insert</strong></span> and <span class="calibre"><strong class="calibre5">replace</strong></span> commands can help you with these
tasks. <a class="xref" href="ch09.html#using_the_insert_and_the_replace_command" title="Figure 9-7. Using the insert and the replace commands to update a list of telephone numbers">Figure 9-7</a> shows an example of using the
<span class="calibre"><strong class="calibre5">insert</strong></span> and <span class="calibre"><strong class="calibre5">replace</strong></span> commands
with our <code class="literal">phone</code> list.</p><div class="figure"><a id="using_the_insert_and_the_replace_command" class="calibre"/><div class="book"><div class="book"><a id="med_id00311" class="calibre"/><img alt="Using the insert and the replace commands to update a list of telephone numbers" src="httpatomoreillycomsourcenostarchimages2134969.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-7. Using the <span class="calibre">insert</span> and the <span class="calibre">replace</span> commands to update a list of telephone numbers</div></div><p class="calibre3">The <span class="calibre"><strong class="calibre5">replace</strong></span> command overwrites the current string at slot
number 3 with Kim’s new phone number. The <span class="calibre"><strong class="calibre5">insert</strong></span> command
places the phone number of a new friend, Mark, at slot number 4 in the list. Notice that the
existing elements moved down one slot to make room for the new entry.</p><p class="calibre3">Clicking the item number’s down arrow in both the <span class="calibre"><strong class="calibre5">replace</strong></span> and the <span class="calibre"><strong class="calibre5">insert</strong></span> commands shows a drop-down
menu of three options: 1, last, and random (see <a class="xref" href="ch09.html#using_the_insert_and_the_replace_command" title="Figure 9-7. Using the insert and the replace commands to update a list of telephone numbers">Figure 9-7</a>). If you select random, the selected command
will choose an item number randomly. You’ll see some useful applications of this feature later
in this chapter.</p></div><div class="book" title="Accessing List Elements"><div class="titlepage1"><div class="book"><div class="book"><h4 class="title5" id="accessing_list_elements">Accessing List Elements</h4></div></div></div><p class="calibre3"><a class="calibre" id="iddle1171"/><a class="calibre" id="iddle1173"/><a class="calibre" id="iddle1254"/><a class="calibre" id="iddle1255"/><a class="calibre" id="iddle1256"/><a class="calibre" id="iddle1453"/><a class="calibre" id="iddle1455"/>As we mentioned earlier, you can access any element in a list using that element’s
index. For example, the script in <a class="xref" href="ch09.html#this_script_causes_the_sprite_to_display" title="Figure 9-8. This script causes the sprite to display the seven days of our dayList.">Figure 9-8</a>
demonstrates using the <span class="calibre"><strong class="calibre5">item of</strong></span> block to access the elements of
our <code class="literal">dayList</code>. The script uses a variable named <code class="literal">pos</code> (short for
<span class="calibre"><em class="calibre6">position</em></span>) to iterate through each item of the list, showing the contents via
the <span class="calibre"><strong class="calibre5">say</strong></span> command.</p><div class="figure"><a id="this_script_causes_the_sprite_to_display" class="calibre"/><div class="book"><div class="book"><a id="med_id00312" class="calibre"/><img alt="This script causes the sprite to display the seven days of our dayList." src="httpatomoreillycomsourcenostarchimages2134971.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-8. This script causes the sprite to display the seven days of our
<code class="literal">dayList</code>.</div></div><p class="calibre3">The script initializes the value of <code class="literal">pos</code> to 1 so it can access the first
element in <code class="literal">dayList</code>, and then the script enters a loop. The loop’s repeat
count is set to 7, the number of elements in our list. On each pass, the loop will say the list item
with an index equal to <code class="literal">pos</code> and increment the value of <code class="literal">pos</code> to
access the next element. In other words, we’re using <code class="literal">pos</code> as an index to
pinpoint a specific element in the list.</p><div class="sidebar"><a id="try_it_out_9-2" class="calibre"/><div class="sidebar-title">Try It Out 9-2</div><p class="calibre3">Replace the literal number 7 in the repeat loop with the <span class="calibre"><strong class="calibre5">length of
dayList</strong></span> block. This is what you’d normally do to step through a list if you
didn’t know how many items it contained. Also, select <span class="calibre"><strong class="calibre5">random</strong></span> from the first drop-down menu in the <span class="calibre"><strong class="calibre5">item of</strong></span>
block. This should cause the script to display an item from the list at random.</p></div></div><div class="book" title="The Contains Block"><div class="titlepage1"><div class="book"><div class="book"><h4 class="title5" id="contains_block">The Contains Block</h4></div></div></div><p class="calibre3">You can check whether a certain string is in a list by using <span class="calibre"><strong class="calibre5">contains</strong></span>, a Boolean block that returns true or false based on whether or not the list
contains your string. The script shown in <a class="xref" href="ch09.html#using_the_contains_block_to_check_whethe" title="Figure 9-9. Using the contains block to check whether a string is in a list">Figure 9-9</a>
illustrates one use of this block. Since <code class="literal">dayList</code> contains the string
“Friday”, the <span class="calibre"><strong class="calibre5">say</strong></span> command inside the <span class="calibre"><strong class="calibre5">if</strong></span> block will be executed.</p><div class="note" title="Note"><h3 class="title4"><a id="ch09note01" class="firstname"/>Note</h3><p class="calibre3"><span class="calibre"><em class="calibre6">The</em></span>
<span class="calibre"><strong class="calibre5">contains</strong></span>
<span class="calibre"><em class="calibre6">block is case insensitive. The block</em></span>
<span class="calibre"><strong class="calibre5">dayList contains friDAY</strong></span><span class="calibre"><em class="calibre6">, for example, would also
evaluate to true.</em></span></p></div><div class="figure"><a id="using_the_contains_block_to_check_whethe" class="calibre"/><div class="book"><div class="book"><a id="med_id00313" class="calibre"/><img alt="Using the contains block to check whether a string is in a list" src="httpatomoreillycomsourcenostarchimages2134973.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-9. Using the <span class="calibre">contains</span> block to check whether a string is in a
list</div></div></div></div><div class="book" title="Bounds Checking"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="bounds_checking">Bounds Checking</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1451"/><a class="calibre" id="iddle1644"/>The four list blocks (<span class="calibre"><strong class="calibre5">delete</strong></span>, <span class="calibre"><strong class="calibre5">insert</strong></span>, <span class="calibre"><strong class="calibre5">replace</strong></span>, and <span class="calibre"><strong class="calibre5">item
of</strong></span>) require an input parameter that specifies the index of the item you want to access.
For example, to delete the seventh element of our <code class="literal">dayList</code>, we use <span class="calibre"><strong class="calibre5">delete 7 of dayList</strong></span>. But what do you think will happen if you use an
invalid index with one of these blocks? For example, how would Scratch respond if you asked it to
delete the eighth element of our <code class="literal">dayList</code> (which only contains seven
elements)?</p><p class="calibre3">Trying to access an element past the boundaries of a list is, technically, an error. Rather
than display an error message or abruptly terminate your program, however, Scratch silently tries to
do something sensible with the offending block. For this reason, the absence of error messages does
not necessarily mean the absence of errors. Problems may still exist in your code, and when they do,
you still need to fix them. Scratch won’t complain about invalid indexes in your blocks, but
the outcome usually won’t be what you intended. <a class="xref" href="ch09.html#unexpected_results_from_bad_list_indexes" title="Table 9-1. Unexpected Results from Bad List Indexes">Table 9-1</a> shows what can happen when you try to access
<code class="literal">dayList</code> using an out-of-range index.</p><div class="table"><a id="unexpected_results_from_bad_list_indexes" class="calibre"/><div class="table-title">Table 9-1. Unexpected Results from Bad List Indexes</div><div class="book"><table class="calibre9"><colgroup class="calibre10"><col class="c"/><col class="c"/></colgroup><thead class="calibre11"><tr class="calibre12"><td class="calibre13"><p class="calibre3">Command or Function Block</p></td><td class="calibre14"><p class="calibre3">Result</p></td></tr></thead><tbody class="calibre15"><tr class="calibre12"><td class="calibre16"><div class="informalfigure"><div class="book"><a id="I_mediaobject9_id324170" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134975.png.jpg" class="calibre7"/></div></div></td><td class="calibre17"><p class="calibre3">Returns an empty string because <code class="literal2">dayList</code> has only seven
items. The same thing happens if you use an index less than 1.</p></td></tr><tr class="calibre18"><td class="calibre16"><div class="informalfigure"><div class="book"><a id="I_mediaobject9_id324208" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134977.png.jpg" class="calibre7"/></div></div></td><td class="calibre17"><p class="calibre3">Scratch ignores the .9 and returns the first item of
<code class="literal2">dayList</code>, which is “Sunday”. Similarly, if you asked for item 5.3,
Scratch would return the fifth item, “Thursday”.</p></td></tr><tr class="calibre12"><td class="calibre16"><div class="informalfigure"><div class="book"><a id="I_mediaobject9_id324247" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134979.png.jpg" class="calibre7"/></div></div></td><td class="calibre17"><p class="calibre3">Scratch ignores this command because it attempts to create a gap in the
list. The list remains unchanged.</p></td></tr><tr class="calibre18"><td class="calibre16"><div class="informalfigure"><div class="book"><a id="I_mediaobject9_id324282" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134981.png.jpg" class="calibre7"/></div></div></td><td class="calibre17"><p class="calibre3">This has the same effect as the <span class="calibre"><strong class="calibre5">add</strong></span>
command. It adds “Newday” to the end of the list.</p></td></tr><tr class="calibre12"><td class="calibre19"><div class="informalfigure"><div class="book"><a id="I_mediaobject9_id324323" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134983.png.jpg" class="calibre7"/></div></div></td><td class="calibre20"><p class="calibre3">The command is ignored (because <code class="literal2">dayList</code> has only seven
elements), and the list remains unchanged.</p></td></tr></tbody></table></div></div><p class="calibre3"><a class="calibre" id="iddle1458"/><a class="calibre" id="iddle1459"/><a class="calibre" id="iddle1906"/>The examples in <a class="xref" href="ch09.html#unexpected_results_from_bad_list_indexes" title="Table 9-1. Unexpected Results from Bad List Indexes">Table 9-1</a> demonstrate
that, although Scratch’s blocks try to do something sensible when their inputs are invalid,
they won’t necessarily do the right thing. You have to provide your program with the right
inputs so it works the way you want it to.</p><p class="calibre3">Up to this point, our examples have used simple lists that we created manually using their
monitors. The question now is this: What if you don’t know the contents of a list when you
write your program? For example, you may need to make a list of user-entered numbers or fill a list
with random values each time the program is run. We’ll tackle this problem next.</p></div></div><div class="book" title="Dynamic Lists"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="dynamic_lists">Dynamic Lists</h2></div></div></div><p class="calibre3">Lists are powerful because they can grow or shrink dynamically as a program is running.
Let’s say, for example, that you are writing a grade book application, in which teachers can
enter students’ test scores for further processing. (The teacher might need to find the
maximum score, minimum, average, median, and so on for a class.) However, the number of students may
be different for every class. The teacher may need to enter 20 scores for Class 1, 25 scores for
Class 2, and so on. How can your program know that the teacher has finished entering the scores?
This section will answer that question.</p><p class="calibre3">First, we’ll introduce two ways to populate lists with data from a user. We’ll
then explore numeric lists and look at some of the common operations performed on them. Once you
understand the fundamental concepts, you’ll be ready to adapt these techniques to your own
applications.</p><div class="book" title="Filling Lists with User Input"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="filling_lists_with_user_input">Filling Lists with User Input</h3></div></div></div><p class="calibre3">There are two common ways to fill a list with data entered by a user. In the first method,
your program begins by asking how many entries there will be and then starts a loop to collect the
user’s input. A script that demonstrates this technique is shown in <a class="xref" href="ch09.html#asking_the_user_how_many_scores_will_be" title="Figure 9-10. Asking the user how many scores will be entered">Figure 9-10</a>.</p><div class="figure"><a id="asking_the_user_how_many_scores_will_be" class="calibre"/><div class="book"><div class="book"><a id="med_id00314" class="calibre"/><img alt="Asking the user how many scores will be entered" src="httpatomoreillycomsourcenostarchimages2134985.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-10. Asking the user how many scores will be entered</div></div><p class="calibre3">Once the user tells this script how many scores to expect, the script starts a loop with a
repetition count equal to the user’s input. Each iteration of the loop then asks the user for
a new score and appends that value to the list, called <code class="literal">scoreList</code>.</p><p class="calibre3">The second way to dynamically populate a list is to have the user enter a special value (known
as a <span class="calibre"><em class="calibre6">sentinel</em></span>) to mark the end of the list. Of course, you should choose a
sentinel that won’t be mistaken for a member of the list. If you’re expecting a list of
names or positive numbers, for example, a sentinel of –1 is a good choice. If, on the other
hand, the user will enter negative values, then –1 won’t be a good sentinel. Using a
sentinel of –1 will <a class="calibre" id="iddle1062"/><a class="calibre" id="iddle1063"/><a class="calibre" id="iddle1421"/><a class="calibre" id="iddle1741"/>work for our <code class="literal">scoreList</code>, and the script shown in <a class="xref" href="ch09.html#using_a_sentinel_to_control_list_growth" title="Figure 9-11. Using a sentinel to control list growth">Figure 9-11</a> uses this sentinel to know when the user is done
entering values.</p><div class="figure"><a id="using_a_sentinel_to_control_list_growth" class="calibre"/><div class="book"><div class="book"><a id="med_id00315" class="calibre"/><img alt="Using a sentinel to control list growth" src="httpatomoreillycomsourcenostarchimages2134987.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-11. Using a sentinel to control list growth</div></div><p class="calibre3">In each iteration of the loop, the script prompts the user to enter a number and compares that
value to the sentinel. Note that the script specifies the sentinel (–1 in this case) in its
prompt to the user. If the user enters –1, then the script stops because it knows the user is
done entering scores. Otherwise, the input value is appended to the list, and the user is prompted
for another entry. <a class="xref" href="ch09.html#using_a_sentinel_to_control_list_growth" title="Figure 9-11. Using a sentinel to control list growth">Figure 9-11</a> shows how
<code class="literal">scoreList</code> should look if the user enters three scores followed by the
sentinel.</p></div><div class="book" title="Creating a Bar Chart"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="creating_a_bar_chart">Creating a Bar Chart</h3></div></div></div><p class="calibre3">As a practical example of collecting user input with lists, let’s write an application
that draws a bar chart (also called a <span class="calibre"><em class="calibre6">histogram</em></span>) from the user’s numbers.
For simplicity, we’ll only accept five numbers between 1 and 40. Once the program has received
all five numbers, it will draw five bars with heights proportional to the entered values. The user
interface for our chart maker is illustrated in <a class="xref" href="ch09.html#bar_chart_application" title="Figure 9-12. The Bar Chart application">Figure 9-12</a>.</p><p class="calibre3"><span class="calibre"><em class="calibre6">BarChart.sb2</em></span></p><div class="figure"><a id="bar_chart_application" class="calibre"/><div class="book"><div class="book"><a id="med_id00316" class="calibre"/><img alt="The Bar Chart application" src="httpatomoreillycomsourcenostarchimages2134989.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-12. The Bar Chart application</div></div><p class="calibre3">This application contains three sprites. The <code class="literal">Driver</code> sprite controls the
flow of the application; it contains scripts that accept user input, populate the list, and tell the
<code class="literal">Painter</code> sprite to start drawing. The <code class="literal">Painter</code> sprite is an
invisible sprite that draws the bar chart. The <code class="literal">Frame</code> sprite is purely cosmetic;
it hides the bottom of each bar to make it look flat; without it, the bottoms of the vertical bars
would have rounded tips. The numerical values for the five bars are shown using five variables,
named <code class="literal">n1</code> through <code class="literal">n5</code>, whose monitors are located at the right
positions on the Stage. When you click the green flag icon to start the application, the
<code class="literal">Driver</code> sprite runs the script shown in <a class="xref" href="ch09.html#main_script_for_the_driver_sprite" title="Figure 9-13. The main script for the Driver sprite">Figure 9-13</a>.</p><div class="figure"><a id="main_script_for_the_driver_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00317" class="calibre"/><img alt="The main script for the Driver sprite" src="httpatomoreillycomsourcenostarchimages2134991.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-13. The main script for the <code class="literal">Driver</code> sprite</div></div><p class="calibre3">First, the <code class="literal">Driver</code> sprite appears on the Stage and clears any previous pen
marks ①. That way, if there is a bar chart already, it will be cleared before the new one is
drawn. The script then clears <code class="literal">numList</code> so we can use it to collect new entries
from the user and calls <span class="calibre"><strong class="calibre5">ShowValues</strong></span> ② to set
<code class="literal">n1</code> through <code class="literal">n5</code> so their monitors will be blank.</p><p class="calibre3">When the Stage is prepared, the script enters a <span class="calibre"><strong class="calibre5">repeat</strong></span> loop
③, which iterates five times. Inside the loop, the <code class="literal">Driver</code> asks the user to
enter a number and appends that number to <code class="literal">numList</code>. After collecting all five
numbers from the user and saving them in <code class="literal">numList</code>, the <code class="literal">Driver</code>
sprite hides itself ④ to make room for the bar chart. It then calls <span class="calibre"><strong class="calibre5">ShowValues</strong></span> again to update <code class="literal">n1</code> through <code class="literal">n5</code> with the
user’s new values and broadcasts <code class="literal">Draw</code> so the <code class="literal">Painter</code>
sprite will draw the five bars.</p><p class="calibre3">Before examining how the <code class="literal">Painter</code> draws the bars, let’s look at the
<span class="calibre"><strong class="calibre5">ShowValues</strong></span> procedure shown in <a class="xref" href="ch09.html#showvalues_procedure" title="Figure 9-14. The ShowValues procedure">Figure 9-14</a>.</p><div class="figure"><a id="showvalues_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00318" class="calibre"/><img alt="The ShowValues procedure" src="httpatomoreillycomsourcenostarchimages2134993.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-14. The <code class="literal">ShowValues</code> procedure</div></div><p class="calibre3"><span class="calibre"><strong class="calibre5">ShowValues</strong></span> simply sets the variables <code class="literal">n1</code>
through <code class="literal">n5</code> equal to their corresponding entries in <code class="literal">numList</code>.
Since the first call to <span class="calibre"><strong class="calibre5">ShowValues</strong></span> is made immediately after
clearing <code class="literal">numList</code>, all five variables will contain empty strings after this call.
This results in clearing the five monitors on the Stage, which is exactly what we want. When
<code class="literal">numList</code> contains data from the user, calling <span class="calibre"><strong class="calibre5">ShowValues</strong></span> displays the data in those same monitors.</p><p class="calibre3">Now let’s explore the <span class="calibre"><strong class="calibre5">Draw</strong></span> procedure, which is
executed when the <code class="literal">Painter</code> sprite receives the <code class="literal">Draw</code> message.
You can see this script in <a class="xref" href="ch09.html#draw_script_of_the_painter_sprite" title="Figure 9-15. The Draw script of the Painter sprite">Figure 9-15</a>.</p><div class="figure"><a id="draw_script_of_the_painter_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00319" class="calibre"/><img alt="The Draw script of the Painter sprite" src="httpatomoreillycomsourcenostarchimages2134995.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-15. The <span class="calibre">Draw</span> script of the <code class="literal">Painter</code>
sprite</div></div><p class="calibre3">The sprite first sets the pen color. Then it sets the pen’s size to a large value to
draw the thick bars. To prepare for drawing the five vertical bars, the sprite points in the up
direction ①.</p><p class="calibre3">The script starts a repeat loop to draw the five bars ②. We knew the
<span class="calibre"><em class="calibre6">x</em></span>-position of each bar in advance, so we created a list named
<code class="literal">xPos</code> to store those values (also shown in the figure). During each iteration of
the loop, the <code class="literal">Painter</code> sprite moves to the <span class="calibre"><em class="calibre6">x</em></span>-position for the
current bar, puts its pen down, and then moves up to draw a vertical line.</p><p class="calibre3">The height of each line is proportional to the corresponding value in
<code class="literal">numList</code>. Our chart area on the Stage is 224 pixels tall, and since 40 is the
highest value, an input of 40 should have a bar as tall as the chart. To find the height (in pixels)
for any number in <code class="literal">numList</code>, we need to multiply that number by 5.6 (that is,
224/40). <a class="xref" href="ch09.html#sample_output_of_the_bar_chart_applicati" title="Figure 9-16. A sample output of the Bar Chart application">Figure 9-16</a> shows the output of the
application after getting some data from the user. Note that the <code class="literal">Frame</code> sprite
covers the rounded tip of the wide drawing pen so the bars look flat at the bottom.</p><div class="figure"><a id="sample_output_of_the_bar_chart_applicati" class="calibre"/><div class="book"><div class="book"><a id="med_id00320" class="calibre"/><img alt="A sample output of the Bar Chart application" src="httpatomoreillycomsourcenostarchimages2134997.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-16. A sample output of the Bar Chart application</div></div><div class="sidebar"><a id="try_it_out_9-3" class="calibre"/><div class="sidebar-title">Try It Out 9-3</div><p class="calibre3"><a class="calibre" id="iddle1352"/><a class="calibre" id="iddle1355"/><a class="calibre" id="iddle1460"/><a class="calibre" id="iddle1463"/><a class="calibre" id="iddle1519"/><a class="calibre" id="iddle1532"/><a class="calibre" id="iddle1754"/>Run this application several times to understand how it works. Change the script so that
each bar will be drawn in a different color. Hint: Create a new list, named
<code class="literal">color</code>, for the <code class="literal">Painter</code> sprite that stores the color number of
the five bars and use the following command before drawing each bar:</p><div class="informalfigure"><a id="med_id00321a" class="calibre"/><div class="book"><a id="med_id00321" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134999.png.jpg" class="calibre7"/></div></div></div></div></div><div class="book" title="Numerical Lists"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="numerical_lists">Numerical Lists</h2></div></div></div><p class="calibre3">Lists of numbers appear in many practical applications. We can have lists of test scores,
temperature measurements, product prices, and more. In this section, we’ll explore some common
operations you might want to perform on numerical lists. In particular, we’ll write procedures
for finding the maximum or minimum value and for finding the average of the numbers stored in a
list.</p><div class="book" title="Finding Min and Max"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="finding_min_and_max">Finding Min and Max</h3></div></div></div><p class="calibre3">Suppose you’re a teacher and you need to know the highest score from the last exam your
class took. You could write a program to compare all of those test scores and find the maximum
value. Our first example, shown in <a class="xref" href="ch09.html#finding_the_maximum_number_in_a_list" title="Figure 9-17. Finding the maximum number in a list">Figure 9-17</a>, finds the
highest number in a list named <code class="literal">score</code>.</p><p class="calibre3"><span class="calibre"><em class="calibre6">FindMax.sb2</em></span></p><p class="calibre3">The <span class="calibre"><strong class="calibre5">FindMax</strong></span> procedure starts by setting the value of the
<code class="literal">maxScore</code> variable equal to the first number in the list. It then starts a loop to
compare the remaining numbers in the list with the current value of <code class="literal">maxScore</code>.
Every time it finds a value greater than <code class="literal">maxScore</code>, it sets
<code class="literal">maxScore</code> equal to that value. When the loop terminates, the value stored in
<code class="literal">maxScore</code> will be the largest value contained in the list.</p><div class="figure"><a id="finding_the_maximum_number_in_a_list" class="calibre"/><div class="book"><div class="book"><a id="med_id00322" class="calibre"/><img alt="Finding the maximum number in a list" src="httpatomoreillycomsourcenostarchimages2135001.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-17. Finding the maximum number in a list</div></div><p class="calibre3"><a class="calibre" id="iddle1011"/><a class="calibre" id="iddle1050"/><a class="calibre" id="iddle1351"/><a class="calibre" id="iddle1353"/><a class="calibre" id="iddle1753"/>Finding the minimum value in a list follows a similar algorithm. We start by assuming
that the first element in the list is the smallest element and then use a loop to check the
remaining elements. Each time we find a smaller value, we update the variable that holds the minimum
value.</p><div class="sidebar"><a id="try_it_out_9-4" class="calibre"/><div class="sidebar-title">Try It Out 9-4</div><p class="calibre3">Use what you learned in this section to create a procedure called <span class="calibre"><strong class="calibre5">FindMin</strong></span> that finds the minimum value of the <code class="literal">score</code> list.</p></div></div><div class="book" title="Finding the Average"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="finding_the_average">Finding the Average</h3></div></div></div><p class="calibre3">In our next example, we’ll write a procedure that computes the average score of the
numbers stored in our <code class="literal">score</code> list. You can find the average of a sequence of
<span class="calibre"><em class="calibre6">N</em></span> numbers by first finding their sum and then dividing the total by
<span class="calibre"><em class="calibre6">N</em></span>. The procedure shown in <a class="xref" href="ch09.html#finding_the_average_value_of_a_list_of_n" title="Figure 9-18. Finding the average value of a list of numbers">Figure 9-18</a> does exactly that.</p><p class="calibre3"><span class="calibre"><em class="calibre6">FindAverage.sb2</em></span></p><div class="figure"><a id="finding_the_average_value_of_a_list_of_n" class="calibre"/><div class="book"><div class="book"><a id="med_id00323" class="calibre"/><img alt="Finding the average value of a list of numbers" src="httpatomoreillycomsourcenostarchimages2135003.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-18. Finding the average value of a list of numbers</div></div><p class="calibre3">The <span class="calibre"><strong class="calibre5">FindAverage</strong></span> procedure uses a loop to step through the
scores stored in the list, add them together, and store the result in a variable named
<code class="literal">sum</code>. (This variable is initialized to 0 before the start of the loop.) When the
loop terminates, the script calculates the average by dividing <code class="literal">sum</code> by the number
of scores, and it saves the result in a variable named <code class="literal">average</code>.</p><div class="note" title="Note"><h3 class="title4"><a id="ch09note02" class="firstname"/>Note</h3><p class="calibre3"><span class="calibre"><em class="calibre6">Pay special attention to the way we accumulated the</em></span> sum
<span class="calibre"><em class="calibre6">variable inside the loop. This pattern, known as the</em></span> accumulator
pattern<span class="calibre"><em class="calibre6">, comes up very often in programming.</em></span></p></div><p class="calibre3">In the next section, we’ll explore how to search and sort lists, two common problems in
programming. I’ll also walk you through some simple algorithms for performing each
operation.</p><div class="sidebar"><a id="try_it_out_9-5" class="calibre"/><div class="sidebar-title">Try It Out 9-5</div><p class="calibre3"><a class="calibre" id="iddle1447"/><a class="calibre" id="iddle1464"/><a class="calibre" id="iddle1768"/><a class="calibre" id="iddle1877"/><a class="calibre" id="iddle1878"/><a class="calibre" id="iddle1879"/><a class="calibre" id="iddle1908"/>Combine <span class="calibre"><strong class="calibre5">FindAverage</strong></span>, <span class="calibre"><strong class="calibre5">FindMax</strong></span>, and <span class="calibre"><strong class="calibre5">FindMin</strong></span> into one procedure (called
<span class="calibre"><strong class="calibre5">ProcessList</strong></span>) that will display the average, maximum, and minimum
values for the <code class="literal">score</code> list all at the same time.</p></div></div></div><div class="book" title="Searching and Sorting Lists"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="searching_and_sorting_lists">Searching and Sorting Lists</h2></div></div></div><p class="calibre3">Suppose you have a list of contacts that isn’t in any particular order. If you wanted to
organize the contacts, you might <span class="calibre"><em class="calibre6">sort</em></span> them into alphabetical order based on
their names. If you need to know someone’s phone number and you have their last name,
you’ll need to <span class="calibre"><em class="calibre6">search</em></span> the list to see if it contains that person’s
contact information. The goal of this section is to introduce basic programming techniques for
searching and sorting lists.</p><div class="book" title="Linear Search"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="linear_search">Linear Search</h3></div></div></div><p class="calibre3">Scratch’s <span class="calibre"><strong class="calibre5">contains</strong></span> block provides an easy way to
check whether a list contains a specific item. If, in addition, we’d like to know the position
of the item being searched for in a list, then we have to perform the search ourselves.</p><p class="calibre3"><span class="calibre"><em class="calibre6">SearchList.sb2</em></span></p><p class="calibre3">This section will explain one method for searching lists, called a <span class="calibre"><em class="calibre6">linear
search</em></span> (or <span class="calibre"><em class="calibre6">sequential search</em></span>). The method is easy to understand and
implement, and it works on any list, whether it is sorted or not. However, because a linear search
compares the target value with every element in the list, it can take a long time if your list is
large.</p><p class="calibre3">To illustrate, suppose you’re searching for a specific item in a list named
<code class="literal">fruit</code>. If the list contains the item you are looking for, you also need to know
the exact position of that item. The <span class="calibre"><strong class="calibre5">SearchList</strong></span> procedure shown
in <a class="xref" href="ch09.html#searchlist_procedure" title="Figure 9-19. The SearchList procedure">Figure 9-19</a> performs a linear search on the <code class="literal">fruit</code>
list to give us the answers we seek.</p><div class="figure"><a id="searchlist_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00324" class="calibre"/><img alt="The SearchList procedure" src="httpatomoreillycomsourcenostarchimages2135005.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-19. The <span class="calibre">SearchList</span> procedure</div></div><p class="calibre3"><a class="calibre" id="iddle1389"/><a class="calibre" id="iddle1436"/><a class="calibre" id="iddle1462"/><a class="calibre" id="iddle1763"/>Starting with the first element, <span class="calibre"><strong class="calibre5">SearchList</strong></span> compares
the fruits in our list, one by one, with the one we’re looking for, which is represented by
the <code class="literal">target</code> parameter. The procedure stops if it either finds the value or reaches
the end of the list. If the script finds the value we want, the <code class="literal">pos</code> variable will
contain the location where the item was found. Otherwise, the procedure sets <code class="literal">pos</code>
to an invalid value (–1 in this case) to indicate that the target item was not in the list.
<a class="xref" href="ch09.html#using_the_searchlist_procedure" title="Figure 9-20. Using the SearchList procedure">Figure 9-20</a> shows an example of calling this procedure and its
corresponding output.</p><div class="figure"><a id="using_the_searchlist_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00325" class="calibre"/><img alt="Using the SearchList procedure" src="httpatomoreillycomsourcenostarchimages2135007.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-20. Using the <span class="calibre">SearchList</span> procedure</div></div><p class="calibre3">Examining the value of <code class="literal">pos</code> tells the caller two things: (a) whether the
item we’re looking for is in the list or not and (b) if the item exists, its exact position.
Running this script sets <code class="literal">pos</code> to 4, indicating that “Peach” was found
in the fourth position of the <code class="literal">fruit</code> list.</p></div><div class="book" title="Frequency of Occurrence"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="frequency_of_occurrence">Frequency of Occurrence</h3></div></div></div><p class="calibre3">Suppose that your school conducted a survey about the quality of its cafeteria food. Students
rated the taste on a 1 to 5 scale (1 = poor, 5 = excellent). All votes have been entered into a
list, and you are asked to write a program to process this data. For now, the school only wants to
know how many students completely dislike the food (that is, how many gave it a rating of 1). How
would you write such a program?</p><p class="calibre3"><span class="calibre"><em class="calibre6">ItemCount.sb2</em></span></p><p class="calibre3">Clearly, your program needs a procedure that counts how many times the number 1 appears in the
list. To simulate the students’ votes, let’s use a list that contains 100 random votes.
The procedure that populates the list is shown in <a class="xref" href="ch09.html#filllist_procedure" title="Figure 9-21. The FillList procedure">Figure 9-21</a>. This
procedure adds 100 random numbers between 1 and 5 to a list called <code class="literal">survey</code>.</p><div class="figure"><a id="filllist_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00326" class="calibre"/><img alt="The FillList procedure" src="httpatomoreillycomsourcenostarchimages2135009.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-21. The <span class="calibre">FillList</span> procedure</div></div><p class="calibre3">Now that we have a list of votes, we can count how often a given rating appears in that list.
We’ll do this with the <span class="calibre"><strong class="calibre5">GetItemCount</strong></span> procedure, shown in
<a class="xref" href="ch09.html#counting_how_many_times_an_item_appears" title="Figure 9-22. Counting how many times an item appears in a list">Figure 9-22</a>.</p><div class="figure"><a id="counting_how_many_times_an_item_appears" class="calibre"/><div class="book"><div class="book"><a id="med_id00327" class="calibre"/><img alt="Counting how many times an item appears in a list" src="httpatomoreillycomsourcenostarchimages2135011.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-22. Counting how many times an item appears in a list</div></div><p class="calibre3">The <code class="literal">target</code> parameter represents the item to search for, while the
<code class="literal">itemCount</code> variable tracks the number of times the target item is found. The
procedure starts by setting <code class="literal">itemCount</code> to 0, and then it starts a <span class="calibre"><strong class="calibre5">repeat</strong></span> loop to search the list for the value specified in
<code class="literal">target</code>. During each iteration of the loop, the procedure checks the list item at
the location indexed by the loop counter, <code class="literal">n</code>. If that item equals the target, the
script increases <code class="literal">itemCount</code> by 1.</p><p class="calibre3">To give the principal information about disgust with the cafeteria’s food, we just need
to call <span class="calibre"><strong class="calibre5">GetItemCount</strong></span> with an argument of 1, as shown in <a class="xref" href="ch09.html#using_the_getitemcount_procedure" title="Figure 9-23. Using the GetItemCount procedure">Figure 9-23</a>.</p><div class="figure"><a id="using_the_getitemcount_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00328" class="calibre"/><img alt="Using the GetItemCount procedure" src="httpatomoreillycomsourcenostarchimages2135013.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-23. Using the <span class="calibre">GetItemCount</span> procedure</div></div><div class="sidebar"><a id="try_it_out_9-6" class="calibre"/><div class="sidebar-title">Try It Out 9-6</div><p class="calibre3">After you provide the answer to this question, the principal suddenly becomes curious about
how many students gave the cafeteria an excellent rating. The principal also wants to know how many
students participated in the survey. Modify the program and run it again to give the principal the
additional information.</p></div></div><div class="book" title="Bubble Sort"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="bubble_sort">Bubble Sort</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1117"/><a class="calibre" id="iddle1118"/><a class="calibre" id="iddle1465"/><a class="calibre" id="iddle1744"/><a class="calibre" id="iddle1930"/>If you have a set of names, game scores, or anything else that you want to show in a
particular order—alphabetically, from largest to smallest, and so on—you’ll have
to sort your list. There are many ways to sort lists, and a <span class="calibre"><em class="calibre6">bubble sort</em></span> is one
of the simplest algorithms. (The name refers to how values “bubble” up through the list
to their correct positions.) In this section, we’ll learn about bubble sort and write a
Scratch program to perform this kind of sort for us.</p><p class="calibre3"><span class="calibre"><em class="calibre6">BubbleSort.sb2</em></span></p><p class="calibre3">Let’s say that we need to sort the list of numbers [6 9 5 7 4 8] in descending order.
The following steps illustrate how the bubble sort algorithm works.</p><div class="book"><ol class="orderedlist"><li class="listitem1"><p class="calibre3">We’ll start by comparing the first two elements in the list. Since 9 is larger than 6,
we can swap their positions, as shown below.</p><div class="informalfigure"><a id="med_id00329a" class="calibre"/><div class="book"><a id="med_id00329" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135015.png.jpg" class="calibre7"/></div></div></li><li class="listitem1"><p class="calibre3">Now we can compare the second and third elements, which are 6 and 5. Since 6 is larger than 5,
the two numbers are already in order, and we can move on to the next pair.</p></li><li class="listitem1"><p class="calibre3">We’ll repeat this process to compare the third and fourth, fourth and fifth, and finally
the fifth and sixth elements. Take a look at the list after these three comparisons, shown
below.</p><div class="informalfigure"><a id="med_id00330a" class="calibre"/><div class="book"><a id="med_id00330" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135017.png.jpg" class="calibre7"/></div></div></li><li class="listitem1"><p class="calibre3">This pass of the bubble sort is over, but our list still isn’t in the right order. We
need to perform a second pass, starting from step one. Once more, we’ll compare each pair of
elements and swap them if needed. Here’s the list after a second pass:</p><div class="informalfigure"><a id="med_id00331a" class="calibre"/><div class="book"><a id="med_id00331" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135019.png.jpg" class="calibre7"/></div></div></li><li class="listitem1"><p class="calibre3">We’ll repeat the bubble sort process until no numbers are swapped during a pass, meaning
that our list is in order. The final three passes of the algorithm are shown below:</p><div class="informalfigure"><a id="med_id00332a" class="calibre"/><div class="book"><a id="med_id00332" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135021.png.jpg" class="calibre7"/></div></div></li></ol></div><p class="calibre3">Now that you’ve seen how bubble sort works, let’s implement it in Scratch. The
script, shown in <a class="xref" href="ch09.html#bubblesort_procedure" title="Figure 9-24. The BubbleSort procedure">Figure 9-24</a>, has two loops. The inner loop cycles
through a list, comparing and swapping as needed, and sets a flag (named <code class="literal">done</code>) to
0 when another pass is needed. The outer loop repeats as long as the <code class="literal">done</code> flag is
0, because that value means we aren’t done sorting. If the inner loop completes one pass
without swapping elements, the outer loop will exit, ending the procedure.</p><p class="calibre3">Let’s explore this procedure in more detail. Since we haven’t done any sorting
yet, it sets <code class="literal">done</code> to 0 ①. The outer loop uses a <span class="calibre"><strong class="calibre5">repeat until</strong></span> block to pass through the list until it is sorted (that is, until
<code class="literal">done</code> becomes 1) ②. At the beginning of every pass, this loop sets
<code class="literal">done</code> to 1 ③ (that is, it assumes that we won’t make any swaps). It
also sets <code class="literal">pos</code> to 1 to start the sort with the first number.</p><p class="calibre3">The inner loop then compares each pair of elements in the list. The loop needs to perform
<span class="calibre"><em class="calibre6">N</em></span> – 1 comparisons ④, where <span class="calibre"><em class="calibre6">N</em></span> is the number of
items in the list.</p><p class="calibre3">If the item at index <code class="literal">pos+1</code> is greater than the item at
<code class="literal">pos</code> ⑤, the two need to be swapped. Otherwise, the procedure adds 1 to
<code class="literal">pos</code> so it can compare the next pair of items. If we do need to swap, this
procedure does so with the aid of a temporary variable named <code class="literal">temp</code> ⑥.</p><p class="calibre3">Once the current pass through the list ends, the inner loop sets <code class="literal">done</code> back
to 0 if it swapped numbers or leaves <code class="literal">done=1</code> if it made no changes ⑦. The
outer loop will continue until the list is sorted.</p><div class="figure"><a id="bubblesort_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00333" class="calibre"/><img alt="The BubbleSort procedure" src="httpatomoreillycomsourcenostarchimages2135023.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-24. The <span class="calibre">BubbleSort</span> procedure</div></div><div class="sidebar"><a id="try_it_out_9-7" class="calibre"/><div class="sidebar-title">Try It Out 9-7</div><p class="calibre3"><a class="calibre" id="iddle1354"/><a class="calibre" id="iddle1461"/><a class="calibre" id="iddle1520"/><a class="calibre" id="iddle1521"/><a class="calibre" id="iddle1755"/>Make a list of names instead of numbers and use the bubble sort script to put the list
in order. Does the sort still work as it should? Also, what changes do you need to make to the
procedure to make it sort in ascending order?</p></div></div><div class="book" title="Finding the Median"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="finding_the_median">Finding the Median</h3></div></div></div><p class="calibre3"><span class="calibre"><em class="calibre6">Median.sb2</em></span></p><p class="calibre3">Now that we know how to sort a list, we can easily find the median value of any sequence of
numbers. Recall that the median is the middle value in a sorted set of numbers. If we have an odd
number of items, we can just take the middle number. If we have an even number, the median is the
average of the two middle numbers. We can describe the median for a sorted list of
<span class="calibre"><em class="calibre6">N</em></span> items as follows:</p><div class="informalfigure"><a id="med_id00334a" class="calibre"/><div class="book"><a id="med_id00334" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135025.png.jpg" class="calibre7"/></div></div><p class="calibre3">A procedure that performs this calculation is shown in <a class="xref" href="ch09.html#finding_the_median_value_of_a_sorted_lis" title="Figure 9-25. Finding the median value of a sorted list of numbers">Figure 9-25</a>. It assumes the list is in order.</p><div class="figure"><a id="finding_the_median_value_of_a_sorted_lis" class="calibre"/><div class="book"><div class="book"><a id="med_id00335" class="calibre"/><img alt="Finding the median value of a sorted list of numbers" src="httpatomoreillycomsourcenostarchimages2135027.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-25. Finding the median value of a sorted list of numbers</div></div><p class="calibre3"><a class="calibre" id="iddle1702"/><a class="calibre" id="iddle1703"/><a class="calibre" id="iddle1779"/>The procedure uses an <span class="calibre"><strong class="calibre5">if/else</strong></span> block to handle the two
cases of even and odd lists. If the number of items in the list divides by 2 with no remainder (that
is, the list has an even number of items) ①, the <code class="literal">median</code> variable is
calculated as the average of the middle two numbers ②. Otherwise, the list has an odd number
of items ③, and the <code class="literal">median</code> variable is set equal to the number in the
middle of the list ④.</p><p class="calibre3">We’ve covered a lot of ground so far, so it’s time to apply our newfound knowledge
to something more challenging. The rest of this chapter walks through several examples that
demonstrate how to use lists in more complex applications.</p></div></div><div class="book" title="Scratch Projects"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="scratch_projects-id00025">Scratch Projects</h2></div></div></div><p class="calibre3">In this section, you’ll explore practical Scratch projects that highlight different
aspects of lists. I’ll also introduce some new ideas and techniques that you can use in your
own creations.</p><div class="book" title="The Poet"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="poet">The Poet</h3></div></div></div><p class="calibre3">Let’s kick off this chapter’s projects with a poem generator. Our artificial poet
selects words randomly from five lists (<code class="literal">article</code>, <code class="literal">adjective</code>,
<code class="literal">noun</code>, <code class="literal">verb</code>, and <code class="literal">preposition</code>) and combines
them according to a fixed pattern. To give our poems a central theme, all the words in these lists
are somehow related to love and nature. (Of course, we might still end up with some silly poetry,
but that’s just as fun!)</p><p class="calibre3"><span class="calibre"><em class="calibre6">Poet.sb2</em></span></p><div class="note" title="Note"><h3 class="title4"><a id="ch09note03" class="firstname"/>Note</h3><p class="calibre3"><a class="calibre" id="iddle1704"/><a class="calibre" id="iddle2083"/><span class="calibre"><em class="calibre6">The idea of this program is adapted from Daniel Watt’s</em></span>
Learning with Logo <span class="calibre"><em class="calibre6">(McGraw-Hill, 1983). You’ll find the full word lists we’re
using in the Scratch file for this project,</em></span> Poet.sb2<span class="calibre"><em class="calibre6">.</em></span></p></div><p class="calibre3">Each poem is composed of three lines that follow these patterns:</p><div class="book"><ul class="itemizedlist"><li class="listitem1"><p class="calibre3">Line 1: article, adjective, noun</p></li><li class="listitem1"><p class="calibre3">Line 2: article, noun, verb, preposition, article, adjective, noun</p></li><li class="listitem1"><p class="calibre3">Line 3: adjective, adjective, noun</p></li></ul></div><p class="calibre3">With those constructions in mind, let’s look at the procedure that builds the first line
of the poem, shown in <a class="xref" href="ch09.html#quotation_markwritingquotation_mark_the" title="Figure 9-26. “Writing” the first line of a poem">Figure 9-26</a>.</p><div class="figure"><a id="quotation_markwritingquotation_mark_the" class="calibre"/><div class="book"><div class="book"><a id="med_id00336" class="calibre"/><img alt="“Writing” the first line of a poem" src="httpatomoreillycomsourcenostarchimages2135029.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-26. “Writing” the first line of a poem</div></div><p class="calibre3">This script selects a random word from the <code class="literal">article</code> list and stores it in
<code class="literal">line1</code>. Then the script appends a white space, a random word from the
<code class="literal">adjective</code> list, another white space, and a random word from the
<code class="literal">noun</code> list. Finally, the poet sprite says the complete line. I don’t show
the procedures for the other two lines of the poem here because they’re very similar, but you
can open up <span class="calibre"><em class="calibre6">Poet.sb2</em></span> to view them.</p><p class="calibre3">Here are two poems created by our machine poet:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><p class="calibre3">each glamorous road</p></li><li class="listitem"><p class="calibre3">a fish moves behind each white home</p></li><li class="listitem"><p class="calibre3">calm blue pond</p></li><li class="listitem"><p class="calibre3">every icy drop</p></li><li class="listitem"><p class="calibre3">a heart stares under every scary gate</p></li><li class="listitem"><p class="calibre3">shy quiet queen</p></li></ul></div><div class="sidebar"><a id="try_it_out_9-8" class="calibre"/><div class="sidebar-title">Try It Out 9-8</div><p class="calibre3">Open <span class="calibre"><em class="calibre6">Poet.sb2</em></span> and run it several times to see what this machine poet is
capable of authoring. Then change the program so that it uses three sprites, with each sprite
responsible for one line of the poem, allowing you to read the whole poem on the Stage at
once.</p><p class="calibre3"><span class="calibre"><em class="calibre6">Poet.sb2</em></span></p></div></div><div class="book" title="Quadrilateral Classification Game"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="quadrilateral_classification_game">Quadrilateral Classification Game</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1783"/><a class="calibre" id="iddle1810"/><a class="calibre" id="iddle1813"/><a class="calibre" id="iddle1814"/>Our next project is a simple game that will help you explore different kinds of
quadrilaterals. The game shows one of six shapes (parallelogram, rhombus, rectangle, square,
trapezoid, or kite) on the Stage and asks the player to classify that shape by clicking the correct
button, as illustrated in <a class="xref" href="ch09.html#user_interface_for_the_quadrilateral_cla" title="Figure 9-27. The user interface for the quadrilateral classification game">Figure 9-27</a>.</p><p class="calibre3"><span class="calibre"><em class="calibre6">QuadClassify.sb2</em></span></p><div class="figure"><a id="user_interface_for_the_quadrilateral_cla" class="calibre"/><div class="book"><div class="book"><a id="med_id00337" class="calibre"/><img alt="The user interface for the quadrilateral classification game" src="httpatomoreillycomsourcenostarchimages2135031.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-27. The user interface for the quadrilateral classification game</div></div><p class="calibre3">The game contains seven sprites: six for the answer buttons and a seventh (named
<code class="literal">Driver</code>) that contains the main script. As shown in <a class="xref" href="ch09.html#user_interface_for_the_quadrilateral_cla" title="Figure 9-27. The user interface for the quadrilateral classification game">Figure 9-27</a>, the <code class="literal">Driver</code> sprite has six
costumes that correspond to the six quadrilaterals in the game. When the green flag icon is clicked,
the <code class="literal">Driver</code> sprite executes the script shown in <a class="xref" href="ch09.html#main_script_of_the_driver_sprite" title="Figure 9-28. The main script of the Driver sprite">Figure 9-28</a> to start the game.</p><p class="calibre3">First, the <code class="literal">Driver</code> sprite moves to the top drawing layer ① so that no
buttons will obscure it. In the main loop of the game ②, the script shows a random
quadrilateral on each pass with <span class="calibre"><strong class="calibre5">ShowShape</strong></span> ③. After showing
the quadrilateral, the script sets the global variable <code class="literal">choice</code> to 0 to indicate
that the user hasn’t answered yet ④.</p><div class="figure"><a id="main_script_of_the_driver_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00338" class="calibre"/><img alt="The main script of the Driver sprite" src="httpatomoreillycomsourcenostarchimages2135033.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-28. The main script of the <code class="literal">Driver</code> sprite</div></div><p class="calibre3">The script then waits ⑤ until <code class="literal">choice</code> changes to a nonzero number,
which will happen when the player clicks one of the six answer buttons. When the player guesses a
shape, the script calls <span class="calibre"><strong class="calibre5">CheckAnswer</strong></span> ⑥ to tell the player
whether or not that answer was correct.</p><p class="calibre3">Now that you know how the main script works, let’s look at the <span class="calibre"><strong class="calibre5">ShowShape</strong></span> procedure, shown in <a class="xref" href="ch09.html#showshape_procedure_of_the_driver_sprite" title="Figure 9-29. The ShowShape procedure of the Driver sprite">Figure 9-29</a>.</p><p class="calibre3">First, <span class="calibre"><strong class="calibre5">ShowShape</strong></span> moves the <code class="literal">Driver</code> sprite
to the center of the stage and points it in a random direction ①. It assigns the
<code class="literal">shape</code> variable a random value from 1 through 6 and switches the sprite’s
costume ② to show a quadrilateral for the player to identify.</p><div class="figure"><a id="showshape_procedure_of_the_driver_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00339" class="calibre"/><img alt="The ShowShape procedure of the Driver sprite" src="httpatomoreillycomsourcenostarchimages2135035.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-29. The <span class="calibre">ShowShape</span> procedure of the <code class="literal">Driver</code>
sprite</div></div><p class="calibre3"><a class="calibre" id="iddle1811"/>To keep the background’s grid visible, <span class="calibre"><strong class="calibre5">ShowShape</strong></span> sets the transparency level ③ to a random value between 25 and 50. To
give the illusion that it is coming up with a new shape every round, the procedure also sets the
color effect to a random value to change the color of the costume ④ and resizes the sprite to
80%, 90%, ..., or 150% of its original size ⑤.</p><p class="calibre3">Next, we’ll look briefly at the scripts for the six button sprites, shown in <a class="xref" href="ch09.html#scripts_for_the_button_sprites" title="Figure 9-30. Scripts for the button sprites">Figure 9-30</a>. They’re identical except for the value assigned to
the <code class="literal">choice</code> variable.</p><div class="figure"><a id="scripts_for_the_button_sprites" class="calibre"/><div class="book"><div class="book"><a id="med_id00340" class="calibre"/><img alt="Scripts for the button sprites" src="httpatomoreillycomsourcenostarchimages2135037.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-30. Scripts for the button sprites</div></div><p class="calibre3">These one-line scripts each set the value of <code class="literal">choice</code> to a different number
depending on which button the player presses. Once <code class="literal">choice</code> contains the
player’s answer, the <span class="calibre"><strong class="calibre5">CheckAnswer</strong></span> procedure, illustrated in
<a class="xref" href="ch09.html#checkanswer_procedure" title="Figure 9-31. The CheckAnswer procedure">Figure 9-31</a>, can compare it with the value of <code class="literal">shape</code>,
which specifies the type of the drawn quadrilateral.</p><p class="calibre3">If <code class="literal">choice</code> and <code class="literal">shape</code> are equal, then the player’s
answer is correct. Otherwise, the answer is wrong, and the sprite will say the right shape.
<span class="calibre"><strong class="calibre5">CheckAnswer</strong></span> uses the <code class="literal">shape</code> variable as an
index to a list named <code class="literal">quadName</code>, which is also shown in <a class="xref" href="ch09.html#checkanswer_procedure" title="Figure 9-31. The CheckAnswer procedure">Figure 9-31</a>, to get the correct name of the displayed shape.</p><div class="sidebar"><a id="try_it_out_9-9" class="calibre"/><div class="sidebar-title">Try It Out 9-9</div><p class="calibre3">Open <span class="calibre"><em class="calibre6">QuadClassify.sb2</em></span> and run it several times to understand how it
works. As written, this game runs forever. Modify the program to add a game-end criterion. Also,
keep track of the number of the player’s correct and incorrect answers.</p><p class="calibre3"><span class="calibre"><em class="calibre6">QuadClassify.sb2</em></span></p></div><div class="figure"><a id="checkanswer_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00341" class="calibre"/><img alt="The CheckAnswer procedure" src="httpatomoreillycomsourcenostarchimages2135039.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-31. The <span class="calibre">CheckAnswer</span> procedure</div></div></div><div class="book" title="Math Wizard"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="math_wizard">Math Wizard</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1517"/><a class="calibre" id="iddle1518"/><a class="calibre" id="iddle1771"/><a class="calibre" id="iddle1817"/>This application demonstrates two ways to make lists even more useful. We’ll
explore how to use lists to store nonuniform records (that is, records with different sizes) as well
as how to use one list as an index to another. A <span class="calibre"><em class="calibre6">record</em></span> is just a collection of
related data about a person, place, or thing. In our case, each record consists of a puzzle’s
answer along with the instructions for that puzzle. Whereas each puzzle has a single answer, the
number of instructions varies from one puzzle to another.</p><p class="calibre3"><span class="calibre"><em class="calibre6">MathWizard.sb2</em></span></p><p class="calibre3">Our math wizard asks the user to think of a “secret” number and perform a sequence
of mathematical operations on it (double the number, subtract 2, divide the answer by 10, and so
on). At the end, after the player performs all these calculations, the wizard uses magical powers to
tell the user what number he has, even though the wizard does not know the user’s initial
number. <a class="xref" href="ch09.html#how_the_math_wizard_works" title="Table 9-2. How the Math Wizard Works">Table 9-2</a> illustrates how the game works.</p><div class="table"><a id="how_the_math_wizard_works" class="calibre"/><div class="table-title">Table 9-2. How the Math Wizard Works</div><div class="book"><table class="calibre9"><colgroup class="calibre10"><col class="c"/><col class="c"/></colgroup><thead class="calibre11"><tr class="calibre12"><td class="calibre13"><p class="calibre3">Wizard’s Instruction</p></td><td class="calibre14"><p class="calibre3">Your Number</p></td></tr></thead><tbody class="calibre15"><tr class="calibre12"><td class="calibre16"><p class="calibre3">Think of a number.</p></td><td class="calibre17"><p class="calibre3">2</p></td></tr><tr class="calibre18"><td class="calibre16"><p class="calibre3">Add 5.</p></td><td class="calibre17"><p class="calibre3">7</p></td></tr><tr class="calibre12"><td class="calibre16"><p class="calibre3">Multiply by 3.</p></td><td class="calibre17"><p class="calibre3">21</p></td></tr><tr class="calibre18"><td class="calibre16"><p class="calibre3">Subtract 3.</p></td><td class="calibre17"><p class="calibre3">18</p></td></tr><tr class="calibre12"><td class="calibre16"><p class="calibre3">Divide by 3.</p></td><td class="calibre17"><p class="calibre3">6</p></td></tr><tr class="calibre18"><td class="calibre19"><p class="calibre3">Subtract your original number.</p></td><td class="calibre20"><p class="calibre3">4</p></td></tr></tbody></table></div></div><p class="calibre3">After the last instruction, the wizard will tell you that following the instructions has given
you the number 4, even though the game doesn’t know that you started out with 2. Try this
puzzle with different numbers to figure out the wizard’s trick!</p><p class="calibre3">The interface of the application is shown in <a class="xref" href="ch09.html#user_interface_for_the_math_wizard_appli" title="Figure 9-32. The user interface for the Math Wizard application">Figure 9-32</a>.</p><div class="figure"><a id="user_interface_for_the_math_wizard_appli" class="calibre"/><div class="book"><div class="book"><a id="med_id00342" class="calibre"/><img alt="The user interface for the Math Wizard application" src="httpatomoreillycomsourcenostarchimages2135041.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-32. The user interface for the Math Wizard application</div></div><p class="calibre3">The application contains three sprites: the <code class="literal">Wizard</code> sprite, which gives the
instructions to the player, and the <code class="literal">OK</code> and <code class="literal">New</code> sprites, for
the <code class="literal">OK</code> and <code class="literal">New Game</code> buttons, respectively. It also uses the
two lists illustrated in <a class="xref" href="ch09.html#two_lists_used_by_the_wizard_sprite" title="Figure 9-33. The two lists used by the Wizard sprite">Figure 9-33</a>.</p><div class="figure"><a id="two_lists_used_by_the_wizard_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00343" class="calibre"/><img alt="The two lists used by the Wizard sprite" src="httpatomoreillycomsourcenostarchimages2135043.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-33. The two lists used by the <code class="literal">Wizard</code> sprite</div></div><p class="calibre3">The <code class="literal">instr</code> list (right) contains 11 puzzle records. Each record includes (a)
the answer of the puzzle, (b) the instructions, and (c) an empty element to mark the end of that
record. The entries in the list on the left (named <code class="literal">index</code>) identify the starting
index of each puzzle in the <code class="literal">instr</code> list. For example, the second element in the
<code class="literal">index</code> list is 9, which means the record of the second puzzle starts at the ninth
position in the <code class="literal">instr</code> list, as illustrated in <a class="xref" href="ch09.html#two_lists_used_by_the_wizard_sprite" title="Figure 9-33. The two lists used by the Wizard sprite">Figure 9-33</a>. Let’s outline a strategy for developing this
game:</p><div class="book"><ol class="orderedlist"><li class="listitem1"><p class="calibre3">When the user starts a new game, select a random number between 1 and 11 (because our game
currently contains 11 puzzles).</p></li><li class="listitem1"><p class="calibre3">Consult the <code class="literal">index</code> list for the starting position of the selected
puzzle’s record. For example, if the second puzzle is selected, the <code class="literal">index</code>
list tells us that the record of this puzzle starts at index 9 in the <code class="literal">instr</code>
list.</p></li><li class="listitem1"><p class="calibre3">Access the <code class="literal">instr</code> list at the index found in Step 2. The first element at
that index is interpreted as the answer of the puzzle. The following elements represent the
instructions that the wizard will say.</p></li><li class="listitem1"><p class="calibre3">Let the wizard say the puzzle instructions one by one until encountering the empty element,
which signifies the last instruction. The wizard should wait for the user to press the
<code class="literal">OK</code> button before saying a new instruction.</p></li><li class="listitem1"><p class="calibre3">Reveal the answer of the puzzle.</p></li></ol></div><p class="calibre3">Now that we know how the game should work on a high level, let’s look at the scripts for
the two buttons, shown in <a class="xref" href="ch09.html#scripts_for_the_two_button_sprites" title="Figure 9-34. The scripts for the two button sprites">Figure 9-34</a>.</p><div class="figure"><a id="scripts_for_the_two_button_sprites" class="calibre"/><div class="book"><div class="book"><a id="med_id00344" class="calibre"/><img alt="The scripts for the two button sprites" src="httpatomoreillycomsourcenostarchimages2135045.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-34. The scripts for the two button sprites</div></div><p class="calibre3">The <code class="literal">New Game</code> button broadcasts the <code class="literal">NewGame</code> message when
clicked. When the <code class="literal">OK</code> button is clicked in response to an instruction, the sprite
sets <code class="literal">clicked</code> to 1 to inform the <code class="literal">Wizard</code> sprite that the player
is done with the instruction she was asked to perform. When the <code class="literal">Wizard</code> sprite
receives the <code class="literal">NewGame</code> message, it executes the script shown in <a class="xref" href="ch09.html#newgame_script_of_the_wizard_sprite" title="Figure 9-35. The NewGame script of the Wizard sprite">Figure 9-35</a>.</p><div class="figure"><a id="newgame_script_of_the_wizard_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00345" class="calibre"/><img alt="The NewGame script of the Wizard sprite" src="httpatomoreillycomsourcenostarchimages2135047.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-35. The <code class="literal">NewGame</code> script of the <code class="literal">Wizard</code> sprite</div></div><p class="calibre3"><a class="calibre" id="iddle1367"/><a class="calibre" id="iddle1368"/><a class="calibre" id="iddle1758"/>NewGame starts by clearing the speech bubble from the previous puzzle (if any) and
initializing the <code class="literal">clicked</code> variable to 0 ①. It then saves the number of the
randomly selected puzzle in a variable called <code class="literal">puzzleNum</code> ②. After that, it
reads the starting position of the selected puzzle from the <code class="literal">index</code> list and saves
it in the <code class="literal">pos</code> variable ③. The script then uses <code class="literal">pos</code> to
read the answer of that puzzle and saves it in <code class="literal">puzzleAnswer</code> ④. Next, the
script adds 1 to <code class="literal">pos</code> so it points to the first puzzle instruction, and it starts
a <span class="calibre"><strong class="calibre5">repeat until</strong></span> loop to say the puzzle’s instructions in
order ⑤. After saying each instruction, the script waits for the <code class="literal">clicked</code>
variable to be set to 1 before moving to the next instruction ⑥. When the loop finds an empty
element, it exits, and the script says the puzzle’s answer ⑦.</p><div class="sidebar"><a id="try_it_out_9-10" class="calibre"/><div class="sidebar-title">Try It Out 9-10</div><p class="calibre3">If you delete one of the puzzles or change the number of instructions for some puzzles, then
you would need to rebuild the <code class="literal">index</code> list to match up with the
<code class="literal">instr</code> list. Write a procedure that automatically populates the
<code class="literal">index</code> list based on the current contents of the <code class="literal">instr</code> list.
The key is to search for the empty strings in the <code class="literal">instr</code> list, as these indicate
the end of one record and the start of the next record.</p></div></div><div class="book" title="Flower Anatomy Quiz"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="flower_anatomy_quiz">Flower Anatomy Quiz</h3></div></div></div><p class="calibre3">In this section, I’ll use a quiz on the parts of a flower to demonstrate how to build
simple quizzes in Scratch. <a class="xref" href="ch09.html#user_interface_for_the_flower_quiz" title="Figure 9-36. The user interface for the flower quiz">Figure 9-36</a> shows our example
application’s interface at the beginning of the quiz and after the program checks the
user’s answers. Anyone taking the quiz will enter the letters to match the labeled parts of
the flower and then click the <code class="literal">Check</code> button to check the answers. The program
compares the user’s answers with the correct ones and provides feedback using the green check
mark and the red <span class="calibre"><em class="calibre6">X</em></span> icons next to each answer.</p><p class="calibre3"><span class="calibre"><em class="calibre6">FlowerAnatomy.sb2</em></span></p><div class="figure"><a id="user_interface_for_the_flower_quiz" class="calibre"/><div class="book"><div class="book"><a id="med_id00346" class="calibre"/><img alt="The user interface for the flower quiz" src="httpatomoreillycomsourcenostarchimages2135049.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-36. The user interface for the flower quiz</div></div><p class="calibre3">This quiz uses three lists. The first (named <code class="literal">correctAns</code>) contains the
letters that correspond to the right answers for the nine parts of the quiz. The <a class="calibre" id="iddle1785"/><a class="calibre" id="iddle1846"/><a class="calibre" id="iddle1847"/>second list (named <code class="literal">ans</code>) contains the user’s input, and the
third list (named <code class="literal">cellYCenter</code>) contains the 11 vertical positions used by the
<code class="literal">Letter</code> and the <code class="literal">YesNo</code> sprites (so they know where they should
stamp their costumes). When the user clicks the mouse over any of the answer boxes, the Stage sprite
detects the mouse click and asks for an answer. The Stage sprite updates the corresponding element
of the <code class="literal">ans</code> list to match what the user entered and stamps that letter over the
answer box. Open <span class="calibre"><em class="calibre6">FlowerAnatomy.sb2</em></span> to read the scripts that read and display
the user’s answers.</p><p class="calibre3">When the user clicks the <code class="literal">Check</code> button, the <code class="literal">YesNo</code> sprite,
which has the costumes for the check mark and <span class="calibre"><em class="calibre6">X</em></span> images, executes the script
shown in <a class="xref" href="ch09.html#check_procedure_of_the_yesno_sprite" title="Figure 9-37. The Check procedure of the YesNo sprite">Figure 9-37</a>.</p><div class="figure"><a id="check_procedure_of_the_yesno_sprite" class="calibre"/><div class="book"><div class="book"><a id="med_id00347" class="calibre"/><img alt="The Check procedure of the YesNo sprite" src="httpatomoreillycomsourcenostarchimages2135051.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 9-37. The <span class="calibre">Check</span> procedure of the <code class="literal">YesNo</code>
sprite</div></div><p class="calibre3">The script compares the elements of the <code class="literal">correctAns</code> and the
<code class="literal">ans</code> lists one by one. If the two values are equal, it stamps a check mark to say
the user was correct. Otherwise, it stamps the red <span class="calibre"><em class="calibre6">X</em></span> where the user’s
answers were wrong. Either way, <code class="literal">Check</code> consults the <code class="literal">cellYCenter</code>
list to get the correct position for stamping the image. See Try It Out 9-11 on the opposite
page.</p></div><div class="book" title="Other Applications"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="other_applications-id00026">Other Applications</h3></div></div></div><p class="calibre3">The extra resources you downloaded from the book’s website (<span class="calibre"><em class="calibre6"><a class="xref" href="http://nostarch.com/learnscratch/" target="_top">http://nostarch.com/learnscratch/</a></em></span>) contain three more applications that you can
explore on your own, with full explanations. The first application is a two-player game about
sorting fractions and decimals. Each player gets 5 random cards from a deck of 31 cards. Each player
is then dealt one card from the remaining set. You can either discard the new card or drag it over
one of your current five, replacing the old one. Whoever arranges five cards in ascending order
first wins the game.</p><p class="calibre3"><span class="calibre"><em class="calibre6">SayThat Number.sb2</em></span></p><div class="sidebar"><a id="try_it_out_9-11" class="calibre"/><div class="sidebar-title">Try It Out 9-11</div><p class="calibre3"><a class="calibre" id="iddle1788"/><a class="calibre" id="iddle1789"/><a class="calibre" id="iddle1796"/><a class="calibre" id="iddle1916"/><a class="calibre" id="iddle1917"/><a class="calibre" id="iddle1928"/><a class="calibre" id="iddle1929"/><a class="calibre" id="iddle2057"/><a class="calibre" id="iddle2058"/>Open this application and test it. Then, think of other quizzes in different subject
areas that you can create and implement them. One example, shown below, is provided in the file
<span class="calibre"><em class="calibre6">USMapQuiz.sb2</em></span>. Open this file and complete the missing parts to make this quiz
work.</p><p class="calibre3"><span class="calibre"><em class="calibre6">USMapQuiz.sb2</em></span></p><div class="informalfigure"><a id="med_id00348a" class="calibre"/><div class="book"><a id="med_id00348" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135053.png.jpg" class="calibre7"/></div></div></div><p class="calibre3">The second application is a program that spells whole numbers. It prompts the user to input a
number and then says that number in words. If the user inputs <code class="literal">3526</code>, for example,
the program will say “three thousand five hundred twenty six.” The idea is to break the
number, from right to left, into groups of three digits. Each group is then spelled out with a
multiplier word (thousand, million, and so on), if needed.</p><p class="calibre3"><span class="calibre"><em class="calibre6">SortEmOut.sb2</em></span></p><p class="calibre3">The third program demonstrates the sieve of Eratosthenes, an algorithm for finding all prime
numbers less than 100.</p><p class="calibre3"><span class="calibre"><em class="calibre6">Sieve.sb2</em></span></p></div></div><div class="book" title="Summary"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="summary-id00027">Summary</h2></div></div></div><p class="calibre3">Lists are extremely useful in programming, and they provide a convenient way to store multiple
elements. In this chapter, we explored creating lists in Scratch, learned the commands we can use to
deal with them, and practiced populating lists dynamically with data entered by the user.</p><p class="calibre3">We also examined numerical lists and demonstrated how to find the minimum, the maximum, and
the average value of their elements. After that, we learned simple algorithms for searching and
sorting lists. We concluded the chapter with several programs that demonstrated the use of lists in
practical applications.</p></div><div class="book" title="Problems"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="problems-id00028">Problems</h2></div></div></div><div class="book" title="Frequently Asked Questions"><a id="ch09qa1" class="calibre"/><table class="calibre21"><colgroup class="calibre10"><col class="calibre22"/><col class="c"/></colgroup><tbody class="calibre15"><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch09qa1qe1" class="calibre"/><a id="ch09qa1q1" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">1. Create a list that contains the first 10 prime numbers. Write a script to display these
numbers using the <span class="calibre"><strong class="calibre5">say</strong></span> block.</p></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch09qa1qe2" class="calibre"/><a id="ch09qa1q2" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">2. Create three lists to store personal records. The first list stores names, the second list
stores birth dates, and the third list stores phone numbers. Write a program that asks the user the
name of the person whose contact information is needed. If the person’s name exists in the
first list, the program will say the person’s birth date and phone number.</p></td></tr><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch09qa1qe3" class="calibre"/><a id="ch09qa1q3" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">3. Create two lists for storing the items sold in a grocery store and their corresponding
prices. Write a program that asks the user to enter an item’s name and then displays that
item’s price, if it is found in the list.</p></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch09qa1qe4" class="calibre"/><a id="ch09qa1q4" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">4. What is stored in <code class="literal2">numList</code> after executing the script shown on the next
page? Re-create the procedure and run it to check your answer.</p><div class="informalfigure"><a id="med_id00349a" class="calibre"/><div class="book"><a id="med_id00349" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2135055.png.jpg" class="calibre7"/></div></div></td></tr><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch09qa1qe5" class="calibre"/><a id="ch09qa1q5" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">5. Write a program to double each of the elements stored in a numerical list.</p></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch09qa1qe6" class="calibre"/><a id="ch09qa1q6" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">6. Write a program that prompts the user to enter students’ names and scores and store
these inputs in two lists. Stop collecting data when the user enters –1 for a student’s
name.</p></td></tr><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch09qa1qe7" class="calibre"/><a id="ch09qa1q7" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">7. Write a program that prompts the user to enter the highest and lowest temperatures for the
12 months of a year. Store the input values in two lists.</p></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch09qa1qe8" class="calibre"/><a id="ch09qa1q8" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">8. Write a program that prompts the user to enter 10 integers. Store each entered number into
a list only if it is not a duplicate of a previously entered number.</p></td></tr><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch09qa1qe9" class="calibre"/><a id="ch09qa1q9" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">9. Write a program that processes a list of 20 scores on a test with 100 items and finds the
number of students who scored between 85 and 90.</p></td></tr></tbody></table></div></div></section></body></html>