- en: '[8](nsp-enoka501485-0007.xhtml#rch08)'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Detecting, Removing, and Preventing Malware
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '![Chapter opening icon](images/nsp-enoka501485-ct.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Malware such as viruses, trojans, and ransomware are significant threats to
    internet users and likely will be for the foreseeable future. As a result, it’s
    important to arm yourself and your users with an antivirus solution that detects
    and removes malware. Additionally, keeping your endpoints up-to-date can prevent
    malware from infecting your network and in some cases provide more protection
    than an antivirus (AV) solution.
  prefs: []
  type: TYPE_NORMAL
- en: Antivirus solutions can be tricky to manage because they typically are not cross-platform
    (that is, they work on only one operating system). If you have multiple operating
    systems in your network, you’ll need to find an effective AV product for each
    of them. Although this chapter discusses installing, configuring, and scanning
    with specific products, most options and settings will be the same across most
    antivirus solutions. The names of the settings and configuration options may differ
    slightly, but the same logic and processes should work for most products.
  prefs: []
  type: TYPE_NORMAL
- en: After exploring some antivirus solutions for various operating systems, we’ll
    consider the differences between malware signatures and heuristic scans, the pros
    and cons of each approach, and the concept of creating an antivirus farm to catch
    as much malware as possible across different endpoints. Finally, we’ll cover patch
    management for various operating systems and how best to keep your endpoints up-to-date.
  prefs: []
  type: TYPE_NORMAL
- en: '[Microsoft Defender for Windows](nsp-enoka501485-0007.xhtml#rah1001)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The latest iteration of the built-in Microsoft antivirus solution is *Microsoft
    Defender*. Defender automatically updates its virus definitions and scans for
    threats on a regular schedule, so Windows computers have decent protection out
    of the box.
  prefs: []
  type: TYPE_NORMAL
- en: Defender’s automatic scans are *quick scans* that check only the folders where
    threats are commonly found. While a quick scan offers fast results and uses few
    system resources, it’s unlikely to discover and remove malware residing outside
    of these folders. A *full scan* scans all your files and running programs, performing
    a thorough search for malware. It’s recommended to run full scans somewhere between
    once a week and once a month. The longer the period between full scans, the more
    time an adversary has to wreak havoc on your systems.
  prefs: []
  type: TYPE_NORMAL
- en: You also have the option to choose custom and offline scans. A *custom scan*
    lets you select which folders and files to scan. An *offline scan* is similar
    to the Boot to Safe Mode method of malware removal available in earlier versions
    of Windows. Windows is now capable of automatically rebooting to a state that
    allows Microsoft Defender to remove persistent malware via this offline scan.
    This option is a last resort, rather than a scan you would run regularly. If you
    believe your computer is infected but are unable to find the infection using a
    full scan, run the offline scan to be certain. Failing this, your only recourse
    is to wipe your hard drive and re-install Windows from scratch.
  prefs: []
  type: TYPE_NORMAL
- en: To run scans, open **Settings▸Update & Security▸Windows Security▸Virus & Threat
    Protection**. Click **Scan Options**, select the type of scan you want, and then
    click **Scan now**.
  prefs: []
  type: TYPE_NORMAL
- en: In the Virus & Threat Protection4Manage Settings menu, ensure Real-time Protection
    is turned on to enable Defender to protect your computer constantly. You can also
    add file and folder exclusions from this menu. You might add exclusions when you
    have files or programs that are legitimate and not a risk to your system, but
    Defender classifies them as malware and tries to quarantine them anyway.
  prefs: []
  type: TYPE_NORMAL
- en: 'One setting in particular could be considered a risk to your privacy, Automatic
    Sample Submission, which allows Microsoft Defender to upload your files to Microsoft’s
    servers in the cloud automatically to be analyzed and scanned for malware. This
    practice poses a risk: private or confidential data could be leaked to a third
    party without your knowledge, as Defender won’t ask or advise you of files being
    uploaded to Microsoft. To turn off this setting, toggle Automatic Sample Submissions.'
  prefs: []
  type: TYPE_NORMAL
- en: Related to this setting is the Cloud-Delivered Protection setting. This one
    isn’t as risky, as it relays only file metadata to Microsoft rather than entire
    file contents. Cloud-Delivered Protection will still work with Automatic Sample
    Submission turned off, although it might not perform as well.
  prefs: []
  type: TYPE_NORMAL
- en: Windows will keep Microsoft Defender up-to-date, but it never hurts to update
    manually occasionally. To update, click **Check for Updates** on the main Virus
    & Threat Protection page.
  prefs: []
  type: TYPE_NORMAL
- en: '[Choosing Malware Detection and Antivirus Tools](nsp-enoka501485-0007.xhtml#rah1002)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When deciding on the antivirus and malware detection tools you’d like to use,
    consider whether it’s worth paying for a commercial tool (or the premium version
    of a free tool) and whether the tool will use signatures or heuristics to detect
    malware.
  prefs: []
  type: TYPE_NORMAL
- en: In general, if all you want is a simple malware scanning tool, there’s rarely
    a good reason to pay for a commercial product. Typically, you’ll pay for advanced
    features, such as an email or web browser scanner built-in to the malware file
    scanner.
  prefs: []
  type: TYPE_NORMAL
- en: Oftentimes, paid solutions allow for some form of centralized management. Whether
    that’s a web portal or a management server or agent, you gain visibility and the
    ability to manage all of your devices from one place. If you have a larger network,
    there’s value in having this capability; if your network consists of less than
    30 devices, you probably don’t need it.
  prefs: []
  type: TYPE_NORMAL
- en: '[Antivirus Farm](nsp-enoka501485-0007.xhtml#rbh1001)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: There’s also a benefit in foregoing a single solution in favor of using multiple
    antivirus products in smaller networks. *Antivirus farms* use several products
    aiming to catch more malware than a single solution might. It also makes the attacker’s
    job more difficult; instead of evading a single antivirus product, they need to
    evade multiple to move laterally through a network.
  prefs: []
  type: TYPE_NORMAL
- en: Antivirus farms are helpful because every antivirus vendor curates their own
    databases of *malware signatures*—sequences of bytes in the executable that can
    be used to identify that specific malware sample. These databases have to be optimized
    every so often; otherwise, the virus definitions that you download with the software
    would become too large and unwieldy to be useful. Therefore, older virus definitions
    may be removed from these databases over time, which means having products from
    multiple vendors will likely lead to greater coverage of known threats.
  prefs: []
  type: TYPE_NORMAL
- en: '[Signatures and Heuristics](nsp-enoka501485-0007.xhtml#rbh1002)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You should also aim to use antivirus products that perform both signature-based
    detection and heuristics. *Signatures* identify known-malicious software by the
    contents of an executable or other file, though it’s trivial for an attacker to
    change the signature of their malware by changing the contents slightly. This
    is a major weakness when it comes to malware detection software. *Heuristics*,
    on the other hand, analyze the way a file behaves and the commands a file might
    run to determine whether it’s malicious. This is a much more reliable way of detecting
    known and unknown threats. How do you tell whether a particular antivirus program
    performs signature-based detection or heuristic scanning? The best way, if it’s
    not listed on their website, is to contact the vendor and ask. There will always
    be a contact method listed on their website.
  prefs: []
  type: TYPE_NORMAL
- en: '[#26: Installing Avast on macOS](nsp-enoka501485-0007.xhtml#rhd1001)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Apple devices, commonly believed to be less prone to malware, are becoming
    infected more often, which means you should install antivirus software on any
    Macs on your network. There are many options, both free and commercial, when installing
    a third-party heuristics-based antivirus solution on your Apple computer. Among
    these, Avast has topped many lists for several years. To install and configure
    Avast, use the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 1\. Download Avast from [http://www.avast.com/](http://www.avast.com/) and install
    the software. When the installation has completed, you should be presented with
    the Avast Security window (see [Figure 8-1](nsp-enoka501485-0017.xhtml#fig0801)).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Screenshot of Avast Security’s window states “This Mac is protected,” “You’re
    up-to-date! Last updated today at 5:40 am.” It has clickable button titled “Run
    Smart Scan” and options titled “Core Shields,” “Virus Chest,” “Wi-Fi Inspector,”
    and “Ransomware Shield.” At the top-right side of the window is an option for
    Notifications and a Menu button.](images/nsp-enoka501485-fig0801.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 8-1: Avast Security window'
  prefs: []
  type: TYPE_NORMAL
- en: 2\. Click **Menu▸Preferences** to reach Avast’s settings page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 3\. In the General tab, ensure that the **Turn on Automatic Updates** checkbox
    is ticked.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 4\. In the Privacy tab, *untick* the two checkboxes allowing your data to be
    shared with Avast. Similar to Windows Defender, it’s best to protect your privacy.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 5\. In the Core Shields tab, enable each of the security checks Avast will run,
    such as file scanning and web and email protection.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 6\. Click the **Add Exceptions** button under each of the shields to specify
    any necessary exceptions. Add exceptions if you have files or programs that you
    know to be legitimate or low risk but that your antivirus classifies as potentially
    malicious.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 7\. In the Scans tab, ensure the checkboxes **Scan Whole Files**, **Scan External
    Drives**, **Scan Mounted Network Volumes**, **Scan All Time Machine Backups**,
    and **Scan Archives** are ticked. By doing so, you can be certain your antivirus
    is doing as much as possible to identify threats and protect you from them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A *Smart Scan* is designed to scan the most vulnerable areas of your computer
    quickly. While this is less resource intensive and less time consuming, it’s not
    likely to catch all threats on your computer because it doesn’t scan all areas
    of your hard drives. A *Deep Scan* is more comprehensive and includes all areas
    of storage on your device, optionally including external storage, network locations,
    Time Machine backups, memory, and rootkit detection. A *Targeted Scan* scans only
    specified areas.
  prefs: []
  type: TYPE_NORMAL
- en: All of these scans are run from the Scan Central screen in Avast on your Mac.
    Click the **Search** button to select the type of scan you want to run and then
    click **Scan Now**. Selecting Targeted, USB/DVD, or Custom Scans will prompt you
    for the locations to scan. Avast will scan your computer for threats, and if any
    are detected, it will ask what you’d like to do with the relevant files. Select
    all the files and click **Resolve Selected** to move them all to the Virus Chest;
    then click **Done**. Your computer should now be clean of all potentially malicious
    files and applications.
  prefs: []
  type: TYPE_NORMAL
- en: '[#27: Installing ClamAV on Linux](nsp-enoka501485-0007.xhtml#rhd1002)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Linux is susceptible to viruses as well. However, Linux operating systems rarely
    come with a built-in antivirus application, and there are fewer available than
    for other operating systems. Most of the available solutions are commercial and
    therefore have a cost attached, such as Avast Core Security for Linux, though
    there is an open source solution: ClamAV.'
  prefs: []
  type: TYPE_NORMAL
- en: 'ClamAV is a free application that can be used on Windows, macOS, and Linux.
    To install it on Ubuntu, log in to your server via SSH as a standard, non-root
    user. Run the following command to install the version of ClamAV that allows you
    to automate your virus scanning activity, as well as the GUI, clamtk, which may
    be useful later:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'With the installation complete, your antivirus definitions (the database that
    tells ClamAV what is malware) should be up-to-date, but you can run the following
    commands to update the virus definitions—either now or in the future—to stop,
    update, and then restart ClamAV:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'To run a malware scan, use the `clamscan` `folder_to_scan` command. To scan
    everything on the system, use `/` to indicate to ClamAV to scan everything in
    the root of the filesystem, supply the `-r` parameter to make the scan recurse
    all directories, and use `sudo` so that ClamAV has the necessary permission to
    read all files in the filesystem:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: When the scan completes, `clamscan` will output a scan summary.
  prefs: []
  type: TYPE_NORMAL
- en: In addition to known malware, ClamAV can detect *potentially unwanted applications
    (PUAs)*, including software such as adware, peer-to-peer (p2p) programs, remote
    administration tools, bitcoin miners, and bundleware (software included with but
    not related to the application being installed), which are not inherently malicious
    but may pose a risk to or negatively impact your endpoints’ security and performance.
    To scan for PUAs, include the `--detect-pua=yes` argument when running ClamAV.
  prefs: []
  type: TYPE_NORMAL
- en: If your scans are taking too long, you can use other advanced parameters to
    reduce their duration. You can limit the size of the files ClamAV will scan with
    `--max-filesize=``n`, where `n` is the maximum file size in kilobytes. Any files
    larger than the size you specify will be skipped and assumed to be clean, reducing
    the time it takes your scan to complete. Similarly, `--max-scansize=``n` scans
    only archive files (*.rar* files, *.zip* files, and so on) up to the specified
    size—all other archives will be skipped. To limit the depth of the recursion (that
    is, how many directories will be scanned below the directory where you start the
    scan), use the `--max-dir-recursion=``n` parameter. For more parameters, use the
    `-h` argument, as in `sudo clamscan -h`, to print the help menu.
  prefs: []
  type: TYPE_NORMAL
- en: 'To run a scan on a regular schedule, use Crontab, a Linux utility designed
    to execute programs at preset times or intervals. In your terminal, use the `crontab
    -e` command to edit the scheduled tasks file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: The large comment at the start of the file explains how to specify tasks with
    an example. The last line of the comment provides the syntax for scheduling execution
    of scripts and applications. The order is minute, hour, day of month, month, day
    of week, and command to execute. Minutes and hours must be numbers, 0 to 59 and
    0 to 23, respectively, and you can specify a list of minutes or hours by separating
    the values with commas (that is, you can run a command at 1, 2, and 3 AM by specifying
    `1,2,3`). You can specify days numerically (1 to 7, where 1 is Sunday), or as
    Sun, Mon, Tue, and so on. Months are 1 to 12 (where 1 is January). An asterisk
    (`*`) stands for all possible values for a field; if you want your command to
    run every month, put an asterisk in the month (`mon`) position.
  prefs: []
  type: TYPE_NORMAL
- en: 'Say you want to run `clamscan` over the entire filesystem at 1 AM every Sunday,
    including scanning for potentially unwanted applications. At the bottom of the
    Crontab file, add a new line and enter the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: By default, you won’t be able to see the results of your scans unless you specify
    the logfile with the `-l` parameter. If you want to scan a specific folder, like
    the user home folders (*/home/*), every day, in addition to the full system scan,
    add another entry to the Crontab, following the previous example as a guideline.
  prefs: []
  type: TYPE_NORMAL
- en: 'Add another line to the Crontab to ensure ClamAV is kept up to date:'
  prefs: []
  type: TYPE_NORMAL
- en: 0 0 * * mon systemctl stop clamav-freshclam && freshclam && systemctl start
    clamav-freshclam
  prefs: []
  type: TYPE_NORMAL
- en: You can link multiple commands together and separate them with a pair of ampersands
    to run them in series. Find more information on Crontab (or any other terminal
    command) with the `man` function. Enter `man crontab` to open the manual for the
    application on the command line.
  prefs: []
  type: TYPE_NORMAL
- en: '[#28: Using VirusTotal](nsp-enoka501485-0007.xhtml#rhd1003)'
  prefs: []
  type: TYPE_NORMAL
- en: '*VirusTotal (VT)* tests files to determine whether they’re likely to be malicious
    ([https://www.virustotal.com/](https://www.virustotal.com/)) by taking the concept
    of an antivirus farm and implementing it on a large scale. It’s a publicly available
    service where you can upload any file to scan for malware, and VT will scan it
    with more than 60 antivirus programs. It will then produce a report to let you
    know whether it contains malware or behaves in a way that may negatively impact
    your endpoints, security, or privacy. This capability is especially useful if
    you believe a file is malicious but is undetected by your antivirus.'
  prefs: []
  type: TYPE_NORMAL
- en: Be aware that anything uploaded to VT becomes public, so anyone can search for
    and download the files you upload. To use VT without making your private information
    public, search VT for the hash of the file you want to check. *Hashing* is a process
    for calculating a fixed-length string based on the contents of a file. Hashing
    is expected to be a one-way process, meaning you can’t take the hash of a file
    and reverse it to get the original file contents. By creating the hash of a file,
    you should get a unique string of characters that identify said file. Some hashing
    algorithms can result in *collisions*, where two files yield the same hash, though
    the chances of this happening in most modern hashing functions are slim to none.
    You can get the hash of a file by using built-in tools in any operating system.
  prefs: []
  type: TYPE_NORMAL
- en: 'Windows PowerShell In Windows, open a PowerShell window and enter the following
    command to get the MD5 hash of any file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: You can then search for the hash directly in the VirusTotal web portal.
  prefs: []
  type: TYPE_NORMAL
- en: 'Linux and macOS Terminal You can get the MD5 hash of a file in both Linux and
    macOS using the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Then, search for the resulting hash in the VT web portal.
  prefs: []
  type: TYPE_NORMAL
- en: If a file with the same hash has been uploaded to VT at any point in the past,
    you’ll be presented with the public report for that file, detailing the malware
    scan results from all the providers in VT. If it hasn’t been uploaded previously,
    there’s a good chance the file isn’t malicious.
  prefs: []
  type: TYPE_NORMAL
- en: '[#29: Managing Patches and Updates](nsp-enoka501485-0007.xhtml#rhd1004)'
  prefs: []
  type: TYPE_NORMAL
- en: Along with using antivirus tools, patch management is an important defense because
    malware exploits are written to attack a specific vulnerability in a network,
    application, protocol, or operating system. Adversaries pay close attention to
    Windows updates and patches for other operating systems, as the patch notes call
    out the vulnerability it’s designed to remediate. Attackers use that vulnerability
    information to write malware specifically for that security flaw, and anyone who
    hasn’t downloaded the update can fall victim. This is why operating systems constantly
    ask you to install updates and patches.
  prefs: []
  type: TYPE_NORMAL
- en: In most cases, end users don’t install updates right away, and adversaries have
    a window of opportunity to target unpatched systems. It’s in your best interest
    to install software updates as soon as they become available. Luckily, the process
    of updating is exceedingly simple and easy to automate. This project describes
    how to configure system updates on individual systems, and the following section
    discusses a solution for patch management across multiple endpoints.
  prefs: []
  type: TYPE_NORMAL
- en: '[Windows Update](nsp-enoka501485-0007.xhtml#rbh1003)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For Windows updates, open **Windows Settings▸Update & Security**. Windows checks
    for updates automatically at least once per day (assuming the device is left on
    at all times). To check for, download, and install updates manually, click the
    **Check for Updates** button.
  prefs: []
  type: TYPE_NORMAL
- en: If you’d prefer not to worry about updates for a while, click **Pause Updates
    for 7 Days**. Updates are critical for keeping your system secure, so pausing
    the updates is not recommended.
  prefs: []
  type: TYPE_NORMAL
- en: You can restrict Windows from updating your computer during certain times by
    setting active hours. If you use your computer primarily between 9 AM and 5 PM,
    you can tell Windows not to update during this window, which is a better option
    than pausing updates for an extended period of time.
  prefs: []
  type: TYPE_NORMAL
- en: In Advanced Options, you can allow Windows to update other Microsoft products
    via Windows Update—I recommend turning this on. You can also make Windows force
    devices to restart after updates are installed, which is useful if you, as the
    administrator, want to force your end users to restart their machines. You’ll
    be unpopular, but your network will be more secure.
  prefs: []
  type: TYPE_NORMAL
- en: In the Advanced Options▸Delivery Optimization menu, you can enable the option
    to download updates from other PCs in your network. This reduces the bandwidth
    required to download the same updates to multiple computers from the internet.
    You should turn on this setting, with the caveat that downloads be allowed only
    from PCs on your local network and not from PCs on the internet.
  prefs: []
  type: TYPE_NORMAL
- en: Back in the Advanced Options pane, the last settings of particular interest
    are the Privacy settings. You can increase your privacy within this menu by disallowing
    Windows and Microsoft from sending you targeted ads and content based on your
    location, browsing habits, and application usage statistics.
  prefs: []
  type: TYPE_NORMAL
- en: '[macOS Software Update](nsp-enoka501485-0007.xhtml#rbh1004)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Apple devices are much simpler than Windows or Linux because their update process
    can be almost entirely automated and requires very little user input. To ensure
    your Apple computers are kept up-to-date, open **System Preferences▸Software Update**.
    To allow automatic updates, check **Automatically Keep My Mac Up-to-date**.
  prefs: []
  type: TYPE_NORMAL
- en: With this check box ticked, click the **Advanced** button to select what actions
    should be taken automatically. From this menu ([Figure 8-2](nsp-enoka501485-0017.xhtml#fig0802)),
    choose whether your computer can check for updates, download updates, or complete
    the installation process without user input, and then click **OK** to save the
    settings. In most cases, allowing your computer to keep itself up-to-date with
    no input from the user is desirable; the computer will still confirm with the
    user before restarting after any updates that require a reboot (which doesn’t
    happen often).
  prefs: []
  type: TYPE_NORMAL
- en: '![Screenshot showing macOS’s Software Update → Advanced tab where you can choose
    to automatically check for updates, download new updates when available, install
    macOS updates, install app updates from the App Store, and install system data
    files and security updates.](images/nsp-enoka501485-fig0802.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 8-2: macOS advanced software update configuration'
  prefs: []
  type: TYPE_NORMAL
- en: Keeping your devices up-to-date in this way ensures they are as secure as possible
    and protects your and your users’ privacy.
  prefs: []
  type: TYPE_NORMAL
- en: '[Linux Updates with apt](nsp-enoka501485-0007.xhtml#rbh1005)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: As discussed in [Chapter 1](nsp-enoka501485-0010.xhtml#ch01), the Linux operating
    system comes in multiple implementations, called *distributions*. Each of those
    distributions uses a package manager to maintain and update the software that
    the system or user installs. Throughout this book, we use Ubuntu Linux, which
    uses the Advanced Package Tool (APT) package manager. Package managers simplify
    the process of keeping your Linux endpoints up-to-date and secure.
  prefs: []
  type: TYPE_NORMAL
- en: 'To update an Ubuntu system, log in via SSH as a standard, non-root user. When
    you log in, you should be presented with a welcome message, including information
    about required and recommended updates:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'To make sure the list of updates is complete, run the `apt update` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Once the list is up-to-date, run the `upgrade` command to update all of the
    software packages:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: The command output will show the number of packages to update, the disk space
    they’ll use, and various status messages. When prompted, type **Y** and press
    ENTER to continue.
  prefs: []
  type: TYPE_NORMAL
- en: 'As with Windows and macOS, some updates require you to reboot the system. If
    that’s the case, you’ll see something like:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'To make Ubuntu update the system and installed packages automatically, use
    the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: The command will produce the prompt shown in [Figure 8-3](nsp-enoka501485-0017.xhtml#fig0803).
  prefs: []
  type: TYPE_NORMAL
- en: '![Screenshot showing “Configuring unattended-upgrades” that provides the prompt
    to “Automatically download and install stable updates?” You can choose Yes or
    No.](images/nsp-enoka501485-fig0803.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 8-3: Ubuntu unattended updates'
  prefs: []
  type: TYPE_NORMAL
- en: By selecting **Yes** and pressing ENTER, you’ll ensure your servers are kept
    up-to-date, thereby making them inherently more secure. However, you should still
    check for updates manually and reboot your server once a month.
  prefs: []
  type: TYPE_NORMAL
- en: '[#30: Installing Automox](nsp-enoka501485-0007.xhtml#rhd1005)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Depending on the size of your network, keeping all your endpoints up to date
    manually or even semi-manually might feel tedious or overwhelming. A centralized
    patch management solution like Automox allows you to easily manage all of these
    things in one place. Automox operates on a per-endpoint subscription model: you
    can start managing one or more Windows, macOS, or Linux systems (workstations
    or servers) for a nominal monthly fee, which allows you to patch all of your endpoints,
    with both system and third-party software patches, from one dashboard. Automox
    also maintains an asset and software inventory, which is the first step anyone
    should take to keep their network secure.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Installing Automox](nsp-enoka501485-0007.xhtml#rbh1006)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Head to the Automox website ([https://www.automox.com/](https://www.automox.com/))
    to sign up for an account (or free trial). Then log in to your account dashboard
    at [https://console.automox.com/](https://console.automox.com/). The dashboard
    is where you’ll see a summary of your managed endpoints and the updates they require.
    Of course, until you add some endpoints to your account, this dashboard will be
    sparse. In the following sections you’ll require a user key to connect your endpoints
    to Automox. Your key can be found by going to your profile settings page in the
    Automox web UI, under the Keys tab.
  prefs: []
  type: TYPE_NORMAL
- en: Windows
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: To install the Automox agent on Windows endpoints, access the **Devices** tab
    from your Automox console, and then click the **Add Devices** link at the top
    of the page. You’ll be presented with an OS selection pop-up. Select Windows,
    and then download the agent.
  prefs: []
  type: TYPE_NORMAL
- en: Once the agent is downloaded, run the installer (an *.msi* file) as an administrator.
    Follow the installation wizard, entering your Automox user key from the console
    when prompted. When the installation has completed, refresh your Automox dashboard
    to see the newly added endpoint ([Figure 8-4](nsp-enoka501485-0017.xhtml#fig0804)).
  prefs: []
  type: TYPE_NORMAL
- en: '![The Automox dashboard includes the following columns: OS, Device Name, Last
    Disconnected, Group Membership, Tags, IP Address, OS Version, Scheduled Patches,
    Total Patches, and Status.](images/nsp-enoka501485-fig0804.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 8-4: Automox asset list'
  prefs: []
  type: TYPE_NORMAL
- en: macOS and Linux
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'In a Terminal window on a Mac or Linux computer, run the following command,
    substituting your user key for `yourkey`:'
  prefs: []
  type: TYPE_NORMAL
- en: $ `curl -sS "https://console.automox.com/downloadInstaller?accesskey=``yourkey``"
    | sudo bash`
  prefs: []
  type: TYPE_NORMAL
- en: Refresh your console again to see the newly added endpoint(s).
  prefs: []
  type: TYPE_NORMAL
- en: '[Using Automox](nsp-enoka501485-0007.xhtml#rbh1007)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Now that you’ve installed Automox on your endpoints, you’ll be able to manage
    operating system and third-party software patches from a central console. From
    the Devices tab, you can view all of your managed endpoints and add them to groups—if
    you’d like to manage them that way. You can also scan your endpoints to identify
    hardware changes and check for new updates they require, reboot your endpoints
    remotely, or remove endpoints from your account. By clicking an endpoint, you
    can see its hardware configuration, IP and MAC addresses, device type, operating
    system, CPU and RAM details, and other critical information, as shown in [Figure
    8-5](nsp-enoka501485-0017.xhtml#fig0805). You can also force updates to be applied
    to the endpoint immediately, rather than wait for the endpoint to be updated according
    to the update policies specified in the System Management tab.
  prefs: []
  type: TYPE_NORMAL
- en: '![Automox’s Device Details page displays critical information about each device,
    including: the device status, connection status, time of the last system scan,
    the next patch window’s schedule, and the time of last disconnect.](images/nsp-enoka501485-fig0805.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 8-5: Automox device details'
  prefs: []
  type: TYPE_NORMAL
- en: The System Management tab allows you to create and assign patching policies,
    which is useful if you want to schedule patch installation. For example, you may
    decide to automatically install any critical patches daily at 5 pm. Alternatively,
    you might want to force the installation of all required patches at 12 am every
    Saturday, when people are less likely to be using their computers. You will need
    to define your own requirements and decide what patching schedule works best for
    you and your network.
  prefs: []
  type: TYPE_NORMAL
- en: In the Reports tab, you can generate reports of actions taken by Automox to
    keep your endpoints up-to-date, report on the state of any or all endpoints in
    your console, or identify noncompliant endpoints. Depending on the size of your
    network, it may be easier to view this information in your dashboard than to run
    these reports.
  prefs: []
  type: TYPE_NORMAL
- en: Automox will provide you with an inventory of all the software installed on
    your managed endpoints and their patch level in the Software tab. This allows
    you to easily identify software that requires updating and to update it if possible.
    You can also use this list to identify software that you don’t want in your environment,
    whether it’s potentially unwanted applications or specific software, like games
    or other software that violates an organizational policy.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, the Settings tab allows you to create new users to allow other administrators
    to access your Automox console to manage your endpoints. You can also find and
    add your agent access keys in this tab. One thing you should absolutely take advantage
    of is the two-factor authentication setting. By enabling two-factor authentication,
    you make your account more secure and therefore make unauthorized access to your
    devices and patch management information much more difficult (discussed further
    in [Chapter 11](nsp-enoka501485-0020.xhtml#ch11)).
  prefs: []
  type: TYPE_NORMAL
- en: '[Summary](nsp-enoka501485-0007.xhtml#rah1003)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Keeping your systems up-to-date is critical in keeping your network secure.
    Whether you choose to use the built-in antivirus and patching options for your
    operating system or a managed patching solution like Automox, updates should be
    regularly scheduled and virus scans regularly run; otherwise, you leave your network
    vulnerable to all sorts of adversaries and unnecessary risk.
  prefs: []
  type: TYPE_NORMAL
