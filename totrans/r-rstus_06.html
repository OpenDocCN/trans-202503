<html><head></head><body>
<div id="sbo-rt-content" class="calibre1"><section aria-labelledby="ch5" epub:type="chapter" role="doc-chapter">
<hgroup>
<h2 class="title" id="ch5">
<span class="tpt"><span aria-label=" Page 85. " epub:type="pagebreak" id="pg_85" role="doc-pagebreak" class="calibre2"/><span class="sans_dogma_ot_bold_b_">5</span></span>
<span class="ct"><span class="sans_dogma_ot_bold_b_">DESIGNING EFFECTIVE TABLES</span></span>
</h2>
</hgroup>
<figure class="opener"><img alt="" class="opener1" height="407" src="../images/chapter.jpg" width="407"/>
</figure>
<p class="cos">In his book <i class="calibre15">Fundamentals of Data Visualization</i>, Claus Wilke writes that tables are “an important tool for visualizing data.” This statement might seem odd. Tables are often considered the opposite of data visualizations such as plots: a place to dump numbers for the few nerds who care to read them. But Wilke sees things differently.</p>
<p class="tx">Tables need not—and should not—be data dumps devoid of design. While bars, lines, and points in graphs are visualizations, so are numbers in a table, and we should care about their appearance. As an example, take a look at the tables made by reputable news sources; data dumps these are not. Media organizations, whose job it is to communicate effectively, pay a lot of attention to table design. But elsewhere, because of their apparent simplicity, Wilke writes, “[tables] may not always receive the attention they need.”</p>
<p class="tx"><span aria-label=" Page 86. " epub:type="pagebreak" id="pg_86" role="doc-pagebreak"/>Many people use Microsoft Word to make tables, a strategy that has potential pitfalls. Wilke found that his version of Word included 105 built-in table styles. Of those, around 80 percent, including the default style, violated some key principle of table design. The good news is that R is a great tool for making high-quality tables. It has a number of packages for this purpose and, within these packages, several functions designed to make sure your tables follow important design principles.</p>
<p class="tx">Moreover, if you’re writing reports in R Markdown (which you’ll learn about in <span class="xref"><a href="chapter6.xhtml" class="calibre3">Chapter 6</a></span>), you can include code that will generate a table when you export your document. By working with a single tool to create tables, text, and other visualizations, you won’t have to copy and paste your data, lowering the risk of human error.</p>
<p class="tx">This chapter examines table design principles and shows you how to apply them to your tables using R’s <span class="sans_thesansmonocd_w5regular_">gt</span> package, one of the most popular table-making packages (and, as you’ll soon see, one that uses good design principles by default). These principles, and the code in this chapter, are adapted from Tom Mock’s blog post “10+ Guidelines for Better Tables in R.” Mock works at Posit, the company that makes RStudio, and has become something of an R table connoisseur. This chapter walks you through examples of Mock’s code to show you how small tweaks can make a big difference.</p>
<section aria-labelledby="sec1" epub:type="division">
<h3 class="h1" id="sec1"><span id="h1-31"/><span class="sans_dogma_ot_bold_b_1">Creating a Data Frame</span></h3>
<p class="tni">You will begin by creating a data frame that you can use to make tables throughout this chapter. First, load the packages you need (the <span class="sans_thesansmonocd_w5regular_">tidyverse</span> for general data manipulation functions, <span class="sans_thesansmonocd_w5regular_">gapminder</span> for the data you’ll use, <span class="sans_thesansmonocd_w5regular_">gt</span> to make the tables, and <span class="sans_thesansmonocd_w5regular_">gtExtras</span> to do some table formatting):</p>
<pre id="pre-98" class="calibre10"><code class="calibre11"><b class="calibre9">library(tidyverse)</b>
<b class="calibre9">library(gapminder)</b>
<b class="calibre9">library(gt)</b>
<b class="calibre9">library(gtExtras)</b>
</code></pre>
<p class="tx">As you saw in <span class="xref"><a href="chapter2.xhtml" class="calibre3">Chapter 2</a></span>, the <span class="sans_thesansmonocd_w5regular_">gapminder</span> package provides country-level demographic statistics. To make a data frame for your table, you’ll use just a few countries (the first four, in alphabetical order: Afghanistan, Albania, Algeria, and Angola) and three years (1952, 1972, and 1992). The <span class="sans_thesansmonocd_w5regular_">gapminder</span> data has many years, but these will suffice to demonstrate table-making principles. The following code creates a data frame called <span class="sans_thesansmonocd_w5regular_">gdp</span>:</p>
<pre id="pre-99" class="calibre10"><code class="calibre11">gdp &lt;- gapminder %&gt;%
  filter(country %in% c("Afghanistan", "Albania", "Algeria", "Angola")) %&gt;%
  select(country, year, gdpPercap) %&gt;%
  mutate(country = as.character(country)) %&gt;%
  pivot_wider(
    id_cols = country,
    names_from = year,
<span aria-label=" Page 87. " epub:type="pagebreak" id="pg_87" role="doc-pagebreak"/>    values_from = gdpPercap
  ) %&gt;%
  select(country, `1952`, `1972`, `1992`) %&gt;%
  rename(Country = country)
</code></pre>
<p class="tx">Here’s what <span class="sans_thesansmonocd_w5regular_">gdp</span> looks like:</p>
<pre id="pre-100" class="calibre10"><code class="calibre11">#&gt; # A tibble: 4 × 4
#&gt;   Country     `1952` `1972` `1992`
#&gt;   &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1 Afghanistan   779.   740.   649.
#&gt; 2 Albania      1601.  3313.  2497.
#&gt; 3 Algeria      2449.  4183.  5023.
#&gt; 4 Angola       3521.  5473.  2628.
</code></pre>
<p class="tx">Now that you have some data, you’ll use it to make a table.</p>
</section>
<section aria-labelledby="sec2" epub:type="division">
<h3 class="h1" id="sec2"><span id="h1-32"/><span class="sans_dogma_ot_bold_b_1">Table Design Principles</span></h3>
<p class="tni">Unsurprisingly, the principles of good table design are similar to those for data visualization more generally. This section covers six of the most important ones.</p>
<section aria-labelledby="sec3" epub:type="division">
<h4 class="h2" id="sec3"><span id="h2-42"/><span class="sans_futura_std_heavy_oblique_bi_">Minimize Clutter</span></h4>
<p class="tni">You can minimize clutter in your tables by removing unnecessary elements. For example, one common source of table clutter is grid lines, as shown in <a href="chapter5.xhtml#fig5-1" class="calibre3">Figure 5-1</a>.</p>
<figure class="img"><img alt="" class="img2" height="403" id="fig5-1" src="../images/fig5-1.jpg" width="886"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-1: A table with grid lines everywhere can be distracting.</span></p></figcaption>
</figure>
<p class="tx">Having grid lines around every single cell in your table is unnecessary and distracts from the goal of communicating clearly. A table with minimal or even no grid lines (<a href="chapter5.xhtml#fig5-2" class="calibre3">Figure 5-2</a>) is a much more effective communication tool.<span aria-label=" Page 88. " epub:type="pagebreak" id="pg_88" role="doc-pagebreak"/></p>
<figure class="img"><img alt="" class="img2" height="410" id="fig5-2" src="../images/fig5-2.jpg" width="880"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-2: A table with only horizontal grid lines is more effective.</span></p></figcaption>
</figure>
<p class="tx">I mentioned that <span class="sans_thesansmonocd_w5regular_">gt</span> uses good table design principles by default, and this is a great example. The second table, with minimal grid lines, requires just two lines of code—piping the <span class="sans_thesansmonocd_w5regular_">gdp</span> data into the <span class="sans_thesansmonocd_w5regular_">gt()</span> function, which creates a table:</p>
<pre id="pre-101" class="calibre10"><code class="calibre11">gdp %&gt;%
  gt()
</code></pre>
<p class="tx">To add grid lines to every part of the example, you’d have to add more code. Here, the code that follows the <span class="sans_thesansmonocd_w5regular_">gt()</span> function adds grid lines:</p>
<pre id="pre-102" class="calibre10"><code class="calibre11">gdp %&gt;%
  gt() %&gt;%
  tab_style(
    style = cell_borders(
      side = "all",
      color = "black",
      weight = px(1),
      style = "solid"
    ),
    locations = list(
      cells_body(
        everything()
      ),
      cells_column_labels(
        everything()
      )
    )
  ) %&gt;%
  opt_table_lines(extent = "none")
</code></pre>
<p class="tx">Since I don’t recommend taking this approach, I won’t walk you through this code. However, if you wanted to remove additional grid lines, you could do so like this:</p>
<pre id="pre-103" class="calibre10"><code class="calibre11">gdp %&gt;%
  gt() %&gt;%
  tab_style(
<span aria-label=" Page 89. " epub:type="pagebreak" id="pg_89" role="doc-pagebreak"/>    style = cell_borders(color = "transparent"),
    locations = cells_body()
  )
</code></pre>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">tab_style()</span> function uses a two-step approach. First, it identifies the style to modify (in this case, the borders), then it specifies where to apply these modifications. Here, <span class="sans_thesansmonocd_w5regular_">tab_style()</span> tells R to modify the borders using the <span class="sans_thesansmonocd_w5regular_">cell_borders()</span> function, making the borders transparent, and to apply this transformation to the <span class="sans_thesansmonocd_w5regular_">cells_body()</span> location (versus, say, the <span class="sans_thesansmonocd_w5regular_">cells_column_labels()</span> for only the first row).</p>
<blockquote class="calibre13">
<p class="note"><span class="sans_dogma_ot_bold_b_2">NOTE</span></p>
</blockquote>
<p class="note-txt"><i class="calibre4">To see all options, check out the list of so-called helper functions on the gt package documentation website at</i> <span class="copyright_accent"><a href="https://gt.rstudio.com/reference/index.xhtml#helper-functions" class="calibre3">https://gt.rstudio.com/reference/index.xhtml#helper-functions</a></span><i class="calibre4">.</i></p>
<p class="tx">Running this code outputs a table with no grid lines at all in the body (<a href="chapter5.xhtml#fig5-3" class="calibre3">Figure 5-3</a>).</p>
<figure class="img"><img alt="" class="img2" height="405" id="fig5-3" src="../images/fig5-3.jpg" width="880"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-3: A clean-looking table with grid lines only on the header row and the bottom</span></p></figcaption>
</figure>
<p class="tx">Save this table as an object called <span class="sans_thesansmonocd_w5regular_">table_no_gridlines</span> so that you can add to it later.</p>
</section>
<section aria-labelledby="sec4" epub:type="division">
<h4 class="h2" id="sec4"><span id="h2-43"/><span class="sans_futura_std_heavy_oblique_bi_">Differentiate the Header from the Body</span></h4>
<p class="tni">While reducing clutter is an important goal, going too far can have negative consequences. A table with no grid lines at all can make it hard to differentiate between the header row and the table body. Consider <a href="chapter5.xhtml#fig5-4" class="calibre3">Figure 5-4</a>, for example.</p>
<figure class="img"><img alt="" class="img2" height="353" id="fig5-4" src="../images/fig5-4.jpg" width="859"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-4: An unclear table with all grid lines removed</span></p></figcaption>
</figure>
<p class="tx"><span aria-label=" Page 90. " epub:type="pagebreak" id="pg_90" role="doc-pagebreak"/>By making the header row bold, you can make it stand out better:</p>
<pre id="pre-104" class="calibre10"><code class="calibre11">table_no_gridlines %&gt;%
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_column_labels()
  )
</code></pre>
<p class="tx">Starting with the <span class="sans_thesansmonocd_w5regular_">table_no_gridlines</span> object, this code applies formatting with the <span class="sans_thesansmonocd_w5regular_">tab_style()</span> function in two steps. First, it specifies that it wants to alter the text style by using the <span class="sans_thesansmonocd_w5regular_">cell_text()</span> function to set the weight to bold. Second, it sets the location for this transformation to the header row using the <span class="sans_thesansmonocd_w5regular_">cells_column_labels()</span> function. <a href="chapter5.xhtml#fig5-5" class="calibre3">Figure 5-5</a> shows what the table looks like with its header row bolded.</p>
<figure class="img"><img alt="" class="img2" height="405" id="fig5-5" src="../images/fig5-5.jpg" width="880"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-5: Making the header row more obvious using bold</span></p></figcaption>
</figure>
<p class="tx">Save this table as <span class="sans_thesansmonocd_w5regular_">table_bold_header</span> in order to add further formatting.</p>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h4 class="h2" id="sec5"><span id="h2-44"/><span class="sans_futura_std_heavy_oblique_bi_">Align Appropriately</span></h4>
<p class="tni">A third principle of high-quality table design is appropriate alignment. Specifically, numbers in tables should be right-aligned. Tom Mock explains that left-aligning or center-aligning numbers “impairs the ability to clearly compare numbers and decimal places. Right alignment lets you align decimal places and numbers for easy parsing.”</p>
<p class="tx">Let’s look at this principle in action. In <a href="chapter5.xhtml#fig5-6" class="calibre3">Figure 5-6</a>, the 1952 column is left-aligned, the 1972 column is center-aligned, and the 1992 column is right-aligned.</p>
<figure class="img"><img alt="" class="img2" height="410" id="fig5-6" src="../images/fig5-6.jpg" width="880"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-6: Comparing numerical data aligned to the left (1952), center (1972), and right (1992)</span></p></figcaption>
</figure>
<p class="tx"><span aria-label=" Page 91. " epub:type="pagebreak" id="pg_91" role="doc-pagebreak"/>You can see how much easier it is to compare the values in the 1992 column than those in the other two columns. In both the 1952 and 1972 columns, it’s challenging to compare the values because the numbers in the same position (the tens place, for example) aren’t aligned vertically. In the 1992 column, however, the number in the tens place in Afghanistan (4) aligns with the number in the tens place in Albania (9) and all other countries, making it much easier to scan the table.</p>
<p class="tx">As with other tables, you actually have to override the defaults to get the <span class="sans_thesansmonocd_w5regular_">gt</span> package to misalign the columns, as demonstrated in the following code:</p>
<pre id="pre-105" class="calibre10"><code class="calibre11">table_bold_header %&gt;%
  cols_align(
    align = "left",
    columns = 2
  ) %&gt;%
  cols_align(
    align = "center",
    columns = 3
  ) %&gt;%
  cols_align(
    align = "right",
    columns = 4
  )
</code></pre>
<p class="tx">By default, <span class="sans_thesansmonocd_w5regular_">gt</span> will right-align numeric values. Don’t change anything, and you’ll be golden.</p>
<p class="tx">Right alignment is best practice for numeric columns, but for text columns, use left alignment. As Jon Schwabish points out in his article “Ten Guidelines for Better Tables” in the <i class="calibre4">Journal of Benefit-Cost Analysis</i>, it’s much easier to read longer text cells when they are left-aligned. To see the benefit of left-aligning text, add a country with a long name to your table. I’ve added Bosnia and Herzegovina and saved this as a data frame called <span class="sans_thesansmonocd_w5regular_">gdp_with_bosnia</span>. You’ll see that I’m using nearly the same code I used previously to create the <span class="sans_thesansmonocd_w5regular_">gdp</span> data frame:</p>
<pre id="pre-106" class="calibre10"><code class="calibre11">gdp_with_bosnia &lt;- gapminder %&gt;%
  filter(country %in% c("Afghanistan", "Albania", "Algeria", "Angola",
"Bosnia and Herzegovina")) %&gt;%
  select(country, year, gdpPercap) %&gt;%
  mutate(country = as.character(country)) %&gt;%
  pivot_wider(
    id_cols = country,
    names_from = year,
    values_from = gdpPercap
  ) %&gt;%
  select(country, `1952`, `1972`, `1992`) %&gt;%
  rename(Country = country)
</code></pre>
<p class="tx"><span aria-label=" Page 92. " epub:type="pagebreak" id="pg_92" role="doc-pagebreak"/>Here’s what the <span class="sans_thesansmonocd_w5regular_">gdp_with_bosnia</span> data frame looks like:</p>
<pre id="pre-107" class="calibre10"><code class="calibre11">#&gt; # A tibble: 5 × 4
#&gt;   Country                `1952` `1972` `1992`
#&gt;   &lt;chr&gt;                   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1 Afghanistan              779.   740.   649.
#&gt; 2 Albania                 1601.  3313.  2497.
#&gt; 3 Algeria                 2449.  4183.  5023.
#&gt; 4 Angola                  3521.  5473.  2628.
#&gt; 5 Bosnia and Herzegovina   974.  2860.  2547.
</code></pre>
<p class="tx">Now take the <span class="sans_thesansmonocd_w5regular_">gdp_with_bosnia</span> data frame and create a table with the Country column center-aligned. In the table in <a href="chapter5.xhtml#fig5-7" class="calibre3">Figure 5-7</a>, it’s hard to scan the country names, and that center-aligned column just looks a bit weird.</p>
<figure class="img"><img alt="" class="img2" height="396" id="fig5-7" src="../images/fig5-7.jpg" width="886"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-7: Center-aligned text can be hard to read, especially when it includes longer values.</span></p></figcaption>
</figure>
<p class="tx">This is another example where you have to change the <span class="sans_thesansmonocd_w5regular_">gt</span> defaults to mess things up. In addition to right-aligning numeric columns by default, <span class="sans_thesansmonocd_w5regular_">gt</span> left-aligns character columns. As long as you don’t touch anything, you’ll get the alignment you’re looking for.</p>
<p class="tx">If you ever do want to override the default alignments, you can use the <span class="sans_thesansmonocd_w5regular_">cols_align()</span> function. For example, here’s how to make the table with center-aligned country names:</p>
<pre id="pre-108" class="calibre10"><code class="calibre11">gdp_with_bosnia %&gt;%
  gt() %&gt;%
  tab_style(
    style = cell_borders(color = "transparent"),
    locations = cells_body()
  ) %&gt;%
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_column_labels()
  ) %&gt;%
  cols_align(
    columns = "Country",
    align = "center"
  )
</code></pre>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">columns</span> argument tells <span class="sans_thesansmonocd_w5regular_">gt</span> which columns to align, and the <span class="sans_thesansmonocd_w5regular_">align</span> argument selects the alignment (<span class="sans_thesansmonocd_w5regular_">left</span>, <span class="sans_thesansmonocd_w5regular_">right</span>, or <span class="sans_thesansmonocd_w5regular_">center</span>).</p>
</section>
<section aria-labelledby="sec6" epub:type="division">
<h4 class="h2" id="sec6"><span id="h2-45"/><span aria-label=" Page 93. " epub:type="pagebreak" id="pg_93" role="doc-pagebreak"/><span class="sans_futura_std_heavy_oblique_bi_">Use the Correct Level of Precision</span></h4>
<p class="tni">In all of the tables you’ve made so far, you’ve used the data exactly as it came to you. The data in the numeric columns, for example, extends to four decimal places—almost certainly too many. Having more decimal places makes a table harder to read, so you should always strike a balance between what Jon Schwabish describes as “necessary precision and a clean, spare table.”</p>
<p class="tx">Here’s a good rule of thumb: if adding more decimal places would change some action, keep them; otherwise, take them out. In my experience, people tend to leave too many decimal places in, putting too much importance on a very high degree of accuracy (and, in the process, reducing the legibility of their tables).</p>
<p class="tx">In the GDP table, you can use the <span class="sans_thesansmonocd_w5regular_">fmt_currency()</span> function to format the numeric values:</p>
<pre id="pre-109" class="calibre10"><code class="calibre11">table_bold_header %&gt;%
  fmt_currency(
    columns = c(`1952`, `1972`, `1992`),
    decimals = 0
  )
</code></pre>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">gt</span> package has a whole series of functions for formatting values in tables, all of which start with <span class="sans_thesansmonocd_w5regular_">fmt_</span>. This code applies <span class="sans_thesansmonocd_w5regular_">fmt_currency()</span> to the 1952, 1972, and 1992 columns, then uses the <span class="sans_thesansmonocd_w5regular_">decimals</span> argument to tell <span class="sans_thesansmonocd_w5regular_">fmt_currency()</span> to format the values with zero decimal places. After all, the difference between a GDP of $779.4453 and $779 is unlikely to lead to different decisions.</p>
<p class="tx">This produces values formatted as dollars. The <span class="sans_thesansmonocd_w5regular_">fmt_currency()</span> function automatically adds a thousands-place comma to make the values even easier to read (<a href="chapter5.xhtml#fig5-8" class="calibre3">Figure 5-8</a>).</p>
<figure class="img"><img alt="" class="img2" height="526" id="fig5-8" src="../images/fig5-8.jpg" width="877"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-8: Rounding dollar amounts to whole numbers and adding dollar signs can simplify data.</span></p></figcaption>
</figure>
<p class="tx">Save your table for reuse as <span class="sans_thesansmonocd_w5regular_">table_whole_numbers</span>.</p>
</section>
<section aria-labelledby="sec7" epub:type="division">
<h4 class="h2" id="sec7"><span id="h2-46"/><span aria-label=" Page 94. " epub:type="pagebreak" id="pg_94" role="doc-pagebreak"/><span class="sans_futura_std_heavy_oblique_bi_">Use Color Intentionally</span></h4>
<p class="tni">So far, your table hasn’t used any color, so you’ll add some now to highlight outlier values. Doing so can help your table communicate more effectively, especially for readers who want to scan it. To make the highest value in the year 1952 a different color, you again use the <span class="sans_thesansmonocd_w5regular_">tab_style()</span> function:</p>
<pre id="pre-110" class="calibre10"><code class="calibre11">table_whole_numbers %&gt;%
  tab_style(
    style = cell_text(
      color = "orange",
      weight = "bold"
    ),
    locations = cells_body(
      columns = `1952`,
      rows = `1952` == max(`1952`)
    )
  )
</code></pre>
<p class="tx">This function uses <span class="sans_thesansmonocd_w5regular_">cell_text()</span> to change the color of the text to orange and make it bold. Within the <span class="sans_thesansmonocd_w5regular_">cells_body()</span> function, the <span class="sans_thesansmonocd_w5regular_">locations()</span> function specifies the columns and rows to which the changes will apply. The <span class="sans_thesansmonocd_w5regular_">columns</span> argument is simply set to the year whose values are being changed, but setting the rows requires a more complicated formula. The code <span class="sans_thesansmonocd_w5regular_">rows = `1952` == max(`1952`)</span> applies the text transformation to rows whose value is equal to the maximum value in that year.</p>
<p class="tx">Repeating this code for the 1972 and 1992 columns generates the result shown in <a href="chapter5.xhtml#fig5-9" class="calibre3">Figure 5-9</a> (which represents the orange values in grayscale for print purposes).</p>
<figure class="img"><img alt="" class="img2" height="503" id="fig5-9" src="../images/fig5-9.jpg" width="878"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-9: Using color to highlight important values, such as the largest number in each year</span></p></figcaption>
</figure>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">gt</span> package makes it straightforward to add color to highlight outlier values.</p>
</section>
<section aria-labelledby="sec8" epub:type="division">
<h4 class="h2" id="sec8"><span id="h2-47"/><span aria-label=" Page 95. " epub:type="pagebreak" id="pg_95" role="doc-pagebreak"/><span class="sans_futura_std_heavy_oblique_bi_">Add a Data Visualization Where Appropriate</span></h4>
<p class="tni">Adding color to highlight outliers is one way to help guide the reader’s attention. Another way is to incorporate graphs into tables. Tom Mock developed an add-on package for <span class="sans_thesansmonocd_w5regular_">gt</span> called <span class="sans_thesansmonocd_w5regular_">gtExtras</span> that makes it possible to do just this. For example, say you want to show how the GDP of each country changes over time. To do that, you can add a new column that visualizes this trend using a <i class="calibre4">sparkline</i> (essentially, a simple line chart):</p>
<pre id="pre-111" class="calibre10"><code class="calibre11">gdp_with_trend &lt;- gdp %&gt;%
  group_by(Country) %&gt;%
  mutate(Trend = list(c(`1952`, `1972`, `1992`))) %&gt;%
  ungroup()
</code></pre>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">gt_plt_sparkline()</span> function requires you to provide the values needed to make the sparkline in a single column. To accomplish this, the code creates a variable called <span class="sans_thesansmonocd_w5regular_">Trend</span>, using <span class="sans_thesansmonocd_w5regular_">group_by()</span> and <span class="sans_thesansmonocd_w5regular_">mutate()</span>, to hold a list of the values for each country. For Afghanistan, for example, <span class="sans_thesansmonocd_w5regular_">Trend</span> would contain 779.4453145, 739.9811058, and 649.3413952. Save this data as an object called <span class="sans_thesansmonocd_w5regular_">gdp_with_trend</span>.</p>
<p class="tx">Now you create your table as before but add the <span class="sans_thesansmonocd_w5regular_">gt_plt_sparkline()</span> function to the end of the code. Within this function, specify which column to use to create the sparkline (<span class="sans_thesansmonocd_w5regular_">Trend</span>) as follows:</p>
<pre id="pre-112" class="calibre10"><code class="calibre11">gdp_with_trend %&gt;%
  gt() %&gt;%
  tab_style(
    style = cell_borders(color = "transparent"),
    locations = cells_body()
  ) %&gt;%
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_column_labels()
  ) %&gt;%
  fmt_currency(
    columns = c(`1952`, `1972`, `1992`),
    decimals = 0
  ) %&gt;%
  tab_style(
    style = cell_text(
      color = "orange",
      weight = "bold"
    ),
    locations = cells_body(
      columns = `1952`,
      rows = `1952` == max(`1952`)
    )
  ) %&gt;%
  tab_style(
    style = cell_text(
      color = "orange",
      weight = "bold"
    ),
<span aria-label=" Page 96. " epub:type="pagebreak" id="pg_96" role="doc-pagebreak"/>    locations = cells_body(
      columns = `1972`,
      rows = `1972` == max(`1972`)
    )
  ) %&gt;%
  tab_style(
    style = cell_text(
      color = "orange",
      weight = "bold"
    ),
    locations = cells_body(
      columns = `1992`,
      rows = `1992` == max(`1992`)
    )
  ) %&gt;%
  gt_plt_sparkline(
    column = Trend,
    label = FALSE,
    palette = c("black", "transparent", "transparent", "transparent", "transparent")
  )
</code></pre>
<p class="tx">Setting <span class="sans_thesansmonocd_w5regular_">label = FALSE</span> removes text labels that <span class="sans_thesansmonocd_w5regular_">gt_plt_sparkline()</span> adds by default, then adds a <span class="sans_thesansmonocd_w5regular_">palette</span> argument to make the sparkline black and all other elements of it transparent. (By default, the function will make different parts of the sparkline different colors.) The stripped-down sparkline in <a href="chapter5.xhtml#fig5-10" class="calibre3">Figure 5-10</a> allows the reader to see the trend for each country at a glance.</p>
<figure class="img"><img alt="" class="img2" height="394" id="fig5-10" src="../images/fig5-10.jpg" width="884"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-10: A table with sparklines can show changes in data over time.</span></p></figcaption>
</figure>
<p class="tx">The <span class="sans_thesansmonocd_w5regular_">gtExtras</span> package can do much more than merely create sparklines. Its set of theme functions allows you to make your tables look like those published by FiveThirtyEight, the <i class="calibre4">New York Times</i>, the <i class="calibre4">Guardian</i>, and other news outlets.</p>
<p class="tx">As an example, try removing the formatting you’ve applied so far and instead use the <span class="sans_thesansmonocd_w5regular_">gt_theme_538()</span> function to style the table. Then take a look at tables on the FiveThirtyEight website. You should see similarities to the one in <a href="chapter5.xhtml#fig5-11" class="calibre3">Figure 5-11</a>.<span aria-label=" Page 97. " epub:type="pagebreak" id="pg_97" role="doc-pagebreak"/></p>
<figure class="img"><img alt="" class="img2" height="300" id="fig5-11" src="../images/fig5-11.jpg" width="880"/>
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 5-11: A table redone in the FiveThirtyEight style</span></p></figcaption>
</figure>
<p class="tx">Add-on packages like <span class="sans_thesansmonocd_w5regular_">gtExtras</span> are common in the table-making landscape. If you’re working with the <span class="sans_thesansmonocd_w5regular_">reactable</span> package to make interactive tables, for example, you can also use the <span class="sans_thesansmonocd_w5regular_">reactablefmtr</span> to add interactive sparklines, themes, and more. You’ll learn more about making interactive tables in <span class="xref"><a href="chapter9.xhtml" class="calibre3">Chapter 9</a></span>.</p>
</section>
</section>
<section aria-labelledby="sec9" epub:type="division">
<h3 class="h1" id="sec9"><span id="h1-33"/><span class="sans_dogma_ot_bold_b_1">Summary</span></h3>
<p class="tni">Many of the tweaks you made to your table in this chapter are quite subtle. Changes like removing excess grid lines, bolding header text, right-aligning numeric values, and adjusting the level of precision can often go unnoticed, but if you skip them, your table will be far less effective. The final product isn’t flashy, but it does communicate clearly.</p>
<p class="tx">You used the <span class="sans_thesansmonocd_w5regular_">gt</span> package to make your high-quality table, and as you’ve repeatedly seen, this package has good defaults built in. Often, you don’t need to change much in your code to make effective tables. But no matter which package you use, it’s essential to treat tables as worthy of just as much thought as other kinds of data visualization.</p>
<p class="tx">In <span class="xref"><a href="chapter6.xhtml" class="calibre3">Chapter 6</a></span>, you’ll learn how to create reports using R Markdown, which can integrate your tables directly into the final document. What’s better than using just a few lines of code to make publication-ready tables?</p>
</section>
<section aria-labelledby="sec10" epub:type="division">
<h3 class="h1" id="sec10"><span id="h1-34"/><span class="sans_dogma_ot_bold_b_1">Additional Resources</span></h3>
<ul class="ul">
<li class="listbullet">Thomas Mock, “10+ Guidelines for Better Tables in R,” <i class="calibre4">The MockUp</i>, September 4, 2020, <i class="calibre4"><a href="https://themockup.blog/posts/2020-09-04-10-table-rules-in-r/" class="calibre3">https://themockup.blog/posts/2020-09-04-10-table-rules-in-r/</a></i>.</li>
<li class="listbullet">Albert Rapp, “Creating Beautiful Tables in R with {gt},” November 27, 2022, <i class="calibre4"><a href="https://gt.albert-rapp.de" class="calibre3">https://gt.albert-rapp.de</a></i>.</li>
<li class="listbullet">Jon Schwabish, “Ten Guidelines for Better Tables,” <i class="calibre4">Journal of Benefit-Cost Analysis</i> 11, no. 2 (2020), <i class="calibre4"><a href="https://doi.org/10.1017/bca.2020.11" class="calibre3">https://doi.org/10.1017/bca.2020.11</a></i>.</li>
</ul>
</section>
</section>
</div></body></html>