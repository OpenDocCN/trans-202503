<html><head></head><body>
<h2 class="h2" id="ch01"><span epub:type="pagebreak" id="page_12"/><span class="num">1</span> Getting Started with Arduino</h2>&#13;
<p class="noindent1"><span epub:type="pagebreak" id="page_13"/><span class="red">This project covers everything you need to get your Arduino up and running! We’ll introduce the hardware, show you how to install the programming environment, and help you make sure everything works by loading a simple program. At the end, you should have your own blinking light and the excitement to move on. Let’s go!</span></p>&#13;
<h3 class="h3" id="ch01lev1sec1"><span epub:type="pagebreak" id="page_14"/><strong>MATERIALS TO GATHER</strong></h3>&#13;
<p class="noindent">You’ll need the following hardware (shown in <a href="ch01.xhtml#ch01fig01">Figure 1-1</a>) to complete this project:</p>&#13;
<p class="bull">• One SparkFun RedBoard (DEV-13975), Arduino Uno (DEV-11021), or any other Arduino-compatible board</p>&#13;
<p class="bull">• One USB Mini-B cable (CAB-11301 or your board’s USB cable)</p>&#13;
<p class="bull">• One LED (COM-09590, or COM-12062 for a pack of 20)</p>&#13;
<p class="figuret"><a id="ch01fig01"/><strong>FIGURE 1-1:</strong> Required components</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_1.jpg"/></div>&#13;
<h3 class="h3" id="ch01lev1sec2"><strong>ABOUT THE ARDUINO</strong></h3>&#13;
<p class="noindent">An <em>Arduino</em> (pronounced är·də’wēn·ō or “arr-dween-oh!”) is a small programmable device that can add smarts to nonintelligent things. You can use an Arduino to run robots, create LED art, and even act as a handheld gaming console. In this section, we’ll go into more detail on what the Arduino is and how it can change the way you think about the world around you.</p>&#13;
<h4 class="h4" id="ch01lev2sec1"><strong>An Accessible Hardware Platform</strong></h4>&#13;
<p class="noindent">An Arduino is like a small computer. You can program it using very simple instructions, and you can power it with just a few AA batteries. What makes an Arduino really different from a regular computer is that it uses a <em>microcontroller</em>, rather than a CPU, to process information and take action. This small chip acts as the brains of your project, and it can receive input from sensors (like light detectors, temperature sensors, or buttons) and output signals to control LEDs, motors, <span epub:type="pagebreak" id="page_15"/>buzzers, and more. An Arduino board like the one in <a href="ch01.xhtml#ch01fig02">Figure 1-2</a> has all of the supporting components and circuitry to make a micro-controller work.</p>&#13;
<p class="figuret"><a id="ch01fig02"/><strong>FIGURE 1-2:</strong> The Arduino Uno is an open source, programmable electronics platform for hobbyists.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_2.jpg"/></div>&#13;
<p class="indent">The programming language used for the Arduino is essentially a version of C/C++. The programming environment is the <em>Arduino IDE (integrated development environment)</em>. The team that developed it bundled it with many prewritten functions and libraries to simplify the process of writing code to interface with hardware. For example, these libraries take the multiple lines of code required to turn on an LED and simplify them into a single instruction!</p>&#13;
<h4 class="h4" id="ch01lev2sec2"><strong>About the SparkFun RedBoard</strong></h4>&#13;
<p class="noindent">There are many officially Arduino-branded boards, but since the platform is <em>open source</em> (meaning the source hardware design and software are available for anyone to look at and modify), there are also many Arduino derivatives, clones, and compatible boards. The board designs are all licensed under a Creative Commons Attribution Share-Alike license, and the Arduino FAQ (<em><a href="https://www.arduino.cc/en/Main/FAQ">https://www.arduino.cc/en/Main/FAQ</a></em>) states that anyone is “free to use and adapt [these designs] for your own needs without asking permission or paying a fee.” Derivative boards work with the same programming environment as an official Arduino, but often the hardware has been tweaked or modified in some way.</p>&#13;
<p class="indent">The SparkFun RedBoard, pictured in <a href="ch01.xhtml#ch01fig03">Figure 1-3</a>, is an Arduino-compatible derivative board. It is based on the Arduino Uno design but has a more stable USB interface and uses a USB mini connector instead of the Type-A connector. Otherwise, it is exactly the same as the Uno, with the same size and shape.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_16"/><a id="ch01fig03"/><strong>FIGURE 1-3:</strong> The Arduino-compatible SparkFun RedBoard. Notice how its shape matches up with the Arduino Uno in <a href="ch01.xhtml#ch01fig02">Figure 1-2</a>.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_3.jpg"/></div>&#13;
<p class="indent">The RedBoard is the go-to Arduino board here at SparkFun and has a few key components that you’ll need to know in order to navigate the first few chapters of this book. We have labeled each term for you in <a href="ch01.xhtml#ch01fig03">Figure 1-3</a>.</p>&#13;
<p class="noindent"><span class="red"><strong>ATmega328 microcontroller</strong></span> The square black chip in the middle of the board. It is the brain of the Arduino.</p>&#13;
<p class="noindent"><span class="red"><strong>Header pins</strong></span> The tiny metal legs on the microcontroller, which let you read input and send output. They are accessible through the four sets of black headers on either side of the Arduino. They are numbered and labeled for specific uses. The pins you’ll care about most are those labeled <em>Digital</em> (0–13), <em>Analog In</em> (A0–A5), and <em>Power</em>.</p>&#13;
<p class="noindent"><span class="red"><strong>Mini-USB port</strong></span> This is how you send code to and communicate with the Arduino. You can also power your board using the USB port for most applications in this book. If an external power supply is needed, we’ll be sure to point it out.</p>&#13;
<p class="noindent"><span class="red"><strong>Power LED</strong></span> This LED is an indicator to show that the Arduino is powered on. If you ever have a short circuit on your board or a bad power connection, this indicator will not turn on.</p>&#13;
<p class="noindent"><span class="red"><strong>TX/RX LEDs</strong></span> These LEDs blink when data, such as code or numbers, is being passed back and forth between your Arduino and your laptop.</p>&#13;
<p class="noindent"><span class="red"><strong>Onboard LED 13</strong></span> A debug light. If you’re plugging your Arduino in for the first time, LED 13 should blink once per second. It’s connected to pin 13 on the Arduino.</p>&#13;
<p class="noindent"><span class="red"><strong>External power jack</strong></span> A barrel jack port next to the USB port. The Arduino takes 5 V of power, though you can safely supply the Arduino a voltage between 7 and 15 V without damaging your board. A chip on the Arduino scales this input voltage down to 5 V for the electronics and circuitry to work properly.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_17"/>Like all Arduino-compatible boards, you’ll program the RedBoard with the Arduino IDE.</p>&#13;
<h3 class="h3" id="ch01lev1sec3"><strong>INSTALLING THE ARDUINO IDE AND DRIVERS</strong></h3>&#13;
<p class="noindent">You should install the Arduino IDE before plugging your RedBoard into the USB port for the first time. To install the Arduino IDE, go to <em><a href="http://www.arduino.cc/download/">http://www.arduino.cc/download/</a></em>. Select the appropriate version for your computer’s operating system, and click the link to download (<a href="ch01.xhtml#ch01fig04">Figure 1-4</a>). You’ll be asked whether you’d like to make a contribution; the development and maintenance of the Arduino IDE rely on the help and contributions of the community that uses it.</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>If you’ve already plugged in your board, that’s not a problem—you may just need to restart your computer after the installation is complete for the drivers to work properly.</em></p>&#13;
</div>&#13;
<p class="figuret"><a id="ch01fig04"/><strong>FIGURE 1-4:</strong> You can use the online IDE or download the latest version for your operating system.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_4.jpg"/></div>&#13;
<p class="indent">Even if you already have the IDE installed, we recommend downloading and installing the latest version. The Arduino IDE is continuously being updated and improved, and it’s best to have the newest release. The examples in this book use IDE versions 1.8.1 and later.</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>If you like to be on the bleeding edge of software, the Arduino Downloads page also provides nightly builds that preview the next release. For this book, however, we recommend using the latest stable release.</em></p>&#13;
</div>&#13;
<p class="indent">The Arduino website also provides an online platform called Arduino Create, which includes a web-based code editor. It allows you to program your device through your web browser and share and view projects with others online. As of the writing of this book, it is supported only on Windows and OS X.</p>&#13;
<p class="indent">Whether you choose to use Arduino Create or the downloaded IDE, follow the directions online to run the installation process.</p>&#13;
<h4 class="h4" id="ch01lev2sec3"><span epub:type="pagebreak" id="page_18"/><strong>Installing on Windows</strong></h4>&#13;
<p class="noindent">If you’re working on a Windows PC, we recommend downloading the Windows Installer version of Arduino. Download this file, open it, and click <strong>Run</strong>. This will bring up the Installation Options dialog (<a href="ch01.xhtml#ch01fig05">Figure 1-5</a>).</p>&#13;
<p class="figuret"><a id="ch01fig05"/><strong>FIGURE 1-5:</strong> Installation Options dialog for Arduino. Make sure that USB drivers are selected!</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_5.jpg"/></div>&#13;
<p class="indent">Check the <strong>Install Arduino software</strong> box along with the other options, or you’ll have to install the drivers separately. Then, tell the installer where you’d like to install Arduino (we recommend accepting the default directory), and click <strong>Install</strong>.</p>&#13;
<p class="indent">Once you begin the installation process, have a snack or a cup of coffee, because it could take a few minutes to complete. Depending on your version of Windows, you might again be asked if you want to install drivers and if Arduino LLC is trusted, as pictured in <a href="ch01.xhtml#ch01fig06">Figure 1-6</a>.</p>&#13;
<p class="figuret"><a id="ch01fig06"/><strong>FIGURE 1-6:</strong> In Arduino we trust!</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_6.jpg"/></div>&#13;
<p class="indent">If you don’t want to see prompts like this again, check the box that says you trust Arduino. Either way, click <strong>Install</strong> to install the USB drivers. That’s it! Arduino typically installs a shortcut on your desktop. Double-click that now to run the Arduino IDE.</p>&#13;
<h4 class="h4" id="ch01lev2sec4"><span epub:type="pagebreak" id="page_19"/><strong>Installing on OS X</strong></h4>&#13;
<p class="noindent">If you’re using a Mac, download the Arduino IDE option for OS X, and follow the directions in this section.</p>&#13;
<h5 class="h5" id="ch01lev3sec1"><strong>Installing the IDE</strong></h5>&#13;
<p class="noindent">After the download is complete, hover your cursor over your <em>Downloads</em> folder, and click <strong>Open in Finder</strong> as shown in <a href="ch01.xhtml#ch01fig07">Figure 1-7</a>.</p>&#13;
<p class="figuret"><a id="ch01fig07"/><strong>FIGURE 1-7:</strong> After downloading, the program will be in the <em>Downloads</em> folder. Click <strong>Open in Finder</strong> to move it into the <em>Applications</em> folder.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_7.jpg"/></div>&#13;
<p class="indent">Then, simply click and drag the <em>Arduino</em> program file into the <em>Applications</em> folder, as shown in <a href="ch01.xhtml#ch01fig08">Figure 1-8</a>. In most cases, you won’t need to install anything else, and you should be able to open the Arduino IDE as you would any other program.</p>&#13;
<p class="figuret"><a id="ch01fig08"/><strong>FIGURE 1-8:</strong> Click and drag the <em>Arduino</em> file into the <em>Applications</em> folder on the left.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_8.jpg"/></div>&#13;
<h5 class="h5" id="ch01lev3sec2"><strong>Installing the FTDI Driver Manually on OS X</strong></h5>&#13;
<p class="noindent">If you’re using a standard Arduino Uno board, the drivers should be preinstalled and work out of the box. If you’re using the SparkFun RedBoard, there’s one extra step needed to manually install a driver. The SparkFun RedBoard uses a USB chip from Future Technology Devices International (FTDI) to communicate with your computer. You need to manually install the FTDI driver for this chip. First, navigate to <em><a href="http://www.sparkfun.com/ftdi/">http://www.sparkfun.com/ftdi/</a></em>. This will take you to our tutorial on installing FTDI drivers (see <a href="ch01.xhtml#ch01fig09">Figure 1-9</a>).</p>&#13;
<p class="indent">Click the link for Mac OS X. This will direct you to options for a driver to install based on the version of OS X running on your computer. There is one option if you have Mac OS X 10.3 (Panther) to 10.8 (Mountain Lion) and another option if you have Mac OS X 10.9 (Mavericks) or greater.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_20"/><a id="ch01fig09"/><strong>FIGURE 1-9:</strong> SparkFun FTDI Installation Guide</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_9.jpg"/></div>&#13;
<p class="indent">Download the appropriate driver and double-click it to start the installation process. You should be greeted with the familiar Mac software install window. Select your hard drive once it is found, and click <strong>OK</strong>. Continue through the installation process, and when the progress bar fills up (as in <a href="ch01.xhtml#ch01fig10">Figure 1-10</a>), the drivers should be installed.</p>&#13;
<p class="figuret"><a id="ch01fig10"/><strong>FIGURE 1-10:</strong> Installation of the FTDI drivers on OS X</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_10.jpg"/></div>&#13;
<p class="indent">That’s it! Now, double-click the Arduino icon in your <em>Applications</em> folder to run the IDE. If you’ve already opened the IDE before installing the FTDI drivers, you’ll need to fully exit and close out of the Arduino IDE and restart it for your serial ports to show up correctly.</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>If you encounter an error after driver installation, check out solutions at</em> <a href="https://www.sparkfun.com/macdriver/">https://www.sparkfun.com/macdriver/</a><em>.</em></p>&#13;
</div>&#13;
<h4 class="h4" id="ch01lev2sec5"><strong>Installing on Linux</strong></h4>&#13;
<p class="noindent">Arduino is available for Linux users, too. Download the correct Linux file for your system; it comes in 32- and 64-bit flavors. Then, uncompress the file using <code>xz-utils</code> or another file compression utility. If you want to use the latest version of Arduino in Linux, you may need to install some other dependency programs as well. Go to <em><a href="http://playground.arduino.cc/Learning/Linux/">http://playground.arduino.cc/Learning/Linux/</a></em> for distribution-specific information on this.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_21"/>For most distributions of Linux (including Ubuntu, Debian, and Fedora), you should be able to use the <code>apt-get</code> package manager to install Arduino from the command line. Open a terminal and enter the following command:</p>&#13;
<div class="pre">&#13;
<pre>sudo apt-get install arduino</pre>&#13;
</div>&#13;
<p class="indent">Once the process is complete, open the Arduino program you just installed. Arduino uses Java to run the IDE and must be run out of an XWindows or comparable window user interface environment.</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>Depending on the package manager for your distribution of Linux, the version you install this way may not be the latest version currently hosted on the Arduino site.</em></p>&#13;
</div>&#13;
<h3 class="h3" id="ch01lev1sec4"><strong>A BRIEF IDE TOUR</strong></h3>&#13;
<p class="noindent">The IDE is a place for you to write instructions for your Arduino and test them out. These instructions form a program, or in Arduino terminology, a <em>sketch</em>. The IDE allows you to <em>upload</em> your sketch to your Arduino and control things in the physical world.</p>&#13;
<p class="indent">If you haven’t done so already, open your newly installed Arduino program. After a splash screen, you should see the IDE, which looks something like <a href="ch01.xhtml#ch01fig11">Figure 1-11</a>.</p>&#13;
<p class="figuret"><a id="ch01fig11"/><strong>FIGURE 1-11:</strong> The Arduino IDE</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_11.jpg"/></div>&#13;
<p class="indent">You can use the menu bar (which consists of File, Edit, Sketch, Tools, and Help menus) <span class="ent">➊</span> to open or save files, upload your code to the Arduino, modify settings, and so on. You should also see a set of graphic buttons <span class="ent">➋</span>. In order from left to right, these are Verify/ Compile, Upload, New, Open, and Save. We will explore those menus and buttons throughout this book. The majority of the IDE is whitespace <span class="ent">➌</span>; this is where you’ll write your code. Underneath the <span epub:type="pagebreak" id="page_22"/>code area is the <em>alert bar</em> <span class="ent">➍</span>, and below it you’ll find the console <span class="ent">➎</span>; these report statuses, alerts, and errors. For example, if there’s a typo in your sketch (called a <em>syntax error</em>), the IDE will show you the error there. If you try typing your name in the code window and click the check mark (Verify/Compile) button, the Arduino IDE will think for a bit and then show an error in the alert bar, highlight your name, and give you more information in the console about the error, as you can see in <a href="ch01.xhtml#ch01fig12">Figure 1-12</a>.</p>&#13;
<p class="figuret"><a id="ch01fig12"/><strong>FIGURE 1-12:</strong> A typical error message and readout in the Arduino IDE</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_12.jpg"/></div>&#13;
<h3 class="h3" id="ch01lev1sec5"><strong>CHANGING THE DEFAULT PREFERENCES</strong></h3>&#13;
<p class="noindent">Arduino is a fully open and configurable programming environment. There are a few minor things we like to tweak in the preferences to make it easier to write code, debug, and make cool stuff. Select <strong>File <span class="ent">▸</span> Preferences</strong> to view and change the general settings of the Arduino IDE. You should see a window similar to <a href="ch01.xhtml#ch01fig13">Figure 1-13</a>.</p>&#13;
<p class="indent">We suggest adjusting the editor font size so it’s comfortable for you to read. We also like to check <strong>Display line numbers</strong> and uncheck <strong>Save when verifying or uploading</strong>. Line numbers will help you navigate around your code easier, and unchecking the auto-saving feature will allow you to quickly test code without having to save it each time. Arduino is completely open, so if you want to, you can also click the <em>preferences.txt</em> file and adjust many other features.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_23"/><a id="ch01fig13"/><strong>FIGURE 1-13:</strong> Arduino Preferences window</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_13.jpg"/></div>&#13;
<h3 class="h3" id="ch01lev1sec6"><strong>TEST DRIVE: PLUGGING IN THE ARDUINO FOR THE FIRST TIME</strong></h3>&#13;
<p class="noindent">When you have the Arduino IDE and drivers fully installed, connect your Arduino board to the USB port of your computer using the appropriate cable. The power LED should turn on, and if your board is completely new, you should see an LED, labeled 13, blinking as in <a href="ch01.xhtml#ch01fig14">Figure 1-14</a>. Your computer is powering the Arduino board through the USB cable, and it’s running code that was installed at the factory. Unlike a computer, an Arduino can only store and run a single sketch at a time. The standard test sketch loaded onto an Arduino is a simple LED blink. With your board plugged in, you’ll set up the IDE so that you can write your own sketch.</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>If you plugged in your board before installing the IDE and drivers, you may need to restart your computer.</em></p>&#13;
</div>&#13;
<p class="figuret"><a id="ch01fig14"/><strong>FIGURE 1-14:</strong> The LED labeled 13 blinks when you power a new board.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_14.jpg"/></div>&#13;
<h4 class="h4" id="ch01lev2sec6"><span epub:type="pagebreak" id="page_24"/><strong>Choosing Your Board in the IDE</strong></h4>&#13;
<p class="noindent">Depending on your computer or operating system, it may take a little bit for the computer to identify the new hardware you just plugged in and associate it with the drivers you installed. After your computer recognizes the new device, click <strong>Tools</strong> and mouse over the <strong>Board</strong> option, as in <a href="ch01.xhtml#ch01fig15">Figure 1-15</a>.</p>&#13;
<p class="figuret"><a id="ch01fig15"/><strong>FIGURE 1-15:</strong> The Board selection list in the Tools menu</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_15.jpg"/></div>&#13;
<p class="indent">A list of pre-supported Arduino boards should appear. If you’re using a standard Arduino Uno or the SparkFun RedBoard, select the option <strong>Arduino/Genuino Uno</strong>. If you end up using a board other than an Uno or RedBoard in the future, select the correct Arduino based on your board’s documentation—this book assumes that you’re using the Uno or an Uno derivative.</p>&#13;
<h4 class="h4" id="ch01lev2sec7"><strong>Selecting the Communication Port</strong></h4>&#13;
<p class="noindent">Each device that’s plugged into your computer has a unique communication port identifier. You need to configure the IDE so that it knows which port your Arduino is connected to. To do this, first select <strong>Tools <span class="ent">▸</span> Port</strong> to see the communication port options for your device. You’ll see different options depending on your operating system.</p>&#13;
<h5 class="h5" id="ch01lev3sec3"><strong>On Windows</strong></h5>&#13;
<p class="noindent">If you’re using a Windows PC, you may see COM3, COM4, or another numbered COM port, as shown in <a href="ch01.xhtml#ch01fig16">Figure 1-16</a>. Select this option. If no options show up, see “<a href="ch01.xhtml#ch01lev1sec8">Basic Arduino Troubleshooting</a>” on page <a href="ch01.xhtml#page_27">27</a>.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_25"/><a id="ch01fig16"/><strong>FIGURE 1-16:</strong> Selecting the communication port on Windows</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_16.jpg"/></div>&#13;
<h5 class="h5" id="ch01lev3sec4"><strong>On OS X and Linux</strong></h5>&#13;
<p class="noindent">On Mac or Linux machines, the communication port should be listed as <em>/dev/cu.usbserial-A&lt;xxxx&gt;</em>, where the <em>&lt;xxxx&gt;</em> is a string of random characters unique to your Arduino. Select this option. You may see more than one port listed, as in <a href="ch01.xhtml#ch01fig17">Figure 1-17</a>, but only the one with this unique ID string will map to your Arduino. If no options show up, see “<a href="ch01.xhtml#ch01lev1sec8">Basic Arduino Troubleshooting</a>” on page <a href="ch01.xhtml#page_27">27</a>.</p>&#13;
<p class="figuret"><a id="ch01fig17"/><strong>FIGURE 1-17:</strong> Selecting the communication port on OS X</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_17.jpg"/></div>&#13;
<h3 class="h3" id="ch01lev1sec7"><strong>AN ARDUINO “HELLO, WORLD!”</strong></h3>&#13;
<p class="noindent">“Hello, world!” is the classic first program that many beginning programmers write. In most other programming languages, this program displays <code>Hello, world!</code> to the screen. Because the Arduino doesn’t have a screen, its version of “Hello, world!” is a blinking LED.</p>&#13;
<p class="indent">For your first sketch, we’ll show you how to use an example that comes with the Arduino IDE. With your board connected to your computer, click the <strong>File</strong> drop-down menu and select <strong>Examples <span class="ent">▸</span> 01.Basics <span class="ent">▸</span> Blink</strong> as shown in <a href="ch01.xhtml#ch01fig18">Figure 1-18</a> to open a sketch called <em>Blink</em>.</p>&#13;
<p class="indent">A new IDE window containing the Blink sketch should open. In this window, click <strong>Sketch <span class="ent">▸</span> Upload</strong> or click the <strong>Upload</strong> icon. The IDE will turn this relatively human-readable code into 1s and 0s that the Arduino understands (a process called <em>compiling</em>) and then upload the sketch to your board.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_26"/><a id="ch01fig18"/><strong>FIGURE 1-18:</strong> Finding the Blink sketch</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_18.jpg"/></div>&#13;
<p class="indent">After you click Upload, watch the alert area for status messages. It should say <em>Compiling sketch…</em> and show a progress bar. After the compiling is complete, your computer will start to upload the sketch to your Arduino. The RX (receive) and TX (transmit) LEDs on your Arduino board should blink rapidly, indicating that the sketch is being transmitted to the Arduino board. The TX light blinks because you’re transmitting something to the Arduino, and the RX light blinks because as the Arduino receives the sketch, it responds to your computer to confirm receipt. When the upload process is done, the status area on the IDE should say <em>Upload complete</em>, and the LED labeled 13 on your board should blink, as in <a href="ch01.xhtml#ch01fig19">Figure 1-19</a>.</p>&#13;
<p class="figuret"><a id="ch01fig19"/><strong>FIGURE 1-19:</strong> Turning on LED 13</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_19.jpg"/></div>&#13;
<p class="indent">If you get any error messages, your Arduino might not be talking to your computer. Read the next section, <span epub:type="pagebreak" id="page_27"/>“<a href="ch01.xhtml#ch01lev1sec8">Basic Arduino Troubleshooting</a>,” for some common problems to look out for, and then try uploading the sketch again.</p>&#13;
<h3 class="h3" id="ch01lev1sec8"><strong>BASIC ARDUINO TROUBLESHOOTING</strong></h3>&#13;
<p class="noindent">The Arduino, like any other programmable piece of electronics, is temperamental at times. Here are a few troubleshooting tips for when you have trouble programming your Arduino.</p>&#13;
<p class="olist">1. Make sure that your Arduino is plugged into your USB cable and that the cable is plugged into your computer all the way. It’s easy to have the cable only partially plugged into the board. You can also try unplugging it and plugging it back in.</p>&#13;
<p class="olist">2. Always confirm the board selected in the Board menu is the board plugged into your computer. For our examples, we will have <em>Arduino/Genuino Uno</em> selected.</p>&#13;
<p class="olist">3. Confirm that the correct communication port is selected in the Tools <span class="ent">▸</span> Port menu; it should have a checkmark or dot next to it. If you’re not sure which port goes with your Arduino, unplug your USB cable from your computer, refresh the communication port listing, and watch to see which port disappears.</p>&#13;
<p class="olist">4. Make sure you didn’t accidentally type some stray characters into your example sketch. The code will not compile if there are any extra characters.</p>&#13;
<p class="olist">5. On Windows, check your computer’s Device Manager. Make sure that there isn’t an exclamation mark next to the device. If there is, you need to reinstall the drivers manually.</p>&#13;
<p class="olist">6. If you’re still getting error messages, reinstall the drivers for your board. We have additional instructions available at <em><a href="http://www.sparkfun.com/ftdi/">www.sparkfun.com/ftdi/</a></em>.</p>&#13;
<p class="indent">These six tips are solutions to common speed bumps for anyone new to Arduino, so start here. If none of these suggestions solves the issue, just stay calm, be patient, and remember that you’re not the first one to have a problem. If you get completely stuck, look for solutions on the official Arduino forum at <em><a href="http://forum.arduino.cc/">http://forum.arduino.cc/</a>.</em></p>&#13;
<h3 class="h3" id="ch01lev1sec9"><strong>ANATOMY OF AN ARDUINO SKETCH</strong></h3>&#13;
<p class="noindent">In this section, we’ll walk you through the Blink sketch that you uploaded to the Arduino in ‘An Arduino “Hello, World!”’ on page <a href="ch01.xhtml#page_25">25</a>. First, <a href="ch01.xhtml#ch01ex01">Listing 1-1</a> gives the sketch itself, in all its blinky glory.</p>&#13;
<p class="ex-caption"><span epub:type="pagebreak" id="page_28"/><a id="ch01ex01"/><strong>LISTING 1-1:</strong> The Blink example sketch</p>&#13;
<div class="pre">&#13;
<pre><span class="ent">➊</span> <span class="ash">/*</span><br/>    <span class="ash">Blink</span><br/>    <span class="ash">Turns an LED on for one second, then off for one second,</span><br/>      <span class="ash">repeatedly.</span><br/><br/>    <span class="ash">Most Arduinos have an onboard LED you can control. On the</span><br/>      <span class="ash">UNO, MEGA, and ZERO, it is attached to digital pin 13;</span><br/>      <span class="ash">on the MKR1000 it's on pin 6. LED_BUILTIN is set to the</span><br/>      <span class="ash">correct LED pin independent of which board is used.</span><br/><br/>    <span class="ash">If you want to know which pin the onboard LED is connected</span><br/>      <span class="ash">to on your Arduino model, check the Technical Specs of</span><br/>      <span class="ash">your board at https://www.arduino.cc/en/Main/Products</span><br/><br/>    <span class="ash">This example code is in the public domain.</span><br/><br/>    <span class="ash">modified 8 May 2014</span><br/>    <span class="ash">by Scott Fitzgerald</span><br/><br/>    <span class="ash">modified 2 Sep 2016</span><br/>    <span class="ash">by Arturo Guadalupi</span><br/><br/>    <span class="ash">modified 8 Sep 2016</span><br/>    <span class="ash">by Colby Newman</span><br/>  <span class="ash">*/</span><br/><br/><br/>  <span class="ash">//the setup function runs once when you press reset or</span><br/>  <span class="ash">//power the board</span><br/><span class="ent">➋</span> <span class="green">void</span> <span class="green1">setup</span>() {<br/>    <span class="ash">//initialize digital pin LED_BUILTIN as an output</span><br/>    <span class="orange">pinMode</span>(<span class="green">LED_BUILTIN</span>, <span class="green">OUTPUT</span>);<br/>  }<br/><br/>  <span class="ash">//the loop function runs over and over again forever</span><br/><span class="ent">➌</span> <span class="green">void</span> <span class="green1">loop</span>() {<br/>      <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">HIGH</span>); <span class="ash">//turn the LED on</span><br/>                                       <span class="ash">//(voltage level is HIGH)</span><br/>      <span class="orange">delay</span>(1000);                     <span class="ash">//wait for a second</span><br/>      <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">LOW</span>);  <span class="ash">//turn the LED off</span><br/>                                       <span class="ash">//(voltage level is LOW)</span><br/>      <span class="orange">delay</span>(1000);                     <span class="ash">//wait for a second</span><br/>  }</pre>&#13;
</div>&#13;
<p class="indent">When writing sketches in Arduino, you need to be very specific with the words, punctuation, and capitalization you use. These elements are part of a programming language’s <em>syntax</em>. For the IDE to <span epub:type="pagebreak" id="page_29"/>compile your sketch properly, you must use words that it recognizes. These are called <em>keywords</em>, and you’ll notice them when they change to a different color, such as orange, teal, or green. Now, let’s look at some of the features used in this first sketch in detail.</p>&#13;
<h4 class="h4" id="ch01lev2sec8"><strong>Key Sketch Elements</strong></h4>&#13;
<p class="noindent">At the top of the sketch, you declare a new <em>global namespace</em> <span class="ent">➊</span>. This is a space that describes what the sketch does and often includes other information such as variable initializations and library statements. Nearly every sketch will include a namespace. This sketch’s namespace has comments written to help human readers understand what the sketch does. In the Arduino IDE, comments are gray. Every comment either starts with the characters <code>//</code> or is bounded by the symbols <code>/*</code> and <code>*/</code> if the comment is longer than a few lines. Notice that not all comments come between lines of code; some appear on the same line as the code they clarify. This doesn’t affect the sketch, because comments are ignored by the IDE. Unlike with code, you can write anything you want in the comments using regular words, spelling, or punctuation.</p>&#13;
<p class="indent">The skeleton of any sketch consists of two main function definitions, <code>setup()</code> <span class="ent">➋</span> and <code>loop()</code> <span class="ent">➌</span>. A <em>function</em> is simply a way of grouping multiple instructions or lines of code together. Each function has a data type, a name, and a group of instructions. The word before the function indicates the type of data the function will return. Both <code>setup()</code> and <code>loop()</code> have the type <code>void</code> because they do not return any values.</p>&#13;
<p class="indent">The name of every function includes a set of parentheses. These parentheses are where you pass <em>parameters</em> to the function. Parameters are values that a function needs to do its job. Neither <code>setup()</code> nor <code>loop()</code> needs parameters, but you’ll use some functions in later projects that do need them. Finally, the lines of code that make up the function are grouped by an opening curly bracket, <code>{</code>, and closing curly bracket, <code>}</code>.</p>&#13;
<p class="indent">The <code>setup()</code> and <code>loop()</code> functions are required for every Arduino sketch; when the Arduino is turned on for the first time or is reset, the <code>setup()</code> code runs once and only once, and <code>loop()</code> code repeats continuously over and over. It’s like baking cookies: instructions in <code>setup()</code> get out all of your tools and ingredients, and <code>loop()</code> bakes batches over and over until you turn off the oven (that is, the Arduino).</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_30"/>Now, let’s figure out what each line of code in <code>setup()</code> and <code>loop()</code> is actually doing.</p>&#13;
<h4 class="h4" id="ch01lev2sec9"><strong>The setup() Function</strong></h4>&#13;
<p class="noindent">First, let’s take a closer look at the Blink sketch’s <code>setup()</code> function; see <a href="ch01.xhtml#ch01ex02">Listing 1-2</a>.</p>&#13;
<p class="ex-caption"><a id="ch01ex02"/><strong>LISTING 1-2:</strong> The <code>setup()</code> code for our Blink example</p>&#13;
<div class="pre">&#13;
<pre><span class="green">void</span> <span class="green1">setup</span>() {<br/>  <span class="ash">//initialize digital pin LED_BUILTIN as an output</span><br/>  <span class="orange">pinMode</span>(<span class="green">LED_BUILTIN</span>, <span class="green">OUTPUT</span>);<br/>}</pre>&#13;
</div>&#13;
<p class="indent">The only line of code inside the <code>setup()</code> function is a call to the <code>pinMode()</code> function. Pins 0–13 on the Arduino are considered <em>general-purpose input/output (GPIO) pins</em>. They can be used as either inputs or outputs, and <code>pinMode()</code> allows you to tell the Arduino how you plan to use a digital pin. You do this by passing two parameters. The first is the pin number, and it can range from 0 to 13. The second parameter is the pin configuration.</p>&#13;
<p class="indent">For the pin reference, the Blink sketch uses a system constant called <code>LED_BUILTIN</code> to specify that you’re using the default LED on the device. On most Arduino devices, this is the same as pin 13. Notice that the value is in all caps and colored dark teal. This color indicates that <code>LED_BUILTIN</code> is a special keyword with a predefined value used in the IDE.</p>&#13;
<p class="indent">The second parameter defines the pin configuration as an <code>OUTPUT</code>. Notice that the keyword <code>OUTPUT</code> is also dark teal because it is another constant used in Arduino. There are a few other choices here, which we’ll cover in detail in <a href="ch04.xhtml#ch04">Projects 4</a> and <a href="ch09.xhtml#ch09">9</a>, but for now just note that Blink sets the pin as an <code>OUTPUT</code> for the LED.</p>&#13;
<p class="indent">If you were to describe this line of code as a sentence, it would say, “Tell pin 13 to output from the Arduino.”</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>The</em> <em><code>pinMode()</code></em> <em>function follows a capitalization convention called</em> camel case. <em>In camel case, the first letter is lowercase, and any later letters that start words are capitalized.</em></p>&#13;
</div>&#13;
<p class="indent">The very last character in the <code>pinMode()</code> call is a semicolon (<code>;</code>), which marks the end of a line of code. When you start writing your own sketches, always end a finished line of code with a semicolon. If you forget one, don’t worry; nearly everyone who’s ever programmed forgets a semicolon eventually, so the Arduino IDE will show a handy warning to help you figure out where to put the missing punctuation.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart"><span epub:type="pagebreak" id="page_31"/><strong>WHERE’S THE MAIN() FUNCTION?</strong></p>&#13;
<p class="noindent">If you know a bit of programming or are familiar with C or C++, you might wonder where the <code>main()</code> function is in Arduino sketches. When you click Verify/Compile or Upload, Arduino actually pulls together a lot of other files behind the scenes—including a file called <em>main.cpp</em>. Dig around the Arduino program folder, and you can find all the nitty-gritty details of what’s going on. Remember, it’s open source!</p>&#13;
<p class="indent">Here’s a snippet of code from the <em>main.cpp</em> file:</p>&#13;
<div class="pre">&#13;
<pre>  int main(void)<br/>  {<br/>    init();<br/>    initVariant();<br/>  #if defined(USBCON)<br/>    USBDevice.attach();<br/>  #endif<br/><span class="ent">➊</span>   setup();<br/>    for (;;)<br/>    {<br/><span class="ent">➋</span>   loop();<br/>    if (serialEventRun) serialEventRun();<br/>    }<br/>    return 0;<br/>  }</pre>&#13;
</div>&#13;
<p class="indent">See where the <code>setup()</code> function is called at <span class="ent">➊</span>? And notice that the <code>loop()</code> function <span class="ent">➋</span> is inside a forever loop; Arduino implements a forever loop using an empty <code>for(;;)</code>. That’s how it runs continuously.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch01lev2sec10"><strong>The loop() Function</strong></h4>&#13;
<p class="noindent">Now let’s look again at the <code>loop()</code> function, which executes each instruction from top to bottom and repeats itself forever. See <a href="ch01.xhtml#ch01ex03">Listing 1-3</a>.</p>&#13;
<p class="ex-caption"><a id="ch01ex03"/><strong>LISTING 1-3:</strong> The <code>loop()</code> code for the Blink sketch</p>&#13;
<div class="pre">&#13;
<pre><span class="green">void</span> <span class="green1">loop</span>() {<br/>  <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">HIGH</span>);  <span class="ash">//turn the LED on</span><br/>                                    <span class="ash">//(voltage level is HIGH)</span><br/>  <span class="orange">delay</span>(1000);                      <span class="ash">//wait for a second</span><br/>  <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">LOW</span>);   <span class="ash">//turn the LED off</span><br/>                                    <span class="ash">//(voltage level is LOW)</span><br/>  <span class="orange">delay</span>(1000);                      <span class="ash">//wait for a second</span><br/>}</pre>&#13;
</div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_32"/>The <code>digitalWrite()</code> function allows you to turn the Arduino pins on or off; this is called controlling a pin’s <em>state</em>. This function also uses two parameters. The first indicates the pin you want to control; in this case, we’re using the system constant <code>LED_BUILTIN</code> again. The second parameter is the state you want the pin to be in. To turn the light on, the Blink sketch passes in <code>HIGH</code>. To turn the light off, it passes in <code>LOW</code>.</p>&#13;
<p class="indent">The second instruction is <code>delay()</code>, which delays your sketch by the number of milliseconds you pass as its parameter. The Arduino Uno and derivative boards like the SparkFun RedBoard execute 16 million instructions per second; that’s really fast! It’s so fast, in fact, that without a delay, you’d never notice a change in the LED. The delay lets us control how long the LED stays on. In the example, <code>delay(1000)</code> instructs the Arduino to delay for 1,000 ms before executing the next command.</p>&#13;
<p class="indent">The next two lines of code are similar to the first two; they simply instruct the Arduino to turn the LED off and delay another 1,000 ms. After the last line, the <code>loop()</code> function repeats from the top and turns the LED back on.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart"><strong>HACK THE (HELLO) WORLD</strong></p>&#13;
<p class="noindent">One of the best ways to learn from example code is by changing what it does. Try decreasing the delays to <code>500</code>. Click <strong>Upload</strong>. How did the blink change? What if you pass <code>delay()</code> the number <code>5</code> instead? This is a 5 ms blink! Can you see it? What is the fastest blink rate that you <em>can</em> see?</p>&#13;
</div>&#13;
<h4 class="h4" id="ch01lev2sec11"><strong>Your First Piece of Hardware</strong></h4>&#13;
<p class="noindent">With the LED on your board working and blinking away, the next step is to add your first piece of hardware: an external LED. As we mentioned, the pins on the Arduino are used for hooking up inputs and outputs to the microcontroller, and we can demonstrate that simply with an LED. Grab an LED and take a close look at it. It will look something like <a href="ch01.xhtml#ch01fig20">Figure 1-20</a>.</p>&#13;
<p class="indent">You’ll notice that the LED has a short leg and a long leg. If you look really closely, you’ll also see that the edge of the LED bulb has a flat surface on the same side as the short leg. These help you <span epub:type="pagebreak" id="page_33"/>identify the <em>polarity</em> of the legs; the LED’s long leg is the positive leg, and the short leg on the side of the flat bulb surface is the negative, or ground, leg.</p>&#13;
<p class="figuret"><a id="ch01fig20"/><strong>FIGURE 1-20:</strong> An LED showing the long and short legs</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_20.jpg"/></div>&#13;
<p class="indent">Remember that <code>LED_BUILTIN</code> refers to pin 13 on the Arduino. So, adding your LED to the Arduino is as simple as plugging the long leg of the LED into pin 13 and the short leg of the LED into the GND (ground) pin right next to pin 13. Insert the LED now, with your board powered. If you plug it in correctly, as shown in <a href="ch01.xhtml#ch01fig21">Figure 1-21</a>, the LED will start blinking. If the LED doesn’t blink, you probably have it plugged in backward. Not to worry: pull it out and flip it around.</p>&#13;
<p class="figuret"><a id="ch01fig21"/><strong>FIGURE 1-21:</strong> An LED added to pin 13 the quick and dirty way</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_21.jpg"/></div>&#13;
<h3 class="h3" id="ch01lev1sec10"><strong>GOING FURTHER</strong></h3>&#13;
<p class="noindent">Each project in this book will have a “<a href="ch01.xhtml#ch01lev1sec10">Going Further</a>” section, which describes ways to take the concepts you learned in that project to the next level. These sections will include advice on using the existing project, hacking the code, and modifying the project physically.</p>&#13;
<h4 class="h4" id="ch01lev2sec12"><strong>Hack</strong></h4>&#13;
<p class="noindent">For this project, we suggest you try to create some nifty blink patterns. First, copy and paste the four lines in the <code>loop()</code> function so that it repeats and you end up with eight lines of code. This gives you two blink sequences and more code to work with. You can create patterns by modifying the delay times to control when the <span epub:type="pagebreak" id="page_34"/>LED lights. For example, we made a pattern that looks like a heartbeat; our modified Blink sketch is shown in <a href="ch01.xhtml#ch01ex04">Listing 1-4</a>.</p>&#13;
<p class="ex-caption"><a id="ch01ex04"/><strong>LISTING 1-4:</strong> Example code of a heartbeat pattern</p>&#13;
<div class="pre">&#13;
<pre><span class="green">void</span> <span class="green1">setup</span>() {<br/>  <span class="orange">pinMode</span>(<span class="green">LED_BUILTIN</span>, <span class="green">OUTPUT</span>);<br/>}<br/><br/><span class="green">void</span> <span class="green1">loop</span>() {<br/>  <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">HIGH</span>);<br/>  <span class="orange">delay</span>(200);<br/>  <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">LOW</span>);<br/>  <span class="orange">delay</span>(200);<br/>  <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">HIGH</span>);<br/>  <span class="orange">delay</span>(200);<br/>  <span class="orange">digitalWrite</span>(<span class="green">LED_BUILTIN</span>, <span class="green">LOW</span>);<br/>  <span class="orange">delay</span>(800);<br/>}</pre>&#13;
</div>&#13;
<p class="indent">For a real challenge, try programming your Arduino to flash the letters of your name in Morse code with a series of short (dot) and long (dash) blinks. <a href="ch01.xhtml#ch01fig22">Figure 1-22</a> shows a Morse code cheat sheet to help you figure out the blink patterns. The classic message that most people start with is S-O-S, or . . . - - - . . . (dot dot dot, dash dash dash, dot dot dot).</p>&#13;
<p class="figuret"><a id="ch01fig22"/><strong>FIGURE 1-22:</strong> Basic Morse code chart</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_22.jpg"/></div>&#13;
<h4 class="h4" id="ch01lev2sec13"><strong>Modify</strong></h4>&#13;
<p class="noindent">A blinking light is a powerful thing! With your newfound superpower, you can physically add LEDs to a lot of things around the house. A Halloween costume is always a great place for some blinky bling. You could solder the LED legs to some wire to make the connections longer so it’s easy to hide the Arduino somewhere more comfortable for the wearer (like in a pocket). We took a Halloween spider we got from the local grocery store and hacked it with some creepy red eyes that blink (see <a href="ch01.xhtml#ch01fig23">Figure 1-23</a>).</p>&#13;
<p class="indent">Another good fit for blinking and controlling LEDs is in scale modeling. Adding working LEDs to car headlights, buildings, or streetlights is always a great way to create the illusion of reality in any scale model or scene, as shown in <a href="ch01.xhtml#ch01fig24">Figure 1-24</a>.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_35"/><a id="ch01fig23"/><strong>FIGURE 1-23:</strong> A blinky scary spider</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_23.jpg"/></div>&#13;
<p class="figuret"><a id="ch01fig24"/><strong>FIGURE 1-24:</strong> A scale model with Arduino-controlled lights</p>&#13;
<div class="image"><img alt="Image" src="../images/fig1_24.jpg"/></div>&#13;
<h3 class="h3" id="ch01lev1sec11"><strong>SAVING YOUR SKETCH</strong></h3>&#13;
<p class="noindent">Every project looks more stylish with a few blinking LEDs, so we suggest you keep your remixed Blink sketch handy so you can reuse parts of it in future builds. Save your sketch, and be sure to name it something descriptive that’ll remind you what it is. Your filename should not contain any spaces; if it does, Arduino will replace the spaces with underscore (_) characters. By default, when you save your sketches, Arduino will save them to the Arduino sketchbook folder, usually found in the <em>Documents</em> folder on your computer. You can choose to save them elsewhere, but it’s often a good idea to have all your sketches in one place.</p>&#13;
<p class="indent">When you’re ready to level up your blinking skills, head to <a href="ch02.xhtml#ch02">Project 2</a>, where we’ll show you how to build your very own Arduino-powered stoplight.</p>&#13;
</body></html>