<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="z3998: http://www.daisy.org/z3998/2012/vocab/structure/#" lang="en" xml:lang="en">
  <head>
    <title>Project 2: Pushbutton LED Flashlight</title>
    <link href="../styles/9781593278717.css" rel="stylesheet" type="text/css"/>
    <link href="../68851547a55f.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="sbo-rt-content"><h2 class="h2" id="ch02"><span epub:type="pagebreak" id="page_46"/><strong>2<br/>Pushbutton LED Flashlight</strong></h2>
<p class="noindent"><span class="green1">This LED flashlight will teach you to use pushbuttons, an essential skill in electronic circuits. You’ll learn how to use a pushbutton in your circuit to trigger an event—in this case, lighting an LED—when the pushbutton is pressed and stop the event when it’s released.</span></p>
<div class="image"><span epub:type="pagebreak" id="page_47"/><img src="../images/f0047-01.jpg" alt="image"/></div>
<p class="cap"><span class="green1"><strong>PARTS REQUIRED</strong></span></p>
<p class="cap1">Raspberry Pi</p>
<p class="cap1">Breadboard</p>
<p class="cap1">5 mm LED</p>
<p class="cap1">330 Ω resistor</p>
<p class="cap1">Jumper wires</p>
<h3 class="h3" id="lev35"><span epub:type="pagebreak" id="page_48"/><span class="green1"><strong>INTRODUCING SWITCHES AND BUTTONS</strong></span></h3>
<p class="noindent">Switches are everywhere. You use them to turn on lights, adjust the speed of your blender, light your stove, and so much more. There’s a wide variety of switches available, but some of the ones you’ll see around the house include pushbutton, toggle, rotary, and magnetic reed switches. <a href="ch02.xhtml#ch02fig1">Figure 2-1</a> shows a few different switches commonly used in electronics.</p>
<div class="image"><a id="ch02fig1"/><img src="../images/f0048-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 2-1:</strong> Several types of switches used in electronics</p>
<p class="indent">A switch can act either as an <em>interrupter</em>, interrupting the electric current to allow or restrict power to a certain component, or as a <em>diverter</em>, diverting the current to another part of the circuit. This project will use a simple pushbutton—an interrupter switch that is great for electronics because it is cheap, fits perfectly into a breadboard, and is easy to manipulate.</p>
<p class="indent">There are two main types of pushbuttons: normally open and normally closed. <em>Normally open</em> pushbuttons, shown in <a href="ch02.xhtml#ch02fig2">Figure 2-2</a>, have a circuit that’s open by default, preventing the current from flowing through it. When you press the pushbutton, the two sides are connected, the circuit closes, and current flows.</p>
<div class="image"><span epub:type="pagebreak" id="page_49"/><a id="ch02fig2"/><img src="../images/f0049-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 2-2:</strong> A normally open pushbutton’s internal connection</p>
<p class="indent"><em>Normally closed</em> pushbuttons have a closed circuit when the button is not being pressed, allowing current to flow through until you press the pushbutton to open the circuit and stop its flow.</p>
<p class="indent">Pushbuttons can have either two or four legs. Four-leg pushbuttons are more common in prototyping projects because they fit well into the breadboard. The right side of <a href="ch02.xhtml#ch02fig2">Figure 2-2</a> shows a diagram of a typical normally open, four-leg pushbutton. Legs 1 and 2 are always connected. The same is true for legs 3 and 4.</p>
<p class="indent">In this project you’ll use a normally open pushbutton with four legs. This pushbutton allows current to flow only <em>while</em> the button is being pressed, so unlike a light switch, the LED in this project will be lit only for the duration that the button is held down.</p>
<h3 class="h3" id="lev36"><span class="green1"><strong>WIRING THE CIRCUIT</strong></span></h3>
<p class="noindent">In this project, you want the LED to turn on only when the button is being pressed, so your Raspberry Pi needs to be able to tell when the button is being pressed and when it isn’t. Your Raspberry Pi will get this information through the GPIO pins.</p>
<p class="indent">Follow these steps to create your circuit, using <a href="ch02.xhtml#ch02fig3">Figure 2-3</a> as a reference:</p>
<ol>
<li class="noindent"><p class="list">Connect GND to the blue power rail.</p></li>
<li class="noindent"><p class="list">Insert an LED into the breadboard and connect the positive LED lead to GPIO 25 through a 330 Ω resistor, as we did in <a href="ch01.xhtml#ch01">Project 1</a>. Connect the negative lead to the GND rail.</p></li>
<li class="noindent"><p class="list">Insert the pushbutton in the middle of the breadboard so that two legs are on either side of the divide. You want to make sure there isn’t a connection between the two top pins and the two bottom pins. (Remember that the connection in the rows of holes is broken in this center strip.)</p></li>
<li class="noindent"><p class="list">Connect one side of the pushbutton to GPIO 2 and the other to GND, as shown in <a href="ch02.xhtml#ch02fig3">Figure 2-3</a>.</p></li>
</ol>
<div class="image"><span epub:type="pagebreak" id="page_50"/><a id="ch02fig3"/><img src="../images/f0050-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 2-3:</strong> The LED flashlight circuit</p>
<h3 class="h3" id="lev37"><span class="green1"><strong>WRITING THE SCRIPT</strong></span></h3>
<p class="noindent">This script will trigger different events depending on whether the pushbutton is being pressed or released. The following <em>pseudoscript</em>—a plain English version of the code instructions—should help you understand the Python script. Writing a pseudoscript is a great way to outline your program. Here’s what the program should do:</p>
<ul>
<li class="noindent">When the pushbutton is being pressed, the LED is set to on.</li>
<li class="noindent">When the pushbutton is not being pressed (that is, when it’s released), the LED stays off.</li>
</ul>
<p class="indent">Open <strong>Python 3 (IDLE)</strong> and go to <strong>File</strong> <span class="ent">▸</span> <strong>New File</strong> to create a new script. Copy the following code into the Python Editor and then save the script as <em>led_flashlight.py</em> in the <em>LEDs</em> folder (remember that you can download all the scripts at <em><a href="https://www.nostarch.com/RaspberryPiProject/">https://www.nostarch.com/RaspberryPiProject/</a></em>):</p>
<div class="box">
<p class="programs"><span class="ent">➊</span> <span class="orange">from</span> gpiozero <span class="orange">import</span> LED, Button<br/>  <span class="orange">from</span> signal <span class="orange">import</span> pause<br/><br/><span class="ent">➋</span> led = LED(25)<br/>  button = Button(2)<br/><span epub:type="pagebreak" id="page_51"/><span class="ent">➌</span> button.when_pressed = led.on<br/><span class="ent">➍</span> button.when_released = led.off<br/><br/><span class="ent">➎</span> pause()</p>
</div>
<p class="indent">This script is straightforward to understand. You first import the LED and the Button libraries to control the LED and the pushbutton; then, you import <span class="literal">pause</span> from the signal library <span class="ent">➊</span>. The <span class="literal">pause()</span> <span class="ent">➎</span> function keeps the program running even after all the code has run through to detect events—in this case, it’s continuously checking the pushbutton state.</p>
<p class="indent">You create an <span class="literal">LED</span> object called <span class="literal">led</span> that refers to GPIO 25, the pin the LED is connected to, and a <span class="literal">Button</span> object called <span class="literal">button</span> that refers to GPIO 2, the pin the pushbutton is connected to <span class="ent">➋</span>.</p>
<p class="indent">The <span class="literal">button.when_pressed</span> function turns the LED on when the pushbutton is being pressed by calling <span class="literal">led.on</span> when a pushbutton press is detected <span class="ent">➌</span>. Likewise, the <span class="literal">button.when_released</span> function calls <span class="literal">led.off</span> to turn the LED off when the pushbutton is not being pressed <span class="ent">➍</span>.</p>
<p class="indent">Press <strong>F5</strong> or go to <strong>Run</strong> <span class="ent">▸</span> <strong>Run Module</strong> to run the script. The LED should be on while the pushbutton is pressed down. To stop the program, press <small>CTRL</small>-C.</p>
<h3 class="h3" id="lev38"><span class="green1"><strong>TAKING IT FURTHER</strong></span></h3>
<p class="noindent">With what you’ve learned in this simple project, you can create countless other projects. Here are some ideas to test your skills:</p>
<ul>
<li class="noindent">Add more pushbuttons and LEDs.</li>
<li class="noindent">Modify the code to change the LED state when you press the pushbutton so that you don’t have to hold the button to keep the LED lit.</li>
<li class="noindent">Build a traffic light.</li>
</ul>
</div>
  </body>
</html>
