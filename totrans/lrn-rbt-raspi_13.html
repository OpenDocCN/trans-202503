<html><head></head><body>
<h2 class="h2a" id="bm05"><span epub:type="pagebreak" id="page_215"/>RUN PROGRAM ON STARTUP</h2>&#13;
<p class="startpara">THROUGHOUT THIS BOOK, I’VE SHOWN YOU HOW TO RUN YOUR ROBOT’S PROGRAMS USING SIMPLE TERMINAL COMMANDS. WHILE THIS IS GREAT FOR PROTOTYPING, IN THE FUTURE YOU MIGHT WANT TO MAKE YOUR ROBOT RUN A PROGRAM AS SOON AS YOU TURN IT ON, WITHOUT HAVING TO ACCESS IT REMOTELY. YOU CAN DO THIS EASILY BY EDITING THE RC.LOCAL CONFIGURATION FILE.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_216"/>When you power on your Raspberry Pi, it goes through a boot process. When the boot process ends, your Pi looks to the <em>rc.local</em> file for any last commands or code to execute. By adding your own custom Python command, you can make any of the programs from this book run on startup. Here’s how!</p>&#13;
<h3 class="h3" id="bm05lev1sec1">EDITING THE RC.LOCAL FILE</h3>&#13;
<p class="noindent">First, make sure the program you want to run on startup is complete and working the way you want it to. It’s much better to go through the programming, editing, and debugging process in the terminal rather than wait to see if the program runs when you power on your Pi. This approach will save you from turning your Pi on and off all the time.</p>&#13;
<p class="indent">Then, from any location in the terminal, open the <em>rc.local</em> file using the Nano text editor like so:</p>&#13;
<p class="codesingle"><span class="p1-green">pi@raspberrypi</span>:<span class="p-dark-blue">~ $</span> <span class="codestrong1">sudo nano /etc/rc.local</span></p>&#13;
<p class="indent">Make sure you include <span class="literal">sudo</span> at the start. This command lets you edit with root user privileges so you can save changes you make to the file; otherwise, they’ll just disappear!</p>&#13;
<p class="indent">After you enter in the preceding line, you’ll see a file that looks like <a href="bm05.xhtml#bm05list1">Listing E-1</a>.</p>&#13;
<p class="programs">   #!/bin/sh -e<br/>   #<br/>   # rc.local<br/>   #<br/>   # This script is executed at the end of each multiuser runlevel.<br/>   # Make sure that the script will <span class="p-orange">"exit 0"</span> on success or any other<br/>   # value on error.<br/>   #<br/>   # In order to enable or disable this script just change the<br/>   # execution bits.<br/>   #<br/>   # By default this script does nothing.<br/><br/>   # Print the IP address<br/>   _IP<span class="p1-green">=$(</span>hostname -I<span class="p1-green">) ||</span> true<br/>   <span class="p1-green">if [</span> <span class="p-orange">"$_IP"</span> <span class="p1-green">]; then</span><br/>     <span class="p-dark-blue">printf</span> <span class="p-orange">"My IP address is %s\n" "$_IP"</span><br/>   <span class="p1-green">fi</span><br/><span class="ent">➊</span><br/>   <span class="p1-green">exit</span> 0</p>&#13;
<p class="listing" id="bm05list1"><strong>LISTING E-1</strong> The contents of the <em>rc.local</em> file</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_217"/>Now, use your arrow keys to scroll down to the space <span class="ent">➊</span> between <span class="literal">fi</span> and <span class="literal">exit 0</span>. This is where you can add any commands you want your Raspberry Pi to execute on startup. No matter what you add, you must leave <span class="literal">exit 0</span> unedited at the very bottom of the file.</p>&#13;
<p class="indent">If you want to run a Python 3 program on startup, insert at <span class="ent">➊</span> a line that looks like this:</p>&#13;
<p class="codesingle"><span class="codestrong1">python3</span> <span class="codestrong1">/</span><span class="literal1"><span class="codeitalic1">your</span></span><span class="codestrong1">/</span><span class="literal1"><span class="codeitalic1">file</span></span><span class="codestrong1">/</span><span class="literal1"><span class="codeitalic1">path</span></span><span class="codestrong1">/</span><span class="literal1"><span class="codeitalic1">here</span></span><span class="codestrong1">/</span><span class="literal1"><span class="codeitalic1">filename.py &amp;</span></span></p>&#13;
<p class="indent">Replace the filepath with a valid one that points toward the correct directory and your program. Also, make sure to add the ampersand symbol <span class="literal">(&amp;)</span> onto the end of the command so that your program doesn’t stop your Raspberry Pi from continuing to boot.</p>&#13;
<p class="indent">After adding the program you want to execute on startup, save your work and exit the Nano text editor by pressing <span class="small">CTRL-</span>X and following the prompts.</p>&#13;
<h3 class="h3" id="bm05lev1sec2">A PRACTICE EXAMPLE</h3>&#13;
<p class="noindent">Let’s say that you want to run the <em>ball_follower.py</em> program from <a href="ch08.xhtml#ch08">Chapter 8</a> whenever you turn on your robot. To do this, open the <em>rc.local</em> file on your Pi and insert this line before the <span class="literal">exit 0</span> statement:</p>&#13;
<p class="codesingle">python3 /home/pi/robot/ball_follower.py &amp;</p>&#13;
<p class="indent">Now the last part of the file should look like this:</p>&#13;
<p class="programs"><span class="literal1"><span class="codeitalic1">--snip--</span></span><br/># Print the IP address<br/>_IP<span class="p1-green">=$(</span>hostname -I<span class="p1-green">) ||</span> true<br/><span class="p1-green">if [</span> <span class="p-orange">"$_IP"</span> <span class="p1-green">]; then</span><br/>  <span class="p-dark-blue">printf</span> <span class="p-orange">"My IP address is %s\n" "$_IP"</span><br/><span class="p1-green">fi</span><br/><br/>python3 /home/pi/raspirobots/ball_follower.py <span class="p1-green">&amp;</span><br/><br/><span class="p1-green">exit</span> 0</p>&#13;
<p class="indent">Let’s test it to see if it works. Save the file and then reboot your Raspberry Pi as follows:</p>&#13;
<p class="codesingle"><span class="p1-green">pi@raspberrypi</span>:<span class="p-dark-blue">~ $</span> <span class="codestrong1">sudo reboot</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_218"/>If it’s successful, your robot will execute the <em>ball_follower.py</em> code. If not, then just remotely access your Pi over SSH and try editing the <em>rc.local</em> file again. Make sure that you have the <em>full</em> correct filepath and that you haven’t made any typos.</p>&#13;
<p class="indent">That’s all there is to making a program run on startup!</p>&#13;


<div class="box1">&#13;
<h2 class="h2a"><span epub:type="pagebreak" id="page_219"/>UPDATES</h2>&#13;
<p class="noindent">Visit <a href="https://nostarch.com/raspirobots/">https://nostarch.com/raspirobots/</a> for updates, errata, and other information.</p>&#13;
</div>&#13;
<div class="box2">&#13;
<p class="noindent">More no-nonsense books from <img alt="Image" src="../images/f219-01.jpg"/> <strong>NO STARCH PRESS</strong></p>&#13;
<div class="image1"><img alt="image" src="../images/f219-02.jpg"/></div>&#13;
<p class="book-title">ARDUINO PROJECT HANDBOOK, VOL. 1</p>&#13;
<p class="noindent">25 Practical Projects to Get<br/> You Started</p>&#13;
<p class="noindent"><small><em>BY</em> MARK GEDDES</small></p>&#13;
<p class="noindent"><small>JUNE</small> 2016, 272 <small>PP</small>., $24.95</p>&#13;
<p class="noindent"><small>ISBN</small> 978-1-59327-690-4</p>&#13;
<p class="noindent"><em><small>FULL COLOR</small></em></p>&#13;
<div class="image1"><img alt="image" src="../images/f219-03.jpg"/></div>&#13;
<p class="book-title">A BEGINNER’S GUIDE TO CIRCUITS</p>&#13;
<p class="noindent">Nine Simple Projects with<br/> Lights, Sounds, and More!</p>&#13;
<p class="noindent"><em><small>BY</small></em> <small>ØYVIND NYDAL DAHL</small></p>&#13;
<p class="noindent"><small>OCTOBER</small> 2018, 80 <small>PP</small>., $17.95</p>&#13;
<p class="noindent"><small>ISBN</small> 978-1-59327-904-2</p>&#13;
<p class="noindent"><em><small>FULL COLOR</small></em></p>&#13;
<div class="image1"><img alt="image" src="../images/f219-04.jpg"/></div>&#13;
<p class="book-title">20 EASY RASPBERRY PI PROJECTS</p>&#13;
<p class="noindent">Toys, Tools, Gadgets, and More!</p>&#13;
<p class="noindent"><em><small>BY</small></em> <small>RUI SANTOS AND SARA SANTOS</small></p>&#13;
<p class="noindent"><small>APRIL</small> 2018, 288 <small>PP</small>., $24.95</p>&#13;
<p class="noindent"><small>ISBN</small> 978-1-59327-843-4</p>&#13;
<p class="noindent"><em><small>FULL COLOR</small></em></p>&#13;
<div class="image1"><img alt="image" src="../images/f219-05.jpg"/></div>&#13;
<p class="book-title">RASPBERRY PI HOME HACKS</p>&#13;
<p class="noindent">12 Projects To Spy on Your<br/> Family, Mod Minecraft, Hack<br/>Wireless Signals, and More!</p>&#13;
<p class="noindent"><em><small>BY</small></em> <small>DAN ALDRED</small></p>&#13;
<p class="noindent"><small>SPRING</small> 2019, 134 <small>PP</small>., $24.95</p>&#13;
<p class="noindent"><small>ISBN</small> 978-1-59327-946-2</p>&#13;
<p class="noindent"><em><small>FULL COLOR</small></em></p>&#13;
<div class="image1"><img alt="image" src="../images/f219-06.jpg"/></div>&#13;
<p class="book-title">10 LED PROJECTS FOR GEEKS</p>&#13;
<p class="noindent">Build Light-Up Costumes, Sci-Fi<br/> Gadgets, and Other Clever Inventions</p>&#13;
<p class="noindent"><em>E<small>DITED BY</small></em> <small>JOHN BAICHTAL</small></p>&#13;
<p class="noindent"><small>JULY</small> 2018, 240 <small>PP</small>., $24.95</p>&#13;
<p class="noindent"><small>ISBN</small> 978-1-59327-825-0</p>&#13;
<p class="noindent"><em><small>FULL COLOR</small></em></p>&#13;
<div class="image1"><img alt="image" src="../images/f219-07.jpg"/></div>&#13;
<p class="book-title">PYTHON FLASH CARDS</p>&#13;
<p class="noindent">Syntax, Concepts, and Examples</p>&#13;
<p class="noindent"><em><small>BY</small></em> <small>ERIC MATTHES</small></p>&#13;
<p class="noindent"><small>WINTER</small> 2019, 101 <small>CARDS</small>, $27.95</p>&#13;
<p class="noindent"><small>ISBN</small> 978-1-59327-896-0</p>&#13;
<p class="noindent"><em><small>FULL COLOR</small></em></p>&#13;
<div class="box1">&#13;
<p class="noindent"><strong>PHONE:</strong></p>&#13;
<p class="noindent">1.800.420.7240 <small>OR</small></p>&#13;
<p class="noindent">1.415.863.9900</p>&#13;
<p class="noindent"><strong>EMAIL:</strong></p>&#13;
<p class="noindent"><a href="mailto:SALES@NOSTARCH.COM">SALES@NOSTARCH.COM</a></p>&#13;
<p class="noindent"><strong>WEB:</strong></p>&#13;
<p class="noindent"><a href="http://WWW.NOSTARCH.COM">WWW.NOSTARCH.COM</a></p>&#13;
</div>&#13;
</div>&#13;


<div class="box3">&#13;
<p class="noindent"><span epub:type="pagebreak" id="page_220"/><strong>AGES 10+</strong></p>&#13;
<h2 class="h2abc" id="bm07"><span class="p2-green">“A GENTLE INTRODUCTION TO THE EXCITING FIELD OF ROBOTICS”</span></h2>&#13;
<p class="book-title22">EBEN UPTON, CEO RASPBERRY PI (TRADING), LTD.</p>&#13;
<p class="book-title5"><strong><span class="orange">NO EXPERIENCE NECESSARY!</span></strong></p>&#13;
<p class="noindentt"><em>Learn Robotics with Raspberry Pi</em> will take you from inexperienced maker to robot builder in no time. You’ll start off building a two-wheeled robot powered by a Raspberry Pi minicomputer and then program it using Python, the world’s most popular programming language. Gradually, you’ll improve your robot by adding increasingly advanced functionality until it can follow lines, avoid obstacles, and even recognize objects of a certain size and color.</p>&#13;
<h3 class="h3"><span class="p2-green">LEARN HOW TO:</span></h3>&#13;
<p class="list-plain"><img alt="image" src="../images/arrow.jpg"/> Control your robot remotely using only a Wii remote</p>&#13;
<p class="list-plain"><img alt="image" src="../images/arrow.jpg"/> Teach your robot to use sensors to avoid obstacles</p>&#13;
<p class="list-plain"><img alt="image" src="../images/arrow.jpg"/> Program your robot to follow a line autonomously</p>&#13;
<p class="list-plain"><img alt="image" src="../images/arrow.jpg"/> Customize your robot with LEDs and speakers to make it light up and play sounds</p>&#13;
<p class="list-plain"><img alt="image" src="../images/arrow.jpg"/> See what your robot sees with a Pi Camera</p>&#13;
<p class="noindentt">As you work through the book, you’ll learn fundamental electronics skills like how to wire up parts, use resistors and regulators, and determine how much power your robot needs. You’ll also learn the basics of coding in Python and gain enough experience working with hardware like servos, motors, and sensors to expand your creations beyond simple robots.</p>&#13;
<p class="noindentt"><strong>Matt Timmons-Brown</strong> runs the world’s most popular Raspberry Pi YouTube channel, “The Raspberry Pi Guy” (<a href="http://www.youtube.com/theraspberrypiguy">www.youtube.com/theraspberrypiguy</a>), with well over 5 million views. He is a computer science student at the University of Edinburgh and is from Cambridge, UK.</p>&#13;
<div class="box15">&#13;
<p class="noindent"><span class="p2-green">Requires a Raspberry Pi and Python 3</span></p>&#13;
</div>&#13;
<div class="image1"><img alt="image" src="../images/f220-01.jpg"/></div>&#13;
<p class="noindent"><em><strong>THE FINEST IN GEEK ENTERTAINMENT™</strong></em></p>&#13;
<p class="noindent"><a href="http://www.nostarch.com">www.nostarch.com</a></p>&#13;
</div>&#13;
</body></html>