- en: '19'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '19'
- en: Applications
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序
- en: The Mobile Application Ecosystem
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 移动应用生态系统
- en: The millions of applications available to Android users are critical in maintaining
    the platform’s relevance. Apps are, after all, where users spend most of their
    time on their smartphones.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 对于安卓用户来说，数百万个可用的应用程序在保持平台的相关性方面至关重要。毕竟，应用程序是用户在智能手机上花费最多时间的地方。
- en: If someone came out with a new device or platform now without having any kind
    of application store to go along with it (much less a densely populated store),
    it simply wouldn’t work. When RIM introduced BlackBerry 10, their final operating
    system for smartphones,^([1](#c19-footnote-1)) they added a compatibility mode
    that allowed users to install and run Android applications. They did this in recognition
    of the fact that the BlackBerry application ecosystem (even though the company
    and its phones had been around for many years) could not offer the breadth and
    variety of applications available on the app stores for Android and iOS.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 如果现在有人推出一种新的设备或平台，而没有任何应用商店（更别提一个用户密集的商店），那根本行不通。当RIM推出BlackBerry 10时，他们为智能手机推出的最终操作系统^([1](#c19-footnote-1))，添加了一个兼容模式，允许用户安装并运行安卓应用程序。他们这样做是因为认识到，BlackBerry的应用生态系统（尽管公司和其手机已经存在多年）无法提供安卓和iOS应用商店中那么广泛和多样化的应用程序。
- en: But even with a vast market of apps available, there still has to be some core
    set of apps that come with the platform, especially from companies like Google
    and Apple, that allow users to access the services and functionality they expect
    from those companies.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 但即使有大量的应用市场，平台上仍然必须有一组核心应用，特别是来自谷歌和苹果这样的公司，这些应用让用户能够访问他们期望从这些公司获得的服务和功能。
- en: When Android was new, there *was* no ecosystem of other apps. So the Android
    team built the core set of apps that would ship with the device and provide compelling
    functionality for users.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 当安卓刚推出时，*并没有*其他应用的生态系统。所以安卓团队构建了随设备一起发布的核心应用集，并为用户提供了引人注目的功能。
- en: Today, these Google apps (Gmail, Maps, Search, YouTube, and many others) are
    developed by the teams that own those products. So rather than a team in Android
    writing the YouTube app, the YouTube division writes the core YouTube services
    and infrastructure, and the web app, and the Android app, and any other client
    applications that tie into the larger product.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 今天，这些谷歌应用程序（Gmail、Maps、Search、YouTube等）由拥有这些产品的团队开发。因此，不是安卓团队编写YouTube应用程序，而是YouTube部门编写核心的YouTube服务和基础设施、网页版应用程序、安卓应用程序，以及与更大产品相连的其他客户端应用程序。
- en: But in the early days, none of the other product teams were able to do this
    work. These other groups all had enough work to do and didn’t have time to work
    on developing an application for this new and unproven platform. Also, Android’s
    platform and APIs were changing constantly, all the way up to the 1.0 launch.
    Why would an established product take on the work and headache of writing an app^([2](#c19-footnote-2))
    when they’d just have to keep re-tooling it as the APIs changed out from under
    it?
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 但在早期，其他产品团队都无法完成这项工作。这些其他团队都有足够的工作要做，没时间为这个新且未经验证的平台开发应用程序。而且，安卓平台和API不断变化，一直到1.0版本发布之前也是如此。当一个成熟的产品为何要承担编写应用程序的工作和烦恼呢^([2](#c19-footnote-2))，如果它们必须不断根据API变化而重新调整？
- en: So engineers on the Android team took on the job of writing these initial versions
    of the core applications. These were individuals, not teams, because it was rarely
    the case that more than one to two people worked on any of these initial applications
    (the same applications which are now maintained and developed by much larger teams).
    For example, the initial Gmail client for Android was written primarily by Cédric
    Beust, with some performance assistance from Mike Cleron.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，安卓团队的工程师承担了编写这些初始版本核心应用程序的工作。这些是个人，而非团队，因为很少有超过一到两个人参与这些初始应用程序的开发（这些应用程序现在由更大的团队维护和开发）。例如，安卓的初始Gmail客户端主要由Cédric
    Beust编写，Mike Cleron则提供了一些性能方面的帮助。
- en: Cédric Beust and Gmail
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Cédric Beust 和 Gmail
- en: I knew we were onto something the very first time we were able to get a push
    notification.
  id: totrans-11
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我知道我们做对了事情，第一次成功地获得推送通知时。
- en: ''
  id: totrans-12
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: —Cédric Beust
  id: totrans-13
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: —Cédric Beust
- en: 'Gmail for Android had its roots in versions for other platforms because of
    its main author: Cédric Beust.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 安卓版Gmail的根基来源于其他平台的版本，因为它的主要作者是Cédric Beust。
- en: In 2004, Cédric joined Google and ended up (as many new engineers with server-side
    experience did) working in the ads group. After a year, he was looking for something
    new to do and found a small team working on mobile technology. This group worked
    on making Google apps and services functional on the various mobile devices of
    that era. Cédric joined the team and started the Gmail effort. He eventually grew
    and led a team of about twenty people who developed the J2ME Gmail application.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 2004年，Cédric 加入了 Google，并且像许多有服务器端经验的新工程师一样，最终进入了广告组工作。经过一年的时间，他开始寻找新的挑战，并发现有一个小团队在研究移动技术。这个团队的工作是让
    Google 的应用和服务能够在那个时代的各种移动设备上运行。Cédric 加入了这个团队，并开始了 Gmail 的开发工作。他最终组建并领导了一个约二十人的团队，开发了
    J2ME 版的 Gmail 应用。
- en: In those days, there was no pervasive mobile “platform” like the two that exist
    today (iOS and Android). Instead, there were many vendor-specific platforms that
    covered specific segments of the market, like Microsoft’s Windows CE and RIM’s
    BlackBerry OS. There was also J2ME, which purported to run across a wide variety
    of devices, using the same language (Java) and some variation of the J2ME libraries.
    So a company trying to target a wide variety of devices across the ecosystem found
    the concept of J2ME very enticing. But the realities of J2ME were . . . difficult.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在那个时代，像今天的两个主要平台（iOS 和 Android）并不存在普及的移动“平台”。相反，当时有许多厂商特定的平台，覆盖了市场的特定细分领域，比如微软的
    Windows CE 和 RIM 的 BlackBerry OS。还有 J2ME，它声称可以跨越多种设备运行，使用相同的编程语言（Java）和某种形式的 J2ME
    库。因此，一个公司试图覆盖整个生态系统中的各种设备时，会发现 J2ME 的概念非常诱人。但 J2ME 的实际情况是……相当困难的。
- en: Cédric said, “We started looking at how we could do Gmail on J2ME. It was quickly
    obvious to us that it was a terrible idea. It was everywhere . . . but every single
    vendor, and even the same model, had different versions of J2ME. They all had
    different restrictions. They didn’t all implement the same profiles. Some had
    Bluetooth, others did not. There was no constraint, no compliance or anything
    like that. Any phone could claim to be J2ME-compliant and didn’t support half
    of the things we needed. So we were in a world of hurt.”
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Cédric 说：“我们开始考虑如何在 J2ME 上实现 Gmail。我们很快意识到这真的是个糟糕的主意。它几乎存在于所有设备中……但每个厂商，甚至同一个型号的设备，都有不同版本的
    J2ME。它们的限制各不相同。并不是所有设备都实现了相同的配置文件。有些设备有蓝牙，其他没有。没有任何约束、合规之类的东西。任何手机都可以声称自己符合 J2ME
    标准，却根本不支持我们所需要的半数功能。所以我们当时非常困扰。”
- en: But Cédric’s team was eventually able to ship a version of Gmail that was true
    to the core experience of Gmail on the web, running on these much smaller and
    more limited devices. “We shipped Gmail on J2ME on about 300 different devices,
    with a pretty good UI. Some devices caused a lot more trouble than others, but
    overall we pulled it off.”^([3](#c19-footnote-3))
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 但 Cédric 的团队最终成功推出了一个版本的 Gmail，这个版本忠实于 Gmail 在网页上的核心体验，能够在这些尺寸更小、功能更受限的设备上运行。“我们在约
    300 款不同的设备上推出了 J2ME 版 Gmail，并且 UI 设计也相当不错。有些设备比其他设备更麻烦，但总体来说，我们成功了。”^([3](#c19-footnote-3))
- en: Some time after Android was acquired by Google, Andy Rubin contacted Cédric.
    As the lead of the mobile Gmail team, Cédric was a likely person to help write
    Gmail for the nascent Android platform. He was already interested, but when Andy
    described the dynamics of the project, he was sold. Andy’s team was a collection
    of low-level kernel experts, many of whom had experience shipping constrained
    mobile devices.^([4](#c19-footnote-4)) They were creating a platform based on
    the Java programming language (of which Cédric was a fan and an expert), and they
    needed expertise for writing applications. “Hearing that these guys were open-minded
    and that we need to write it in Java was even more interesting and appealing to
    me.”
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Android 被 Google 收购后不久，Andy Rubin 联系了 Cédric。作为移动 Gmail 团队的负责人，Cédric 是帮助为新兴的
    Android 平台编写 Gmail 的合适人选。他当时已经有兴趣，但当 Andy 描述了这个项目的动态时，他完全被吸引了。Andy 的团队由一群底层内核专家组成，其中许多人有将受限的移动设备推向市场的经验。^([4](#c19-footnote-4))
    他们正在创建一个基于 Java 编程语言的平台（Cédric 是这个语言的爱好者和专家），并且他们需要有编写应用程序的专业知识。“听说这些人很开放，并且我们需要用
    Java 来编写，这对我来说更加有趣和吸引人。”
- en: Cédric, like many of the early engineers on Android, came with related experience
    and opinions, and a strong desire to do it right on Android. “I knew the pain
    and knew exactly what I didn’t want to happen again. Debugging J2ME meant that
    you couldn’t connect a debugger, you had to `println()`^([5](#c19-footnote-5))
    on the status bar to find out where you were in the code. It was an absolute nightmare.
    So I knew exactly what I wanted to fix.”
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Cédric，像许多早期的安卓工程师一样，拥有相关的经验和观点，并且强烈希望在安卓上做对的事情。“我了解那种痛苦，并且清楚我不想再发生什么。调试 J2ME
    时，你无法连接调试器，只能通过在状态栏上`println()`^([5](#c19-footnote-5))来查看自己在代码中的位置。这简直是噩梦。所以我知道我到底想修复什么。”
- en: 'When he started, there were two apps being developed for Android: Gmail and
    Calendar.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 当他开始时，安卓上正在开发的两款应用是 Gmail 和日历。
- en: It makes sense for applications to be developed closer to their product groups
    now. But it was very useful at that time, for the apps and for the Android platform
    itself, for them to be developed by engineers on the Android team. For one thing,
    the platform and all of the APIs were changing constantly, and the applications
    had to react to these changes. Also, in many cases, the application developers
    required platform changes in order to support their requirements. App developers
    like Cédric were primarily responsible for the applications, but they would also
    help out when necessary on the core platform and the Android APIs, especially
    for app-driven platform changes.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，应用程序与其产品组的开发更为紧密是有道理的。但在当时，让应用由安卓团队的工程师开发对应用本身和安卓平台都非常有用。首先，平台和所有的 API 都在不断变化，应用必须能够应对这些变化。此外，在许多情况下，应用开发人员需要平台做出变更才能支持他们的需求。像
    Cédric 这样的应用开发人员主要负责应用程序，但在必要时，他们也会帮助核心平台和安卓 API 的开发，特别是应用驱动的平台变化。
- en: “I worked with Mike [Cleron] on the layout system, the View system, how to do
    all the original APIs for layout and the algorithms, the two-pass algorithms.
    I worked with Dianne [Hackborn], and all the others also, with Intents.^([6](#c19-footnote-6))
    I remember hours in rooms trying to find out how we would name these things which
    we call *Intents* now. We spent hours painting that bike shed,^([7](#c19-footnote-7))
    trying to figure out what was the best word. And eventually we came up with ‘Intent.’”^([8](#c19-footnote-8))
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “我和 Mike [Cleron] 一起工作，做布局系统、视图系统，如何处理所有原始的布局 API 和算法，双遍算法。我和 Dianne [Hackborn]
    以及其他人一起合作，也涉及到 Intents^([6](#c19-footnote-6))。我记得我们曾在房间里花了好几个小时，试图弄清楚如何命名这些我们现在叫做*Intents*的东西。我们花了好几个小时讨论‘车棚涂漆’^([7](#c19-footnote-7))，试图找出最合适的词。最终我们想出了‘Intent’。”^([8](#c19-footnote-8))
- en: '“We were all excited by the general idea behind it: How do we get an app to
    be able to call into another app without knowing whether that other app is installed
    or not? We’re going to say, ‘Can someone handle this?’ And if they do, they can.
    We were pretty excited.”'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: “我们都为它背后的总体理念感到兴奋：我们如何让一个应用能够调用另一个应用，而不需要知道那个应用是否已安装？我们会说，‘有人能处理这个吗？’如果能处理，就行。我们都很兴奋。”
- en: All of this work was happening while the platform was evolving and the team
    was growing. “I was also involved in staffing up. We needed Java people. We needed
    a hundred Java people right now. So staffing up and hiring and interviewing like
    crazy at that time, and also writing a lot of code. And throwing away a lot of
    code, because a lot of the code I was writing was calling into APIs that were,
    a week later, changed or removed or modified.”
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些工作都发生在平台不断发展的同时，团队也在不断壮大。“我还参与了人员的招聘。我们需要 Java 工程师。我们现在就需要一百个 Java 工程师。所以当时的招聘、面试非常疯狂，同时也写了大量的代码。然后又扔掉了很多代码，因为我写的很多代码是调用的
    API，这些 API 一周后就被修改、移除或者更改了。”
- en: Application developers must perform a tricky dance when writing their code on
    top of a platform that is being developed in parallel. Many capabilities and APIs
    of that platform are in flux, and many of the capabilities that applications need
    simply don’t exist yet.^([9](#c19-footnote-9)) Someone has to implement these
    features in order for the applications to be able to do what they need to do.
    On Android, that happened by having small teams of people doing a lot of work
    all over the place, across various parts of the platform and in the applications.
    Said Romain Guy, “The team was small. Making those changes was pretty fast; we
    all had access to the entire source tree. I remember leading up to 1.0, I was
    making large changes to the View system to clean up the APIs. You make a CL that
    touches 800 files and you touch all the apps and fix them as you go. So it was
    not necessarily the apps having to do this, though it was also that. Everybody
    was pitching in.”
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 应用开发人员在基于一个正在并行开发的平台编写代码时，必须执行一场复杂的舞蹈。该平台的许多功能和API处于变化之中，而应用所需的许多功能根本不存在。^([9](#c19-footnote-9))
    必须有人实现这些功能，才能让应用做它们需要做的事情。在Android上，这通过小团队在平台和应用程序的各个部分进行大量工作来实现。罗曼·盖伊说：“团队很小。进行这些更改的速度相当快；我们所有人都能访问整个源代码树。我记得在1.0发布之前，我对视图系统做了很大的改动，以清理API。你做一个CL，涉及800个文件，并在修改时修复所有应用。所以这不完全是应用需要这样做，尽管也是这样。每个人都在出力。”
- en: One of the hard constraints that Gmail had to deal with was performance. Originally,
    the Gmail app was written such that every message was its own WebView.^([10](#c19-footnote-10))
    Essentially, each message was a separate web page, which has a lot of overhead
    that’s not obvious in the text that the user sees on the screen. Romain said,
    “But that was way too hard on that device. So Mike rewrote all of that.”
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Gmail需要处理的一个硬性约束是性能问题。最初，Gmail应用是以每条消息都有自己的WebView来编写的。^([10](#c19-footnote-10))
    实际上，每条消息都是一个单独的网页，这会带来许多开销，而这些开销在用户看到的屏幕文本中并不明显。罗曼说：“但这对设备来说太吃力了。所以迈克重写了这一切。”
- en: Steve Horowitz, director of Android’s engineering team at the time, talked about
    the Gmail performance problems. “Cédric took an approach to the architecture that
    was good up to a certain point. Part of that, honestly, was maybe just the capabilities
    of the View system at the time. How many Views could you stack to create those
    threads?
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 当时Android工程团队的负责人Steve Horowitz谈到了Gmail的性能问题。“Cédric在架构上采取的方法在某些时候是有效的。老实说，部分原因可能仅仅是当时视图系统的能力限制。你能堆叠多少个视图来创建那些线程？”
- en: “So Mike had to come unravel a bunch of that stuff and redo it so the entire
    thread was not an independent View, but there was one View you rendered into.
    There was a fundamental re-architecture of Gmail just to make it work.”
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: “所以迈克不得不来解开这些问题，并重新做一遍，这样整个线程就不再是一个独立的视图，而是渲染到一个视图中。为了让它能正常工作，Gmail的架构进行了根本性的重构。”
- en: Meanwhile, the requirement to use WebView put additional demands on the team.
    It made sense to use WebView because email messages require web capabilities.
    While many email messages display plain text, there are enough variations in what
    that text can contain, and how it can be formatted, that the ability to display
    an HTML (web) version of that message is necessary.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 与此同时，使用WebView的要求给团队带来了额外的压力。使用WebView是有道理的，因为电子邮件消息需要网页功能。尽管许多电子邮件消息显示的是纯文本，但这些文本可能包含各种变化，并且格式也各不相同，因此能够显示该消息的HTML（网页）版本是必要的。
- en: So the team depended on the WebView component, which was being developed by
    the browser team. But the HTML embedded in Gmail messages wasn’t plain HTML. It
    was a subset of content types and expectations about how that content would be
    displayed. Making it work for Gmail on Android required understanding what Gmail
    did on the backend and getting the browser (and WebView) team to be able to display
    this odd variant of HTML.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，团队依赖于由浏览器团队开发的WebView组件。但Gmail消息中嵌入的HTML并不是普通的HTML。它是一个内容类型的子集，并且对如何显示这些内容有一定的期望。要使其在Android上正常运行，就需要理解Gmail在后端的处理方式，并让浏览器（和WebView）团队能够显示这种HTML的奇异变体。
- en: There were good things about working on Gmail as well. One of the motivating
    things about developing Android applications at that time was that the platform
    had capabilities that simply didn’t exist anywhere else. Engineers were able to
    create much more powerful application experiences than had existed before.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在为Gmail开发时也有很多值得开心的事。那时开发安卓应用程序的一个重要动力是，这个平台拥有其他地方没有的功能。工程师们能够创造出比以前更强大的应用体验。
- en: “I knew we were onto something the very first time we were able to get a push
    notification. We weren’t quite sure we could do it, that we could keep a connection
    open and to have the server tell us, ‘You have new mail.’ For J2ME, we did not
    have that; you needed to refresh constantly. But at some point, I was able to
    send an email and I saw my phone react. The first thing I did was to run to Steve
    Horowitz’s office and show him. His jaw dropped. He knew we were working on it,
    but he didn’t know if we could do it.”
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: “我知道我们做对了什么，是第一次能够收到推送通知时的感觉。我们不确定是否能做到，是否能保持连接并让服务器告诉我们，‘你有新的邮件。’对于J2ME，我们没有这个功能；你需要不断地刷新。但在某个时刻，我能够发送一封邮件，看到我的手机有反应。我做的第一件事就是跑去斯蒂夫·霍洛维茨的办公室展示给他看。他的下巴都掉下来了。他知道我们在做这个，但他不知道我们是否能做到。”
- en: Romain Guy said, “What I loved about the first Android phone, about 1.0, is
    that we had push notifications for email and chat, which was huge back then, because
    the iPhone didn’t have any of that. I remember that my phone would get the emails
    faster than my desktop. My phone would beep, and then a few seconds or minutes
    later my desktop would finally show the new email.”
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 罗曼·盖伊说，“我喜欢第一款安卓手机，1.0版，最喜欢的一点是我们有了邮件和聊天的推送通知，这在当时非常重要，因为iPhone没有这个功能。我记得我的手机比我的桌面电脑更快收到邮件。我的手机会发出提示音，几秒钟或几分钟后，我的桌面才会显示新邮件。”
- en: While Cédric was responsible for the Android side of Gmail, a substantial portion
    of the overall application depended on the mechanism that talked to the Gmail
    backend. That work happened on the Android services team.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管塞德里克负责Gmail的安卓端，但整个应用程序的大部分功能依赖于与Gmail后台通信的机制。这项工作是在安卓服务团队中完成的。
