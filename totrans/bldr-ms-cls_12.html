<html><head></head><body><section class="chapter" title="Chapter&#xA0;12.&#xA0;Materials" epub:type="chapter" id="materials"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Materials</h2></div></div></div><p><a id="iddle1181" class="indexterm"/><a id="iddle1341" class="indexterm"/><a id="iddle1803" class="indexterm"/><a id="iddle2066" class="indexterm"/><a id="iddle2165" class="indexterm"/>In <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a> and <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>, I created textures that specified the diffuse colors for the models, as well as other parameters, like reflectiveness, smoothness, and specular colors. Now we’ll look at combining these image textures with procedural textures and shaders to create materials for the scenes that look both interesting and convincing.</p><p>This chapter will cover how Blender’s materials work and how to incorporate textures into these materials. Let’s look first, though, at Blender’s two default render engines for rendering images, Cycles and the Blender Internal renderer, as they will significantly impact how we set up our materials.</p><div class="sect1" title="Render Engines: Blender Internal and Cycles"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="render_engines_blender_internal_and_cycl">Render Engines: Blender Internal and Cycles</h2></div></div></div><p>The <span class="emphasis"><em>render engine</em></span> is how Blender creates a final image using all of the information in your scene—objects, materials, lights, and settings. Blender has two render engines. The older one, the Blender Internal render engine, is a very robust (if slightly old-fashioned) renderer that uses various tricks and techniques to create the final render, eschewing absolute physical accuracy for speed and flexibility. However, this lack of physical accuracy doesn’t mean that Blender Internal can’t render realistic-<span class="emphasis"><em>looking</em></span> images. It can quickly render scenes with a variety of complex materials to create a final look anywhere between a highly realistic aesthetic and a very nonphoto-realistic and stylized one. This makes Blender Internal a highly flexible renderer, well suited to animation.</p><p>Cycles is Blender’s new render engine, which is still in active development. Unlike the internal engine, it focuses on creating more realistic simulations of light and uses more physically correct models for materials and lights. As a result, it can deliver very realistic images, including effects that are difficult to achieve in Blender Internal, such as the complex refraction of light in glass and other transparent objects, multiple reflections of light bouncing around a scene, and the physically correct emission of light from objects. The tradeoff is that (at least as of this writing) Cycles renders scenes—even those with simple lighting—more <a id="iddle1106" class="indexterm"/><a id="iddle1390" class="indexterm"/><a id="iddle1672" class="indexterm"/><a id="iddle1834" class="indexterm"/><a id="iddle1860" class="indexterm"/><a id="iddle2067" class="indexterm"/><a id="iddle2146" class="indexterm"/><a id="iddle2158" class="indexterm"/><a id="iddle2379" class="indexterm"/><a id="iddle2393" class="indexterm"/>slowly than Blender Internal. And because Cycles is in active development, it lacks certain important features, like subsurface scattering (see <a class="xref" href="ch12.html#subsurface_scattering" title="Subsurface Scattering">Subsurface Scattering</a> for more information) and the ability to render hair and fur.</p><p>I’ll use both renderers in this book. Which renderer I choose for each project has a significant impact on how I define my materials, because these two render engines work in different ways and require materials to be set up differently. For the Bat Creature, I’ll use Blender Internal to render realistic skin with subsurface scattering, as well as the fur. And for the Spider Bot, though either renderer would do, I’ll use Cycles to create some nice glossy, reflective materials. For the Jungle Temple project, I’ll use Cycles to allow me to experiment with lighting and get direct feedback, thanks to Cycles’ interactive render preview (discussed in <a class="xref" href="ch12.html#cycles_render_preview" title="The Cycles Render Preview">The Cycles Render Preview</a>).</p><p>Before examining the differences in creating materials for the two different render engines, let’s take a brief look at a few general principles that will come up as we discuss materials. These principles center mainly on the various ways a surface can interact with light by reflecting, refracting, or absorbing it.</p></div><div class="sect1" title="Reflection"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="reflection">Reflection</h2></div></div></div><p>We see objects because our eyes detect the light that bounces off them. The appearance of a surface is thus determined by the precise way in which it interacts with light, which is in turn determined by the structure and composition of the material.</p><p>In the real world, matte surfaces, like rock and rubber, have a rough structure on a microscopic scale. Light bounces off them in all directions, and as a result, the light you see reflected looks much the same no matter which direction you look at the surface from. This is called <span class="emphasis"><em>diffuse</em></span> reflection.</p><p>In contrast, polished surfaces are relatively smooth, even at microscopic scales. This means that you’ll see a perfect reflection when you look at the surface, and as you move your viewpoint, what is reflected will change. This is called <span class="emphasis"><em>specular</em></span>, or <span class="emphasis"><em>mirror</em></span>, reflection. The differences between diffuse and specular reflection are shown in <a class="xref" href="ch12.html#diffuse_left_parenthesisleftright_parent" title="Figure 12-1. Diffuse (left) vs. specular (right) reflection (Cycles renderer)">Figure 12-1</a>.</p><p>In the world of CG, however, we often take shortcuts to achieve the look of real materials. For example, consider specular reflections: While it’s possible to render mirror reflections, doing so is slower than rendering diffuse reflections because there are simple algorithms to approximate the effect of diffuse reflections. So rendering diffuse reflections can be extremely fast, but rendering mirror reflections requires processor-intensive ray tracing. To get around this problem, we sometimes consider only the most obvious things that a surface can reflect, like bright lights. For example, if you were to look at a shiny metal surface in bright light, you might overlook mirror reflections of the surrounding environment due to the very bright reflection of the light source itself. Specular reflections work this way in Blender’s Internal renderer: The renderer creates only highlights from light sources rather than making the surface reflect other objects around it (see <a class="xref" href="ch12.html#blender_internalapostrophes_approximated" title="Figure 12-2. Blender Internal’s approximated specular reflections (Blender Internal renderer). Often these are referred to as specular reflections, while more realistic (mirror) specular reflections are referred to as glossy reflections. Left: A material with only specular reflections and a hardness of 15. Right: A hardness of 100.">Figure 12-2</a>). This shortcut often does the job, and when more accurate reflections are needed, you can turn them on as well (by enabling ray-traced mirror reflections) at the cost of extra rendering time.</p><div class="figure"><a id="diffuse_left_parenthesisleftright_parent"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00244"/><img src="httpatomoreillycomsourcenostarchimages1538730.png.jpg" alt="Diffuse (left) vs. specular (right) reflection (Cycles renderer)"/></div></div><div class="figure-title">Figure 12-1. Diffuse (left) vs. specular (right) reflection (Cycles renderer)</div></div><div class="figure"><a id="blender_internalapostrophes_approximated"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00245"/><img src="httpatomoreillycomsourcenostarchimages1538732.png.jpg" alt="Blender Internal’s approximated specular reflections (Blender Internal renderer). Often these are referred to as specular reflections, while more realistic (mirror) specular reflections are referred to as glossy reflections. Left: A material with only specular reflections and a hardness of 15. Right: A hardness of 100."/></div></div><div class="figure-title">Figure 12-2. Blender Internal’s approximated specular reflections (Blender Internal renderer). Often these are referred to as <span class="italicAlt">specular reflections</span>, while more realistic (mirror) specular reflections are referred to as <span class="italicAlt">glossy reflections</span>. Left: A material with only specular reflections and a hardness of 15. Right: A hardness of 100.</div></div></div><div class="sect1" title="Transmission and Refraction"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="transmission_and_refraction">Transmission and Refraction</h2></div></div></div><p><a id="iddle1186" class="indexterm"/><a id="iddle1641" class="indexterm"/><a id="iddle1642" class="indexterm"/><a id="iddle1658" class="indexterm"/><a id="iddle1812" class="indexterm"/><a id="iddle2148" class="indexterm"/><a id="iddle2160" class="indexterm"/><a id="iddle2587" class="indexterm"/><a id="iddle2721" class="indexterm"/>In addition to reflecting light, surfaces like water or glass also <span class="emphasis"><em>transmit</em></span> light (allow light to pass through them). In the real world, a part of the <span class="emphasis"><em>incident light</em></span> (light hitting the surface) is usually reflected, and the rest is transmitted and bent slightly (<span class="emphasis"><em>refracted</em></span>). The light is bent because as it enters a different medium, its speed changes. This bending of light results in a distorted image when you look through a transparent material. The amount of distortion depends on the object’s <span class="emphasis"><em>index of refraction (IOR)</em></span>, which determines how much the direction of a ray of light is altered at the boundary of the object (see <a class="xref" href="ch12.html#different_indices_of_refractiondot_left" title="Figure 12-8. Different indices of refraction. Left to right: 1.05, 1.5, and 2.5. As the IOR increases, the refracted light becomes more complex.">Figure 12-8</a>), and the shape and thickness of the object. For some objects, this effect is significant—for example, when you look through a lens or a glass of water, you’ll notice considerable distortion. Other times, the effect is minimal—for example, there is little distortion when you look through the thin glass of a window.</p><div class="sect2" title="Z Transparency"><div class="titlepage"><div><div><h3 class="title" id="z_transparency">Z Transparency</h3></div></div></div><p>We can use Blender to simulate transmission and refraction of light using ray-traced transparency. But we can also cheat by ignoring refraction and simply rendering whatever is behind an object. This is called <span class="emphasis"><em>Z Transparency</em></span>. This technique works well with objects like windows, where the refraction is minimal. <a class="xref" href="ch12.html#ray_tracing_vsdot_z_transparency_left_pa" title="Figure 12-3. Ray tracing vs. Z Transparency (using the Blender Internal renderer). Left: Z Transparency with an alpha of 0.25 and specular highlights. The specular and slight diffuse visibility make this material visible. Right: Ray-traced transparency with an IOR of 1.5. This image is more realistic but will take much longer to render.">Figure 12-3</a> compares ray tracing with Z Transparency.</p><p>Z Transparency is also useful for rendering thin surfaces with holes or complex outlines, where the mesh can be left simple and a texture can be used to define transparent—or, in this case, nonexistent—areas of the surface. These areas can then be rendered completely transparent (invisible), which will make the surface appear more complex than its geometry alone would allow (see <a class="xref" href="ch12.html#using_z_transparency_to_give_this_wire_f" title="Figure 12-4. Using Z Transparency to give this wire fence material a more complex appearance without requiring extra geometry (using the Blender Internal renderer). This material has been applied to a single plane. (The Transparent Shadows option has been turned on for the floor material to create accurate shadows.)">Figure 12-4</a>).</p><div class="figure"><a id="ray_tracing_vsdot_z_transparency_left_pa"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00246"/><img src="httpatomoreillycomsourcenostarchimages1538734.png.jpg" alt="Ray tracing vs. Z Transparency (using the Blender Internal renderer). Left: Z Transparency with an alpha of 0.25 and specular highlights. The specular and slight diffuse visibility make this material visible. Right: Ray-traced transparency with an IOR of 1.5. This image is more realistic but will take much longer to render."/></div></div><div class="figure-title">Figure 12-3. Ray tracing vs. Z Transparency (using the Blender Internal renderer). Left: Z Transparency with an alpha of 0.25 and specular highlights. The specular and slight diffuse visibility make this material visible. Right: Ray-traced transparency with an IOR of 1.5. This image is more realistic but will take much longer to render.</div></div><div class="figure"><a id="using_z_transparency_to_give_this_wire_f"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00247"/><img src="httpatomoreillycomsourcenostarchimages1538736.png.jpg" alt="Using Z Transparency to give this wire fence material a more complex appearance without requiring extra geometry (using the Blender Internal renderer). This material has been applied to a single plane. (The Transparent Shadows option has been turned on for the floor material to create accurate shadows.)"/></div></div><div class="figure-title">Figure 12-4. Using Z Transparency to give this wire fence material a more complex appearance without requiring extra geometry (using the Blender Internal renderer). This material has been applied to a single plane. (The Transparent Shadows option has been turned on for the floor material to create accurate shadows.)</div></div><p>Light can interact with a surface in still more complex ways, such as scattering beneath the surface or exhibiting translucency or anisotropic reflection, which is the type of reflection produced by brushed metal. We’ll examine these other types of interaction as we move through this chapter.</p></div></div><div class="sect1" title="Blender Internal Materials"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="blender_internal_materials">Blender Internal Materials</h2></div></div></div><p>Blender Internal is Blender’s default render engine, and you can create materials for Blender Internal using the Materials and Textures tabs of the Properties editor. You can find the properties of materials in the Material tab (and the textures and aspects of a material they can be used to affect) in the Textures tab.</p><p>Blender Internal’s materials are pretty modular, allowing you to add and combine different material properties—such as specular reflections, mirror reflectivity, transparency, and subsurface scattering—simply by turning on the relevant options from the different panels in the Material <a id="iddle1046" class="indexterm"/><a id="iddle1283" class="indexterm"/><a id="iddle1389" class="indexterm"/><a id="iddle1458" class="indexterm"/><a id="iddle1608" class="indexterm"/><a id="iddle1715" class="indexterm"/><a id="iddle1830" class="indexterm"/><a id="iddle2018" class="indexterm"/><a id="iddle2305" class="indexterm"/><a id="iddle2309" class="indexterm"/><a id="iddle2378" class="indexterm"/><a id="iddle2462" class="indexterm"/><a id="iddle2584" class="indexterm"/>tab (<a class="xref" href="ch12.html#materials_tab_when_using_the_blender_int" title="Figure 12-5. The Materials tab when using the Blender Internal renderer">Figure 12-5</a>), without having to start from scratch. Notice in the figure that all of the materials assigned to the active object are in the panel at the top of the tab. Below, in the Preview panel, is a preview of the active material, followed by other panels containing the Materials settings. I’ll discuss the relevant panels in the Materials tab (when using Blender Internal) here.</p><div class="figure"><a id="materials_tab_when_using_the_blender_int"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00248"/><img src="httpatomoreillycomsourcenostarchimages1538738.png.jpg" alt="The Materials tab when using the Blender Internal renderer"/></div></div><div class="figure-title">Figure 12-5. The Materials tab when using the Blender Internal renderer</div></div><p title="Diffuse"><span class="title"><strong><span class="strong"><strong>Diffuse</strong></span></strong></span>. This panel contains the settings for the diffuse color and shading of a material. The color picker (see <a class="xref" href="ch12.html#materials_tab_when_using_the_blender_int" title="Figure 12-5. The Materials tab when using the Blender Internal renderer">Figure 12-5</a>) allows you to set the diffuse color of the material, which is then multiplied by the <span class="emphasis"><em>intensity</em></span> value. The dropdown menu to the right lets you set the diffuse shader model, which affects the falloff of the material’s diffuse color from light to dark at different angles. The default Lambert shader model is usually fine, though the Oren Nayar shader model can be used to mimic surfaces with a rougher microscopic structure, like clay or stone. The other shader models here are more exotic and rarely useful.</p><p title="Specular"><span class="title"><strong><span class="strong"><strong>Specular</strong></span></strong></span>. The settings in the Specular panel are similar to those in the Diffuse panel, except that they control an object’s <span class="emphasis"><em>specular shading</em></span> (a loose approximation of specular reflection, as discussed earlier in <a class="xref" href="ch12.html#reflection" title="Reflection">Reflection</a>). The <span class="emphasis"><em>hardness</em></span> entry determines how broad or tight these reflections are (see <a class="xref" href="ch12.html#different_levels_of_hardness_affect_the" title="Figure 12-6. Different levels of hardness affect the look of specular reflections. This checkerboard texture is used to control the hardness. (You could also vary hardness using a texture map.)">Figure 12-6</a>). Materials with a high hardness value have sharp, bright highlights, while those with a low hardness value have softer, more spread out highlights.</p><p title="Shading"><span class="title"><strong><span class="strong"><strong>Shading</strong></span></strong></span>. The following options affect a material’s overall shading:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none"><p title="Emit"><span class="title"><strong><span class="strong"><strong>Emit</strong></span></strong></span>. This causes an object to appear bright even when it is not lit and can even cause an object to cast light on other objects when it is used with certain World settings.</p></li><li class="listitem" style="list-style-type: none"><p title="Ambient"><span class="title"><strong><span class="strong"><strong>Ambient</strong></span></strong></span>. This determines whether an object receives ambient illumination (using the Ambient Color setting in the World Settings tab).</p></li><li class="listitem" style="list-style-type: none"><p title="Translucency"><span class="title"><strong><span class="strong"><strong>Translucency</strong></span></strong></span>. This causes an object to appear lit on both its front and back, making it look translucent, like thin paper or a leaf.</p></li><li class="listitem" style="list-style-type: none"><p title="Shadeless"><span class="title"><strong><span class="strong"><strong>Shadeless</strong></span></strong></span>. This completely eliminates the effect of light on an object; the object will get its color and brightness entirely from its diffuse color and textures.</p></li><li class="listitem" style="list-style-type: none"><p title="Tangent Shading"><span class="title"><strong><span class="strong"><strong>Tangent Shading</strong></span></strong></span>. This alters the shading of a surface to more closely resemble that of brushed metal or other materials with a “grain” or directionality to their microscopic structure. The direction of the grain is taken from the object’s UV coordinates, <a id="iddle1161" class="indexterm"/><a id="iddle1190" class="indexterm"/><a id="iddle1220" class="indexterm"/><a id="iddle1322" class="indexterm"/><a id="iddle1342" class="indexterm"/><a id="iddle1609" class="indexterm"/><a id="iddle1796" class="indexterm"/><a id="iddle1799" class="indexterm"/><a id="iddle2149" class="indexterm"/><a id="iddle2306" class="indexterm"/><a id="iddle2313" class="indexterm"/><a id="iddle2380" class="indexterm"/><a id="iddle2415" class="indexterm"/><a id="iddle2446" class="indexterm"/><a id="iddle2588" class="indexterm"/><a id="iddle2722" class="indexterm"/>so the grain will be aligned with the <span class="emphasis"><em>v</em></span>-axis in UV space. In other words, it will be aligned vertically in the UV Image editor, so ensure you have unwrapped the object appropriately when enabling this option.</p></li><li class="listitem" style="list-style-type: none"><p title="Cubic Interpolation"><span class="title"><strong><span class="strong"><strong>Cubic Interpolation</strong></span></strong></span>. This alters how the surface blends between light and shadow, usually with smoother-looking results though often slightly darker.</p></li></ul></div><p title="Transparency"><span class="title"><strong><span class="strong"><strong>Transparency</strong></span></strong></span>. Turn on the Transparency checkbox to render a material with transparency. This panel offers three ways to render transparent objects, using the surface’s alpha value. The simplest, <span class="emphasis"><em>Mask</em></span>, simply blends the material into the background where the color is transparent. <span class="emphasis"><em>Z Transparency</em></span> is slightly more sophisticated, rendering whatever is behind the transparent object. <span class="emphasis"><em>Ray-traced Transparency</em></span> calculates proper refraction. Choosing Ray-traced Transparency brings up a variety of options that allow you to set the index of refraction of the material and the glossiness and amount of filtering done by the material.</p><p title="Mirror"><span class="title"><strong><span class="strong"><strong>Mirror</strong></span></strong></span>. Enable Mirror to turn on rendering ray-traced reflections. The settings in this panel let you define the amount (<span class="emphasis"><em>Reflectivity</em></span>) and sharpness (<span class="emphasis"><em>Glossy Amount</em></span>) of ray-traced reflections.</p><p title="Subsurface Scattering (SSS)"><span class="title"><strong><span class="strong"><strong>Subsurface Scattering (SSS)</strong></span></strong></span>. This option controls the effect of light scattering under the surface of a material commonly found in skin or wax. I’ll discuss this in more detail in <a class="xref" href="ch12.html#subsurface_scattering" title="Subsurface Scattering">Subsurface Scattering</a>.</p><p title="Options"><span class="title"><strong><span class="strong"><strong>Options</strong></span></strong></span>. This panel contains some miscellaneous options. For example, the <span class="emphasis"><em>Traceable</em></span> setting controls whether an object is taken into account when rendering ray-traced shadows and reflections. I’ll cover these when they come up, and you can look up any I don’t mention on the Blender wiki (at <span class="emphasis"><em><a class="ulink" href="http://wiki.blender.org/" target="_top">http://wiki.blender.org/</a></em></span>).</p><p title="Shadow"><span class="title"><strong><span class="strong"><strong>Shadow</strong></span></strong></span>. This panel controls how an object receives and casts shadows. For example, the <span class="emphasis"><em>Cast Only</em></span> option makes an object appear invisible except for any shadows it casts. <span class="emphasis"><em>Shadows Only</em></span> renders a material’s shadows as the only nontransparent parts. (This is particularly good for creating shadows that you can then composite into another image.)</p><div class="figure"><a id="different_levels_of_hardness_affect_the"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00249"/><img src="httpatomoreillycomsourcenostarchimages1538740.png.jpg" alt="Different levels of hardness affect the look of specular reflections. This checkerboard texture is used to control the hardness. (You could also vary hardness using a texture map.)"/></div></div><div class="figure-title">Figure 12-6. Different levels of hardness affect the look of specular reflections. This checkerboard texture is used to control the hardness. (You could also vary hardness using a texture map.)</div></div></div><div class="sect1" title="Cycles Materials"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cycles_materials">Cycles Materials</h2></div></div></div><p>Unlike the Blender Internal renderer, which is packed with dirty tricks and approximations to make rendering quicker, the Cycles renderer uses more physically realistic models for materials. It combines realism with a node-based approach that focuses on building up complex materials from simple parts. You can still use the Materials tab of the Properties editor to edit Cycles materials, which gives an overview of the current material, but it’s much simpler and clearer to use Blender’s Node editor, as shown in <a class="xref" href="ch12.html#editing_a_cycles_material_in_blenderapos" title="Figure 12-7. Editing a Cycles material in Blender’s Node editor. On the right is the Material Output node; its Surface node is connected to the BSDF output socket of a Diffuse Shader node. The result is the diffuse material shown in Figure 12-1.">Figure 12-7</a>.</p><p>To create a material with Cycles, all you need is a Shader node and Material Output node. You can build out from there and combine other shaders, inputs, and textures to create a wide variety of materials. To add a node, use <span class="smaller">SHIFT</span>-A and choose the node you want from the menu that appears, just like adding objects in the 3D viewport.</p><p>The BSDF (Bidirectional Scattering Distribution Function) Shader nodes control how materials work. These functions define how light interacts with a surface—for example, whether the material reflects light in a diffuse way, acts as a mirror, or transmits light like glass. You’ll find the BSDF shaders under Shaders in the Add menu in the header, along with a few other options.</p><div class="figure"><a id="editing_a_cycles_material_in_blenderapos"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00250"/><img src="httpatomoreillycomsourcenostarchimages1538742.png.jpg" alt="Editing a Cycles material in Blender’s Node editor. On the right is the Material Output node; its Surface node is connected to the BSDF output socket of a Diffuse Shader node. The result is the diffuse material shown in ."/></div></div><div class="figure-title">Figure 12-7. Editing a Cycles material in Blender’s Node editor. On the right is the Material Output node; its Surface node is connected to the BSDF output socket of a Diffuse Shader node. The result is the diffuse material shown in <a class="xref" href="ch12.html#diffuse_left_parenthesisleftright_parent" title="Figure 12-1. Diffuse (left) vs. specular (right) reflection (Cycles renderer)">Figure 12-1</a>.</div></div><p><a id="iddle1024" class="indexterm"/><a id="iddle1092" class="indexterm"/><a id="iddle1387" class="indexterm"/><a id="iddle1570" class="indexterm"/><a id="iddle1573" class="indexterm"/><a id="iddle1643" class="indexterm"/><a id="iddle1659" class="indexterm"/><a id="iddle1947" class="indexterm"/>Cycles currently supports the following shaders:</p><p title="Background"><span class="title"><strong><span class="strong"><strong>Background</strong></span></strong></span>. This affects the world background rather than materials. (See <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a> for more on world lighting settings.)</p><p title="Diffuse BSDF"><span class="title"><strong><span class="strong"><strong>Diffuse BSDF</strong></span></strong></span>. This scatters light in all directions, creating a diffuse look.</p><p title="Glossy BSDF"><span class="title"><strong><span class="strong"><strong>Glossy BSDF</strong></span></strong></span>. This reflects light like a mirror. Increasing the <span class="emphasis"><em>roughness</em></span> value makes reflections increasingly blurry.</p><p title="Glass BSDF"><span class="title"><strong><span class="strong"><strong>Glass BSDF</strong></span></strong></span>. The Glass BSDF function transmits light as glass or any other transparent medium does. The <span class="emphasis"><em>index of refraction (IOR)</em></span> determines how much the light is bent when it penetrates a surface. The higher the value, the more it is bent. Denser materials have higher IORs. For example, the IOR of glass is around 1.5, and the IOR of water is about 1.3. Diamond, a much denser material, has an IOR of around 2.4. The differences can be seen in <a class="xref" href="ch12.html#different_indices_of_refractiondot_left" title="Figure 12-8. Different indices of refraction. Left to right: 1.05, 1.5, and 2.5. As the IOR increases, the refracted light becomes more complex.">Figure 12-8</a>.</p><p title="Translucent BSDF"><span class="title"><strong><span class="strong"><strong>Translucent BSDF</strong></span></strong></span>. This scatters light in all directions from the back of the object, resulting in a translucent appearance, like that of a thin paper or leaf, with light transmitted through the material.</p><p title="Transparent BSDF"><span class="title"><strong><span class="strong"><strong>Transparent BSDF</strong></span></strong></span>. This allows light to penetrate a material without being refracted, as if there were nothing there. It’s useful when combined with alpha maps. (See <a class="xref" href="ch12.html#leaves" title="Leaves">Leaves</a> for more on creating leaf materials.)</p><p title="Velvet BSDF"><span class="title"><strong><span class="strong"><strong>Velvet BSDF</strong></span></strong></span>. This reflects light somewhat like the diffuse shader, but it reflects light more when viewed from oblique angles. The result is a velvety appearance.</p><p title="Emission"><span class="title"><strong><span class="strong"><strong>Emission</strong></span></strong></span>. This turns an object into a lamp that emits its own light.</p><p title="Holdout"><span class="title"><strong><span class="strong"><strong>Holdout</strong></span></strong></span>. This creates a “hole” in an image that goes through to the background color with zero alpha transparency. It’s useful for compositing.</p><p title="Mix Shader"><span class="title"><strong><span class="strong"><strong>Mix Shader</strong></span></strong></span>. This allows you to mix two shaders with the proportion of mixing determined by the factor input. The Mix nodes allow you to combine shaders in numerous combinations to create all sorts of materials. For example, you could create a plastic-like material by combining a Glossy BSDF and Diffuse BSDF shader, as shown in <a class="xref" href="ch12.html#combining_shaders_with_the_mix_nodedot_h" title="Figure 12-9. Combining shaders with the Mix node. Here I create a plastic-looking shader by combining an orange Diffuse BSDF shader with a white Glossy BSDF shader.">Figure 12-9</a>.</p><p title="Add Shader"><span class="title"><strong><span class="strong"><strong>Add Shader</strong></span></strong></span>. This adds two shaders together. It’s less flexible than the Mix node because you can’t control the amount of mixing, but it works much the same way.</p><p>For more on these shaders and other Cycles documentation, visit <span class="emphasis"><em><a class="ulink" href="http://wiki.Blender.org/" target="_top">http://wiki.Blender.org/</a></em></span>.</p><div class="sect2" title="Other Inputs in Cycles"><div class="titlepage"><div><div><h3 class="title" id="other_inputs_in_cycles">Other Inputs in Cycles</h3></div></div></div><p>Cycles allows you to use a wide variety of nodes that supply different data for use in your materials. You’ll find nodes to input image textures and procedural textures as well as nodes to supply geometric information, such as surface normals and the position of the surface in 3D or UV space (allowing you to map textures to a surface). Combining these nodes can prove a powerful tool, as we’ll see throughout the chapter.</p><div class="figure"><a id="different_indices_of_refractiondot_left"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00251"/><img src="httpatomoreillycomsourcenostarchimages1538744.png.jpg" alt="Different indices of refraction. Left to right: 1.05, 1.5, and 2.5. As the IOR increases, the refracted light becomes more complex."/></div></div><div class="figure-title">Figure 12-8. Different indices of refraction. Left to right: 1.05, 1.5, and 2.5. As the IOR increases, the refracted light becomes more complex.</div></div><div class="figure"><a id="combining_shaders_with_the_mix_nodedot_h"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00252"/><img src="httpatomoreillycomsourcenostarchimages1538746.png.jpg" alt="Combining shaders with the Mix node. Here I create a plastic-looking shader by combining an orange Diffuse BSDF shader with a white Glossy BSDF shader."/></div></div><div class="figure-title">Figure 12-9. Combining shaders with the Mix node. Here I create a plastic-looking shader by combining an orange Diffuse BSDF shader with a white Glossy BSDF shader.</div></div></div><div class="sect2" title="Texture Nodes"><div class="titlepage"><div><div><h3 class="title" id="texture_nodes">Texture Nodes</h3></div></div></div><p><a id="iddle1187" class="indexterm"/><a id="iddle1351" class="indexterm"/><a id="iddle1455" class="indexterm"/><a id="iddle1621" class="indexterm"/><a id="iddle1864" class="indexterm"/><a id="iddle1956" class="indexterm"/><a id="iddle2500" class="indexterm"/><a id="iddle2586" class="indexterm"/><a id="iddle2590" class="indexterm"/><a id="iddle2652" class="indexterm"/>The Texture nodes are particularly useful for creating materials, and they can supply a variety of procedural and image-based textures for use on your materials. I’ll use the image Texture nodes to apply the textures I created in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a> and <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>.</p><p>The other nodes create procedural textures. For example, the noise texture creates multicolored clouds that are useful for adding random-looking detail to surfaces, and the waves texture creates repeating bands that can be distorted to look like wood grain. The checkerboard is a great texture for testing out material settings; for example, by connecting a checkerboard node to the Fac input of a Mix Shader node, you can use it to compare two shaders (see <a class="xref" href="ch12.html#controlling_the_mixing_of_shaders_with_a" title="Figure 12-10. Controlling the mixing of shaders with a texture. Here, a checkerboard texture is used to control the mixing of a glossy and a diffuse shader.">Figure 12-10</a>). We’ll cover using textures with Cycles in more detail later in this chapter.</p></div><div class="sect2" title="Nodes in Blender Internal"><div class="titlepage"><div><div><h3 class="title" id="nodes_in_blender_internal">Nodes in Blender Internal</h3></div></div></div><p>While I won’t cover them in detail, Blender Internal also supports node materials. Although the principles are the same, these work slightly differently from Cycles nodes. Instead of shaders, you can use other materials as inputs and combine them to make new materials. <a class="xref" href="ch12.html#blender_internal_also_supports_node_mate" title="Figure 12-11. Blender Internal also supports node materials, though they work slightly differently. Here, two (non-node-based) materials have been blended (again using a checkerboard texture to control the mixing) to create a third.">Figure 12-11</a> shows two materials combined to create a third.</p><div class="figure"><a id="controlling_the_mixing_of_shaders_with_a"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00253"/><img src="httpatomoreillycomsourcenostarchimages1538748.png.jpg" alt="Controlling the mixing of shaders with a texture. Here, a checkerboard texture is used to control the mixing of a glossy and a diffuse shader."/></div></div><div class="figure-title">Figure 12-10. Controlling the mixing of shaders with a texture. Here, a checkerboard texture is used to control the mixing of a glossy and a diffuse shader.</div></div><div class="figure"><a id="blender_internal_also_supports_node_mate"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00254"/><img src="httpatomoreillycomsourcenostarchimages1538750.png.jpg" alt="Blender Internal also supports node materials, though they work slightly differently. Here, two (non-node-based) materials have been blended (again using a checkerboard texture to control the mixing) to create a third."/></div></div><div class="figure-title">Figure 12-11. Blender Internal also supports node materials, though they work slightly differently. Here, two (non-node-based) materials have been blended (again using a checkerboard texture to control the mixing) to create a third.</div></div></div></div><div class="sect1" title="Materials for the Bat Creature"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="materials_for_the_bat_creature">Materials for the Bat Creature</h2></div></div></div><p><a id="iddle1188" class="indexterm"/><a id="iddle1117" class="indexterm"/><a id="iddle1121" class="indexterm"/><a id="iddle1806" class="indexterm"/><a id="iddle1810" class="indexterm"/><a id="iddle1831" class="indexterm"/><a id="iddle2342" class="indexterm"/><a id="iddle2539" class="indexterm"/><a id="iddle2547" class="indexterm"/>Let’s look at how to create materials, beginning with the Bat Creature and Blender Internal. For this project, I needed materials for the skin, fur, eyes, and teeth.</p><div class="sect2" title="Skin"><div class="titlepage"><div><div><h3 class="title" id="skin">Skin</h3></div></div></div><p>I began with the creature’s skin. I added a new material to the Bat Creature object—that is, our final one with displacement, which I’ll use for rendering. (Remember there are two copies of the Bat Creature in the scene: one copy that I’ll use to render the body and another that I created in <a class="xref" href="ch09.html" title="Chapter 9. Hair and Particle Systems">Chapter 9</a> to hold the hair.) To add a new material to the Bat Creature, I went to the Materials tab of the Properties editor and deleted any existing material slots (by clicking the – button at the top of the tab). Then, I clicked +New from the material selector drop-down menu. I could then start creating the material. The beginnings of the material are shown in <a class="xref" href="ch12.html#bat_creature_materialcomma_shown_without" title="Figure 12-12. The Bat Creature material, shown without any textures or subsurface scattering. The rendered material is shown at the right. (See Chapter 13 and Chapter 14 for how to set up the lighting and render settings.)">Figure 12-12</a>.</p><p>So far, this was just a simple material; I merely tweaked the diffuse color and the specular intensity and hardness. I also switched the specular shading to Blinn, which gave softer highlights. Next, I needed to start incorporating my textures and refining the material.</p><p>To incorporate the diffuse texture, I switched to the Textures tab of the Properties editor, selected the first texture slot, and clicked +New to add a new texture. Then I set the Texture Type to Image. This added an Image panel to the Texture tab where I could open my diffuse texture.</p><div class="figure"><a id="bat_creature_materialcomma_shown_without"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00255"/><img src="httpatomoreillycomsourcenostarchimages1538752.png.jpg" alt="The Bat Creature material, shown without any textures or subsurface scattering. The rendered material is shown at the right. (See and for how to set up the lighting and render settings.)"/></div></div><div class="figure-title">Figure 12-12. The Bat Creature material, shown without any textures or subsurface scattering. The rendered material is shown at the right. (See <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a> and <a class="xref" href="ch14.html" title="Chapter 14. Rendering and Compositing">Chapter 14</a> for how to set up the lighting and render settings.)</div></div><div class="sect3" title="Mapping Coordinates"><div class="titlepage"><div><div><h4 class="title" id="mapping_coordinates">Mapping Coordinates</h4></div></div></div><p><a id="iddle1648" class="indexterm"/><a id="iddle1939" class="indexterm"/><a id="iddle2422" class="indexterm"/><a id="iddle2432" class="indexterm"/><a id="iddle2618" class="indexterm"/>To apply the texture to the mesh properly, I needed to tell the material to use the UV coordinates that I created in <a class="xref" href="ch08.html" title="Chapter 8. UV Unwrapping">Chapter 8</a>.</p><p>To do so, I could set the Coordinates option in the Mapping panel to UV. There are several other choices here, though, that are worth discussing. For example, the Generated option will create a procedural projection using the Projection setting below, which can be useful for applying seamless textures without having to unwrap an object. Generated coordinates project the surface of the object onto an imaginary shape—a plane, a cube, a sphere, or a cylinder—and use this projection to apply the texture. The result is shown in <a class="xref" href="ch12.html#blenderapostrophes_generated_coordinates" title="Figure 12-13. Blender’s generated coordinates project an arbitrary shape onto your object to create a mapping for textures. Top to bottom: flat, cube, tube, and sphere projections. Here, cube and sphere do a good job because the shape of the skull is largely similar to these shapes.">Figure 12-13</a>.</p><p>We’ll use some of the other options, such as <span class="emphasis"><em>strand</em></span> coordinates, later in this chapter. We’ve already seen normal coordinates in action, when applying MatCap images for use with GLSL shading.</p></div><div class="sect3" title="Influence"><div class="titlepage"><div><div><h4 class="title" id="influence">Influence</h4></div></div></div><p>The Influence panel of the Materials tab is where we set which properties of the material our texture will affect. The panel lists all the material properties that textures can be used to control, such as normals; hardness; alpha transparency; and diffuse, specular, and mirror colors and intensities. For our diffuse texture, we’ll stick with the default of Color, under the diffuse properties, which sets the diffuse color of the surface using the texture’s RGB values (see <a class="xref" href="ch12.html#adding_my_diffuse_texture_to_the_skin_ma" title="Figure 12-14. Adding my diffuse texture to the skin material for the Bat Creature">Figure 12-14</a>). I set the Blend mode for this texture to Mix, meaning it will replace the default diffuse color specified in the Material settings.</p><p>You can also use only the black-and-white value of a texture and ignore its color information by checking the RGB to Intensity option. This lets you choose a specific color to multiply this value within the color picker below it, for use with properties that still need colors. The Negative option inverts the texture before applying it to the model. The Stencil option can be particularly useful for combining procedural textures because it makes the texture act as a mask for the texture slots below: White areas of the texture will allow subsequent textures to be applied, while black areas will show only textures higher up in the texture slot stack.</p><div class="figure"><a id="blenderapostrophes_generated_coordinates"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00256"/><img src="httpatomoreillycomsourcenostarchimages1538754.png.jpg" alt="Blender’s generated coordinates project an arbitrary shape onto your object to create a mapping for textures. Top to bottom: flat, cube, tube, and sphere projections. Here, cube and sphere do a good job because the shape of the skull is largely similar to these shapes."/></div></div><div class="figure-title">Figure 12-13. Blender’s <span class="italicAlt">generated</span> coordinates project an arbitrary shape onto your object to create a mapping for textures. Top to bottom: flat, cube, tube, and sphere projections. Here, cube and sphere do a good job because the shape of the skull is largely similar to these shapes.</div></div></div><div class="sect3" title="Further Textures"><div class="titlepage"><div><div><h4 class="title" id="further_textures">Further Textures</h4></div></div></div><p>Now, I’ll continue to apply textures to my material. First, we’ll look at the specular and hardness textures that I created in <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>. To add the <a id="iddle1113" class="indexterm"/><a id="iddle1606" class="indexterm"/><a id="iddle2203" class="indexterm"/>specular texture to the material, I selected the next empty texture slot from the top of the Textures tab and clicked +New from the texture selector drop-down menu to create a new texture block. I set its type to Image. Then, I set the mapping to UV as before, but this time, under the Influence option, I set the texture to affect the specular color of the material. I set the Blend mode to Multiply so that the values from the texture were multiplied with the overall specular color of the material.</p><p>For the hardness texture, I set the texture to affect the material’s hardness, and I enabled the RGB to Intensity option to make sure Blender would treat the texture as a simple brightness value rather than as three color values. (RGB textures can fail when used with inputs that don’t require color information.) I set the Blend mode to Multiply.</p><div class="figure"><a id="adding_my_diffuse_texture_to_the_skin_ma"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00257"/><img src="httpatomoreillycomsourcenostarchimages1538756.png.jpg" alt="Adding my diffuse texture to the skin material for the Bat Creature"/></div></div><div class="figure-title">Figure 12-14. Adding my diffuse texture to the skin material for the Bat Creature</div></div><div class="figure"><a id="material_for_the_bat_creature_with_textu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00258"/><img src="httpatomoreillycomsourcenostarchimages1538758.png.jpg" alt="The material for the Bat Creature with textures added"/></div></div><div class="figure-title">Figure 12-15. The material for the Bat Creature with textures added</div></div><p>Note that having a hardness value of 0 gives strange results, so either make sure the hardness texture contains no fully black areas, or set the influence of the texture to less than 1 to eliminate this issue.</p><p>This completed adding textures to my material. The current result is shown in <a class="xref" href="ch12.html#material_for_the_bat_creature_with_textu" title="Figure 12-15. The material for the Bat Creature with textures added">Figure 12-15</a>.</p></div><div class="sect3" title="Adding a Normal Map"><div class="titlepage"><div><div><h4 class="title" id="adding_a_normal_map">Adding a Normal Map</h4></div></div></div><p><a id="iddle1644" class="indexterm"/><a id="iddle1660" class="indexterm"/><a id="iddle1964" class="indexterm"/><a id="iddle2239" class="indexterm"/><a id="iddle2243" class="indexterm"/><a id="iddle2416" class="indexterm"/><a id="iddle2447" class="indexterm"/><a id="iddle2464" class="indexterm"/>Though I had finished adding textures to the material, you may remember that in <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>, I also baked a normal map for the Bat Creature as a potential alternative to using displacement. At this stage, I could add the normal map in another image texture slot and set it to affect the Normals of the material in the Influence options. I also had to tell Blender that this is a tangent space normal map (not a bump map or an object space normal map), so in the Image Sampling panel of the Textures tab, I enabled the Normal Map option and made sure the Normal Map Space option just below was set to Tangent. The resulting material will use the textures to distort its normals when rendered, making it look more detailed even with subdivision and displacement mapping turned off.</p><p>As I <span class="emphasis"><em>was</em></span> using displacement mapping, I didn’t need to use my normal map at all, but it’s a fair alternative if you want to keep render times low or if your computer is struggling with the poly count of the scene.</p></div><div class="sect3" title="Subsurface Scattering"><div class="titlepage"><div><div><h4 class="title" id="subsurface_scattering">Subsurface Scattering</h4></div></div></div><p><span class="emphasis"><em>Subsurface scattering (SSS)</em></span> is the effect of light bouncing around below the surface of a material, and it’s common in materials like skin, wax, and marble. It results in the edges of shadows looking somewhat blurred, as light diffuses out from fully lit areas to areas in shadow. As the light scatters, some of it is absorbed, with the remaining light usually taking on the color of the underlying substance. In the case of skin, the flesh and blood below the skin cause the scattered light to appear an orange-red color.</p><div class="figure"><a id="effect_of_different_scale_values_on_subs"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00259"/><img src="httpatomoreillycomsourcenostarchimages1538760.png.jpg" alt="The effect of different scale values on subsurface scattering. Left to right: Scale values of 0.01, 0.1, and 0.5."/></div></div><div class="figure-title">Figure 12-16. The effect of different scale values on subsurface scattering. Left to right: Scale values of 0.01, 0.1, and 0.5.</div></div><p>To replicate this effect in Blender Internal, we can enable subsurface scattering for a material. This effect approximates the scattering of light within an object by precomputing the lighting over its surface and then blurring the shadows. It also causes light to scatter through thin parts of the model. This produces a nice effect when combined with lighting the subject from the back (as I will light the Bat Creature in <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a>).</p><p>Enabling subsurface scattering in the Materials tab of the Properties editor gives you a lot of options to play with. The settings for subsurface scattering are as follows:</p><p title="IOR"><span class="title"><strong><span class="strong"><strong>IOR</strong></span></strong></span>. This is the index of refraction of the material. High IORs result in slightly softer boundaries between light and dark.</p><p title="Scale"><span class="title"><strong><span class="strong"><strong>Scale</strong></span></strong></span>. This is the most important setting, because it determines the scale of the scattering effect as a ratio between Blender’s units in the 3D Viewport and real-world scales. If you’ve built your scene to a scale of 1 Blender unit = 1m, then a value of 0.001 is “correct,” though you can set this to whatever value achieves the desired results (see <a class="xref" href="ch12.html#effect_of_different_scale_values_on_subs" title="Figure 12-16. The effect of different scale values on subsurface scattering. Left to right: Scale values of 0.01, 0.1, and 0.5.">Figure 12-16</a>).</p><p title="Scattering Color"><span class="title"><strong><span class="strong"><strong>Scattering Color</strong></span></strong></span>. This determines the color of light scattering. Its effect depends largely upon how you set the color blend (as discussed below). When the color blend is set high, it colors all of the scattered light with the color you choose, generally turning your whole mesh that color. When the color blend is set to 0, it has the opposite effect, causing the scattered light to take on the <span class="emphasis"><em>inverse</em></span> color—that is, the color on the opposite side of the circle in the color picker (see <a class="xref" href="ch12.html#effect_of_different_color_blend_settings" title="Figure 12-17. The effect of different color blend settings on subsurface scattering. Here, the same bluish color is used as the scattering color for all three materials, but different color blend values are used. Left to right: Color blend values of 0.0, 0.5, and 1.0.">Figure 12-17</a>).</p><div class="figure"><a id="effect_of_different_color_blend_settings"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00260"/><img src="httpatomoreillycomsourcenostarchimages1538762.png.jpg" alt="The effect of different color blend settings on subsurface scattering. Here, the same bluish color is used as the scattering color for all three materials, but different color blend values are used. Left to right: Color blend values of 0.0, 0.5, and 1.0."/></div></div><div class="figure-title">Figure 12-17. The effect of different color blend settings on subsurface scattering. Here, the same bluish color is used as the scattering color for all three materials, but different color blend values are used. Left to right: Color blend values of 0.0, 0.5, and 1.0.</div></div><p title="RGB Radius"><span class="title"><strong><span class="strong"><strong>RGB Radius</strong></span></strong></span>. <a id="iddle1165" class="indexterm"/><a id="iddle1277" class="indexterm"/><a id="iddle1466" class="indexterm"/><a id="iddle2202" class="indexterm"/><a id="iddle2244" class="indexterm"/>In many materials, some colors of light scatter farther than others. For example, in pale skin, red light scatters farthest, green scatters about half as far as red light, and blue scatters about a quarter as far as red light. These settings let you define the relative scattering distances for red, blue, and green light.</p><p title="Blend (Color/Texture)"><span class="title"><strong><span class="strong"><strong>Blend (Color/Texture)</strong></span></strong></span>. These settings determine how much the scattering color and diffuse texture spread out. I generally set both of these very low, if not to 0, because the results are more pleasing. High color blend values tend to cause the scattering color to wash out any other colors in the material (see <a class="xref" href="ch12.html#effect_of_different_color_blend_settings" title="Figure 12-17. The effect of different color blend settings on subsurface scattering. Here, the same bluish color is used as the scattering color for all three materials, but different color blend values are used. Left to right: Color blend values of 0.0, 0.5, and 1.0.">Figure 12-17</a>), and high texture blend values cause the texture to look blurry.</p><p title="Scattering Weight (Front/Back)"><span class="title"><strong><span class="strong"><strong>Scattering Weight (Front/Back)</strong></span></strong></span>. This adjusts the relative amount of scattering from the front and back of the model. Increasing the back scattering weight causes light to scatter through thin parts of the model more noticeably, which is often desirable. Setting the front value to 0 causes the material to scatter no light from the front of the surface, making it black for all but back scattered light, as shown in <a class="xref" href="ch12.html#front_and_back_scatteringdot_left_to_rig" title="Figure 12-18. Front and back scattering. Left to right: Front scattering only, front and back scattering, and back scattering only.">Figure 12-18</a>. (This is sometimes useful in node material setups.)</p><p title="Error"><span class="title"><strong><span class="strong"><strong>Error</strong></span></strong></span>. This value determines the quality of the SSS effect. Lower values give more accurate results but at the cost of longer render times. The default value is usually fine.</p><div class="figure"><a id="front_and_back_scatteringdot_left_to_rig"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00261"/><img src="httpatomoreillycomsourcenostarchimages1538764.png.jpg" alt="Front and back scattering. Left to right: Front scattering only, front and back scattering, and back scattering only."/></div></div><div class="figure-title">Figure 12-18. Front and back scattering. Left to right: Front scattering only, front and back scattering, and back scattering only.</div></div><p>For the Bat Creature, I set the SSS settings as shown in <a class="xref" href="ch12.html#sss_settings_for_the_bat_creatureapostro" title="Figure 12-19. The SSS settings for the Bat Creature’s skin. Combined with the lighting from behind, subsurface scattering causes the wings to glow with light scattering through them.">Figure 12-19</a>. I set the scale relative to the size of the creature, which I created at a 1m = 1 Blender unit scale, and chose teal for the scattering color, which together with a color <a id="iddle1118" class="indexterm"/><a id="iddle1122" class="indexterm"/><a id="iddle1477" class="indexterm"/><a id="iddle1543" class="indexterm"/><a id="iddle1807" class="indexterm"/><a id="iddle1811" class="indexterm"/><a id="iddle1934" class="indexterm"/><a id="iddle2435" class="indexterm"/><a id="iddle2471" class="indexterm"/>blend set to 0 gave a nice orange scattering. I set the back scattering weight high to allow light to scatter through the wings. This completed the skin material for the Bat Creature.</p><div class="figure"><a id="sss_settings_for_the_bat_creatureapostro"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00262"/><img src="httpatomoreillycomsourcenostarchimages1538766.png.jpg" alt="The SSS settings for the Bat Creature’s skin. Combined with the lighting from behind, subsurface scattering causes the wings to glow with light scattering through them."/></div></div><div class="figure-title">Figure 12-19. The SSS settings for the Bat Creature’s skin. Combined with the lighting from behind, subsurface scattering causes the wings to glow with light scattering through them.</div></div></div></div><div class="sect2" title="Teeth, Nails, and Eyes"><div class="titlepage"><div><div><h3 class="title" id="teethcomma_nailscomma_and_eyes">Teeth, Nails, and Eyes</h3></div></div></div><p>To create the materials for the teeth and nails, I started by duplicating the material I created for the skin, toning down the SSS effect, and increasing the overall specularity to make these areas shinier.</p><p>To duplicate a material, assign it to an object. Then, in the material selector drop-down menu, click the + icon to make a new material by duplicating the one currently assigned. You can then modify the duplicate leaving the original unchanged. This is useful when creating a material similar to one you have already made.</p><p>For the eyes, I created two new materials. Recall that when I modeled the eyes in <a class="xref" href="ch05.html" title="Chapter 5. Modeling the Details">Chapter 5</a>, I created them as two separate parts: a cornea object that forms the outer surface of the eye and an inner part that would become the eyeball itself. Having unwrapped and textured the inner part, I set up a material similar to the skin material, with slightly less red subsurface scattering. I also turned specular reflections for this material off (by setting the specular intensity to 0), as the specular reflections for the eye will come from the cornea object. I applied the eye texture I painted in <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a> as the diffuse texture for the material.</p><p>For the cornea, I needed a shiny, transparent material that wouldn’t cast a shadow on the inner eye object. To produce this, I created a new material assigned to this object. Then, I turned on transparency in the Material settings and set it to Z Transparency, with the alpha for the material set to 0. These settings make a material transparent, with the exception of any specular and mirror reflections, if they are present. I turned the specular and hardness of the material up quite high, and to prevent the material from casting shadows, I disabled Traceable in the Options panel and Cast Buffer shadows in the Shadows panel. The two materials for the eyes can be seen in <a class="xref" href="ch12.html#two_materials_for_the_eyesdot_the_specul" title="Figure 12-20. The two materials for the eyes. The specular highlights come from the material applied to the cornea mesh. The rest are from the inner eye mesh.">Figure 12-20</a>.</p></div><div class="sect2" title="Fur"><div class="titlepage"><div><div><h3 class="title" id="fur">Fur</h3></div></div></div><p>Materials for fur are a little more complex than regular materials and require a bit of knowledge about lighting and rendering. I’ll cover the material aspects here and some of the lighting aspects in <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a>.</p><p>In Blender Internal, strand particles can be rendered either like any other material or using Blender’s Strand rendering option. Blender’s Strand rendering option offers a much faster way to render hair and fur, but it isn’t compatible with ray-traced shadows. Instead, it allows only for the rendering of shadows using spot lamps with buffered shadows.</p><p>To enable strand rendering, use the Render panel in the Particles tab of the Properties editor (see <a class="xref" href="ch12.html#enabling_strand_rendering_from_the_parti" title="Figure 12-21. Enabling strand rendering from the Particles tab of the Properties editor">Figure 12-21</a>). For the Bat Creature, I opted to use strand rendering. In <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a>, we’ll discuss creating an appropriate lighting setup for use with this setup.</p><div class="figure"><a id="two_materials_for_the_eyesdot_the_specul"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00263"/><img src="httpatomoreillycomsourcenostarchimages1538768.png.jpg" alt="The two materials for the eyes. The specular highlights come from the material applied to the cornea mesh. The rest are from the inner eye mesh."/></div></div><div class="figure-title">Figure 12-20. The two materials for the eyes. The specular highlights come from the material applied to the cornea mesh. The rest are from the inner eye mesh.</div></div><div class="figure"><a id="enabling_strand_rendering_from_the_parti"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00264"/><img src="httpatomoreillycomsourcenostarchimages1538770.png.jpg" alt="Enabling strand rendering from the Particles tab of the Properties editor"/></div></div><div class="figure-title">Figure 12-21. Enabling strand rendering from the Particles tab of the Properties editor</div></div><p><a id="iddle1119" class="indexterm"/><a id="iddle1189" class="indexterm"/><a id="iddle1266" class="indexterm"/><a id="iddle1544" class="indexterm"/><a id="iddle1808" class="indexterm"/><a id="iddle1832" class="indexterm"/><a id="iddle2113" class="indexterm"/><a id="iddle2321" class="indexterm"/><a id="iddle2339" class="indexterm"/><a id="iddle2433" class="indexterm"/><a id="iddle2434" class="indexterm"/><a id="iddle2436" class="indexterm"/><a id="iddle2452" class="indexterm"/><a id="iddle2463" class="indexterm"/><a id="iddle2633" class="indexterm"/><a id="iddle2698" class="indexterm"/>Next, I specified the Strand options for the material. In the Strand panel of the Materials tab, you can specify how thick the strands will be and their shape, among other options:</p><p title="Size (Root/Tip/Minimum)"><span class="title"><strong><span class="strong"><strong>Size (Root/Tip/Minimum)</strong></span></strong></span>. This determines the thickness of the particles at the root and tip of the hair. The Minimum setting specifies the minimum width of a strand in pixels that Blender will render.</p><p title="Blender Units"><span class="title"><strong><span class="strong"><strong>Blender Units</strong></span></strong></span>. By default, the thicknesses you specify using the Size setting are specified in pixels. This can be problematic if you have a lot of particles at different distances away from the camera, as they will be rendered with the same width in pixels, making the faraway ones look too thick. Turning on Blender Units lets you specify particle width in Blender units instead.</p><p title="Tangent Shading"><span class="title"><strong><span class="strong"><strong>Tangent Shading</strong></span></strong></span>. This option uses the strand’s tangent direction rather than its normal for shading, which generally gives better results.</p><p title="Shape"><span class="title"><strong><span class="strong"><strong>Shape</strong></span></strong></span>. This modifies the transition between the width of the root and the tip of the strand. The default value of 0 gives a linear transition. Negative values result in a spiky shape, while positive values make the strand look more rounded at the end.</p><p title="Width Fade"><span class="title"><strong><span class="strong"><strong>Width Fade</strong></span></strong></span>. This setting causes the strand to fade across its width, but only when strand rendering is enabled.</p><p title="UV Map"><span class="title"><strong><span class="strong"><strong>UV Map</strong></span></strong></span>. This allows you to overwrite one of your UV coordinate sets to provide a UV map for the strands. In turn, this lets you UV map an image to all your strands for texturing, but it works only with strand rendering disabled.</p><p title="Surface Diffuse"><span class="title"><strong><span class="strong"><strong>Surface Diffuse</strong></span></strong></span>. This setting causes the diffuse shading of the surface to blend with the strand shading over the specified distance.</p><div class="sect3" title="Strand Coordinates"><div class="titlepage"><div><div><h4 class="title" id="strand_coordinates">Strand Coordinates</h4></div></div></div><p>As mentioned above, we can texture strand materials by using the UV map override. A simpler option, however, is to use the strand coordinates for mapping when applying textures. While this only gives a one-dimensional coordinate along the length of the strand, this is usually enough for thin strands anyway.</p><p>For the Bat Creature’s fur, I first set up a simple material using the settings shown in <a class="xref" href="ch12.html#basic_settings_for_my_fur_material" title="Figure 12-22. The basic settings for my fur material">Figure 12-22</a>. Notice that I enabled Z Transparency and set the Alpha to about 0.7. For the Strand settings, I enabled Blender Units and then set the Root and Tip sizes to 0.00125 and 0.0001, respectively. (These values are small because the hairs need to be very thin, and their widths are now given in Blender units.) I also turned on Tangent Shading and set Width Fade to 1.0.</p><p>Next, in the Texture settings, I used Blender’s procedural blend texture to add a fade to the hair’s alpha along its length, making it become transparent toward the tip. I added a new texture to the material’s first texture slot and set its type to Blend. Then, I began adjusting the colors of the blend texture by first enabling the Ramp option in the Colors tab and then adjusting the colors that the procedural texture used. I clicked Add to create a couple more stops along the gradient and then set the colors to fade from transparent black to opaque white and back (see <a class="xref" href="ch12.html#modifying_the_colors_of_a_procedural_ble" title="Figure 12-23. Modifying the colors of a procedural blend texture">Figure 12-23</a>). Finally, under Mapping, I set the texture’s coordinates to alpha, and under Influence, I set the texture to multiply with the material’s alpha and its specular intensity.</p><p>I did something similar for the hair color. I created a new blend texture in the next Texture slot, but this time I set up a blend from black to white (both alpha 1.0). Again, I mapped the texture to the strand coordinates and set it to multiply by a factor of 0.8 with the strand’s diffuse color, which made the base of the strands a little darker, thus faking a bit of shadowing.</p><p>Next, I added a cloud texture, which I set to modify the material’s color—this time influencing the diffuse color with a factor of 0.8, with the Blend mode set to Multiply and its mapping set to UV. I turned the scale of the cloud texture down to the absolute minimum, essentially turning the texture into black-and-white noise and giving each hair a slightly different brightness. This completed the hair material, with the resulting hair seen in <a class="xref" href="ch12.html#hair_material" title="Figure 12-24. The hair material">Figure 12-24</a>.</p><div class="figure"><a id="basic_settings_for_my_fur_material"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00265"/><img src="httpatomoreillycomsourcenostarchimages1538772.png.jpg" alt="The basic settings for my fur material"/></div></div><div class="figure-title">Figure 12-22. The basic settings for my fur material</div></div><div class="figure"><a id="modifying_the_colors_of_a_procedural_ble"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00266"/><img src="httpatomoreillycomsourcenostarchimages1538774.png.jpg" alt="Modifying the colors of a procedural blend texture"/></div></div><div class="figure-title">Figure 12-23. Modifying the colors of a procedural blend texture</div></div><div class="figure"><a id="hair_material"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00267"/><img src="httpatomoreillycomsourcenostarchimages1538776.png.jpg" alt="The hair material"/></div></div><div class="figure-title">Figure 12-24. The hair material</div></div></div><div class="sect3" title="Peach Fuzz"><div class="titlepage"><div><div><h4 class="title" id="peach_fuzz-id00023">Peach Fuzz</h4></div></div></div><p><a id="iddle1025" class="indexterm"/><a id="iddle1120" class="indexterm"/><a id="iddle1347" class="indexterm"/><a id="iddle1574" class="indexterm"/><a id="iddle1633" class="indexterm"/><a id="iddle1754" class="indexterm"/><a id="iddle1809" class="indexterm"/><a id="iddle1825" class="indexterm"/><a id="iddle1948" class="indexterm"/><a id="iddle2062" class="indexterm"/><a id="iddle2396" class="indexterm"/><a id="iddle2540" class="indexterm"/>I set up a very similar material for the peach fuzz particle system. For this material, I decreased the size settings for the strands to make them thinner and reduced the overall alpha of the material to make the hair look wispier. The resulting material can be seen in <a class="xref" href="ch12.html#my_peach_fuzz_hair_provides_a_more_subtl" title="Figure 12-25. My peach fuzz hair provides a more subtle effect; it adds a bit of a halo of fluff around brightly lit parts of the model.">Figure 12-25</a>. It mainly shows up around the edges of the body, which is just what I wanted.</p><p>This completed my materials for the Bat Creature.</p><div class="figure"><a id="my_peach_fuzz_hair_provides_a_more_subtl"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00268"/><img src="httpatomoreillycomsourcenostarchimages1538778.png.jpg" alt="My peach fuzz hair provides a more subtle effect; it adds a bit of a halo of fluff around brightly lit parts of the model."/></div></div><div class="figure-title">Figure 12-25. My peach fuzz hair provides a more subtle effect; it adds a bit of a halo of fluff around brightly lit parts of the model.</div></div></div></div></div><div class="sect1" title="Materials for the Spider Bot"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="materials_for_the_spider_bot">Materials for the Spider Bot</h2></div></div></div><p>For the Spider Bot, I chose to use Blender’s Cycles renderer because it allowed me to create some nice shiny materials to complement the model. I began by creating a single material to apply to all the (textured) parts of the Spider Bot mesh. You can use the Material Utils Script to do this quickly: Simply enable it in Blender’s Add-Ons menu (<span class="strong"><strong>User Preferences</strong></span>▸<span class="strong"><strong>Add Ons</strong></span>) and use the shortcut <span class="strong"><strong>Q</strong></span> to assign materials to all your selected objects at once. By default, when you create a new Cycles material for an object, Blender will assign a diffuse BSDF shader, like the one shown in <a class="xref" href="ch12.html#my_screen_layout_for_editing_cycles_mate" title="Figure 12-26. My screen layout for editing Cycles materials">Figure 12-26</a>. The default material will be a plain matte white.</p><div class="sect2" title="Editing Node Materials"><div class="titlepage"><div><div><h3 class="title" id="editing_node_materials">Editing Node Materials</h3></div></div></div><p>To edit Cycles materials, use Blender’s Node editor, keeping it visible alongside the 3D Viewpoint with a render preview of the scene (a major advantage over Blender Internal that I’ll discuss shortly). To allow space for the Node editor as well as the preview, I split the default layout once by right-clicking on the bottom edge of the 3D Viewport and choosing Split Area. Then, I split the left-hand area in two, horizontally.</p><p>Once I split up the work area, I made one of the new areas into a Node editor and the other into a 3D Viewport, with its Display Method set to Rendered. In the Node editor header, I selected the materials icon in the left-hand group of icons and the cube icon in the right-hand group (see <a class="xref" href="ch12.html#evolving_node_setup_for_the_spider_bot_m" title="Figure 12-27. The evolving node setup for the Spider Bot material">Figure 12-27</a>) so that the Node editor would display the node tree for the current material. This gave me a workable layout for editing Cycles materials.</p><div class="sect3" title="The Cycles Render Preview"><div class="titlepage"><div><div><h4 class="title" id="cycles_render_preview">The Cycles Render Preview</h4></div></div></div><p>When the Display method for a 3D Viewport is set to Rendered, Blender will continuously render and update a Cycles render of the current view in that viewport (as in <a class="xref" href="ch12.html#my_screen_layout_for_editing_cycles_mate" title="Figure 12-26. My screen layout for editing Cycles materials">Figure 12-26</a>). This technique is a great way to get instant feedback on how the materials and lighting in your scene will look.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note01"/>Note</h3><p><span class="emphasis"><em>While we haven’t covered lighting yet, it’s helpful at this stage to add some basic lights to the scene so that the rendered preview will reflect the final look. Jump to <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a> for more on lighting, or simply add a couple of lights to the scene by pressing <span class="smaller">SHIFT</span>-A in the 3D Viewport, choosing <span class="bolditalic">Lamps</span>▸<span class="bolditalic">Point</span>, and adding a point light. Adjust the brightness of the light using the Strength setting in the Object Data tab of the Properties editor. Add a couple of basic lights to the scene just to help work on materials, or create a more finished lighting setup.</em></span></p></div></div><div class="sect3" title="Adding Textures"><div class="titlepage"><div><div><h4 class="title" id="adding_textures">Adding Textures</h4></div></div></div><p>Next, I started combining further shaders into my material. I began by adding a Glossy BSDF shader (<span class="smaller">SHIFT</span>-A▸Shaders▸Glossy BSDF) and using an Add Shader Node to blend the glossy and diffuse shaders by connecting both of the shader output sockets from the Shader nodes to the Add node and by connecting the Add node output socket to the Material Output node (see <a class="xref" href="ch12.html#evolving_node_setup_for_the_spider_bot_m" title="Figure 12-27. The evolving node setup for the Spider Bot material">Figure 12-27</a>).</p><p>Next, I started incorporating my textures, beginning with my diffuse map. I added an Image Texture node (<span class="smaller">SHIFT</span>-A▸Textures▸Image Texture) and opened my diffuse map by clicking the folder icon in the node. I connected the color output of this node to the color input of my Diffuse Shader node.</p><div class="figure"><a id="my_screen_layout_for_editing_cycles_mate"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00269"/><img src="httpatomoreillycomsourcenostarchimages1538780.png.jpg" alt="My screen layout for editing Cycles materials"/></div></div><div class="figure-title">Figure 12-26. My screen layout for editing Cycles materials</div></div><p><a id="iddle1350" class="indexterm"/><a id="iddle1950" class="indexterm"/><a id="iddle2365" class="indexterm"/><a id="iddle2398" class="indexterm"/><a id="iddle2498" class="indexterm"/>I did the same for my specular color map, connecting it to the color input of the Specular Color node. By default, the mapping for these textures is the active UV coordinate set, so you don’t strictly need to define this manually. But because it can help to know what coordinates a texture uses, I added a Texture Coordinates node to the scene and connected its UV output to the vector (blue) input of my Image Texture nodes. Doing so tells these nodes to use the active UV map as the source of their texture coordinates. The node setup so far is shown in <a class="xref" href="ch12.html#evolving_node_setup_for_the_spider_bot_m" title="Figure 12-27. The evolving node setup for the Spider Bot material">Figure 12-27</a>.</p><div class="figure"><a id="evolving_node_setup_for_the_spider_bot_m"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00270"/><img src="httpatomoreillycomsourcenostarchimages1538782.png.jpg" alt="The evolving node setup for the Spider Bot material"/></div></div><div class="figure-title">Figure 12-27. The evolving node setup for the Spider Bot material</div></div></div></div><div class="sect2" title="Socket Types"><div class="titlepage"><div><div><h3 class="title" id="socket_types">Socket Types</h3></div></div></div><p>Now that I have a reasonably complex node setup for the material, let’s talk about node sockets. Node sockets are the little colored circles that denote the <a id="iddle1281" class="indexterm"/><a id="iddle1551" class="indexterm"/><a id="iddle1575" class="indexterm"/><a id="iddle1624" class="indexterm"/><a id="iddle1833" class="indexterm"/><a id="iddle2221" class="indexterm"/>inputs and outputs of a node and that allow nodes to be connected by clicking and dragging a connection from the output socket of one node to the input socket of another. Notice in <a class="xref" href="ch12.html#evolving_node_setup_for_the_spider_bot_m" title="Figure 12-27. The evolving node setup for the Spider Bot material">Figure 12-27</a> that the sockets we used to connect nodes all have matching colors—green with green, yellow with yellow. The colors need to match because different output sockets pass different types of data and different input sockets expect different kinds of data. Some may require color information, some only a single value. Others may require vector information, like texture coordinates or normals.</p><p>Node sockets are color coded to clarify what a node expects as input and what it creates as output:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Blue sockets are for vector data. They can carry multiple values, such as UV coordinates (two dimensional) or position data (three dimensional).</p></li><li class="listitem"><p>Green sockets are for shaders. They carry all the information that determines how a material interacts with light.</p></li><li class="listitem"><p>Gray sockets are for value data. They carry a single numerical value.</p></li><li class="listitem"><p>Yellow sockets are for color data. They carry RGBA values (red, green, blue, and alpha).</p></li></ul></div><p>Certain types of sockets can be mixed and matched. For example, value sockets can be used as the input for color sockets, and Blender will simply treat the value data as a black-and-white image. Color sockets can also be attached to value inputs, and Blender will use the overall brightness of the color as a value input. However, shader sockets are more complex and can only be connected to other shader sockets.</p><div class="sect3" title="Roughness Map"><div class="titlepage"><div><div><h4 class="title" id="roughness_map">Roughness Map</h4></div></div></div><p>In <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>, I created a roughness map for the Spider Bot. In Cycles, I can connect this map to the roughness input for the Glossy BSDF node to control how blurry or sharp the reflections from the material should be. Dark areas will have sharp reflections, while light areas will have blurry ones (remember, this is the opposite of a hardness map).</p><p>To accomplish this, I added a new Image Texture node, loaded in the roughness map, and connected its output to the Glossy nodes roughness input. As a result, bright areas of the texture had blurrier highlights, and dark areas had sharp, glossy highlights.</p><p>I also set the color space of the Image Texture to Non-Color Data from the drop-down menu in the Image node to indicate that this node was not being used as a color image, ensuring that Blender wouldn’t perform any gamma correction on this node.</p></div><div class="sect3" title="Adjusting Inputs"><div class="titlepage"><div><div><h4 class="title" id="adjusting_inputs">Adjusting Inputs</h4></div></div></div><p>To get the most out of my textures without having to edit them in GIMP, I tweaked them using Blender’s nodes. For instance, to darken the diffuse colors a little and make the reflections from the glossy shader a little sharper, I added a Color Mix node, setting its type to Multiply, its factor to 0.5, and its second color input to black.</p><p>When this Color Mix node is dragged over the connection between an Image Texture node and a Shader node, Blender adds it to the chain automatically. (The connection will be highlighted, and the new node will be inserted when you drop it.) I did this for the connection between the diffuse map and the Diffuse BSDF shader to darken the texture slightly.</p><p>For the Glossy BSDF shader, in order to sharpen up the reflections, I needed to reduce the values of the input to the roughness shader. I accomplished this by adding a Math node between my roughness image Texture node and the roughness input of the glossy shader. I set the operation of the node to Multiply and set the second value of the node to 0.5. This halved the values from the roughness image before passing them to the Glossy Shader node so that the overall roughness of the input to the shader was halved, giving sharper, more glossy reflections.</p><p>For the shiny green areas of the mesh, I added some variance in color based on the angle of the surface to the camera. This gave the material a nice iridescent look. I accomplished this by adding a Geometry Input node (<span class="smaller">SHIFT-</span>A▸Input▸Geometry) to provide the surface normal as an input and a Normal node to take the dot product of this input with the view direction. I then used this dot product output to modify the hue of my specular color map with a Hue Saturation Value node. By using the dot product output of the Normal node, I got a value (rather than a vector) that varied with the surface normal of the material. When this value was used to affect the hue input of the Hue Saturation Value node, the color of the material was subtly shifted as the surface of the material tilted away from the camera. You can see the node chain I used in <a class="xref" href="ch12.html#material_for_the_spider_botcomma_with_so" title="Figure 12-28. The material for the Spider Bot, with some nodes added to adjust the effects of the textures">Figure 12-28</a>. It’s a somewhat complex setup, but seeing it laid out and testing it for yourself should help you make sense of it.</p><div class="figure"><a id="material_for_the_spider_botcomma_with_so"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00271"/><img src="httpatomoreillycomsourcenostarchimages1538784.png.jpg" alt="The material for the Spider Bot, with some nodes added to adjust the effects of the textures"/></div></div><div class="figure-title">Figure 12-28. The material for the Spider Bot, with some nodes added to adjust the effects of the textures</div></div></div></div><div class="sect2" title="Other Materials"><div class="titlepage"><div><div><h3 class="title" id="other_materials">Other Materials</h3></div></div></div><p><a id="iddle1677" class="indexterm"/><a id="iddle1814" class="indexterm"/><a id="iddle2399" class="indexterm"/>I still needed to make a couple of materials for the Spider Bot: a shiny material for the eyes (I used a simple glossy shader set to dark gray, with a slight roughness of 0.05) and a material for the wires (I combined a glossy shader and a diffuse shader with a Shader Mix node). You can see these materials in <a class="xref" href="ch12.html#extra_spider_bot_materialsdot_top_the_ey" title="Figure 12-29. The extra Spider Bot materials. Top: The eyes, a simple glossy material. Bottom: The wires, a Diffuse BSDF shader with a rough Glossy BSDF shader mixed in.">Figure 12-29</a> and the finished Spider Bot material in <a class="xref" href="ch12.html#look_of_the_finished_spider_bot_material" title="Figure 12-30. The look of the finished Spider Bot material. See Chapter 13 and Chapter 14 for information on lighting and rendering.">Figure 12-30</a>.</p></div></div><div class="sect1" title="Materials for the Jungle Temple"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="materials_for_the_jungle_temple">Materials for the Jungle Temple</h2></div></div></div><p>I used the Cycles renderer for the Jungle Temple scene as well. This scene needed a variety of materials: leaf materials for the foliage, generic materials for the rocks and soil, and a couple of unique materials for the objects I textured individually, such as the foreground stones and the statues.</p><div class="figure"><a id="extra_spider_bot_materialsdot_top_the_ey"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00272"/><img src="httpatomoreillycomsourcenostarchimages1538786.png.jpg" alt="The extra Spider Bot materials. Top: The eyes, a simple glossy material. Bottom: The wires, a Diffuse BSDF shader with a rough Glossy BSDF shader mixed in."/></div></div><div class="figure-title">Figure 12-29. The extra Spider Bot materials. Top: The eyes, a simple glossy material. Bottom: The wires, a Diffuse BSDF shader with a rough Glossy BSDF shader mixed in.</div></div><div class="figure"><a id="look_of_the_finished_spider_bot_material"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00273"/><img src="httpatomoreillycomsourcenostarchimages1538788.png.jpg" alt="The look of the finished Spider Bot material. See and for information on lighting and rendering."/></div></div><div class="figure-title">Figure 12-30. The look of the finished Spider Bot material. See <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a> and <a class="xref" href="ch14.html" title="Chapter 14. Rendering and Compositing">Chapter 14</a> for information on lighting and rendering.</div></div><div class="sect2" title="Ground"><div class="titlepage"><div><div><h3 class="title" id="ground">Ground</h3></div></div></div><p><a id="iddle1679" class="indexterm"/><a id="iddle1683" class="indexterm"/><a id="iddle1726" class="indexterm"/><a id="iddle1790" class="indexterm"/><a id="iddle1816" class="indexterm"/><a id="iddle1820" class="indexterm"/><a id="iddle2684" class="indexterm"/>The ground material was probably the simplest to create. It’s simply a mix of a Diffuse and a Glossy BSDF shader, using my painted textures as inputs for the colors. Because I felt my original textures made the material look a little light, I used a Gamma node to darken them slightly without losing too much contrast (see <a class="xref" href="ch12.html#soil_for_the_jungle_temple_scene" title="Figure 12-31. The soil for the Jungle Temple scene">Figure 12-31</a>).</p></div><div class="sect2" title="Stone Material"><div class="titlepage"><div><div><h3 class="title" id="stone_material">Stone Material</h3></div></div></div><p>For my stone material, I wanted to combine the two different stone textures I made in <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>, allowing each to show through in different areas, to give a bit of variation in the look of the material. To do so, I started by creating a basic shader that mixed a diffuse and glossy shader together using a Shader Mix node. I controlled the amount of mixing with a Layer Weight node, using its blend output. The Layer Weight node blends from 0 to 1 depending on the normals of a mesh: Surfaces facing the camera get low values, and ones facing away get high values (the exact values depend on the output used—facing or fresnel). Using the Facing output of this node to control the blending between the glossy and diffuse shaders produced some shiny highlights around the edges of objects with a more diffuse look when viewed straight on, as shown in section <span class="gray-background">1</span> of <a class="xref" href="ch12.html#my_rock_material_setup_is_somewhat_compl" title="Figure 12-32. My rock material setup is somewhat complex. A Layer Weight node 1 is used to blend between the specular and diffuse shaders. Two Voronoi textures added together 2 control the mixing of my rock textures (two for diffuse colors, two for specular). The textures themselves are scaled using some Map nodes 3, and the specular colors are also used for displacement 4.">Figure 12-32</a>.</p><p>To create a patchy distribution for the different stone textures, I combined a couple of Voronoi Texture nodes with different scales and then used these to control the mixing between the different textures for the rocks for both the specular and diffuse maps, as shown in <a class="xref" href="ch12.html#my_rock_material_setup_is_somewhat_compl" title="Figure 12-32. My rock material setup is somewhat complex. A Layer Weight node 1 is used to blend between the specular and diffuse shaders. Two Voronoi textures added together 2 control the mixing of my rock textures (two for diffuse colors, two for specular). The textures themselves are scaled using some Map nodes 3, and the specular colors are also used for displacement 4.">Figure 12-32</a> <span class="gray-background">2</span>. I also used some Map nodes to scale up the texture mappings for my rock textures to make them match one another and fit the scale of the scene, which you can see in <a class="xref" href="ch12.html#my_rock_material_setup_is_somewhat_compl" title="Figure 12-32. My rock material setup is somewhat complex. A Layer Weight node 1 is used to blend between the specular and diffuse shaders. Two Voronoi textures added together 2 control the mixing of my rock textures (two for diffuse colors, two for specular). The textures themselves are scaled using some Map nodes 3, and the specular colors are also used for displacement 4.">Figure 12-32</a> <span class="gray-background">3</span>.</p><div class="figure"><a id="soil_for_the_jungle_temple_scene"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00274"/><img src="httpatomoreillycomsourcenostarchimages1538790.png.jpg" alt="The soil for the Jungle Temple scene"/></div></div><div class="figure-title">Figure 12-31. The soil for the Jungle Temple scene</div></div><div class="figure"><a id="my_rock_material_setup_is_somewhat_compl"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00275"/><img src="httpatomoreillycomsourcenostarchimages1538792.png.jpg" alt="My rock material setup is somewhat complex. A Layer Weight node 1 is used to blend between the specular and diffuse shaders. Two Voronoi textures added together 2 control the mixing of my rock textures (two for diffuse colors, two for specular). The textures themselves are scaled using some Map nodes 3, and the specular colors are also used for displacement 4."/></div></div><div class="figure-title">Figure 12-32. My rock material setup is somewhat complex. A Layer Weight node <span class="gray-background">1</span> is used to blend between the specular and diffuse shaders. Two Voronoi textures added together <span class="gray-background">2</span> control the mixing of my rock textures (two for diffuse colors, two for specular). The textures themselves are scaled using some Map nodes <span class="gray-background">3</span>, and the specular colors are also used for displacement <span class="gray-background">4</span>.</div></div><div class="sect3" title="Displacement"><div class="titlepage"><div><div><h4 class="title" id="displacement">Displacement</h4></div></div></div><p><a id="iddle2428" class="indexterm"/><a id="iddle1226" class="indexterm"/><a id="iddle1682" class="indexterm"/><a id="iddle1819" class="indexterm"/><a id="iddle2419" class="indexterm"/>Cycles currently supports the use of a black-and-white input (or converting an RGB input to just a single value) to mimic the effect of small bumps in the surface of a material. This is often referred to as <span class="emphasis"><em>bump mapping</em></span> in other render engines. Cycles does not yet support normal maps.</p><p>To add a bit more of a textured look to the surface of my rocks, I used the specular colors (the two mixed together) as the displacement input for the Material Output node, though I used a Multiply node to scale down their values to reduce the effect, as shown in <a class="xref" href="ch12.html#my_rock_material_setup_is_somewhat_compl" title="Figure 12-32. My rock material setup is somewhat complex. A Layer Weight node 1 is used to blend between the specular and diffuse shaders. Two Voronoi textures added together 2 control the mixing of my rock textures (two for diffuse colors, two for specular). The textures themselves are scaled using some Map nodes 3, and the specular colors are also used for displacement 4.">Figure 12-32</a> <span class="gray-background">4</span>. The finished rock material is shown in <a class="xref" href="ch12.html#rock_material" title="Figure 12-33. The rock material">Figure 12-33</a>.</p></div><div class="sect3" title="Statue"><div class="titlepage"><div><div><h4 class="title" id="statue-id00024">Statue</h4></div></div></div><p>The statue material is basically just a copy of the generic stone material, except that it uses the textures I painted for the statue. To create it, I applied the stone material to the statue and then clicked the + icon in the material selector drop-down menu to make a new material using the current one. Next, I deleted (<span class="strong"><strong>X</strong></span>) the extraneous nodes from the material in the Node editor and replaced them with my textures for the statue (see <a class="xref" href="ch12.html#statue_material_is_very_similar_to_the_r" title="Figure 12-34. The statue material is very similar to the rock material, except that it uses its own textures.">Figure 12-34</a>).</p><div class="figure"><a id="rock_material"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00276"/><img src="httpatomoreillycomsourcenostarchimages1538794.png.jpg" alt="The rock material"/></div></div><div class="figure-title">Figure 12-33. The rock material</div></div><div class="figure"><a id="statue_material_is_very_similar_to_the_r"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00277"/><img src="httpatomoreillycomsourcenostarchimages1538796.png.jpg" alt="The statue material is very similar to the rock material, except that it uses its own textures."/></div></div><div class="figure-title">Figure 12-34. The statue material is very similar to the rock material, except that it uses its own textures.</div></div></div></div><div class="sect2" title="Leaves"><div class="titlepage"><div><div><h3 class="title" id="leaves">Leaves</h3></div></div></div><p><a id="iddle1386" class="indexterm"/><a id="iddle1678" class="indexterm"/><a id="iddle1680" class="indexterm"/><a id="iddle1681" class="indexterm"/><a id="iddle1815" class="indexterm"/><a id="iddle1817" class="indexterm"/><a id="iddle1818" class="indexterm"/><a id="iddle2127" class="indexterm"/><a id="iddle2497" class="indexterm"/><a id="iddle2585" class="indexterm"/><a id="iddle2620" class="indexterm"/><a id="iddle2687" class="indexterm"/>For the leaves, I wanted a translucent material so that leaves illuminated on one side would appear bright when viewed from the unlit side as well. To achieve this, I mixed a Translucent BSDF shader with a Diffuse BSDF shader and mixed in specular highlights on top to make the leaves shiny. The leaf meshes had to be transparent in order to make the areas of the mesh that weren’t part of the leaves invisible. I accomplished this by mixing the result of all the nodes so far with a Transparent BSDF shader, using the alpha map from <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a> to control the mixing (see <a class="xref" href="ch12.html#material_for_the_ivygen_leavesdot_the_ot" title="Figure 12-35. The material for the IvyGen leaves. The other leaves, which share textures and the same material, were created in the same way.">Figure 12-35</a>).</p></div><div class="sect2" title="Foreground Rocks and Soil"><div class="titlepage"><div><div><h3 class="title" id="foreground_rocks_and_soil">Foreground Rocks and Soil</h3></div></div></div><p>In <a class="xref" href="ch11.html" title="Chapter 11. Texture Painting">Chapter 11</a>, I created a hand-painted texture for the foreground objects from the camera’s perspective. To use this, I needed to create a unique material for these objects. I began by duplicating the material I created for the statue and then replacing its texture inputs with the ones I created for the foreground objects.</p><div class="figure"><a id="material_for_the_ivygen_leavesdot_the_ot"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00278"/><img src="httpatomoreillycomsourcenostarchimages1538798.png.jpg" alt="The material for the IvyGen leaves. The other leaves, which share textures and the same material, were created in the same way."/></div></div><div class="figure-title">Figure 12-35. The material for the IvyGen leaves. The other leaves, which share textures and the same material, were created in the same way.</div></div><p>To map the textures to the models correctly, I snapped the 3D Viewport to the camera view (<span class="smaller">NUMPAD</span> 0) and UV unwrapped the foreground objects using the Unwrap▸Project from View operator for each object to which the material was applied. This projected the objects’ UV coordinates to match the camera’s perspective and so allowed me to use the UV coordinates as the texture coordinates. The material nodes for this material can be seen in <a class="xref" href="ch12.html#material_for_the_foreground_rocks_and_so" title="Figure 12-36. The material for the foreground rocks and soil">Figure 12-36</a>.</p></div><div class="sect2" title="Puddles"><div class="titlepage"><div><div><h3 class="title" id="puddles">Puddles</h3></div></div></div><p>For the puddles, I needed a water material that would let some light penetrate the surface and show some reflections. The glass material alone would do the job (using an IOR value of 1.33, equal to that of water), but to get a bit more control over how much light would penetrate the surface and the strength of the reflections, I blended Transparent, Glass, and Glossy BSDF shaders. I mixed in the glossy shader using a Layer Weight node connected to the Mix node to get a bit of extra reflection at low viewing angles.</p><div class="figure"><a id="material_for_the_foreground_rocks_and_so"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00279"/><img src="httpatomoreillycomsourcenostarchimages1538800.png.jpg" alt="The material for the foreground rocks and soil"/></div></div><div class="figure-title">Figure 12-36. The material for the foreground rocks and soil</div></div><p><a id="iddle2210" class="indexterm"/><a id="iddle2690" class="indexterm"/>To produce ripples in the surface of the water, I created a Waves Texture node (<span class="smaller">SHIFT</span>-A▸Texture▸Wave Texture) and connected it to the displacement socket on the Material Output node to create some distortion in the water’s surface. By default, the Waves node gives straight, repeating waves, but by setting the wave type to Rings and increasing the distortion value, you can get some nice ripples (see <a class="xref" href="ch12.html#water_materialcomma_created_by_mixing_tr" title="Figure 12-37. The water material, created by mixing Transparent, Glass, and Glossy BSDF shaders and using a wave texture to provide some displacement">Figure 12-37</a>).</p><div class="figure"><a id="water_materialcomma_created_by_mixing_tr"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00280"/><img src="httpatomoreillycomsourcenostarchimages1538802.png.jpg" alt="The water material, created by mixing Transparent, Glass, and Glossy BSDF shaders and using a wave texture to provide some displacement"/></div></div><div class="figure-title">Figure 12-37. The water material, created by mixing Transparent, Glass, and Glossy BSDF shaders and using a wave texture to provide some displacement</div></div></div></div><div class="sect1" title="General Tips for Creating Materials"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="general_tips_for_creating_materials">General Tips for Creating Materials</h2></div></div></div><p><a id="iddle1826" class="indexterm"/><a id="iddle2114" class="indexterm"/><a id="iddle2159" class="indexterm"/><a id="iddle2231" class="indexterm"/><a id="iddle2397" class="indexterm"/>Here are some general principles to keep in mind when creating materials in your projects. Chiefly, they involve paying attention to the real-world equivalents of the materials you are trying to replicate and constructing your material accordingly:</p><p title="Keep reflection amounts sane."><span class="title"><strong><span class="strong"><strong>Keep reflection amounts sane.</strong></span></strong></span> Make sure that the total amount of light your object is reflecting is sensible. When using the Add node to combine shaders in Cycles, it’s possible to create a material that reflects more light than it would realistically receive in the first place by adding too many shaders together. Similarly, in Blender Internal, keep in mind that the diffuse and specular reflection amounts (plus the light absorbed by the object) should roughly add up to 1—for example, a diffuse intensity of 0.6 and a specular intensity of 0.3, leaving some absorbed light to spare. Otherwise, your material will look unrealistically bright next to other materials.</p><p title="There are no perfect materials."><span class="title"><strong><span class="strong"><strong>There are no perfect materials.</strong></span></strong></span> No material reflects 100 percent of all light, and no material absorbs 100 percent either. Try not to make any materials that are completely dark or completely white (unless you are doing so for a good reason).</p><p title="Use saturation in moderation."><span class="title"><strong><span class="strong"><strong>Use saturation in moderation.</strong></span></strong></span> The color of a material is rarely 100 percent saturated, even for brightly colored materials like plastics. Most everyday colors are less than 85 percent saturated, so keep the colors of your materials in a sensible range to make them believable.</p><p title="Keep it simple."><span class="title"><strong><span class="strong"><strong>Keep it simple.</strong></span></strong></span> Try to avoid making complex materials to ensure shorter render times. For example, in Blender Internal, try to use ray-traced reflections only when really needed.</p><p title="Supplement materials with procedural textures."><span class="title"><strong><span class="strong"><strong>Supplement materials with procedural textures.</strong></span></strong></span> Blender’s built-in procedural textures are a great way to supplement materials by using them as bump maps or to blend other textures. Doing so can add a lot of variation to your materials while preventing you from having to laboriously hand-paint textures.</p></div><div class="sect1" title="In Review"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="in_review-id00025">In Review</h2></div></div></div><p>In this chapter, we started with a look at Blender’s options for creating materials, both for the Blender Internal renderer and Cycles. Because these two render engines require different approaches when creating materials, we explored their different options and requirements. Then we moved on to creating materials for the three projects. For the Bat Creature, I created Blender Internal–compatible materials for the body, fur, eyes, nails, and teeth. For the body, I created a material with subsurface scattering to mimic realistic skin, and for the fur, I covered the different options for fur materials and rendering. I used Blender’s strand shader to render the fur and examined ways to apply textures to fur.</p><p>For the Spider Bot and the Jungle Temple scene, I created materials for rendering with Cycles, using Blender’s Node editor to create a range of different materials by combining Shader nodes and using textures to supply their inputs.</p><p>The projects are now ready to be lit and rendered. In <a class="xref" href="ch13.html" title="Chapter 13. Lighting">Chapter 13</a>, you’ll learn about different lighting setups and how to use lighting in both Blender Internal and Cycles.</p></div></section></body></html>