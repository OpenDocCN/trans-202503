<html><head></head><body>
<div class="imagec"><span epub:type="pagebreak" id="page_61"/><img alt="Image" src="../images/common1.jpg"/></div>
<h2 class="h2" id="ch03"><strong>3</strong><br/><strong>LUMINOUS LIGHT</strong></h2>
<p class="noindent">In this chapter, we’ll use the micro:bit to experiment with light. First, you’ll learn how to sense light levels, and we’ll build a light-controlled guitar that plays notes depending on how much light it senses. Then we’ll use light to create an optical illusion infinity mirror that appears to go on forever to help the Mad Scientist fathom their most profound thoughts. MicroPython doesn’t have a light-sensing feature yet, so you’ll use Blocks code in this chapter.</p>
<h3 class="h3" id="ch00lev1sec78"><span epub:type="pagebreak" id="page_62"/><strong>EXPERIMENT 3: SENSING LIGHT</strong></h3>
<div class="image"><img alt="Image" src="../images/common2.jpg"/></div>
<p class="noindent">Let’s look at how you can use a micro:bit to measure the light levels. Once you know how to do this, you’ll be able to make all sorts of light-dependent projects, including the automatic night-light and light-controlled guitar you’ll find later in this chapter.</p>
<p class="indent">The micro:bit’s developers very cleverly built a feature into the device’s software that allows it to measure the light level with its LEDs. I’ll explain how in “How It Works” on <a href="ch03.xhtml#page_63">page 63</a>.</p>
<h4 class="h4" id="ch00lev1sec79"><strong>What You’ll Need</strong></h4>
<p class="noindent">You just need a micro:bit and a USB cable for this experiment.</p>
<h4 class="h4" id="ch00lev1sec80"><strong>Construction</strong></h4>
<ol>
<li class="noindent">Visit the book’s code repository at <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em> and click the link for <strong>Experiment 3: Sensing Light</strong>. Click <strong>Download</strong> and then copy the hex file onto your micro:bit. If you get stuck, head back to “Programming the Micro:bit” on <a href="ch01.xhtml#page_11">page 11</a> where we discuss the process of getting programs onto your micro:bit in full. Remember, this experiment only works on Blocks code, so there’s no MicroPython code available to download.</li>
<li class="noindent">Once you’ve successfully programmed the micro:bit, a number between 0 and 9 should appear on the display, indicating how much light the micro:bit is detecting. Try changing the light level by shading the micro:bit with your hand or holding it under a light and see how the number changes.</li>
</ol>
<h4 class="h4" id="ch00lev1sec81"><strong>Code</strong></h4>
<p class="noindent">Here is the Blocks code for this experiment.</p>
<div class="image"><span epub:type="pagebreak" id="page_63"/><img alt="Image" src="../images/f0063-01.jpg"/></div>
<p class="indent">The <code>light level</code> block takes a reading from the micro:bit’s light sensor and assigns it a value between 0 and 255 that represents the brightness. But, if the number is more than one digit, the micro:bit’s LED display will need to scroll to display it, which is slow and inconvenient. By dividing that number by 26, the value will always be below 10.</p>
<p class="indent">After displaying the light level, the micro:bit pauses for half a second to give you time to read the display. Otherwise, the numbers would flicker past too quickly when the light level changes.</p>
<h4 class="h4" id="ch00lev1sec82"><strong>How It Works</strong></h4>
<p class="noindent">The micro:bit doesn’t have a dedicated light sensor. Instead, it uses an ingenious trick to calculate light levels with its display. You can read about this trick at <em><a href="https://lancaster-university.github.io/microbit-docs/extras/light-sensing/">https://lancaster-university.github.io/microbit-docs/extras/light-sensing/</a></em>.</p>
<h3 class="h3" id="ch00lev1sec83"><strong>PROJECT: AUTOMATIC NIGHT-LIGHT</strong></h3>
<div class="image"><img alt="Image" src="../images/common3.jpg"/></div>
<p class="difficulty"><em>Difficulty: Easy</em></p>
<p class="noindent">Although they’re reluctant to admit it, the Mad Scientist is a little bit afraid of the dark. That’s why they developed a project that uses a micro:bit’s display as a light that will automatically turn on when night falls.</p>
<div class="imagec"><span epub:type="pagebreak" id="page_64"/><img alt="Image" src="../images/f0064-01.jpg"/></div>
<p class="indent">This simple project builds on Experiment 3 to monitor the light level and then turn on all the LEDs on the micro:bit’s display if the light gets too dim.</p>
<h4 class="h4" id="ch00lev1sec84"><strong>What You’ll Need</strong></h4>
<p class="noindent">The only thing you need for this project is a micro:bit.</p>
<p class="indent">Because the micro:bit will have to stay on for a long time, it’s best to use a USB power adapter or Monk Makes Power for micro:bit (see “Powering Your Micro:bit” on <a href="app01.xhtml#page_248">page 248</a>) for this project. Batteries run out of power too soon.</p>
<h4 class="h4" id="ch00lev1sec85"><strong>Construction</strong></h4>
<ol>
<li class="noindent">Visit the book’s code repository at <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em> and click the link for <strong>Automatic Night-Light</strong>. Then click <strong>Download</strong> and copy the hex file onto your micro:bit. If you get stuck on this, head back to “Programming the micro:bit” on <a href="ch01.xhtml#page_11">page 11</a>, where we discuss the process of getting programs onto your micro:bit in full.</li>
<li class="noindent">Once you’ve programmed the micro:bit, the display should illuminate when you shade the micro:bit with your hand. When you take your hand away, the display should turn off.</li>
</ol>
<h4 class="h4" id="ch00lev1sec86"><span epub:type="pagebreak" id="page_65"/><strong>Code</strong></h4>
<p class="noindent">The Blocks code for this project is shown here.</p>
<div class="image"><img alt="Image" src="../images/f0065-01.jpg"/></div>
<p class="indent">This code uses two <code>if</code> blocks. The first checks whether the light level is less than 10, which would indicate that the environment is very dark. If this condition is met, the code turns on all the LEDs using the <code>show leds</code> block with all the LEDs selected.</p>
<p class="indent">The second <code>if</code> block turns the LEDs off if the light level is greater than 50. We leave a gap between the two levels of 10 and 50 to make sure the LEDs don’t flash on and off when the light is close to either level. The technical name for the difference between on/off values is <em>hysterysis</em>.</p>
<h3 class="h3" id="ch00lev1sec87"><strong>PROJECT: LIGHT GUITAR</strong></h3>
<div class="image"><span epub:type="pagebreak" id="page_66"/><img alt="Image" src="../images/common3.jpg"/></div>
<p class="difficulty"><em>Difficulty: Medium</em></p>
<p class="noindent">Now it’s time to make a light-controlled guitar! This guitar will play different tones when you wave your hand in front of the micro:bit. You can see a video of this project in action at <em><a href="https://www.youtube.com/watch?v=OFUYxIYCXQs">https://www.youtube.com/watch?v=OFUYxIYCXQs</a></em>.</p>
<p class="indent">I recommend attaching your micro:bit, a speaker, and a battery to a guitar-shaped cardboard cutout. (The Mad Scientist is not terribly good at art, so the resemblance in <a href="ch03.xhtml#ch3fig1">Figure 3-1</a> is only passing.)</p>
<div class="image" id="ch3fig1"><img alt="Image" src="../images/03fig01.jpg"/></div>
<p class="figcap"><em>Figure 3-1: The micro:bit becomes a musical instrument.</em></p>
<p class="indent">The cables that connect the micro:bit to the speaker are hidden behind the cardboard to keep things neat.</p>
<h4 class="h4" id="ch00lev1sec88"><strong>What You’ll Need</strong></h4>
<p class="noindent">For this project, you’ll need the following items:</p>
<p class="noindentint"><strong><span class="blue">Micro:bit</span></strong></p>
<p class="noindentin"><strong><span class="blue">3 × Alligator clip cables</span></strong> To connect the micro:bit to the speaker</p>
<p class="noindentin"><strong><span class="blue">3V battery pack</span></strong> To power the micro:bit and speaker (The kind with a switch works best.)</p>
<p class="noindentin"><strong><span class="blue">Speaker for micro:bit</span></strong> To play the sound (Use a Monk Makes Speaker or see <a href="ch02.xhtml#ch02">Chapter 2</a> for other speaker options.)</p>
<p class="noindentin"><span epub:type="pagebreak" id="page_67"/><strong><span class="blue">Blu-Tack or self-adhesive pads</span></strong> To attach the micro:bit to the cardboard cutout</p>
<p class="noindentin"><strong><span class="blue">Cardboard</span></strong> To form the guitar body (You can use a cut-up cardboard box.)</p>
<p class="noindentin"><strong><span class="blue">Paper glue (PVA or spray adhesive)</span></strong> To stick the paper outline to the cardboard</p>
<p class="noindentin"><strong><span class="blue">Paper with a guitar outline (optional)</span></strong> You can either draw your own guitar on paper or cut out and decorate the cardboard directly.</p>
<p class="noindentin"><strong><span class="blue">Scissors</span></strong> To cut out the outline of the guitar</p>
<h4 class="h4" id="ch00lev1sec89"><strong>Construction</strong></h4>
<p class="noindent">It’s a good idea to create and test the program before attaching your micro:bit to the cardboard, so we’ll do that first.</p>
<ol>
<li class="noindent">Connect the speaker to the micro:bit using the three alligator cables, as shown in <a href="ch03.xhtml#ch3fig2">Figure 3-2</a>.
<p class="indent">It’s a good idea to color-code the cables so you remember which is which. Use black for GND, red for 3V, and any other color for the audio connection from pin 0 of the micro:bit.</p>
<div class="image" id="ch3fig2"><img alt="Image" src="../images/03fig02.jpg"/></div>
<p class="figcap"><em>Figure 3-2: Attaching the micro:bit to a speaker</em></p></li>
<li class="noindent"><span epub:type="pagebreak" id="page_68"/>Open <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em> and click for the <strong>Light Guitar</strong> project. Once the experiment has opened, click <strong>Download</strong>, then copy the hex file onto your micro:bit.</li>
<li class="noindent">Once you’ve programmed the micro:bit, it should play a different note when your hand gets close to it and shades some of the light. If you don’t get a very large range of notes, you may need to adjust its sensitivity (see “Code” on <a href="ch03.xhtml#page_71">page 71</a> for how to do this).</li>
<li class="noindent">Disconnect the micro:bit from the USB cable. At <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em>, you’ll find a folder called <strong>other downloads</strong> that contains a drawing of a guitar shape in PDF, PNG, and SVG formats. You can draw your own guitar or print out this template.</li>
<li class="noindent">Glue your guitar drawing to your piece of cardboard, as shown in <a href="ch03.xhtml#ch3fig3">Figure 3-3</a>.
<div class="image" id="ch3fig3"><img alt="Image" src="../images/03fig03.jpg"/></div>
<p class="figcap"><em>Figure 3-3: Gluing the paper template to the cardboard</em></p></li>
<li class="noindent">Using a pair of scissors, cut around the outline of the guitar. Also cut out the two rectangles in the body of the guitar, where you’ll put the wires connecting the micro:bit to the speaker. The result should look like <a href="ch03.xhtml#ch3fig4">Figure 3-4</a>.
<div class="image" id="ch3fig4"><span epub:type="pagebreak" id="page_69"/><img alt="Image" src="../images/03fig04.jpg"/></div>
<p class="figcap"><em>Figure 3-4: Cutting around the template</em></p></li>
<li class="noindent">Using small balls of Blu-Tack, attach the speaker and the micro:bit to the guitar so that the edge connectors of both are accessible from the rectangular slots. Also attach the battery box, as shown in <a href="ch03.xhtml#ch3fig5">Figure 3-5</a>.
<div class="image" id="ch3fig5"><img alt="Image" src="../images/03fig05.jpg"/></div>
<p class="figcap"><em>Figure 3-5: Attaching the micro:bit, the speaker, and the battery box</em></p>
<p class="indent">When all three parts are attached to the guitar, the project should look like <a href="ch03.xhtml#ch3fig6">Figure 3-6</a>.</p>
<div class="image" id="ch3fig6"><span epub:type="pagebreak" id="page_70"/><img alt="Image" src="../images/03fig06.jpg"/></div>
<p class="figcap"><em>Figure 3-6: The micro:bit, speaker, and battery box have been attached to the guitar.</em></p></li>
<li class="noindent">Flip the whole thing over and connect the micro:bit and speaker, as shown in <a href="ch03.xhtml#ch3fig7">Figure 3-7</a>. Reference <a href="ch03.xhtml#ch3fig2">Figure 3-2</a> if you need help with the connections.
<div class="image" id="ch3fig7"><img alt="Image" src="../images/03fig07.jpg"/></div>
<p class="figcap"><em>Figure 3-7: Connecting the micro:bit to the speaker</em></p></li>
<li class="noindent">Connect the battery box to the battery connector on the micro:bit. You’re ready to rock out!</li>
</ol>
<h4 class="h4" id="ch00lev1sec90"><span epub:type="pagebreak" id="page_71"/><strong>Code</strong></h4>
<p class="noindent">The Blocks code for this project uses arrays.</p>
<div class="image"><img alt="Image" src="../images/f0071-01.jpg"/></div>
<p class="indent">We put the code that needs to be run only when the micro:bit starts up in the <code>on start</code> block. This creates an array of notes. An <em>array</em> is a list of values rather than a single value. We’re using an array to provide a list of eight possible notes for the micro:bit to play. Different light levels will trigger different notes. The first line inside the <code>on start</code> block defines a new array called <code>notes</code>, which initially just contains the note <code>Middle C</code>. The <code>add value</code> blocks that follow <span epub:type="pagebreak" id="page_72"/>add another seven notes to the array so that the variable <code>notes</code> will eventually contain all eight of the notes we need.</p>
<div class="imagec"><img alt="Image" src="../images/f0072-01.jpg"/></div>
<p class="indent">The code inside the <code>forever</code> block will run continuously. This is the code that tells the micro:bit to read the light level and then uses that information to pick a note to play. To do this, the code first reads the light level using the <code>light level</code> block and divides the reading by 25. If you don’t hear all eight notes, you may need to adjust the sensitivity by tweaking this value of 25 down a bit.</p>
<p class="indent">The <code>set to</code> block names the resulting value <code>note number</code>. Since the <code>note number</code> is the light level divided by 25, it will be a value between 1 and 10.</p>
<p class="indent">But setting the maximum light level to 10 would cause problems. When accessing items in an array, you specify the position of the item you want. The maximum position we can specify in this array is 7 (the eight notes are numbered 0 to 7). We want the guitar to work indoors where the light is fairly low. However, if the light is really bright, then <code>note number</code> might turn out to be 10, which would be outside the array. To make sure that we don’t exceed this maximum permitted value for note number, we add the <code>if</code> command to check whether the note number is greater than 7. If it is, the code sets it to 7—problem solved.</p>
<p class="indent">The <code>play tone</code> block accesses the item in the <code>notes</code> array at the position of the value of <code>note number</code> and plays it for 1/8 of a beat.</p>
<h3 class="h3" id="ch00lev1sec91"><span epub:type="pagebreak" id="page_73"/><strong>PROJECT: INFINITY MIRROR</strong></h3>
<div class="image"><img alt="Image" src="../images/common3.jpg"/></div>
<p class="noindent">This seemingly magical mirror (<a href="ch03.xhtml#ch3fig8">Figure 3-8</a>) is guaranteed to impress any visiting mad scientists. Built into a small picture frame, the mirror looks much deeper than it really is.</p>
<div class="image" id="ch3fig8"><img alt="Image" src="../images/03fig08.jpg"/></div>
<p class="figcap"><em>Figure 3-8: A micro:bit-controlled infinity mirror</em></p>
<p class="indent">Your micro:bit will control a strip of 30 LEDs mounted inside a picture frame, and we’ll put some reflective film on either side of the LEDs, allowing you to create interesting light effects.</p>
<p class="indent">You can see a video of this project in operation at <em><a href="https://www.youtube.com/watch?v=-4Ud47OkIyY">https://www.youtube.com/watch?v=-4Ud47OkIyY</a></em>.</p>
<div class="note">
<p class="notep"><span class="yellow"><strong>NOTE</strong></span> <em>This project is a little tricky because the reflective film can be difficult to smooth out. If you stick with it, though, the effect is worth it!</em></p>
</div>
<h4 class="h4" id="ch00lev1sec92"><strong>What You’ll Need</strong></h4>
<p class="noindent">For this project, you’ll need the following items:</p>
<p class="noindentint"><strong><span class="blue">Micro:bit</span></strong></p>
<p class="noindentin"><strong><span class="blue">0.5 m Addressable LED Strip (NeoPixels)</span></strong> One WS2812B RGB 5050 SMD Strip should have 60 LEDs per meter and be 0.5 meters long, with self-adhesive backing.</p>
<p class="noindentin"><strong><span class="blue">3 × Alligator clip to male jumper cables</span></strong> To connect the micro:bit to the LED strip</p>
<p class="noindentin"><span epub:type="pagebreak" id="page_74"/><strong><span class="blue">Monk Makes Power for micro:bit</span></strong> To power the micro:bit and LED strip. Note that USB power will not provide enough current for this project and a AAA battery pack will provide enough power only if the batteries are very fresh.</p>
<p class="noindentin"><strong><span class="blue">6V DC wall wart power adapter</span></strong> To provide enough power for the LEDs. The power adapter should have a DC barrel jack plug on the end. (See “Powering Your Micro:bit” on <a href="app01.xhtml#page_248">page 248</a>.)</p>
<p class="noindentin"><strong><span class="blue">Deep 7 × 5-inch picture frame</span></strong> See additional information about the picture frame below. You’ll need one with plastic spacers, which a deep frame should contain.</p>
<p class="noindentin"><strong><span class="blue">Two 7 × 5-inch pieces of reflective window film</span></strong> Samples of reflective window film</p>
<p class="noindentin"><strong><span class="blue">Craft knife</span></strong> To cut the reflective film and make a slot in the picture frame spacer for the LED strip’s wires</p>
<p class="noindentin"><strong><span class="blue">Soapy water</span></strong> To clean the glass and attach the film</p>
<p class="noindentin"><strong><span class="blue">Ruler or plastic card</span></strong> To use as a squeegee</p>
<p class="noindentinb"><strong><span class="blue">Adhesive tape</span></strong> To remove the backing film from the reflective window film</p>
<p class="indent">Look for a 7 × 5-inch (17.5 × 12.5 cm) picture frame that has an insert designed for 6 × 4-inch photos. The important thing about the frame is that it has sufficient depth, so look for a frame like the one shown in <a href="ch03.xhtml#ch3fig9">Figure 3-9a–b</a>. The one I used was 1.25 inches deep. Also make sure that there’s glass at the front of the frame. Behind the glass, there should be a plastic spacer (on which we’re going to stick the LED strip) and then the backboard.</p>
<div class="image" id="ch3fig9"><img alt="Image" src="../images/03fig09.jpg"/></div>
<p class="figcap"><em>Figure 3-9: A deep photo frame for the infinity mirror: (a) front and (b) with the back removed</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_75"/>The reflective film reflects light, so it acts like a mirror. It normally comes in large rolls for fitting to the windows of a building. Luckily for us, the people who sell this film also usually offer small samples of the material, which are plenty big enough for our needs. You’ll find it most easily online. Search on eBay or Amazon by entering the phrase <em>silver reflective mirror window film</em> and then look through the listings until you find someone who offers sample sizes.</p>
<p class="indent">You’re going to need two pieces that are at least 7 × 5 inches, but I recommend getting extra; attaching the film to the glass of the photo frame and removing the bubbles is a little tricky, so it’s a good idea to have a few spare sheets in case your first attempts fail.</p>
<p class="indent">The easiest place to find the addressable LED strips is on eBay, but it’s also sold through hardware sites like Adafruit and SparkFun. Use the search term <em>WS2812B RGB 5050 LED Strip</em>. You’ll want to buy a strip with 60 LEDs per meter. You’ll need half a meter for this project, so 30 LEDs in total. These LED strips come in two varieties: waterproof (for outside use) or with a self-adhesive backing. You need the type with the adhesive backing.</p>
<h4 class="h4" id="ch00lev1sec93"><strong>Construction</strong></h4>
<p class="noindent">Now that you have your materials, we’ll attach the LEDs and reflective film to the frame. After we program the LEDs, the light will appear to go back into the frame forever, creating the illusion that the frame is deeper than it is.</p>
<ol>
<li class="noindent">It’s worth making sure the LED strip works with your micro:bit before you go through the trouble of constructing the hardware for the project. To test it, connect the LED strip to the micro:bit using the three alligator to jumper cables.
<p class="indent">Note that it’s also possible to connect the strip using male-to-male jumper wires and normal alligator clips.</p>
<p class="indent">Also attach the DC power adapter and Monk Makes Power for micro:bit board, as shown in <a href="ch03.xhtml#ch3fig10">Figure 3-10</a>.</p>
<div class="image" id="ch3fig10"><span epub:type="pagebreak" id="page_76"/><img alt="Image" src="../images/03fig10.jpg"/></div>
<p class="figcap"><em>Figure 3-10: Testing the LED strip with a micro:bit</em></p>
<p class="indent">The pins of the alligator to jumper pin cables will fit into the three-way connector attached to the LED strip. Your LED strip may have differently colored wires than the ones shown in <a href="ch03.xhtml#ch3fig10">Figure 3-10</a>, so it’s best to look at the strip itself to see where the wires are soldered to it. One wire will be marked GND; connect this to the GND connection of the micro:bit. A second wire will be marked 5V; connect this to 3V on the micro:bit. The final connection, in the middle, will either be marked DIN (Data In) or have an arrow pointing toward the LED. Connect this to pin 0 of the micro:bit.</p></li>
<li class="noindent">Got to <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em> and click the link for <strong>Magic Mirror</strong>. Click <strong>Download</strong> to download the code and then copy the hex file onto your micro:bit. If you get stuck, head back to “Programming the Micro:bit” on <a href="ch01.xhtml#page_11">page 11</a>, where we discuss the process of getting programs onto your micro:bit in full.
<p class="indent">If you prefer to use Python, then download the code from the same website. For instructions for downloading and using the book’s examples, see “Downloading the Code” on <a href="ch01.xhtml#page_34">page 34</a>. The Python file for this project is <em>ch_03_Magic_Mirror.py</em>.</p></li>
<li class="noindent">Once you’ve loaded the program onto your micro:bit, you should see LEDs blink on and off at random.
<p class="indent"><a href="ch03.xhtml#ch3fig11">Figure 3-11</a> shows how the infinity mirror is constructed from the picture frame.</p>
<div class="image" id="ch3fig11"><span epub:type="pagebreak" id="page_77"/><img alt="Image" src="../images/03fig11.jpg"/></div>
<p class="figcap"><em>Figure 3-11: How the infinity mirror is constructed</em></p>
<p class="indent">The following steps will lead you through this part of the project build.</p></li>
<li class="noindent">Take the photo frame apart and remove the plastic insert. Using a craft knife, carefully cut out a slot in one corner of the insert, as shown in <a href="ch03.xhtml#ch3fig12">Figure 3-12</a>, for the cables to the LED strip to go through.
<div class="note">
<p class="notep"><span class="red"><strong>WARNING</strong></span> <em>Craft knives can be very sharp, so be careful and ask an adult for help.</em></p>
</div>
<div class="image" id="ch3fig12"><img alt="Image" src="../images/03fig12.jpg"/></div>
<p class="figcap"><em>Figure 3-12: Cutting a groove for the wires in the plastic insert</em></p></li>
<li class="noindent">Without removing the backing tape, lay the LED strip around the edge of the plastic insert. If it’s not long enough, you can stretch it across the corners, as shown in <a href="ch03.xhtml#ch3fig13">Figure 3-13</a>. When <span epub:type="pagebreak" id="page_78"/>you’ve made sure it fits, peel off the backing film and fix the LED strip to the inside of the insert.
<div class="image" id="ch3fig13"><img alt="Image" src="../images/03fig13.jpg"/></div>
<p class="figcap"><em>Figure 3-13: Attaching the LED strip to the plastic insert</em></p></li>
<li class="noindent">Now set the insert aside. The next step is to attach the reflective film to the glass. Carefully remove the frame’s glass and wash it in soapy water. Dry one side and set it down with the wet side up.
<p class="indent">Pick up the reflective film. There will be a backing sheet of transparent plastic on the adhesive side of the film. To separate this thin transparent layer, put adhesive tape on both sides of the film and pull apart (<a href="ch03.xhtml#ch3fig14">Figure 3-14</a>).</p>
<div class="image" id="ch3fig14"><img alt="Image" src="../images/03fig14.jpg"/></div>
<p class="figcap"><em>Figure 3-14: Removing the plastic backing from the reflective window film</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_79"/>Place the reflective film adhesive side down onto the wet glass. Using a plastic card or ruler, push the bubbles between the film and glass to the edge of the glass to remove them (<a href="ch03.xhtml#ch3fig15">Figure 3-15</a>).</p>
<div class="image" id="ch3fig15"><img alt="Image" src="../images/03fig15.jpg"/></div>
<p class="figcap"><em>Figure 3-15: Removing bubbles from the reflective window film</em></p></li>
<li class="noindent">Let the film dry for about an hour. Then flip the glass over and use a craft knife to trim the film to the same size as the glass (<a href="ch03.xhtml#ch3fig16">Figure 3-16</a>).
<div class="image" id="ch3fig16"><img alt="Image" src="../images/03fig16.jpg"/></div>
<p class="figcap"><em>Figure 3-16: Trimming the reflective window film</em></p></li>
<li class="noindent"><span epub:type="pagebreak" id="page_80"/>Lay the backboard of the frame on your second piece of reflective film and cut the film to the same size as the backing frame (<a href="ch03.xhtml#ch3fig17">Figure 3-17</a>). You don’t need to remove the protective film or stick the film to the board unless the film does not lie flat when you put the frame back together.
<div class="image" id="ch3fig17"><img alt="Image" src="../images/03fig17.jpg"/></div>
<p class="figcap"><em>Figure 3-17: Trimming the reflective window film for the backboard</em></p></li>
<li class="noindent">Now it’s time to assemble the frame.
<p class="indent">Put the glass back into the frame with the glass side facing out. This will protect the film and make the mirror look better (<a href="ch03.xhtml#ch3fig18">Figure 3-18a</a>). If your picture frame included a thin piece of cardboard meant to be used with a smaller print, you can insert this after the glass.</p>
<p class="indent">Next, put the plastic insert back into the frame, allowing the cable to escape through one corner (<a href="ch03.xhtml#ch3fig18">Figure 3-18b</a>). If the insert has a wider flat side designed to support the photo, this should face away from the glass.</p>
<p class="indent"><span epub:type="pagebreak" id="page_81"/>Finally, place the cardboard back onto the frame, allowing the cable to escape through one corner (<a href="ch03.xhtml#ch3fig18">Figure 3-18c</a>). Fix the back in place and flip the finished frame over (<a href="ch03.xhtml#ch3fig18">Figure 3-18d</a>).</p>
<div class="image" id="ch3fig18"><img alt="Image" src="../images/03fig18.jpg"/></div>
<p class="figcap"><em>Figure 3-18: Reassembling the frame</em></p></li>
<li class="noindent">Reattach your micro:bit, and your magic mirror should spring into life.</li>
</ol>
<h4 class="h4" id="ch00lev1sec94"><strong>Code</strong></h4>
<p class="noindent">We want to program the LEDs to blink on and off at random. To do this, the code picks one of the LEDs at random, then generates a random color and sets the LED to that color.</p>
<h5 class="h5" id="ch00lev1sec95"><strong>Blocks Code</strong></h5>
<p class="noindent">Here is the Blocks code for the project.</p>
<div class="image"><span epub:type="pagebreak" id="page_82"/><img alt="Image" src="../images/f0082-01.jpg"/></div>
<p class="indent">When using addressable LEDs (called NeoPixels in the Blocks code), you need to assign the <code>NeoPixel at</code> block to a variable, which we have called <code>leds</code>, in your <code>on start</code> block. You must supply the <code>NeoPixel at</code> block with the pin used to control the LEDs. In this case, we’ll use pin P0. Then specify the number of LEDs on the strip, which is 30 in our case. Finally, tell <code>NeoPixel at</code> how to define the colors. In this case, that’s the standard RGB format.</p>
<p class="indent">We again use a <code>forever</code> block to keep this code running continuously. In the <code>forever</code> block, we start by generating a random number between 0 and 29 using the <code>pick random</code> block and assign this number to the variable <code>led</code>. This selects one of the LEDs. The <code>color</code> variable is then assigned random amounts (between 0 and 255) of red, green, and blue.</p>
<p class="indent">The <code>show</code> block updates the LED strip with the change we’ve just made.</p>
<p class="indent">Try experimenting with the code to change the LED colors.</p>
<h5 class="h5" id="ch00lev1sec96"><strong>MicroPython Code</strong></h5>
<p class="noindent">Here’s the MicroPython version of the code.</p>
<div class="programs1"><span class="green">from</span> microbit <span class="green">import</span> <span class="purple">*</span><br/><span class="green">import</span> neopixel<span class="purple">,</span> random<br/><br/>leds <span class="purple">=</span> neopixel<span class="purple">.</span>NeoPixel<span class="purple">(</span>pin0<span class="purple">,</span> <span class="blue1">30</span><span class="purple">)</span><br/><span class="green"><span epub:type="pagebreak" id="page_83"/>while True</span><span class="purple">:</span><br/>    led <span class="purple">=</span> random<span class="purple">.</span>randint(<span class="blue1">0</span>, <span class="blue1">29</span>)<br/>    color <span class="purple">=</span> <span class="purple">(</span>random<span class="purple">.</span>randint<span class="purple">(</span><span class="blue1">0</span><span class="purple">,</span> <span class="blue1">255</span><span class="purple">),</span> random<span class="purple">.</span>randint<span class="purple">(</span><span class="blue1">0</span><span class="purple">,</span> <span class="blue1">255</span><span class="purple">),</span> random.randint<span class="purple">(</span><span class="blue1">0</span><span class="purple">,</span> <span class="blue1">255</span><span class="purple">))</span><br/>    leds<span class="purple">[</span>led<span class="purple">]</span> <span class="purple">=</span> color<br/>    leds<span class="purple">.</span>show<span class="purple">()</span><br/>    sleep<span class="purple">(</span><span class="blue1">5</span><span class="purple">)</span></div>
<p class="indent">This code works in much the same way as the Blocks version. Notice that you have to include the neopixel and random libraries at the top of the program so that you can access the LED strip and generate the random numbers.</p>
<p class="indent">The MicroPython neopixel library first defines the LED strip as using pin 0, which is the micro:bit pin we attached it to, and having a length of 30 LEDs. It does this using the command <code>leds = neopixel.NeoPixel(pin0, 30)</code>.</p>
<p class="indent">The <code>while</code> loop then does the same job as the <code>forever</code> block in the Blocks version, picking an LED at random and setting it to a random color.</p>
<h4 class="h4" id="ch00lev1sec97"><strong>How It Works</strong></h4>
<p class="noindent"><a href="ch03.xhtml#ch3fig19">Figure 3-19</a> shows how the infinity mirror works.</p>
<div class="image" id="ch3fig19"><img alt="Image" src="../images/03fig19.jpg"/></div>
<p class="figcap"><em>Figure 3-19: Light bouncing around in the infinity mirror project</em></p>
<p class="indent">Light from the LEDs heads off in all directions (A in <a href="ch03.xhtml#ch3fig19">Figure 3-19</a>). Some of that light travels up, toward the front of the frame. The mirror film reflects some—but not all—of this light back down to the mirror at the back of the frame (B). The rest of the light escapes from the frame (C), and some of it finds its way to the back of your eye, where it forms an image.</p>
<p class="indent"><span epub:type="pagebreak" id="page_84"/>Meanwhile, some of the light that found its way down to the mirror (B) will bounce back up toward the front glass again (D). Some of this light will escape the picture frame entirely and find its way to your eye, and the rest will perform yet another bounce. It’s this bouncing back and forth of the light that causes an endless succession of LEDs to seem to disappear into the mirror, getting dimmer each time a proportion of the light is lost.</p>
<h3 class="h3" id="ch00lev1sec98"><strong>SUMMARY</strong></h3>
<p class="noindent">In this chapter, you have learned how to both measure and make light with your micro:bit. In <a href="ch04.xhtml#ch04">Chapter 4</a>, the Mad Scientist turns their attention to magnetism.</p>
</body></html>