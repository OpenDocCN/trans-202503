<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="en" xml:lang="en">
<head>
<title>1 MULTIPLE BUTTONS WITH ONE ANALOG INPUT</title>
<meta content="text/html; charset=utf-8" http-equiv="default-style"/>
<link href="../styles/stylesheet.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:67118b6d-3178-4c1c-99a1-6e412fe74179" name="Adept.expected.resource"/>
</head>
<body epub:type="bodymatter">
<section aria-labelledby="ch1" epub:type="chapter" role="doc-chapter">
<header>
<h1 class="CHAPTER" id="ch1">
<span class="CN"><span aria-label=" Page 1. " epub:type="pagebreak" id="pg_1" role="doc-pagebreak"/><samp class="SANS_Futura_Std_Bold_Condensed_B_11">1</samp></span>
<span class="CT"><samp class="SANS_Dogma_OT_Bold_B_11">MULTIPLE BUTTONS WITH ONE ANALOG INPUT</samp></span>
</h1>
</header>
<figure class="opener"><img alt="" class="opener" src="../images/opener-img.png"/>
</figure>
<p class="INTRO">Rather than using multiple digital inputs for multiple buttons, you can read many buttons with just one analog input pin. This not only reduces the number of input/output (I/O) pins used on your Arduino but can also save you money since you won’t need any external integrated circuits (ICs), such as shift registers or port expanders.</p>
<p class="TX">In this chapter, you’ll learn to:</p>
<ul class="ul">
<li class="BL">Use voltage dividers and buttons to create different voltages, differentiating buttons connected to an analog-to-digital converter (ADC) pin</li>
<li class="BL">Read three or six buttons with one analog input</li>
<li class="BL">Build a 12-button keypad that can be read with one analog input</li>
</ul>
<section aria-labelledby="sec1" epub:type="division">
<h2 class="H1" id="sec1"><span id="h1-6"/><span aria-label=" Page 2. " epub:type="pagebreak" id="pg_2" role="doc-pagebreak"/><samp class="SANS_Futura_Std_Bold_B_11">Voltage Dividers</samp></h2>
<p class="TNI">The multiple-button method used in this chapter is based on your Arduino’s analog-to-digital converter (ADC) pins, which return a value relative to the voltage being connected to the ADC pin. Recall that your Arduino Uno or compatible board has six ADC pins, as shown in <a href="chapter1.xhtml#fig1-1">Figure 1-1</a>.</p>
<figure class="IMG"><img alt="A PHOTO OF THE ARDUINO UNO’S ANALOG INPUT PINS" class="img4" id="fig1-1" src="../images/fig1-1.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-1: Analog inputs on the Arduino Uno</samp></p></figcaption>
</figure>
<p class="TX">To build circuits that allow for reading up to 12 buttons at once via a single ADC pin, you’ll need to use <i>voltage division</i>: the process of using two or more resistors to reduce a larger voltage to multiple smaller voltages, which the Arduino can read one at a time via an analog input pin. <a href="chapter1.xhtml#fig1-2">Figure 1-2</a> shows how you’d use two resistors for this purpose.</p>
<figure class="IMG"><img alt="A SCHEMATIC OF A BASIC VOLTAGE DIVIDER" class="img4" id="fig1-2" src="../images/fig1-2.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-2: The schematic for a basic voltage divider</samp></p></figcaption>
</figure>
<p class="TX">You can calculate the output voltage (V<sub>out</sub>) with the following formula:</p>
<figure class="IMG1"><img alt="" class="img1" src="../images/pg2-1.png"/>
</figure>
<p class="TX">Substituting resistors of the same value and any voltage will result in an output voltage V<sub>out</sub> that is half the input voltage V<sub>in</sub>. For example, if both R1 and R2 are 1 kΩ and you have a 5 V input voltage, the calculation is V<sub>out</sub> = 5 (1,000 / (1,000 + 1,000)), giving you a V<sub>out</sub> of 2.5 V.</p>
<p class="TX">Resistors don’t have an exact value; the more accurate the resistor, the more difficult it is to manufacture. You can choose between resistors of various tolerances, such as 5 percent or 1 percent. For example, a 1 kΩ, 1 percent resistor has a value between 990 and 1,010 Ω. When building voltage dividers or circuits in general, always try to use resistors with a 1 percent tolerance—they aren’t much more expensive than 5 percent resistors, and your results will be more accurate.</p>
<p class="TX">When building a voltage divider, ensure that your resistors can handle the power you plan to run through them. For example, if you’re using 0.25 W resistors and need to divide 24 V DC into 12 V, you can draw only 20 mA through the divider at most. Use the formula <i>W</i> = <i>V</i> <span class="symbol">×</span> <i>A</i> (Watts = Volts (DC) <span class="symbol">×</span> Amps (current)) to help you calculate how much power is used.</p>
<p class="TX">Combining the example voltage divider in <a href="chapter1.xhtml#fig1-2">Figure 1-2</a> with two buttons results in the circuit shown in <a href="chapter1.xhtml#fig1-3">Figure 1-3</a>.<span aria-label=" Page 3. " epub:type="pagebreak" id="pg_3" role="doc-pagebreak"/></p>
<figure class="IMG"><img alt="A SCHEMATIC FOR THE VOLTAGE DIVIDER CONTROLLED BY TWO BUTTONS" class="img5" id="fig1-3" src="../images/fig1-3.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-3: A voltage divider with two buttons</samp></p></figcaption>
</figure>
<p class="TX">When you press the first button, the voltage at point A should be 2.5 V DC, as the current flows from the 5 V source and is divided by the two resistors. When you press the second button, the voltage measured at point B should be 0 V DC, as B is connected directly to GND. If you connect points A and B to an analog input, you should be able to detect which button has been pressed, as the values returned by the ADC will be different for each button (in theory, the values should be 512 for button 1 and 0 for button 2). You’re reading two buttons with only one input!</p>
<p class="TX">If you press two or more buttons at the same time, another voltage—determined by the combination of resistor dividers relative to the buttons pressed—should be returned to the ADC. The simplest way to determine the value is to build the circuit and test for yourself. With voltage division, you can use a series of buttons and resistors of the same value to generate different output voltages that your Arduino’s analog input can read, enabling you to differentiate between each button.</p>
<p class="HeadProject"><span id="h1-7"/><samp class="SANS_Futura_Std_Heavy_B_21">Project #1: Three Buttons with One Analog Input</samp></p>
<p class="TNI">Let’s start with a simple example of multiple button use: reading three buttons with one analog input. You’ll need the following parts for this project:</p>
<ul class="ul">
<li class="BL">An Arduino Uno or compatible board and USB cable</li>
<li class="BL">Three 1 kΩ, 0.25 W, 1 percent resistors</li>
<li class="BL">One 10 kΩ, 0.25 W, 1 percent resistor</li>
<li class="BL">Three tactile buttons</li>
<li class="BL">A solderless breadboard</li>
<li class="BL">Male-to-male jumper wires</li>
</ul>
<p class="TX">Assemble the circuit as shown in <a href="chapter1.xhtml#fig1-4">Figure 1-4</a> on the solderless breadboard and connect the points labeled 5V, GND, and A0 to the Arduino’s 5V, GND, and A0 pins, respectively.<span aria-label=" Page 4. " epub:type="pagebreak" id="pg_4" role="doc-pagebreak"/></p>
<figure class="IMG"><img alt="A SCHEMATIC FOR PROJECT #1" class="img5" id="fig1-4" src="../images/fig1-4.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-4: The circuit for Project #1</samp></p></figcaption>
</figure>
<p class="TX">Now enter and upload the code for Project #1 to your Arduino. Wait a moment; then open the Serial Monitor in the Arduino IDE and start pressing the buttons one at a time. When you aren’t pressing any buttons, the value returned by the ADC should hover around 1,010. Experiment with pressing buttons 1, 2, and 3 to return different values, as shown in <a href="chapter1.xhtml#fig1-5">Figure 1-5</a>.</p>
<figure class="IMG"><img alt="A SCREENSHOT OF A SERIAL MONITOR DISPLAYING THE EXAMPLE PROJECT #1 OUTPUT" class="img6" id="fig1-5" src="../images/fig1-5.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-5: Example output from Project #1</samp></p></figcaption>
</figure>
<p class="TX">Let’s take a look at the code to see how this works:</p>
<span id="pro-1"/>

<pre><code>// Project #1 - Reading three buttons from one analog input

void setup()
{
    Serial.begin(9600);
}

void loop()
{
  <span aria-label="annotation1" class="CodeAnnotationHang1">❶</span> int sensorValue = analogRead(A0);
  <span aria-label="annotation2" class="CodeAnnotationHang1">❷</span> Serial.println(sensorValue);
    delay(100);
}
</code></pre>

<p class="TX"><span aria-label=" Page 5. " epub:type="pagebreak" id="pg_5" role="doc-pagebreak"/>The code in Project #1 takes the value measured by analog pin A0 <span aria-label="annotation1" class="CodeAnnotationCode">❶</span> and displays it on the Serial Monitor <span aria-label="annotation2" class="CodeAnnotationCode">❷</span>. This is to demonstrate the different analog values generated by the three-button circuit. After you upload the code, open the Serial Monitor and start pressing buttons. The example returned a value between 700 and 704 when button 1 was pressed, between 383 and 385 when button 2 was pressed, and 0 when button 3 was pressed. Your values may vary slightly because of the tolerance of the resistors.</p>
<p class="TX">As you press buttons, the current flows through at least one resistor as your R1 and, depending on the button pressed, through none or some of the resistors, which act as voltage dividers.</p>
<p class="TX">Using the resistor divider formula, you can calculate that pressing button 1 gives an R1 value of 1 kΩ and an R2 value of 2 kΩ (the sum of the resistors below the junction with the button). Using V<sub>out</sub> = 5 (2,000 / (1,000 + 2,000)), the theoretical voltage presented to the ADC is 3.33 V. If you press button 2, V<sub>out</sub> = 5 (1,000 / (1,000 + 2,000)) results in 1.66 V. If you press button 3, V<sub>out</sub> = 5 (0 / (3,000 + 0)) results in 0 V, as the ADC is simply connecting straight to GND.</p>
<p class="TX">Finally, if you press no buttons, the value the ADC returns should hover above 1,010. The project enables this using the 10 kΩ pullup resistor in the circuit, which bridges the 5 V supply to the analog input. Without this resistor, the ADC would “float,” reporting random values that may fall into the ranges of the other buttons. This is important, as we need a constant value range to be returned when no buttons are pressed.</p>
<p class="TX">In practice, the values returned by the ADC will vary a little. For example, the 5V pin on the Arduino (if powered via USB) measures slightly less, as some voltage is lost through the microcontroller, which affects the calculation in the ADC code. Always test your code with the Arduino powered by your intended power supply (USB or external DC power) to ensure accuracy with button-reading code.</p>
<p class="TX">Now that you’ve experimented with three buttons, let’s try a more complex design.</p>
<p class="HeadProject"><span id="h1-8"/><samp class="SANS_Futura_Std_Heavy_B_21">Project #2: Six Buttons with One Analog Input</samp></p>
<p class="TNI">This project reads six buttons from one analog pin, with an improved sketch for button status reporting. You’ll need the following parts:</p>
<ul class="ul">
<li class="BL">An Arduino Uno or compatible board and USB cable</li>
<li class="BL">Six 1 kΩ, 0.25 W, 1 percent resistors</li>
<li class="BL">One 1 kΩ, 0.25 W, 1 percent resistor</li>
<li class="BL">Six tactile buttons</li>
<li class="BL">A solderless breadboard</li>
<li class="BL">Male-to-male jumper wires</li>
</ul>
<p class="TX"><span aria-label=" Page 6. " epub:type="pagebreak" id="pg_6" role="doc-pagebreak"/>Assemble the circuit as shown in <a href="chapter1.xhtml#fig1-6">Figure 1-6</a> on the solderless breadboard and connect the points labeled 5V, GND, and A0 to the Arduino’s 5V, GND, and A0 pins, respectively.</p>
<figure class="IMG"><img alt="THE SCHEMATIC FOR PROJECT #2’S CIRCUIT" class="img7" id="fig1-6" src="../images/fig1-6.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-6: The circuit for Project #2</samp></p></figcaption>
</figure>
<p class="TX">Now enter and upload the following sketch to your Arduino:</p>
<span id="pro-2"/>

<pre><code>// Project #2 - Reading six buttons from one analog input

void setup()
{
    Serial.begin(9600);
}

<span aria-label="annotation1" class="CodeAnnotationHang">❶</span> int analogButton()
// Returns number of button pressed by comparing ADC value
{
    int adcValue;
    int button;
  <span aria-label="annotation2" class="CodeAnnotationHang1">❷</span> adcValue = analogRead(A0);
    if (adcValue&gt;1000) {button = 0;}
    else if (adcValue&gt;857 &amp;&amp; adcValue&lt;861) {button = 1;}
    else if (adcValue&gt;696 &amp;&amp; adcValue&lt;700) {button = 2;}
    else if (adcValue&gt;535 &amp;&amp; adcValue&lt;539) {button = 3;}
    else if (adcValue&gt;371 &amp;&amp; adcValue&lt;375) {button = 4;}
    else if (adcValue&gt;199 &amp;&amp; adcValue&lt;203) {button = 5;}
  <span aria-label="annotation3" class="CodeAnnotationHang1">❸</span> else if (adcValue&gt;=0 &amp;&amp; adcValue&lt;16)   {button = 6;}
  <span aria-label="annotation4" class="CodeAnnotationHang1">❹</span> return button;
}
void loop()
{
  <span aria-label="annotation5" class="CodeAnnotationHang1">❺</span> switch(analogButton()) // Read button status
  <span aria-label="annotation6" class="CodeAnnotationHang1">❻</span> {
        case 0 : Serial.println("No button pressed"); break;
        case 1 : Serial.println("Button 1 pressed"); break;
        case 2 : Serial.println("Button 2 pressed"); break;
        case 3 : Serial.println("Button 3 pressed"); break;
        case 4 : Serial.println("Button 4 pressed"); break;
<span aria-label=" Page 7. " epub:type="pagebreak" id="pg_7" role="doc-pagebreak"/>        case 5 : Serial.println("Button 5 pressed"); break;
        case 6 : Serial.println("Button 6 pressed"); break;
    }
    delay(250);
}
</code></pre>

<p class="TX">To simplify using the button circuit, the custom <samp class="SANS_TheSansMonoCd_W5Regular_11">analogButton()</samp> function <span aria-label="annotation1" class="CodeAnnotationCode">❶</span> returns the number of the button being pressed, or 0 if nothing is pressed. The function takes the reading from analog pin A0 <span aria-label="annotation2" class="CodeAnnotationCode">❷</span> and compares it against the expected ranges returned for each button press <span aria-label="annotation3" class="CodeAnnotationCode">❸</span>. The sketch returns the button number as the result of the <samp class="SANS_TheSansMonoCd_W5Regular_11">analogButton()</samp> function <span aria-label="annotation4" class="CodeAnnotationCode">❹</span>. The custom function in the main loop checks for a button press <span aria-label="annotation5" class="CodeAnnotationCode">❺</span>, while a <samp class="SANS_TheSansMonoCd_W5Regular_11">switch…case</samp> function acts on different button presses <span aria-label="annotation6" class="CodeAnnotationCode">❻</span>.</p>
<p class="TX">Your required ranges from the analog input will vary; use the sketch from Project #1 to determine the exact ranges required for use in this project.</p>
<p class="HeadProject"><span id="h1-9"/><samp class="SANS_Futura_Std_Heavy_B_21">Project #3: A 12-Button Keypad with One Analog Input</samp></p>
<p class="TNI">This project expands the circuit in Project #2 to 12 buttons to create a larger final design that uses its own Arduino library. Using this library reduces the code required in the main sketch used to read the buttons. It’s possible to build this circuit on a solderless breadboard, but I recommend you download the PCB files for this project and make your own permanent version.</p>
<p class="TX">If you’re using the breadboard, you’ll need the following parts:</p>
<ul class="ul">
<li class="BL">An Arduino Uno or compatible board and USB cable</li>
<li class="BL">Twelve 1 kΩ, 0.25 W, 1 percent resistors</li>
<li class="BL">One 10 kΩ, 0.25 W, 1 percent resistor</li>
<li class="BL">Twelve tactile buttons</li>
<li class="BL">A solderless breadboard</li>
<li class="BL">Male-to-male jumper wires</li>
</ul>
<p class="TX">If you’re using the PCB, you’ll need the following:</p>
<ul class="ul">
<li class="BL">An Arduino Uno or compatible board and USB cable</li>
<li class="BL">Twelve 1 kΩ, 0.25 W, 1 percent resistors</li>
<li class="BL">One 1 kΩ, 0.25 W, 1 percent resistor</li>
<li class="BL">Twelve 6 <span class="symbol">×</span> 6 <span class="symbol">×</span> 4.3 mm tactile buttons</li>
<li class="BL">1 <span class="symbol">×</span> 3 inline 2.54 mm header pins</li>
<li class="BL">Male-to-female jumper wires</li>
</ul>
<p class="TX"><a href="chapter1.xhtml#fig1-7">Figure 1-7</a> shows the schematic for this project.<span aria-label=" Page 8. " epub:type="pagebreak" id="pg_8" role="doc-pagebreak"/></p>
<figure class="IMG"><img alt="THE SCHEMATIC FOR PROJECT #3" class="img1" id="fig1-7" src="../images/fig1-7.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-7: The schematic for Project #3</samp></p></figcaption>
</figure>
<p class="TX">If you’re building the PCB circuit, the parts are labeled so you can easily position the components on the PCB, as shown in <a href="chapter1.xhtml#fig1-8">Figure 1-8</a>.</p>
<figure class="IMG"><img alt="THE TOP SIDE OF THE PCB FOR PROJECT #3" class="img5" id="fig1-8" src="../images/fig1-8.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-8: The top of the PCB for Project #3</samp></p></figcaption>
</figure>
<p class="TX">Fit and solder the resistors and then the buttons. In general, when assembling circuits on PCBs, always start with the lowest-height parts first, and then work toward the largest or bulkiest items. The inline header pins are usually sold in strips of 40 pins, so you’ll need to trim off a 3-pin section to use with this project.</p>
<p class="TX">Once assembled, your project should resemble the board shown in <a href="chapter1.xhtml#fig1-9">Figure 1-9</a>.</p>
<figure class="IMG"><img alt="THE COMPLETED TOP SIDE OF THE PROJECT #3 PCB" class="img5" id="fig1-9" src="../images/fig1-9.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-9: The completed Project #3 PCB</samp></p></figcaption>
</figure>
<p class="TX"><span aria-label=" Page 9. " epub:type="pagebreak" id="pg_9" role="doc-pagebreak"/>Now connect your circuit to the Arduino via the 5V, GND, and A0 pins, as in <a href="chapter1.xhtml#fig1-10">Figure 1-10</a>.</p>
<figure class="IMG"><img alt="A PHOTO OF A KEYPAD CONNECTED TO THE ARDUINO UNO" class="img7" id="fig1-10" src="../images/fig1-10.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-10: Keypad connected to the Arduino Uno</samp></p></figcaption>
</figure>
<p class="TX">Next, determine the analog values for each button to insert into the library’s source file by uploading the sketch from Project #1. Open the Serial Monitor and press each button in turn, noting the value with the monitor. You can use these figures to make ranges for the library for this project.</p>
<p class="TX">To simplify using the keypad, install the following analogkeypad library, whose three files are listed next. (For a refresher on writing and installing your own Arduino library, see <span class="Xref"><a href="appendix.xhtml">Appendix A</a></span>.) The following code is the source file; use the sketch from Project #1 and the keypad for this project to determine your <samp class="SANS_TheSansMonoCd_W5Regular_11">ADCvalue</samp> ranges.</p>

<pre><code>// analogkeypad.cpp source file

#include "Arduino.h"
#include "analogkeypad.h"

analogkeypad::analogkeypad()
{
}

int analogkeypad::readKeypad()
{
    int adcValue;
    int button;
    adcValue = analogRead(A0);
    if (adcValue&gt;<var>1000</var>) {button = 0;}
    else if (adcValue&gt;<var>941</var> &amp;&amp; adcValue&lt;<var>944</var>) {button = 1;}
    else if (adcValue&gt;<var>863</var> &amp;&amp; adcValue&lt;<var>868</var>) {button = 2;}
<span aria-label=" Page 10. " epub:type="pagebreak" id="pg_10" role="doc-pagebreak"/>    else if (adcValue&gt;<var>790</var> &amp;&amp; adcValue&lt;<var>795</var>) {button = 3;}
    else if (adcValue&gt;<var>716</var> &amp;&amp; adcValue&lt;<var>720</var>) {button = 4;}
    else if (adcValue&gt;<var>643</var> &amp;&amp; adcValue&lt;<var>648</var>) {button = 5;}
    else if (adcValue&gt;<var>570</var> &amp;&amp; adcValue&lt;<var>573</var>) {button = 6;}
    else if (adcValue&gt;<var>493</var> &amp;&amp; adcValue&lt;<var>496</var>) {button = 7;}
    else if (adcValue&gt;<var>413</var> &amp;&amp; adcValue&lt;<var>418</var>) {button = 8;}
    else if (adcValue&gt;<var>325</var> &amp;&amp; adcValue&lt;<var>329</var>) {button = 9;}
    else if (adcValue&gt;<var>231</var> &amp;&amp; adcValue&lt;<var>235</var>) {button = 10;}
    else if (adcValue&gt;<var>129</var> &amp;&amp; adcValue&lt;<var>133</var>) {button = 11;}
    else if (adcValue&gt;<var>13</var> &amp;&amp; adcValue&lt;<var>18</var>) {button = 12;}
    return button;
}
</code></pre>

<p class="TX">Here’s the header file:</p>

<pre><code>// analogkeypad.h header file

#ifndef analogkeypad_h
#define analogkeypad_h

#include "Arduino.h"

class analogkeypad
{
    public:
        analogkeypad();
        int readKeypad();
    private:
        int adcValue;
        int button;
};
#endif
</code></pre>

<p class="TX">Here’s the <i>KEYWORDS.TXT</i> file:</p>

<pre><code>Analogkeypad. KEYWORD1
readKeypad.   KEYWORD2
</code></pre>

<p class="TX">With the library installed, upload the matching sketch for Project #3:</p>
<span id="pro-3"/>

<pre><code>// Project #3 - Reading 12 buttons from 1 analog input

#include &lt;analogkeypad.h&gt;
<span aria-label="annotation1" class="CodeAnnotationHang">❶</span> analogkeypad keypad;
void setup()
{
    Serial.begin(9600);
}

void loop()
{
  <span aria-label="annotation2" class="CodeAnnotationCode">❷</span> switch (keypad.readKeypad()) // Read button status
<span aria-label=" Page 11. " epub:type="pagebreak" id="pg_11" role="doc-pagebreak"/>    {
    <span aria-label="annotation3" class="CodeAnnotationCode">❸</span>  case 0 : Serial.println("No button pressed"); break;
        case 1 : Serial.println("Button 1 pressed"); break;
        case 2 : Serial.println("Button 2 pressed"); break;
        case 3 : Serial.println("Button 3 pressed"); break;
        case 4 : Serial.println("Button 4 pressed"); break;
        case 5 : Serial.println("Button 5 pressed"); break;
        case 6 : Serial.println("Button 6 pressed"); break;
        case 7 : Serial.println("Button 7 pressed"); break;
        case 8 : Serial.println("Button 8 pressed"); break;
        case 9 : Serial.println("Button 9 pressed"); break;
        case 10 : Serial.println("Button 10 pressed"); break;
        case 11 : Serial.println("Button 11 pressed"); break;
        case 12 : Serial.println("Button 12 pressed"); break;
    }
delay(250);
}
</code></pre>

<p class="TX">This sketch has the same results as Project #2 but allows for additional buttons in the main loop. It first includes the analogkeypad library <span aria-label="annotation1" class="CodeAnnotationCode">❶</span> and starts an instance of the keypad; next it retrieves the button number pressed via the library function <span aria-label="annotation2" class="CodeAnnotationCode">❷</span>. The sketch then sends the button number to the Serial Monitor in the <samp class="SANS_TheSansMonoCd_W5Regular_11">switch…case</samp> function <span aria-label="annotation3" class="CodeAnnotationCode">❸</span>.</p>
<p class="TX">Once you have uploaded the sketch, open the Serial Monitor and press the buttons in turn. This should result in output like that shown in <a href="chapter1.xhtml#fig1-11">Figure 1-11</a>.</p>
<figure class="IMG"><img alt="A SCREENSHOT OF AN EXAMPLE OUTPUT IN THE SERIAL MONITOR" class="img6" id="fig1-11" src="../images/fig1-11.png"/>
<figcaption><p class="CAP"><samp class="SANS_Futura_Std_Book_Oblique_I_11">Figure 1-11: Example output from Project #3</samp></p></figcaption>
</figure>
<p class="TX">You can use this sketch in your own projects, simply interrogating the keypad when required as you use the library and <samp class="SANS_TheSansMonoCd_W5Regular_11">readKeypad()</samp> function.</p>
<blockquote>
<p class="NOTE"><span class="NoteHead"><samp class="SANS_Dogma_OT_Bold_B_21">NOTE</samp></span></p>
</blockquote>
<p class="NOTE-TXT"><i>In your own projects that incorporate the sketches from this chapter, you can use Arduino types other than the Uno, as long as they have an analog input. If your board runs on 3.3 V instead of 5 V, use the Project #1 sketch to determine the analog values to use for your circuit before updating the custom function in Project #2 or the library used in Project #3.</i></p>
</section>
<section aria-labelledby="sec2" epub:type="division">
<h2 class="H1" id="sec2"><span id="h1-10"/><span aria-label=" Page 12. " epub:type="pagebreak" id="pg_12" role="doc-pagebreak"/><samp class="SANS_Futura_Std_Bold_B_11">Moving On</samp></h2>
<p class="TNI">In this chapter, you learned to build a circuit that allows your Arduino to read the status of one of up to 12 buttons using only one analog input pin. In the next chapter, you’ll learn another way to improve project efficiency: simultaneously reading and writing digital I/O pins using port manipulation.</p>
</section>
</section>
</body>
</html>