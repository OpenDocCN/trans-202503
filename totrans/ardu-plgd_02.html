<html><head></head><body>
<h2 class="h2" id="ch01"><span epub:type="pagebreak" id="page_25"/><strong><span class="big">1</span><br/>THE REACTION-TIME MACHINE</strong></h2>&#13;
<div class="image1"><img alt="image" src="../images/common-01.jpg"/></div>&#13;
<p class="noindent">In this chapter, I will show you how to build a time machine—that is, a Reaction-Time Machine. I’d love to say that this project will bring you “back to the future,” but alas, it won’t. The “time” it’s looking at is the time it takes you to react to a stimulus, which makes for a fun game. This project is designed to accurately measure an individual’s reaction time and provide an area for comments on the level of the individual’s performance (see <a href="ch01.xhtml#ch01fig1">Figure 1-1</a>). There is also plenty of room to personalize the game to make it even more fun for you, your friends, and your family.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_26"/><img alt="image" src="../images/f01-01.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig1"/><em>Figure 1-1: Completed Reaction-Time Machine</em></p>&#13;
<h3 class="h3" id="ch01lev1sec1"><strong>Required Tools</strong></h3>&#13;
<p class="indent">Soldering iron and solder</p>&#13;
<p class="indent">Drill and drill bits</p>&#13;
<p class="indent">Mounting tape</p>&#13;
<p class="indent">Wire cutters</p>&#13;
<h3 class="h3" id="ch01lev1sec2"><strong>Parts List</strong></h3>&#13;
<p class="noindent">This project has one of the smallest parts counts of all the projects in this book, but don’t let that attenuate its value for you. My family and friends have enjoyed playing the game repeatedly, and it’s portable, so you can take it with you to get-togethers and other events.</p>&#13;
<p class="indent">Here’s what you’ll need:</p>&#13;
<p class="indentt">One Arduino Nano or clone</p>&#13;
<p class="indento">Two SPST momentary switches (preferably one with a red button and one with a button of a different color)</p>&#13;
<p class="indent">One SPST toggle switch</p>&#13;
<p class="indent">One red LED</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_27"/>Two 10-kilohm resistors</p>&#13;
<p class="indent">One 470-ohm resistor</p>&#13;
<p class="indent">(Optional) One audible annunciator, Mallory Sonalert or similar</p>&#13;
<p class="indent">One 4×20 LCD</p>&#13;
<p class="indento">One I<sup>2</sup>C adapter, if not included with the LCD (see “<a href="ch00.xhtml#ch00lev1sec2">Affixing the I<sup>2</sup>C Board to the LCD</a>” on <a href="ch00.xhtml#page_3">page 3</a>)</p>&#13;
<div class="note">&#13;
<p class="notet"><strong><span class="bgblack">NOTE</span></strong></p>&#13;
<p class="notep"><em>I purchased a 16×2 LCD and its external I<sup>2</sup>C board separately and soldered the two together. However, many online vendors offer the same display and I<sup>2</sup>C adapter already soldered for about the same price or less than the two boards separately. Check eBay in particular</em>.</p>&#13;
</div>&#13;
<p class="indent">One 9V battery</p>&#13;
<p class="indent">One 9V battery clip</p>&#13;
<p class="indent">One 3.5 mm jack (if remote switch is used)</p>&#13;
<p class="indent">One Hammond 1591 BTCL enclosure</p>&#13;
<p class="indent">28-or 30-gauge hookup wire</p>&#13;
<p class="indent">22-gauge solid conductor wire</p>&#13;
<h3 class="h3" id="ch01lev1sec3"><strong>Downloads</strong></h3>&#13;
<p class="noindent">Before you start this project, check the following resource files for this book at <em><a href="https://www.nostarch.com/arduinoplayground/">https://www.nostarch.com/arduinoplayground/</a></em>:</p>&#13;
<p class="indentt"><strong>Sketch file</strong> <em>Reaction.ino</em></p>&#13;
<p class="indent"><strong>Drilling template for case</strong> <em>ReactionEnclosure.pdf</em></p>&#13;
<h3 class="h3" id="ch01lev1sec4"><strong>Reaction vs. Reflex</strong></h3>&#13;
<p class="noindent">People often confuse reactions and reflexes, so I will start by defining both. <em>Reflexes</em> are involuntary, automatic responses to a stimulus. In a reflex action, the stimulus bypasses the brain and travels from the source of the stimulus to the spinal cord and back to the receptor that controls the response, without any cognitive acknowledgment. (Though I know many people for whom almost all stimuli—and information—seem to bypass the brain, often just getting lost instead.) Think of the doctor hitting your knee with a patellar hammer to trigger your knee-jerk reflex.</p>&#13;
<p class="indent"><em>Reactions</em>, on the other hand, take the stimulus to the brain to be processed, and then a return reaction travels to a receptor to result in some motor action. This process takes somewhat longer than a typical reflex, though some athletes are said to have reaction times so fast that it’s possible their response is more similar to a reflex than a reaction.</p>&#13;
<div class="note">&#13;
<p class="notet"><span epub:type="pagebreak" id="page_28"/><strong><span class="bgblack">NOTE</span></strong></p>&#13;
<p class="notep">Sports Illustrated <em>has done interesting work in this area, with eye-opening articles on baseball players and other athletes who have what appear to be exceptional reaction times</em>.</p>&#13;
</div>&#13;
<h3 class="h3" id="ch01lev1sec5"><strong>How Does the Game Work?</strong></h3>&#13;
<p class="noindent">The Reaction-Time Machine game measures how long it takes an individual to press a button in response to a visual stimulus—in this case an LED. With a minor modification, you can add an auditory stimulus to the game: simply replace the LED with an audible annunciator, such as a Mallory Sonalert. Reaction time is measured in milliseconds or seconds (your choice), and it is the time between the moment the stimulus is activated and the moment the participant presses the button.</p>&#13;
<div class="box1">&#13;
<p class="boxtitle"><strong>HISTORY OF REACTION-TIME DEVICES</strong></p>&#13;
<p class="noindent">Over the years, there have been many devices to measure reaction time. One of the simplest I remember from years ago required you to keep your fingers on either side of a ruler held by another person in mid-air. When the ruler was dropped, you would see how far it traveled before you could grasp it. The distance was translated to time using the algebraic equation</p>&#13;
<div class="imageo"><img alt="image" src="../images/e0028-01.jpg"/></div>&#13;
<p class="noindent">where <em>S</em> is the distance traveled, <em>A</em> is the acceleration due to gravity, and <em>T</em> is the reaction time. After you build this project, try both the ruler test and the Reaction-Time Machine to see how close your times are between devices.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch01lev2sec1"><strong><em>Measuring Time with the Arduino Nano</em></strong></h4>&#13;
<p class="noindent">While there are many ways to measure elapsed time, this project takes advantage of the Arduino Nano’s ability to keep accurate time. Microcontrollers keep time exceptionally well, and they measure the time that elapses between one input and another with a minimum latency. In addition to timing your reactions, the Nano shows the result on an LCD.</p>&#13;
<p class="indent">The Nano does almost all of the work in this project; the other components are basically passive. After testing some early builds, I added features to the sketch to make the game more interesting and accurate. For example, I initially used a simple pushbutton to reset the Nano and start a counter. The participant would press the red stop button as soon as the LCD indicated so, and the Nano measured the time between pressing the reset and stop buttons. I found, however, that the player could anticipate the reset button being pushed and come up with some amazing reaction times.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_29"/>To prevent the player from anticipating when the stimulus is about to occur, I had the Nano start the timer on a delay instead. The version in this book generates a random delay from when the reset button is depressed, activates the stimulus after the random delay, and counts the time from the stimulus to the moment the participant responds by depressing the stop button. That solved one problem.</p>&#13;
<p class="indent">Then, one of the participants tried to jump the gun and get an early start by holding down the stop button. I solved this problem by setting a minimum reaction time in the sketch. Any time under that minimum throws an error, and the LCD displays “Jumped the Gun” to indicate that the player pressed the button too soon.</p>&#13;
<p class="indent">I used a relatively large display—4 lines with 20 characters each—so there would be enough room to display the reflex time and some commentary on the relative prowess of the player. You can make your commentary as funny or serious as you want, but it must not exceed 60 characters in length—that is, three lines of 20 characters each. While I leave the commentary up to you, the sketch for this project includes some ideas that I used when putting it together. You can always edit the commentary and reload the sketch to show comments specific to a set of users, like friends or relatives.</p>&#13;
<h4 class="h4" id="ch01lev2sec2"><strong><em>Expected Speed Ranges</em></strong></h4>&#13;
<p class="noindent">Most individuals’ reaction times seem to vary greatly, based on the small sample I tested. Interestingly, age doesn’t seem to be a factor. The average reaction time was around 200 milliseconds, and that is the average reaction time identified by many researchers.</p>&#13;
<p class="indent">The fastest response of anyone I sampled was 105 milliseconds; however, the individual was not able to repeat that performance. Several individuals scored between 105 and 125 milliseconds, but not consistently. Significantly lower reaction times may well be anomalous or the result of an individual actually anticipating the stimulus. My players’ failure to repeat extremely fast reaction times would tend to bolster that idea. (I wouldn’t want to accuse anyone of successfully pre-guessing the release moment.)</p>&#13;
<h3 class="h3" id="ch01lev1sec6"><strong>The Schematic</strong></h3>&#13;
<p class="noindent">While the display could have been wired directly, using the I<sup>2</sup>C interconnect made it a lot simpler and reduced the interface to only four wires: positive, ground, data, and clock (see <a href="ch01.xhtml#ch01fig2">Figure 1-2</a>).</p>&#13;
<p class="indent">The only components needed are the Nano, three switches (one toggle switch for power and two momentary pushbutton switches for activate and reset), an LED, the display, and three resistors. Despite the relatively sparse parts count, the project performs elegantly.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_30"/><img alt="image" src="../images/f01-02.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig2"/><em>Figure 1-2: Schematic diagram of the Reaction-Time Machine</em></p>&#13;
<h3 class="h3" id="ch01lev1sec7"><strong>The Breadboard</strong></h3>&#13;
<p class="noindent">As is the case for most of my Arduino projects, the first step is to prepare a breadboard to prove the concept and test the sketch. Here’s how to wire up the breadboard:</p>&#13;
<ol>&#13;
<li><p class="noindent">Connect the red positive rails on the breadboard together.</p></li>&#13;
<li><p class="noindent">Connect the blue negative rails on the breadboard together.</p></li>&#13;
<li><p class="noindent">Insert the Arduino Nano (or clone) in the breadboard, leaving two rows on one side and three on the other. (If the Nano does not come with stakes soldered in, see “<a href="ch00.xhtml#ch00lev1sec1">Preparing the Arduino Board</a>” on <a href="ch00.xhtml#page_2">page 2</a>.)</p></li>&#13;
<li><p class="noindent">Connect the 5V terminal on the Nano to the red positive rail on the breadboard.</p></li>&#13;
<li><p class="noindent"><span epub:type="pagebreak" id="page_31"/>Connect the GND terminal on the Nano to the blue negative rail on the breadboard.</p></li>&#13;
<li><p class="noindent">Connect the negative wire from the battery connector to the blue negative rail. Remember that the breadboard has no switch, so you must disconnect the battery to turn it off.</p></li>&#13;
<li><p class="noindent">Connect the positive lead from the battery connector to VIN on the Nano. (Do not connect the positive terminal of the battery to the red positive rail—it could permanently damage the Nano.)</p></li>&#13;
<li><p class="noindent">Attach 5-inch wires to two normally open momentary pushbutton switches. (I use 22-gauge solid conductor wire so it can plug in to the breadboard directly.)</p></li>&#13;
<li><p class="noindent">Prepare a wire harness for the LCD (see “<a href="ch00.xhtml#ch00lev1sec2">Affixing the I<sup>2</sup>C Board to the LCD</a>” on <a href="ch00.xhtml#page_3">page 3</a>).</p></li>&#13;
<li><p class="noindent">Connect the red wire from the LCD to the red positive rail on the breadboard (5V) and the black wire from the LCD to the blue negative rail.</p></li>&#13;
<li><p class="noindent">Insert the yellow wire from the display (SDA) to pin A4 on the Nano.</p></li>&#13;
<li><p class="noindent">Insert the green wire from the display (SCL) to pin A5 on the Nano.</p></li>&#13;
<li><p class="noindent">Connect one side of each pushbutton switch to the blue negative rail.</p></li>&#13;
<li><p class="noindent">Connect the other side of the red reaction switch (SW2) to pin D7 on the Nano.</p></li>&#13;
<li><p class="noindent">Connect the other side of the yellow reset switch (SW1) to pin D2 on the Nano.</p></li>&#13;
<li><p class="noindent">Connect a 10-kilohm resistor from pin D7 on the Nano to the red positive rail.</p></li>&#13;
<li><p class="noindent">Connect a 10-kilohm resistor from pin D2 on the Nano to the red positive rail.</p></li>&#13;
<li><p class="noindent">Connect the anode side of the LED (the longer leg) to the red positive rail and the cathode side to an empty row on the breadboard.</p></li>&#13;
<li><p class="noindent">Connect a 470-ohm resistor from the cathode side of the LED to pin D4 on the Nano.</p></li>&#13;
</ol>&#13;
<p class="indentt">Upload the <em>Reaction.ino</em> sketch to the Arduino Nano (see “<a href="ch00.xhtml#ch00lev1sec3">Uploading Sketches to Your Arduino</a>” on <a href="ch00.xhtml#page_5">page 5</a>), and you should now be ready to go. <a href="ch01.xhtml#ch01fig3">Figure 1-3</a> shows the breadboard laid out with the switches dangling from their wires.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_32"/><img alt="image" src="../images/f01-03.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig3"/><em>Figure 1-3: The breadboard setup for the Reaction-Time Machine. Because there is no on/off switch, you have to disconnect the battery to shut it off</em>.</p>&#13;
<h3 class="h3" id="ch01lev1sec8"><strong>The Sketch</strong></h3>&#13;
<p class="noindent">The sketch is the actual computer program that tells the Arduino what to do and when to do it. It is written in a language of its own that comprises structures, variables, arrays, functions, and so on, which represent a recipe for the microcontroller to follow. This language is converted into a sequence of zeros and ones that are routed to various parts of the controller and can perform storage, timing, comparison, arithmetic functions, and more.</p>&#13;
<p class="indent">The process of converting a computer language to a sequence of zeros and ones is called <em>compiling</em>. The compiling routine in the Arduino Integrated Development Environment (IDE) is activated when you click the Verify and Compile buttons in the upper-left side of the Sketch window.</p>&#13;
<p class="indent">The sketch gets pretty long because of all the messages that can be inserted when it checks the score; however, the basic operation uses only a handful of code lines. You can use the scoring function as is, modify it, or copy and paste it to make a new scoring function. As you’ll see in my messages options, I’ve had fun with it.</p>&#13;
<p class="indent">The following code has been truncated to minimize the number of lines. However, you can simply go to <em><a href="https://www.nostarch.com/arduinoplayground/">https://www.nostarch.com/arduinoplayground/</a></em> to download the entire sketch, which includes a number of messages.</p>&#13;
<p class="programs">/*<br/>Includes score function, random number generation, false start<br/>"jump the gun" indicator, and multiple messages spaced 10 ms apart<br/><br/>Mod for "jump the gun" gives response if time &lt;70 ms<br/>*/<br/><br/><span epub:type="pagebreak" id="page_33"/>#include &lt;Wire.h&gt; //Libraries included<br/>#include &lt;LiquidCrystal_I2C.h&gt;<br/><br/>int start_time = 0;<br/>int stop_time = 0;<br/>int reacttime = 0;<br/>int x;<br/>int R;<br/>int randnumber1;<br/>int z;<br/><br/>LiquidCrystal_I2C lcd (0x3F, 20, 4); //Initiate LCD<br/><br/>void setup() {<br/>    Serial.begin (9600);<br/>    pinMode(2, INPUT);<br/>    pinMode(4, OUTPUT);<br/>    pinMode(7, INPUT);<br/>    lcd.init();<br/>    lcd.backlight();<br/>}<br/>//Begin function "score"<br/>void score() {<br/>    lcd.clear();<br/>    lcd.print("Reaction Time ");<br/>    lcd.print(reacttime);<br/>    lcd.print(" ms");<br/>    lcd.setCursor(0, 1);<br/><br/>    if((reacttime &gt;= 105) &amp;&amp; (reacttime &lt; 135)) {<br/>       lcd.print("Approaching Superman");<br/>       lcd.setCursor(0, 2);<br/>       lcd.print("but you can still do");<br/>       lcd.setCursor(0, 3);<br/>       lcd.print("a lot better");<br/>    }<br/><br/>    if((reacttime &gt;= 135) &amp;&amp; (reacttime &lt; 180)) {<br/>       lcd.print("Superhero Status");<br/>       lcd.setCursor(0, 2);<br/>       lcd.print("but not yet");<br/>       lcd.setCursor(0, 3);<br/>       lcd.print("Superman");<br/>    }<br/><br/>    if((reacttime &gt;= 180) &amp;&amp; (reacttime &lt; 225)) {<br/>       lcd.print("You are trying ??");<br/>       lcd.setCursor(0, 2);<br/>       lcd.print("but not hard enough");<br/>       lcd.setCursor(0, 3);<br/>       lcd.print("still a loser");<br/>    }<br/><br/><span epub:type="pagebreak" id="page_34"/>    if(reacttime &gt; 225) {<br/>       lcd.print("Lost your touch");<br/>       lcd.setCursor(0, 2);<br/>       lcd.print("If you ever had it");<br/>       lcd.setCursor(0, 3);<br/>       lcd.print("on the border of wimpy");<br/>    }<br/>}<br/><br/>//Begin main program<br/>void loop() {<br/>    digitalWrite(4, HIGH); <br/>    lcd.clear();<br/>    lcd.print("System is Armed");<br/>    delay(1000);<br/>    lcd.setCursor(0, 1);<br/>    lcd.print("     READY     ");<br/>    lcd.setCursor(0, 2);<br/>    lcd.print(" Push Red Button");<br/>    lcd.setCursor(0, 3);<br/>    lcd.print("When Red lamp lights");<br/><br/>    randnumber1 = random(5, 25); //Generate random number between 5 and 25<br/>    R = randnumber1;<br/>    for(x = 0; x &lt; R; x++);<br/>    delay(5000);<br/>    if(x == R) {<br/>       digitalWrite(4, LOW); //Turn on start lamp<br/>       start_time = millis(); //Initiate timer<br/>       lcd.clear();<br/>       lcd.print("Mash React Button");<br/>       lcd.setCursor(0, 1);<br/>       lcd.print("           ");<br/>       lcd.setCursor(0, 2);<br/>       lcd.print("          ");<br/>       lcd.setCursor(0, 3);<br/>       lcd.print("          ");<br/><br/>       while(digitalRead(7) == 1); //Wait for response<br/><br/>       stop_time = millis(); //Complete timing cycle<br/>    }<br/><br/>    reacttime = stop_time - start_time;<br/>   <br/>    if(reacttime &lt; 70) { //Jump the gun indicator<br/>       lcd.clear();<br/>       lcd.setCursor(0, 0);<br/>       lcd.print("Too anxious. You");<br/>       lcd.setCursor(0, 1);<br/>       lcd.print("(Jumped the Gun)");<br/>       lcd.setCursor(0, 3);<br/>       lcd.print("Could be Fatal!");<br/>    }<br/>    score();<br/><br/><span epub:type="pagebreak" id="page_35"/>    Halt:<br/>    while(digitalRead(2) == 1);<br/>}</p>&#13;
<p class="indentt">The <span class="literal">#include</span> lines initiate the libraries: the I<sup>2</sup>C library, <em>Wire.h</em>, establishes the rules for I<sup>2</sup>C communications, and the LiquidCrystal library allows the Arduino to control LCDs. Then, we define the seven variables used to calculate reaction time. Next, <span class="literal">setup()</span> sets up the serial communication—in case you want to adjust the code and view it on the serial monitor—and defines various pins as inputs and outputs. Inputs are required for the reset and stop buttons, and an output pin is defined for the LED that tells the player when to press the stop button.</p>&#13;
<h4 class="h4" id="ch01lev2sec3"><strong><em>Customized Reaction Commentary</em></strong></h4>&#13;
<p class="noindent">One of the most entertaining aspects of this project is the chance to get creative when displaying the player’s reaction time. After <span class="literal">setup()</span>, the sketch shows a function called <span class="literal">score()</span>, which lists different comments that could be displayed on the LCD based on the participant’s response speed. A function may not necessarily be the most efficient approach (a look-up table or other approach could also have been used), but it works well enough. I used only a single scoring function in this iteration; however, you could easily define as many as you like and change your sketch to select one. For example, you might write a second function called <span class="literal">score1()</span> that could include a different set of comments and timing. Then, to switch from one function to the other, you’d have to change only the line that calls <span class="literal">score()</span> to call <span class="literal">score1()</span> instead.</p>&#13;
<p class="indent">To customize the sketch to include comments that could refer to your own friends or family members, you can simply enter your comments in place of the ones that are in my sketch. Don’t forget to keep the text you want to print to the LCD in quotes so the Arduino recognizes the printable characters.</p>&#13;
<p class="indent">A word on the reaction time itself: each comment is for a range of reaction times of either 5 or 10 milliseconds. I selected these ranges arbitrarily. After you play with the Reaction-Time Machine for a bit, you may wish to change these ranges based on the fact that users’ responses may cluster around a particular area, such as from 195 to 225 milliseconds. I found that many reaction times were in the 190 to 250 milliseconds range, but your friends and family may be different. In that case, you can separate the comments by as little as 1 or 2 milliseconds so players don’t keep getting the same comment.</p>&#13;
<p class="indent">You can add as many comments as you wish, up to one comment per millisecond. If you accidentally overlap the times, the sketch may not compile.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong><span class="bgblack">NOTE</span></strong></p>&#13;
<p class="notep"><em>You can find reaction-time measurement tools on the web if you want to see how your game’s measurements compare. However, their accuracy is suspect because of the latency in the PC itself</em>.</p>&#13;
</div>&#13;
<div class="box1">&#13;
<p class="boxtitle"><span epub:type="pagebreak" id="page_36"/><a id="ch01box1"/><strong>ON WRITING CODE TO SET UP LCDS</strong></p>&#13;
<p class="noindent">There are a few points to note about the setup of the LCD. The sketch uses a LiquidCrystal library, <em>LiquidCrystal_I2C.h</em>. If this library is not included in your Arduino IDE, you can easily download it using the instructions provided in the reference section on the Arduino website (<em><a href="http://www.arduino.cc/reference/">http://www.arduino.cc/reference/</a></em>).</p>&#13;
<p class="indent">In addition, each I<sup>2</sup>C device comes with its own I<sup>2</sup>C address. This allows several I<sup>2</sup>C devices to be used on a single serial line. Usually the device documentation provides the address—in the case of the I<sup>2</sup>C LCD I used, the address was 0x3F. Thus, when the sketch initiates the LCD, the code looks like this:</p>&#13;
<p class="programs">LiquidCrystal_I2C lcd (0x3F, 20, 4);</p>&#13;
<p class="indent">However, different displays come with different addresses. If you have an I<sup>2</sup>C device that you do not have an address for, you can easily find the address by hooking up the device to an Arduino, downloading a scanner sketch from <em><a href="http://playground.arduino.cc/Main/i2cScanner/">http://playground.arduino.cc/Main/i2cScanner/</a></em>, and running the sketch. The scanner sketch should display the I<sup>2</sup>C address on the serial monitor.</p>&#13;
<p class="indent">Many projects in this book use similar code to work with an LCD, so refer to this box any time you need a refresher on how that code works.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch01lev2sec4"><strong><em>What Happens in the Loop</em></strong></h4>&#13;
<p class="noindent">Now let’s look at the sketch’s loop. After <span class="literal">void loop()</span> initiates the start of the program, the program calls <span class="literal">digitalWrite(4, HIGH)</span> to turn off the active light. Then, the LCD screen is cleared, and text is written to the LCD to indicate that the system is armed and ready for a player to push the reaction button as soon as the red LED illuminates.</p>&#13;
<p class="indent">Next, a random number between 5 and 25 is generated, and the program calls <span class="literal">delay(5000)</span> to count every five seconds from zero to the random number. As soon as the random number is reached, three things happen: first, the annunciator lamp illuminates; second, an internal timer is started in the Nano; and third, the display then changes to read “Mash the React Button.”</p>&#13;
<div class="note">&#13;
<p class="notet"><strong><span class="bgblack">NOTE</span></strong></p>&#13;
<p class="notep"><em>A wider range of random numbers might make this game even more interesting for players. You can easily experiment by changing the random number count, the delay, or both</em>.</p>&#13;
</div>&#13;
<p class="indent">The Nano is then instructed by <span class="literal">while(digitalRead(7) == 1);</span> to wait until the reaction button is depressed. After the button is depressed, the Nano calculates the reaction time with <span class="literal">reacttime = stop_time - start_time</span>. This time will be displayed on the LCD and used to select the appropriate comment in the <span class="literal">score()</span> function. Also, if the player’s reaction time is less than <span epub:type="pagebreak" id="page_37"/>70 milliseconds at this point, then the conditional statement looking for a participant to be “jumping the gun” displays appropriate wording for the LCD. The system is then halted and ready to be reset.</p>&#13;
<p class="indent">Otherwise, the serial print block is included in case you want to adjust the code and view it on a serial monitor. It also helps for debugging purposes.</p>&#13;
<p class="indent">Finally, the <span class="literal">score()</span> function is invoked, followed by the <span class="literal">Halt</span> command, and the system is ready to have the reset button depressed.</p>&#13;
<h3 class="h3" id="ch01lev1sec9"><strong>Construction</strong></h3>&#13;
<p class="noindent">Building the Reaction-Time Machine can be as simple or as complex as you want. Initially, I placed all the components in the vinyl package that a flexible wrist brace came in. I cut a hole for the display connectors with an X-ACTO knife and punched the holes for the switches and LED with a paper punch, followed by a tapered reamer. The result was somewhat crude, as shown in <a href="ch01.xhtml#ch01fig4">Figure 1-4</a>.</p>&#13;
<div class="image"><img alt="image" src="../images/f01-04.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig4"/><em>Figure 1-4: This was the Reaction-Time Machine’s original, primitive package, which worked but turned out to be too flimsy. The vinyl was only 0.018 inches thick</em>.</p>&#13;
<h4 class="h4" id="ch01lev2sec5"><strong><em>Preparing a Sturdy Case</em></strong></h4>&#13;
<p class="noindent">Of course, a real case makes the game much sturdier, which is important when you have competitive players mashing those buttons. To keep things as simple as possible, I employed one of the clear ABS plastic cases from Hammond (1591 BTCL). The clear top of the case allowed me to place the display behind the cover rather than machining out a hole for the display to protrude through. To mount the components, I simply drilled holes in the cover according to the drawing in <a href="ch01.xhtml#ch01fig5">Figure 1-5</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_38"/><img alt="image" src="../images/f01-05.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig5"/><em>Figure 1-5: Drilling template for the Reaction-Time Machine</em></p>&#13;
<p class="indent">Quarter-inch holes work well for the momentary pushbutton switches, as well as for the toggle switch and 3.5 mm jack. For the 10 mm LED, I used a 3/8-inch drill and then reamed the hole out to make a tight fit. No other mounting hardware for the LED was necessary.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong><span class="bgblack">NOTE</span></strong></p>&#13;
<p class="notep"><em>The 3.5 mm jack is wired in parallel to the execute switch. If you want to use an external stand-alone switch, it can simply plug in to the jack. I abandoned the effort, however, as most participants preferred to hold the box in their hands</em>.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch01lev2sec6"><strong><em>Mounting the Hardware</em></strong></h4>&#13;
<p class="noindent">To mount the display to the case, I used two-sided 3M Indoor/Outdoor Super Heavy Duty mounting tape. I cut two sections the size of the LCD display’s end bezel sections and bonded the display directly to the cover. The tape is difficult to remove, so make sure to place it right the first time. I used the same tape to mount the Nano and the battery holder to the back of the display. When mounting the display, I also used wire cutters to carefully cut off the corners of the display circuit board so it would fit far enough into the case without hitting the cover mounting pylons. See <a href="ch01.xhtml#ch01fig6">Figure 1-6</a> for the finished product, viewed from the underside.</p>&#13;
<p class="indent">Once all the components are in place, all that remains is to solder the components together, inserting the resistors where required. Take particular note of the I<sup>2</sup>C adapter, which is the black paddleboard just below the switches and LED. While I could have bent the connectors and used a header to wire that up, the case may not have closed, depending on how carefully I crimped the connectors. Instead, I elected to solder the wires directly. It was only four wires, and it worked without much trouble. Finally, I printed out and attached labels from a Brother label maker. <a href="ch01.xhtml#ch01fig7">Figure 1-7</a> shows the completed unit.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_39"/><img alt="image" src="../images/f01-06.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig6"/><em>Figure 1-6: This is the rear of the unit mounted in the ABS plastic enclosure. Notice that the corners of the display (lower left and right) have been clipped off to fit around the top mounting pylons. The 3.5 mm jack is not wired, as I decided not to use it in this implementation</em>.</p>&#13;
<div class="image"><img alt="image" src="../images/f01-07.jpg"/></div>&#13;
<p class="figcap"><a id="ch01fig7"/><em>Figure 1-7: The completed Reaction-Time Machine mounted in the Hammond 1591 BTCL clear plastic enclosure</em></p>&#13;
<h3 class="h3" id="ch01lev1sec10"><span epub:type="pagebreak" id="page_40"/><strong>Ideas for Customization</strong></h3>&#13;
<p class="noindent">There are many variations you could implement to increase the versatility and enjoyment of the Reaction-Time Machine. For example, as I developed it, I connected a Hall effect switch to one of the analog inputs and modified the sketch to automatically decrease the reaction time by a percentage when the Hall effect switch is activated. Then, I taped a small magnet to my finger that sat opposite the Hall effect switch so as I grabbed the box, it activated the switch. When I played, my reaction time was reduced by around 20 percent, while others had an actual reading. Far be it from me to suggest that readers try to hoodwink their adversaries, of course!</p>&#13;
<p class="indent">There are other modifications that can be made, such as incorporating a tone sound, or beep, as the sketch counts up to the random number. This can easily be accomplished with the addition of an annunciator and a few lines of code. If you’re ingenious, there are other sound effects you could add, such as a vulgar sound that plays when poor scores are achieved.</p>&#13;
<p class="indent">You can also exercise your brain and add code to the sketch that will average scores after, for example, three tries before you reset it. I experimented with many variations as I played with the device, but I would caution that you can spend a great deal of time for minimal advantage. Put the game together and enjoy.</p>&#13;
</body></html>