- en: 5. fake goods
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5. 假冒商品
- en: The gongkai system fosters an amazing amount of innovation in China, and the
    shanzhai can make interesting original products, like the cell phones I showed
    you in [Chapter 4](ch04.xhtml#ch04). That said, China does produce plenty of fake
    electronic goods, and they aren’t all knockoff iPhones. Clever counterfeiters
    can produce fake integrated circuits, including microSD cards and even FPGAs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 公开系统在中国催生了大量的创新，山寨厂商能够制作有趣的原创产品，就像我在[第4章](ch04.xhtml#ch04)中展示的手机一样。话虽如此，中国确实生产了大量的假冒电子产品，而且并非所有的都是仿制版的iPhone。巧妙的伪造者能够制造出假冒的集成电路，包括microSD卡甚至是FPGA。
- en: '**WELL-EXECUTED COUNTERFEIT CHIPS**'
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**精良伪造的芯片**'
- en: For instance, in 2007 (while I was still working with Chumby) I encountered
    some counterfeit chips so well executed that I couldn’t be certain they were fake
    without investigating.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在2007年（当时我还在Chumby工作）我遇到了一些伪造的芯片，制作得非常精良，直到进行调查，我才确定它们是假货。
- en: '![image](../images/f0144-01.jpg)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0144-01.jpg)'
- en: '*Two suspicious chip specimens from an Asian source*'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '*来自亚洲来源的两颗可疑芯片样本*'
- en: The chips claimed to be ST19CF68s, a chip made by STMicroelectronics and described
    on its datasheet as a “CMOS MCU Based Safeguard Smartcard I/O with Modular Arithmetic
    Processor.” ST19CF68 chips are normally sold prepackaged in *smartcard* (for example,
    the chip on the front of a credit card) or *diced wafer* (a silicon wafer that’s
    been diced into individual chips, but with no other package around it) format,
    but curiously, these were SOIC-20 packaged devices. To find out the reason for
    the odd package choice, I dissolved the black epoxy packaging off the top of one
    chip to decapsulate it so I could inspect the silicon on the inside using a microscope.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 这些芯片声称是ST19CF68，是STMicroelectronics生产的芯片，在其数据表中描述为“基于CMOS MCU的智能卡I/O，带有模块算术处理器。”ST19CF68芯片通常以*智能卡*（例如信用卡前面的芯片）或*切割晶圆*（将硅晶圆切割成单独的芯片，但没有其他封装）的形式出售，但奇怪的是，这些芯片是SOIC-20封装的。为了找出这种奇怪封装选择的原因，我将其中一颗芯片的黑色环氧树脂封装溶解，以便用显微镜检查内部的硅片。
- en: The die inside the package was much too small and simple for a complex microcontroller
    unit (MCU) matching the description of the ST19CF68\. The pattern of gold-colored
    rectangles tiled across the chip was too coarse; I could make out individual transistors
    at low zoom with an optical microscope. The size of these features is referred
    to as the chip’s *process geometry*. The process geometry of a smartcard would
    typically trail a cutting-edge CPU by at most three or four generations, making
    transistors very difficult to resolve even at the highest levels of zoom.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 封装内的芯片片段过于小巧和简单，无法匹配ST19CF68所描述的复杂微控制器单元（MCU）。芯片上金色矩形的图案过于粗糙；我在低倍放大下通过光学显微镜能够分辨出单个晶体管。这些特征的尺寸被称为芯片的*工艺几何*。智能卡的工艺几何通常会比最先进的CPU落后三到四代，这使得即使在最高倍数的放大下，也很难分辨出晶体管。
- en: '![image](../images/f0145-01.jpg)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0145-01.jpg)'
- en: '*The silicon inside the fake ST19CF68*'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '*假冒ST19CF68芯片内部的硅片*'
- en: Along with the unexpectedly coarse process geometry, why did this part have
    20 bondable pads and 20 pins when, according to the datasheet, it should have
    only 8 pads? Zooming in a bit on the die revealed some interesting details.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 除了意外粗糙的工艺几何外，为什么这款零件有20个可焊接焊盘和20个引脚，而根据数据表，它应该只有8个焊盘？对芯片进行更高倍放大后，揭示出了一些有趣的细节。
- en: '![image](../images/f0146-01.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0146-01.jpg)'
- en: '*The chip manufacturer and copyright date*'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '*芯片制造商和版权日期*'
- en: The chip wasn’t made by STMicroelectronics after all! The label on the silicon
    said *FSC*, indicating it was made by Fairchild Semiconductor. Of course, then
    I had to check the part label on the silicon, too.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 结果表明，这款芯片并非由STMicroelectronics制造！硅片上的标签显示*FSC*，表明它是由Fairchild Semiconductor制造的。当然，我还需要检查硅片上的零件标签。
- en: '![image](../images/f0146-02.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0146-02.jpg)'
- en: '*Discovering the true part number*'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '*发现真实的零件编号*'
- en: The die within that chip turned out to be a Fairchild 74LCX244, which is a “Low
    Voltage Buffer/Line Driver with 5V Tolerant Inputs and Outputs.” The 74LCX244
    is a much cheaper piece of silicon than the ST19CF68 the package supposedly contained.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 该芯片内部的芯片片段被证明是Fairchild 74LCX244，这是一种“低电压缓冲器/线路驱动器，具有5V容忍的输入和输出。”74LCX244是一款比该封装应包含的ST19CF68便宜得多的硅片。
- en: Of course, the mismatched pin count was suspicious, but manufacturers have been
    known to put chips in larger packages, especially during early runs of the chip
    before it has been size-optimized. The thing that really got me was the convincing
    quality of the package and the markings.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，脚位数不匹配是可疑的，但制造商已经知道会将芯片放入更大的封装中，特别是在芯片的早期生产阶段，直到它被尺寸优化为止。真正让我感到震惊的是封装和标记的逼真质量。
- en: Normally, remarked or fake chips look cheesier than this one. The original chips
    are sanded down or painted over to remove the previous markings, and the new marking
    is typically applied with silkscreened paint.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，重标或伪造的芯片看起来比这个更低劣。原始芯片被打磨掉或喷漆以去除之前的标记，新标记通常是用丝网印刷涂料应用上去的。
- en: 'But these chips showed no evidence of remarking at all. The markings are of
    first-run quality: someone acquired unmarked blanks of the 74LCX244 chip and programmed
    a production laser engraver to put high-quality fake markings on an otherwise
    virgin package. They even got the proportions of the *ST* logo exactly right.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 但这些芯片完全没有显示出任何重标的迹象。标记是首次生产的质量：某人获取了未标记的74LCX244芯片，并将生产激光刻录机编程，以便在原本未使用的封装上加上高质量的伪造标记。他们甚至将*ST*徽标的比例做得非常准确。
- en: '![image](../images/f0147-01.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0147-01.jpg)'
- en: '*A close-up of the outside of the fake ST19CF68*'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '*伪造的ST19CF68外观特写*'
- en: The quality difference between a remarked chip and first-run marking is like
    the quality difference between spray paint used to hide a scratch on a car and
    the car’s original, factory-fresh paint job. This chip definitely had the “new
    car” look.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 重标芯片与首次生产的标记之间的质量差异，就像用喷漆掩盖汽车划痕与汽车原厂新漆之间的质量差异。这款芯片无疑有着“新车”般的外观。
- en: This discovery left me with a lot of unanswered questions. How did someone acquire
    unmarked Fairchild silicon? Was the person an insider, or did Fairchild sloppily
    throw away unmarked reject chips without grinding them up or clipping off leads
    so they couldn’t be picked out of a dumpster and resold? The laser-marking machine
    used to make those markings wasn’t a cheap desktop engraver, either; it had to
    be a high-power raster engraver, and the artwork was spot-on.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这一发现让我留下了许多未解的问题。某人是如何获得未标记的费尔柴尔德硅片的？那个人是内部人士吗？还是费尔柴尔德粗心大意地丢弃了未标记的废品芯片，没有将它们磨碎或剪掉引脚，以至于它们可以被捡起并转售？用来制作这些标记的激光刻印机也不是便宜的桌面刻录机；它必须是高功率的光栅刻录机，而且图案精确无误。
- en: I still find it hard to believe those fake chips were made and sold, but maybe
    I shouldn’t. I’ve seen brazen remarking of dual inline memory modules (DIMMs,
    the memory used in personal computers) in the SEG Electronics Market, and many
    counterfeiters at the market openly display their arsenal of professional-quality
    thermal transfer label printers and hologram sticker blanks.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我仍然难以相信那些伪造芯片是被制造和出售的，但或许我不该这么想。我在SEG电子市场看到过肆无忌惮的双列直插内存模块（DIMM，个人电脑中的内存）重标，市场上许多伪造商公开展示着他们的专业级热转印标签打印机和全息贴纸空白标签。
- en: If fakes of this quality become more common, they could present a problem for
    the supply chain. Clearly, whoever made the counterfeit ST19CF68 can fake just
    about any chip, and the fakes are gradually appearing on the US market. Resellers,
    especially distributors that specialize in buying excess manufacturer inventory,
    implicitly trust the markings on a chip.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这种质量的伪造品变得更加普遍，它们可能会对供应链构成问题。显然，制造伪造ST19CF68的人几乎能伪造任何芯片，而且这些伪造品正在逐渐出现在美国市场上。转售商，特别是那些专门购买过剩制造商库存的分销商，通常会默认为芯片上的标记是可信的。
- en: I don’t think chipmakers will put anticounterfeiting measures on chip markings,
    but the quality of these fakes definitely made me wary when I discovered them,
    and it still does. Not all fakes get spotted before they’re used, and fake components
    pose problems in any project where they appear.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我认为芯片制造商不会在芯片标记上增加防伪措施，但这些伪造品的质量确实让我在发现它们时感到警惕，而且至今仍然如此。并非所有的伪造品在使用前都会被发现，而假冒组件在任何出现的项目中都会带来问题。
- en: '**COUNTERFEIT CHIPS IN US MILITARY HARDWARE**'
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**美国军用硬件中的伪造芯片**'
- en: 'Counterfeit chips can be particularly problematic when they find their way
    into military projects. The US military has a unique problem: it’s one of the
    biggest and wealthiest buyers of really old parts because military designs have
    shelf lives of decades. Like anything else, the older a part is, the harder it
    is to find, and sometimes contractors are sold fakes. For example, a 2011 Senate
    hearing report revealed that some parts used in the P-8 Poseidon (a plane the
    US Navy commissioned from Boeing) were, as an article from the Defense Tech website
    put it, “badly refurbished,” causing a key system to fail.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 假冒芯片在进入军事项目时尤为棘手。美国军方有一个独特的问题：它是全球最大的、最富裕的采购老旧零件的买家之一，因为军事设计的使用寿命可以长达几十年。和其他任何事物一样，零件越旧，越难找到，有时承包商会买到假冒品。例如，2011年参议院听证会报告透露，部分用于P-8海神（美国海军向波音公司订购的飞机）的零件，如《国防技术》网站的一篇文章所称，是“翻新得很差”，导致关键系统发生故障。
- en: The US government attempted to reduce fakes in its supply chain with Amendment
    1092 to the National Defense Authorization Act for Fiscal Year 2012 (H.R. 1540).
    The amendment is a well-intentioned but misguided provision outlining measures
    designed to reduce the prevalence of counterfeit chips in the US military supply
    chain.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 美国政府试图通过2012财年《国防授权法案》第1092号修正案（H.R. 1540）减少供应链中的假冒产品。该修正案是一个出于良好意图，但却有些误导的条款，列出了旨在减少美国军方供应链中假冒芯片流通的措施。
- en: Even before Amendment 1092 was put on the table, the Defense Authorization Act
    drew flak for a provision that authorizes the US military to detain US citizens
    indefinitely without trial. It also rather ironically requires an assessment of
    the US federal debt owed China as a potential “national security risk” (section
    1225 of H.R. 1540).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 即使在第1092号修正案提出之前，《国防授权法案》因一项允许美国军方无限期拘留美国公民且无需审判的条款而受到批评。讽刺的是，该条款还要求对美国联邦政府欠中国的债务进行评估，视其为潜在的“国家安全风险”（H.R.
    1540第1225条）。
- en: Under the anticounterfeit amendment, first-time offenders can receive a $5 million
    fine and 20-year prison sentence for individuals, or a $15 million fine for corporations—a
    penalty comparable to that of trafficking cocaine.[*](footnote.xhtml#fn11) While
    the amendment explicitly defines *counterfeit* to include refurbished parts represented
    as new, the wording is regrettably vague on whether you must be willfully trafficking
    such goods to also be liable for such a stiff penalty.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 根据反假冒修正案，首次违法者可能会面临500万美元罚款和20年监禁的惩罚，个人罚款为500万美元，企业则可能面临1500万美元罚款——这一处罚与贩卖可卡因的处罚相当。[*](footnote.xhtml#fn11)虽然该修正案明确将*假冒*定义为将翻新零件冒充为全新零件，但其措辞不幸地含糊不清，未明确指出是否只有故意贩卖此类商品的人才会承担如此严厉的惩罚。
- en: If you took a dirty but legitimately minted coin and washed it so that it looked
    mint condition, nobody would accuse you of counterfeiting. Yet this amendment
    puts a 20-year, $5 million penalty not only on the act of counterfeiting chips
    destined for military use but also potentially on the unwitting distribution of
    refurbished chips that you putatively bought as new. Unfortunately, in many cases
    an electronic part can be used for years with no sign of external wear.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你拿到一枚脏兮兮但未经伪造的硬币，并把它清洗干净使其看起来像新的一样，没人会指责你伪造。然而，该修正案不仅对伪造用于军事用途的芯片行为施加20年监禁和500万美元罚款，而且有可能对那些无意中分销翻新芯片的人施加相同的处罚，尽管他们本来是将这些芯片当作全新商品购买的。不幸的是，在很多情况下，电子零件可以使用多年而没有外部磨损的迹象。
- en: 'The amendment also has a provision to create an “inspection program”:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 该修正案还包含了一项创建“检查计划”的条款：
- en: (b) Inspection of Imported Electronic Parts —
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: (b) 进口电子零件的检查 —
- en: (1) ... the Secretary of Homeland Security shall establish a program of enhanced
    inspection by U.S. Customs and Border patrol of electronic parts imported from
    any country that has been determined by the Secretary of Defense to have been
    a significant source of counterfeit electronic parts ...
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: (1) ... 国土安全部部长应当建立一个由美国海关和边境保护局加强的检查程序，专门检查来自任何被国防部长认定为假冒电子零件重大来源的国家进口的电子零件
    ...
- en: Inspecting fruits and vegetables as they enter the country for pests and other
    problems makes sense, but requiring customs officers to become experts in detecting
    fake electronic components seems misguided. Burdening vendors with detecting fakes
    when there are such high penalties for failure is also misguided, given how easy
    it is for forgers to create high-quality counterfeits.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 检查水果和蔬菜进入国家时是否有害虫或其他问题是合理的，但要求海关官员成为检测假电子元件的专家似乎是误导性的。在伪造者能够轻松制造出高质量的假货的情况下，把检测假货的责任推给供应商，且失败会面临如此高的处罚，也是错误的。
- en: '**Types of Counterfeit Parts**'
  id: totrans-37
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**假冒零件的类型**'
- en: To better understand the magnitude of the chip counterfeiting problem, let’s
    look at how fakes are made. The fake chips I’ve seen fall into the following broad
    categories.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解芯片伪造问题的严重性，让我们看看假货是如何制造的。我见过的假芯片大致可以分为以下几类。
- en: EXTERNAL MIMICRY
  id: totrans-39
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 外部模仿
- en: The most trivial counterfeit chips are simply empty plastic packages with authentic-looking
    top marks, or remarked parts that share only physical traits with the authentic
    parts. For example, a simple transistor-transistor logic (TTL) chip might be placed
    inside the same package, with identical markings, as an expensive microcontroller.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的假冒芯片仅仅是外观看起来真实的塑料外壳，或者是只有物理特征相同的重新标记的零件。例如，一个简单的晶体管-晶体管逻辑（TTL）芯片可能被放置在同一个包装内，并带有与昂贵的微控制器相同的标记。
- en: I consider external mimicry trivial because fakes produced this way are easy
    to detect in a factory test. At worst, you’re sold a mixture of mostly authentic
    parts with a few counterfeits blended in so that testing just one part out of
    a tube or reel isn’t good enough to catch the issue. But most products employ
    100 percent testing at the system level, so typically the problem is discovered
    before anything leaves the factory.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我认为外部模仿是微不足道的，因为这种方式生产的假货在工厂测试中很容易被发现。最坏的情况是，你被卖了一些大部分是正品的零件，只有少数是伪造的，因此仅仅测试一根管子或卷盘中的一个零件是无法发现问题的。但大多数产品在系统级别上进行百分之百的测试，所以通常问题在任何东西离开工厂之前就会被发现。
- en: REFURBISHED PARTS
  id: totrans-42
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 翻新零件
- en: Counterfeits don’t technically have to be fake at all, though. Refurbished parts
    are authentic chips that are desoldered from e-waste and reprocessed to look new.
    They’re very difficult to spot since the chip is in fact authentic, and a skilled
    refurbisher can produce stunningly new-looking chips that only isotopic or elemental
    analysis could identify as used.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，假冒产品并不一定非得是完全假的。翻新零件是从电子废料中拆卸出来的正品芯片，经过再加工后看起来像新的一样。它们非常难以辨别，因为芯片本身确实是正品，且经验丰富的翻新商可以制作出外观如新的芯片，只有通过同位素或元素分析才能识别出它们是曾经使用过的。
- en: This category also includes parts that are “new” in the sense that they’ve never
    been soldered onto a board but have been stored improperly, perhaps in a humid
    environment. Such chips should be scrapped but are sometimes stuck in a fresh
    foil pack with a more recent date code, and sold as new.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这一类别还包括那些“新”的零件，它们从未焊接到电路板上，但可能因为存储不当（例如在潮湿环境中）而变质。此类芯片应该被报废，但有时它们被放入带有较新日期代码的全新铝箔包装中，作为新产品出售。
- en: REBINNED PARTS
  id: totrans-45
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 重新标记的零件
- en: Counterfeiters sometimes remark authentic parts that have never been used (and
    so can be classified as new) as a better version of an otherwise identical part.
    A classic example is grinding and remarking CPUs with a higher speed grade, or
    more trivially, marking parts that contain lead as RoHS-compliant.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 假冒者有时会将从未使用过的正品零件（因此可以归类为新产品）重新标记为更高版本的零件。一个经典的例子是将CPU磨光并重新标记为更高的速度等级，或者更简单地，将含铅的零件标记为符合RoHS标准。
- en: But rebinning can get more sophisticated. Vendors may reverse engineer and reprogram
    the fuse codes inside the remarked chip so that the chip’s electronic records
    actually match the faked markings on top. Vendors have also been known to hack
    flash drive firmware so that a host operating system will perceive a small memory
    as much larger. Such hacks even go so far as to “loop” memory so that writes beyond
    the device capacity appear to succeed, thus requiring a time-consuming full readback
    and comparison of the written data to detect the issue.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 但是重新标记（rebinning）可以变得更加复杂。供应商可能通过逆向工程和重新编程标记芯片内部的保险丝代码，使得芯片的电子记录与顶部伪造的标记实际匹配。供应商还曾通过黑客技术修改闪存驱动器固件，使主机操作系统将小内存识别为更大的内存。这类黑客技术甚至能够“循环”内存，使得超出设备容量的写入操作看起来像是成功的，从而需要费时的完全读取和比较写入的数据来检测问题。
- en: GHOST-SHIFT PARTS
  id: totrans-48
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 幽灵零件
- en: Some fakes are created on the exact same fabrication facility as authentic parts;
    they’re run very late at night by rogue employees without the manufacturer’s authorization
    and never logged on the books. These unlogged production runs are called *ghost
    shifts*. It’s like an employee in a mint striking extra coins after-hours. Ghost-shift
    parts are often assigned a lot code identical to a legitimate run, but certain
    testing steps are skipped.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 一些假冒产品是在与正品相同的制造设施上生产的；它们通常是在深夜由不法员工在未经制造商授权的情况下进行生产，且从未记录在账簿上。这些未记录的生产批次被称为*幽灵班次*。这就像在铸币厂，一名员工在下班后打了额外的硬币。幽灵班次的零件通常会被分配一个与合法生产批次相同的批号，但某些测试步骤被跳过。
- en: Ghost shifts often use marginal material left over from the genuine product
    that would normally be disposed of but was intercepted on the way to the grinder.
    As a result, the markings and characteristics of the material often look absolutely
    authentic. These fakes can be extremely hard to detect.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 幽灵班次通常使用正品生产过程中剩余的边角料，这些材料本该被丢弃，却在送往粉碎机途中被截获。因此，这些材料的标识和特征通常看起来完全正宗。这些假冒产品非常难以察觉。
- en: FACTORY SCRAP
  id: totrans-51
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 工厂废料
- en: Factory rejects and prototype runs can be recovered from the scrap heap for
    a small bribe, given authentic markings, and resold as new. To avoid detection,
    workers often replace the salvaged scrap with physically identical dummy packages,
    thus foiling attempts to audit the scrap trail. This practice of replacing salvageable
    scrap with dummy fakes helps drive the market for the trivial “[external mimicry](ch05.xhtml#ch00lev1sec88)”
    fakes. The existence of an industry that supplies low-quality fakes to dodge audits
    that would otherwise prohibit high-quality fakes gives you an idea of how sophisticated
    and mature the counterfeiting industry has become.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 工厂的次品和原型板可以通过小额贿赂从废料堆中回收，假如它们有正品标记，并重新出售为全新产品。为了避免被发现，工人们通常会将回收的废料替换成外观完全相同的虚假包装，从而使得审计废料的尝试失败。这种用虚假替代品替换可回收废料的做法，推动了“[外部模仿](ch05.xhtml#ch00lev1sec88)”假货市场的形成。一个供应低质量假货的行业，能够规避本应禁止高质量假货的审计，这表明了假冒行业的复杂性和成熟度。
- en: SECOND-SOURCING GONE BAD
  id: totrans-53
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 第二来源失败
- en: '*Second-sourcing* is a standard industry practice where competitors create
    pin-compatible replacements for popular products to drive price competition and
    strengthen the supply chain against events like natural disasters. The practice
    goes bad when inferior parts are remarked with the logos of premium brands.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '*第二来源*是业界标准做法，竞争对手为热门产品创建兼容替代品，以推动价格竞争并加强供应链抵御自然灾害等事件。当劣质零件被贴上高端品牌标志时，这种做法就会变坏。'
- en: High-value but functionally simple discrete analog chips such as power regulators
    are particularly vulnerable to this problem. Premium US-branded power regulators
    sometimes fetch a price 10 times higher than drop-in Asian-branded substitutes.
    However, the Asian-branded parts are notorious for spotty quality, cut corners,
    and poor parametric performance. Clearly, there is ample opportunity for counterfeiters
    to make a lot of money by buying unmarked chips from the second-source fab and
    remarking them with authentic-looking top marks of premium US brands. In some
    cases, there are no inexpensive or fast tests to detect these fakes, short of
    decapsulating the chip and comparing mask patterns and cross-sections, as I did
    for the ST19CF68.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 高价值但功能简单的离散模拟芯片，如电源调节器，尤其容易受到这一问题的影响。美国品牌的高端电源调节器有时价格是亚洲品牌替代品的10倍。然而，亚洲品牌的部件以质量参差不齐、偷工减料和参数性能差而闻名。显然，假冒者有充足的机会通过购买无标记的芯片，并用看似正品的美国品牌标记重新标记它们，从而赚取大量金钱。在某些情况下，除了对芯片进行去壳处理并比较掩模图案和横截面，就没有便宜或快速的测试方法可以检测到这些假冒产品，就像我为ST19CF68所做的那样。
- en: '**Fakes and US Military Designs**'
  id: totrans-56
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**假冒和美国军用设计**'
- en: The variety of counterfeiting methods available, combined with the fact that
    many commodity parts have production cycles of only a few years, presents a big
    problem for institutions like the US military, where design lifetimes are often
    measured in decades. It’s like asking someone to build a NeXTcube[*](footnote.xhtml#fn12)
    motherboard today using only certifiably new parts, with no secondhand or refurbished
    parts allowed. I don’t think it’s possible.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 假冒方法种类繁多，再加上许多商品零部件的生产周期通常只有几年，这给像美国军方这样的机构带来了大问题，因为这些机构的设计生命周期往往以几十年为单位衡量。这就像要求某人今天使用仅有的全新部件，且不允许使用任何二手或翻新部件，来建造一块NeXTcube[*](footnote.xhtml#fn12)主板。我认为这是不可能的。
- en: The impossibility of this situation may sometimes make military contractors
    complicit in the consumption of counterfeit parts to bad effect. In the P-8 Poseidon
    case, people were quick to point fingers at China, but a poor refurbishing job
    is probably detectable with a simple visual inspection. Maybe part of the problem
    is that a subcontractor was lax in checking incoming stock—or perhaps looking
    the other way. If those parts were the last of their kind in the world, what else
    could be done?
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况的不可能性有时可能导致军事承包商在使用假冒零件时变得共谋，产生不良后果。在P-8海神号的案例中，人们迅速将责任指向中国，但通过简单的视觉检查，可能就能发现翻新工作不当的问题。问题的部分原因可能是某个分包商在检查进货库存时疏忽了——或者可能是睁一只眼闭一只眼。如果这些零件是世界上最后一批那样的零件，那么还能做什么呢？
- en: My guess is that the stocks of any distributor in the secondhand electronics
    business are already flooded with undetected counterfeits. Remember, only the
    bad fakes are ever caught, and chip packaging was not designed with anticounterfeiting
    measures in mind. While all gray-market parts are suspect, that’s not necessarily
    a bad thing.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我的猜测是，任何二手电子产品经销商的库存中，早已充斥着未经察觉的假冒品。记住，只有那些劣质的假货才会被发现，而芯片包装并没有考虑到反假冒措施。虽然所有灰色市场的零件都值得怀疑，但这不一定是坏事。
- en: Gray markets play an essential role in the electronics ecosystem; using them
    is a calculated, but sometimes unavoidable, risk. In fact, many traders in the
    gray market are very upfront about their goods being recycled. Many even post
    signs on their stalls advertising this fact. However, these signs are written
    in Chinese. In that case, whose fault is it—the seller for selling recycled goods,
    or the buyer for not being able to read the sign?
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 灰色市场在电子产品生态系统中发挥着重要作用；使用灰色市场是一个经过计算的，但有时无法避免的风险。事实上，许多灰色市场的商贩非常直率地承认他们的商品是回收的。许多人甚至在摊位上张贴广告标牌，标明这一事实。然而，这些标牌是用中文写的。在这种情况下，责任应该由谁承担——卖家因为出售回收商品，还是买家因为无法读懂标牌？
- en: '**Anticounterfeit Measures**'
  id: totrans-61
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**反假冒措施**'
- en: The counterfeit chip situation is a mess, but some simple measures could fix
    it.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 假冒芯片的情况混乱不堪，但一些简单的措施可以解决这一问题。
- en: PHYSICAL IDENTIFIERS
  id: totrans-63
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 物理标识符
- en: Embedding anticounterfeit measures in chips approved for military use is one
    option. For chips larger than 1 cm wide, a unique 2D barcode could be laser-engraved
    by equipment relatively common in chip packaging facilities. Despite a tiny footprint,
    the codes would be backed with a guarantee of 100 percent uniqueness. Such techniques
    are effective in biotech, where systems like Matrix 2D track disposable sample
    tubes in biology labs.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在批准用于军事用途的芯片中嵌入反假冒措施是一种选择。对于宽度大于1厘米的芯片，可以通过在芯片包装设施中相对常见的设备激光刻印唯一的二维条形码。尽管条形码的尺寸极小，但它们背后有100%唯一性的保障。这些技术在生物技术中非常有效，例如Matrix
    2D系统用于追踪生物实验室中一次性样本管。
- en: Another potential solution is to mix a UV dye into the component’s epoxy that
    changes fluorescence properties upon exposure to *reflow* temperatures—a consistent
    set of well-defined temperatures at which solder melts. This makes it impossible
    to recondition the chip to a “new” state after it’s been soldered down the first
    time. If the dye is distributed through the entire package body, it will be impossible
    to remove with surface grinding alone.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个潜在的解决方案是将紫外线染料混入组件的环氧树脂中，使其在暴露于*回流*温度时改变荧光特性——回流温度是焊料熔化时的一组一致的、明确的温度。这使得在芯片第一次焊接后，无法将其重新加工成“新”状态。如果染料分布在整个封装体内，仅用表面打磨是无法去除的。
- en: CHANGING HOW E-WASTE IS HANDLED
  id: totrans-66
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 改变电子废物的处理方式
- en: Managing e-waste more effectively would also alleviate the counterfeit problem.
    E-waste is harvested in bulk for used parts. Crudely desoldered MSM-series chips—the
    brains of many Android smartphones, made by Qualcomm and marketed under the brand
    name of Snapdragon—are purchasable by the pound, at around 10 cents per chip.
    Counterfeiters clean up the chips, *reball* (that is, add new solder balls, for
    ball-grid array packages) and sometimes remark them, put them into tapes and reels,
    and sell them as brand-new, commanding a markup 10 times the original purchase
    price. A single batch of refurbished chips can net thousands of dollars, making
    the practice a compelling source of income for skilled workers who would otherwise
    earn $200 per month in a factory doing exactly the same thing.[*](footnote.xhtml#fn13)
    (Factories are typically authorized to recover chips off of defective boards or
    consumer returns that can’t be repaired.)
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 更有效地管理电子废弃物也将缓解假冒问题。电子废弃物大量收集用于二手零件。未经精细拆焊的MSM系列芯片——许多安卓智能手机的大脑，由高通生产并以“Snapdragon”品牌销售——按磅购买，价格约为每颗芯片10美分。假冒者清理这些芯片，*重新焊球*（即为球栅阵列封装添加新的焊球），有时还会重新标记它们，将其放入带状卷盘中，并作为全新产品出售，售价是原购价的10倍。一批翻新的芯片可以赚取数千美元，这使得这一做法成为熟练工人的一个有吸引力的收入来源，他们在工厂做同样的工作时每月可能只能赚200美元。[*](footnote.xhtml#fn13)（工厂通常被授权回收那些无法修复的损坏板卡或消费者退货的芯片。）
- en: If the United States stopped shipping e-waste overseas for disposal, or at least
    ground up the parts before shipping them, then the supply for refurbished chip
    markets would decrease. Domestic e-waste processing would also create more jobs,
    a resource as valuable as gold.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果美国停止将电子废弃物运往海外处理，或者至少在运输之前将这些零件粉碎，那么翻新芯片市场的供应将会减少。国内电子废弃物处理还将创造更多就业机会，这是一种与黄金一样宝贵的资源。
- en: On the other hand, I think component-level recycling is quite good for the environment
    and the human ecosystem in the long term. Most electronic parts will function
    perfectly for years beyond a consumer’s trash bin, and emerging economies create
    technology-hungry markets that can’t afford new parts purchased on the primary
    market.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，我认为从长远来看，组件级回收对环境和人类生态系统非常有益。大多数电子零件在消费者丢弃后仍能完美工作多年，新兴经济体则创造了无法负担在主市场购买新零件的技术需求市场。
- en: KEEPING A RESERVE OF AUTHENTIC PARTS
  id: totrans-70
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 保持正品零件储备
- en: 'A final option to ensure trustworthiness for critical military hardware could
    be to establish a strategic reserve of parts. A production run of military planes
    is limited to perhaps hundreds of units, a small volume compared to consumer electronics
    production runs. I imagine the lifetime demand of a part, including replacements,
    is limited to tens of thousands of units. Physically, then, a parts reserve isn’t
    unmanageable: 10,000 chips will fit inside a large shoebox.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 确保关键军事硬件可信度的最终选择之一可能是建立一个零件的战略储备。军事飞机的生产批次可能只有几百个单元，相较于消费电子产品的生产批次，这是一个较小的数量。我想，某个零件的生命周期需求，包括替换品，可能仅限于几万单元。从物理上讲，零件储备并不难以管理：10,000颗芯片可以装进一个大鞋盒里。
- en: Financially, I estimate purchasing a reserve of raw replacement components for
    critical avionics systems would add only a fraction of a percent to the cost of
    an airplane. This could even lead to long-term savings, as manufacturers can achieve
    greater scale efficiency if they run one large batch all at once.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 从财务角度来看，我估计为关键航空电子系统购买替换零件的储备，只会增加飞机成本的一小部分。这甚至可能带来长期的节省，因为制造商可以通过一次性大批量生产来实现更大的规模效益。
- en: Obviously, anticounterfeit measures would be incredibly useful in civilian projects,
    too. I have sympathy for anyone who has to deal with counterfeit parts, as I myself
    have been burned on several occasions. Here’s a tale of a particularly annoying
    issue I ran into during my work on the chumby One.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，防伪措施在民用项目中也将非常有用。我对任何必须处理假冒零件的人深感同情，因为我自己也曾多次遭遇过类似问题。这是我在处理chumby One时遇到的一个特别恼人的问题。
- en: '**FAKE MICROSD CARDS**'
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**假冒的MicroSD卡**'
- en: In December 2009, in the middle of the chumby One’s production run, I set out
    on a forensic investigation to find the truth behind some irregular Kingston memory
    cards. The factory called to tell me that SMT yield dropped dramatically on one
    lot of chumby Ones, so I drove over to see what I could do to fix the problem.
    After poking and prodding at some chumby Ones, I realized that all failing units
    had Kingston microSD cards from a particular lot code. I had the factory pull
    the entire lot of microSD cards from the line and rework the units that had these
    cards loaded. After swapping the cards, yield returned to normal.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 2009年12月，在chumby One的生产过程中，我开始进行法医调查，试图找出一些不规则的金士顿内存卡背后的真相。工厂打电话告诉我，有一批chumby
    One的SMT良率大幅下降，于是我开车过去看看能做些什么来解决问题。经过一番检查后，我意识到所有出现故障的单元都使用了来自特定批次的金士顿microSD卡。我让工厂把整批microSD卡从生产线上拉下来，并重新加工那些使用了这些卡的单元。更换卡片后，良率恢复正常。
- en: The story should have ended there. In this situation, I’d usually get a return
    merchandise authorization (RMA) from the manufacturer for the defective parts,
    exchange the lot for parts that work, and move on. But I had a couple of problems.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 故事应该就此结束。在这种情况下，我通常会从制造商那里获得退货授权（RMA）以处理有缺陷的零件，交换掉不合格的部件，然后继续进行。但我遇到了几个问题。
- en: First, Kingston wouldn’t take the cards back, because we programmed them. Second,
    there were a lot of defective cards (about 1,000 altogether, and chumby was already
    deeply backordered), and memory cards aren’t cheap. This type of memory card cost
    around $4 or $5 at the time, leaving a few thousand dollars in scrap if we couldn’t
    get them exchanged. Chumby couldn’t afford to sneeze at a few kilobucks, so I
    kicked into forensics mode.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，金士顿不会接受这些卡片，因为我们已经对其进行了编程。其次，这批卡片有很多缺陷（大约有1000张，而chumby已经深度缺货），而内存卡并不便宜。当时这种类型的内存卡大约价值4到5美元，如果我们无法更换它们，将会造成几千美元的废料。Chumby无法忽视几千美元的损失，所以我开始进入法医模式。
- en: '**Visible Differences**'
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**可见的差异**'
- en: Irregular external markings were the first suspicious feature I noticed about
    the defective Kingston cards.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 外部标记的不规则性是我注意到的第一个可疑特征。
- en: '![image](../images/f0157-01.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0157-01.jpg)'
- en: '*An irregular microSD card (left) and a normal card (right).'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '*不规则microSD卡（左）和正常卡（右）。'
- en: The arrows and circles show suspicious differences.*
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 箭头和圆圈标出了可疑的差异。*
- en: The strangest physical difference was that the lot code on the irregular card
    was silkscreened with the same stencil as the main logo. Silkscreening a lot code
    isn’t unusual, but typically, the manufacturer won’t use the same stencil for
    the lot code and the logo. There should be some variance in the coloration, font,
    or alignment of the lot code from the rest of the text. The entire batch of irregular
    cards also had the same lot code (N0214-001.A00LF). Typically, the lot code changes
    at least every couple hundred cards. Contrast the irregular card with the normal
    card, which is laser-marked. The normal cards’ lot codes varied with every tray
    of 96 units.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 最奇怪的物理差异是，不规则卡片上的批次代码与主标志使用了相同的丝网印刷模板。丝网印刷批次代码并不罕见，但通常情况下，制造商不会使用相同的模板来印刷批次代码和标志。批次代码的颜色、字体或对齐方式应与其他文字有所不同。这批不规则卡片的批次代码也完全相同（N0214-001.A00LF）。通常情况下，批次代码至少会在每几百张卡片中更换一次。与之对比的是正常卡片，它们的批次代码是激光标记的。正常卡片的批次代码在每个96单元的托盘中都有所不同。
- en: 'The second strange feature was subtler and perhaps not damning: an irregularity
    in the microSD logo. Brand-name vendors like Kingston are very picky about the
    accuracy of their logos: SanDisk cards have a broken *D*, but Kingston cards sold
    in the United States almost universally use a solid *D*.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个奇怪的特征则更微妙，也许并不致命：microSD标志上的不规则性。像金士顿这样的品牌商非常注重标志的准确性：SanDisk的卡片有一个断开的*D*，但在美国销售的金士顿卡几乎都使用一个完整的*D*。
- en: '**Investigating the Cards**'
  id: totrans-85
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**调查卡片**'
- en: 'Oddities in the external markings were just the start. When I read the electronic
    card ID data on the two cards (by checking */sys* entries in Linux), this is what
    I found in the irregular card:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 外部标记的奇异之处只是开始。当我读取两张卡片的电子卡ID数据时（通过检查Linux中的*/sys*条目），我发现了在不规则卡片中以下内容：
- en: '[PRE0]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'And this is what I found in the normal card:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 而我在正常卡片中发现了以下内容：
- en: '[PRE1]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'First, notice the `date` code on the irregular card. Dates are counted as the
    offset from 00/2000 in the CID field, so a value of 00/2000 means the manufacturer
    didn’t bother to assign a date. Furthermore, in the year 2000, 2GB microSD cards
    didn’t even exist. Also, the serial number on the defective card is very low:
    in decimal, 0x960 is 2,400\. Other cards in the irregular batch had similarly
    low serial numbers, in the hundreds or thousands.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，注意一下不规范卡上的`date`码。日期是从00/2000开始在CID字段中计算的偏移量，因此00/2000意味着制造商没有指定日期。而且，在2000年，2GB的microSD卡根本不存在。另外，故障卡上的序列号非常低：以十进制表示，0x960是2400。其他不规范批次中的卡也有类似低的序列号，通常在几百或几千之间。
- en: For a popular product like a microSD card, the chance of getting the very first
    units out of a factory is pretty remote. For example, the serial number of the
    normal card is 0x9C62CAE6 in hexadecimal, or 2,623,720,166 in decimal, which is
    much more feasible. Very low serial numbers, like very low MAC ID addresses, are
    hallmarks of a ghost shift.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 对于像microSD卡这样流行的产品，拿到工厂生产的第一批卡的机会非常小。例如，正常卡的序列号是0x9C62CAE6（十六进制），或者2,623,720,166（十进制），这显然是更现实的。而非常低的序列号，像非常低的MAC地址，是“鬼班”的标志。
- en: Finally, the manufacturer’s ID on the irregular card is 0x41 (capital *A* in
    ASCII), which I didn’t recognize.[*](footnote.xhtml#fn14) The original equipment
    manufacturer identification (OEMID) number was 0x3432—an ASCII 42, which is one
    more than the hex value for the manufacturer ID. Manufacturer IDs are usually
    the ASCII character given by the hexadecimal value, not the hexadecimal values
    themselves. Confusing hex and ASCII is a possible sign that someone who didn’t
    appreciate the meaning of the fields was running a ghost shift making these cards.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，不规范卡上的制造商ID是0x41（ASCII中的大写*A*），我没有认出来。[*](footnote.xhtml#fn14)原始设备制造商标识（OEMID）号码是0x3432—一个ASCII
    42，它比制造商ID的十六进制值大了1。制造商ID通常是通过十六进制值表示的ASCII字符，而不是十六进制值本身。将十六进制和ASCII混淆可能表明有人在做不懂这些字段意义的“鬼班”工作，制作这些卡。
- en: '**Were the MicroSD Cards Authentic?**'
  id: totrans-93
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**这些MicroSD卡是真的吗？**'
- en: Armed with this evidence, Chumby confronted the Kingston distributor in China
    and Kingston’s US sales representative. We asked whether the cards were authentic
    and, if so, why the serialization codes were irregular. After some time, Kingston
    swore the cards were authentic, not fakes, but it did reverse its position on
    exchanging the cards. The company took back the programmed cards and gave us new
    ones, no further questions asked.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些证据，Chumby与中国的金士顿分销商和金士顿美国的销售代表进行了对质。我们问他们这些卡是否为正品，如果是的话，为什么序列号不规范。经过一段时间，金士顿发誓这些卡是真的，绝非伪造，但它确实改变了原先不换卡的立场。公司回收了那些已编程的卡，并给了我们新的卡，且没有再问任何问题。
- en: However, Kingston never said why the card ID numbers were irregular. I know
    Chumby was small fry compared to the Nokias of the world, but companies should
    still answer basic questions about quality control, even for small fry. I was
    once accidentally shipped an old version of a Quintic part, and once I could prove
    the issue, I received world-class customer service from Quintic. The company gave
    me a thorough explanation and immediately paid for a full exchange of the parts.
    That was exemplary service, and I commend and strongly recommend Quintic for it.
    Kingston, on the other hand, did not set an example to follow.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，金士顿从未解释过为什么卡的ID号码不规范。我知道Chumby与诺基亚等大公司相比算不上什么大公司，但公司还是应该回答关于质量控制的基本问题，哪怕是面对小公司。我曾经无意中收到了一款过时的Quintic零件，一旦我证明了问题，Quintic公司就给了我世界级的客户服务。公司详细解释了问题，并立刻为我安排了零件的全额交换。这是值得称赞的服务，我对此表示强烈推荐。反观金士顿，它并没有树立值得学习的榜样。
- en: I’d normally have disqualified Kingston as a vendor, but I was persistent. It
    was disconcerting that a high-profile, established brand would stand behind such
    irregular components. Who could say SanDisk or Samsung wouldn’t do the same? Price
    erosion at the time hit flash vendors hard, and as small fry, I could have been
    taken advantage of by any of those companies as a sink for marginal material to
    improve their bottom line. Given the relatively high cost of microSD cards, I
    needed *incoming quality control (IQC)* guidelines for inspections to follow to
    accept or reject shipments from memory vendors based on set quality standards.
    To develop those guidelines, I continued digging for the truth behind those cards.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '**Further Forensic Investigation**'
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: First, I collected a lot of sample microSD cards. I wanted to collect both regular
    *and* irregular cards in the wild, so I went to the Hua Qiang Bei district and
    wandered around the gray markets there. I bought 10 memory cards from small vendors,
    at prices from 30 to 50 RMB ($4.40 to $7.30 USD).
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: Shopping for irregular cards was interesting. In talking to a couple dozen vendors,
    I learned that Kingston, as a brand, was weak in China for microSD cards. SanDisk
    did a lot more marketing, so SanDisk cards were much easier to find on the open
    market, and the quality of gray-market SanDisk cards was fairly consistent.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: Small vendors were also entirely brazen about selling well-crafted fakes. They
    had bare cards sitting loose in trays in the display case. ([Page 11](ch01.xhtml#page_11)
    in [Chapter 1](ch01.xhtml#ch01) has photos showing what an SD card vendor’s stall
    looks like.) Once I agreed on a price and committed to buying a card, the vendor
    tossed a loose card into a “real” Kingston retail package, miraculously pulled
    out a certificate—complete with hologram, serial numbers, and a [kingston.com](http://kingston.com)
    URL to visit to validate the purchase—and slapped the certificate on the back
    of the retail package right in front of my eyes.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0161-01.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
- en: '*A freshly purchased Kingston microSD card. It was just like new!*'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
- en: One vendor particularly interested me. There was literally a mom, a pop, and
    one young child sitting in a small stall of the mobile phone market. They were
    busily slapping dozens of non-Kingston cards into Kingston retail packaging. They
    had no desire to sell to me, but I was persistent. This card interested me in
    particular because it also had the broken *D* logo, but no Kingston marking. The
    preceding photo is the card and the package it came in; the card is Sample 4 in
    the next section, where you can see a detailed analysis of seven different microSD
    cards from my shopping trip.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '**Gathering Data**'
  id: totrans-104
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: After collecting my samples, I read out their card ID information by checking
    their */sys* entries under Linux and then decapsulated (that is, dissolved) their
    packages with nitric acid. As you can see in the photos in [Table 2](ch05.xhtml#tab02),
    my decapsulation technique was pretty crude. Most of the damage to the cards came
    from removing dissolved encapsulant with acetone and a Q-tip. I had to get a little
    rough, which didn’t do the bond wires any favors. But it was good enough for my
    purposes.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: 'Here’s all the basic information I pulled from those cards:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 1** The irregular card that started this whole investigation. It was
    purchased through a sanctioned Kingston distributor in China, and to the best
    of my knowledge, none were shipped to Chumby’s end customers. MID = 0x000041,
    OEMID = 0x3432, serial = 0x960, name = SD2GB.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 2** A normal card that I purchased from the same sanctioned Kingston
    distributor in China where I bought Sample 1\. It was typical of microSD cards
    actually shipped in the first lot of chumby Ones. MID = 0x000002, OEMID = 0x544D,
    serial = 0x9C62CAE6, name = SA02G.'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 3** A Kingston card purchased through a major US retail chain. MID
    = 0x000002, OEMID = 0x544D, serial = xA6EDFA97, name = SD02G. Note how the MID
    and OEMID are identical to those Sample 2, but not Sample 1.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 4** The non-Kingston card I saw slapped into Kingston-marked packaging,
    bought on the open market in Shenzhen. MID = 0x000012, OEMID = 0x3456, serial
    = 0x253, name = MS. Note the low serial number.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 5** A device from a more established retailer in the Shenzhen market.
    I bought it because it had the XXX.A00LF marking, like my original irregular card.
    MID = 0x000027, OEMID = 0x5048, serial = 0x7CA01E9C, name = SD2GB.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 6** A SanDisk card bought on the open market from a sketchy shop run
    by a sassy chain-smoking girl who wouldn’t stop texting. I actually acquired three
    total SanDisk cards from different sketchy sources, but all of them checked out
    with the same CID info, so I opened only one. MID = 0x000003, OEMID = 0x5344,
    serial = 0x114E933D, name = SU02G.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '**Sample 7** A Samsung card that I bought from a Samsung wholesale distributor.
    I didn’t scan this one before decapsulating it, and the card actually had no markings
    on the outside (it was blank, with just a laser mark on the back), so I didn’t
    photograph it. From appearances alone, it was the sketchiest of the bunch, but
    it was one of the best built. You can’t judge a book by its cover! MID = 0x00001B,
    OEMID = 0x534D, serial = 0xB1FE8A54, name = 00000.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: That’s a lot of data, and I had my work cut out for me in drawing some kind
    of useful conclusion from it all.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: '*Interestingly, one SanDisk card from three in Sample 6 turned out to be used
    and only quick-formatted. With help from some recovery software, I found DLLs,
    WAVs, maps, and VeriSign certificates belonging to Navione’s Careland GPS. Someday,
    I’ll acquire lots of refurb microSD cards and collect interesting data from them.*'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
- en: '**Table 2:** A Breakdown of All the Cards Collected for the Investigation'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/t0164-01.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
- en: '**Summarizing My Findings**'
  id: totrans-119
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Here are the most interesting high-level conclusions I drew from my survey:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: • The “normal” Kingston cards (Samples 2 and 3) were fabricated by Toshiba,
    as indicated by the flash die markings and their OEMIDs. In ASCII, 0x544D is *TM*,
    presumably for *Toshiba Memory*. These cards employ Toshiba controllers and Toshiba
    memory chips and seem to be of good quality. Thankfully, they were only ones sent
    to Chumby customers.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: • The irregular card (Sample 1) used the same controller chip as the outright
    fake (Sample 4) I bought in the market. Both the irregular Kingston and the fake
    Kingston had low serial numbers and wacky ID information. Both of these cards
    exhibited abnormal operation under certain circumstances. I still hesitate to
    call Kingston’s irregular card a fake, as that’s a very strong accusation, but
    its construction was similar to another card of clearly questionable quality,
    which leads me to question Kingston’s choice of authorized manufacturing partners.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: • The irregular card is the only card in the group that does not use a stacked
    CSP construction. Instead, it uses *side-by-side bonding*—that is, the microcontroller
    and the memory chip are simply placed next to each other. Stacked CSPs place the
    microcontroller on top of the memory chip. This is significantly more complex
    than side-by-side placement because the chips must first have their inert back-side
    material ground off to make the overall height of the stack fit inside such a
    slim package. Despite the difficulty, stacking chips is popular because it allows
    vendors to cram more silicon into the same footprint.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: • The only two memory chip foundries in this sample set were Toshiba/SanDisk
    and Samsung. (SanDisk and Toshiba coown the factory that makes their memory chips.)
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: • Samsung’s NAND die, which is the most expensive part of a microSD card, is
    about 17 percent larger than dies from Toshiba/SanDisk. This means that Samsung
    microSD cards should naturally carry a slightly higher price than Toshiba/SanDisk
    cards. However, Samsung can offset that against the ability to place the same
    bare die that normally gets crammed inside a microSD package into thin small outline
    package (TSOP) devices suitable for board-level machine assembly instead. If demand
    for microSD cards slumps, Samsung can slap excess bare dies inside TSOP packages
    and sell those to third parties that do conventional machine assembly of chips.
    Plus, Samsung also doesn’t have a middleman like Kingston to eat away at margins.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: I knew (like many others in manufacturing) that Kingston wasn’t a semiconductor
    manufacturer, in that it owned no fabrication facilities, but this research implied
    that Kingston did no original design of its own. I hoped to at least find a Kingston-branded
    controller chip inside the Kingston cards, even if the chip was fabricated by
    a foundry. I also expected to see Kingston sourcing memory chips from a broader
    variety of companies. Being able to balance the supply chain and be less dependent
    on a single, large competitor for chips would be a significant value-add to customers,
    giving Kingston leverage to negotiate a better price that few others can achieve.
    But every Kingston card I bought had a SanDisk/Toshiba memory chip inside. The
    only “value-add” that I saw was in the selection of the controller chip.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: Oddly enough, of all the vendors, Kingston quoted Chumby with the best lead
    times and pricing, despite SanDisk and Samsung making all their own silicon and
    thereby having lower inherent costs. This told me that Kingston must have a very
    low margin on its microSD cards, which could explain why irregular cards found
    their way into its supply chain. Kingston is also probably more willing to talk
    to smaller accounts like Chumby because, as a channel brand, Kingston can’t compete
    against OEMs like SanDisk or Samsung for the biggest contracts from the likes
    of Nokia and Apple.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: So, the irregular microSD card I pulled from the chumby One production line
    may not have been counterfeit, but it was still a child of the remarking ecosystem
    in China. Kingston is more of a channel trader and less of a technology provider,
    and is probably seen by SanDisk and Toshiba as a demand buffer for their production
    output. I also wouldn’t be surprised if SanDisk/Toshiba sold Kingston less-than-perfect
    parts, keeping the best of the lot for themselves. Thus I’d expect Kingston cards
    to have slightly more defective sectors, but thanks to the magic of error correction
    and spare sectors, this fact is hidden to end users.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: As a result, Kingston plays an important role in stabilizing microSD card prices
    and improving fab margins. But the potential conflict of interest seems staggering,
    and I’m still very curious about how this ecosystem came to be. Buying a significant
    amount of a competitor’s technology from a competitor’s fab yet still selling
    at a competitive price is counterintuitive to me, and perhaps my greatest folly
    in investigating that irregular microSD card was expecting something different.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: '**FAKE FPGAS**'
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Anyone who has done manufacturing in China for a while will have more than one
    story about irregularities in the supply chain. Here’s another one of my favorite
    stories, which highlights some of the core incentives that drive agents to cheat.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: '**The White Screen Issue**'
  id: totrans-132
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'It was March 2013, and I was wrapping up the first volume production run of
    a bespoke robotics controller board codenamed Kovan.[*](footnote.xhtml#fn15) At
    the conclusion of any production run, I always review the list of issues encountered
    in production, to identify areas of improvement. Manufacturing is a Sisyphean
    struggle toward perfection: every run has some units you just have to scrap, and
    the difference between profit and loss is how well you can manage the scrap rate.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: On this run, one particular problem, dubbed the “[white screen issue](ch05.xhtml#ch00lev1sec107)”
    after its most obvious symptom, was the dominant problem. About 4 percent of the
    total run exhibited this problem, accounting for almost 80 percent of unit failures.
    I had the factory send me a few samples of the failed units to analyze in more
    detail.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: As I’ve often discovered when analyzing failed units, the most obvious symptom
    of the problem was only tangentially related to the root cause. The LCD screen
    appeared white on these units because the FPGA failed to configure. An FPGA, short
    for *Field Programmable Gate Array*, is essentially a blob of logic and memory
    devices embedded in a dense network of wires that can be configured at runtime
    to behave a certain way. The behavior of the FPGA is typically described in a
    high-level language that resembles a programming language like C (for instance,
    Verilog) or Ada (like VHDL), which is then compiled into a configuration bitstream.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: FPGAs are very handy for implementing time-sensitive hardware interfaces that
    software would have trouble emulating. In this particular application, the FPGA
    controlled everything from the motors to the sensors and even the LCD. When the
    FPGA failed to configure, the LCD didn’t receive sync and data signals, leading
    it to show a blank, white screen instead of the expected factory test patterns.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
- en: FPGA failure was a big deal. For starters, the FPGA was the most expensive part
    on the board by a long shot, at around $11 per chip. I was also worried this problem
    could point to a deeper design issue. Perhaps the FPGA’s power regulators were
    unstable, or maybe there was an issue with the boot sequence that aggravated a
    corner case in configuration timing that would creep into the “good” production
    units as they aged. The situation definitely warranted a deeper investigation.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: '**Incorrect ID Codes**'
  id: totrans-138
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: I hooked up the debug console, dug into the problem, and discovered that the
    failure was linked to the FPGA not responding with the correct ID code. The ID
    code is checked via queries over a test access bus known as *JTAG*. Most users
    don’t check an FPGA ID before programming, but we designed an ID code check into
    Kovan because we allowed customers to specify what capacity FPGA they wanted to
    use for a given production lot. Some applications are more demanding, while others
    are more cost-sensitive. As a result, a customer could have a mixed inventory
    of FPGAs, and we wanted to be able to detect and protect the hardware from an
    accidental mismatch between the bitstream and the FPGA.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: But this was a single production lot, and in theory all the FPGAs should have
    been the same. How, then, could the FPGA have reported a mismatched ID code at
    all? I scratched my head for a while and suspected a bug in our JTAG implementation,
    until I looked up the reported ID code. It was a known code—but for silicon marked
    as “Engineering Samples” from Xilinx, the vendor that makes these FPGAs. Engineering
    samples are preproduction units sold by Xilinx that have some minor known bugs
    but are sufficiently functional for most applications, to the point where most
    customers wouldn’t see a difference, *except* for the ID code.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: I looked closer at the PCB, and for the first time, I noticed that a small,
    white rectangle was laser-etched into the FPGA’s surface. The rectangle was right
    below the part number, where the “ES” designator for an engineering sample would
    normally be marked. Someone had blasted the letters off and sold us engineering
    samples as full production units!
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0171-01.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
- en: '*An engineering sample FPGA on a Kovan board*'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0171-02.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
- en: '*For contrast, an FPGA of the same type that hasn’t been tampered with*'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
- en: The problem was very clearly a supply chain issue, not a design issue. Someone
    in the chain was taking ES silicon, blasting off the letters, and blending them
    in with legitimate units at a rate of around 3 to 5 percent. Typically, Xilinx
    would require that all ES silicon in a distributor’s inventory be scrapped once
    production units become available, but the ES units were almost fully functional,
    to the point where most applications would be unaffected. A production bitstream
    would seamlessly load into an ES part, and nobody would know the difference. The
    only way to tell them apart would be by doing an ID code check, which is, as I
    noted previously, atypical.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
- en: 'Thus, slipping ES silicon into production lots would likely go unnoticed. Mixing
    ES parts in at a rate of 3 to 5 percent was also very clever: a low mix rate makes
    substitutions very hard to catch without 100 percent prescreening of the parts.
    Even in production, if the ES silicon were marginal, it would be maddeningly difficult
    to nail down the root cause of an issue due to its rarity.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: In fact, there’s a correlation between manufacturing difficulty and the use
    of FPGAs. Usually if your design calls for an FPGA, you’re pushing boundaries
    on multiple fronts, so a scrap rate of a few percent is to be expected. The margin
    on FPGA-powered hardware is also often fat enough that a 4 percent failure rate
    might simply be accepted by the end customer. Thus, whoever did this knew exactly
    what they were doing; it was virtually risk-free money.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
- en: Finally, it’s important to note that most vendors in a supply chain survive
    on single-digit margins, so finding an extra 3 to 5 percent of “free money” on
    the most expensive part on a board virtually doubles profitability. That provides
    a very strong incentive to cheat, especially if you think you won’t be caught.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: '**The Solution**'
  id: totrans-150
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The resolution to this problem was quite interesting. I met with the managers
    and CEO of AQS, the CM charged with producing Kovan, briefed them about the problem,
    and showed them the evidence I had accumulated. When my presentation ended, the
    CEO didn’t point a finger at upstream vendors or partners. Instead, he immediately
    looked his staff in the eyes and asked, “Did any of you do this?” He understood
    better than anyone else in the room that any individual buyer or manager would
    effectively double their take-home pay that month if they could pull off this
    cheat without getting caught.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: In other words, the truly remarkable part of this situation is how rarely the
    problem I experienced happens, given what’s at stake and how hard these problems
    are to catch. And while I do have a few good bar stories to tell about fakes in
    the supply chain, remember that I’ve also shipped hundreds of thousands of units
    of good product. The majority of people I’ve worked with in China are hardworking,
    honest people who pass on easy opportunities to cheat me and turn a profit. It’s
    important not to generalize the whole based on the bad actions of a few.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: At the end of the day, the vendor who sold us the chips didn’t admit fault,
    but they did replace all remarked units at their own cost. (We still had to pay
    for the labor cost to replace the chips and recertify the boards.) This is about
    the closest you can get to an amicable resolution in China when you’re not a giant
    like Apple or Foxconn. I did send a note to Xilinx HQ about potential misbehavior
    by one of their authorized vendors, but in the end, I’m a small customer, and
    the substitution of parts could have happened literally anywhere on the supply
    chain. Even the courier delivering the packages could have done the swap.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: It wouldn’t be worth the cost to Xilinx in terms of manpower, relationships,
    and focus to investigate the problem and rat out the one bad actor in literally
    hundreds of possible suspects. But I’d like to imagine that at least a memo was
    sent around, and whoever was swapping in the ES parts got scared enough that they
    stopped.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: '**CLOSING THOUGHTS**'
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: At the end of the day, a permissive IP ecosystem has benefits and drawbacks.
    As an engineer and a designer, I prefer to be in an ecosystem where ideas are
    accessible, even if it means I have to be on guard for occasional problems with
    fake goods. Put another way, a fundamental prerequisite for virality is the ability
    to make copies. The explosion of interest in hardware startups is in part thanks
    to the highly competitive manufacturing ecosystem that could flourish only in
    a product-over-patent culture.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: Westerners who come to China without understanding the principles of *gongkai*
    and *guanxi[^*](footnote.xhtml#fn16)* often feel like they’re being cheated. But
    once you understand the rules and learn how to use them to drive your interests,
    you won’t feel like the game is rigged against you anymore.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: In the US IP system, honor has little economic value, and law trumps honor.
    For example, patent trolling is a perfectly legal, and very profitable, way to
    make a living. In the Chinese system, however, reputation can trump law. This
    opens the door for corruption but also crowdsources the enforcement of social
    and moral values, driving a market value for honor, especially in local, tightly
    knit communities.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: Of course, the approach of making money by locking up ideas and selling the
    rights to them is patently incompatible with a permissive IP ecosystem. Thankfully,
    the notion that ideas are community property dovetails nicely with my open source
    philosophies. In the next part of the book, I’ll talk more about my experiences
    creating open hardware and building businesses rooted in these principles.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
