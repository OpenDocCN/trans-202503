<html><head></head><body><section epub:type="chapter" id="procedures" title="Chapter&#xA0;4.&#xA0;Procedures"><div class="titlepage"><div class="book"><div class="book"><h2 class="title1">Chapter 4. Procedures</h2></div></div></div><p class="calibre3"><a class="calibre" id="iddle1280"/><a class="calibre" id="iddle1722"/><a class="calibre" id="iddle2020"/>This chapter explains how you can take a “divide and conquer” approach to
programming. Rather than build your programs as one big piece, you’ll be able to write
separate procedures that you then put together. Using procedures will make your programs both easier
to write and easier to test and debug. In this chapter, you’ll learn how to:</p><div class="book"><ul class="itemizedlist"><li class="listitem1"><p class="calibre3">Use message broadcasting to coordinate the behavior of many sprites</p></li><li class="listitem1"><p class="calibre3">Use message broadcasting to implement procedures</p></li><li class="listitem1"><p class="calibre3">Use the “build your own block” feature of Scratch 2</p></li><li class="listitem1"><p class="calibre3">Use structured programming techniques</p></li></ul></div><p class="calibre3"><a class="calibre" id="iddle1078"/><a class="calibre" id="iddle1113"/><a class="calibre" id="iddle1330"/><a class="calibre" id="iddle1331"/><a class="calibre" id="iddle1334"/><a class="calibre" id="iddle1528"/><a class="calibre" id="iddle1726"/>Most of the applications we’ve developed so far contain only one sprite, but most
applications require multiple sprites that work together. An animated story, for example, might have
several characters as well as different backgrounds. We need a way to synchronize the sprites’
assigned jobs.</p><p class="calibre3">In this chapter, we’ll use Scratch’s message-broadcasting mechanism to coordinate
work among several sprites (this was the only way to implement procedures in the previous version of
Scratch). We’ll then discuss how to use Scratch 2’s “custom blocks” feature
to structure large programs as smaller, more manageable pieces called
<span class="calibre"><em class="calibre6">procedures</em></span>. A procedure is a sequence of commands that performs a specific
function. For example, we can create procedures that cause sprites to draw shapes, perform complex
computations, process user input, sequence musical notes, manage games, and do many other things.
Once created, these procedures can serve as building blocks for constructing all sorts of useful
applications.</p><div class="book" title="Message Broadcasting and Receiving"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="message_broadcasting_and_receiving">Message Broadcasting and Receiving</h2></div></div></div><p class="calibre3">So how does the broadcast system in Scratch work in practice? Any sprite can broadcast a
message (you can call this message anything you like) using the <span class="calibre"><strong class="calibre5">broadcast</strong></span> or <span class="calibre"><strong class="calibre5">broadcast and wait</strong></span> blocks (from the
<span class="calibre"><em class="calibre6">Events</em></span> palette) shown in <a class="xref" href="ch04.html#you_can_use_the_message-broadcasting_and" title="Figure 4-1. You can use the message-broadcasting and receiving blocks to coordinate the work of multiple sprites.">Figure 4-1</a>. This broadcast triggers all scripts in all
sprites (including the broadcasting sprite itself) that begin with a matching <span class="calibre"><strong class="calibre5">when I receive</strong></span> trigger block. All sprites hear the broadcast, but
they’ll only act on it if they have a corresponding <span class="calibre"><strong class="calibre5">when I
receive</strong></span> block.</p><div class="figure"><a id="you_can_use_the_message-broadcasting_and" class="calibre"/><div class="book"><div class="book"><a id="med_id00101" class="calibre"/><img alt="You can use the message-broadcasting and receiving blocks to coordinate the work of multiple sprites." src="httpatomoreillycomsourcenostarchimages2134483.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-1. You can use the message-broadcasting and receiving blocks to coordinate the work of multiple
sprites.</div></div><p class="calibre3">Consider <a class="xref" href="ch04.html#broadcast_message_is_received_by_all_spr" title="Figure 4-2. A broadcast message is received by all sprites, even by the sprite that sent the broadcast.">Figure 4-2</a>. It shows four sprites:
starfish, cat, frog, and bat. The starfish broadcasts the <code class="literal">jump</code> message, and that
broadcast is sent to all sprites, including itself. In response to this message, both the cat and
the frog will execute their <code class="literal">jump</code> scripts. Notice how each sprite jumps in its own
way, executing a different script. The bat also receives the <code class="literal">jump</code> message, but it
does not act on it because it was not told what to do when it receives this message. The cat in this
figure knows how to <code class="literal">walk</code> and <code class="literal">jump</code>, the frog can only
<code class="literal">jump</code>, and the bat was taught only to <code class="literal">fly</code>.</p><p class="calibre3">The <span class="calibre"><strong class="calibre5">broadcast and wait</strong></span> command works like the <span class="calibre"><strong class="calibre5">broadcast</strong></span> command, but it waits until all message recipients have finished
executing their corresponding <span class="calibre"><strong class="calibre5">when I receive</strong></span> blocks before
continuing.</p><div class="figure"><a id="broadcast_message_is_received_by_all_spr" class="calibre"/><div class="book"><div class="book"><a id="med_id00102" class="calibre"/><img alt="A broadcast message is received by all sprites, even by the sprite that sent the broadcast." src="httpatomoreillycomsourcenostarchimages2134485.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-2. A broadcast message is received by all sprites, even by the sprite that sent the
broadcast.</div></div><div class="book" title="Sending and Receiving Broadcasts"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="sending_and_receiving_broadcasts">Sending and Receiving Broadcasts</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1305"/><a class="calibre" id="iddle1338"/><a class="calibre" id="iddle1531"/><a class="calibre" id="iddle1994"/><span class="calibre"><em class="calibre6">SquareApp.sb2</em></span></p><p class="calibre3">To demonstrate how message broadcasting and receiving work, let’s create a simple
application that draws randomly colored squares. When the user clicks the left mouse button on the
Stage, the Stage will detect this event (using its <span class="calibre"><strong class="calibre5">when this sprite
clicked</strong></span> block) and broadcast a message that you’ll call <code class="literal">Square</code>
(you can choose a different name if you want). When the only sprite in this application receives
this message, it will move to the current mouse position and draw a square. Follow these steps to
create the application:</p><div class="book"><ol class="orderedlist"><li class="listitem1"><p class="calibre3">Start Scratch and then select <span class="calibre"><strong class="calibre5">New</strong></span> from the File menu to
start a new application. Feel free to change the cat’s costume to anything you like.</p></li><li class="listitem1"><p class="calibre3">Add the <span class="calibre"><strong class="calibre5">when I receive</strong></span> block (from the
<span class="calibre"><em class="calibre6">Events</em></span> palette) to the Scripts Area of the sprite. Click the down arrow in this
block and select <span class="calibre"><strong class="calibre5">new message...</strong></span> from the drop-down menu. In the
dialog that appears, type <code class="literal">Square</code> and click <span class="calibre"><strong class="calibre5">OK</strong></span>.
The name of the block should change to <span class="calibre"><strong class="calibre5">when I receive
Square</strong></span>.</p></li><li class="listitem1"><p class="calibre3">Complete the script as shown in <a class="xref" href="ch04.html#square_message_handler" title="Figure 4-3. The Square message handler">Figure 4-3</a>. The sprite first
lifts its pen and moves to the current mouse position, indicated by the <span class="calibre"><strong class="calibre5">mouse x</strong></span> and <span class="calibre"><strong class="calibre5">mouse y</strong></span> blocks (from the
<span class="calibre"><em class="calibre6">Sensing</em></span> palette). It then picks a random pen color, lowers its pen, and draws a
square.</p></li></ol></div><p class="calibre3">The sprite is now ready to handle the <code class="literal">Square</code> message when it is received.
The script in <a class="xref" href="ch04.html#square_message_handler" title="Figure 4-3. The Square message handler">Figure 4-3</a> can be called a <span class="calibre"><em class="calibre6">message
handler</em></span> since its job is to handle (or process) a broadcast message.</p><div class="figure"><a id="square_message_handler" class="calibre"/><div class="book"><div class="book"><a id="med_id00103" class="calibre"/><img alt="The Square message handler" src="httpatomoreillycomsourcenostarchimages2134487.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-3. The <span class="calibre"><em class="calibre6"><code class="literal1">Square</code></em></span> message handler</div></div><p class="calibre3"><a class="calibre" id="iddle1114"/><a class="calibre" id="iddle1370"/><a class="calibre" id="iddle1372"/><a class="calibre" id="iddle1529"/><a class="calibre" id="iddle1683"/><a class="calibre" id="iddle1685"/><a class="calibre" id="iddle1759"/>Now, let’s go to the Stage and add the code to broadcast the
<code class="literal">Square</code> message in response to a mouse click. Click the Stage in the Sprite List
and add the two scripts shown in <a class="xref" href="ch04.html#two_scripts_for_the_stage_in_the_square" title="Figure 4-4. The two scripts for the Stage in the Square drawing application">Figure 4-4</a>. The
first script clears any pen marks from the Stage when the green flag is clicked. The second script,
which is triggered when the user clicks the mouse on the Stage, uses the <span class="calibre"><strong class="calibre5">broadcast</strong></span> block to tell the sprite that it is time to draw.</p><div class="figure"><a id="two_scripts_for_the_stage_in_the_square" class="calibre"/><div class="book"><div class="book"><a id="med_id00104" class="calibre"/><img alt="The two scripts for the Stage in the Square drawing application" src="httpatomoreillycomsourcenostarchimages2134489.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-4. The two scripts for the Stage in the <span class="calibre"><em class="calibre6"><code class="literal1">Square</code></em></span> drawing
application</div></div><p class="calibre3">The application is now complete. To test it, just click the mouse on the Stage. It should
respond by drawing a square in response to each mouse click.</p></div><div class="book" title="Message Broadcasting to Coordinate Multiple Sprites"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="message_broadcasting_to_coordinate_multi">Message Broadcasting to Coordinate Multiple Sprites</h3></div></div></div><p class="calibre3"><span class="calibre"><em class="calibre6">Flowers.sb2</em></span></p><p class="calibre3">To see multiple sprites respond to the same broadcast message, let’s create an
application that draws several flowers on the Stage in response to a mouse click. The Flowers
application contains five sprites (named <code class="literal">Flower1</code> through
<code class="literal">Flower5</code>) that are responsible for drawing five flowers on the Stage. Each sprite
has its own costume, as shown in <a class="xref" href="ch04.html#flowers_uses_these_five_petal_sprites_le" title="Figure 4-5. Flowers uses these five petal sprites (as shown in the Paint Editor).">Figure 4-5</a>. Note
how the background of each costume is transparent. Note also the location of the center of rotation
for each costume (marked with the crossed lines).</p><div class="figure"><a id="flowers_uses_these_five_petal_sprites_le" class="calibre"/><div class="book"><div class="book"><a id="med_id00105" class="calibre"/><img alt="Flowers uses these five petal sprites (as shown in the Paint Editor)." src="httpatomoreillycomsourcenostarchimages2134491.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-5. Flowers uses these five petal sprites (as shown in the Paint Editor).</div></div><p class="calibre3"><a class="calibre" id="iddle1692"/><a class="calibre" id="iddle2021"/>When a sprite receives a message to draw its flower, it will stamp multiple rotated
copies of its costume on the Stage, as illustrated in <a class="xref" href="ch04.html#flowers_applicationapostrophes_drawing_p" title="Figure 4-6. The Flowers application’s drawing process (left) and some possible flowers (right)">Figure 4-6</a>. The figure also shows sample outputs from the
flower-drawing script we’ll explore next.</p><div class="figure"><a id="flowers_applicationapostrophes_drawing_p" class="calibre"/><div class="book"><div class="book"><a id="med_id00106" class="calibre"/><img alt="The Flowers application’s drawing process (left) and some possible flowers (right)" src="httpatomoreillycomsourcenostarchimages2134493.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-6. The Flowers application’s drawing process (left) and some possible flowers
(right)</div></div><p class="calibre3">When you click the mouse on the Stage, the Stage detects the mouse click using the <span class="calibre"><strong class="calibre5">when this sprite clicked</strong></span> block. In response, it clears its background and
broadcasts a message called <code class="literal">Draw</code>. All five sprites respond to this message by
executing a script similar to the one shown in <a class="xref" href="ch04.html#basic_script_used_by_each_of_the_five_sp" title="Figure 4-7. The basic script used by each of the five sprites">Figure 4-7</a>.</p><div class="figure"><a id="basic_script_used_by_each_of_the_five_sp" class="calibre"/><div class="book"><div class="book"><a id="med_id00107" class="calibre"/><img alt="The basic script used by each of the five sprites" src="httpatomoreillycomsourcenostarchimages2134495.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-7. The basic script used by each of the five sprites</div></div><p class="calibre3">The script starts by assigning random values to the color effect, brightness effect, and size
to change the appearance of the drawn flower. It then moves to a random vertical position on the
Stage and draws a flower by stamping rotated replicas of its costume.</p><p class="calibre3">Open this application (named <span class="calibre"><em class="calibre6">Flowers.sb2</em></span>) and run it to see how it works.
Despite its simplicity, its output is intriguing. I encourage you to design different costumes to
create different types of flowers. Change the costumes’ centers to discover even more
interesting flower designs.</p><p class="calibre3">Now that you understand how message broadcasting and receiving work, we’ll move on to
introduce structured programming as a way to manage the complexity of large programs.</p></div></div><div class="book" title="Creating Large Programs in Small Steps"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="creating_large_programs_in_small_steps">Creating Large Programs in Small Steps</h2></div></div></div><p class="calibre3"><a class="calibre" id="iddle1281"/><a class="calibre" id="iddle1316"/>The scripts that you’ve written up to this point are relatively short and simple.
Eventually, you’ll write longer, more complex scripts that contain hundreds of blocks, and
understanding and maintaining them will become a real challenge.</p><p class="calibre3">An approach known as <span class="calibre"><em class="calibre6">structured programming</em></span> was developed in the
mid-1960s to simplify the process of writing, understanding, and maintaining computer programs.
Instead of having you write a single large program, this approach calls for dividing the program
into smaller pieces, each of which solves one part of the overall task.</p><p class="calibre3">Consider, for example, the process of baking a cake. You may not think about the individual
steps as you bake, but the process follows a precise recipe that lists the necessary steps. The
recipe might include instructions like (1) mix 4 eggs, 2 oz of flour, and 1 cup of water; (2) put
the mixture in a pan; (3) put the pan in the oven; (4) bake for 1 hour at 350°F; and so on. In
essence, the recipe breaks down the problem of baking a cake into distinct logical steps.</p><p class="calibre3">Similarly, when you design a solution for your programming problem, it helps to break the
problem down into manageable, “mind-sized” bites. This approach helps you maintain a
clear view of the whole program and the relationships between its component parts.</p><p class="calibre3">Consider <a class="xref" href="ch04.html#breaking_a_large_script_into_logical_par" title="Figure 4-8. Breaking a large script into logical parts that each complete one function">Figure 4-8</a>, which shows a long script
that draws a shape on the Stage. You’ll see that you can divide this script into smaller
logical blocks by function. The first six blocks, for example, initialize the sprite. The first
<span class="calibre"><strong class="calibre5">repeat</strong></span> block draws a square, the second draws a triangle, and so
on. Using the structured programming approach, we can group related blocks together under a
representative name to form procedures.</p><p class="calibre3">Once we write these procedures, we can call them in a certain sequence to solve our
programming problem. <a class="xref" href="ch04.html#breaking_a_large_script_into_logical_par" title="Figure 4-8. Breaking a large script into logical parts that each complete one function">Figure 4-8</a> also shows how the
separate procedures are put together to achieve the same function as the original script. Clearly,
the script that uses procedures (right) is more modular and easier to understand than the original
(left).</p><p class="calibre3">Procedures can also help you avoid writing the same code twice. If a set of commands is
executed in several places in a program, you can write a procedure that performs these commands and
use it instead. This strategy to avoid duplicating code is referred to as <span class="calibre"><em class="calibre6">code
reuse</em></span>. Note, for example, how the <span class="calibre"><strong class="calibre5">Draw square</strong></span>
procedure was reused in <a class="xref" href="ch04.html#breaking_a_large_script_into_logical_par" title="Figure 4-8. Breaking a large script into logical parts that each complete one function">Figure 4-8</a>.</p><p class="calibre3">Using procedures enables you to apply the “divide-and-conquer” strategy to solve
complex problems. You divide a large and complex problem into subproblems and then conquer these
simpler problems individually, testing each one in isolation. After solving all the subproblems in
isolation, you put these pieces together in a way that solves the original problem. This is similar
to our cake-baking strategy: Our recipe divided the problem into well-defined steps, and we executed
these steps in the correct order to build the final product (our cake).</p><div class="figure"><a id="breaking_a_large_script_into_logical_par" class="calibre"/><div class="book"><div class="book"><a id="med_id00108" class="calibre"/><img alt="Breaking a large script into logical parts that each complete one function" src="httpatomoreillycomsourcenostarchimages2134497.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-8. Breaking a large script into logical parts that each complete one function</div></div><p class="calibre3"><a class="calibre" id="iddle1115"/><a class="calibre" id="iddle1308"/><a class="calibre" id="iddle1371"/><a class="calibre" id="iddle1373"/><a class="calibre" id="iddle1530"/><a class="calibre" id="iddle1686"/><a class="calibre" id="iddle1728"/><a class="calibre" id="iddle1760"/><a class="calibre" id="iddle1865"/>At this point, you might ask, “How do we create these procedures?” Before
Scratch 2, you couldn’t build the <span class="calibre"><strong class="calibre5">Initialize</strong></span> block shown in
<a class="xref" href="ch04.html#breaking_a_large_script_into_logical_par" title="Figure 4-8. Breaking a large script into logical parts that each complete one function">Figure 4-8</a> and then call it from your script. The
only way to emulate procedures and add some structure to a program was through Scratch’s
<span class="calibre"><em class="calibre6">message-broadcasting</em></span> mechanism. This has changed in Scratch 2, which added the
powerful “custom blocks” feature.</p><p class="calibre3">In this section, we’ll demonstrate the old way of doing things, because that’s
what you’ll see in scripts created in an older version of Scratch. However, the
build-your-own-block feature will be explained in the next section, and it will be used consistently
throughout the rest of the book.</p><p class="calibre3">Since sprites receive their own broadcast messages, we can implement procedures by having a
sprite broadcast a message to itself and perform the desired task under the <span class="calibre"><strong class="calibre5">when I receive</strong></span> trigger block. We can use the <span class="calibre"><strong class="calibre5">broadcast and
wait</strong></span> block to ensure that our procedures are called in the correct sequence, thus adding
structure and modularity to our programs. Confused? Let’s see it in action.</p><div class="book" title="Creating Procedures with Message Broadcasting"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="creating_procedures_with_message_broadca">Creating Procedures with Message Broadcasting</h3></div></div></div><p class="calibre3"><span class="calibre"><em class="calibre6">Flowers2.sb2</em></span></p><p class="calibre3">We’ll explore how procedures work and how they can improve your code by re-creating the
Flowers program from earlier.</p><p class="calibre3">Open the file <span class="calibre"><em class="calibre6">Flowers2.sb2</em></span>, which contains the new version of the
program. The script for the Stage is the same as before (the Stage broadcasts a
<code class="literal">Draw</code> message when it detects a mouse click), but this time, our program uses only
one sprite instead of five. This sprite has five costumes, <code class="literal">leaf1</code>
<a class="calibre" id="iddle1729"/>through <code class="literal">leaf5</code>, and will call a procedure to draw a flower for each
costume. Since we have a single sprite, we only need one copy of the drawing code (not the five
duplicate scripts we had in our first version). This makes the program smaller and the code easier
to understand. When the sprite in this application receives the <code class="literal">Draw</code> message, it
executes the script shown in <a class="xref" href="ch04.html#when_the_sprite_receives_the_draw_messag" title="Figure 4-9. When the sprite receives the Draw message, it calls DrawFlower five times (in a loop) to draw five flowers.">Figure 4-9</a>.</p><div class="figure"><a id="when_the_sprite_receives_the_draw_messag" class="calibre"/><div class="book"><div class="book"><a id="med_id00109" class="calibre"/><img alt="When the sprite receives the Draw message, it calls DrawFlower five times (in a loop) to draw five flowers." src="httpatomoreillycomsourcenostarchimages2134499.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-9. When the sprite receives the <span class="calibre"><em class="calibre6"><code class="literal1">Draw</code></em></span> message, it calls
<span class="calibre"><em class="calibre6"><code class="literal1">DrawFlower</code></em></span> five times (in a loop) to draw five
flowers.</div></div><p class="calibre3">The script sets the <span class="calibre"><em class="calibre6">x</em></span>-coordinate and the costume for drawing the first
flower and then enters a loop to draw five flowers. On each pass, the loop sets the
<span class="calibre"><em class="calibre6">y</em></span>-coordinate for the flower and calls <code class="literal">DrawFlower</code> by
broadcasting a message to itself. This call halts the script’s execution until
<code class="literal">DrawFlower</code> is done. When this happens, the <code class="literal">Draw</code> script resumes
execution, adjusting the <span class="calibre"><em class="calibre6">x</em></span>-coordinate and changing the costume in preparation
for drawing the next flower.</p><div class="note" title="Note"><h3 class="title4"><a id="ch04note01" class="firstname"/>Note</h3><p class="calibre3"><span class="calibre"><em class="calibre6">You can name a procedure anything you like, but I recommend selecting a name that
reflects that procedure’s purpose. This is especially helpful when you revisit a program that
you wrote months ago. For example, if you want to show players how many points they have in a game,
you might create a procedure named</em></span>
<code class="literal">ShowScore</code><span class="calibre"><em class="calibre6">. Naming this procedure</em></span>
<code class="literal">Mary</code>
<span class="calibre"><em class="calibre6">or</em></span>
<code class="literal">Alfred</code>
<span class="calibre"><em class="calibre6">certainly won’t remind you (or anyone else reading your program) what the procedure
does.</em></span></p></div><p class="calibre3">The <code class="literal">DrawFlower</code> procedure is shown in <a class="xref" href="ch04.html#drawflower_procedure" title="Figure 4-10. The DrawFlower procedure">Figure 4-10</a>. It sets random values for the color effect, brightness, and sprite size before stamping rotated
versions of the current costume to draw a flower.</p><p class="calibre3">While the first version of the program contained five sprites and five repeated scripts, the
second version achieves the same result using a single sprite that calls one procedure for drawing
all five flowers. Open <span class="calibre"><em class="calibre6">Flowers.sb2</em></span> and <span class="calibre"><em class="calibre6">Flowers2.sb2</em></span> in two
tabs of your browser and compare them. Isn’t the new version much simpler to follow? Using
procedures lets you make smaller programs that are easier to understand and maintain. This will
become more beneficial as you write programs to perform more complex tasks.</p><div class="figure"><a id="drawflower_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00110" class="calibre"/><img alt="The DrawFlower procedure" src="httpatomoreillycomsourcenostarchimages2134501.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-10. The <span class="calibre"><em class="calibre6"><code class="literal1">DrawFlower</code></em></span> procedure</div></div></div><div class="book" title="Building Your Own Block"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="building_your_own_block">Building Your Own Block</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1075"/><a class="calibre" id="iddle1119"/><a class="calibre" id="iddle1236"/><a class="calibre" id="iddle1238"/><a class="calibre" id="iddle1239"/><a class="calibre" id="iddle1240"/><a class="calibre" id="iddle1507"/><a class="calibre" id="iddle1544"/><a class="calibre" id="iddle1657"/><a class="calibre" id="iddle1693"/><a class="calibre" id="iddle1725"/>As of Scratch 2, you can also create your own custom blocks. After you make a custom
block, it should appear in the <span class="calibre"><em class="calibre6">More Blocks</em></span> palette, where you can use it as you
would any other Scratch block.</p><p class="calibre3">To show you how to create and use these blocks, we’ll modify the Flowers2 program we
discussed in the last section to use a custom block for the <code class="literal">DrawFlower</code> procedure.
The following steps will guide you through creating this new version of the application.</p><div class="book"><ol class="orderedlist"><li class="listitem1"><p class="calibre3">First, open the <span class="calibre"><em class="calibre6">Flowers2.sb2</em></span> file that you looked at in the previous
section. Select <span class="calibre"><strong class="calibre5">File</strong></span> ▸ <span class="calibre"><strong class="calibre5">Download to
your computer</strong></span> from the File menu and save the file as <span class="calibre"><em class="calibre6">Flowers3.sb2</em></span>.
You can pick a different name if you prefer.</p></li><li class="listitem1"><p class="calibre3">Click the thumbnail of the <code class="literal">Flower</code> sprite to select it. Then select the
<span class="calibre"><em class="calibre6">More Blocks</em></span> palette and click <span class="calibre"><strong class="calibre5">Make a Block</strong></span>.
You should see the dialog shown in <a class="xref" href="ch04.html#new_block_dialog_and_the_blocks_that_app" title="Figure 4-11. The New Block dialog and the blocks that appear after creating the DrawFlower custom block">Figure 4-11</a>
(left). Type <code class="literal">DrawFlower</code> for the block’s name and click <span class="calibre"><strong class="calibre5">OK</strong></span>. A new function block called <span class="calibre"><strong class="calibre5">DrawFlower</strong></span> should appear under the <span class="calibre"><em class="calibre6">More Blocks</em></span> palette, and a
<span class="calibre"><strong class="calibre5">define DrawFlower</strong></span> block should appear in the Scripts Area as
shown in the figure (right).</p><div class="figure"><a id="new_block_dialog_and_the_blocks_that_app" class="calibre"/><div class="book"><div class="book"><a id="med_id00111" class="calibre"/><img alt="The New Block dialog and the blocks that appear after creating the DrawFlower custom block" src="httpatomoreillycomsourcenostarchimages2134503.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-11. The New Block dialog and the blocks that appear after creating the <span class="calibre"><em class="calibre6"><span class="calibre">DrawFlower</span></em></span> custom block</div></div></li><li class="listitem1"><p class="calibre3"><a class="calibre" id="iddle1842"/>Detach the script connected to the <span class="calibre"><strong class="calibre5">when I receive
DrawFlower</strong></span> block and connect it to the <span class="calibre"><strong class="calibre5">define
DrawFlower</strong></span> block, as shown in <a class="xref" href="ch04.html#drawflower_procedure_implemented_as_a_cu" title="Figure 4-12. The DrawFlower procedure implemented as a custom block">Figure 4-12</a>.
This results in a new procedure, called <span class="calibre"><strong class="calibre5">DrawFlower</strong></span>, that is
implemented as a custom block. Delete the <span class="calibre"><strong class="calibre5">when I receive
DrawFlower</strong></span> block because it is no longer needed.</p><div class="figure"><a id="drawflower_procedure_implemented_as_a_cu" class="calibre"/><div class="book"><div class="book"><a id="med_id00112" class="calibre"/><img alt="The DrawFlower procedure implemented as a custom block" src="httpatomoreillycomsourcenostarchimages2134505.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-12. The <span class="calibre"><em class="calibre6"><span class="calibre">DrawFlower</span></em></span> procedure implemented
as a custom block</div></div></li><li class="listitem1"><p class="calibre3">Now that we’ve created a <span class="calibre"><strong class="calibre5">DrawFlower</strong></span> procedure, we
just need to call it from the <code class="literal">Draw</code> message handler. Modify the
<code class="literal">Draw</code> message handler as shown in <a class="xref" href="ch04.html#calling_drawflower_from_the_draw_message" title="Figure 4-13. Calling DrawFlower from the Draw message handler">Figure 4-13</a>. Note that we only replaced the <span class="calibre"><strong class="calibre5">broadcast DrawFlower and wait</strong></span> block with our new <span class="calibre"><strong class="calibre5">DrawFlower</strong></span> custom block.</p><div class="figure"><a id="calling_drawflower_from_the_draw_message" class="calibre"/><div class="book"><div class="book"><a id="med_id00113" class="calibre"/><img alt="Calling DrawFlower from the Draw message handler" src="httpatomoreillycomsourcenostarchimages2134507.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-13. Calling <span class="calibre"><em class="calibre6"><span class="calibre">DrawFlower</span></em></span> from the
<span class="calibre"><em class="calibre6"><code class="literal1">Draw</code></em></span> message handler</div></div></li></ol></div><p class="calibre3">The program is now complete, and you can test it. Click the mouse on the Stage to verify that
the program still works as before. See <a class="xref" href="ch04.html#running_without_screen_refresh" title="Running without Screen Refresh">Running without Screen Refresh</a> to learn how
you can speed up the execution of this program.</p><p class="calibre3">Now that you know the basics behind custom blocks, you can take them a step further by making
blocks that can accept inputs.</p><div class="sidebar"><a id="running_without_screen_refresh" class="calibre"/><div class="sidebar-title">Running without Screen Refresh</div><p class="calibre3"><a class="calibre" id="iddle1237"/><a class="calibre" id="iddle1241"/><a class="calibre" id="iddle1242"/><a class="calibre" id="iddle1306"/><a class="calibre" id="iddle1525"/><a class="calibre" id="iddle1731"/><a class="calibre" id="iddle1821"/>Implementing the <span class="calibre"><strong class="calibre5">DrawFlower</strong></span> procedure with custom
blocks brings up another feature that can shorten the execution time of the drawing script. To
demonstrate, perform the following:</p><div class="book"><ol class="orderedlist1"><li class="listitem1"><p class="calibre3">Right-click the <span class="calibre"><strong class="calibre5">DrawFlower</strong></span> block under the <span class="calibre"><em class="calibre6">More
Blocks</em></span> palette and select <span class="calibre"><strong class="calibre5">edit</strong></span> from the pop-up menu.
This should bring up the dialog from <a class="xref" href="ch04.html#new_block_dialog_and_the_blocks_that_app" title="Figure 4-11. The New Block dialog and the blocks that appear after creating the DrawFlower custom block">Figure 4-11</a>,
except that the title will be <span class="calibre"><em class="calibre6">Edit Block</em></span> instead of <span class="calibre"><em class="calibre6">New
Block</em></span>.</p></li><li class="listitem1"><p class="calibre3">Click the arrow next to Options, check the <span class="calibre"><strong class="calibre5">Run without screen
refresh</strong></span> box and click <span class="calibre"><strong class="calibre5">OK</strong></span> (see <a class="xref" href="ch04.html#adding_a_number_input_to_the_square_bloc" title="Figure 4-15. Adding a number input to the Square block">Figure 4-15</a>).</p></li><li class="listitem1"><p class="calibre3">Now, click the mouse on the Stage and see what happens. Instead of seeing the individual
rotating and stamping steps as the five flowers are drawn, you should see them appear on the Stage
<span class="calibre"><em class="calibre6">almost</em></span> at once. Here is an explanation of what’s happening.</p></li></ol></div><p class="calibre3">The <span class="calibre"><strong class="calibre5">DrawFlower</strong></span> procedure contains many blocks that change a
sprite’s appearance, including <span class="calibre"><strong class="calibre5">set color</strong></span>, <span class="calibre"><strong class="calibre5">set brightness</strong></span>, <span class="calibre"><strong class="calibre5">set size</strong></span>, and <span class="calibre"><strong class="calibre5">stamp</strong></span>. After executing such a block, Scratch normally pauses for a while to
<span class="calibre"><em class="calibre6">refresh</em></span> (that is, redraw) the screen. This is why we were able to see the
drawing progress when the application ran before.</p><p class="calibre3">If you select the Run without screen refresh option, the blocks will run without pausing to
refresh the screen, allowing the procedure to run much faster. The screen will refresh after Scratch
executes the entire procedure.</p><p class="calibre3">In addition to speeding up a procedure, the Run without screen refresh option helps to prevent
the flickering that repeated redrawing can cause.</p></div></div><div class="book" title="Passing Parameters to Custom Blocks"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="passing_parameters_to_custom_blocks">Passing Parameters to Custom Blocks</h3></div></div></div><p class="calibre3">Let’s start by creating a custom block named <span class="calibre"><strong class="calibre5">Square</strong></span>,
which draws a square whose side length is 100 pixels, as shown in <a class="xref" href="ch04.html#square_procedure_that_draws_a_fixed-size" title="Figure 4-14. A Square procedure that draws a fixed-size square">Figure 4-14</a>.</p><div class="figure"><a id="square_procedure_that_draws_a_fixed-size" class="calibre"/><div class="book"><div class="book"><a id="med_id00114" class="calibre"/><img alt="A Square procedure that draws a fixed-size square" src="httpatomoreillycomsourcenostarchimages2134509.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-14. A <span class="calibre"><em class="calibre6"><span class="calibre">Square</span></em></span> procedure that draws a
fixed-size square</div></div><p class="calibre3"><a class="calibre" id="iddle1120"/><a class="calibre" id="iddle1121"/><a class="calibre" id="iddle1122"/><a class="calibre" id="iddle1123"/><a class="calibre" id="iddle1139"/><a class="calibre" id="iddle1672"/>The <span class="calibre"><strong class="calibre5">Square</strong></span> procedure has limited capabilities,
because the drawn square size is fixed once and for all. What if you want to draw squares with
different side lengths, such as 50, 75, or 200? You could define several custom blocks named
<span class="calibre"><strong class="calibre5">Square50</strong></span>, <span class="calibre"><strong class="calibre5">Square75</strong></span>, and
<span class="calibre"><strong class="calibre5">Square200</strong></span>, but creating multiple blocks that do essentially the
same thing is, in most cases, a bad idea; if you need to make a change, then you have to track down
all the copies and change those as well. A better solution is to have a single <span class="calibre"><strong class="calibre5">Square</strong></span> block that allows the user to specify the desired side length when
calling it.</p><p class="calibre3">You’ve actually been applying this concept since <a class="xref" href="ch01.html" title="Chapter 1. Getting Started">Chapter 1</a>. For
example, Scratch provides a single <span class="calibre"><strong class="calibre5">move</strong></span> block that allows you to
specify how many steps a sprite will move by entering that number in a parameter slot. That way,
Scratch doesn’t have to provide a new block for every possible move distance.</p><p class="calibre3">What we need to do, therefore, is add a parameter slot to our <span class="calibre"><strong class="calibre5">Square</strong></span> block where the user can enter the side length. <a class="xref" href="ch04.html#adding_a_number_input_to_the_square_bloc" title="Figure 4-15. Adding a number input to the Square block">Figure 4-15</a> illustrates how to modify the <span class="calibre"><strong class="calibre5">Square</strong></span> block.</p><div class="figure"><a id="adding_a_number_input_to_the_square_bloc" class="calibre"/><div class="book"><div class="book"><a id="med_id00115" class="calibre"/><img alt="Adding a number input to the Square block" src="httpatomoreillycomsourcenostarchimages2134511.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-15. Adding a number input to the <span class="calibre"><em class="calibre6"><span class="calibre">Square</span></em></span>
block</div></div><p class="calibre3">First, right-click the <span class="calibre"><strong class="calibre5">Square</strong></span> block in the <span class="calibre"><em class="calibre6">More
Blocks</em></span> palette (or the <span class="calibre"><strong class="calibre5">define Square</strong></span> block in the
Scripts Area) and select <span class="calibre"><strong class="calibre5">edit</strong></span> from the pop-up menu to bring up
the Edit Block dialog ①. Click the small arrow next to Options to expand the dialog and see
the available options.</p><p class="calibre3">We want our <span class="calibre"><strong class="calibre5">Square</strong></span> block to accept the desired side length
of a square, which is a number, so click <span class="calibre"><strong class="calibre5">Add number input</strong></span> ②
to add a number slot to the block. A number slot named <code class="literal">number1</code> should be added to
the <span class="calibre"><strong class="calibre5">Square</strong></span> block.</p><p class="calibre3">To indicate that the new slot is intended to carry the side length of the square, change the
default name from <code class="literal">number1</code> to something meaningful ③, such as
<code class="literal">side</code>, <code class="literal">length</code>, or <code class="literal">sideLength</code>. (Again,
although Scratch doesn’t care what label you use, you do! Pick a name that reflects the
meaning of the parameter.) Let’s use the name <code class="literal">side</code> for this example.</p><p class="calibre3"><a class="calibre" id="iddle1670"/>Technically, that’s all what we need to do to add a number slot to our procedure.
If we click OK, we’ll have a <span class="calibre"><strong class="calibre5">Square</strong></span> block that takes a
number as input. We could drag this block into our scripts and specify the desired length in the
parameter slot, as in <span class="calibre"><strong class="calibre5">Square 50</strong></span>. But how would a user know what
the number passed to <span class="calibre"><strong class="calibre5">Square</strong></span> means? Does it mean an area of 50, a
diagonal of 50, a side length is 50, or something else?</p><p class="calibre3">Imagine if Scratch’s <span class="calibre"><strong class="calibre5">glide</strong></span> block were designed like
this:</p><div class="informalfigure"><a id="med_id00116a" class="calibre"/><div class="book"><a id="med_id00116" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134513.png.jpg" class="calibre7"/></div></div><p class="calibre3">How would you know that the first slot represents time (in seconds) and the second and third
slots represent the <span class="calibre"><em class="calibre6">x</em></span>- and <span class="calibre"><em class="calibre6">y</em></span>-coordinates of the target
glide point? The Scratch designers made the <span class="calibre"><strong class="calibre5">glide</strong></span> block easier to
understand and use by adding labels to these slots as follows:</p><div class="informalfigure"><a id="med_id00117a" class="calibre"/><div class="book"><a id="med_id00117" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134515.png.jpg" class="calibre7"/></div></div><p class="calibre3">Let’s do the same thing for our <span class="calibre"><strong class="calibre5">Square</strong></span> block by
adding text that describes the meaning (or usage) of the parameter slot. Click <span class="calibre"><strong class="calibre5">Add label text</strong></span> ④, as shown in <a class="xref" href="ch04.html#adding_a_number_input_to_the_square_bloc" title="Figure 4-15. Adding a number input to the Square block">Figure 4-15</a>, to add a label after the
<code class="literal">side</code> parameter. Type <span class="calibre"><strong class="calibre5">steps</strong></span> for the label text
and click <span class="calibre"><strong class="calibre5">OK</strong></span>.</p><p class="calibre3">Now, if you examine the definition of the <span class="calibre"><strong class="calibre5">Square</strong></span> procedure
in the Scripts Area, you’ll see a small block (named <code class="literal">side</code>) added to its
header, as illustrated in <a class="xref" href="ch04.html#modifying_the_square_procedure_to_use_th" title="Figure 4-16. Modifying the Square procedure to use the side parameter">Figure 4-16</a> (left). The
<span class="calibre"><strong class="calibre5">move</strong></span> block still has the fixed number 100 inside it, but all we
need to do now is drag the <code class="literal">side</code> block from the header of the <span class="calibre"><strong class="calibre5">Square</strong></span> method and drop it over the parameter slot of the <span class="calibre"><strong class="calibre5">move</strong></span> block to replace the number 100, as shown in <a class="xref" href="ch04.html#modifying_the_square_procedure_to_use_th" title="Figure 4-16. Modifying the Square procedure to use the side parameter">Figure 4-16</a> (right).</p><div class="figure"><a id="modifying_the_square_procedure_to_use_th" class="calibre"/><div class="book"><div class="book"><a id="med_id00118" class="calibre"/><img alt="Modifying the Square procedure to use the side parameter" src="httpatomoreillycomsourcenostarchimages2134517.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-16. Modifying the <span class="calibre"><em class="calibre6"><span class="calibre">Square</span></em></span> procedure to use
the <span class="calibre"><em class="calibre6"><code class="literal1">side</code></em></span> parameter</div></div><p class="calibre3">The label, <code class="literal">side</code>, that appears in the header of the <span class="calibre"><strong class="calibre5">Square</strong></span> procedure is called a <span class="calibre"><em class="calibre6">parameter</em></span>. You can think of a
parameter as a named placeholder. We wanted our <span class="calibre"><strong class="calibre5">Square</strong></span> procedure
to be able to draw squares of any size, so instead of hard-coding a fixed number inside our
procedure, we used a general parameter named <code class="literal">side</code>. Users will specify the exact
value of <code class="literal">side</code> when they call the <span class="calibre"><strong class="calibre5">Square</strong></span>
procedure. Let’s illustrate this point by modifying the script in <a class="xref" href="ch04.html#square_procedure_that_draws_a_fixed-size" title="Figure 4-14. A Square procedure that draws a fixed-size square">Figure 4-14</a> to use the new version of our <span class="calibre"><strong class="calibre5">Square</strong></span> procedure. The required changes are illustrated in <a class="xref" href="ch04.html#calling_the_square_procedure_with_side_s" title="Figure 4-17. Calling the Square procedure with side set to 100">Figure 4-17</a>.</p><div class="figure"><a id="calling_the_square_procedure_with_side_s" class="calibre"/><div class="book"><div class="book"><a id="med_id00119" class="calibre"/><img alt="Calling the Square procedure with side set to 100" src="httpatomoreillycomsourcenostarchimages2134519.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-17. Calling the <span class="calibre"><em class="calibre6"><span class="calibre">Square</span></em></span> procedure with
<span class="calibre"><em class="calibre6"><code class="literal1">side</code></em></span> set to 100</div></div><p class="calibre3"><a class="calibre" id="iddle1036"/><a class="calibre" id="iddle1671"/>Here, the number 100 (called an <span class="calibre"><em class="calibre6">argument</em></span>) is passed to the
<span class="calibre"><strong class="calibre5">Square</strong></span> procedure. When <span class="calibre"><strong class="calibre5">Square</strong></span>
is executed, its <code class="literal">side</code> parameter is set to 100, and this value is used to replace
all occurrences of the <code class="literal">side</code> block inside the procedure. As you can see, the
ability to specify different arguments to a procedure is a powerful feature that adds a lot of
flexibility to our programs.</p><p class="calibre3">We can enhance our <span class="calibre"><strong class="calibre5">Square</strong></span> procedure even further by making
it accept the square’s color as a second parameter, as shown in <a class="xref" href="ch04.html#this_version_of_square_takes_the_desired" title="Figure 4-18. This version of Square takes the desired color as a second parameter.">Figure 4-18</a>. Here, we added a second input parameter,
called <code class="literal">clrNum</code> (short for color number), which indicates the desired color of the
square. The procedure now sets the pen color to the value specified by <code class="literal">clrNum</code>
before executing the drawing loop. Edit the <span class="calibre"><strong class="calibre5">Square</strong></span> block to
implement the changes shown in the figure.</p><div class="sidebar"><a id="parameters_vsdot_arguments" class="calibre"/><div class="sidebar-title">Parameters vs. Arguments</div><p class="calibre3">Although many programmers use the terms <span class="calibre"><em class="calibre6">parameter</em></span> and
<span class="calibre"><em class="calibre6">argument</em></span> inter-changeably, the two terms are in fact different. To clarify,
consider the <span class="calibre"><strong class="calibre5">Average</strong></span> procedure shown below, which computes the
average of two numbers.</p><div class="informalfigure"><a id="med_id00120a" class="calibre"/><div class="book"><a id="med_id00120" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134521.png.jpg" class="calibre7"/></div></div><p class="calibre3">As defined, this procedure has two parameters named <code class="literal">num1</code> and
<code class="literal">num2</code>. A <span class="calibre"><em class="calibre6">parameter</em></span> defines an input to a procedure.
You’d call this procedure with the block shown at the left and specify some values or
expressions inside the available slots. The values 100 and 50 in the above example are called
<span class="calibre"><em class="calibre6">arguments</em></span> of the procedure.</p><p class="calibre3">Of course, the number of arguments in the procedure call must match the number of parameters
in the procedure’s definition. When you call <span class="calibre"><strong class="calibre5">Average</strong></span>, the
parameters <code class="literal">num1</code> and <code class="literal">num2</code> receive the values 100 and 50,
respectively, because arguments and parameters are matched by position.</p></div><div class="figure"><a id="this_version_of_square_takes_the_desired" class="calibre"/><div class="book"><div class="book"><a id="med_id00121" class="calibre"/><img alt="This version of Square takes the desired color as a second parameter." src="httpatomoreillycomsourcenostarchimages2134523.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-18. This version of <span class="calibre"><em class="calibre6"><span class="calibre">Square</span></em></span> takes the
desired color as a second parameter.</div></div><div class="sidebar"><a id="try_it_out_4-1" class="calibre"/><div class="sidebar-title">Try It Out 4-1</div><p class="calibre3"><a class="calibre" id="iddle1107"/><a class="calibre" id="iddle1243"/>What about the thickness of the square’s border? Modify the <span class="calibre"><strong class="calibre5">Square</strong></span> procedure to take a third parameter, called
<code class="literal">penSize</code>, that specifies the size of the pen to be used in drawing the
square.</p></div><p class="calibre3">Let’s conclude this section with some useful tips for dealing with custom blocks:</p><div class="book"><ul class="itemizedlist"><li class="listitem1"><p class="calibre3">Custom blocks can’t be shared among sprites. If you create a custom block for,
let’s say, <code class="literal">Sprite1</code>, then only <code class="literal">Sprite1</code> can use that
block. Similarly, a custom block defined for the Stage can only be called by scripts that belong to
the Stage.</p></li><li class="listitem1"><p class="calibre3">Give your parameters meaningful names that indicate what they’re used for.</p></li><li class="listitem1"><p class="calibre3">To delete a custom block, just drag its <span class="calibre"><strong class="calibre5">define</strong></span> block (that
is, the hat block) from the Scripts Area and drop it over the Palettes area. You can only delete a
<span class="calibre"><strong class="calibre5">define</strong></span> block if your project doesn’t contain any stack
blocks associated with it, so remove all uses of a custom block from your scripts before trying to
delete it.</p></li><li class="listitem1"><p class="calibre3">To delete a parameter of a custom block, click the parameter’s name in the Edit Block
dialog and then click the small <span class="calibre"><em class="calibre6">X</em></span> icon that appears above the parameter’s
slot.</p></li><li class="listitem1"><p class="calibre3">In addition to number inputs, you can also add string and Boolean parameters. We’ll talk
more about data types when we discuss variables in the next chapter.</p></li></ul></div><p class="calibre3">Now, you might wonder: Can a procedure call another procedure? In the next section,
you’ll learn about how to use nested procedure calls to extend the power and usefulness of
existing procedures.</p></div><div class="book" title="Using Nested Procedures"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="using_nested_procedures">Using Nested Procedures</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1165"/><a class="calibre" id="iddle1290"/><a class="calibre" id="iddle1302"/><a class="calibre" id="iddle1307"/><a class="calibre" id="iddle1545"/><a class="calibre" id="iddle1597"/><a class="calibre" id="iddle1658"/><a class="calibre" id="iddle1730"/><a class="calibre" id="iddle1837"/>As we noted earlier, a procedure should be designed to perform a single, well-defined
task. To execute multiple tasks, it is perfectly legal—and in many cases desirable—to
have one procedure call another as part of its execution path. Nesting procedures this way gives you
great flexibility in structuring and organizing your programs.</p><p class="calibre3"><span class="calibre"><em class="calibre6">RotatedSquares.sb2</em></span></p><p class="calibre3">To see this in action, let’s start with the <span class="calibre"><strong class="calibre5">Square</strong></span>
procedure we wrote in the previous section (see <a class="xref" href="ch04.html#calling_the_square_procedure_with_side_s" title="Figure 4-17. Calling the Square procedure with side set to 100">Figure 4-17</a>). Now, we’ll create a new procedure,
called <span class="calibre"><strong class="calibre5">Squares</strong></span>, that draws four stretched squares, as illustrated
in <a class="xref" href="ch04.html#squares_procedure_and_its_output" title="Figure 4-19. The Squares procedure and its output">Figure 4-19</a>. It does so by calling the <span class="calibre"><strong class="calibre5">Square</strong></span> procedure four times. Each call uses a different argument, and the
output is four squares that share a corner.</p><div class="figure"><a id="squares_procedure_and_its_output" class="calibre"/><div class="book"><div class="book"><a id="med_id00122" class="calibre"/><img alt="The Squares procedure and its output" src="httpatomoreillycomsourcenostarchimages2134525.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-19. The <span class="calibre"><em class="calibre6"><span class="calibre">Squares</span></em></span> procedure and its
output</div></div><p class="calibre3">We can now use <span class="calibre"><strong class="calibre5">Squares</strong></span> to create some interesting art.
<a class="xref" href="ch04.html#rotatedsquares_procedure_and_some_possib" title="Figure 4-20. The RotatedSquares procedure and some possible outputs">Figure 4-20</a> shows another procedure, called <span class="calibre"><strong class="calibre5">RotatedSquares</strong></span>, which calls the <span class="calibre"><strong class="calibre5">Squares</strong></span>
procedure several times, turning the shapes by some angle after each call.</p><div class="figure"><a id="rotatedsquares_procedure_and_some_possib" class="calibre"/><div class="book"><div class="book"><a id="med_id00123" class="calibre"/><img alt="The RotatedSquares procedure and some possible outputs" src="httpatomoreillycomsourcenostarchimages2134527.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-20. The <span class="calibre"><em class="calibre6"><span class="calibre">RotatedSquares</span></em></span> procedure and some
possible outputs</div></div><p class="calibre3">In this procedure, the <code class="literal">count</code> parameter is used twice: once to determine the
number of repetitions and again to calculate the turn angle after calling <span class="calibre"><strong class="calibre5">Squares</strong></span>. Setting <code class="literal">count</code> to <code class="literal">5</code>, for example, will
result in repeating the square pattern of <a class="xref" href="ch04.html#rotatedsquares_procedure_and_some_possib" title="Figure 4-20. The RotatedSquares procedure and some possible outputs">Figure 4-20</a>
five times with a 72° (that is, 360° / 5) right turn after each call. Experiment with
different values to discover new patterns.</p><p class="calibre3"><span class="calibre"><em class="calibre6">Checkers.sb2</em></span></p><p class="calibre3">Let’s work out another example that demonstrates the power of nested procedures:
We’ll start with the <span class="calibre"><strong class="calibre5">Square</strong></span> procedure of <a class="xref" href="ch04.html#modifying_the_square_procedure_to_use_th" title="Figure 4-16. Modifying the Square procedure to use the side parameter">Figure 4-16</a> and end up with a checkerboard.</p><p class="calibre3">Create a new procedure (called <span class="calibre"><strong class="calibre5">Row</strong></span>) that draws a single row
of squares, as illustrated in <a class="xref" href="ch04.html#row_procedure" title="Figure 4-21. The Row procedure">Figure 4-21</a>. Note that the number of squares to
draw is specified as a parameter. To keep things simple, we’ve fixed the size of the
individual squares at 20 steps instead of defining the size as a second parameter to the <span class="calibre"><strong class="calibre5">Row</strong></span> procedure.</p><div class="figure"><a id="row_procedure" class="calibre"/><div class="book"><div class="book"><a id="med_id00124" class="calibre"/><img alt="The Row procedure" src="httpatomoreillycomsourcenostarchimages2134529.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-21. The <span class="calibre"><em class="calibre6"><span class="calibre">Row</span></em></span> procedure</div></div><p class="calibre3"><a class="xref" href="ch04.html#row_procedure" title="Figure 4-21. The Row procedure">Figure 4-21</a> also illustrates the result of calling <span class="calibre"><strong class="calibre5">Row</strong></span> with an argument of <code class="literal">4</code>, which makes the procedure call <span class="calibre"><strong class="calibre5">Square 20 steps</strong></span> four times in a loop. The sprite’s position is
adjusted after drawing each square to set the initial position for the next square. After drawing
the four squares, the last command returns the sprite to its initial position.</p><p class="calibre3">To draw another row of squares below the one shown in <a class="xref" href="ch04.html#row_procedure" title="Figure 4-21. The Row procedure">Figure 4-21</a>, we just
need to move the sprite down 20 steps and then call the <span class="calibre"><strong class="calibre5">Row</strong></span>
procedure again. We can repeat this to draw as many rows as we want. Our <span class="calibre"><strong class="calibre5">Checkers</strong></span> procedure, shown in <a class="xref" href="ch04.html#checkers_procedure_and_its_output" title="Figure 4-22. The Checkers procedure and its output">Figure 4-22</a>, does
just that.</p><div class="figure"><a id="checkers_procedure_and_its_output" class="calibre"/><div class="book"><div class="book"><a id="med_id00125" class="calibre"/><img alt="The Checkers procedure and its output" src="httpatomoreillycomsourcenostarchimages2134531.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-22. The <span class="calibre">Checkers</span> procedure and its output</div></div><p class="calibre3">This procedure takes two parameters: the number of rows and the number of columns for the
desired checkerboard. After drawing each row, the procedure moves the sprite down 20 steps to
prepare to draw the next row of squares.</p><p class="calibre3">The examples presented in this section show how procedures can help you divide a program into
smaller, more manageable pieces. Once you’ve written and tested your procedures, you can use
them as building blocks for more complex procedures without worrying much about the low-level
implementation details. You can then focus on the important task of putting together the whole
application using these procedures as building blocks.</p><div class="sidebar"><a id="try_it_out_4-2" class="calibre"/><div class="sidebar-title">Try It Out 4-2</div><p class="calibre3"><a class="calibre" id="iddle1110"/><a class="calibre" id="iddle1422"/><a class="calibre" id="iddle1710"/><a class="calibre" id="iddle1723"/><a class="calibre" id="iddle1733"/><a class="calibre" id="iddle2037"/>What do you think will happen if you set the initial direction to 0° (up) instead
of 90° (right)? Will the script work? If not, how could you fix it? Make this change and run
the script to test your answer.</p></div></div></div><div class="book" title="Working with Procedures"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="working_with_procedures">Working with Procedures</h2></div></div></div><p class="calibre3">Now that you know why it’s important to break your program down into smaller parts and
tackle them one at a time, let’s discuss how to perform this division. Every problem is
different, and there is no “one size fits all” solution—but that’s what
makes this a fun puzzle!</p><p class="calibre3">In this section, we’ll first explore the <span class="calibre"><em class="calibre6">top-down process</em></span> of
dividing a large program into modular pieces with a clear logical structure. We’ll then
discuss another way of building complex programs: the <span class="calibre"><em class="calibre6">bottom-up process</em></span> of
combining existing procedures. <a class="xref" href="ch04.html#illustrating_top-down_left_parenthesisle" title="Figure 4-23. Illustrating top-down (left) and bottom-up (right) approaches">Figure 4-23</a> shows a
high-level view of these two approaches.</p><div class="figure"><a id="illustrating_top-down_left_parenthesisle" class="calibre"/><div class="book"><div class="book"><a id="med_id00126" class="calibre"/><img alt="Illustrating top-down (left) and bottom-up (right) approaches" src="httpatomoreillycomsourcenostarchimages2134533.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-23. Illustrating top-down (left) and bottom-up (right) approaches</div></div><p class="calibre3">In both diagrams, the problem we want to solve is at the top, and the individual steps that
build our solution are at the bottom. You can start from whichever level makes sense to you.</p><div class="book" title="Breaking Programs Down into Procedures"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="breaking_programs_down_into_procedures">Breaking Programs Down into Procedures</h3></div></div></div><p class="calibre3">The first step in solving any programming problem is to fully understand the problem. After
that, you can plan a general solution and divide it into major tasks. There is no right or wrong way
to go about dividing up any particular program, and with experience, you will get better at deciding
what “major” means. Working from the general solution down to its specifics ensures
that, at least, the overall logic of the program is correct.</p><p class="calibre3"><span class="calibre"><em class="calibre6">House.sb2</em></span></p><p class="calibre3">To demonstrate this problem-solving strategy, let’s consider how we would draw a house
similar to that shown in <a class="xref" href="ch04.html#we_can_draw_this_house_by_dividing_the_t" title="Figure 4-24. We can draw this house by dividing the task into several smaller pieces and handling each piece individually.">Figure 4-24</a>.</p><div class="figure"><a id="we_can_draw_this_house_by_dividing_the_t" class="calibre"/><div class="book"><div class="book"><a id="med_id00127" class="calibre"/><img alt="We can draw this house by dividing the task into several smaller pieces and handling each piece individually." src="httpatomoreillycomsourcenostarchimages2134535.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-24. We can draw this house by dividing the task into several smaller pieces and handling each
piece individually.</div></div><p class="calibre3"><a class="calibre" id="iddle1294"/>On one hand, working on this simple problem allows us to focus on the solution strategy
without getting bogged down in a lot of detail. On the other hand, despite its apparent simplicity,
the problem lends itself to many different solutions. Here are some possibilities:</p><div class="book"><ul class="itemizedlist"><li class="listitem1"><p class="calibre3">We can view the house as made up of straight lines. In this case, drawing each line is a major
task.</p></li><li class="listitem1"><p class="calibre3">We can view the house as made up of six independent shapes: side 1, side 2, two doors, a
triangle, and a parallelogram. Drawing each shape constitutes a major task.</p></li><li class="listitem1"><p class="calibre3">Since the two doors are identical, we can define one major task for drawing a door and invoke
that task twice.</p></li><li class="listitem1"><p class="calibre3">We can view the triangle and the parallelogram at the top of the house as one unit, the roof.
In this case, one major task is to draw the roof.</p></li><li class="listitem1"><p class="calibre3">We can view side 1 and its door as one unit, the front side. In this case, one major task is
to draw the front side.</p></li></ul></div><p class="calibre3">There are many other possibilities, but that’s enough to illustrate the point. The idea
is to group tasks into small, understandable pieces that you can deal with and then focus on one
piece at a time. If you find similar pieces, try to come up with a common solution and apply it to
all those pieces.</p><p class="calibre3">With that in mind, our plan for drawing the house is also outlined in <a class="xref" href="ch04.html#we_can_draw_this_house_by_dividing_the_t" title="Figure 4-24. We can draw this house by dividing the task into several smaller pieces and handling each piece individually.">Figure 4-24</a>. This plan assumes that the sprite starts
facing right at point A. All we need to do is create a script that matches the steps outlined in the
plan. We’ll write a procedure (called <span class="calibre"><strong class="calibre5">Side1</strong></span>) to draw the
left side of the house as specified in step 1. We will also write three procedures (called <span class="calibre"><strong class="calibre5">Door</strong></span>, <span class="calibre"><strong class="calibre5">Side2</strong></span>, and <span class="calibre"><strong class="calibre5">Roof</strong></span>) to draw the two doors, the right side of the house, and the roof (as specified in
steps 2, 3, 4, and 6), and we will connect all these procedures with appropriate motion
commands.</p><p class="calibre3"><a class="calibre" id="iddle1293"/><a class="calibre" id="iddle1546"/><a class="calibre" id="iddle1659"/>Our <span class="calibre"><strong class="calibre5">House</strong></span> procedure is shown in <a class="xref" href="ch04.html#house_proceduredot_note_how_the_major_ta" title="Figure 4-25. The House procedure. Note how the major tasks align with the drawing plan.">Figure 4-25</a> alongside the drawing steps that correspond to
each procedure call. The procedure takes a single parameter (called <span class="calibre"><strong class="calibre5">scale</strong></span>) that specifies the unit length (that is, a scaling factor) for drawing the house.
Note how the <span class="calibre"><strong class="calibre5">Door</strong></span> procedure was reused twice. Note also that the
<span class="calibre"><strong class="calibre5">Roof</strong></span> procedure is responsible for drawing the entire roof, and
that it may contain different sub-procedures for drawing the individual components of the
roof.</p><div class="figure"><a id="house_proceduredot_note_how_the_major_ta" class="calibre"/><div class="book"><div class="book"><a id="med_id00128" class="calibre"/><img alt="The House procedure. Note how the major tasks align with the drawing plan." src="httpatomoreillycomsourcenostarchimages2134537.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-25. The <span class="calibre"><em class="calibre6"><span class="calibre">House</span></em></span> procedure. Note how the
major tasks align with the drawing plan.</div></div><p class="calibre3">The individual procedures for drawing the house are shown in <a class="xref" href="ch04.html#procedures_for_drawing_the_house_in_figu" title="Figure 4-26. Procedures for drawing the house in Figure 4-24">Figure 4-26</a>. These procedures draw simple geometric shapes
using the same techniques you learned in <a class="xref" href="ch02.html" title="Chapter 2. Motion and Drawing">Chapter 2</a>.</p><p class="calibre3">The <span class="calibre"><strong class="calibre5">Side1</strong></span>, <span class="calibre"><strong class="calibre5">Door</strong></span>, and
<span class="calibre"><strong class="calibre5">Side2</strong></span> procedures draw 3×5, 1×2, and 9×5 rectangles
(scaled by the factor <code class="literal">scale</code>), respectively. The <span class="calibre"><strong class="calibre5">Roof</strong></span> procedure has two sub-procedures (named <span class="calibre"><strong class="calibre5">Triangle</strong></span>
and <span class="calibre"><strong class="calibre5">Parallelogram</strong></span>) for drawing the two parts of the roof. Note
that the scaling factor <code class="literal">scale</code> was used consistently in all these procedures. This
allows us to draw larger or smaller houses by calling the <span class="calibre"><strong class="calibre5">House</strong></span>
procedure with a different argument.</p><div class="sidebar"><a id="try_it_out_4-3" class="calibre"/><div class="sidebar-title">Try It Out 4-3</div><p class="calibre3">Did you notice that the <span class="calibre"><strong class="calibre5">Side1</strong></span>, <span class="calibre"><strong class="calibre5">Door</strong></span>, and <span class="calibre"><strong class="calibre5">Side2</strong></span> procedures use almost identical code?
Create a new procedure named <span class="calibre"><strong class="calibre5">Rectangle</strong></span> that takes the length,
width, and scale as parameters and draws a rectangle of the specified dimensions. Modify the
<span class="calibre"><strong class="calibre5">Side1</strong></span>, <span class="calibre"><strong class="calibre5">Door</strong></span>, and <span class="calibre"><strong class="calibre5">Side2</strong></span> procedures to call the new <span class="calibre"><strong class="calibre5">Rectangle</strong></span> procedure.</p></div><div class="figure"><a id="procedures_for_drawing_the_house_in_figu" class="calibre"/><div class="book"><div class="book"><a id="med_id00129" class="calibre"/><img alt="Procedures for drawing the house in" src="httpatomoreillycomsourcenostarchimages2134539.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-26. Procedures for drawing the house in <a class="xref" href="ch04.html#we_can_draw_this_house_by_dividing_the_t" title="Figure 4-24. We can draw this house by dividing the task into several smaller pieces and handling each piece individually.">Figure 4-24</a></div></div></div><div class="book" title="Building Up with Procedures"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="building_up_with_procedures">Building Up with Procedures</h3></div></div></div><p class="calibre3"><a class="calibre" id="iddle1296"/><a class="calibre" id="iddle1369"/><a class="calibre" id="iddle1711"/><a class="calibre" id="iddle1724"/><span class="calibre"><em class="calibre6">FlowerFlake.sb2</em></span></p><p class="calibre3">Another way to deal with a large problem is to focus on the smaller details first. If you
solve a large problem’s smaller pieces (or find solutions that already exist), you can then
assemble the results from the bottom up to reach a total solution.</p><p class="calibre3">To demonstrate this problem-solving technique, let’s start with a simple procedure
(called <span class="calibre"><strong class="calibre5">Leaf</strong></span>) that draws a single leaf as shown in <a class="xref" href="ch04.html#leaf_procedure_and_its_output" title="Figure 4-27. The Leaf procedure and its output">Figure 4-27</a>. The procedure contains a <span class="calibre"><strong class="calibre5">repeat</strong></span> loop that runs twice to draw the two halves of the leaf. Each half is drawn as a
series of 15 short line segments with a 6° turn angle between them. This is similar to the
method of drawing polygons we used in <a class="xref" href="ch02.html" title="Chapter 2. Motion and Drawing">Chapter 2</a>.</p><div class="figure"><a id="leaf_procedure_and_its_output" class="calibre"/><div class="book"><div class="book"><a id="med_id00130" class="calibre"/><img alt="The Leaf procedure and its output" src="httpatomoreillycomsourcenostarchimages2134541.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-27. The <span class="calibre"><em class="calibre6"><span class="calibre">Leaf</span></em></span> procedure and its
output</div></div><p class="calibre3"><a class="calibre" id="iddle1289"/><a class="calibre" id="iddle1291"/><a class="calibre" id="iddle1297"/>Using this procedure as a starting point, we can now draw a slightly more complex shape
that contains five leaves. Our new procedure, called <span class="calibre"><strong class="calibre5">Leaves</strong></span>, and
its output are shown in <a class="xref" href="ch04.html#leaves_procedure_calls_the_leaf_procedur" title="Figure 4-28. The Leaves procedure calls the Leaf procedure five times with 72° turn angle between each call.">Figure 4-28</a>. As you can see,
we only had to call the <span class="calibre"><strong class="calibre5">Leaf</strong></span> procedure in a <span class="calibre"><strong class="calibre5">repeat</strong></span> loop with an appropriate turn angle in between.</p><div class="figure"><a id="leaves_procedure_calls_the_leaf_procedur" class="calibre"/><div class="book"><div class="book"><a id="med_id00131" class="calibre"/><img alt="The Leaves procedure calls the Leaf procedure five times with 72° turn angle between each call." src="httpatomoreillycomsourcenostarchimages2134543.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-28. The <span class="calibre"><span class="calibre"><em class="calibre6">Leaves</em></span></span> procedure calls the
<span class="calibre"><em class="calibre6"><span class="calibre">Leaf</span></em></span> procedure five times with 72° turn
angle between each call.</div></div><p class="calibre3">We can now use <span class="calibre"><strong class="calibre5">Leaf</strong></span> and <span class="calibre"><strong class="calibre5">Leaves</strong></span> to build up something that is even more complex: a branch with leaves on it. Our
<span class="calibre"><strong class="calibre5">Branch</strong></span> procedure and its output are illustrated in <a class="xref" href="ch04.html#branch_procedure_and_its_output" title="Figure 4-29. The Branch procedure and its output">Figure 4-29</a>. The sprite moves forward 40 steps, draws a single leaf
(by calling the <span class="calibre"><strong class="calibre5">Leaf</strong></span> procedure), moves an additional 50 steps
forward, draws five leaves (by calling the <span class="calibre"><strong class="calibre5">Leaves</strong></span> procedure), and
finally returns to its starting position.</p><div class="figure"><a id="branch_procedure_and_its_output" class="calibre"/><div class="book"><div class="book"><a id="med_id00132" class="calibre"/><img alt="The Branch procedure and its output" src="httpatomoreillycomsourcenostarchimages2134545.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-29. The <span class="calibre"><em class="calibre6"><span class="calibre">Branch</span></em></span> procedure and its
output</div></div><p class="calibre3">Let’s take this up another notch. How about using the <span class="calibre"><strong class="calibre5">Branch</strong></span> procedure to create a complex drawing of a flower? Our new procedure, called
<span class="calibre"><strong class="calibre5">Flower</strong></span>, and its output are shown in <a class="xref" href="ch04.html#flower_procedure_and_its_output" title="Figure 4-30. The Flower procedure and its output">Figure 4-30</a>. The procedure simply calls the <span class="calibre"><strong class="calibre5">Branch</strong></span> procedure six times in a loop with 60° turn angle in between.</p><div class="figure"><a id="flower_procedure_and_its_output" class="calibre"/><div class="book"><div class="book"><a id="med_id00133" class="calibre"/><img alt="The Flower procedure and its output" src="httpatomoreillycomsourcenostarchimages2134547.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure 4-30. The <span class="calibre"><em class="calibre6"><span class="calibre">Flower</span></em></span> procedure and its
output</div></div><p class="calibre3">We can keep going on and on, but the idea should now be clear. We started with a simple
procedure called <span class="calibre"><strong class="calibre5">Leaf</strong></span> and used it in a new procedure (called
<span class="calibre"><strong class="calibre5">Leaves</strong></span>) to create a complex pattern. The <span class="calibre"><strong class="calibre5">Branch</strong></span> procedure relied on these two procedures to create something more complicated.
The <span class="calibre"><strong class="calibre5">Flower</strong></span> procedure then used <span class="calibre"><strong class="calibre5">Branch</strong></span> to draw an even more complex pattern. If we wanted to, we could create a
procedure that draws an entire tree of flowers and yet another to draw a garden full of
trees.</p><p class="calibre3"><a class="calibre" id="iddle1712"/>The point to take away from this example is that, regardless of the complexity of the
problem we are trying to solve, we can always build the solution by gluing together a number of
smaller, more manageable pieces. Using this problem-solving technique, we start with short
procedures that solve very simple problems and then use them to create more sophisticated
procedures.</p></div></div><div class="book" title="Summary"><div class="titlepage1"><div class="book"><div class="book"><h2 class="title2" id="summary-id00008">Summary</h2></div></div></div><p class="calibre3">In this chapter, we introduced a number of fundamental concepts that will be used extensively
in the remainder of this book. First, we explained the concept of message broadcasting for
intersprite communication and synchronization. After that, we introduced structured programming and
discussed how to use message broadcasting to implement procedures. We then demonstrated the
build-your-own-block feature of Scratch 2.0 and explained how to pass arguments to procedures to
make the procedures more flexible. We went over several examples that demonstrated dividing a large
problem into smaller, more manageable pieces and explained how to use procedures as the basic
building blocks for creating large programs. Last, we examined a bottom-up problem-solving
technique, in which we put together known solutions to smaller pieces of a problem to solve the big
problem.</p><p class="calibre3">In the next chapter, you’ll learn about the most important concept in any programming
language: <span class="calibre"><em class="calibre6">variables</em></span>. This introduction to variables will be an essential next
step in becoming a proficient programmer.</p><div class="book" title="Problems"><div class="titlepage1"><div class="book"><div class="book"><h3 class="title3" id="problems-id00009">Problems</h3></div></div></div><div class="book" title="Frequently Asked Questions"><a id="ch04qa1" class="calibre"/><table class="calibre21"><colgroup class="calibre10"><col class="calibre22"/><col class="c"/></colgroup><tbody class="calibre15"><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch04qa1qe1" class="calibre"/><a id="ch04qa1q1" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">1. Write different procedures to draw each letter of your name. Name each procedure for the
letter that it draws. Then write a script that calls these procedures so you can draw your name on
the Stage.</p></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch04qa1qe2" class="calibre"/><a id="ch04qa1q2" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">2. Create the program shown below, run it, and explain how it works.</p><div class="informalfigure"><a id="med_id00134a" class="calibre"/><div class="book"><a id="med_id00134" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134549.png.jpg" class="calibre7"/></div></div></td></tr><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch04qa1qe3" class="calibre"/><a id="ch04qa1q3" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">3. <a class="calibre" id="iddle1295"/><a class="calibre" id="iddle1720"/><a class="calibre" id="iddle1721"/><a class="calibre" id="iddle1781"/>Write a procedure that converts degrees Celsius to degrees Fahrenheit as shown below.
Have the script round the answer to the nearest integer. Test your procedure for different
temperatures. (Hint: °<span class="calibre"><em class="calibre6">F</em></span> = (9 / 5) × °<span class="calibre"><em class="calibre6">C</em></span> +
32.)</p><div class="informalfigure"><a id="med_id00135a" class="calibre"/><div class="book"><a id="med_id00135" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134551.png.jpg" class="calibre7"/></div></div></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch04qa1qe4" class="calibre"/><a id="ch04qa1q4" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">4. Write a procedure to create the house shown on the right. Start by writing small procedures
that draw small parts of the house (for example, door, roof, windows, and so on). Then combine these
procedures to create the entire house.</p><div class="informalfigure"><a id="med_id00136a" class="calibre"/><div class="book"><a id="med_id00136" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134553.png" class="calibre7"/></div></div></td></tr><tr class="calibre12" title="Q:"><td class="calibre20"><a id="ch04qa1qe5" class="calibre"/><a id="ch04qa1q5" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">5. Write a procedure to compute the area of a circle (A = πr<sup class="calibre32">2</sup>)
given its radius, as shown below. Use π = 3.14.</p><div class="informalfigure"><a id="med_id00137a" class="calibre"/><div class="book"><a id="med_id00137" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134555.png.jpg" class="calibre7"/></div></div></td></tr><tr class="calibre18" title="Q:"><td class="calibre20"><a id="ch04qa1qe6" class="calibre"/><a id="ch04qa1q6" class="calibre"/><p class="calibre3"><strong class="calibre5">Q:</strong></p></td><td class="calibre20"><p class="calibre3">6. In this exercise, you’ll simulate the pressure experienced by fish under water.
Assume that the pressure <span class="calibre"><em class="calibre6">P</em></span> (in atmospheres) felt by a fish is related to its
depth <span class="calibre"><em class="calibre6">d</em></span> (in meters from the surface) by the relation: <span class="calibre"><em class="calibre6">P</em></span> =
0.1<span class="calibre"><em class="calibre6">d</em></span> + 1. <span class="calibre"><em class="calibre6">PressureUnderWater_NoSolution.sb2</em></span> contains a
partial implementation of this simulation. Finish the script so that the fish says the pressure it
feels while swimming, as illustrated below:</p><p class="calibre3"><span class="calibre"><em class="calibre6">PressureUnderWater_NoSolution.sb2</em></span></p><div class="informalfigure"><a id="med_id00138a" class="calibre"/><div class="book"><a id="med_id00138" class="calibre"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages2134557.png.jpg" class="calibre7"/></div></div></td></tr></tbody></table></div></div></div></section></body></html>