<html><head></head><body>
<div id="sbo-rt-content"><section aria-labelledby="app-b" epub:type="appendix" role="doc-appendix">
<span aria-label="669" epub:type="pagebreak" id="pg_669" role="doc-pagebreak"/>
<hgroup>
<h1 class="APP" id="app-b">
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">B</span></span>
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">DATABASE SETUP</span></span>
</h1>
</hgroup>
<figure class="opener"><img alt="" class="opener" height="380" src="../images/opener.jpg" width="380"/>
</figure>
<p class="INTRO"><span class="chapterintro_Xref"><a href="part6.xhtml">Part VI</a></span> of this book outlined how to use PHP to interact with MySQL and SQLite databases. This appendix covers how to make sure these database management systems are set up on your local computer.</p>
<section aria-labelledby="sec1" epub:type="division">
<h2 class="H1" id="sec1"><span id="toc-link_422"/><span class="SANS_Futura_Std_Bold_B_11">MySQL</span></h2>
<p class="TNI1">MySQL is available in various editions. For the purposes of this book, the free MySQL Community Server is sufficient. We’ll discuss how to install it for your chosen operating system.</p>
<section aria-labelledby="sec2" epub:type="division">
<h3 class="H2" id="sec2"><span id="toc-link_423"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">macOS and Windows</span></h3>
<p class="TNI1">To install MySQL Community Server on macOS or Windows, visit <i><a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></i>. The website should detect the operating system you’re using, so you just need to download the latest version of the appropriate installer for your system. For macOS, I recommend one of the DMG <span aria-label="670" epub:type="pagebreak" id="pg_670" role="doc-pagebreak"/>Archive files: either the ARM installer for an M-series machine or the x86 installer for an Intel-based machine. For Windows, I suggest the Microsoft Software Installer (MSI).</p>
<p class="TX">Once you’ve downloaded the installer for your system, run it and take the defaults that are offered. The only part of the installation you need to take special care with is when you’re asked to enter a password for the root user of the MySQL server. Choose a password you can remember, since you’ll need to provide this password in your PHP scripts that communicate with the database server.</p>
<p class="TX">Once you’ve completed the installation process, the MySQL server should be ready to use with your PHP applications. The default installation will configure the server to start up and run in the background each time you restart your system, so you shouldn’t need to manually start the MySQL server before using it.</p>
</section>
<section aria-labelledby="sec3" epub:type="division">
<h3 class="H2" id="sec3"><span id="toc-link_424"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Linux</span></h3>
<p class="TNI1">If you’re a Linux user, you’ll need to install the PDO and MySQL server extension packages to enable PHP to communicate with MySQL databases using the PDO library. Use the following commands:</p>
<pre><code>$ <b>sudo apt-get install php-mysql</b>&#13;
$ <b>sudo apt-get install mysql-server</b></code></pre>
<p class="TX">The database server should be running once it’s installed, which you can check with the following command:</p>
<pre><code>$ <b>sudo ss -tap | grep mysql</b>&#13;
LISTEN 0      70         127.0.0.1:33060        0.0.0.0:*&#13;
users:(("mysqld",pid=21486,fd=21))&#13;
LISTEN 0      151        127.0.0.1:mysql        0.0.0.0:*&#13;
users:(("mysqld",pid=21486,fd=23))</code></pre>
<p class="TX">This indicates that the server is active and running on port <span class="SANS_TheSansMonoCd_W5Regular_11">33060</span>. If you ever need to restart the MySQL server, you can do so with this command:</p>
<pre><code>$ <b>sudo service mysql restart</b></code></pre>
<p class="TX">If you wish, you can set a password for the <span class="SANS_TheSansMonoCd_W5Regular_11">root</span> MySQL user as follows (replacing <span class="SANS_TheSansMonoCd_W7Bold_Italic_11">password</span> with whatever you prefer):</p>
<pre><code>$ <b>sudo mysql</b>&#13;
mysql&gt; <b>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '</b><var><b>password</b></var><b>';</b>&#13;
mysql&gt; <b>exit</b>&#13;
Bye</code></pre>
<p class="TX">You’re now ready to use MySQL databases with your PHP projects.</p>
</section>
</section>
<section aria-labelledby="sec4" epub:type="division">
<span aria-label="671" epub:type="pagebreak" id="pg_671" role="doc-pagebreak"/>
<h2 class="H1" id="sec4"><span id="toc-link_425"/><span class="SANS_Futura_Std_Bold_B_11">SQLite</span></h2>
<p class="TNI1">When you install PHP on macOS with Homebrew, SQLite should be enabled by default. On Windows, SQLite will be available as long as the <span class="SANS_TheSansMonoCd_W5Regular_11">pdo_sqlite</span> extension is enabled in your INI file. We discussed how to verify this in <span class="Xref"><a href="appendix-a.xhtml">Appendix A</a></span>.</p>
<p class="TX">On Linux, use this command to enable PHP to communicate with SQLite databases:</p>
<pre><code>$ <b>sudo apt install php-sqlite3</b></code></pre>
<p class="BodyContinued">As of this writing, version 3 is the latest stable version of SQLite.</p>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h2 class="H1" id="sec5"><span id="toc-link_426"/><span class="SANS_Futura_Std_Bold_B_11">Confirming the MySQL and SQLite Extensions</span></h2>
<p class="TNI1">You can check your active PHP database extensions at any time by creating an <i>index.php</i> script that calls the <span class="SANS_TheSansMonoCd_W5Regular_11">phpinfo()</span> function. As discussed in <span class="Xref"><a href="chapter1.xhtml">Chapter 1</a></span>, this function prints out a detailed report about your PHP installation. <a href="#lisB-1">Listing B-1</a> shows the <i>index.php</i> file you need.</p>
<span id="lisB-1"/>
<pre><code>&lt;?php&#13;
phpinfo();</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing B-1: An</span> <span class="SANS_Futura_Std_Book_11">index.php</span> <span class="SANS_Futura_Std_Book_Oblique_11">script to view your PHP settings</span></p>
<p class="TX">Serve this script by entering <span class="SANS_TheSansMonoCd_W7Bold_11">php -S localhost:8000</span> at the command line, then open a browser to <i>localhost:8000</i>. Search the resulting page for <b>PDO</b> to see the list of PDO database extensions. If everything is working, you should see that both MySQL and SQLite are enabled.</p>
</section>
</section>
</div></body></html>