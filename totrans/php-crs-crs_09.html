<html><head></head><body>
<div id="sbo-rt-content"><section aria-labelledby="ch7" epub:type="chapter" role="doc-chapter">
<span aria-label="125" epub:type="pagebreak" id="pg_125" role="doc-pagebreak"/>
<hgroup>
<h2 class="CHAPTER" id="ch7">
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">7</span></span>
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">SIMPLE ARRAYS</span></span>
</h2>
</hgroup>
<figure class="opener"><img alt="" class="opener" height="380" src="../images/opener.jpg" width="380"/>
</figure>
<p class="INTRO">This chapter introduces <i>arrays</i>, a compound data type designed for storing and manipulating multiple data items under a single variable name. Arrays allow you to group related data and efficiently apply the same operations to each data item.</p>
<p class="TX">At its heart, an array is a mapping of values to keys. Each <i>value</i> is a piece of data you want to store in the array, and its <i>key</i> is a unique identifier associated with that value so that you can access it from within the array. In this chapter, we’ll focus on simple arrays, which use integers as the keys. You’ll learn how to create and manipulate simple arrays, and how to iterate over the items in an array by using a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop. In the next chapter, we’ll explore how to create more sophisticated arrays by using strings (and other data types) as keys, instead of integers.</p>
<section aria-labelledby="sec1" epub:type="division">
<span aria-label="126" epub:type="pagebreak" id="pg_126" role="doc-pagebreak"/>
<h3 class="H1" id="sec1"><span id="toc-link_101"/><span class="SANS_Futura_Std_Bold_B_11">Creating an Array and Accessing Its Values</span></h3>
<p class="TNI1">Let’s start our exploration of arrays by creating a simple array that stores the monthly rainfall totals for a location (<a href="#lis7-1">Listing 7-1</a>).</p>
<span id="lis7-1"/>
<pre><code>&lt;?php&#13;
$rainfall = [10, 8, 12];</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-1: Declaring a simple array</span></p>
<p class="TX">We declare an array called <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall</span> by using a sequence of comma-separated values inside square brackets: <span class="SANS_TheSansMonoCd_W5Regular_11">[10, 8, 12]</span>. This is a three-element array, containing the values <span class="SANS_TheSansMonoCd_W5Regular_11">10</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">8</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">12</span>.</p>
<p class="TX">By default, PHP gives each array value an integer as a key. The keys are assigned in sequence, starting from zero: the first value (<span class="SANS_TheSansMonoCd_W5Regular_11">10</span>) has a key of <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, the second value (<span class="SANS_TheSansMonoCd_W5Regular_11">8</span>) has a key of <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, and the third value (<span class="SANS_TheSansMonoCd_W5Regular_11">12</span>) has a key of <span class="SANS_TheSansMonoCd_W5Regular_11">2</span>. Accepting this default mapping is what makes <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall</span> a <i>simple array</i> (as opposed to the <i>sophisticated arrays</i> with custom key-value mappings that we’ll explore in <span class="Xref"><a href="chapter8.xhtml">Chapter 8</a></span>).</p>
<p class="TX">Now that we have an array, we can use its keys to access its values individually. In <a href="#lis7-2">Listing 7-2</a>, we concatenate each value from the <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall</span> array into a string message and print it out.</p>
<span id="lis7-2"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$rainfall = [10, 8, 12];</span>&#13;
&#13;
print "Monthly rainfall\n";&#13;
print "Jan: " . $rainfall[0] . "\n";&#13;
print "Feb: " . $rainfall[1] . "\n";&#13;
print "Mar: " . $rainfall[2] . "\n";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-2: Accessing array elements with their integer keys</span></p>
<p class="TX">We access an item in an array by specifying its key in square brackets, after the array name. For example, <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall[0]</span> gives us the first value in the <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall</span> array (<span class="SANS_TheSansMonoCd_W5Regular_11">10</span>), which we concatenate with the string <span class="SANS_TheSansMonoCd_W5Regular_11">"Jan: "</span>. Similarly, we access the second element of the array with <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall[1]</span>. Since the integer keys start at zero, the last element of an <i>n</i>-member array has a key of <i>n</i> – 1. In this case, we access the last element of our three-element array with <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall[2]</span>. Here’s the output of running this script:</p>
<pre><code>Monthly rainfall&#13;
Jan: 10&#13;
Feb: 8&#13;
Mar: 12</code></pre>
<p class="BodyContinued">The values <span class="SANS_TheSansMonoCd_W5Regular_11">10</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">8</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">12</span> have been successfully read from the array and printed using their integer keys <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">2</span>.</p>
<p class="TX">If you try to access an array element by using a key that hasn’t been assigned, you’ll get a PHP warning. For example, say we add the following <span class="SANS_TheSansMonoCd_W5Regular_11">print</span> statement to the end of <a href="#lis7-2">Listing 7-2</a>:</p>
<pre><code><span aria-label="127" epub:type="pagebreak" id="pg_127" role="doc-pagebreak"/>print "Apr: " . $rainfall[3] . "\n";</code></pre>
<p class="BodyContinued">This statement will trigger a warning that looks something like this:</p>
<pre><code>PHP Warning:  Undefined array key 3 in /Users/matt/main.php on line 8</code></pre>
<p class="TX">Our array has only three elements, with keys <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">2</span>, so no element exists corresponding to <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall[3]</span>. Later in the chapter, we’ll discuss how to avoid warnings like this by first ensuring that an array element with a particular key exists before trying to access it.</p>
<aside aria-labelledby="box-5" class="box">
<h4 class="BoxTitle" id="box-5"><span class="SANS_Dogma_OT_Bold_B_11">THE ARRAY() FUNCTION</span></h4>
<p class="BoxBodyFirst"><span class="SANS_Futura_Std_Book_11">In <a href="#lis7-1">Listing 7-1</a>, we declared an array by writing it out as a literal, enclosing its values in square brackets. Another way to declare an array is to call the</span> <span class="SANS_TheSansMonoCd_W5Regular_11">array()</span> <span class="SANS_Futura_Std_Book_11">function, passing the array element values as a sequence of comma-separated arguments. Here’s how to declare the same</span> <span class="SANS_TheSansMonoCd_W5Regular_11">$rainfall</span> <span class="SANS_Futura_Std_Book_11">array from <a href="#lis7-1">Listing 7-1</a> by using the</span> <span class="SANS_TheSansMonoCd_W5Regular_11">array()</span> <span class="SANS_Futura_Std_Book_11">function:</span></p>
<pre><code>$rainfall = array(10, 8, 12);</code></pre>
<p class="BoxBodyLast"><span class="SANS_Futura_Std_Book_11">Understanding this alternative technique for declaring arrays is important, since you may find it in older programs and some of the PHP documentation pages (</span><span class="SANS_Futura_Std_Book_Oblique_11"><a href="https://www.php.net">https://www.php.net</a></span><span class="SANS_Futura_Std_Book_11">). These days, however, the square-bracket notation is more common (and more succinct), so I’ll stick to square-bracket notation in this book. Learn more about this function at</span> <span class="SANS_Futura_Std_Book_Oblique_11"><a href="https://www.php.net/manual/en/function.array.php">https://www.php.net/manual/en/function.array.php</a></span><span class="SANS_Futura_Std_Book_11">.</span></p>
</aside>
</section>
<section aria-labelledby="sec2" epub:type="division">
<h3 class="H1" id="sec2"><span id="toc-link_102"/><span class="SANS_Futura_Std_Bold_B_11">Updating an Array</span></h3>
<p class="TNI1">Often you’ll need to update an array after you’ve created it by adding or removing elements. For example, it’s common to start with an empty array, created by assigning an empty set of square brackets (<span class="SANS_TheSansMonoCd_W5Regular_11">[]</span>) to a variable, and then to add elements to it as a script progresses. In this section, we’ll discuss common techniques for changing the contents of an array.</p>
<section aria-labelledby="sec3" epub:type="division">
<h4 class="H2" id="sec3"><span id="toc-link_103"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Appending an Element</span></h4>
<p class="TNI1">If you’re adding a new element to an array, you’ll most often want to add it at the end, an operation known as <i>appending</i>. This is such a common task that PHP makes it very easy to do as part of a simple assignment statement. On the left side of the equal sign, you write the array name followed by an empty set of square brackets; on the right side of the equal sign, you write the value you want to append to the array. For example, <a href="#lis7-3">Listing 7-3</a> shows a <span aria-label="128" epub:type="pagebreak" id="pg_128" role="doc-pagebreak"/>script that creates an empty array of animals and then appends elements to the end of it.</p>
<span id="lis7-3"/>
<pre><code>&lt;?php&#13;
$animals = [];&#13;
$animals[] = 'cat';&#13;
$animals[] = 'dog';&#13;
&#13;
print "animals[0] = $animals[0] \n";&#13;
print "animals[1] = $animals[1] \n";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-3: Appending elements to the end of an array</span></p>
<p class="TX">We declare an empty array called <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> by writing an empty set of square brackets. Then we add two elements to the end of the array, one at a time. For example, <span class="SANS_TheSansMonoCd_W5Regular_11">$animals[] = 'cat'</span> adds the string value <span class="SANS_TheSansMonoCd_W5Regular_11">'cat'</span> to the end of the array. PHP automatically gives the new element the next available integer as a key. In this case, since <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> is empty when <span class="SANS_TheSansMonoCd_W5Regular_11">'cat'</span> is added, it receives a key of <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>. When we then use the same notation to add <span class="SANS_TheSansMonoCd_W5Regular_11">'dog'</span> to the array, that element automatically gets a key of <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>. To confirm this, we print the individual values from the array at the end of the script, resulting in this output:</p>
<pre><code>animals[0] = cat&#13;
animals[1] = dog</code></pre>
<p class="TX">The output indicates that <span class="SANS_TheSansMonoCd_W5Regular_11">'cat'</span> was successfully mapped to key <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> of the array, and <span class="SANS_TheSansMonoCd_W5Regular_11">'dog'</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>. The PHP engine was able to find the array’s highest integer key, add 1 to it, and use the result as the next unique integer key when appending to the array.</p>
</section>
<section aria-labelledby="sec4" epub:type="division">
<h4 class="H2" id="sec4"><span id="toc-link_104"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Adding an Element with a Specific Key</span></h4>
<p class="TNI1">While it’s more common to append elements to an array and let PHP do the work of automatically assigning the next available integer key, you can also manually specify an element’s key when you’re adding it to an array. For example, <span class="SANS_TheSansMonoCd_W5Regular_11">$heights[22] = 101</span> would add the value <span class="SANS_TheSansMonoCd_W5Regular_11">101</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">$heights</span> array and give it the integer key <span class="SANS_TheSansMonoCd_W5Regular_11">22</span>. If a value already exists at that key, that value will be overwritten. As such, this direct assignment technique is often used to update an existing value in an array rather than add a completely new value. <a href="#lis7-4">Listing 7-4</a> expands our <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array script to illustrate how this is done.</p>
<span id="lis7-4"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = [];</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals[] = 'cat';</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals[] = 'dog';</span>&#13;
$animals[0] = 'hippo';&#13;
&#13;
var_dump($animals);</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-4: Directly assigning an array element with a specified key</span></p>
<p class="TX"><span aria-label="129" epub:type="pagebreak" id="pg_129" role="doc-pagebreak"/>As before, we append <span class="SANS_TheSansMonoCd_W5Regular_11">'cat'</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">'dog'</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array. Then we replace the value of the first array element with <span class="SANS_TheSansMonoCd_W5Regular_11">'hippo'</span> by directly assigning this string to key <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> of the array. Here’s the output of running this script:</p>
<pre><code>array(2) {&#13;
    [0]=&gt;&#13;
    string(3) "hippo"&#13;
    [1]=&gt;&#13;
    string(3) "dog"&#13;
}</code></pre>
<p class="TX">Notice that <span class="SANS_TheSansMonoCd_W5Regular_11">'hippo'</span> is now mapped to key <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>, indicating it has replaced the original <span class="SANS_TheSansMonoCd_W5Regular_11">'cat'</span> value.</p>
<p class="TX">Be careful when adding a new array element with a specific key. This action can break the sequence of integer keys if an array element doesn’t exist for the key you provide. This would happen if you used a key beyond the existing size of the array. Making an array with a break in the sequence of integer keys is permissible, but it can cause issues if you’ve written code elsewhere that relies on having a continuous sequence of keys. We’ll explore nonsequential and non-integer keys when we look at sophisticated arrays in <span class="Xref"><a href="chapter8.xhtml">Chapter 8</a></span>.</p>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h4 class="H2" id="sec5"><span id="toc-link_105"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Appending Multiple Elements</span></h4>
<p class="TNI1">So far we’ve been able to add only one element to an array at a time, but the built-in <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> function can add several elements at once to the end of an array. The function takes a variable number of parameters. The first is the array you want to update, and the rest are the new values to be appended, and you can append as many as you want. For example, <a href="#lis7-5">Listing 7-5</a> revisits the script from <a href="#lis7-3">Listing 7-3</a>, where we first added elements to the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array and then printed them, and uses <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> to append two more animals to the end of the array.</p>
<span id="lis7-5"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = [];</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals[] = 'cat';</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals[] = 'dog';</span>&#13;
array_push($animals, 'giraffe', 'elephant');&#13;
&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">print "animals[0] = $animals[0] \n";</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">print "animals[1] = $animals[1] \n";</span>&#13;
print "animals[2] = $animals[2] \n";&#13;
print "animals[3] = $animals[3] \n";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-5: Using</span> <span class="TheSansMonoCd_W5Regular_Italic_11">array_push()</span> <span class="SANS_Futura_Std_Book_Oblique_11">to append multiple values to the end of an array</span></p>
<p class="TX">We call <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span>, passing in the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array and the two string values we want to add, <span class="SANS_TheSansMonoCd_W5Regular_11">'giraffe'</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">'elephant'</span>. Since the new elements are added to the end of the array, they’re automatically assigned the next available integer keys, <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">3</span>. We confirm this at the end of the script by <span aria-label="130" epub:type="pagebreak" id="pg_130" role="doc-pagebreak"/>accessing the two additional elements by their keys and printing them out, along with the two original elements:</p>
<pre><code>animals[0] = cat&#13;
animals[1] = dog&#13;
animals[2] = giraffe&#13;
animals[3] = elephant</code></pre>
<p class="BodyContinued">The output indicates that <span class="SANS_TheSansMonoCd_W5Regular_11">'giraffe'</span> was successfully mapped to key <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">'elephant'</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">3</span>.</p>
<p class="TX">You may have noticed that when we called the <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> function, we didn’t do it as part of an assignment statement, with the function call on the right side of an equal sign and a variable name on the left to capture the function’s return value. This is because <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> directly modifies the array passed to it. In this sense, <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> is quite different from the string manipulation functions we looked at in <span class="Xref"><a href="chapter3.xhtml">Chapter 3</a></span>, which created and returned a new string rather than making changes directly to the original string passed to them.</p>
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> function can directly modify the provided array because its first parameter has been declared using a pass-by-reference approach. As we discussed in <span class="Xref"><a href="chapter5.xhtml">Chapter 5</a></span>, this means the function is given a direct reference to the value of the argument passed in, as opposed to being given a copy of the argument’s value via a pass-by-value approach. We can confirm this by looking at the function’s signature in the PHP documentation:</p>
<pre><code>array_push(array &amp;$array, mixed ...$values): int</code></pre>
<p class="BodyContinued">The ampersand (<span class="SANS_TheSansMonoCd_W5Regular_11">&amp;</span>) before the first parameter, <span class="SANS_TheSansMonoCd_W5Regular_11">&amp;$array</span>, indicates that this is a pass-by-reference parameter.</p>
<p class="TX">Since <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> is directly modifying the array, there’s no need for it to return a copy of the array, or for us to use an assignment statement to capture that return value when we call the function. In fact, <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> <i>does</i> have a return value, an integer indicating the new length of the array. This can be useful if you need to keep track of the array’s length as you’re updating it; we didn’t need this return value in <a href="#lis7-5">Listing 7-5</a>, so we simply made a stand-alone call to the function, without assigning the result to a variable.</p>
</section>
<section aria-labelledby="sec6" epub:type="division">
<h4 class="H2" id="sec6"><span id="toc-link_106"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Removing the Last Element</span></h4>
<p class="TNI1">The built-in <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span> function returns the last item of an array while also removing that item from the array. This is another example of a pass-by-reference function that changes the provided array. In <a href="#lis7-6">Listing 7-6</a>, we use <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span> to retrieve and remove the last element of our <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array.</p>
<span id="lis7-6"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = [];</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals[] = 'cat';</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals[] = 'dog';</span>&#13;
&#13;
<span aria-label="131" epub:type="pagebreak" id="pg_131" role="doc-pagebreak"/>$lastAnimal = array_pop($animals);&#13;
print "lastAnimal = $lastAnimal\n";&#13;
var_dump($animals);</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-6: Using</span> <span class="TheSansMonoCd_W5Regular_Italic_11">array_pop()</span> <span class="SANS_Futura_Std_Book_Oblique_11">to retrieve and remove the last array element</span></p>
<p class="TX">We call <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span>, passing the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array as an argument, and we store the function’s return value in the <span class="SANS_TheSansMonoCd_W5Regular_11">$lastAnimal</span> variable. We then print out <span class="SANS_TheSansMonoCd_W5Regular_11">$lastAnimal</span>, as well as the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array, to see which elements remain. Here’s the result:</p>
<pre><code>lastAnimal = dog&#13;
array(1) {&#13;
    [0]=&gt;&#13;
    string(3) "cat"&#13;
}</code></pre>
<p class="TX">The string in variable <span class="SANS_TheSansMonoCd_W5Regular_11">$lastAnimal</span> is <span class="SANS_TheSansMonoCd_W5Regular_11">'dog'</span>, since this was the last of the elements appended to the array. The <span class="SANS_TheSansMonoCd_W5Regular_11">var_dump</span> of <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> shows that the array contains only <span class="SANS_TheSansMonoCd_W5Regular_11">'cat'</span> after the call to <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span>, demonstrating how this pass-by-reference function was able to change the array passed into it.</p>
<aside aria-labelledby="box-6" class="box">
<h5 class="BoxTitle" id="box-6"><span class="SANS_Dogma_OT_Bold_B_11">ARRAYS AS STACKS</span></h5>
<p class="BoxBodyFirst"><span class="SANS_Futura_Std_Book_11">One of the classic data structures for solving some types of computer tasks is the</span> <span class="SANS_Futura_Std_Book_Oblique_11">stack</span><span class="SANS_Futura_Std_Book_11">. It treats data like a stack of items, such as a pile of books or blocks. You can</span> <span class="SANS_Futura_Std_Book_Oblique_11">push</span> <span class="SANS_Futura_Std_Book_11">an element onto the stack by adding it on top of the existing elements, or</span> <span class="SANS_Futura_Std_Book_Oblique_11">pop</span> <span class="SANS_Futura_Std_Book_11">the last (topmost) element off the stack.</span></p>
<p class="BoxBodyLast"><span class="SANS_Futura_Std_Book_11">If you push A, then B, then C, for example, you have a stack with A on the bottom, B in the middle, and C on top. If you then start popping items, you first get C, then B, then A. The most recent item added to the stack is always the first item to be removed. The PHP functions</span> <span class="SANS_TheSansMonoCd_W5Regular_11">array_push()</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span> <span class="SANS_Futura_Std_Book_11">mirror these operations, making it easy to create scripts that solve problems by using simple arrays as stacks.</span></p>
</aside>
</section>
</section>
<section aria-labelledby="sec7" epub:type="division">
<h3 class="H1" id="sec7"><span id="toc-link_107"/><span class="SANS_Futura_Std_Bold_B_11">Retrieving Information About an Array</span></h3>
<p class="TNI1">We’ve considered some functions for modifying an array, but other functions can return useful information about an array without changing it at all. For example, <span class="SANS_TheSansMonoCd_W5Regular_11">count()</span> returns the number of elements in an array. This can be useful if you want to check whether an array contains anything at all (a count of zero might indicate that a shopping cart is empty or that no records were retrieved from a database), or whether it has more items than expected (perhaps a customer has more than one address on file). <span aria-label="132" epub:type="pagebreak" id="pg_132" role="doc-pagebreak"/>Sometimes knowing the number of items in an array can be helpful in order to control a loop through that array. In <a href="#lis7-7">Listing 7-7</a>, we use <span class="SANS_TheSansMonoCd_W5Regular_11">count()</span> to print the total number of items in the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array.</p>
<span id="lis7-7"/>
<pre><code>&lt;?php&#13;
$animals = ['cat', 'dog', 'giraffe', 'elephant'];&#13;
&#13;
print count($animals);</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-7: Counting the number of elements in an array</span></p>
<p class="TX">We call the <span class="SANS_TheSansMonoCd_W5Regular_11">count()</span> function, passing the name of the array we want it to count up, and print the result. Since <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> has four elements, this script should output the integer <span class="SANS_TheSansMonoCd_W5Regular_11">4</span>.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>The</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">sizeof()</span> <i>function is an alias of</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">count()</span><i>. If you see a script that uses</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">sizeof()</span><i>, know that it works the same way as</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">count()</span><i>.</i></p>
<p class="TX">Another analytical array function is <span class="SANS_TheSansMonoCd_W5Regular_11">array_is_list()</span>. PHP distinguishes between arrays that are lists and arrays that aren’t. To be considered a <i>list</i>, an array of length <i>n</i> must have consecutively numbered keys from 0 to <i>n</i> – 1. The <span class="SANS_TheSansMonoCd_W5Regular_11">array_is_list()</span> function takes in an array and returns <span class="SANS_TheSansMonoCd_W5Regular_11">true</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">false</span> based on whether the array meets that definition. All the arrays discussed in this chapter qualify as lists, since they rely on PHP’s default behavior of assigning keys sequentially from 0. In the next chapter, however, we’ll explore arrays with non-integer keys as well as the <span class="SANS_TheSansMonoCd_W5Regular_11">unset()</span> function, which can remove an element of an array with a given key, potentially breaking the consecutive chain of numeric keys and disqualifying an array as a list. Thus, <span class="SANS_TheSansMonoCd_W5Regular_11">array_is_list()</span> could be useful for evaluating an array before passing it along to code that expects the array to be structured as a list.</p>
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">array_key_last()</span> function returns the key for the last element of the given array. Assuming the array is a proper list with consecutively numbered keys, the return value of <span class="SANS_TheSansMonoCd_W5Regular_11">array_key_last()</span> should be one less than the return value of <span class="SANS_TheSansMonoCd_W5Regular_11">count()</span>. For example, calling <span class="SANS_TheSansMonoCd_W5Regular_11">array_key_last($animals)</span> at the end of <a href="#lis7-7">Listing 7-7</a> would return the integer <span class="SANS_TheSansMonoCd_W5Regular_11">3</span>, since that’s the key of the fourth (and final) element of the array.</p>
<p class="TX">Earlier I mentioned that trying to access an array key that doesn’t exist triggers a warning. To avoid this, use the <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> function to test whether an array key exists before trying to access it. <a href="#lis7-8">Listing 7-8</a> shows the function in action.</p>
<span id="lis7-8"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
<span aria-label="annotation1" class="codeannotated_CodeAnnotation">❶</span> if (isset($animals[3])) {&#13;
    print "element 3 = $animals[3]\n";&#13;
} else {&#13;
    print "sorry - there is no element 3 in this array\n";&#13;
}&#13;
&#13;
<span aria-label="133" epub:type="pagebreak" id="pg_133" role="doc-pagebreak"/>print "(popping last element [3])\n";&#13;
<span aria-label="annotation2" class="codeannotated_CodeAnnotation">❷</span> array_pop($animals);&#13;
&#13;
if (isset($animals[3])) {&#13;
    print "element 3 = $animals[3]\n";&#13;
} else {&#13;
    print "sorry - there is no element 3 in this array\n";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-8: Using</span> <span class="TheSansMonoCd_W5Regular_Italic_11">isset()</span> <span class="SANS_Futura_Std_Book_Oblique_11">to test the existence of an array key</span></p>
<p class="TX">First, we create our four-element <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array. Then we use an <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement with <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> to access only the element with key <span class="SANS_TheSansMonoCd_W5Regular_11">3</span> if that element exists (at this point, it should) <span aria-label="annotation1" class="CodeAnnotation">❶</span>. We next use <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span> to remove the last element from <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> (the one at key <span class="SANS_TheSansMonoCd_W5Regular_11">3</span>) <span aria-label="annotation2" class="CodeAnnotation">❷</span>. Then we repeat the same <span class="SANS_TheSansMonoCd_W5Regular_11">if...else</span> statement. Now no element has key <span class="SANS_TheSansMonoCd_W5Regular_11">3</span>, but since we’re testing for the element with <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> before attempting to access it, we shouldn’t get a warning. Take a look at the output of the script:</p>
<pre><code>element 3 = elephant&#13;
(popping last element [3])&#13;
sorry - there is no element 3 in this array</code></pre>
<p class="TX">The first line of the output indicates the first call to <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> returned <span class="SANS_TheSansMonoCd_W5Regular_11">true</span>, triggering the <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> branch of the conditional. The last line shows the second <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span> call returned <span class="SANS_TheSansMonoCd_W5Regular_11">false</span>, triggering the <span class="SANS_TheSansMonoCd_W5Regular_11">else</span> branch and saving us from trying to access a nonexistent array element.</p>
</section>
<section aria-labelledby="sec8" epub:type="division">
<h3 class="H1" id="sec8"><span id="toc-link_108"/><span class="SANS_Futura_Std_Bold_B_11">Looping Through an Array</span></h3>
<p class="TNI1">It’s common to have to access the elements of an array, one at a time, and do something with each one. Assuming the array is a list, you can do this with a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop that uses a counter variable as the key for the current array element. By starting the counter at <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> and incrementing it up to the length of the array, you can access each element in turn. <a href="#lis7-9">Listing 7-9</a> uses a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop to print each element of our <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array.</p>
<span id="lis7-9"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
$numElements = count($animals);&#13;
for ($i = 0; $i &lt; $numElements; $i++) {&#13;
  <span aria-label="annotation1" class="Code_CodeAnnotation">❶</span> $animal = $animals[$i];&#13;
    print "$animal, ";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-9: Using a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">for</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop to loop through an array</span></p>
<p class="TX">We use <span class="SANS_TheSansMonoCd_W5Regular_11">count()</span> to look up the length of the array, storing the result into the <span class="SANS_TheSansMonoCd_W5Regular_11">$numElements</span> variable. Then we declare a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop that increments counter <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span> from <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> up to but not including the value of <span class="SANS_TheSansMonoCd_W5Regular_11">$numElements</span>. (We could <span aria-label="134" epub:type="pagebreak" id="pg_134" role="doc-pagebreak"/>hardcode the stopping condition as <span class="SANS_TheSansMonoCd_W5Regular_11">$i &lt; 4</span>, but using a variable makes the code more flexible in case the length of the array changes.) In the loop statement group, we use <span class="SANS_TheSansMonoCd_W5Regular_11">$animals[$i]</span> to retrieve the element whose key is the current value of loop variable <span class="SANS_TheSansMonoCd_W5Regular_11">$i</span>, storing it in <span class="SANS_TheSansMonoCd_W5Regular_11">$animal</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span>. Then we print out this <span class="SANS_TheSansMonoCd_W5Regular_11">$animal</span> string, followed by a comma and a space. The output when we run this script in a terminal is as follows:</p>
<pre><code>cat, dog, giraffe, elephant,</code></pre>
<p class="TX">Each of the array elements is printed out in sequence. (Don’t worry, we’ll fix that final comma shortly.)</p>
<section aria-labelledby="sec9" epub:type="division">
<h4 class="H2" id="sec9"><span id="toc-link_109"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Using a foreach Loop</span></h4>
<p class="TNI1">This <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop approach works, but cycling through the elements of an array is such a common task that PHP provides another type of loop, the <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop, to do it more efficiently. At the core of a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop is the <span class="SANS_TheSansMonoCd_W5Regular_11">foreach ($</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">array</span> <span class="SANS_TheSansMonoCd_W5Regular_11">as $</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">value</span><span class="SANS_TheSansMonoCd_W5Regular_11">)</span> syntax; <span class="SANS_TheSansMonoCd_W5Regular_11">$</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">array</span> is the name of an array to loop over, and <span class="SANS_TheSansMonoCd_W5Regular_11">$</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">value</span> is a temporary variable that will be assigned the value of each element in the array, one at a time. <a href="#lis7-10">Listing 7-10</a> shows an updated version of <a href="#lis7-9">Listing 7-9</a>, using a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop rather than a <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop.</p>
<span id="lis7-10"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
foreach ($animals as $animal) {&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    print "$animal, ";</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">}</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-10: Using a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">foreach</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop to elegantly loop through an array</span></p>
<p class="TX">We declare this loop by using <span class="SANS_TheSansMonoCd_W5Regular_11">foreach ($animals as $animal)</span>. Here, <span class="SANS_TheSansMonoCd_W5Regular_11">$animal</span> is a temporary variable that takes on the value of each array element in turn, which we then print in the body of the loop. Notice that we no longer have to worry about determining the length of the array to set the loop’s stopping condition, nor do we need to manually access each array element, as we did in the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop version with <span class="SANS_TheSansMonoCd_W5Regular_11">$animals[$i]</span>. The <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop retrieves each element automatically. The result is the same as the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop version, but the <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop’s syntax is much more elegant and concise.</p>
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop has the added benefit that we don’t need to care whether the provided array is a true list. With the <span class="SANS_TheSansMonoCd_W5Regular_11">for</span> loop version, we’re relying on the consecutive integer numbering of the array keys; if a key is missing, we’ll get a warning when we try to access that key. By contrast, the <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop simply accesses each element in the array, no matter what the keys are.</p>
</section>
<section aria-labelledby="sec10" epub:type="division">
<h4 class="H2" id="sec10"><span id="toc-link_110"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Accessing Keys and Values</span></h4>
<p class="TNI1">An alternative syntax for <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loops allows you to access both the key and the value of each array element, instead of just the value. For this, declare <span aria-label="135" epub:type="pagebreak" id="pg_135" role="doc-pagebreak"/>the loop in the format <span class="SANS_TheSansMonoCd_W5Regular_11">foreach ($</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">array</span> <span class="SANS_TheSansMonoCd_W5Regular_11">as $</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">key</span> <span class="SANS_TheSansMonoCd_W5Regular_11">=&gt; $</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">value</span><span class="SANS_TheSansMonoCd_W5Regular_11">)</span>. Here, <span class="SANS_TheSansMonoCd_W5Regular_11">$</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">array</span> is the array you want to loop through, <span class="SANS_TheSansMonoCd_W5Regular_11">$</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">key</span> is a temporary variable that will hold the current element’s key, and <span class="SANS_TheSansMonoCd_W5Regular_11">$</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">value</span> is a temporary variable that will hold the current element’s value. The <span class="SANS_TheSansMonoCd_W5Regular_11">=&gt;</span> operator connects a key to a value. We’ll use it more extensively in <span class="Xref"><a href="chapter8.xhtml">Chapter 8</a></span> when we work with sophisticated arrays whose keys can be strings and other data types.</p>
<p class="TX">Gaining access to keys as well as values allows us to eliminate that pesky final comma from the output after the last element in the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array. Recall that the <span class="SANS_TheSansMonoCd_W5Regular_11">array_key_last()</span> function returns the key of the last element in an array. By comparing the value from this function with the current key in the <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop, we can decide whether to print a comma after each element. <a href="#lis7-11">Listing 7-11</a> shows how.</p>
<span id="lis7-11"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
foreach ($animals as $key =&gt; $animal) {&#13;
    print "$animal";&#13;
    if ($key != array_key_last($animals)) {&#13;
        print ", ";&#13;
    }&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-11: A revised</span> <span class="TheSansMonoCd_W5Regular_Italic_11">foreach</span> <span class="SANS_Futura_Std_Book_Oblique_11">loop that accesses the key and value of each array element</span></p>
<p class="TX">We declare a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop by using <span class="SANS_TheSansMonoCd_W5Regular_11">foreach ($animals as $key =&gt; $animal)</span>. Each cycle through the loop, <span class="SANS_TheSansMonoCd_W5Regular_11">$key</span> will be the key and <span class="SANS_TheSansMonoCd_W5Regular_11">$animal</span> will be the value of the current array element. Inside the loop, we first print out the string in <span class="SANS_TheSansMonoCd_W5Regular_11">$animal</span>. Then we use an <span class="SANS_TheSansMonoCd_W5Regular_11">if</span> statement to also print a comma and a space if the current element’s key is <i>not</i> equal to the last key of the array (identified with the <span class="SANS_TheSansMonoCd_W5Regular_11">array_key_last()</span> function). This should produce the following output:</p>
<pre><code>cat, dog, giraffe, elephant</code></pre>
<p class="BodyContinued">We’ve successfully eliminated the comma after the last element in the array.</p>
</section>
<section aria-labelledby="sec11" epub:type="division">
<h4 class="H2" id="sec11"><span id="toc-link_111"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">Imploding an Array</span></h4>
<p class="TNI1">The code in <a href="#lis7-11">Listing 7-11</a> is essentially printing a string containing the elements in an array with a separator (in this case, a comma and a space) between them. This is a common task, so PHP provides a built-in function called <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> to do it automatically, without the need for any kind of loop.</p>
<p class="TX">The function takes two arguments: a string to use as a separator and an array to implode into a string. The separator goes <i>between</i> elements, not <i>after each</i> element, so the code won’t place an extra separator after the last array element. <a href="#lis7-12">Listing 7-12</a> shows an updated script that uses <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> rather than a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop.</p>
<span id="lis7-12"/>
<pre><code><span aria-label="136" epub:type="pagebreak" id="pg_136" role="doc-pagebreak"/><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
print implode(', ', $animals);</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-12: Using</span> <span class="TheSansMonoCd_W5Regular_Italic_11">implode()</span> <span class="SANS_Futura_Std_Book_Oblique_11">to convert an array into a string</span></p>
<p class="TX">Here we print the result of calling <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> on the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array. We use the string <span class="SANS_TheSansMonoCd_W5Regular_11">', '</span> as a separator to put a comma and a space between the array elements. The output should be exactly the same as that of <a href="#lis7-11">Listing 7-11</a>, but <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> makes the code much more efficient to write.</p>
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> function may have rendered our <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop unnecessary in this case, but don’t let that fool you. A <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop is the right tool to use in plenty of scenarios. In general, when the code you want to apply to each element in an array is more sophisticated than simply printing out that element’s value, a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop is likely appropriate.</p>
</section>
</section>
<section aria-labelledby="sec12" epub:type="division">
<h3 class="H1" id="sec12"><span id="toc-link_112"/><span class="SANS_Futura_Std_Bold_B_11">Functions with a Variable Number of Arguments</span></h3>
<p class="TNI1">One important application for arrays is that you can use them to declare functions that accept a variable number of arguments. When we created custom functions in <span class="Xref"><a href="chapter5.xhtml">Chapter 5</a></span>, we needed to know exactly how many arguments each function would take in so we could define the function with the corresponding number of parameters. This isn’t always possible, however.</p>
<p class="TX">For example, say we want to declare a <span class="SANS_TheSansMonoCd_W5Regular_11">sum()</span> function that takes in an unspecified quantity of numbers, adds them all up, and returns the result. We don’t know whether the user will pass two numbers, three numbers, or more as arguments, so we can’t create a separate parameter for each number. Instead, we use a single parameter to represent all the numbers, and we write an ellipsis, or three dots (<span class="SANS_TheSansMonoCd_W5Regular_11">...</span>), before the parameter name. This syntax tells PHP to treat the parameter as an array and to fill it with all the arguments provided, however many there are.</p>
<p class="TX"><a href="#lis7-13">Listing 7-13</a> shows how this approach works by declaring the <span class="SANS_TheSansMonoCd_W5Regular_11">sum()</span> function just described. Remember that functions should be declared in a separate file from the code that calls them, so create a <i>my_functions.php</i> file containing the contents of this listing.</p>
<span id="lis7-13"/>
<pre><code>&lt;?php&#13;
function sum(...$numbers): int&#13;
{&#13;
    $total = 0;&#13;
&#13;
    foreach ($numbers as $number) {&#13;
        $total += $number;&#13;
    }&#13;
&#13;
    return $total;&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-13: A function to take in a variable number of integer arguments and return their sum</span></p>
<p class="TX"><span aria-label="137" epub:type="pagebreak" id="pg_137" role="doc-pagebreak"/>We declare the <span class="SANS_TheSansMonoCd_W5Regular_11">sum()</span> function, which returns an integer. It has a single parameter, <span class="SANS_TheSansMonoCd_W5Regular_11">...$numbers</span>. Thanks to the ellipsis, any arguments the function receives will be assigned as elements to a local array called <span class="SANS_TheSansMonoCd_W5Regular_11">$numbers</span>. Notice that we don’t specify a data type for the parameter when using the ellipsis notation; we know the overall <span class="SANS_TheSansMonoCd_W5Regular_11">$numbers</span> variable will be of the <span class="SANS_TheSansMonoCd_W5Regular_11">array</span> type, although the individual elements of the array can be of any type. Inside the function body, we initialize <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">0</span>. Then we use a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop to cycle through the elements of the <span class="SANS_TheSansMonoCd_W5Regular_11">$numbers</span> array, adding the value of each element to <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span>. Once the loop has finished, we return <span class="SANS_TheSansMonoCd_W5Regular_11">$total</span>, which holds the sum of the arguments.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>Our</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">sum()</span> <i>function doesn’t include any logic to confirm that the elements in</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">$numbers</span> <i>are actually numbers. A real-world function would need some form of data validation and would perhaps return</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">NULL</span> <i>or indicate invalid data some other way if the arguments provided aren’t all numbers. Also note that PHP already has a built-in</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">array_sum()</span> <i>function that totals up the numbers in an array. We’ve implemented our own version for demonstration purposes.</i></p>
<p class="TX"><a href="#lis7-14">Listing 7-14</a> shows a <i>main.php</i> script to read in the <span class="SANS_TheSansMonoCd_W5Regular_11">sum()</span> function declaration and test it out with a variable number of arguments.</p>
<span id="lis7-14"/>
<pre><code>&lt;?php&#13;
require_once 'my_functions.php';&#13;
&#13;
print sum(1, 2, 3) . "\n";&#13;
print sum(20, 40) . "\n";&#13;
print sum(1, 2, 3, 4, 5, 6, 7) . "\n";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-14: A main script that calls</span> <span class="TheSansMonoCd_W5Regular_Italic_11">sum()</span> <span class="SANS_Futura_Std_Book_Oblique_11">with different numbers of arguments</span></p>
<p class="TX">After reading in and executing <i>my_functions.php</i> with <span class="SANS_TheSansMonoCd_W5Regular_11">require_once</span>, we make three calls to <span class="SANS_TheSansMonoCd_W5Regular_11">sum()</span>, each with a different number of arguments, and print the results. The script produces this output:</p>
<pre><code>6&#13;
60&#13;
28</code></pre>
<p class="TX">The three printed sums have been correctly calculated. This indicates that our <span class="SANS_TheSansMonoCd_W5Regular_11">sum()</span> function has successfully collected the variable number of arguments in an array.</p>
</section>
<section aria-labelledby="sec13" epub:type="division">
<h3 class="H1" id="sec13"><span id="toc-link_113"/><span class="SANS_Futura_Std_Bold_B_11">Array Copies vs. Array References</span></h3>
<p class="TNI1">Say you have a variable containing an array, and you assign it as the value of a second variable. In some languages, such as Python and JavaScript, the second variable would be assigned a <i>reference</i> to the original array. The two variables would then refer to the same array in the computer’s memory, so a change to one variable would apply to the other variable as well. In PHP, <span aria-label="138" epub:type="pagebreak" id="pg_138" role="doc-pagebreak"/>however, the default is to assign the second variable a <i>copy</i> of the array. Because the two variables have their own separate arrays, a change to one won’t impact the other. <a href="#lis7-15">Listing 7-15</a> returns to our <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array to illustrate this point.</p>
<span id="lis7-15"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
$variable2 = $animals;&#13;
array_pop($variable2);&#13;
var_dump($animals);</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-15: Copying an array</span></p>
<p class="TX">We declare our usual <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array, then assign <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span>. This creates a separate copy of the array in <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span>, so anything we do to one array should have no effect on the other. To prove it, we use <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span> to remove the last element from the <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span> array, then print the original <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array. Here’s the result:</p>
<pre><code>array(4) {&#13;
    [0]=&gt;&#13;
    string(3) "cat"&#13;
    [1]=&gt;&#13;
    string(3) "dog"&#13;
    [2]=&gt;&#13;
    string(7) "giraffe"&#13;
    [3]=&gt;&#13;
    string(8) "elephant"&#13;
}</code></pre>
<p class="BodyContinued">All four animal strings are still present in the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array, even though we deleted the final element (<span class="SANS_TheSansMonoCd_W5Regular_11">'elephant'</span>) from the <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span> array, so the variables indeed hold separate arrays.</p>
<p class="TX">If you want to assign the second variable a reference to the original array, as is customary in other languages, rather than a copy of the array, then use the reference operator (<span class="SANS_TheSansMonoCd_W5Regular_11">&amp;</span>) at the time of assignment. <a href="#lis7-16">Listing 7-16</a> updates the code from <a href="#lis7-15">Listing 7-15</a> to show the difference.</p>
<span id="lis7-16"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">&lt;?php</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">$animals = ['cat', 'dog', 'giraffe', 'elephant'];</span>&#13;
&#13;
$variable2 = &amp;$animals;&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">array_pop($variable2);</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">var_dump($animals);</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-16: Using the reference operator when assigning an array</span></p>
<p class="TX">This time we prefix the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array with the reference operator (<span class="SANS_TheSansMonoCd_W5Regular_11">&amp;</span>) when assigning it to <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span>. This means a change to one variable will now apply to the other variable as well, since both refer to the same array in memory. The updated script results in this output:</p>
<pre><code><span aria-label="139" epub:type="pagebreak" id="pg_139" role="doc-pagebreak"/>array(3) {&#13;
    [0]=&gt;&#13;
    string(3) "cat"&#13;
    [1]=&gt;&#13;
    string(3) "dog"&#13;
    [2]=&gt;&#13;
    string(7) "giraffe"&#13;
}</code></pre>
<p class="TX">The output reveals that popping element <span class="SANS_TheSansMonoCd_W5Regular_11">3</span> from the <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span> array also removed element <span class="SANS_TheSansMonoCd_W5Regular_11">3</span> from the <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> array. This confirms that both <span class="SANS_TheSansMonoCd_W5Regular_11">$variable2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">$animals</span> refer to the same array in memory.</p>
<p class="TX">One of these approaches to array assignment isn’t inherently better than the other; they’re just different. Sometimes it’s best to copy an array before manipulating it. For example, a web page might offer the user a chance to edit a shopping list, while providing a Cancel button to undo those edits. In this case, you’ll want to work with a copy of the shopping list array until the changes are confirmed, since you may need to revert to the original array if the user clicks Cancel. Other times, it’s preferable to have multiple variables referencing the same array in memory. Perhaps the code contains logic that chooses one of several arrays and so needs to set a variable to be a reference to the chosen array.</p>
<p class="TX">The key point to take away from this section is that PHP defaults to copying the array unless you use the reference operator (<span class="SANS_TheSansMonoCd_W5Regular_11">&amp;</span>). If you’ve learned a different programming language before PHP, or if you learn another language in the future, it’s important to understand the difference between assignment of a copy and assignment of a reference, and to know which behavior the language uses by default.</p>
</section>
<section aria-labelledby="sec14" epub:type="division">
<h3 class="H1" id="sec14"><span id="toc-link_114"/><span class="SANS_Futura_Std_Bold_B_11">Treating Strings as Arrays of Characters</span></h3>
<p class="TNI1">In a way, you can think of a string as an array of individual characters. This can be useful since you may sometimes want to “navigate” through the string character by character for tasks such as encryption, spellchecking, and so on, just as you’d traverse the elements of an array.</p>
<p class="TX">As you saw in <span class="Xref"><a href="chapter3.xhtml">Chapter 3</a></span>, the characters in a string are numbered from 0, just like the elements in a simple array. In fact, you can use the same square-bracket notation for accessing an array element to also access a specific character from a string. For example, if <span class="SANS_TheSansMonoCd_W5Regular_11">$name</span> held the string <span class="SANS_TheSansMonoCd_W5Regular_11">'Smith'</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">$name[0]</span> would return <span class="SANS_TheSansMonoCd_W5Regular_11">'S'</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">$name[1]</span> would return <span class="SANS_TheSansMonoCd_W5Regular_11">'m'</span>, and so on. Strings also support <i>negative</i> integer keys for counting characters backward from the end of the string: <span class="SANS_TheSansMonoCd_W5Regular_11">$name[-1]</span> returns <span class="SANS_TheSansMonoCd_W5Regular_11">'h'</span> (the last character), <span class="SANS_TheSansMonoCd_W5Regular_11">$name[-2]</span> returns <span class="SANS_TheSansMonoCd_W5Regular_11">'t'</span>, and so on.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>Unlike strings, arrays themselves don’t interpret negative integer keys as counting backward from the end of the array. Instead,</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">$animals[-1]</span> <i>would be interpreted as an element of the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">$animals</span> <i>array with an actual key of</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">-1</span><i>. While you</i> <span class="note">can</span> <i>manually assign negative integers as keys to array elements, I personally can’t remember ever needing to do so.</i></p>
<p class="TX"><span aria-label="140" epub:type="pagebreak" id="pg_140" role="doc-pagebreak"/><a href="#lis7-17">Listing 7-17</a> shows an example of using array key syntax to access individual characters from a string.</p>
<span id="lis7-17"/>
<pre><code>&lt;?php&#13;
$name = 'Smith';&#13;
&#13;
$firstChar = $name[0];&#13;
$secondToLastChar = $name[-2];&#13;
&#13;
print "first character = '$firstChar'\n";&#13;
print "second to last character = '$secondToLastChar'\n";</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-17: Using square-bracket notation to access string characters</span></p>
<p class="TX">We assign the string <span class="SANS_TheSansMonoCd_W5Regular_11">'Smith'</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">$name</span> variable. Next, we copy the string’s first character (<span class="SANS_TheSansMonoCd_W5Regular_11">$name[0]</span>) to the <span class="SANS_TheSansMonoCd_W5Regular_11">$firstChar</span> variable and its second-to-last character (<span class="SANS_TheSansMonoCd_W5Regular_11">$name[-2]</span>) to <span class="SANS_TheSansMonoCd_W5Regular_11">$secondToLastChar</span>. We then print out messages with the values of these variables, producing the following output:</p>
<pre><code>first character = 'S'&#13;
second to last character = 't'</code></pre>
<p class="TX">Unlike with arrays, we can’t pass a string to a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop to cycle through all its characters. However, we <i>can</i> use PHP’s built-in <span class="SANS_TheSansMonoCd_W5Regular_11">str_split()</span> function to convert a string into an actual array of individual characters, then pass that array to a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop, as shown in <a href="#lis7-18">Listing 7-18</a>.</p>
<span id="lis7-18"/>
<pre><code>&lt;?php&#13;
$name = 'Smith';&#13;
&#13;
$characters = str_split($name);&#13;
foreach ($characters as $key =&gt; $character) {&#13;
    print "character with key $key = '$character'\n";&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 7-18: Using</span> <span class="TheSansMonoCd_W5Regular_Italic_11">str_split()</span> <span class="SANS_Futura_Std_Book_Oblique_11">and</span> <span class="TheSansMonoCd_W5Regular_Italic_11">foreach</span> <span class="SANS_Futura_Std_Book_Oblique_11">to loop over the characters in a string</span></p>
<p class="TX">We pass the same <span class="SANS_TheSansMonoCd_W5Regular_11">$name</span> string to <span class="SANS_TheSansMonoCd_W5Regular_11">str_split()</span>. By default, this function breaks the string into individual characters, assigns them as elements of an array, and returns the result, which we store in the <span class="SANS_TheSansMonoCd_W5Regular_11">$characters</span> variable. We then use a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop to access each key and value in the array version of the string and print them out. Here’s the result:</p>
<pre><code>character with key 0 = 'S'&#13;
character with key 1 = 'm'&#13;
character with key 2 = 'i'&#13;
character with key 3 = 't'&#13;
character with key 4 = 'h'</code></pre>
<p class="BodyContinued">The output shows that we’ve successfully looped through the characters from the original string after first converting the string to an array with <span class="SANS_TheSansMonoCd_W5Regular_11">str_split()</span>.</p>
<p class="TX"><span aria-label="141" epub:type="pagebreak" id="pg_141" role="doc-pagebreak"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">str_split()</span> function has an optional second argument controlling the number of characters for each string element in the resulting array. The argument defaults to <span class="SANS_TheSansMonoCd_W5Regular_11">1</span>, splitting the string into individual characters, but if we’d called <span class="SANS_TheSansMonoCd_W5Regular_11">str_split($name, 2)</span>, for example, then the resulting array would contain two-character strings: <span class="SANS_TheSansMonoCd_W5Regular_11">['Sm', 'it', 'h']</span>.</p>
</section>
<section aria-labelledby="sec15" epub:type="division">
<h3 class="H1" id="sec15"><span id="toc-link_115"/><span class="SANS_Futura_Std_Bold_B_11">Other Array Functions</span></h3>
<p class="TNI1">We’ve discussed some built-in functions for working with arrays in this chapter, but PHP has many more. Other useful functions that apply to arrays include the following:</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">sort()   </span>Sorts an array’s values in ascending order (alphabetical for string values, numerical order for number values)</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">usort()</span>   Sorts the values into a custom order based on a user-defined function</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">array_flip()</span>   Swaps the keys and values for each array element</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">array_slice()</span>   Returns a new array containing a subsequence of elements from an existing array</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">array_walk()</span>   Calls a user-defined function on each element of an array</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">array_map()</span>   Calls a user-defined function on each element of an array and returns a new array of the results</p>
<p class="RunInPara"><span class="SANS_TheSansMonoCd_W7Bold_11">array_rand()</span>   Returns random keys from an array</p>
<p class="TX">For a full list of array functions, see the PHP documentation at <i><a href="https://www.php.net/manual/en/ref.array.php">https://www.php.net/manual/en/ref.array.php</a></i>.</p>
</section>
<section aria-labelledby="sec16" epub:type="division">
<h3 class="H1" id="sec16"><span id="toc-link_116"/><span class="SANS_Futura_Std_Bold_B_11">Summary</span></h3>
<p class="TNI1">In this chapter, we’ve begun exploring arrays, a compound data type that stores multiple values under a single variable name, with each value having its own identifying key. For now, we’ve focused on simple arrays, whose keys are integers. The chapter introduced various techniques for adding, subtracting, and accessing array elements, as well as functions for obtaining information about an array, such as <span class="SANS_TheSansMonoCd_W5Regular_11">count()</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">isset()</span>. You also learned how to work with each array element in sequence by using a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop. In some cases, PHP provides built-in functions for handling common array tasks, such as the <span class="SANS_TheSansMonoCd_W5Regular_11">implode()</span> function that joins all the elements of an array into a single string. These functions sometimes allow you to replace complete loops and conditional statements with a single function call.</p>
</section>
<section aria-labelledby="sec17" epub:type="division">
<h3 class="H1" id="sec17"><span id="toc-link_117"/><span class="SANS_Futura_Std_Bold_B_11">Exercises</span></h3>
<p class="ListNumber">1.   Create a <span class="SANS_TheSansMonoCd_W5Regular_11">$colors</span> array containing the string names of five colors. Print a random color from the array.</p>
<p class="ListBody">Hint: You can get a valid random key by calling <span class="SANS_TheSansMonoCd_W5Regular_11">array_rand($colors)</span>.</p>
<p class="ListNumber"><span aria-label="142" epub:type="pagebreak" id="pg_142" role="doc-pagebreak"/>2.   Write a <span class="SANS_TheSansMonoCd_W5Regular_11">foreach</span> loop to print each of the colors from your array in Exercise 1 on a new line, in the following form:</p>
<pre><code>color 0 = blue&#13;
color 1 = red&#13;
...</code></pre>
<p class="ListNumber">3.   Use <span class="SANS_TheSansMonoCd_W5Regular_11">array_pop()</span> to print the last element of your array of colors from Exercise 1. Then use <span class="SANS_TheSansMonoCd_W5Regular_11">var_dump()</span> to show that this item has been removed from the array.</p>
<p class="ListNumber">4.   Create an array containing integer ages <span class="SANS_TheSansMonoCd_W5Regular_11">23</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">31</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">55</span>. Use built-in functions to calculate and print out the number of items in the array and their average.</p>
</section>
</section>
</div></body></html>