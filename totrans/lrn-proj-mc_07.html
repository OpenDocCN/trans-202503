<html><head></head><body>
<h2 class="h2" id="ch07"><a id="page_123"/><strong><span class="blue"><span class="big">7</span></span></strong><br/><strong>DANCE PARTIES AND FLOWER PARADES WITH WHILE LOOPS</strong></h2>
<div class="image1"><img src="graphics/common01.jpg" alt="image"/></div>
<p class="noindent"><em>Loops</em> make it easy to repeat code again and again. Instead of copying and pasting the same code, you can use a loop to repeat the code as many times as you want. You’ll use loops in this chapter to make your programs repeat without having to rerun them. We’ll focus on one type of Python loop known as the <code>while</code> loop.</p>
<h3 class="h3" id="ch07lev1sec01"><strong><span class="blue">A SIMPLE WHILE LOOP</span></strong></h3>
<p class="noindent">You use <code>while</code> loops to repeat blocks of code. Similar to <code>if</code> statements, a <code>while</code> loop will execute the code inside it as long as a condition is <code>True</code>. That is, a condition must be met in order for the body of the statement to run.</p>
<p class="indent">The difference between a <code>while</code> loop and an <code>if</code> statement is that the code in the <code>if</code> statement executes only once at the most, whereas the code in the <code>while</code> loop can repeat many times. Programmers call the repeating of code <em>iteration</em>. When a loop repeats, you say it <em>iterates</em>.</p>
<p class="indent"><a id="page_124"/>For example, this code uses a <code>while</code> loop to print the numbers 1 to 5:</p>
<p class="programs">count = 1<br/><span class="orange">while</span> count &lt;= 5:<br/>    <span class="rose">print</span>(count)<br/>    count += 1<br/><span class="rose">print</span>(<span class="green">"Loop finished"</span>)</p>
<p class="indent">The <code>count</code> variable records the number of times that the loop has repeated. It starts with the value of 1. The condition in the <code>while</code> loop checks whether the count is less than or equal to 5.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>In <a href="ch03.html#ch03">Chapter 3</a> you learned that</em> <code><span class="codeitalic">+=</code></span> <em>is a shorthand operator. You could use the standard addition operator</em> <code><span class="codeitalic">count = count + 1</code></span> <em>to do the same thing.</em></p>
</div>
<p class="indent">The first time the loop runs, the value of <code>count</code> is <code>1</code>, which is less than 5. The condition of the loop is <code>True</code>, and the body of the loop runs. Next, the program prints the value of <code>count</code> to the Python shell, and then it adds 1 to the value of <code>count</code>. The <code>while</code> loop now starts again and checks the condition again, going through each step until the <code>count</code> variable is greater than 5.</p>
<p class="indent">Outside the loop is one final line, which prints <code>"Loop finished"</code>.</p>
<p class="indent">Save this program and run it; you should see the following output:</p>
<p class="programs"><span class="blue1">1</span><br/><span class="blue1">2</span><br/><span class="blue1">3</span><br/><span class="blue1">4</span><br/><span class="blue1">5</span><br/><span class="blue1">Loop finished</span></p>
<p class="indent">Try experimenting a bit with the code. Change the conditions so you list more than 5 numbers or change the amount by which the <code>count</code> variable increases. Here’s a refresher on how the code works. The <code>while</code> statement follows these steps:</p>
<ol>
<li><p class="noindent">Check whether the condition is <code>True</code>.</p></li>
<li><p class="noindent">If the condition is <code>True</code>:</p>
<p class="ordera">a. Execute the body of code.</p>
<p class="ordera">b. Repeat step 1.</p></li>
<li><p class="noindent">If the condition is <code>False</code>:</p>
<p class="ordera">a. Ignore the body of code.</p></li>
<li><p class="noindent">Continue to the line after the <code>while</code> loop block.</p></li>
</ol>
<p class="indent">Let’s try using a <code>while</code> loop in Minecraft to teleport to lots of new places!</p>
<h4 class="h4a" id="ch07lev2sec01"><a id="page_125"/><strong>MISSION #33: A RANDOM TELEPORTATION TOUR</strong></h4>
<p class="noindent">In <a href="ch02.html#ch02lev2sec08">Mission #3</a> (<a href="ch02.html#page_40">page 40</a>), you teleported the player to different positions in the game. Let’s rewrite that program using a <code>while</code> loop so you can repeat the teleportation again and again.</p>
<p class="indent">By looping some code that will teleport the player to a random location, you can make the program more powerful <em>and</em> a lot easier to read. Cool, huh?</p>
<p class="indent">The following code will teleport the player to a random location once by picking random values in the game world for the variables <code>x</code>, <code>y</code>, and <code>z</code>. Then it will set the player’s position using those variables.</p>
<p class="programs">   <span class="orange">import</span> random<br/>   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/><br/><span class="ent">➊</span> <span class="red"># Add the count variable here</span><br/><span class="ent">➋</span> <span class="red"># Start the while loop here</span><br/><span class="ent">➌</span> x = random.randint(-127, 127)  <span class="red"># Indent the code from this line</span><br/>   y = random.randint(0, 64)<br/>   z = random.randint(-127, 127)<br/><br/>   mc.player.setTilePos(x, y, z)<br/><span class="ent">➍</span> <span class="red"># Add 1 to the value of the count variable here</span></p>
<p class="indent">Right now, however, the code will only teleport the player once. Although that’s pretty cool, you can make it totally awesome. Let’s write a loop so the code repeats five times, making this quite a whirlwind tour.</p>
<p class="indent">To change the code to use a loop, follow these four steps:</p>
<ol>
<li><p class="noindent">Create a <code>count</code> variable to control the loop <span class="ent">➊</span>.</p></li>
<li><p class="noindent">Add a <code>while</code> loop with a condition based on <code>count</code> <span class="ent">➋</span>.</p></li>
<li><p class="noindent">Indent the body of the <code>while</code> statement <span class="ent">➌</span>.</p></li>
<li><p class="noindent">Increment the value of <code>count</code> with each loop <span class="ent">➍</span>.</p></li>
</ol>
<p class="indent">The purpose of the <code>count</code> variable and the <code>count</code> increment is to keep track of the number of times the loop has repeated. I’ll talk more about them in the next section. For now, all you need to know is that <code>count</code> lets us control how many times this code repeats.</p>
<p class="indent"><a href="ch07.html#ch7ex1">Listing 7-1</a> shows the code with the changes added.</p>
<p class="sidenote"><span class="blue"><em>randomTeleport.py</em></span></p>
<p class="programs"><span class="orange">import</span> random<br/><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>mc = Minecraft.create()<br/><br/>count = 0<br/><span class="orange">while</span> count &lt; 5:<br/>    x = random.randint(-127, 127)<br/>    y = random.randint(0, 64)<br/>    z = random.randint(-127, 127)<br/>    mc.player.setTilePos(x, y, z)<br/>    count += 1</p>
<p class="examplet"><a id="ch7ex1"/><em>Listing 7-1: Code to randomly teleport the player around the game world</em></p>
<p class="indent"><a id="page_126"/>Copy <a href="ch07.html#ch7ex1">Listing 7-1</a> into a new file, save it as <em>randomTeleport.py</em> in a new folder called <em>whileLoops</em>, and run the code. You should see the player zip around the Minecraft world. But the code runs far too quickly! The entire journey is over in less than a second. Let’s fix that together.</p>
<p class="indent">You’ll use the <code>time</code> module to slow down the code. Follow these steps:</p>
<ol>
<li><p class="noindent">On the first line of the program, add the statement <code>import time</code>. This imports Python’s <code>time</code> module, which contains a set of handy functions related to timing and more.</p></li>
<li><p class="noindent">Add the line <code>time.sleep(10)</code> at the end of the body of your <code>while</code> loop to add a delay of 10 seconds to your program. Make sure you indent this new final line of your program so it’s within the <code>while</code> loop!</p></li>
</ol>
<p class="indent">Save the program and run it. Now the player should teleport to a new random location every 10 seconds. <a href="ch07.html#ch7fig1">Figure 7-1</a> shows my program running.</p>
<div class="image"><img src="graphics/f07-01.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig1"/><em>Figure 7-1: Every 10 seconds, the program teleports me to a new location.</em></p>
<div class="sidebar">
<p class="sidebart"><a id="page_127"/><strong>BONUS OBJECTIVE: SLEEP TIGHT</strong></p>
<p class="noindent">At the moment, the program will wait for 10 seconds at the end of every loop. What happens if you move the <code>time.sleep(10)</code> statement to the start of the loop?</p>
</div>
<h3 class="h3" id="ch07lev1sec02"><strong><span class="blue">CONTROLLING LOOPS WITH A COUNT VARIABLE</span></strong></h3>
<p class="noindent">Count variables are a common way of storing the number of times a program has repeated. You’ve seen these variables in action a few times now. Let’s look at another example:</p>
<p class="programs">count = 0<br/><span class="orange">while</span> count &lt; 5:<br/>    <span class="rose">print</span>(count)<br/>    count += 1</p>
<p class="indent">The <code>while</code> loop’s condition tests that the value of the <code>count</code> variable is less than 5. In the body of the loop, I’ve changed the value of the <code>count</code> variable to record the number of times the count has repeated. Adding to the value of a <code>count</code> variable is called <em>incrementing</em>.</p>
<p class="indent">The last line of this code increases the value of the <code>count</code> variable by 1. Each time the code repeats, it will check the new value of the <code>count</code> variable to see whether it is less than 5. When it is equal to or greater than 5, the loop will stop.</p>
<p class="indent">If you forget to increment the <code>count</code> variable, you’ll end up with an <em>infinite loop</em>, which will repeat the loop forever, as shown in the following example:</p>
<p class="programs">count = 0<br/><span class="orange">while</span> count &lt; 5:<br/>    <span class="rose">print</span>(count)</p>
<p class="indent">The value of <code>count</code> is always 0 because it’s never incremented. So, the condition of the loop will always be <code>True</code>, and the loop will repeat <em>forever</em>. If you don’t believe me, try running the code!</p>
<p class="programs"><span class="blue1">0</span><br/><span class="blue1">0</span><br/><span class="blue1">0</span><br/><span class="blue1">0</span><br/><span class="blue1">0</span><br/>--<span class="codeitalic">snip</span>--</p>
<p class="indent"><a id="page_128"/>To break the execution of this infinite program, press <small>CTRL</small>-C. To correct the code, just add the line <code>count += 1</code> to the loop’s body. Now you won’t get trapped in an infinite loop. Phew!</p>
<p class="indent">Counts don’t always have to be incremented by 1. In some situations you may want to increment the count by a different value. In the following example, the count is incremented by 2 every time; the result is that the code prints all the even numbers between 0 and 100:</p>
<p class="programs">count = 0<br/><span class="orange">while</span> count &lt; 100:<br/>    <span class="rose">print</span>(count)<br/>    count += 2</p>
<p class="indent">You can also count backward using a negative number to <em>decrement</em> the value of the count. The following code counts <em>down</em> from 100 to 1:</p>
<p class="programs">count = 100<br/><span class="orange">while</span> count &gt; 0:<br/>    <span class="rose">print</span>(count)<br/>    count -= 1</p>
<p class="indent">The only difference between this example and the previous examples is the condition. Here I’ve used a greater than comparator (<code>&gt;</code>). As long as the count is greater than 0, the loop continues; when the count reaches 0, the loop stops.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>The variable used to control a loop isn’t always called</em> <code><span class="codeitalic">count</code></span>. <em>You could call it</em> <code><span class="codeitalic">repeats</code></span> <em>or anything else you want. If you look at other people’s code, you will see a huge range of different names.</em></p>
</div>
<h4 class="h4a" id="ch07lev2sec02"><strong>MISSION #34: THE WATERY CURSE</strong></h4>
<p class="noindent">Let’s try something a bit nasty and write a curse for the player that lasts for just a short time. Curses in video games might <em>debuff</em> the character in some way, such as slowing them down or making them weaker, often for just a little while.</p>
<p class="indent">We’ll create a curse program that places a flowing water block at the player’s position once a second for 30 seconds. This will make it difficult for the player to move without being pushed around by flowing water.</p>
<p class="indent">The following code places a flowing water block at the player’s position:</p>
<p class="sidenote"><span class="blue"><em>waterCurse.py</em></span></p>
<p class="programs"><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>mc = Minecraft.create()<br/><br/>pos = mc.player.getPos()<br/>mc.setBlock(pos.x, pos.y, pos.z, 8)</p>
<p class="indent"><a id="page_129"/>This code will place a water block at the player’s current position only once. It is your task to make it repeat. The final code should repeat 30 times, and each iteration of the loop should last 1 second.</p>
<p class="indent">Save this code as <em>waterCurse.py</em> in the <em>whileLoops</em> folder and run it once to make sure it works. You should see a single water block appear at the player’s position before the program stops.</p>
<p class="indent">Let’s talk through what to add next to make this curse last. Use what you learned about <code>while</code> loops and <code>count</code> variables to do the following:</p>
<ol>
<li><p class="noindent">Add a <code>count</code> variable to the program.</p></li>
<li><p class="noindent">Add a loop to the program to repeat the last two lines of code. The loop should repeat 30 times.</p></li>
<li><p class="noindent">Increment the <code>count</code> variable at the end of the loop.</p></li>
<li><p class="noindent">Import the <code>time</code> module (on the first line of your program) and then add a 1 second sleep on the last line of the <code>while</code> loop.</p></li>
</ol>
<p class="indent">Save the program and test it. As you walk around the game world, the program should create one block of water every second for 30 seconds. If you get stuck, go back to the steps in <a href="ch07.html#ch07lev2sec01">Mission #33</a> (<a href="ch07.html#page_125">page 125</a>) for help.</p>
<p class="indent"><a href="ch07.html#ch7fig2">Figure 7-2</a> shows the curse in action.</p>
<div class="image"><img src="graphics/f07-02.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig2"/><em>Figure 7-2: Oh no! I’m being followed by a small flood.</em></p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: A FASTER FLOOD</strong></p>
<p class="noindent">How would you make the loop repeat twice as fast (every half a second) while still lasting for 30 seconds?</p>
</div>
<h4 class="h4" id="ch07lev2sec03"><a id="page_130"/><strong><span class="blue">INFINITE WHILE LOOPS</span></strong></h4>
<p class="noindent">In most cases, it is very important that the Boolean condition in your <code>while</code> loop eventually become <code>False</code>; otherwise, the loop will iterate forever, and your computer might crash.</p>
<p class="indent">But there are times when you may want to program an infinite loop. For example, video games often use an infinite loop to check for user input and manage player movement. Of course, these video games include a Quit button so you can pause or stop the infinite loops when you need to take a break!</p>
<p class="indent">A simple way to create an infinite loop is to use a <code>True</code> condition when you define a <code>while</code> loop, as shown here:</p>
<p class="programs"><span class="orange">while True</span>:<br/>    <span class="rose">print</span>(<span class="green">"Hello"</span>)</p>
<p class="indent">This code will repeat forever, printing the string <code>"Hello"</code> over and over again. Whether or not you meant to create an infinite loop, pressing <small>CTRL</small>-C in the Python shell is a common way to stop it. In IDLE you can select <strong>Shell</strong> <span class="ent">▸</span> <strong>Restart Shell</strong> to stop the loop as well.</p>
<p class="indent">Note that any code that is placed <em>after</em> an infinite <code>while</code> loop will never run. In the following example, the last line of code is unreachable due to the infinite <code>while</code> loop that comes before it:</p>
<p class="programs"><span class="orange">while True</span>:<br/>    <span class="rose">print</span>(<span class="green">"Hello"</span>)<br/><span class="rose">print</span>(<span class="green">"This line is never reached"</span>)</p>
<p class="indent">Although infinite loops can sometimes be tricky, you can also create them to do lots of cool things. Let’s try this next!</p>
<h4 class="h4a" id="ch07lev2sec04"><strong>MISSION #35: FLOWER TRAIL</strong></h4>
<p class="noindent">The program you’ll write in this mission is like the one in <a href="ch07.html#ch07lev2sec02">Mission #34</a>, but instead of placing water blocks, you’ll create a trail of flowers behind the player. Flowers are much nicer than floods!</p>
<p class="indent">Open the file <em>waterCurse.py</em> in the <em>whileLoops</em> folder and then save it as <em>flowerTrail.py</em>.</p>
<p class="indent">To make an infinite trail of flowers appear as the player walks around the game, make the following changes to the program:</p>
<ol>
<li><p class="noindent">Change the condition of the <code>while</code> loop to <code>True</code>.</p></li>
<li><p class="noindent">Delete the <code>count</code> variable and the increment.</p></li>
<li><p class="noindent">Change the block type argument in the <code>setBlock()</code> function from <code>8</code> to <code>38</code>.</p></li>
<li><p class="noindent">Reduce the value of the argument in the <code>sleep()</code> function to <code>0.2</code> to make five flowers appear every second.</p></li>
<li><p class="noindent">Save the program and run it. <a href="ch07.html#ch7fig3">Figure 7-3</a> shows what you should see.</p></li>
</ol>
<div class="image"><a id="page_131"/><img src="graphics/f07-03.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig3"/><em>Figure 7-3: Look at all the beautiful flowers!</em></p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: A TRAIL OF DESTRUCTION</strong></p>
<p class="noindent">The <em>flowerTrail.py</em> program is very flexible. Try changing the block type that is placed by the program. A fun block type to try is explosive TNT (<code>setBlock(x, y, z, 46, 1)</code>). Notice the extra argument <code>1</code> after <code>46</code>, which is the TNT block type. The <code>1</code> sets the state of the TNT to make it detonate just by hitting it, without needing flint and steel. Just click the left mouse button a few times when pointing at the TNT to make it explode!</p>
</div>
<h3 class="h3" id="ch07lev1sec03"><strong><span class="blue">FANCY CONDITIONS</span></strong></h3>
<p class="noindent">Because <code>while</code> loops expect a Boolean value for their condition, you can use any of the comparators and Boolean operators that you’ve learned about so far. For instance, you’ve already seen that the greater than and less than operators work just like they did in earlier chapters.</p>
<p class="indent">But you can control <code>while</code> loops with comparators and Boolean operators in other ways as well. Let’s take a look!</p>
<p class="indent">We’ll start by writing a more interactive condition. The following code creates the <code>continueAnswer</code> variable before the loop starts and checks that the value is equal to <code>"Y"</code>. Note that we can’t use the word <code>continue</code> as a variable name because it is a reserved word in Python.</p>
<p class="programs">continueAnswer <span class="green">= "Y"</span><br/>coins = 0<br/><span class="orange">while</span> continueAnswer == <span class="green">"Y"</span>:<br/>    coins = coins + 1<br/>    continueAnswer = input(<span class="green">"Continue? Y/N"</span>)<br/><span class="rose">print</span>(<span class="green">"You have</span> " + <span class="rose">str</span>(coins) <span class="green">+ " coins"</span>)</p>
<p class="indent"><a id="page_132"/>In the last line of the <code>while</code> loop, the program asks for input from the user. If the user presses anything besides <code>"Y"</code> in response, the loop will exit. The user can repeatedly press Y and Y and Y, and each time the value of the <code>coins</code> variable will increase by 1.</p>
<p class="indent">Notice that the variable being checked, <code>continueAnswer</code>, is created before the loop starts. If it wasn’t, the program would display an error. That’s why the variable we use to test the condition must exist before we try to use it, and it must be <code>True</code> when the program reaches the <code>while</code> loop the first time; otherwise, the condition won’t be met, and the <code>while</code> loop’s body statement will never execute.</p>
<h4 class="h4a" id="ch07lev2sec05"><strong>MISSION #36: DIVING CONTEST</strong></h4>
<p class="noindent">Let’s have some fun with <code>while</code> loops and the equal to (<code>==</code>) comparator. In this mission, you’ll create a mini-game in which the player dives underwater for as long as they can. The program will record how many seconds they stay underwater and display their score at the end of the program. To congratulate the player, the program will shower them with flowers if they stay underwater longer than 6 seconds.</p>
<p class="indent">Here is some code to get you started:</p>
<p class="sidenote"><span class="blue"><em>divingContest.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/>   <span class="orange">import</span> time<br/><br/>   score = 0<br/>   pos = mc.player.getPos()<br/><span class="ent">➊</span> blockAbove = mc.getBlock(pos.x, pos.y + 2, pos.z)<br/><br/><span class="ent">➋</span> <span class="red"># Add a while loop here</span><br/>   time.sleep(1)<br/>   pos = mc.player.getPos()<br/><span class="ent">➌</span> blockAbove = mc.getBlock(pos.x, pos.y + 2, pos.z)<br/><span class="ent">➍</span> score = score + 1<br/>   mc.postToChat(<span class="green">"Current score: "</span> + <span class="rose">str</span>(score))<br/><br/>   mc.postToChat(<span class="green">"Final score: "</span> + <span class="rose">str</span>(score))<br/><br/><span class="ent">➎</span> <span class="orange">if</span> score &gt; 6:<br/>       finalPos = mc.player.getTilePos()<br/>       mc.setBlocks(finalPos.x - 5, finalPos.y + 10, finalPos.z - 5,<br/>                    finalPos.x + 5, finalPos.y + 10, finalPos.z + 5, 38)</p>
<p class="indent">Save the program as <em>divingContest.py</em> in your <em>whileLoops</em> folder. The <code>score</code> variable keeps track of how many seconds the player is underwater.</p>
<p class="indent">Run the code to see what happens. At the moment, the program isn’t complete: it only checks whether the player is underwater once and then finishes.</p>
<p class="indent"><a id="page_133"/>Before you fix this, let’s look at what the rest of the code does. The <code>blockAbove</code> variable stores the type of the block located at the player’s head <span class="ent">➊</span>. For example, if the player’s head is underwater, this variable will store a value of 8 (which means the block is water). Later in the code, you’ll set <code>blockAbove</code> to store the value of the block above the player’s head again <span class="ent">➌</span> so when you create your <code>while</code> loop, it will update <code>blockAbove</code> to the current block above the player’s head. At <span class="ent">➍</span>, the program adds 1 point to the total for every second the player is underwater, and at <span class="ent">➎</span>, it uses an <code>if</code> statement to create a shower of flowers above the player if the score is greater than 6.</p>
<p class="indent">It’s up to you to add a loop to the program that uses the <code>blockAbove</code> variable as a condition at <span class="ent">➋</span>. Make the <code>while</code> loop check whether <code>blockAbove</code> is equal to water (block type 8) or equal to flowing water (block type 9). You can use the following condition in the while loop to check this: <code>while blockAbove == 8 or blockAbove == 9</code>. This checks whether the player is currently underwater and will continue to check whether the player is underwater every time the loop repeats.</p>
<p class="indent">To test your program, find some water that’s at least three blocks deep and dive into it. The program will run only if you’re already underwater. When you run the program, it should start displaying how many seconds you’ve been underwater. After a while, swim to the surface. The program should display your score and shower you with flowers if you were underwater for 6 seconds or more. <a href="ch07.html#ch7fig4">Figure 7-4</a> shows the player underwater and the score being displayed. <a href="ch07.html#ch7fig5">Figure 7-5</a> shows the flowers that appear when you win.</p>
<div class="image"><img src="graphics/f07-04.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig4"/><em>Figure 7-4: I’m holding my breath underwater, and the number of seconds I’ve been underwater is displayed.</em></p>
<div class="image"><a id="page_134"/><img src="graphics/f07-05.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig5"/><em>Figure 7-5: I won my very own flowery celebration!</em></p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: A WINNER IS YOU</strong></p>
<p class="noindent">Try adding extra prizes by writing more code in the <code>if</code> statement at the end of the program. If the player gets a high score, you could give them a gold block. Try adding several levels of difficulty with different prizes for each one.</p>
</div>
<h4 class="h4" id="ch07lev2sec06"><strong><span class="blue">BOOLEAN OPERATORS AND WHILE LOOPS</span></strong></h4>
<p class="noindent">You can use Boolean operators like <em>and</em>, <em>or</em>, and <em>not</em> with a <code>while</code> loop when you want the loop to use more than one condition. For example, the following loop will iterate while the user has not input the correct password and has made three attempts or fewer:</p>
<p class="programs">   password = <span class="green">"cats"</span><br/>   passwordInput = <span class="rose">input</span>(<span class="green">"Please enter the password: "</span>)<br/>   attempts = 0<br/><br/><span class="ent">➊</span> <span class="orange">while</span> password != passwordInput <span class="orange">and</span> attempts &lt; 3:<br/><span class="ent">➋</span>     attempts += 1<br/><span class="ent">➌</span>     passwordInput = input(<span class="green">"Incorrect. Please enter the password: "</span>)<br/><br/><span class="ent">➍</span> <span class="orange">if</span> password == passwordInput:<br/>       <span class="rose">print</span>(<span class="green">"Password accepted."</span>)</p>
<p class="indent">The <code>while</code> loop condition <span class="ent">➊</span> does two tasks: it checks whether the password is different from the user’s input (<code>password != passwordInput</code>) and checks whether the user has tried to enter the password three times or less (<code>attempts &lt; 3</code>). The <code>and</code> operator allows the <code>while</code> loop to check both conditions at the same time. If the condition is <code>False</code>, the loop increments the <a id="page_135"/><code>attempts</code> variable <span class="ent">➋</span> and asks the user to reenter the password <span class="ent">➌</span>. The loop will finish if the user enters the correct password or the <code>attempts</code> variable is greater than 3. After the loop finishes, the program will output <code>Password accepted</code> only if the user entered the correct password <span class="ent">➍</span>.</p>
<h4 class="h4" id="ch07lev2sec07"><strong><span class="blue">CHECKING A RANGE OF VALUES IN WHILE LOOPS</span></strong></h4>
<p class="noindent">You can also check for values in a certain range using a <code>while</code> loop. For example, the following code checks whether the value the user has entered is between 0 and 10. If it is not, the loop will exit.</p>
<p class="programs">   position = 0<br/><span class="ent">➊</span> <span class="orange">while</span> 0 &lt;= position &lt;= 10:<br/>       position = <span class="rose">int</span>(<span class="rose">input</span>(<span class="green">"Enter your position 0-10: "</span>))<br/>       <span class="rose">print</span>(position)</p>
<p class="indent">If the <code>position</code> variable is greater than 10, the loop won’t repeat <span class="ent">➊</span>. The same will happen if the value is less than 0. This is useful in Minecraft when you’re checking whether the player’s position is in a certain area in the game, as you’ll see in the next mission.</p>
<h4 class="h4a" id="ch07lev2sec08"><strong>MISSION #37: MAKE A DANCE FLOOR</strong></h4>
<p class="noindent">It’s time to dance! But before you can bust out some sweet moves, you’ll need a dance floor. The program in this mission will generate a dance floor that flashes different colors every half second as long as the player stays on the floor.</p>
<p class="indent">The following is the start of the code. It creates a dance floor at the player’s current position and uses an <code>if</code> statement to change colors. But the code is not complete.</p>
<p class="sidenote"><span class="blue"><em>danceFloor.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/>   <span class="orange">import</span> time<br/><br/>   pos = mc.player.getTilePos()<br/>   floorX = pos.x – 2<br/>   floorY = pos.y - 1<br/>   floorZ = pos.z – 2<br/>   width = 5<br/>   length = 5<br/>   block = 41<br/><span class="ent">➊</span> mc.setBlocks(floorX, floorY, floorZ,<br/>                floorX + width, floorY, floorZ + length, block)<br/><br/><span class="ent">➋</span> <span class="orange">while</span> floorX &lt;= pos.x &lt;= floorX + width <span class="orange">and</span> <span class="red"># Check z is within the floor</span><br/><span class="ent">➌</span>     <span class="orange">if</span> block == 41:<br/>           block = 57<br/>       <span class="orange">else</span>:<br/>           block = 41<br/>       mc.setBlocks(floorX, floorY, floorZ,<br/>                    floorX + width, floorY, floorZ + length, block)<br/>       pos = mc.player.getTilePos()<br/>       time.sleep(0.5)</p>
<p class="indent"><a id="page_136"/>Open IDLE, create a new file, and save the program as <em>danceFloor.py</em> in the <em>whileLoops</em> folder. The code builds the dance floor based on the player’s current position <span class="ent">➊</span> and stores the dance floor’s location and size in the <code>floorX</code>, <code>floorY</code>, <code>floorZ</code>, <code>width</code>, and <code>length</code> variables. Inside the <code>while</code> loop, the code uses an <code>if</code> statement to alternate the blocks that the dance floor is made of <span class="ent">➌</span>, making the dance floor look like it’s flashing.</p>
<p class="indent">To get the program to work properly, you need to change the <code>while</code> loop’s condition to check whether the player’s z-coordinate is on the dance floor <span class="ent">➋</span>. In other words, check whether <code>pos.z</code> is greater than or equal to <code>floorZ</code> and less than or equal to <code>floorZ</code> plus <code>length</code>. For guidance, look at how I checked whether <code>pos.x</code> is on the dance floor by using (<code>floorX &lt;= pos.x &lt;= floorX + width</code>). <a href="ch07.html#ch7fig6">Figure 7-6</a> shows the dance floor in action!</p>
<div class="image"><img src="graphics/f07-06.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig6"/><em>Figure 7-6: I’m showing off my moves on the dance floor.</em></p>
<p class="indent">When you’ve completed the program, save it and run it. A dance floor should appear below the player and change every half second. Dance <a id="page_137"/>around a bit—have some fun! When you’re done, leave the dance floor and make sure it stops flashing. It won’t switch on again unless you run the program again to create a new dance floor.</p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: PARTY’S OVER</strong></p>
<p class="noindent">When the player is finished dancing on the dance floor, make the floor disappear. To do this, change the dance floor to air when the loop finishes.</p>
</div>
<h4 class="h4" id="ch07lev2sec09"><strong><span class="blue">NESTED IF STATEMENTS AND WHILE LOOPS</span></strong></h4>
<p class="noindent">You can write more powerful programs by using <code>if</code> statements and nested <code>if</code> statements inside <code>while</code> loops. You may have noticed a nested <code>if</code> statement in the code in <a href="ch07.html#ch07lev2sec08">Mission #37</a> (<a href="ch07.html#page_135">page 135</a>).</p>
<p class="indent">In the following example, the nested <code>if</code> statement checks the last word that was printed and decides whether to print the words <code>"mine"</code> and <code>"craft"</code>. The loop repeats 50 times.</p>
<p class="programs">word = <span class="green">"mine"</span><br/>count = 0<br/><span class="orange">while</span> count &lt; 50:<br/>    <span class="rose">print</span>(word)<br/>    <span class="orange">if</span> word == <span class="green">"mine"</span>:<br/>        word = <span class="green">"craft"</span><br/>   <span class="orange">else</span>:<br/>        word = <span class="green">"mine"</span></p>
<p class="indent">The <code>word</code> variable stores the first word that will be printed. The <code>if</code> statement in the loop checks whether the current word is <code>"mine"</code> and, if it is, changes the word to <code>"craft"</code> and prints it on the next iteration of the loop. If the word isn’t <code>"mine"</code>, it will be changed to <code>"mine"</code>. This is an infinite loop, so be sure to use <small>CTRL</small>-C to escape!</p>
<p class="indent">You can also nest <code>elif</code> statements and other <code>while</code> loops inside <code>while</code> loops.</p>
<p class="indent">The following program asks the user if they want to print all the numbers between one and a million:</p>
<p class="programs">   userAnswer = <span class="rose">input</span>(<span class="green">"Print the numbers between 1 and 1000000? (yes/no): "</span>)<br/><br/><span class="ent">➊</span> <span class="orange">if</span> userAnswer = <span class="green">"yes"</span>:<br/>       count = 1<br/><span class="ent">➋</span>     <span class="orange">while</span> count &lt;= 1000000:<br/>           <span class="rose">print</span>(count)<br/>           count += 1</p>
<p class="indent">The <code>if</code> statement checks whether the user’s input is <code>yes</code> <span class="ent">➊</span>. If it is, the program runs the loop that is nested in the <code>if</code> statement <span class="ent">➋</span>. If the input is anything else, the program won’t run the loop and will finish.</p>
<h4 class="h4a" id="ch07lev2sec10"><a id="page_138"/><strong>MISSION #38: THE MIDAS TOUCH</strong></h4>
<p class="noindent">Midas is a king of legend. Everything he touched turned to gold. Your mission is to write a program that changes every block below the player to gold—except for air and water, of course, or you’d be in real trouble! Recall that the gold block has a value of 41, still water is 9, and air is 0.</p>
<p class="sidenote"><span class="blue"><em>midas.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/><br/>   air = 0<br/>   water = 9<br/><br/><span class="ent">➊</span> <span class="red"># Add an infinite while loop here</span><br/>       pos = mc.player.getTilePos()<br/>       blockBelow = mc.getBlock(pos.x, pos.y - 1, pos.z)<br/><br/><span class="ent">➋</span>     <span class="red"># Add if statement here</span><br/>           mc.setBlock(pos.x, pos.y - 1, pos.z, 41)</p>
<p class="indent">Open IDLE and create a new file. Save the file as <em>midas.py</em> in the <em>whileLoops</em> folder. You need to add a bit more to the program so it can do what you need it to do. First, you’ll add an infinite <code>while</code> loop <span class="ent">➊</span>. Remember that an infinite <code>while</code> loop has a condition that is always <code>True</code>. You also need to add an <code>if</code> statement that checks whether the block below the player is not equal to air and not equal to still water <span class="ent">➋</span>. The value of the block below the player is stored in the <code>blockBelow</code> variable, and the values for air and water are stored in the <code>air</code> and <code>water</code> variables.</p>
<p class="indent">When you’ve completed the program, save it and run it. The player should leave a trail of gold behind them. When you jump in water or fly in the air, the blocks below you should not change. <a href="ch07.html#ch7fig7">Figure 7-7</a> shows the program in action.</p>
<div class="image"><img src="graphics/f07-07.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig7"/><em>Figure 7-7: Every block I walk on turns to gold.</em></p>
<p class="indent"><a id="page_139"/>To exit the infinite loop, go to <strong>Shell</strong> <span class="ent">▸</span> <strong>Restart Shell</strong> in your IDLE shell or click in the shell and press <small>CTRL</small>-C.</p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: I’M A PLOWMAN</strong></p>
<p class="noindent">You can change <em>midas.py</em> to serve a variety of purposes. How would you change it so it automatically changes dirt blocks to hoed farmland? How about changing dirt blocks to grass blocks?</p>
</div>
<h3 class="h3" id="ch07lev1sec04"><strong><span class="blue">ENDING A WHILE LOOP WITH BREAK</span></strong></h3>
<p class="noindent">With <code>while</code> loops, you have complete control over how and when the loop ends. So far you’ve only used conditions to end loops, but you can also use a <code>break</code> statement. The <code>break</code> statement lets your code immediately exit a <code>while</code> loop. Let’s look at this concept!</p>
<p class="indent">One way to use <code>break</code> statements is to put them in an <code>if</code> statement nested in the loop. Doing so immediately stops the loop when the <code>if</code> statement’s condition is <code>True</code>. The following code continually asks for user input until they type <code>"exit"</code>:</p>
<p class="programs"><span class="ent">➊</span> <span class="orange">while True</span>:<br/><span class="ent">➋</span>    userInput = <span class="rose">input</span>(<span class="green">"Enter a command: "</span>)<br/><span class="ent">➌</span>    <span class="orange">if</span> userInput == <span class="green">"exit"</span>:<br/><span class="ent">➍</span>        <span class="orange">break</span><br/>      <span class="rose">print</span>(userInput)<br/><span class="ent">➎</span> <span class="rose">print</span>(<span class="green">"Loop exited"</span>)</p>
<p class="indent">This is an infinite loop because it uses <code>while True</code> <span class="ent">➊</span>. Each time the loop repeats, it asks for the user to enter a command <span class="ent">➋</span>. The program checks whether the input is <code>"exit"</code> <span class="ent">➌</span> using an <code>if</code> statement. If the input meets the condition, the <code>break</code> statement stops the loop from repeating <span class="ent">➍</span>, and the program continues on the line immediately after the body of the loop, printing <code>"Loop exited"</code> to the Python shell <span class="ent">➎</span>.</p>
<h4 class="h4a" id="ch07lev2sec11"><strong>MISSION #39: CREATE A PERSISTENT CHAT WITH A LOOP</strong></h4>
<p class="noindent">In <a href="ch04.html#ch04lev2sec05">Mission #13</a> (<a href="ch04.html#page_72">page 72</a>), you created a program that posts the user’s message to chat using strings, input, and output. Although this program was useful, it was quite limited because you had to rerun the program every time you wanted to post a new message.</p>
<p class="indent">In this mission, you’ll improve your chat program using a <code>while</code> loop so users can post as many messages as they want without restarting the program.</p>
<p class="indent"><a id="page_140"/>Open the <em>userChat.py</em> file in the <em>strings</em> folder and then save it as <em>chatLoop.py</em> in the <em>whileLoops</em> folder.</p>
<p class="indent">To post a new message every time you want to without rerunning the program, add the following to your code:</p>
<ol>
<li><p class="noindent">Add an infinite <code>while</code> loop to the program.</p></li>
<li><p class="noindent">Add an <code>if</code> statement to the loop to check whether the user’s input is <code>"exit"</code>. If the input is <code>"exit"</code>, the loop should break.</p></li>
<li><p class="noindent">Make sure the <code>userName</code> variable is defined before the start of the loop.</p></li>
</ol>
<p class="indent">When you’ve added the changes, save your program and run it. A prompt in the Python shell will ask you to type in a username. Do this and press <small>ENTER</small>. The program will then ask you to enter a message. Type a message and then press <small>ENTER</small>. The program will keep asking you to enter a message until you type <code>exit</code>. <a href="ch07.html#ch7fig8">Figure 7-8</a> shows my chat program running.</p>
<div class="image"><img src="graphics/f07-08.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig8"/><em>Figure 7-8: I’m chatting with myself.</em></p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: BLOCK CHAT</strong></p>
<p class="noindent">Expand the chat feature so users can create blocks. For example, if the user enters <code>"wool"</code>, the program creates a wool block. You can do this by adding <code>elif</code> statements to your <code>if</code> statement to check user input.</p>
</div>
<h4 class="h4" id="ch07lev2sec12"><a id="page_141"/><strong><span class="blue">WHILE-ELSE STATEMENTS</span></strong></h4>
<p class="noindent">Like an <code>if</code> statement, <code>while</code> loops can have secondary conditions triggered by <code>else</code> statements.</p>
<p class="indent">The <code>else</code> statement executes when the condition of a <code>while</code> statement is <code>False</code>. Unlike the body of a <code>while</code> statement, the <code>else</code> statement will execute only once, as shown here:</p>
<p class="programs">message = <span class="rose">input</span>(<span class="green">"Please enter a message."</span>)<br/><br/><span class="orange">while</span> message != <span class="green">"exit"</span>:<br/>    <span class="rose">print</span>(message)<br/>    message = <span class="rose">input</span>(<span class="green">"Please enter a message."</span>)<br/><span class="orange">else</span>:<br/>    <span class="rose">print</span>(<span class="green">"User has left the chat."</span>)</p>
<p class="indent">This loop repeats as long as the <code>message</code> entered is not equal to <code>"exit"</code>. If the <code>message</code> is <code>"exit"</code>, the loop will stop repeating, and the body of the <code>else</code> statement will print <code>"User has left the chat."</code></p>
<p class="indent">If you use a <code>break</code> statement in the <code>while</code> statement, the <code>else</code> isn’t executed. The following code is similar to the preceding example but includes a nested <code>if</code> statement and a <code>break</code> statement. When the user types <code>abort</code> instead of <code>exit</code>, the chat loop will exit without printing the <code>"User has left the chat."</code> message to the chat.</p>
<p class="programs">message = <span class="rose">input</span>(<span class="green">"Please enter a message."</span>)<br/><br/><span class="orange">while</span> message != <span class="green">"exit"</span>:<br/>    <span class="rose">print</span>(message)<br/>    message = <span class="rose">input</span>(<span class="green">"Please enter a message."</span>)<br/>    <span class="orange">if</span> message == <span class="green">"abort"</span>:<br/>        <span class="orange">break</span><br/><span class="orange">else</span>:<br/>    <span class="rose">print</span>(<span class="green">"User has left the chat."</span>)</p>
<p class="indent">The <code>if</code> statement checks whether the message entered is <code>"abort"</code>. If this is <code>True</code>, the <code>break</code> statement runs and the loop will exit. Because the <code>break</code> statement was used, the body of the <code>else</code> statement will not run, and <code>"User has left the chat."</code> will not be printed.</p>
<h4 class="h4a" id="ch07lev2sec13"><strong>MISSION #40: HOT AND COLD</strong></h4>
<p class="noindent">In this mission, we’ll create a Hot and Cold game in Minecraft. If you’ve never played, the idea is that your friend hides an object and you have to find it. Your friend gives you hints based on how far away from the object you are. If you’re close, your friend says “Hot,” and if you’re far away, they’ll say “Cold.” When you’re right next to the object, they’ll say “You’re on fire!” and if you’re very far away, they’ll say “Freezing!”</p>
<p class="indent"><a id="page_142"/>The object of the game is to find and stand on the diamond block that has been placed randomly in the game world. In this version of the game, you’ll play by yourself, and the Python program will tell you how far away from the hidden block you are. The game ends when you stand on the diamond block.</p>
<p class="indent"><a href="ch07.html#ch7ex2">Listing 7-2</a> places a block in a random location.</p>
<p class="sidenote"><span class="blue"><em>blockHunter.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   <span class="orange">import</span> math<br/>   <span class="orange">import</span> time<br/>   <span class="orange">import</span> random<br/>   mc = Minecraft.create()<br/><br/>   destX = random.randint(-127, 127)<br/>   destZ = random.randint(-127, 127)<br/><span class="ent">➊</span> destY = mc.getHeight(destX, destZ)<br/><br/>   block = 57<br/><span class="ent">➋</span> mc.setBlock(destX, destY, destZ, block)<br/>   mc.postToChat(<span class="green">"Block set"</span>)<br/><br/>   <span class="orange">while True</span>:<br/>       pos = mc.player.getPos()<br/><span class="ent">➌</span>     distance = math.sqrt((pos.x - destX) ** 2 + (pos.z - destZ) ** 2)<br/><br/><span class="ent">➍</span>     <span class="orange">if</span> distance &gt; 100:<br/>           mc.postToChat(<span class="green">"Freezing"</span>)<br/>       <span class="orange">elif</span> distance &gt; 50:<br/>           mc.postToChat(<span class="green">"Cold"</span>)<br/>       <span class="orange">elif</span> distance &gt; 25:<br/>           mc.postToChat(<span class="green">"Warm"</span>)<br/>       <span class="orange">elif</span> distance &gt; 12:<br/>           mc.postToChat(<span class="green">"Boiling"</span>)<br/>       <span class="orange">elif</span> distance &gt; 6:<br/>           mc.postToChat(<span class="green">"On fire!"</span>)<br/>       <span class="orange">elif</span> distance == 0:<br/><span class="ent">➎</span>          mc.postToChat(<span class="green">"Found it"</span>)</p>
<p class="examplet"><a id="ch7ex2"/><em>Listing 7-2: The start of the Hot and Cold program</em></p>
<p class="indent">Before randomly placing a block, the program makes sure that the block won’t be placed underground. To do so, it uses the <code>getHeight()</code> function <span class="ent">➊</span>, which finds the block that is the highest y-coordinate (that is, on the surface) for any position in the game. Then it places a diamond block at a random position <span class="ent">➋</span>.</p>
<p class="indent">The code at <span class="ent">➌</span> calculates the distance to the diamond block. It uses the <code>sqrt()</code> function, which is in the <code>math</code> module—this is why <code>import math</code> is needed at the beginning of the program. The <code>sqrt()</code> function calculates the square root of a number.</p>
<div class="note">
<p class="notet"><a id="page_143"/><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em><a href="ch07.html#ch7ex2">Listing 7-2</a> uses a formula called the</em> Pythagorean theorem. <em>The formula uses two sides of a triangle to calculate the length of the third. In this case, I use the distance from the player to the hidden block on the x-axis and the z-axis to calculate the distance to the hidden block in a straight line.</em></p>
</div>
<p class="indent">The message that the program displays depends on how far away you are from the block, which you can find out using an <code>if</code> statement and the <code>distance</code> variable <span class="ent">➍</span>. The program displays <code>"Freezing"</code> if you’re very far away and <code>"On fire!"</code> if you’re very close.</p>
<p class="indent">Copy <a href="ch07.html#ch7ex2">Listing 7-2</a> into a new file in IDLE and save the program as <em>blockHunter.py</em> in the <em>whileLoops</em> folder.</p>
<p class="indent">At the moment the program works, but it doesn’t end when you find the block. To finish the code, you need to add a <code>break</code> statement when the player’s distance from the block is 0 <span class="ent">➎</span>.</p>
<p class="indent">When you’ve completed the program, save it and run it. A random block will be generated, and you’ll need to find it. The program should stop when you find the block and stand on it. <a href="ch07.html#ch7fig9">Figure 7-9</a> shows that I’ve just found the block.</p>
<div class="image"><img src="graphics/f07-09.jpg" alt="image"/></div>
<p class="figcap"><a id="ch7fig9"/><em>Figure 7-9: I’ve found the block, and now I just need to stand on it.</em></p>
<div class="sidebar">
<p class="sidebart"><strong>BONUS OBJECTIVE: TIME FOR TIME</strong></p>
<p class="noindent">The <em>blockHunter.py</em> program gives you as long as you need to find the block. Can you think of a way to display how long it takes the player to find the block or even limit the amount of time they have to play the game?</p>
</div>
<h3 class="h3" id="ch07lev1sec05"><a id="page_144"/><strong><span class="blue">WHAT YOU LEARNED</span></strong></h3>
<p class="noindent">Well done! You’ve learned a lot about <code>while</code> loops. You can create <code>while</code> loops and infinite <code>while</code> loops, and you can use loops with conditions and Boolean operators. Using loops, you can now write programs that repeat code, which will save you lots of time so you can focus on mastering Minecraft. In <a href="ch08.html#ch08">Chapter 8</a>, you’ll learn another way to make reusable code using functions.</p>
</body></html>