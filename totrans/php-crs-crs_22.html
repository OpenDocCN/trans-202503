<html><head></head><body>
<div id="sbo-rt-content"><section aria-labelledby="ch17" epub:type="chapter" role="doc-chapter">
<span aria-label="327" epub:type="pagebreak" id="pg_327" role="doc-pagebreak"/>
<hgroup>
<h2 class="CHAPTER" id="ch17">
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">17</span></span>
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">INTRODUCTION TO OBJECT-ORIENTED PROGRAMMING</span></span>
</h2>
</hgroup>
<figure class="opener"><img alt="" class="opener" height="380" src="../images/opener.jpg" width="380"/>
</figure>
<p class="INTRO">So far in this book, we’ve been using PHP to write <i>procedural</i> code, a sequence of instructions executed in order. We’re now going to shift our attention to a different way of using PHP: object-oriented programming (OOP). This chapter provides an overview of some important OOP concepts. Then the next several chapters will present in more depth how to harness OOP in your PHP projects.</p>
<p class="TX">The object-oriented style of programming revolves around <i>objects</i>, computer representations of real-world things, and <i>classes</i>, generalized models that define all the abilities and characteristics every object of a certain category should have. In an object-oriented computer system, objects send messages to each other, interpret those messages, and decide what instructions to execute in response, often creating a value to be returned to the sender.</p>
<p class="TX">The power of OOP lies in its capacity for abstraction: programmers can focus much of their attention on planning out a system of classes with <span aria-label="328" epub:type="pagebreak" id="pg_328" role="doc-pagebreak"/>features relating to the real-world task or problem the application is meant to solve, rather than always having to think about the code itself. For example, an online banking system might need classes like <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">Transaction</span>, and objects created from those classes would represent specific instances of clients, bank accounts, and transactions. The messages and operations to make changes to these objects might include functions like <span class="SANS_TheSansMonoCd_W5Regular_11">withdrawCash($sum)</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">setNewOverdraft($limit)</span>, or <span class="SANS_TheSansMonoCd_W5Regular_11">updateClientAddress($address)</span>. Similarly, an online computer game might need such classes as <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">Level</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">InventoryItem</span>, with messages and operations like <span class="SANS_TheSansMonoCd_W5Regular_11">purchaseInventoryItem($itemID)</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">setPlayerName($name)</span>. A programmer can identify all these requirements and map out the necessary web of class relationships before writing a single line of code. Thanks to this planning and organization, the process of writing the code becomes much easier.</p>
<p class="TX">Ultimately, the programmer must declare each class, which does require writing code. The programmer will declare data variables and functions to carry out typical programming tasks such as performing numeric calculations, manipulating strings and arrays, and so on. However, the beauty of OOP is that once you’ve created a class, its structure is essentially hidden “under the hood.” The rest of the coding process can focus on harnessing the objects’ messages and functions, which closely relate to real-world concepts and tasks.</p>
<section aria-labelledby="sec1" epub:type="division">
<h3 class="H1" id="sec1"><span id="toc-link_245"/><span class="SANS_Futura_Std_Bold_B_11">Classes and Objects</span></h3>
<p class="TNI1">An object-oriented program is made up of PHP files that declare classes. A class can be thought of as the blueprint, or template, from which objects are created. Just like a blueprint of a car is just a drawing on paper, a PHP file declaring a class doesn’t itself do anything. However, just as you can ask a factory to take the car blueprint and manufacture one or more physical cars, you can ask the PHP engine to use a class declaration to create objects based on that class.</p>
<p class="TX">Sometimes people refer to an object as an <i>instance</i> of a class, since each object is one specific manifestation of the general characteristics and behaviors defined by the class. You can treat the terms <i>object</i> and <i>instance</i> as synonyms: an object in the computer’s memory, created from a class template, with a set of data values and the capability to respond to messages and execute functions. <a href="#fig17-1">Figure 17-1</a> illustrates the relationship between a class and the objects created from that class.</p>
<span aria-label="329" epub:type="pagebreak" id="pg_329" role="doc-pagebreak"/>
<figure class="IMG"><a id="fig17-1"/><img alt="" class="img100" height="853" src="../images/figure17-1.jpg" width="1396"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 17-1: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Client</span> <span class="SANS_Futura_Std_Book_Oblique_11">class and two</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Client</span> <span class="SANS_Futura_Std_Book_Oblique_11">objects,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">matt</span> <span class="SANS_Futura_Std_Book_Oblique_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">aoife</span></p></figcaption>
</figure>
<p class="TX">The class in the figure, <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span>, represents customers of a bank. You need to know three important aspects of a class: its name, its data variables, and its functions. In this example, our <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> objects will have data variables for the client’s ID number, name, and contact information. When variables are declared as part of a class, they’re called <i>properties</i>. Likewise, our <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> objects have several functions: you can close, suspend, or resume a customer’s account. When functions are declared as part of a class, they’re called <i>methods</i>. The various parts of a class are known collectively as its <i>members</i>; the members of a class include all its properties (variables), methods (functions), and constants.</p>
<p class="TX">The bottom of <a href="#fig17-1">Figure 17-1</a> also shows two objects (or instances) created from the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> class, named <span class="SANS_TheSansMonoCd_W5Regular_11">matt</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">aoife</span>. Each object has its own set of properties (for example, the <span class="SANS_TheSansMonoCd_W5Regular_11">matt</span> object has a surname of <span class="SANS_TheSansMonoCd_W5Regular_11">Smith</span> and the address <span class="SANS_TheSansMonoCd_W5Regular_11">10 Main Street, Dublin</span>), and both objects have access to the methods defined in the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> class. In PHP programming, you can have a <span class="SANS_TheSansMonoCd_W5Regular_11">$matt</span> variable that functions as a reference to the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> object of the same name, and you can send it a message to close Matt’s account by writing <span class="SANS_TheSansMonoCd_W5Regular_11">$matt-&gt;closeAccount()</span>. When the <span class="SANS_TheSansMonoCd_W5Regular_11">$matt</span> object receives this message, it would execute its <span class="SANS_TheSansMonoCd_W5Regular_11">closeAccount()</span> method.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">WARNING</span></p>
</blockquote>
<p class="NOTE-TXT"><i>When you’re writing object-oriented PHP code, make sure you don’t confuse the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">-&gt;</span> <i>object operator (for objects and messages) with the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">=&gt;</span> <i>operator, which is for key/value relationships in arrays.</i></p>
</section>
<section aria-labelledby="sec2" epub:type="division">
<span aria-label="330" epub:type="pagebreak" id="pg_330" role="doc-pagebreak"/>
<h3 class="H1" id="sec2"><span id="toc-link_246"/><span class="SANS_Futura_Std_Bold_B_11">Creating Relationships Between Objects</span></h3>
<p class="TNI1">One of the powerful features of OOP is that you can build relationships between objects by linking a property of one object to another object. In some cases, you might relate objects of the same class. For example, if you have a <span class="SANS_TheSansMonoCd_W5Regular_11">Person</span> class, you might link one <span class="SANS_TheSansMonoCd_W5Regular_11">Person</span> object to another to demonstrate that one person is another person’s parent. Other times, you might relate objects of different classes, such as to establish that a <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> object is the owner of a <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span> object, as shown in <a href="#fig17-2">Figure 17-2</a>.</p>
<figure class="IMG"><a id="fig17-2"/><img alt="" class="img100" height="863" src="../images/figure17-2.jpg" width="1310"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 17-2: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">BankAccount</span> <span class="SANS_Futura_Std_Book_Oblique_11">class declares that each</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">BankAccount</span> <span class="SANS_Futura_Std_Book_Oblique_11">object is linked to a</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Client</span> <span class="SANS_Futura_Std_Book_Oblique_11">object.</span></p></figcaption>
</figure>
<p class="TX">The top of the figure shows the <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span> class. Like the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> class we considered earlier, it includes data properties and methods that objects of this class can have: each <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span> object has an account number, an owner, a balance, an overdraft limit, and a category, along with methods to deposit and withdraw money and set the overdraft limit.</p>
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">owner</span> property is particularly significant: its value must be a reference to a <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> object. The <span class="SANS_TheSansMonoCd_W5Regular_11">owner</span> property thus creates a link between objects of the <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> classes. For example, as you can see at the bottom of the figure, <span class="SANS_TheSansMonoCd_W5Regular_11">DUB1070</span>, a <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span> object, is linked to <span class="SANS_TheSansMonoCd_W5Regular_11">matt</span>, one of the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> objects. The beauty of this mechanism is that for any <span class="SANS_TheSansMonoCd_W5Regular_11">BankAccount</span> object we’re working with, we can follow the link through the <span class="SANS_TheSansMonoCd_W5Regular_11">owner</span> property to its related <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> object and find out the name, address, and other details of the person who has the bank account.</p>
</section>
<section aria-labelledby="sec3" epub:type="division">
<span aria-label="331" epub:type="pagebreak" id="pg_331" role="doc-pagebreak"/>
<h3 class="H1" id="sec3"><span id="toc-link_247"/><span class="SANS_Futura_Std_Bold_B_11">Encapsulation and Information Hiding</span></h3>
<p class="TNI1">A class organizes an object’s data and the methods that can affect that data, gathering them in the same place. This principle, known as <i>encapsulation</i>, is central to OOP. Encapsulation helps keep projects organized; returning to the example in <a href="#fig17-1">Figure 17-1</a>, it’s logical that the methods for working with customer data are declared in the same file that also declares the data properties that should be stored about customers.</p>
<p class="TX">A danger arises, however, if all the data of an object can be directly changed by any part of the computer system that has access to that object. For example, we wouldn’t want the <span class="SANS_TheSansMonoCd_W5Regular_11">age</span> of a <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> object to be set to 0 or a negative number! In fact, the bank might have a policy setting the minimum age of a client to, say, 16 years old. To avoid such unauthorized changes and ensure valid data, object-oriented languages, including PHP, provide ways to control access to an object’s data.</p>
<p class="TX">The OOP feature of managing access to the data and methods of an object is known as <i>information hiding</i>. In PHP, you use the <span class="SANS_TheSansMonoCd_W5Regular_11">public</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">private</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">protected</span> keywords to declare different levels of access to the properties and methods of a class of objects. Continuing our example, we might prevent direct access to a <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> object’s <span class="SANS_TheSansMonoCd_W5Regular_11">age</span> property by making it private. Then we might declare a public <span class="SANS_TheSansMonoCd_W5Regular_11">setAge()</span> method that will update the age only if certain validation requirements are met, such as being an integer <span class="SANS_TheSansMonoCd_W5Regular_11">16</span> or greater. We’ll discuss how to use these features of object-oriented PHP in detail in the next few chapters.</p>
</section>
<section aria-labelledby="sec4" epub:type="division">
<h3 class="H1" id="sec4"><span id="toc-link_248"/><span class="SANS_Futura_Std_Bold_B_11">Superclasses, Inheritance, and Overriding</span></h3>
<p class="TNI1">You can assign properties and methods that are common among several classes to a <i>superclass</i>, a generalized class that other classes (called <i>subclasses</i>) can <i>inherit</i> characteristics from. For example, both staff and clients of a bank will share many common data properties, such as a name, address, and phone number. <a href="#fig17-3">Figure 17-3</a> shows the common properties and methods of the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">StaffMember</span> classes in bold. Some properties and methods are unique to each class, such as <span class="SANS_TheSansMonoCd_W5Regular_11">clientId</span> for <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> objects versus <span class="SANS_TheSansMonoCd_W5Regular_11">staffId</span> for <span class="SANS_TheSansMonoCd_W5Regular_11">StaffMember</span> objects.</p>
<span aria-label="332" epub:type="pagebreak" id="pg_332" role="doc-pagebreak"/>
<figure class="IMG"><a id="fig17-3"/><img alt="" class="img100" height="666" src="../images/figure17-3.jpg" width="1246"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 17-3: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Client</span> <span class="SANS_Futura_Std_Book_Oblique_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">StaffMember</span> <span class="SANS_Futura_Std_Book_Oblique_11">classes have many duplicate members—very inefficient!</span></p></figcaption>
</figure>
<p class="TX"><a href="#fig17-4">Figure 17-4</a> illustrates how we can generalize the common properties and methods into a new superclass named <span class="SANS_TheSansMonoCd_W5Regular_11">Person</span>, from which the <span class="SANS_TheSansMonoCd_W5Regular_11">Client</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">StaffMember</span> classes both inherit. Only those properties and methods unique to a particular subclass are defined directly in the subclass itself. In PHP, we write something as simple as <span class="SANS_TheSansMonoCd_W5Regular_11">class Client extends Person</span> to indicate that one class is to inherit from another.</p>
<figure class="IMG"><a id="fig17-4"/><img alt="" class="img100" height="791" src="../images/figure17-4.jpg" width="1168"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 17-4: The generalized</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Person</span> <span class="SANS_Futura_Std_Book_Oblique_11">superclass eliminates duplication.</span></p></figcaption>
</figure>
<p class="TX">Superclasses and inheritance help you avoid duplicating code across several classes. For example, you wouldn’t want to write code for operations like validating telephone numbers and addresses in multiple places; if something were to change (such as the 2014 introduction of Irish ZIP codes, called Eircodes!), you’d have to update several classes, and perhaps <span aria-label="333" epub:type="pagebreak" id="pg_333" role="doc-pagebreak"/>addresses and phone numbers would end up being treated differently in different parts of the system. Thanks to superclasses and inheritance, the code needs to be updated only once.</p>
<p class="TX">Often you’ll want subclasses to inherit all the methods from their superclass, but this isn’t always the case. Sometimes a class may need to have logic that’s different from that of its superclass. For example, you might have a subclass of clients whose costs or taxes are calculated differently, or you might have products that require a special disclaimer to be displayed. In such circumstances, a subclass can <i>override</i> an inherited method; that is, you can create a method directly in the subclass that takes precedence over the method of the same name from the superclass. In PHP, overriding a method is straightforward: if a subclass declaration implements a method matching one that would have been inherited from a superclass, then the subclass’s method will be used.</p>
</section>
<section aria-labelledby="sec5" epub:type="division">
<h3 class="H1" id="sec5"><span id="toc-link_249"/><span class="SANS_Futura_Std_Bold_B_11">The Flow of Control for Object-Oriented Systems</span></h3>
<p class="TNI1">Each type of programming language has a <i>flow of control</i>, which indicates how a computer system starts running and how it decides what to do next, after it’s started. As you’ve seen in the last several chapters, the flow of control for a procedural PHP web application usually is driven by a front controller in the <i>index.php</i> PHP script. When the web server receives an HTTP request, the statements in <i>index.php</i> are executed in sequence. In an object-oriented application, however, where many of the PHP files are devoted to declaring classes of objects, the flow of control may seem a bit more obscure. When do objects of those classes actually get created and start sending messages to one another?</p>
<p class="TX">Object-oriented PHP web applications still have an <i>index.php</i> script, though it looks a bit different from what we’ve seen previously. It typically creates the main application object, which serves as a front controller, and tells this object to process the received request and act appropriately. <a href="#lis17-1">Listing 17-1</a> illustrates the kind of <i>index.php</i> scripts we’ll write in the coming chapters.</p>
<span id="lis17-1"/>
<pre><code>&lt;?php&#13;
require_once __DIR__ . '<span class="TheSansMonoCd_W5Regular_Italic_11">path to class declaration file</span>';&#13;
&#13;
$app = new WebApplication();&#13;
&#13;
$app-&gt;run();</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 17-1: The typical code for an object-oriented</span> <span class="SANS_Futura_Std_Book_11">index.php</span> <span class="SANS_Futura_Std_Book_Oblique_11">front controller</span></p>
<p class="TX">First, we read in the declaration for the class (or classes) we’ll be using. You’ll learn a simple way to do this in <span class="Xref"><a href="chapter18.xhtml">Chapter 18</a></span>, and then in <span class="Xref"><a href="chapter20.xhtml">Chapter 20</a></span> you’ll learn to use the Composer PHP command line tool to load class declarations in a more general way.</p>
<p class="TX">Next, we create a new object of the <span class="SANS_TheSansMonoCd_W5Regular_11">WebApplication</span> class, storing a reference to this new object in the <span class="SANS_TheSansMonoCd_W5Regular_11">$app</span> variable. The <span class="SANS_TheSansMonoCd_W5Regular_11">WebApplication</span> class will <span aria-label="334" epub:type="pagebreak" id="pg_334" role="doc-pagebreak"/>contain the logic for processing an HTTP request received from a web client, which is everything we previously would have put into the <i>index.php</i> script itself.</p>
<p class="TX">Then we send the message <span class="SANS_TheSansMonoCd_W5Regular_11">run()</span> to the <span class="SANS_TheSansMonoCd_W5Regular_11">WebApplication</span> object, which will result in the <span class="SANS_TheSansMonoCd_W5Regular_11">run()</span> method that’s declared in the <span class="SANS_TheSansMonoCd_W5Regular_11">WebApplication</span> class being executed for the particular <span class="SANS_TheSansMonoCd_W5Regular_11">$app</span> object. The code for the <span class="SANS_TheSansMonoCd_W5Regular_11">run()</span> method will include statements to do things like extract an action from the URL-encoded variables and check the session for login status. The code may also invoke other methods or create new objects as appropriate to complete the action requested by the web client.</p>
<p class="TX">In summary, for a web application like this, the flow of control is sequential within the <i>index.php</i> file; the statements in that file are executed in order. As a result, an object is created, and the object is sent a message to start processing the HTTP request. From this point on, all the other logic for our web application will be in the methods of the <span class="SANS_TheSansMonoCd_W5Regular_11">WebApplication</span> class, or other classes for which objects will be created as part of the execution of methods in the <span class="SANS_TheSansMonoCd_W5Regular_11">WebApplication</span> class.</p>
</section>
<section aria-labelledby="sec6" epub:type="division">
<h3 class="H1" id="sec6"><span id="toc-link_250"/><span class="SANS_Futura_Std_Bold_B_11">An Example Class Declaration</span></h3>
<p class="TNI1">Let’s now consider an example PHP class declaration. In <a href="#lis17-2">Listing 17-2</a>, we declare a class named <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span>, such as might be part of an online game system. Don’t worry too much about the specifics of the code; we’ll cover how to write PHP classes in much more detail in later chapters. For now, this example simply offers a glimpse of the type of code that’s to come.</p>
<span id="lis17-2"/>
<pre><code>&lt;?php&#13;
class Player&#13;
{&#13;
    private string $name;&#13;
  <span aria-label="annotation1" class="Code_CodeAnnotation">❶</span> private int $highScore = 0;&#13;
&#13;
  <span aria-label="annotation2" class="Code_CodeAnnotation">❷</span> public function setName(string $name)&#13;
    {&#13;
        $this-&gt;name = $name;&#13;
    }&#13;
&#13;
  <span aria-label="annotation3" class="Code_CodeAnnotation">❸</span> public function setHighScore(int $newScore)&#13;
    {&#13;
        if ($newScore &gt; $this-&gt;highScore) {&#13;
            $this-&gt;highScore = $newScore;&#13;
        }&#13;
    }&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing 17-2: The PHP code to declare a</span> <span class="TheSansMonoCd_W5Regular_Italic_11">Player</span> <span class="SANS_Futura_Std_Book_Oblique_11">class</span></p>
<p class="TX">We use the <span class="SANS_TheSansMonoCd_W5Regular_11">class</span> keyword to declare a class called <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span>, and we give the class two properties, <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">highScore</span>. Just as for variables in non-object-oriented PHP, you can assign a default value to a property. We do that here, <span aria-label="335" epub:type="pagebreak" id="pg_335" role="doc-pagebreak"/>setting the default value of <span class="SANS_TheSansMonoCd_W5Regular_11">highScore</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> <span aria-label="annotation1" class="CodeAnnotation">❶</span> so that each new <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> object will be created with an initial high score of 0. We next declare the <span class="SANS_TheSansMonoCd_W5Regular_11">setName()</span> method <span aria-label="annotation2" class="CodeAnnotation">❷</span>, which when invoked will take in a string parameter and store it in a <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> object’s <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> property. Then we declare the <span class="SANS_TheSansMonoCd_W5Regular_11">setHighScore()</span> method <span aria-label="annotation3" class="CodeAnnotation">❸</span>. It takes in a parameter (<span class="SANS_TheSansMonoCd_W5Regular_11">$newScore</span>), and if this new score is higher than the stored high score for the object, then the new score is stored in the object’s <span class="SANS_TheSansMonoCd_W5Regular_11">highScore</span> property.</p>
<p class="TX">When a method is executed, it will be working on the properties of a particular object created from the class the method is defined in. In the method’s definition, the special PHP keyword <span class="SANS_TheSansMonoCd_W5Regular_11">$this</span> refers to the object on which the method will be invoked. Thus, in the definition for the <span class="SANS_TheSansMonoCd_W5Regular_11">setName()</span> method, we use the <span class="SANS_TheSansMonoCd_W5Regular_11">$this</span> keyword (as in <span class="SANS_TheSansMonoCd_W5Regular_11">$this-&gt;name = $name;</span>) as a stand-in for whichever <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> object is being assigned a name. For example, I might have an object <span class="SANS_TheSansMonoCd_W5Regular_11">$player1</span> whose name I set to <span class="SANS_TheSansMonoCd_W5Regular_11">"Matt"</span>, and a second object <span class="SANS_TheSansMonoCd_W5Regular_11">$player2</span> whose name I set to <span class="SANS_TheSansMonoCd_W5Regular_11">"Aoife"</span>. In both cases, the <span class="SANS_TheSansMonoCd_W5Regular_11">setName()</span> method code <span aria-label="annotation2" class="CodeAnnotation">❷</span> would be invoked to assign the name, and in both cases <span class="SANS_TheSansMonoCd_W5Regular_11">$this</span> would stand for the <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> object whose name is being set: first <span class="SANS_TheSansMonoCd_W5Regular_11">$player1</span> and then <span class="SANS_TheSansMonoCd_W5Regular_11">$player2</span>.</p>
<p class="TX">Our class declaration includes examples of information hiding, in that the <span class="SANS_TheSansMonoCd_W5Regular_11">name</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">highScore</span> properties are declared as <span class="SANS_TheSansMonoCd_W5Regular_11">private</span>. They can’t be changed by code from outside the <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> class. However, we’ve also declared the <span class="SANS_TheSansMonoCd_W5Regular_11">setName()</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">setHighScore()</span> methods as <span class="SANS_TheSansMonoCd_W5Regular_11">public</span>. These <i>setter</i> methods allow for outside communication with <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> objects, but only through internal validation checks coded in the methods (such as checking that a new score exceeds the previous high score before overwriting the <span class="SANS_TheSansMonoCd_W5Regular_11">highScore</span> property); these checks ensure that the object’s data is never set to invalid or inconsistent values.</p>
<p class="TX">Notice that each method in <a href="#lis17-2">Listing 17-2</a> is short and simple. Once the architecture of an application has been created, writing code to declare each property and method of a class is often relatively straightforward. While the methods for a full web application will be longer than those shown in this example, one benefit of OOP is that it typically allows programmers to focus on writing one method of a class at a time, with each method having one clear responsibility.</p>
<p class="TX">With OOP, you don’t have to think about all the ways the method could be used; you only need to make sure that what you’re writing is a correct behavior for the class. For example, it doesn’t matter if a <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> object’s name is being set for the first time at the start of the game, is being updated in the middle of the game because the player changed their mind, or is being changed automatically because the player was turned into a frog. The point is to write the <span class="SANS_TheSansMonoCd_W5Regular_11">setName()</span> method so that it requires valid parameters and results in the correct changes to the <span class="SANS_TheSansMonoCd_W5Regular_11">Player</span> object’s properties. As such, the code will be easy to write and maintain.</p>
</section>
<section aria-labelledby="sec7" epub:type="division">
<h3 class="H1" id="sec7"><span id="toc-link_251"/><span class="SANS_Futura_Std_Bold_B_11">Summary</span></h3>
<p class="TNI1">In this chapter, we surveyed some of the important OOP concepts. You saw that classes are templates for creating objects and that classes allow you to <span aria-label="336" epub:type="pagebreak" id="pg_336" role="doc-pagebreak"/>store all the variables and functions an object needs in one place, a concept called <i>encapsulation</i>. You also saw that objects can link to each other through their properties and that objects of different subclasses can inherit shared properties and methods from superclasses. Finally, you had a first look at some of the PHP code that implements these concepts.</p>
<p class="TX">In the next few chapters, you’ll learn how to declare classes, create objects, and send messages to objects to invoke their methods and change their data. You’ll then begin to put all that knowledge together to create well-organized object-oriented web applications building on the features we’ve explored in all the previous chapters. As you read ahead, don’t forget that you already know many of the core requirements for writing object-oriented PHP programs, since OOP comes down to declaring variables and writing PHP statements in functions; it’s just that the variables (properties) and functions (methods) are grouped (encapsulated) together in classes, and that the methods will be invoked in response to messages sent to objects of the classes.</p>
</section>
<section aria-labelledby="sec8" epub:type="division">
<h3 class="H1" id="sec8"><span id="toc-link_252"/><span class="SANS_Futura_Std_Bold_B_11">Exercises</span></h3>
<p class="ListNumber">1.   Choose a computer system, such as an online store, an application on your desktop or laptop, or an app on your phone or tablet. Think about some of the classes of objects that system might be using. Choose one class of object and write a list of the pieces of data it might store, as well as some of the methods it might need in order to work on that data.</p>
<p class="ListNumber">2.   Thinking again of the classes from Exercise 1, try to identify one data property that you would want to restrict access to, so that it could be changed only through a method that would log the change.</p>
<p class="ListNumber">3.   Consider a computer system for a library. Think of two classes of objects the computer system might use that share several data properties and methods (for example, different types of items the library offers for lending). Now generalize those common properties and methods into a suitably named superclass, and draw a class diagram like <a href="#fig17-4">Figure 17-4</a> that shows which properties and methods are inherited from the superclass and which are specific to each subclass.</p>
</section>
</section>
</div></body></html>