<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en">
	<head>
		<title>Appendix B: Troubleshooting VirtualBox</title>
		<link href="NSTemplate_v1.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:af29b7b1-e841-4e64-a1ef-e03d2d2c1d42" name="Adept.expected.resource"/>
	</head>
	<body>
		<section>
			<header>
				<h1 class="Appendix"><span class="AppendixNumber"><span epub:type="pagebreak" id="Page_147" title="147"/>B</span><br/><span class="AppendixTitle">Troubleshooting VirtualBox</span></h1>
			</header>
			<figure class="opener">
				<img alt="" src="image_fi/book_art/chapterart.png"/>
			</figure>
			<p class="ChapterIntro">The first time you run a virtual machine in VirtualBox, you might encounter errors due to different settings on your Mac or PC. Use this appendix to troubleshoot your VirtualBox setup. If you try everything listed in these steps and still have trouble, go to the book’s website, <a class="LinkURL" href="https://www.nostarch.com/go-hck-yourself/">https://www.nostarch.com/go-hck-yourself/</a>, for the latest help, or do a web search for the specific error you’re seeing. Setting up a virtual hacking lab may take a few tries, but it’s worth it!</p>
			<h2 id="h1-502000b02-0001">Troubleshooting VirtualBox on Mac</h2>
			<p class="BodyFirst">Some Macs might display an error when loading the Kali VM for the first time. Try following these steps to fix the error:</p>
			<ol class="decimal">
				<li value="1">Make sure you’ve correctly installed the VirtualBox Extension Pack, as described in Chapter 3.</li>
				<li value="2">Go to <b>System Preferences</b><span class="MenuArrow">▶</span><b>Security &amp; Privacy</b> and click the <b>General</b> tab.</li>
				<li value="3"><span epub:type="pagebreak" id="Page_148" title="148"/>If you see a message near the bottom saying that Oracle software was blocked from loading, click <b>Allow</b>.</li>
				<li value="4">Restart VirtualBox, and your Kali VM should open correctly.</li>
			</ol>
			<h2 id="h1-502000b02-0002">Troubleshooting VirtualBox on Windows</h2>
			<p class="BodyFirst">If VirtualBox isn’t running correctly for you on Windows, you may need to do the following:</p>
			<ol class="decimal">
				<li value="1">Turn off Hyper-V options in the Control Panel.</li>
				<li value="2">Turn on Virtualization in your computer’s BIOS or UEFI settings.</li>
			</ol>
			<p>We’ll go through both steps in more detail next. Once you’ve done both, restart VirtualBox and retry opening the Kali VM.</p>
			<h3 id="h2-502000b02-0001">Turn Off Hyper-V Options</h3>
			<p class="BodyFirst">Some versions of Windows come with Hyper-V (Microsoft’s own virtualization software) enabled by default. To use VirtualBox instead, you’ll need to turn off Hyper-V.</p>
			<ol class="decimal">
				<li value="1">Go to <b>Control Panel</b><span class="MenuArrow">▶</span><b>Programs</b><span class="MenuArrow">▶</span><b>Programs and Features</b><span class="MenuArrow">▶</span><b>Turn Windows features on or off</b>.</li>
				<li value="2">In the list of settings, uncheck all boxes with Hyper-V or Hypervisor Platform in their names, as shown in <a href="#figureB-1" id="figureanchorB-1">Figure B-1</a>. 
					<figure>
						<img alt="fab001a" class="" src="image_fi/502000b02/fab001a.png"/>
						<figcaption>
							<p><a id="figureB-1">Figure B-1</a>: Turning off all Hyper-V and Windows Hypervisor Platform options</p>
						</figcaption>
					</figure>
					</li>
				<li value="3"><span epub:type="pagebreak" id="Page_149" title="149"/>After turning off the Hyper-V and Hypervisor Platform settings, you’ll need to reboot your computer before running VirtualBox again.</li>
			</ol>
			<h3 id="h2-502000b02-0002">Turn On Virtualization in BIOS/UEFI Settings</h3>
			<p class="BodyFirst">If you’ve turned off Hyper-V and still have trouble using VirtualBox, you may need to enable virtualization. To turn on virtualization support, you’ll need to reboot into your computer’s BIOS or UEFI, the basic hardware settings for your PC.</p>
			<ol class="decimal">
				<li value="1">In Windows 10, go to <b>Settings</b><span class="MenuArrow">▶</span><b>Update &amp; Security</b><span class="MenuArrow">▶</span><b>Recovery</b><span class="MenuArrow">▶</span><b>Advanced startup</b><span class="MenuArrow">▶</span><b>Restart now</b>, as shown in <a href="#figureB-2" id="figureanchorB-2">Figure B-2</a>. Your computer should reboot into an advanced startup mode.
					<figure>
						<img alt="fab002" class="" src="image_fi/502000b02/fab002.png"/>
						<figcaption>
							<p><a id="figureB-2">Figure B-2</a>: Entering BIOS from Windows 10</p>
						</figcaption>
					</figure>
					<aside epub:type="sidebar">
						<div class="top hr">
							<hr/>
						</div>
						<section class="note">
							<h2><span class="NoteHead">WARNING</span></h2>
							<p>	Be careful when changing BIOS and startup settings—they can reset your entire PC and erase all your files! The following steps change only the options that relate to running your VMs correctly.</p>
							<div class="bottom hr">
								<hr/>
							</div>
						</section>
					</aside>
			</li>
				<li value="2">From the blue startup menu, select <b>Troubleshoot</b> and press <b>ENTER</b>. Then select <b>Advanced options</b> and press <b>ENTER</b><span class="KeyCaps"> </span>again, as shown in <a href="#figureB-3" id="figureanchorB-3">Figure B-3</a>.</li>
				<li value="3">The Advanced options menu screen contains useful tools for troubleshooting and fixing your PC, including System Restore and Startup Repair. At the bottom-right of this menu, select the option for either <b>UEFI Firmware Settings</b> or <b>Startup Settings</b>, as shown in <a href="#figureB-4" id="figureanchorB-4">Figure B-4</a>. <span epub:type="pagebreak" id="Page_150" title="150"/>
				<figure><img alt="fab003b" class="" src="image_fi/502000b02/fab003b.png"/><figcaption>
							<p><a id="figureB-3">Figure B-3</a>: Accessing the Advanced options menu</p>
						</figcaption>
					</figure>
					<figure>
						<img alt="fab004b" class="" src="image_fi/502000b02/fab004b.png"/>
						<figcaption>
							<p><a id="figureB-4">Figure B-4</a>: Accessing the UEFI Firmware Settings or Startup Settings</p>
						</figcaption>
					</figure>
					</li>
				<li value="4">Press <b>ENTER</b> and then click <b>Restart</b>. If your computer uses the newer UEFI firmware settings, you should see the UEFI settings menu when it restarts. If your computer uses the older BIOS startup settings, you may need to press a special key to enter BIOS as it restarts.
					<aside epub:type="sidebar">
						<div class="top hr">
							<hr/>
						</div>
						<section class="note">
							<h2><span class="NoteHead">NOTE</span></h2>
							<p>
									On older computers, including those running previous versions of Windows, you can access BIOS when you first turn the computer on. You should see a brief screen at startup showing a special key (F12, <span class="KeyCaps">DEL</span>, <span class="KeyCaps">ESC</span>, or similar) to enter the BIOS setup menu. If you can’t find the key, do a web search for “BIOS settings” for your computer model or manufacturer. You may need to hold the key down or press it repeatedly immediately after powering on your computer.</p>
							<div class="bottom hr">
								<hr/>
							</div>
						</section>
					</aside>
			</li>
				<li value="5">Once you’ve entered your startup BIOS or UEFI settings, find the virtualization settings and turn them on. You’ll probably need to navigate the old-fashioned-looking menu using your arrow keys, spacebar, or <span class="KeyCaps">ENTER</span> key. Every brand of PC has a slightly different BIOS, so just look <span epub:type="pagebreak" id="Page_151" title="151"/>for menu options that say something like “Virtualization Technology,” “VT-x,” or “VT-d.” These are usually under Advanced, System, or CPU settings.</li>
				<li value="6">Enable or turn on virtualization, save your changes, and exit to reboot into Windows.</li>
				<li value="7">Restart VirtualBox and open the Kali VM again.</li>
			</ol>
			<h2 id="h1-502000b02-0003">One Last Issue: Certain Antivirus Programs</h2>
			<p class="BodyFirst">If your VM still won’t start after you’ve tried all the virtualization settings just discussed, and after you’ve downloaded and reinstalled the correct VirtualBox and VM files, your computer’s antivirus software might be blocking VirtualBox. Search online for whether others are encountering the same issue (my students have had trouble with WebRoot SecureAnywhere, as well as some versions of Avast and Symantec), as you might be able to add an exclusion for VirtualBox so that the antivirus software won’t block it. As a last resort, try using a computer with a different antivirus app or changing antivirus programs.</p>
		</section>
	</body>
</html>