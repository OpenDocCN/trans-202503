- en: Preface
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 前言
- en: Subject
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 主题
- en: In this book, I describe the Linux programming interface—the system calls, library
    functions, and other low-level interfaces provided by Linux, a free implementation
    of the UNIX operating system. These interfaces are used, directly or indirectly,
    by every program that runs on Linux. They allow applications to perform tasks
    such as file I/O, creating and deleting files and directories, creating new processes,
    executing programs, setting timers, communicating between processes and threads
    on the same computer, and communicating between processes residing on different
    computers connected via a network. This set of low-level interfaces is sometimes
    also known as the *system programming* interface.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书描述了 Linux 编程接口——即 Linux 提供的系统调用、库函数和其他低级接口，Linux 是一个免费的 UNIX 操作系统实现。这些接口直接或间接地被每一个在
    Linux 上运行的程序所使用。它们允许应用程序执行诸如文件 I/O、创建和删除文件与目录、创建新进程、执行程序、设置计时器、在同一计算机上进行进程和线程间通信以及通过网络连接的不同计算机之间进行进程间通信等任务。这组低级接口有时也被称为*系统编程*接口。
- en: Although I focus on Linux, I give careful attention to standards and portability
    issues, and clearly distinguish the discussion of Linux-specific details from
    the discussion of features that are common to most UNIX implementations and standardized
    by POSIX and the Single UNIX Specification. Thus, this book also provides a comprehensive
    description of the UNIX/POSIX programming interface and can be used by programmers
    writing applications targeted at other UNIX systems or intended to be portable
    across multiple systems.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我主要关注 Linux，但我也特别注意标准和可移植性问题，并且清楚地区分了与 Linux 特定细节相关的讨论与大多数 UNIX 实现中共有特性以及由
    POSIX 和单一 UNIX 规范标准化的特性之间的讨论。因此，本书还提供了 UNIX/POSIX 编程接口的全面描述，适用于为其他 UNIX 系统编写应用程序或打算在多个系统之间进行移植的程序员。
- en: Intended audience
  id: totrans-4
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 预期读者
- en: 'This book is aimed primarily at the following audience:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书主要面向以下读者：
- en: programmers and software designers building applications for Linux, other UNIX
    systems, or other POSIX-conformant systems;
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Linux、其他 UNIX 系统或其他符合 POSIX 标准的系统构建应用程序的程序员和软件设计师；
- en: programmers porting applications between Linux and other UNIX implementations
    or between Linux and other operating systems;
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Linux 与其他 UNIX 实现之间，或者在 Linux 与其他操作系统之间移植应用程序的程序员；
- en: instructors and advanced students teaching or learning Linux or UNIX system
    programming; and
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 教授或学习 Linux 或 UNIX 系统编程的讲师和高级学生；
- en: system managers and “power users” wishing to gain a greater understanding of
    the Linux/UNIX programming interface and of how various pieces of system software
    are implemented.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 希望深入了解 Linux/UNIX 编程接口以及各种系统软件实现方式的系统管理员和“高级用户”。
- en: I assume you have some prior programming experience, but no previous system
    programming experience is required. I also assume you have a reading knowledge
    of the C programming language, and know how to use the shell and common Linux
    or UNIX commands. If you are new to Linux or UNIX, you will find it helpful to
    read the programmer-oriented review of fundamental concepts of Linux and UNIX
    systems in [Chapter 2](ch02.html "Chapter 2. Fundamental Concepts").
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我假设你有一定的编程经验，但不要求具备系统编程经验。我还假设你具有 C 编程语言的阅读能力，能够使用 shell 和常用的 Linux 或 UNIX 命令。如果你是
    Linux 或 UNIX 的新手，建议你先阅读[第 2 章](ch02.html "第 2 章：基本概念")，其中有针对程序员的 Linux 和 UNIX
    系统基础概念的回顾。
- en: Note
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The standard tutorial reference for C is [Kernighan & Ritchie, 1988]. [Harbison
    & Steele, 2002] goes into even more detail on C, and includes coverage of changes
    introduced with the C99 standard. [van der Linden, 1994] is an alternative look
    at C that is both highly amusing and instructive. [Peek et al., 2001] provides
    a good, brief introduction to using a UNIX system.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: C 语言的标准教程参考资料是[Kernighan & Ritchie, 1988]。 [Harbison & Steele, 2002] 对 C 语言进行了更为详细的讲解，并涵盖了
    C99 标准引入的变化。[van der Linden, 1994] 是 C 语言的另一种视角，既有趣又富有启发性。[Peek 等, 2001] 提供了一个简短的
    UNIX 系统使用入门介绍。
- en: Throughout this book, indented small-font paragraphs like these are used for
    asides containing rationale, implementation details, background information, historical
    notes, and other topics that are ancillary to the main text.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，像这样缩进的小字体段落用于插入附带说明，包含理由、实现细节、背景信息、历史注释以及与主要内容相关的其他话题。
- en: Linux and UNIX
  id: totrans-14
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Linux 和 UNIX
- en: This book could have been purely about standard UNIX (that is, POSIX) system
    programming because most features found on other UNIX implementations are also
    present on Linux and vice versa. However, while writing portable applications
    is a worthy goal, it is also important to describe Linux extensions to the standard
    UNIX programming interface. One reason for this is the popularity of Linux. Another
    is that the use of nonstandard extensions is sometimes essential, either for performance
    reasons or to access functionality that is unavailable in the standard UNIX programming
    interface. (All UNIX implementations provide nonstandard extensions for these
    reasons.)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本书本可以完全聚焦于标准UNIX（即POSIX）系统编程，因为其他UNIX实现中大多数功能在Linux上也能找到，反之亦然。然而，尽管编写可移植应用程序是一个值得追求的目标，但同样重要的是要描述Linux对标准UNIX编程接口的扩展。这样做的一个原因是Linux的流行，另一个原因是非标准扩展有时是必需的，无论是出于性能考虑，还是为了访问标准UNIX编程接口中不可用的功能。（所有UNIX实现都提供这些非标准扩展，原因正是如此。）
- en: 'Therefore, while I’ve designed this book to be useful to programmers working
    with all UNIX implementations, I also provide full coverage of programming features
    that are specific to Linux. These features include:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，虽然我设计本书旨在为所有UNIX实现的程序员提供帮助，但我也完整地涵盖了Linux特有的编程功能。这些功能包括：
- en: '*epoll*, a mechanism for obtaining notification of file I/O events;'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*epoll*，一种用于获取文件I/O事件通知的机制；'
- en: '*inotify*, a mechanism for monitoring changes in files and directories;'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*inotify*，一种监控文件和目录变化的机制；'
- en: capabilities, a mechanism for granting a process a subset of the powers of the
    superuser;
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 权限机制，即授予进程超级用户权限的子集；
- en: extended attributes;
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展属性；
- en: i-node flags;
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: i-node标志；
- en: the *clone()* system call;
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*clone()*系统调用；'
- en: the `/proc` file system; and
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/proc`文件系统；以及'
- en: Linux-specific details of the implementation of file I/O, signals, timers, threads,
    shared libraries, interprocess communication, and sockets.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux特定的文件I/O、信号、定时器、线程、共享库、进程间通信和套接字的实现细节。
- en: Usage and organization
  id: totrans-25
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 用法和组织
- en: 'You can use this book in at least two ways:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以至少通过两种方式使用本书：
- en: As a tutorial introduction to the Linux/UNIX programming interface. You can
    read the book linearly. Later chapters build on material presented in earlier
    chapters, with forward references minimized as far as possible.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为Linux/UNIX编程接口的教程介绍，你可以线性地阅读本书。后续章节基于前面的内容，尽量减少了前向引用。
- en: As a comprehensive reference to the Linux/UNIX programming interface. An extensive
    index and frequent cross-references allow topics to be read in random order.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为Linux/UNIX编程接口的全面参考书。丰富的索引和频繁的交叉引用使得主题可以按随机顺序阅读。
- en: 'I’ve grouped the chapters of this book into the following parts:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我将本书的章节分为以下几部分：
- en: '*Background and concepts*: history of UNIX, C, and Linux and overview of UNIX
    standards ([Chapter 1](ch01.html "Chapter 1. History and Standards")); a programmer-oriented
    introduction to Linux and UNIX concepts ([Chapter 2](ch02.html "Chapter 2. Fundamental
    Concepts")); and fundamental concepts for system programming on Linux and UNIX
    ([Chapter 3](ch03.html "Chapter 3. System Programming Concepts")).'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*背景与概念*：UNIX、C和Linux的历史，以及UNIX标准概述（[第1章](ch01.html "第1章. 历史与标准")）；面向程序员的Linux和UNIX概念介绍（[第2章](ch02.html
    "第2章. 基本概念")）；以及Linux和UNIX系统编程的基本概念（[第3章](ch03.html "第3章. 系统编程概念")）。'
- en: '*Fundamental features of the system programming interface*: file I/O ([Chapter 4](ch04.html
    "Chapter 4. File I/O: The Universal I/O Model") and [Chapter 5](ch05.html "Chapter 5. File
    I/O: Further Details")); processes ([Chapter 6](ch06.html "Chapter 6. Processes"));
    memory allocation ([Chapter 7](ch07.html "Chapter 7. Memory Allocation")); users
    and groups ([Chapter 8](ch08.html "Chapter 8. Users and Groups")); process credentials
    ([Chapter 9](ch09.html "Chapter 9. Process Credentials")); time ([Chapter 10](ch10.html
    "Chapter 10. Time")); system limits and options ([Chapter 11](ch11.html "Chapter 11. System
    Limits and Options")); and retrieving system and process information ([Chapter 12](ch12.html
    "Chapter 12. System and Process Information")).'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*系统编程接口的基本功能*: 文件I/O ([第4章](ch04.html "第4章。文件I/O：通用I/O模型") 和 [第5章](ch05.html
    "第5章。文件I/O：进一步细节")); 进程 ([第6章](ch06.html "第6章。进程")); 内存分配 ([第7章](ch07.html "第7章。内存分配"));
    用户和组 ([第8章](ch08.html "第8章。用户和组")); 进程凭证 ([第9章](ch09.html "第9章。进程凭证")); 时间 ([第10章](ch10.html
    "第10章。时间")); 系统限制和选项 ([第11章](ch11.html "第11章。系统限制和选项")); 以及检索系统和进程信息 ([第12章](ch12.html
    "第12章。系统和进程信息"))。'
- en: '*More advanced features of the system programming interface*: file I/O buffering
    ([Chapter 13](ch13.html "Chapter 13. File I/O Buffering")); file systems ([Chapter 14](ch14.html
    "Chapter 14. File Systems")); file attributes ([Chapter 15](ch15.html "Chapter 15. File
    Attributes")); extended attributes ([Chapter 16](ch16.html "Chapter 16. Extended
    Attributes")); access control lists ([Chapter 17](ch17.html "Chapter 17. Access
    Control Lists")); directories and links ([Chapter 18](ch18.html "Chapter 18. Directories
    and Links")); monitoring file events ([Chapter 19](ch19.html "Chapter 19. Monitoring
    File Events")); signals ([Chapter 20](ch20.html "Chapter 20. Signals: Fundamental
    Concepts") to [Chapter 22](ch22.html "Chapter 22. Signals: Advanced Features"));
    and timers ([Chapter 23](ch23.html "Chapter 23. Timers and Sleeping")).'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*系统编程接口的更高级功能*: 文件I/O缓冲 ([第13章](ch13.html "第13章。文件I/O缓冲")); 文件系统 ([第14章](ch14.html
    "第14章。文件系统")); 文件属性 ([第15章](ch15.html "第15章。文件属性")); 扩展属性 ([第16章](ch16.html "第16章。扩展属性"));
    访问控制列表 ([第17章](ch17.html "第17章。访问控制列表")); 目录和链接 ([第18章](ch18.html "第18章。目录和链接"));
    监控文件事件 ([第19章](ch19.html "第19章。监控文件事件")); 信号 ([第20章](ch20.html "第20章。信号：基础概念")
    至 [第22章](ch22.html "第22章。信号：高级功能")); 以及定时器 ([第23章](ch23.html "第23章。定时器与睡眠"))。'
- en: '*Processes, programs, and threads*: process creation, process termination,
    monitoring child processes, and executing programs ([Chapter 24](ch24.html "Chapter 24. Process
    Creation") to [Chapter 28](ch28.html "Chapter 28. Process Creation and Program
    Execution in More Detail")); and POSIX threads ([Chapter 29](ch29.html "Chapter 29. Threads:
    Introduction") to [Chapter 33](ch33.html "Chapter 33. Threads: Further Details")).'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*进程、程序和线程*: 进程创建、进程终止、监控子进程以及执行程序 ([第24章](ch24.html "第24章。进程创建") 至 [第28章](ch28.html
    "第28章。进程创建和程序执行详细讲解")); 和POSIX线程 ([第29章](ch29.html "第29章。线程：介绍") 至 [第33章](ch33.html
    "第33章。线程：进一步细节"))。'
- en: '*Advanced process and program topics*: process groups, sessions, and job control
    ([Chapter 34](ch34.html "Chapter 34. Process Groups, Sessions, and Job Control"));
    process priorities and scheduling ([Chapter 35](ch35.html "Chapter 35. Process
    Priorities and Scheduling")); process resources ([Chapter 36](ch36.html "Chapter 36. Process
    Resources")); daemons ([Chapter 37](ch37.html "Chapter 37. Daemons")); writing
    secure privileged programs ([Chapter 38](ch38.html "Chapter 38. Writing Secure
    Privileged Programs")); capabilities ([Chapter 39](ch39.html "Chapter 39. Capabilities"));
    login accounting ([Chapter 40](ch40.html "Chapter 40. Login Accounting")); and
    shared libraries ([Chapter 41](ch41.html "Chapter 41. Fundamentals of Shared Libraries")
    and [Chapter 42](ch42.html "Chapter 42. Advanced Features of Shared Libraries")).'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*高级进程和程序主题*: 进程组、会话和作业控制 ([第34章](ch34.html "第34章。进程组、会话和作业控制")); 进程优先级和调度 ([第35章](ch35.html
    "第35章。进程优先级和调度")); 进程资源 ([第36章](ch36.html "第36章。进程资源")); 守护进程 ([第37章](ch37.html
    "第37章。守护进程")); 编写安全的特权程序 ([第38章](ch38.html "第38章。编写安全的特权程序")); 能力 ([第39章](ch39.html
    "第39章。能力")); 登录会计 ([第40章](ch40.html "第40章。登录会计")); 以及共享库 ([第41章](ch41.html "第41章。共享库基础")
    和 [第42章](ch42.html "第42章。共享库的高级功能"))。'
- en: '*Interprocess communication (IPC)*: IPC overview ([Chapter 43](ch43.html "Chapter 43. Interprocess
    Communication Overview")); pipes and FIFOs ([Chapter 44](ch44.html "Chapter 44. Pipes
    and FIFOs")); System V IPC—message queues, semaphores, and shared memory ([Chapter 45](ch45.html
    "Chapter 45. Introduction to System V IPC") to [Chapter 48](ch48.html "Chapter 48. System
    V Shared Memory")); memory mappings ([Chapter 49](ch49.html "Chapter 49. Memory
    Mappings")); virtual memory operations ([Chapter 50](ch50.html "Chapter 50. Virtual
    Memory Operations")); POSIX IPC—message queues, semaphores, and shared memory
    ([Chapter 51](ch51.html "Chapter 51. Introduction to POSIX IPC") to [Chapter 54](ch54.html
    "Chapter 54. POSIX Shared Memory")); and file locking ([Chapter 55](ch55.html
    "Chapter 55. File Locking")).'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*进程间通信 (IPC)*: IPC概述（[第43章](ch43.html "第43章. 进程间通信概述")）；管道和FIFO（[第44章](ch44.html
    "第44章. 管道与FIFO")）；System V IPC——消息队列、信号量和共享内存（[第45章](ch45.html "第45章. System V
    IPC简介")到[第48章](ch48.html "第48章. System V共享内存")）；内存映射（[第49章](ch49.html "第49章. 内存映射")）；虚拟内存操作（[第50章](ch50.html
    "第50章. 虚拟内存操作")）；POSIX IPC——消息队列、信号量和共享内存（[第51章](ch51.html "第51章. POSIX IPC简介")到[第54章](ch54.html
    "第54章. POSIX共享内存")）；以及文件锁定（[第55章](ch55.html "第55章. 文件锁定")）。'
- en: '*Sockets and network programming*: IPC and network programming with sockets
    ([Chapter 56](ch56.html "Chapter 56. Sockets: Introduction") to [Chapter 61](ch61.html
    "Chapter 61. Sockets: Advanced Topics")).'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*套接字和网络编程*: 使用套接字进行IPC和网络编程（[第56章](ch56.html "第56章. 套接字：简介")到[第61章](ch61.html
    "第61章. 套接字：高级话题")）。'
- en: '*Advanced I/O topics*: terminals ([Chapter 62](ch62.html "Chapter 62. Terminals"));
    alternative I/O models ([Chapter 63](ch63.html "Chapter 63. Alternative I/O Models"));
    and pseudoterminals ([Chapter 64](ch64.html "Chapter 64. Pseudoterminals")).'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*高级I/O话题*: 终端（[第62章](ch62.html "第62章. 终端")）；替代I/O模型（[第63章](ch63.html "第63章.
    替代I/O模型")）；以及伪终端（[第64章](ch64.html "第64章. 伪终端")）。'
- en: Example programs
  id: totrans-38
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 示例程序
- en: I illustrate the use of most of the interfaces described in this book with short,
    complete programs, many of which are designed to allow you to easily experiment
    from the command line to see just how various system calls and library functions
    work. Consequently, this book contains a lot of example code—around 15,000 lines
    of C source code and shell session logs.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 我通过短小完整的程序展示了本书中大多数接口的使用，其中许多程序设计旨在让你能够轻松地从命令行实验，看看各种系统调用和库函数是如何工作的。因此，本书包含了大量的示例代码——大约15,000行C源代码和shell会话日志。
- en: Although reading and experimenting with the example programs is a useful starting
    point, the most effective way to consolidate the concepts discussed in this book
    is to write code, either modifying the example programs to try out your own ideas
    or writing new programs.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然阅读并实验示例程序是一个有用的起点，但巩固本书中讨论的概念的最有效方法是编写代码，或者修改示例程序来尝试自己的想法，或者编写新程序。
- en: All of the source code in this book is available for download from the book’s
    web site. The source code distribution also includes many additional programs
    that don’t appear in the book. The purpose and details of these programs are described
    in comments in the source code. *Makefiles* are provided for building the programs,
    and an accompanying `README` file gives further details about the programs.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的所有源代码都可以从本书的网站上下载。源代码分发包还包括许多在书中没有出现的附加程序。这些程序的目的和细节在源代码中的注释里有所描述。提供了*Makefiles*以便编译程序，并且附带的`README`文件提供了有关程序的更多细节。
- en: The source code is freely redistributable and modifiable under the terms of
    the GNU Affero General Public License (Affero GPL) version 3, a copy of which
    is provided in the source code distribution.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 源代码可以在GNU Affero通用公共许可证（Affero GPL）第3版的条款下自由分发和修改，许可证副本包含在源代码分发包中。
- en: Exercises
  id: totrans-43
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 练习
- en: Most chapters conclude with a set of exercises, some of which are suggestions
    for various experiments using the provided example programs. Other exercises are
    questions relating to concepts discussed in the chapter, and still others are
    suggestions for programs you might write in order to consolidate your understanding
    of the material. You’ll find solutions to selected exercises in [Appendix F](apf.html
    "Appendix F. Solutions to Selected Exercises").
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数章节最后都会有一组练习，其中一些是针对使用提供的示例程序进行各种实验的建议。其他练习是与章节中讨论的概念相关的问题，还有一些是建议你编写程序以巩固对材料的理解。你会在[附录
    F](apf.html "附录 F. 选择性练习的解答")中找到部分练习的解答。
- en: Standards and portability
  id: totrans-45
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 标准和可移植性
- en: Throughout this book, I’ve taken special care to consider portability issues.
    You’ll find frequent references to relevant standards, especially the combined
    POSIX.1-2001 and Single UNIX Specification version 3 (SUSv3) standard. You’ll
    also find details about changes in the recent revision of that standard, the combined
    POSIX.1-2008 and SUSv4 standard. (Because SUSv3 was a much larger revision, and
    it is the UNIX standard that is in most widespread effect at the time of writing,
    discussions of standards in the book are generally framed in terms of SUSv3, with
    notes on the differences in SUSv4\. However, you can assume that, except where
    noted, statements about specifications in SUSv3 also hold true in SUSv4.)
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我特别注意了可移植性问题。你会发现经常提到相关的标准，尤其是结合了POSIX.1-2001和单一UNIX规范第3版（SUSv3）的标准。你还会找到关于该标准最近修订版——结合了POSIX.1-2008和SUSv4标准的详细信息。（由于SUSv3是一次较大修订，而且它是写作时最广泛采用的UNIX标准，因此书中的标准讨论通常是以SUSv3为框架，并附有关于SUSv4的差异说明。然而，除非另有说明，否则你可以假设，SUSv3中的规范性描述也适用于SUSv4。）
- en: For features that are not standardized, I indicate the range of differences
    on other UNIX implementations. I also highlight those major features of Linux
    that are implementation-specific, as well as minor differences between the implementation
    of system calls and library functions on Linux and other UNIX implementations.
    Where a feature is not indicated as being Linux-specific, you can normally assume
    that it is a standard feature that appears on most or all UNIX implementations.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些未被标准化的功能，我会指出其他UNIX实现中可能存在的差异范围。我还会强调那些Linux特有的主要功能，以及Linux与其他UNIX实现之间在系统调用和库函数实现上的细微差异。当某个功能未标注为Linux特有时，你通常可以假设它是一个标准功能，出现在大多数或所有UNIX实现中。
- en: I’ve tested most of the example programs presented in this book (other than
    those that exploit features that are noted as being Linux-specific) on some or
    all of Solaris, FreeBSD, Mac OS X, Tru64 UNIX, and HP-UX. To improve portability
    to some of these systems, the web site for this book provides alternative versions
    of certain example programs with extra code that doesn’t appear in the book.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经在本书中介绍的大多数示例程序上进行了测试（除了那些利用了被标注为Linux特有功能的程序），测试环境包括Solaris、FreeBSD、Mac OS
    X、Tru64 UNIX和HP-UX的部分或全部系统。为了提高对某些系统的可移植性，本书的网站提供了某些示例程序的替代版本，这些版本包含了书中未出现的额外代码。
- en: Linux kernel and C library versions
  id: totrans-49
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Linux内核和C库版本
- en: The primary focus of this book is on Linux 2.6.x, the kernel version in widest
    use at the time of writing. Details for Linux 2.4 are also covered, and I’ve indicated
    where features differ between Linux 2.4 and 2.6\. Where new features appear in
    the Linux 2.6.x series, the exact kernel version number of their appearance (e.g.,
    2.6.34) is noted.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的主要重点是Linux 2.6.x，这是写作时最广泛使用的内核版本。书中还涵盖了Linux 2.4的相关内容，并指出了Linux 2.4和2.6之间的差异。对于Linux
    2.6.x系列中出现的新特性，会标注其出现的确切内核版本号（例如，2.6.34）。
- en: With respect to the C library, the main focus is on the GNU C library (*glibc*)
    version 2\. Where relevant, differences across *glibc* 2.*x* versions are noted.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 关于C库，本书的主要关注点是GNU C库（*glibc*）版本2。相关内容中，还会提到*glibc* 2.*x*版本之间的差异。
- en: As this book was heading to press, Linux kernel version 2.6.35 had just been
    released, and *glibc* version 2.12 had been recently released. This book is current
    with respect to both of these software versions. Changes that occur in the Linux
    and *glibc* interfaces after publication of this book will be noted on the book’s
    web site.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 当本书即将出版时，Linux内核版本2.6.35刚刚发布，而*glibc*版本2.12也已发布。本书的内容是基于这两个软件版本的。如果Linux和*glibc*接口在本书出版后发生变化，相关内容会在本书网站上更新。
- en: Using the programming interface from other languages
  id: totrans-53
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用其他语言的编程接口
- en: Although the example programs are written in C, you can use the interfaces described
    in this book from other programming languages—for example, compiled languages
    such as C++, Pascal, Modula, Ada, FORTRAN, and D, and scripting languages such
    as Perl, Python, and Ruby. (Java requires a different approach; see, for example,
    [Rochkind, 2004].) Different techniques will be required to obtain the necessary
    constant definitions and function declarations (except in the case of C++), and
    some extra work may be needed to pass function arguments in the manner required
    by C linkage conventions. Notwithstanding these differences, the essential concepts
    are the same, and you’ll find the information in this book is applicable even
    if you are working in another programming language.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管示例程序是用C语言编写的，但你可以从其他编程语言中使用本书中描述的接口——例如，像C++、Pascal、Modula、Ada、FORTRAN和D这样的编译语言，以及像Perl、Python和Ruby这样的脚本语言。（Java需要不同的方法；例如，参见[Rochkind,
    2004]。）为了获得必要的常量定义和函数声明（除非是C++的情况），需要采用不同的技术，并且可能需要一些额外的工作来按照C链接约定传递函数参数。尽管有这些差异，基本概念是相同的，你会发现本书中的信息对于其他编程语言同样适用。
- en: About the author
  id: totrans-55
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 关于作者
- en: 'I started using UNIX and C in 1987, when I spent several weeks sitting in front
    of an HP Bobcat workstation with a copy of the first edition of Marc Rochkind’s
    *Advanced UNIX Programming* and what ultimately became a very dog-eared printed
    copy of the C shell manual page. My approach then was one that I still try to
    follow today, and that I recommend to anyone approaching a new software technology:
    take the time to read the documentation (if it exists) and write small (but increasingly
    large) test programs until you become confident of your understanding of the software.
    I’ve found that, in the long run, this kind of self-training more than pays for
    itself in terms of saved time. Many of the programming examples in this book are
    constructed in ways that encourage this learning approach.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 我从1987年开始使用UNIX和C，当时我花了好几个星期坐在HP Bobcat工作站前，手里拿着Marc Rochkind的*高级UNIX编程*第一版，并且最终成为了那本C
    shell手册页面的非常破旧的打印版。那时我的方法就是我至今仍然尽量遵循的方法，我推荐给任何接触新软件技术的人：花时间阅读文档（如果有的话），并编写小的（但逐渐增大的）测试程序，直到你对软件的理解充满信心。我发现，从长远来看，这种自我训练在节省时间方面的回报远远超过其成本。本书中的许多编程示例都是以鼓励这种学习方法的方式构建的。
- en: I’ve primarily been a software engineer and designer. However, I’m also a passionate
    teacher, and have spent several years teaching in both academic and commercial
    environments. I’ve run many week-long courses teaching UNIX system programming,
    and that experience informs the writing of this book.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我主要是一个软件工程师和设计师。不过，我也是一位充满热情的教师，曾在学术和商业环境中教书多年。我举办过许多为期一周的课程，教授UNIX系统编程，这段经验对本书的写作产生了影响。
- en: 'I’ve been using Linux for about half as long as I’ve been using UNIX, and,
    over that time, my interest has increasingly centered on the boundary between
    the kernel and user space: the Linux programming interface. This interest has
    drawn me into a number of interrelated activities. I intermittently provide input
    and bug reports for the POSIX/SUS standard; I carry out tests and design reviews
    of new user-space interfaces added to the Linux kernel (and have helped find and
    fix many code and design bugs in those interfaces); I’ve been a regular speaker
    at conferences on topics related to interfaces and their documentation; and I’ve
    been invited on a number of occasions to the annual Linux Kernel Developers Summit.
    The common thread tying all of these activities together is my most visible contribution
    in the Linux world: my work on the *man-pages* project ([http://www.kernel.org/doc/man-pages/](http://www.kernel.org/doc/man-pages/)).'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我使用Linux的时间大约是使用UNIX的一半，在这段时间里，我的兴趣逐渐集中在内核与用户空间之间的边界——Linux编程接口。这个兴趣使我参与了许多相互关联的活动。我不定期地为POSIX/SUS标准提供反馈和bug报告；我进行测试并对新增到Linux内核的用户空间接口进行设计审查（并帮助发现和修复这些接口中的许多代码和设计错误）；我曾多次在与接口及其文档相关的会议上发言；我还曾多次受邀参加年度Linux内核开发者峰会。将这些活动联系在一起的共同线索是我在Linux世界中最为人所知的贡献：我在*man-pages*项目中的工作（[http://www.kernel.org/doc/man-pages/](http://www.kernel.org/doc/man-pages/)）。
- en: The *man-pages* project provides pages in sections 2, 3, 4, 5, and 7 of the
    Linux manual pages. These are the manual pages describing the programming interfaces
    provided by the Linux kernel and the GNU C library—the same topic area as this
    book. I’ve been involved with *man-pages* for more than a decade. Since 2004,
    I’ve been the project maintainer, a task that involves, in roughly equal measure,
    writing documentation, reading kernel and library source code, and writing programs
    to verify the details for documentation. (Documenting an interface is a great
    way to find bugs in that interface.) I’ve also been the biggest contributor to
    *man-pages*—of the approximately 900 pages in *man-pages*, I am the author of
    140, and the coauthor of another 125\. So, even before you picked up this book,
    it’s quite likely you’ve read some of my published work. I hope that you’ve found
    that work useful, and that you’ll find this book even more so.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '*man-pages* 项目提供了 Linux 手册页面的第 2、3、4、5 和 7 部分。这些是描述 Linux 内核和 GNU C 库提供的编程接口的手册页——与本书的主题领域相同。我已经参与
    *man-pages* 项目超过十年。自 2004 年以来，我一直是该项目的维护者，这项任务大致涉及文档编写、阅读内核和库源代码以及编写程序来验证文档中的细节（记录接口是发现该接口错误的好方法）。我也是
    *man-pages* 项目中最大的贡献者——在大约 900 页的 *man-pages* 中，我是 140 页的作者，另外 125 页是我的合著者。所以，即使在你拿起这本书之前，很可能你已经阅读过我发布的一些作品。我希望你觉得那些作品有用，并且这本书会更加有价值。'
- en: Acknowledgements
  id: totrans-60
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 致谢
- en: Without the support of a good many people, this book would have been far less
    than it is. It is a great pleasure to thank them.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 没有许多人支持，这本书将远不如现在这般精彩。非常高兴能感谢他们。
- en: A large team of technical reviewers around the world read drafts, found errors,
    pointed out confusing explanations, suggested rewordings and diagrams, tested
    programs, proposed exercises, identified aspects of the behavior of Linux and
    other UNIX implementations that I was not aware of, and offered support and encouragement.
    Many reviewers generously supplied insights and comments that I was able to incorporate
    into the book, at times making me look more knowledgeable than I am. Any mistakes
    that remain are, of course, my own.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 来自全球的技术审阅团队阅读了草稿，发现了错误，指出了困惑的解释，建议了重写的方式和图示，测试了程序，提出了练习题，指出了我没有意识到的 Linux 和其他
    UNIX 实现中的行为特征，并提供了支持和鼓励。许多审阅者慷慨地提供了见解和评论，我能够将它们融入到书中，这有时让我的表现显得比实际更为知识渊博。当然，仍然存在的错误是我自己的。
- en: 'Thanks especially to the following reviewers (listed alphabetically by surname),
    who either commented on large sections of the manuscript, commented extensively
    on smaller sections of the manuscript, or (magnificently) commented extensively
    on large sections of the manuscript:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 特别感谢以下审阅者（按姓氏字母顺序排列），他们要么对手稿的大部分内容进行了评论，要么对手稿的小部分内容进行了广泛的评论，或者（壮丽地）对手稿的大部分内容进行了广泛的评论：
- en: Christophe Blaess is a consulting software engineer and professional trainer
    who specializes in industrial (realtime and embedded) applications of Linux. Christophe
    is the author of *Programmation système en C sous Linux*, a fine French book covering
    many of the same topics as this book. He generously read and commented on many
    chapters of my book.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Christophe Blaess 是一位咨询软件工程师和专业培训师，专注于 Linux 在工业（实时和嵌入式）应用中的使用。Christophe 是
    *Programmation système en C sous Linux* 一书的作者，这本优秀的法语书籍涵盖了许多与本书相同的主题。他慷慨地阅读并评论了我书中的许多章节。
- en: David Butenhof (Hewlett-Packard) was a member of the original working group
    for POSIX threads and for the Single UNIX Specification threads extensions, and
    is the author of *Programming with POSIX Threads*. He wrote the original DCE Threads
    reference implementation for the Open Software Foundation, and was lead architect
    of the threads implementation for OpenVMS and Digital UNIX. David reviewed the
    threads chapters, suggested many improvements, and patiently corrected several
    details of my understanding of the POSIX threads API.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: David Butenhof（惠普）是 POSIX 线程和 Single UNIX 规范线程扩展的原始工作组成员，也是 *Programming with
    POSIX Threads* 一书的作者。他为开放软件基金会编写了原始的 DCE 线程参考实现，并且是 OpenVMS 和 Digital UNIX 线程实现的首席架构师。David
    审阅了线程章节，提出了许多改进建议，并耐心纠正了我对 POSIX 线程 API 理解中的若干细节。
- en: Geoff Clare works at The Open Group on their UNIX conformance test suites, has
    been involved with UNIX standardization for more than 20 years, and is one of
    half a dozen key participants in the Austin Group, which develops the joint standard
    that forms POSIX.1 and the base volumes of the Single UNIX Specification. Geoff
    provided detailed review of parts of the manuscript related to standard UNIX interfaces,
    patiently and politely suggested numerous fixes and improvements, spotted many
    obscure bugs, and provided much assistance in focusing on the importance of standards
    for portable programming.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Geoff Clare 在 The Open Group 从事 UNIX 合规性测试套件工作，参与 UNIX 标准化工作已超过 20 年，是奥斯汀小组（Austin
    Group）的六位核心成员之一，该小组负责制定 POSIX.1 以及 Single UNIX Specification 的基础卷联合标准。Geoff 详细审阅了与标准
    UNIX 接口相关的手稿部分，耐心而礼貌地提出了许多修正和改进建议，发现了许多难以察觉的 bug，并在强调标准对可移植编程重要性方面提供了大量帮助。
- en: Loïc Domaigné (then at German Air Traffic Control) is a software systems engineer
    working on the design and development of distributed, concurrent, and fault-tolerant
    embedded systems with hard realtime requirements. He provided review input for
    the threads specification in SUSv3, and is an enthusiastic educator and knowledgeable
    contributor in various online technical forums. Loïc carried out a detailed review
    of the threads chapters, as well as many other parts of the book. He also implemented
    a number of clever programs to verify details of the Linux threads implementation,
    provided a great deal of enthusiasm and encouragement, and proposed numerous ideas
    to improve the overall presentation of the material.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Loïc Domaigné（当时在德国空中交通管制局工作）是一名软件系统工程师，致力于设计和开发具有硬实时要求的分布式、并发和容错嵌入式系统。他为 SUSv3
    中的线程规范提供了审阅意见，并且是一位热心的教育者和知识渊博的贡献者，活跃于各种在线技术论坛。Loïc 对线程章节以及书中许多其他部分进行了详细审阅。他还实现了若干巧妙的程序，以验证
    Linux 线程实现的细节，提供了大量的热情和鼓励，并提出了许多改进整体材料展示的建议。
- en: Gert Döring programmed *mgetty* and *sendfax*, a pair of programs that together
    are one of the most widely used open source fax packages for UNIX and Linux. These
    days, he works mainly on building and operating large IPv4-based and IPv6-based
    networks, a task that includes working with colleagues across Europe to define
    the operational policies that ensure the smooth operation of the infrastructure
    of the Internet. Gert provided extensive and useful feedback on the chapters covering
    terminals, login accounting, process groups, sessions, and job control.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Gert Döring 编写了 *mgetty* 和 *sendfax*，这是一对广泛使用的开源传真软件包，适用于 UNIX 和 Linux。如今，他主要从事构建和运营大型基于
    IPv4 和 IPv6 的网络，这项工作包括与欧洲各地的同事合作，定义确保互联网基础设施顺利运作的操作政策。Gert 对涉及终端、登录计费、进程组、会话和作业控制的章节提供了广泛且有用的反馈。
- en: Wolfram Gloger is an IT consultant who has worked on a range of Free and Open
    Source Software (FOSS) projects in the past decade and a half. Among other things,
    Wolfram is the implementer of the *malloc* package used in the GNU C library.
    Currently, he works on web services development, with a particular focus on E-learning,
    although he still does occasional work on the kernel and system libraries. Wolfram
    reviewed a number of chapters, especially helping with my discussion of memory-related
    topics.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wolfram Gloger 是一名 IT 顾问，在过去十多年中参与了多个自由和开源软件（FOSS）项目。Wolfram 还是 GNU C 库中使用的
    *malloc* 包的实现者。目前，他从事 Web 服务开发，特别专注于电子学习，尽管他仍偶尔参与内核和系统库的工作。Wolfram 审阅了若干章节，尤其帮助我讨论了与内存相关的话题。
- en: Fernando Gont is a member of the Centro de Estudios de Informática (CEDI) at
    the Universidad Tecnológica Nacional, Argentina. He focuses on Internet engineering,
    with active participation in the Internet Engineering Task Force (IETF), where
    he has authored a number of *Request for Comments* (RFC) documents. Fernando also
    works on security assessment of communications protocols for the UK Centre for
    the Protection of National Infrastructure (CPNI), and has produced the first thorough
    security assessment of the TCP and IP protocols. Fernando provided a very thorough
    review of the network programming chapters, explained many details of TCP/IP,
    and suggested a multitude of improvements to the material.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 费尔南多·贡特是阿根廷国立技术大学（Universidad Tecnológica Nacional）计算机研究中心（Centro de Estudios
    de Informática, CEDI）的一员。他专注于互联网工程，积极参与互联网工程任务组（IETF），并撰写了多篇*请求评论*（RFC）文档。费尔南多还在英国国家基础设施保护中心（CPNI）从事通信协议的安全评估工作，并首次对
    TCP 和 IP 协议进行了全面的安全评估。费尔南多对网络编程章节进行了非常详尽的审阅，解释了 TCP/IP 的许多细节，并提出了大量的改进建议。
- en: Andreas Grünbacher (SUSE Labs) is a kernel hacker and author of the Linux implementation
    of extended attributes and POSIX access control lists. Andreas provided thorough
    review of many chapters, much encouragement, and the single comment that probably
    most changed the structure of the book.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安德里亚斯·格林巴赫（SUSE Labs）是内核开发人员，负责 Linux 扩展属性和 POSIX 访问控制列表的实现。安德里亚斯对许多章节进行了详尽的审阅，给予了许多鼓励，并提出了一个可能最改变本书结构的评论。
- en: Christoph Hellwig is a Linux storage and file-systems consultant and a well-known
    kernel hacker who has worked on many parts of the Linux kernel. Christoph kindly
    took time out from writing and reviewing Linux kernel patches to review several
    chapters of this book, suggesting many useful corrections and improvements.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 克里斯托夫·赫尔威格是 Linux 存储和文件系统顾问，也是著名的内核黑客，曾参与过 Linux 内核的多个部分工作。克里斯托夫在忙于撰写和审阅 Linux
    内核补丁的同时，抽出时间审阅了本书的几个章节，提出了许多有用的修正意见和改进建议。
- en: Andreas Jaeger led the development of the Linux port to the x86-64 architecture.
    As a GNU C Library developer, he ported the library to x86-64, and helped make
    the library standards-conformant in several areas, especially in the math library.
    He is currently Program Manager for openSUSE at Novell. Andreas reviewed far more
    chapters than I could possibly have hoped, suggested a multitude of improvements,
    and warmly encouraged the ongoing work on the book.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安德里亚斯·耶格尔领导了 Linux 移植到 x86-64 架构的开发工作。作为 GNU C 库的开发者，他将该库移植到 x86-64，并帮助使库在多个领域，尤其是在数学库方面，符合标准。他目前是
    Novell 公司 openSUSE 项目的程序经理。安德里亚斯审阅了比我原本期望的更多章节，提出了许多改进建议，并热情地鼓励我继续进行书籍的工作。
- en: Rick Jones, also known as “Mr. Netperf” (Networked Systems Performance Curmudgeon
    at Hewlett-Packard), provided valuable review of the network programming chapters.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 里克·琼斯，也被称为“网效先生”（惠普公司的网络系统性能老顽固），为网络编程章节提供了宝贵的审阅意见。
- en: Andi Kleen (then at SUSE Labs) is a well-known and long-term kernel hacker who
    has worked on many and diverse areas of the Linux kernel, including networking,
    error handling, scalability, and low-level architecture code. Andi did an extensive
    review of the material on network programming, expanded my knowledge of many details
    of the Linux TCP/IP implementation, and suggested many ways to improve my presentation
    of the subject.
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安迪·克林（当时在 SUSE Labs）是一位著名且长期从事内核开发的黑客，曾参与过 Linux 内核的多个领域工作，包括网络、错误处理、可扩展性以及底层架构代码等。安迪对网络编程部分进行了广泛的审阅，扩展了我对
    Linux TCP/IP 实现中许多细节的理解，并提出了多种改进我展示该主题的方式。
- en: Martin Landers (Google) was still a student when I had the good fortune to meet
    him as a colleague. Since then, he has managed to pack rather a lot into a short
    time, having worked variously as software architect, IT trainer, and professional
    hacker. I was fortunate indeed to have Martin as a reviewer. He contributed numerous
    incisive comments and corrections that greatly improved many chapters of the book.
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 马丁·兰德斯（Google）还是一名学生时，我有幸将他作为同事认识。从那时起，他在短短的时间里取得了相当多的成就，曾担任过软件架构师、IT 培训师和职业黑客等职位。我确实很幸运能够有马丁作为书籍的审稿人。他提出了许多犀利的评论和修改建议，极大地改善了书中许多章节。
- en: Jamie Lokier is a well-known kernel hacker who has been contributing to Linux
    development for 15 years. He nowadays describes himself as “a consultant in solving
    difficult problems that often have embedded Linux somewhere.” Jamie provided an
    extraordinarily thorough review of the chapters on memory mappings, POSIX shared
    memory, and virtual memory operations. His comments corrected many details of
    my understanding of these topics and greatly improved the structure of the chapters.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jamie Lokier 是一位知名的内核黑客，已在 Linux 开发领域贡献了 15 年。他如今自我描述为“一个解决难题的顾问，这些问题通常涉及某些嵌入式
    Linux”。Jamie 对内存映射、POSIX 共享内存和虚拟内存操作的章节进行了异常详尽的审查。他的评论纠正了我对这些主题理解中的许多细节，并大大改善了章节的结构。
- en: Barry Margolin has been a system programmer, system administrator, and support
    engineer throughout his 25-year career. He is currently a Senior Performance Engineer
    at Akamai Technologies. He is a frequent, well-respected contributor in various
    online forums discussing UNIX and Internet topics, and has reviewed a number of
    books on these topics. Barry reviewed a number of chapters of this book, suggesting
    many improvements.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Barry Margolin 在他 25 年的职业生涯中一直是系统程序员、系统管理员和支持工程师。他目前是 Akamai Technologies 的高级性能工程师。他是多个在线论坛的常见且受人尊敬的贡献者，讨论
    UNIX 和互联网相关话题，并审查过关于这些话题的多本书籍。Barry 审查了本书的多个章节，提出了许多改进建议。
- en: Paul Pluzhnikov (Google) was formerly the technical lead and a key developer
    of the *Insure++* memory-debugging tool. He is also a sometime *gdb* hacker, and
    a frequent responder in online forums answering questions on debugging, memory
    allocation, shared libraries, and run-time environments. Paul reviewed a wide
    range of chapters, suggesting many valuable improvements.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Paul Pluzhnikov（Google）曾是 *Insure++* 内存调试工具的技术负责人和核心开发者。他还是 *gdb* 黑客，有时会在在线论坛中回答调试、内存分配、共享库和运行时环境方面的问题。Paul
    审查了本书的多个章节，提出了许多有价值的改进建议。
- en: 'John Reiser (with Tom London) carried out one of the earliest ports of UNIX
    to a 32-bit architecture: the VAX-11/780\. He is also the creator of the *mmap()*
    system call. John reviewed many chapters (including, obviously, the chapter on
    *mmap()*), providing a multitude of historical insights and crystal-clear technical
    explanations that greatly improved the chapters.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: John Reiser（与 Tom London 合作）进行了 UNIX 系统早期移植到 32 位架构的工作：VAX-11/780。他还是 *mmap()*
    系统调用的创造者。John 审查了许多章节（显然包括 *mmap()* 章节），提供了大量历史见解和清晰的技术解释，极大地改善了这些章节。
- en: Anthony Robins (Associate Professor of Computer Science, University of Otago,
    New Zealand), a close friend of more than three decades, was the first reader
    of the drafts of several chapters, and offered valuable early comments and ongoing
    encouragement as the project evolved.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Anthony Robins（新西兰奥塔哥大学计算机科学副教授），与我有三十多年的深厚友谊，是几章草稿的第一位读者，并在项目进展过程中提供了宝贵的早期评论和持续鼓励。
- en: Michael Schröder (Novell) is one of the main authors of the GNU *screen* program,
    a task that has imbued him with a thorough knowledge of the subtleties and differences
    in terminal-driver implementations. Michael reviewed the chapters covering terminals
    and pseudoterminals, and the chapter on process groups, sessions, and job control,
    providing much useful feedback.
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Michael Schröder（Novell）是 GNU *screen* 程序的主要作者之一，这项工作使他对终端驱动程序实现的细微差别和差异有了深入的了解。Michael
    审查了涉及终端和伪终端的章节，以及关于进程组、会话和作业控制的章节，并提供了许多有用的反馈。
- en: Manfred Spraul, who worked on the IPC code (among other things) in the Linux
    kernel, generously reviewed several of the chapters on IPC and suggested many
    improvements.
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Manfred Spraul 曾在 Linux 内核中工作，负责 IPC 代码（以及其他内容），他慷慨地审查了几章关于 IPC 的内容，并提出了许多改进建议。
- en: Tom Swigg, a former UNIX training colleague at Digital, was an early reviewer
    who supplied important feedback on several chapters. A software engineer and IT
    trainer for more than 25 years, Tom currently works at London South Bank University,
    programming and supporting Linux in a VMware environment.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tom Swigg，曾是 Digital 的 UNIX 培训同事，是早期的审阅者之一，提供了关于多个章节的重要反馈。他是一名软件工程师和 IT 培训师，已有
    25 年的经验，目前在伦敦南岸大学工作，在 VMware 环境中编程并支持 Linux。
- en: Jens Thoms Törring is part of a fine tradition of physicists turned programmers,
    and has produced a variety of open source device drivers and other software. Jens
    read a surprisingly diverse collection of chapters, providing unique and valuable
    insight on how each could be improved.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jens Thoms Törring是物理学家转型为程序员的优良传统的一部分，他制作了多种开源设备驱动程序和其他软件。Jens阅读了令人惊讶的多样章节，为每一章提供了独特且有价值的改进意见。
- en: Many other technical reviewers also read various parts of the book and made
    valuable comments. In alphabetical order by surname, thank you to George Anzinger
    (MontaVista Software), Stefan Becher, Krzysztof Benedyczak, Daniel Brahneborg,
    Andries Brouwer, Annabel Church, Dragan Cvetkovic, Floyd L. Davidson, Stuart Davidson
    (Hewlett-Packard Consulting), Kasper Dupont, Peter Fellinger (jambit GmbH), Mel
    Gorman (IBM), Niels Göllesch, Claus Gratzl, Serge Hallyn (IBM), Markus Hartinger
    (jambit GmbH), Richard Henderson (Red Hat), Andrew Josey (The Open Group), Dan
    Kegel (Google), Davide Libenzi, Robert Love (Google), H.J. Lu (Intel Corporation),
    Paul Marshall, Chris Mason, Michael Matz (SUSE), Trond Myklebust, James Peach,
    Mark Phillips (Automated Test Systems), Nick Piggin (SUSE Labs, Novell), Kay Johannes
    Potthoff, Florian Rampp, Stephen Rothwell (Linux Technology Centre, IBM), Markus
    Schwaiger, Stephen Tweedie (Red Hat), Britta Vargas, Chris Wright, Michal Wronski,
    and Umberto Zamuner.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 许多其他技术审阅员也阅读了本书的各个部分并提出了宝贵的意见。按姓氏的字母顺序，感谢George Anzinger（MontaVista Software）、Stefan
    Becher、Krzysztof Benedyczak、Daniel Brahneborg、Andries Brouwer、Annabel Church、Dragan
    Cvetkovic、Floyd L. Davidson、Stuart Davidson（Hewlett-Packard Consulting）、Kasper
    Dupont、Peter Fellinger（jambit GmbH）、Mel Gorman（IBM）、Niels Göllesch、Claus Gratzl、Serge
    Hallyn（IBM）、Markus Hartinger（jambit GmbH）、Richard Henderson（Red Hat）、Andrew Josey（The
    Open Group）、Dan Kegel（Google）、Davide Libenzi、Robert Love（Google）、H.J. Lu（Intel
    Corporation）、Paul Marshall、Chris Mason、Michael Matz（SUSE）、Trond Myklebust、James
    Peach、Mark Phillips（Automated Test Systems）、Nick Piggin（SUSE Labs, Novell）、Kay
    Johannes Potthoff、Florian Rampp、Stephen Rothwell（Linux Technology Centre, IBM）、Markus
    Schwaiger、Stephen Tweedie（Red Hat）、Britta Vargas、Chris Wright、Michal Wronski和Umberto
    Zamuner。
- en: Aside from technical review, I received many other kinds of help from various
    people and organizations.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 除了技术审查，我还得到了来自各方人士和组织的许多帮助。
- en: 'Thanks to the following people for answering technical questions: Jan Kara,
    Dave Kleikamp, and Jon Snader. Thanks to Claus Gratzl and Paul Marshall for system
    management assistance.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢以下人员回答技术问题：Jan Kara、Dave Kleikamp和Jon Snader。感谢Claus Gratzl和Paul Marshall在系统管理方面的帮助。
- en: Thanks to the Linux Foundation (LF), which, during 2008, funded me as a Fellow
    to work full time on the *man-pages* project and on testing and design review
    of the Linux programming interface. Although the Fellowship provided no direct
    financial support for working on this book, it did keep me and my family fed,
    and the ability to focus full time on documenting and testing the Linux programming
    interface was a boon to my “private” project. At a more individual level, thanks
    to Jim Zemlin for being my “interface” while working at the LF, and to the members
    of the LF Technical Advisory Board, who supported my application for the Fellowship.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢Linux基金会（LF），在2008年期间，他们资助我作为研究员全职参与*man-pages*项目以及Linux编程接口的测试和设计审查。尽管该研究员奖学金并未提供直接的财务支持用于编写本书，但它让我和我的家人能够维持生计，并且能够全身心投入到Linux编程接口的文档编写和测试工作中，这对我的“私人”项目是一个莫大的帮助。在更个人的层面，感谢Jim
    Zemlin在我在LF工作期间成为我的“接口”，以及LF技术顾问委员会的成员们，他们支持我申请研究员奖学金。
- en: Thanks to Alejandro Forero Cuervo for suggesting the title of the book!
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢Alejandro Forero Cuervo提出了本书的标题建议！
- en: 'More than 25 years ago, Robert Biddle intrigued me during my first degree with
    tales of UNIX, C, and Ratfor; thank you. Thanks to the following people, who,
    although not directly connected with this project, encouraged me on the path of
    writing during my second degree at the University of Canterbury, New Zealand:
    Michael Howard, Jonathan Mane-Wheoki, Ken Strongman, Garth Fletcher, Jim Pollard,
    and Brian Haig.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 25年前，Robert Biddle在我攻读本科学位时，通过讲述UNIX、C和Ratfor的故事引起了我的兴趣，感谢他。还要感谢以下人员，虽然他们与本项目没有直接关系，但在我攻读第二学位期间，在新西兰坎特伯雷大学时，他们鼓励我走上写作之路：Michael
    Howard、Jonathan Mane-Wheoki、Ken Strongman、Garth Fletcher、Jim Pollard和Brian Haig。
- en: The late Richard Stevens wrote several superb books on UNIX programming and
    TCP/IP, which I, like a multitude of programmers, have found to be a wonderful
    source of technical information over the years. Readers of those books will note
    several visual aspects that are similar between my book and those of Richard Stevens.
    This is no accident. As I considered how to design my book, and looked around
    more generally at book designs, time and again, the approach employed by Richard
    Stevens seemed the best solution, and where this was so, I have employed the same
    visual approach.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 已故的 Richard Stevens 编写了几本关于 UNIX 编程和 TCP/IP 的杰出书籍，我和许多程序员一样，多年来一直将其作为宝贵的技术资料来源。阅读这些书籍的读者会注意到，我的书与
    Richard Stevens 的书在某些视觉方面相似。这并非偶然。当我考虑如何设计我的书，并更广泛地观察书籍设计时，我反复发现 Richard Stevens
    所采用的方式似乎是最佳方案，在这种情况下，我也采纳了相同的视觉设计方法。
- en: 'Thanks to the following people and organizations for providing UNIX systems
    that enabled me to run test programs and verify details on other UNIX implementations:
    Anthony Robins and Cathy Chandra, for test systems at the University of Otago,
    New Zealand; Martin Landers, Ralf Ebner, and Klaus Tilk, for test systems at the
    Technische Universität in Munich, Germany; Hewlett-Packard, for making their *testdrive*
    systems freely available on the Internet; and Paul de Weerd for providing OpenBSD
    access.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢以下人员和组织提供的 UNIX 系统，使我能够运行测试程序并验证其他 UNIX 实现的细节：Anthony Robins 和 Cathy Chandra，提供新西兰奥塔哥大学的测试系统；Martin
    Landers、Ralf Ebner 和 Klaus Tilk，提供德国慕尼黑工业大学的测试系统；惠普公司，提供其*testdrive* 系统并在互联网上免费开放；以及
    Paul de Weerd，提供 OpenBSD 访问权限。
- en: Heartfelt thanks to two Munich companies, and their owners, who, in addition
    to providing me with flexible employment and enjoyable colleagues, were extraordinarily
    generous in allowing me to use their offices while writing this book. Thanks to
    Thomas Kahabka and Thomas Gmelch of exolution GmbH, and, especially, to Peter
    Fellinger and Markus Hartinger of jambit GmbH.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 衷心感谢两家慕尼黑公司及其老板们，除了为我提供灵活的工作机会和愉快的同事外，他们还非常慷慨地允许我在写这本书时使用他们的办公室。感谢 exolution
    GmbH 的 Thomas Kahabka 和 Thomas Gmelch，特别感谢 jambit GmbH 的 Peter Fellinger 和 Markus
    Hartinger。
- en: 'Thanks for various kinds of help to the following people: Dan Randow, Karen
    Korrel, Claudio Scalmazzi, Michael Schüpbach, and Liz Wright. Thanks to Rob Suisted
    and Lynley Cook for the photographs used on the front and back covers.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢以下人员提供的各种帮助：Dan Randow、Karen Korrel、Claudio Scalmazzi、Michael Schüpbach 和
    Liz Wright。感谢 Rob Suisted 和 Lynley Cook 提供的封面和背面封面的照片。
- en: 'Thanks to the following people who encouraged and supported me in various ways
    on this project: Deborah Church, Doris Church, and Annie Currie.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢以下人员在这个项目中以各种方式鼓励和支持我：Deborah Church、Doris Church 和 Annie Currie。
- en: Thanks to the team at No Starch Press for all sorts of help on an enormous project.
    Thanks to Bill Pollock for being straight-talking from the start, having rock-solid
    faith in the project, and patiently keeping an eye on the project. Thanks to my
    initial production editor, Megan Dunchak. Thanks to my copyeditor, Marilyn Smith,
    who, despite my best efforts at clarity and consistency, still found many things
    to fix. Riley Hoffman had overall responsibility for layout and design of the
    book, and also took up the reins as production editor as we came into the home
    straight. Riley graciously bore with my many requests to achieve the right layout
    and produced a superb final result. Thank you.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢 No Starch Press 团队在这个庞大的项目中提供的各种帮助。感谢 Bill Pollock 从一开始就直言不讳，对这个项目充满信心，并耐心地关注项目进展。感谢我的初版编辑
    Megan Dunchak。感谢我的文稿编辑 Marilyn Smith，尽管我在努力保持清晰和一致性，她依然发现了很多需要修正的地方。Riley Hoffman
    负责本书的排版和设计，并在我们接近完工时担任了制作编辑。Riley 慷慨地接受了我许多关于排版的请求，最终呈现出了一本出色的作品。感谢你。
- en: I now know the truth of the cliché that a writer’s family also pays the price
    of the writer’s work. Thanks to Britta and Cecilia for their support, and for
    putting up with the many hours that I had to be away from family as I finished
    the book.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 我现在明白了那句老生常谈的真理：作家的家人也为作家的工作付出了代价。感谢 Britta 和 Cecilia 的支持，也感谢她们忍受我在完成这本书时不得不远离家庭的许多小时。
- en: Permissions
  id: totrans-99
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 许可
- en: The Institute of Electrical and Electronics Engineers and The Open Group have
    kindly given permission to quote portions of text from IEEE Std 1003.1, 2004 Edition,
    Standard for Information Technology—Portable Operating System Interface (POSIX),
    The Open Group Base Specifications Issue 6\. The complete standard can be consulted
    online at [http://www.unix.org/version3/online.html](http://www.unix.org/version3/online.html).
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 电气与电子工程师协会（IEEE）和开放集团（The Open Group）已友好地授权引用IEEE Std 1003.1，2004年版《信息技术——可移植操作系统接口（POSIX）》的部分文本，开放集团基础规范第6版。完整的标准可以在线查阅，网址为[http://www.unix.org/version3/online.html](http://www.unix.org/version3/online.html)。
- en: Web site and source code of example programs
  id: totrans-101
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 示例程序的网页和源代码
- en: You can find further information about this book, including errata and source
    code for the example programs, at [http://man7.org/tlpi/](http://man7.org/tlpi/).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[http://man7.org/tlpi/](http://man7.org/tlpi/)找到关于本书的更多信息，包括勘误表和示例程序的源代码。
- en: Feedback
  id: totrans-103
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 反馈
- en: I welcome bug reports, suggestions for code improvements, and fixes to further
    improve code portability. Book bugs and general suggestions about how the explanations
    in the book can be improved are also welcome. (A current list of errata can be
    found at [http://man7.org/tlpi/errata/](http://man7.org/tlpi/errata/).) Since
    changes in the Linux programming interface are varied and sometimes too frequent
    for one person to keep up with, I would be happy to receive suggestions about
    new and changed features that should be covered in a future edition of this book.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我欢迎报告程序错误、代码改进建议和修复，以进一步提高代码的可移植性。同时也欢迎报告与书中的错误以及关于如何改进书中解释内容的一般建议。（当前的勘误表可以在[http://man7.org/tlpi/errata/](http://man7.org/tlpi/errata/)找到。）由于Linux编程接口的变化多样且有时变化过于频繁，难以让一个人完全跟上，我很乐意收到关于新特性和变化的建议，这些特性和变化应在本书的未来版本中涵盖。
- en: Michael Timothy Kerrisk
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 迈克尔·蒂莫西·凯里斯
- en: Munich, Germany and Christchurch, New Zealand
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 德国慕尼黑和新西兰基督城
- en: August 2010
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 2010年8月
- en: '[mtk@man7.org](mailto:mtk@man7.org)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '[mtk@man7.org](mailto:mtk@man7.org)'
