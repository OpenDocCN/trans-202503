<html><head></head><body>
<h2 class="h2" id="ch01"><span epub:type="pagebreak" id="page_1"/><strong><span class="big">1</span><br/>BUILDING APPS WITH APP INVENTOR</strong></h2>
<div class="imagel"><img alt="Image" src="../images/common.jpg"/></div>
<p class="noindent">With App Inventor, you can quickly and easily build apps using some of the most exciting mobile technology available. App Inventor provides tools that control the look and feel of an app, add useful mobile computing functions, and set or program an app’s behavior.</p>
<p class="indent">In this chapter, you’ll start to use these tools to build your first app, “Hi, World!”, which lets you text someone using voice recognition. You’ll also learn how to share your app with others.</p>
<h3 class="h3" id="ch00lev1sec8"><span epub:type="pagebreak" id="page_2"/><strong>PLANNING A NEW APP</strong></h3>
<p class="noindent">Before you start building an app, you’ll need to figure out the app’s goal or what problem you want it to solve. Once you’ve done that, you can <em>decompose</em> your project, which means breaking down your goal into smaller parts that will be easier to tackle than trying to accomplish it all at once. This in turn will help you outline the precise steps, or <em>algorithm</em>, necessary to develop each part of the app before you start coding.</p>
<p class="indent">You’ll also identify the elements and features the app will need to perform properly and allow users to interact with it as you intend. For example, will the app let users take videos, send text messages, or sense their locations? Will a user need to click a button, enter text, or select from a list of options to complete those tasks? These are the kinds of questions that might help you determine the features you’ll need.</p>
<p class="indent">Once you know what to include in your app, you can lay out its <em>user interface</em> elements—the parts of the app that users can see and interact with on the screen. Your app should be easy for users to use and understand. To keep users’ attention, you might add pictures, colors, and different text styles.</p>
<h3 class="h3" id="ch00lev1sec9"><strong>LAYING OUT YOUR APP</strong></h3>
<p class="noindent">Once you have a plan, you’ll start by laying out the necessary components in the Designer. In App Inventor, <em>components</em> are all the visible and non-visible elements you can use in your app, including those that set the look and feel and add exciting functionality. All components have <em>properties</em>, or characteristics, that you can set and/or actions you can program.</p>
<p class="indent">In this chapter, you’ll use User Interface components as well as Media and Social components to add speech recognition and texting capability to your app. Later in this book, you’ll use many more components to add features like video recording, location sensing, text-to-speech, animation, drawing, dragging, sound, picture taking, and more! For a detailed overview of available components, check out the appendix.</p>
<p class="indent">To lay out your app’s components, you’ll need to use App Inventor’s Designer window, shown in <a href="ch01.xhtml#ch1fig1">Figure 1-1</a>. The Designer window consists of a <em>Palette</em> pane to the left, which includes drawers of all possible components; a <em>Viewer</em> pane, where you can see the components you drag from the Palette and lay them out as they should appear on your app’s screen; a <em>Components</em> pane, which lists all components in your app and allows you to give them meaningful names; a <em>Media</em> pane that lists all the pictures, sound clips, and other media files you’ve uploaded to the app; and a <em>Properties</em> pane, where you set the initial characteristics of app components.</p>
<div class="image" id="ch1fig1"><span epub:type="pagebreak" id="page_3"/><img alt="Image" src="../images/01fig01.jpg"/></div>
<p class="figcap"><em>Figure 1-1: The App Inventor Designer window</em></p>
<h3 class="h3" id="ch00lev1sec10"><strong>PROGRAMMING YOUR APP IN THE BLOCKS EDITOR</strong></h3>
<p class="noindent">Once you place all the necessary components in your app, use the Blocks Editor to program it according to your plan. Click the <strong>Blocks</strong> button shown in <a href="ch01.xhtml#ch1fig2">Figure 1-2</a> to open the Blocks Editor window.</p>
<p class="indent">The Blocks Editor window consists of the <em>Blocks</em> pane on the left and the <em>Viewer</em> pane on the right. The Blocks pane contains drawers for both <em>built-in blocks</em>, which program the app’s general behaviors, and <em>component-specific blocks</em>, which direct particular actions for each app component. To tell your app what to do, drag blocks from the drawers in the Blocks pane and snap them together in the Viewer.</p>
<div class="image" id="ch1fig2"><span epub:type="pagebreak" id="page_4"/><img alt="Image" src="../images/01fig02.jpg"/></div>
<p class="figcap"><em>Figure 1-2: The Blocks Editor window</em></p>
<p class="indent">For a detailed overview of App Inventor’s built-in blocks, check out the appendix. In later chapters, you’ll explore component-specific blocks and the corresponding actions for a variety of components.</p>
<h3 class="h3" id="ch00lev1sec11"><strong>BUILDING THE “HI, WORLD!” APP</strong></h3>
<p class="noindent">The first app you’ll create in this book is the “Hi, World!” app. The app’s name is a play on “Hello, World,” a common first script that computer science students write when learning programming languages. The script displays “Hello, World” on a screen, but the “Hi, World!” app is so much more useful because it uses the <span class="literal">SpeechRecognizer</span>, <span class="literal">PhoneNumberPicker</span>, and <span class="literal">Texting</span> components to let you text using voice recognition! You can use this type-free texting app to say a message aloud, select a person’s telephone number, and then text the person.</p>
<p class="indent">Log into App Inventor following the instructions outlined in “Getting Started with App Inventor” on <a href="intro.xhtml#page_xviii">page xviii</a>. If this is your first time logging in, you should see the notice in <a href="ch01.xhtml#ch1fig3">Figure 1-3</a> letting you know that you don’t have any projects yet.</p>
<div class="image" id="ch1fig3"><span epub:type="pagebreak" id="page_5"/><img alt="Image" src="../images/01fig03.jpg"/></div>
<p class="figcap"><em>Figure 1-3: The Start new project screen appears the first time you log into App Inventor.</em></p>
<p class="indent">Click the <strong>Start new project</strong> button near the top-left corner of the window. Clicking the button should open the dialog where you’ll enter the name for your first project. Enter <span class="codestrong">HiWorld</span> without any spaces, and click <strong>OK</strong>.</p>
<p class="indent">If you’ve logged in and saved a project before, App Inventor should open to the last app you worked on. To start a new app, click <strong>Projects <span class="ent">▸</span> Start new project</strong> as shown in <a href="ch01.xhtml#ch1fig4">Figure 1-4</a>.</p>
<div class="image" id="ch1fig4"><img alt="Image" src="../images/01fig04.jpg"/></div>
<p class="figcap"><em>Figure 1-4: The Start new project option in the Projects menu tab</em></p>
<p class="indent">In the dialog that opens, name the project by entering <span class="codestrong">HiWorld</span> without any spaces and click <strong>OK</strong>.</p>
<h4 class="h4" id="ch00lev2sec6"><strong>DECOMPOSING “HI, WORLD!”</strong></h4>
<p class="noindent">Before we start building the app, let’s outline the actions we want “Hi, World!” to perform. We want the app to text someone a message that the user says aloud. We can break this action down into three steps.</p>
<ol>
<li><p class="noindent">When a user clicks the message button, open the phone’s speech-to-text function and capture the user’s text.</p></li>
<li><p class="noindent">When a user clicks the <span class="literal">PhoneNumberPicker</span>, open the phone’s contact list.</p></li>
<li><p class="noindent">When a user clicks the text button, text the message converted by the speech-to-text function to the selected phone number.</p></li>
</ol>
<p class="indent"><span epub:type="pagebreak" id="page_6"/>You’ll need the following components:</p>
<ul>
<li><p class="noindent"><span class="codestrong">Button</span> (2) for the user to click to start the action</p></li>
<li><p class="noindent"><span class="codestrong">Image</span> for app design</p></li>
<li><p class="noindent"><span class="codestrong">PhoneNumberPicker</span> for the user to click to select a number</p></li>
<li><p class="noindent"><span class="codestrong">SpeechRecognizer</span> to capture and convert speech to text</p></li>
<li><p class="noindent"><span class="codestrong">Texting</span> to send the message</p></li>
</ul>
<p class="indent">For each app we build throughout this book, we’ll use this format to decompose the action into manageable steps and identify the components we need to make it work.</p>
<h4 class="h4" id="ch00lev2sec7"><strong>LAYING OUT “HI, WORLD!” IN THE DESIGNER</strong></h4>
<p class="noindent">Now let’s think about how to lay out the app’s components and how to present instructions so the app is easy to use and understand.</p>
<p class="indent">For this app, the instructions to the user are so simple that we can include them on the <span class="literal">Button</span> and <span class="literal">PhoneNumberPicker</span> components, as long as those components are wide enough to display the text. To ensure that, we’ll make the width of all visible components (those that the user can see and interact with) equal to the width of the screen. This means that we won’t need to use a component from the Layout drawer to structure the screen display, because making everything the width of the screen requires us to place all components on top of each other. All we need to do is start with a picture at the top for visual effect and simply place the other components in the order we want users to interact with them.</p>
<h5 class="h5" id="ch00lev3sec3"><strong>Adding the Components</strong></h5>
<p class="noindent">Go to the Designer to lay out the image and other components for all three parts of the app. Make sure you’re in the Designer window by clicking the <strong>Designer</strong> button, as shown in <a href="ch01.xhtml#ch1fig5">Figure 1-5</a>.</p>
<div class="image" id="ch1fig5"><img alt="Image" src="../images/01fig05.jpg"/></div>
<p class="figcap"><em>Figure 1-5: Click the <strong><em>Designer</em></strong> button to open the Designer window where you’ll lay out the app components.</em></p>
<p class="indent">In the Designer window, drag the components you need from their drawers in the Palette pane to the Viewer pane. From the User Interface drawer, drag an <span class="codestrong">Image</span> and two <span class="codestrong">Button</span> components; from the Media drawer, drag a <span class="codestrong">SpeechRecognizer</span> component; and from the Social drawer, drag a <span class="codestrong">PhoneNumberPicker</span> component and a <span class="codestrong">Texting</span> component. Your screen should now look like <a href="ch01.xhtml#ch1fig6">Figure 1-6</a>.</p>
<p class="indent">In the Viewer pane, you should see all visible components on <span class="literal">Screen1</span> <span class="ent">➊</span> and the non-visible components under the screen <span class="ent">➋</span>. In the Components pane <span class="ent">➌</span>, you should see a list of all components you just dragged to the Viewer pane.</p>
<div class="image" id="ch1fig6"><span epub:type="pagebreak" id="page_7"/><img alt="Image" src="../images/01fig06.jpg"/></div>
<p class="figcap"><em>Figure 1-6: The screen after you drag all “Hi, World!” app components to the Viewer pane</em></p>
<p class="indent">Now you can make adjustments to each visible component by clicking it in the Components pane. <a href="ch01.xhtml#ch1fig7">Figure 1-7</a> shows what happens when you click <span class="literal">Image1</span>.</p>
<div class="image" id="ch1fig7"><img alt="Image" src="../images/01fig07.jpg"/></div>
<p class="figcap"><em>Figure 1-7: The Designer window after you click <span class="literal">Image1</span> in the Components pane</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_8"/>Once you click <span class="literal">Image1</span> in the Components pane, you should see buttons near the bottom of that pane <span class="ent">➊</span> that allow you to rename or delete the <span class="literal">Image1</span> component. In the Properties pane <span class="ent">➋</span>, you should see all the properties for <span class="literal">Image1</span> that you can set in the Designer.</p>
<h5 class="h5" id="ch00lev3sec4"><strong>Resizing a Component’s Width</strong></h5>
<p class="noindent">Since you have only one image in this app, you don’t need to rename it. But you <em>do</em> need to change its size to make it the width of the screen. To resize <span class="literal">Image1</span>, in the Properties pane, click inside the text box under <strong>Width</strong> to open the dialog shown in <a href="ch01.xhtml#ch1fig8">Figure 1-8</a>.</p>
<div class="image" id="ch1fig8"><img alt="Image" src="../images/01fig08.jpg"/></div>
<p class="figcap"><em>Figure 1-8: The Properties dialog that allows you to change a component’s width</em></p>
<p class="indent">Click the <strong>Fill parent</strong> radio button and then click <strong>OK</strong>. This should make the width of <span class="literal">Image1</span> fill the width of the screen, which is <span class="literal">Image1</span>’s <em>parent</em>, or the component that contains it.</p>
<h5 class="h5" id="ch00lev3sec5"><strong>Uploading an Image</strong></h5>
<p class="noindent">Next, you’ll need to upload the picture you want to display as <span class="literal">Image1</span> on the app screen. To upload your image, click inside the text box under <strong>Picture</strong> and click the <strong>Upload File …</strong> button, shown on the left of <a href="ch01.xhtml#ch1fig9">Figure 1-9</a>, which should open the dialog shown on the right.</p>
<div class="image" id="ch1fig9"><img alt="Image" src="../images/01fig09.jpg"/></div>
<p class="figcap"><em>Figure 1-9: The Picture and Upload File … dialogs</em></p>
<p class="indent">Click the <strong>Choose File</strong> button. The file manager should open to show the files on your computer and allow you to find the picture you want to upload, as shown in <a href="ch01.xhtml#ch1fig10">Figure 1-10</a>.</p>
<div class="image" id="ch1fig10"><span epub:type="pagebreak" id="page_9"/><img alt="Image" src="../images/01fig10.jpg"/></div>
<p class="figcap"><em>Figure 1-10: The file manager window allows you to select a file from your computer.</em></p>
<p class="indent">Select the image you want to use, click the <strong>Open</strong> button, and then click <strong>OK</strong> on the Upload File … dialog shown in <a href="ch01.xhtml#ch1fig9">Figure 1-9</a>. You can download the sample image to use for this exercise, along with other materials that come with this book, at <em><a href="https://nostarch.com/programwithappinventor/">https://nostarch.com/programwithappinventor/</a></em>.</p>
<p class="indent"><a href="ch01.xhtml#ch1fig11">Figure 1-11</a> shows what you should see after uploading the image.</p>
<div class="image" id="ch1fig11"><img alt="Image" src="../images/01fig11.jpg"/></div>
<p class="figcap"><em>Figure 1-11: The Designer window after you upload an image in the Properties pane</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_10"/>You should now see the name of the picture listed in the Picture text box for <span class="literal">Image1</span> in the Properties pane <span class="ent">➌</span> and in the Media pane <span class="ent">➋</span>. The uploaded picture should display on <span class="literal">Screen1</span> in the Viewer pane <span class="ent">➊</span>.</p>
<h5 class="h5" id="ch00lev3sec6"><strong>Creating the Say a Message Button</strong></h5>
<p class="noindent">Now we’ll set the properties for <span class="literal">Button1</span> by clicking it in the Components pane. Since the app contains two <span class="literal">Button</span> components, let’s change the name of <span class="literal">Button1</span> to avoid confusion about each one’s function.</p>
<p class="indent">To rename <span class="literal">Button1</span>, click the <strong>Rename</strong> button near the bottom of the Components pane. That should open a Rename Component dialog, as shown in <a href="ch01.xhtml#ch1fig12">Figure 1-12</a>.</p>
<div class="image" id="ch1fig12"><img alt="Image" src="../images/01fig12.jpg"/></div>
<p class="figcap"><em>Figure 1-12: The Rename Component dialog opens after you click the Rename button in the Components pane.</em></p>
<div class="note">
<p class="notet"><span class="noteh1"><strong>NOTE</strong></span></p>
<p class="notep"><em>When you rename a component, you change its default name to a more meaningful one that describes its function and is easily identifiable in the Designer window and Blocks Editor. Only you and the people you’ve shared your app code with will see a component’s name. Renaming a component is different from changing the display text on a component like a <span class="codeitalic">Button</span> or <span class="codeitalic">Label</span>, which your users actually see.</em></p>
</div>
<p class="indent">Enter <span class="codestrong">SayMessageBtn</span> without any spaces in the <strong>New name:</strong> text box and click <strong>OK</strong>. You should see that the <span class="literal">Button</span> name has changed to <span class="literal">SayMessageBtn</span> in the Components and Properties panes in the Designer window.</p>
<p class="indent">Let’s make the width of the button fill the width of the screen as we did with <span class="literal">Image1</span>. To change the width of <span class="literal">SayMessageBtn</span> in the Properties pane, click inside the text box under <strong>Width</strong>, click the <strong>Fill parent</strong> radio button, and then click <strong>OK</strong>.</p>
<p class="indent">Finally, let’s change the text to display on <span class="literal">SayMessageBtn</span> to provide clear instructions for the user. Click inside the text box under <strong>Text</strong> in the Properties pane. Delete the default <span class="literal">Text for Button1</span> and type <span class="codestrong">1. Say a Message</span>, and then click outside of the text box. <a href="ch01.xhtml#ch1fig13">Figure 1-13</a> shows the new text on <span class="literal">SayMessageBtn</span> as well as the other changes you’ve made to its properties.</p>
<div class="image" id="ch1fig13"><span epub:type="pagebreak" id="page_11"/><img alt="Image" src="../images/01fig13.jpg"/></div>
<p class="figcap"><em>Figure 1-13: The Designer window after you change the name, width, and text of <span class="literal">SayMessageBtn</span></em></p>
<p class="indent">Next, we’ll make similar changes to <span class="literal">Button2</span>.</p>
<h5 class="h5" id="ch00lev3sec7"><strong>Creating the Text Your Message Button</strong></h5>
<p class="noindent">Rename <span class="literal">Button2</span> by clicking it and the <strong>Rename</strong> button in the Components pane, entering <span class="codestrong">SendTextBtn</span> without any spaces in the <strong>New name:</strong> text box, and then clicking <strong>OK</strong>. You can see that the button name has changed to <span class="literal">SendTextBtn</span> in the Components and Properties panes.</p>
<p class="indent">Next, to change the width of <span class="literal">SendTextBtn</span> in the Properties pane, click inside the text box under <strong>Width</strong>, click the <strong>Fill parent</strong> radio button, and then click <strong>OK</strong>. Finally, change the text on <span class="literal">SendTextBtn</span> to provide instructions for the app user.</p>
<p class="indent">To make the change, click inside the text box under <strong>Text</strong>, replace <span class="literal">Text for Button2</span> with <span class="codestrong">3. Text Your Message</span>, and then click outside of the text box. In the Viewer pane, you should now see all the changes you made to <span class="literal">SendTextBtn</span>, as shown in <a href="ch01.xhtml#ch1fig14">Figure 1-14</a>.</p>
<div class="image" id="ch1fig14"><span epub:type="pagebreak" id="page_12"/><img alt="Image" src="../images/01fig14.jpg"/></div>
<p class="figcap"><em>Figure 1-14: The Designer window after you change the name, width, and text of <span class="literal">SendTextBtn</span></em></p>
<p class="indent">Next, let’s update the app’s final visible component, <span class="literal">PhoneNumberPicker1</span>, which the user will use to decide whom to text.</p>
<h5 class="h5" id="ch00lev3sec8"><strong>Creating the Select a Number Button</strong></h5>
<p class="noindent">Click <span class="codestrong">PhoneNumberPicker1</span> in the Components pane. In the Properties pane, to change its width as you’ve done with the other components, click the <strong>Fill parent</strong> radio button and then click <strong>OK</strong>. Also change the text on the component to provide instructions for the app user.</p>
<p class="indent">To make the change, replace the existing <span class="literal">Text for PhoneNumberPicker1</span> in the text box under <strong>Text</strong> with <span class="codestrong">2. Select a Number</span>, and then click outside of the text box. In the Viewer pane, you should see these changes to <span class="literal">PhoneNumberPicker1</span>.</p>
<p class="indent">Now all you need to do is move the <span class="literal">PhoneNumberPicker</span> component above <span class="literal">SendTextBtn</span> so that users will see the components in the order you want them to move through the app. We need the user to choose the recipient’s phone number before sending the text, so we move <span class="literal">PhoneNumberPicker1</span> up by clicking and dragging it up in the Viewer pane so that it comes before “3. Text Your Message”. <a href="ch01.xhtml#ch1fig15">Figure 1-15</a> shows what the app looks like so far.</p>
<div class="image" id="ch1fig15"><span epub:type="pagebreak" id="page_13"/><img alt="Image" src="../images/01fig15.jpg"/></div>
<p class="figcap"><em>Figure 1-15: The Designer window after you change the width, text, and location of <span class="literal">PhoneNumberPicker1</span></em></p>
<p class="indent">Try changing a few more properties to make the app even more visually appealing and user-friendly. For example, you can change the color of the <span class="literal">Button</span> components and <span class="literal">PhoneNumberPicker1</span> to the darkest color in your image, such as the darker green in my <span class="literal">Image1</span> component, and make the text bold, larger, and white so it’s easy to see on the new dark background. Let’s try that now.</p>
<h5 class="h5" id="ch00lev3sec9"><strong>Changing Button Color</strong></h5>
<p class="noindent">To change the background color of the <span class="literal">Button</span> and <span class="literal">PhoneNumberPicker1</span> components, click each component in the Properties pane and then click the word <strong>Default</strong> under <span class="literal">BackgroundColor</span> to open the color list dialog shown to the left in <a href="ch01.xhtml#ch1fig16">Figure 1-16</a>.</p>
<p class="indent">If one of the colors in the list matches the darkest color in <span class="literal">Image1</span>, click the name of that color to select it. If none of the colors in the list work, click <strong>Custom...</strong> at the bottom of the list, which will open the color picker shown on the right in <a href="ch01.xhtml#ch1fig16">Figure 1-16</a>.</p>
<div class="image" id="ch1fig16"><span epub:type="pagebreak" id="page_14"/><img alt="Image" src="../images/01fig16.jpg"/></div>
<p class="figcap"><em>Figure 1-16: The color list and custom color picker used to change colors of various component properties in the Properties pane</em></p>
<p class="indent">In the color picker, replace the current 000000 color number by entering the number of the color you want to use. For instance, you can enter <span class="codestrong">006600</span> for the darker green in my <span class="literal">Image1</span> component, as I’ve done here, and then click <strong>Done</strong>.</p>
<h5 class="h5" id="ch00lev3sec10"><strong>Formatting Button Font</strong></h5>
<p class="noindent">Now make the text on each of the components bold by clicking the <strong>FontBold</strong> checkbox in the Properties pane, as shown in <a href="ch01.xhtml#ch1fig17">Figure 1-17</a>.</p>
<p class="indent">Make the text larger by replacing 14.0 with <span class="codestrong">20</span> in the <strong>FontSize</strong> text box. Finally, you can make the text color white by clicking the word <strong>Default</strong> under <span class="literal">TextColor</span> near the bottom of the Properties pane to open the color list, as shown in <a href="ch01.xhtml#ch1fig17">Figure 1-17</a>, and then clicking <strong>White</strong>.</p>
<div class="image" id="ch1fig17"><span epub:type="pagebreak" id="page_15"/><img alt="Image" src="../images/01fig17.jpg"/></div>
<p class="figcap"><em>Figure 1-17: The <span class="literal">SayMessageBtn</span> Properties pane, showing changes to the <span class="literal">Button</span> background and font</em></p>
<h4 class="h4" id="ch00lev2sec8"><strong>PROGRAMMING “HI, WORLD!” IN THE BLOCKS EDITOR</strong></h4>
<p class="noindent">Now that you’ve laid out all the components, you can move to the Blocks Editor to program the app. Click the <strong>Blocks</strong> button, as shown in <a href="ch01.xhtml#ch1fig18">Figure 1-18</a>, to switch to the Blocks Editor.</p>
<div class="image" id="ch1fig18"><span epub:type="pagebreak" id="page_16"/><img alt="Image" src="../images/01fig18.jpg"/></div>
<p class="figcap"><em>Figure 1-18: The Designer window after you lay out the app</em></p>
<p class="indent">For the “Hi, World!” app, you’ll use only component-specific blocks to program the action. You’ll program in the order of steps outlined in “Decomposing ‘Hi, World!’” on <a href="ch01.xhtml#page_5">page 5</a>.</p>
<h5 class="h5" id="ch00lev3sec11"><strong>Step 1: Converting from Speech to Text</strong></h5>
<p class="noindent">We start by telling the app what to do when the user clicks <span class="literal">SayMessageBtn</span>, the “1. Say a Message” button. When that button is clicked, we want the app to open the phone’s speech-to-text feature to capture and convert the user’s speech to text.</p>
<p class="indent"><a href="ch01.xhtml#ch1fig19">Figure 1-19</a> shows how to program step 1.</p>
<p class="indent">In the Blocks pane, click <span class="codestrong">SayMessageBtn</span> <span class="ent">➊</span> and, when the blocks for the component appear, drag the <span class="codestrong">whenSayMessageBtn.Click</span> block to the Viewer. Then, in the Blocks pane, click <span class="codestrong">SpeechRecognizer1</span> <span class="ent">➋</span> and drag the <span class="codestrong">callSpeechRecognizer1.GetText</span> block to the Viewer. Snap the <span class="codestrong">callSpeechRecognizer1.GetText</span> block inside the <span class="codestrong">whenSayMessageBtn.Click</span> block next to the word <span class="literal">do</span>. In plain English, these blocks say, “when the button is clicked, open the phone’s speech recognizer to get text,” which is very similar to what we outlined when we decomposed the app.</p>
<p class="indent">Now we’ll live-test to see how these blocks work. It’s best to test this app on a working phone. If you try to test these blocks with the built-in emulator or with a device that doesn’t have speech-to-text capability, you’ll likely get an error when you click <span class="codestrong">SayMessageBtn</span>. Use the MIT AI2 Companion app on a phone, as outlined in “Live-Testing Your Apps” on <a href="intro.xhtml#page_xxii">page xxii</a>.</p>
<div class="image" id="ch1fig19"><span epub:type="pagebreak" id="page_17"/><img alt="Image" src="../images/01fig19.jpg"/></div>
<p class="figcap"><em>Figure 1-19: The Blocks Editor window with code blocks dragged onto the Viewer to program <span class="literal">SayMessageBtn</span></em></p>
<p class="indent">Once you click <strong>Connect</strong> <span class="ent">▸</span> <strong>AI Companion</strong> in the top menu bar and scan the QR code with your phone’s Companion app, your “Hi, World!” app should appear on your phone.</p>
<p class="indent">Click the <strong>1. Say a Message</strong> button. The phone’s speech recognizer should open and prompt you to speak, as long as your phone’s speech-to-text capability is turned on and the blocks are laid out as shown in <a href="ch01.xhtml#ch1fig19">Figure 1-19</a>. So far, so good. Leave the app open on your phone so you can keep live-testing.</p>
<h5 class="h5" id="ch00lev3sec12"><strong>Step 2: Opening the User’s Contact List</strong></h5>
<p class="noindent">Now let’s program the second part of the app, telling it what to do when the user clicks the “2. Select a Number” button. When the <span class="literal">PhoneNumberPicker</span> is clicked, we want the app to open the user’s contact list for selection. Here’s the code for programming this:</p>
<div class="image"><img alt="Image" src="../images/f0017-01.jpg"/></div>
<p class="indent">In the Blocks pane, click <span class="codestrong">PhoneNumberPicker1</span>, and when the blocks for the component appear, drag the <span class="codestrong">whenPhoneNumberPicker1.TouchDown</span> block <span class="ent">➊</span> to the Viewer. Then, in the Blocks pane, click <span class="codestrong">PhoneNumberPicker1</span> again and drag the <span class="codestrong">callPhoneNumberPicker1.Open</span> block <span class="ent">➋</span> to the Viewer and snap it inside the <span epub:type="pagebreak" id="page_18"/><span class="codestrong">whenPhoneNumberPicker1.TouchDown</span> block next to the word <span class="literal">do</span>. In plain English, these blocks tell the app, “open the phone’s contact list when the phone number picker is touched,” like we planned.</p>
<p class="indent">Now live-test to see how these blocks work. Click <strong>2. Select a Number</strong>. Your phone’s contact list and a prompt to select a contact should appear, assuming you have contacts saved in your phone.</p>
<h5 class="h5" id="ch00lev3sec13"><strong>Step 3: Sending the Text Message</strong></h5>
<p class="noindent">Now we’ll program the final part of the app so it knows what to do when a user clicks the “3. Text Your Message” button. That’s when we want the app to set the message for the <span class="literal">Texting</span> component to the text converted by the device’s speech-to-text function, set the phone number for the <span class="literal">Texting</span> component to the user’s selected phone number, and then text the message to that phone number. Here are the blocks for <span class="literal">SendTextBtn</span>.</p>
<div class="image"><img alt="Image" src="../images/f0018-01.jpg"/></div>
<p class="indent">In the Blocks pane, click <span class="codestrong">SendTextBtn</span>, and when the blocks for the component appear, drag the <span class="codestrong">whenSendTextBtn.Click</span> block <span class="ent">➊</span> to the Viewer. Then, in the Blocks pane, click the <span class="codestrong">Texting1</span> component and drag the <span class="codestrong">setTexting1.Messageto</span> block <span class="ent">➋</span> to the Viewer and snap it inside the <span class="codestrong">whenSendTextBtn.Click</span> block next to the word <span class="literal">do</span>.</p>
<p class="indent">Then, in the Blocks pane, click the <span class="codestrong">SpeechRecognizer1</span> component and drag the <span class="codestrong">SpeechRecognizer1.Result</span> block <span class="ent">➌</span> to the Viewer and snap it to the right side of the <span class="codestrong">setTexting1.Messageto</span> block.</p>
<h5 class="h5" id="ch00lev3sec14"><strong>Getters and Setters</strong></h5>
<p class="noindent">To understand what we’re doing with these blocks, you first need to understand that App Inventor’s <span class="literal">Texting</span> component can send a text message only if its <span class="literal">Message</span> and <span class="literal">PhoneNumber</span> properties are set. That simply means that <span class="literal">Texting1</span> must have a message to send (its <span class="literal">Message</span> property) and must know where to send it (its <span class="literal">PhoneNumber</span> property).</p>
<p class="indent">We tell the app to set the <span class="literal">Message</span> property with the <span class="literal">SpeechRecognizer1.Result</span> block, which is called a <em>getter block</em> since it gets a value for us, and the <span class="literal">setTexting1.Messageto</span> block, which is called a <em>setter block</em> because it sets a value.</p>
<p class="indent">Technically, when we snap blocks together side by side as we’ve done here, they <em>execute</em>—or work—from right to left. That means that, with these blocks, the app first gets the current value of the <span class="literal">SpeechRecognizer1 Result</span> property, which is the text that we get from the app using the device’s speech-to-text function. Then the app sets the <span class="literal">Texting1 Message</span> property to that text, which lets the <span class="literal">Texting</span> component know the message to send.</p>
<div class="note">
<p class="notet"><span epub:type="pagebreak" id="page_19"/><span class="noteh1"><strong>NOTE</strong></span></p>
<p class="notep"><em>As with the properties for many other components, you can set the <span class="codeitalic">Texting</span> component’s <span class="codeitalic">Message</span> and <span class="codeitalic">PhoneNumber</span> properties initially in the Designer window’s Properties pane if it makes sense for your app, or you can have the app set or change them dynamically using component-specific blocks like the ones we’re using here. For instance, if you wanted your app to send the exact same message each time, it would make sense to set the <span class="codeitalic">Texting</span> component’s <span class="codeitalic">Message</span> property by typing it in the Properties pane.</em></p>
</div>
<p class="indent">Let’s continue programming. In the Blocks pane, click the <span class="codestrong">Texting1</span> component again, and drag the <span class="codestrong">setTexting1.PhoneNumberto</span> block <span class="ent">➍</span> to the Viewer and snap it under the <span class="codestrong">setTexting1.Messageto</span> block. Then, click <span class="codestrong">PhoneNumberPicker1</span> in the Blocks pane and drag the <span class="codestrong">PhoneNumberPicker1.PhoneNumber</span> block <span class="ent">➎</span> and snap it to the right side of the <span class="codestrong">setTexting1.PhoneNumberto</span> block.</p>
<p class="indent">Here, when the user clicks <span class="literal">SendTextBtn</span>, we have the app set the other property required for <span class="literal">Texting1</span>—the <span class="literal">PhoneNumber</span> property—with the getter block <span class="literal">PhoneNumberPicker1.PhoneNumber</span> and the setter block <span class="literal">setTexting1.PhoneNumberto</span>. The app first gets the current value of the <span class="literal">PhoneNumberPicker1 PhoneNumber</span> property, which is the phone number the user selected when the app opened the device’s contact list, and then sets the <span class="literal">Texting1 PhoneNumber</span> property to that number. This lets the <span class="literal">Texting</span> component know the phone number to send the text to.</p>
<p class="indent">Finally, click <span class="codestrong">Texting1</span> in the Blocks pane again, drag the <span class="codestrong">callTexting1.SendMessageDirect</span> block <span class="ent">➏</span> to the Viewer, and snap it under the <span class="codestrong">setTexting1.PhoneNumberto</span> block. Now, when the user clicks <span class="literal">SendTextBtn</span>, after the app sets the necessary properties for <span class="literal">Texting1</span>, this block directs the app to send the message directly.</p>
<p class="indent">Instead of sending the message directly, we could have the app open the default texting app so the user can edit the message before sending. To do this, use the <span class="codestrong">callTexting1.SendMessage</span> block in place of the <span class="codestrong">callTexting1.SendMessageDirect</span> block.</p>
<p class="indent">In plain English, all together your blocks simply say, “when the button is clicked <span class="ent">➊</span>, set the text message for the <span class="literal">Texting</span> component <span class="ent">➋</span> to the text converted by the speech recognizer <span class="ent">➌</span>, set the phone number for the <span class="literal">Texting</span> component <span class="ent">➍</span> to the phone number selected in contacts <span class="ent">➎</span>, and then send the message <span class="ent">➏</span>,” just like we planned.</p>
<p class="indent">Now live-test the completed app! On your phone, click <strong>1. Say a Message</strong> and say a message when the speech recognizer prompts you. Then, click <strong>2. Select a Number</strong> and select a phone number from your contact list. Finally, click <strong>3. Text Your Message</strong> and then check whether your phone sent the text. As long as you’re testing on a working phone with a texting plan, if you placed your blocks as shown in the code examples, the app should work correctly.</p>
<p class="indent">If the app doesn’t work, you now must <em>debug</em>, which means to look closely at your code for <em>bugs</em> (errors) and fix them. Recheck your blocks to make sure you’ve dragged the getter and setter blocks into the right spots, and test again after you make any corrections. Before retesting, to make sure your changes <span epub:type="pagebreak" id="page_20"/>take effect, reload the app in the Companion by changing any property in the Property pane, like clicking any checkbox. Once all the buttons work, you have successfully created your first fully functional app!</p>
<h4 class="h4" id="ch00lev2sec9"><strong>SHARING “HI, WORLD!”</strong></h4>
<p class="noindent">You can email your app for others to install on their phones. But first, click <span class="codestrong">Screen1</span> in the components pane, so you can make sure the app’s name displays the way you want it to when you send it to your friends. In the Properties pane, in the text box under <strong>AppName</strong>, you can see that the name now shows as <em>HiWorld</em>, which is the name you entered when you started the project. To change the app’s name, click inside the text box, add a space between <em>Hi</em> and <em>World</em>, maybe add an exclamation point after <em>World</em>, and then click outside of the text box. Also, click the checkbox under <strong>TitleVisible</strong> to remove the check mark, which will keep the title of the screen, <em>Screen1</em>, from showing at the top of the app when it runs on a phone.</p>
<p class="indent">Now, with the app project open on your computer screen, click <strong>Build</strong> <span class="ent">▸</span> <strong>App (save .apk to my computer)</strong> in the top menu bar, as shown in <a href="ch01.xhtml#ch1fig20">Figure 1-20</a>.</p>
<div class="image" id="ch1fig20"><img alt="Image" src="../images/01fig20.jpg"/></div>
<p class="figcap"><em>Figure 1-20: The Build menu link creates a file you can share with friends so they can install the app.</em></p>
<p class="indent">You should see a progress bar showing that the file is being saved. Once the file is saved, you can locate it on your computer and email it as an attachment to whomever you want. When people open the email on their phones, they’ll be prompted to install the app. Note that since “Hi, World!” is a nonmarket app, your friends first will need to make sure their phones’ settings allow installation of applications from “unknown sources.”</p>
<h3 class="h3" id="ch00lev1sec12"><strong>SUMMARY</strong></h3>
<p class="noindent">In this chapter, you built your first app, “Hi, World!”, which converts a spoken message into a text message and sends it to a selected contact! In the process, you explored the app design process, which included learning how to decompose a big plan into its smaller steps, then following those steps to program the actual components. Now you should feel more comfortable navigating around the App Inventor Designer window and Blocks Editor.</p>
<p class="indent">In the next chapter, you’ll examine how App Inventor uses event-driven programming to set app behavior, and you’ll become familiar with events and event handlers. We’ll use several examples of both to create the “Practice Makes Perfect” app, where users can record, watch, and re-record temporary video clips of themselves practicing speeches or songs.</p>
<h3 class="h3" id="ch00lev1sec13"><span epub:type="pagebreak" id="page_21"/><strong>ON YOUR OWN</strong></h3>
<p class="noindent">Now that you’ve created “Hi, World!”, save new versions of it as you modify and extend it while working on these exercises. You can find solutions online at <em><a href="https://nostarch.com/programwithappinventor/">https://nostarch.com/programwithappinventor/</a></em>.</p>
<ol>
<li><p class="noindent">Change the app so that it prompts the user to enter a telephone number rather than selecting one from the contact list. Which component(s) would you drag from the User Interface drawer to the Viewer to enable the user to enter the telephone number manually? Now that you’ll be replacing the <span class="literal">PhoneNumberPicker</span> component, how will you include instructions to the user about where to enter a phone number? What blocks will you use to provide the phone number required for <span class="literal">Texting1</span>?</p></li>
<li><p class="noindent">Extend the app for Android devices so that, after it texts the spoken message, it waits for a response text message from the recipient and then reads that message to the user aloud.</p></li>
<li><p class="noindent">Change the app so that it emails the message instead of texting it. What components and blocks would you use to send an email message?<span epub:type="pagebreak" id="page_22"/></p></li>
</ol>
</body></html>