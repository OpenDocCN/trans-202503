- en: Chapter 14. Masks
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 14 章. 蒙版
- en: A *mask* is a grayscale image that is used to represent either a selection within
    an image (called a *selection mask*) or the transparency of a layer (called a
    *layer mask*).
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*蒙版* 是一种灰度图像，用于表示图像中的选择（称为 *选择蒙版*）或图层的透明度（称为 *图层蒙版*）。'
- en: You use a selection mask to save a particular selection. This way you can maintain
    a collection of selections that you’ve built, ready to use when you need them.
    In a selection mask, pixels that are completely selected in the image are represented
    as white, pixels that are not selected at all are represented as black, and pixels
    that are partially selected are represented as intermediate shades.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用选择蒙版来保存特定的选择。通过这种方式，你可以保持一系列已创建的选择，随时准备使用它们。在选择蒙版中，图像中完全被选择的像素以白色表示，完全未被选择的像素以黑色表示，部分选择的像素则显示为中间色调。
- en: Although a selection mask is an independent object, a layer mask is part of
    a specific layer used to specify the transparency of the layer’s pixels. The pixels
    themselves don’t change—in other words, their RGB components remain intact. With
    layer masks, you can manipulate a layer’s transparency independent of its colors.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管选择蒙版是一个独立的对象，但图层蒙版是特定图层的一部分，用于指定图层像素的透明度。像素本身并不会改变——换句话说，它们的 RGB 组件保持不变。通过图层蒙版，你可以独立于颜色操作图层的透明度。
- en: '![A selection made with the Select by Color tool](httpatomoreillycomsourcenostarchimages1455940.png.jpg)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![使用“按颜色选择”工具所做的选择](httpatomoreillycomsourcenostarchimages1455940.png.jpg)'
- en: Figure 14-1. A selection made with the Select by Color tool
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-1. 使用“按颜色选择”工具所做的选择
- en: 'You can use all GIMP tools on a mask: drawing tools, transformation tools,
    and even selection tools. This makes doing very precise work on a mask possible—and
    creating a selection much more complex than what you saw in [Chapter 13](ch13.html
    "Chapter 13. Selections").'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在蒙版上使用所有 GIMP 工具：绘图工具、变换工具，甚至选择工具。这使得在蒙版上进行非常精确的操作成为可能——并且能够创建比 [第 13 章](ch13.html
    "第 13 章. 选择") 中所见更复杂的选择。
- en: 14.1 Selection Masks
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 14.1 选择蒙版
- en: '[Figure 14-1](ch14.html#selection_made_with_the_select_by_color "Figure 14-1. A
    selection made with the Select by Color tool") shows a photograph where we made
    a selection with the Select by Color tool (![](httpatomoreillycomsourcenostarchimages1453942.png.jpg)).
    In the tool options, we increased the Threshold value to 20.0 to select the entire
    sky. Then we applied **Image: Select > Save to Channel**.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 14-1](ch14.html#selection_made_with_the_select_by_color "图 14-1. 使用“按颜色选择”工具所做的选择")
    显示了我们使用“按颜色选择”工具所做的选择（![](httpatomoreillycomsourcenostarchimages1453942.png.jpg)）。在工具选项中，我们将阈值设置为
    20.0，以选择整个天空。然后我们应用了**图像：选择 > 保存到通道**。'
- en: The Channels Dialog
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通道对话框
- en: '[Figure 14-2](ch14s01.html#channels_dialog-id00112 "Figure 14-2. The Channels
    dialog") shows the Channels dialog, which is a dockable dialog initially located
    in the multi-dialog window. The first three rows correspond to the image’s Red,
    Green, and Blue channels. These channels are grayscale images; each of their pixel
    values corresponds to the value of that color component in the image itself. That’s
    why the thumbnail appears as a grayscale image. Click and hold the thumbnail to
    see a somewhat larger, color thumbnail (see [Figure 14-3](ch14s01.html#looking_at_the_thumbnail
    "Figure 14-3. Looking at the thumbnail")).'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 14-2](ch14s01.html#channels_dialog-id00112 "图 14-2. 通道对话框") 显示了通道对话框，这是一个可停靠的对话框，最初位于多对话框窗口中。前三行对应图像的红色、绿色和蓝色通道。这些通道是灰度图像；每个像素的值对应图像中该颜色分量的值。这就是为什么缩略图显示为灰度图像的原因。点击并按住缩略图，可以查看一个稍大的彩色缩略图（见
    [图 14-3](ch14s01.html#looking_at_the_thumbnail "图 14-3. 查看缩略图")）。'
- en: '![The Channels dialog](httpatomoreillycomsourcenostarchimages1455942.png.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![通道对话框](httpatomoreillycomsourcenostarchimages1455942.png.jpg)'
- en: Figure 14-2. The Channels dialog
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-2. 通道对话框
- en: '![Looking at the thumbnail](httpatomoreillycomsourcenostarchimages1455944.png.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![查看缩略图](httpatomoreillycomsourcenostarchimages1455944.png.jpg)'
- en: Figure 14-3. Looking at the thumbnail
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-3. 查看缩略图
- en: Click and drag the Red channel thumbnail to the Toolbox to create a new grayscale
    image, as shown in [Figure 14-4](ch14s01.html#extracting_the_red_channel "Figure 14-4. Extracting
    the Red channel"). Or drag the thumbnail to the Image window to add the channel
    as a new layer of the image.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 点击并拖动红色通道的缩略图到工具箱中，以创建一个新的灰度图像，如 [图 14-4](ch14s01.html#extracting_the_red_channel
    "图 14-4. 提取红色通道") 所示。或者将缩略图拖动到图像窗口，将该通道作为图像的新图层添加。
- en: Clicking a channel toggles it on and off. If a channel is deactivated, none
    of the changes made to the image affects that particular channel. Use this to
    your advantage, for example, by selecting only the Red channel when removing red
    eye in a photograph. If no channels are active, you won’t be able to change the
    image at all, leading to confusion and frustration. We recommend always keeping
    the Channels dialog open and checking it if the adjustments you make don’t yield
    the results you expect.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 点击通道图标可以切换其激活状态。如果一个通道被停用，对图像所做的更改将不会影响该通道。你可以利用这一点，例如在去除照片中的红眼时只选择红色通道。如果没有通道被激活，你将无法更改图像，导致困惑和沮丧。我们建议始终保持通道对话框打开，并在所做的调整没有得到预期结果时检查它。
- en: 'Clicking the eye next to a channel toggles that channel’s visibility. For example,
    [Figure 14-5](ch14s01.html#hiding_the_green_channel "Figure 14-5. Hiding the Green
    channel") shows the result of hiding the Green channel. Note that visibility and
    activating a channel are two different things: You can blindly alter a channel
    that’s not visible and vainly attempt to edit a channel that’s visible but inactive.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 点击通道旁边的眼睛图标可以切换该通道的可见性。例如，[图14-5](ch14s01.html#hiding_the_green_channel "图14-5.
    隐藏绿色通道")展示了隐藏绿色通道后的结果。注意，可见性和激活通道是两回事：你可以在不可见的通道上盲目更改，或者在可见但未激活的通道上徒劳地尝试编辑。
- en: '![Extracting the Red channel](httpatomoreillycomsourcenostarchimages1455946.png.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![提取红色通道](httpatomoreillycomsourcenostarchimages1455946.png.jpg)'
- en: Figure 14-4. Extracting the Red channel
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-4. 提取红色通道
- en: '![Hiding the Green channel](httpatomoreillycomsourcenostarchimages1455948.png.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![隐藏绿色通道](httpatomoreillycomsourcenostarchimages1455948.png.jpg)'
- en: Figure 14-5. Hiding the Green channel
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-5. 隐藏绿色通道
- en: As soon as you add an Alpha channel or a second layer to an image, the global
    Alpha channel, which represents the transparency of the whole image, appears in
    the Channels dialog.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你向图像添加了Alpha通道或第二个图层，表示整个图像透明度的全局Alpha通道就会出现在通道对话框中。
- en: 'Below the rows for the three or four actual channels, a horizontal strip separates
    the dialog into two parts. You find the layer pixels lock icon (which you saw
    in [Chapter 11](ch11.html "Chapter 11. Layers")) in this strip. Activating the
    lock prevents changes to the mask. The lower part of the dialog holds the selection
    masks. [Figure 14-2](ch14s01.html#channels_dialog-id00112 "Figure 14-2. The Channels
    dialog") has only one, and its name was chosen by GIMP. Change this name the same
    way you do with layers: by double-clicking the name itself, selecting **Channels:
    right-click > Edit Channel Attributes**, or clicking the leftmost icon at the
    bottom of the Channels dialog, which brings up the dialog shown in [Figure 14-6](ch14s01.html#editing_the_channel_attributes
    "Figure 14-6. Editing the channel attributes"). Here, change the channel name
    and adjust its opacity and color to make it temporarily visible in the image.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在三个或四个实际通道的行下方，一条水平条带将对话框分为两部分。你可以在这条带子中找到图层像素锁定图标（你在[第11章](ch11.html "第11章.
    图层")中见过）。激活锁定会防止对蒙版的更改。对话框的下半部分包含选择蒙版。[图14-2](ch14s01.html#channels_dialog-id00112
    "图14-2. 通道对话框")只有一个蒙版，它的名称是由GIMP选择的。你可以像操作图层一样更改这个名称：通过双击名称本身，选择**通道：右键点击 > 编辑通道属性**，或者点击通道对话框底部最左侧的图标，这会弹出[图14-6](ch14s01.html#editing_the_channel_attributes
    "图14-6. 编辑通道属性")中显示的对话框。在这里，你可以更改通道名称并调整其不透明度和颜色，使其在图像中暂时可见。
- en: '![Editing the channel attributes](httpatomoreillycomsourcenostarchimages1455950.png.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![编辑通道属性](httpatomoreillycomsourcenostarchimages1455950.png.jpg)'
- en: Figure 14-6. Editing the channel attributes
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-6. 编辑通道属性
- en: '![Making the mask visible](httpatomoreillycomsourcenostarchimages1455952.png.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![使蒙版可见](httpatomoreillycomsourcenostarchimages1455952.png.jpg)'
- en: Figure 14-7. Making the mask visible
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-7. 使蒙版可见
- en: '![After changing the channel attributes](httpatomoreillycomsourcenostarchimages1455954.png.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![更改通道属性后](httpatomoreillycomsourcenostarchimages1455954.png.jpg)'
- en: Figure 14-8. After changing the channel attributes
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-8. 更改通道属性后
- en: 'These last two attributes are used when you click the eye icon for the Red,
    Green, or Blue channel. If you use the settings shown in [Figure 14-6](ch14s01.html#editing_the_channel_attributes
    "Figure 14-6. Editing the channel attributes"), you get the result shown in [Figure 14-7](ch14s01.html#making_the_mask_visible
    "Figure 14-7. Making the mask visible"): The mask is 50% opaque and is shown in
    black. In [Figure 14-8](ch14s01.html#after_changing_the_channel_attributes "Figure 14-8. After
    changing the channel attributes"), you see the result when the opacity is set
    to 37% and the color is set to a bright green. Note that the Color chooser dialog,
    which pops up when you click the box on the right of the Edit Channel Attributes
    dialog, has more components than usual. As shown in [Figure 14-9](ch14s01.html#editing_the_channel_color
    "Figure 14-9. Editing the channel color"), you can change the Alpha value by using
    the bottom slider.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个属性在点击红色、绿色或蓝色通道的眼睛图标时使用。如果使用[图 14-6](ch14s01.html#editing_the_channel_attributes
    "图 14-6. 编辑通道属性")中显示的设置，得到的结果如[图 14-7](ch14s01.html#making_the_mask_visible "图
    14-7. 使遮罩可见")所示：遮罩是50%不透明，并以黑色显示。在[图 14-8](ch14s01.html#after_changing_the_channel_attributes
    "图 14-8. 更改通道属性后")中，可以看到当不透明度设置为37%且颜色设置为亮绿色时的效果。请注意，点击“编辑通道属性”对话框右侧的框时弹出的颜色选择器对话框，比平常包含更多的组件。如[图
    14-9](ch14s01.html#editing_the_channel_color "图 14-9. 编辑通道颜色")所示，你可以通过使用底部的滑块来调整
    Alpha 值。
- en: '![Editing the channel color](httpatomoreillycomsourcenostarchimages1455956.png.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![编辑通道颜色](httpatomoreillycomsourcenostarchimages1455956.png.jpg)'
- en: Figure 14-9. Editing the channel color
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-9. 编辑通道颜色
- en: 'Between each channel’s eye icon and thumbnail, notice room available for an
    additional icon: the chain. The chain links selection masks together. If you have
    several selection channels and link some of them together by selecting the chain
    icons, any changes applied to one of them also affect the others.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 每个通道的眼睛图标和缩略图之间，注意有空位可以放置一个额外的图标：链条。链条将选择遮罩连接在一起。如果你有多个选择通道，并通过选择链条图标将它们连接起来，对其中一个通道的任何更改也会影响其他通道。
- en: 'To access the Channels menu, either click the configuration button in the top-right
    corner of the Channels dialog or right-click one of the rows. This menu has the
    same options as the seven buttons in the dialog’s bottom row (see [Figure 14-2](ch14s01.html#channels_dialog-id00112
    "Figure 14-2. The Channels dialog")). These buttons allow you to do the following:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问“通道”菜单，可以点击“通道”对话框右上角的配置按钮，或右键点击其中一行。此菜单与对话框底部一排的七个按钮选项相同（见[图 14-2](ch14s01.html#channels_dialog-id00112
    "图 14-2. 通道对话框")）。这些按钮允许你执行以下操作：
- en: Edit the channel attributes.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑通道属性。
- en: Create a new channel. This option brings up the dialog shown in [Figure 14-10](ch14s01.html#creating_a_new_channel
    "Figure 14-10. Creating a new channel"), which is identical to the one shown in
    [Figure 14-6](ch14s01.html#editing_the_channel_attributes "Figure 14-6. Editing
    the channel attributes") except for the additional INITIALIZE FROM SELECTION checkbox.
    Checking this box saves the current selection to a channel. Press ![](httpatomoreillycomsourcenostarchimages1453922.png.jpg)
    while clicking CREATE A NEW CHANNEL to use the last parameter values.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个新通道。此选项会弹出一个与[图 14-10](ch14s01.html#creating_a_new_channel "图 14-10. 创建新通道")中显示的对话框相同的对话框，唯一不同的是增加了一个“从选择初始化”复选框。勾选此框会将当前选择保存到通道中。在点击“创建新通道”时，按住![](httpatomoreillycomsourcenostarchimages1453922.png.jpg)以使用上次的参数值。
- en: Move the current channel up or down. This option has no effect on the image
    itself.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将当前通道上下移动。此选项对图像本身没有影响。
- en: Duplicate the current channel.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复制当前通道。
- en: Create a selection with the current channel. The ![](httpatomoreillycomsourcenostarchimages1453844.png.jpg)
    and ![](httpatomoreillycomsourcenostarchimages1453922.png.jpg) keys work the same
    way as they do when using the selection tools.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用当前通道创建一个选择区域。![](httpatomoreillycomsourcenostarchimages1453844.png.jpg)和![](httpatomoreillycomsourcenostarchimages1453922.png.jpg)键的作用与使用选择工具时相同。
- en: '![Creating a new channel](httpatomoreillycomsourcenostarchimages1455958.png.jpg)'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![创建新通道](httpatomoreillycomsourcenostarchimages1455958.png.jpg)'
- en: Figure 14-10. Creating a new channel
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-10. 创建新通道
- en: In the Channels dialog menu are four entries that create a selection from the
    channel, each corresponding to the different selection modes.
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在“通道”对话框菜单中，有四个条目可以从通道中创建选择，每个条目对应不同的选择模式。
- en: Delete the current channel.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除当前通道。
- en: All of these menu options, except New Channel, are available only when a selection
    mask is active.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 除了新建通道选项外，所有这些菜单选项只有在选区蒙版处于激活状态时才可用。
- en: Only one selection mask can be active at a given time, and when a mask is active,
    GIMP’s various drawing and transformation tools work on the mask, not on the image
    itself. In fact, if you switch to the Layers dialog, you can see there is no active
    layer. Conversely, if you activate a layer in the Layers dialog, the selection
    mask deactivates. If you’re trying to change the current image and nothing is
    happening, make sure a layer is actually selected in the Layers dialog. You could
    be inadvertently changing a mask!
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 每次只能激活一个选区蒙版，当蒙版处于激活状态时，GIMP的各种绘图和变换工具作用于蒙版，而不是图像本身。事实上，如果你切换到图层对话框，你会看到没有图层处于激活状态。相反，如果你在图层对话框中激活一个图层，选区蒙版就会被取消激活。如果你正在尝试修改当前图像而没有任何变化，请确保在图层对话框中确实选中了一个图层。你可能在不经意间修改了蒙版！
- en: Creating a Selection Mask
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建选区蒙版
- en: You can create a selection mask using one of two methods, each with several
    possible pitfalls. The first method is to use the selection tools (covered in
    [Chapter 13](ch13.html "Chapter 13. Selections")) and then to save the selection
    to a channel. After doing this, no layer is active, the image mask is active but
    might not be visible in the image, and the selection used for creating the mask
    is still active.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过两种方法创建选区蒙版，每种方法都有若干潜在的陷阱。第一种方法是使用选区工具（在[第13章](ch13.html "第13章. 选区")中介绍）然后将选区保存到通道中。完成此操作后，没有图层处于激活状态，图像蒙版处于激活状态，但可能在图像中不可见，且用于创建蒙版的选区依然处于激活状态。
- en: As a result, if you try to paint on the image, you’re actually painting on the
    mask. When you create the mask, the Channels dialog appears, even if it was previously
    hidden. This should alert you that the mask is active. But the selection also
    remains active—even if it’s hidden—so if you try to paint on the mask, you’re
    only able to alter areas that fall within the selection.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是，如果你试图在图像上绘制，你实际上是在蒙版上绘制。当你创建蒙版时，通道对话框会出现，即使它之前是隐藏的。这应该提醒你蒙版已激活。但选区依然保持激活状态——即使它是隐藏的——所以如果你尝试在蒙版上绘制，你只能修改位于选区内的区域。
- en: '![Another photograph](httpatomoreillycomsourcenostarchimages1455960.png.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![另一张照片](httpatomoreillycomsourcenostarchimages1455960.png.jpg)'
- en: Figure 14-11. Another photograph
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-11. 另一张照片
- en: '![A mask that needs to be cleaned up](httpatomoreillycomsourcenostarchimages1455962.png.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![需要清理的蒙版](httpatomoreillycomsourcenostarchimages1455962.png.jpg)'
- en: Figure 14-12. A mask that needs to be cleaned up
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-12. 需要清理的蒙版
- en: The second method for creating a selection mask is to use the Channels dialog
    directly. Create a new channel by clicking the appropriate button, and it immediately
    appears in the image. Then use the drawing tools to edit it. Painting white on
    the mask selects pixels, and painting black deselects pixels. Use the Blend tool
    and paint with various shades of gray to partially select pixels. You can also
    use colors other than gray, although only the color’s value component is used.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 创建选区蒙版的第二种方法是直接使用通道对话框。通过点击相应按钮创建一个新通道，它会立即出现在图像中。然后使用绘图工具进行编辑。在蒙版上涂白色以选择像素，涂黑色则取消选择像素。使用渐变工具，并用不同的灰度值进行涂绘，以部分选择像素。你也可以使用除灰色外的颜色，尽管只有颜色的值组件会被使用。
- en: For example, we took the photograph shown in [Figure 14-11](ch14s01.html#another_photograph
    "Figure 14-11. Another photograph") and made a selection with the Select by Color
    tool. But we set the THRESHOLD cursor to 15.0, which is too low for a clean selection.
    [Figure 14-12](ch14s01.html#mask_that_needs_to_be_cleaned_up "Figure 14-12. A
    mask that needs to be cleaned up") shows a part of the image after saving the
    selection to a channel and making this channel visible.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们拍摄了[图 14-11](ch14s01.html#another_photograph "图 14-11. 另一张照片")中的照片，并使用按颜色选择工具进行了选区。但我们将阈值游标设置为
    15.0，这对于干净的选区来说太低了。[图 14-12](ch14s01.html#mask_that_needs_to_be_cleaned_up "图
    14-12. 需要清理的蒙版")展示了将选区保存到通道并使该通道可见后的图像部分。
- en: '![Resetting the foreground and background colors](httpatomoreillycomsourcenostarchimages1455964.png.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![重置前景和背景颜色](httpatomoreillycomsourcenostarchimages1455964.png.jpg)'
- en: Figure 14-13. Resetting the foreground and background colors
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-13. 重置前景和背景颜色
- en: '![The Quick Mask button](httpatomoreillycomsourcenostarchimages1455966.png.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![快速蒙版按钮](httpatomoreillycomsourcenostarchimages1455966.png.jpg)'
- en: Figure 14-14. The Quick Mask button
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-14. 快速蒙版按钮
- en: The mask needs to be cleaned up, which you can do with the Paintbrush tool.
    First set the foreground and background colors to their default values of black
    and white. The simplest way to do this is to click the small buttons in the lower-left
    corner of the Toolbox (see [Figure 14-13](ch14s01.html#resetting_the_foreground_and_background
    "Figure 14-13. Resetting the foreground and background colors")) or to press ![](httpatomoreillycomsourcenostarchimages1454550.png).
    Then select the Paintbrush tool (![](httpatomoreillycomsourcenostarchimages1454224.png.jpg))
    and an appropriate brush. Paint the parts that shouldn’t be selected black and
    the parts that should be selected white. Switch between the foreground and background
    color by pressing ![](httpatomoreillycomsourcenostarchimages1454054.png).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 蒙版需要清理，你可以使用画笔工具来完成此操作。首先，将前景色和背景色设置为默认值——黑色和白色。最简单的方法是点击工具箱左下角的小按钮（参见[图14-13](ch14s01.html#resetting_the_foreground_and_background
    "图14-13. 重置前景色和背景色")），或按下 ![](httpatomoreillycomsourcenostarchimages1454550.png)。然后选择画笔工具
    (![](httpatomoreillycomsourcenostarchimages1454224.png.jpg)) 和适当的画笔。将不需要被选中的部分涂成黑色，应该被选中的部分涂成白色。按
    ![](httpatomoreillycomsourcenostarchimages1454054.png) 来在前景色和背景色之间切换。
- en: You want either full selection or no selection at all, so if you’re using a
    tablet pen, set the Paint Dynamics so that pressure changes the brush size, rather
    than the opacity. This dynamic allows you to press down to fill large areas quickly
    or zoom in and press gently to touch up the mask’s finer details.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要完全选中或完全不选中，所以如果你使用的是平板笔，请设置画笔动态，使得压力变化影响画笔大小，而不是透明度。这个动态可以让你按下去快速填充大面积，或者放大后轻轻按压来修饰蒙版的细节。
- en: The Quick Mask Tool
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 快速蒙版工具
- en: 'If you want to create a complicated selection, but don’t need to save it for
    later, use the Quick Mask tool. Toggle it via **Image: Select > Toggle Quick Mask**,
    by clicking the button in the bottom-left corner of the Image window (see [Figure 14-14](ch14s01.html#quick_mask_button
    "Figure 14-14. The Quick Mask button")), or by pressing ![](httpatomoreillycomsourcenostarchimages1455738.png.jpg).'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想创建一个复杂的选区，但不需要保存它以供以后使用，使用快速蒙版工具。通过**图像：选择 > 切换快速蒙版**来切换，或者点击图像窗口左下角的按钮（参见[图14-14](ch14s01.html#quick_mask_button
    "图14-14. 快速蒙版按钮")），或者按下 ![](httpatomoreillycomsourcenostarchimages1455738.png.jpg)。
- en: 'When the Quick Mask is active, it appears in the Channels dialog as an active
    and visible red selection mask. [Figure 14-15](ch14s01.html#part_of_a_quick_mask
    "Figure 14-15. A part of a Quick Mask") shows a part of our photograph after making
    a selection with the Select by Color tool, using a THRESHOLD of 20.0\. To edit
    the selection, paint the mask with black or white. When satisfied, toggle the
    Quick Mask again, which has the following effects:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当快速蒙版处于激活状态时，它会在通道对话框中作为一个活动且可见的红色选区蒙版显示。[图14-15](ch14s01.html#part_of_a_quick_mask
    "图14-15. 快速蒙版的一部分")展示了我们在使用颜色选择工具并设置阈值为20.0后，选区的一部分。要编辑选区，可以用黑色或白色绘制蒙版。满意后，再次切换快速蒙版，效果如下：
- en: '![A part of a Quick Mask](httpatomoreillycomsourcenostarchimages1455968.png.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![快速蒙版的一部分](httpatomoreillycomsourcenostarchimages1455968.png.jpg)'
- en: Figure 14-15. A part of a Quick Mask
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-15. 快速蒙版的一部分
- en: '![The Quick Mask menu](httpatomoreillycomsourcenostarchimages1455970.png.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![快速蒙版菜单](httpatomoreillycomsourcenostarchimages1455970.png.jpg)'
- en: Figure 14-16. The Quick Mask menu
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-16. 快速蒙版菜单
- en: The mask is converted to a selection.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 蒙版被转换为选区。
- en: The selection mask is removed from the Channels dialog.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选区蒙版从通道对话框中移除。
- en: The current layer is reactivated.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当前图层被重新激活。
- en: This is a very simple and convenient way to make changes to a selection without
    formally creating a selection mask. Also note that using a Quick Mask doesn’t
    prevent saving the final selection to a channel.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种非常简单且便捷的方法，可以对选区进行更改，而无需正式创建选区蒙版。还要注意，使用快速蒙版并不会阻止将最终选区保存到通道中。
- en: Right-clicking the Quick Mask button brings up the menu shown in [Figure 14-16](ch14s01.html#quick_mask_menu
    "Figure 14-16. The Quick Mask menu"). This menu allows us to toggle the mask,
    change its color and opacity, and invert the coloration, as shown in [Figure 14-17](ch14s01.html#inverting_the_mask_coloration
    "Figure 14-17. Inverting the mask coloration"). The color inversion reveals that
    quite a bit of blue sky in the top-left portion of the photograph remains unselected.
    Painting in black still adds red pixels to the mask, but now the red pixels are
    selected. If you toggle Quick Mask off, you see the selection wasn’t inverted.
    The sky is still selected.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 右键点击快速蒙版按钮会弹出[图 14-16](ch14s01.html#quick_mask_menu "图 14-16. 快速蒙版菜单")中所示的菜单。这个菜单允许我们切换蒙版、改变其颜色和不透明度，并反转颜色，如[图
    14-17](ch14s01.html#inverting_the_mask_coloration "图 14-17. 反转蒙版颜色")所示。颜色反转显示出照片左上角有很多蓝天未被选中。用黑色画笔仍然会往蒙版中添加红色像素，但现在这些红色像素被选中了。如果你关闭快速蒙版，你会看到选择没有被反转，天空依然被选中。
- en: '![Inverting the mask coloration](httpatomoreillycomsourcenostarchimages1455972.png.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![反转蒙版的颜色](httpatomoreillycomsourcenostarchimages1455972.png.jpg)'
- en: Figure 14-17. Inverting the mask coloration
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-17. 反转蒙版的颜色
- en: '![The initial image](httpatomoreillycomsourcenostarchimages1455974.png.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![初始图像](httpatomoreillycomsourcenostarchimages1455974.png.jpg)'
- en: Figure 14-18. The initial image
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-18. 初始图像
- en: 14.2 Layer Masks
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 14.2 图层蒙版
- en: A layer mask is a grayscale image attached to a specific layer; it is the same
    size as that layer. The mask’s pixels set the transparency of the corresponding
    pixels in the layer. A white pixel in the mask specifies that the corresponding
    pixel in the image is completely opaque, and a black pixel specifies full transparency.
    A gray pixel specifies partial opacity. The pixel’s color components are unchanged,
    so a pixel can be strongly colored and completely transparent at the same time.
    This means that in a layer with a layer mask, every pixel requires 4 bytes.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图层蒙版是附加到特定图层的灰度图像；它与该图层的大小相同。蒙版的像素决定图层中对应像素的透明度。蒙版中的白色像素指定图像中对应像素完全不透明，黑色像素指定完全透明。灰色像素指定部分不透明。像素的颜色分量保持不变，因此一个像素可以同时是强烈着色和完全透明的。这意味着在带有图层蒙版的图层中，每个像素需要
    4 字节。
- en: '![The Mask menu](httpatomoreillycomsourcenostarchimages1455976.png.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![蒙版菜单](httpatomoreillycomsourcenostarchimages1455976.png.jpg)'
- en: Figure 14-19. The Mask menu
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-19. 蒙版菜单
- en: '![Adding a mask to the layer](httpatomoreillycomsourcenostarchimages1455978.png.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![向图层添加蒙版](httpatomoreillycomsourcenostarchimages1455978.png.jpg)'
- en: Figure 14-20. Adding a mask to the layer
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-20. 向图层添加蒙版
- en: Building a Layer Mask
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 构建图层蒙版
- en: 'Start with the image shown in [Figure 14-18](ch14s01.html#initial_image-id00113
    "Figure 14-18. The initial image"). Select **Image: Layer > Mask**, and the menu
    shown in [Figure 14-19](ch14s02.html#mask_menu "Figure 14-19. The Mask menu")
    appears. The same menu, minus the last three entries, can also be selected via
    **Layers: right-click**.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 从[图 14-18](ch14s01.html#initial_image-id00113 "图 14-18. 初始图像")所示的图像开始。选择**图像：图层
    > 蒙版**，会出现[图 14-19](ch14s02.html#mask_menu "图 14-19. 蒙版菜单")中所示的菜单。通过**图层：右键点击**也可以选择同样的菜单，除了最后三个选项。
- en: 'Select Add Layer Mask, and the dialog shown in [Figure 14-20](ch14s02.html#adding_a_mask_to_the_layer
    "Figure 14-20. Adding a mask to the layer") appears. Several options are available
    for the layer mask’s initial contents:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 选择“添加图层蒙版”，将出现[图 14-20](ch14s02.html#adding_a_mask_to_the_layer "图 14-20. 向图层添加蒙版")中所示的对话框。可以选择几种图层蒙版初始内容的选项：
- en: 'WHITE (FULL OPACITY): The mask appears as a white thumbnail in the Layers dialog
    just beside the layer thumbnail. Because all its pixels are white, the layer is
    completely opaque, and the image looks no different. Note that this does not prevent
    us from manipulating the OPACITY slider in the Layers dialog, which is independent
    of the mask. This slider operates in combination with the layer’s MODE to specify
    how its pixels are combined with the underlying layers. This opacity is a characteristic
    of the layer, not of the individual pixels.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 白色（完全不透明）：蒙版在图层对话框中以白色缩略图的形式显示，位于图层缩略图旁边。由于它的所有像素都是白色的，图层完全不透明，图像看起来没有变化。注意，这并不会阻止我们在图层对话框中操作不透明度滑块，滑块与蒙版无关。这个滑块与图层的模式一起工作，指定如何将其像素与底层图层的像素合并。此不透明度是图层的特性，而不是单独像素的特性。
- en: '![Two layers and a layer mask](httpatomoreillycomsourcenostarchimages1455980.png.jpg)'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![两个图层和一个图层蒙版](httpatomoreillycomsourcenostarchimages1455980.png.jpg)'
- en: Figure 14-21. Two layers and a layer mask
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-21. 两个图层和一个图层蒙版
- en: '![Painting in white on the layer mask](httpatomoreillycomsourcenostarchimages1455982.png.jpg)'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![在图层蒙版上绘制白色](httpatomoreillycomsourcenostarchimages1455982.png.jpg)'
- en: Figure 14-22. Painting in white on the layer mask
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-22. 在图层蒙版上绘制白色
- en: 'BLACK (FULL TRANSPARENCY): The mask appears as a black thumbnail, and the layer
    becomes fully transparent. Now wherever you paint on the mask with white, areas
    of the layer reappear. [Figure 14-21](ch14s02.html#two_layers_and_a_layer_mask
    "Figure 14-21. Two layers and a layer mask") shows the Layers dialog of an image
    we created to demonstrate this. We loaded a photograph, added a new white layer,
    moved it down in the layer stack, and added a black layer mask to the top layer.
    Then we painted in white on the mask with the Paintbrush tool, using the `Hardness
    075` brush in a large size. In the resulting image, shown in [Figure 14-22](ch14s02.html#painting_in_white_on_the_layer_mask
    "Figure 14-22. Painting in white on the layer mask"), the transparent areas of
    the top layer appear white because of the white background layer, whereas the
    areas where we painted on the layer mask are filled with the contents of the top
    layer.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑色（完全透明）：蒙版显示为黑色缩略图，图层变为完全透明。现在无论你在蒙版上用白色绘画，图层的区域都会重新出现。[图 14-21](ch14s02.html#two_layers_and_a_layer_mask
    "图 14-21. 两个图层和一个图层蒙版")展示了我们为演示这一点而创建的图像的图层对话框。我们加载了一张照片，添加了一个新的白色图层，将其移到图层堆栈的下方，并给顶部图层添加了一个黑色图层蒙版。然后，我们使用画笔工具，在蒙版上用`Hardness
    075`的刷子大尺寸涂抹了白色。在结果图像中，如[图 14-22](ch14s02.html#painting_in_white_on_the_layer_mask
    "图 14-22. 在图层蒙版上绘制白色")所示，顶部图层的透明区域由于白色背景层的存在显示为白色，而我们在图层蒙版上绘制的区域则填充了顶部图层的内容。
- en: 'LAYER’S ALPHA CHANNEL: If the layer already has an Alpha channel, its contents
    are copied to the layer mask. Note that the Alpha channel remains intact.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图层的 Alpha 通道：如果图层已经具有 Alpha 通道，它的内容将被复制到图层蒙版中。注意，Alpha 通道保持不变。
- en: 'TRANSFER LAYER’S ALPHA CHANNEL: This does the same thing as the previous entry,
    but the Alpha channel is reset to full opacity.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转移图层的 Alpha 通道：这与前一项相同，但 Alpha 通道被重置为完全不透明。
- en: 'SELECTION: As stated previously, a selection is a grayscale image. This image
    is copied to the layer mask. The selected pixels are opaque; the unselected pixels
    are transparent.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择：如前所述，选择是一个灰度图像。该图像被复制到图层蒙版中。被选中的像素是不透明的；未被选中的像素是透明的。
- en: 'GRAYSCALE COPY OF LAYER: The current contents of the layer are converted to
    a grayscale image and used for initializing the layer mask. Most of the pixels
    in the image are partially selected, and the level of selection is proportional
    to the pixel’s value. White pixels are fully selected, and darker pixels are selected
    to a lesser degree.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图层的灰度副本：将图层的当前内容转换为灰度图像，并用它来初始化图层蒙版。图像中的大多数像素被部分选中，选中的程度与像素的值成比例。白色像素完全选中，而较暗的像素选中的程度较低。
- en: 'CHANNEL: If at least one channel exists, use it to initialize the layer mask.
    Select a channel from the menu that appears.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通道：如果至少存在一个通道，则使用它来初始化图层蒙版。从出现的菜单中选择一个通道。
- en: INVERT MASK inverts the mask. The transparent parts become opaque, and vice
    versa.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 反转蒙版：反转蒙版。透明部分变为不透明，反之亦然。
- en: Manipulating a Layer Mask
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作图层蒙版
- en: When the layer mask is created, the Layers dialog changes, as shown in [Figure 14-23](ch14s02.html#layer_mask_has_been_addeddot
    "Figure 14-23. A layer mask has been added."). A thumbnail of the mask appears
    to the right of the layer thumbnail. It’s enclosed in a white frame to show that
    it’s active, whereas the layer thumbnail is enclosed in a black frame.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当创建图层蒙版时，图层对话框会发生变化，如[图 14-23](ch14s02.html#layer_mask_has_been_addeddot "图
    14-23. 已添加图层蒙版")所示。蒙版的缩略图出现在图层缩略图的右侧，并被一个白色框框住，表示它处于活动状态，而图层缩略图则被黑色框住。
- en: Here, choose a grayscale copy of the layer as a mask and invert it. The result,
    shown in [Figure 14-24](ch14s02.html#result_of_using_the_layer_mask "Figure 14-24. The
    result of using the layer mask"), is that the parts of the image that were very
    dark are now much more visible because they are highly selected and thus opaque.
    But the sea landscape is now pale and dull because the layer’s light pixels are
    now almost transparent and reveal the white layer underneath.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在此，选择图层的灰度副本作为蒙版并进行反转。结果如[图 14-24](ch14s02.html#result_of_using_the_layer_mask
    "图 14-24. 使用图层蒙版的结果")所示，图像中非常暗的部分现在变得更加可见，因为它们被高度选中，因此变得不透明。但海景部分现在变得苍白和沉闷，因为图层的亮像素几乎是透明的，显示了下面的白色图层。
- en: '![A layer mask has been added.](httpatomoreillycomsourcenostarchimages1455984.png.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![已添加图层蒙版。](httpatomoreillycomsourcenostarchimages1455984.png.jpg)'
- en: Figure 14-23. A layer mask has been added.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-23. 已添加图层蒙版。
- en: '![The result of using the layer mask](httpatomoreillycomsourcenostarchimages1455986.png.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![使用图层蒙版后的效果](httpatomoreillycomsourcenostarchimages1455986.png.jpg)'
- en: Figure 14-24. The result of using the layer mask
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-24. 使用图层蒙版后的效果
- en: '![Activating the layer itself](httpatomoreillycomsourcenostarchimages1455988.png.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![激活图层本身](httpatomoreillycomsourcenostarchimages1455988.png.jpg)'
- en: Figure 14-25. Activating the layer itself
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-25. 激活图层本身
- en: When the layer mask is active, all tools operate only on it, not on the layer
    itself. To toggle between the mask and the layer, click the corresponding thumbnail
    in the Layers dialog. The white frame always shows whether the layer or the mask
    is active. In [Figure 14-25](ch14s02.html#activating_the_layer_itself "Figure 14-25. Activating
    the layer itself"), the layer is active.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 当图层蒙版处于激活状态时，所有工具只会对它进行操作，而不会作用于图层本身。要在蒙版和图层之间切换，请单击图层对话框中的相应缩略图。白色框架始终显示当前激活的是图层还是蒙版。如[图
    14-25](ch14s02.html#activating_the_layer_itself "图 14-25. 激活图层本身")所示，此时图层处于激活状态。
- en: '![An inactive layer mask](httpatomoreillycomsourcenostarchimages1455990.png.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![非活动的图层蒙版](httpatomoreillycomsourcenostarchimages1455990.png.jpg)'
- en: Figure 14-26. An inactive layer mask
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-26. 非活动的图层蒙版
- en: '![The Layers dialog when only the layer mask is visible](httpatomoreillycomsourcenostarchimages1455992.png.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![仅显示图层蒙版时的图层对话框](httpatomoreillycomsourcenostarchimages1455992.png.jpg)'
- en: Figure 14-27. The Layers dialog when only the layer mask is visible
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-27. 仅显示图层蒙版时的图层对话框
- en: '![The Image window when only the layer mask is visible](httpatomoreillycomsourcenostarchimages1455994.png.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![仅显示图层蒙版时的图像窗口](httpatomoreillycomsourcenostarchimages1455994.png.jpg)'
- en: Figure 14-28. The Image window when only the layer mask is visible
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-28. 仅显示图层蒙版时的图像窗口
- en: To hide the effect of the layer mask without deleting it, ![](httpatomoreillycomsourcenostarchimages1453844.png.jpg)-click
    the mask thumbnail. Its frame is now red, as shown in [Figure 14-26](ch14s02.html#inactive_layer_mask
    "Figure 14-26. An inactive layer mask"), and the mask effect is temporarily canceled.
    If you ![](httpatomoreillycomsourcenostarchimages1453844.png.jpg)-click again,
    the mask is activated.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 要隐藏图层蒙版的效果而不删除它，![](httpatomoreillycomsourcenostarchimages1453844.png.jpg)单击蒙版缩略图。此时，框架变为红色，如[图
    14-26](ch14s02.html#inactive_layer_mask "图 14-26. 非活动的图层蒙版")所示，蒙版效果被暂时取消。如果再次![](httpatomoreillycomsourcenostarchimages1453844.png.jpg)单击，蒙版将被激活。
- en: To see the mask itself, ![](httpatomoreillycomsourcenostarchimages1454752.png.jpg)-click
    the mask thumbnail. Its frame is now green, as shown in [Figure 14-27](ch14s02.html#layers_dialog_when_only_the_layer_mask_i
    "Figure 14-27. The Layers dialog when only the layer mask is visible"), and the
    Image window displays the mask as a grayscale image, as shown in [Figure 14-28](ch14s02.html#image_window_when_only_the_layer_mask_is
    "Figure 14-28. The Image window when only the layer mask is visible"). Notice
    the green dotted line framing the image; this tells you a layer mask is active.
    If you ![](httpatomoreillycomsourcenostarchimages1454752.png.jpg)-click again,
    the layer reappears.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看蒙版本身，![](httpatomoreillycomsourcenostarchimages1454752.png.jpg)单击蒙版缩略图。此时，框架变为绿色，如[图
    14-27](ch14s02.html#layers_dialog_when_only_the_layer_mask_i "图 14-27. 仅显示图层蒙版时的图层对话框")所示，图像窗口将以灰度图像显示蒙版，如[图
    14-28](ch14s02.html#image_window_when_only_the_layer_mask_is "图 14-28. 仅显示图层蒙版时的图像窗口")所示。请注意绿色虚线框住了图像，这表明图层蒙版处于激活状态。如果再次![](httpatomoreillycomsourcenostarchimages1454752.png.jpg)单击，图层将重新显示。
- en: '![The Mask menu after the layer mask is created](httpatomoreillycomsourcenostarchimages1455996.png.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![创建图层蒙版后的蒙版菜单](httpatomoreillycomsourcenostarchimages1455996.png.jpg)'
- en: Figure 14-29. The Mask menu after the layer mask is created
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-29. 创建图层蒙版后的蒙版菜单
- en: 'You can also create, edit, or activate a layer mask via the **Image: Layer
    > Mask** menu, as shown in [Figure 14-29](ch14s02.html#mask_menu_after_the_layer_mask_is_create
    "Figure 14-29. The Mask menu after the layer mask is created"). The checkboxes
    give you simple tools to display and manipulate a layer mask, and the remaining
    entries in this menu (and in the **Layers: right-click** menu) relate to the ways
    you can use a layer mask:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以通过**图像：图层 > 蒙版**菜单创建、编辑或激活图层蒙版，如[图 14-29](ch14s02.html#mask_menu_after_the_layer_mask_is_create
    "图 14-29. 创建图层蒙版后的蒙版菜单")所示。复选框提供了简单的工具来显示和操作图层蒙版，菜单中其余的条目（以及**图层：右键单击**菜单）涉及到使用图层蒙版的方式：
- en: 'APPLY LAYER MASK: Save the effect of the layer mask in the layer’s Alpha channel,
    and delete the layer mask. This change should be the last one you make to a layer.
    Prior to applying the mask, the layer itself is unchanged—regardless of what you
    do to the layer mask.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'APPLY LAYER MASK: 将图层蒙版的效果保存到图层的 Alpha 通道，并删除图层蒙版。此更改应为您对图层所做的最后一次修改。在应用蒙版之前，图层本身不会发生变化——无论您对蒙版做什么操作。'
- en: 'DELETE LAYER MASK: Discard the layer mask; this has no effect on the layer
    itself.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'DELETE LAYER MASK: 丢弃图层蒙版；这不会影响图层本身。'
- en: 'MASK TO SELECTION: Convert the layer mask to the current selection. Where the
    mask’s pixels are white, the associated layer’s pixels are selected; where they
    are black, the layer’s pixels are deselected. But mask pixels with intermediate
    values lead to partially selected pixels in the associated layer. A selection
    is thus initiated, but the layer and the mask remain unchanged.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'MASK TO SELECTION: 将图层蒙版转换为当前选择区域。蒙版中像素为白色时，相关图层的像素被选中；为黑色时，图层的像素被取消选择。但蒙版中有中间值的像素会导致相关图层中的部分像素被选择。因此，选择区域被初始化，但图层和蒙版本身保持不变。'
- en: 'ADD TO SELECTION, SUBTRACT FROM SELECTION, and INTERSECT WITH SELECTION also
    convert the mask to a selection. Whereas Mask to Selection replaces the current
    selection, these three entries allow you to combine the new selection with the
    previous selection in various ways. These entries do not appear on the **Layers:
    right-click** menu.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'ADD TO SELECTION, SUBTRACT FROM SELECTION, 和 INTERSECT WITH SELECTION 也会将蒙版转换为选择区域。与“蒙版转换为选择”不同，这三项操作允许您以不同的方式将新选择与之前的选择组合。这些选项不会出现在**图层:
    右键点击**菜单中。'
- en: '![The final image](httpatomoreillycomsourcenostarchimages1455998.png.jpg)'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![最终图像](httpatomoreillycomsourcenostarchimages1455998.png.jpg)'
- en: Figure 14-30. The final image
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-30. 最终图像
- en: Using a Layer Mask
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用图层蒙版
- en: 'The following example uses two layers with layer masks and two ordinary layers
    to create the composite image shown in [Figure 14-30](ch14s02.html#final_image-id00114
    "Figure 14-30. The final image"). Take the following steps to transform the image:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例使用两个带有图层蒙版的图层和两个普通图层来创建[图 14-30](ch14s02.html#final_image-id00114 "图 14-30.
    最终图像")中显示的合成图像。请按以下步骤操作以转换图像：
- en: Open the photograph shown in [Figure 14-18](ch14s01.html#initial_image-id00113
    "Figure 14-18. The initial image"), and choose the Select by Color tool. Click
    the sky and then the sea and foam while pressing the ![](httpatomoreillycomsourcenostarchimages1453922.png.jpg)
    key to select all of the landscape behind the window—except the rocks in the lower
    right. To select them as well, use Quick Mask, and this time use the Pencil tool
    to paint the rocks white. The Pencil tool works like the Paintbrush but without
    feathering or antialiasing.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开[图 14-18](ch14s01.html#initial_image-id00113 "图 14-18. 初始图像")中显示的照片，选择“按颜色选择”工具。点击天空，然后按住
    ![](httpatomoreillycomsourcenostarchimages1453922.png.jpg) 键点击海洋和泡沫，选择窗户后面的所有景物——除了右下角的岩石。要选择这些岩石，请使用快速蒙版，这次用铅笔工具将岩石涂成白色。铅笔工具的作用类似于画笔工具，但没有羽化或抗锯齿效果。
- en: When the selection is complete, add a layer mask to the background layer and
    initialize it with the inverted selection. Now the full window opening is transparent
    ([Figure 14-31](ch14s02.html#making_the_opening_transparent "Figure 14-31. Making
    the opening transparent")).
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成选择后，将图层蒙版添加到背景图层，并使用反向选择进行初始化。现在，整个窗口开口变为透明（见[图 14-31](ch14s02.html#making_the_opening_transparent
    "图 14-31. 使开口透明")）。
- en: '![Making the opening transparent](httpatomoreillycomsourcenostarchimages1456000.png.jpg)'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使开口透明](httpatomoreillycomsourcenostarchimages1456000.png.jpg)'
- en: Figure 14-31. Making the opening transparent
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-31. 使开口透明
- en: '![A portrait to add to the image](httpatomoreillycomsourcenostarchimages1456002.png.jpg)'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![添加到图像中的肖像](httpatomoreillycomsourcenostarchimages1456002.png.jpg)'
- en: Figure 14-32. A portrait to add to the image
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-32. 添加到图像中的肖像
- en: 'Add a new layer to the image using the photograph shown in [Figure 14-32](ch14s02.html#portrait_to_add_to_the_image
    "Figure 14-32. A portrait to add to the image"). Because this image is much larger
    than the previous one, scale this new layer to the canvas size with **Image: Layer
    > Scale Layer**.'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '使用[图 14-32](ch14s02.html#portrait_to_add_to_the_image "图 14-32. 添加到图像中的肖像")中显示的照片为图像添加一个新图层。由于该图像比之前的图像大得多，因此使用**图像:
    图层 > 缩放图层**将此新图层缩放到画布大小。'
- en: Using the Fuzzy Select tool, click several times while pressing ![](httpatomoreillycomsourcenostarchimages1453922.png.jpg)
    to select the portrait’s background. Then add a layer mask to this layer, and
    initialize it with the selection (not inverted). The result is shown in [Figure 14-33](ch14s02.html#removing_the_background
    "Figure 14-33. Removing the background").
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用模糊选择工具，按住 ![](httpatomoreillycomsourcenostarchimages1453922.png.jpg) 多次点击以选择肖像的背景。然后为此图层添加图层蒙版，并用选择内容初始化它（不反转）。结果如[图
    14-33](ch14s02.html#removing_the_background "图 14-33. 移除背景")所示。
- en: '![Removing the background](httpatomoreillycomsourcenostarchimages1456004.png.jpg)'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![移除背景](httpatomoreillycomsourcenostarchimages1456004.png.jpg)'
- en: Figure 14-33. Removing the background
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-33. 移除背景
- en: '![The Layers dialog when the image is finished](httpatomoreillycomsourcenostarchimages1456006.png.jpg)'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图像完成后的图层对话框](httpatomoreillycomsourcenostarchimages1456006.png.jpg)'
- en: Figure 14-34. The Layers dialog when the image is finished
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14-34. 图像完成后的图层对话框
- en: Duplicate the layer containing the window, and delete its layer mask. You can
    see the scenery behind the subject has been retained. Reorder the layers as shown
    in [Figure 14-34](ch14s02.html#layers_dialog_when_the_image_is_finished "Figure 14-34. The
    Layers dialog when the image is finished"), and discard the white background layer.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制包含窗口的图层，并删除其图层蒙版。你可以看到主题背后的景物被保留下来。按照[图 14-34](ch14s02.html#layers_dialog_when_the_image_is_finished
    "图 14-34. 图像完成后的图层对话框")中所示重新排序图层，并丢弃白色背景图层。
- en: '![The initial photograph](httpatomoreillycomsourcenostarchimages1456008.png.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![初始照片](httpatomoreillycomsourcenostarchimages1456008.png.jpg)'
- en: Figure 14-35. The initial photograph
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-35. 初始照片
- en: '![The new channel](httpatomoreillycomsourcenostarchimages1456010.png.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![新通道](httpatomoreillycomsourcenostarchimages1456010.png.jpg)'
- en: Figure 14-36. The new channel
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-36. 新通道
- en: 14.3 Using Masks and Channels
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 14.3 使用蒙版和通道
- en: In this section, we show you two specific uses for masks and channels that cannot
    be accomplished by other means.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们展示了蒙版和通道的两种特定用法，是其他方法无法实现的。
- en: Building a Natural Mask
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 构建自然蒙版
- en: The *natural mask* of an image is a quick way to generate a mask that selects
    the subject of an image. This particular mask is not always accurate, but, in
    many cases, it yields good results. This concept is the brainchild of Carey Bunks,
    author of an excellent, early book about GIMP, *Grokking the GIMP* (New Riders,
    2000).
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图像的*自然蒙版*是一种快速生成选择图像主题的蒙版的方法。这个特殊的蒙版并不总是准确，但在许多情况下，它会产生良好的结果。这个概念是**Carey Bunks**的创意，他是一本早期关于GIMP的优秀书籍《Grokking
    the GIMP》（New Riders, 2000）的作者。
- en: '![The Channels dialog](httpatomoreillycomsourcenostarchimages1456012.png.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![通道对话框](httpatomoreillycomsourcenostarchimages1456012.png.jpg)'
- en: Figure 14-37. The Channels dialog
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-37. 通道对话框
- en: '![The Threshold tool dialog](httpatomoreillycomsourcenostarchimages1456014.png.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![阈值工具对话框](httpatomoreillycomsourcenostarchimages1456014.png.jpg)'
- en: Figure 14-38. The Threshold tool dialog
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-38. 阈值工具对话框
- en: Start with the photograph shown in [Figure 14-35](ch14s02.html#initial_photograph-id00115
    "Figure 14-35. The initial photograph"). You want to select only the girl. First,
    select the whole image (![](httpatomoreillycomsourcenostarchimages1454180.png.jpg))
    and copy it (![](httpatomoreillycomsourcenostarchimages1454144.png.jpg)). Then
    go to the Channels dialog and create a new channel by clicking the proper button
    (the second icon from the left at the bottom of the Channels dialog).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 从[图 14-35](ch14s02.html#initial_photograph-id00115 "图 14-35. 初始照片")所示的照片开始。你想要仅选择女孩。首先，选择整张图像
    (![](httpatomoreillycomsourcenostarchimages1454180.png.jpg)) 并复制它 (![](httpatomoreillycomsourcenostarchimages1454144.png.jpg))。然后转到通道对话框，点击适当的按钮（通道对话框底部从左数第二个图标）创建一个新通道。
- en: Paste the copied data (![](httpatomoreillycomsourcenostarchimages1454184.png.jpg)),
    and anchor the floating layer to the new channel (![](httpatomoreillycomsourcenostarchimages1454186.png.jpg)).
    If you leave the visibility on in the new channel and turn it off in the layer,
    you see a grayscale image of the photograph, as shown in [Figure 14-36](ch14s02.html#new_channel
    "Figure 14-36. The new channel"). The Channels dialog for this image is shown
    in [Figure 14-37](ch14s03.html#channels_dialog-id00116 "Figure 14-37. The Channels
    dialog").
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 粘贴复制的数据 (![](httpatomoreillycomsourcenostarchimages1454184.png.jpg))，并将浮动图层锚定到新的通道中
    (![](httpatomoreillycomsourcenostarchimages1454186.png.jpg))。如果你在新通道中开启可见性并关闭图层中的可见性，你将看到图像的灰度版本，如[图
    14-36](ch14s02.html#new_channel "图 14-36. 新通道")所示。此图像的通道对话框如[图 14-37](ch14s03.html#channels_dialog-id00116
    "图 14-37. 通道对话框")所示。
- en: 'The values of the pixels in this image are used to build the selection. To
    do this, choose the **Image: Colors > Threshold** tool. The dialog shown in [Figure 14-38](ch14s03.html#threshold_tool_dialog
    "Figure 14-38. The Threshold tool dialog") appears, and the image changes to black
    and white. The positions of the small triangles in the Threshold dialog determine
    which pixels are white and which are black.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 该图像中的像素值用于构建选择区域。为此，选择**图像：颜色 > 阈值**工具。将显示[图14-38](ch14s03.html#threshold_tool_dialog
    "图14-38. 阈值工具对话框")所示的对话框，图像将变为黑白。阈值对话框中小三角形的位置决定了哪些像素为白色，哪些为黑色。
- en: '![The selection mask transformed by the Threshold tool](httpatomoreillycomsourcenostarchimages1456016.png.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![阈值工具转换后的选择蒙版](httpatomoreillycomsourcenostarchimages1456016.png.jpg)'
- en: Figure 14-39. The selection mask transformed by the Threshold tool
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-39. 阈值工具转换后的选择蒙版
- en: '![Making the mask more visible](httpatomoreillycomsourcenostarchimages1456018.png.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![使蒙版更可见](httpatomoreillycomsourcenostarchimages1456018.png.jpg)'
- en: Figure 14-40. Making the mask more visible
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-40. 使蒙版更可见
- en: Adjust the triangles as shown in [Figure 14-38](ch14s03.html#threshold_tool_dialog
    "Figure 14-38. The Threshold tool dialog"), and you get the image shown in [Figure 14-39](ch14s03.html#selection_mask_transformed_by_the_thresh
    "Figure 14-39. The selection mask transformed by the Threshold tool"). This mask
    selects only the lightest parts of the image.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 调整三角形，如[图14-38](ch14s03.html#threshold_tool_dialog "图14-38. 阈值工具对话框")所示，得到[图14-39](ch14s03.html#selection_mask_transformed_by_the_thresh
    "图14-39. 阈值工具转换后的选择蒙版")所示的图像。该蒙版仅选择图像中最亮的部分。
- en: To see what the mask actually selected, click the eye icon for the image layer,
    but be careful not to activate the layer. As you can see, the mask is black and
    doesn’t contrast well with the image. Change its color using the Edit channel
    button, and choose yellow and 50% opacity. The result is shown in [Figure 14-40](ch14s03.html#making_the_mask_more_visible
    "Figure 14-40. Making the mask more visible").
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 若要查看蒙版实际选择的内容，点击图像图层的眼睛图标，但小心不要激活图层。如图所示，蒙版是黑色的，且与图像对比不明显。使用编辑通道按钮更改其颜色，选择黄色并设置50%的不透明度。结果如[图14-40](ch14s03.html#making_the_mask_more_visible
    "图14-40. 使蒙版更可见")所示。
- en: '![Improving the mask](httpatomoreillycomsourcenostarchimages1456020.png.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![改善蒙版](httpatomoreillycomsourcenostarchimages1456020.png.jpg)'
- en: Figure 14-41. Improving the mask
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-41. 改善蒙版
- en: Touch up the mask under the chin, in the corners of the mouth, on the nostrils,
    and on the eyes. You can do this easily by painting directly on the mask. Choose
    the Paintbrush tool and a large brush, and paint the selected facial features
    with white. [Figure 14-41](ch14s03.html#improving_the_mask "Figure 14-41. Improving
    the mask") shows the improved mask. Then convert the mask to a selection, and
    remove the mask’s visibility. The result is the selection shown in [Figure 14-42](ch14s03.html#resulting_selection-id00117
    "Figure 14-42. The resulting selection").
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在下巴、嘴角、鼻孔和眼睛处修整蒙版。你可以通过直接在蒙版上涂抹来轻松完成此操作。选择画笔工具并使用大号画笔，涂抹选中的面部特征为白色。[图14-41](ch14s03.html#improving_the_mask
    "图14-41. 改善蒙版")展示了改进后的蒙版。然后将蒙版转换为选择区域，并移除蒙版的可见性。结果是[图14-42](ch14s03.html#resulting_selection-id00117
    "图14-42. 结果选择")所示的选择区域。
- en: Transparency and the Alpha Channel
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 透明度与Alpha通道
- en: The Alpha channel is necessary when an image contains transparency. When an
    image has more than one layer, it always has a global Alpha channel. Individual
    layers may or may not have Alpha channels, but when they don’t, you can see the
    pixels in the underlying layers unless you use certain blend modes or set the
    layer opacity to a value less than 100%. But if a given layer does not have an
    Alpha channel, its name appears in boldface in the Layers dialog.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 当图像包含透明度时，需要使用Alpha通道。当图像包含多个图层时，它总是有一个全局Alpha通道。单个图层可能有或没有Alpha通道，但如果没有Alpha通道，你可以看到底层图层的像素，除非使用某些混合模式或将图层不透明度设置为小于100%的值。但是，如果某个图层没有Alpha通道，它的名称将在图层对话框中以粗体显示。
- en: A single layer image can also use transparency. Images displayed on a website,
    for example, often have transparent backgrounds, which allow them to blend naturally
    with other design elements on the page.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 单层图像也可以使用透明度。例如，显示在网站上的图像通常具有透明背景，这样可以与页面上的其他设计元素自然融合。
- en: '![The resulting selection](httpatomoreillycomsourcenostarchimages1456022.png.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![结果选择](httpatomoreillycomsourcenostarchimages1456022.png.jpg)'
- en: Figure 14-42. The resulting selection
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图14-42. 结果选择
- en: '![The Transparency menu without an Alpha channel](httpatomoreillycomsourcenostarchimages1456024.png.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
- en: Figure 14-43. The Transparency menu without an Alpha channel
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 14-43](ch14s03.html#transparency_menu_without_an_alpha_chann "Figure 14-43. The
    Transparency menu without an Alpha channel") shows the **Image: Layer > Transparency**
    menu when the corresponding layer has no Alpha channel, and [Figure 14-44](ch14s03.html#transparency_menu_with_an_alpha_channel
    "Figure 14-44. The Transparency menu with an Alpha channel") shows the same menu
    when there is an Alpha channel. A few of these entries also appear in the **Layers:
    right-click** menu.'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: Let’s discuss what these menu entries do.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: The first two entries, ADD ALPHA CHANNEL and REMOVE ALPHA CHANNEL, add and remove
    Alpha channels, respectively.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: 'COLOR TO ALPHA also appears in the **Image: Colors** menu. Select it to make
    the dialog shown in [Figure 14-45](ch14s03.html#color_to_alpha_dialog-id00118
    "Figure 14-45. The Color to Alpha dialog") appear. Check PREVIEW, and select the
    color that will be made transparent. Initially this color is white, as the figure
    shows.'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: '![The Transparency menu with an Alpha channel](httpatomoreillycomsourcenostarchimages1456026.png.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
- en: Figure 14-44. The Transparency menu with an Alpha channel
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: '![The Color to Alpha dialog](httpatomoreillycomsourcenostarchimages1456028.png.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
- en: Figure 14-45. The Color to Alpha dialog
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
- en: 'Clicking the FROM: button brings up a simplified version of the Color chooser,
    shown in [Figure 14-46](ch14s03.html#color_to_alpha_color_chooser "Figure 14-46. The
    Color to Alpha Color chooser"). If you click the small button to the right of
    the HTML NOTATION field, you can choose the exact color from the image that you
    want to make transparent and see the resulting effect in the Preview window.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 14-47](ch14s03.html#initial_image-id00119 "Figure 14-47. The initial
    image") shows a photographic portrait. To get the image shown in [Figure 14-49](ch14s03.html#making_the_skin_tone_transparent
    "Figure 14-49. Making the skin tone transparent"), choose **Image: Layer > Transparency
    > Color to Alpha** and select a flesh-tone pixel near the woman’s necklace. Because
    all similar pixels become transparent, add a white layer under the image layer.
    Note that because the chosen color appears in the woman’s hair, parts of her hair
    will also be altered. You could avoid this if you first selected the face and
    then used Color to Alpha.'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: '![The Color to Alpha Color chooser](httpatomoreillycomsourcenostarchimages1456030.png.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
- en: Figure 14-46. The Color to Alpha Color chooser
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: '![The initial image](httpatomoreillycomsourcenostarchimages1456032.png.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
- en: Figure 14-47. The initial image
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
- en: If you paint the underlying layer in the color you made transparent, the image
    looks exactly like the original portrait. This makes changing a specific color
    in the active layer easy. For example, [Figure 14-48](ch14s03.html#altering_the_skin_color
    "Figure 14-48. Altering the skin color") shows the result when we slightly alter
    the underlying layer color by decreasing the hue and increasing the value in the
    HSV color model.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在将透明化的颜色上涂抹底层，图像看起来与原始肖像完全相同。这使得在活动图层中改变特定颜色变得非常简单。例如，[图 14-48](ch14s03.html#altering_the_skin_color
    "图 14-48. 更改肤色")展示了当我们通过降低色相并在 HSV 色彩模型中增加亮度时，轻微更改底层颜色后的结果。
- en: 'SEMI-FLATTEN is also found in the **Image: Filters > Web** menu. We discuss
    it in depth in [Chapter 17](ch17.html "Chapter 17. Filters"), but in brief, it
    replaces partial transparency with the current background color. If you apply
    it to the image layer shown in [Figure 14-49](ch14s03.html#making_the_skin_tone_transparent
    "Figure 14-49. Making the skin tone transparent") and choose the skin tone as
    the background color, you get the result shown in [Figure 14-48](ch14s03.html#altering_the_skin_color
    "Figure 14-48. Altering the skin color").'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 'SEMI-FLATTEN 也可以在 **图像: 滤镜 > Web** 菜单中找到。我们在[第 17 章](ch17.html "第 17 章. 滤镜")中深入讨论了它，但简而言之，它将部分透明度替换为当前背景颜色。如果你将其应用到
    [图 14-49](ch14s03.html#making_the_skin_tone_transparent "图 14-49. 使肤色透明") 中显示的图像层，并选择肤色作为背景颜色，你将得到
    [图 14-48](ch14s03.html#altering_the_skin_color "图 14-48. 更改肤色") 中显示的结果。'
- en: '![Altering the skin color](httpatomoreillycomsourcenostarchimages1456034.png.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![更改肤色](httpatomoreillycomsourcenostarchimages1456034.png.jpg)'
- en: Figure 14-48. Altering the skin color
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-48. 更改肤色
- en: '![Making the skin tone transparent](httpatomoreillycomsourcenostarchimages1456036.png.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![使肤色透明](httpatomoreillycomsourcenostarchimages1456036.png.jpg)'
- en: Figure 14-49. Making the skin tone transparent
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-49. 使肤色透明
- en: THRESHOLD ALPHA applies a threshold filter to the Alpha channel. Clicking this
    entry brings up the dialog shown in [Figure 14-50](ch14s03.html#threshold_alpha_dialog
    "Figure 14-50. The Threshold Alpha dialog"). If you choose the value shown for
    the threshold, apply it, and add another layer filled with the initial skin color
    under the original layer, you get the result shown in [Figure 14-51](ch14s03.html#after_thresholding_the_alpha_channel
    "Figure 14-51. After thresholding the Alpha channel").
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 阈值 Alpha 应用一个阈值滤镜到 Alpha 通道。点击此选项会弹出在 [图 14-50](ch14s03.html#threshold_alpha_dialog
    "图 14-50. 阈值 Alpha 对话框") 中显示的对话框。如果你选择显示的阈值并应用它，再在原始图层下方添加另一个填充初始肤色的图层，你将得到 [图
    14-51](ch14s03.html#after_thresholding_the_alpha_channel "图 14-51. 阈值化 Alpha 通道")
    中显示的结果。
- en: '![The Threshold Alpha dialog](httpatomoreillycomsourcenostarchimages1456038.png.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![阈值 Alpha 对话框](httpatomoreillycomsourcenostarchimages1456038.png.jpg)'
- en: Figure 14-50. The Threshold Alpha dialog
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-50. 阈值 Alpha 对话框
- en: '![After thresholding the Alpha channel](httpatomoreillycomsourcenostarchimages1456040.png.jpg)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![阈值化 Alpha 通道后](httpatomoreillycomsourcenostarchimages1456040.png.jpg)'
- en: Figure 14-51. After thresholding the Alpha channel
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14-51. 阈值化 Alpha 通道后
- en: ALPHA TO SELECTION transforms the Alpha channel of the layer into a selection.
    Because both are represented as grayscale images, this transformation is very
    simple, and the new selection replaces any existing one.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha 到选区将图层的 Alpha 通道转化为选区。由于两者都以灰度图像表示，这个转换非常简单，新的选区会替代任何已有的选区。
- en: The final three entries in the Transparency menu allow you to choose a different
    selection mode when creating a selection from the Alpha channel. You can then
    transform the selection into a channel, but you can’t transform an Alpha channel
    into a channel directly.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 透明度菜单中的最后三个选项允许你在从 Alpha 通道创建选区时选择不同的选区模式。然后，你可以将选区转换为通道，但不能直接将 Alpha 通道转换为通道。
- en: Converting Masks, Selections, and Channels
  id: totrans-198
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 转换遮罩、选区和通道
- en: As you’ve seen, selections, channels, masks, and layer transparencies are strongly
    related. Let’s review how to convert back and forth among these.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，选区、通道、遮罩和图层透明度密切相关。让我们回顾一下如何在这些之间相互转换。
- en: To convert a selection to
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 要将选区转换为
- en: 'a selection mask (channel): **Image: Select > Save to Channel**.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '选区遮罩（通道）：**图像: 选择 > 保存到通道**。'
- en: 'a layer mask: **Layers: right-click > Add Layer Mask** and choose SELECTION.'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '图层遮罩：**图层: 右键 > 添加图层遮罩**，然后选择 选区。'
- en: an ![](httpatomoreillycomsourcenostarchimages1454122.png.jpg). As a side effect,
    the contents of the selection are placed on the clipboard.
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 ![](httpatomoreillycomsourcenostarchimages1454122.png.jpg)。作为副作用，选区的内容会被放置到剪贴板中。
- en: To convert a selection mask to
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 将选择蒙版转换为
- en: 'a selection: **Channels: right-click > Channel to Selection**.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择：**通道：右键点击 > 通道到选择**。
- en: 'a layer mask: **Layers: right-click > Add Layer Mask** and choose CHANNEL.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图层蒙版：**图层：右键点击 > 添加图层蒙版**，然后选择 CHANNEL。
- en: 'an Alpha channel: **Channels: right-click > Channel to Selection** and then
    press ![](httpatomoreillycomsourcenostarchimages1454122.png.jpg). As a side effect,
    the contents of the selection are placed on the clipboard.'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alpha 通道：**通道：右键点击 > 通道到选择**，然后按 ![](httpatomoreillycomsourcenostarchimages1454122.png.jpg)。作为副作用，选择的内容会被放入剪贴板。
- en: To convert a layer mask to
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 将图层蒙版转换为
- en: 'a selection: **Layers: right-click > Mask to Selection**.'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择：**图层：右键点击 > 蒙版到选择**。
- en: 'a selection mask: **Layers: right-click > Mask to Selection** and then **Image:
    Select > Save to Channel**.'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择蒙版：**图层：右键点击 > 蒙版到选择**，然后 **图像：选择 > 保存到通道**。
- en: 'an Alpha channel: **Layers: right-click > Apply Layer Mask**.'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alpha 通道：**图层：右键点击 > 应用图层蒙版**。
- en: To convert an Alpha channel to
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 将 Alpha 通道转换为
- en: 'a selection: **Layers: right-click > Alpha to Selection**.'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择：**图层：右键点击 > Alpha 到选择**。
- en: 'a selection mask: **Layers: right-click > Alpha to Selection** and then **Image:
    Select > Save to Channel**.'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择蒙版：**图层：右键点击 > Alpha 到选择**，然后 **图像：选择 > 保存到通道**。
- en: 'a layer mask: **Layers: right-click > Add Layer Mask** and choose LAYER’S ALPHA
    CHANNEL.'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图层蒙版：**图层：右键点击 > 添加图层蒙版**，然后选择图层的 Alpha 通道。
