<html xmlns="http://www.w3.org/1999/xhtml" xmlns:dk="http://www.kirsanov.com" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en">
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
		<title>Chapter 9: Style: Stroke and Markers</title>
		<link href="NSTemplate_v1_inkbook.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:53262340-c02e-40d5-9273-c34656cedc88" name="Adept.expected.resource"/>
	</head>
	<body>
		<section><a id="ch9"/>
		<header>
				<h1 class="chapterTitle"><span class="ChapterNumber"><span epub:type="pagebreak" id="Page_159" title="159"/>9</span><br/><span class="ChapterTitle">Style: Stroke and Markers</span></h1>
			</header>
			<p class="ChapterIntro"><a id="159"/>While not very common in artistic drawings,
stroked paths—outlines, frames, arrows, connectors, and so on—are very common in technical drawings such as plans or flowcharts. A sizable share of all SVG style properties control
the appearance of stroke, so it deserves a chapter of its own.</p>
			<p>
				While stroke in SVG is quite rich and can serve a lot of purposes,
you may want some features that are not supported or are available only via workarounds. In
particular, SVG stroke always has <em>constant width</em> (it cannot get wider or
narrower along the path); to emulate variable-width stroke, use the Calligraphic pen
(<a href="c14.xhtml#section14.2">14.2</a>) or path effects (<a href="c13.xhtml#ch13">Chapter 13</a>). Also, while stroke can have a dash pattern
(<a href="#section9.4">9.4</a>) and markers attached to its nodes (<a href="#section9.5">9.5</a>), you cannot stroke a path with a brush
or repeated pattern that would follow the bends of the stroke—although, again, this is
possible via path effects (<a href="c13.xhtml#section13.3.2">13.3.2</a>). You can always use a standard SVG
rectangular pattern (<a href="c10.xhtml#section10.8.1">10.8.1</a>) to paint a stroke exactly as
you would a fill, but the pattern in this case is simply superimposed—it is not
distorted to follow the trajectory of the stroke.</p>
			<a id="section9.1"/><h2>
				9.1 <a id="160"/><span epub:type="pagebreak" id="Page_160" title="160"/>Stroke Width</h2>
			<p>
				The most important property of the stroke is its <em>width</em>. Like any other length in
Inkscape, width can be measured in a number of different units. There are currently two
places in the UI where you can see and change the stroke width of the selected objects:
the selected style indicator in the status bar (bottom left of the window, to the right end of the stroke swatch) and
the <span class="ui">Stroke style</span> tab of the <span class="ui">Fill and Stroke</span> dialog (<a href="#fig9-1">Figure 9-1</a>).</p>
			<a id="fig9-1"/><figure>
				<img alt="" src="10/strokewidth.svg.png"/>
				<figcaption>
					<p>
						Figure 9-1: Stroke width in the selected style indicator's right-click menu
(left) and the <span class="ui">Fill and Stroke</span> dialog (right)</p>
				</figcaption>
			</figure>
			<p>
				In the selected style indicator, one way you can change the stroke width is
by right-clicking directly on the number next to the stroke swatch
and choosing a value from the menu that pops up. In the same
menu, you can choose the unit to be used for stroke width; by default it's <code>px</code> (SVG
pixel).</p>
			<p>
				Similar to editing fill or stroke colors with color gestures (<a href="c08.xhtml#section8.7">8.7</a>), you can also drag
off the stroke width value into the canvas to change the stroke width of the selection interactively.
Dragging above and to the left of the 45-degree no-change axis
(from the point where you started dragging) makes the stroke in selected objects wider (up to 50 times the original
width); dragging below and to the right makes it narrower (down to zero). For example, if you start with a 1 px stroke, dragging up and to
the left will give you 50 px, and dragging to the right and down will reduce it to zero.
This way, you can adjust stroke width very quickly without opening any dialogs or menus.</p>
			<p>
				In the <span class="ui">Fill and Stroke</span> dialog, there's a regular editable field where
you can type any value, as well as a unit selector.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>
						If all of the <span class="ui">Stroke style</span> tab is disabled (grayed out), this means your
selected object has no stroke paint. To enable it, in the same dialog, go to the<span class="ui"><strong>Stroke paint</strong></span> tab and choose a solid color or any other paint for the
stroke.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p><a id="161"/><span epub:type="pagebreak" id="Page_161" title="161"/>When you choose the <span class="ui">Hairline</span> option in the units drop-down for the <span class="ui">Width</span> value, the <span class="ui">Width</span> value itself is disabled. The selected objects' strokes will always look like they're a constant 1 px wide <em>regardless of zoom</em>. The object itself will zoom in and out as usual, but its stroke will never appear thinner or thicker.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Hairline Width in SVG</h2>
					<p>
						Hairline width is implemented via the <code>vector-effect:non-scaling-stroke</code> CSS property, which is a recent addition to SVG, so not all SVG viewers support it. At the time of writing, it's not supported when exporting to PDF either.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				Outline mode (<a href="c03.xhtml#section3.14">3.14</a>) shows <em>all</em> objects in the document as if they had
a hairline stroke that remains 1 px wide regardless of zoom.
Visible Hairlines mode (<a href="c03.xhtml#section3.14">3.14</a>) allows you to scale the stroke up but not down, so it is always <em>at least</em> one screen pixel wide no matter how far you
zoom out. Unlike the <span class="ui">Hairline</span> setting in the <span class="ui">Fill and Stroke</span> dialog, however, these modes are just an Inkscape-specific editing convenience and do not affect the SVG code of the document.</p>
			<a id="section9.1.1"/><h3>9.1.1 Stroke Width in Multiple Objects</h3>
			<p>
				When the selection contains multiple objects with different strokes, the selected style
indicator <em>averages</em> the stroke widths of those objects that have any stroke. For
example, if one of the two selected objects has 3 px stroke and the other has 1 px, the
indicator will show <span class="ui">2</span> (and the tool tip will say that this is an averaged
value).</p>
			<p>
				Now, if you set any width via the right-click menu or by dragging, the same width will
be assigned to all selected objects that had any stroke in the first place. For
example, if one of the objects has 3 px stroke and the other has no stroke, it will
display <span class="ui">3</span> as stroke width and <span class="ui">Different</span> in the stroke paint swatch,
but any new width you set will be assigned <em>only</em> to the object that had 3 px
stroke.</p>
			<p>
				The <span class="ui">Fill and Stroke</span> dialog behaves differently. When different stroke widths
are detected in the selection, the stroke width unit switches to the percent unit
(<span class="ui">%</span>) and the displayed value is 100%. If you change it, for example, to
200% and press Enter, each stroke width in the selection will get two times wider
than it was before. All stroke widths that were different will remain
different, and the displayed value will again be 100%.</p>
			<p>
				In the same dialog, you can just as well switch the unit selector from <span class="ui">%</span> to any absolute unit
and assign the same stroke width to any number of selected objects. On the other hand,
even if you have a single object selected, you can still switch to the percent unit
and specify a new width as a percentage of the old.</p>
			<a id="section9.2"/><h2>9.2 Join</h2>
			<p>
				Stroke always follows a path, and a path can have sharp turns, called<em>cusps</em>. Typically, a cusp is a node (<a href="c12.xhtml#section12.5.5">12.5.5</a>) where two path segments
join at an angle, but you don't need a node to make a cusp: a
sharp cusp can be created even in the middle of a Bézier curve (see <a href="c12.xhtml#fig12-6">Figure 12-6</a>, bottom left).</p>
			<p><a id="162"/><span epub:type="pagebreak" id="Page_162" title="162"/>The way the stroke behaves at the cusps is determined by the two style properties:<em>join type</em> and <em>miter limit</em>, editable on the <span class="ui">Stroke style</span>
tab of the <span class="ui">Fill and Stroke</span> dialog, as shown in <a href="#fig9-2">Figure 9-2</a>. The three possible join types, represented by
the three toggle buttons, are <span class="ui">Round join</span>, <span class="ui">Bevel join</span>, and <span class="ui">Miter
join</span> (default).</p>
			<dl>
				<dt><span class="ui">Round join</span></dt> <dd>
					<p>This simulates the effect of tracing the join with a perfectly round
pen. The outer shape is a smooth circular arc whose center is on the path centerline at the cusp point.
This option is the most natural for largely curvilinear paths where occasional cusps might look out
of character if not rounded.</p>
				</dd>
				<dt><span class="ui">Bevel join</span></dt>
				<dd>
					<p>
						This join is basically the same as a <span class="ui">Miter join</span> (see below) but with the miter limit
set to 0. This means that for <em>any</em> angle, the corner is cut off by a <em>bevel</em>—a straight line
perpendicular to the bisector of the cusp angle.</p>
				</dd>
				<dt><span class="ui">Miter join</span></dt>
				<dd>
					<p>
						In this join type, the way it looks depends on how sharp the cusp angle is. 
For angles that are not too sharp, the outer outline of the stroke at the cusp point is
continued by two straight line fragments, tangential to the stroke on both sides of the
joint, until these straight lines cross. As a result, the joint is adorned by a sharp
peak, called a <em>miter</em>, which becomes longer and sharper as the angle at the joint
decreases, possibly reaching far beyond the position of the cusp node.</p>
				</dd>
			</dl>
			<p>
				This leads to a problem, however. How long can the miter become? Obviously,
when the angle at the joint becomes zero (which is perfectly legal),
the miter will be <em>infinitely</em> long. To prevent this, the <span class="ui">Miter limit</span> control
sets the <em>maximum length</em> of a miter in units of stroke width. For example, with the
default miter limit of 4, any
miter shorter than 4 stroke widths remains sharp-tipped, but as soon as you decrease the
angle to make the miter longer than that, it will be cut—<em>beveled</em>—at the distance of 4
stroke widths from the joint.</p>
			<a id="fig9-2"/><figure>
				<img alt="" src="10/strokejoin.svg.png"/>
				<figcaption>
					<p>
						Figure 9-2: Stroke join controls in the <span class="ui">Fill and
Stroke</span> dialog</p>
				</figcaption>
			</figure>
			<p>
				Stroked text objects are where the artistic effect of different stroke join settings is
perhaps the most obvious, as <a href="#fig9-3">Figure 9-3</a> demonstrates.</p>
			<a id="fig9-3"/><figure>
				<img alt="" src="10/strokejoin-text.svg.png"/>
				<figcaption>
					<p>Figure 9-3: The effect of join settings on stroked text</p>
				</figcaption>
			</figure>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Stroke Joins in SVG</h2>
					<p><a id="163"/><span epub:type="pagebreak" id="Page_163" title="163"/>In SVG, the joins are controlled by the <code>stroke-linejoin</code> CSS
property, which can take values of <code>miter</code>, <code>bevel</code>, or<code>round</code>. The miter limit is stored in a separate property,<code>stroke-miterlimit</code>.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<a id="section9.3"/>
			<h2>9.3 Caps</h2>
			<p>
				An open path needs to know how to draw the ends of the
stroke. Here, too, there are three options, somewhat similar
to the three join types: stroke caps can be <em>butt</em>, <em>round</em>, or <em>square</em> (<a href="#fig9-4">Figure 9-4</a>).</p>
			<dl>
				<dt><span class="ui">Butt cap</span></dt>
				<dd>
					<p>Bluntly cuts the stroke, perpendicular
to the stroke direction, right at the end node of the
path.</p>
				</dd>
				<dt><span class="ui">Round cap</span></dt>
				<dd>
					<p>Adds a semicircular blob that
smoothly rounds the end of the stroke.</p>
				</dd>
				<dt><span class="ui">Square cap</span></dt>
				<dd>
					<p>Adds a half-square blob to the end
of the stroke.</p>
				</dd>
			</dl><a id="fig9-4"/>
			<figure>
				<img alt="" src="10/strokecaps.svg.png"/>
				<figcaption>
					<p>
						Figure 9-4: Stroke cap options in the <span class="ui">Fill
and Stroke</span> dialog</p>
				</figcaption>
			</figure>
			<p>Both round and square caps make an open path longer by its full width,
with a half-stroke-width cap added to each end. Only with butt caps
(which essentially means no caps), the path is exactly as long as
the distance between its end nodes.</p>
			<p><a id="164"/><span epub:type="pagebreak" id="Page_164" title="164"/>The effect of join and cap options is visible only on wide enough strokes or when zoomed in; for strokes
that render at just two or three screen pixels, they make very little visual difference (except
possibly for long miters).</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Stroke Caps in SVG</h2>
					<p>
						In SVG, the stroke caps of a path are controlled by the<code>stroke-linecap</code> property, which can take values of <code>butt</code>,<code>round</code>, or <code>square</code>.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<a id="section9.4"/>
			<h2>9.4 Dash Patterns</h2>
			<p>
				A stroke does not need to run solidly from end to end of a path. SVG
allows you to stroke a path with a regular pattern of dashes
separated by empty intervals of any length. If you know the corresponding CSS syntax,
you can even create new dash patterns for your own use (use the <span class="ui"><strong>Selectors and CSS</strong></span> dialog, <a href="c16.xhtml#section16.3">16.3</a>).
Otherwise, choose one of the many predefined patterns provided by the <span class="ui">Fill and
Stroke</span> dialog, as shown in <a href="#fig9-5">Figure 9-5</a>.</p>
			<a id="fig9-5"/><figure>
				<img alt="" src="10/strokedash.svg.png"/>
				<figcaption>
					<p>
						Figure 9-5: Dash patterns in the <span class="ui">Fill and
Stroke</span> dialog</p>
				</figcaption>
			</figure>
			<p>All dash patterns are defined in terms of stroke width, which 
means the pattern scales up or down proportionally when you make your stroke wider or
narrower. Ordered roughly from the most common to the most exotic, the predefined
patterns include:</p>
			<ul>
				<li>Dotted patterns that consist of dots (that is, stroked segments whose length is equal to
the stroke width) with intervals of 1, 2, 3, 4, 6, and so on up to 48 stroke widths.</li>
				<li>Patterns with long dashes (1, 2, 3, and so on up to 24 stroke widths) and
single-stroke width intervals.</li>
				<li>Patterns with equal dash and interval lengths, from 2 to 24 stroke widths.</li>
				<li>Patterns with varying dash and interval widths: 2 and 4, 4 and 2, 2 and 6, 6 and 2, 2 and 8, 
8 and 2.</li>
				<li>Patterns where a long dash is followed by a short one.</li>
				<li>Patterns with equal dash and interval lengths that are shorter than the stroke width,
from 0.5 down to 0.1 stroke widths (for example, a "square" path that is as long as it
is wide will have five repetitions of the 0.1,0.1 pattern).</li>
				<li><a id="165"/><span epub:type="pagebreak" id="Page_165" title="165"/>Contrary to what you might expect, the <span class="ui">Custom</span> option
does not allow you to edit a pattern in a nice visual way—it's just some seemingly
random pattern that you can still only edit in the CSS editor.</li>
			</ul>
			<p>
				The <span class="ui">Pattern offset</span> field next to the dash pattern selector allows you to <em>shift</em> the chosen
pattern along the path by a given distance (again, in units of stroke width). For example, if you
use a two-dash, two-interval pattern but want your path to start with an interval, shift it by 2.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Dashes in SVG</h2>
					<p>
						In SVG, the dash pattern of a stroke is specified in the<code>stroke-dasharray</code> property. It can take values of <code>none</code> (solid
line) or a comma-separated list of values where each odd value gives the length of a
dash and each even value gives the length of an interval. For example, a specification
of <code>stroke-dasharray:2,1,0.5,1</code> means that the dash of length 2 is followed
by an interval of length 1, which is followed by a short dash of 0.5 and another
interval of 1 (all lengths are in the units of stroke width).</p>
					<p>
						The list of the predefined dash patterns in the <span class="ui">Fill and Stroke</span>
dialog is stored in your preferences.xml file, inside the<code>group</code> element with <code>id="dashes"</code>. By editing the children of
this element, you can add, remove, or change the patterns available in the Inkscape UI.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				Note that the stroke caps (<a href="#section9.3">9.3</a>) affect dashes, too. If you set a path to use round
or square caps, they will be added to both ends of each dash. As a result, each dash
will become longer by one full stroke width compared to its length when using the
default butt caps. For example, the 1,1 dash pattern with round caps loses all its intervals;
the round caps of adjacent dashes, each 0.5 stroke widths in length, now touch each
other, as <a href="#fig9-6">Figure 9-6</a> demonstrates.</p>
			<a id="fig9-6"/><figure>
				<img alt="" src="10/strokedash-caps.svg.png"/>
				<figcaption>
					<p>Figure 9-6: The effect of stroke caps on dashes</p>
				</figcaption>
			</figure>
			<p>
				As a consequence, to create a pattern of round dots following a path,
you need to use a dash pattern with <em>zero-length</em> dashes and round
caps. Inkscape does not list such a pattern in the <span class="ui">Fill and
Stroke</span> dialog, so you will need to create it manually. First, assign to your path a pattern
with the <em>interval length</em> you need, and then edit the <code>stroke-dasharray</code>
property of your path in the <span class="ui">Selectors and CSS</span> dialog to set
its <em>dash length</em> (first value) to 0. Of course, without round or square caps,
such a pattern will render the path completely invisible (which is the reason <a id="166"/><span epub:type="pagebreak" id="Page_166" title="166"/>it is
not included in the standard patterns—remember that the default caps setting is
butt).</p>
			<p>
				One interesting use of dot patterns with very wide intervals (such as 1,48) is
quickly creating a random scattering of dots. Draw a spiral-like doodle with the 
Pencil tool (<a href="c14.xhtml#section14.1.2">14.1.2</a>) and assign a 1,48 dash pattern to it to turn it into a cloud of
seemingly unconnected dots, as shown in <a href="#fig9-7">Figure 9-7</a>.</p>
			<a id="fig9-7"/><figure>
				<img alt="" src="10/strokedash-random.svg.png"/>
				<figcaption>
					<p>Figure 9-7: Using a dash array with large intervals to imitate a random scattering of dots</p>
				</figcaption>
			</figure>
			<p>
				Also, the regularity of dash patterns plays nicely with spirals—a shape
that is also regular but consists of progressively longer and longer turns (<a href="c11.xhtml#section11.6">11.6</a>). An
interplay of the equidistant dashes and gradually devolving paths can produce
enchanting patterns (<a href="#fig9-8">Figure 9-8</a>).</p>
			<a id="fig9-8"/><figure>
				<img alt="" src="10/strokedash-spiral.svg.png"/>
				<figcaption>
					<p>Figure 9-8: Dashed spirals are a form of art.</p>
				</figcaption>
			</figure>
			<a id="section9.5"/>
			<h2>9.5 Markers</h2>
			<p><em>Markers</em> are arbitrary objects (or even groups of objects) attached to
a path and displayed as part of that path at (some of) its nodes (<a href="c12.xhtml#section12.1">12.1</a>).
The most common use of markers is for creating arrowheads in
diagrams and flowcharts.</p>
			<p>A path can have three different types of markers: on its start node, intermediate (mid) nodes, and the end node. Each
copy of the marker is positioned at the node and rotated so as to follow the direction
of the path at this node. The size of markers is proportional to stroke width; simply make
your stroke narrower or wider to scale all markers on a path.</p>
			<p><a id="167"/><span epub:type="pagebreak" id="Page_167" title="167"/>The <span class="ui">Stroke style</span> tab in the <span class="ui">Fill and Stroke</span> dialog contains three
drop-down lists where you can select start, mid, and end markers for the selected
paths (<a href="#fig9-9">Figure 9-9</a>).</p>
			<a id="fig9-9"/><figure>
				<img alt="" src="10/markers.svg.png"/>
				<figcaption>
					<p>Figure 9-9: Choosing markers for a path</p>
				</figcaption>
			</figure>
			<p>These three lists show all the same markers (in other words, you can use any marker in any
position), but the preview thumbnails show them applied to the start, mid, and end of a
horizontal straight line path, so you can get an idea of how the marker will look on the
actual path.</p>
			<p>Let's look at what markers are in Inkscape's stock list.</p>
			<dl>
				<dt>Arrowheads</dt>
				<dd>
					<p>
						There are two types of arrowheads: one is dart-like with two straight lines at the back; the other is delta-shaped
with a concave circular arc at the back of the arrow. 
Each type of arrowhead comes in three <em>sizes</em>: large, medium, and small (these are not absolute sizes but
relative to the stroke width). Also, each size has two <em>orientations</em>: start and end.</p>
					<p>
						For example, if you want your arrowheads to point <em>outward</em> from the path, 
choose one with a start orientation
as the start marker and one with end orientation as the end marker.
If you mix this up, your arrowheads will point <em>inward</em> from the ends
of the path. Or you can choose the same end-orientation arrowhead for all three positions (start, mid, and end)
to have all arrowheads on your path point in one direction toward the end of the path. Use <span class="ui"><strong>Path<span class="MenuArrow"> ▶ </span>Reverse</strong></span>
from the menu to reverse a path if necessary (see <a href="c12.xhtml#section12.1.1">12.1.1</a> for details).</p>
				</dd>
				<dt>Arrow tails</dt>
				<dd>
					<p>An arrow tail marker is available only in one size (matching the large
arrowheads) and one orientation (making sense as an end marker—that is, oriented toward the
path start).</p>
				</dd>
				<dt><a id="168"/><span epub:type="pagebreak" id="Page_168" title="168"/>Distance measurement markers
				</dt>
				<dd>
					<p>Distance measurement markers are just arrowheads
with added perpendicular straight lines at the
tips. There are two orientations, one for a start marker and
the other for an end marker.</p>
				</dd>
				<dt>Geometric shapes</dt>
				<dd>
					<p>There is a collection of geometric shape markers: round dots, squares, diamonds
(squares rotated by 45 degrees), equilateral triangles, straight line stops, and filled and
empty half-circle marks. Most of them have solid black and hollow variants. Just as
with arrowheads, these markers come in three sizes (large, medium, and small); some also have
start and end orientations (although for symmetric markers such as diamonds, the
orientations differ only in the position of the marker relative to its node). The
start and end variants of triangle markers can be used as just another arrowhead
shape.</p>
				</dd>
				<dt>Misc markers</dt>
				<dd>
					<p>
						There are several fancy markers, notably <span class="ui">Scissors</span> (assign it to
mid markers to create a typical "cut-off line") and the "infinite line" ellipsis
endings.</p>
				</dd>
			</dl>
			<p>If your document already uses some markers of its own, these markers will be added to the top of
the drop-down marker menus, separated from the stock Inkscape markers
below. To remove markers from a path, select the topmost empty line in the list.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Markers in SVG</h2>
					<p>
						When you assign a marker to a path, Inkscape places a copy of the marker into
the document's <code>defs</code> (<a href="b01.xhtml#sectionA.4">A.4</a>) and makes the path refer to the marker in<code>defs</code>. The list of the markers above the separator in the marker menus is
simply that of the markers in <code>defs</code>; to remove markers you no longer use anywhere,
use the <span class="ui"><strong>File<span class="MenuArrow"> ▶ </span>Clean Up Document</strong></span> command.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<a id="section9.5.1"/>
			<h3>9.5.1 Mid Markers and Nodes</h3>
			<p>
				Start and end markers are simple in that their position on the path is never a surprise
(although their orientation may sometimes be, if the end node has a very short Bézier
handle that has little effect on the shape of the curve but may rotate the marker
at this node in an unexpected direction). Mid markers are more interesting: they are
located at the middle nodes (<a href="c12.xhtml#section12.1">12.1</a>) of a path, and the positions of these nodes
may not be what you need or expect.</p>
			<p>
				A simple use case is a path consisting of straight line segments (with no Bézier
curves). On such a path, mid markers will be displayed at the corners. Use markers that
don't have end or start variants and are thus positioned symmetrically
around the node—for example, dots or squares (<a href="#fig9-10">Figure 9-10</a>).</p>
			<a id="fig9-10"/><figure>
				<img alt="" src="10/mid-markers.svg.png"/>
				<figcaption>
					<p>Figure 9-10: Mid markers at the path joints</p>
				</figcaption>
			</figure>
			<p>
				You may want to fill a path evenly with mid markers, similar to the way
the dash pattern is regularly repeated along the path. This is easy for a straight
line path where you can add or remove as many mid nodes as needed without affecting
the straight line shape. In a more complex path, however, some nodes may be necessary
to give the path its shape, and you cannot move those nodes along <a id="169"/><span epub:type="pagebreak" id="Page_169" title="169"/>the path
without distorting that shape. You also cannot choose <em>not</em> to apply
markers to these nodes: in SVG, mid markers apply to all mid nodes without exception. As
a result, it may be impossible to distribute markers along a path perfectly evenly;
however, the shorter your desired interval between markers and the simpler the
path, the less noticeable this unevenness can be.</p>
			<p>
				How can you add nodes to a path without changing its shape?
A single new node can be added in the Node tool (<a href="c12.xhtml#section12.5.3">12.5.3</a>) by double-clicking or
Ctrl-Alt-clicking anywhere on the path. For an even distribution of
nodes, however, another shortcut is more useful: Insert creates a new node
in the middle of each segment between selected nodes (and adds the new node to the node
selection so you can keep multiplying nodes by pressing Insert repeatedly).</p>
			<p>
				For example, selecting both nodes of a two-node path and pressing Insert adds
one new node in the middle. Now, you have three nodes selected with two segments between
them, so pressing Insert again adds two more nodes; another Insert adds four more
nodes, and so on. In this simple case, all nodes will be distributed evenly at all
times. However, if your path already had some mid nodes, selecting all nodes and
pressing Insert repeatedly will add nodes more profusely in areas that had more
nodes to begin with, as shown in <a href="#fig9-11">Figure 9-11</a>.</p>
			<a id="fig9-11"/><figure>
				<img alt="" src="10/mid-markers-add.svg.png"/>
				<figcaption>
					<p>
						Figure 9-11: Adding mid nodes by pressing Insert
repeatedly (left) and by using the <span class="ui">Add Nodes</span> extension
(right)</p>
				</figcaption>
			</figure>
			<p>
				A better approach to creating evenly distributed nodes is the <span class="ui">Extensions<span class="MenuArrow"> ▶ </span>Modify Path<span class="MenuArrow"> ▶ </span>Add Nodes</span>
extension (<a href="c13.xhtml#section13.4.2.1">13.4.2.1</a>). In it, you can specify either the maximum segment length
(in <code>px</code> units) or the exact number of segments you need, and the algorithm will
add nodes (without moving or deleting any existing nodes) to produce an even node spacing
satisfying these constraints.</p>
			<p>
				To delete an individual node in the Node tool, Ctrl-Alt-click it, or select it
and press Delete (<a href="c12.xhtml#section12.5.3">12.5.3</a>). A good method for deleting
multiple nonessential nodes
(those that were added only for the sake of markers and do not affect the<a id="170"/><span epub:type="pagebreak" id="Page_170" title="170"/>shape of the path) is the <span class="ui">Simplify</span> command (<a href="c12.xhtml#section12.3">12.3</a>). Of course,<span class="ui">Simplify</span> cannot really <em>know</em> which nodes are essential and which are not;
it tries to guess—and usually performs acceptably, although undesired nodes and
small shape distortions are likely to happen.</p>
			<a id="section9.5.2"/><h3>9.5.2 Coloring Markers</h3>
			<p>Typically, connector lines in diagrams and flowcharts are black, so the
stock markers offered by Inkscape are either solid black or black with white
filling. However, if you have a blue or red connector line, normally
you would want the arrowhead on that line to be blue or red too. That's
what Inkscape does by default: when assigning a marker to a path, it re-colors
it to match the color of the path's stroke. When you change the stroke color
of a path with markers, its markers get updated too.</p>
			<p>
				This color-matching is not the standard behavior in SVG—it's just 
what Inkscape does to be helpful.
Behind the scenes, whenever you change stroke color, Inkscape creates a copy of each assigned marker, re-paints
it with the new color, and re-assigns it back to the path. That's why you will see the different-color copies
of the markers you have used at the top of the lists in <span class="ui">Fill and Stroke</span> (which, as you remember,
list the document's custom markers first before the standard ones).
The good news is that if you don't like this behavior,
you can disable it in <span class="ui">Preferences<span class="MenuArrow"> ▶ </span>Behavior<span class="MenuArrow"> ▶ </span>Markers</span>, as shown in <a href="#fig9-12">Figure 9-12</a>.</p>
			<a id="fig9-12"/><figure>
				<img alt="" src="10/prefs-markers.png"/>
				<figcaption>
					<p>Figure 9-12: Marker behavior preferences</p>
				</figcaption>
			</figure>
			<p>
				One reason to disable automatic marker coloring is if you want to use a path only as an invisible string for a rosary of
markers—in other words, you want to see the markers but hide the stroke itself. For this, first assign the
markers to a stroked path and then remove the stroke (for example, by middle-clicking the stroke swatch in the selected style indicator,<a href="c08.xhtml#section8.6">8.6</a>). If you had set <span class="ui">Update marker color when object color changes</span> to off,
this will give you what you need: visible markers on an invisible path.</p>
			<p><a id="171"/><span epub:type="pagebreak" id="Page_171" title="171"/>When markers and their stroke have different colors, one more thing to take into account is the
order of rendering (<a href="#section9.6">9.6</a>). By default, stroke is painted first, so if it is different from its markers,
it will only show through from underneath the markers if they are transparent.</p>
			<p><span class="NoteHead">[1.1]</span></p>
			<p>
				Automatic coloring of markers is a relatively recent Inkscape innovation; before it was available, the only way to do this was by <span class="ui">Extensions<span class="MenuArrow"> ▶ </span>Modify Path<span class="MenuArrow"> ▶ </span>Color Markers</span>. This extension is still available and is sometimes useful because it has some additional options. With it, you can not only paint markers to match the object but also swap fill and stroke colors, optionally include alpha, or just provide your own colors for fill and stroke. 
(If you want a more complex paint job for your markers, see the next
section on how to turn a marker into a regular editable object and back.)</p>
			<a id="section9.5.3"/><h3>9.5.3 Creating New Markers</h3>
			<p>
				A marker does not have to be a single object painted with a solid color. It
can consist of any number of objects, grouped or not, with any paint, opacity, or even
blur properties—in other words, anything Inkscape can draw can be a marker on a
path. Applying such complex markers to paths with many added nodes (<a href="#section9.5.1">9.5.1</a>) can produce
amazing compositions. Let's look at how to create markers out of arbitrary objects.</p>
			<p>
				Generally, it's as easy as selecting the object or objects and choosing<span class="ui">Objects to Marker</span> from the <span class="ui">Object</span> menu. Selected objects disappear,
but in the <span class="ui">Stroke style</span> tab of <span class="ui">Fill and Stroke</span>, 
you will see your new marker in the top part of the list of markers (just before the stock markers).
You may need to close and reopen the <span class="ui">Fill and Stroke</span> dialog to refresh the marker list.</p>
			<p>When creating a new marker, Inkscape assumes that the original objects are oriented
as they should be on a horizontal path that goes from left to right. For example, if you
have a new arrowhead that you want to use as an end marker, make it point horizontally
to the right before converting it to a marker.</p>
			<p>Similar to standard markers, the user-created marker will scale up and down as you
change the stroke width. Its initial size (the size of the object that you have
turned into a marker) will correspond to the stroke width of 1 px.</p>
			<p>
				Each marker has an <em>anchor point</em>—the point that will be placed on the node to
which that marker is attached. When you create a new marker, Inkscape uses the transformation fixed point (<a href="c06.xhtml#section6.4">6.4</a>)
of the (first) selected object as that anchor point (<a href="#fig9-13">Figure 9-13</a>). By default, the fixed point is in the center of the object's bounding
box (<a href="c04.xhtml#section4.3">4.3</a>), which means the newly created marker will be centered around its node.
If you move the fixed point to one of the corners of the object, the new marker will touch its node by that
corner.</p>
			<a id="fig9-13"/><figure>
				<img alt="" src="10/create-marker.svg.png"/>
				<figcaption>
					<p>Figure 9-13: Creating a new marker from a selected
object</p>
				</figcaption>
			</figure>
			<p><a id="172"/><span epub:type="pagebreak" id="Page_172" title="172"/>Can you do the opposite and convert a path marker to an object (for example,
to edit it and make it into a marker again)? Yes, although this involves
destroying the path that the marker was applied to (so you may want to make a copy of
the path first). Use the <span class="ui">Path<span class="MenuArrow"> ▶ </span>Stroke to Path</span> command.
It turns the stroke into a filled path (<a href="c12.xhtml#section12.1.3">12.1.3</a>), but also, if the original path had
markers, it groups the converted path with objects that represent former markers. 
Ungroup, choose one of the former markers, rotate it into the default orientation,
and edit as necessary.</p>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="note">
					<h2><span class="NoteHead">NOTE</span></h2>
					<p>
						You can turn a clone (<a href="c16.xhtml#ch16">Chapter 16</a>) into a marker and then continue to edit the original
object, with its marker clones updated live.</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<a id="section9.5.4"/>
			<h3>9.5.4 Advanced Markers</h3>
			<p>
				SVG markers have a few other useful options that are not yet available via the
Inkscape UI. To change them, you need to use the <span class="ui">Selectors and CSS</span> dialog (<a href="c16.xhtml#section16.3">16.3</a>)
and Inkscape's <span class="ui">XML Editor</span> (<a href="c04.xhtml#section4.10">4.10</a>) together. Open them both.
Select an object with markers, in <span class="ui">Selectors and CSS</span> find the marker property
you're interested in (<code>marker-start</code>, <code>marker-mid</code>, or <code>marker-end</code>),
and click the green arrow at the right end of that line. This will scroll the <span class="ui">XML Editor</span>
to the <code>svg:marker</code> element used by your object. Here's what you can change
via this element's attributes:</p>
			<ul>
				<li>
					By default, markers rotate to orient themselves along the path direction. If you
want your marker always to have the same orientation regardless of how the path goes at
this point, remove the <code>orient="auto"</code> attribute.</li>
				<li>
					If you don't want the marker to scale up and down when the stroke width is
changed, add the attribute <code>markerUnits</code> with the value<code>userSpaceOnUse</code>.</li>
			</ul><a id="section9.6"/>
			<h2>
				9.6 Rendering Order <span class="NoteHead">[1.1]</span></h2>
			<p>
				As you have seen, a single solid object—not a group—can still have up to three distinct components: its fill, its stroke, and its markers.
The only unresolved question is in which order to render these intrinsic components. Since you cannot simply rearrange them
(as you would with separate objects in a group), SVG governs this with a style property of its own. This property, editable in the<span class="ui">Stroke style</span> tab of <span class="ui">Fill and Stroke</span> (<a href="#fig9-14">Figure 9-14</a>), can have one of the six values that represent all possible orderings (bottom to top) of the three components:</p>
			<ul>
				<li>fill, stroke, markers (the default)</li>
				<li>stroke, fill, markers</li>
				<li>fill, markers, stroke</li>
				<li>markers, fill, stroke</li>
				<li>stroke, markers, fill</li>
				<li>markers, stroke, fill</li>
			</ul><a id="fig9-14"/>
			<figure>
				<img alt="" src="10/render-order.svg.png"/>
				<figcaption>
					<p>
						Figure 9-14: Rendering order buttons on the <span class="ui">Stroke style</span> tab of <span class="ui">Fill and Stroke</span></p>
				</figcaption>
			</figure>
			<aside epub:type="sidebar">
				<div class="top hr">
					<hr/>
				</div>
				<section class="box">
					<h2>Stroke Always Centered on Path</h2>
					<p><a id="173"/><span epub:type="pagebreak" id="Page_173" title="173"/>Adobe Illustrator has an option of painting stroke completely on the inside or outside of the path.
This is not possible in SVG; stroke is always centered on the path (this may change in future versions of SVG, though).</p>
					<div class="bottom hr">
						<hr/>
					</div>
				</section>
			</aside>
			<p>
				Whenever fill is on top of stroke, it goes up to the line of the path on which the stroke is centered. Thus, if the fill is opaque (<a href="c08.xhtml#section8.3">8.3</a>), 
the visible result of putting it on top of the stroke is almost exactly as if the stroke were half its width.</p>
		</section>
	</body>
</html>