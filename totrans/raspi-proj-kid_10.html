<html><head></head><body>
<h2 class="h2" id="ch10"><span epub:type="pagebreak" id="page_165"/>10<br/>MAGIC MUSIC BOX</h2>&#13;
<p class="noindent"><span class="big1">IN THIS CHAPTER, YOU’LL CREATE A PERSONALIZED MP3 PLAYER THAT WE’LL CALL THE MAGIC MUSIC BOX. YOU’LL USE YOUR RASPBERRY PI’S PYGAME TO BUILD AN MP3 PLAYER THAT CAN PLAY PRELOADED MUSIC TO A SPEAKER AND THEN ADD FOUR INTERACTIVE BUTTONS: ONE TO SKIP SONGS, TWO TO ADJUST THE VOLUME, AND A POWER SWITCH TO TURN OFF THE PLAYER.</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_166"/>You’ll combine all the hardware into a fancy box to create your MP3 music system (<a href="ch10.xhtml#ch10fig01">Figure 10-1</a>). The program code uses PyGame, the Python library for creating games that you used in <a href="ch05.xhtml#ch05">Chapter 5</a>. PyGame allows you to add and control sounds, images, and videos by using Python code. In this project, you’ll use PyGame to control the MP3 files, start and stop them, and adjust the music’s volume.</p>&#13;
<div class="image"><img alt="Image" src="../images/10fig01.jpg"/></div>&#13;
<p class="figcap" id="ch10fig01"><strong>FIGURE 10-1</strong> The finished MP3 magic music box and its speaker</p>&#13;
<h3 class="h3" id="ch10lev1sec1">WHAT YOU’LL NEED</h3>&#13;
<p class="noindent">Here are a few items you’ll need to complete the project:</p>&#13;
<ul>&#13;
<li class="noindent">Raspberry Pi</li>&#13;
<li class="noindent">4 push buttons</li>&#13;
<li class="noindent">8 sets of female-to-male jumper wires</li>&#13;
<li class="noindent">Bluetooth speaker or audio jack speaker</li>&#13;
<li class="noindent">Solder and a soldering iron or conductive paint</li>&#13;
<li class="noindent">Small box (lunchbox, wooden, cardboard, or other)</li>&#13;
<li class="noindent">Drill or screwdriver (to make holes)</li>&#13;
<li class="noindent">USB battery (optional)</li>&#13;
</ul>&#13;
<h3 class="h3" id="ch10lev1sec2">CHOOSING A SPEAKER TYPE</h3>&#13;
<p class="noindent">Depending on the Raspberry Pi model you’re using, you’ll first need to decide which method you’ll use to output the audio. The low-cost option is to use a small speaker attached to the headphone jack and hide that speaker inside the music box. You might search an online retailer or your local shops for a portable speaker with a 3.5 mm audio jack; all 3.5 mm models will work.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_167"/>The downside to using small speakers is that they produce low-quality sound, and only the Raspberry Pi 2, 3, 4, and A+ models have audio ports to support them.</p>&#13;
<p class="indent">The other, slightly pricier, option is to use a Bluetooth speaker. This speaker usually has a high-quality sound and is portable, so you can place the speaker wherever you want it. The Raspberry Pi 3, 4, and Zero W models have onboard Bluetooth capabilities. Another advantage of the Pi Zero W is that it’s small, which makes it the easiest model to embed in the music box. If you’re using an older Raspberry Pi model that has spare USB ports, you can add Bluetooth functionality by purchasing a standard USB Bluetooth dongle (which supports Bluetooth 4 and audio) and attaching it to one of the ports.</p>&#13;
<p class="indent">The following table shows the speaker options suitable for the various Pi models.</p>&#13;
<table class="table1">&#13;
<colgroup>&#13;
<col style="width:20%"/>&#13;
<col style="width:20%"/>&#13;
<col style="width:20%"/>&#13;
<col style="width:20%"/>&#13;
<col style="width:20%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<td class="table-h" style="vertical-align: top;"><p class="tab_th"><strong>MODEL</strong></p></td>&#13;
<td class="table-h1" style="vertical-align: top;"><p class="tab_th"><strong>HEADPHONE JACK</strong></p></td>&#13;
<td class="table-h" style="vertical-align: top;"><p class="tab_th"><strong>BLUETOOTH</strong></p></td>&#13;
<td class="table-h1" style="vertical-align: top;"><p class="tab_th"><strong>PROS</strong></p></td>&#13;
<td class="table-h" style="vertical-align: top;"><p class="tab_th"><strong>CONS</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">A+</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">No</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Small board; can support Bluetooth dongle via USB port</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Slower model</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Pi 2</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">No</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Several USB ports</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Large board</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Pi 3B+</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Good specs; cheaper than the Pi 4</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Large board</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Pi 4</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Fastest processor</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">More expensive than other models</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Pi Zero W</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">No</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Yes</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: center;"><p class="tabc"><span class="purple">Smallest board; onboard Wi-Fi; can upload MP3 files remotely; inexpensive</span></p></td>&#13;
<td class="table-b1" style="vertical-align: center;"><p class="tabc"><span class="purple">Slower model</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<h3 class="h3" id="ch10lev1sec3"><span epub:type="pagebreak" id="page_168"/>BUILDING THE MAGIC MUSIC BOX</h3>&#13;
<p class="noindent">Once you’ve selected a speaker for your board, you can build your music box. You can use anything for the music box enclosure—for example, a wooden pencil case, a plastic lunchbox, or an old cereal box. Be aware that you’ll have to make holes in the material; so if you don’t have tools to drill through wood, for example, perhaps choose a cardboard enclosure.</p>&#13;
<p class="indent">Before beginning the project, you should spend time arranging the buttons, speaker, and Raspberry Pi inside the box to figure out a suitable setup. You can customize the setup, but use common sense. For example, on most music players, the volume-control buttons are located next to each other.</p>&#13;
<h4 class="h4" id="ch10lev2sec1">Wiring the Buttons</h4>&#13;
<p class="noindent">Let’s make the buttons! Here are the steps:</p>&#13;
<ol>&#13;
<li class="noindent"><strong>Attach wires:</strong> Select one of your push buttons and two male-to-female jumper wires, and locate the male ends. Using a little solder or conductive paint, attach a male end to each leg of the button (<a href="ch10.xhtml#ch10fig02">Figure 10-2</a>). I recommend you use a black wire for one of the legs to indicate that it’s the ground (GND) wire. Follow this process for the other three buttons.&#13;
<br/><p class="indent">These buttons will form the main controls of the MP3 player that you’ll connect to the Raspberry Pi.</p>&#13;
<div class="image"><img alt="Image" src="../images/10fig02.jpg"/></div>&#13;
<p class="figcap" id="ch10fig02"><strong>FIGURE 10-2</strong> Attaching wires to each button</p>&#13;
</li>&#13;
<li class="noindent"><span epub:type="pagebreak" id="page_169"/><strong>Wire the buttons:</strong> For each button, attach the black wire (the ground wire) to any GND pin on your Raspberry Pi, and attach the other wire to the GPIO pin indicated in the following table.&#13;
<table class="table1">&#13;
<colgroup>&#13;
<col style="width:50%"/>&#13;
<col style="width:50%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<td class="table-h" style="vertical-align: top;"><p class="tab_th"><strong>PIN</strong></p></td>&#13;
<td class="table-h1" style="vertical-align: top;"><p class="tab_th"><strong>BUTTON</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">GPIO 7</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">Next Song (<code>play_skip</code>)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">GPIO 25</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">Volume Up</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">GPIO 8</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">Volume Down</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">GPIO 17</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">Power Off</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">You can use any of the GND pins located on the physical pins 6, 9, 14, 20, 25, 30, 34, and 39 (<a href="ch10.xhtml#ch10fig03">Figure 10-3</a>). Some might be easier for the wires to reach or make neater layouts inside the box.</p>&#13;
<div class="image"><img alt="Image" src="../images/10fig03.jpg"/></div>&#13;
<p class="figcap" id="ch10fig03"><strong>FIGURE 10-3</strong> Wiring each button to the Raspberry Pi</p>&#13;
</li>&#13;
<li class="noindent"><strong>Make holes:</strong> If you’re using a wooden or plastic box, you’ll need to drill holes to house the buttons. The size of the hole depends on the size of the button (<a href="ch10.xhtml#ch10fig04">Figure 10-4</a>). Start with a small hole and try fitting the button before resizing the hole. If you’re using a wooden box, you can ask an adult to drill the holes for you. If you’re using a cardboard box, use a sharp pencil or a pen to make holes. Decide where you want to locate the buttons, and then drill or poke four holes big enough to accommodate each button.&#13;
<div class="image"><img alt="Image" src="../images/10fig04.jpg"/></div>&#13;
<p class="figcap" id="ch10fig04"><span epub:type="pagebreak" id="page_170"/><strong>FIGURE 10-4</strong> Drilling the holes in the box</p>&#13;
</li>&#13;
<li class="noindent"><strong>Attach the buttons:</strong> The way you do this depends on the type of buttons and box that you’re using. Many buttons have a small circular lip around the top that rests on the outside of the hole in your box and two flexible clips that secure the main housing of the button in place. These types of buttons are often referred to as <em>arcade buttons</em>. For other types of buttons, you can glue or use double-sided tape to stick the buttons in place, <em>but do so only after you know that the program and hardware work</em>.&#13;
<p class="indent">Before securing your Raspberry Pi to the inside of the box, play around with the layout of the Pi so that the wires and the buttons fit. <a href="ch10.xhtml#ch10fig05">Figure 10-5</a> shows an example layout, and you may be able to hide the battery inside the box too. Notice that you still have access to the Raspberry Pi, as it’s best to write the program and test it before securing it and the other parts in place. That way, you can still access the buttons and wires if you need to make adjustments.</p></li>&#13;
<li class="noindent"><strong>Decorate the box:</strong> Decorate and personalize the outside of the box. You can add color, stickers, instructions for using the music player, or anything else you like.</li>&#13;
</ol>&#13;
<div class="image"><img alt="Image" src="../images/10fig05.jpg"/></div>&#13;
<p class="figcap" id="ch10fig05"><span epub:type="pagebreak" id="page_171"/><strong>FIGURE 10-5</strong> Preparing the internal hardware layout</p>&#13;
<h4 class="h4" id="ch10lev2sec2">Connecting the Speaker</h4>&#13;
<p class="noindent">To hear sound from the MP3 files, you need to set up the audio output. There are different ways of doing this, depending on whether you’re using a headphone jack or Bluetooth speaker. Start your Raspberry Pi and attach the monitor, keyboard, and mouse.</p>&#13;
<h5 class="h5">Using a Speaker via the Headphone Jack</h5>&#13;
<p class="noindent">If you’re using the audio jack, connect your speaker via a standard 3.5 mm jack cable to the black headphone jack on the Raspberry Pi, which is located next to the HDMI port. Plug in your Raspberry Pi and boot it up; load the Pi desktop. Locate and click the audio icon <img alt="" class="inline" src="../images/Speaker_1.jpg"/> at the top of the desktop. Select <strong>Analog</strong> from the audio output drop-down menu. Now all audio will be played through your speaker.</p>&#13;
<h5 class="h5">Using a Bluetooth Speaker</h5>&#13;
<p class="noindent">If you’re using a Bluetooth speaker, turn on the Bluetooth software on your Pi by clicking the Bluetooth icon at the top right of the screen. Then turn on your Bluetooth speaker. You’ll need to enable the settings on your speaker to make it discoverable. Click the Bluetooth icon again and select <strong>Add a Device</strong> from the drop-down menu. The Raspberry Pi will attempt to locate all Bluetooth-enabled devices, including your speaker.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_172"/>When your Pi finds the speaker, it will appear in the pop-up window. Select it from the list, and click the <strong>Pair</strong> button to establish a connection between your Raspberry Pi and the Bluetooth speaker.</p>&#13;
<p class="indent">Once the connection is confirmed, click the audio icon <img alt="" class="inline" src="../images/Speaker_1.jpg"/> and select your Bluetooth speaker from the drop-down menu. The two devices will attempt to pair and establish a connection again. Once the speaker has been set up, your Raspberry Pi will always automatically locate and connect to this speaker.</p>&#13;
<h4 class="h4" id="ch10lev2sec3">Coding the Magic Music Box</h4>&#13;
<p class="noindent">Let’s write the code that will play the music and set up the button functions. You’ll use PyGame’s audio mixer tool to control playback of the MP3 files and the volume level. The button functions are controlled via the <code>gpiozero</code> library, which offers simple code to trigger events.</p>&#13;
<h5 class="h5">Creating a New Folder</h5>&#13;
<p class="noindent">First, you’ll create a folder to store the program code and the MP3 music files that you want to listen to. In the terminal, enter the following command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">mkdir MP3</span></pre>&#13;
<p class="indent">Then change to the <em>MP3</em> folder by entering this command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">cd MP3</span></pre>&#13;
<p class="indent">Transfer and save all your MP3 music files to the <em>MP3</em> folder. Then open a new Python file, and save it to the <em>MP3</em> folder as <em>music_box.py</em>.</p>&#13;
<h5 class="h5">Importing the Modules and Libraries</h5>&#13;
<p class="noindent">Now you need to import all the modules and libraries you’ll use in the program. Enter the code in <a href="ch10.xhtml#ch10ex01">Listing 10-1</a> to start.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">import</span> glob, time, pygame&#13;
&#13;
   <span class="codeorg">from</span> gpiozero <span class="codeorg">import</span> Button&#13;
<span class="ent">❷</span> <span class="codeorg">from</span> subprocess <span class="codeorg">import</span> check_call&#13;
   <span class="codeorg">from</span> signal <span class="codeorg">import</span> pause&#13;
   <span class="codeorg">from</span> pygame.locals <span class="codeorg">import</span> *&#13;
&#13;
<span class="ent">❸</span> pygame.init()&#13;
<span class="ent">❹</span> pygame.display.set_mode((100, 100))&#13;
&#13;
<span class="ent">❺</span> <span class="codeorg">global</span> the_song&#13;
   <span class="codeorg">global</span> level&#13;
   <span class="codeorg">global</span> songs_found&#13;
   <span class="codeorg">global</span> number_of_songs</pre>&#13;
<p class="caption"><a id="ch10ex01"/><strong>LISTING 10-1</strong> Setting up the imports and global variables</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_173"/>Import <code>glob</code>, <code>time</code>, and <code>pygame</code> <span class="ent">❶</span>. You’re already familiar with the <code>time</code> module. You’ll use the <code>glob</code> module to search for the MP3 filenames, and you’ll use the <code>pygame</code> library to control the playback and volume of the MP3 files.</p>&#13;
<p class="indent">Then import the <code>Button</code> class from the <code>gpiozero</code> library, which allows you to trigger events when each button is pressed. Next, import the <code>check_call()</code> function <span class="ent">❷</span>, which you’ll use to call the <code>shutdown()</code> command to turn off the music player.</p>&#13;
<p class="indent">PyGame files run in a separate window, and although you won’t use the window, you still need to initialize it with <code>pygame.init()</code> <span class="ent">❸</span> to be able to use PyGame. Then you need to define the size of that window. Because you’re not interacting with it, you can make it very small–let’s say, 100 × 100 pixels <span class="ent">❹</span>.</p>&#13;
<p class="indent">Next, create four variables <span class="ent">❺</span>: <code>the_song</code> holds the name of the MP3 file that’s currently being played, <code>level</code> holds the volume level, <code>songs_found</code> holds the filenames of the MP3 songs, and <code>number_of_songs</code> holds the total number of songs. These variables are <em>global</em> variables. Global variables are declared outside a function, which means that the Python program can pull the data stored in a global variable and use it elsewhere in the program.</p>&#13;
<h5 class="h5">Assigning the Buttons to the GPIO Pins</h5>&#13;
<p class="noindent">Next, add the code in <a href="ch10.xhtml#ch10ex02">Listing 10-2</a>, which sets up the <code>shutdown()</code> function and assigns each button to a GPIO pin.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">def</span> <span class="codeblue1">shutdown</span>():&#13;
   <span class="ent">❷</span> check_call([<span class="codegreen1">'sudo'</span>, <span class="codegreen1">'poweroff'</span>])&#13;
 &#13;
   <span class="codered">### Buttons for control ###</span>&#13;
<span class="ent">❸</span> play_skip = Button(7)      <span class="codered"># begin the music green</span>&#13;
   volume_up = Button(25)    <span class="codered"># volume up blue</span>&#13;
   volume_down = Button(8)     <span class="codered"># volume down yellow</span>&#13;
   shutdown_btn = Button(17, hold_time=2) <span class="codered"># shutdown</span>&#13;
 &#13;
<span class="ent">❹</span> the_song = 0 <span class="codered"># as first song is in position 1</span>&#13;
<span class="ent">❺</span> playing_songs = <span class="codeorg">True</span>&#13;
</pre>&#13;
<p class="caption"><a id="ch10ex02"/><strong>LISTING 10-2</strong> Defining buttons and pins</p>&#13;
<p class="indent">Define the <code>shutdown()</code> <span class="ent">❶</span> function to use the <code>check_call()</code> function to call the Python program that will power off the Pi <span class="ent">❷</span>. This function lets you switch off your music box without needing a screen!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_174"/>Next, set up the buttons by creating a variable for each one, <code>play_skip</code>, <code>volume_up</code>, <code>volume_down</code>, and <code>shutdown_btn</code>. Then assign each variable to the GPIO pin number wired to that button <span class="ent">❸</span>. If you used different pin numbers than those in this example, make sure you change the values in the parentheses.</p>&#13;
<p class="indent">Notice that after assigning <code>shutdown_btn</code> to its GPIO number, you specify the hold time, which is the number of seconds the button needs to be held down before the <code>shutdown()</code> function <span class="ent">❷</span> is triggered. (In this example, the hold time is 2 seconds.) Adding a hold time makes it more difficult to accidentally shut off the MP3 player if you press the button by mistake.</p>&#13;
<p class="indent">Next, create two more variables. The <code>the_song</code> variable <span class="ent">❹</span> contains the position of the song currently playing in the list of songs. The list starts with the song held at the first position, 0. The <code>playing_songs</code> variable specifies whether a song is playing <span class="ent">❺</span>. The program uses this variable to search for and play the MP3 files. Set it to <code>True</code>.</p>&#13;
<h5 class="h5">Building a Playlist of Songs</h5>&#13;
<p class="noindent">The next part of the program finds the MP3 music files you saved to the <em>MP3</em> folder by using the <code>glob()</code> function you imported earlier. This code, shown in <a href="ch10.xhtml#ch10ex03">Listing 10-3</a>, builds a list of all the song titles, which the program uses to load and play each song. Remember that the files must be stored in the same folder as the Python program file.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">def</span> <span class="codeblue1">find_mp3_files</span>():&#13;
       <span class="codeorg">global</span> songs_found&#13;
       <span class="codeorg">global</span> number_of_songs&#13;
 &#13;
  <span class="ent">❷</span> mp3_files_playlist = glob.glob(<span class="codegreen1">'*.mp3'</span>)&#13;
  <span class="ent">❸</span> songs_found = mp3_files_playlist&#13;
  <span class="ent">❹</span> <span class="codepurple">print</span> (<span class="codegreen1">"I have found the following song"</span>, songs_found)&#13;
  <span class="ent">❺</span> number_of_songs = <span class="codepurple">len</span>(songs_found)&#13;
  <span class="ent">❻</span> <span class="codepurple">print</span> (<span class="codegreen1">"there are"</span>, number_of_songs, <span class="codegreen1">"songs"</span>)&#13;
 &#13;
   <span class="codered">#### set volume ###</span>&#13;
<span class="ent">❼</span> level = 0.10&#13;
<span class="ent">❽</span> pygame.mixer.music.set_volume(level)</pre>&#13;
<p class="caption"><a id="ch10ex03"/><strong>LISTING 10-3</strong> Finding the songs</p>&#13;
<p class="indent">The first line defines the <code>find_mp3_files()</code> function that contains the code to find each MP3 file and store the filenames <span class="ent">❶</span>. Because you’ll need to use the information gathered by this function later in the program, you import two global variables from earlier. These variables allow you to transfer the song details and number of songs data to the next function.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_175"/>Then create another variable, <code>mp3_files_playlist</code>, that uses the <code>glob()</code> function to search for all files ending with the extension <em>.mp3</em> <span class="ent">❷</span> and store them in the variable.</p>&#13;
<p class="indent">Next, copy the list of MP3 filenames to a new variable named <code>songs_found</code> <span class="ent">❸</span>. This keeps the original list stored in the <code>mp3_files_playlist</code> variable and enables you to edit the new list without affecting the old one. If you add new music to your <em>MP3</em> folder, it’s recognized and added to the song list each time the program runs.</p>&#13;
<p class="indent">Printing all the names of the MP3 files <span class="ent">❹</span> allows you to have a list of song titles. This works only if the filename is the same as the song name. For example, if the song is called “Life On Mars,” you need to save the MP3 file as <em>life_on_mars.mp3</em>. Once you detach the MP3 player from a screen and run it headless, you won’t see the printout of MP3 files, but executing this step is useful for testing.</p>&#13;
<p class="indent">Because you want the MP3 player to play through all the songs in the list, you need to figure out how many songs there are <span class="ent">❺</span> and see the number printed out <span class="ent">❻</span>. You must do this step anytime you add or remove songs from the playlist, because that changes the length of the list.</p>&#13;
<p class="indent">You also need to set the initial volume level for the volume-control buttons. This value is between 0 and 1, where 0 represents no sound and 1 represents the maximum volume. The volume range depends on the type of speaker you’re using. Set the initial level at 0.10, a tenth of the full volume, for now <span class="ent">❼</span>; you can change it later if it’s too loud or too quiet. The final line of code tells <code>pygame</code> to set the volume <span class="ent">❽</span>.</p>&#13;
<h5 class="h5">Creating the Code for Playing Songs</h5>&#13;
<p class="noindent"><a href="ch10.xhtml#ch10ex04">Listing 10-4</a> creates the main function, which controls the magic music box buttons.</p>&#13;
<pre>   <span class="codered">### Main code for playing and changing songs ###</span>&#13;
<span class="ent">❶</span> <span class="codeorg">def</span> <span class="codeblue1">play_mp3_songs</span>():&#13;
      <span class="codeorg">global</span> the_song&#13;
      <span class="codeorg">global</span> level&#13;
      <span class="codeorg">global</span> songs_found&#13;
      <span class="codeorg">global</span> number_of_songs   &#13;
   <span class="ent">❷</span> <span class="codeorg">if</span> playing_songs == <span class="codeorg">True</span>:   &#13;
      <span class="ent">❸</span> <span class="codeorg">while</span> the_song &lt; number_of_songs:&#13;
            <span class="codered">### Play a song ###</span>&#13;
         <span class="ent">❹</span> pygame.mixer.music.load(songs_found[the_song])&#13;
         <span class="ent">❺</span> pygame.mixer.music.play()&#13;
            <span class="codepurple">print</span> (<span class="codegreen1">"Playing Song"</span>)&#13;
         <span class="ent">❻</span> the_song = the_song + 1&#13;
            <span class="codepurple">print</span> (<span class="codegreen1">"the song number is"</span>, <span class="codepurple">str</span>(the_song))&#13;
 &#13;
         <span class="ent">❼</span> <span class="codeorg">while</span> pygame.mixer.music.get_busy():&#13;
            <span class="ent">❽</span> pygame.time.Clock().tick(10)  <span class="codered"># waits for song</span></pre>&#13;
<p class="caption"><a id="ch10ex04"/><strong>LISTING 10-4</strong> The magic music box playing code</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_176"/>It’s important to keep an eye on the indentation levels because most of the rest of the code is inside the <code>play_mp3_songs()</code> function. Remember that you can download the code from <em><a href="https://www.nostarch.com/raspiforkids/">https://www.nostarch.com/raspiforkids/</a></em> if you get stuck.</p>&#13;
<p class="indent">Define a new function called <code>play_mp3_songs()</code> <span class="ent">❶</span> that holds the main program code. Next, you add the four global variables you created earlier: <code>the_song</code> to control which MP3 file is playing, <code>level</code> to adjust the volume level, <code>songs_found</code> to allow access to the list of MP3 filenames, and <code>number_of_songs</code>.</p>&#13;
<p class="indent">Create a <code>while</code> loop <span class="ent">❷</span> that tells the magic music box to keep playing songs until it reaches the last one in the list.</p>&#13;
<p class="indent">Then make sure the music player stops playing music when it reaches the last track <span class="ent">❸</span>. If song number 4 of 20 is playing, the playlist will keep going, because 4 is less than the total number of songs. Once the playlist reaches song 20 of 20, it will loop back to the beginning. Later, you’ll use this part of the program to skip songs and control the volume.</p>&#13;
<p class="indent">The code then loads the MP3 file about to be played <span class="ent">❹</span>. Because you previously set <code>the_song</code> to 0, PyGame will load the first song in the list of MP3 files at index 0. When loaded, the program plays the file by using the code <code>pygame.mixer.music.play()</code> <span class="ent">❺</span>. Print the current song to see what it is and test that the name of the song matches the song that is playing.</p>&#13;
<p class="indent">Next, increment the value of <code>the_song</code> by 1 <span class="ent">❻</span>. This tells the program to select the next song on the list each time the program loops.</p>&#13;
<p class="indent">To recap, the program selects the first song and starts playing it. It then chooses the next song to play when the current song ends (or if you press the physical Next Song button on your box). Until then, it continues to play the current song by checking that the PyGame music mixer is busy <span class="ent">❼</span>. You use the PyGame clock <span class="ent">❽</span> to stop PyGame from playing the next song until the current song has stopped playing. This is used instead of the Python <code>wait()</code> or <code>sleep()</code> function because each song will have a different duration.</p>&#13;
<h5 class="h5"><span epub:type="pagebreak" id="page_177"/>Programming the Next Song Button</h5>&#13;
<p class="noindent">Now, add the code in <a href="ch10.xhtml#ch10ex05">Listing 10-5</a>, which lets you skip to the next song. This code continues from the previous listing, with the top line at the same indentation level as the last line of <a href="ch10.xhtml#ch10ex04">Listing 10-4</a>. Use this level as a guide for indenting the rest of this code.</p>&#13;
<pre>                <span class="codered">### Change the song ###</span> &#13;
             <span class="ent">❶</span> <span class="codeorg">if</span> play_skip.is_pressed:&#13;
                <span class="ent">❷</span> time.sleep(0.5)&#13;
                   <span class="codepurple">print</span> (<span class="codegreen1">"End of Songs"</span>)&#13;
                <span class="ent">❸</span> pygame.mixer.music.stop()&#13;
                <span class="ent">❹</span> <span class="codeorg">break</span></pre>&#13;
<p class="caption"><a id="ch10ex05"/><strong>LISTING 10-5</strong> Skipping songs</p>&#13;
<p class="indent">The code checks whether someone has pressed the Next Song button <span class="ent">❶</span>, which was named <code>play_skip</code> earlier. You also add a short delay <span class="ent">❷</span>, so PyGame can register the button press. Otherwise, the program might crash.</p>&#13;
<p class="indent">If someone has pressed the button, PyGame uses the function <code>pygame.mixer.music.stop()</code> <span class="ent">❸</span> to stop playing the music.</p>&#13;
<p class="indent">Once you’ve stopped the current song, you want the program to loop back to the beginning, where the <code>while the_song &lt; number_of_songs</code> condition checks whether songs are still in the list to be played. To do this, you break out of the loop so the PyGame mixer is no longer busy <span class="ent">❹</span>. PyGame will then play the next song, if there is one.</p>&#13;
<h5 class="h5">Increasing the Volume</h5>&#13;
<p class="noindent">Add the code in <a href="ch10.xhtml#ch10ex06">Listing 10-6</a> for the volume-control buttons. You start with the button to increase the volume, which you called <code>volume_up</code> earlier.</p>&#13;
<pre>                <span class="codered">### Change volume up ###</span>&#13;
             <span class="ent">❶</span> <span class="codeorg">if</span> volume_up.is_pressed:&#13;
                <span class="ent">❷</span> <span class="codeorg">if</span> level &lt; 1:&#13;
                   <span class="ent">❸</span> level = level + 0.10&#13;
                      <span class="codepurple">print</span> (level)&#13;
                   <span class="ent">❹</span> pygame.mixer.music.set_volume(level)&#13;
                <span class="ent">❺</span> <span class="codeorg">else</span>:&#13;
                      <span class="codeorg">pass</span>&#13;
                      <span class="codepurple">print</span> (<span class="codegreen1">"top volume"</span>)</pre>&#13;
<p class="caption"><a id="ch10ex06"/><strong>LISTING 10-6</strong> Increasing the volume</p>&#13;
&#13;
<p class="indent">As with <a href="ch10.xhtml#ch10ex05">Listing 10-5</a>, begin by checking whether the button (<code>volume_up</code>) has been pressed <span class="ent">❶</span>. If it has, the program needs to check that the current volume isn’t at its maximum. It does this by checking whether the current level is less than or equal to 1 <span class="ent">❷</span>, which is the maximum volume. If the level is less than 1, you allow <span epub:type="pagebreak" id="page_178"/>the program to increase the volume by adding 0.10 to the current level <span class="ent">❸</span>.</p>&#13;
<p class="indent">If the program has just started, the level will be 0.10. Pressing <code>volume_up</code> once will add 0.10, which increases the volume to 0.20 <span class="ent">❹</span>.</p>&#13;
<p class="indent">You code a response for when the condition “less than one” isn’t met, which is when the volume is at its maximum. Use an <code>else</code> statement <span class="ent">❺</span>, and then enter <code>pass</code> to keep the volume at the maximum level.</p>&#13;
<h5 class="h5">Decreasing the Volume</h5>&#13;
<p class="noindent">Add the code in <a href="ch10.xhtml#ch10ex07">Listing 10-7</a> to decrease the volume by using <code>volume_down</code>.</p>&#13;
<pre>                <span class="codered">### Change volume down ###</span>&#13;
             <span class="ent">❶</span> <span class="codeorg">if</span> volume_down.is_pressed:&#13;
                <span class="ent">❷</span> <span class="codeorg">if</span> level &gt; 0:&#13;
                   <span class="ent">❸</span> level = level - 0.10&#13;
                      <span class="codepurple">print</span> (level)&#13;
                      pygame.mixer.music.set_volume(level)&#13;
                <span class="ent">❹</span> <span class="codeorg">else</span>:&#13;
                       <span class="codeorg">pass</span>&#13;
                        <span class="codepurple">print</span> (<span class="codegreen1">"bottom volume"</span>)</pre>&#13;
<p class="caption"><a id="ch10ex07"/><strong>LISTING 10-7</strong> Decreasing the volume</p>&#13;
<p class="indent">This code is similar to the code for increasing the volume. You check whether <code>volume_down</code> has been pressed <span class="ent">❶</span>. If it has, check the current volume level and, if the volume level is greater than 0 <span class="ent">❷</span>, subtract 0.10 from the current level <span class="ent">❸</span>.</p>&#13;
<p class="indent">Again, use an <code>else</code> statement <span class="ent">❹</span> to <code>pass</code> the button press if the level is 0, because in that case, you can’t turn it down any lower.</p>&#13;
<h5 class="h5">Turning Off the Magic Music Box</h5>&#13;
<p class="noindent">The code in <a href="ch10.xhtml#ch10ex08">Listing 10-8</a> allows you to turn off the music box. You’ll program the music box to stop playing when you press the Power Off button or finish playing all the songs.</p>&#13;
<pre>             <span class="ent">❶</span> shutdown_btn.when_held = shutdown&#13;
&#13;
 <span class="ent">❷</span> <span class="codeorg">else</span>:&#13;
    <span class="ent">❸</span> <span class="codepurple">print</span> (<span class="codegreen1">"end of playlist"</span>)</pre>&#13;
<p class="caption"><a id="ch10ex08"/><strong>LISTING 10-8</strong> Shutting down the music box</p>&#13;
<p class="indent">Add the code for the Power Off button <span class="ent">❶</span>. Then use an <code>else</code> statement <span class="ent">❷</span> that will also shut down the music box if all the songs have been played, and print <code>end of playlist</code> <span class="ent">❸</span>.</p>&#13;
<h5 class="h5"><span epub:type="pagebreak" id="page_179"/>Ending the Program</h5>&#13;
<p class="noindent">You’ve defined the three functions that do all the work. Now finish the program by using <a href="ch10.xhtml#ch10ex09">Listing 10-9</a> to call each of these functions.</p>&#13;
<pre>   <span class="codered">### Main Program ###</span>&#13;
<span class="ent">❶</span> find_mp3_files()&#13;
<span class="ent">❷</span> button.wait_for_press()&#13;
<span class="ent">❸</span> play_mp3_songs()</pre>&#13;
<p class="caption"><a id="ch10ex09"/><strong>LISTING 10-9</strong> Calling the magic music box’s three functions</p>&#13;
<p class="indent">The <code>find_mp3_files()</code> <span class="ent">❶</span> function locates all the MP3 files whenever the program is running. So if you add new MP3 files, the function will find them and add them to the playlist.</p>&#13;
<p class="indent">The <code>button.wait_for_press()</code> <span class="ent">❷</span> function adds the user interaction to the buttons so the box reacts accordingly when you press a button.</p>&#13;
<p class="indent">The <code>play_mp3_songs()</code> <span class="ent">❸</span> function runs the main program loop, which checks whether there are MP3 files to play and then plays each one. It also checks whether any button has been pressed and responds if it has.</p>&#13;
<h4 class="h4" id="ch10lev2sec4">Running Your Program</h4>&#13;
<p class="noindent">It’s time to test your program! If you’re using a Bluetooth speaker, check that it’s paired with your Raspberry Pi. If you’re using a speaker via the audio jack, make sure it’s properly connected. Then save the program and press <strong>F5</strong> to run it.</p>&#13;
<p class="indent">The program should locate all the MP3 files in the folder and build a list of songs. It will then play the first song in the list. Press the <strong>Next Song</strong> button to change the song. Then try the volume buttons. Press the <strong>Power Off</strong> button to stop the music playing and shut down your Raspberry Pi.</p>&#13;
<p class="indent">If your MP3 player doesn’t work correctly, check for the following errors:</p>&#13;
<ul>&#13;
<li class="noindent">Is the volume low or muted?</li>&#13;
<li class="noindent">Is the audio set to either Bluetooth or the headphone jack?</li>&#13;
<li class="noindent">Is the Bluetooth speaker paired?</li>&#13;
<li class="noindent">Are the MP3 files saved in the same folder as the Python code?</li>&#13;
<li class="noindent">Do the sound files end in the extension <em>.mp3</em>?</li>&#13;
<li class="noindent">Are the buttons wired to the GPIO pin numbers used in the program code?</li>&#13;
</ul>&#13;
<h3 class="h3" id="ch10lev1sec4"><span epub:type="pagebreak" id="page_180"/>AUTOMATICALLY STARTING THE MP3 PLAYER ON BOOT-UP</h3>&#13;
<p class="noindent">As a finishing touch, let’s make your magic music box turn on and start playing songs anytime you plug it into a power supply. You can do this in two ways, depending on whether you’re using the headphone jack or a Bluetooth speaker.</p>&#13;
<h4 class="h4" id="ch10lev2sec5">Headphone Jack Option</h4>&#13;
<p class="noindent">If you’re using the headphone jack, you’ll use cron, the time-based job-scheduling tool you used in <a href="ch09.xhtml#ch09">Chapter 9</a>. The cron program enables you to run a particular program automatically at a specific time.</p>&#13;
<p class="indent">To use cron, you need to create instructions about which event you want to run and when you want to run it. You do this in the <em>crontab</em> file, which holds instructions for which programs or events to run and, most important, when to run these events.</p>&#13;
<p class="indent">Open the terminal and enter the following command to open the cron console:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo crontab –e</span></pre>&#13;
<p class="indent">The console will present you with three methods of editing the cron file. Select option 2 and press <span class="small">ENTER</span> to open the crontab file with the nano text editor. Scroll to the bottom of the text in the crontab file and locate the blank space. Then add the following line of code:</p>&#13;
<pre><span class="codestrong1">@reboot sudo python3 /home/pi/MP3/music_box.py &amp;</span></pre>&#13;
<p class="indent">The command states that every time the Raspberry Pi reboots, it should run Python in super user mode (which grants permission to run anything, just like administrative mode), open the <em>/home/pi/MP3</em> folder, and execute the program called <em>music_box.py</em>.</p>&#13;
<p class="indent">If you named your code file something else, replace <em>music_box.py</em> with the name you gave it. Also check that the folder path is correct by opening the folder where your <em>music_box.py</em> program is stored and noting the file path.</p>&#13;
<p class="indent">The <code>&amp;</code> at the end of the code line tells your program to run in the background, so you can do other tasks with your Raspberry Pi at the same time.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_181"/>Once you have checked the command details and are confident that they’re correct, press <span class="small">CTRL</span>-X to save and exit the crontab file. Now, each time you turn on or reboot your Raspberry Pi, the crontab file will run, starting the magic music box.</p>&#13;
<p class="indent">If you want to stop the program from running automatically, open the crontab file again from the terminal by entering this command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">crontab –e</span></pre>&#13;
<p class="indent">Then delete the line of code that you added earlier. Save the file and reboot.</p>&#13;
<p class="indent">Because the MP3 player is designed to run headless, you don’t need the Raspberry Pi to boot to the desktop and display the background screen and icons. You also don’t need to use the mouse. Booting to the desktop takes longer because of these unnecessary items, and the process uses more memory and processing power. You won’t see the desktop, so it’s pointless to load it. Instead, you’ll configure the Pi to boot from the command line. Open the terminal window and enter this command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo raspi-config</span></pre>&#13;
<p class="indent">Next, select the third option, <strong>Boot Options</strong>, and press <span class="small">ENTER</span>. Then select the <strong>B1 Desktop / CLI</strong> option, select the <strong>B2 Console Autologin</strong> option, select <strong>&lt;OK&gt;</strong>, and press <span class="small">ENTER</span> (<a href="ch10.xhtml#ch10fig06">Figure 10-6</a>). You’ll need to restart your Raspberry Pi.</p>&#13;
<div class="image"><img alt="Image" src="../images/10fig06.jpg"/></div>&#13;
<p class="figcap" id="ch10fig06"><strong>FIGURE 10-6</strong> Booting to the command line with auto login</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_182"/>Select the <strong>Finish</strong> option, and you’ll be prompted to save the config file and reboot. Select <strong>Yes</strong>, and your Pi will restart. As your Raspberry Pi boots, the magic music box will load.</p>&#13;
<h4 class="h4" id="ch10lev2sec6">Bluetooth Option</h4>&#13;
<p class="noindent">If you’re using a Bluetooth speaker, you can still automatically start the program on boot-up, but it’s slightly more challenging because you need to configure numerous settings.</p>&#13;
<p class="indent">You’ll also need to add a line of text that triggers Python to run your program, to the <em>.bashrc</em> file, which is a shell script that runs whenever the Raspberry Pi boots up.</p>&#13;
<p class="indent">Before you make a change to this file, make sure the Bluetooth speaker is paired with your Raspberry Pi. To give the Python program access to the speaker, you need to boot to the GUI desktop, not the command line. However, when PyGame runs, it turns the screen blank. This is fine, because the magic music box doesn’t require a screen. But it makes solving any issue in the code difficult because you can’t see or access the program code.</p>&#13;
<p class="indent">To remedy this, open the Python MP3 player program and add <code>time.sleep(30)</code> after the lines importing the libraries to add a 30-second delay to the start of the program. This gives you time to edit or adjust the setup code if it’s not working correctly. Just remember when you’re testing the program that you’ve added the delay, so you don’t think the program isn’t working!</p>&#13;
<p class="indent">If, after adding the 30-second delay, Python has loaded PyGame, and you still need to access the Raspberry Pi, you’ll need to access it remotely using SSH. But before you add the automatic startup script, enable SSH in the configuration settings. For a reminder on how to do this, refer to “Accessing the Raspberry Pi via SSH” on <a href="ch01.xhtml#page_25">page 25</a>.</p>&#13;
<p class="indent">Now you’re ready to create the boot-up script. Open the terminal window and enter the following command to open the <em>.bashrc</em> file:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo nano .bashrc</span></pre>&#13;
<p class="indent">Scroll down to the bottom of the file and enter <span class="codestrong">python3</span> followed by the file path of your MP3 program—for example, <span class="codestrong">python3 /home/pi/MP3/MP3_Player_BT.py</span> (<a href="ch10.xhtml#ch10fig07">Figure 10-7</a>).</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_183"/><img alt="Image" src="../images/10fig07.jpg"/></div>&#13;
<p class="figcap" id="ch10fig07"><strong>FIGURE 10-7</strong> The boot-up script</p>&#13;
<p class="indent">Remember to replace the example file path with the filename and location of your program. Save the file, and then reboot the Raspberry Pi. It should load your MP3 Python code. Remember to wait 30 seconds and ensure that your Bluetooth speaker is still paired. After the delay, the screen will turn black. Press the <strong>Next Song</strong> button for the first song.</p>&#13;
<p class="indent">If you can’t hear the music but suspect the code is working, try plugging a speaker or a pair of headphones into the headphone jack. If you can hear the music, you know the program is working correctly and that there’s an issue with the Bluetooth pairing.</p>&#13;
<p class="indent">If you encounter any other issues and you need to edit the code, you can either reboot your Raspberry Pi or open the terminal window and press <span class="small">CTRL</span>-X or <span class="small">CTRL</span>-Z to halt the code. Then check the various settings. If this doesn’t work, use SSH to access the Raspberry Pi and open, edit, or comment out the <em>.bashrc</em> file; then reboot. Continue testing your music box until you’re confident that the hardware and program code are functioning correctly.</p>&#13;
<h3 class="h3" id="ch10lev1sec5">PUTTING IT ALL TOGETHER</h3>&#13;
<p class="noindent">Once you’ve completed the program code and tested that it’s working correctly, you can begin to secure the hardware into your box. It might look something like <a href="ch10.xhtml#ch10fig08">Figure 10-8</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_184"/><img alt="Image" src="../images/10fig08.jpg"/></div>&#13;
<p class="figcap" id="ch10fig08"><strong>FIGURE 10-8</strong> The finished magic music box</p>&#13;
<p class="indent">If you’re using a simple container, like a lunch box, place the Raspberry Pi and battery into the box and secure the lid. If you’re using a wooden box, like the one shown in <a href="ch10.xhtml#ch10fig08">Figure 10-8</a>, you can mount the Raspberry Pi by using double-sided tape, mounting putty, or a small nylon screw.</p>&#13;
<p class="indent">Then you can tuck away and hide the wires from outside view. You can also make additional holes to house any power or USB cables that you need. If the program code fails, the best solution is to remove the SD card and put it into another Pi. Once you’ve resolved the problem, return the SD card to the original MP3 player Pi.</p>&#13;
<h3 class="h3" id="ch10lev1sec6">WRAPPING UP</h3>&#13;
<p class="noindent">Congratulations! You’ve built your own stand-alone magic music box. You can now add features to your magic music box, such as the following:</p>&#13;
<ul>&#13;
<li class="noindent">More MP3 files</li>&#13;
<li class="noindent">An LED that flashes when the music player has loaded</li>&#13;
<li class="noindent">LEDs that flash as the music is playing</li>&#13;
<li class="noindent">A button to mute the volume</li>&#13;
<li class="noindent">Additional buttons to play the previous song, an excerpt of the playlist, or a secret Easter egg song</li>&#13;
<li class="noindent">A small LCD screen that displays the name of the current song</li>&#13;
</ul>&#13;
</body></html>