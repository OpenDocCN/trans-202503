<html><head></head><body><div class="chapter" title="Chapter&#xA0;18.&#xA0;Animation Tools"><div class="titlepage"><div><div><h1 class="title"><a id="animation_tools"/>Chapter 18. Animation Tools</h1></div></div></div><p><a id="iddle1907" class="indexterm"/><a id="iddle1943" class="indexterm"/><a id="iddle1959" class="indexterm"/><a id="iddle2812" class="indexterm"/><a id="iddle2868" class="indexterm"/><a id="iddle2910" class="indexterm"/><a id="iddle2958" class="indexterm"/><a id="iddle3028" class="indexterm"/><a id="iddle4363" class="indexterm"/><a id="iddle4852" class="indexterm"/><a id="iddle5146" class="indexterm"/><a id="iddle5990" class="indexterm"/>Many powerful tools are designed specifically for digital animation. Blender, for example, is free software for creating professional 3D animation (see <span class="emphasis"><em><a class="ulink" href="http://www.blender.org/">http://www.blender.org/</a></em></span>). Compared to Blender, GIMP offers limited animation tools. But if you just want to make a simple animation, GIMP can get the job done. As you saw in <a class="xref" href="ch06.html" title="Chapter 6. Animation">Chapter 6</a>, you can use GIMP to make animated GIFs for a web page, and as you’ll see in this chapter, you can also use GIMP to edit a short digital video.</p><p>We begin this chapter with the principles of animation, and then we discuss the file formats specific to animations. We also cover GIMP’s various tools for building animations, including GAP (GIMP Animation Plug-in; installed separately from GIMP).</p></div>
<div class="sect1" title="18.1 Principles of Animation"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot1_principles_of_animation"/>18.1 Principles of Animation</h1></div></div></div><p>To use the animation building tools available in GIMP and the GAP plug-in effectively, you must first understand the underlying principles of animation. First, we present the physiology of viewing animations and their internal and external digital representations, and then we discuss how these principles work in GIMP.</p><div class="sect2" title="Frame Frequency and Vision"><div class="titlepage"><div><div><h2 class="title"><a id="frame_frequency_and_vision"/>Frame Frequency and Vision</h2></div></div></div><p>Animations are made with a sequence of images, called <span class="emphasis"><em>frames</em></span>. Images persist on the eye’s retina, especially when there is a strong contrast between light and dark (as in a movie theater), so when images are displayed in quick succession, they appear to be a continuous animation.</p><p>Currently, the standard frame frequency is 24 frames per second. Hand-drawn cartoons were usually filmed at 12 frames per second, and each frame was photographed twice. But in the earliest movies, the frequency was only 20 frames per second, which is why actors appear to move too fast in very old films.</p><p>Television is different from movies projected in a theater. Because the contrast between the screen and the surroundings is generally less than in a movie theater, the image persistence is shorter, so frames must be shown at a higher frequency. Usually only every other line is drawn on each screen refresh, so at a rate of 60 refreshes per second, the full image is redrawn only 30 times per second.</p><p>The refresh frequency may be even higher for digital animation viewed on a monitor, thanks to the capabilities of the screen and the computer itself. Because people use computers in bright <a id="iddle1130" class="indexterm"/><a id="iddle1944" class="indexterm"/><a id="iddle1948" class="indexterm"/><a id="iddle2261" class="indexterm"/><a id="iddle2294" class="indexterm"/><a id="iddle2341" class="indexterm"/><a id="iddle2358" class="indexterm"/><a id="iddle2639" class="indexterm"/><a id="iddle2793" class="indexterm"/><a id="iddle2797" class="indexterm"/><a id="iddle2813" class="indexterm"/><a id="iddle2814" class="indexterm"/><a id="iddle2827" class="indexterm"/><a id="iddle2857" class="indexterm"/><a id="iddle2985" class="indexterm"/><a id="iddle2997" class="indexterm"/><a id="iddle3573" class="indexterm"/><a id="iddle3600" class="indexterm"/><a id="iddle4784" class="indexterm"/><a id="iddle4853" class="indexterm"/>offices and even outside, the contrast with the environment is often weak, so a (in animation) minimum of 60 frames per second is necessary.</p><p>If you were to view the frames independently, you would see motion blur on fast-moving objects, but when you watch the video, everything looks sharp because the visual centers in the brain process the blurry frames into a moving object. The ability to create a sharp image from blurred frames depends on the image’s persistence. If persistence is too short due to low contrast between the room and the screen, then the motion blur can become visible. Because of this, computer games with very quick movement often need a frame frequency greater than 60 frames per second.</p></div><div class="sect2" title="Frames and Layers"><div class="titlepage"><div><div><h2 class="title"><a id="frames_and_layers"/>Frames and Layers</h2></div></div></div><p>Depending on the tool used, frames in GIMP can either be layers in one image or separate image files. When stored as layers, frames cannot include multiple layers, but when stored as multiple images, they can.</p><p>To use layers as frames, you have to give each layer a <span class="emphasis"><em>duration</em></span> and <span class="emphasis"><em>replacement mode</em></span>. You do this by editing the layer name itself, by double-clicking it in the Layers dialog, by selecting <span class="strong"><strong>Layers: right-click &gt; Edit Layer Attributes</strong></span>, or by pressing <span class="inlinemediaobject"><a id="inline_id00519"/><img src="httpatomoreillycomsourcenostarchimages1455250.png.jpg" alt=""/></span> when the mouse pointer is in the Layers dialog. The frame duration is specified in milliseconds and within parentheses, as in <code class="literal">(200ms)</code>, and the replacement mode is also designated in parentheses, as in <code class="literal">(replace)</code>. The order in which the layers appear on the screen is <span class="emphasis"><em>from bottom to top</em></span>.</p><p>When frames are independent images, they’re all stored in one folder and named in order. The names are something like <span class="emphasis"><em>name</em></span><code class="literal">_00001.xcf</code>, <span class="emphasis"><em>name</em></span><code class="literal">_00002.xcf</code>, and so on (where <span class="emphasis"><em>name</em></span> is whatever you designate). The frames’ duration cannot be changed, so to slow down part of the animation, you must duplicate the frames, and to speed it up, you delete frames. Because frames are images and not layers, no replacement mode is available. Every new frame replaces the preceding one.</p><div class="figure"><a id="gif_export_file_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01522"/><img src="httpatomoreillycomsourcenostarchimages1457074.png.jpg" alt="The GIF Export File dialog"/></div></div><p class="title">Figure 18-1. The GIF Export File dialog</p></div></div><div class="sect2" title="Output Formats"><div class="titlepage"><div><div><h2 class="title"><a id="output_formats"/>Output Formats</h2></div></div></div><p>Simple animations are represented in GIF encoding, and the GIF Export File dialog (shown in <a class="xref" href="ch18s01.html#gif_export_file_dialog" title="Figure 18-1. The GIF Export File dialog">Figure 18-1</a>) can be set to save the frames as an animation instead of being set to flatten the image. When you choose to export as an animated GIF, you can also choose</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>whether the animation runs only once or forever</p></li><li class="listitem"><p>the duration of frames</p></li><li class="listitem"><p>the replacement mode (called <span class="emphasis"><em>frame disposal</em></span>)</p></li><li class="listitem"><p>whether to use the specified duration for all frames</p></li><li class="listitem"><p>whether to use the specified replacement mode for all frames</p></li></ul></div><p>The default delay of 100 milliseconds per frame results in only 10 frames per second. This delay is fine for a slow animation, but the frame frequency should be much higher if the animation has fast movements or else it will look jerky. To increase the frame frequency, reduce the frame duration, for example, to 40 milliseconds to obtain a frequency of 25 frames per second.</p><p><a id="iddle2818" class="indexterm"/><a id="iddle2846" class="indexterm"/><a id="iddle2880" class="indexterm"/><a id="iddle3005" class="indexterm"/><a id="iddle3029" class="indexterm"/><a id="iddle3254" class="indexterm"/><a id="iddle3409" class="indexterm"/><a id="iddle3477" class="indexterm"/><a id="iddle3488" class="indexterm"/><a id="iddle3825" class="indexterm"/><a id="iddle3867" class="indexterm"/><a id="iddle4371" class="indexterm"/><a id="iddle5991" class="indexterm"/>Using GIF for animation has all the drawbacks of this encoding, the biggest of which is the indexed representation, explained more thoroughly in <a class="xref" href="ch20.html" title="Chapter 20. Image Formats">Chapter 20</a>. Basically, GIF can represent at most only 256 different colors, which is fine for a cartoon or logo but not for a home movie.</p><p>GIF animations can be viewed on any graphical web browser, so they’re popular on web pages. You can use the <code class="literal">&lt;img&gt;</code> HTML tag to display an image inside a page. It has to be loaded in full before the animation begins, so keep animations to a few hundred KB maximum, and avoid using more than one animation on a page.</p><p>JPEG encoding can’t be used for animations, but the corresponding MPEG encoding can. According to the official MPEG website (<span class="emphasis"><em><a class="ulink" href="http://mpeg.chiariglione.org/">http://mpeg.chiariglione.org/</a></em></span>), MPEG-1 was established in 1988 and is the standard on which Video CD and MP3 are based. DVDs are based on MPEG-2, and MPEG-4 is the multimedia standard. Other versions, like MPEG-7 and MPEG-21, also have modern applications.</p><p>An MPEG is a video made of JPEG frames. When the difference between successive frames is small (as when only a person’s mouth is moving), you don’t need to represent the entire frame again, reducing the video file size and increasing the feasible frame frequency and definition.</p><p>So an MPEG video comprises several frame types: complete JPEG images, frames of the differences between the current and the previous frame, and frames of the differences between the current and the next frame. The video recorder must save three different frames at the same time, including full JPEG frames at regular intervals.</p><p>The MPEG format also encodes the audio, as most video formats do. The GAP plug-in set generates MPEG-1 and MPEG-2 formats.</p><p>Similar to JPEG, PNG has a corresponding encoding for animations, called MNG. Unfortunately, this format is not supported by some web browsers, so it’s not a viable replacement for animated GIFs. For this reason, we won’t cover it, but GIMP can work with MNG animation.</p><p>Although they can use indexed representation, PNG and MNG generally use RGB, whereas GIF always uses indexed representation. Converting to indexed representation inevitably results in a loss in quality, and the loss is even worse when working with animation. If the MNG format were supported by more browsers, it would be much better than GIF for web animations.</p><p>Some proprietary formats are also supported by GIMP with GAP, but we won’t cover those either, except to say that GAP can generate the Apple QuickTime format and read other proprietary formats like Microsoft AVI.</p><p>Because animations can be represented as layers or images, using several different formats, you’ll find conversion tools handy. GAP provides tools to</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>convert a multilayer image to a multi-image animation, and vice versa</p></li><li class="listitem"><p>convert an MPEG or AVI animation to a multi-image animation, and vice versa</p></li></ul></div></div><div class="sect2" title="Optimizing Animations"><div class="titlepage"><div><div><h2 class="title"><a id="optimizing_animations"/>Optimizing Animations</h2></div></div></div><p>An animation is generally a huge file. For example, if one JPEG is 33KB and you build an animation with a total of 21 frames (about 2 seconds!), the resulting animation will be 1.8MB. You can easily extrapolate that a one-minute animation using similar photos will be more than 54MB, which is far too large for a web page.</p><p>Fortunately, animation size can be reduced via optimization. For example, GIMP has a tool for optimizing animated GIFs. If only a small area in the animation is changing (a hand moves, a person smiles), then the parts of the image that don’t change from frame to frame are represented only once in the background layer. Subsequent layers are transparent except when things change, leading to a much smaller file size.</p><p><a id="iddle2359" class="indexterm"/><a id="iddle2524" class="indexterm"/><a id="iddle2828" class="indexterm"/><a id="iddle2998" class="indexterm"/><a id="iddle3030" class="indexterm"/><a id="iddle3468" class="indexterm"/><a id="iddle3843" class="indexterm"/><a id="iddle3868" class="indexterm"/><a id="iddle5643" class="indexterm"/><a id="iddle5992" class="indexterm"/>When we applied this tool to the 1.8MB animation, we reduced its size to 337KB (one-fifth the original size). This reduction is significant, but the 54MB one-minute animation would still be too large for a web page because it would reduce only to about 10MB, and a nonstreaming video on a web page should probably be 2MB maximum. The MPEG format can reduce the size of a video more than GIF optimization can; therefore, it is the standard for video on the Web.</p></div></div>
<div class="sect1" title="18.2 Tools for Building Multilayer Animations"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot2_tools_for_building_multilayer_a"/>18.2 Tools for Building Multilayer Animations</h1></div></div></div><p>In this section, we cover tools for building animations that will be stored as a single image, with each layer acting as a frame. Some of these tools were used in <a class="xref" href="ch06.html" title="Chapter 6. Animation">Chapter 6</a>, where we demonstrated simple animation techniques.</p><div class="sect2" title="Animating by Hand"><div class="titlepage"><div><div><h2 class="title"><a id="animating_by_hand"/>Animating by Hand</h2></div></div></div><p>Suppose you want to move an object on a fixed background, as cartoon animators did 50 years ago. For example, how might you animate an old biplane landing in a field? You might try the method shown in <a class="xref" href="ch06s01.html" title="6.1 Tutorial: Animated Text">6.1 Tutorial: Animated Text</a>, placing the plane in its successive positions in separate layers. But you have a problem: Each plane you position is added to the image instead of replacing the previous one, so the final animation is full of planes. And if you choose the replace mode in the layers, the background disappears as soon as the plane appears.</p><p>To make this animation work, you can do the following:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Duplicate the background for each plane layer.</p></li><li class="listitem"><p>Place the background layers below each plane layer.</p></li><li class="listitem"><p>Merge each plane layer with the underlying background layer.</p></li></ol></div><div class="figure"><a id="iwarp_dialogcomma_animate_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01523"/><img src="httpatomoreillycomsourcenostarchimages1457076.png.jpg" alt="The IWarp dialog, Animate tab"/></div></div><p class="title">Figure 18-2. The IWarp dialog, Animate tab</p></div><p>Now the animation works, but making even a short animation by hand takes a long time. Wouldn’t it be great to have tools that automate parts of the animation-building process? With GIMP, we do.</p></div><div class="sect2" title="The IWarp Tool"><div class="titlepage"><div><div><h2 class="title"><a id="iwarp_tool"/>The IWarp Tool</h2></div></div></div><p>The IWarp tool, accessed via <span class="strong"><strong>Image: Filters &gt; Distorts &gt; IWarp</strong></span>, is demonstrated in <a class="xref" href="ch06s03.html#interactive_deformation" title="Interactive Deformation">Interactive Deformation</a>, and its dialog is shown in <a class="xref" href="ch06s03.html#iwarp_dialog-id00071" title="Figure 6-32. The IWarp dialog">Figure 6-32</a>.</p><p>To use IWarp for animation, warp the image as you would warp a still photo, and then click the A<span class="smaller">NIMATE</span> tab and choose to generate an animation. In <a class="xref" href="ch18s02.html#iwarp_dialogcomma_animate_tab" title="Figure 18-2. The IWarp dialog, Animate tab">Figure 18-2</a>, we chose to create 20 frames between the first and last image, and we selected P<span class="smaller">ING PONG</span>, which repeats the animation in reverse. These settings result in 40 layers (20 forward and another 20 in reverse order), numbered from 0 to 39. Because the number of frames determines the animation’s smoothness, don’t reduce the number of frames unless the final file size is critical. If you plan to export the animation as a GIF file, you can optimize it to reduce file size later.</p></div><div class="sect2" title="The Morph Tool"><div class="titlepage"><div><div><h2 class="title"><a id="morph_tool"/>The Morph Tool</h2></div></div></div><p>The Morph tool is part of GAP. It generates multilayer animations by progressively transforming one image into another. Use it to morph between images of people, as demonstrated in <a class="xref" href="ch06.html" title="Chapter 6. Animation">Chapter 6</a>. You can also use it to morph one word into another, as we’ll demonstrate now.</p><div class="figure"><a id="building_one_of_the_logos"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01524"/><img src="httpatomoreillycomsourcenostarchimages1457078.png.jpg" alt="Building one of the logos"/></div></div><p class="title">Figure 18-3. Building one of the logos</p></div><div class="sect3" title="Morphing Text"><div class="titlepage"><div><div><h3 class="title"><a id="morphing_text"/>Morphing Text</h3></div></div></div><p><a id="iddle1071" class="indexterm"/><a id="iddle3589" class="indexterm"/>In this example, the word “Windows” will be progressively morphed to the word “Linux!!” with just a few clicks.</p><p>First, build the logos using <span class="strong"><strong>Image: File &gt; Create &gt; Logos &gt; Glossy</strong></span>, with the default parameters, as shown in <a class="xref" href="ch18s02.html#building_one_of_the_logos" title="Figure 18-3. Building one of the logos">Figure 18-3</a>. Enter <span class="emphasis"><em>Windows</em></span> in the text field to create the first logo (<a class="xref" href="ch18s02.html#initial_logo-id00184" title="Figure 18-4. The initial logo">Figure 18-4</a>), and then enter <span class="emphasis"><em>Linux!!</em></span> to create the second logo (<a class="xref" href="ch18s02.html#final_logo-id00185" title="Figure 18-5. The final logo">Figure 18-5</a>). Flatten both logos (<span class="strong"><strong>Layers: right-click &gt; Flatten Image</strong></span>) so they each contain only one layer. Copy the Linux layer to the Windows image as a new layer by dragging the layer thumbnail to the image.</p><p>Because the Linux layer is narrower than the Windows layer, you must increase its size to match via <span class="strong"><strong>Image: Layer &gt; Layer to Image Size</strong></span>. Also add an Alpha channel to both layers.</p><p>Now apply the Morph tool by selecting <span class="strong"><strong>Image: Video &gt; Morphing &gt; Morph</strong></span>, which opens the dialog in <a class="xref" href="ch18s02.html#morph_tool_dialog-id00186" title="Figure 18-6. The Morph tool dialog">Figure 18-6</a>.</p><div class="figure"><a id="initial_logo-id00184"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01525"/><img src="httpatomoreillycomsourcenostarchimages1457080.png.jpg" alt="The initial logo"/></div></div><p class="title">Figure 18-4. The initial logo</p></div><div class="figure"><a id="final_logo-id00185"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01526"/><img src="httpatomoreillycomsourcenostarchimages1457082.png.jpg" alt="The final logo"/></div></div><p class="title">Figure 18-5. The final logo</p></div><p>How you place the <span class="emphasis"><em>shape points</em></span> determines how a point in the first image is morphed into a point in the second image. For a more complicated project, you should choose points carefully, but in this case, just click the S<span class="smaller">HAPE</span> button, and the tool automatically creates and places points on the sides of both images.</p><p>The number of S<span class="smaller">TEPS</span> is the number of frames in the animation. Choose 20, click OK, and that’s it! The animation plays on a loop, but you can pause it between iterations by increasing the duration of the top layer. Optimize the animation and save it as a GIF.</p></div><div class="sect3" title="The Morph Tool Dialog"><div class="titlepage"><div><div><h3 class="title"><a id="morph_tool_dialog"/>The Morph Tool Dialog</h3></div></div></div><p>Let’s explore this dialog section by section. In the top-left section, the S<span class="smaller">OURCE</span> menu allows you to choose the source layer from the images open in GIMP. The X and Y boxes display the coordinates of the current shape point in the source layer. You can set these points by clicking the layer image, and you can adjust the coordinates using the vertical arrows at the right. Click F<span class="smaller">IT</span> Z<span class="smaller">OOM</span> to reset the zoom to show the entire source layer.</p><p>The top-right section is similar to the top-left section, except that it deals with the destination instead of the source layer. This section also includes P<span class="smaller">OINT</span>, which shows the current shape point. You can choose any shape point and then change or check its position with the X and Y boxes.</p><div class="figure"><a id="morph_tool_dialog-id00186"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01527"/><img src="httpatomoreillycomsourcenostarchimages1457084.png.jpg" alt="The Morph tool dialog"/></div></div><p class="title">Figure 18-6. The Morph tool dialog</p></div><p><a id="iddle5059" class="indexterm"/>The bottom-left section of the dialog includes these options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>S<span class="smaller">HAPE</span>P<span class="smaller">OINTS</span> and S<span class="smaller">HAPE</span> are used to set the number of shapepoints that are automatically placed and to place them. The more shape points you use, the more precise the morphing. But when you use more shape points, you also use more computing power. As a rule, place shape points where things change: You don’t need two points close to each other if no important variation occurs in the image between them.</p><p>The automatic shape points are placed along the outline of the source layer. Transparent pixels are not included in the outline.</p><p>If you <span class="inlinemediaobject"><a id="inline_id00520"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>-click the S<span class="smaller">HAPE</span> button, the number of points specified is <span class="emphasis"><em>added</em></span> to the existing number of points. Otherwise the specified points replace the existing ones.</p></li><li class="listitem"><p>R<span class="smaller">ADIUS</span> sets the size of the area influenced by every shape point.</p></li><li class="listitem"><p>S<span class="smaller">TEPS</span> sets the number of layers to be added or modified between the source layer (at the bottom) and the target layer (at the top). Any preexisting middle layers are modified.</p></li><li class="listitem"><p>The two color buttons to the right of the S<span class="smaller">TEPS</span> box set the colors of source and destination shape points.</p></li><li class="listitem"><p>L<span class="smaller">OCATE</span> is useful for automatically locating features in the source and destination layers, but it can be time consuming because of the computations involved. It is triggered when you <span class="inlinemediaobject"><a id="inline_id00521"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-click a shape point. The source shape point is automatically placed on the closest feature and the destination point on the feature that best matches the source. The first field in the dialog sets the radius in the source layer, the second field sets the radius of the area to be searched in the destination layer, and the last field is the edge-detection threshold for detecting a feature. You can play with these parameters, but their default values are already well chosen.</p></li></ul></div><p>Finally, the bottom-right portion of the Morph tool dialog covers these settings:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>E<span class="smaller">DIT</span> M<span class="smaller">ODE</span> has five options. S<span class="smaller">ET</span> is the most versatile. It lets you add a new shape point by clicking in the source layer. <span class="inlinemediaobject"><a id="inline_id00522"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>-click to create a new point that’s near an existing one. Right-click to delete an existing point. This mode also lets you drag existing points to a new position. M<span class="smaller">OVE</span> mode is similar to S<span class="smaller">ET</span>, but clicking doesn’t create a new point.</p><p>D<span class="smaller">ELETE</span> mode is used only to delete a point. The Z<span class="smaller">OOM</span> mode allows you to zoom in on a specific point. <span class="inlinemediaobject"><a id="inline_id00523"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-clicking zooms out. S<span class="smaller">HOW</span> mode should simply show the <a id="iddle2411" class="indexterm"/><a id="iddle3031" class="indexterm"/><a id="iddle3574" class="indexterm"/><a id="iddle3963" class="indexterm"/><a id="iddle4572" class="indexterm"/>coordinates of the point you clicked, but as this book goes to press, this mode is unusable.</p></li><li class="listitem"><p>I<span class="smaller">NTENSITY</span> is active if you select U<span class="smaller">SE</span> I<span class="smaller">NTENSITY</span>. When this box is checked, the shape point’s influence decreases geometrically with increasing distance from the point to the deformation radius. When the U<span class="smaller">SE</span> I<span class="smaller">NTENSITY</span> box is unchecked, the influence decreases linearly.</p></li><li class="listitem"><p>R<span class="smaller">ENDER</span> M<span class="smaller">ODE</span> can be set to Morph or Warp. M<span class="smaller">ORPH</span> is the normal mode. In this mode, the source layer transforms progressively into the destination layer by <span class="emphasis"><em>forward warps</em></span> (warping the source layer into the destination layer), <span class="emphasis"><em>backward warps</em></span> (warping the destination layer into the source layer), and <span class="emphasis"><em>cross fades</em></span>. W<span class="smaller">ARP</span> makes the transition using only forward warps, but every time we’ve tried it, the results were strange and not very useful.</p></li><li class="listitem"><p>When checked (which it is by default), C<span class="smaller">REATE</span> L<span class="smaller">AYERS</span> creates the number of new layers indicated in the S<span class="smaller">TEPS</span> box. When unchecked, the existing layers are modified, but no new layers are created.</p></li><li class="listitem"><p>When checked, Q<span class="smaller">UALITY</span> uses a better transformation algorithm, but this algorithm is much more processor intensive and may crash the tool.</p></li><li class="listitem"><p>When checked, the L<span class="smaller">INES</span> box displays small vectors that show how a specific shape point will be moved.</p></li><li class="listitem"><p>The R<span class="smaller">ESET</span> button removes all existing shape points.</p></li><li class="listitem"><p>The S<span class="smaller">WAP</span> button exchanges the source and destination, but it does not move the layers in the image.</p></li><li class="listitem"><p>The S<span class="smaller">AVE</span> and O<span class="smaller">PEN</span> buttons do what you’d expect: S<span class="smaller">AVE</span> saves all the shape point coordinates in a file, and O<span class="smaller">PEN</span> loads previously saved coordinates. Open allows you to use the same shape points for different images or to save a partially completed project so you can return to it later, for example, to try different values for options.</p></li></ul></div></div></div><div class="sect2" title="Filtering All Layers"><div class="titlepage"><div><div><h2 class="title"><a id="filtering_all_layers"/>Filtering All Layers</h2></div></div></div><p>This tool, accessed via <span class="strong"><strong>Image: Filters &gt; Filter all Layers</strong></span> is also part of GAP but operates on multilayer animations. The concept is simple:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Build a bunch of layers, for example, by duplicating a layer over and over.</p></li><li class="listitem"><p>Apply a transformation to all the layers using one of the many GIMP filters.</p></li></ol></div><p>You can apply this filter using the same parameters for all layers, or you can change the parameter values progressively from layer to layer.</p><p><a class="xref" href="ch18s02.html#filter_all_layers_dialog" title="Figure 18-7. The Filter all Layers dialog">Figure 18-7</a> shows the Filter all Layers dialog. The menu on the left lists the many available filters, called <code class="literal">plug-in-</code><span class="emphasis"><em>filter-name</em></span>. The names are in alphabetical order. You can search for a specific filter using the buttons at the bottom right of the dialog:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>S<span class="smaller">EARCH BY</span> N<span class="smaller">AME</span> compares the characters typed in the S<span class="smaller">EARCH</span> box to the names of the available filters.</p></li><li class="listitem"><p>S<span class="smaller">EARCH BY</span> B<span class="smaller">LURB</span> searches in the filter’s description, located just above P<span class="smaller">ARAMETERS</span> in the top-right area of the dialog.</p></li><li class="listitem"><p>S<span class="smaller">EARCH BY</span> M<span class="smaller">ENU</span> P<span class="smaller">ATH</span> searches in the menu path, located above the description.</p></li></ul></div><p>In the first two cases, the string entered in the S<span class="smaller">EARCH</span> box is treated as a <span class="emphasis"><em>regular expression</em></span>. Searching using expressions is a complex concept, so we’ll provide just the basic explanation that you need to search efficiently. In short, a normal character, like a letter or a number, matches itself. A dot can stand in for any character, so <code class="literal">c.l.r</code> matches <code class="literal">color</code> and <code class="literal">celar</code>. An asterisk can match any number of occurrences of the preceding character, including none, so <code class="literal">sear*ching</code> matches <code class="literal">seaching</code>, <code class="literal">searching</code>, and <code class="literal">searrrching</code>. The dot and asterisk notations can also be combined, so <code class="literal">color.*hance</code> matches <code class="literal">color-enhance</code>, <code class="literal">colorhance</code>, and <code class="literal">colorabcdhance</code>.</p><p>When you select a filter in the left menu, its description appears on the right in the dialog. Most descriptions are written for GIMP developers rather than typical users, but you can still <a id="iddle2870" class="indexterm"/><a id="iddle4364" class="indexterm"/>learn from them. The description gives you a general sense of what the filter does, and the parameter description gives you an idea of what you can change in the filter dialog.</p><div class="figure"><a id="filter_all_layers_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01528"/><img src="httpatomoreillycomsourcenostarchimages1457086.png.jpg" alt="The Filter all Layers dialog"/></div></div><p class="title">Figure 18-7. The Filter all Layers dialog</p></div><p>Once you’ve chosen a plug-in, the first two options at the bottom of the dialog may be active. They are inactive if the chosen plug-in does not have any parameters, as is the case for <code class="literal">plug-in-blur</code>. If these options are active, they let you choose <span class="emphasis"><em>acceleration characteristics</em></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>0 means that the filter will be applied with the same parameter values for all layers. In this case, the box on the left is empty.</p></li><li class="listitem"><p>1 means that the parameters will vary, from the first value given to the last one, with constant speed. The box on the left displays an ascending diagonal line.</p></li><li class="listitem"><p>A negative value means the speed of variation will decrease (deceleration). The box on the left displays a convex curve.</p></li><li class="listitem"><p>A positive value (other than 1) means the speed of variation will increase (acceleration). The box on the left displays a concave curve.</p></li><li class="listitem"><p>You can set the acceleration value numerically or by using the small arrows on the right or by dragging the curve.</p></li></ul></div><p>After making your selections, click A<span class="smaller">PPLY</span>. If the filter has parameters, its dialog opens, with a preview and the variable parameters displayed. If the acceleration is 0, this dialog appears only once because the parameters are the same for all the layers. If the acceleration is not 0, the filter dialog appears twice, first for the bottom layer and then for the top layer. Remember, animations are played from bottom to top. A tiny warning dialog precedes the second filter dialog. In this second filter dialog, you choose the final values of the filter parameters. A new dialog appears and asks for the name of a backup file to be used for building the intermediate layers. This file is about the same size as the final animation, but you don’t need to save it, so the name isn’t important and the file can be stored in a temporary folder.</p><p>Click C<span class="smaller">ONTINUE</span>, and the filter is applied to all the layers, with parameters interpolated between the first and last values according to the acceleration factor.</p><p>You’ll also see a button for skipping a frame. It displays the number of the frame to skip, and if you click it, the dialog appears again, asking for the filename. You can choose to continue or to skip the next frame also. You can’t skip the first frame, however. One way to use the skip feature is to set the initial parameters so the filter does nothing and then begin applying the filter after skipping several frames. Doing this is the same as setting the acceleration to a high positive number.</p><div class="figure"><a id="animation_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01529"/><img src="httpatomoreillycomsourcenostarchimages1457088.png.jpg" alt="The Animation menu"/></div></div><p class="title">Figure 18-8. The Animation menu</p></div><div class="figure"><a id="blend_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01530"/><img src="httpatomoreillycomsourcenostarchimages1457090.png.jpg" alt="The Blend dialog"/></div></div><p class="title">Figure 18-9. The Blend dialog</p></div><p><a id="iddle1106" class="indexterm"/><a id="iddle1239" class="indexterm"/><a id="iddle1397" class="indexterm"/><a id="iddle1550" class="indexterm"/><a id="iddle2817" class="indexterm"/><a id="iddle5885" class="indexterm"/><a id="iddle5898" class="indexterm"/>Filter all Layers has no undo capability, but you can use the normal undo (<span class="inlinemediaobject"><a id="inline_id00524"/><img src="httpatomoreillycomsourcenostarchimages1453862.png.jpg" alt=""/></span>) over and over, or you can open the U<span class="smaller">NDO</span> H<span class="smaller">ISTORY</span> dialog. Of course, if you have many layers, undoing one layer at a time will be tedious, so save the original image before filtering all the layers.</p></div></div>
<div class="sect1" title="18.3 The Animation Menu"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot3_the_animation_menu"/>18.3 The Animation Menu</h1></div></div></div><p>We’ve already covered most of the tools for creating multilayer animations, but we need to discuss a few minor tools in the <span class="strong"><strong>Image: Filters &gt; Animation</strong></span> menu, shown in <a class="xref" href="ch18s02.html#animation_menu" title="Figure 18-8. The Animation menu">Figure 18-8</a>.</p><div class="sect2" title="Blend"><div class="titlepage"><div><div><h2 class="title"><a id="blend"/>Blend</h2></div></div></div><p>The Blend tool requires at least two layers plus a background layer.</p><p>You choose the number <span class="emphasis"><em>n</em></span> of intermediate frames in the tool dialog (<a class="xref" href="ch18s02.html#blend_dialog" title="Figure 18-9. The Blend dialog">Figure 18-9</a>). The intermediate frames are a composite of the previous frame and the next one. A new image is built, with the number of layers equal to (<span class="emphasis"><em>n</em></span> + 1) × <span class="emphasis"><em>f</em></span>, where <span class="emphasis"><em>f</em></span> is the total number of layers in the original image (not including the background layer). If you only have two layers, the new image has 2(<span class="emphasis"><em>n</em></span> + 1) layers. The first layer fades out, then the next layer appears, and then the first one fades in again. If you have more layers, the layers fade in and out from the bottom layer to the top layer and then again from the top to the bottom layer.</p><div class="figure"><a id="burn-in_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01531"/><img src="httpatomoreillycomsourcenostarchimages1457092.png.jpg" alt="The Burn-In dialog"/></div></div><p class="title">Figure 18-10. The Burn-In dialog</p></div><p>The animation created by this tool is very specific, so the applications are pretty limited.</p></div><div class="sect2" title="Burn-In"><div class="titlepage"><div><div><h2 class="title"><a id="burn-in"/>Burn-In</h2></div></div></div><p>The Burn-In tool generates an animation in which one image fades into another. This tool requires a starting image with two layers. The top layer <span class="emphasis"><em>must</em></span> have an Alpha channel, and this layer must be selected or the tool is grayed out in the menu. <a class="xref" href="ch18s03.html#burn-in_dialog" title="Figure 18-10. The Burn-In dialog">Figure 18-10</a> shows the tool dialog. The upper part of the dialog specifies how the transition between layers is done.</p><p>When F<span class="smaller">ADEOUT</span> is checked, the upper layer progressively fades out from left to right, revealing the layer beneath. <a class="xref" href="ch18s03.html#fading_outcomma_without_glowing" title="Figure 18-11. Fading out, without glowing">Figure 18-11</a> shows an intermediate layer of the animation, with the F<span class="smaller">ADEOUT WIDTH</span> set to 200 pixels.</p><p>If A<span class="smaller">DD GLOWING</span> is checked, a “glow” effect is added to the transition in the color specified in the G<span class="smaller">LOW COLOR</span> box. <a class="xref" href="ch18s03.html#fading_outcomma_with_glowing" title="Figure 18-12. Fading out, with glowing">Figure 18-12</a> shows an intermediate layer of the animation, with the width of the Fadeout set to 250 pixels to take into account the width of the glow (50 pixels).</p><p>When F<span class="smaller">ADEOUT</span> is unchecked, the upper layer completely disappears. <a class="xref" href="ch18s03.html#with_glowingcomma_but_without_fading_out" title="Figure 18-13. With glowing, but without fading out">Figure 18-13</a> shows an <a id="iddle4566" class="indexterm"/><a id="iddle4724" class="indexterm"/><a id="iddle5727" class="indexterm"/>intermediate layer of the animation when the glow effect is used. The animation speed is specified as the number of pixels in the upper layer that becomes transparent in every frame. The number of frames is automatically computed from this number.</p><div class="figure"><a id="fading_outcomma_without_glowing"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01532"/><img src="httpatomoreillycomsourcenostarchimages1457094.png.jpg" alt="Fading out, without glowing"/></div></div><p class="title">Figure 18-11. Fading out, without glowing</p></div><div class="figure"><a id="fading_outcomma_with_glowing"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01533"/><img src="httpatomoreillycomsourcenostarchimages1457096.png.jpg" alt="Fading out, with glowing"/></div></div><p class="title">Figure 18-12. Fading out, with glowing</p></div><div class="figure"><a id="with_glowingcomma_but_without_fading_out"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01534"/><img src="httpatomoreillycomsourcenostarchimages1457098.png.jpg" alt="With glowing, but without fading out"/></div></div><p class="title">Figure 18-13. With glowing, but without fading out</p></div></div><div class="sect2" title="Rippling"><div class="titlepage"><div><div><h2 class="title"><a id="rippling"/>Rippling</h2></div></div></div><p>This tool takes an image with one layer and builds an animation that simulates the reflection of the image on water with ripples created as if by wind. <a class="xref" href="ch18s03.html#rippling_dialog" title="Figure 18-14. The Rippling dialog">Figure 18-14</a> shows the Rippling tool dialog, and <a class="xref" href="ch18s03.html#one_layer_of_the_rippled_animation" title="Figure 18-15. One layer of the rippled animation">Figure 18-15</a> shows one layer of a rippled animation. R<span class="smaller">IPPLING STRENGTH</span> sets the force of the wind. N<span class="smaller">UMBER OF FRAMES</span> is the number of layers that are created.</p><div class="figure"><a id="rippling_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01535"/><img src="httpatomoreillycomsourcenostarchimages1457100.png.jpg" alt="The Rippling dialog"/></div></div><p class="title">Figure 18-14. The Rippling dialog</p></div><div class="figure"><a id="one_layer_of_the_rippled_animation"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01536"/><img src="httpatomoreillycomsourcenostarchimages1457102.png.jpg" alt="One layer of the rippled animation"/></div></div><p class="title">Figure 18-15. One layer of the rippled animation</p></div><div class="figure"><a id="effect_of_rippling_strength"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01537"/><img src="httpatomoreillycomsourcenostarchimages1457104.png.jpg" alt="Effect of rippling strength"/></div></div><p class="title">Figure 18-16. Effect of rippling strength</p></div><p>E<span class="smaller">DGE BEHAVIOR</span> specifies how the layer edges are handled. B<span class="smaller">LACK</span> keeps image borders straight, and the two other modes (W<span class="smaller">RAP</span> and S<span class="smaller">MEAR</span>) deform the border in different ways.</p><p>The edge behavior effect is only apparent when the rippling strength is greater than the default value of 3.0. A high rippling strength leads to dramatic image distortion, as shown in <a class="xref" href="ch18s03.html#effect_of_rippling_strength" title="Figure 18-16. Effect of rippling strength">Figure 18-16</a>, where the strength is set to 80.</p><div class="figure"><a id="portrait_with_the_face_selected"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01538"/><img src="httpatomoreillycomsourcenostarchimages1457106.png.jpg" alt="A portrait with the face selected"/></div></div><p class="title">Figure 18-17. A portrait with the face selected</p></div><div class="figure"><a id="selection_to_animimage_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01539"/><img src="httpatomoreillycomsourcenostarchimages1457108.png.jpg" alt="The Selection to Animimage dialog"/></div></div><p class="title">Figure 18-18. The Selection to Animimage dialog</p></div></div><div class="sect2" title="Selection to Animimage"><div class="titlepage"><div><div><h2 class="title"><a id="selection_to_animimage"/>Selection to Animimage</h2></div></div></div><p><a id="iddle1591" class="indexterm"/><a id="iddle2435" class="indexterm"/><a id="iddle2847" class="indexterm"/><a id="iddle4401" class="indexterm"/><a id="iddle4520" class="indexterm"/><a id="iddle4956" class="indexterm"/>The Selection to Animimage tool is very similar to the Filter all Layers tool, discussed in <a class="xref" href="ch18s02.html#filtering_all_layers" title="Filtering All Layers">Filtering All Layers</a>. In this section, we focus on the differences between them.</p><p><a class="xref" href="ch18s03.html#portrait_with_the_face_selected" title="Figure 18-17. A portrait with the face selected">Figure 18-17</a> shows an image with a single layer and a selection that has been made using the Free Select tool and corrected with the Quick Mask.</p><p>The Selection to Animimage tool dialog, accessed via <span class="strong"><strong>Image: Filters &gt; Animation &gt; Selection to Animimage</strong></span>, is shown in <a class="xref" href="ch18s03.html#selection_to_animimage_dialog" title="Figure 18-18. The Selection to Animimage dialog">Figure 18-18</a>. You can choose the number of layers to be generated. This plug-in automatically creates the layers, unlike the Filter all Layers tool. You can also choose the color used to fill the new image outside of the selection and whether to apply the filter to all new layers. If the filter is not applied to all new layers, the tool generates the layers without applying a filter.. . . So it just duplicates the layer!</p><p>When you apply the filter, two new windows replace the dialog:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A new image containing a copy of the selection made in the initial image, with the number of copies of the background layer specified in the preceding dialog</p></li><li class="listitem"><p>A dialog identical to <a class="xref" href="ch18s03.html#selection_to_animimage_dialog" title="Figure 18-18. The Selection to Animimage dialog">Figure 18-18</a> that lets you select a filter</p></li></ul></div><p>You can choose the Cartoon filter, for example, and select A<span class="smaller">PPLY</span> V<span class="smaller">ARYING</span> to open the Cartoon filter dialog (see <a class="xref" href="ch17s10.html#cartoon_dialog" title="Figure 17-148. The Cartoon dialog">Figure 17-148</a>) for the first layer. Set the P<span class="smaller">ERCENT</span> B<span class="smaller">LACK</span> to 0, and click OK. In the next dialog, set P<span class="smaller">ERCENT</span> B<span class="smaller">LACK</span> to 1.000 for the final layer.</p><p>The result is an animation that progressively transforms the portrait into a cartoon.</p></div><div class="sect2" title="Spinning Globe"><div class="titlepage"><div><div><h2 class="title"><a id="spinning_globe"/>Spinning Globe</h2></div></div></div><p>The Spinning Globe tool automatically maps an image to a globe and then makes it spin. Simply select an image, open the tool, set the two parameters, and decide whether the three checkboxes should be checked, and the computer does the work.</p><p>The image you use determines the shape of the globe. If the image is a true square, the globe is a sphere. Otherwise, it is an ellipsoid.</p><p>To demonstrate, we used the same portrait as before. When we select the Spinning Globe tool (<span class="strong"><strong>Image: Filters &gt; Animation &gt; Spinning Globe</strong></span>), the dialog shown in <a class="xref" href="ch18s03.html#spinning_globe_dialog" title="Figure 18-19. The Spinning Globe dialog">Figure 18-19</a> appears. Here, we choose the number of frames. For a photograph, 10 is too few and would make the animation jerky. For a simple graphic, however, 10 frames might be enough. You can also choose the rotation direction, which is right to left by default, and whether the background of the animation is transparent (you can add a background later) or uses the background color. The animation can use indexing with a given number of <a id="iddle1131" class="indexterm"/><a id="iddle2848" class="indexterm"/><a id="iddle2986" class="indexterm"/><a id="iddle3006" class="indexterm"/>colors, which is wise if you plan to export the animation to GIF. Finally, you can choose to work on a copy of the image.</p><div class="figure"><a id="spinning_globe_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01540"/><img src="httpatomoreillycomsourcenostarchimages1457110.png.jpg" alt="The Spinning Globe dialog"/></div></div><p class="title">Figure 18-19. The Spinning Globe dialog</p></div><div class="figure"><a id="final_animation-id00187"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01541"/><img src="httpatomoreillycomsourcenostarchimages1457112.png.jpg" alt="Final animation"/></div></div><p class="title">Figure 18-20. Final animation</p></div><p>Here, we change F<span class="smaller">RAMES</span> to 30 and uncheck T<span class="smaller">RANSPARENT BACKGROUND</span>. <a class="xref" href="ch18s03.html#final_animation-id00187" title="Figure 18-20. Final animation">Figure 18-20</a> shows the animation stopped on frame 2.</p></div><div class="sect2" title="Waves"><div class="titlepage"><div><div><h2 class="title"><a id="waves-id00188"/>Waves</h2></div></div></div><p>The Waves tool is even easier to use than Spinning Globe, and the result isn’t too bad either. The Waves tool generates an animation that looks like the waves created when a stone is thrown into a still lake.</p><div class="figure"><a id="waves_dialog-id00189"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01542"/><img src="httpatomoreillycomsourcenostarchimages1457114.png.jpg" alt="The Waves dialog"/></div></div><p class="title">Figure 18-21. The Waves dialog</p></div><p>When you select the Waves tool, the dialog shown in <a class="xref" href="ch18s03.html#waves_dialog-id00189" title="Figure 18-21. The Waves dialog">Figure 18-21</a> appears. The rock always falls in the center of the image, and the proportions of the concentric waves are determined by the image itself. But you can choose the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The number of frames. Six frames is normally enough.</p></li><li class="listitem"><p>The amplitude and wavelength of the waves. The default values are usually fine.</p></li><li class="listitem"><p>The direction of the movement. If you click I<span class="smaller">NVERT DIRECTION</span>, the waves move toward the center of the animation and disappear, which is a weird effect since it runs contrary to known physics.</p></li></ul></div><p>Click OK to generate the frames. <a class="xref" href="ch18s03.html#waves_animationcomma_before_left_parenth" title="Figure 18-22. The Waves animation, before (left) and after (right)">Figure 18-22</a> shows the initial image and the animation’s effect.</p></div><div class="sect2" title="Optimizing and Playing an Animation"><div class="titlepage"><div><div><h2 class="title"><a id="optimizing_and_playing_an_animation"/>Optimizing and Playing an Animation</h2></div></div></div><p>The Animation menu has four additional entries, which let you optimize and play back your animations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>O<span class="smaller">PTIMIZE</span> (<span class="smaller">FOR</span> GIF) is probably the option you’ll use most frequently. It saves a multilayer image as a GIF animation. This tool has no dialog and generates a new image with the same layers as the original image but at a (hopefully) reduced size.</p></li><li class="listitem"><p>P<span class="smaller">LAYBACK</span> tests an animation generated as a multilayer image. In this tool’s dialog, the <a id="iddle1132" class="indexterm"/><a id="iddle2774" class="indexterm"/><a id="iddle2777" class="indexterm"/><a id="iddle2815" class="indexterm"/><a id="iddle2987" class="indexterm"/><a id="iddle3007" class="indexterm"/><a id="iddle3032" class="indexterm"/><a id="iddle3110" class="indexterm"/><a id="iddle3401" class="indexterm"/><a id="iddle3852" class="indexterm"/><a id="iddle4683" class="indexterm"/><a id="iddle4862" class="indexterm"/><a id="iddle5659" class="indexterm"/><a id="iddle5886" class="indexterm"/><a id="iddle6071" class="indexterm"/>image appears in its original size without any zoom, which can be problematic if the image is larger than the screen because the toolbar may appear off-screen. If that happens, just use <span class="inlinemediaobject"><a id="inline_id00525"/><img src="httpatomoreillycomsourcenostarchimages1455186.png.jpg" alt=""/></span> to close the dialog.</p><div class="figure"><a id="waves_animationcomma_before_left_parenth"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01543"/><img src="httpatomoreillycomsourcenostarchimages1457116.png.jpg" alt="The Waves animation, before (left) and after (right)"/></div></div><p class="title">Figure 18-22. The Waves animation, before (left) and after (right)</p></div><p>The toolbar buttons should be self-explanatory with the exception of D<span class="smaller">ETACH</span>, which removes the image animation from its frame and allows you to move the frame. If you then want to use <span class="inlinemediaobject"><a id="inline_id00526"/><img src="httpatomoreillycomsourcenostarchimages1455186.png.jpg" alt=""/></span> to close the frame, make sure the frame window (and not the full animation) is selected first.</p></li><li class="listitem"><p>O<span class="smaller">PTIMIZE</span> (D<span class="smaller">IFFERENCE</span>) has almost the same effect as O<span class="smaller">PTIMIZE</span> (<span class="smaller">FOR</span> GIF). The main difference is that O<span class="smaller">PTIMIZE</span> (D<span class="smaller">IFFERENCE</span>) keeps all layers the same size as the image, whereas O<span class="smaller">PTIMIZE</span> (<span class="smaller">FOR</span> GIF) tries to make every layer as small as possible. The size of the generated file can vary slightly, but predicting which filter will produce the smallest file is difficult.</p></li><li class="listitem"><p>U<span class="smaller">NOPTIMIZE</span> is useful if you’re editing an animation that’s already optimized. If you want to add or remove frames, you need to undo the optimization first, then make the changes, and finally reoptimize the animation.</p></li></ul></div></div></div>
<div class="sect1" title="18.4 The Move Path Tool"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot4_the_move_path_tool"/>18.4 The Move Path Tool</h1></div></div></div><p>The rest of this chapter focuses on multi-image animations. As explained in <a class="xref" href="ch06s01.html#method_three_moving_along_a_path" title="Method Three: Moving Along a Path">Method Three: Moving Along a Path</a>, multi-image animations are usually stored in a specific folder with each frame as a separate file named systematically (<span class="emphasis"><em>name</em></span><code class="literal">-0001.xcf</code>, for example). The number of digits determines the maximum number of frames, which would be 9999 in this example. The number changes, but the <span class="emphasis"><em>name</em></span> is the same for all frames. The file could be any type handled by GIMP, but XCF is the best choice because it is the only one that handles layers and selections.</p><p>In this section, we explore GAP’s primary tool, accessed via <span class="strong"><strong>Image: Video &gt; Move Path</strong></span>.</p><p>This tool copies layers from a source image to a target animation. During the copy process, the layers can be transformed in various ways. The source image can be a single- or multilayer image or a multiframe animation. The target animation must be multiframe because the Move Path tool does not generate frames.</p><p>Before using the Move Path tool, open the first frame of the target animation and the source image or animation in GIMP. The source and target images must be of the same type: RGB, indexed, or grayscale, but they cannot be the same file. If you want to duplicate something in an animation using this tool, you must copy the animation first, so the source and target are different files.</p><p>To demonstrate the Move Path tool, we chose a multilayer animation as the source and the multiframe animation in <a class="xref" href="ch06s04.html#frame_14_of_the_animation" title="Figure 6-43. Frame 14 of the animation">Figure 6-43</a> as the target. The tool’s large and complex dialog is shown in <a class="xref" href="ch18s04.html#move_path_dialog-id00190" title="Figure 18-23. The Move Path dialog">Figure 18-23</a>. To make <a id="iddle2645" class="indexterm"/><a id="iddle2829" class="indexterm"/><a id="iddle3575" class="indexterm"/>things clearer, we’ll highlight certain parts of the dialog in subsequent figures.</p><div class="figure"><a id="move_path_dialog-id00190"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01544"/><img src="httpatomoreillycomsourcenostarchimages1457118.png.jpg" alt="The Move Path dialog"/></div></div><p class="title">Figure 18-23. The Move Path dialog</p></div><div class="sect2" title="Choosing the Source Layers"><div class="titlepage"><div><div><h2 class="title"><a id="choosing_the_source_layers"/>Choosing the Source Layers</h2></div></div></div><p>Because the tool’s purpose is to copy layers to frames, you need to decide which layers to copy to which frames. One copy of the selected layer from the source image is added to each frame of the target.</p><p>You choose the source layer in the top-left part of the dialog (<a class="xref" href="ch18s04.html#move_path_dialog-id00190" title="Figure 18-23. The Move Path dialog">Figure 18-23</a>). The menu S<span class="smaller">OURCE</span> I<span class="smaller">MAGE</span>/L<span class="smaller">AYER</span> shows all the layers of the source image or all the frames of the source animation. If the source is a multiframe animation and the individual frames have more than one layer, the layers are flattened before being copied. We chose 1 layer from a 41-layer image as the source.</p><p>The S<span class="smaller">TEPMODE</span> menu lets you choose how to select a layer when the source image is multilayer or a frame when it is multiframe. When the source image is a single layer, choose N<span class="smaller">ONE</span>. When the source is a multilayer image, as in our example, you can choose from five different step modes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>L<span class="smaller">OOP</span> selects the layers in sequence, one for each successive target frame (depending on S<span class="smaller">PEED</span>F<span class="smaller">ACTOR</span>, discussed in a bit). When the last layer is the source, the loop starts with this layer, followed by the first layer and then the rest of the layers in order.</p></li><li class="listitem"><p>L<span class="smaller">OOP</span> R<span class="smaller">EVERSE</span> is the same as L<span class="smaller">OOP</span>, except the source layers are selected in reverse order.</p></li><li class="listitem"><p>O<span class="smaller">NCE</span> is the same as L<span class="smaller">OOP</span>, except that copying stops after the last layer instead of looping back to the first layer.</p><div class="figure"><a id="choosing_transformation_parameters_for_t"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01545"/><img src="httpatomoreillycomsourcenostarchimages1457120.png.jpg" alt="Choosing transformation parameters for the selected layer"/></div></div><p class="title">Figure 18-24. Choosing transformation parameters for the selected layer</p></div></li><li class="listitem"><p><a id="iddle1277" class="indexterm"/><a id="iddle1445" class="indexterm"/><a id="iddle2646" class="indexterm"/><a id="iddle2782" class="indexterm"/><a id="iddle2830" class="indexterm"/><a id="iddle3576" class="indexterm"/><a id="iddle4033" class="indexterm"/>O<span class="smaller">NCE</span> R<span class="smaller">EVERSE</span> is the same as O<span class="smaller">NCE</span>, except that source layers are selected in reverse order.</p></li><li class="listitem"><p>P<span class="smaller">ING</span> P<span class="smaller">ONG</span> selects the layers in sequence first and, once the last layer has been selected, reverses the sequence.</p></li></ul></div><p>When the source animation is multiframe, S<span class="smaller">TEPMODE</span> offers six equivalent modes whose names all begin with F<span class="smaller">RAME</span>. When a frame has several layers, the layer selected in one frame is irrelevant because all visible layers in the frame are flattened and the step mode selects among the frames, not the layers.</p><p>The last parameter dealing with layer selection is S<span class="smaller">PEED</span>F<span class="smaller">ACTOR</span>, which changes how fast the source layers are stepped through. When its value is 1.0, the source and target step are synchronized. When its value is 0.5, the source steps to half speed, so each layer is copied into two successive frames before stepping to the next one. When its value is 2.0, the source steps to double speed, so every other layer is copied.</p><p>The speed factor is irrelevant if S<span class="smaller">TEPMODE</span> is N<span class="smaller">ONE</span> or F<span class="smaller">RAME</span> N<span class="smaller">ONE</span>.</p></div><div class="sect2" title="Choosing the Destination Frames"><div class="titlepage"><div><div><h2 class="title"><a id="choosing_the_destination_frames"/>Choosing the Destination Frames</h2></div></div></div><p>You choose the target animation in the bottom-right part of the dialog (<a class="xref" href="ch18s04.html#move_path_dialog-id00190" title="Figure 18-23. The Move Path dialog">Figure 18-23</a>). The F<span class="smaller">ROM</span> F<span class="smaller">RAME</span> and T<span class="smaller">O</span> F<span class="smaller">RAME</span> cursors delimit the range of target frames. They are set to the full range of the target by default, so the changes are applied to the entire animation, but you can choose to target only a part of the animation.</p><p>F<span class="smaller">ORCE</span> V<span class="smaller">ISIBILITY</span> makes all source layers visible even if they are not visible in the source. C<span class="smaller">LIP</span> T<span class="smaller">O</span> F<span class="smaller">RAME</span> clips the copied layers to the image boundaries of the target frames. L<span class="smaller">AYERSTACK</span> specifies where the copied layers should be inserted in the layer stack of target frames. The default value, 0, is the top of the stack because existing layers are numbered from top to bottom, starting at 0.</p></div><div class="sect2" title="Applying Transformations"><div class="titlepage"><div><div><h2 class="title"><a id="applying_transformations"/>Applying Transformations</h2></div></div></div><p><a class="xref" href="ch18s04.html#choosing_transformation_parameters_for_t" title="Figure 18-24. Choosing transformation parameters for the selected layer">Figure 18-24</a> shows the sections of the Move Path dialog where you can choose to apply transformations. You can decide where the transformation will be applied using the X and Y coordinates. The H<span class="smaller">ANDLE</span> menu specifies where in the selected layer the origin of these coordinates is located. The possibilities are L<span class="smaller">EFT</span> T<span class="smaller">OP</span>, L<span class="smaller">EFT</span> B<span class="smaller">OTTOM</span>, R<span class="smaller">IGHT</span> T<span class="smaller">OP</span>, R<span class="smaller">IGHT</span> B<span class="smaller">OTTOM</span>, and C<span class="smaller">ENTER</span>. C<span class="smaller">ENTER</span> is generally the best choice, especially if rotation or scaling is applied to the layer.</p><p>A blending mode can be applied to the layer in the target frame using the M<span class="smaller">ODE</span> menu.</p><p>You can scale the source later by setting W<span class="smaller">IDTH</span> and H<span class="smaller">EIGHT</span>. These values are percentages. If the chain to the right of the counters is broken, the values can be changed independently.</p><p>O<span class="smaller">PACITY</span> is specified as a percentage. R<span class="smaller">OTATE</span> is specified in degrees, and a negative value results in a counterclockwise rotation. The rotation center is the image’s handle.</p><p>Two more tabs deal with layer transformation. <a class="xref" href="ch18s04.html#perspective_tab_for_transforming_the_per" title="Figure 18-25. The Perspective tab for transforming the perspective">Figure 18-25</a> shows the P<span class="smaller">ERSPECTIVE</span> tab for <a id="iddle1966" class="indexterm"/><a id="iddle2395" class="indexterm"/><a id="iddle2786" class="indexterm"/><a id="iddle2802" class="indexterm"/><a id="iddle2863" class="indexterm"/><a id="iddle4243" class="indexterm"/><a id="iddle4341" class="indexterm"/>transforming perspective. The eight counters specify the factors for the <span class="emphasis"><em>x</em></span>- and <span class="emphasis"><em>y</em></span>-coordinates of the four corners of the layer. If the values for all factors are 1.0, no transformation occurs. Scaling with factor 0 moves the point toward the middle. Scaling with factor 2.0 moves the point outward by half the layer’s original dimension. <a class="xref" href="ch18s04.html#perspective_deformation" title="Figure 18-26. Perspective deformation">Figure 18-26</a> shows the layer’s four corners numbered in red. The black numbers show factors, and the dotted outlines show the resulting positions of pixels.</p><div class="figure"><a id="perspective_tab_for_transforming_the_per"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01546"/><img src="httpatomoreillycomsourcenostarchimages1457122.png.jpg" alt="The Perspective tab for transforming the perspective"/></div></div><p class="title">Figure 18-25. The Perspective tab for transforming the perspective</p></div><div class="figure"><a id="perspective_deformation"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01547"/><img src="httpatomoreillycomsourcenostarchimages1457124.png.jpg" alt="Perspective deformation"/></div></div><p class="title">Figure 18-26. Perspective deformation</p></div><div class="figure"><a id="selection_handling_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01548"/><img src="httpatomoreillycomsourcenostarchimages1457126.png.jpg" alt="The Selection Handling tab"/></div></div><p class="title">Figure 18-27. The Selection Handling tab</p></div><p>If the source image has a selection, you can control how it’s handled on the S<span class="smaller">ELECTION</span> H<span class="smaller">ANDLING</span> tab shown in <a class="xref" href="ch18s04.html#selection_handling_tab" title="Figure 18-27. The Selection Handling tab">Figure 18-27</a>. The menu at the top of the tab has three options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>I<span class="smaller">GNORE SELECTION</span> (<span class="smaller">IN ALL SOURCE IMAGES</span>) ignores the selection.</p></li><li class="listitem"><p>U<span class="smaller">SE SELECTION</span> (<span class="smaller">FROM INITIAL SOURCE IMAGE</span>) applies the selection found in the first frame to all copied layers. The unselected pixels are transparent.</p><div class="figure"><a id="acceleration_handling"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01549"/><img src="httpatomoreillycomsourcenostarchimages1457128.png.jpg" alt="Acceleration handling"/></div></div><p class="title">Figure 18-28. Acceleration handling</p></div></li><li class="listitem"><p>U<span class="smaller">SE SELECTIONS</span> (<span class="smaller">FROM ALL SOURCE IMAGES</span>) is the same as the previous choice if the source image is a multilayer animation. If the source is multiframe, then the selection within each frame is used, and if a frame has no selection, that frame is copied in its entirety.</p></li></ul></div><p>When selection handling is used, you can adjust feathering with the S<span class="smaller">ELECTION</span> F<span class="smaller">EATHER</span> R<span class="smaller">ADIUS</span> cursor, which changes the number of pixels that are applied in the feathering boundary.</p><p>All the preceding parameters (movement, scale, perspective, opacity, rotation, and feathering) are controlled on the A<span class="smaller">CCELERATION</span> tab (<a class="xref" href="ch18s04.html#acceleration_handling" title="Figure 18-28. Acceleration handling">Figure 18-28</a>). Each of those six parameters is associated with a numeric field [–100 to 100] and a small square. If the field value is zero, the movement has a constant speed (i.e., there is no acceleration). If the field value is positive, the movement accelerates, and the small square displays a curve showing the steepness of the acceleration. If the field value is negative, the movement decelerates. You can change the field by typing a value, clicking the small up and down arrows, or dragging in the small square.</p></div><div class="sect2" title="Control Points"><div class="titlepage"><div><div><h2 class="title"><a id="control_points"/>Control Points</h2></div></div></div><p>A <span class="emphasis"><em>control point</em></span> is the set of transformation parameters that are applied to a layer. You can define a single control point for all frames being handled by the Move Path tool, or you can define a sequence of control points, which together constitute a <span class="emphasis"><em>control path</em></span>.</p><p>When you have a single control point, the transformation parameters are applied with the same values to all layer copies to the target frames. If you have several control points, they <a id="iddle1123" class="indexterm"/><a id="iddle1266" class="indexterm"/><a id="iddle2819" class="indexterm"/><a id="iddle3503" class="indexterm"/><a id="iddle4244" class="indexterm"/><a id="iddle5887" class="indexterm"/>are distributed among target frames. The first and last control points always correspond to the first and last frames. Other control points are usually distributed evenly among rest of the target frames.</p><div class="figure"><a id="specifying_the_control_points"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01550"/><img src="httpatomoreillycomsourcenostarchimages1457130.png.jpg" alt="Specifying the control points"/></div></div><p class="title">Figure 18-29. Specifying the control points</p></div><p><a class="xref" href="ch18s04.html#specifying_the_control_points" title="Figure 18-29. Specifying the control points">Figure 18-29</a> shows the section of the dialog that is focused on control points. The number of the current control point is displayed at the top of the dialog, just above the X and Y cursors. Any changes to transformation parameters apply only to the current control point. Note that in the following discussion, when we refer to transformation parameters, we are not referring to the <span class="emphasis"><em>x</em></span>- and <span class="emphasis"><em>y</em></span>-coordinates. This dialog has 14 buttons associated with control points.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A<span class="smaller">DD</span> P<span class="smaller">OINT</span> adds a control point after the last one, with the same transformation parameters as that last point.</p></li><li class="listitem"><p>G<span class="smaller">RAB</span> P<span class="smaller">ATH</span> deletes all control points and replaces them with the path’s anchor points (see <a class="xref" href="ch13s03.html" title="13.3 The Paths Tool">13.3 The Paths Tool</a>) in the image from which the Move Path tool was opened. All of these points are initialized with transformation values identical to the current settings.</p><p>If you press <span class="inlinemediaobject"><a id="inline_id00527"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> and click G<span class="smaller">RAB</span> P<span class="smaller">ATH</span>, control points are created for all target frames, with intermediate points defined by the Bézier curve that follows the anchor points.</p></li><li class="listitem"><p>I<span class="smaller">NSERT</span> P<span class="smaller">OINT</span> duplicates the current control point, and the new copy becomes the current point.</p></li><li class="listitem"><p>D<span class="smaller">ELETE</span> P<span class="smaller">OINT</span> removes the current control point. Note that undo is not available.</p></li><li class="listitem"><p>P<span class="smaller">REV</span> P<span class="smaller">OINT</span> makes the previous control point the current one. When you define key frames (discussed in <a class="xref" href="ch18s04.html#key_frames" title="Key Frames">Key Frames</a>) and press <span class="inlinemediaobject"><a id="inline_id00528"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>, the control point from the previous key frame becomes the current control point.</p></li><li class="listitem"><p>N<span class="smaller">EXT</span> P<span class="smaller">OINT</span> does the same for the next control point or key frame.</p></li><li class="listitem"><p>F<span class="smaller">IRST</span> P<span class="smaller">OINT</span> does the same for the first control point (or key frame when pressing <span class="inlinemediaobject"><a id="inline_id00529"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>).</p></li><li class="listitem"><p>L<span class="smaller">AST</span> P<span class="smaller">OINT</span> does the same for the last control point or key frame.</p></li><li class="listitem"><p>R<span class="smaller">ESET</span> P<span class="smaller">OINT</span> resets the transformation parameters of the current control point to the default values of 100.0 for width, height, and opacity; 0.0 for rotation; and 1.0 for all perspective coordinates.</p></li><li class="listitem"><p>R<span class="smaller">ESET</span> A<span class="smaller">LL</span> P<span class="smaller">OINTS</span> resets all control points to the default values. If you press <span class="inlinemediaobject"><a id="inline_id00530"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>, this button resets all control points to the values of the first point. If you press <span class="inlinemediaobject"><a id="inline_id00531"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>, it sets all control point parameters to values interpolated from the first and last control points.</p></li><li class="listitem"><p>R<span class="smaller">OTATE</span> F<span class="smaller">OLLOW</span> computes rotation values for all the control points based on the path defined by the <span class="emphasis"><em>x</em></span>- and <span class="emphasis"><em>y</em></span>-coordinates. If an object moves horizontally from left to right, its rotation is set to 0°. When moving from right to left, its rotation is set to 180°; and when moving vertically, from top to bottom, it’s set to 90°. When you press <span class="inlinemediaobject"><a id="inline_id00532"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>, a rotation offset is taken from the rotation of the first point and added to the rotation of all other points, which allows you to move an object from right to left without turning it upside down.</p></li><li class="listitem"><p>D<span class="smaller">ELETE</span> A<span class="smaller">LL</span> P<span class="smaller">OINTS</span> removes all control points except the first one, which is reset to the default value.</p></li><li class="listitem"><p>O<span class="smaller">PEN</span> loads control point parameters from a file.</p></li><li class="listitem"><p><a id="iddle1139" class="indexterm"/><a id="iddle1211" class="indexterm"/><a id="iddle1717" class="indexterm"/><a id="iddle2781" class="indexterm"/><a id="iddle2803" class="indexterm"/><a id="iddle2849" class="indexterm"/><a id="iddle4351" class="indexterm"/>S<span class="smaller">AVE</span> saves the control point parameters to a file.</p></li></ul></div></div><div class="sect2" title="Key Frames"><div class="titlepage"><div><div><h2 class="title"><a id="key_frames"/>Key Frames</h2></div></div></div><p>You will always have fewer control points than target frames, and, by default, the control points are distributed equally among the frames. You can use <span class="emphasis"><em>key frames</em></span> to change this.</p><p>The K<span class="smaller">EYFRAME</span> counter is at the top of the dialog, just below the X and Y coordinates. If its value is zero, the current control point is not attached to any key frame. Otherwise, the current control point is attached to the target frame specified by that number, which means the control points don’t have to be assigned to frames evenly. So you can apply transformations that accelerate or slow down as the animation plays.</p></div><div class="sect2" title="The Preview Window"><div class="titlepage"><div><div><h2 class="title"><a id="preview_window"/>The Preview Window</h2></div></div></div><p>The preview window in the center of the dialog initially shows only the first target frame. Several buttons and a cursor help you control this preview (<a class="xref" href="ch18s04.html#controlling_the_preview" title="Figure 18-30. Controlling the preview">Figure 18-30</a>).</p><p>The F<span class="smaller">RAME</span> cursor determines which frame is displayed when you click R<span class="smaller">EFRESH</span>. When I<span class="smaller">NSTANT</span> A<span class="smaller">PPLY</span> is checked, changes are applied as soon as you change the counter value, which can be processor intensive if you’re working with large target animations.</p><p>When C<span class="smaller">URSOR</span> is checked, crossed lines are displayed in the preview window, showing the position of the <span class="emphasis"><em>x</em></span>- and <span class="emphasis"><em>y</em></span>-coordinates. When P<span class="smaller">ATH</span> is checked, the path between the coordinates of the successive control points is also displayed in the preview window.</p><p>The small box to the left of the P<span class="smaller">ATH</span> button lets you change the path color via the Color chooser.</p></div><div class="sect2" title="Testing the Move Path Tool"><div class="titlepage"><div><div><h2 class="title"><a id="testing_the_move_path_tool"/>Testing the Move Path Tool</h2></div></div></div><p>When you click OK at the bottom right of the Move Path dialog, the transformation specified by the control points is performed. Not every transformation can be undone, so always click A<span class="smaller">NIM</span> P<span class="smaller">REVIEW</span> first to make sure all the control points and parameters are set up properly.</p><div class="figure"><a id="controlling_the_preview"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01551"/><img src="httpatomoreillycomsourcenostarchimages1457132.png.jpg" alt="Controlling the preview"/></div></div><p class="title">Figure 18-30. Controlling the preview</p></div><div class="figure"><a id="anim_preview_dialog-id00191"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01552"/><img src="httpatomoreillycomsourcenostarchimages1457134.png.jpg" alt="The Anim Preview dialog"/></div></div><p class="title">Figure 18-31. The Anim Preview dialog</p></div><p>When you click either OK or A<span class="smaller">NIM</span> P<span class="smaller">REVIEW</span>, the Move Path tool first checks whether the number of control points is greater than the number of target frames and whether the key frames are in ascending or descending order (if key frames are used).</p><p>If the tool finds more control points than target frames, or if the key frames are not all ordered in the same way, you’ll see an error message, and no transformation is performed.</p><p>If you don’t get an error message, A<span class="smaller">NIM</span> P<span class="smaller">REVIEW</span> opens the dialog shown in <a class="xref" href="ch18s04.html#anim_preview_dialog-id00191" title="Figure 18-31. The Anim Preview dialog">Figure 18-31</a>. The animation preview is a scaled-down, multilayer file, and the Playback tool (usually selected via <span class="strong"><strong>Image: Filters &gt; Animation &gt; Playback</strong></span>) opens automatically.</p><p>A<span class="smaller">NIM</span> P<span class="smaller">REVIEW</span> M<span class="smaller">ODE</span> can have one of three values:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>O<span class="smaller">BJECT ON EMPTY FRAMES</span> shows the copied layers on blank frames (rather than the target frames) filled with the background color.</p></li><li class="listitem"><p>O<span class="smaller">BJECT ON ONE FRAME</span> shows the copied layers on the frame displayed in the preview window of the tool dialog.</p><div class="figure"><a id="advanced_settings_tab"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01553"/><img src="httpatomoreillycomsourcenostarchimages1457136.png.jpg" alt="The Advanced Settings tab"/></div></div><p class="title">Figure 18-32. The Advanced Settings tab</p></div></li><li class="listitem"><p><a id="iddle1417" class="indexterm"/><a id="iddle2253" class="indexterm"/><a id="iddle2262" class="indexterm"/><a id="iddle2337" class="indexterm"/><a id="iddle2788" class="indexterm"/><a id="iddle2790" class="indexterm"/><a id="iddle2794" class="indexterm"/><a id="iddle2798" class="indexterm"/><a id="iddle2831" class="indexterm"/><a id="iddle2841" class="indexterm"/><a id="iddle2879" class="indexterm"/><a id="iddle2881" class="indexterm"/><a id="iddle5869" class="indexterm"/>E<span class="smaller">XACT OBJECT ON FRAMES</span> shows a scaled-down version of the final animation.</p></li></ul></div><p>The third option takes much longer to generate, but the preview more closely approximates the final result.</p><p>S<span class="smaller">CALE</span> P<span class="smaller">REVIEW</span> changes how much the preview is scaled down. If the setting is 100.0, the preview isn’t scaled down and takes a long time to process. Usually a value between 20 to 40 is ideal. F<span class="smaller">RAMERATE</span> sets the animation speed in frames per second. C<span class="smaller">OPY TO</span> V<span class="smaller">IDEO</span> B<span class="smaller">UFFER</span>, when checked, may produce a smoother animation.</p><p>The preview is generated as a new, multilayer animation, which you can delete once you’ve watched it.</p></div><div class="sect2" title="Advanced Settings"><div class="titlepage"><div><div><h2 class="title"><a id="advanced_settings"/>Advanced Settings</h2></div></div></div><p>The Move Path dialog has an Advanced Settings tab, shown in <a class="xref" href="ch18s04.html#advanced_settings_tab" title="Figure 18-32. The Advanced Settings tab">Figure 18-32</a>.</p><p>When checked, B<span class="smaller">LUEBOX</span> applies the Bluebox filter to the selected layer, as explained in <a class="xref" href="ch18s05.html#bluebox" title="Bluebox">Bluebox</a>. K<span class="smaller">EYCOLOR</span> is used with the Bluebox filter and opens the Bluebox dialog.</p><p>The T<span class="smaller">RACELAYER</span> box, when checked, creates an additional layer in all target frames. This layer shows all positions of the moving layer from the beginning of the animation to the previous frame. T<span class="smaller">RACE</span>O<span class="smaller">PACITY</span>1 specifies the opacity of this additional layer. T<span class="smaller">RACE</span>O<span class="smaller">PACITY</span>2 specifies how much this opacity fades out.</p><p>T<span class="smaller">WEENSTEPS</span> specifies the number of virtual frames, called <span class="emphasis"><em>tweens</em></span>, that are computed between two consecutive frames and included in a <span class="emphasis"><em>tween layer</em></span> in the target frame below the stack position of the inserted layer. This tween layer shows the positions of the moving object in all virtual frames. The opacity of this layer is specified by the T<span class="smaller">WEEN</span>O<span class="smaller">PACITY</span>1 counter and fades out at the older positions, depending on the value of the T<span class="smaller">WEEN</span>O<span class="smaller">PACITY</span>2 counter.</p><p>When you have both a trace layer and a tween layer, the tween layer is invisible so the opacity of the moving object does not increase. These additional layers can be useful for simulating the motion blur of fast-moving objects.</p></div></div>
<div class="sect1" title="18.5 The Video Menu"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot5_the_video_menu"/>18.5 The Video Menu</h1></div></div></div><p>We’ve already covered two tools in the <span class="strong"><strong>Image: Video</strong></span> menu—the Morph tool and the Move Path tool. In this section, we’ll discuss the remaining tools. This menu is organized alphabetically, but we’ll discuss the tools in a logical order instead.</p><div class="sect2" title="Manipulating Frames"><div class="titlepage"><div><div><h2 class="title"><a id="manipulating_frames"/>Manipulating Frames</h2></div></div></div><p>Many entries in the Video menu deal with frame manipulations, but quite a few also perform very simple actions.</p><p>The <span class="strong"><strong>Image: Video &gt; Go To</strong></span> menu contains five entries that change the current frame in a multiframe animation. The function of the F<span class="smaller">IRST</span> F<span class="smaller">RAME</span>, L<span class="smaller">AST</span> F<span class="smaller">RAME</span>, N<span class="smaller">EXT</span> F<span class="smaller">RAME</span>, and P<span class="smaller">REVIOUS</span> F<span class="smaller">RAME</span> entries are obvious. A<span class="smaller">NY</span> F<span class="smaller">RAME</span> opens a dialog where you can select a frame by number.</p><p>D<span class="smaller">ELETE</span> F<span class="smaller">RAMES</span> lets you delete a subrange of frames, beginning at the current frame and ending at the chosen number.</p><p>D<span class="smaller">UPLICATE</span> F<span class="smaller">RAMES</span> opens the dialog in <a class="xref" href="ch18s05.html#duplicate_frames_dialog" title="Figure 18-33. The Duplicate Frames dialog">Figure 18-33</a>. You can choose the starting and ending frame numbers and the number of times to duplicate that range.</p><p>E<span class="smaller">XCHANGE</span> F<span class="smaller">RAME</span> opens a dialog where you can select the number of the frame to be exchanged with the current one.</p><div class="figure"><a id="duplicate_frames_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01554"/><img src="httpatomoreillycomsourcenostarchimages1457138.png.jpg" alt="The Duplicate Frames dialog"/></div></div><p class="title">Figure 18-33. The Duplicate Frames dialog</p></div><div class="figure"><a id="frame_sequence_shift_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01555"/><img src="httpatomoreillycomsourcenostarchimages1457140.png.jpg" alt="The Frame Sequence Shift dialog"/></div></div><p class="title">Figure 18-34. The Frame Sequence Shift dialog</p></div><div class="figure"><a id="frames_density_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01556"/><img src="httpatomoreillycomsourcenostarchimages1457142.png.jpg" alt="The Frames Density dialog"/></div></div><p class="title">Figure 18-35. The Frames Density dialog</p></div><p><a id="iddle2263" class="indexterm"/><a id="iddle2399" class="indexterm"/><a id="iddle2795" class="indexterm"/><a id="iddle2854" class="indexterm"/><a id="iddle2872" class="indexterm"/><a id="iddle2882" class="indexterm"/><a id="iddle2884" class="indexterm"/><a id="iddle2885" class="indexterm"/><a id="iddle2886" class="indexterm"/><a id="iddle2891" class="indexterm"/><a id="iddle4003" class="indexterm"/><a id="iddle4352" class="indexterm"/><a id="iddle5888" class="indexterm"/>F<span class="smaller">RAME</span> S<span class="smaller">EQUENCE</span> R<span class="smaller">EVERSE</span> opens a dialog with two sliders, one for the numbers of the F<span class="smaller">ROM</span> <span class="smaller">FRAME</span> and the other for the T<span class="smaller">O FRAME</span>. This tool reverses the sequence, so 3–4–5–6–7 becomes 7–6–5–4–3.</p><p>F<span class="smaller">RAME</span> S<span class="smaller">EQUENCE</span> S<span class="smaller">HIFT</span> opens the dialog shown in <a class="xref" href="ch18s05.html#frame_sequence_shift_dialog" title="Figure 18-34. The Frame Sequence Shift dialog">Figure 18-34</a>. The first two sliders define a frame subrange, and the last cursor, N-S<span class="smaller">HIFT</span>, specifies the amount of circular shift that will be applied to the subrange. The first frame of the sequence is renumbered <span class="emphasis"><em>N</em></span> places farther along in the range, and so on, until the last frame, which is <span class="emphasis"><em>N</em></span> – 1 places farther than the first frame.</p><p>F<span class="smaller">RAMES</span> R<span class="smaller">ENUMBER</span> opens a dialog with two sliders. The first specifies the new number of the first frame, and the second specifies the number of digits of the frame numbers. All the frames are renumbered.</p><div class="figure"><a id="frames_convert_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01557"/><img src="httpatomoreillycomsourcenostarchimages1457144.png.jpg" alt="The Frames Convert dialog"/></div></div><p class="title">Figure 18-36. The Frames Convert dialog</p></div><p>Selecting F<span class="smaller">RAMES</span> D<span class="smaller">ENSITY</span> opens the dialog shown in <a class="xref" href="ch18s05.html#frames_density_dialog" title="Figure 18-35. The Frames Density dialog">Figure 18-35</a>. This dialog allows you to duplicate frames if the density is increased and delete frames if the density is decreased.</p><p>The first two cursors are used to select a subrange of the animation. D<span class="smaller">ENSITY</span> can range from 1.0 to 100.0. When I<span class="smaller">NCREASE</span> D<span class="smaller">ENSITY</span> is checked, the density is multiplied by this factor. Otherwise it’s divided by this factor.</p><p>Use the Frames Density tool to combine two animations with different frame rates without changing playback speed. For example, you could convert an animation with a frame rate of 8 frames per second to 24 frames per second by choosing a density of 3.0, which will add two copies of every frame to the original animation. If your animation is jerky after you increase the density, try creating <span class="emphasis"><em>onionskin</em></span> layers (see <a class="xref" href="ch18s05.html#onionskin" title="Onionskin">Onionskin</a>).</p><p>Because the Frames Density tool has no undo, work with a copy of your animation so you can return to the original if you make a mistake.</p></div><div class="sect2" title="Converting Between File Formats"><div class="titlepage"><div><div><h2 class="title"><a id="converting_between_file_formats"/>Converting Between File Formats</h2></div></div></div><p>F<span class="smaller">RAMES</span> C<span class="smaller">ONVERT</span> converts a subrange of the multiframe animation to a different format. The Frames Convert dialog is shown in <a class="xref" href="ch18s05.html#frames_convert_dialog" title="Figure 18-36. The Frames Convert dialog">Figure 18-36</a>. F<span class="smaller">ROM</span> F<span class="smaller">RAME</span> and T<span class="smaller">O</span> F<span class="smaller">RAME</span> set the subrange. The B<span class="smaller">ASENAME</span> specifies where the new frames are stored. The small box at the right opens the file manager dialog that you can use to select the location.</p><div class="figure"><a id="frames_crop_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01558"/><img src="httpatomoreillycomsourcenostarchimages1457146.png.jpg" alt="The Frames Crop dialog"/></div></div><p class="title">Figure 18-37. The Frames Crop dialog</p></div><p><a id="iddle1133" class="indexterm"/><a id="iddle1583" class="indexterm"/><a id="iddle1992" class="indexterm"/><a id="iddle1998" class="indexterm"/><a id="iddle2640" class="indexterm"/><a id="iddle2787" class="indexterm"/><a id="iddle2859" class="indexterm"/><a id="iddle2883" class="indexterm"/><a id="iddle2890" class="indexterm"/><a id="iddle2892" class="indexterm"/><a id="iddle2988" class="indexterm"/><a id="iddle3111" class="indexterm"/><a id="iddle3302" class="indexterm"/><a id="iddle3402" class="indexterm"/><a id="iddle4418" class="indexterm"/><a id="iddle4684" class="indexterm"/><a id="iddle4806" class="indexterm"/>Use the E<span class="smaller">XTENSION</span> field to select the format that you want to convert the animation to. The I<span class="smaller">MAGETYPE</span> menu allows you convert the animation to RGB, indexed, or grayscale. Be sure to convert to indexed if you choose GIF as the output format.</p><p>When checked, F<span class="smaller">LATTEN</span> flattens the layers in the output files, which is necessary for most output formats. This tool can be used to convert numerous files at the same time, using many possible input and output formats, as long as the files share a systematic naming scheme.</p><p>F<span class="smaller">RAMES</span> C<span class="smaller">ROP</span> is used to crop <span class="emphasis"><em>all</em></span> frames of a multiframe animation to a new width and height. Its dialog is shown in <a class="xref" href="ch18s05.html#frames_crop_dialog" title="Figure 18-37. The Frames Crop dialog">Figure 18-37</a>. This tool acts on the animation (not a copy), and the regions of the frames outside the cropped area are discarded.</p><p>You can change the width and height of the crop with the N<span class="smaller">EW WIDTH</span> and N<span class="smaller">EW HEIGHT</span> fields. The X <span class="smaller">RATIO</span> and Y <span class="smaller">RATIO</span> fields also modify the cropping. If the chain to the right of these fields is broken, the X and Y dimensions can be changed independently.</p><div class="figure"><a id="frames_scale_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01559"/><img src="httpatomoreillycomsourcenostarchimages1457148.png.jpg" alt="The Frames Scale dialog"/></div></div><p class="title">Figure 18-38. The Frames Scale dialog</p></div><p>Once you’ve changed the dimensions, you can define what part of the source image remains after cropping using the X and Y fields or using the C<span class="smaller">ENTER</span> H<span class="smaller">ORIZONTAL</span> and C<span class="smaller">ENTER</span> V<span class="smaller">ERTICAL</span> buttons. You can also click and drag in the small rectangular area at the bottom of the dialog.</p><p>Use F<span class="smaller">RAMES</span> R<span class="smaller">ESIZE</span> to change the canvas size of all frames of a multiframe animation. It opens the same dialog as the Frames Crop tool. If the new canvas is smaller than the original, the result is the same as cropping.</p><p>F<span class="smaller">RAMES</span> S<span class="smaller">CALE</span> changes the scale of all frames in a multiframe animation. Its dialog, shown in <a class="xref" href="ch18s05.html#frames_scale_dialog" title="Figure 18-38. The Frames Scale dialog">Figure 18-38</a>, contains the same fields as the top half of the Frames Crop and Frames Resize dialogs. The algorithm used to scale the frames can be changed in the GIMP Preferences (<span class="strong"><strong>Image: Edit &gt; Preferences</strong></span>, T<span class="smaller">OOL</span> O<span class="smaller">PTIONS</span> entry, D<span class="smaller">EFAULT</span> I<span class="smaller">NTERPOLATION</span> field).</p></div><div class="sect2" title="Modifying Frames"><div class="titlepage"><div><div><h2 class="title"><a id="modifying_frames"/>Modifying Frames</h2></div></div></div><p>F<span class="smaller">RAMES</span> M<span class="smaller">ODIFY</span> is a very powerful tool that you can use to modify selected layers in a subrange of the current multiframe animation. Its dialog is shown in <a class="xref" href="ch18s05.html#frames_modify_dialog" title="Figure 18-39. The Frames Modify dialog">Figure 18-39</a>. The layers are selected based on their name or their number in the layer stack (0 at the top). Under the heading L<span class="smaller">AYER</span> S<span class="smaller">ELECTION</span> are seven radio buttons, the first six of which use the L<span class="smaller">AYER</span> P<span class="smaller">ATTERN</span> field just below. Most of the radio buttons are self-explanatory.</p><div class="figure"><a id="frames_modify_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01560"/><img src="httpatomoreillycomsourcenostarchimages1457150.png.jpg" alt="The Frames Modify dialog"/></div></div><p class="title">Figure 18-39. The Frames Modify dialog</p></div><div class="figure"><a id="choosing_a_function"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01561"/><img src="httpatomoreillycomsourcenostarchimages1457152.png.jpg" alt="Choosing a function"/></div></div><p class="title">Figure 18-40. Choosing a function</p></div><p><a id="iddle1041" class="indexterm"/><a id="iddle1280" class="indexterm"/><a id="iddle1559" class="indexterm"/><a id="iddle2860" class="indexterm"/><a id="iddle2864" class="indexterm"/><a id="iddle2873" class="indexterm"/><a id="iddle3534" class="indexterm"/><a id="iddle3634" class="indexterm"/><a id="iddle3793" class="indexterm"/><a id="iddle4920" class="indexterm"/>The first four buttons match a string pattern to the exact name of the layer or to a part of its name. The next two choices use a list of layer stack numbers as the pattern. For example, the list “0, 4–6, 8” selects layers 0, 4, 5, 6, and 8. The last choice selects all visible layers.</p><p>When you use a string pattern, the C<span class="smaller">ASE SENSITIVE</span> box allows you to distinguish <code class="literal">Background</code> from <code class="literal">background</code>. In all cases, checking the I<span class="smaller">NVERT</span> L<span class="smaller">AYER</span> S<span class="smaller">ELECTION</span> box selects all layers that don’t match your criteria.</p><p>As usual, select the frame subrange with the F<span class="smaller">ROM</span> F<span class="smaller">RAME</span> and T<span class="smaller">O</span> F<span class="smaller">RAME</span> sliders.</p><p>The most complicated part of using the Frames Modify tool is choosing the function to apply to the selected layers and frames.</p><p><a class="xref" href="ch18s05.html#choosing_a_function" title="Figure 18-40. Choosing a function">Figure 18-40</a> shows the F<span class="smaller">UNCTION</span> button menus, located at the top of the dialog.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>L<span class="smaller">AYER</span> A<span class="smaller">TTRIBUTES</span> lets you perform simple operations in the layers, which you can also do by right-clicking the layer name in the Layers dialog.</p></li><li class="listitem"><p>L<span class="smaller">AYER</span> M<span class="smaller">ODES</span> contains the 22 blending modes, also selected from the M<span class="smaller">ODE</span> menu in the Layers dialog.</p></li><li class="listitem"><p>L<span class="smaller">AYER</span> S<span class="smaller">TACKPOSITION</span> moves layers up and down in the stack.</p></li><li class="listitem"><p>M<span class="smaller">ERGE</span> L<span class="smaller">AYERS</span> merges the selected layers into one. The resulting layer can be clipped to the canvas or to the background layer or expanded to the canvas.</p></li><li class="listitem"><p>S<span class="smaller">ELECTION</span> has several functions. The first four functions (R<span class="smaller">EPLACE</span>, A<span class="smaller">DD</span>, S<span class="smaller">UBTRACT</span>, and I<span class="smaller">NTERSECT</span>) take the selection from the frame that was used to open the tool and combine it with existing selections in all frames of the subrange. The remaining functions alter selections in the same ways as the entries in the <span class="strong"><strong>Image: Select</strong></span> menu.</p></li><li class="listitem"><p>L<span class="smaller">AYER</span> M<span class="smaller">ASK</span> includes several functions. The first seven functions are found by selecting the <span class="strong"><strong>Image: Layer &gt; Mask &gt; Add Layer Mask</strong></span> dialog or by right-clicking the layer name in the Layers dialog. The next three functions are also found in the <span class="strong"><strong>Image: Layer &gt; Mask</strong></span> menu. The remaining two copy a layer mask from the layer above or below and then apply that mask to all selected layers. The meaning of the other entries in this menu should be clear from their names alone.</p></li></ul></div><p>Note that some functions require you to enter a name in the field just below the name of the function in the tool dialog.</p><p>The function A<span class="smaller">PPLY FILTER ON LAYER</span>(<span class="smaller">S</span>) opens a dialog when you click OK. This dialog is the <a id="iddle1014" class="indexterm"/><a id="iddle2405" class="indexterm"/><a id="iddle2412" class="indexterm"/><a id="iddle2641" class="indexterm"/><a id="iddle2804" class="indexterm"/><a id="iddle2832" class="indexterm"/><a id="iddle2835" class="indexterm"/><a id="iddle2842" class="indexterm"/><a id="iddle2887" class="indexterm"/><a id="iddle2888" class="indexterm"/><a id="iddle3549" class="indexterm"/><a id="iddle3654" class="indexterm"/><a id="iddle3965" class="indexterm"/><a id="iddle5175" class="indexterm"/><a id="iddle5194" class="indexterm"/><a id="iddle6072" class="indexterm"/>same as the one shown in <a class="xref" href="ch18s03.html#selection_to_animimage_dialog" title="Figure 18-18. The Selection to Animimage dialog">Figure 18-18</a>, and it works the same way. But this tool operates on several layers at the same time, within a subrange of frames.</p><p>The function A<span class="smaller">PPLY FILTER ON LAYER MASK</span> (in the L<span class="smaller">AYER</span> M<span class="smaller">ASK</span> submenu) applies the selected filter to the layer mask instead of the layer itself. If the first selected layer in the first frame in the subrange does not have a layer mask, you’ll get an error. If the selected filter is applied with varying values, the first selected layer in the last frame in the subrange must have a layer mask too. If intermediate layers in intermediate frames have no layer mask, they are skipped while GIMP processes the frame subrange.</p><p>To use this powerful tool properly, you should use the same layer stack structure in all frames. We also recommend using meaningful names for the layers—and to do so systematically for all frames.</p></div><div class="sect2" title="Altering Layers"><div class="titlepage"><div><div><h2 class="title"><a id="altering_layers"/>Altering Layers</h2></div></div></div><p>Several tools in the Video menu, such as F<span class="smaller">RAMES</span> M<span class="smaller">ODIFY</span> (discussed in the previous section), deal with the layers of the animation frames. In this section, we discuss other tools in the Video menu that alter layers.</p><p>F<span class="smaller">ILENAME TO</span> L<span class="smaller">AYER</span> creates a new layer in all frames of the subrange that contains the filename. Its dialog is shown in <a class="xref" href="ch18s05.html#filename_to_layer_dialog" title="Figure 18-41. The Filename to Layer dialog">Figure 18-41</a>. In the M<span class="smaller">ODE</span> menu, you can choose to use only the number from the filename, the full name, or a combination of the path and the name. Specify the font in the F<span class="smaller">ONTNAME</span> field with the F<span class="smaller">ONT</span> B<span class="smaller">ROWSER</span> button.</p><p>You can also choose the font size and the coordinates of the upper-left corner of the name. Leave the A<span class="smaller">NTIALIAS</span> box checked. If the C<span class="smaller">REATE</span> L<span class="smaller">AYER</span> box is unchecked, the name is written on the active layer.</p><p>To use the tool to number all of the frames in a subrange of an animation, you must select the Filename to Layers tool from the <span class="strong"><strong>Image: Video &gt; Frames Modify</strong></span> menu, using the A<span class="smaller">PPLY FILTER ON LAYER</span>(<span class="smaller">S</span>) function (called <code class="literal">plug_in_gap_renumber</code>).</p><div class="figure"><a id="filename_to_layer_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01562"/><img src="httpatomoreillycomsourcenostarchimages1457154.png.jpg" alt="The Filename to Layer dialog"/></div></div><p class="title">Figure 18-41. The Filename to Layer dialog</p></div><p>F<span class="smaller">RAMES</span> F<span class="smaller">LATTEN</span> flattens all frames (merges all layers) in the specified subrange. It has a dialog with two sliders, similar to the top part of <a class="xref" href="ch18s05.html#duplicate_frames_dialog" title="Figure 18-33. The Duplicate Frames dialog">Figure 18-33</a>.</p><p>F<span class="smaller">RAMES</span> L<span class="smaller">AYER</span> D<span class="smaller">ELETE</span> deletes one specific layer in all frames of the subrange. It opens a dialog with three sliders, similar to <a class="xref" href="ch18s05.html#duplicate_frames_dialog" title="Figure 18-33. The Duplicate Frames dialog">Figure 18-33</a>.</p><p>The <span class="strong"><strong>Image: Video &gt; Layer</strong></span> menu has several entries that can be accessed directly but are much more useful when accessed from the <span class="strong"><strong>Image: Filters &gt; Filter all Layers</strong></span> tool or the <span class="strong"><strong>Image: Video &gt; Frames Modify</strong></span> tool.</p></div><div class="sect2" title="Converting Between Multilayer and Multiframe"><div class="titlepage"><div><div><h2 class="title"><a id="converting_between_multilayer_and_multif"/>Converting Between Multilayer and Multiframe</h2></div></div></div><p>Two tools can be used to convert a multilayer animation to a multiframe one, and vice versa.</p><p>S<span class="smaller">PLIT</span> I<span class="smaller">MAGE TO</span> F<span class="smaller">RAMES</span> must be opened from a multilayer image. Its dialog appears in <a class="xref" href="ch18s05.html#split_image_to_frames_dialog" title="Figure 18-42. The Split Image to Frames dialog">Figure 18-42</a>. You can’t choose names for the new frames or their position in the folder hierarchy. To save the new frames in a particular folder, place the source image in that folder before splitting it into frames.</p><p>The E<span class="smaller">XTENSION</span> is XCF, by default, and it is the safest extension to use, but you can enter any format supported by GIMP. The dialog has four checkboxes that, when checked, do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>I<span class="smaller">NVERSE</span> O<span class="smaller">RDER</span> starts with the first frame (the top layer) instead of the bottom frame.</p><div class="figure"><a id="split_image_to_frames_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01563"/><img src="httpatomoreillycomsourcenostarchimages1457156.png.jpg" alt="The Split Image to Frames dialog"/></div></div><p class="title">Figure 18-42. The Split Image to Frames dialog</p></div></li><li class="listitem"><p><a id="iddle1212" class="indexterm"/><a id="iddle1245" class="indexterm"/><a id="iddle2780" class="indexterm"/><a id="iddle2833" class="indexterm"/><a id="iddle2836" class="indexterm"/><a id="iddle2843" class="indexterm"/><a id="iddle2894" class="indexterm"/>F<span class="smaller">LATTEN</span> flattens the new frames, and any transparent areas are filled with the background color .</p></li><li class="listitem"><p>O<span class="smaller">NLY</span> V<span class="smaller">ISIBLE</span> ignores invisible layers. When unchecked, all layers generate a frame, regardless of their visibility.</p></li><li class="listitem"><p>C<span class="smaller">OPY PROPERTIES</span> copies the channels, paths, and guides existing in the image to all the frames. When unchecked, these properties are ignored.</p></li></ul></div><p>Finally, the D<span class="smaller">IGITS</span> counter specifies the number of digits contained in the numeric part of the frame names.</p><p>F<span class="smaller">RAMES TO</span> I<span class="smaller">MAGE</span> creates a multilayer image from frames, so it must be opened from a multiframe animation. Its dialog is shown in <a class="xref" href="ch18s05.html#frames_to_image_dialog-id00192" title="Figure 18-43. The Frames to Image dialog">Figure 18-43</a>.</p><p>The first two sliders specify the subrange of the frames that will be used to build the multilayer image. The L<span class="smaller">AYER</span> B<span class="smaller">ASENAME</span> field lets you name the layers. By default, all layer names begin with <code class="literal">frame_</code>, but you can change that to any string. The number signs in the square brackets will be replaced by the frame number, but you can change the number of digits. The duration of each layer is 24 images per second, by default, but you can change that as well.</p><p>The new layers are created by merging the layers in the source frames (unless F<span class="smaller">LATTENED</span> <span class="smaller">IMAGE</span> is selected). L<span class="smaller">AYER</span> M<span class="smaller">ERGEMODE</span> lets you choose how the image size is determined.</p><div class="figure"><a id="frames_to_image_dialog-id00192"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01564"/><img src="httpatomoreillycomsourcenostarchimages1457158.png.jpg" alt="The Frames to Image dialog"/></div></div><p class="title">Figure 18-43. The Frames to Image dialog</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>E<span class="smaller">XPAND AS NECESSARY</span> expands the image size to fit around all layers.</p></li><li class="listitem"><p>C<span class="smaller">LIPPED TO IMAGE</span> clips the layers to the image size.</p></li><li class="listitem"><p>C<span class="smaller">LIPPED TO BOTTOM LAYER</span> clips the image to the size of the bottom layer of the source.</p></li><li class="listitem"><p>F<span class="smaller">LATTENED IMAGE</span> creates the new layer by flattening rather than merging the source layers, so the resulting layer, which is the same size as the image, has no transparent part.</p></li></ul></div><p>When checked, E<span class="smaller">XCLUDE</span> BG-L<span class="smaller">AYER</span> excludes the background layer from all source frames. When unchecked, this layer is handled like any other.</p><p>L<span class="smaller">AYER</span> S<span class="smaller">ELECTION</span> determines how the source layers are selected. For the first four options, the L<span class="smaller">AYER</span> P<span class="smaller">ATTERN</span> field is a character string, which should match at least part of the name of the layers you want to select. The next two options <a id="iddle2400" class="indexterm"/><a id="iddle2855" class="indexterm"/><a id="iddle2865" class="indexterm"/><a id="iddle2869" class="indexterm"/><a id="iddle3806" class="indexterm"/><a id="iddle5205" class="indexterm"/>require a list of layer numbers (“1, 3–5, 9” for example). Layers are numbered from zero, beginning at the top layer (or at the bottom layer if the third option is chosen). The final option selects all visible layers. If C<span class="smaller">ASE SENSITIVE</span> is checked, the case of the string must match for the layer to be selected. All of these options can be inverted by checking I<span class="smaller">NVERT</span> L<span class="smaller">AYER</span> S<span class="smaller">ELECTION</span>.</p><div class="figure"><a id="first_tab_of_the_master_videoencoder_dia"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01565"/><img src="httpatomoreillycomsourcenostarchimages1457160.png.jpg" alt="The first tab of the Master Videoencoder dialog"/></div></div><p class="title">Figure 18-44. The first tab of the Master Videoencoder dialog</p></div><p>P<span class="smaller">IXEL</span> S<span class="smaller">ELECTION</span> specifies how an existing selection is handled. I<span class="smaller">GNORE</span> ignores all selections in the source frames. I<span class="smaller">NITIAL FRAME</span> uses the selection from the first frame of the subrange and applies it to all frames. The unselected areas are transparent, and the layer shape is determined by the selection. F<span class="smaller">RAME SPECIFIC</span> uses the selection in each selected frame.</p></div><div class="sect2" title="Encoding"><div class="titlepage"><div><div><h2 class="title"><a id="encoding"/>Encoding</h2></div></div></div><p>M<span class="smaller">ASTER</span> V<span class="smaller">IDEOENCODER</span> converts multiframe or multilayer animations into a specific video file encoding. Its dialog is shown in <a class="xref" href="ch18s05.html#first_tab_of_the_master_videoencoder_dia" title="Figure 18-44. The first tab of the Master Videoencoder dialog">Figure 18-44</a>. You can also use a storyboard with this option, as explained in <a class="xref" href="ch18s05.html#storyboard" title="Storyboard">Storyboard</a>.</p><p>O<span class="smaller">UTPUT</span> allows you to name the output file. The extension is added by GIMP, depending on the chosen encoder. The button to the right opens the local file manager. The S<span class="smaller">TATUS</span> field shows the conversion progress.</p><p>The first tab in this dialog is V<span class="smaller">IDEO</span> E<span class="smaller">NCODE</span> O<span class="smaller">PTIONS</span>. You can select the I<span class="smaller">NPUT</span> M<span class="smaller">ODE</span>; however, the tool automatically chooses one based on the source file. The next two fields define the subrange of frames or layers to be used as the source.</p><p>W<span class="smaller">IDTH</span> and H<span class="smaller">EIGHT</span> specify the size, in pixels, of the resulting video frames. The menu to the right lists a set of standard sizes.</p><p>F<span class="smaller">RAMERATE</span> specifies the number of frames per second. The menu to the right has a set of standard rates.</p><p>The V<span class="smaller">IDEONORM</span> menu contains the usual norms (NTSC, PAL, SECAM), which generally depend on the country in which the video will <a id="iddle2789" class="indexterm"/><a id="iddle2856" class="indexterm"/><a id="iddle2877" class="indexterm"/><a id="iddle3869" class="indexterm"/><a id="iddle4353" class="indexterm"/><a id="iddle5958" class="indexterm"/>be broadcast.</p><div class="figure"><a id="parameter_dialog_of_the_avi1_encoder"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01566"/><img src="httpatomoreillycomsourcenostarchimages1457162.png.jpg" alt="The parameter dialog of the AVI1 encoder"/></div></div><p class="title">Figure 18-45. The parameter dialog of the AVI1 encoder</p></div><p>E<span class="smaller">NCODER</span> is operational only after you choose an encoder plug-in in the box to the right. For example, <a class="xref" href="ch18s05.html#parameter_dialog_of_the_avi1_encoder" title="Figure 18-45. The parameter dialog of the AVI1 encoder">Figure 18-45</a> shows the parameters of the AVI1 encoder.</p><p>The remaining tabs in the Master Videoencoder dialog deal with audio options and the audio tool configuration, which is beyond the scope of this book.</p></div><div class="sect2" title="Playback and Navigator"><div class="titlepage"><div><div><h2 class="title"><a id="playback_and_navigator"/>Playback and Navigator</h2></div></div></div><p>Use P<span class="smaller">LAYBACK</span> to preview a multiframe animation (but not a multilayer one). It cannot play MPEG or AVI files. You can open Playback via <span class="strong"><strong>Image: Video &gt; Playback</strong></span>, but you may also open it from the VCR Navigator (discussed next) or from the Storyboard dialog (see <a class="xref" href="ch18s05.html#storyboard" title="Storyboard">Storyboard</a>).</p><p>The lower part of the Playback dialog (<a class="xref" href="ch18s05.html#playback_dialog" title="Figure 18-46. The Playback dialog">Figure 18-46</a>) contains the standard play forward, pause, and play backward buttons. <span class="inlinemediaobject"><a id="inline_id00533"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> clicking one of the two play buttons creates a “snapshot” image, which is a small multilayer animation containing all the frames that have been played up to this point. When an animation is playing, you can jump to the first, middle, or last frame by clicking the pause button with the left, middle, or right mouse buttons, respectively.</p><p>The top of the Playback dialog contains a set of 50 rectangles, which are the <span class="emphasis"><em>GO array</em></span>, an array of the 50 current frames. Move the pointer over the array to display the frames in real time. You can stop at a particular point in an animation or play the animation at a different speed. Clicking one of the rectangles displays that frame in the source animation window. If the animation is larger than 50 frames, the GO array is a subrange of frames, and by moving the pointer to one side or the other, you can change the subrange contained in the array. The mouse scroll wheel can also move the animation frames.</p><p>The buttons and counters at the right side of the dialog let you display information on the current frame and set a subrange of the animation to play. Two counters below the current frame counter, or the two buttons at the right of the counter, are used to select a range. <span class="inlinemediaobject"><a id="inline_id00534"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> click one of these buttons to make the corresponding frame the current image.</p><p>You can also set the frame rate and the size (in pixels) of the preview window, which also changes when you resize the dialog.</p><p>The five boxes at the bottom right of the dialog control playback and are mostly self-explanatory. Check T<span class="smaller">HUMBNAILS</span> once you’ve seen the animation because that lets you reuse the small images generated. Use E<span class="smaller">XACT TIMING</span> to skip frames and save time in an animation’s playback.</p><p>VCR N<span class="smaller">AVIGATOR</span> lets you perform simple edits on an animation or play it back. The VCR Navigator dialog is shown in <a class="xref" href="ch18s05.html#vcr_navigator_dialog" title="Figure 18-47. The VCR Navigator dialog">Figure 18-47</a>. In the middle is a scrollable list of frame thumbnails. You can see the frame numbers, as well as the time elapsed from the beginning of the animation. F<span class="smaller">RAMERATE</span> and T<span class="smaller">IMEZOOM</span> let you control the frequency and timing of the frames, and the result is immediately visible in the thumbnail area.</p><div class="figure"><a id="playback_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01567"/><img src="httpatomoreillycomsourcenostarchimages1457164.png.jpg" alt="The Playback dialog"/></div></div><p class="title">Figure 18-46. The Playback dialog</p></div><div class="figure"><a id="vcr_navigator_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01568"/><img src="httpatomoreillycomsourcenostarchimages1457166.png.jpg" alt="The VCR Navigator dialog"/></div></div><p class="title">Figure 18-47. The VCR Navigator dialog</p></div><p><a id="iddle1015" class="indexterm"/><a id="iddle2878" class="indexterm"/><a id="iddle3550" class="indexterm"/><a id="iddle4004" class="indexterm"/><a id="iddle4921" class="indexterm"/>At the top of the VCR Navigator is the animation selector. Next is AL-T<span class="smaller">RACKING</span> (Active Layer Tracking). Active Layer Tracking finds a layer in the newly loaded frame that matches the active layer of the previous frame and sets that layer as the active one. Three options are available:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>OFF disables Active Layer Tracking.</p></li><li class="listitem"><p>N<span class="smaller">AME</span> compares the layer names from left to right and chooses the layer that best matches.</p></li><li class="listitem"><p>P<span class="smaller">OS</span> uses the layer’s stack position; onionskin layers are not counted.</p></li></ul></div><p>In the thumbnail area, you can select frames: A single click selects one frame; <span class="inlinemediaobject"><a id="inline_id00535"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-click adds (or removes) the frame to the selected frames; and <span class="inlinemediaobject"><a id="inline_id00536"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>-click selects all layers between the previous and the current layer. Right-click to open a simple editing menu (copy, cut, paste, and so on).</p><p><a id="iddle1883" class="indexterm"/><a id="iddle2805" class="indexterm"/><a id="iddle2861" class="indexterm"/><a id="iddle3476" class="indexterm"/><a id="iddle3870" class="indexterm"/><a id="iddle3871" class="indexterm"/><a id="iddle4354" class="indexterm"/><a id="iddle4376" class="indexterm"/><a id="iddle6073" class="indexterm"/>Below the thumbnails are two rows of buttons. The playback button opens the Playback tool. <span class="inlinemediaobject"><a id="inline_id00537"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>-click it to use the selected frames to build a temporary multilayer animation and then open the Playback tool.</p><p>The next button (a triangle in a circle) updates only those thumbnails that are out of date; press <span class="inlinemediaobject"><a id="inline_id00538"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to update all thumbnails. The next button duplicates the selected frames, and the last one deletes them. The lower row of buttons lets you navigate through the frames of an animation.</p></div><div class="sect2" title="Split Video into Frames"><div class="titlepage"><div><div><h2 class="title"><a id="split_video_into_frames"/>Split Video into Frames</h2></div></div></div><p>The menu <span class="strong"><strong>Image: Video &gt; Split video into frames</strong></span> contains two entries.</p><p>MP<span class="smaller">LAYER</span>-<span class="smaller">BASED EXTRACTION</span> is the best tool for converting a video file to a multiframe animation, but it works only if you have MPlayer installed. MPlayer is free software, available for all platforms. See <span class="emphasis"><em><a class="ulink" href="http://www.mplayerhq.hu/">http://www.mplayerhq.hu/</a></em></span> for more information.</p><p>The MPlayer-based extraction tool, shown in <a class="xref" href="ch18s05.html#mplayer-based_extraction_dialog" title="Figure 18-48. The MPlayer-based extraction dialog">Figure 18-48</a>, supports many input formats. The most useful fields are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>I<span class="smaller">NPUT</span> V<span class="smaller">IDEO</span> is where you can enter the name of the input video or click the button on the right to browse for the file.</p></li><li class="listitem"><p>S<span class="smaller">TART</span> T<span class="smaller">IME</span> is the place in the video where you want to begin extracting, entered in <span class="emphasis"><em>hours:minutes:seconds</em></span>.</p></li><li class="listitem"><p>F<span class="smaller">RAMES</span> sets the number of frames to extract.</p></li><li class="listitem"><p>V<span class="smaller">IDEOTRACK</span> and A<span class="smaller">UDIOTRACK</span> are useful if the input video file is multitrack, but that isn’t very common. Enter 0 to ignore the audio or video track.</p></li><li class="listitem"><p>F<span class="smaller">RAMENAMES</span> sets the base name of the new frames. To use the file navigator, click the button on the right.</p></li><li class="listitem"><p>F<span class="smaller">ORMAT</span> lets you choose JPEG, PNG, or XCF (generally the best choice). Below that you can adjust the compression or optimization, depending on the output format.</p><div class="figure"><a id="mplayer-based_extraction_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01569"/><img src="httpatomoreillycomsourcenostarchimages1457168.png.jpg" alt="The MPlayer-based extraction dialog"/></div></div><p class="title">Figure 18-48. The MPlayer-based extraction dialog</p></div></li><li class="listitem"><p>S<span class="smaller">ILENT</span>, if checked, ignores any audio track.</p></li><li class="listitem"><p>O<span class="smaller">PEN</span> opens the first frame once the extraction is finished.</p></li><li class="listitem"><p>A<span class="smaller">SYNCHRONOUS</span>, when checked, sets MPlayer to run asynchronously, so it doesn’t block other processes running on the computer.</p></li></ul></div><p>The frames of the input video are first converted to PNG and then to the chosen output format, which is normally XCF. Because the frames are processed twice, and a one-minute video sequence contains 1440 frames, these conversions can take half an hour or more.</p><p>The other entry in the <span class="strong"><strong>Image: Video &gt; Split video into frames</strong></span> menu is E<span class="smaller">XTRACT</span> V<span class="smaller">IDEORANGE</span>. When no additional video software is installed, this tool can only process an MPEG input file. Its dialog is shown in <a class="xref" href="ch18s05.html#extract_videorange_dialogcomma_extended" title="Figure 18-49. The Extract Videorange dialog, extended">Figure 18-49</a>. At the top of the dialog, choose the input file and then the range, either using the counters F<span class="smaller">ROM</span> F<span class="smaller">RAME</span> and T<span class="smaller">O</span> F<span class="smaller">RAME</span> or the extended dialog that opens if you click V<span class="smaller">IDEO</span> R<span class="smaller">ANGE</span>, as shown on the right of <a class="xref" href="ch18s05.html#extract_videorange_dialogcomma_extended" title="Figure 18-49. The Extract Videorange dialog, extended">Figure 18-49</a>.</p><div class="figure"><a id="extract_videorange_dialogcomma_extended"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01570"/><img src="httpatomoreillycomsourcenostarchimages1457170.png.jpg" alt="The Extract Videorange dialog, extended"/></div></div><p class="title">Figure 18-49. The Extract Videorange dialog, extended</p></div><p><a id="iddle1418" class="indexterm"/><a id="iddle1427" class="indexterm"/><a id="iddle1703" class="indexterm"/><a id="iddle2373" class="indexterm"/><a id="iddle2837" class="indexterm"/><a id="iddle4332" class="indexterm"/><a id="iddle4919" class="indexterm"/>You can generally leave the remaining fields in the input portion of the Extract Videorange dialog set at the defaults. In the O<span class="smaller">UTPUT</span> section, you can choose whether to generate a multilayer or multiframe animation. You can also choose the base name of the frames, the number of digits, the extension (and format), and the number of the first frame. The audio track is extracted into a WAV file.</p></div><div class="sect2" title="Bluebox"><div class="titlepage"><div><div><h2 class="title"><a id="bluebox"/>Bluebox</h2></div></div></div><p><span class="strong"><strong>Bluebox</strong></span> uses a technique often called <span class="emphasis"><em>blue screen</em></span> in cinematography. It’s also called <span class="emphasis"><em>chroma key</em></span>, <span class="emphasis"><em>color keying</em></span>, or <span class="emphasis"><em>color-separation overlay</em></span>. Basically, a scene is filmed with the actor(s) in front of a blue (or green) screen. The blue (or green) part of the video frame is then replaced with a different background. This technique can also be used to make an actor appear more than once in the same scene.</p><p>The Bluebox dialog is shown in <a class="xref" href="ch18s05.html#bluebox_dialog" title="Figure 18-50. The Bluebox dialog">Figure 18-50</a>. Bluebox is actually a filter and works best when opened through the Move Path tool because it operates on a single layer. You can also open it through the Frames Modify tool from the Apply filter on layer(s) function.</p><p>K<span class="smaller">EYCOLOR</span> chooses the color of the background to removed. You can choose any color via the Color chooser. Pixels similar to this chosen color are made transparent according to the threshold setting.</p><p>The T<span class="smaller">HRESHOLD</span> M<span class="smaller">ODE</span> can be RGB (three values), HSV (three values), VALUE (one value), or ALL (HSV and RGB combined, six values). These thresholds range from 0.0 to 1.0, where 0.0 only targets the exact color and 1.0 makes the widest range of colors transparent. The A<span class="smaller">LPHA</span> T<span class="smaller">OLERANCE</span> also changes how much of the background becomes transparent.</p><p>S<span class="smaller">OURCE</span> A<span class="smaller">LPHA</span> sets a maximum Alpha value to prevent transparent pixels from becoming part of the selection. T<span class="smaller">ARGET</span> A<span class="smaller">LPHA</span> specifies the transparency of the selected pixels after the <a id="iddle1247" class="indexterm"/><a id="iddle2838" class="indexterm"/><a id="iddle2839" class="indexterm"/><a id="iddle2852" class="indexterm"/><a id="iddle4005" class="indexterm"/><a id="iddle5889" class="indexterm"/><a id="iddle5959" class="indexterm"/>transformation. You can feather (smooth) the edges of the selection and shrink or grow it.</p><div class="figure"><a id="bluebox_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01571"/><img src="httpatomoreillycomsourcenostarchimages1457172.png.jpg" alt="The Bluebox dialog"/></div></div><p class="title">Figure 18-50. The Bluebox dialog</p></div><p>You can also adjust the size of the preview window, which is useful because this filter has no undo capability.</p></div><div class="sect2" title="Onionskin"><div class="titlepage"><div><div><h2 class="title"><a id="onionskin"/>Onionskin</h2></div></div></div><p>An onionskin layer is used to show the previous (or next) frame of an animation in the current frame. This is useful when painting moving characters, for example. The onionskin is automatically deleted when you move on to the next frame.</p><p>Onionskin layers can also be used for smoothing very fast movement to simulate motion blur, as we discussed in <a class="xref" href="ch18s05.html#manipulating_frames" title="Manipulating Frames">Manipulating Frames</a>. Onionskin layers behave like normal layers for the most part, but special tools are available for doing some things like toggling visibility.</p><p>By default, onionskin layers are built by merging the visible layers of the previous frame without the background or any other onionskin layers. They are usually placed above the background layer in the current frame.</p><p>The <span class="strong"><strong>Image: Video</strong></span> menu has a submenu called O<span class="smaller">NIONSKIN</span>. C<span class="smaller">ONFIGURATION</span>, the main entry, opens the dialog shown in <a class="xref" href="ch18s05.html#onionskin_configuration_dialog" title="Figure 18-51. The Onionskin Configuration dialog">Figure 18-51</a>.</p><p>L<span class="smaller">AYER</span> S<span class="smaller">ELECTION</span> lets you choose the layers to be selected and is similar to the Frames Modify tool (see <a class="xref" href="ch18s05.html#modifying_frames" title="Modifying Frames">Modifying Frames</a>). An additional field lets you ignore a number of background layers.</p><p>The large field displaying the name of the current multiframe animation is actually a button used to set the video’s parameters. The two boxes below it are used to create or delete onionskins automatically when you select the tool from the VCR Navigator tool or when you move to the next frame using <span class="strong"><strong>File: Video &gt; Go To &gt; Next Frame</strong></span>. When both boxes are checked, onionskins are automatically added when you load a frame and deleted when you save the frame.</p><p>The top of the dialog, O<span class="smaller">NIONSKIN</span> S<span class="smaller">ETTINGS</span>, specifies how the layers from the previous frames are copied. F<span class="smaller">RAME</span> R<span class="smaller">EFERENCE</span> refers to the source frame number from which the onionskin layer is copied. If the frame reference is –1, it means that the first onionskin layer will be copied from the previous frame, the second from the frame before that, and so on. A positive frame reference means that the onionskin is made up of frames that come after the current frame.</p><p>R<span class="smaller">EFERENCE</span> M<span class="smaller">ODE</span> specifies the way neighboring frames are used. In Normal mode, the delta provided by F<span class="smaller">RAME</span> R<span class="smaller">EFERENCE</span> is used in one direction only. This delta value determines which onionskin layers are built and copied in the current frame. In Bidirectional (single) mode, this delta is used alternately in both directions, but a given offset is used only once, as in the <a id="iddle2858" class="indexterm"/><a id="iddle2862" class="indexterm"/><a id="iddle3655" class="indexterm"/><a id="iddle4006" class="indexterm"/><a id="iddle4036" class="indexterm"/><a id="iddle5195" class="indexterm"/><a id="iddle5206" class="indexterm"/><a id="iddle5960" class="indexterm"/>sequence –1, +2, –3, +4<span class="emphasis"><em>,...</em></span>. In Bidirectional (double) mode, each delta is used twice, as in the sequence –1, +1, –2, +2, –3, +3<span class="emphasis"><em>,...</em></span></p><div class="figure"><a id="onionskin_configuration_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01572"/><img src="httpatomoreillycomsourcenostarchimages1457174.png.jpg" alt="The Onionskin Configuration dialog"/></div></div><p class="title">Figure 18-51. The Onionskin Configuration dialog</p></div><p>You can also specify the number of onionskin layers to generate, their stack position, and their opacity.</p><p>Clicking OK adds the onionskin layers, whereas clicking D<span class="smaller">ELETE</span> removes them. C<span class="smaller">LOSE</span> uses the parameters to define the settings throughout the current animation without generating an onionskin layer.</p><p>Once the settings are defined, the remaining entries in the <span class="strong"><strong>Image: Video &gt; Onionskin</strong></span> menu let you make global changes to the selected frames. You can create the onionskin layers or replace layers that you created previously. You can also delete specified onionskin layers or toggle their visibility.</p><p>The Onionskin tools are designed to work with the VCR Navigator or the <span class="strong"><strong>Image: Video &gt; Go To</strong></span> operations. When you move between frames, the actions specified by the A<span class="smaller">UTO</span> boxes (if checked) are performed automatically. When both A<span class="smaller">UTO</span> boxes are checked, the frame is saved after deleting the onionskin, and a new onion-skin is created in the next frame according to the parameters saved in the <span class="strong"><strong>Image: Video &gt; Onionskin &gt; Configuration</strong></span> dialog.</p></div><div class="sect2" title="Storyboard"><div class="titlepage"><div><div><h2 class="title"><a id="storyboard"/>Storyboard</h2></div></div></div><p>A <span class="emphasis"><em>storyboard</em></span> is a text file that describes how to assemble video clips, images, and audio files to build a single output video file. Storyboards are useful for creating and cutting long video sequences. In fact, the Storyboard Editor, together with its accompanying tools, provides a means for editing a video sequence by assembling video clips, multiframe animations, and single images. It does not provide as many features and capabilities as more specialized video-editing tools (such as Kden-live at <span class="emphasis"><em><a class="ulink" href="http://www.kdenlive.org/">http://www.kdenlive.org/</a></em></span> or Cinelerra at <span class="emphasis"><em><a class="ulink" href="http://cinelerra.org/">http://cinelerra.org/</a></em></span>), but it does allow you to use GIMP’s image-editing capabilities to work on individual frames.</p><div class="figure"><a id="storyboard_editor_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01573"/><img src="httpatomoreillycomsourcenostarchimages1457176.png.jpg" alt="The Storyboard Editor dialog"/></div></div><p class="title">Figure 18-52. The Storyboard Editor dialog</p></div><p>Selecting <span class="strong"><strong>Image: Video &gt; Storyboard</strong></span> opens the dialog in <a class="xref" href="ch18s05.html#storyboard_editor_dialog" title="Figure 18-52. The Storyboard Editor dialog">Figure 18-52</a>. The right side of this dialog is similar to the Playback dialog and is fairly intuitive. The left side is divided into the Cliplist and the Storyboard itself. The menu bar at the top of the window contains two identical menus (C<span class="smaller">LIPLIST</span> and S<span class="smaller">TORYBOARD</span>) for the two sections. In the G<span class="smaller">LOBAL</span> menu, check the V<span class="smaller">IDEOTHUMBNAILS</span> button to view thumbnails of the Cliplist and Storyboard. The P<span class="smaller">ROPERTIES</span> entry opens a dialog where you can choose the layout of the Cliplist and Storyboard sections, including the size of the thumbnails.</p><p>To use the Cliplist or Storyboard, you first must choose a video or animation file. To begin a new project, select <span class="strong"><strong>Storyboard &gt; New</strong></span>. In the dialog that appears, select the characteristics of the video animation you plan to build and enter the name of the storyboard file. Also select <span class="strong"><strong>Cliplist &gt; New</strong></span>. Its dialog is the same, but <a id="iddle1642" class="indexterm"/><a id="iddle2401" class="indexterm"/><a id="iddle2874" class="indexterm"/>you must choose a different name for the file. Both menus contain additional entries that are fairly self-explanatory.</p><div class="figure"><a id="clip_properties"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01574"/><img src="httpatomoreillycomsourcenostarchimages1457178.png.jpg" alt="Clip properties"/></div></div><p class="title">Figure 18-53. Clip properties</p></div><p>To add a clip, select <span class="strong"><strong>Cliplist &gt; Create Clip</strong></span>, which opens the dialog shown in <a class="xref" href="ch18s05.html#clip_properties" title="Figure 18-53. Clip properties">Figure 18-53</a>. You can load frames or layers from another animation and set several parameters for this new clip. Note that if the new clip is significantly different from the video that it’s added to, the frames may be deformed.</p><p>A single image can also be used as a new clip. You can even drag and drop an image from a file manager.</p><p>After a clip is selected, it’s displayed as a thumbnail in the P<span class="smaller">LAYBACK</span> section of the Storyboard Editor dialog. You then choose the frame range to be used as a clip and add it to the Clip-list by clicking the first button on the right. The second button adds the inverse range.</p><p>Once you have clips in the Cliplist, add them to the Storyboard by</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="inlinemediaobject"><a id="inline_id00539"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-clicking and <span class="inlinemediaobject"><a id="inline_id00540"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span>-clicking to select the clips</p></li><li class="listitem"><p>using the C<span class="smaller">UT</span>, C<span class="smaller">OPY</span>, and P<span class="smaller">ASTE</span> buttons at the bottom of the Cliplist to arrange the clips in sequence</p></li><li class="listitem"><p>using the C<span class="smaller">UT</span>, C<span class="smaller">OPY</span>, and P<span class="smaller">ASTE</span> buttons in the Storyboard to copy and arrange clips</p></li><li class="listitem"><p>clicking the play button at the bottom right of the Cliplist to play the sequence of clips or only the selected clips</p></li><li class="listitem"><p>double-clicking a clip thumbnail to play it</p></li><li class="listitem"><p>right-clicking a clip thumbnail to change its properties (<a class="xref" href="ch18s05.html#clip_properties" title="Figure 18-53. Clip properties">Figure 18-53</a>)</p></li></ul></div><p>Playing a clip or clip sequence is useful when selecting a subrange of frames and defining a new clip. Pasted clips are added after the last selected clip or at the end of the sequence.</p><div class="figure"><a id="transition_attributes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01575"/><img src="httpatomoreillycomsourcenostarchimages1457180.png.jpg" alt="Transition attributes"/></div></div><p class="title">Figure 18-54. Transition attributes</p></div><p><a id="iddle2851" class="indexterm"/><a id="iddle3033" class="indexterm"/><a id="iddle6090" class="indexterm"/>The <span class="strong"><strong>Cliplist</strong></span> and <span class="strong"><strong>Storyboard</strong></span> menus also allow you to create a transition. This menu entry opens the dialog shown in <a class="xref" href="ch18s05.html#transition_attributes" title="Figure 18-54. Transition attributes">Figure 18-54</a>. Create transitions by changing the opacity of frames, scrolling frames, or zooming. You can also combine these effects.</p><p>Once you’ve finished building a storyboard, you can save it as a text file. These files use a well-defined syntax, and you can modify them with a text editor if you know the syntax.</p></div></div></body></html>