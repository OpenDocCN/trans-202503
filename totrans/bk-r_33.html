<html><head></head><body>
<h2 class="h2" id="app02"><span epub:type="pagebreak" id="page_751"/><span class="big"><strong>B</strong></span><br/><strong>WORKING WITH RSTUDIO</strong></h2>&#13;
<div class="image"><img src="../images/common-01.jpg" alt="image"/></div>&#13;
<p class="noindent">Although the base R application and GUI are all you need to unleash the full suite of available functionality, the bare-bones appearance of the console and code editor can be off-putting to some, especially beginners. One of the best integrated development environments (IDEs) designed specifically to enhance day-to-day use of the R language is RStudio.</p>&#13;
<p class="indent">Like R, the desktop version of RStudio (<a href="ref.xhtml#ref56">RStudio Team, 2015</a>) is free and can be used on Windows, OS X, and Linux systems. Before installing RStudio, you must first have R installed, as described in <a href="app01.xhtml#app01">Appendix A</a> (OS X users will also want XQuartz; see <a href="app01.xhtml#app01lev1sec96">Section A.1</a>). Then, you can download RStudio from the official website at <em><a href="https://www.rstudio.com/products/rstudio/download/">https://www.rstudio.com/products/rstudio/download/</a></em>.</p>&#13;
<p class="indent">The RStudio website also hosts a variety of useful support articles and links, as well as instructions for various special enhancements, some of which are noted in <a href="app02.xhtml#app02lev1sec102">Section B.2</a>. If you need help with RStudio, see <em><a href="https://support.rstudio.com/hc/en-us/">https://support.rstudio.com/hc/en-us/</a></em>. In particular, you should take time to click the Documentation link; you can also view this through RStudio by selecting Help → RStudio Docs.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_752"/>In this appendix, you’ll get an overview of RStudio and its most commonly used tools.</p>&#13;
<h3 class="h3" id="app02lev1sec101"><strong>B.1 Basic Layout and Usage</strong></h3>&#13;
<p class="noindent">The RStudio IDE is split into four panes, and you can customize the content and layout to suit your preferences. <a href="app02.xhtml#appBfig1">Figure B-1</a> shows my setup. In it, I’m playing with the <code>ggvis</code> code from <a href="ch24.xhtml#ch24lev1sec85">Section 24.4</a>.</p>&#13;
<div class="image"><img src="../images/fb-01.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig1"/>Figure B-1: RStudio in action. The four panes can be arranged and suppressed as you like; here, you can see the code editor (top left), the console (bottom left), the help pages (top right), and the graphics viewer (bottom right). The panes on the right also have additional tabs to choose from.</em></p>&#13;
<p class="indent">You write R code in the built-in editor and execute it in the console; the shortcut “send code to console” keystrokes are <small>CTRL</small>-<small>ENTER</small> or <small>CTRL</small>-R in Windows and <img class="middle" src="../images/common-02.jpg" alt="image"/>-<small>RETURN</small> on a Mac. The textual output appears in the console as usual.</p>&#13;
<h4 class="h4" id="app02lev2sec280"><strong><em>B.1.1 Editor Features and Appearance Options</em></strong></h4>&#13;
<p class="noindent">One of the most useful features of RStudio editor is the color-themed code highlighting and bracket matching. This makes for an easier coding experience than in the base R editor, particularly when writing long chunks of code. There are also autocomplete options that pop up as you’re typing in either the editor or the console. You can see an example of this in <a href="app02.xhtml#appBfig2">Figure B-2</a>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_753"/><img src="../images/fb-02.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig2"/>Figure B-2: RStudio’s autocomplete feature includes hints about each option.</em></p>&#13;
<p class="indent">These features and more can be enabled, disabled, and customized using the RStudio options (select <strong>Tools</strong> → <strong>Global Options...</strong> on both Windows and OS X; for OS X, you can also select <strong>RStudio</strong> → <strong>Preferences...</strong>); you can see the Code and Appearance options in <a href="app02.xhtml#appBfig3">Figure B-3</a>.</p>&#13;
<div class="image"><img src="../images/fb-03.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig3"/>Figure B-3: The options panes for code editing (left) and appearance (right)</em></p>&#13;
<h4 class="h4" id="app02lev2sec281"><strong><em>B.1.2 Customizing Panes</em></strong></h4>&#13;
<p class="noindent">Next you’ll probably want to sort out the arrangement and content of the four RStudio panes. Two panes will always be the editor and the console, but you can set up a number of additional tabs to be displayed on the two utility panes. These include a file browser that you can use to search for and open R scripts on your local machine, plot and document viewers, standard R function help files, and a package installer.</p>&#13;
<p class="indent">You can configure your utility panes with the drop-down menus and checkboxes in the Pane Layout section of the RStudio options. <a href="app02.xhtml#appBfig4">Figure B-4</a> shows my current settings; one change I’ve made from the default arrangement is to make the help files appear in the topmost utility pane, with the graphical displays on the bottom, since I often want to refer to function documentation while experimenting with my plots.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_754"/><img src="../images/fb-04.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig4"/>Figure B-4: Pane layout and arrangement options</em></p>&#13;
<h3 class="h3" id="app02lev1sec102"><strong>B.2 Auxiliary Tools</strong></h3>&#13;
<p class="noindent">RStudio gives you access to a number of handy tools to use in conjunction with R, which I’ll briefly highlight here. For more information on a particular feature, check the supporting documentation at <em><a href="https://support.rstudio.com/hc/en-us/">https://support.rstudio.com/hc/en-us/</a></em>.</p>&#13;
<h4 class="h4" id="app02lev2sec282"><strong><em>B.2.1 Projects</em></strong></h4>&#13;
<p class="noindent">RStudio <em>projects</em> assist with development and file management when you’re working on more complicated endeavors. In these situations, you’re typically working with multiple script files, you might want to save separate R workspaces, or you might have certain R <code>options</code> set to specific or non-default values. RStudio facilitates this process so you don’t have to set it up manually.</p>&#13;
<p class="indent">At the top right of the RStudio window, you’ll see a Project: (None) button. Click it and you’ll see a short menu, as shown in <a href="app02.xhtml#appBfig5">Figure B-5</a>; set up a basic project folder by clicking <strong>New Project</strong> and selecting the <strong>New Directory</strong> → <strong>Empty Project</strong> items.</p>&#13;
<p class="indent">Essentially, creating a new project does the following:</p>&#13;
<p class="bull">• Sets the working directory as the project folder</p>&#13;
<p class="bull">• Saves, by default, the R workspace, history, and all <em>.R</em> source files in said folder</p>&#13;
<p class="bull">• Creates a <em>.Rproj</em> file, which can be used to open a saved project at a later date, and stores RStudio options set specifically for that project</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_755"/><img src="../images/fb-05.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig5"/>Figure B-5: RStudio project menus; setting up a basic project directory</em></p>&#13;
<p class="indent">When you’re working on a specific project, its name will appear in place of (None) on the Project: (None) button.</p>&#13;
<h4 class="h4" id="app02lev2sec283"><strong><em>B.2.2 Package Installer and Updater</em></strong></h4>&#13;
<p class="noindent">RStudio provides a package installer to manage the downloads and installations of contributed packages. You’ll find the package manager in the Packages tab on your chosen utility pane. It lists only those packages that you currently have installed, along with their version numbers, and you can use the checkboxes next to each package name to load it (instead of using <code>library</code> at the R console prompt).</p>&#13;
<p class="indent">Mine appears in <a href="app02.xhtml#appBfig6">Figure B-6</a>. I’ve just selected the box for the <code>car</code> package, which automatically executes the relevant call to <code>library</code> in the console.</p>&#13;
<div class="image"><img src="../images/fb-06.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig6"/>Figure B-6: The RStudio package installer, showing</em> <code>car</code> <em>being loaded by clicking its checkbox</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_756"/>The figure also shows the Install and Update buttons for packages. To install a package, click the <strong>Install</strong> button and enter the package you want in the field. RStudio will give you options as you type, as shown for the <code>ks</code> package on the left of <a href="app02.xhtml#appBfig7">Figure B-7</a>. Ensure “Install dependencies” is checked in order to automatically install any additionally required packages.</p>&#13;
<p class="indent">To update packages, click the <strong>Update</strong> button to bring up the dialog box on the right of <a href="app02.xhtml#appBfig7">Figure B-7</a>; here you can choose to update either individual packages or all of them by clicking the <strong>Select All</strong> button.</p>&#13;
<div class="image"><img src="../images/fb-07.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig7"/>Figure B-7: Package installation and update features in RStudio</em></p>&#13;
<p class="indent">Naturally, you can still use the <code>install.packages</code>, <code>update.packages</code>, and <code>library</code> commands directly from the console prompt within RStudio if you prefer.</p>&#13;
<h4 class="h4" id="app02lev2sec284"><strong><em>B.2.3 Support for Debugging</em></strong></h4>&#13;
<p class="noindent">Another nice feature of RStudio is its built-in tools for code debugging. Debugging strategies usually involve being able to “pause” your code at a specific point to inspect your objects and function values in a given “live” state. Specific techniques are best left to more advanced texts such as <em>The Art of Debugging</em> (<a href="ref.xhtml#ref45">Matloff and Salzman, 2008</a>) and <em>The Art of R Programming</em> (<a href="ref.xhtml#ref44">Matloff, 2011</a>); see also <a href="ch09.xhtml#ch09">Chapter 9</a> of <em>Advanced R</em> (<a href="ref.xhtml#ref73">Wickham, 2015<em>a</em></a>). But I mention it here since the tools available in RStudio provide more convenient, higher-level support for debugging than do base R commands alone.</p>&#13;
<p class="indent">Once you’re at the stage where you’re starting to write programs comprised of multiple interlinked R functions, you might like to learn more. With respect to R and RStudio in particular, there’s a good introductory article by Jonathan McPherson on the support website at <em><a href="https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio/">https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio/</a></em>.</p>&#13;
<h4 class="h4" id="app02lev2sec285"><strong><em>B.2.4 Markup, Document, and Graphics Tools</em></strong></h4>&#13;
<p class="noindent">When writing up reports on a project or tutorials for particular analyses, researchers often use a <em>markup</em> language. One of the best-known markup <span epub:type="pagebreak" id="page_757"/>languages, particularly in the sciences, is L<small>A</small>T<sub>E</sub>X; it facilitates a unified approach to typesetting, formatting, and layout of technical documents.</p>&#13;
<p class="indent">There are specialized packages that incorporate R code into the compilation of these documents. These are in turn incorporated into RStudio, allowing you to create dynamic documents that make use of R code and graphics without switching between different applications.</p>&#13;
<p class="indent">You’ll need a T<sub>E</sub>X installation on your computer to use these tools, which you can find at <em><a href="https://www.latex-project.org/">https://www.latex-project.org/</a></em>. In this section, I’ll briefly discuss the most widely used enhancements.</p>&#13;
<h5 class="h5" id="app02lev3sec134"><strong>Sweave</strong></h5>&#13;
<p class="noindent">Sweave (<a href="ref.xhtml#ref39">Leisch, 2002</a>) was arguably the first markup language to become popular with R; its functionality is included with any standard R installation. Sweave follows typical L<small>A</small>T<sub>E</sub>X markup rules; in your document, you declare special fields called <em>chunks</em>, in which you write R code and instruct any corresponding output to be displayed; the output can include both console text and graphics. When you compile the Sweave file (which has a <em>.Rnw</em> extension), the R code fields are sent to R for live evaluation, with the results appearing in the specified places of the finished product. To start a new document, choose <strong>File</strong> → <strong>New File</strong> → <strong>R Sweave</strong>, as shown in <a href="app02.xhtml#appBfig8">Figure B-8</a>. For some examples and resources, visit the Sweave home page at <em><a href="https://www.statistik.lmu.de/~leisch/Sweave/">https://www.statistik.lmu.de/~leisch/Sweave/</a></em>.</p>&#13;
<div class="image"><img src="../images/fb-08.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig8"/>Figure B-8: Starting a new Sweave document in RStudio. The editor is used for markup and live code fields, and you use the Compile PDF button to render the result.</em></p>&#13;
<h5 class="h5" id="app02lev3sec135"><strong>knitr</strong></h5>&#13;
<p class="noindent">knitr (<a href="ref.xhtml#ref78">Xie, 2015</a>) is an R package designed as an extension to Sweave, with some additional features that make document creation easier and more flexible. You can select knitr as the document “weaver” in the Sweave tab of the RStudio options, found by selecting <strong>Tools</strong> → <strong>Global Options...</strong> (see <a href="app02.xhtml#appBfig9">Figure B-9</a>). To learn more about Sweave and knitr with respect to RStudio, <span epub:type="pagebreak" id="page_758"/>consult Josh Paulson’s article at <em><a href="https://support.rstudio.com/hc/en-us/articles/200552056-Using-Sweave-and-knitr/">https://support.rstudio.com/hc/en-us/articles/200552056-Using-Sweave-and-knitr/</a></em>.</p>&#13;
<div class="image"><img src="../images/fb-09.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig9"/>Figure B-9: Choosing knitr as the weaver of your markup document in the Sweave tab of the RStudio options</em></p>&#13;
<h5 class="h5" id="app02lev3sec136"><strong>R Markdown</strong></h5>&#13;
<p class="noindent">R Markdown (<a href="ref.xhtml#ref02">Allaire et al., 2015</a>) is another dynamic document creation tool, downloadable from CRAN as the <code>rmarkdown</code> package. Like both Sweave and knitr, its goal is to produce polished documents that can include R code and output automatically. Unlike Sweave and knitr, however, one of the objectives of R Markdown is to minimize the need to learn complicated markup languages like L<small>A</small>T<sub>E</sub>X, and as a result, its syntax is considerably simpler. Working from a <em>.Rmd</em> source file, you can create a variety of output document types, such as PDF, HTML, and Word.</p>&#13;
<p class="indent">To start a new R Markdown document, click the <strong>R Markdown...</strong> menu item under <strong>File</strong> → <strong>New File</strong>, as shown on the left of <a href="app02.xhtml#appBfig8">Figure B-8</a>; this opens the New R Markdown dialog shown at the top of <a href="app02.xhtml#appBfig10">Figure B-10</a>. Here, you can choose the appropriate document type for your project, and then you’re provided with a basic template in the RStudio editor; one such template is shown on the bottom of <a href="app02.xhtml#appBfig10">Figure B-10</a>. The template even points you toward the R Markdown home page at <em><a href="http://rmarkdown.rstudio.com/">http://rmarkdown.rstudio.com/</a></em>, which you should certainly investigate if you’re interested in learning more. Garrett Grolemund also provides a useful collection of links for using R Markdown at <em><a href="https://support.rstudio.com/hc/en-us/articles/205368677-R-Markdown-Dynamic-Documents-for-R/">https://support.rstudio.com/hc/en-us/articles/205368677-R-Markdown-Dynamic-Documents-for-R/</a></em>.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_759"/><img src="../images/fb-10.jpg" alt="image"/></div>&#13;
<p class="figt"><em><a id="appBfig10"/>Figure B-10: Starting a new R Markdown file in RStudio. Templates relevant to your chosen output file type are automatically provided.</em></p>&#13;
<h5 class="h5" id="app02lev3sec137"><strong>Shiny</strong></h5>&#13;
<p class="noindent">Shiny is a framework for creating interactive web applications developed by the RStudio team. If you’re interested in sharing your data, statistical models and analyses, and graphics, you can craft a Shiny app. The R package <code>shiny</code> (<a href="ref.xhtml#ref10">Chang et al., 2015</a>) provides the required functionality. Shiny apps require you to have an R session running behind the scenes, which is what drives the plots as the user interacts with the application in a web browser.</p>&#13;
<p class="indent">Like other tools associated with RStudio, Shiny is a high-level framework intended to be friendly for both users and developers. Its emphasis is on creating interactive visuals not unlike the graphics you produced using <code>ggvis</code> in <a href="ch24.xhtml#ch24lev1sec85">Section 24.4</a>, which you can then deploy online for anyone to use.</p>&#13;
<p class="indent">You can find the Shiny website at <em><a href="http://shiny.rstudio.com/">http://shiny.rstudio.com/</a></em>. The development team has put a tremendous amount of work into creating comprehensive tutorials, as well as a host of examples. Once you’re comfortable with the app, you can even use Shiny to create interactive documents via R Markdown—notice the Shiny document option in the top image of <a href="app02.xhtml#appBfig10">Figure B-10</a>.<span epub:type="pagebreak" id="page_760"/></p>&#13;
</body></html>