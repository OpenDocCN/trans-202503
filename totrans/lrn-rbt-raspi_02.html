<html><head></head><body>
<h2 class="h2a" id="ch02">2<br/><span epub:type="pagebreak" id="page_29"/>ELECTRONICS BASICS</h2>&#13;
<p class="startpara">ELECTRONICS IS THE SCIENCE OF CONTROLLING AND MANIPULATING ELECTRICAL ENERGY TO DO SOMETHING USEFUL. IT’S ABOUT MAKING ELECTRONIC COMPONENTS LIKE LIGHTS, SENSORS, AND MOTORS DO EXACTLY WHAT YOU WANT THEM TO DO.</p>&#13;
<p class="noindent"><span epub:type="pagebreak" id="page_30"/>Many innovations stem from the different fields of electronics. Most interesting for us is the branch of <em>robotics</em> . To make your own robots, you’ll need to understand the basics of electronics and bend this knowledge to your will! In this chapter, I’ll give you your first taste of electronics in the form of two projects. You’ll program an LED (light-emitting diode) to blink at regular intervals, and then wire up a button to print a message to your terminal when it’s pressed. You’ll be blinking LEDs and controlling the physical world in no time at all!</p>&#13;
<h3 class="h3" id="ch02lev1sec1">WHAT IS ELECTRICITY?</h3>&#13;
<p class="noindent">Electricity is everywhere in our day-to-day lives: electric currents are used to power electrical components and appliances, like the lights in your house, your TV screen, your toaster, and the motors of a Raspberry Pi robot. But what actually <em>is</em> electricity?</p>&#13;
<p class="indent">Electricity starts with <em>atoms</em>. Everything in the world is made out of billions of tiny atoms—even you! And as you may have learned in science class, atoms themselves are composed of three particles: <em>protons</em>, <em>neutrons</em>, and <em>electrons</em>. The protons and neutrons sit together in the center of the atom to form the atom’s <em>nucleus</em>, and the electrons orbit that nucleus, as shown in <a href="ch02.xhtml#ch02fig1">Figure 2-1</a>.</p>&#13;
<div class="image" id="ch02fig1"><img alt="image" src="../images/f030-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-1</strong> A diagram of an atom</p>&#13;
<p class="indent">Protons and electrons each have <em>electric charge</em>, which is a fundamental property of matter. Protons are positively charged, and electrons are negatively charged. Neutrons have no charge; that is, they are neutral. You may have heard the saying “opposites attract,” and that applies here. Because protons and electrons have opposite charges, they are attracted to each other and stay together, forming the atoms that make up everything around you.</p>&#13;
<p class="indent">Atoms come in many different arrangements called <em>elements</em>. Each element is defined by the number of protons, electrons, and <span epub:type="pagebreak" id="page_31"/>neutrons each atom contains. For example, the element copper usually has 29 protons and 35 neutrons, while gold has 79 protons and 118 neutrons. All metals, like copper, gold, and iron, are made out of collections of atoms all pressed up against each other. Some of these materials are <em>conductive</em>, which means that, when given energy, the electrons from one atom can move to the next atom. This causes a <em>flow of charge</em> in the material, known as an electric <em>current</em>. The number of electrons flowing through a point in a material at any given second is the size of the electric current, which is measured in <em>amperes (A)</em>.</p>&#13;
<p class="indent">For an electric current to flow, there must be a complete <em>circuit</em>. A circuit is a closed path, like a loop, around which an electric current moves. The circuit must be made of conductive material for the electricity to move through, and any gap in the circuit means the electricity cannot flow.</p>&#13;
<p class="indent">The circuit needs a source of energy to “push” the electric current around. This can be a battery, a solar panel, electrical mains, or any number of things. Crucially, these sources provide a <em>potential difference</em>, known as a <em>voltage</em>. A voltage simply pushes electrons through a conductor, such as copper wire, and the strength of a voltage is measured in <em>volts</em> <em>(</em><em>V</em><em>)</em>.</p>&#13;
<p class="indent">Power sources have a positive and negative terminal. In a simple circuit, like the one shown in <a href="ch02.xhtml#ch02fig2">Figure 2-2</a>, the terminals of a battery could be connected by a thick copper wire. Electrons are negatively charged and are therefore attracted to the positive terminal of the battery, so they travel through the circuit from the negative end to the positive end, pushed along by the voltage.</p>&#13;
<div class="image" id="ch02fig2"><img alt="image" src="../images/f031-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-2</strong> A circuit showing the flow of charge around a thick wire connected to the positive and negative terminals of a battery</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_32"/>Although the electrons flow from <em>negative to positive</em>, it is convention to think of the current flowing from <em>positive to negative</em>. The battery in this circuit has a fixed voltage. If this voltage is increased, more electrons would be pushed around the circuit and the current would be larger. Conversely, if this voltage is decreased, fewer electrons would be pushed around the circuit and the current would be smaller.</p>&#13;
<h4 class="h4" id="ch02lev2sec1">Resistance</h4>&#13;
<p class="noindent">Now that you have an understanding of circuits, we need to add another ingredient into the mix: <em>resistance</em>. Resistance simply reduces current. Outside the laboratory every material has some amount of resistance, which is measured in <em>ohms (Ω)</em>. One way to think about resistance is to imagine a water pipe. The water flowing through the pipe is like electric current flowing through a copper wire. Imagine the water pipe has one end higher than the other. The water at the higher end of the pipe has more energy (potential energy) than water at the lower end. If the pipe is level, no water will flow. If the pipe is slightly sloping, a small flow will occur. The actual amount that flows depends on both the difference in height of the ends above ground and how wide the pipe is. The height difference of the pipe is like potential difference, or voltage.</p>&#13;
<p class="indent">Resistance, on the other hand, is like something squeezing the pipe and affecting how wide it is: the more it is squeezed, the less water is able to flow through it (see <a href="ch02.xhtml#ch02fig3">Figure 2-3</a>). This translates to less electric current flowing through the circuit.</p>&#13;
<div class="image" id="ch02fig3"><img alt="image" src="../images/f032-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-3</strong> Resistance reduces the amount of current that can flow through a circuit.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_33"/>Therefore, three ingredients make up an electric circuit: voltage, current, and resistance. They all seem to be pretty closely connected, right? You may even think that there must be a certain <em>mathematical</em> connection or <em>law</em> relating to them—and you’d be right.</p>&#13;
<h4 class="h4" id="ch02lev2sec2">Ohm’s Law of Electricity</h4>&#13;
<p class="noindent"><em>Ohm’s law</em> deals with the relationship between voltage, current, and resistance. It states that the <em>voltage across a conductor is proportional to the current running through it</em>.</p>&#13;
<p class="indent">Let’s break this down to see what it means. In a circuit, voltage is simply equal to current multiplied by resistance. We use <em>V</em> to stand for voltage, <em>I</em> for current, and <em>R</em> for resistance. So, the equation for voltage is written as follows:</p>&#13;
<p class="equation"><img alt="Image" src="../images/f033-01.jpg"/></p>&#13;
<p class="indent">As with any mathematical equation, you can rearrange it to work out the equations for the other terms. For example, from Ohm’s law we know that the current in a circuit is equal to the voltage divided by the resistance. When you rearrange the equation for current and resistance, you get the following equations:</p>&#13;
<p class="equation"><img alt="Image" src="../images/f033-02.jpg"/></p>&#13;
<p class="equation"><em>R</em> = <img alt="Image" src="../images/f033-03.jpg"/></p>&#13;
<p class="indent">If all of this is a little confusing, don’t worry! As you make your own circuits, it will become easier to understand. Now that we have covered some of the basics of electricity and electronics, let’s get making!</p>&#13;
<h3 class="h3" id="ch02lev1sec2">MAKING AN LED BLINK: RASPBERRY PI GPIO OUTPUT</h3>&#13;
<p class="noindent">Just as “Hello, world!” is a traditional first program, making an LED blink is a traditional first electronics project since it very neatly demonstrates using the GPIO pins as outputs. This project will be your introduction to using your Pi’s GPIO pins. Before we begin, you might have some questions.</p>&#13;
<p class="indent">First, what is an LED? Short for <em>light-emitting diode</em>, an LED is a component that gives off light when an electric current is passed through it. LEDs are the modern equivalent of an old light bulb, but they use less power, don’t get hot, and have a longer life.</p>&#13;
<h4 class="h4" id="ch02lev2sec3">The Parts List</h4>&#13;
<p class="noindent"><span epub:type="pagebreak" id="page_34"/>For your first foray into electronics, you’re going to need a few extra things besides the Raspberry Pi you set up previously. Here’s what you’ll need for this project:</p>&#13;
<div class="note">&#13;
<p class="note1"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>For guidance about where to buy and source these parts, check the Introduction.</em></p>&#13;
</div>&#13;
<ul>&#13;
<li class="noindent">A breadboard</li>&#13;
<li class="noindent">An LED (color of your choice)</li>&#13;
<li class="noindent">An appropriate resistor</li>&#13;
<li class="noindent">Jumper wires</li>&#13;
</ul>&#13;
<p class="indent">Before we wire these components up, I’ll explain a little more about how they work and why you need them.</p>&#13;
<h5 class="h5">Breadboard</h5>&#13;
<p class="noindent">An electronics <em>breadboard</em> allows you to connect electronic components without having to fuse them together permanently (something that is called <em>soldering</em>; see “How to Solder” on <a href="bm04.xhtml#page_204">page 204</a>). This means you can quickly prototype circuits by inserting components into a breadboard’s holes. The space between the holes of a breadboard is standardized (2.54 mm/0.1 inches), so all breadboard-friendly components should fit with no trouble. Breadboards come in several sizes with different numbers of holes (also known as <em>points</em>). I would recommend a 400-point breadboard, like the one in <a href="ch02.xhtml#ch02fig4">Figure 2-4</a>.</p>&#13;
<div class="image" id="ch02fig4"><img alt="image" src="../images/f034-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-4</strong> A 400-point breadboard and a diagram of how the rows and columns are connected to each other</p>&#13;
<p class="indent">You can see in <a href="ch02.xhtml#ch02fig4">Figure 2-4</a> how the rows and columns of the breadboard are internally connected with metal strips. So, if you put one component into a row and put something else into the same row, for example, they will be connected in a circuit.</p>&#13;
<h5 class="h5">LEDs</h5>&#13;
<p class="noindent"><span epub:type="pagebreak" id="page_35"/>LEDs come in all different shapes, sizes, and colors. Fortunately, they are also incredibly cheap. When bought in bulk they are quite literally <em>pennies</em> each. Make sure that your LED has two legs that can be arranged to fit in your breadboard, as shown in <a href="ch02.xhtml#ch02fig5">Figure 2-5</a>.</p>&#13;
<div class="image" id="ch02fig5"><img alt="image" src="../images/f035-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-5</strong> A blue LED</p>&#13;
<p class="indent">Feel free to buy an LED in any color you wish—I have gone for blue. Make sure to check the voltage specification for the LED you buy. You need to make sure that the voltage required to light up the LED is less than 3.3 V. This is often referred to as the <em>forward voltage</em>. You can usually find this information in the online listing for your LED. The forward voltage of my LED is 2.5 V. The Raspberry Pi’s GPIO pins work at 3.3 V, so if your LED has a forward voltage of 5 V, for example, your Pi won’t be able to light it up!</p>&#13;
<p class="indent">You also need to find out the forward current of your LED. The <em>forward current</em> is the recommended current to run through your component. My LED has a recommended forward current of 30 mA (<em>milliamps</em> are one thousandth of an amp), which is the equivalent of 0.03 A. If you provide less current than recommended, your LED won’t be very bright; if you provide too much current, it might blow up (you’ll hear a small pop when this happens). This information will also most likely be in the LED’s internet listing or packaging. If you aren’t sure about the specifics of your LED, don’t worry—small, cheap ones are usually just fine for our use. If you have no information about your LED, just assume that the forward voltage is around 2 V and the forward current is about 20 mA.</p>&#13;
<h5 class="h5">Resistors</h5>&#13;
<p class="noindent">To avoid overloading our LEDs, we’ll use a <em>resistor</em>. Every material has resistance, but resistor components are designed specifically to create pure resistance in circuits.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_36"/>LEDs, and most components, are quite sensitive to the amount of current that flows through them. If you were to connect an LED directly to a battery and create a circuit without a resistor, the amount of current that would flow through the LED could be large enough to cause it to overheat. A resistor lowers the current through the LED to prevent this from happening.</p>&#13;
<p class="indent">Resistors come in different values denoted by colored bands, which you can see in <a href="ch02.xhtml#ch02fig6">Figure 2-6</a>. Take a look at the resistor guide on <a href="bm03.xhtml#page_202">page 202</a> to learn what these bands mean and how to read them.</p>&#13;
<div class="image" id="ch02fig6"><img alt="image" src="../images/f036-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-6</strong> A resistor</p>&#13;
<p class="indent">To find out what resistor you need, you’ll have to apply Ohm’s law! From the equation you saw earlier, you know that resistance is equal to the voltage divided by the current, or <em>R = V/I</em>. In our case, the voltage is the difference between the voltage the Pi supplies, 3.3 V, and the forward voltage of the LED: it is the total source volts <em>minus</em> the LED volts. For me, that is 3.3 V – 3 V = 0.3 V. You should use <em>your</em> forward voltage here instead, or 2 V if you don’t know it.</p>&#13;
<p class="indent">The current is the forward current of your LED. For me that is 0.03 A. Make sure that this value is in amps, not milliamps!</p>&#13;
<div class="note">&#13;
<p class="note1"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>I recommend buying a selection of resistors, which are normally organized into something that looks like a book. That way, you’ll have a resistor for every occasion and won’t have to buy them individually.</em></p>&#13;
</div>&#13;
<p class="indent">I can work out the value of the resistor I need to lower the current to 0.03 A by simply calculating the following equation: 0.3 / 0.03 = 10. This means that I will need a resistor of approximately 10 Ω. Often you won’t be able to find a resistor value for the specific number you’ve calculated. That’s okay: in most cases, you can simply use the nearest valued resistor you can find. For my LED I was lucky and had a resistor that matched the value I needed exactly. I am using the 10 Ω resistor pictured in <a href="ch02.xhtml#ch02fig6">Figure 2-6</a>.</p>&#13;
<p class="indent">If you’re still unsure about the forward voltage and forward current of your LED, just err on the side of caution and fit a sensibly <span epub:type="pagebreak" id="page_37"/>large resistor of at least 100 Ω into your circuit. If the LED is too dim, downsize the resistor until you get to a suitable level of brightness (dim enough to not hurt your eyes is a good rule of thumb). Don’t try to do this the other way around: you can’t unexplode an LED!</p>&#13;
<h5 class="h5">Jumper Wires</h5>&#13;
<p class="noindent">Finally, you’ll need some wires to connect everything up. Specifically, you’ll need <em>jumper wires</em>, which are breadboard-friendly wires that allow you to connect things to the Pi’s GPIO pins. You can see some examples of jumper wires in <a href="ch02.xhtml#ch02fig7">Figure 2-7</a>.</p>&#13;
<div class="image" id="ch02fig7"><img alt="image" src="../images/f037-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-7</strong> A collection of jumper wires</p>&#13;
<p class="indent">The ends of jumper wires are either <em>male</em> or <em>female</em>. A male end (often abbreviated as M) has a wire sticking out of it that you can insert into a breadboard’s holes. A female end (abbreviated as F) instead has a hole into which you place a wire. I would recommend buying a variety so that you have a jumper wire for all situations. We’ll be using a lot of these throughout the book! In <a href="ch02.xhtml#ch02fig7">Figure 2-7</a>, you can see my collection of M-M, M-F, and F-F jumper wires. For making an LED blink, we’ll need two M-F jumper wires.</p>&#13;
<h4 class="h4" id="ch02lev2sec4">Wiring Up Your LED</h4>&#13;
<p class="noindent">Now that you’ve collected your parts, it’s time to wire up your LED and create your first circuit! You’ll wire up your circuit as shown in <a href="ch02.xhtml#ch02fig8">Figure 2-8</a>, so you can use this diagram as a reference as you go through the instructions.</p>&#13;
<div class="image" id="ch02fig8"><img alt="image" src="../images/f038-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-8</strong> Breadboard diagram for wiring up an LED</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_38"/>Depending on the breadboard you have, your circuit may look slightly different. To make sure your connections are correct, follow these instructions:</p>&#13;
<ol>&#13;
<li class="noindent">Insert the LED into the breadboard so that each leg is in a dif­ferent row. If you put the LED’s legs into the same row, they’ll be connected to each other, but won’t be connected to anything else. LEDs have a positive and negative side, which you need to align with the flow of the current. The long leg of the LED is the positive side—called the <em>anode</em>. The short leg is the negative side—the <em>cathode</em>. The LED bulb will usually be flat on the side of the cathode as an extra indicator.</li>&#13;
<li class="noindent">Insert one leg of your resistor into the same row on the breadboard as your LED’s shorter leg. Putting the resistor leg in the same row as your LED connects the two in a circuit. Connect the other leg of the resistor to any of the other points of the board.</li>&#13;
<li class="noindent">Now, with your Raspberry Pi turned off, insert the male end of one of your M-F jumper wires into the breadboard, in the same row as the long leg of your LED. Locate physical pin 7 on your Raspberry Pi, also known as the <em>GPIO/BCM 4</em> pin (see “Raspberry Pi GPIO Diagram” on <a href="bm02.xhtml#page_200">page 200</a> for an image of this), and connect the female end of the wire to it.&#13;
<div class="box">&#13;
<p class="headbox">THE VARIOUS NAMES OF GPIO PINS</p>&#13;
<p class="noindent">The Raspberry Pi’s GPIO pins can have several names. First, you can refer to the pins from their physical numbers—that is, how they are laid out. However, the processor on the Raspberry Pi does not understand this numbering and has its own name for the GPIO pins, sometimes referred to as the BCM numbering of the pins. In our case, you have wired up your LED to physical pin 7: that’s BCM pin 4! See “Raspberry Pi GPIO Diagram” on <a href="bm02.xhtml#page_200">page 200</a> for a diagram of the GPIO pins and some further explanation.</p>&#13;
</div></li>&#13;
<li class="noindent"><span epub:type="pagebreak" id="page_39"/>Finally, insert the male end of your other M-F jumper wire into the row of the breadboard that contains only one leg of the resistor and none of the LED’s legs. Then connect the female end to physical pin 6 on your Raspberry Pi. This is one of the <em>ground</em> pins. You can think of ground as the negative terminal of a battery. It is just the lower side of a voltage.</li>&#13;
</ol>&#13;
<h4 class="h4" id="ch02lev2sec10">Programming Your Raspberry Pi to Blink Your LED</h4>&#13;
<div class="note">&#13;
<p class="note1"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>When you power on your Raspberry Pi, your LED may be off, on, or even dimly lit. Don’t worry! Your LED is fine in any of these states. You haven’t yet instructed the pin to be a certain state, so your pin isn’t quite sure what to do yet.</em></p>&#13;
</div>&#13;
<p class="noindent">You should now have your circuit wired up, so boot up your Rasp­berry Pi and log in. It’s time to write a program to blink that LED!</p>&#13;
<p class="indent">From the terminal, navigate from the home directory into the folder you created in <a href="ch01.xhtml#ch01">Chapter 1</a> with the command:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~ $</span> <span class="codestrong1">cd robot</span></p>&#13;
<p class="indent">Now you’ll create a new file and write a Python program to control your LED. Pick whatever name you like for your file, but ensure your filename ends with <em>.py</em>. I’ve called mine <em>blink.py</em>. The following command creates a new file and opens the Nano text editor:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~/robot $</span> <span class="codestrong1">nano blink.py</span></p>&#13;
<p class="indent">You’ll now find yourself in a Nano text editor identical to the one you came across in <a href="ch01.xhtml#ch01">Chapter 1</a>.</p>&#13;
<p class="indent">Enter the code in <a href="ch02.xhtml#ch02list1">Listing 2-1</a> to instruct your LED to flash on and off (the numbers in circles don’t actually appear in the program, but we’ll be using them for reference).</p>&#13;
<pre><span class="ent">➊</span> <span class="blue">import</span> gpiozero<br/><span class="p-orange">   </span><span class="blue">import</span> time<br/><br/><span class="ent">➋</span> led = gpiozero.LED(4)<br/><br/><span class="ent">➌</span> <span class="blue">while</span> <span class="p-purple">True</span>:<br/>    <span class="ent">➍</span> led.on()<br/>    <span class="ent">➎</span> time.sleep(1)<br/>    <span class="ent">➏</span> led.off()<br/>    <span class="ent">➐</span> time.sleep(1)</pre>&#13;
<p class="listing" id="ch02list1"><strong>LISTING 2-1</strong> Program to blink an LED</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_40"/>This eight-line Python program is easy to understand when you look at it one line at a time, so let’s break it down.</p>&#13;
<p class="indent">Python is an <em>interpreted</em> programming language, meaning when this code is run, your Raspberry Pi (or any other computer) will execute your program line by line, starting at the top and moving down in a logical manner. That means the order of your code matters.</p>&#13;
<p class="indent">Python comes with all sorts of built-in abilities. For example, in <a href="ch01.xhtml#ch01">Chapter 1</a> you <em>printed</em> text to the terminal, a capability Python has by default. There are hundreds of other things Python can do, but some abilities need to be imported from external sources. For example, Python is not able to control your Pi’s GPIO pins on its own, so we import a library called GPIO Zero <span class="ent">➊</span>. In programming, a <em>library</em> is a collection of functions a program can use. By importing a library, we bring these functions into the current program for our own use. The GPIO Zero library was created by the Raspberry Pi Foundation to give programmers a simple GPIO interface in Python. Importing this library enables your program to control your Pi’s GPIO pins! Note that it’s actually called <code>gpiozero</code> in the programming language, though, as we can’t include spaces in library names and the convention is to use lowercase.</p>&#13;
<p class="indent">On the next line we import the <code>time</code> library, which allows your Python program to control timings. For example, you’ll be able to pause the code, which will be very useful in our case!</p>&#13;
<p class="indent">Next, we make a variable <span class="ent">➋</span>. In programming, <em>variables</em> are names used to store information to be referenced and manipulated in a program. They provide a way of labeling data, and they make code simpler, easier to understand, and more efficient.</p>&#13;
<p class="indent">In this case, we’ve created a variable called <code>led</code> that references the LED software from the GPIO Zero library. We give the <code>LED()</code> function the value <code>4</code> in parentheses to show that we are referring to an LED on GPIO/BCM pin 4. When we call <code>led</code> later in the program, the Pi knows we mean this pin.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_41"/>Then we begin a <code>while</code> loop <span class="ent">➌</span>, which is a <em>conditional</em> <em>statement</em> that will keep running the code inside it until the condition is no longer met. In simple English, we’re telling the loop: while this condition is true, keep running the code. In this case, the condition is simply <code>True</code>. The <code>True</code> condition will always be true and will never be false, so the <code>while</code> loop will go around and around indefinitely. This is useful to us, as we’ll be able to write the code to make the LED flash once, and the loop will take care of making the LED flash over and over again.</p>&#13;
<p class="indent">Within the <code>while</code> loop, you also come across a key structural feature of Python: <em>indentation</em>. Python knows that all the code indented by the same number of spaces belongs to the same group of code, known as a <em>block</em>. The four lines following the <code>while</code> loop are indented four spaces each; as long as the condition is true, the loop will run that whole block of code.</p>&#13;
<p class="indent">You can create indentation in different ways. Some people use two spaces, four spaces, or a <span class="small">TAB</span>. You can use any method you like as long as you stay consistent throughout your Python program. I’m a <span class="small">TAB</span> person myself.</p>&#13;
<p class="indent">At <span class="ent">➍</span>, you switch the LED on using the command <code>led.on()</code>. Remember that <code>led</code> refers to the pin we connected the LED to and now we’re telling that pin to be “on.” The dot (<code>.</code>) separates the thing we’re talking about, in this case the LED, from what we’re asking it to do, in this case be turned on. Turning on a GPIO pin is also known as bringing that pin <em>high</em>, since the Raspberry Pi will apply a voltage of 3.3 V across your circuit when this line of code runs.</p>&#13;
<p class="indent">Next we use a <code>sleep()</code> statement <span class="ent">➎</span> to tell your program to pause for whatever number of seconds you give to it in parentheses. In this case, we entered a value of <code>1</code>, so the program sleeps for just 1 second. After this, you switch the LED off using the command <code>led.off()</code> <span class="ent">➏</span>. Repeat the <code>sleep()</code> statement at <span class="ent">➐</span> to make the program wait for another second before looping back around again to the start of the <code>while</code> loop. This sequence of on-wait-off-wait continues indefinitely.</p>&#13;
<p class="indent">Once you’ve finished entering the code for your program, you can exit the Nano text editor and save your work. To do this, press <span class="small">CTRL-</span>X. You will then be asked whether you would like to save the changes you have made. Press the Y key to say yes. Nano will then prompt you for the filename you would like to write to, which in our case should be <em>blink.py</em> or the filename you entered when you opened the Nano editor. Press <span class="small">ENTER</span> to confirm the filename.</p>&#13;
<h4 class="h4" id="ch02lev2sec6"><span epub:type="pagebreak" id="page_42"/>Running Your Program: Make Your LED Blink</h4>&#13;
<p class="noindent">Now that you understand how your program works, it’s time to run it. You’ll follow the same process to execute your program as you did for the <em>helloworld.py</em> program you created in <a href="ch01.xhtml#ch01">Chapter 1</a>. Enter the following code into the Raspberry Pi’s prompt:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~/robot $</span> <span class="codestrong1">python3 blink.py</span></p>&#13;
<p class="indent">Your LED should now start to blink on and off at regular intervals (see <a href="ch02.xhtml#ch02fig9">Figure 2-9</a>). Congratulations, you’ve just successfully interfaced your Raspberry Pi with the outside world!</p>&#13;
<div class="image" id="ch02fig9"><img alt="image" src="../images/f042-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-9</strong> A happily blinking LED connected to the Raspberry Pi</p>&#13;
<p class="indent">To kill your program and stop the blinking LED, press <span class="small">CTRL</span>-C.</p>&#13;
<div class="box">&#13;
<p class="headbox"><span epub:type="pagebreak" id="page_48"/>TROUBLESHOOTING GUIDE: WHY ISN’T THE LED BLINKING?</p>&#13;
<p class="noindent">If your LED isn’t blinking, don’t panic. You can likely fix your circuit with a little troubleshooting. First, check whether your LED is inserted with the legs the right way around. Because LEDs are a form of <em>diode</em>, current flows through them only in one direction, so if you have your LED in the wrong way it won’t light up! Instead, it’ll just do nothing. Go back to the instructions and make sure you followed them accurately.</p>&#13;
<p class="indent">If this doesn’t fix your problem, check the rest of your circuit. Is everything connected properly? Are all of the wires firmly in place? Check that you have wired up your circuit to the correct pins of your Pi’s GPIO port—this is an easy mistake to make!</p>&#13;
<p class="indent">If you’re convinced that your circuit is sound and your LED and resistor are appropriate (as explained in the parts list), then you may have a software issue. When you ran the program, did it crash? Did you get an error message? You may have made an error when copying the code from this book. Go back and check, or grab the code files from <a href="https://nostarch.com/raspirobots/"><em>https://nostarch.com/raspirobots/</em></a> and run the <em>blink.py</em> file from there instead.</p>&#13;
<p class="indent">The GPIO Zero library is included by default in all new Raspbian releases, but if you are running an older version of Raspbian, you may need to install the library manually. To do this, enter the command:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~/robot $</span> <span class="codestrong1">sudo apt-get update</span></p>&#13;
<p class="noindent">followed by the command:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~/robot $</span> <span class="codestrong1">sudo apt-get install python3-gpiozero python-gpiozero</span></p>&#13;
</div>&#13;
<h4 class="h4" id="ch02lev2sec7"><span epub:type="pagebreak" id="page_43"/>Challenge Yourself: Change the Timing</h4>&#13;
<p class="noindent">Take a look at the code you used to make your LED blink. What would happen if you modified some of it? For example, you could experiment by changing the timing of the <code>sleep()</code> statements and seeing what different patterns you can make! Play around a bit to see what effects your changes have.</p>&#13;
<div class="note">&#13;
<p class="note1"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>If you want to shut down your Raspberry Pi, you should do so safely in software before yanking out the power cord. To commence a power down sequence, use the command <code><strong>sudo shutdown now</strong></code>. Wait a few seconds before pulling out the power cord. Or, choose the shutdown option in the main menu from the GUI if you’re using a directly connected screen.</em></p>&#13;
</div>&#13;
<h3 class="h3" id="ch02lev1sec3">INPUT FROM A BUTTON: RASPBERRY PI GPIO INPUT</h3>&#13;
<p class="noindent">Blinking an LED is the perfect first experiment for the world of electronics and physical computing with your Raspberry Pi, but it demonstrates only the <em>output</em> aspect of what the Pi’s GPIO pins can do. GPIO pins can also take <em>input</em>, meaning they can take data from <span epub:type="pagebreak" id="page_44"/>the outside world and react to it. In this section you’ll wire a button up to your Raspberry Pi and write a program that is triggered whenever that button is pressed.</p>&#13;
<h4 class="h4" id="ch02lev2sec8">Explaining the Parts List</h4>&#13;
<p class="noindent">The projects in this book build upon each other, so in addition to your Raspberry Pi and breadboard, for this project you’ll need a button and two M-F jumper wires.</p>&#13;
<p class="indent">Buttons come in hundreds of different shapes, sizes, and varieties. For this project, you’ll need to acquire a breadboard-friendly <em>momentary push button</em>, like the one shown in <a href="ch02.xhtml#ch02fig10">Figure 2-10</a>.</p>&#13;
<div class="image" id="ch02fig10"><img alt="image" src="../images/f044-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-10</strong> A four-legged momentary push button and a diagram of the leg pairs</p>&#13;
<p class="indent">Buttons are often referred to as <em>switches</em>, and most have either two or four legs that connect to the points of a breadboard. The function of a momentary switch is simple: when the button is pressed, the contacts inside the button join together and complete the circuit. When the button is released, the contacts inside are separated, so the circuit is incomplete and no current flows. That means your circuit is connected only while the button is pressed; that’s why it’s called “momentary”!</p>&#13;
<p class="indent">For buttons with two legs, it’s obvious that when the button is pressed both sides are connected. For buttons with four legs, it’s a little bit more complicated. The legs are set up in pairs, so you only actually need to worry about two of them. Usually, opposite legs, like the ones indicated in <a href="ch02.xhtml#ch02fig10">Figure 2-10</a>, are coupled, which means only one leg of each pair needs to be connected to the circuit. If you are unsure of which legs are pairs, check your button’s specification.</p>&#13;
<h4 class="h4" id="ch02lev2sec9">Wiring Up Your Button</h4>&#13;
<p class="noindent">With your parts ready, you can now wire up your button. Use the breadboard diagram in <a href="ch02.xhtml#ch02fig11">Figure 2-11</a> as a reference.</p>&#13;
<div class="image" id="ch02fig11"><img alt="image" src="../images/f045-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-11</strong> Breadboard diagram for wiring up a button</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_45"/>If you’ve just finished the previous project and still have an LED wired up to your Pi, feel free to take the circuit apart or wire up your button on a different part of your breadboard—just make sure that you use different rows of the breadboard for each project. Once you’re ready to set up your next circuit, follow these instructions:</p>&#13;
<ol>&#13;
<li class="noindent">Insert your push button into your breadboard and ensure that each leg is in its own row. You’ll need to insert the button with two legs on either side of the row divider in the middle of your breadboard to accomplish this.</li>&#13;
<li class="noindent">With your Raspberry Pi turned off, use a jumper wire to connect one leg on one side of the divider to the ground pin on your Raspberry Pi (physical pin 6).</li>&#13;
<li class="noindent">Use another jumper wire to connect the other leg on the same side of the divider to pin 11 (BCM pin 17) on your Raspberry Pi. Check the pinout on <a href="bm02.xhtml#page_201">page 201</a> if you’re not sure which pin is which.</li>&#13;
</ol>&#13;
<p class="indent">With your Pi setup like mine in <a href="ch02.xhtml#ch02fig12">Figure 2-12</a>, you now need to write a program to take input from the button when it is pressed.</p>&#13;
<div class="image" id="ch02fig12"><img alt="image" src="../images/f046-01.jpg"/></div>&#13;
<p class="caption"><strong>FIGURE 2-12</strong> The complete button and breadboard setup</p>&#13;
<div class="note">&#13;
<p class="note-warning">WARNING</p>&#13;
<p class="note-warning1">Once you are finished, you should have a circuit set up like the one shown in <a href="ch02.xhtml#ch02fig11">Figure 2-11</a>. Take care that the wiring is correct. There is very little resistance in the switch and it will electrically connect two things very closely. A wrong connection can be dangerous to your Pi!</p>&#13;
</div>&#13;
<h4 class="h4" id="ch02lev2sec5">Programming Your Raspberry Pi to Display Input from Your Button</h4>&#13;
<p class="noindent"><span epub:type="pagebreak" id="page_46"/>From the terminal, make sure you’re in the folder you created in <a href="ch01.xhtml#ch01">Chapter 1</a>. If you just completed the previous mini-project you most likely already are, but if not, just navigate from the home directory into the <em>robot</em> directory with this command:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~ $</span> <span class="literal1"><span class="codestrong1">cd robot</span></span></p>&#13;
<p class="indent">Now create a new Python program to get input from your button in Nano. I’ve created one and called it <em>button.py</em> as follows:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~ $</span> <span class="codestrong1">cd robot</span></p>&#13;
<p class="indent">You’ll find yourself in a familiar blank Nano interface. Enter the code in <a href="ch02.xhtml#ch02list2">Listing 2-2</a> to get your button working.</p>&#13;
<pre><span class="ent">➊</span> <span class="blue">import</span> gpiozero<br/><br/><span class="ent">➋</span> button = gpiozero.Button(17)<br/><br/>   <span class="blue">while</span><span class="green"> </span><span class="p-purple">True</span>:<br/>    <span class="ent">➌</span> <span class="blue">if</span> button.is_pressed:<br/>        <span class="ent">➍</span> <span class="blue">print</span>(<span class="green">"Button is pressed!"</span>)<br/>    <span class="ent">➎</span> <span class="blue">else</span>:<br/>           <span class="blue">print</span>(<span class="green">"Button is not pressed!"</span>)</pre>&#13;
<p class="listing" id="ch02list2"><strong>LISTING 2-2</strong> A program to take input from the button</p>&#13;
<p class="indent">We import the GPIO Zero library in exactly the same way as we did for the blinking LED project <span class="ent">➊</span>. All of the electronics projects in this book will use this library, so you can expect to see this line in all the programs in this book!</p>&#13;
<p class="indent">We then create a variable called <code>button</code> <span class="ent">➋</span>, assigning some button software from the GPIO Zero library to that variable and making sure to specify in the parentheses that the button is connected to BCM pin 17.</p>&#13;
<p class="indent">We then start a <code>while</code> loop as we did in our LED program, but unlike our previous program, the first line in this block starts an <code>if</code>/<code>else</code> statement. In programming, <code>if</code> statements are conditional statements that activate some code when a condition is satisfied. Our <code>if</code> statement almost directly translates into English as “if the button is pressed, do the following” <span class="ent">➌</span>. While the <code>if</code> statement is true, the indented line <span class="ent">➍</span> is executed and a string of text is printed to the terminal, telling us the button has been pressed.</p>&#13;
<p class="indent">Usually, but not always, when there is a conditional <code>if</code> statement, there is often an <code>else</code> statement, because if the button isn’t pressed, something <em>else</em> must happen! The <code>else</code> statement <span class="ent">➎</span> can be translated into English as “if anything else, do the following.” The indented block of code following the <code>else</code> statement is then executed and prints to the terminal that the button hasn’t been pressed.</p>&#13;
<p class="indent">Because the <code>if</code>/<code>else</code> statements are in a <code>while</code> loop whose condition is <code>True</code>, the code continues to run forever unless the program is stopped. Once you have finished entering your program, you can exit the Nano text editor as usual: press <span class="small">CTRL+X</span>, save the changes you have made by pressing the Y key at the prompt and then press <span class="small">ENTER</span> to confirm the filename as <em>button.py</em>.</p>&#13;
<h4 class="h4" id="ch02lev2sec11">Running Your Program: Get Input from Your Button</h4>&#13;
<p class="noindent">To run your program, simply enter the following into the terminal:</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~/robot $</span> <span class="codestrong1">python3 button.py</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_47"/>You should now see the statement <code>Button is not pressed!</code> repeatedly in the terminal. When you press your button, the statement <code>Button is pressed!</code> should be printed to your terminal.</p>&#13;
<p class="codesingle"><span class="green">pi@raspberrypi</span>:<span class="p-dark-blue">~/robot $</span> <span class="codestrong1">python3 button.py</span><br/><span class="p-dark-blue">Button is not pressed!</span><br/><span class="p-dark-blue">Button is not pressed!</span><br/><span class="p-dark-blue">Button is pressed!</span></p>&#13;
<div class="box">&#13;
<p class="headbox">TROUBLESHOOTING GUIDE: WHY ISN’T THE BUTTON WORKING?</p>&#13;
<p class="noindent">Just as in the previous mini-project, if your button isn’t working, don’t worry! First, check your circuit. Is everything wired up correctly? Are the wires firmly in the breadboard? Have you connected your button in the right way? If your switch is slightly different from my model, have you looked into the details of how it is different? If you think that your circuit is okay, you may have made an error when copying the code from this book. Go back and check, or grab the code files from <em><a href="https://nostarch.com/raspirobots/">https://nostarch.com/raspirobots/</a></em>.</p>&#13;
</div>&#13;
<p class="indent">To kill your program, press <span class="small">CTRL</span>-C.</p>&#13;
<h4 class="h4" id="ch02lev2sec12">Challenge Yourself: Combine Your Button and LED Programs</h4>&#13;
<p class="noindent">See if you can combine both of the mini-projects in this chapter. Try to create a program that flashes an LED when the button is held down, or a program that keeps the LED turned on until the button is pressed.</p>&#13;
<h3 class="h3" id="ch02lev1sec4">SUMMARY</h3>&#13;
<p class="noindent">In this chapter you’ve had your first taste of electronics in the form of two mini-projects. You’ve learned a lot of theory and fundamentals, all of which are going to come in handy as you build your robot over the next chapters. I’ve also introduced some key programming techniques and concepts—we’ll be using plenty of <code>if</code>/<code>else</code> statements and loops in the future.</p>&#13;
<p class="indent">In the next chapter I’ll guide you through the process of making your first robot. We’ll cover the materials and tools you’ll need as well as the construction process itself.</p>&#13;
</body></html>