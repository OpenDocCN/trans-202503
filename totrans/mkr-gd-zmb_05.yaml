- en: '**5**'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**5**'
- en: '**SURVEILLANCE AND RASPBERRY PI**'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**监控与树莓派**'
- en: '![image](graphics/f0001-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f0001-01.jpg)'
- en: Now that you can detect zombies, it’s also a good idea to monitor their movements.
    But don’t risk joining the undead ranks by following them around! Watch them safely
    from inside your base, and you’ll keep your brain intact. This chapter shows you
    how to make a surveillance camera setup with USB and wireless webcams, using a
    Raspberry Pi single-board computer to minimize your energy usage (see [Figure
    5-1](ch05.html#ch05fig1)).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经能检测到僵尸了，监控它们的动作也是个好主意。不过不要冒险跟着它们走，否则你可能会加入“亡者行列”！从基地内安全地观察它们，你的大脑才能保持完整。本章将教你如何使用USB和无线网络摄像头，通过树莓派单板计算机搭建监控摄像头系统，以最大限度地减少能源使用（见[图
    5-1](ch05.html#ch05fig1)）。
- en: Both projects in this chapter require you to download software, so you’d be
    well advised to think ahead and get your system set up before disaster strikes.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的两个项目都需要你下载软件，因此最好提前思考并在灾难来临之前设置好系统。
- en: '![image](graphics/f05-01.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-01.jpg)'
- en: 'Figure 5-1: Zombie smiling and waving at a webcam'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-1：僵尸对着摄像头微笑并挥手
- en: '**THE RASPBERRY PI**'
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**树莓派**'
- en: You could get these projects working with a regular laptop or desktop computer,
    but those devices take a fair bit of power. A laptop typically consumes 20W to
    60W, and a desktop draws even more. Also, you’d need an AC inverter. Laptop power
    supplies provide low-voltage DC, but generally that voltage is still higher than
    12V, so powering directly from a 12V battery wouldn’t be an option.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以用普通的笔记本电脑或台式机来运行这些项目，但这些设备的功耗相当大。笔记本通常消耗20W到60W的功率，而台式机的功耗更高。而且，你还需要一个交流电逆变器。笔记本的电源提供的是低压直流电，但通常电压仍高于12V，所以无法直接从12V电池供电。
- en: Besides, if you have to shift bases because the zombie population density has
    gotten too high, do you really want to risk being weighed down by a giant desktop
    tower?
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果因为僵尸密度太高而不得不搬迁基地，你真的想冒着被沉重的桌面塔机拖累的风险吗？
- en: The Raspberry Pi, on the other hand, is a tiny Linux computer on a single board
    about the size of a credit card, and it uses less than 3W of power. A Raspberry
    Pi Model B+ is used in this project and throughout this book ([Figure 5-2](ch05.html#ch05fig2)).
    If you happen to have an older Raspberry Pi Model B or a newer Raspberry Pi 2,
    they should also work just fine. In fact, the extra power of the Pi 2 should make
    the webcam browser page perform noticeably quicker. Models A and A+ are not ideal,
    as they are less powerful and have less memory than the other models.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派是一个微型Linux计算机，尺寸大约与信用卡相当，功耗低于3W。本项目中使用的是树莓派B+型号，并且本书中的所有内容都基于这一型号（见[图 5-2](ch05.html#ch05fig2)）。如果你恰好拥有较旧的树莓派B型号或更新的树莓派2型号，它们也应该能够正常工作。实际上，树莓派2的额外性能应该使得网络摄像头的浏览页面显得更快。A和A+型号不太适合，因为它们的性能较差，内存也比其他型号少。
- en: '![image](graphics/f05-02.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-02.jpg)'
- en: 'Figure 5-2: A Raspberry Pi Model B+'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-2：树莓派B+型号
- en: 'The Raspberry Pi can run simple Python scripts, and you can link it to external
    hardware, too. For example, in “[Project 7: Monitor Zombies with a USB Webcam](ch05.html#ch00lev1sec95)”
    on [page 87](ch05.html#page_87), when the webcam detects movement, an LED will
    turn from green to red using the Raspberry Pi’s GPIO (general purpose input and
    output) connector. The GPIO connector is the double row of pins down one side
    of the board ([Figure 5-2](ch05.html#ch05fig2)).'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派可以运行简单的Python脚本，并且可以与外部硬件连接。例如，在“[项目 7：使用USB摄像头监控僵尸](ch05.html#ch00lev1sec95)”一节中，若网络摄像头检测到运动，LED灯会通过树莓派的GPIO（通用输入输出）接口从绿色变为红色。GPIO接口就是板子一侧的双排引脚（见[图
    5-2](ch05.html#ch05fig2)）。
- en: '**THE RASPBERRY PI SYSTEM**'
  id: totrans-14
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**树莓派系统**'
- en: A complete Raspberry Pi system includes a USB keyboard, a mouse, and a small
    HDMI (High-Definition Multimedia Interface) monitor ([Figure 5-3](ch05.html#ch05fig3)).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的树莓派系统包括一个USB键盘、一个鼠标和一个小型HDMI（高清多媒体接口）显示器（见[图 5-3](ch05.html#ch05fig3)）。
- en: The keyboard and mouse are standard items that you can buy anywhere. For a constant
    visual on your zombie foes, you’ll need something to watch the video feed on,
    and you could just connect a normal TV or monitor to the Raspberry Pi. However,
    to save even more power, this project uses a 12V DC monitor with a 7-inch (180
    mm) display. At worst, this might double the power consumption to a peak of 6W.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 键盘和鼠标是标准物品，你可以在任何地方购买。为了能够持续查看你的僵尸敌人，你需要一个显示视频的设备，你可以将普通的电视或显示器连接到树莓派。然而，为了节省更多的电力，本项目使用了一个带
    7 英寸（180 毫米）显示屏的 12V DC 显示器。最糟糕的情况下，这可能会将功耗翻倍，达到最高 6W。
- en: '![image](graphics/f05-03.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-03.jpg)'
- en: 'Figure 5-3: A Raspberry Pi system'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-3：一个树莓派系统
- en: '**WHAT YOU WILL NEED**'
  id: totrans-19
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**你将需要的物品**'
- en: To use this Raspberry Pi system with a 12V battery as this book describes, you’ll
    need the following items.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如本书所述，要使用 12V 电池运行树莓派系统，你需要以下物品。
- en: '| **ITEM** | **NOTES** | **SOURCE** |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| **项目** | **说明** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Raspberry Pi | Model B+ or Pi 2 with NOOBS
    micro SD card | Adafruit (2358), Fry’s (8258726) |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 树莓派 | Model B+ 或 Pi 2 配备 NOOBS 微型 SD 卡 | Adafruit
    (2358)，Fry’s (8258726) |'
- en: '| ![image](graphics/square.jpg) Small HDMI monitor | 12V HDMI monitor. Suggested
    device has 800×480 pixel resolution. | Adafruit (1934), eBay |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 小型 HDMI 显示器 | 12V HDMI 显示器。建议设备具有 800×480 像素分辨率。
    | Adafruit (1934)，eBay |'
- en: '| ![image](graphics/square.jpg) Keyboard and mouse | Standard USB keyboard
    and mouse | Computer store, online |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 键盘和鼠标 | 标准 USB 键盘和鼠标 | 电脑商店，在线 |'
- en: '| ![image](graphics/square.jpg) HDMI cable | As short as possible | Computer
    store, online |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) HDMI 电缆 | 尽可能短 | 电脑商店，在线 |'
- en: '| ![image](graphics/square.jpg) 12V to USB adapter | Minimum current of 1 A
    | Auto parts store, Computer store |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 12V 到 USB 适配器 | 最小电流为 1A | 汽车零件店，电脑商店 |'
- en: '| ![image](graphics/square.jpg) Vehicle to 2.1 mm jack adapter |  | Auto parts
    store |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 车辆到 2.1 毫米插口适配器 |  | 汽车零件店 |'
- en: '| ![image](graphics/square.jpg) Powered USB hub | Needed only if you have a
    Raspberry Pi Model B | Computer store, online |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 有源 USB 集线器 | 仅在你使用树莓派 Model B 时需要 | 电脑商店，在线
    |'
- en: If you’re using a Model B Raspberry Pi that has only two USB sockets, then you’ll
    need a powered USB hub or a wireless keyboard and mouse combo that uses a single
    USB adapter. Otherwise, the keyboard and mouse will occupy both of the Model B’s
    USB ports, and you won’t be able to plug in the webcam needed in the next project.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是仅有两个 USB 插口的树莓派 Model B，那么你需要一个有源 USB 集线器，或者一个无线键盘和鼠标组合，这种组合使用一个 USB
    适配器。否则，键盘和鼠标将占用 Model B 的两个 USB 端口，你将无法插入下一个项目所需的摄像头。
- en: '**POWERING THE SYSTEM**'
  id: totrans-31
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**系统供电**'
- en: The Raspberry Pi is powered from a micro USB socket, so you can use a 12V-to-USB
    power adapter when powering it from a 12V battery. The monitor I suggest has a
    separate driver board that powers the display and connects it to the Raspberry
    Pi; that’s the printed circuit board (PCB) in the middle of [Figure 5-3](ch05.html#ch05fig3).
    This driver board has a 2.1 mm DC power socket.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派通过微型 USB 插口供电，因此当你从 12V 电池为其供电时，可以使用 12V 到 USB 的电源适配器。我建议的显示器有一个独立的驱动板，用于为显示器供电并将其连接到树莓派；这就是[图
    5-3](ch05.html#ch05fig3)中间的印刷电路板（PCB）。这个驱动板有一个 2.1 毫米的 DC 电源插口。
- en: A combined cigarette lighter and USB socket adapter (such as in [Figure 5-4](ch05.html#ch05fig4))
    is a great way to power this whole system from batteries. If you haven’t already
    done so, you’ll need to replace the cigarette plug with a pair of alligator clips
    to attach the adapter to the battery. Refer to [Chapter 3](ch03.html#ch03) for
    instructions on how to connect your 12V battery to low-voltage devices.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一个结合了点烟器插口和 USB 插座的适配器（如[图 5-4](ch05.html#ch05fig4)所示）是通过电池为整个系统供电的好方法。如果你还没有这样做，你需要将点烟器插头替换为一对鳄鱼夹，以便将适配器连接到电池上。有关如何将
    12V 电池连接到低电压设备的说明，请参见[第 3 章](ch03.html#ch03)。
- en: '![image](graphics/f05-04.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-04.jpg)'
- en: 'Figure 5-4: Combined USB and 12V DC power adapter'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-4：结合 USB 和 12V DC 电源适配器
- en: 'With the power adapter setup of [Figure 5-4](ch05.html#ch05fig4), you can power
    your Raspberry Pi from a normal micro USB lead and, in “[Project 8: A Wireless
    Zombie Surveillance System](ch05.html#ch00lev1sec102)” on [page 96](ch05.html#page_96),
    power the Wi-Fi webcam and router with a DC jack-to-cigarette lighter adapter.
    Check the voltages used by your router and Wi-Fi webcam, but they’re quite likely
    12V DC, which is very handy if you’ve stockpiled car batteries for the apocalypse
    already.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 [图 5-4](ch05.html#ch05fig4) 中的电源适配器设置，您可以通过普通的 micro USB 线为树莓派供电，并且在 “[项目
    8：无线丧尸监控系统](ch05.html#ch00lev1sec102)” 中，使用 DC 插孔转点烟器适配器为 Wi-Fi 网络摄像头和路由器供电。请检查路由器和
    Wi-Fi 网络摄像头所用的电压，它们很可能是 12V DC，这对于您已经为末日存储汽车电池的人来说，非常实用。
- en: '**WARNING**'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告**'
- en: Be careful when handling the display, especially if the display has a metal
    back. The exposed underside of the driver board can easily short against the metal,
    damaging the board.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理显示器时要小心，特别是如果显示器背面是金属的。驱动板的裸露底面很容易与金属短路，可能会损坏板子。
- en: To connect the driver board to a car battery from your stockpile, just make
    a lead with a 2.1 mm jack on one end and alligator clips on the other. However,
    if your battery is overloaded with alligator clips, you may want to attach a multiple
    cigarette lighter socket adapter to it instead. Then you can plug various appliances
    into the adapter with cigarette lighter plugs, as described in “[Cigarette Lighter
    Sockets](ch03.html#ch00lev1sec53)” on [page 46](ch03.html#page_46).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 要将驱动板连接到您库存中的汽车电池，只需做一个一端带有 2.1 mm 插头、另一端带有鳄鱼夹的连接线。然而，如果您的电池已经被鳄鱼夹过载，您可能希望改用多功能点烟器插座适配器。这样，您可以将各种设备插入适配器的点烟器插口，具体描述见
    “[点烟器插座](ch03.html#ch00lev1sec53)” 和 [第 46 页](ch03.html#page_46)。
- en: '**INSTALLING RASPBIAN**'
  id: totrans-40
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**安装 RASPBIAN**'
- en: The Raspberry Pi computer doesn’t have a hard disk. Instead, the Raspberry Pi
    2 and Model B+ stores its operating system, programs, and data on a micro SD card.
    Older Raspberry Pi models store that information on a regular SD card. There won’t
    be an Internet after the zombie apocalypse, so get a micro SD card preloaded with
    an operating system (OS)—you won’t be able to download it. In fact, a Raspberry
    Pi with a preloaded SD card usually doesn’t cost much more than the Raspberry
    Pi on its own, so I recommend just buying the preloaded card with your Raspberry
    Pi. If you do want to add an OS to a blank SD card yourself, visit *[http://www.raspberrypi.org/help/noobs-setup/](http://www.raspberrypi.org/help/noobs-setup/)*
    and follow the directions there before the Internet ceases to exist.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派计算机没有硬盘。相反，树莓派 2 和 Model B+ 将其操作系统、程序和数据存储在 micro SD 卡中。较旧的树莓派型号则使用常规的 SD
    卡存储这些信息。丧尸 apocalypse 之后将没有互联网，所以请获取一张预装操作系统（OS）的 micro SD 卡——您将无法再下载它。事实上，一张预装了操作系统的
    SD 卡，通常价格不会比单独购买树莓派更贵，因此我建议直接购买带预装卡的树莓派。如果您确实想要将操作系统添加到空白的 SD 卡中，请访问 *[http://www.raspberrypi.org/help/noobs-setup/](http://www.raspberrypi.org/help/noobs-setup/)*
    并按照页面上的说明进行操作，赶在互联网消失之前完成。
- en: Whether you buy a preloaded micro SD card or add the software yourself, this
    book assumes you’re using a micro SD card with the Raspberry Pi Foundation’s NOOBS
    (New Out Of the Box Software) installer. Once you have one, fit the micro SD card
    into the Raspberry Pi; plug in the keyboard, mouse, and monitor; and power everything
    up.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您是购买预装的 micro SD 卡，还是自己添加软件，本书假设您使用的是带有树莓派基金会 NOOBS（开箱即用软件）安装程序的 micro SD
    卡。拥有该卡后，将其插入树莓派；连接键盘、鼠标和显示器；然后打开电源。
- en: '**NOTE**'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: The monitor I suggest for this project should detect the Raspberry Pi through
    the HDMI cable, and the Pi should automatically detect the screen resolution.
    If the Pi doesn’t detect the screen resolution, then visit the Raspberry Pi’s
    documentation page ([http://www.raspberrypi.org/documentation/](http://www.raspberrypi.org/documentation/)),
    go to the Configuration section, and read config.txt to learn how to configure
    your Raspberry Pi. Print the instructions and keep them with this book so you’re
    ready when the apocalypse ends the Internet as we know it.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议用于本项目的显示器应该通过 HDMI 电缆检测到树莓派，树莓派应自动检测屏幕分辨率。如果树莓派未能自动检测分辨率，请访问树莓派的文档页面 ([http://www.raspberrypi.org/documentation/](http://www.raspberrypi.org/documentation/))，进入配置部分，阅读
    config.txt 以了解如何配置您的树莓派。请打印这些说明并与本书一起保存，以便在互联网消失后可以随时参考。
- en: When you boot the Raspberry Pi with NOOBS, you’ll be offered your choice of
    operating system. This book uses Raspbian, so select the checkbox next to Raspbian
    and then click **Install**. The installation will take a while, so watch your
    PIR zombie detector or double-check your battery stockpile while you wait. Once
    the installer finishes, you’re ready to move on.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 当你通过NOOBS启动树莓派时，会提供操作系统选择界面。本书使用的是Raspbian，所以选择Raspbian旁边的复选框，然后点击**安装**。安装过程会花一些时间，所以在等待时可以查看你的PIR僵尸探测器或检查一下你的电池存货。安装完成后，你就可以继续操作了。
- en: The Raspbian distribution comes with a pretty comprehensive set of software,
    but at the time of writing, one thing it lacks is a decent browser that will work
    with a webcam. I favor Chromium, a derivative of Google Chrome that works well
    without hogging so many of the Raspberry Pi’s resources that the Pi becomes too
    zombie-like for comfort. As with most free software, you’ll need to download Chromium
    from the Internet.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Raspbian发行版自带了一个相当全面的软件包集，但在写本书时，唯一缺少的是一个能与网络摄像头兼容的好浏览器。我个人偏爱Chromium，它是Google
    Chrome的衍生版，运行良好且不会占用树莓派过多资源，从而避免让树莓派变得“僵尸化”。像大多数免费软件一样，你需要从互联网上下载Chromium。
- en: 'I apologize if it’s too late, but if it’s not, then connect the Raspberry Pi
    to your preapocalyptic home modem or router with an Ethernet cable. Then, to install
    Chromium, click the **LX Terminal** icon on the Raspberry Pi desktop. A terminal
    window should open, and at first, you should just see a flashing cursor and a
    command prompt like this:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果现在还不晚，那就将树莓派连接到你的末日前家用调制解调器或路由器，并用以太网线连接。接下来，为了安装Chromium，点击树莓派桌面上的**LX Terminal**图标。终端窗口应该会打开，最初你只会看到一个闪烁的光标和像这样的命令提示符：
- en: $
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: $
- en: 'Anytime you need to enter commands for a project in this book, I’ll also show
    the dollar command prompt on the left, which you don’t need to type. Now, enter
    the following commands:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 每当你需要输入本书中项目的命令时，我会在左边显示一个美元符号命令提示符，你不需要输入它。现在，输入以下命令：
- en: $ sudo apt-get update
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: $ sudo apt-get update
- en: $ sudo apt-get install chromium
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: $ sudo apt-get install chromium
- en: The `sudo` (short for *substitute user do*) command allows you to execute administrative
    commands. Prepend it to commands that need administrative access, such as commands
    that install new software as we’re doing now.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '`sudo`（代表*substitute user do*）命令允许你执行管理员命令。对于需要管理员权限的命令（比如安装新软件的命令），需要将其添加到命令前面，就像我们现在要做的那样。'
- en: The `apt-get` package management software on Debian-based Linux distributions
    such as Raspbian is used to manage and install software. The `update` command
    used with `apt-get` tells your system to update its cached list of available software
    from Internet software repositories. The `apt-get install` command tells `apt-get`
    to search for and install the latest version of the package supplied as the final
    argument, which in this case is Chromium.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '`apt-get`是基于Debian的Linux发行版（如Raspbian）上的软件包管理工具，用于管理和安装软件。与`apt-get`一起使用的`update`命令会让系统更新其缓存的可用软件列表，来自互联网的软件库。`apt-get
    install`命令会告诉`apt-get`搜索并安装指定软件包的最新版本，在此案例中是Chromium。'
- en: With Chromium in place, you are ready to build your surveillance system. Now
    let’s monitor some zombies!
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装了Chromium之后，你已经准备好构建你的监控系统了。现在，让我们来监控一些僵尸吧！
- en: '**PROJECT 7: MONITOR ZOMBIES WITH A USB WEBCAM**'
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目 7：用 USB 网络摄像头监控僵尸**'
- en: This project uses a low-cost USB webcam with a long lead attached to the Raspberry
    Pi. The maximum usable length of a USB 2 lead is 96 feet (30 m), so that’s the
    farthest away from the Raspberry Pi that your camera can be.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 本项目使用的是一个低成本的USB网络摄像头，它通过长线连接到树莓派。USB 2.0线缆的最大使用长度为96英尺（30米），所以你的摄像头与树莓派之间的最大距离就是这个。
- en: You can see most of the setup in [Figure 5-5](ch05.html#ch05fig5), though the
    webcam is just out of view on the left; I’ve shown it in the inset photo. One
    of the benefits of building a surveillance system for yourself rather than simply
    using an off-the-shelf closed-circuit television (CCTV) system is that because
    the software is completely under your control, you can customize it however you
    want.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[图 5-5](ch05.html#ch05fig5)中看到大部分的设置，尽管网络摄像头位于左侧，超出了视野；我已经在插图中展示了它。自己构建监控系统而不是直接使用现成的闭路电视（CCTV）系统的一个好处是，因为软件完全由你控制，你可以根据自己的需求进行定制。
- en: The webcam is controlled by a short Python program that monitors the images
    being captured for changes. When movement is detected on the screen, the program
    uses the Raspberry Pi’s GPIO pins to turn an RGB (red-green-blue) LED from green
    to red. You can cancel the alarm by pressing the spacebar on the keyboard, which
    will turn the LED green again.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 摄像头由一个简短的 Python 程序控制，该程序监视捕捉到的图像是否有变化。当屏幕上检测到运动时，程序使用树莓派的 GPIO 引脚将 RGB（红绿蓝）LED
    从绿色变为红色。你可以通过按下键盘上的空格键取消警报，这将使 LED 重新变为绿色。
- en: '![image](graphics/f05-05.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-05.jpg)'
- en: 'Figure 5-5: Zombie webcam and movement alarm'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-5：僵尸摄像头和运动警报
- en: 'The advantage of this project over “[Project 6: PIR Zombie Detector](ch04.html#ch00lev1sec81)”
    on [page 72](ch04.html#page_72), which uses a PIR sensor, is that now, if the
    alarm is triggered, you can take a good look at the zombies that are about to
    attack you.'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目相对于 “[项目 6：PIR 僵尸探测器](ch04.html#ch00lev1sec81)” 在 [第 72 页](ch04.html#page_72)
    的优势在于，当警报被触发时，你可以仔细查看即将攻击你的僵尸。
- en: '**WHAT YOU WILL NEED**'
  id: totrans-62
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**你需要的设备**'
- en: To set up this USB webcam, you’ll need the Raspberry Pi setup described in “[The
    Raspberry Pi](ch05.html#ch00lev1sec90)” on [page 82](ch05.html#page_82) and the
    additional items described here.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置这个 USB 摄像头，你需要按照 “[树莓派](ch05.html#ch00lev1sec90)” 中在 [第 82 页](ch05.html#page_82)
    描述的树莓派设置以及此处描述的其他设备。
- en: '| **ITEM** | **NOTES** | **SOURCE** |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| **项目** | **说明** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) USB webcam | See [http://elinux.org/RPi_USB_Webcams/](http://elinux.org/RPi_USB_Webcams/)
    for compatible webcams. | Computer store |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) USB 摄像头 | 查看 [http://elinux.org/RPi_USB_Webcams/](http://elinux.org/RPi_USB_Webcams/)
    获取兼容的摄像头。 | 电脑商店 |'
- en: '| ![image](graphics/square.jpg) USB extension lead | Length to suit your compound
    (less than 100 feet [30 m]) | Computer store |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) USB 延长线 | 长度适合你的场所（少于 100 英尺 [30 米]） | 电脑商店
    |'
- en: '| ![image](graphics/square.jpg) Raspberry Squid | Contains the RGB LED | Amazon,
    [http://www.monkmakes.com/](http://www.monkmakes.com/) |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 树莓派鱿鱼 | 包含 RGB LED | 亚马逊，[http://www.monkmakes.com/](http://www.monkmakes.com/)
    |'
- en: Not every USB webcam is compatible with the Raspberry Pi, so check *[http://elinux.org/RPi_USB_Webcams](http://elinux.org/RPi_USB_Webcams)*
    for a list of cameras known to work with the Raspberry Pi. I used an HP 2300 Webcam.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 不是所有 USB 摄像头都与树莓派兼容，因此请查看 *[http://elinux.org/RPi_USB_Webcams](http://elinux.org/RPi_USB_Webcams)*
    获取兼容的摄像头列表。我使用的是 HP 2300 摄像头。
- en: '**NOTE**'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: The Raspberry Pi camera module is a high-resolution camera that plugs directly
    into a special connector on the Raspberry Pi. The module is great if you’re making
    a Raspberry Pi camera, but it’s not much use in a situation like this, where you
    want the camera to be some distance from the Raspberry Pi.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派相机模块是一款高分辨率相机，直接插入树莓派上的专用接口。如果你在制作树莓派相机，这个模块非常适合，但在这种情况下，它并不太有用，因为你希望相机距离树莓派有一定距离。
- en: 'The Raspberry Squid is a handy little accessory built just for the Raspberry
    Pi. It has an RGB LED with built-in current-limiting resistors that allow you
    to connect it directly to the Raspberry Pi’s GPIO pins. Its design is open source,
    and you can find details of how to build your own here: *[https://github.com/simonmonk/squid/](https://github.com/simonmonk/squid/)*.
    You can also buy a ready-made Squid; see *[http://www.monkmakes.com/](http://www.monkmakes.com/)*
    for details.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派鱿鱼是一个专为树莓派设计的小配件。它有一个带内置限流电阻的 RGB LED，可以直接连接到树莓派的 GPIO 引脚。它的设计是开源的，你可以在这里找到如何制作自己的详细信息：*[https://github.com/simonmonk/squid/](https://github.com/simonmonk/squid/)*。你也可以购买现成的鱿鱼；详情请见
    *[http://www.monkmakes.com/](http://www.monkmakes.com/)*。
- en: '**CONSTRUCTION**'
  id: totrans-73
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建过程**'
- en: After completing the setup in “[The Raspberry Pi System](ch05.html#ch00lev1sec91)”
    on [page 83](ch05.html#page_83), to build this project you just need to attach
    the Raspberry Squid to the GPIO connector of the Raspberry Pi, plug in the USB
    webcam, supply 12V to the monitor, and supply 5V to the Raspberry Pi (see [Figure
    5-6](ch05.html#ch05fig6)).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成 “[树莓派系统](ch05.html#ch00lev1sec91)” 中的设置后，[第 83 页](ch05.html#page_83)，要搭建这个项目，你只需将树莓派鱿鱼连接到树莓派的
    GPIO 接口，插入 USB 摄像头，为显示器提供 12V 电源，并为树莓派提供 5V 电源（见 [图 5-6](ch05.html#ch05fig6)）。
- en: '![image](graphics/f05-06.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-06.jpg)'
- en: 'Figure 5-6: Schematic for the surveillance system'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-6：监控系统的原理图
- en: '**STEP 1: ATTACH THE RASPBERRY SQUID**'
  id: totrans-77
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 1：连接树莓派鱿鱼**'
- en: By controlling the three outputs of the Raspberry Squid, you can make the LED
    display any color. However, this project won’t use the accessory’s full potential
    since this surveillance setup needs to display only red and green.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 通过控制树莓派章鱼的三个输出，你可以使 LED 显示任何颜色。然而，由于该监控系统仅需显示红色和绿色，因此这个项目不会充分利用配件的全部潜力。
- en: To help identify the GPIO pins, you can use a GPIO pin identification template.
    There are many of these available from suppliers like Adafruit, including the
    Raspberry Leaf, which is included if you buy a ready-made Raspberry Squid. Place
    this template over the GPIO connectors so that you can tell which pin is which.
    Then connect the Raspberry Squid to the GPIO connector ([Figure 5-7](ch05.html#ch05fig7)).
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助识别 GPIO 引脚，你可以使用 GPIO 引脚识别模板。很多供应商，比如 Adafruit，都提供这种模板，其中包括购买现成的树莓派章鱼时附带的
    Raspberry Leaf。将这个模板放置在 GPIO 接口上，帮助你识别每个引脚的功能。然后将树莓派章鱼连接到 GPIO 接口（[图 5-7](ch05.html#ch05fig7)）。
- en: '![image](graphics/f05-07.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-07.jpg)'
- en: 'Figure 5-7: Connecting the Raspberry Squid to the GPIO connector'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-7：将树莓派章鱼连接到 GPIO 接口
- en: The black lead of the Raspberry Squid goes to one of the GND pins on the Raspberry
    Pi. In the orientation shown ([Figure 5-7](ch05.html#ch05fig7)), this is the third
    pin down on the right. The red lead of the Raspberry Squid goes to pin 18 on the
    Raspberry Pi, and the green lead of the Squid goes to pin 23 of the Pi. Since
    you won’t need the blue color, you can leave the blue lead of the Raspberry Squid
    unattached, but if you prefer to keep the leads tidy, just attach the blue lead
    to any one of the other GND pins of the GPIO header.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派章鱼的黑色引线连接到树莓派上的一个 GND 引脚。在所示方向下（[图 5-7](ch05.html#ch05fig7)），这是右侧的第三个引脚。树莓派章鱼的红色引线连接到树莓派的
    18 号引脚，绿色引线连接到树莓派的 23 号引脚。由于你不需要蓝色引线，可以将其悬空，但如果你希望保持线缆整齐，只需将蓝色引线连接到 GPIO 接口的其他
    GND 引脚即可。
- en: '**STEP 2: INSTALL THE USB WEBCAM**'
  id: totrans-83
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 2：安装 USB 摄像头**'
- en: If you already have a USB webcam, then see if it works with the Raspberry Pi
    before you get another one. First, check whether the Raspberry Pi can detect your
    webcam as a USB device by entering the command lsusb in LXTerminal both before
    and after plugging the webcam into the Pi, without the USB extension lead.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经有一个 USB 摄像头，首先检查它是否可以与树莓派兼容，避免再购买新的。首先，通过在 LXTerminal 中运行命令 `lsusb`，查看树莓派是否可以将摄像头识别为
    USB 设备，记得在插入摄像头前后都执行一次，而不要使用 USB 延长线。
- en: $ lsusb
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: $ lsusb
- en: 'Bus 001 Device 002: ID 0424:9514 Standard Microsystems Corp.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 总线 001 设备 002：ID 0424:9514 Standard Microsystems Corp.
- en: 'Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 总线 001 设备 001：ID 1d6b:0002 Linux Foundation 2.0 根集线器
- en: 'Bus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 总线 001 设备 003：ID 0424:ec00 Standard Microsystems Corp.
- en: 'Bus 001 Device 004: ID 03f0:e207 Hewlett-Packard'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 总线 001 设备 004：ID 03f0:e207 惠普
- en: 'Bus 001 Device 006: ID 04d9:1603 Holtek Semiconductor, Inc. Keyboard'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 总线 001 设备 006：ID 04d9:1603 Holtek Semiconductor, Inc. 键盘
- en: 'Bus 001 Device 005: ID 1c4f:0034 SiGma Micro'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 总线 001 设备 005：ID 1c4f:0034 SiGma Micro
- en: If an extra entry appears after you run the command with the webcam plugged
    in, then that entry should be your webcam. In the list I’ve shown, my Hewlett-Packard
    webcam is the fourth entry from the top.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在你运行命令并插入摄像头后出现额外的条目，那么该条目应该是你的摄像头。在我展示的列表中，我的惠普摄像头是从上往下数的第四个条目。
- en: If your webcam does not appear in the list, then try unplugging it, plugging
    it back in, and running the `lsusb` command again. If that doesn’t work, try a
    reboot of the Raspberry Pi.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的摄像头没有出现在列表中，尝试拔掉摄像头，重新插入并再次运行 `lsusb` 命令。如果这样仍然不起作用，尝试重启树莓派。
- en: Unfortunately, being recognized as a USB device is still no guarantee that a
    webcam will work with the Raspberry Pi. You’ll find out for certain when you run
    the program. You may also find that your webcam works only if it’s plugged into
    a powered hub. If you have an older model of Raspberry Pi, you may find instead
    that the whole board resets when you plug the webcam into the USB port. If this
    is the case for your board, then plug the webcam in while the Raspberry Pi is
    powered off.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，仅被识别为 USB 设备并不能保证网络摄像头能够在树莓派上正常工作。你可以在运行程序时确定这一点。你可能还会发现，只有将摄像头插入带电的集线器，摄像头才会正常工作。如果你使用的是较旧版本的树莓派，你可能会发现，当你将摄像头插入
    USB 端口时，整个主板会重启。如果是这种情况，建议在树莓派关闭电源时插入摄像头。
- en: '**STEP 3: INSTALL THE SOFTWARE**'
  id: totrans-95
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 3：安装软件**'
- en: Connect the Raspberry Pi to your network with an Ethernet cable, make sure the
    Internet is up and running, and download the Raspberry Pi programs for the projects
    in this book. From your browser on the Pi, you can head to *[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*,
    click the link to GitHub, and download the *Raspberry Pi* directory. For this
    project, you’ll use the code in the *usb_webcam* directory. But the easiest way
    to get the software onto your Raspberry Pi is to clone the GitHub repository directly
    onto your Raspberry Pi, as I describe in “Fetching Source Code from GitHub” on
    [page 92](ch05.html#page_92).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以太网线将 Raspberry Pi 连接到网络，确保互联网连接正常，然后下载本书中项目所需的 Raspberry Pi 程序。在 Pi 上的浏览器中，你可以访问
    *[http://www.nostarch.com/zombies/](http://www.nostarch.com/zombies/)*，点击链接进入
    GitHub，下载 *Raspberry Pi* 目录。对于这个项目，你将使用 *usb_webcam* 目录中的代码。但将软件直接克隆到 Raspberry
    Pi 上是最简单的方法，正如我在 “[从 GitHub 获取源代码](ch05.html#page_92)” 中所描述的那样。
- en: 'The Python program *monitor.py* is pretty brief, considering what it does,
    and I’ll walk you through it here. I won’t, however, cover Python itself beyond
    the context of the projects that use it. If you are new to Python, you might take
    a look another of my books, *Programming the Raspberry Pi: Getting Started with
    Python* (McGraw-Hill, 2013).'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Python 程序 *monitor.py* 相对简短，考虑到它的功能，接下来我会带你了解它。虽然我不会讲解 Python 本身，但会讲解与本书中项目相关的部分。如果你是
    Python 新手，可能需要参考我另一本书，*《编程 Raspberry Pi：Python 入门》*（McGraw-Hill，2013）。
- en: '**FETCHING SOURCE CODE FROM GITHUB**'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '**从 GitHub 获取源代码**'
- en: You can get all the Raspberry Pi programs used in this book onto your Raspberry
    Pi in one go by cloning the book’s GitHub repository. Just enter the following
    commands from a terminal window on the Raspberry Pi.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过直接克隆本书的 GitHub 仓库，将本书中使用的所有 Raspberry Pi 程序一次性下载到 Raspberry Pi 上。只需在 Raspberry
    Pi 的终端窗口中输入以下命令。
- en: $ cd /home/pi
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: $ cd /home/pi
- en: $ git clone https://github.com/simonmonk/zombies.git
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: $ git clone https://github.com/simonmonk/zombies.git
- en: These commands will fetch all of code for the book, including the Arduino code
    used in other projects (which you can ignore in this chapter). Even though you’re
    not using a browser, you’ll still need an Internet connection for the commands
    to work, so definitely get this code before the apocalypse.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这些命令将获取本书中的所有代码，包括其他项目中使用的 Arduino 代码（你可以在本章中忽略它）。即使你不使用浏览器，你仍然需要一个互联网连接才能使这些命令生效，所以在末日到来之前一定要获取这些代码。
- en: The program begins by importing the various Python modules that it needs. These
    libraries of existing code are all included in the Raspbian distribution, so you
    shouldn’t need to install them separately.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 程序首先导入它所需的各种 Python 模块。这些现有代码的库都包含在 Raspbian 发行版中，因此你不需要单独安装它们。
- en: '[PRE0]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `sys` and `time` modules have general utilities for accessing the operating
    system and the ability to tell the program to sleep as a way of delaying its activity
    for a period of time. The `pygame` module contains the Pygame graphical games
    library, which includes a camera interface. To control the LED, the program needs
    access to the GPIO system, and this is provided by the `RPi.GPIO` library.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '`sys` 和 `time` 模块提供了一些通用工具，用于访问操作系统并能够让程序进入休眠状态，以延迟它的活动一段时间。`pygame` 模块包含 Pygame
    图形游戏库，其中包括摄像头接口。为了控制 LED，程序需要访问 GPIO 系统，这通过 `RPi.GPIO` 库来提供。'
- en: Next, the program defines some constants that it will use. You could change
    these if you wanted to use the camera at a different resolution or make the default
    size of the window larger.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，程序定义了一些常量，供它使用。如果你想使用不同分辨率的摄像头或将默认窗口大小设置得更大，你可以修改这些常量。
- en: '[PRE1]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The parameters in parentheses after the `camera_res` and `window_res` constants
    are the width and height respectively (in pixels). After the constants, the Pygame
    system (used to display the camera images) and the camera itself are initialized,
    along with the GPIO ports that you’ll use to control the Raspberry Squid:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `camera_res` 和 `window_res` 常量后面的括号内的参数分别是宽度和高度（以像素为单位）。在定义这些常量后，Pygame 系统（用于显示摄像头图像）和摄像头本身将被初始化，同时还会初始化你将用来控制
    Raspberry Squid 的 GPIO 端口：
- en: '[PRE2]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The first two lines of initialization code ➊ handle Pygame and the camera, while
    the next three lines ➋ initialize those GPIO ports. The screen is then initialized
    ➌ to the size of the window specified in `window_size`. The final cluster of lines
    ➍ first finds all the cameras connected to the Raspberry Pi and then creates a
    link to the first one (`webcam`). It then starts running the webcam. The final
    line ➎ defines a variable called `old_image`, which is used to detect movement
    by spotting changes in successive frames from the webcam.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 初始化代码的前两行➊处理Pygame和摄像头，接下来的三行➋初始化那些GPIO端口。然后屏幕被初始化➌为`window_size`指定的窗口大小。最后一组代码➍首先查找连接到树莓派的所有摄像头，然后创建一个链接到第一个摄像头（`webcam`）。接着它开始运行摄像头。最后一行➎定义了一个名为`old_image`的变量，用来通过检测连续帧之间的变化来判断是否有运动。
- en: After initialization, the first function this program defines is called `check_for_movement`.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 初始化后，这个程序定义的第一个函数是`check_for_movement`。
- en: '[PRE3]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: As the name suggests, `check_for_movement` takes two images, the previous frame
    (`old_image`) and the latest frame (`new_image`), and compares them. The `distance`
    parameter to `compare` is the “distance” between the color of the pixel in one
    image and the color of that same pixel in the other image. The `weights` parameter
    is not explained in the `pygame` documentation, and the values used here are taken
    in faith from an example in the `pygame` documentation for `PixelArray` (*[http://www.pygame.org/docs/ref/pixelarray.html](http://www.pygame.org/docs/ref/pixelarray.html)*).
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 正如名称所示，`check_for_movement`函数接受两张图像，前一帧（`old_image`）和最新一帧（`new_image`），并对比它们。传递给`compare`的`distance`参数是两张图像中相同像素的颜色之间的“距离”。`weights`参数在`pygame`文档中没有解释，这里使用的值是基于`pygame`文档中的一个`PixelArray`示例(*[http://www.pygame.org/docs/ref/pixelarray.html](http://www.pygame.org/docs/ref/pixelarray.html)*).
- en: The comparison results in a new image called `diff_image` that only has white
    pixels where a difference was found between the pixels in the two images.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 比较结果生成一张新的图像，名为`diff_image`，它只有在两张图像的像素之间发现差异时，才会显示白色像素。
- en: To decide whether movement has occurred, the program should really go through
    every pixel in the `diff_image`. But any largish movement will result in lots
    of pixels changing, and zombies are big, so the code speeds things up by only
    sampling 1 pixel in 20.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 为了判断是否发生了运动，程序应该遍历`diff_image`中的每个像素。但是任何较大的运动都会导致大量像素发生变化，而僵尸体积较大，因此代码通过仅采样每20个像素中的一个来加速处理。
- en: The next two functions set the LED of the Raspberry Squid to red or green.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的两个函数将树莓派的LED设置为红色或绿色。
- en: '[PRE4]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The Raspberry Squid is just an RGB LED, and as with most RGB LEDs, you can select
    the color it glows by outputting certain combinations of high (`True`) and low
    (`False`) on the GPIO pins the LED is connected to. In this case, you want red
    and green, so the code just sets the appropriate pin to `True` and the other to
    `False`. The blue takes no part in this project, so you don’t have to deal with
    it in the code.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派小鱿鱼只是一个RGB LED，就像大多数RGB LED一样，你可以通过在LED连接的GPIO引脚上输出特定的高（`True`）和低（`False`）组合来选择它发光的颜色。在这个项目中，你只需要选择红色和绿色，因此代码只需将适当的引脚设置为`True`，另一个设置为`False`。蓝色在这个项目中不参与，所以你不需要在代码中处理它。
- en: Finally, we come to the main loop of the program, where the new image is fetched
    and scaled so it’s ready to display in the window.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们进入程序的主循环，在这里获取并缩放新图像，使其准备好显示在窗口中。
- en: '[PRE5]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `count` variable keeps track of how many times the loop has run. When `count`
    gets to 10, the last two images are compared. Sampling only one-tenth of the time
    also speeds up the program, which would otherwise be too slow. If there was movement,
    meaning `check_for_movement` returns `True`, the LED turns red.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '`count`变量跟踪循环运行的次数。当`count`达到10时，最后两张图像会被比较。只采样十分之一的时间也加速了程序，否则程序会变得太慢。如果有运动，意味着`check_for_movement`返回`True`，LED会变成红色。'
- en: The last part of the main loop checks for the close window event (which stops
    the program).
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 主循环的最后部分检查关闭窗口事件（停止程序）。
- en: '[PRE6]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The event checking also catches any key press event (`KEYDOWN`), and if the
    spacebar is pressed, the program sets the LED back to green.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 事件检查还会捕捉到任何按键事件（`KEYDOWN`），如果按下空格键，程序将把LED重新设置为绿色。
- en: '**USING THE WEBCAM**'
  id: totrans-125
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用摄像头**'
- en: To get the webcam started, run *monitor.py* by entering the following commands
    in a terminal window on your Raspberry Pi. A window should open showing a view
    from the webcam ([Figure 5-8](ch05.html#ch05fig8)).
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动摄像头，运行 *monitor.py*，通过在树莓派的终端窗口输入以下命令。一个窗口应该会打开，显示摄像头的视图（[图 5-8](ch05.html#ch05fig8)）。
- en: $ cd "/home/pi/zombies/Raspberry Pi/usb_webcam"
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: $ cd "/home/pi/zombies/Raspberry Pi/usb_webcam"
- en: $ sudo python monitor.py
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: $ sudo python monitor.py
- en: At this point, the Raspberry Squid LED should be green. To test the movement
    detection, wave your hand in front of the webcam. The LED should go red and stay
    red until you press the spacebar on the Raspberry Pi’s keyboard.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 到此为止，树莓鱿鱼的 LED 灯应该是绿色的。要测试运动检测功能，可以在摄像头前挥动手。LED 灯应该会变成红色，并保持红色，直到你按下树莓派键盘上的空格键。
- en: When everything is working with the webcam connected directly to the Raspberry
    Pi, you can use the USB extension lead to place the camera further away. Place
    the camera somewhere overlooking your base’s entrance, and then you’ll know when
    the coast is clear to go outside.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 当摄像头与树莓派直接连接并且一切正常时，你可以使用 USB 延长线将摄像头放得更远。将摄像头放在一个俯瞰基地入口的位置，这样你就可以知道什么时候外面安全可以出去。
- en: There will be a limit on how far you can move the webcam before the signal degrades
    and you start getting errors, so keep the lead under 30 m.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 摄像头的移动距离会有限制，超出范围信号会衰减并开始出现错误，所以尽量将电缆长度保持在 30 米以内。
- en: '![image](graphics/f05-08.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-08.jpg)'
- en: 'Figure 5-8: The USB webcam in operation'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-8：USB 网络摄像头的使用
- en: '**PROJECT 8: A WIRELESS ZOMBIE SURVEILLANCE SYSTEM**'
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**项目 8：无线僵尸监控系统**'
- en: There may be no Internet after the apocalypse, but that doesn’t mean you can’t
    set up your own wireless network and attach a Wi-Fi webcam to it. You can use
    a low-cost webcam for this project ([Figure 5-9](ch05.html#ch05fig9)). With a
    wireless webcam, you can put even more distance between you and the zombies you’re
    monitoring, making you safer than ever.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 灾后可能没有互联网，但这并不意味着你不能自己搭建一个无线网络并连接一个 Wi-Fi 网络摄像头。你可以使用一款低成本的摄像头来进行这个项目（[图 5-9](ch05.html#ch05fig9)）。使用无线摄像头，你可以将自己与监控中的僵尸之间保持更远的距离，这让你比以往更加安全。
- en: Once you set up the camera and a local network, you can view the camera video
    from the browser on your Raspberry Pi ([Figure 5-10](ch05.html#ch05fig10)) or
    even a Wi-Fi-equipped tablet or smartphone. What’s more, if you buy the right
    sort of webcam, you’ll be able to use software to change the direction the webcam
    is pointing.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦设置好摄像头和本地网络，你就可以通过树莓派的浏览器（[图 5-10](ch05.html#ch05fig10)）或甚至是 Wi-Fi 配备的平板电脑或智能手机来查看摄像头视频。而且，如果你购买合适的摄像头，你将能够使用软件改变摄像头的方向。
- en: '![image](graphics/f05-09.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-09.jpg)'
- en: 'Figure 5-9: A low-cost Wi-Fi webcam'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-9：一款低成本的 Wi-Fi 网络摄像头
- en: '![image](graphics/f05-10.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-10.jpg)'
- en: 'Figure 5-10: Using a Wi-Fi webcam with the Raspberry Pi'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-10：将 Wi-Fi 网络摄像头与树莓派一起使用
- en: 'All this comes at a cost, of course: Wi-Fi uses quite a lot of power. The wireless
    router and Wi-Fi webcam are likely to both use between 5W and 10W of power each.
    You want to turn them on only when needed.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这一切是有代价的：Wi-Fi 消耗了相当多的电力。无线路由器和 Wi-Fi 网络摄像头每个可能都会消耗 5W 到 10W 的电力。你需要仅在需要时才打开它们。
- en: Note that the Raspberry Pi in [Figure 5-8](ch05.html#ch05fig8) still has the
    Raspberry Squid attached, even though this project doesn’t use the Squid. Leave
    Project 7’s hardware connected, and you can monitor zombies from both cameras!
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，[图 5-8](ch05.html#ch05fig8)中的树莓派仍然连接着树莓鱿鱼（Raspberry Squid），即使这个项目并不使用鱿鱼。保持项目
    7 的硬件连接，你就可以从两台摄像头监控僵尸！
- en: '**WHAT YOU WILL NEED**'
  id: totrans-143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**你将需要的设备**'
- en: To setup this Wi-Fi webcam, you’ll need the Raspberry Pi setup described in
    “[The Raspberry Pi System](ch05.html#ch00lev1sec91)” on [page 83](ch05.html#page_83)
    and these additional items.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置这个 Wi-Fi 网络摄像头，你需要在 [第 83 页](ch05.html#page_83)中描述的 “[树莓派系统](ch05.html#ch00lev1sec91)”
    配置，以及以下附加设备。
- en: '| **ITEM** | **NOTES** | **SOURCE** |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '| **物品** | **备注** | **来源** |'
- en: '| --- | --- | --- |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ![image](graphics/square.jpg) Wi-Fi webcam | Preferably a unit that can rotate
    ($50) | Computer store, eBay |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) Wi-Fi 网络摄像头 | 最好是可以旋转的设备（$50） | 电脑商店，eBay |'
- en: '| ![image](graphics/square.jpg) Wi-Fi router | Low-end unit ($20) operating
    from 12V DC supply | Computer store, eBay |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 无线路由器 | 低端设备（$20），需要 12V DC 电源 | 电脑商店，eBay
    |'
- en: '| ![image](graphics/square.jpg) 2x Ethernet cable | Any length will do. |  |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 2x 以太网电缆 | 长度不限。 |  |'
- en: '| ![image](graphics/square.jpg) 2x 12V adapter lead | 2.1 mm jack plug-to-cigarette
    lighter adapter | Auto parts store |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| ![image](graphics/square.jpg) 2x 12V 适配器线 | 2.1 毫米插头转点烟器适配器 | 汽配店 |'
- en: Wi-Fi webcams are available at a wide range of costs. The device I chose is
    at the low-cost end and while the image isn’t fantastic, it’s plenty good enough
    to spot zombies.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: Wi-Fi 网络摄像头的价格差异很大。我选择的这款属于低价位，虽然图像质量不是特别好，但足够用来识别僵尸。
- en: 'The Wi-Fi router is just a normal household router; most homes with Internet
    access probably have several, and I’ll bet you have a spare lying around, too.
    These devices serve two purposes: first, to connect your devices to the Internet
    (not going to happen with zombies all over the place) and, second, to make a local
    area network (LAN) to which you can attach wired and wireless devices. We’ll use
    the second function of the Wi-Fi router here.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: Wi-Fi 路由器就是一个普通的家用路由器；大多数有互联网接入的家庭可能都有好几个，我敢打赌你家也有一个备用的。这些设备有两个用途：首先，将你的设备连接到互联网（但在僵尸遍地的情况下这是不可能的），其次，建立一个局域网（LAN），你可以连接有线和无线设备。我们将在这里使用
    Wi-Fi 路由器的第二个功能。
- en: '**CONSTRUCTION**'
  id: totrans-153
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**构建**'
- en: This project uses ready-made components, so you don’t really have any electronics
    construction to do. You’ll just be connecting components ([Figure 5-11](ch05.html#ch05fig11)).
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目使用的是现成的组件，因此你不需要进行电子电路的构建。你只需要连接这些组件（[图 5-11](ch05.html#ch05fig11)）。
- en: '![image](graphics/f05-11.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-11.jpg)'
- en: 'Figure 5-11: Schematic for the Wi-Fi camera system'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-11：Wi-Fi 摄像头系统的示意图
- en: Connecting a tablet or smartphone to the Wi-Fi network ([Figure 5-11](ch05.html#ch05fig11))
    is by no means essential, but it would allow you to monitor the webcam from a
    mobile device as well as the screen of your Raspberry Pi.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 将平板电脑或智能手机连接到 Wi-Fi 网络（[图 5-11](ch05.html#ch05fig11)）并非必需，但它可以让你通过移动设备和树莓派屏幕同时监控摄像头。
- en: '**STEP 1: SET UP A LOCAL AREA NETWORK (LAN)**'
  id: totrans-158
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 1：设置局域网（LAN）**'
- en: Since this network will not connect to the Internet, you only need a router.
    That means even if you have a modem-router combination, you don’t need to connect
    it to a phone line or cable connection.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 由于该网络不会连接到互联网，因此只需要一个路由器。这意味着即使你有一个调制解调器路由器组合，也无需将其连接到电话线或有线连接。
- en: 'The router allows devices to connect to it in two ways: using an Ethernet cable
    or using Wi-Fi. We’ll connect the Raspberry Pi using an Ethernet cable because
    a wired connection is more reliable and uses less power than Wi-Fi.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 路由器允许设备通过两种方式连接：使用以太网电缆或使用 Wi-Fi。我们将通过以太网电缆连接树莓派，因为有线连接比 Wi-Fi 更可靠，且能耗更低。
- en: Once you plug the Raspberry Pi into the router, the Pi should automatically
    join the network using DHCP (Dynamic Host Configuration Protocol), so you shouldn’t
    need to set it up. At this point, though, you may want to set up the Wi-Fi details
    of the router. This will involve connecting to the configuration page for your
    router. The IP address for this page is usually 192.168.1.1, but in my case, it
    was 192.168.1.254\. In other words, check your router documentation. When you
    know the address of your router’s admin page, open the Chromium browser and type
    that URL into the browser’s address bar.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你将树莓派连接到路由器，Pi 应该会自动使用 DHCP（动态主机配置协议）加入网络，所以你不需要进行设置。不过，在这个时候，你可能需要设置路由器的
    Wi-Fi 细节。这将涉及连接到路由器的配置页面。这个页面的 IP 地址通常是 192.168.1.1，但在我的情况下，它是 192.168.1.254。换句话说，检查你的路由器文档。当你知道路由器管理页面的地址时，打开
    Chromium 浏览器并在地址栏中输入该 URL。
- en: The router admin page should have a wireless, WLAN, or Wi-Fi settings page somewhere.
    Find this page and set the wireless network name (also called the ESSID) and password
    ([Figure 5-12](ch05.html#ch05fig12)).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 路由器的管理页面应该有一个无线、WLAN 或 Wi-Fi 设置页面。找到此页面并设置无线网络名称（也叫 ESSID）和密码（[图 5-12](ch05.html#ch05fig12)）。
- en: '![image](graphics/f05-12.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-12.jpg)'
- en: 'Figure 5-12: Setting up a wireless network'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-12：设置无线网络
- en: Set the network name to something like *Apocalypse Survivors* so techsavvy survivors
    can find you easily. Your group of survivors can always benefit from more geeks—especially
    if it looks like you can run faster than them.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 将网络名称设置为类似*末日幸存者*的名字，这样技术高手幸存者就能轻松找到你。你的幸存者小组永远需要更多的极客，尤其是如果你看起来能比他们跑得更快的话。
- en: '**STEP 2: SET UP THE WI-FI CAMERA**'
  id: totrans-166
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**步骤 2：设置 Wi-Fi 摄像头**'
- en: The Wi-Fi camera can’t connect itself to your wireless network without knowing
    your password and network name. To give it this information, you’ll need to connect
    to it from a browser, but first it must be connected to the network. This is a
    bit of a problem. Fortunately, it’s a problem that can be resolved by connecting
    the Wi-Fi camera to the router using an Ethernet cable. Making a wired connection
    doesn’t require a password, and the camera should connect to the network using
    DHCP just like the Raspberry Pi. After you finish the setup, you can disconnect
    the Ethernet cable, and the Wi-Fi camera will be free!
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Wi-Fi摄像头无法在不知道你的密码和网络名称的情况下连接到无线网络。为了提供这些信息，你需要通过浏览器连接到它，但首先它必须连接到网络。这是一个小问题。幸运的是，这是一个可以通过使用以太网电缆将Wi-Fi摄像头连接到路由器来解决的问题。使用有线连接不需要密码，摄像头应该像树莓派一样使用DHCP连接到网络。设置完成后，你可以断开以太网电缆，Wi-Fi摄像头将自由使用无线网络！
- en: Connect the Wi-Fi camera to the router and go back to the same router admin
    page you used to set up the wireless network. You can use it again to find the
    IP address of the camera so you can configure it. This time, you’re looking for
    a page called either DHCP table or ARP (Address Resolution Protocol) table. [Figure
    5-13](ch05.html#ch05fig13) shows the ARP table for my router.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 将Wi-Fi摄像头连接到路由器，然后回到你之前用来设置无线网络的路由器管理页面。你可以再次使用它来查找摄像头的IP地址，以便进行配置。这次，你需要查找名为DHCP表格或ARP（地址解析协议）表格的页面。[图
    5-13](ch05.html#ch05fig13)展示了我的路由器的ARP表。
- en: '![image](graphics/f05-13.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-13.jpg)'
- en: 'Figure 5-13: Finding the IP address of the camera'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-13：查找摄像头的IP地址
- en: The connection to the camera is wired, so the IP address of the camera is either
    192.168.1.102 or 192.168.1.100\. One of those IP addresses belongs to the Raspberry
    Pi. Find out which is which by entering the ifconfig command in LXTerminal. You
    should see one of the two addresses above in the response to the command, and
    that’s the Raspberry Pi’s address.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 连接到摄像头的是有线连接，因此摄像头的IP地址是192.168.1.102或192.168.1.100。你可以通过在LXTerminal中输入ifconfig命令来找出这两个IP地址中的哪一个是树莓派的地址。你应该能在命令的响应中看到其中一个地址，那就是树莓派的地址。
- en: My Raspberry Pi had an IP address of 192.168.1.102, so by process of elimination,
    my camera’s IP address was 192.168.1.100\. Start a new tab on the browser and
    connect to that IP address, adding :99 after the last number in the address. (I
    pointed my browser to 192.168.1.100:99.) This extra number specifies the network
    port to use for the webcam. In most cases, this is 99, but if you’re using a different
    camera, then check your documentation because its port may be different.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 我的树莓派的IP地址是192.168.1.102，因此通过排除法，我的摄像头的IP地址是192.168.1.100。打开浏览器的新标签页并连接到该IP地址，在地址的最后加上：99（我将浏览器指向192.168.1.100:99）。这个额外的数字指定了用于网络摄像头的端口。在大多数情况下，这个端口是99，但如果你使用的是其他摄像头，检查你的文档，因为它的端口可能不同。
- en: '**NOTE**'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: Any IP address can have a port number after it like this. Different types of
    network traffic use different ports. For example, most web traffic uses port 80,
    which is the default. The webcam happens to use port 99, so this has to be specified
    in the URL.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 任何IP地址后都可以跟一个端口号。例如，大多数Web流量使用端口80，这是默认端口。网络摄像头恰好使用端口99，所以必须在URL中指定这个端口。
- en: The browser should immediately start displaying video from the camera as well
    as the controls to pan and tilt the camera. Somewhere on the page, you should
    see a settings link. Click on this and look for Wireless LAN Settings. Click **Wireless
    LAN Settings**, and you should see an option to scan for Wireless Networks ([Figure
    5-14](ch05.html#ch05fig14)).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器应立即开始显示来自摄像头的视频以及用于平移和倾斜摄像头的控制按钮。页面的某个地方，应该能看到一个设置链接。点击此链接并查找无线局域网设置。点击**无线局域网设置**，你应该会看到一个扫描无线网络的选项（[图
    5-14](ch05.html#ch05fig14)）。
- en: '![image](graphics/f05-14.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-14.jpg)'
- en: 'Figure 5-14: Connecting the camera to the wireless network'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5-14：将摄像头连接到无线网络
- en: Select the *Apocalypse Survivors* network, enter the password (also called the
    *share key*), and click **Submit**. The camera should reboot, and then you can
    unplug the Ethernet because from now on, the camera will use its Wi-Fi connection.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 选择*末日幸存者*网络，输入密码（也称为*共享密钥*），然后点击**提交**。摄像头应该会重启，接着你可以拔掉以太网线，因为从现在开始，摄像头将使用Wi-Fi连接。
- en: Once the camera has switched over to using Wi-Fi, it will also have a different
    IP address, so return to the router admin page ([Figure 5-13](ch05.html#ch05fig13)).
    This time, there should be an entry in the wireless section of the list representing
    the camera. Try browsing to the camera using that IP address with :99 on the end.
    Once again, the video should appear in the browser window along with the camera
    controls ([Figure 5-15](ch05.html#ch05fig15)).
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦摄像头切换到使用Wi-Fi，它将拥有一个不同的IP地址，因此请返回路由器的管理页面（[图5-13](ch05.html#ch05fig13)）。这时，列表的无线部分应该会有一项代表摄像头的条目。尝试使用该IP地址并在末尾加上:99来访问摄像头。视频应该会出现在浏览器窗口中，并显示摄像头控制界面（[图5-15](ch05.html#ch05fig15)）。
- en: One problem with using DHCP to allocate an address to the webcam is that the
    router may allocate a different IP address if it is restarted. To avoid this problem,
    look for the option in your router’s DHCP settings that sets the lease time and
    set this to its maximum. That way, once the IP address is allocated, it shouldn’t
    change until sometime after civilization has been reestablished.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 使用DHCP为摄像头分配地址时的一个问题是，如果路由器重启，可能会分配一个不同的IP地址。为避免此问题，请在路由器的DHCP设置中查找设置租期的选项，并将其设置为最大值。这样，一旦IP地址分配完成，它就不会改变，直到文明重建后的一段时间。
- en: '![image](graphics/f05-15.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![image](graphics/f05-15.jpg)'
- en: 'Figure 5-15: A view from the Wi-Fi camera'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图5-15：Wi-Fi摄像头视图
- en: '**USING THE WI-FI WEBCAM**'
  id: totrans-183
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**使用Wi-Fi网络摄像头**'
- en: Once everything is set up, you can view the image from the webcam by going to
    the URL for your camera in the browser. The software for most webcams will also
    allow you to set up multiple cameras and split the screen two or four ways so
    that you can monitor all the images at once. Then, you can keep tabs on your entrance,
    supply cache, any zombie traps you’ve built, and the survivors across the street
    simultaneously!
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦一切设置完成，你可以通过在浏览器中输入摄像头的URL来查看来自摄像头的图像。大多数摄像头的软件还允许你设置多个摄像头，并将屏幕分成两部分或四部分，这样你就可以同时监控所有图像。然后，你可以同时监视入口、物资储藏、你建造的僵尸陷阱和街对面的幸存者！
- en: You could also access the camera from a mobile browser on a smartphone or tablet
    computer. There may also be an app for the camera that works better than a browser.
    This would allow you to work in one area of your compound while keeping an eye
    on another area using your mobile device. The app provided with the camera I used
    includes a function to send alerts when movement is detected.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以通过智能手机或平板电脑上的移动浏览器访问摄像头。摄像头可能还会有一个应用程序，比浏览器更好用。这样，你就可以在复合区的一个区域工作，同时通过移动设备监控另一个区域。我使用的摄像头附带的应用程序包括一个功能，可以在检测到运动时发送警报。
- en: In the next chapter, you’ll learn how to control an electric door latch. After
    completing that project, you’ll be able to unlock doors remotely and get inside
    faster. You’ll also be able to detect when the door opens, just in case the undead
    begin to overrun your base.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将学习如何控制电动门闩。完成该项目后，你将能够远程解锁门并更快地进入。你还将能够检测到门是否打开，以防万一不死生物开始攻占你的基地。
