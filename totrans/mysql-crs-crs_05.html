<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><section>
<header>
<h1 class="chapter">
<span class="ChapterNumber"><span epub:type="pagebreak" title="27" id="Page_27"/><a class="XrefDestination" id="3"/><span class="XrefDestination" id="xref-503007c03-001"/>3</span><br/>
<span class="ChapterTitle"><a class="XrefDestination" id="IntroductiontoSQL"/><span class="XrefDestination" id="xref-503007c03-002"/>Introduction to SQL</span></h1>
</header>
<figure class="opener">
<img src="image_fi/book_art/chapterart.png" alt="" width="200" height="200"/>
</figure>
<p class="ChapterIntro">To select data from a MySQL database, you’ll use <em>Structured Query Language </em><em>(SQL)</em>. SQL is the standard language for querying and managing data in an RDBMS like MySQL.</p>
<p>SQL commands can be categorized into <em>Data Definition Language</em><em> (DDL)</em> statements and <em>Data Manipulation Language</em><em> (DML)</em> statements. So far, you’ve been using DDL commands like <code>create database</code>, <code>create table</code>, and <code>drop table</code> to <em>define</em> your databases and tables.</p>
<p>DML commands, on the other hand, are used to <em>manipulate</em> the data in your existing databases and tables. In this chapter, you’ll use the DML <code>select</code> command to retrieve data from a table. You’ll also learn how to specify an order for MySQL to sort your results and how to deal with null values in your table columns.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">NOTE</span></h2>
<p>	Some people pronounce SQL as “sequel” and others say “ess-cue-ell.” Whichever way you like to pronounce it, SQL is the main language used in MySQL development, so it pays to learn it well.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<h2 id="h1-503007c03-0001"><span epub:type="pagebreak" title="28" id="Page_28"/><a class="XrefDestination" id="QueryingDatafromaTable"/><span class="XrefDestination" id="xref-503007c03-003"/>Querying Data from a Table</h2>
<p class="BodyFirst">A <em>query</em> is a request for information from a database table or group of tables. To specify the information you want to retrieve from the table, use the <code>select</code> command, as shown in <a href="#listing3-1" id="listinganchor3-1">Listing 3-1</a>.</p>
<pre><code><b>select</b> continent_id,
       continent_name,
       population
from   continent;</code></pre>
<p class="CodeListingCaption"><a id="listing3-1">Listing 3-1</a>: Using <code>select</code> to display data from the <code>continent</code> table</p>
<p>Here you’re querying the <code>continent</code> table (as indicated by the <code>from</code> keyword), which contains information about each continent’s name and population. Using the <code>select</code> command, you specify that you want to return data from the <code>continent_id</code>, <code>continent_name</code>, and <code>population</code> columns. This is known as a <code>select</code> statement.</p>
<p><a href="#listing3-2" id="listinganchor3-2">Listing 3-2</a> shows the results of running the <code>select</code> statement.</p>
<pre><code>continent_id  continent_name  population
------------  --------------  ----------
      1       Asia            4641054775
      2       Africa          1340598147
      3       Europe           747636026
      4       North America    592072212
      5       South America    430759766
      6       Australia         43111704
      7       Antarctica               0</code></pre>
<p class="CodeListingCaption"><a id="listing3-2">Listing 3-2</a>: Results of running the <code>select</code> statement</p>
<p>The query returned a list of all seven continents, displaying each continent’s ID, name, and population.</p>
<p>In order to show the data from only one continent—Asia, for example—you can add a <code>where</code> clause to the end of your previous code:</p>
<pre><code>select continent_id,
       continent_name,
       population
from   continent
<b>where  continent_name = 'Asia';</b></code></pre>
<p>A <code>where</code> clause filters the results by applying conditions to the <code>select</code> statement. This query finds the only row in the table where the value of the <code>continent_name</code> column equals <code>Asia</code> and displays the following result:</p>
<pre><code>continent_id  continent_name  population
------------  --------------  ----------
      1       Asia            4641054775</code></pre>
<p><span epub:type="pagebreak" title="29" id="Page_29"/>Now change the <code>select</code> statement to select only the <code>population</code> column:</p>
<pre><code>select <b>population</b>
from   continent
where  continent_name = 'Asia';</code></pre>
<p>The query now returns one column (<code>population</code>) for one row (<code>Asia</code>):</p>
<pre><code>population
----------
4641054775</code></pre>
<p>The <code>continent_id</code> and <code>continent_name</code> values don’t appear in your result set because you didn’t select them in the SQL query.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="boxcustom1">
<h2>Try it Yourself</h2>
<p>Locate the commands in the SQL script at <a href="https://github.com/ricksilva/mysql_cc/blob/main/chapter_3.sql" class="LinkURL">https://github.com/ricksilva/mysql_cc/blob/main/chapter_3.sql</a> that create the <code>feedback</code> database and that create and load the <code>customer</code> table. Copy the SQL commands from the scripts and paste them into MySQL Workbench. Run them to create the database and the table, and to load its rows.</p> 
<p class="BoxListNumberCustom1"><b>3-1.</b>	The <code>feedback</code> database contains a table called <code>customer</code>. Select the <code>first_name</code> and <code>last_name</code> columns from the table for all customers.</p>
<p class="BoxListNumberCustom1"><b>3-2.</b>	Modify your query to select the <code>customer_id</code>, <code>first_name</code>, and <code>last_name</code> columns from the <code>customer</code> table for all customers whose first name is <code>Karen</code>. How many Karens do you have in the table?</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<h2 id="h1-503007c03-0002"><a class="XrefDestination" id="UsingtheWildcardCharacter"/><span class="XrefDestination" id="xref-503007c03-005"/>Using the Wildcard Character</h2>
<p class="BodyFirst">The asterisk wildcard character (<code>*</code>) in SQL allows you to select all of the columns in a table without having to type all of their names in your query:</p>
<pre><code><b>select *</b>
from   continent;</code></pre>
<p>This query returns all three columns from the <code>continent</code> table. The results are the same as those for <a href="#listing3-1">Listing 3-1</a>, where you individually listed the three column names.</p>
<h2 id="h1-503007c03-0003"><a class="XrefDestination" id="OrderingRows"/><span class="XrefDestination" id="xref-503007c03-006"/>Ordering Rows</h2>
<p class="BodyFirst">When you query data from your database, you’ll often want to see the results in a particular order. To do that, add an <code>order by</code> clause to your SQL query:</p>
<pre><code>select continent_id,
       continent_name,
<span epub:type="pagebreak" title="30" id="Page_30"/>       population
from   continent
<b>order by continent_name;</b></code></pre>
<p>Here you select all of the columns in the <code>continent</code> table and order the results alphabetically by the values in the <code>continent_name</code> column.</p>
<p>The results are as follows:</p>
<pre><code>continent_id  continent_name  population
------------  --------------  ----------
      2       Africa          1340598147
      7       Antarctica               0
      1       Asia            4641054775
      6       Australia         43111704
      3       Europe           747636026
      4       North America    592072212
      5       South America    430759766</code></pre>
<p>Adding <code>order by</code> <code>continent_name</code> results in an alphabetized list, regardless of the values of the <code>continent_id</code> or <code>population</code> columns. MySQL ordered the rows alphabetically because <code>continent_name</code> is defined as a column that stores alphanumeric characters.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="box">
<h2><a class="XrefDestination" id="CharacterSetsandCollations"/><span class="XrefDestination" id="xref-503007c03-007"/>Character Sets and Collations</h2>
<p class="BoxBodyFirst">Interestingly, the characters that can be stored and the order in which they get sorted may be different in your MySQL environment than in mine. This is determined by the character set and collation you’re using.</p>
<p>A <em>character set</em> defines the set of characters that can be stored. <em>Collations</em> are the rules for comparing character sets. Examples of character sets are latin1, utf8mb3, and utf8mb4. The default character set, as of this writing, is utf8mb4. It allows you to save a wide range of characters and even use emojis in your text columns.</p>
<p>The default collation is utf8mb4_0900_ai_ci. The <em>_ci</em> stands for “case insensitive.” There is also a utf8mb4_0900_ai_cs collation, where the <em>_cs</em> means “case sensitive.” If you are using the case-insensitive collation but I have switched to the case-sensitive collation, our results will be sorted differently.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>MySQL can also order columns with integer data types. You can specify whether you want your results sorted in ascending (lowest to highest) or descending (highest to lowest) order using the <code>asc</code> and <code>desc</code> keywords:</p>
<pre><code>select continent_id,
       continent_name,
       population
from   continent;
<b>order by population desc;</b></code></pre>
<p><span epub:type="pagebreak" title="31" id="Page_31"/>In this example, you have MySQL order the results by <code>population</code> and sort the values in descending order (<code>desc</code>) order.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">Note</span></h2>
<p>	If you don’t specify <code>asc</code> or <code>desc</code> in your <code>order by</code> clause for integer data types, MySQL will default to ascending.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>The results are as follows:</p>
<pre><code>continent_id  continent_name  population
------------  --------------  ----------
      1       Asia            4641054775
      2       Africa          1340598147
      3       Europe           747636026
      4       North America    592072212
      5       South America    430759766
      6       Australia         43111704
      7       Antarctica               0</code></pre>
<p>The query returns all seven rows because you didn’t filter the results with a <code>where</code> clause. Now the data is displayed in descending order based on the <code>population</code> column instead of alphabetically based on the <code>continent_name</code> column.</p>
<h2 id="h1-503007c03-0004"><a class="XrefDestination" id="FormattingSQLCode"/><span class="XrefDestination" id="xref-503007c03-008"/>Formatting SQL Code</h2>
<p class="BodyFirst">So far, the SQL you’ve seen has been in a nice, readable format:</p>
<pre><code>select continent_id,
       continent_name,
       population
from   continent;</code></pre>
<p>Notice how the column names and the table name all align vertically. It’s a good idea to write SQL statements in a neat, maintainable format like this, but MySQL will also allow you to write SQL statements in less organized ways. For example, you can write the code from <a href="#listing3-1">Listing 3-1</a> on only one line:</p>
<pre><code>select continent_id, continent_name, population from continent;</code></pre>
<p class="BodyContinued">Or you can separate the <code>select</code> and <code>from</code> statements, like so:</p>
<pre><code>select continent_id, continent_name, population
from continent;</code></pre>
<p>Both options return the same results as <a href="#listing3-1">Listing 3-1</a>, though your SQL might be a little harder for people to understand.</p>
<p>Readable code is important for the maintainability of your codebase, even though MySQL will run less readable code without issue. It might be tempting to just get the code working and then move on to the next task, but writing the code is only the first part of your job. Take the time to make your code readable, and your future self (or whoever will be maintaining the code) will thank you.</p>
<p>Let’s look at some other SQL code conventions you might see.</p>
<h3 id="h2-503007c03-0001"><span epub:type="pagebreak" title="32" id="Page_32"/><a class="XrefDestination" id="UppercaseKeywords"/><span class="XrefDestination" id="xref-503007c03-009"/>Uppercase Keywords</h3>
<p class="BodyFirst">Some developers use uppercase for MySQL keywords. For example, they might write <a href="#listing3-1">Listing 3-1</a> like this, with the words <code>select</code> and <code>from</code> in uppercase:</p>
<pre><code>SELECT continent_id,
       continent_name,
       population
FROM   continent;</code></pre>
<p>Similarly, some developers might format a <code>create table</code> statement with multiple phrases in uppercase:</p>
<pre><code>CREATE TABLE dog
(
    dog_id            int,
    dog_name          varchar(50) UNIQUE,
    owner_id          int,
    breed_id          int,
    veterinarian_id   int,
    PRIMARY KEY (dog_id),
    FOREIGN KEY (owner_id) REFERENCES owner(owner_id),
    FOREIGN KEY (breed_id) REFERENCES breed(breed_id),
    FOREIGN KEY (veterinarian_id) REFERENCES veterinarian(veterinarian_id)
);</code></pre>
<p>Here, <code>create</code> <code>table</code>, <code>unique</code>, <code>primary</code> <code>key</code>, <code>foreign</code> <code>key</code>, and <code>references</code> have all been capitalized for readability. Some MySQL developers would capitalize the data types <code>int</code> and <code>varchar</code> as well. If you find using uppercase for keywords is beneficial, feel free to do so.</p>
<p>If you are working with an existing codebase, it’s best to be consistent and follow the coding style precedent that has been set. If you work at a company that has formal style conventions, you should follow them. Otherwise, choose what works best for you. You’ll get the same results either way.</p>
<h3 id="h2-503007c03-0002"><a class="XrefDestination" id="Backticks"/><span class="XrefDestination" id="xref-503007c03-010"/>Backticks</h3>
<p class="BodyFirst">If you maintain SQL that other developers have written, you may encounter SQL statements that use backticks (<code>`</code>):</p>
<pre><code>select `continent_id`,
       `continent_name`,
       `population`
from   `continent`;</code></pre>
<p>This query selects all of the columns in the <code>continent</code> table, surrounding the column names and the table name with backticks. In this example, the statement runs just as well without the backticks.</p>
<p>Backticks allow you to get around some of MySQL’s rules for naming tables and columns. For example, you might have noticed that when column <span epub:type="pagebreak" title="33" id="Page_33"/>names consist of more than one word, I’ve used an underscore between the words instead of a space, like <code>continent_id</code>. If you wrap column names in backticks, however, you don’t need to use underscores; you can name a column <code>continent id</code> rather than <code>continent_id</code>.</p>
<p>Normally, if you were to name a table or column <code>select</code>, you’d receive an error message because <code>select</code> is a MySQL <em>reserved word</em>; that is, it has a dedicated meaning in SQL. However, if you wrap <code>select</code> in backticks, the query will run without error:</p>
<pre><code>select * from `select`;</code></pre>
<p>In this <code>select * from</code> statement, you’re selecting all columns within the <code>select</code> table.</p>
<p>Although MySQL will run code like this, I recommend avoiding backticks, as your code will be more maintainable and easier to type without them. In the future, another developer who needs to make a change to this query might be confused by a table named <code>select</code> or a table with spaces in its name. Your goal should always be to write code that is simple and well organized.</p>
<h3 id="h2-503007c03-0003"><a class="XrefDestination" id="CodeComments"/><span class="XrefDestination" id="xref-503007c03-011"/>Code Comments</h3>
<p class="BodyFirst">Comments are lines of explanatory text that you can add to your code to make it easier to understand. They can help you or other developers maintain the code in the future. Oftentimes, comments clarify complex SQL statements or point out anything about the table or data that’s out of the ordinary.</p>
<p>To add single-line comments, use two hyphens followed by a space (<code>--</code> ). This syntax tells MySQL that the rest of the line is a comment.</p>
<p>This SQL query includes a one-line comment at the top:</p>
<pre><code><b>-- This SQL statement shows the highest-populated continents at the top</b>
select continent_id,
       continent_name,
       population
from   continent
order by population desc;</code></pre>
<p>You can use the same syntax to add a comment at the end of a line of SQL:</p>
<pre><code>select continent_id,
       continent_name, <b>-- Continent names are displayed in English</b>
       population
from   continent
order by population desc;</code></pre>
<p>In this code, the comment for the <code>continent_name</code> column lets developers know that the names are displayed in English.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="box">
<h2><span epub:type="pagebreak" title="34" id="Page_34"/><a class="XrefDestination" id="WhitespaceinSingle-Linecomments"/><span class="XrefDestination" id="xref-503007c03-012"/>Whitespace in Single-Line comments</h2>
<p class="BoxBodyFirst">At first blush, it seems strange that MySQL will allow this comment:</p>
<pre><code>select 7+5; -- Adding 5 dollars to the 7 I already had</code></pre>
<p class="BoxBodyContinued">but not this one:</p>
<pre><code>select 7+5; --Adding 5 dollars to the 7 I already had</code></pre>
<p>Why does MySQL require whitespace after the <code>--</code>?</p>
<p>The answer is that a comment using the <code>--</code> syntax could be confused with the syntax for subtracting a negative number. To subtract –5 from 7 in SQL, you could use this syntax:</p>
<pre><code>select 7--5;</code></pre>
<p>If MySQL always interpreted <code>--</code> (two hyphens with no spaces) as a comment, then this line of code would return <code>7</code>, not the correct result of <code>12</code>, because everything after the 7 would get commented out.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>To add multiline comments, use <code>/*</code> at the beginning of the comment and <code>*/</code> at the end:</p>
<pre><code><b>/*</b>
<b>This query retrieves data for all the continents in the world.</b>
<b>The population of each continent is updated in this table yearly.</b>
<b>*/</b>
select <b>*</b> from continent;</code></pre>
<p>This two-line comment explains the query and says how often the table is updated.</p>
<p>The syntax for inline comments is similar:</p>
<pre><code>select 3.14 <b>/* The value of pi */</b> * 81;</code></pre>
<p>There are some special uses for inline comments. For example, if you maintain code that has been written by others, you might notice what looks like cryptic inline comments:</p>
<pre><code>select <b>/*+ no_index(employee idx1) */</b>
       employee_name
from   employee;</code></pre>
<p>The <code>/*+ no_index(employee idx1) */</code> in the first line is an <em>optimizer hint</em>, which uses the inline comment syntax with a plus sign after the <code>/*</code>.</p>
<p><span epub:type="pagebreak" title="35" id="Page_35"/>When you run a query, MySQL’s query optimizer tries to determine the fastest way to execute it. For example, if there are indexes on the <code>employee</code> table, would it be faster to use the indexes to access the data, or do the tables have so few rows that using the indexes would actually be slower?</p>
<p>The query optimizer usually does a good job of coming up with query plans, comparing them, and then executing the fastest plan. But there are times when you’ll want to give your own instructions—hints—about the most efficient way to execute the query.</p>
<p>The hint in the preceding example tells the optimizer not to use the <code>idx1</code> index on the <code>employee</code> table.</p>
<p>Query optimization is a vast topic and we’ve barely scratched the surface, but if you encounter the <code>/*+</code> . . . <code>*/</code> syntax, just know that it allows you to provide hints to MySQL.</p>
<p>As you can see, a well-placed, descriptive comment will save time and aggravation. A quick explanation about why you used a particular approach can spare another developer from having to research the same issue, or jog your own memory if you’ll be the one maintaining the code. However, avoid the temptation to add comments that state the obvious; if a comment won’t make the SQL more understandable, you shouldn’t add it. Also, it’s important to update comments as you update your code. Comments that aren’t up to date and are no longer relevant don’t serve a purpose, and might confuse other developers or your future self.</p>
<h2 id="h1-503007c03-0005"><a class="XrefDestination" id="NullValues"/><span class="XrefDestination" id="xref-503007c03-013"/>Null Values</h2>
<p class="BodyFirst">As discussed in <a class="xref" href="c02.xhtml">Chapter 2</a>, <code>null</code> represents a missing or unknown value. MySQL has special syntax, including <code>is null</code> and <code>is not null</code>, to help handle null values in your data.</p>
<p>Consider a table called <code>unemployed</code> that has two columns: <code>region_id</code> and <code>unemployed</code>. Each row represents a region and tells you how many people are unemployed in that region. Look at the full table using <code>select * from</code>, like so:</p>
<pre><code>select *
from   unemployed;</code></pre>
<p>The results are as follows:</p>
<pre><code>region_id   unemployed
---------   ----------
    1          2218457
    2           137455
    3             null</code></pre>
<p>Regions 1 and 2 have reported their number of unemployed people, but region 3 hasn’t done so yet, so the <code>unemployed</code> column for region 3 is set to the <code>null</code> value. You wouldn’t want to use <code>0</code> here, because that would mean there are no unemployed people in region 3.</p>
<p><span epub:type="pagebreak" title="36" id="Page_36"/>To show only the rows for regions that have an <code>unemployed</code> value of <code>null</code>, use the <code>where</code> clause with <code>is null</code>:</p>
<pre><code>select *
from   unemployed
<b>where  unemployed is null;</b></code></pre>
<p>The result is:</p>
<pre><code>region   unemployed
------   ----------
   3           null</code></pre>
<p>On the other hand, if you wanted to <em>exclude</em> rows that have an <code>unemployed</code> value of <code>null</code> in order to see only the data that has already been reported, replace <code>is null</code> with <code>is not null</code> in the <code>where</code> clause, like so:</p>
<pre><code>select *
from   unemployed
where  unemployed <b>is not null;</b></code></pre>
<p>The results are as follows:</p>
<pre><code>region   unemployed
------   ----------
   1        2218457
   2         137455</code></pre>
<p>Using this syntax with null values can help you filter your table data so that MySQL returns only the most meaningful results.</p>
<h2 id="h1-503007c03-0006"><a class="XrefDestination" id="Summary"/><span class="XrefDestination" id="xref-503007c03-014"/>Summary</h2>
<p class="BodyFirst">In this chapter, you learned how to use the <code>select</code> statement and the wildcard character to retrieve data from a table, and you saw that MySQL can return results in an order you specify. You also looked at ways to format your code for readability and clarity, including adding comments to your SQL statements to make maintaining the code easier. Finally, you saw how you might handle null values in your data.</p>
<p><a class="xref" href="c04.xhtml">Chapter 4</a> is all about MySQL data types. So far, the tables you’ve created have mainly used <code>int</code> to accept integer data or <code>varchar</code> to accept character data. Next, you’ll learn more about other MySQL data types for numeric and character data, as well as data types for dates and very large values.</p>
</section>
</div>
</div>
</body></html>