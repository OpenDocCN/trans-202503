<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch27"><span epub:type="pagebreak" id="page_519"/><span class="big">27</span><br/>MAGNETIC FIELD</h2>&#13;
<div class="image1"><img src="Images/common.jpg" alt="Image" width="189" height="189"/></div>&#13;
<p class="noindent">Magnets produce magnetic fields, but so do electric currents. Since magnets are made of materials that have circular currents at a microscopic level, physicists consider electric current to be the fundamental source of magnetic fields. In this chapter, we’ll explore how magnetic fields are produced by currents. We’ll write functions to find the magnetic field for all the current distributions we looked at in the last chapter, and we’ll make pictures of the magnetic fields produced by a wire loop, an ideal magnetic dipole, a solenoid, and a toroid. But first, let’s begin with a simple example of magnetism.</p>&#13;
<h3 class="h3" id="ch27lev1">A Simple Magnetic Effect</h3>&#13;
<p class="noindent">Two parallel wires carrying current in the same direction will attract each other. In the modern view of magnetism, one current does not directly apply a force to another current. Instead, one current creates a magnetic field, <span epub:type="pagebreak" id="page_520"/>and that magnetic field applies a force to the second current, as shown in <a href="ch27.xhtml#ch27fig1">Figure 27-1</a>.</p>&#13;
<div class="imagel" id="ch27fig1"><img src="Images/520fig01.jpg" alt="Image" width="570" height="97"/></div>&#13;
<p class="figcap"><em>Figure 27-1: Conceptual diagram of the role of the magnetic field when two currents are present</em></p>&#13;
<p class="indent">The magnetic field, like the electric field, is a vector field of the kind we talked about in <a href="ch22.xhtml">Chapter 22</a>. The magnetic field associates a vector <strong>B</strong>(<strong>r</strong>) with each point <strong>r</strong> in space; that vector helps determine the force on a particle if there is a particle at point <strong>r</strong> in space. <a href="ch27.xhtml#ch27fig1">Figure 27-1</a> shows for the magnetic field what <a href="ch25.xhtml#ch25fig1">Figure 25-1</a> showed for the electric field. As the electric field is a mediator of electrical forces between charges, the magnetic field is a mediator of magnetic forces between currents.</p>&#13;
<p class="indent">Introducing the magnetic field breaks the analysis of magnetic situations into two parts. The first part is current creating the magnetic field, which we’ll discuss in this chapter. The second part is the force the magnetic field applies to (a second) current, which we’ll discuss in <a href="ch28.xhtml">Chapter 28</a>.</p>&#13;
<p class="indent">Let’s now turn to some introductory code.</p>&#13;
<h3 class="h3" id="ch27lev2">Introductory Code</h3>&#13;
<p class="noindent"><a href="ch27.xhtml#ch27list1">Listing 27-1</a> shows the first lines of code in the <code>MagneticField</code> module we’ll write in this chapter.</p>&#13;
<pre id="ch27list1">{-# OPTIONS -Wall #-}&#13;
&#13;
module MagneticField where&#13;
&#13;
import SimpleVec ( Vec(..), R&#13;
                 , (^-^), (*^), (^/), (&lt;.&gt;), (&gt;&lt;)&#13;
                 , magnitude, kHat, zComp )&#13;
import CoordinateSystems&#13;
    ( VectorField&#13;
    , rVF, displacement, addVectorFields, cart, vfGrad )&#13;
import Geometry ( Curve(..), Surface(..), Volume(..) )&#13;
import ElectricField&#13;
    ( curveSample, surfaceSample, volumeSample&#13;
    , vectorSurfaceIntegral, vectorVolumeIntegral, mu0 )&#13;
import Current&#13;
    ( Current, CurrentDistribution(..)&#13;
    , wireSolenoid, wireToroid, crossedLineIntegral, circularCurrentLoop )</pre>&#13;
<p class="listing"><em>Listing 27-1: Opening lines of code for the <code>MagneticField</code> module</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_521"/>We use types and functions from the <code>SimpleVec</code> module of <a href="ch10.xhtml">Chapter 10</a>, the <code>CoordinateSystems</code> module of <a href="ch22.xhtml">Chapter 22</a>, the <code>Geometry</code> module of <a href="ch23.xhtml">Chapter 23</a>, the <code>ElectricField</code> module of <a href="ch25.xhtml">Chapter 25</a>, and the <code>Current</code> module of <a href="ch26.xhtml">Chapter 26</a>.</p>&#13;
<h3 class="h3" id="ch27lev3">Current Creates Magnetic Field</h3>&#13;
<p class="noindent">The first part of the modern two-part view of magnetism is that current creates magnetic field. We’ll start with the magnetic field created by a line current, the simplest current distribution, and then move to more complex current distributions.</p>&#13;
<h4 class="h4" id="ch27lev4">Magnetic Field Created by a Line Current</h4>&#13;
<p class="noindent">Unlike the situation with charge, in which a point charge serves as the simplest form of charge, there is no such thing as a point current. Current, by definition, must flow, and the simplest way it can flow is along a curve or wire. We’ll assume that charge does not pile up anywhere along our wires, a very reasonable assumption since you must go to some trouble to get charge to pile up. Consequently, the current at any point in a wire is the same.</p>&#13;
<p class="indent">The <em>Biot-Savart law</em> provides a way to calculate the magnetic field produced by a current-carrying wire. The wire can be of any shape, so this is a perfect opportunity to use the <code>Curve</code> data type we defined in <a href="ch23.xhtml">Chapter 23</a>.</p>&#13;
<p class="indent">Although there is no such thing as a point current, the Biot-Savart law nevertheless claims that the magnetic field of a current-carrying wire can be found as the superposition (that is, sum) of small magnetic field contributions from small segments of the wire. Each small current segment could not exist on its own since the current needs to keep flowing, but we can still compute the magnetic field contribution from a small current segment.</p>&#13;
<p class="indent">Consider a small segment of wire carrying current <em>I</em>. The segment is characterized by a displacement vector <em>d</em><strong>l</strong>′, whose length <em>dl</em>′ is short enough that the segment can be considered straight, and whose direction is tangent to the wire. The contribution <strong>dB(r)</strong> to the magnetic field at location <strong>r</strong> by the small current segment is</p>&#13;
<div class="imagec"><img src="Images/521equ01.jpg" alt="Image" width="465" height="59"/></div>&#13;
<p class="indent">This says the contribution is proportional to the current <em>I</em>, proportional to the segment length <em>dl</em>′, inversely proportional to the square of the displacement <strong>r</strong> – <strong>r</strong><sup>′</sup> from the source point <strong>r</strong>′ to the field point <strong>r</strong>, and points in a direction perpendicular to both the current and the displacement.</p>&#13;
<p class="indent">We compute the magnetic field produced by the entire wire by adding together the contributions of all the small segments.</p>&#13;
<div class="imagec"><img src="Images/521equ02.jpg" alt="Image" width="477" height="59"/></div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_522"/>This integral is the crossed line integral we defined in <a href="ch26.xhtml">Chapter 26</a>. The minus sign enters because the cross product is anti-commutative.</p>&#13;
<p class="indent">The integrand of the crossed line integral is the function that maps a source point <strong>r′</strong> to the vector</p>&#13;
<div class="imagec"><img src="Images/522equ01.jpg" alt="Image" width="76" height="59"/></div>&#13;
<p class="indent">Note that <strong>r′</strong>, the field point where we wish to know the magnetic field, is simply a parameter in this integrand; it is <em>not</em> the variable of integration. We should think of <strong>r′</strong> as the variable of integration since it is the locations <strong>r′</strong> of the curve at which we must evaluate the integrand and sum the results.</p>&#13;
<p class="indent">We’ll give the integrand the local name <code>integrand</code> in the <code>bFieldFromLine</code> <code>Current</code> function we’ll write next. The type signature of <code>bFieldFromLineCurrent</code> makes clear, in a computer-checked way, the two inputs required to find the magnetic field: the <code>Current</code> and the <code>Curve</code> along which the current flows. For a reader of Haskell, the function <code>bFieldFromLineCurrent</code> is a clearer description of what is going on than Equation 27.2 since the latter does not make it terribly clear that the magnetic field depends only on the curve and the current.</p>&#13;
<pre>bFieldFromLineCurrent&#13;
    :: Current      -- current (in Amps)&#13;
    -&gt; Curve&#13;
    -&gt; VectorField  -- magnetic field (in Tesla)&#13;
bFieldFromLineCurrent i c r&#13;
    = let coeff = -mu0 * i / (4 * pi)  -- SI units&#13;
          integrand r' = d ^/ magnitude d ** 3&#13;
              where d = displacement r' r&#13;
      in coeff *^ crossedLineIntegral (curveSample 1000) integrand c</pre>&#13;
<p class="indent">We define a local constant <code>coeff</code> to hold the numerical value of – <em>μ</em><sub>0</sub> <em>I</em>/4<em>π</em> in SI units, and we define a local function <code>integrand</code> to hold the integrand. We want to define a local variable <code>d</code> for the displacement from <code>r'</code> to <code>r</code>, but because <code>r'</code> exists locally to the function <code>integrand</code>, the definition for <code>d</code> must occur within the definition for <code>integrand</code> and cannot be placed parallel to the definitions of <code>coeff</code> and <code>integrand</code>.</p>&#13;
<p class="indent">In <a href="ch26.xhtml">Chapter 26</a>, we wrote a type for current distribution. Over the course of the present chapter, we will write functions to calculate the magnetic field produced by each sort of current distribution. This allows us to encapsulate the idea that current creates magnetic field in the following function, which produces a magnetic field given any current distribution:</p>&#13;
<pre>bField :: CurrentDistribution -&gt; VectorField&#13;
bField (LineCurrent    i  c) = bFieldFromLineCurrent    i  c&#13;
bField (SurfaceCurrent kC s) = bFieldFromSurfaceCurrent kC s&#13;
bField (VolumeCurrent  j  v) = bFieldFromVolumeCurrent  j  v&#13;
bField (MultipleCurrents cds) = addVectorFields $ map bField cds</pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_523"/>The function <code>bField</code> uses pattern matching on the input to treat each sort of current distribution separately. For a line current, it uses the function <code>bFieldFromLineCurrent</code> we wrote earlier. For surface and volume currents, it uses functions we’ll write later in this chapter. For a combination distribution with the constructor <code>MultipleCurrents</code>, it uses the principle of superposition to find the magnetic field by summing the magnetic fields each individual current produced. We use the function <code>addVectorFields</code> from <a href="ch22.xhtml">Chapter 22</a> to combine the magnetic fields of the component distributions.</p>&#13;
<h5 class="h5" id="ch27lev5">Magnetic Field of a Circular Current Loop</h5>&#13;
<p class="noindent">One of the simplest and most natural ways to produce a magnetic field is with a circular loop of current. A circular loop of current is also a nice model of a magnetic dipole, as we discussed in <a href="ch26.xhtml">Chapter 26</a>. Surprisingly, there is no analytical solution for the magnetic field produced by a circular current loop. However, we can get a good approximate solution using the numerical integration embedded in our crossed line integral.</p>&#13;
<p class="indent">Consider a circular loop in the xy-plane, centered at the origin, with radius 0.25 m. This loop carries a current of 10 A in a counterclockwise direction when viewed from the positive z-axis. We can use the function <code>circularCurrentLoop</code> from <a href="ch26.xhtml">Chapter 26</a> to make this current distribution, and we can use the function <code>bField</code>, which uses <code>bFieldFromLineCurrent</code> we wrote earlier, to find the magnetic field produced by this circular loop.</p>&#13;
<pre>circleB :: VectorField  -- magnetic field&#13;
circleB = bField $ circularCurrentLoop 0.25 10</pre>&#13;
<p class="indent">The expression <code>circularCurrentLoop 0.25 10</code> has type <code>CurrentDistribution</code>; we could have given it a name, either at the top level, as we do for <code>circleB</code>, or using a <code>let</code> or <code>where</code> construction. Deciding what to name something is part of the creative process of writing in a functional language. Would it help you or a reader of the code to see a good name for something, or would the name just get in the way, diverting our attention from more important ideas? This is a decision you get to make over and over again. In this case, I thought the current distribution was well-enough named by the function <code>circularCurrentLoop</code> and its parameters that another name was unnecessary.</p>&#13;
<p class="indent">The left side of <a href="ch27.xhtml#ch27fig2">Figure 27-2</a> shows the magnetic field in the yz-plane for this current loop. The x-direction comes out of the page in this figure, so the loop in the xy-plane appears as a horizontal line in the center of the picture where the field strength is largest. The magnetic field points through the current loop and back around.</p>&#13;
<p class="indent">The right side of <a href="ch27.xhtml#ch27fig2">Figure 27-2</a> shows the magnetic field of an ideal dipole, which we’ll explain next.</p>&#13;
<div class="imagel" id="ch27fig2"><img src="Images/524fig01.jpg" alt="Image" width="641" height="312"/></div>&#13;
<p class="figcap"><em>Figure 27-2: Magnetic field produced by a current loop (left) and an ideal magnetic dipole (right). The left image is produced by <code>bFieldPicLoop</code>; the right image is produced by <code>bFieldPicIdealDipole</code>. The magnetic field around the edges of the figures is very similar, indicating that, away from the source, a current loop looks like a magnetic dipole.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_524"/>Here is the code that produced the left picture:</p>&#13;
<pre>bFieldPicLoop :: IO ()&#13;
bFieldPicLoop&#13;
    = vfGrad (**0.2) (\(y,z) -&gt; cart 0 y z) (\v -&gt; (yComp v, zComp v))&#13;
      "bFieldPicLoop.png" 20 circleB</pre>&#13;
<p class="indent">We use <code>vfGrad</code> from <a href="ch22.xhtml">Chapter 22</a> to make a gradient vector field picture. The expression <code>(**0.2)</code> is a Haskell section denoting the function <code>\x -&gt; x**0.2</code>, a scaling function we use because the magnitude of the field decreases rapidly as we move away from the loop. The other inputs to <code>vfGrad</code> declare that we want to look at the field in the yz-plane, assign a name to the output file, specify the number of arrows in each direction, and provide the name of the vector field to be pictured.</p>&#13;
<p class="indent">As mentioned earlier, a current loop is an example of a magnetic dipole. In the next section, we’ll take a closer look at magnetic dipoles.</p>&#13;
<h5 class="h5" id="ch27lev6">Ideal Magnetic Dipole</h5>&#13;
<p class="noindent">An <em>ideal magnetic dipole</em> is a source of magnetic field formed by letting the radius <em>R</em> of the loop approach 0 while the current in the loop gets larger so that the magnetic dipole moment <em>IπR</em><sup>2</sup> stays constant. Let’s look at the magnetic field produced by an ideal magnetic dipole.</p>&#13;
<p class="indent">The magnetic field produced by an ideal magnetic dipole at the origin is</p>&#13;
<div class="imagec"><img src="Images/524equ01.jpg" alt="Image" width="465" height="44"/></div>&#13;
<p class="noindent">where <strong>m</strong> is magnetic dipole moment. Here’s the same equation translated into Haskell:</p>&#13;
<pre>bFieldIdealDipole :: Vec          -- magnetic dipole moment&#13;
                  -&gt; VectorField  -- magnetic field&#13;
<span epub:type="pagebreak" id="page_525"/>bFieldIdealDipole m r&#13;
    = let coeff = mu0 / (4 * pi)    -- SI units&#13;
          rMag = magnitude (rVF r)&#13;
          rUnit = rVF r ^/ rMag&#13;
      in coeff *^ (1 / rMag**3) *^ (3 *^ (m &lt;.&gt; rUnit) *^ rUnit ^-^ m)</pre>&#13;
<p class="indent">With the exception of the coefficient in front, Equation 27.3 is the same as Equation 25.3 for the electric field produced by an ideal electric dipole. This similarity is reflected in the functions <code>bFieldIdealDipole</code> and <code>eFieldIdeal</code> <code>Dipole</code>, which differ only in local variable names and the coefficient in front.</p>&#13;
<p class="indent">The right side of <a href="ch27.xhtml#ch27fig2">Figure 27-2</a> shows the magnetic field produced by an ideal magnetic dipole. The magnitude of the magnetic dipole moment <strong>m</strong> is not so important in this picture because the darkest arrows are those where the magnetic field is largest in magnitude, regardless of what that magnitude is. Equation 27.3 shows that the magnetic field increases linearly with the dipole moment, so the picture would be the same for any dipole moment in the z-direction.</p>&#13;
<p class="indent">Comparing the two pictures in <a href="ch27.xhtml#ch27fig2">Figure 27-2</a>, we see that the magnetic field differs in the centers of the pictures, close to the sources of the field. The fields around the edges of the pictures, farther from the sources, are very similar in the two pictures. The similarity of the fields a bit farther from the sources entitles both sources to be called magnetic dipoles.</p>&#13;
<p class="indent">Here’s the code to produce the picture on the right in <a href="ch27.xhtml#ch27fig2">Figure 27-2</a>:</p>&#13;
<pre>bFieldPicIdealDipole :: IO ()&#13;
bFieldPicIdealDipole&#13;
    = vfGrad (**0.2) (\(y,z) -&gt; cart 0 y z) (\v -&gt; (yComp v, zComp v))&#13;
      "bFieldPicIdealDipole.png" 20 (bFieldIdealDipole kHat)</pre>&#13;
<p class="indent">The only differences in this program compared to <code>bFieldPicLoop</code> for the circular loop are the filenames and the magnetic fields. The magnetic field here is <code>bFieldIdealDipole kHat</code>, where we use the unit vector <code>kHat</code> for the magnetic dipole moment because its magnitude doesn’t change the picture.</p>&#13;
<p class="indent">We’ve seen one example of the magnetic field produced by a line current, the circular loop, and compared it to that of an ideal magnetic dipole. Let’s look at a second example of magnetic field from a line current, a solenoid.</p>&#13;
<h5 class="h5" id="ch27lev7">Wire Solenoid</h5>&#13;
<p class="noindent">We defined the wire solenoid as a current distribution in the last chapter. Now let’s calculate its magnetic field. We’ll look at two wire solenoids. Each has a radius of 1 cm, a length of 10 cm, and a current of 10 A. The first solenoid has 100 turns per meter, for a total of 10 turns. The second solenoid has 1,000 turns per meter, for a total of 100 turns.</p>&#13;
<p class="indent">To start, let’s look at the magnetic field at the center of the two solenoids.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">:l MagneticField</span>&#13;
[ 1 of 14] Compiling Newton2          ( Newton2.hs, interpreted )&#13;
[ 2 of 14] Compiling Mechanics1D      ( Mechanics1D.hs, interpreted )<span epub:type="pagebreak" id="page_526"/>&#13;
[ 3 of 14] Compiling SimpleVec        ( SimpleVec.hs, interpreted )&#13;
[ 4 of 14] Compiling Mechanics3D      ( Mechanics3D.hs, interpreted )&#13;
[ 5 of 14] Compiling MultipleObjects  ( MultipleObjects.hs, interpreted )&#13;
[ 6 of 14] Compiling MOExamples       ( MOExamples.hs, interpreted )&#13;
[ 7 of 14] Compiling Electricity      ( Electricity.hs, interpreted )&#13;
[ 8 of 14] Compiling CoordinateSystems ( CoordinateSystems.hs, interpreted )&#13;
[ 9 of 14] Compiling Geometry         ( Geometry.hs, interpreted )&#13;
[10 of 14] Compiling Integrals        ( Integrals.lhs, interpreted )&#13;
[11 of 14] Compiling Charge           ( Charge.hs, interpreted )&#13;
[12 of 14] Compiling ElectricField    ( ElectricField.hs, interpreted )&#13;
[13 of 14] Compiling Current          ( Current.hs, interpreted )&#13;
[14 of 14] Compiling MagneticField    ( MagneticField.hs, interpreted )&#13;
Ok, 14 modules loaded.&#13;
*MagneticField&gt; <span class="codestrong1">bField (wireSolenoid 0.01 0.1 100 10) (cart 0 0 0)</span>&#13;
vec 1.3405110355080298e-18 (-9.787828127867364e-7) 1.2326629789010703e-3&#13;
*MagneticField&gt; <span class="codestrong1">bField (wireSolenoid 0.01 0.1 1000 10) (cart 0 0 0)</span>&#13;
vec 9.429923508719186e-17 7.58448310225564e-6 1.2767867386980748e-2</pre>&#13;
<p class="indent">We see that in both cases, the magnetic field is primarily in the z-direction, which is along the central axis, as expected. The x-components of the magnetic field are essentially 0. The y-components are small but not 0. Because the wire is in the shape of a helix, there is a small transverse component of the magnetic field. For our particular helix, this small transverse component shows up in the y-direction. Longer solenoids have smaller transverse components.</p>&#13;
<p class="indent">For comparison, an ideal solenoid has radius <em>R</em>, infinite length, <em>n</em> turns per unit length, and carries current <em>I</em>. Physicists like the ideal solenoid because, as long as <em>n</em> is reasonably large so that current is flowing at essentially all places on the surface of the cylinder, there is a simple expression for the magnetic field it produces. The magnetic field outside the ideal solenoid (at field points farther than <em>R</em> from the central axis) is 0. The magnetic field inside the ideal solenoid has a uniform value of <em>μ</em><sub>0</sub><em>nI</em> and points along the central axis of the solenoid. The magnetic field produced is independent of the radius.</p>&#13;
<p class="indent">An ideal solenoid with the same number of turns per unit length and same current as our first solenoid would have <em>n</em> = 100/m and <em>I</em> = 10 A, so its magnetic field at the center (and at any other point inside) is</p>&#13;
<p class="centere"><em>μ</em><sub>0</sub><em>nI</em> = (4<em>π</em> × 10<sup>−7</sup> N/A<sup>2</sup>)(100/m)(10 A) = 1.26 × 10<sup>−3</sup> T</p>&#13;
<p class="indent">The z-component of our first solenoid is pretty close this value, even though our first solenoid is non-ideal in two ways: its length is not infinite and its winding has a spacing of one turn per centimeter (that is, not terribly close together).</p>&#13;
<p class="indent">An ideal solenoid with the same parameters as our second solenoid would have the same current but with 10 times the winding density <em>n</em>, so its magnetic field would be 10 times what we just calculated. Our second solenoid also has a magnetic field that is pretty close to the value for an ideal solenoid.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_527"/><a href="ch27.xhtml#ch27fig3">Figure 27-3</a> shows the magnetic fields produced by our two solenoids.</p>&#13;
<div class="imagel" id="ch27fig3"><img src="Images/527fig01.jpg" alt="Image" width="641" height="313"/></div>&#13;
<p class="figcap"><em>Figure 27-3: Magnetic fields produced by two solenoids. Both solenoids have a 1-cm radius, a 10-cm length, and a 10-A current. The solenoid on the left has 100 turns per meter, for a total of 10 turns. The solenoid on the right has 1,000 turns per meter, for a total of 100 turns. The pictures focus on a 4-cm × 4-cm region at the center of the solenoid. The left image is produced by <code>bFieldPicSolenoid10</code>; the right image is produced by <code>bFieldPicSolenoid100</code>.</em></p>&#13;
<p class="indent">The pictures in <a href="ch27.xhtml#ch27fig3">Figure 27-3</a> show the magnetic field in the yz-plane. The magnetic field produced by the first solenoid is shown on the left. The picture is a 4-cm × 4-cm area in the yz-plane at the center of the solenoid. Since this solenoid has one turn per centimeter, we see four turns of the solenoid. The places where the wire cuts through the yz-plane, where the magnetic field circles around the wire, are noticeable. The magnetic field is highest near the wires. The magnetic field inside the solenoid is clearly larger than that outside the solenoid, and in the opposite direction.</p>&#13;
<p class="indent">The magnetic field produced by the second solenoid is shown on the right. The picture is also a 4-cm × 4-cm area in the yz-plane at the center of the solenoid. This solenoid has 10 turns per centimeter, so 40 turns over the height of the picture. This is too many for us to see the individual wires. As with the first solenoid, the magnetic field is highest near the wires, larger on the inside than the outside, and has the opposite direction on the outside compared to the inside.</p>&#13;
<p class="indent">Here’s the code that made the images in <a href="ch27.xhtml#ch27fig3">Figure 27-3</a>. The program <code>bFieldPicSolenoid10</code>, named for 10 total turns, creates the picture on the left of the figure, while <code>bFieldPicSolenoid100</code>, named for 100 total turns, creates the picture on the right.</p>&#13;
<pre>bFieldPicSolenoid10 :: IO ()&#13;
bFieldPicSolenoid10 = vfGrad (**0.2) (\(y,z) -&gt; cart 0 (0.02*y) (0.02*z))&#13;
                     (\v -&gt; (yComp v, zComp v)) "bFieldPicSolenoid10.png" 20&#13;
                     (bField $ wireSolenoid 0.01 0.1 100 10)&#13;
&#13;
bFieldPicSolenoid100 :: IO ()&#13;
bFieldPicSolenoid100 = vfGrad (**0.2) (\(y,z) -&gt; cart 0 (0.02*y) (0.02*z))&#13;
                     (\v -&gt; (yComp v, zComp v)) "bFieldPicSolenoid100.png" 20&#13;
                     (bField $ wireSolenoid 0.01 0.1 1000 10)</pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_528"/>We get pictures that are 4 cm wide by 4 cm high by mapping the visible square corners at (–1, –1) and (1,1) to Cartesian coordinates (0, –0.02, –0.02) and (0, 0.02, 0.02) with the function <code>\(y,z) -&gt; cart 0 (0.02*y) (0.02*z)</code>.</p>&#13;
<h5 class="h5" id="ch27lev8">Wire Toroid</h5>&#13;
<p class="noindent">We defined the wire toroid as a current distribution in the last chapter. Now let’s calculate its magnetic field. We’ll look at a wire toroid with a small radius of 0.3 m, a big radius of 1 m, 50 turns of wire, and 10 A of current. This current distribution has the expression <code>wireToroid 0.3 1 50 10</code>.</p>&#13;
<p class="indent">The program <code>bFieldWireToroid</code> gives the magnetic field of this wire toroid.</p>&#13;
<pre>bFieldWireToroid :: VectorField&#13;
bFieldWireToroid = bField (wireToroid 0.3 1 50 10)</pre>&#13;
<p class="indent"><a href="ch27.xhtml#ch27fig4">Figure 27-4</a> shows the magnetic field produced by our toroid.</p>&#13;
<div class="imagel" id="ch27fig4"><img src="Images/528fig01.jpg" alt="Image" width="463" height="463"/></div>&#13;
<p class="figcap"><em>Figure 27-4: Magnetic field <code>bFieldWireToroid</code> produced by a toroidal coil of wire. The image is produced by <code>bFieldPicWireToroid</code>.</em></p>&#13;
<p class="indent">The picture in <a href="ch27.xhtml#ch27fig4">Figure 27-4</a> shows the magnetic field in the xy-plane. The picture is a 1.5-m × 1.5-m area in the xy-plane at the center of the toroid. The picture shows how the magnetic field is confined inside the torus.</p>&#13;
<p class="indent">Here is the code that produced the image:</p>&#13;
<pre>bFieldPicWireToroid :: IO ()&#13;
bFieldPicWireToroid&#13;
    = vfGrad (**0.2) (\(x,y) -&gt; cart (1.5*x) (1.5*y) 0)&#13;
      (\v -&gt; (xComp v, yComp v)) "bFieldPicWireToroid.png" 20 bFieldWireToroid</pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_529"/>The wire loop, wire solenoid, and wire toroid are examples of line currents. Let’s move up a dimension and look at how to find the magnetic field produced by a surface current.</p>&#13;
<h4 class="h4" id="ch27lev9">Magnetic Field Created by a Surface Current</h4>&#13;
<p class="noindent">Current flowing across a surface produces a magnetic field. To calculate this magnetic field, we must supply two pieces of information: the <code>Surface</code> across which the current flows and the surface current density <strong>K</strong>, represented as a <code>VectorField</code>.</p>&#13;
<p class="indent">Here’s the version of the Biot-Savart law that gives the magnetic field produced by a surface current:</p>&#13;
<div class="imagec"><img src="Images/529equ01.jpg" alt="Image" width="492" height="59"/></div>&#13;
<p class="indent">This is a vector surface integral of the same type we dealt with in <a href="ch25.xhtml">Chapter 25</a>. The integrand of the vector surface integral is the function that maps a source point <strong>r′</strong> to the vector</p>&#13;
<div class="imagec"><img src="Images/529equ02.jpg" alt="Image" width="147" height="59"/></div>&#13;
<p class="indent">Note that <strong>r</strong>, the field point where we wish to know the magnetic field, is simply a parameter in this integrand; it is <em>not</em> the variable of integration. We should think of <strong>r′</strong> as the variable of integration since it is the locations <strong>r′</strong> that lie on the surface at which we must evaluate the integrand and sum the results. In the <code>bFieldFromSurfaceCurrent</code> function we’ll write next, we give the integrand the local name <code>integrand</code>. The type signature of <code>bFieldFromSurfaceCurrent</code> makes clear, in a computer-checked way, the two inputs that must be provided and the return type of a vector field. For a reader of Haskell, the function <code>bFieldFromSurfaceCurrent</code> is a clearer description of what is going on than Equation 27.4.</p>&#13;
<pre>bFieldFromSurfaceCurrent&#13;
    :: VectorField  -- surface current density&#13;
    -&gt; Surface      -- surface across which current flows&#13;
    -&gt; VectorField  -- magnetic field (in T)&#13;
bFieldFromSurfaceCurrent kCurrent s r&#13;
    = let coeff = mu0 / (4 * pi)  -- SI units&#13;
          integrand r' = (kCurrent r' &gt;&lt; d) ^/ magnitude d ** 3&#13;
              where d = displacement r' r&#13;
      in coeff *^ vectorSurfaceIntegral (surfaceSample 200) integrand s</pre>&#13;
<p class="indent">We define a local constant <code>coeff</code> to hold the numerical value of <em>μ</em><sub>0</sub>/4<em>π</em> in SI units, and we define a local function <code>integrand</code> to hold the integrand. As before, we want to define a local variable <code>d</code> for the displacement from <code>r'</code> to <code>r</code>, but because <code>r'</code> exists locally to the function <code>integrand</code>, the definition for <code>d</code> must occur within the definition for <code>integrand</code> and cannot be placed parallel to the definitions of <code>coeff</code> and <code>integrand</code>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_530"/>As with <code>bFieldFromLineCurrent</code>, this function is used by the function <code>bField</code>, which computes the magnetic field due to any current distribution. The final function used by <code>bField</code> finds the magnetic field due to a volume current, and we turn to that next.</p>&#13;
<h4 class="h4" id="ch27lev10">Magnetic Field Created by a Volume Current</h4>&#13;
<p class="noindent">Current flowing though a volume produces a magnetic field. To calculate this magnetic field, we must supply two pieces of information: the <code>Volume</code> through which the current flows and the volume current density <strong>J</strong>, represented as a <code>VectorField</code>.</p>&#13;
<p class="indent">Here’s the version of the Biot-Savart law that gives the magnetic field produced by a volume current:</p>&#13;
<div class="imagec"><img src="Images/530equ01.jpg" alt="Image" width="489" height="59"/></div>&#13;
<p class="indent">This is a vector volume integral of the same type we dealt with in <a href="ch25.xhtml">Chapter 25</a>. The integrand of the vector volume integral is the function that maps a source point <strong>r′</strong> to the vector</p>&#13;
<div class="imagec"><img src="Images/530equ02.jpg" alt="Image" width="143" height="59"/></div>&#13;
<p class="indent">The function <code>bFieldFromVolumeCurrent</code> calculates the magnetic field produced by a volume current density.</p>&#13;
<pre>bFieldFromVolumeCurrent&#13;
    :: VectorField  -- volume current density&#13;
    -&gt; Volume       -- volume throughout which current flows&#13;
    -&gt; VectorField  -- magnetic field (in T)&#13;
bFieldFromVolumeCurrent j vol r&#13;
    = let coeff = mu0 / (4 * pi)  -- SI units&#13;
          integrand r' = (j r' &gt;&lt; d) ^/ magnitude d ** 3&#13;
              where d = displacement r' r&#13;
      in coeff *^ vectorVolumeIntegral (volumeSample 50) integrand vol</pre>&#13;
<p class="indent">The only difference between this function and <code>bFieldFromSurfaceCurrent</code> is that this function uses <code>vectorVolumeIntegral</code> to perform a volume integral rather than a surface integral. As with the functions <code>bFieldFromLineCurrent</code> and <code>bFieldFromSurfaceCurrent</code>, this function is used by the function <code>bField</code>.</p>&#13;
<h3 class="h3" id="ch27lev11">Summary</h3>&#13;
<p class="noindent">This chapter showed how to calculate the magnetic field produced by a current distribution. We wrote functions to find the magnetic field produced by a line current, a surface current, and a volume current. We wrote a function</p>&#13;
<pre>bField :: CurrentDistribution -&gt; VectorField</pre>&#13;
<p class="noindent"><span epub:type="pagebreak" id="page_531"/>that calculates the magnetic field of any current distribution by combining the functions we wrote for each current distribution. We looked at the magnetic fields produced by a wire loop, an ideal magnetic dipole, a wire solenoid, and a wire toroid. Over the last four chapters, we have focused on the part of electromagnetic theory in which charge (and current, which is moving charge) produces fields. In the next chapter, we’ll turn to the other side of electromagnetic theory in which fields apply force to charge.</p>&#13;
<h3 class="h3" id="ch27lev12">Exercises</h3>&#13;
<p class="noindentts"><strong>Exercise 27.1.</strong> <em>Faraday’s law</em> asserts a relationship between the <em>magnetic flux</em> through a surface and the inclination for a current to flow around the boundary of the surface.</p>&#13;
<p class="indent">The magnetic flux <em>Φ<sub>B</sub></em> through a surface <em>S</em> is defined to be the dotted surface integral of the magnetic field:</p>&#13;
<div class="imagec"><img src="Images/531equ01.jpg" alt="Image" width="122" height="48"/></div>&#13;
<p class="noindentts">We defined the dotted surface integral in <a href="ch25.xhtml">Chapter 25</a>.</p>&#13;
<p class="alphats">(a) Write a function</p>&#13;
<pre class="pre3a">magneticFluxFromField :: VectorField -&gt; Surface -&gt; R&#13;
magneticFluxFromField = undefined</pre>&#13;
<p class="alphats-p">that accepts a magnetic field and a surface as input and returns magnetic flux as output.</p>&#13;
<p class="alphats">(b) Write a function</p>&#13;
<pre class="pre3a">magneticFluxFromCurrent :: CurrentDistribution -&gt; Surface -&gt; R&#13;
magneticFluxFromCurrent = undefined</pre>&#13;
<p class="alphats-p">that returns the magnetic flux through a given surface produced by the magnetic field of a given current distribution.</p>&#13;
<p class="noindentts"><strong>Exercise 27.2.</strong> Use <code>vf3D</code> from <a href="ch22.xhtml">Chapter 22</a> to show the magnetic field <code>circleB</code> of a wire loop. You will need to search for an appropriate scale factor. The magnitude of the magnetic field at the center of a circular loop is <em>μ</em><sub>0</sub><em>I</em>/2<em>R</em>, where <em>I</em> is the current in the loop and <em>R</em> is the radius. You can use this expression to take a good first guess at a scale factor.</p>&#13;
<pre>visLoop :: IO ()&#13;
visLoop = undefined</pre>&#13;
<p class="noindentts"><strong>Exercise 27.3.</strong> Here is a program that computes and displays the magnetic field of a wire solenoid with 1,000 turns of wire. It’s not so different from the programs we wrote in this chapter for solenoids with 10 and 100 turns.</p>&#13;
<span epub:type="pagebreak" id="page_532"/>&#13;
<pre>bFieldPicSolenoid1000 :: IO ()&#13;
bFieldPicSolenoid1000&#13;
    = vfGrad (**0.2) (\(y,z) -&gt; cart 0 (0.02*y) (0.02*z))&#13;
             (\v -&gt; (yComp v, zComp v)) "bFieldPicSolenoid1000.png" 20&#13;
             (bField $ wireSolenoid 0.01 0.1 10000 10)</pre>&#13;
<p class="indent">The resulting picture, shown here, looks nothing like the magnetic field of a solenoid.</p>&#13;
<div class="imagec"><img src="Images/532fig01.jpg" alt="Image" width="278" height="276"/></div>&#13;
<p class="indent">Identify the cause of this strange behavior and fix it.</p>&#13;
<p class="noindentts"><strong>Exercise 27.4.</strong> Make a picture of the magnetic field produced by a sheet solenoid. Pick values for the radius, length, number of turns per unit length, and current. Decide which of the visualization methods you will use.</p>&#13;
<p class="noindentts"><strong>Exercise 27.5.</strong> Consider the magnetic field <code>circleB</code> produced by a circular wire in the xy-plane, centered at the origin, with radius 0.25 m carrying 10 A of current. Make a graph of the z-component of the magnetic field as a function of location along the x-axis. It should look something like <a href="ch27.xhtml#ch27fig5">Figure 27-5</a>.</p>&#13;
<div class="imagel" id="ch27fig5"><img src="Images/532fig02.jpg" alt="Image" width="498" height="369"/></div>&#13;
<p class="figcap"><em>Figure 27-5: Magnetic field produced by a circular loop of current</em></p>&#13;
<p class="noindentts"><span epub:type="pagebreak" id="page_533"/><strong>Exercise 27.6.</strong> Consider the magnetic field produced by a circular loop carrying current. Make a graph of the z-component of the magnetic field as a function of location along the z-axis. Include both positive and negative values of <em>z</em>. The maximum magnetic field should occur at <em>z</em> = 0.</p>&#13;
<p class="noindentts"><strong>Exercise 27.7.</strong> In one of the exercises in the last chapter, we introduced the Helmholtz coil as a current distribution. Make a graph of the z-component of the magnetic field as a function of location along the z-axis. Include both positive and negative values of <em>z</em>. You should find that the magnetic field is much more uniform near the center than that produced by a single loop of wire.<span epub:type="pagebreak" id="page_534"/></p>&#13;
</div></body></html>