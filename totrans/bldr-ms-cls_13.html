<html><head></head><body><section class="chapter" title="Chapter&#xA0;13.&#xA0;Lighting" epub:type="chapter" id="lighting"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Lighting</h2></div></div></div><p><a id="iddle1062" class="indexterm"/><a id="iddle1183" class="indexterm"/><a id="iddle1184" class="indexterm"/><a id="iddle1345" class="indexterm"/><a id="iddle1753" class="indexterm"/><a id="iddle1759" class="indexterm"/><a id="iddle1760" class="indexterm"/><a id="iddle2145" class="indexterm"/>Lighting is perhaps the aspect of an image that most impacts how we perceive it. Lighting can change the tone of an image and make characters and scenery look either dark and sinister or warm and inviting. In this chapter, I’ll work on lighting the projects I’ve built so far using a variety of techniques, including both Blender Internal’s array of lighting options and Cycles’ more physically accurate methods for creating different kinds of lights.</p><div class="sect1" title="Blender Internal vs. Cycles Lighting"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="blender_internal_vsdot_cycles_lighting">Blender Internal vs. Cycles Lighting</h2></div></div></div><p>Both Blender Internal and Cycles have a wide variety of powerful tools for lighting. Blender Internal supports a range of lights that behave in different ways, as well as two methods for rendering shadows—using either shadow buffers or ray tracing—both of which will be discussed shortly.</p><p>Cycles uses only ray tracing for lighting, and its results are more realistic than those of Blender Internal. It also supports the emission of light from meshes, allowing you to create lights of any shape. But while Cycles is the more realistic lighting renderer, neither Cycles nor Blender Internal is the right choice for everything, and both have advantages. For example, Blender Internal’s lights are quick to render and offer a wide variety of uses and styles, while Cycles offers a reliable and realistic way of working with lights that doesn’t require much tweaking to produce good results. We’ll use both renderers in this chapter as we light the Bat Creature for rendering in Blender Internal and the Spider Bot and Jungle Temple for rendering in Cycles.</p></div><div class="sect1" title="Lighting in Blender Internal"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lighting_in_blender_internal">Lighting in Blender Internal</h2></div></div></div><p>Blender Internal uses Blender’s lamp objects to light a scene. To create a lamp, press <span class="smaller">SHIFT</span>-A in Object mode and choose one of the following under Lamp:</p><p title="Area"><span class="title"><strong><span class="strong"><strong>Area</strong></span></strong></span>. This creates a square- or rectangular-shaped lamp that emits light from all over its area. Area lamps support ray-traced shadows and are well suited for creating soft shadows and studiostyle lighting, but they can slow render time <a id="iddle1208" class="indexterm"/><a id="iddle1282" class="indexterm"/><a id="iddle1391" class="indexterm"/><a id="iddle1409" class="indexterm"/><a id="iddle1462" class="indexterm"/><a id="iddle1496" class="indexterm"/><a id="iddle1618" class="indexterm"/><a id="iddle1749" class="indexterm"/><a id="iddle1940" class="indexterm"/><a id="iddle1977" class="indexterm"/><a id="iddle2090" class="indexterm"/><a id="iddle2382" class="indexterm"/><a id="iddle2388" class="indexterm"/><a id="iddle2412" class="indexterm"/><a id="iddle2450" class="indexterm"/><a id="iddle2555" class="indexterm"/>significantly because they require more samples than other lamp types to produce noise-free results.</p><p title="Hemi"><span class="title"><strong><span class="strong"><strong>Hemi</strong></span></strong></span>. This lamp lights the entire scene in a diffuse way, similar to outdoor light from the sky. Because it doesn’t support shadows, it’s very quick to render but of limited use.</p><p title="Point"><span class="title"><strong><span class="strong"><strong>Point</strong></span></strong></span>. This creates a point light, which emits light in all directions from the lamp’s center. It supports ray-traced shadows and is a good general purpose lamp.</p><p title="Spot"><span class="title"><strong><span class="strong"><strong>Spot</strong></span></strong></span>. Spot lamps are like a spotlight at a theater or a flashlight. They emit light in a cone from their origin, making them a good tool for lighting specific areas. They support both ray-traced shadows and shadow buffers. Shadow buffers produce shadows without ray tracing and are generally significantly faster to render. This makes them very versatile and useful for scenes that need a high degree of control over lighting.</p><p title="Sun"><span class="title"><strong><span class="strong"><strong>Sun</strong></span></strong></span>. This lamp lights an entire scene from one direction, just as the sun might. It supports ray-traced shadows.</p><p>The settings for each lamp can be altered from the Object Data tab of the Properties editor, which has a lamp icon when a lamp is selected as the active object. You can adjust a lamp’s brightness and <span class="emphasis"><em>falloff</em></span>—the distance over which the strength of its light fades—as well as the settings for shadows, colors, and so forth. While different lamps—particularly spot lamps—have certain unique features, they generally share the same settings. The settings for a point lamp are shown in <a class="xref" href="ch13.html#settings_for_a_point_lamp" title="Figure 13-1. The settings for a point lamp">Figure 13-1</a> and discussed below.</p><p title="Light Color"><span class="title"><strong><span class="strong"><strong>Light Color</strong></span></strong></span>. This color picker lets you choose the color of your light.</p><p title="Energy"><span class="title"><strong><span class="strong"><strong>Energy</strong></span></strong></span>. This determines the overall intensity of your light.</p><p title="Falloff"><span class="title"><strong><span class="strong"><strong>Falloff</strong></span></strong></span>. Available only for point and spot lamps, this controls the distance and curve over which the strength of the light fades. The drop-down menu lets you specify the falloff curve for the fade (choose Inverse Square for realistic falloff and experiment with the others). <span class="emphasis"><em>Distance</em></span> lets you specify the overall distance for the fade—the higher the setting, the farther the light will spread. The <span class="emphasis"><em>Sphere</em></span> setting causes the intensity of the light to fade to zero over the determined distance rather than tapering off indefinitely.</p><div class="figure"><a id="settings_for_a_point_lamp"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00281"/><img src="httpatomoreillycomsourcenostarchimages1538804.png.jpg" alt="The settings for a point lamp"/></div></div><div class="figure-title">Figure 13-1. The settings for a point lamp</div></div><p title="Negative"><span class="title"><strong><span class="strong"><strong>Negative</strong></span></strong></span>. This turns the light into an <span class="emphasis"><em>“anti” lamp</em></span> that removes light from the scene instead of adding it. This setting can be useful for creating dark corners or hiding areas of a scene in shadow.</p><p title="This Layer Only"><span class="title"><strong><span class="strong"><strong>This Layer Only</strong></span></strong></span>. This causes lights to illuminate only objects on their same layer. This setting can be useful for lighting individual objects.</p><p title="Specular/Diffuse"><span class="title"><strong><span class="strong"><strong>Specular/Diffuse</strong></span></strong></span>. These settings let you control whether a light will contribute to specular and diffuse reflections. It can be handy to turn off a lamp’s specular reflections in order to add soft illumination to an area without creating highlights. By turning off diffuse reflections, you can position a light to place highlights precisely without changing the overall diffuse lighting.</p></div><div class="sect1" title="Shadows in Blender Internal"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="shadows_in_blender_internal">Shadows in Blender Internal</h2></div></div></div><p><a id="iddle1019" class="indexterm"/><a id="iddle1185" class="indexterm"/><a id="iddle1274" class="indexterm"/><a id="iddle1302" class="indexterm"/><a id="iddle1761" class="indexterm"/><a id="iddle2007" class="indexterm"/><a id="iddle2147" class="indexterm"/><a id="iddle2229" class="indexterm"/><a id="iddle2310" class="indexterm"/><a id="iddle2312" class="indexterm"/><a id="iddle2316" class="indexterm"/><a id="iddle2369" class="indexterm"/><a id="iddle2414" class="indexterm"/><a id="iddle2556" class="indexterm"/>Blender offers two ways to render shadows: ray tracing and shadow buffers.</p><div class="sect2" title="Ray Tracing"><div class="titlepage"><div><div><h3 class="title" id="ray_tracing">Ray Tracing</h3></div></div></div><p>The first method uses ray tracing to determine the parts of a mesh in shadow. Ray tracing “fires” rays out from the camera for each pixel in an image and draws them to the surface the pixel is facing. Further rays are drawn to the lights in the scene to determine whether that point is in light or shadow: If a ray can be drawn to the light without intersecting another object, the point is lit; otherwise, it is in shadow.</p><p>When there are multiple lights or soft shadows, multiple rays must be cast per pixel, increasing render times. The same goes for ray-traced reflections and transparency, where rays may be reflected or refracted multiple times. Ray tracing can produce crisp, pixel-perfect shadows as well as soft shadows, and it’s more accurate but generally slower than shadow buffers.</p></div><div class="sect2" title="Shadow Buffers"><div class="titlepage"><div><div><h3 class="title" id="shadow_buffers">Shadow Buffers</h3></div></div></div><p>The other method uses shadow buffers and is only available for spot lamps. Shadow buffers take advantage of the spot lamp’s restricted cone of illumination to create a map of which areas are in shadow over the range of angles that the lamp covers. Essentially, Blender creates a basic render of the scene from the lamp’s point of view: Areas that can be seen from the lamp’s viewpoint are lit, while areas that cannot are in shadow.</p><p>Shadow-buffer shadows are generally faster to render than ray-traced ones and are also compatible with the strand renderer for hair. In fact, the deep shadow-buffer option for spot lamps is ideally suited to rendering shadows cast by hair. But getting accurate buffered shadows, which you do by increasing the resolution of the shadow-buffer map, can use a lot of memory, and the borders of low-resolution buffered shadows can look jagged (see <a class="xref" href="ch13.html#shadow-buffer_biasing_artifacts_are_show" title="Figure 13-2. Shadow-buffer biasing artifacts are shown here with a low shadow-buffer size to exaggerate the effect. Increasing the Bias value avoids these artifacts, but high settings can cause you to lose shadows that should be there.">Figure 13-2</a>), so be sure to set them up correctly.</p><div class="sect3" title="Common Shadow Options"><div class="titlepage"><div><div><h4 class="title" id="common_shadow_options">Common Shadow Options</h4></div></div></div><p>In the Shadow panel of the lamp settings, the following options are common to both ray-traced and buffer shadows.</p><p title="Shadow Color"><span class="title"><strong><span class="strong"><strong>Shadow Color</strong></span></strong></span>. This option lets you set a color for the shadow. Of course, in reality, shadows have no color, so this is actually a trick designed to help change the aesthetic of your lighting. Leave it set to <span class="emphasis"><em>Black</em></span> for normal (uncolored) shadows.</p><p title="This Layer Only"><span class="title"><strong><span class="strong"><strong>This Layer Only</strong></span></strong></span>. This causes only objects on the same layer as the lamp to cast shadows, though objects on any layer may be lit by the lamp as long as the corresponding option isn’t turned on in the Lamp panel.</p><p title="Only Shadow"><span class="title"><strong><span class="strong"><strong>Only Shadow</strong></span></strong></span>. This causes the lamp to cast only shadows, meaning that you will need other lights in your scene to light your objects. This option can be used to create a shadow in a specific place without affecting the overall look of your lighting.</p></div><div class="sect3" title="Ray-Traced Shadow Options"><div class="titlepage"><div><div><h4 class="title" id="ray-traced_shadow_options">Ray-Traced Shadow Options</h4></div></div></div><p>Enabling Ray Shadow for a lamp gives the following options:</p><p title="Samples"><span class="title"><strong><span class="strong"><strong>Samples</strong></span></strong></span>. This determines the number of samples taken per pixel for soft shadows in order to determine the amount of shadowing. Higher sample numbers give less noisy results. Setting Samples to 1 gives hard-edged shadows regardless of the Soft Size setting.</p><p title="Soft Size"><span class="title"><strong><span class="strong"><strong>Soft Size</strong></span></strong></span>. This setting is designed to produce soft shadows by spreading out the area the light comes from. The larger the soft size, the softer and less defined shadows become. Larger sizes require higher numbers of samples to produce noise-free results.</p><p title="Adaptive/Constant QMC"><span class="title"><strong><span class="strong"><strong>Adaptive/Constant QMC</strong></span></strong></span>. This sets the sampling method used to determine whether a point on a surface is in shadow. For <span class="emphasis"><em>Constant QMC</em></span>, the number of samples taken is always that specified by the Samples setting. For <span class="emphasis"><em>Adaptive QMC</em></span>, fewer samples may be taken for areas that are obviously either in or out of shadow. The <span class="emphasis"><em>threshold</em></span> value dictates the level of certainty required to determine how many samples are needed: Higher threshold values are more tolerant and faster, but they can produce noisier results.</p></div><div class="sect3" title="Shadow-Buffer Options"><div class="titlepage"><div><div><h4 class="title" id="shadow-buffer_options">Shadow-Buffer Options</h4></div></div></div><p>Opting for shadow-buffer shadows for spot lamps gives the following options:</p><p title="Buffer Type (Classical/Classic-Halfway/Irregular/Deep)"><span class="title"><strong><span class="strong"><strong>Buffer Type (Classical/Classic-Halfway/Irregular/Deep)</strong></span></strong></span>. The specifics of these types are quite technical (you can find the details with a bit of <a id="iddle1160" class="indexterm"/><a id="iddle1246" class="indexterm"/><a id="iddle1247" class="indexterm"/><a id="iddle1344" class="indexterm"/><a id="iddle1362" class="indexterm"/><a id="iddle1514" class="indexterm"/><a id="iddle1661" class="indexterm"/><a id="iddle1763" class="indexterm"/><a id="iddle2230" class="indexterm"/><a id="iddle2338" class="indexterm"/><a id="iddle2367" class="indexterm"/>googling), but the differences are really pretty straightforward.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none"><p title="Classical"><span class="title"><strong><span class="strong"><strong>Classical</strong></span></strong></span>. These buffers are the simplest and can suffer from biasing artifacts (see <a class="xref" href="ch13.html#shadow-buffer_biasing_artifacts_are_show" title="Figure 13-2. Shadow-buffer biasing artifacts are shown here with a low shadow-buffer size to exaggerate the effect. Increasing the Bias value avoids these artifacts, but high settings can cause you to lose shadows that should be there.">Figure 13-2</a>).</p></li><li class="listitem" style="list-style-type: none"><p title="Classical-Halfway"><span class="title"><strong><span class="strong"><strong>Classical-Halfway</strong></span></strong></span>. These buffers improve on Classical and suffer less from biasing artifacts.</p></li><li class="listitem" style="list-style-type: none"><p title="Irregular"><span class="title"><strong><span class="strong"><strong>Irregular</strong></span></strong></span>. These shadow buffers always produce crisp, clean shadows with no aliasing, but they can’t be used to produce soft shadows, and the shadows they create don’t show up in ray-traced reflections.</p></li><li class="listitem" style="list-style-type: none"><p title="Deep"><span class="title"><strong><span class="strong"><strong>Deep</strong></span></strong></span>. These shadow buffers are the most advanced and can store transparency information, allowing for partial shadowing from transparent objects. They are ideal for rendering shadows from materials like hair and fur, as well as volumetric materials.</p></li></ul></div><p title="Filter Type"><span class="title"><strong><span class="strong"><strong>Filter Type</strong></span></strong></span>. The filter type used to blend shadow borders. <span class="emphasis"><em>Gauss</em></span> gives the smoothest results.</p><p title="Soft"><span class="title"><strong><span class="strong"><strong>Soft</strong></span></strong></span>. This sets the softness of your shadows in terms of the size of the lamp used to cast shadows. Larger values give softer shadows but require more samples.</p><p title="Bias"><span class="title"><strong><span class="strong"><strong>Bias</strong></span></strong></span>. This adjusts how the shadow buffer is calculated. It’s used to prevent artifacts that are caused by faces at a low angle to the lamp casting shadows on themselves (see <a class="xref" href="ch13.html#shadow-buffer_biasing_artifacts_are_show" title="Figure 13-2. Shadow-buffer biasing artifacts are shown here with a low shadow-buffer size to exaggerate the effect. Increasing the Bias value avoids these artifacts, but high settings can cause you to lose shadows that should be there.">Figure 13-2</a>). Higher values reduce bias artifacts but can cause some parts of a mesh not to cast shadows where they should, so set this as low as you can without introducing artifacts.</p><p title="Sample Buffers"><span class="title"><strong><span class="strong"><strong>Sample Buffers</strong></span></strong></span>. This determines the number of shadow buffers that are rendered. Higher values give better anti-aliasing of hard-edged shadows, but more buffers use more memory, so tread carefully.</p><p title="Size"><span class="title"><strong><span class="strong"><strong>Size</strong></span></strong></span>. This sets the resolution of the shadow-buffer map (see <a class="xref" href="ch13.html#shadow-buffer_size_setting_affects_the_d" title="Figure 13-3. The shadow-buffer Size setting affects the definition of shadows and reduces aliasing of shadow borders. Here, some very overstretched shadow buffers are shown in increasing resolutions.">Figure 13-3</a>). The higher the value, the greater the detail that can be captured in the map and the more memory required for rendering. If you want soft shadows, you won’t be able to see that much detail in them anyway, so use high resolutions only for harder shadows.</p><p title="Clip Start/End"><span class="title"><strong><span class="strong"><strong>Clip Start/End</strong></span></strong></span>. These settings define the range of distances over which objects will cast shadows in the shadow buffer. Objects outside this range will still be lit by the spot lamp but will not cast shadows. The extent of this range is displayed in the 3D Viewport as a solid line extending outward from the lamp’s center between the clip-start and clip-end distances (see <a class="xref" href="ch13.html#spot_lamp_in_the_3d_viewport_showing_the" title="Figure 13-4. A spot lamp in the 3D Viewport showing the clipping range">Figure 13-4</a>).</p><div class="figure"><a id="shadow-buffer_biasing_artifacts_are_show"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00282"/><img src="httpatomoreillycomsourcenostarchimages1538806.png.jpg" alt="Shadow-buffer biasing artifacts are shown here with a low shadow-buffer size to exaggerate the effect. Increasing the Bias value avoids these artifacts, but high settings can cause you to lose shadows that should be there."/></div></div><div class="figure-title">Figure 13-2. Shadow-buffer biasing artifacts are shown here with a low shadow-buffer size to exaggerate the effect. Increasing the Bias value avoids these artifacts, but high settings can cause you to lose shadows that <span class="italicAlt">should</span> be there.</div></div><p title="Autoclip Start/End"><span class="title"><strong><span class="strong"><strong>Autoclip Start/End</strong></span></strong></span>. Turning on these options leaves it to Blender to set the clip-start and clip-end distances automatically based on the vertices visible from the point of view of the lamp.</p></div></div></div><div class="sect1" title="Lighting in Cycles"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lighting_in_cycles">Lighting in Cycles</h2></div></div></div><p>In Cycles, lighting is broadly similar to that of Blender Internal but with fewer options. Setting up lighting in Cycles is easier because you get instant feedback from the render preview. Lights in Cycles are node based and consist of shaders, just as with materials. In fact, Cycles allows you to incorporate the emission of light into materials <span class="emphasis"><em>and</em></span> lamp objects. We’ll discuss both here.</p><div class="figure"><a id="shadow-buffer_size_setting_affects_the_d"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00283"/><img src="httpatomoreillycomsourcenostarchimages1538808.png.jpg" alt="The shadow-buffer Size setting affects the definition of shadows and reduces aliasing of shadow borders. Here, some very overstretched shadow buffers are shown in increasing resolutions."/></div></div><div class="figure-title">Figure 13-3. The shadow-buffer Size setting affects the definition of shadows and reduces aliasing of shadow borders. Here, some <span class="italicAlt">very</span> overstretched shadow buffers are shown in increasing resolutions.</div></div><div class="figure"><a id="spot_lamp_in_the_3d_viewport_showing_the"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00284"/><img src="httpatomoreillycomsourcenostarchimages1538810.png.jpg" alt="A spot lamp in the 3D Viewport showing the clipping range"/></div></div><div class="figure-title">Figure 13-4. A spot lamp in the 3D Viewport showing the clipping range</div></div><div class="sect2" title="Lamp Objects in Cycles"><div class="titlepage"><div><div><h3 class="title" id="lamp_objects_in_cycles">Lamp Objects in Cycles</h3></div></div></div><p><a id="iddle1072" class="indexterm"/><a id="iddle1255" class="indexterm"/><a id="iddle1346" class="indexterm"/><a id="iddle1456" class="indexterm"/><a id="iddle1520" class="indexterm"/><a id="iddle2413" class="indexterm"/>Cycles supports most of the same lamp types as Blender Internal, except for Hemi lamps. Adding a new lamp object in Cycles adds a standard emission shader connected to the lamp’s output node, as shown in <a class="xref" href="ch13.html#emission_shader_is_used_for_both_lamp_ob" title="Figure 13-5. The emission shader is used for both lamp objects and mesh-emitter objects in Cycles.">Figure 13-5</a>. This shader can be used to adjust the intensity and color of the light. To adjust the softness of the shadows the lamp generates, use the lamp’s Size setting in the Object Data tab of the Properties editor.</p><div class="note" title="Note"><h3 class="title"><a id="ch13note01"/>Note</h3><p><span class="emphasis"><em>Avoid setting the size of a lamp to 0, as this can cause “fireflies”—a kind of noise consisting of single bright pixels. If you want sharp shadows, just set the size to something very small but not 0.</em></span></p></div><div class="figure"><a id="emission_shader_is_used_for_both_lamp_ob"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00285"/><img src="httpatomoreillycomsourcenostarchimages1538812.png.jpg" alt="The emission shader is used for both lamp objects and mesh-emitter objects in Cycles."/></div></div><div class="figure-title">Figure 13-5. The emission shader is used for both lamp objects and mesh-emitter objects in Cycles.</div></div></div><div class="sect2" title="Mesh-Emitter Objects in Cycles"><div class="titlepage"><div><div><h3 class="title" id="mesh-emitter_objects_in_cycles">Mesh-Emitter Objects in Cycles</h3></div></div></div><p>Cycles supports the emission of light from materials, meaning that you can turn any mesh into a light by applying a material that contains an emission shader. This feature is great for creating unique lighting setups and for lights that appear in glossy reflections. (We’ll look deeper into this when lighting the Spider Bot.) In the case of mesh emitters, you can combine emission shaders with other shaders using the Add and Mix nodes (as discussed in <a class="xref" href="ch12.html" title="Chapter 12. Materials">Chapter 12</a>).</p></div></div><div class="sect1" title="World Settings and Ambient Light and Occlusion"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="world_settings_and_ambient_light_and_occ">World Settings and Ambient Light and Occlusion</h2></div></div></div><p><a id="iddle1036" class="indexterm"/><a id="iddle1045" class="indexterm"/><a id="iddle1272" class="indexterm"/><a id="iddle1622" class="indexterm"/><a id="iddle2040" class="indexterm"/><a id="iddle2150" class="indexterm"/><a id="iddle2704" class="indexterm"/><a id="iddle2723" class="indexterm"/>In <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>, we baked ambient occlusion maps for our projects. Ambient occlusion maps are textures that mimic the effect of light coming from all around an object that is occluded, or blocked, by parts of the object itself. This effect is similar to what we see in the sky on a sunny day. The main source of light is the sun, but light also scatters throughout the atmosphere so that it comes from all directions and even illuminates the shadows. (This effect is even more apparent on an overcast day when the lack of direct sunlight means things are lit more evenly from all directions.)</p><p>To achieve the effect of light coming from a scene’s surroundings, we can use Blender’s World settings, accessible from the World tab of the Properties editor. These settings determine the look of your scene’s background and how the background contributes to the scene’s lighting. Both Blender Internal and Cycles support world lighting, though in slightly different ways.</p><div class="sect2" title="World Settings in Blender Internal"><div class="titlepage"><div><div><h3 class="title" id="world_settings_in_blender_internal">World Settings in Blender Internal</h3></div></div></div><p>Blender Internal’s World settings are shown in <a class="xref" href="ch13.html#blender_internalapostrophes_world_settin" title="Figure 13-6. Blender Internal’s World settings">Figure 13-6</a>. The most important ones are as follows:</p><p title="Horizon Color/Zenith Color/Ambient Color"><span class="title"><strong><span class="strong"><strong>Horizon Color/Zenith Color/Ambient Color</strong></span></strong></span>. By default, the sky in a scene will simply be the <span class="emphasis"><em>Horizon Color</em></span>. The <span class="emphasis"><em>Zenith Color</em></span> is used when Blend Sky is turned on, rendering the background as a gradient from the horizon color to the zenith color. The <span class="emphasis"><em>Ambient Color</em></span> is a fixed color that is added to the lighting of every surface in the scene, brightening the shadows, but the effect is very unrealistic, so it’s best to leave this set to black.</p><p title="Paper Sky/Real Sky"><span class="title"><strong><span class="strong"><strong>Paper Sky/Real Sky</strong></span></strong></span>. <span class="emphasis"><em>Paper Sky</em></span> applies any texture or blend applied to the background to the camera coordinates. This can be useful when you have a background photo or image that you want to use as is, without distortion. <span class="emphasis"><em>Real Sky</em></span> creates a background with a real horizon in the plane of the scene’s global coordinates so that any textures remain static as the camera is rotated and any blend in the sky occurs from the “real” horizon upward (and downward). Real Sky is useful when panoramic or mirror-ball textures are used as backgrounds.</p><div class="figure"><a id="blender_internalapostrophes_world_settin"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00286"/><img src="httpatomoreillycomsourcenostarchimages1538814.png.jpg" alt="Blender Internal’s World settings"/></div></div><div class="figure-title">Figure 13-6. Blender Internal’s World settings</div></div><p title="Ambient Occlusion"><span class="title"><strong><span class="strong"><strong>Ambient Occlusion</strong></span></strong></span>. We encountered ambient occlusion in <a class="xref" href="ch10.html" title="Chapter 10. Texture Baking">Chapter 10</a>. Ambient occlusion lights or adds shadows to a surface based on the surrounding geometry. Areas with geometry around them that blocks light will be darkened, while the exposed parts of a mesh will remain well lit. The Ambient Occlusion option can be set to <span class="emphasis"><em>Add</em></span> or <span class="emphasis"><em>Multiply</em></span> with the other lighting in the scene. Additive ambient occlusion brightens the existing lighting, while Multiply adds shadows. Multiply is the more “realistic” option and is more suitable to most scenes. (The environment lighting settings offer better tools for adding further light to the scene anyway.)</p><p title="Environment Lighting"><span class="title"><strong><span class="strong"><strong>Environment Lighting</strong></span></strong></span>. <a id="iddle1061" class="indexterm"/><a id="iddle1071" class="indexterm"/><a id="iddle1408" class="indexterm"/><a id="iddle1463" class="indexterm"/><a id="iddle1495" class="indexterm"/><a id="iddle1547" class="indexterm"/><a id="iddle1645" class="indexterm"/><a id="iddle2056" class="indexterm"/><a id="iddle2438" class="indexterm"/>This adds light to a scene, coming from all directions (though blocked by nearby geometry, as with ambient occlusion). The Environment Lighting setting can be used to mimic scattered light from the sky in an outdoor scene or to approximate the effect of light bouncing around and illuminating a scene. The color of the environment lighting can be set to white, to the sky color (where it will use the horizon color or both the horizon and zenith colors if you have a blend sky), or the sky texture if you are using a background texture.</p><p title="Indirect Lighting"><span class="title"><strong><span class="strong"><strong>Indirect Lighting</strong></span></strong></span>. This setting allows Blender Internal to simulate the effect of light bouncing repeatedly, and thus illuminating more of a scene, before entering the camera or eye. The result can be color bleeding, where the color of a brightly colored diffuse material is reflected onto nearby objects (as shown in <a class="xref" href="ch13.html#color_bleeding_from_indirect_lightingdot" title="Figure 13-7. Color bleeding from indirect lighting. Here, the red sphere reflects red light onto its surroundings. This is most visible on the gray inner sphere. This is a subtle effect, so indirect light alone is shown on the right. The surroundings also contribute indirect light, shown as grayish colors in the image on the right.">Figure 13-7</a>). The method is only compatible with the Approximate Gather method (discussed below). The <span class="emphasis"><em>Factor</em></span> setting affects the strength of this effect, and the <span class="emphasis"><em>Bounces</em></span> setting determines how many times light may bounce off a surface and still be rendered.</p><p title="Gather (Ray Trace and Approximate)"><span class="title"><strong><span class="strong"><strong>Gather (Ray Trace and Approximate)</strong></span></strong></span>. These settings let you choose between Blender Internal’s two options for rendering world lighting. As with lamps, <span class="emphasis"><em>Ray Trace</em></span> takes multiple ray-traced samples per pixel to determine the amount of world lighting. This process gives more accurate results, typically at the cost of extra render time and noise (if the number of samples is set too low). The <span class="emphasis"><em>Approximate</em></span> setting does not require ray tracing and is noise free, but it can produce other artifacts, such as overocclusion in some areas. Turning up the number of passes and setting the error value lower gives better results but takes more time to preprocess when rendering. Alternatively, using the Correction parameter reduces the strength of the occlusion to compensate for the artifacts. When using the Approximate Gather method, turning on Pixel Cache generally gives much faster results.</p><p title="Attenuation"><span class="title"><strong><span class="strong"><strong>Attenuation</strong></span></strong></span>. The <span class="emphasis"><em>Falloff</em></span> setting under Attenuation causes ambient occlusion, environment lighting, and indirect lighting to fade out over a certain distance, reducing the effect of far away geometry on a surface and lightening the surface. Falloff also speeds up rendering because calculating the lighting for a surface point only requires taking nearby geometry into account. The <span class="emphasis"><em>Strength</em></span> setting determines how strong the attenuation is, while the <span class="emphasis"><em>Distance</em></span> setting (only with the Ray-Trace Gather method) determines the range of the falloff.</p><div class="figure"><a id="color_bleeding_from_indirect_lightingdot"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00287"/><img src="httpatomoreillycomsourcenostarchimages1538816.png.jpg" alt="Color bleeding from indirect lighting. Here, the red sphere reflects red light onto its surroundings. This is most visible on the gray inner sphere. This is a subtle effect, so indirect light alone is shown on the right. The surroundings also contribute indirect light, shown as grayish colors in the image on the right."/></div></div><div class="figure-title">Figure 13-7. Color bleeding from indirect lighting. Here, the red sphere reflects red light onto its surroundings. This is most visible on the gray inner sphere. This is a subtle effect, so indirect light alone is shown on the right. The surroundings also contribute indirect light, shown as grayish colors in the image on the right.</div></div></div><div class="sect2" title="World Settings in Cycles"><div class="titlepage"><div><div><h3 class="title" id="world_settings_in_cycles">World Settings in Cycles</h3></div></div></div><p><a id="iddle1114" class="indexterm"/><a id="iddle1352" class="indexterm"/><a id="iddle1464" class="indexterm"/><a id="iddle1718" class="indexterm"/><a id="iddle1756" class="indexterm"/><a id="iddle1766" class="indexterm"/><a id="iddle2026" class="indexterm"/><a id="iddle2346" class="indexterm"/><a id="iddle2705" class="indexterm"/>In Cycles, World settings are node based and use the same shader system as do materials and lights. The World settings use the Background Shader node exclusively, which lights the scene and sets the background color or texture (depending on the inputs you supply it with) and the strength of the lighting that the background contributes. The standard background node tree is shown in <a class="xref" href="ch13.html#standard_node_tree_for_world_settings_in" title="Figure 13-8. The standard node tree for World settings in Cycles">Figure 13-8</a>.</p><p>You can influence the color of the background as with other materials by using textures, images, and colors. Particularly useful for this are the Sky Texture and Environment Texture nodes. The Sky Texture node creates a procedural sky, using the direction you set by dragging the sphere input of the node, with the level of atmospheric scattering determined by the Turbidity setting. This effect works particularly well when combined with a sun lamp with a yellow-orange (sunlight) color to get some basic outdoor lighting (see <a class="xref" href="ch13.html#combining_the_sky_shader_for_the_backgro" title="Figure 13-9. Combining the sky shader for the background with a sun lamp gives a decent approximation of outdoor lighting. Left: The sky shader. Right: Illumination from the sky combined with a sun lamp.">Figure 13-9</a>).</p><div class="figure"><a id="standard_node_tree_for_world_settings_in"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00288"/><img src="httpatomoreillycomsourcenostarchimages1538818.png.jpg" alt="The standard node tree for World settings in Cycles"/></div></div><div class="figure-title">Figure 13-8. The standard node tree for World settings in Cycles</div></div><div class="figure"><a id="combining_the_sky_shader_for_the_backgro"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00289"/><img src="httpatomoreillycomsourcenostarchimages1538820.png.jpg" alt="Combining the sky shader for the background with a sun lamp gives a decent approximation of outdoor lighting. Left: The sky shader. Right: Illumination from the sky combined with a sun lamp."/></div></div><div class="figure-title">Figure 13-9. Combining the sky shader for the background with a sun lamp gives a decent approximation of outdoor lighting. Left: The sky shader. Right: Illumination from the sky combined with a sun lamp.</div></div><p>Cycles also supports ambient occlusion, which can be used to add white ambient light to a scene, with occlusion based on the distance between faces. You can turn this effect on in the World tab of the Properties editor by using the Ambient Occlusion tab.</p><p>Also in the World tab under Settings is the option to sample the background as a lamp. Enable this when using a textured background, particularly when using HDRI (high-dynamic-range image) maps for background lighting to dramatically speed up rendering (see <a class="xref" href="ch13.html#turning_on_sample_as_lamp_for_background" title="Figure 13-10. Turning on Sample as Lamp for backgrounds with texture information speeds up reduction of noise while rendering. Here, an HDRI map has been used to light the scene. Left: Sample as Lamp turned off (30 passes). Right: Sample as Lamp turned on with map resolution set to 256 (again, after 30 passes).">Figure 13-10</a>).</p></div></div><div class="sect1" title="Lighting the Bat Creature"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lighting_the_bat_creature">Lighting the Bat Creature</h2></div></div></div><p>For the Bat Creature, I wanted dramatic lighting to make the character look dangerous and foreboding. I needed some dark shadows and stark lighting that wouldn’t give too much away. To create this effect, I used a three-point lighting setup, which is commonly used to light characters and portraits. Additionally, I needed to set up my lights to create good shadows with the creature’s hair and to light the creature from behind so that light would be seen scattering through the skin of the wings (using the subsurface scattering material we created in <a class="xref" href="ch12.html" title="Chapter 12. Materials">Chapter 12</a>).</p><div class="figure"><a id="turning_on_sample_as_lamp_for_background"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00290"/><img src="httpatomoreillycomsourcenostarchimages1538822.png.jpg" alt="Turning on Sample as Lamp for backgrounds with texture information speeds up reduction of noise while rendering. Here, an HDRI map has been used to light the scene. Left: Sample as Lamp turned off (30 passes). Right: Sample as Lamp turned on with map resolution set to 256 (again, after 30 passes)."/></div></div><div class="figure-title">Figure 13-10. Turning on Sample as Lamp for backgrounds with texture information speeds up reduction of noise while rendering. Here, an HDRI map has been used to light the scene. Left: Sample as Lamp turned off (30 passes). Right: Sample as Lamp turned on with map resolution set to 256 (again, after 30 passes).</div></div><div class="sect2" title="Three-Point Lighting"><div class="titlepage"><div><div><h3 class="title" id="three-point_lighting">Three-Point Lighting</h3></div></div></div><p><a id="iddle1710" class="indexterm"/><a id="iddle1769" class="indexterm"/><a id="iddle2558" class="indexterm"/><a id="iddle2559" class="indexterm"/>Three-point lighting is considered the “standard” lighting setup for a lot of portraiture and cinematography because the use of three lights achieves a pleasant, natural look that can be adapted to many circumstances with good results.</p><div class="sect3" title="The Key Light"><div class="titlepage"><div><div><h4 class="title" id="key_light">The Key Light</h4></div></div></div><p>The first of the three lights—the <span class="emphasis"><em>key light</em></span>—is the main source of light in a scene and is generally placed so that it lights the subject from the side and slightly above to provide some interesting illumination.</p><p>For the Bat Creature, I added a spot lamp above and slightly to the left (from the camera’s perspective) of the character, as shown in <a class="xref" href="ch13.html#effect_of_the_key_light" title="Figure 13-11. The effect of the key light">Figure 13-11</a>. The key light would provide most of the illumination, so I set its intensity quite high (to about 12) and the distance low (around 3) so that the intensity of the light would fade relatively quickly. I gave the light a bluish tint, as shown in the figure.</p><div class="figure"><a id="effect_of_the_key_light"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00291"/><img src="httpatomoreillycomsourcenostarchimages1538824.png.jpg" alt="The effect of the key light"/></div></div><div class="figure-title">Figure 13-11. The effect of the key light</div></div></div><div class="sect3" title="The Fill Light"><div class="titlepage"><div><div><h4 class="title" id="fill_light">The Fill Light</h4></div></div></div><p><a id="iddle1083" class="indexterm"/><a id="iddle1507" class="indexterm"/><a id="iddle1577" class="indexterm"/><a id="iddle2209" class="indexterm"/>The next light—the <span class="emphasis"><em>fill light</em></span>—is placed opposite the key light, usually illuminating the subject from the other side and generally adding some subtle light to the shadows cast by the key light. Because I wanted the Bat Creature to have really dark shadows, I set the intensity of the fill light to 0.5 and its distance to 6. I set its color to a reddish hue to contrast with the blue key light. The effect of the fill light is shown in <a class="xref" href="ch13.html#fill_light_adds_subtle_illumination_to_t" title="Figure 13-12. The fill light adds subtle illumination to the shadows.">Figure 13-12</a>.</p><div class="note" title="Note"><h3 class="title"><a id="ch13note02"/>Note</h3><p><span class="emphasis"><em>While the fill light usually comes from the opposite side of a subject, I placed the fill light to the character’s right (camera left) because the Bat Creature’s left wing (camera right) shields the body.</em></span></p></div></div><div class="sect3" title="The Back Light"><div class="titlepage"><div><div><h4 class="title" id="back_light">The Back Light</h4></div></div></div><p>The back light (sometimes called a <span class="emphasis"><em>rim light</em></span>) lights a subject from behind, usually adding a subtle highlight around the edges of a subject on one side. This light was especially important for the Bat Creature because it provided scattered back lighting through the wings and ears. I set its intensity high (to 10) and its distance to 10 to give the light enough brightness to shine through the wings (see <a class="xref" href="ch13.html#back_light_provides_highlights_around_th" title="Figure 13-13. The back light provides highlights around the outline of the character (that is, on the shoulders and the back of the head). In this case, it also scatters light through the wings and ears.">Figure 13-13</a>). Together, the key, fill, and back lights produce the final lighting, as shown in <a class="xref" href="ch13.html#all_three_lights_contribute_to_the_final" title="Figure 13-14. All three lights contribute to the final lighting.">Figure 13-14</a>.</p></div><div class="sect3" title="Positioning the Lights"><div class="titlepage"><div><div><h4 class="title" id="positioning_the_lights">Positioning the Lights</h4></div></div></div><p>Positioning the three lights involves thinking about what aspects of your model you want to light and where you want the light to come from and then exercising a bit of trial and error. To help with the process and to get quicker feedback on how your lights look (without having to render each time), use Blender’s GLSL shading mode to see how your lights will look in real time in the 3D Viewport (see <a class="xref" href="ch13.html#positioning_lights_using_glsl_shading_fo" title="Figure 13-15. Positioning lights using GLSL shading for feedback">Figure 13-15</a>). This works particularly well for spot lamps as GLSL also supports buffered shadows, meaning the GLSL preview will look pretty close to your final renders. Turn on this shading mode by going to the 3D Viewport header and setting the shading to <span class="strong"><strong>Textured</strong></span>. Then, look in the Properties region under Display and set the shading type to <span class="strong"><strong>GLSL</strong></span> (press <span class="strong"><strong>N</strong></span> to bring up the properties region in the 3D Viewport). You can then move your lights around as you please and get instant feedback on how they look.</p><div class="figure"><a id="fill_light_adds_subtle_illumination_to_t"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00292"/><img src="httpatomoreillycomsourcenostarchimages1538826.png.jpg" alt="The fill light adds subtle illumination to the shadows."/></div></div><div class="figure-title">Figure 13-12. The fill light adds subtle illumination to the shadows.</div></div><div class="figure"><a id="back_light_provides_highlights_around_th"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00293"/><img src="httpatomoreillycomsourcenostarchimages1538828.png.jpg" alt="The back light provides highlights around the outline of the character (that is, on the shoulders and the back of the head). In this case, it also scatters light through the wings and ears."/></div></div><div class="figure-title">Figure 13-13. The back light provides highlights around the outline of the character (that is, on the shoulders and the back of the head). In this case, it also scatters light through the wings and ears.</div></div><div class="figure"><a id="all_three_lights_contribute_to_the_final"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00294"/><img src="httpatomoreillycomsourcenostarchimages1538830.png.jpg" alt="All three lights contribute to the final lighting."/></div></div><div class="figure-title">Figure 13-14. All three lights contribute to the final lighting.</div></div><div class="figure"><a id="positioning_lights_using_glsl_shading_fo"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00295"/><img src="httpatomoreillycomsourcenostarchimages1538832.png.jpg" alt="Positioning lights using GLSL shading for feedback"/></div></div><div class="figure-title">Figure 13-15. Positioning lights using GLSL shading for feedback</div></div><p><a id="iddle1250" class="indexterm"/><a id="iddle1800" class="indexterm"/><a id="iddle2173" class="indexterm"/><a id="iddle2473" class="indexterm"/>GLSL shading supports all but area lights, though it only renders shadows for spot lamps with buffered shadows.</p></div></div><div class="sect2" title="Clay Renders and Material Override"><div class="titlepage"><div><div><h3 class="title" id="clay_renders_and_material_override">Clay Renders and Material Override</h3></div></div></div><p>Another way to get a feel for how your lighting is working is by rendering your scene and applying the same material (usually a flat, diffuse one) to every object. Often called a <span class="emphasis"><em>clay render</em></span>, this lets you see how the lighting is working in isolation and can be useful for checking whether an issue with your renders is due to lighting or materials.</p><p>To quickly set up a clay render, use the Material Override option in the Render tab of the Properties editor. Create a new, flat, gray material (just use the default material and turn down the specularity) and assign it to the Material Override option in the Layers panel to render the scene without textures and materials, as shown in <a class="xref" href="ch13.html#clay_render_of_the_bat_creature_using_th" title="Figure 13-16. A clay render of the Bat Creature using the Material Override setting. Here, I’ve created a material called Flat and assigned it to the material override in the Render Layers panel. This technique lets you see the lighting of your model in isolation.">Figure 13-16</a>. Press F12 to render. (See <a class="xref" href="ch14.html" title="Chapter 14. Rendering and Compositing">Chapter 14</a> for more on rendering.)</p><div class="figure"><a id="clay_render_of_the_bat_creature_using_th"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00296"/><img src="httpatomoreillycomsourcenostarchimages1538834.png.jpg" alt="A clay render of the Bat Creature using the Material Override setting. Here, I’ve created a material called Flat and assigned it to the material override in the Render Layers panel. This technique lets you see the lighting of your model in isolation."/></div></div><div class="figure-title">Figure 13-16. A clay render of the Bat Creature using the Material Override setting. Here, I’ve created a material called Flat and assigned it to the material override in the Render Layers panel. This technique lets you see the lighting of your model in isolation.</div></div></div><div class="sect2" title="Shadows and Fur"><div class="titlepage"><div><div><h3 class="title" id="shadows_and_fur">Shadows and Fur</h3></div></div></div><p><a id="iddle1115" class="indexterm"/><a id="iddle1116" class="indexterm"/><a id="iddle1132" class="indexterm"/><a id="iddle1757" class="indexterm"/><a id="iddle1758" class="indexterm"/><a id="iddle2315" class="indexterm"/><a id="iddle2317" class="indexterm"/>While ray-traced or buffered shadows would both be appropriate for most of the Bat Creature, our fur has more specific lighting requirements. For best results, use deep shadow buffers on each of the key, fill, and back lights and adjust the other settings as shown in <a class="xref" href="ch13.html#settings_for_the_shadow_buffer_spot_lamp" title="Table 13-1. Settings for the Shadow Buffer Spot Lamps in the Bat Creature Scene">Table 13-1</a>.</p><div class="table"><a id="settings_for_the_shadow_buffer_spot_lamp"/><div class="table-title">Table 13-1. Settings for the Shadow Buffer Spot Lamps in the Bat Creature Scene</div><div class="table-contents"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"/><col class="c2"/><col class="c3"/><col class="c4"/></colgroup><thead><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Key</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Fill</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Back</p></td></tr></thead><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Filter type</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Gauss</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Gauss</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Gauss</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Soft</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>12</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>30</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>10</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Bias</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>0.2</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>0.2</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>0.2</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Sample buffers</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>1</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Size</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2048</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2048</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>2048</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><p>Samples</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; "><p>16</p></td><td style="vertical-align: top; border-right: 0.5pt solid ; "><p>16</p></td><td style="vertical-align: top; "><p>16</p></td></tr></tbody></table></div></div></div><div class="sect2" title="Lighting the Eyes"><div class="titlepage"><div><div><h3 class="title" id="lighting_the_eyes">Lighting the Eyes</h3></div></div></div><p>Eyes are a critical part of most characters, and it’s important to make sure they’re lit as you want them. Sometimes this can mean cheating by adding some separate lighting to the eyes to get the look you want. For the Bat Creature, I placed the two eye objects on their own layer (press <span class="strong"><strong>M</strong></span> to move objects to other layers) and pointed a Hemi lamp at them. I set the lamp’s intensity low (to about 0.05) so that the lighting would come predominantly from the existing spot lamps. Then, I turned off the light’s Specular option to prevent it from contributing to specular reflections. Next, I turned on This Layer Only in the lamp’s settings so that the lamp would light only the eye objects, adding a bit of extra illumination to the eyes to help them stand out more.</p></div><div class="sect2" title="Floor Shadows"><div class="titlepage"><div><div><h3 class="title" id="floor_shadows">Floor Shadows</h3></div></div></div><p>While I didn’t create a backdrop for the Bat Creature, I knew some shadow around his feet would improve my final render. To produce the shadows on their own, I used the Only Shadows option for materials. I added a plane to the scene and assigned a new material to it. Then, in the materials settings, I turned on Transparency (set to Mask), and in the Shadows panel, I turned on Only Shadows. This new material (shown in <a class="xref" href="ch13.html#using_an_only_shadows_material_to_cast_s" title="Figure 13-17. Using an Only Shadows material to cast shadows on the floor, shown here on a white background">Figure 13-17</a>) then renders as just the shadows cast by other objects, with the rest of the mesh rendering completely transparent. Later on, this will allow me to easily composite these shadows onto the background of the final render. I scaled the plane up to pick up all the shadows from the Bat Creature, using the GLSL shading mode as a guide.</p><div class="figure"><a id="using_an_only_shadows_material_to_cast_s"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00297"/><img src="httpatomoreillycomsourcenostarchimages1538836.png.jpg" alt="Using an Only Shadows material to cast shadows on the floor, shown here on a white background"/></div></div><div class="figure-title">Figure 13-17. Using an Only Shadows material to cast shadows on the floor, shown here on a white background</div></div></div><div class="sect2" title="World Settings for the Bat Creature"><div class="titlepage"><div><div><h3 class="title" id="world_settings_for_the_bat_creature">World Settings for the Bat Creature</h3></div></div></div><p><a id="iddle1152" class="indexterm"/><a id="iddle1768" class="indexterm"/><a id="iddle2057" class="indexterm"/><a id="iddle2395" class="indexterm"/><a id="iddle2703" class="indexterm"/>I didn’t need to do much in the way of World settings for the Bat Creature since I would be compositing in a simple background later; I just needed to turn on Ambient Occlusion. To do so, I enabled Ambient Occlusion in the World tab of the Properties panel and set it to Multiply with a factor of 1.0. For the Gather method, I chose Approximate. I set the number of passes to 1 and turned on Falloff with a strength of 1. These settings work well with hair, and using them meant that I wouldn’t have to do any ray tracing when rendering since I was using buffer shadows for the rest of my lighting.</p><p>This completes lighting the Bat Creature. We’ll return to rendering it in <a class="xref" href="ch14.html" title="Chapter 14. Rendering and Compositing">Chapter 14</a>.</p></div></div><div class="sect1" title="Lighting the Spider Bot"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lighting_the_spider_bot">Lighting the Spider Bot</h2></div></div></div><p>We’ll be rendering the Spider Bot with Cycles. For this project, I wanted bright, dynamic lighting to show off the character’s shiny surface. I accomplished this with a mix of mesh lights and lamp objects. Since I wouldn’t be using world lighting, I set the color of the world background to black in the World tab of the Properties editor, and I set its intensity to 0 before continuing.</p><p>The principal lighting for the Spider Bot comes from the right from a point-lamp object with an orange color and high strength, as shown in <a class="xref" href="ch13.html#adding_lights_to_the_spider_bot_scenedot" title="Figure 13-18. Adding lights to the Spider Bot scene. To the right of the Spider Bot is the orange point lamp, and above it is the grid of mesh lights with their material visible in the Node editor on the left. The Cycles render preview is a great way to get instant feedback on your lighting.">Figure 13-18</a>. This lamp is supplemented by a mesh light overhead that is composed of multiple planes with a light-emitting material. To create this light, <a id="iddle1348" class="indexterm"/><a id="iddle1676" class="indexterm"/><a id="iddle1765" class="indexterm"/><a id="iddle2706" class="indexterm"/>I added a new plane object and moved it above the scene. Then, I duplicated the face several times in Edit mode, using Blender’s snapping tools (set to Increment) to keep the planes aligned in a grid. I then scaled the whole array of planes along the <span class="emphasis"><em>x</em></span>-axis to make them rectangular.</p><p>To make these planes emit light, I assigned a new material to them, and in the Node editor, I added an Emission Shader node and attached its output to the Material Output node (see <a class="xref" href="ch13.html#adding_lights_to_the_spider_bot_scenedot" title="Figure 13-18. Adding lights to the Spider Bot scene. To the right of the Spider Bot is the orange point lamp, and above it is the grid of mesh lights with their material visible in the Node editor on the left. The Cycles render preview is a great way to get instant feedback on your lighting.">Figure 13-18</a>). I gave the Emission shader a bluish color and set its strength to 10. Because these lights are meshes, not only do they light the scene, but they also show up in the reflections on the Spider Bot’s shiny green surfaces, particularly on the back, as seen in the figure.</p><p>It’s simple to tweak the strength and color of lights in Cycles, thanks to the render preview shading mode of the 3D Viewport, which can give instant feedback on how your lighting looks as you adjust lights. (For more on the 3D Viewport render preview, see <a class="xref" href="ch14.html" title="Chapter 14. Rendering and Compositing">Chapter 14</a>.)</p><div class="figure"><a id="adding_lights_to_the_spider_bot_scenedot"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00298"/><img src="httpatomoreillycomsourcenostarchimages1538838.png.jpg" alt="Adding lights to the Spider Bot scene. To the right of the Spider Bot is the orange point lamp, and above it is the grid of mesh lights with their material visible in the Node editor on the left. The Cycles render preview is a great way to get instant feedback on your lighting."/></div></div><div class="figure-title">Figure 13-18. Adding lights to the Spider Bot scene. To the right of the Spider Bot is the orange point lamp, and above it is the grid of mesh lights with their material visible in the Node editor on the left. The Cycles render preview is a great way to get instant feedback on your lighting.</div></div></div><div class="sect1" title="Lighting the Jungle Temple"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lighting_the_jungle_temple">Lighting the Jungle Temple</h2></div></div></div><p>The Jungle Temple required a more complex lighting setup, but again, we have the Cycles render preview to give instant feedback on how our lighting looks. For this scene, I wanted to create a nighttime atmosphere with a bright, fiery orange light coming from the entrance to the temple.</p><div class="sect2" title="World Background"><div class="titlepage"><div><div><h3 class="title" id="world_background">World Background</h3></div></div></div><p>Because I would be lighting the Jungle Temple scene without world lighting, I set the world background color to black with 0 intensity.</p></div><div class="sect2" title="Temple Entrance Lighting"><div class="titlepage"><div><div><h3 class="title" id="temple_entrance_lighting">Temple Entrance Lighting</h3></div></div></div><p>Let’s start with the light coming from the temple entrance, as this is the light source with the most impact on the scene. I used a couple of light sources to create this lighting. The first is a mesh emitter at the end of the tunnel (out of sight of the camera); I assigned red and orange emission materials to it to provide orangish light throughout the tunnel and a bit beyond. I set the intensity of these emission materials to about 40.</p><p><a id="iddle1084" class="indexterm"/><a id="iddle1508" class="indexterm"/><a id="iddle2071" class="indexterm"/><a id="iddle2368" class="indexterm"/>To help spread this light further into the surroundings, I created a point-lamp object with a yellow-orange color nearer the mouth of the tunnel. I gave it a high intensity to light more of the surrounding areas and set the point-light size to 1.5 to give soft shadows. These lights can be seen in <a class="xref" href="ch13.html#lighting_of_the_temple_entrance" title="Figure 13-19. The lighting of the temple entrance">Figure 13-19</a>.</p></div><div class="sect2" title="Fill Lighting"><div class="titlepage"><div><div><h3 class="title" id="fill_lighting">Fill Lighting</h3></div></div></div><p>To add further light, I created a soft (large size) point lamp hovering over the middle of the scene to provide some general lighting. I also added a harder (small size) light behind the camera and off to one side to illuminate the foreground objects a bit. I gave both lamps a bluish color, which lent the scene a blue, moonlit look where it was not illuminated by the orange light from the tunnel. (Blue and orange also oppose one another nicely.) These lights can be seen in <a class="xref" href="ch13.html#temple_entrance_lighting_combined_with_s" title="Figure 13-20. The temple entrance lighting combined with some blue fill lighting">Figure 13-20</a>.</p></div><div class="sect2" title="Back Light"><div class="titlepage"><div><div><h3 class="title" id="back_light-id00026">Back Light</h3></div></div></div><p>I also added some illumination from the right, coming from behind the temple, to highlight the leaves and give a slight rim light to the rocks of the temple walls. This light comes from two lights: a long, shallow mesh light that illuminates mainly the backs of the leaves and a point light that provides some extra illumination from this direction (see <a class="xref" href="ch13.html#back_lighting_from_one_mesh_light_and_a" title="Figure 13-21. The back lighting from one mesh light and a point lamp">Figure 13-21</a>). The overall effect is shown in <a class="xref" href="ch13.html#lighting_for_the_jungle_temple_scenedot" title="Figure 13-22. The lighting for the Jungle Temple scene. This will later be tweaked with some compositing in Chapter 14.">Figure 13-22</a>.</p><div class="figure"><a id="lighting_of_the_temple_entrance"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00299"/><img src="httpatomoreillycomsourcenostarchimages1538840.png.jpg" alt="The lighting of the temple entrance"/></div></div><div class="figure-title">Figure 13-19. The lighting of the temple entrance</div></div></div><div class="sect2" title="A Note on Soft Shadows"><div class="titlepage"><div><div><h3 class="title" id="note_on_soft_shadows">A Note on Soft Shadows</h3></div></div></div><p>While soft shadows look nice, they can really bump up your render times. I ended up using quite a few lamps with soft shadows for this scene, and as a result, it took quite a while to render. This isn’t really a problem for stills, but bear it in mind if you want to render an animation or if you want quick results, and consider using lights with harder shadows or having some lights that don’t cast ray-traced shadows at all.</p><div class="figure"><a id="temple_entrance_lighting_combined_with_s"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00300"/><img src="httpatomoreillycomsourcenostarchimages1538842.png.jpg" alt="The temple entrance lighting combined with some blue fill lighting"/></div></div><div class="figure-title">Figure 13-20. The temple entrance lighting combined with some blue fill lighting</div></div><div class="figure"><a id="back_lighting_from_one_mesh_light_and_a"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00301"/><img src="httpatomoreillycomsourcenostarchimages1538844.png.jpg" alt="The back lighting from one mesh light and a point lamp"/></div></div><div class="figure-title">Figure 13-21. The back lighting from one mesh light and a point lamp</div></div></div></div><div class="sect1" title="General Lighting Tips"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="general_lighting_tips">General Lighting Tips</h2></div></div></div><p><a id="iddle1770" class="indexterm"/><a id="iddle2318" class="indexterm"/>Lighting makes a big difference to the feel of an image, and you can do a lot with lighting to change how your subject is perceived. Here are some tips to make your lighting render more efficiently and work better artistically.</p><p title="Experiment."><span class="title"><strong><span class="strong"><strong>Experiment.</strong></span></strong></span> I tried a lot of different lighting setups for all of my projects. For the Jungle Temple scene, I tried both daylight and nighttime lighting, and for the Bat Creature and Spider Bot, I experimented with many directions and colors. Coming up with something good requires experimentation.</p><p title="Use test renders and previews."><span class="title"><strong><span class="strong"><strong>Use test renders and previews.</strong></span></strong></span> Use Blender Internal’s GLSL shading and Cycles’s render preview for real-time previews of your lighting. Do test renders to make sure your lighting works.</p><p title="Less is more."><span class="title"><strong><span class="strong"><strong>Less is more.</strong></span></strong></span> Try to use fewer lights where possible to simplify the process of tweaking your lighting and to make it easier to see which lights most influence your image.</p><div class="figure"><a id="lighting_for_the_jungle_temple_scenedot"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00302"/><img src="httpatomoreillycomsourcenostarchimages1538846.png.jpg" alt="The lighting for the Jungle Temple scene. This will later be tweaked with some compositing in ."/></div></div><div class="figure-title">Figure 13-22. The lighting for the Jungle Temple scene. This will later be tweaked with some compositing in <a class="xref" href="ch14.html" title="Chapter 14. Rendering and Compositing">Chapter 14</a>.</div></div><p title="Shadow settings."><span class="title"><strong><span class="strong"><strong>Shadow settings.</strong></span></strong></span> While it can be tempting to turn up all the settings for your lamps to try to get the nicest shadows, it’s often not necessary to do so. Experiment and try to minimize the use of settings that increase render time significantly, such as shadow samples and shadow-buffer <a id="iddle1273" class="indexterm"/><a id="iddle1392" class="indexterm"/><a id="iddle2311" class="indexterm"/>sizes. For example, soft shadows don’t need high-resolution shadow buffers, and crisp, hard-edged shadows don’t need lots of samples. Once you have lighting you like, try to determine which settings you can turn down without affecting the look of your lighting in order to speed up renders.</p><p title="Make the most of shadow buffers."><span class="title"><strong><span class="strong"><strong>Make the most of shadow buffers.</strong></span></strong></span> The resolution of a shadow-buffer lamp is spread out over the lamp’s cone. To make the most of it, restrict the lamp by reducing its angle to cover only the model (go to Size under Spot Shape in the Object Data tab) and to make sure that you’re not wasting any of the shadow buffer’s resolution on areas that aren’t casting shadows.</p><p title="Use opposing colors."><span class="title"><strong><span class="strong"><strong>Use opposing colors.</strong></span></strong></span> Use color theory to your advantage when lighting. Often, opposing colors (pairs of colors on opposite sides of the color wheel, such as orange and blue or green and purple) work well when used as opposing key and fill lights (see <a class="xref" href="ch13.html#opposing_colors_often_make_for_pleasant" title="Figure 13-23. Opposing colors often make for pleasant lighting schemes. Left to right: Orange key light and a blue fill, blue key light and an orange fill, green key light and a purple fill.">Figure 13-23</a>). Natural light often follows this example: Sunlight is orange, while scattered light from the atmosphere is blue.</p><p title="Directional lighting and characters."><span class="title"><strong><span class="strong"><strong>Directional lighting and characters.</strong></span></strong></span> The direction you choose to light a character from can change the way it’s perceived. Lighting from above often looks regal and dignified, while lighting from below looks scary and menacing. A few examples are shown in <a class="xref" href="ch13.html#lighting_direction_changes_how_we_percei" title="Figure 13-24. Lighting direction changes how we perceive characters. Left to right: Lighting from above looks dignified, lighting from below looks spooky, and a rim light from behind gives an ominous silhouette.">Figure 13-24</a>.</p><div class="figure"><a id="opposing_colors_often_make_for_pleasant"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00303"/><img src="httpatomoreillycomsourcenostarchimages1538848.png.jpg" alt="Opposing colors often make for pleasant lighting schemes. Left to right: Orange key light and a blue fill, blue key light and an orange fill, green key light and a purple fill."/></div></div><div class="figure-title">Figure 13-23. Opposing colors often make for pleasant lighting schemes. Left to right: Orange key light and a blue fill, blue key light and an orange fill, green key light and a purple fill.</div></div><div class="figure"><a id="lighting_direction_changes_how_we_percei"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00304"/><img src="httpatomoreillycomsourcenostarchimages1538850.png.jpg" alt="Lighting direction changes how we perceive characters. Left to right: Lighting from above looks dignified, lighting from below looks spooky, and a rim light from behind gives an ominous silhouette."/></div></div><div class="figure-title">Figure 13-24. Lighting direction changes how we perceive characters. Left to right: Lighting from above looks dignified, lighting from below looks spooky, and a rim light from behind gives an ominous silhouette.</div></div></div><div class="sect1" title="In Review"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="in_review-id00027">In Review</h2></div></div></div><p>In this chapter, we looked at lighting for both Blender Internal and Cycles, beginning with a discussion of the different types of lamps that Blender offers and their functional differences in Blender Internal and Cycles. We examined different methods for dealing with shadows, both ray traced and buffered, and explored their advantages and disadvantages. We also looked at Blender’s World settings and how they impact lighting.</p><p>For the Bat Creature, we covered creating a three-point light setup to give dramatic flair to the model and looked at how best to set up shadows for characters with hair. For the Spider Bot and Jungle Temple projects, I lit the scenes using a mix of lights and mesh-emitter objects to create dynamically lit scenes. When I worked with lighting in Cycles, the Cycles render preview came in handy for getting real-time feedback on the effect of our lights. And even in Blender Internal, I used GLSL shading to get some rudimentary feedback on the lighting and shadows in the scene.</p><p>In the next chapter, we’ll render the scenes and do some final color correction and compositing for our projects. I will cover render options for both Cycles and Blender Internal and how best to optimize render times while getting the best possible renders. We’ll look at node-based compositing using Blender’s compositor, as well as creating backgrounds and doing final tweaks in GIMP.</p></div></section></body></html>