<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch1"><span epub:type="pagebreak" id="page_3"/><span class="big">1</span><br/>CALCULATING WITH HASKELL</h2>&#13;
<div class="image1"><img src="Images/common.jpg" alt="Image" width="189" height="189"/></div>&#13;
<p class="noindent">In this chapter, we’ll see how Haskell can be used as a scientific calculator. Multiple scientific functions are available by default in this calculator. In <a href="ch02.xhtml">Chapter 2</a>, we’ll write functions of our own that we can load and use. This chapter introduces some features and details of the language that will be useful later. Let’s start with a kinematics problem.</p>&#13;
<h3 class="h3" id="ch1lev1">A Kinematics Problem</h3>&#13;
<p class="noindent">Suppose we have a car on an air track. The car accelerates at a rate of 0.4 m/s<sup>2</sup>. At time <em>t</em> = 0, the car is stationary. How much time will it take for this car to travel 2 meters?</p>&#13;
<p class="indent">The acceleration is constant, so we can use the position-time equation.</p>&#13;
<div class="imagec"><img src="Images/003equ01.jpg" alt="Image" width="218" height="45"/></div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_4"/>Because the car starts at rest, we know <em>v</em>(0) = 0. Let’s assume that the car starts at position zero, the origin, so that <em>x</em>(0) = 0. We’re looking for the time <em>t</em> at which <em>x</em>(<em>t</em>) = 2 m. A little algebra tells us that</p>&#13;
<div class="imagec"><img src="Images/004equ01.jpg" alt="Image" width="129" height="63"/></div>&#13;
<p class="indent">We could solve this using pen and paper, or we could use a calculator. In this chapter, we’ll be using Haskell as our calculator.</p>&#13;
<p class="indent">In the next section, we’ll start a step-by-step explanation of how to use Haskell as a calculator. To close out this section, we’ll just show what you’d enter to calculate the time.</p>&#13;
<pre>Prelude &gt; <span class="codestrong1">sqrt (2 * 2 / 0.4)</span>&#13;
3.1622776601683795</pre>&#13;
<p class="indent">As you can see, it takes about 3.2 seconds for the car to travel 2 meters. Now, let’s look at how to start up the interactive Haskell “calculator.”</p>&#13;
<h3 class="h3" id="ch1lev2">The Interactive Compiler</h3>&#13;
<p class="noindent">The kinematics example gives us an excuse to introduce the interactive version of the Glasgow Haskell Compiler (GHC). The interactive version of GHC is called GHCi, and we can use it as a calculator. GHCi is included with the Glasgow Haskell Compiler, which is freely available at <a href="https://www.haskell.org"><em>https://www.haskell.org</em></a>. The method of starting GHCi may depend on the operating system your computer uses. Typically, you can click an icon, choose GHCi from a menu, or enter <span class="literal">ghci</span> in a command line.</p>&#13;
<p class="indent">When GHCi starts, we get a prompt at which we can enter expressions. The first prompt we get from GHCi is <span class="literal">Prelude&gt;</span>. The Prelude is a collection of constants, functions, and operators available by default, and we can immediately use it to construct expressions. GHCi indicates that the Prelude has been loaded for us by including the name <span class="literal">Prelude</span> in the prompt. GHCi is now waiting for us to enter an expression. If you type <span class="literal">2/3</span>, followed by ENTER, GHCi will evaluate this expression and print a result.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">2/3</span>&#13;
0.6666666666666666</pre>&#13;
<p class="indent">In the expression <span class="literal">2/3</span>, Haskell interprets the <span class="literal">2</span> and <span class="literal">3</span> as numbers and the <span class="literal">/</span> as a binary operator for division. GHCi performs the requested division and returns the result.</p>&#13;
<h3 class="h3" id="ch1lev3">Numeric Functions</h3>&#13;
<p class="noindent">Haskell provides functions in the Prelude to perform many of the tasks you expect from calculators. Here’s an example:</p>&#13;
<span epub:type="pagebreak" id="page_5"/>&#13;
<pre>Prelude&gt; <span class="codestrong1">log(2)</span>&#13;
0.6931471805599453</pre>&#13;
<p class="indent">This is the natural logarithm function applied to the number 2. The Haskell language does not need parentheses to apply a function. <em>Function application</em> (also known as <em>function use</em> or <em>function evaluation</em>) is such a basic idea in Haskell that the juxtaposition of two expressions is taken to mean that the first expression is a function and the second is an argument, and that the function is applied to the argument. Therefore, we can type the following:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">log 2</span>&#13;
0.6931471805599453</pre>&#13;
<p class="indent"><a href="ch01.xhtml#ch1tab1">Table 1-1</a> gives a list of numeric functions available in the Prelude.</p>&#13;
<p class="tabcap" id="ch1tab1"><strong>Table 1-1:</strong> Some Common Numeric Functions</p>&#13;
<table class="all">&#13;
<colgroup>&#13;
<col style="width:50%"/>&#13;
<col style="width:50%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Function</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Description</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">exp</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">exp <em>x</em> = <em>e<sup>x</sup></em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">sqrt</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Square root</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">abs</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Absolute value</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">log</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Natural logarithm (log base <em>e</em>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">sin</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Argument in radians</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">cos</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Argument in radians</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">tan</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Argument in radians</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">asin</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Arcsine (inverse sine)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">acos</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Arccosine</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">atan</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Arctangent</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">sinh</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">sinh <em>x</em> = (<em>e<sup>x</sup></em> – <em>e<sup>–x</sup>)/2</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">cosh</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">cosh <em>x</em> = (<em>e<sup>x</sup></em> + <em>e<sup>–x</sup>)/2</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">tanh</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">tanh <em>x</em> = (<em>e<sup>x</sup></em> – <em>e<sup>–x</sup></em>)/(<em>e<sup>x</sup></em> + <em>e <sup>–x</sup></em>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">asinh</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Inverse hyperbolic sine</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">acosh</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Inverse hyperbolic cosine</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba"><span class="literal">atanh</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">Inverse hyperbolic tangent</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">Haskell also provides the constant <em>π</em> in the Prelude.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">pi</span>&#13;
3.141592653589793</pre>&#13;
<p class="indent">Here is a trigonometric function:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">cos pi</span>&#13;
-1.0</pre>&#13;
<p class="indent">Notice that trigonometric functions in Haskell expect an argument in radians.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_6"/>Now, let’s calculate cos <img class="inline" src="Images/006equ01.jpg" alt="Image" width="11" height="24"/>.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">cos pi/2</span>&#13;
-0.5</pre>&#13;
<p class="indent">The computer did not give us what we expect here; cos <img class="inline" src="Images/006equ01.jpg" alt="Image" width="11" height="24"/> = 0, not –0.5. The reason is that function application in Haskell has higher <em>precedence</em> than division, so Haskell interprets what we typed as</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">(cos pi)/2</span>&#13;
-0.5</pre>&#13;
<p class="noindent">rather than dividing <em>π</em> by 2 first and then taking the cosine. We can get what we want by supplying parentheses.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">cos (pi/2)</span>&#13;
6.123233995736766e-17</pre>&#13;
<p class="indent">Is the result the computer gave <img class="inline" src="Images/006equ02.jpg" alt="Image" width="55" height="25"/> Not exactly. Here we see an example of an approximately computed result. My computer gave something times 10<sup>–17</sup>, which is as close to zero as the computer can get here. It’s good to remember that when doing numerical work, the computer (like your calculator) is not giving exact results most of the time. It is giving us approximate results. We must be vigilant in making sure that the results it gives are valuable to us by interpreting them correctly. After we discuss Haskell’s system of types in <a href="ch03.xhtml">Chapter 3</a>, we’ll say more about when we can and when we cannot expect the computer to produce exact results.</p>&#13;
<h3 class="h3" id="ch1lev4">Operators</h3>&#13;
<p class="noindent">The Haskell Prelude provides several <em>binary operators</em>, shown in <a href="ch01.xhtml#ch1tab2">Table 1-2</a>. Binary operators act on two inputs, or <em>arguments</em>, to produce a result. For example, the addition operator (+) is a binary operator because it takes two inputs and adds them. In computer science generally, an operator placed before its arguments is called a prefix operator, an operator placed after its arguments is called a postfix operator, and an operator placed between its arguments is called an infix operator. In Haskell, the term <em>operator</em> implies infix operator, although in <a href="ch06.xhtml">Chapter 6</a> we’ll see how to turn an infix operator into a prefix operator.</p>&#13;
<p class="indent"><a href="ch01.xhtml#ch1tab2">Table 1-2</a> shows common Haskell operators, along with their precedence and associativity, which are explained next. The operators for addition, subtraction, multiplication, and division work pretty much as you would expect.</p>&#13;
<p class="tabcap" id="ch1tab2"><span epub:type="pagebreak" id="page_7"/><strong>Table 1-2:</strong> Precedence and Associativity for Common Operators</p>&#13;
<table class="all">&#13;
<colgroup>&#13;
<col style="width:25%"/>&#13;
<col style="width:25%"/>&#13;
<col style="width:25%"/>&#13;
<col style="width:25%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Operation</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Operator(s)</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Precedence</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Associativity</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Composition</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">.</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">9</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Right</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Exponentiation</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">^, ^^, **</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">8</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Right</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Multiplication, division</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">*, /</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">7</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Left</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Addition, subtraction</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">+, -</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">6</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Left</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">List operators</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">:, ++</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">5</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Right</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Equality, inequality</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">==, /=</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">4</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"/></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Comparison</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">&lt;, &gt;, &lt;=, &gt;=</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">4</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"/></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Logical AND</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">&amp;&amp;</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">3</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">Right</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Logical OR</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba"><span class="literal">||</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">2</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">Right</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">Application</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba"><span class="literal">$</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">0</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">Right</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">The table also shows three different operators for exponentiation. This proliferation is related to Haskell’s type system, which we’ll say more about in <a href="ch03.xhtml">Chapters 3</a> and <a href="ch08.xhtml">8</a>.</p>&#13;
<p class="indent">The caret operator (<span class="literal">^</span>) can only handle nonnegative integer exponents. The expression <span class="literal">x^n</span> means the product of <span class="literal">n</span> factors of <span class="literal">x</span>. The double caret (<span class="literal">^^</span>) can handle any integer exponent. The <span class="literal">**</span> operator can handle any real exponent. For now, I recommend using <span class="literal">**</span> for exponentiation.</p>&#13;
<p class="indent">The equality, inequality, and comparison operators can be used between numeric expressions.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">pi &gt; 3</span>&#13;
True</pre>&#13;
<p class="indent">The result of a comparison is a Boolean expression, either <span class="literal">True</span> or <span class="literal">False</span>. <a href="ch05.xhtml">Chapter 5</a> covers the list operators <span class="literal">:</span> and <span class="literal">++</span> from <a href="ch01.xhtml#ch1tab2">Table 1-2</a>.</p>&#13;
<h4 class="h4" id="ch1lev5">Precedence and Associativity</h4>&#13;
<p class="noindent">As we saw earlier when we tried to take the cosine of <em>π</em>/2, function application takes precedence over infix operators. In addition, some operators take precedence over other operators. In the expression</p>&#13;
<pre>Prelude&gt;  <span class="codestrong1">1 + 2 * 3</span>&#13;
7</pre>&#13;
<p class="noindent">the multiplication of 2 and 3 will occur before the addition with 1. This is consistent with usual mathematical convention. To carry this out, binary operators in Haskell have a precedence associated with them that describes <span epub:type="pagebreak" id="page_8"/>which operations should be carried out first. Binary operators have a precedence from 0 to 9. An operation with a higher precedence number means that operation will be carried out first. For example, addition and subtraction have a precedence of 6 in Haskell, while the precedence of multiplication and division is 7 and the precedence of exponentiation is 8. The OR operation <span class="literal">||</span> between Boolean values has a precedence of 2, and the AND operation <span class="literal">&amp;&amp;</span> has a precedence of 3.</p>&#13;
<p class="indent">The far-right column of <a href="ch01.xhtml#ch1tab2">Table 1-2</a> lists the <em>associativity</em> of some operators. Consider the expression <span class="literal">8 - 3 - 2</span>. There are two ways in which this expression might be interpreted. The standard mathematical convention is that the expression is shorthand for (8 – 3) – 2, which evaluates to 3. But another interpretation is that the expression is shorthand for 8 – (3 – 2), which evaluates to 7. Clearly, it’s important for us to understand which of these two interpretations is correct for the original expression, and that is where associativity comes in. Looking at <a href="ch01.xhtml#ch1tab2">Table 1-2</a>, we see that subtraction is left associative. This means that the leftmost subtraction is carried out first, resulting in the first interpretation given earlier (resulting in 3, not 7). Precedence and associativity allow us to unambiguously determine which operators act first.</p>&#13;
<p class="indent">The purpose in learning the precedence and associativity rules is so we can avoid using parentheses as much as possible. Multiple levels of nested expressions make things hard to read. My advice is to never try to use more than two levels of nested parentheses. In addition to knowing the precedence and associativity rules, there are other ways to avoid the use of parentheses, such as defining a local variable. We’ll discuss these later.</p>&#13;
<p class="indent">Let’s add parentheses to the following expression to indicate the order in which Haskell’s precedence and associativity rules would evaluate the expression.</p>&#13;
<pre>8 / 7 / 4 ** 2 ** 3 &gt; sin pi/4</pre>&#13;
<p class="indent">Function application takes precedence over all operators, so sin pi is the first thing calculated.</p>&#13;
<pre>8 / 7 / 4 ** 2 ** 3 &gt; (sin pi)/4</pre>&#13;
<p class="indent">Next, exponentiation is the operator in the expression with the highest precedence in <a href="ch01.xhtml#ch1tab2">Table 1-2</a>. Exponentiation occurs twice, and because it is right associative, the rightmost exponentiation occurs next.</p>&#13;
<pre>8 / 7 / 4 ** (2 ** 3) &gt; (sin pi)/4</pre>&#13;
<p class="indent">Next is the left exponentiation.</p>&#13;
<pre>8 / 7 / (4 ** (2 ** 3)) &gt; (sin pi)/4</pre>&#13;
<p class="indent">Next is division. There are three divisions. The rightmost division is unproblematic, but we need to resolve the two divisions on the left of the expression by associativity rules. Division is left associative.</p>&#13;
<pre>(8 / 7) / (4 ** (2 ** 3)) &gt; ((sin pi)/4)</pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_9"/>Note we have inserted two sets of parentheses in the last step. One is for the rightmost division and one is for the leftmost division. Now we can put parentheses in for the final division, which occurs before the comparison.</p>&#13;
<pre>((8 / 7) / (4 ** (2 ** 3))) &gt; ((sin pi)/4)</pre>&#13;
<p class="indent">The last operator to act is the comparison operator <span class="literal">&gt;</span>. There is no need to put parentheses around the entire expression, so we are done. The fully parenthesized expression is</p>&#13;
<pre>((8 / 7) / (4 ** (2 ** 3))) &gt; ((sin pi)/4)</pre>&#13;
<h4 class="h4" id="ch1lev6">The Application Operator</h4>&#13;
<p class="noindent">The operator <span class="literal">$</span> in <a href="ch01.xhtml#ch1tab2">Table 1-2</a> is called the function application operator. No operator is required to apply a function. Juxtaposition of two expressions means that the first is a function and the second is an argument, and that the function is to be applied to the argument.</p>&#13;
<p class="indent">The function application operator does nothing but apply the function on its left to the expression on its right.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">cos pi</span>&#13;
-1.0&#13;
Prelude&gt; <span class="codestrong1">cos $ pi</span>&#13;
-1.0  &#13;
Prelude&gt; <span class="codestrong1">cos $ pi / 2</span>&#13;
6.123233995736766e-17</pre>&#13;
<p class="indent">The key to its use lies in the fact that it has a precedence of 0. This means that the operator <span class="literal">$</span> changes application from the <em>first</em> thing to be done to the <em>last</em> thing to be done. In this way, the <span class="literal">$</span> serves as a kind of one-symbol parentheses. Instead of putting parentheses around <span class="literal">pi / 2</span> in the example above, we can use the single-symbol function application operator. Because it has right associativity, the function application operator is a frequent Haskell idiom that makes nested applications (<span class="literal">h <span class="literal">$</span> g <span class="literal">$</span> f x</span>) easier to read.</p>&#13;
<h3 class="h3" id="ch1lev7">Functions with Two Arguments</h3>&#13;
<p class="noindent">All of the functions in <a href="ch01.xhtml#ch1tab1">Table 1-1</a> take one real number as input and give a real number as output (assuming the input is in the domain of the function). There are also a couple of useful numeric functions that take two real numbers as input. These are listed in <a href="ch01.xhtml#ch1tab3">Table 1-3</a>.</p>&#13;
<p class="tabcap" id="ch1tab3"><strong>Table 1-3:</strong> Numeric Functions with Two Arguments</p>&#13;
<table class="all">&#13;
<colgroup>&#13;
<col style="width:50%"/>&#13;
<col style="width:50%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Function</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Example</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">logBase</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba"><span class="literal">logBase 10 100 = 2</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba"><span class="literal">atan2</span></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba"><span class="literal">atan2 1 0 = <span class="codeitalic1">π</span>/2</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_10"/>Let’s look at these functions in action:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">logBase 10 100</span>&#13;
2.0  &#13;
Prelude&gt; <span class="codestrong1">atan2 1 0</span>&#13;
1.5707963267948966</pre>&#13;
<p class="indent">The <span class="literal">logBase</span> function takes two arguments: the first is the base of the logarithm and the second is the number we wish to take the log of.</p>&#13;
<p class="indent">The <span class="literal">atan2</span> function solves a problem you may have run into if you’ve tried to use the inverse tangent function to convert from Cartesian to polar coordinates. Consider the following equations for polar coordinates (<em>r, θ</em>) in terms of Cartesian coordinates (<em>x, y</em>):</p>&#13;
<div class="imagec"><img src="Images/010equ01.jpg" alt="Image" width="122" height="72"/></div>&#13;
<p class="indent">Suppose that we’re trying to find the polar coordinates associated with the point <img class="inline" src="Images/010equ02a.jpg" alt="Image" width="145" height="25"/>. The answer needs to be a point in the third quadrant because <em>x</em> and <em>y</em> are both negative. This means <em>θ</em> should be in the range <em>π</em> &lt; <em>θ</em> &lt; 3<em>π</em>/2 (or – <em>π</em> &lt; <em>θ</em> &lt; –<em>π</em>/2). But if we mechanically apply the formula above for <em>θ</em>, we’ll calculate <img class="inline" src="Images/010equ02.jpg" alt="Image" width="89" height="24"/>, which our calculator or computer will tell us is <em>π</em>/3. The problem is the domain of the inverse tangent function, and a solution is to use the <span class="literal">atan2</span> function instead of the <span class="literal">atan</span> function. The result of <span class="literal">atan2</span> <em>y x</em> will give the angle, in radians, in the correct quadrant.</p>&#13;
<p class="indent">Note how the two arguments are given to the functions <span class="literal">logBase</span> and <span class="literal">atan2</span>. In particular, there is no comma between the two argument values, as would be required in traditional mathematical notation.</p>&#13;
<h3 class="h3" id="ch1lev8">Numbers in Haskell</h3>&#13;
<p class="noindent">A few details about numbers in Haskell are not intuitive for someone coming to the language for the first time. In this section, we point out some issues related to negative numbers, decimals, and exponential notation.</p>&#13;
<h4 class="h4" id="ch1lev9">Negative Numbers in Haskell</h4>&#13;
<p class="noindent">If you try the code</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">5 * -1</span>&#13;
&#13;
&lt;interactive&gt;:15:1: error:&#13;
    Precedence parsing error&#13;
        cannot mix '*' [infixl 7] and prefix `-' [infixl 6] in the same infix&#13;
            expression</pre>&#13;
<p class="noindent">you will get an error, although the meaning of the expression seems clear enough: we want to multiply 5 by – 1. The trouble here is that the minus sign <span epub:type="pagebreak" id="page_11"/>acts as both a binary operator (as in the expression 3 – 2) and a unary operator (as in the expression – 2). Binary operators play an important role in Haskell, and the syntax of the language supports their use in a consistent, unified way. Unary operators in Haskell are much more of a special case; in fact, the minus sign is the only one. Because of decisions the Haskell designers made (see <em><a href="https://wiki.haskell.org/Unary_operator">https://wiki.haskell.org/Unary_operator</a></em>), negative numbers are sometimes not recognized as readily as you might expect.</p>&#13;
<p class="indent">The solution is simply to enclose negative numbers in parentheses. For example,</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">5 * (-1)</span>&#13;
-5</pre>&#13;
<p class="noindent">evaluates to – 5.</p>&#13;
<h4 class="h4" id="ch1lev10">Decimal Numbers in Haskell</h4>&#13;
<p class="noindent">A number containing a decimal point must have digits (0 through 9) both before and after the decimal point. Thus, we must write <span class="literal">0.1</span> and not <span class="literal">.1</span>; instead of <span class="literal">5.</span>, we must write either <span class="literal">5.0</span> or <span class="literal">5</span> without a decimal point. The reason is that the dot character serves another role in the language (namely function composition, mentioned in the top line of <a href="ch01.xhtml#ch1tab2">Table 1-2</a>, which we’ll study further in <a href="ch02.xhtml">Chapter 2</a>). The rule requiring digits before and after a decimal point helps the compiler distinguish the meaning of the dot character.</p>&#13;
<h4 class="h4" id="ch1lev11">Exponential Notation</h4>&#13;
<p class="noindent">You can use exponential notation to describe numbers in Haskell that are very big or very small. Here are a few examples:</p>&#13;
<table class="all5">&#13;
<colgroup>&#13;
<col style="width:60%"/>&#13;
<col style="width:40%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Mathematical notation</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Haskell notation</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">3.00 × 10<sup>8</sup></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">3.00e8</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">6.63 × 10<sup>–34</sup></p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">6.63e-34</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">Haskell will also use exponential notation to show you numbers that turn out to be very big or very small.</p>&#13;
<table class="all5">&#13;
<colgroup>&#13;
<col style="width:30%"/>&#13;
<col style="width:30%"/>&#13;
<col style="width:40%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Expression</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong> </strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Evaluates to</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">8**8</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">⇝</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">1.6777216e7</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">8**(-8)</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">⇝</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">5.960464477539063e-8</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<h3 class="h3" id="ch1lev12">Approximate Calculation</h3>&#13;
<p class="noindent">Most of the calculations we will do are not exact calculations. When we ask the computer to find the square root of 5,</p>&#13;
<pre><span epub:type="pagebreak" id="page_12"/>Prelude&gt; <span class="codestrong1">sqrt 5</span>&#13;
2.23606797749979</pre>&#13;
<p class="noindent">it gives a very accurate result, but it is not an exact result. This is because the computer uses a finite number of bits to represent this number and cannot represent every conceivable number.</p>&#13;
<p class="indent">If you evaluate <span class="literal">sqrt 5 ^ 2</span> in GHCi, you may not get exactly 5.0 as a result.</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">sqrt 5 ^ 2</span>&#13;
5.000000000000001</pre>&#13;
<p class="indent">The computer does not represent <img class="inline" src="Images/root5.jpg" alt="Image" width="28" height="22"/> exactly. We can even ask the following in GHCi:</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">sqrt 5 ^ 2 == 5</span>&#13;
False</pre>&#13;
<p class="indent">My computer gives <span class="literal">False</span> because of the approximate calculation.</p>&#13;
<p class="indent">Another source of non-exactness in calculation comes from the computer’s use of a binary (base 2) internal representation of numbers. When I multiply 3 × 0.2, I don’t get exactly 0.6. Why? The reason is that 0.2, which has a nice finite decimal (base 10) representation, has a repeating binary (base 2) representation. Just like the fraction 1/3 has an infinite repeating representation in base 10 (0.333333. . .), the fraction 1/5 has an infinite repeating representation in base 2. <a href="ch01.xhtml#ch1tab4">Table 1-4</a> shows representations of some simple fractions in decimal (base 10) and binary (base 2).</p>&#13;
<p class="tabcap" id="ch1tab4"><strong>Table 1-4:</strong> Representations of Numbers in Base 10 and Base 2</p>&#13;
<table class="all">&#13;
<colgroup>&#13;
<col style="width:30%"/>&#13;
<col style="width:30%"/>&#13;
<col style="width:40%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Number</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Decimal</strong></p></th>&#13;
<th style="vertical-align: top;" class="table-h"><p class="taba"><strong>Binary</strong></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">1/2</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">0.5</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">0.1</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">1/3</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">0.333333...</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw"><p class="taba">0.01010101...</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">1/4</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">0.25</p></td>&#13;
<td style="vertical-align: top;" class="table-1b"><p class="taba">0.01</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">1/5</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">0.2</p></td>&#13;
<td style="vertical-align: top;" class="table-1bw_bot"><p class="taba">0.001100110011...</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">The computer converts every number that we supply in decimal into its internal binary form and only keeps a finite number of digits (bits, really). Most of the time, we don’t need to be concerned with this, but it explains why some calculations that seem like they should be exactly calculable are not. One moral of this story is never to do equality checking of numbers when either number has been approximately calculated.</p>&#13;
<h3 class="h3" id="ch1lev13">Errors</h3>&#13;
<p class="noindent">People make mistakes. This is as it should be. When you enter something the computer does not understand, it will give you an error message. These <span epub:type="pagebreak" id="page_13"/>messages can appear intimidating, but they are a great opportunity for learning, and it’s worthwhile to learn how to read them.</p>&#13;
<p class="indent">We saw a “Precedence parsing error” in “Numbers in Haskell” when we tried to multiply 5 by – 1 without enclosing the – 1 in parentheses. Another error you’re bound to run into sooner or later is “No instance for Show.”</p>&#13;
<p class="indent">There are some completely legitimate, well-defined expressions in Haskell that have no good way of being shown on the screen. Functions are the most common example. Because a function can accept a wide variety of inputs and produce a wide variety of outputs, there is in general no good way of displaying the “value” of a function. If you ask GHCi to tell you what the square root function “is,” it will complain that it knows no way to show it to you by saying that is has “No instance for Show.”</p>&#13;
<pre>Prelude&gt; <span class="codestrong1">sqrt</span>&#13;
&#13;
&lt;interactive&gt;:25:1: error:&#13;
    • No instance for (Show (Double -&gt; Double))&#13;
        arising from a use of 'print'&#13;
        (maybe you haven't applied a function to enough arguments?)&#13;
    • In a stmt of an interactive GHCi command: print it</pre>&#13;
<p class="indent">This message is not due to an error at all. The <span class="literal">sqrt</span> function is a completely legitimate Haskell expression. GHCi is merely saying that it knows no way to display it.</p>&#13;
<h3 class="h3" id="ch1lev14">Getting Help and Quitting</h3>&#13;
<p class="noindent">To ask GHCi for help, enter <span class="literal">:help</span> (or <span class="literal">:h</span>). To leave GHCi, enter <span class="literal">:quit</span> (or <span class="literal">:q</span>).</p>&#13;
<p class="indent">Commands that start with a colon do not belong to the Haskell programming language proper but rather to the GHCi interactive compiler, and they control its operation. We will see more of these commands that start with colons later.</p>&#13;
<h3 class="h3" id="ch1lev15">More Information</h3>&#13;
<p class="noindent">To learn more about the Haskell programming language (of which GHCi is a popular implementation), you can visit the website <a href="https://www.haskell.org">https://www.haskell.org</a>.</p>&#13;
<p class="indent">The <em><a href="http://haskell.org">haskell.org</a></em> website has links to many online and paper sources for learning the language. Some particularly good ones are <em>Learn You a Haskell for Great Good!</em> [<strong><a href="bib.xhtml#bib1"><span class="green">1</span></a></strong>] (<a href="http://learnyouahaskell.com">http://learnyouahaskell.com</a>) and <em>Real World Haskell</em> [<strong><a href="bib.xhtml#bib2"><span class="green">2</span></a></strong>] (<a href="http://book.realworldhaskell.org">http://book.realworldhaskell.org</a>).</p>&#13;
<h3 class="h3" id="ch1lev16">Summary</h3>&#13;
<p class="noindent">In this chapter, we saw how to use GHCi as a calculator. GHCi comes equipped with an array of scientific functions and operators. The operators have precedence and associativity rules that determine the order in which they are carried out. These rules are useful to know and use so we can reduce the <span epub:type="pagebreak" id="page_14"/>number of parentheses in our expressions. Function application has higher precedence than any operator. Negative numbers sometimes need parentheses around them to be parsed correctly. Numbers with a decimal point require a digit both before and after it. Many calculations the computer makes are approximate. Errors should be thought of as helpful hints; it is a useful attitude to be curious about errors. Patience and persistence in the face of errors are part of the path to understanding.</p>&#13;
<p class="indent">In the next chapter, we’ll show how to define our own functions and load them into GHCi.</p>&#13;
<h3 class="h3" id="ch1lev17">Exercises</h3>&#13;
<p class="noindentts"><strong>Exercise 1.1.</strong> Evaluate <span class="literal">sin 30</span> in GHCi. Why is it not equal to 0.5?</p>&#13;
<p class="noindentts"><strong>Exercise 1.2.</strong> Add parentheses to the following expressions to indicate the order in which Haskell’s precedence and associativity rules would evaluate the expressions:</p>&#13;
<p class="alphats">(a) <span class="literal">2 ^ 3 ^ 4</span></p>&#13;
<p class="alpha">(b) <span class="literal">2 / 3 / 4</span></p>&#13;
<p class="alpha">(c) <span class="literal">7 - 5 / 4</span></p>&#13;
<p class="alpha">(d) <span class="literal">log 49/7</span></p>&#13;
<p class="noindentts"><strong>Exercise 1.3.</strong> Use GHCi to find log<sub>2</sub> 32.</p>&#13;
<p class="noindentts"><strong>Exercise 1.4.</strong> Use the <span class="literal">atan2</span> function in GHCi to find the polar coordinates (<em>r,θ</em>) associated with Cartesian coordinates (<em>x, y</em>) = (–3,4).</p>&#13;
<p class="noindentts"><strong>Exercise 1.5.</strong> Find a new example of a calculation in which the computer produces a result that is just a little bit different from the exact result.</p>&#13;
<p class="noindentts"><strong>Exercise 1.6.</strong> Why is there no associativity listed for the equality, inequality, and comparison operators in <a href="ch01.xhtml#ch1tab2">Table 1-2</a>? (Hint: write down the simplest expression you can think of that would require the associativity rules to resolve the precedence of comparison operators and try to make sense of it.)</p>&#13;
</div></body></html>