<html><head></head><body>
  <div class="chapter" title="Chapter&#xA0;7.&#xA0;The Magic of Methods and Blocks">&#13;
    <div class="titlepage">&#13;
      <h1 class="title" id="heading_id_2"><a id="magic_of_methods_and_blocks"/>Chapter 7. The Magic of Methods and Blocks</h1>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="A Method to the Madness">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_3"><a id="method_to_the_madness"/>A Method to the Madness</h1>&#13;
      </div>&#13;
&#13;
      <p><a class="indexterm" id="iddle1826"/>“I think that’s the last of it!” Squeaky Jim said, sweeping a pile of stray hash into his dustpan. “That was some mid-morning rush!”</p>&#13;
&#13;
      <p>“I’ll say,” said Big Hank. He hefted a huge green compost bag onto his shoulder and grinned at the King, Scarlet, and Ruben. “Thanks for all your help today! We’d have been in a terrible pickle if you all hadn’t been here to lend a hand.”</p>&#13;
&#13;
      <p>“Our pleasure!” said Ruben, who was packing three to-go boxes of hash and eggs. “The food here is terrific!”</p>&#13;
&#13;
      <p>“Definitely!” said Scarlet. “Will you be okay for the lunch crowd? We had a lot of fun, and we can help some more if you need it.”</p>&#13;
&#13;
      <p>Hank laughed as he tossed bag after bag into the kitchen’s enormous compost bin. “The Hashery is more of a breakfast and brunch operation,” he said. “The lunch crowd is usually pretty thin. I think we’ll be okay.” He dusted his hands off and looked around. “What are you up to for the rest of the day?”</p>&#13;
&#13;
      <p>“Well,” the King said, “since we’ve come down this way, I was thinking we could—”</p>&#13;
&#13;
      <p>“Hang on a second. What’s this?” Scarlet interrupted, pulling a handful of what had appeared to be stray hash out of Squeaky Jim’s dustpan.</p>&#13;
&#13;
      <p>Squeaky Jim bent down to look at it. “Mostly mud,” he said.</p>&#13;
&#13;
      <p>“But what are these little red needles?” she asked. “And this shiny green thing?”</p>&#13;
&#13;
      <p>The King pulled a small magnifying glass from his kingly robe and leaned in to get a better look.</p>&#13;
&#13;
      <p>“Aha! I’ve seen those red needles before,” said the King. “Those come from the Carmine Pines.” He examined the shiny green thing for a minute. “But this,” he said, stroking his fluffy white beard, “this is something I’ve never come across in all my years of kinging about.”</p>&#13;
&#13;
      <p>“It looks like a scale,” Ruben said. “Like from a fish or a lizard!”</p>&#13;
&#13;
      <p>“Sweet corn muffins!” said the King. “You’re right! But it’s too big to be from any normal fish or lizard. Where could it have come from?”</p>&#13;
&#13;
      <p>“One thing at a time,” Scarlet said. “What are the Carmine Pines?”</p>&#13;
&#13;
      <p>“The Carmine Pines are a vast red forest on the eastern edge of the kingdom,” the King replied. “Only a few minutes’ walk from here, in fact.”</p>&#13;
&#13;
      <p>Scarlet turned the scale over in her palm. “Have you ever seen anything like this, Hank? Jim?”</p>&#13;
&#13;
      <p>“Never,” said Jim, and Hank shook his head.</p>&#13;
&#13;
      <p>Scarlet thought for a moment. “If this might be a clue to why the Hashery computer malfunctioned, we should investigate,” she said. “The sooner, the better!”</p>&#13;
&#13;
      <p>The King nodded vigorously. “This way,” he said. He turned to Big Hank and Squeaky Jim. “Thanks again for a lovely meal, guys!” he said. “I’ll be in again tomorrow!”</p>&#13;
&#13;
      <p>“Our pleasure, Your Majesty!” Hank smiled, and he and Squeaky Jim bowed.</p>&#13;
&#13;
      <p>Waving goodbye to Hank and Jim, the King, Ruben, and Scarlet stepped out of the Hashery and into the bright, late-mid-morning light.</p>&#13;
&#13;
      <p>“Right over there!” said the King, standing on tiptoe and pointing. The red treetops of the Carmine Pines were visible less than a mile away.</p>&#13;
&#13;
      <p>“Well, let’s get going,” Ruben said. “There’s still plenty of day left, and it’ll only take a few minutes.” With that, the three of them set out toward the forest.</p>&#13;
&#13;
      <p>“You know,” Scarlet said after a while, “I don’t think these Ruby malfunctions have been accidents at all.”</p>&#13;
&#13;
      <p>“Really?” asked the King.</p>&#13;
&#13;
      <p>“Think about it!” said Scarlet. “Your string goes missing, the Mysterious Pipe overflows, the Loop goes crazy, and the Hashery’s Computing Contraption goes haywire—all in the same day?”</p>&#13;
&#13;
      <p>“Well, the string bit might have been my fault,” the King said, sheepishly.</p>&#13;
&#13;
      <p>“Either way, I think Scarlet’s on to something,” Ruben said. “I think this is . . . <span class="smaller">SABOTAGE</span>!”</p>&#13;
&#13;
      <p>“Great coats! Sabotage?” said the King. “Who would do such a thing?”</p>&#13;
&#13;
      <p>“I don’t know,” replied Scarlet, “but one way or another, we’ll find out!”</p>&#13;
&#13;
      <p>After a few more minutes of walking, the trio arrived at the edge of the Carmine Pines. Enormous pine trees towered over them, their red needles glinting in the sun.</p>&#13;
&#13;
      <div class="informalfigure">&#13;
        <a id="med_id00033a"/>&#13;
&#13;
        <div class="mediaobject"><a id="med_id00033"/><img alt="image with no caption" src="../Images/httpatomoreillycomsourcenostarchimages2160019.png.jpg"/></div>&#13;
      </div>&#13;
&#13;
      <p>Scarlet reached up with one hand and pulled down a handful of needles. She dug through her pocket with her other hand and pulled out the needles she’d found in Jim’s dustpan. The King examined both with his magnifying glass for nearly a minute.</p>&#13;
&#13;
      <p>“Absolutely the same,” he said at last. “These needles are from the Pines, all right!”</p>&#13;
&#13;
      <p>“You were right!” said Ruben. “But what do we do now that we’re here?”</p>&#13;
&#13;
      <p>“I imagine we’ll ask for a bit of help from someone who knows the area,” the King said.</p>&#13;
&#13;
      <p>“How?” asked Scarlet and Ruben together.</p>&#13;
&#13;
      <p>“With a Computing Contraption, of course!” said the King.</p>&#13;
&#13;
      <p>Scarlet looked around. “But we’re in the middle of the forest!” she said. “There are no Computing Contraptions between here and the Hashery.”</p>&#13;
&#13;
      <p>“Computing Contraptions are everywhere in the kingdom,” the King said. “You just have to know where to look.” He reached up and pulled on the lowest branch of a nearby tree, and a cleverly hidden Computing Contraption swung out from inside the tree’s trunk.</p>&#13;
&#13;
      <p>“Wow!” said Ruben. “Now what?”</p>&#13;
&#13;
      <p>“Well, I imagine we’ll need to use Ruby to figure out who lives here in the Pines,” the King said. “Even if we don’t find the owner of our shiny green scale, we might at least find someone to help us out.”</p>&#13;
&#13;
      <p>“Perfect!” said Scarlet. “So there’s a directory of people who live in the Kingdom stored in each Computing Contraption?”</p>&#13;
&#13;
      <p>“Well, yes,” said the King, rubbing his head. “But here’s the rub. I don’t know much about Ruby, but I <span class="emphasis"><em>do</em></span> recall hearing once that there’s actually no built-in method to get a list of all those people.”</p>&#13;
&#13;
      <p>Ruben sat down on a flat rock. “No method!” he said. “How are we supposed to find someone to help us if Ruby doesn’t have a built-in method for it?”</p>&#13;
&#13;
      <p>Scarlet thought for a minute. “Well,” she said, “I <span class="emphasis"><em>think</em></span> it’s possible to write our very own Ruby methods, but I’ve never actually seen it done before.”</p>&#13;
&#13;
      <p>“Write our own Ruby methods?” asked the King. “That would be marvelous! Are you sure it’s possible?”</p>&#13;
&#13;
      <p>“Of course it’s possible!” cried a nearby voice. The King and Scarlet both jumped, and Ruben nearly fell off his rock. They all turned in the direction of the voice to see, standing only a few yards away from them . . . a knight, with sword drawn!</p>&#13;
&#13;
      <p>“Agh!” Ruben shouted, and tried to hide behind his rock.</p>&#13;
&#13;
      <p>“What in the name of midnight snack marzipan is the meaning of this?” demanded the King.</p>&#13;
&#13;
      <p>The knight froze, then hastily pushed her visor up on her helmet.</p>&#13;
&#13;
      <p>“Your Majesty!” she cried, and bowed deeply. “A bajillion apologies! I didn’t recognize you with my visor down.” She quickly slid her sword back into its scabbard.</p>&#13;
&#13;
      <p>“A lady knight!” said Scarlet.</p>&#13;
&#13;
      <p>“No, just a knight,” said the King. “After all, if she were a man, you wouldn’t say, ‘A man knight,’ would you?”</p>&#13;
&#13;
      <p>“I suppose not,” admitted Scarlet.</p>&#13;
&#13;
      <p>“Who are you?” Ruben asked.</p>&#13;
&#13;
      <div class="informalfigure">&#13;
        <a id="med_id00034a"/>&#13;
&#13;
        <div class="mediaobject"><a id="med_id00034"/><img alt="image with no caption" src="../Images/httpatomoreillycomsourcenostarchimages2160021.png.jpg"/></div>&#13;
      </div>&#13;
&#13;
      <p>The knight stood tall and proudly put her hands on her hips. “I’m the Off-White Knight!” she replied.</p>&#13;
&#13;
      <p>“Off-white?” asked the King. “Your armor is more of an eggshell color, I think.”</p>&#13;
&#13;
      <p>“Maybe an ecru,” Scarlet said, squinting.</p>&#13;
&#13;
      <p>“I think that’s a large bird,” said the King.</p>&#13;
&#13;
      <p>“Enough tomfoolery!” said the knight. “I am the <span class="emphasis"><em>Off-White</em></span> Knight, and now it’s time for you to <span class="smaller">DEFEND</span> yourselves!”</p>&#13;
&#13;
      <p><a class="indexterm" id="iddle1227"/><a class="indexterm" id="iddle1273"/><a class="indexterm" id="iddle1528"/><a class="indexterm" id="iddle1650"/>“Agh!” shouted Ruben again, covering his head with his hands.</p>&#13;
&#13;
      <p>The knight tried to scratch her head, but ended up scratching the outside of her helmet. “Why are you cowering like that?” she asked.</p>&#13;
&#13;
      <p>“Aren’t you going to slay us?” Ruben asked.</p>&#13;
&#13;
      <p>The Off-White Knight laughed. “Heavens, no!” she said. “In fact, it’s my knightly duty to help anyone in the Carmine Pines who needs assistance, so I’ll show you how to write your own Ruby methods.”</p>&#13;
&#13;
      <p>“But it’s daytime,” said the King.</p>&#13;
&#13;
      <p>Ruben and Scarlet gave each other a knowing look.</p>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="Defining Your Own Methods">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_4"><a id="defining_your_own_methods"/>Defining Your Own Methods</h1>&#13;
      </div>&#13;
&#13;
      <p>The Off-White Knight cleared her throat. “Yes. Well,” she said, “what I was trying to say was that you certainly <span class="emphasis"><em>can</em></span> define your own Ruby methods. You simply need to use the special words <code class="literal">def</code> and <code class="literal">end</code>.” She walked up to the cleverly disguised Computing Contraption and began typing.</p><a id="pro_id00166"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def simon_says(phrase)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">return phrase</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
</pre>&#13;
&#13;
      <p>“You start by typing <code class="literal">def</code>, which is short for <span class="emphasis"><em>define</em></span>, because you’re defining a brand-new method. Next, you type the name of your method, which is <code class="literal">simon_says</code> in this case. Then you put the <span class="emphasis"><em>parameters</em></span> next, in between parentheses. For this method, we have just one parameter: <code class="literal">phrase</code>.”</p>&#13;
&#13;
      <p>“The what now?” asked the King, rubbing his head with both hands.</p>&#13;
&#13;
      <p>“The parameters,” said the Off-White Knight. “They’re sort of like placeholders or nicknames for the information you’ll give your method when you call it.”</p>&#13;
&#13;
      <p>“Let me get this straight,” said the King. “When you write out what a method does using <code class="literal">def</code> and <code class="literal">end</code>, that’s called <span class="emphasis"><em>defining</em></span> the method.”</p>&#13;
&#13;
      <p>“That’s right,” said the knight.</p>&#13;
&#13;
      <p><a class="indexterm" id="iddle1051"/><a class="indexterm" id="iddle1443"/><a class="indexterm" id="iddle1533"/><a class="indexterm" id="iddle1659"/><a class="indexterm" id="iddle1691"/><a class="indexterm" id="iddle1726"/>“And when you actually use the method somewhere, that’s <span class="emphasis"><em>calling</em></span> the method.”</p>&#13;
&#13;
      <p>“Indeed!” said the knight. “Sometimes we say <span class="emphasis"><em>invoke</em></span> instead of <span class="emphasis"><em>call</em></span>, but they mean exactly the same thing. You define a method so Ruby knows what it does, and you call the method when you want to use it. Calling a method looks like this,” she continued, and typed some more:</p><a id="pro_id00167"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">simon_says('Prepare for battle!')</span></strong></span>&#13;
=&gt; "Prepare for battle!"&#13;
</pre>&#13;
&#13;
      <p>“I’m a bit fuzzy right now,” said the King.</p>&#13;
&#13;
      <p>“You’re a bit fuzzy all the time,” said the Off-White Knight, eyeing the King’s fluffy beard.</p>&#13;
&#13;
      <p>“Yes, yes,” said the King, “but I’m also still confused. Could you go over calling the method a bit?”</p>&#13;
&#13;
      <p>“Of course!” said the knight. “When we defined the <code class="literal">simon_says</code> method earlier, we just told Ruby what code to run whenever we use the name <code class="literal">simon_says</code>. We can then use that code by writing the method name and putting in our own bit of information—the string <code class="literal">'Prepare for battle!'</code>—where we had the <code class="literal">phrase</code> parameter before. Like I said, <code class="literal">phrase</code> is just like a placeholder that sits between the parentheses until we’re ready to use the method with <code class="literal">'Prepare for battle!'</code>.</p>&#13;
&#13;
      <p>“What about the parentheses around <code class="literal">'Prepare for battle!'</code>?” Ruben asked. “I’ve seen Ruby methods get called without parentheses before.”</p>&#13;
&#13;
      <p>“You’re right!” said the knight. “The parentheses are optional; you usually use them when you define the method, but you can use them or skip them when you call the method. It’s all the same to Ruby!”</p>&#13;
&#13;
      <div class="sect2" title="return Versus puts">&#13;
        <div class="titlepage">&#13;
          <h2 class="title" id="heading_id_5"><a id="return_versus_puts"/>return Versus puts</h2>&#13;
        </div>&#13;
&#13;
        <p>“All right, I understand defining and calling now,” said the King. “But what’s this <code class="literal">return</code> business, and how is it different from <code class="literal">puts</code>? Don’t they both print things on the screen?”</p>&#13;
&#13;
        <p><a class="indexterm" id="iddle1671"/><a class="indexterm" id="iddle1780"/>“Aha!” said the Off-White Knight. “A lot of people find this very confusing, but I think I can show you the difference between <code class="literal">return</code> and <code class="literal">puts</code> with just a couple of examples.”</p>&#13;
&#13;
        <p>“Here we define a method called <code class="literal">print_sum</code> that prints the sum of two numbers with <code class="literal">puts</code>,” she said:</p><a id="pro_id00168"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def print_sum(a, b)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts a + b</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
</pre>&#13;
&#13;
        <p>“Next, we’ll define a second method that <span class="emphasis"><em>returns</em></span> the sum.”</p><a id="pro_id00169"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def return_sum(a, b)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">return a + b</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
</pre>&#13;
&#13;
        <p>“Do you see the difference between the <code class="literal">print_sum</code> and <code class="literal">return_sum</code> methods we defined?” the knight asked. “One <code class="literal">puts</code>, the other <code class="literal">return</code>s.” Scarlet, Ruben, and the King all nodded.</p>&#13;
&#13;
        <p>“Perfect!” said the Off-White Knight. “Let’s see what that really means for what our Ruby code does. First, we’ll call our <code class="literal">print_sum</code> method.”</p><a id="pro_id00170"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">sum = print_sum(2, 3)</span></strong></span>&#13;
5&#13;
=&gt; nil&#13;
&gt;&gt; <span class="strong"><strong><span class="red">sum</span></strong></span>&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
        <p>“See that?” said the knight. “<code class="literal">puts</code> will print something on the screen for you—in this case, it added <code class="literal">2</code> and <code class="literal">3</code> and printed the result <code class="literal">5</code> to the screen—but it won’t <span class="emphasis"><em>do</em></span> anything with the value of <code class="literal">5</code>: it produces <code class="literal">nil</code> after doing the printing! When we check out the value of <code class="literal">sum</code>, we see that it’s <code class="literal">nil</code>.”</p>&#13;
&#13;
        <p>“Now let’s call our <code class="literal">return_sum</code> method.” She typed some more:</p><a id="pro_id00171"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">sum = return_sum(2, 3)</span></strong></span>&#13;
=&gt; 5&#13;
&gt;&gt; <span class="strong"><strong><span class="red">sum</span></strong></span>&#13;
=&gt; 5&#13;
</pre>&#13;
&#13;
        <div class="informalfigure">&#13;
          <a id="med_id00035a"/>&#13;
&#13;
          <div class="mediaobject"><a id="med_id00035"/><img alt="image with no caption" src="../Images/httpatomoreillycomsourcenostarchimages2160023.png.jpg"/></div>&#13;
        </div>&#13;
&#13;
        <p><a class="indexterm" id="iddle1082"/><a class="indexterm" id="iddle1524"/><a class="indexterm" id="iddle1598"/><a class="indexterm" id="iddle1723"/><a class="indexterm" id="iddle1727"/><a class="indexterm" id="iddle1939"/>“<span class="emphasis"><em>Now</em></span> I understand,” said the King. “Printing something just makes that value appear on the screen, but <span class="emphasis"><em>returning</em></span> it lets you store that value in a variable, as we did with <code class="literal">sum</code>.”</p>&#13;
&#13;
        <p>“You’ve got it!” said the knight. “A method is just like a little machine. Things go into it and things come out. The things that go into a method when you call it are its <span class="emphasis"><em>arguments</em></span>, and the thing that comes out is its <span class="emphasis"><em>return value</em></span>.</p>&#13;
&#13;
        <p>“If a method doesn’t have a specific return value, it returns <code class="literal">nil</code>. You know how you always see <code class="literal">=&gt; nil</code> when you <code class="literal">puts</code> or <code class="literal">print</code> something? That’s because although the <code class="literal">puts</code> and <code class="literal">print</code> methods write text on the screen, they don’t have a return value, so they <span class="emphasis"><em>return</em></span> <code class="literal">nil</code>.”</p>&#13;
&#13;
        <p>“Hang on a moment,” said the King. “If a method can automatically return <code class="literal">nil</code> when it has no other value to return, why can’t we automatically return other values?”</p>&#13;
      </div>&#13;
&#13;
      <div class="sect2" title="Understanding Method Arguments">&#13;
        <div class="titlepage">&#13;
          <h2 class="title" id="heading_id_6"><a id="understanding_method_arguments"/>Understanding Method Arguments</h2>&#13;
        </div>&#13;
&#13;
        <p>“We can!” said the Off-White Knight. “Whenever you’re in a method definition, Ruby automatically returns the last bit of Ruby code that gets run. If you want to save some typing, you can leave off the <code class="literal">return</code> keyword if the last thing in your method is the return value, and Ruby will automatically return it for you.”</p>&#13;
&#13;
        <p><a class="indexterm" id="iddle1081"/><a class="indexterm" id="iddle1083"/><a class="indexterm" id="iddle1282"/><a class="indexterm" id="iddle1651"/>“Awesome!” said Ruben “Anything that saves us some typing is good. Now, just to back up a second to the difference between parameters and arguments: parameters are the handy names you put between parentheses in your method <span class="emphasis"><em>definition</em></span> to let your method know what kinds of information it will get, and the arguments are the information you actually give to your method when you <span class="emphasis"><em>call</em></span> it,” Ruben said.</p>&#13;
&#13;
        <p>“Quite right!” said the Off-White Knight. “Hang on, let me give you another example.” She typed furiously into the Computing Contraption, narrating all the while. “Let’s define a method called <code class="literal">add_things</code> with the parameters <code class="literal">thing_one</code> and <code class="literal">thing_two</code> and <code class="literal">return</code> their sum. That’d look like this:</p><a id="pro_id00172"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def add_things(thing_one, thing_two)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">thing_one + thing_two</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
</pre>&#13;
&#13;
        <p>“Next, we’ll <span class="emphasis"><em>call</em></span> the method with the arguments <code class="literal">3</code> and <code class="literal">7</code>. The return value is <code class="literal">10</code>.”</p><a id="pro_id00173"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">add_things(3, 7)</span></strong></span>&#13;
=&gt; 10&#13;
</pre>&#13;
&#13;
        <p>“That’s great,” said Scarlet, “but what happens if you want to sometimes pass an argument to a method, and sometimes not? If you don’t pass the right number of arguments, Ruby throws an error!” She typed into the Computing Contraption:</p><a id="pro_id00174"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def plus_one(number)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">number + 1</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">plus_one 2</span></strong></span>&#13;
=&gt; 3&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">plus_one()</span></strong></span>&#13;
ArgumentError: wrong number of arguments (0 for 1)&#13;
</pre>&#13;
&#13;
        <p>“Yeah!” said Ruben. “Here, Ruby’s saying that it got zero arguments, but it expected one.”</p>&#13;
&#13;
        <p><a class="indexterm" id="iddle1031"/><a class="indexterm" id="iddle1052"/><a class="indexterm" id="iddle1231"/><a class="indexterm" id="iddle1278"/><a class="indexterm" id="iddle1638"/><a class="indexterm" id="iddle1652"/><a class="indexterm" id="iddle1658"/><a class="indexterm" id="iddle1662"/>“Great point!” said the Off-White Knight. “In that case, you can use <span class="emphasis"><em>optional</em></span> or <span class="emphasis"><em>default</em></span> parameters. Those are special parameters that come with a placeholder value, and if you don’t give Ruby arguments for those parameters when you call the method, Ruby inserts the placeholders instead. Let me define a method like that for you,” she said, and began typing at the Computing Contraption once more:</p><a id="pro_id00175"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def declare_name(name='The Off-White Knight!')</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts name</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
</pre>&#13;
&#13;
        <p>“See the equal sign?” she said. “That tells the method to use that string if it’s not told otherwise. Now, without any arguments, the method will use the default name,” she said. “Let’s try calling it!” She typed some more:</p><a id="pro_id00176"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">declare_name()</span></strong></span>&#13;
The Off-White Knight!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
        <p>“Wow!” said Ruben. “You didn’t pass any arguments at all, so the default one was used automatically.”</p>&#13;
&#13;
        <p>“That’s right,” said the knight. “And again, because Ruby is super flexible, you don’t even need the parentheses to show that you’re calling a method!” She typed even more:</p><a id="pro_id00177"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">declare_name</span></strong></span>&#13;
The Off-White Knight!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
        <p>“That looks a little <span class="emphasis"><em>too</em></span> magical to me,” said the King. “If there were lots of code floating around, how would I immediately know the difference between a method with no parentheses and a plain old variable?”</p>&#13;
&#13;
        <p>“That’s a good point,” said the Off-White Knight. She tried to wipe the sweat from her brow, but accidentally knocked her visor down instead. “I often use the parentheses, because they make it clear I’m using a method and not something else, like a variable.”</p>&#13;
&#13;
        <p><a class="indexterm" id="iddle1396"/><a class="indexterm" id="iddle1599"/>“Now, let’s say you <span class="emphasis"><em>do</em></span> want to use your own name,” she continued, struggling to push her visor back up. “You just pass it in—with or without parentheses—like this.” She typed a few more lines:</p><a id="pro_id00178"/>&#13;
        <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">declare_name('Lady Scarlet the Bold!')</span></strong></span>&#13;
Lady Scarlet the Bold!&#13;
=&gt; nil&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">declare_name 'Sir Ruben the Fearless!'</span></strong></span>&#13;
Sir Ruben the Fearless!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
        <p>“Whew!” said the Off-White Knight. “Let me take a break for just a second. My gauntlets are tired.”</p>&#13;
      </div>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="What Is nil?">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_7"><a id="what_is_nilquestion_mark"/>What Is nil?</h1>&#13;
      </div>&#13;
&#13;
      <p>“Of course,” said the King. “I’m still a bit hung up on <code class="literal">nil</code>, though,” he said. “What <span class="emphasis"><em>is</em></span> it?”</p>&#13;
&#13;
      <div class="informalfigure">&#13;
        <a id="med_id00036a"/>&#13;
&#13;
        <div class="mediaobject"><a id="med_id00036"/><img alt="image with no caption" src="../Images/httpatomoreillycomsourcenostarchimages2160025.png.jpg"/></div>&#13;
      </div>&#13;
&#13;
      <p>“I think I know the answer to that one,” Ruben said. “<code class="literal">nil</code> is Ruby’s way of saying ‘nothing at all.’ When Ruby wants to express the idea of ‘nothing’ or ‘no value,’ it uses <code class="literal">nil</code>.”</p>&#13;
&#13;
      <p>“Is <code class="literal">nil true</code> or <code class="literal">false</code>?” asked the King.</p>&#13;
&#13;
      <p>“Neither!” said Ruben. “It’s its very own thing. But it <span class="emphasis"><em>is</em></span> one of two <span class="emphasis"><em>falsey</em></span> values in Ruby—the other is <code class="literal">false</code>.”</p>&#13;
&#13;
      <p>“What do you mean by ‘falsey’?” asked the King.</p>&#13;
&#13;
      <p>“I mean that if you use <code class="literal">nil</code> in an <code class="literal">if</code> statement, it will be the opposite of <code class="literal">true</code>,” Ruben said. “This should look familiar.” He typed into the Computing Contraption:</p><a id="pro_id00179"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">if nil</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts "This text won't be printed!"</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
</pre>&#13;
&#13;
      <p><a class="indexterm" id="iddle1903"/>“Your code didn’t print anything on the screen!” said the King.</p>&#13;
&#13;
      <p>Ruben nodded. “That’s because Ruby will never treat <code class="literal">if nil</code> as a true condition. To Ruby, saying ‘if nothing’ and ‘if false’ are the same, so it will never run the code between <code class="literal">if nil</code> and <code class="literal">end</code>.” He thought for a moment. “Remember the <code class="literal">if</code> statement?” he asked.</p>&#13;
&#13;
      <p>The King nodded vigorously. “As if it were only yesterday!” he said.</p>&#13;
&#13;
      <p>“It was today,” said Ruben.</p>&#13;
&#13;
      <p>“Tomato, tomato,” said the King, pronouncing the word the same way both times. Ruben and Scarlet looked at each other and shrugged.</p>&#13;
&#13;
      <p>“Anyway,” said Ruben, “The <code class="literal">if</code> statement takes a bit of Ruby code and does one thing if that code is <code class="literal">true</code> and something else if it’s <code class="literal">false</code>. <code class="literal">nil</code> is always treated like <code class="literal">false</code> in <code class="literal">if</code> statements, so to make something happen if a value is <code class="literal">nil</code>, you might think you have to do this:</p><a id="pro_id00180"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">if !nil</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts "But I will get printed!"</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
But I will get printed!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>“But there’s a piece of built-in Ruby code we’ve already seen that means the same thing as ‘if not’: <code class="literal">unless</code>!” Ruben typed some more:</p><a id="pro_id00181"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">unless nil</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts "But I will get printed!"</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
But I will get printed!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>“<code class="literal">unless</code> has the exact same meaning as ‘if not.’ When we say ‘Stay up late <span class="emphasis"><em>if</em></span> you’re <span class="emphasis"><em>not</em></span> sleepy,’ that means the same thing as ‘Stay up late <span class="emphasis"><em>unless</em></span> you’re sleepy,’” Ruben explained.</p>&#13;
&#13;
      <p><a class="indexterm" id="iddle1654"/><a class="indexterm" id="iddle1810"/>“I’ve seen this before!” said the King. “We use <code class="literal">unless</code> in Ruby anytime we’d otherwise use <code class="literal">if</code> and <code class="literal">!</code>.”</p>&#13;
&#13;
      <p>“Right!” said Ruben. “Both <code class="literal">false</code> and <code class="literal">nil</code> will behave the same way when used in an <code class="literal">if</code> or <code class="literal">unless</code> statement, but it’s important to remember that <code class="literal">nil</code>’s not the exact same thing as <code class="literal">false</code>.” He continued typing:</p><a id="pro_id00182"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">nil == false</span></strong></span>&#13;
=&gt; false&#13;
</pre>&#13;
&#13;
      <p>“Did you see that <code class="literal">=&gt; nil</code> at the end of the <code class="literal">unless</code> example?” the Off-White Knight asked. “That’s what I was talking about. <code class="literal">nil</code> is the return value of <code class="literal">puts</code>. Check it out!” She reached over Ruben’s head and typed some more:</p><a id="pro_id00183"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">puts 'Prepare for nil!'</span></strong></span>&#13;
Prepare for nil!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>“One last thing about <code class="literal">nil</code>,” said the knight. “Not only is it <span class="emphasis"><em>not</em></span> the same thing as <code class="literal">false</code>, it’s <span class="emphasis"><em>not</em></span> the same thing as zero! Zero is a number; <code class="literal">nil</code> is simply nothing at all.”</p>&#13;
&#13;
      <p>“I think I’ve got it now,” said the King.</p>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="Splat Parameters">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_8"><a id="splat_parameters"/>Splat Parameters</h1>&#13;
      </div>&#13;
&#13;
      <p>“Right,” said the knight. “Then we’re on to more method magic! I showed you how to make a method take an optional argument, but Ruby also lets you tell a method to take <span class="emphasis"><em>any number</em></span> of arguments. <span class="emphasis"><em>Splat parameters</em></span> are the way to tell a Ruby method, ‘Hey, I’m going to pass you a whole list of things to use. I don’t know how many, so just deal with whatever number I send!’” The knight flexed her fingers a few times. “They work like this,” she said, and began typing:</p><a id="pro_id00184"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def declare_knights(*knights)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts knights</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">declare_knights('Lady Scarlet', 'Sir Ruben', 'The Off-White</span></strong></span>&#13;
<span class="strong"><strong><span class="red">Knight')</span></strong></span>&#13;
Lady Scarlet&#13;
Sir Ruben&#13;
The Off-White Knight&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p><a class="indexterm" id="iddle1006"/><a class="indexterm" id="iddle1099"/><a class="indexterm" id="iddle1724"/>“You can think of the asterisk (<code class="literal">*</code>) in our first line as a little splat mark that tells the method to take the whole messy bucket of arguments, no matter how many, and do something with them,” the Off-White Knight said.</p>&#13;
&#13;
      <p>“I see the little splat next to the parameter name,” said the King, “but not in the method body and not when you call the method. Is the <code class="literal">*</code> only used when you define the method and only between the parentheses?”</p>&#13;
&#13;
      <p>“Exactly,” said the knight. “Ruby is very smart—you only have to tell it something once! As I mentioned,” the Off-White Knight continued, “Ruby realizes that the last thing that appears in your method body is probably the thing you want to return. So, as I mentioned earlier, if you want to save some typing, you can leave off the <code class="literal">return</code> keyword if the last thing in your method is the return value. Ruby does it automatically! That means that this:</p><a id="pro_id00185"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def add(a, b)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">return a + b</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">add(1, 3)</span></strong></span>&#13;
=&gt; 4&#13;
</pre>&#13;
&#13;
      <p>is exactly the same as this!</p><a id="pro_id00186"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def add(a, b)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">a + b</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">add(1, 3)</span></strong></span>&#13;
=&gt; 4&#13;
</pre>&#13;
&#13;
      <p>“Wonderful!” said Scarlet. “I’ll definitely remember that trick when writing my own methods.”</p>&#13;
&#13;
      <p><a class="indexterm" id="iddle1125"/><a class="indexterm" id="iddle1228"/><a class="indexterm" id="iddle1972"/>“And now,” said the Off-White Knight, pulling her sword out of its scabbard, “it’s time for you to <span class="smaller">YIELD</span>!”</p>&#13;
&#13;
      <p>“Agh!” shouted Ruben, covering his head with his hands again.</p>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="Block Methods">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_9"><a id="block_methods"/>Block Methods</h1>&#13;
      </div>&#13;
&#13;
      <p>The Off-White Knight struggled to get her sword back into its scabbard. “You really should do something about that cowering habit,” she said. “What I was saying is, you need to use the <code class="literal">yield</code> keyword when you write your own Ruby methods that take blocks.”</p>&#13;
&#13;
      <p>“Oh,” Ruben said, slowly putting his hands down again.</p>&#13;
&#13;
      <p>“Wait, you can write your own Ruby methods that take blocks?” Scarlet asked.</p>&#13;
&#13;
      <p>“Of course!” said the knight. “You’d write it like so,” she said, and typed in the Computing Contraption:</p><a id="pro_id00187"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def my_block_method</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">yield</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>“First,” said the knight, “we define a method, <code class="literal">my_block_method</code>, using <code class="literal">def</code>. Next, we use the <code class="literal">yield</code> keyword to tell the method to let the code inside the block run; when you call the method with a block, whatever happens in the block is what the method does! Let’s look at some examples.”</p><a id="pro_id00188"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">my_block_method { 1 + 1 }</span></strong></span>&#13;
=&gt; 2&#13;
</pre>&#13;
&#13;
      <p>“Here, we’re calling <code class="literal">my_block_method</code> and passing in a block that just adds <code class="literal">1 + 1</code>, so <code class="literal">my_block_method</code> returns <code class="literal">2</code>. We can also do other things, like print text:</p><a id="pro_id00189"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">my_block_method { puts 'Hello from the block!' }</span></strong></span>&#13;
Hello from the block!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p><a class="indexterm" id="iddle1135"/><a class="indexterm" id="iddle1600"/><a class="indexterm" id="iddle1812"/>“<code class="literal">my_block_method</code> lets the code in the block run, so it prints out <code class="literal">Hello from the block!</code> We see the <code class="literal">nil</code> because <code class="literal">puts</code> prints out text on the screen, but the value it returns is <code class="literal">nil</code>,” the knight explained.</p>&#13;
&#13;
      <p>“What’s a block, again?” the King asked.</p>&#13;
&#13;
      <p>“A block is just a bit of Ruby code between curly brackets or between <code class="literal">do</code> and <code class="literal">end</code>,” said the knight. “You’ve probably seen built-in methods like <code class="literal">each</code> that use blocks, but now you can create your own methods that use blocks!”</p>&#13;
&#13;
      <p>“That’s amazing!” said Scarlet. “But can you use splat parameters and blocks together?”</p>&#13;
&#13;
      <p>“You can!” said the knight. “You can pass regular, default, <span class="emphasis"><em>and</em></span> splat arguments to any method you write, and they can be in any order.”</p>&#13;
&#13;
      <p>The knight cracked her knuckles and typed into the Computing Contraption, explaining as she went along. “Let’s build a little something we can use to quickly and easily introduce ourselves,” she said. “After all, we knights are always having to go around introducing ourselves as we sally forth into a new town.”</p><a id="pro_id00190"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def all_about_me(name, age=100, *pets)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts "My name is #{name}"</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts "I'm #{age} years old"</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">if block_given?</span></strong></span>&#13;
&gt;&gt;     <span class="strong"><strong><span class="red">yield pets</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">else</span></strong></span>&#13;
&gt;&gt;     <span class="strong"><strong><span class="red">puts pets</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>“We’re not done yet,” said the knight, “but let’s go over this. First, I defined the <code class="literal">all_about_me</code> method to take three parameters. We see a regular old <code class="literal">name</code> parameter and an <code class="literal">age</code> parameter, which defaults to <code class="literal">100</code> if no age is passed in when the method is called.”</p>&#13;
&#13;
      <p>“But you could have written the <code class="literal">age</code> parameter with its default first, then the <code class="literal">name</code> one,” Ruben said.</p>&#13;
&#13;
      <p><a class="indexterm" id="iddle1126"/><a class="indexterm" id="iddle1462"/>“You got it,” said the knight. “Finally, the <code class="literal">*pets</code> splat parameter! That can come in any order with respect to the regular or default parameters, but we happened to put it at the end.”</p>&#13;
&#13;
      <p>“I get that part,” said the King, “but what’s this <code class="literal">block_given?</code> business?”</p>&#13;
&#13;
      <p>“That’s a built-in Ruby method,” said the knight. “It returns <code class="literal">true</code> if the method was passed a block as an argument and <code class="literal">false</code> otherwise. I wrote the <code class="literal">all_about_me</code> method so it <code class="literal">yield</code>s to the block if there is one, sending the list of pets to the block; otherwise, it just uses <code class="literal">puts</code> to print out the pets. Don’t worry if <code class="literal">block_given?</code> doesn’t make perfect sense now—we’ll be seeing more of it later on.”</p>&#13;
&#13;
      <p>“Why is it <code class="literal">yield pets</code> and not just <code class="literal">yield</code>?” Scarlet asked.</p>&#13;
&#13;
      <p>“An excellent question,” said the knight. “Earlier, we just wanted to let the block handle everything that was passed to our method, so we simply typed <code class="literal">yield</code>. Now, though, we want our block to care only about <code class="literal">pets</code>, so we specifically give only our list of pets to the block.”</p>&#13;
&#13;
      <p>The knight’s fingers moved again across the Computing Contraption, giving their newly defined method a try.</p><a id="pro_id00191"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">all_about_me('Ruben', 12, 'Smalls', 'Chucky Jim')</span></strong></span>&#13;
My name is Ruben.&#13;
I'm 12 years old.&#13;
Smalls&#13;
Chucky Jim&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>“That’s me!” said Ruben. “That’s amazing. What else can we do?”</p>&#13;
&#13;
      <p>“Well,” said the Off-White Knight, “We can use that block I mentioned earlier! Look what happens if we pass a block to our method, then refer to the pets we pass in with <code class="literal">pets</code>:</p><a id="pro_id00192"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">all_about_me('Ruben', 12, 'Smalls', 'Chucky Jim') { |pets| puts</span></strong></span>&#13;
<span class="strong"><strong><span class="red">pets.join(' and ') }</span></strong></span>&#13;
My name is Ruben.&#13;
I'm 12 years old.&#13;
Smalls and Chucky Jim&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p><a class="indexterm" id="iddle1820"/>“This looks a lot like the last example,” said Scarlet. “But the block is pretty tricky. What’s it doing?”</p>&#13;
&#13;
      <p>“I’ll walk you through it! First, <code class="literal">{ |pets| puts pets}</code> would simply tell Ruby: ‘Hey, block! I’m going to pass you a variable, <code class="literal">pets</code>, and you should print it out.’”</p>&#13;
&#13;
      <p>“But then <code class="literal">all_about_me</code> would just print out the array elements, and it wouldn’t look very nice,” Scarlet said.</p>&#13;
&#13;
      <p>“Exactly!” said the knight. “So I’m also using a built-in Ruby method, <code class="literal">join</code>. Ruby array elements can be <code class="literal">join</code>ed to make strings, so I’m using <code class="literal">join</code> to turn the array of pets into a string with <code class="literal">' and '</code> in the middle.”</p>&#13;
&#13;
      <p>“Could you show us another example?” Ruben asked.</p>&#13;
&#13;
      <p>“Sure,” said the knight. “Here’s one where we can use <code class="literal">join</code> to turn an array of numbers into a string with <code class="literal">'plus'</code> between each number:</p><a id="pro_id00193"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">[1, 2, 3].join(' plus ')</span></strong></span>&#13;
=&gt; "1 plus 2 plus 3"&#13;
</pre>&#13;
&#13;
      <p>“There’s always something new to discover in Ruby,” marveled the King.</p>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="Into the Dagron’s Lair">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_10"><a id="into_the_dagronapostrophes_lair"/>Into the Dagron’s Lair</h1>&#13;
      </div>&#13;
&#13;
      <p>“Speaking of discoveries,” said Scarlet, “that reminds me!” She rummaged around in her pockets. “Have you ever seen anything like this before?” She held out the glittering green scale for the Off-White Knight to examine.</p>&#13;
&#13;
      <p>“Great googly moogly!” said the Off-White Knight. “That scale looks like it belongs to the Dagron!”</p>&#13;
&#13;
      <p>“You mean the <span class="emphasis"><em>dragon</em></span>,” Ruben offered.</p>&#13;
&#13;
      <p>“No, the Dagron,” said the Off-White Knight. “That’s her name. Though she <span class="emphasis"><em>is</em></span> a dragon.”</p>&#13;
&#13;
      <p>“A lady dragon!” said Ruben.</p>&#13;
&#13;
      <p>“No, just a dragon,” said the Off-White Knight. “If she were a man, would you call her a man dragon?”</p>&#13;
&#13;
      <p>“I guess not,” admitted Ruben. He looked around nervously. “But there’s really a dragon in the Carmine Pines?”</p>&#13;
&#13;
      <p>“Not to worry,” said the knight. “The Dagron is a very powerful dragon, but she’s also wise and well mannered. In fact, I’m surprised you found one of her scales anywhere trouble’s been brewing. That doesn’t sound like the Dagron I know.”</p>&#13;
&#13;
      <p>“Well, it <span class="emphasis"><em>sounds</em></span> like we’d best find her and ask what’s going on,” said the King. “Lead the way, madam knight!”</p>&#13;
&#13;
      <p>“To the Dagron!” said the Off-White Knight, flipping her visor down over her eyes. “This way!” The knight set off deeper into the forest, and the King, Scarlet, and Ruben followed.</p>&#13;
&#13;
      <p>After walking for a few minutes, they began to hear a low, rhythmic <span class="emphasis"><em>whooshing</em></span> sound, like someone squeezing bellows on a fire.</p>&#13;
&#13;
      <p>“What’s that?” Ruben whispered.</p>&#13;
&#13;
      <p>“The Dagron!” whispered the knight. “Here she is!” And before they knew it, they found themselves in front of an enormous dragon curled up in a shining green circle, asleep.</p>&#13;
&#13;
      <div class="informalfigure">&#13;
        <a id="med_id00037a"/>&#13;
&#13;
        <div class="mediaobject"><a id="med_id00037"/><img alt="image with no caption" src="../Images/httpatomoreillycomsourcenostarchimages2160027.png.jpg"/></div>&#13;
      </div>&#13;
&#13;
      <p>“Dagron!” the knight called, pushing her visor up on her helmet.</p>&#13;
&#13;
      <p>The Dagron didn’t open her eyes. “Yes?” she boomed, a thin plume of smoke rising from her right nostril.</p>&#13;
&#13;
      <p>“I’ve brought some guests to see you, including the King!”</p>&#13;
&#13;
      <p>The Dagron’s eyes flashed open, focusing immediately on the four of them. The Dagron unfurled herself and reared up to her full height; her head nearly reached the tops of the pines around her.</p>&#13;
&#13;
      <p>“Your Majesty!” said the Dagron, and she bowed so low that her head nearly brushed the earth.</p>&#13;
&#13;
      <p>“Madame Dagron,” said the King. “We’ve come with a somewhat . . . unusual question.” The King nodded toward Scarlet. “Does this belong to you?”</p>&#13;
&#13;
      <p>Scarlet pulled the scale from her pocket and held it out to the Dagron. The Dagron stared at it for a few seconds, then shook her head slowly.</p>&#13;
&#13;
      <p>“I don’t think that’s one of mine,” said the Dagron, “but I <span class="emphasis"><em>do</em></span> have a great many scales. If you’d like, you can check to see if I’m missing one.”</p>&#13;
&#13;
      <p>The group spent almost an hour examining the Dagron, looking for a loose or missing scale. Scarlet and Ruben searched high and low. The Off-White Knight quested mightily. The King took a short nap beneath a tall red pine.</p>&#13;
&#13;
      <p>“Well, there’s no doubt about it,” Scarlet finally said, holding the mystery scale near the tip of the Dagron’s tail. “This is definitely <span class="emphasis"><em>not</em></span> one of the Dagron’s.” She put the scale in her pocket and sat glumly next to Ruben on a rock.</p>&#13;
&#13;
      <p>“Though I’m pleased not to be a suspect in these strange goings-on,” said the Dagron, “I <span class="emphasis"><em>am</em></span> sorry to disappoint you.” She thought for a moment. “While I’m not certain I can help, I may know someone who can.”</p>&#13;
&#13;
      <p>Scarlet perked up. “Who?” she asked.</p>&#13;
&#13;
      <p>“Wherefore the Wand’ring Minstrel,” said the Dagron. “He frolics and sings all throughout the Carmine Pines and has been almost everywhere in the kingdom. If anything strange is going on, I’m sure he’d know about it.”</p>&#13;
&#13;
      <p>Ruben jumped off his rock. “Can you take us to him?” he asked.</p>&#13;
&#13;
      <p>“Certainly,” said the Dagron. “It may take us a while to find him, though.”</p>&#13;
&#13;
      <p>Scarlet stood and dusted herself off. “Actually, I’ll bet we can find him pretty quickly,” she said. “Now that we know how to define our own Ruby methods, I might know <span class="emphasis"><em>just</em></span> the thing!”</p>&#13;
    </div>&#13;
&#13;
    <div class="sect1" title="You Know This!">&#13;
      <div class="titlepage">&#13;
        <h1 class="title" id="heading_id_11"><a id="you_know_thisexclamation_mark-id00006"/>You Know This!</h1>&#13;
      </div>&#13;
&#13;
      <p><a class="indexterm" id="iddle1229"/><a class="indexterm" id="iddle1232"/><a class="indexterm" id="iddle1274"/><a class="indexterm" id="iddle1541"/><a class="indexterm" id="iddle1639"/><a class="indexterm" id="iddle1653"/>Between defining your own methods, creating your own methods that use blocks, and learning about things like splat and default arguments, your head’s probably feeling pretty full! Let’s take some time to review what we talked about in this chapter.</p>&#13;
&#13;
      <p>First, you learned how to write your own methods. We start our method definition with <code class="literal">def</code>, followed by the name of the method and then a list of parameters between parentheses. Finally, we type whatever code we want our method to perform and then finish it all up with <code class="literal">end</code>, like so:</p><a id="pro_id00194"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def multiply_by_three(number)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">number * 3</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">multiply_by_three(2)</span></strong></span>&#13;
=&gt; 6&#13;
</pre>&#13;
&#13;
      <p>You also learned that methods can have <span class="emphasis"><em>default</em></span> or <span class="emphasis"><em>optional</em></span> parameters. If we provide an argument to a method that takes an optional parameter, the method will use that argument; otherwise, it’ll use whatever its default is:</p><a id="pro_id00195"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def multiply_by_three(number=2)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">number * 3</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">multiply_by_three</span></strong></span>&#13;
=&gt; 6&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">multiply_by_three 3</span></strong></span>&#13;
=&gt; 9&#13;
</pre>&#13;
&#13;
      <p><a class="indexterm" id="iddle1007"/><a class="indexterm" id="iddle1100"/><a class="indexterm" id="iddle1655"/><a class="indexterm" id="iddle1728"/><a class="indexterm" id="iddle1811"/>If we want a method that takes any number of arguments, we can use <span class="emphasis"><em>splat parameters</em></span> by putting an asterisk (<code class="literal">*</code>) before our parameter name:</p><a id="pro_id00196"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def print_all_the_names(*names)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">puts names</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">print_all_the_names('Larry', 'Curly', 'Moe')</span></strong></span>&#13;
Larry&#13;
Curly&#13;
Moe&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>Speaking of <code class="literal">nil</code>, you learned that methods that don’t have an explicit <span class="emphasis"><em>return value</em></span> will return <code class="literal">nil</code>, which is Ruby’s way of saying “nothing at all.” Remember, returning a value is different from just printing it on the screen!</p><a id="pro_id00197"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">puts 'Beware the Dagron!'</span></strong></span>&#13;
Beware the Dagron!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>In fact, when it comes to return values, it’s more common to leave off the <code class="literal">return</code> and let Ruby automatically return the result of the last bit of code it runs. So while you <span class="emphasis"><em>can</em></span> write this:</p><a id="pro_id00198"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def just_return_two</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">return 2</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">just_return_two</span></strong></span>&#13;
=&gt; 2&#13;
</pre>&#13;
&#13;
      <p>It’s much better Ruby style to write this:</p><a id="pro_id00199"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def also_returns_two</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">2</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">also_returns_two</span></strong></span>&#13;
=&gt; 2&#13;
</pre>&#13;
&#13;
      <p><a class="indexterm" id="iddle1131"/><a class="indexterm" id="iddle1525"/><a class="indexterm" id="iddle1737"/><a class="indexterm" id="iddle1973"/>Finally, we saw that if we want to define a method that takes a block, we just need to use the handy <code class="literal">yield</code> keyword. We can <code class="literal">yield</code> without parameters to give control over to the block, or we can pass parameters in order to give the block arguments to work with.</p><a id="pro_id00200"/>&#13;
      <pre class="programlisting">&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def block_party</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">yield</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">block_party { puts 'Hello from the block!' }</span></strong></span>&#13;
Hello from the block!&#13;
=&gt; nil&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">def block_party_part_two(name)</span></strong></span>&#13;
&gt;&gt;   <span class="strong"><strong><span class="red">yield name</span></strong></span>&#13;
&gt;&gt; <span class="strong"><strong><span class="red">end</span></strong></span>&#13;
&#13;
&gt;&gt; <span class="strong"><strong><span class="red">block_party_part_two('Haldo') { |name| puts "This is #{name}'s</span></strong></span>&#13;
<span class="strong"><strong><span class="red">party!" }</span></strong></span>&#13;
&#13;
This is Haldo's party!&#13;
=&gt; nil&#13;
</pre>&#13;
&#13;
      <p>You learned a lot in this chapter, but keep in mind: if you’re ever curious about what a method does or what arguments it expects, you can always look up the Ruby documentation at <span class="emphasis"><em><a class="ulink" href="http://ruby-doc.org/">http://ruby-doc.org/</a></em></span>. Just make sure to ask your local adult before going online!</p>&#13;
&#13;
      <p>Speaking of looking up new things, we’ll be covering a bit of new Ruby code in the next chapter—specifically, how to organize, create, and control our very own Ruby objects.</p>&#13;
    </div>&#13;
  </div>&#13;
</body></html>