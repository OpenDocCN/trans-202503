<html><head></head><body>
<h2 class="h2" id="ch14"><span id="page_203"></span>
 <span class="big">14</span>
</h2>
<h2 class="h2a">SETTING THE STAGE</h2>
<div class="image1"><img src="Image00001.jpg" />
</div>
<p class="noindent">Over the next several chapters, we’ll put your new skills to good use to build a game called <em>Schoolhouse Skateboarder</em>
 , where the player controls a skateboarder who has to jump over obstacles and collect gems.</p>
<p class="indent">In this chapter, you’ll set up your Xcode project file, add images for the player, and display a schoolyard background. <a href="text00026.html#ch14fig1">Figure 14-1</a>
 is a preview of how the game will look on an iPhone. Players try to survive as long as possible by tapping to jump over obstacles, collecting gems and scoring points along the way. They lose when they tip over or fall down a hole.</p>
<div class="image"><img src="Image00270.jpg" />
</div>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h2 class="h2a">SETTING THE STAGE</h2>
<div class="image1"><img src="Image00001.jpg" />
</div>
<p class="noindent">Over the next several chapters, we’ll put your new skills to good use to build a game called <em>Schoolhouse Skateboarder</em>
 , where the player controls a skateboarder who has to jump over obstacles and collect gems.</p>
<p class="indent">In this chapter, you’ll set up your Xcode project file, add images for the player, and display a schoolyard background. <a href="text00026.html#ch14fig1">Figure 14-1</a>
 is a preview of how the game will look on an iPhone. Players try to survive as long as possible by tapping to jump over obstacles, collecting gems and scoring points along the way. They lose when they tip over or fall down a hole.</p>
<div class="image"><img src="Image00270.jpg" />
</div>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image1"><img src="Image00001.jpg" />
</div>
<p class="noindent">Over the next several chapters, we’ll put your new skills to good use to build a game called <em>Schoolhouse Skateboarder</em>
 , where the player controls a skateboarder who has to jump over obstacles and collect gems.</p>
<p class="indent">In this chapter, you’ll set up your Xcode project file, add images for the player, and display a schoolyard background. <a href="text00026.html#ch14fig1">Figure 14-1</a>
 is a preview of how the game will look on an iPhone. Players try to survive as long as possible by tapping to jump over obstacles, collecting gems and scoring points along the way. They lose when they tip over or fall down a hole.</p>
<div class="image"><img src="Image00270.jpg" />
</div>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">Over the next several chapters, we’ll put your new skills to good use to build a game called <em>Schoolhouse Skateboarder</em>
 , where the player controls a skateboarder who has to jump over obstacles and collect gems.</p>
<p class="indent">In this chapter, you’ll set up your Xcode project file, add images for the player, and display a schoolyard background. <a href="text00026.html#ch14fig1">Figure 14-1</a>
 is a preview of how the game will look on an iPhone. Players try to survive as long as possible by tapping to jump over obstacles, collecting gems and scoring points along the way. They lose when they tip over or fall down a hole.</p>
<div class="image"><img src="Image00270.jpg" />
</div>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">In this chapter, you’ll set up your Xcode project file, add images for the player, and display a schoolyard background. <a href="text00026.html#ch14fig1">Figure 14-1</a>
 is a preview of how the game will look on an iPhone. Players try to survive as long as possible by tapping to jump over obstacles, collecting gems and scoring points along the way. They lose when they tip over or fall down a hole.</p>
<div class="image"><img src="Image00270.jpg" />
</div>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00270.jpg" />
</div>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><span id="page_204"></span>
 <a id="ch14fig1"></a>
 <em>Figure 14-1: The finished game</em>
</p>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec1">
<strong>WHERE DO I GET ART AND SOUND EFFECTS?</strong>
</h3>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">We’ve already created all the art and sound effects you need to make Schoolhouse Skateboarder (available from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 ). You don’t need anything else to follow along. If you want to customize it, you can make the game your own by replacing the skateboarder image with a character of your choosing, or you might have someone grabbing hamburgers instead of gems.</p>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Hopefully, by the end of this book, you’ll be inspired to design your own games. It can be rewarding to create the entire game by yourself, including the artwork and sound effects. You have complete control over every aspect of <em>your</em>
 game.</p>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">There are also plenty of places on the web where you can find free game art to use:</p>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="hang">
<em>
<strong>
<a href="http://opengameart.org/">http://opengameart.org/</a>
</strong>
</em>
 Free game art, sounds, and music</p>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="hang">
<em>
<strong>
<a href="http://freetems.net/">http://freetems.net/</a>
</strong>
</em>
 Free game art and music</p>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="hang">
<em>
<strong>
<a href="http://www.bfxr.net/">http://www.bfxr.net/</a>
</strong>
</em>
 Free retro game sound creation tool</p>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec2">
<strong>MAKING GAMES WITH XCODE’S SPRITEKIT</strong>
</h3>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">SpriteKit is iOS’s built-in game engine for making two-dimensional, or 2D, games. A <em>game engine</em>
 is a set of tools that lets you quickly and easily make animations, use audio and sound effects, create a menu system, and more. Programmers use game engines so they can focus on what’s truly important—making the game fun.</p>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Typically, a game consists of many sprites. A <em>sprite</em>
 is a 2D image used in a game. Sprites can be full-screen images that provide the backdrop for the game, or they can be smaller images that move around and do things. Background sprites set the stage. For example, in a space shooter game, the <span id="page_205"></span>
 background sprites might show a space scene with stars and planets, and there would be smaller sprites for the player’s spaceship, enemy ships, bullets, asteroids, and power-ups.</p>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">As far as game engines go, SpriteKit is top notch. Tasks that would take many lines of code in other game engines can be accomplished with just a line or two in SpriteKit, and it’s fun to use!</p>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00271.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>iOS also has a 3D game engine called SceneKit, but since we’re building a 2D game, we’ll stick with SpriteKit.</em>
</p>
</div>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec3">
<strong>CREATING THE GAME PROJECT</strong>
</h3>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">The first thing we need to do is create a new SpriteKit project for our game. Open Xcode and select <strong>File</strong>
 <span class="ent">▸</span>
 <strong>New</strong>
 <span class="ent">▸</span>
 <strong>Project…</strong>
 . In the project template dialog, select <strong>iOS</strong>
 , choose the <strong>Game</strong>
 template, and then click <strong>Next</strong>
 .</p>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Now, name your project <span class="code">
<span class="codestrong">SchoolhouseSkateboarder</span>
</span>
 in the Product Name field. Choose <strong>SpriteKit</strong>
 as the Game Technology. Since our game will run only on iPhones (and iPod touches), select <strong>iPhone</strong>
 as the Devices setting. Then click <strong>Next</strong>
 to create your game project.</p>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Without changing a thing, you can run this project and you’ll see a black screen with a label that says <em>Hello, World!</em>
 . Each time you click your mouse anywhere in the simulator, a spinning box will appear on the screen (see <a href="text00026.html#ch14fig2">Figure 14-2</a>
 ), and the label will shrink for a second. If the label appears sideways, you can rotate the simulator window by selecting <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Left</strong>
 from the simulator’s menu.</p>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Whenever you make a new project using the Game template, Xcode adds this simple interaction so you can make sure everything’s working.</p>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00272.jpg" />
</div>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig2"></a>
 <em>Figure 14-2: Running the project created by the Game template before making any changes</em>
</p>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Since we don’t want a giant <em>Hello, World!</em>
 label in our game, let’s remove that first. That label exists in the <em>scene editor</em>
 , a tool used to visually design a SpriteKit scene, similar to the way storyboards are used to design UIKit views. You can drag objects into the scene editor, move them around, and change their size, color, and other properties. This can be a useful tool, but it has many limitations compared to what can <span id="page_206"></span>
 be done in code. Therefore, apart from removing the <em>Hello, World!</em>
 label, we won’t be using the scene editor for Schoolhouse Skateboarder. To open the scene editor, click the file named <em>GameScene.sks</em>
 in the Project navigator. Once it loads, you should see a black scene with the <em>Hello, World!</em>
 label. Click the label, and then press <span class="smallcaps">DELETE</span>
 . See <a href="text00026.html#ch14fig3">Figure 14-3</a>
 .</p>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00273.jpg" />
</div>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig3"></a>
 <em>Figure 14-3: Deleting the Game template’s</em>
 Hello, World! <em>label</em>
</p>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Now that we’ve created the project and removed the <em>Hello, World!</em>
 label, we can get down to business—the business of fun, that is!</p>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec4">
<strong>ADDING IMAGES</strong>
</h3>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">First, you’ll want to add all of the images to your project as assets. (An asset is just a thing in your game, such as a sprite or a sound effect.)</p>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Download the ZIP file from <em>
<a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
</em>
 . Once the download is complete, you’ll have a folder named <em>ch14-images</em>
 inside your <em>Downloads</em>
 folder with all the image files you need.</p>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">To add the image files to your project, you’ll need to drag them from Finder into Xcode and drop them into an asset catalog. (An asset catalog is a special type of folder in an Xcode project that holds and organizes project resources such as image files and icons.) It is helpful for images because it groups together related image files. Once the files are in the asset catalog, you can use them anywhere in your code by referring to their filenames. The Game template we used comes with one asset catalog already, called <em>Assets.xcassets</em>
 , which is the catalog we’ll use.</p>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00274.jpg" />
</div>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent"><span id="page_207"></span>
 Click <em>Assets.xcassets</em>
 in the Project navigator. You should see the existing assets, AppIcon, and spaceship image. You can delete the spaceship image, since we won’t be using it. Click it and then press <span class="smallcaps">DELETE</span>
 .</p>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Now open Finder and navigate to the folder where the image files were downloaded. Press <span class="ent">⌘</span>
 -A to select them all. Once they’re highlighted, drag them into the Xcode asset catalog, as shown in <a href="text00026.html#ch14fig4">Figure 14-4</a>
 .</p>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00275.jpg" />
</div>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig4"></a>
 <em>Figure 14-4: Adding the image files to your project’s asset catalog</em>
</p>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">You might have noticed that all of the image files are <em>.png</em>
 files. <em>PNG</em>
 stands for <em>Portable Network Graphics</em>
 , and it is the most common image file type used in iOS applications because it has the smallest file size for the best quality image. You could use <em>.jpg</em>
 files, but <em>.png</em>
 files are recommended.</p>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec5">
<strong>THE SCENERY: DISPLAYING A BACKGROUND IMAGE</strong>
</h3>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">Now that you’ve added all the images to the project, let’s write some code to display the background image in our app.</p>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">When you created a new project using the Game template, some helpful code was automatically added to your project. Click the file named <em>GameScene.swift</em>
 in the Project navigator. You should see a bunch of code already there. This code is there for two reasons. First, it gives you an example of how to create a shape (the spinning box) and how to perform an action (making the box spin). Second, it lets you immediately run a new project and make sure that everything is set up properly.</p>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">At this point, we’re going to remove most of that code and add our own code. Go ahead and delete everything in <em>GameScene.swift</em>
 , except for <span id="page_208"></span>
 the declaration of the <span class="code">didMove(to:)</span>
 function and the <span class="code">update(_:)</span>
 function, so that it looks like this:</p>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent1">
<em>GameScene.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="box">
<pre>
<span class="pink">import</span>
 SpriteKit<br />
<br />
<span class="pink">class</span>
 GameScene: <span class="violet">SKScene</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 didMove(to view: <span class="violet">SKView</span>
 ) {<br />
    }<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 update(<span class="pink">_</span>
 currentTime: <span class="violet">TimeInterval</span>
 ) {<br />
        <span class="green">// Called before each frame is rendered</span>
<br />
<br />
    }<br />
<br />
}</pre>
</div>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Most of the logic in our game will be in the <span class="code">GameScene</span>
 class. Think of a scene as one view or screen in your app. The <span class="code">GameScene</span>
 class will manage everything that happens within the scene—how the sprites should be displayed, how the player will interact with the game, and how scoring will happen. Complex games may have many separate scenes—for example, a title scene, a menu scene, a game scene, and a settings scene. Our game will have just one scene: the game scene.</p>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Scene classes will usually have setup functions (stuff that happens once), a game loop or update functions (stuff that happens over and over again during the game), and user interaction functions (stuff that happens only when the user taps or swipes).</p>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">The setup function <span class="code">didMove(to:)</span>
 is called when your game first starts. It’s great for code that sets up the scene, such as the code that adds the initial sprites or sets the player’s score and lives. It’s similar to the <span class="code">viewDidLoad()</span>
 method that you used to set up the date picker in the <span class="code">AddBirthdayViewController</span>
 in <a href="text00021.html#ch10">Chapter 10</a>
 , and it’s called just once.</p>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Before we add the background image to the scene, we have to set the <span class="code">anchorPoint</span>
 of the scene. Add this line of code to the <span class="code">didMove(to:)</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="violet">anchorPoint</span>
 = <span class="violet">CGPoint</span>
 .<span class="violet">zero</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00276.jpg" />
</div>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Setting the scene’s anchor point determines how sprites will be positioned in the scene. When you pin a piece of paper to a corkboard with a pushpin, the pushpin is the anchor point. The piece of paper will be positioned where you put the pushpin, and if the paper rotates, it will rotate around the pushpin. This is exactly how the <span class="code">anchorPoint</span>
 property works <span id="page_209"></span>
 with sprites and scenes in SpriteKit. The Game template’s <span class="code">GameScene</span>
 has its anchor point in the middle of the scene, but we want the anchor point to be in the lower left of the scene, so we set it to <span class="code">CGPoint.zero</span>
 , or (0, 0). For some games, such as a space shooter, it’s better to have the anchor point in the middle of the scene. But for our game, where the ground is on the bottom of the screen, moving the anchor point to the lower left will make it easier to work with. See <a href="text00026.html#ch14fig5">Figure 14-5</a>
 for an illustration of various anchor points.</p>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00277.jpg" />
</div>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig5"></a>
 <em>Figure 14-5: Various locations of anchor points ranging from (0, 0) to (1, 1)</em>
</p>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">In our scene, when we place a sprite at an x-position of 0, it will be at the left edge of the screen. And when we place a sprite at a y-position of 0, it will be at the bottom edge of the screen.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="box1">
<p class="box-title">
<strong>ANCHOR POINTS FOR SPRITES</strong>
</p>
<p class="box-p">You can also set the anchor point of a sprite, changing how that sprite gets positioned and how it rotates. See <a style=";color:black;" href="text00026.html#ch14fig6">Figure 14-6</a>
 for an example of rotating a sprite with different anchor points.</p>
<div class="image"><img src="Image00278.jpg" />
</div>
<p class="figcap"><a id="ch14fig6" style=";color:black;"></a>
 <em>Figure 14-6: The anchor point of a sprite determines how it will rotate.</em>
</p>
<p class="box-pi">Sprites normally have their anchor point in the center. We won’t be changing any sprite anchor points, so we will always position sprites using their center point.</p>
</div>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent"><span id="page_210"></span>
 Now, to load our background image, add the following lines of code to the <span class="code">didMove(to:)</span>
 function:</p>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="box">
<pre>
<span class="ash">override func didMove(to view: SKView) {</span>
<br />
<br />
    <span class="ash">anchorPoint = CGPoint.zero</span>
<br />
<br />
 <span class="ent">➊</span>
 <span class="pink">let</span>
 background = <span class="violet">SKSpriteNode</span>
 (imageNamed: <span class="red">"background"</span>
 )<br />
 <span class="ent">➋</span>
 <span class="pink">let</span>
 xMid = <span class="violet">frame</span>
 .<span class="violet">midX</span>
<br />
 <span class="ent">➌</span>
 <span class="pink">let</span>
 yMid = <span class="violet">frame</span>
 .<span class="violet">midY</span>
<br />
 <span class="ent">➍</span>
 background.<span class="violet">position</span>
 = <span class="violet">CGPoint</span>
 (x: xMid, y: yMid)<br />
 <span class="ent">➎</span>
 addChild(background)<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Let’s walk through the five lines of code we just added. The line at <span class="ent">➊</span>
 creates a sprite called <span class="code">background</span>
 , using either the <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 file or the <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 file. Both files were added to the asset catalog earlier and Xcode will choose the right file automatically. You simply have to refer to it in code as <span class="code">"background"</span>
 or <span class="code">"background.png"</span>
 . To understand how Xcode picks the right file, see “<a href="text00026.html#ch14lev1sec7">Sizing Images for Different Screen Resolutions</a>
 ” on <a href="text00026.html#page_213">page 213</a>
 . Note that the variable name does not have to match the image name—you can use whatever you want for the variable name. The image name, however, must match a file that you added to an asset catalog in your project. <span class="code">SKSpriteNode</span>
 is the sprite class in SpriteKit, so when we create a sprite in our game, we’ll be creating an <span class="code">SKSpriteNode</span>
 , as we did here.</p>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">The lines at <span class="ent">➋</span>
 and <span class="ent">➌</span>
 create the constants <span class="code">xMid</span>
 and <span class="code">yMid</span>
 , which will represent the middle position of the screen. <span class="code">frame</span>
 is a property of <span class="code">GameScene</span>
 —it’s a <span class="code">CGRect</span>
 (a rectangle) that represents the entire screen. Every scene and sprite has a frame that describes where it is on the screen. A frame has an x-position, a y-position, a width, and a height (see <a href="text00026.html#ch14fig7">Figure 14-7</a>
 ). The <span class="code">midX</span>
 property gives us the middle x-position of the screen’s frame, and <span class="code">midY</span>
 gives us the middle y-position.</p>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00279.jpg" />
</div>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig7"></a>
 <em>Figure 14-7: A frame describes the position and size of a sprite.</em>
</p>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">The line at <span class="ent">➍</span>
 sets the position of our background image to the middle of the screen by creating a <span class="code">CGPoint</span>
 using <span class="code">xMid</span>
 and <span class="code">yMid</span>
 and assigning it to the sprite’s <span class="code">position</span>
 property.</p>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">A <span class="code">CGPoint</span>
 is a struct that holds two <span class="code">CGFloat</span>
 values, which represent x- and y-coordinates. When you’re dealing with screen coordinates, you typically use <span class="code">CGFloat</span>
 as the data type instead of <span class="code">Float</span>
 or <span class="code">Double</span>
 . A single <span class="code">CGPoint</span>
 can hold two values, one for <em>x</em>
 and one for <em>y</em>
 , which makes it convenient for dealing with screen coordinates in a 2D game where everything is positioned using both x- and y-positions.</p>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="note">
<p class="notet"><span id="page_211"></span>
 <strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Anything that begins with</em>
 <span class="code">
<span class="italic">CG</span>
</span>
 <em>comes from the</em>
 Core Graphics framework<em>, an Apple framework used for graphics. You’ll notice this kind of naming system a lot in Swift—the first two or three letters of a class or struct often tell you what that object is used for or where it comes from. For example, all the SpriteKit classes, such as</em>
 <span class="code">
<span class="italic">SKSpriteNode</span>
</span>
 <em>, start with</em>
 <span class="code">
<span class="italic">SK</span>
</span>
 <em>.</em>
</p>
</div>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">The line at <span class="ent">➎</span>
 adds the background image to the scene by calling the function <span class="code">addChild(_:)</span>
 . This sprite is now a <em>child</em>
 of the scene, which means it is attached to this scene. For instance, if the scene grows, shrinks, or goes away, this child sprite will, too. In a SpriteKit game, the scene is always the parent object, and every sprite is added as a child of that scene or as a child of another sprite. Whenever you add a sprite, it’s important to think about what that sprite’s parent should be. For example, the <span class="code">skater</span>
 sprite is a child of the scene, but if we wanted to add interchangeable hats onto the skater, we would use a <span class="code">hat</span>
 sprite that is a child of the <span class="code">skater</span>
 sprite. That way, whenever the skater jumped, the hat would stay on the skater, and we wouldn’t have to also move the hat separately.</p>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec6">
<strong>HOW IT WILL BE PLAYED: SCREEN ORIENTATION</strong>
</h3>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">It takes more work to create a game that runs in both portrait and landscape modes, so it’s often best to decide which orientation is best for your game and just pick that one. Since our game is an action game that scrolls horizontally, landscape orientation (where the device is on its side, as shown in <a href="text00026.html#ch14fig8">Figure 14-8</a>
 ) makes the most sense.</p>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00280.jpg" />
</div>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig8"></a>
 <em>Figure 14-8: How our game looks in portrait versus landscape orientation</em>
</p>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent"><span id="page_212"></span>
 Try running the project now, using the iPhone 7 simulator, and you’ll notice it may default to portrait orientation. Let’s change the project settings so the game runs only in landscape. Go to the Project navigator and click the <strong>SchoolhouseSkateboarder</strong>
 project—it’s at the top of the Project navigator with a blue icon next to it, as you can see in <a href="text00026.html#ch14fig9">Figure 14-9</a>
 .</p>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00281.jpg" />
</div>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00282.jpg" />
</div>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig9"></a>
 <em>Figure 14-9: Access the project settings by clicking the project entry in the Project navigator.</em>
</p>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">In <a href="text00026.html#ch14fig10">Figure 14-10</a>
 , you can see a list of projects and targets.</p>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00283.jpg" />
</div>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig10"></a>
 <em>Figure 14-10: Uncheck the Portrait option, leaving both Landscape orientation options checked.</em>
</p>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent"><span id="page_213"></span>
 If you don’t see the list of Projects and Targets on your screen, click the square icon in the upper-left corner of the window, as shown in <a href="text00026.html#ch14fig10">Figure 14-10</a>
 . This list will appear and the icon will turn blue to indicate that the list area is now being shown. Make sure the <strong>SchoolhouseSkateboarder</strong>
 target is selected. Now find the <strong>Portrait</strong>
 checkbox and uncheck it. Leave the Landscape orientation options checked.</p>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Run the game again, and you’ll see it launches in landscape orientation. We’re getting closer, but the background image doesn’t yet fill the screen. We’ll see how to fix this in a bit.</p>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">With the game now running in landscape orientation, you need to make sure that your simulator is also in landscape orientation. To rotate it, select <strong>Hardware</strong>
 <span class="ent">▸</span>
 <strong>Rotate Right</strong>
 from the simulator’s menu, as shown in <a href="text00026.html#ch14fig11">Figure 14-11</a>
 .</p>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00284.jpg" />
</div>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig11"></a>
 <em>Figure 14-11: Rotating the simulator orientation to match the game</em>
</p>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec7">
<strong>SIZING IMAGES FOR DIFFERENT SCREEN RESOLUTIONS</strong>
</h3>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">Before we dive into the code, we should decide which devices and screen resolutions we’ll support. The more devices you support, the more you’ll have to deal with different screen sizes, which means you need to do extra work to ensure the artwork assets you create will display properly on each device. Games tend to require more effort in this area than UIKit-based apps like our Birthday Tracker because game artwork will look stretched out if you just scale it up or down. To avoid that problem, you’ll have to work with a different set of images for each device you want to support.</p>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00285.jpg" />
</div>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent"><span id="page_214"></span>
 Xcode has a system for naming image files to help you tell which images are for which devices. For example, suppose you wanted to add an image of a skater to your game, and you had a skater image file that was 100 pixels wide and 100 pixels tall (100×100). You would name that image <em>skater.png</em>
 . You’d also need to create an image named <em>
<a href="mailto:skater@2x.png">skater@2x.png</a>
</em>
 that is 200×200 pixels, and another image named <em>
<a href="mailto:skater@3x.png">skater@3x.png</a>
</em>
 that is 300×300 pixels. These three files should be the same image in three different sizes. If the game is run on an iPhone 4, the <em>@2x</em>
 file will automatically be used thanks to the handy <em>@2x</em>
 suffix. If the game runs on an iPhone 6 Plus, the <em>@3x</em>
 file will automatically be used. In your code, you can just refer to the file as <span class="code">skater</span>
 , and as long as you’ve correctly named the images in your project, Xcode will display the correct image.</p>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">For Schoolhouse Skateboarder, we’ll support everything from the iPhone 4 on. That means we’ll need to support the following four screen resolutions: 960×640, 1136×640, 1334×750, and 1920×1080.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>All the images we’re using have a suffix, such as</em>
 @2x <em>or</em>
 @3x<em>. An image without a suffix, such as</em>
 skater.png<em>, is considered to be a 1x image. You only need to include 1x-sized images for older devices that have a non-retina display, such as an iPhone 3GS or a first-generation iPad mini. Therefore, all of our image files will have the</em>
 @2x <em>or</em>
 @3x <em>suffix.</em>
</p>
</div>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Our background image files are named <em>
<a href="mailto:background@2x.png">background@2x.png</a>
</em>
 and <em>
<a href="mailto:background@3x.png">background@3x.png</a>
</em>
 . If you look at the <em>Assets.xcassets</em>
 asset catalog, you’ll notice that Xcode grouped these two images together. If you drag images at the same time into an Xcode asset catalog, Xcode automatically recognizes that they are different sizes of the same image because of how they are named and groups them together. See <a href="text00026.html#ch14fig12">Figure 14-12</a>
 .</p>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00286.jpg" />
</div>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><a id="ch14fig12"></a>
 <em>Figure 14-12: Images with multiple sizes are grouped together in the asset catalog.</em>
</p>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">We have one last bit of prep to take care of before moving on from the background image. You may have noticed that when you run the game using the iPhone 7 simulator, the background image doesn’t fill the entire screen, as shown in <a href="text00026.html#ch14fig13">Figure 14-13</a>
 . This is because of the way the Game template handles sizing a game scene. The game scene’s size will be set based on the settings in the <em>GameScene.sks</em>
 scene editor file that was included in our project. We won’t be using the scene editor in this project, so we need to add code in order to make sure our scenes are sized properly.</p>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00287.jpg" />
</div>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="figcap"><span id="page_215"></span>
 <a id="ch14fig13"></a>
 <em>Figure 14-13: The background image doesn’t fill the entire screen.</em>
</p>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Click the <em>GameViewController.swift</em>
 file in the Project navigator and find the <span class="code">viewDidLoad()</span>
 method. Add the following lines of code that set the scene’s size:</p>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent1">
<em>GameViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
            <span class="ash">scene.scaleMode = .aspectFill</span>
<br />
<br />
            <span class="green">// Adjust the size of the scene to match the view</span>
<br />
            <span class="pink">let</span>
 width = view.<span class="violet">bounds</span>
 .<span class="violet">width</span>
<br />
            <span class="pink">let</span>
 height = view.<span class="violet">bounds</span>
 .<span class="violet">height</span>
<br />
            scene.<span class="violet">size</span>
 = <span class="violet">CGSize</span>
 (width: width, height: height)<br />
<br />
            <span class="ash">// Present the scene</span>
<br />
            <span class="ash">view.presentScene(scene)</span>
<br />
<br />
    <span class="ash">--</span>
 <span class="ash">
<em>snip</em>
</span>
 <span class="ash">--</span>
<br />
<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">The code in the <span class="code">viewDidLoad()</span>
 method creates an instance of the <span class="code">GameScene</span>
 class and displays it. Since the <span class="code">GameScene</span>
 is the main scene of our game, we want it to always fill the entire screen. The code that we added here determines the size (width and height) of the view being displayed, and sets the size of the new scene so that it fills the entire view.</p>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Run the project again. The background image should fill the entire screen now.</p>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<h3 class="h3" id="ch14lev1sec8"><span id="page_216"></span>
 <strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="noindent">In this chapter, you started making the Schoolhouse Skateboarder game and learned about SpriteKit. You learned how to create a game project in Xcode and import assets, such as images, into the project. You also learned about supporting various device screen resolutions through standard file naming practices and about how to pick what image types you’ll need in a game. Finally, you created and displayed a background image sprite.</p>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<p class="indent">Now that we’ve set up a SpriteKit game project with the resources we need and tackled the questions of screen orientation and resolution, it’s time to program some action. In <a href="text00027.html#ch15">Chapter 15</a>
 , we’ll add our hero and the ground that she skates on, make everything move, and let the player tap on the screen to make her jump.</p>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
<div class="image"><img src="Image00288.jpg" />
</div>
</body>
</html>
</body></html>