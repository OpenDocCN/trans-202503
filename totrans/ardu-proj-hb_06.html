<html><head></head><body>
<h1 class="part" id="part05"><span epub:type="pagebreak" id="page_133"/><strong>PART 5</strong><br/><img alt="image" class="middle" src="../images/common-01.jpg"/><br/><span class="big"><strong>NUMERIC COUNTERS</strong></span></h1>&#13;


<h2 class="h2a" id="ch16"><span epub:type="pagebreak" id="page_134"/>PROJECT 16: ELECTRONIC DIE</h2>&#13;
<p class="h2sub"><strong><span class="violet">BOARD GAMES ARE PERILOUS ENOUGH WITHOUT ARGUMENTS OVER NUMBER READINGS FROM FALLEN OR LOST DICE. THE PERFECT SOLUTION: AN ELECTRONIC DIE.</span></strong></p>&#13;
<div class="image2"><img alt="image" src="../images/f0134-01.jpg"/></div>&#13;
<div class="image2"><span epub:type="pagebreak" id="page_135"/><img alt="image" src="../images/f0135-01.jpg"/></div>&#13;
<div class="box1">&#13;
<p class="boxtitle1a"><span class="violet"><strong>PARTS REQUIRED</strong></span></p>&#13;
<p class="bull">• Arduino board</p>&#13;
<p class="bull">• Breadboard</p>&#13;
<p class="bull">• Jumper wires</p>&#13;
<p class="bull">• 8 220-ohm resistors</p>&#13;
<p class="bull">• Seven-segment LED display</p>&#13;
<p class="bull">• 74HC595 shift register</p>&#13;
<p class="bull">• Momentary tactile four-pin pushbutton</p>&#13;
</div>&#13;
<h3 class="h3" id="ch16lev1sec01"><span epub:type="pagebreak" id="page_136"/><span class="violet"><strong>HOW IT WORKS</strong></span></h3>&#13;
<p class="noindent">In this project we’ll create a die using a seven-segment LED display. When the pushbutton is pressed, a pulse is sent to the Arduino, and the LED “shakes” and displays a random digit between 1 and 6.</p>&#13;
<p class="indent">This project uses a 74HC595 <em>shift register</em>, a small integrated circuit (IC) and sequential logic counter that allows the Arduino to make more connections than it usually can with the pins it has, by “shifting” and storing data. The shift register has 16 pins; at one end you’ll find a dot or semicircle, which marks pin 1 on the left. The pins are then numbered counterclockwise from here. <a href="ch16.xhtml#ch16fig1">Figure 16-1</a> shows the pinout, and <a href="ch16.xhtml#ch16tab1">Table 16-1</a> describes the function of each pin.</p>&#13;
<p class="figcaption"><a id="ch16fig1"/><strong>FIGURE 16-1:</strong><br/>Pinout of the 74HC595 shift register</p>&#13;
<div class="image"><img alt="image" src="../images/f16-01.jpg"/></div>&#13;
<p class="tablecap"><a id="ch16tab1"/><strong>TABLE 16-1:</strong><br/>74HC595 shift register pins</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>SHIFT REGISTER PINS</strong></p></td>&#13;
<td class="tableth1" style="vertical-align: middle;"><p class="tablec"><strong>CONNECTIONS</strong></p></td>&#13;
<td class="tableth1aa-v" style="vertical-align: middle;"><p class="tablec"><strong>PIN FUNCTION</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pins 1–7, 15</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Q0–Q7</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Output pins</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 8</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Ground, VSS</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 9</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Q7</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Serial out</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 10</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">MR</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Master Reclear, active low</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 11</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">SH_CP</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Shift register clock pin (CLOCK pin)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span epub:type="pagebreak" id="page_137"/><span class="violet">Pin 12</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">ST_CP</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Storage register clock pin (LATCH pin)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 13</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">OE</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Output Enable, active low</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 14</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">DS</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Serial data input (DATA pin)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 16</span></p></td>&#13;
<td class="table3" style="vertical-align: middle;"><p class="tablec"><span class="violet">VCC</span></p></td>&#13;
<td class="table3ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Positive power</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">The wire attached to Arduino pin 2 is connected to our pushbutton and, when pressed, will create a pulse. To use the die, push the button to make the digit on the die shake and display a random digit.</p>&#13;
<h3 class="h3" id="ch16lev1sec02"><span class="violet"><strong>THE BUILD</strong></span></h3>&#13;
<ol>&#13;
<li><p class="noindenta">Insert the seven-segment LED into your breadboard, making sure it straddles the center break; otherwise, the pins opposite each other will connect and short-circuit. Connect pin 3 to the GND rail, and connect 220-ohm resistors to the remaining pins except pin 8, which is not used. The resistors are needed to prevent the segment LEDs from burning out. See <a href="ch16.xhtml#ch16fig2">Figure 16-2</a> for this setup.</p>&#13;
<p class="figcaption"><a id="ch16fig2"/><strong>FIGURE 16-2:</strong><br/>Connecting the seven-segment LED</p>&#13;
<div class="image"><img alt="image" src="../images/f16-02.jpg"/></div></li>&#13;
<li><p class="noindenta"><span epub:type="pagebreak" id="page_138"/>Insert the 74HC595 shift register into the breadboard with the semicircle marker of the IC on the left side. The bottom left-hand pin should be pin 1. Your IC needs to straddle the center break, as shown in <a href="ch16.xhtml#ch16fig3">Figure 16-3</a>.</p>&#13;
<p class="figcaption"><a id="ch16fig3"/><strong>FIGURE 16-3:</strong><br/>The 74HC595 shift register should straddle the breadboard center break.</p>&#13;
<div class="image"><img alt="image" src="../images/f16-03.jpg"/></div></li>&#13;
<li><p class="noindenta">Carefully make the connections shown in the following table between the seven-segment LED display and the 74HC595 shift register.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>SEVEN-SEGMENT LED DISPLAY</strong></p></td>&#13;
<td class="tableth1" style="vertical-align: middle;"><p class="tablec"><strong>SHIFT REGISTER</strong></p></td>&#13;
<td class="tableth1aa-v" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 1 (E)<a href="ch16.xhtml#fn01" id="fn_01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 4</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 2 (D)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 3</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 3</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 4 (C)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 2</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 5 (DP)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 7</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 6 (B)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 1</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 7 (A)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 15</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 8</span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Not used</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 9 (F)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table1" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 5</span></p></td>&#13;
<td class="table1ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 10 (G)<a href="ch16.xhtml#fn01">*</a></span></p></td>&#13;
<td class="table3" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 6</span></p></td>&#13;
<td class="table3ab-v" style="vertical-align: middle;"><p class="tablec"> </p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="footnote"><a href="ch16.xhtml#fn_01" id="fn01">*</a> These pins require a 220-ohm resistor between the seven-segment LED display and the 74HC595 shift register.</p></li>&#13;
<li><p class="noindenta"><span epub:type="pagebreak" id="page_139"/>Now connect the remaining shift register pins to the Arduino as shown in the following table.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>SHIFT REGISTER</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 9</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Not used</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 10</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">+5V</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 11</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 12</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 12</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 8</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 13</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 14</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 11</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 16</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">+5V</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pulse</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 2</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table></li>&#13;
<li><p class="noindenta">Insert the pushbutton into the breadboard with the pins straddling the center break, as shown in <a href="ch16.xhtml#ch16fig4">Figure 16-4</a>. Connect one side to pin 2 on the Arduino and the other side to GND.</p>&#13;
<p class="figcaption"><a id="ch16fig4"/><strong>FIGURE 16-4:</strong><br/>The pushbutton should also straddle the breadboard center break.</p>&#13;
<div class="image"><img alt="image" src="../images/f16-04.jpg"/></div></li>&#13;
<li><p class="noindenta">Confirm that your setup matches the circuit diagram in <a href="ch16.xhtml#ch16fig5">Figure 16-5</a>, and upload the code in “<a href="ch16.xhtml#ch16lev1sec03">The Sketch</a>” on <a href="ch16.xhtml#page_140">page 140</a>.</p>&#13;
<p class="figcaption"><a id="ch16fig5"/><strong>FIGURE 16-5:</strong><br/>The circuit diagram for the electronic die</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_140"/><img alt="image" src="../images/f16-05.jpg"/></div></li>&#13;
</ol>&#13;
<h3 class="h3" id="ch16lev1sec03"><span class="violet"><strong>THE SKETCH</strong></span></h3>&#13;
<p class="noindent">The sketch first sets the pins to control the 74HC595 chip that drives the seven-segment LED. When the seven-segment LED display is powered up, the dot is lit. When you press the pushbutton, the LEDs light in a short, rotating animation to signify that the die is shaking. After a moment a random number between 1 and 6 will be displayed. Press the button again to generate your next roll of the die.</p>&#13;
<pre><span class="ash">// Code by Warrick A. Smith and reproduced with kind permission</span><br/><span class="ash">// http://startingelectronics.com</span><br/><br/><span class="green2">const int</span> latchPin = 8;   <span class="ash">// Pins connected to shift register</span><br/><span class="green2">const int</span> clockPin = 12;<br/><span class="green2">const int</span> dataPin = 11;<br/><span class="green2">const int</span> buttonPin = 2;  <span class="ash">// Pin connected to switch wire</span><br/><span class="ash">// 1 to 6 and DP (decimal point) on 7-segment display</span><br/><span class="green2">unsigned char</span> lookup_7seg[] = {0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x80};<br/><span class="ash">// Shaking die pattern on 7-segment display</span><br/><span class="green2">unsigned char</span> shake_dice[] = {0x63, 0x5C};<br/><span epub:type="pagebreak" id="page_141"/><span class="ash">// Rolling die on 7-segment display</span><br/><span class="green2">unsigned char</span> roll_dice[] = {0x1C, 0x58, 0x54, 0x4C};<br/><span class="ash">// Vary duration of time before die number is received</span><br/><span class="green2">int</span> rand_seed;<br/><span class="green2">int</span> rand_num = 0;                <span class="ash">// Generate random number</span><br/><span class="green2">unsigned char</span> shake_toggle = 0;  <span class="ash">// For shaking dice animation</span><br/><span class="green2">int</span> index = 0;                   <span class="ash">// For rolling dice animation</span><br/><span class="green2">int</span> shake_speed;                 <span class="ash">// Accelerates dice shake speed</span><br/><br/><span class="green2">void</span> <span class="green3">setup</span>() {<br/>  <span class="orange1">pinMode</span>(latchPin, <span class="green2">OUTPUT</span>);     <span class="ash">// Output pins for controlling the</span><br/>                                 <span class="ash">// shift register</span><br/>  <span class="orange1">pinMode</span>(clockPin, <span class="green2">OUTPUT</span>);<br/>  <span class="orange1">pinMode</span>(dataPin, <span class="green2">OUTPUT</span>);<br/>  <span class="orange1">pinMode</span>(buttonPin, <span class="green2">INPUT</span>);     <span class="ash">// Read switch wire state</span><br/>  <span class="orange1">digitalWrite</span>(latchPin, <span class="green2">LOW</span>);   <span class="ash">// Display DP on 7-segment display</span><br/>                                 <span class="ash">// at startup</span><br/>  <span class="orange1">shiftOut</span>(dataPin, clockPin, <span class="green2">MSBFIRST</span>, lookup_7seg[6]);<br/>  <span class="orange1">digitalWrite</span>(latchPin, <span class="green2">HIGH</span>);<br/>  <span class="orange1">randomSeed</span>(<span class="orange1">analogRead</span>(0));     <span class="ash">// Generate random seed</span><br/>}<br/><br/><span class="green2">void</span> <span class="green3">loop</span>() {<br/>  <span class="green3">if</span> (<span class="orange1">digitalRead</span>(buttonPin)) {<br/>    shake_speed = 150; <span class="ash">// Reset die shaking speed</span><br/>    <span class="orange1">delay</span>(30);<br/>    <span class="ash">// Generate number for random speed and show shaking animation</span><br/>    <span class="green3">while</span> (<span class="orange1">digitalRead</span>(buttonPin)) {<br/>      rand_seed++;      <span class="ash">// Generate random number</span><br/>      <span class="ash">// Animate shaking die</span><br/>      <span class="green3">if</span> (shake_toggle) {<br/>        AnimateDice(0, shake_dice);<br/>        shake_toggle = 0;<br/>      }<br/>      <span class="green3">else</span> {<br/>        AnimateDice(1, shake_dice);<br/>        shake_toggle = 1;<br/>      }<br/>      <span class="orange1">delay</span>(80 + shake_speed);  <span class="ash">// Accelerate animation speed</span><br/>      <span class="green3">if</span> (shake_speed &gt; 0) {<br/>        shake_speed -= 10;<br/>      }<br/>    }<br/>    <span class="ash">// Animate rolling die</span><br/>    <span class="green3">for</span> (<span class="green2">int</span> rolls = 0; rolls &lt; (rand_seed % 10 + 14); rolls++) {<br/>      AnimateDice(index, roll_dice);<br/>      <span class="orange1">delay</span>((1 + rolls) * 20);<br/>      index++;<br/>      <span class="green3">if</span> (index &gt; 3) {<br/>        index = 0;<br/>      }<br/>    }<br/>    <span epub:type="pagebreak" id="page_142"/>rand_num = <span class="orange1">random</span>(0, 6);  <span class="ash">// Generate number thrown on die</span><br/>    DiceNumber(rand_num);<br/>  }<br/>}<br/><br/><span class="ash">// Display the die number on 7-segment display</span><br/><span class="green2">void</span> DiceNumber(<span class="green2">unsigned char</span> num) {<br/>  <span class="orange1">digitalWrite</span>(latchPin, <span class="green2">LOW</span>);<br/>  <span class="orange1">shiftOut</span>(dataPin, clockPin, <span class="green2">MSBFIRST</span>, lookup_7seg[num]);<br/>  <span class="orange1">digitalWrite</span>(latchPin, <span class="green2">HIGH</span>);<br/>}<br/><br/><span class="ash">// Display one frame of the shaking or rolling dice</span><br/><span class="green2">void</span> AnimateDice(<span class="green2">int</span> seg, <span class="green2">unsigned char</span> *table) {<br/>  <span class="orange1">digitalWrite</span>(latchPin, <span class="green2">LOW</span>);<br/>  <span class="orange1">shiftOut</span>(dataPin, clockPin, <span class="green2">MSBFIRST</span>, table[seg]);<br/>  <span class="orange1">digitalWrite</span>(latchPin, <span class="green2">HIGH</span>);<br/>}</pre>&#13;


<h2 class="h2a" id="ch17"><span epub:type="pagebreak" id="page_143"/>PROJECT 17: ROCKET LAUNCHER</h2>&#13;
<p class="h2sub"><strong><span class="violet">IN THIS PROJECT WE’LL CREATE A PROGRAMMABLE COUNTDOWN TIMER THAT WE’LL USE TO LAUNCH A ROCKET BY IGNITING A FUSE WHEN THE COUNTDOWN REACHES 0.</span></strong></p>&#13;
<div class="image2"><img alt="image" src="../images/f0143-01.jpg"/></div>&#13;
<div class="image2"><span epub:type="pagebreak" id="page_144"/><img alt="image" src="../images/f0144-01.jpg"/></div>&#13;
<div class="box1">&#13;
<p class="boxtitle1a"><span class="violet"><strong>PARTS REQUIRED</strong></span></p>&#13;
<p class="bull">• Arduino board</p>&#13;
<p class="bull">• Breadboard</p>&#13;
<p class="bull">• Jumper wires</p>&#13;
<p class="bull">• Four-digit, seven-segment serial display</p>&#13;
<p class="bull">• Piezo buzzer</p>&#13;
<p class="bull">• 2 momentary tactile four-pin pushbutton</p>&#13;
<p class="bull">• 50k-ohm potentiometer</p>&#13;
<p class="bull">• 3 LEDs (red, green, yellow)</p>&#13;
<p class="bull">• 3 220-ohm resistors</p>&#13;
</div>&#13;
<div class="box1">&#13;
<p class="boxtitle1a"><span class="violet"><strong>LIBRARIES REQUIRED</strong></span></p>&#13;
<p class="bull">• SoftwareSerial</p>&#13;
</div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_145"/>We’ll use a four-digit, seven-segment serial display that has a built-in integrated circuit to control the LEDs and can be connected to the Arduino with only three wires. When choosing your display, make sure it has an RX input so you’ll be able to control it with only one wire.</p>&#13;
<h3 class="h3" id="ch17lev1sec01"><span class="violet"><strong>HOW IT WORKS</strong></span></h3>&#13;
<p class="noindent">You could use a timer like this to set off anything that requires power, like a servomotor, LED, or alarm. You’ll use a potentiometer to select the duration of your countdown (anywhere from 5 to 60 seconds). The LED screen will display the digits so you can see what you are setting the countdown to. We’ll include two pushbuttons: an Arm button and a Launch button. Once you’ve chosen the duration of your countdown, press the Arm button to ready the timer. The red LED light shows that it’s armed. (The Arm button is a safety feature to prevent you from accidentally setting off the launcher.) Once you’ve armed the rocket, press the Launch button to start the countdown. The green LED light signifies that it’s ready, and the countdown begins.</p>&#13;
<p class="indent">As the timer counts down, the piezo buzzer beeps every second. When the counter reaches five seconds, the timer beeps increasingly quickly until launch. When the timer reaches 0, power is sent through pin 7 to whatever output you have there—in this case, it lights the yellow LED. You could connect this timer to a buzzer, a servomotor to unlock a door, or even a fuse to ignite a rocket. I’ll show you how to make your own simple ignition for a fuse later in this project.</p>&#13;
<h3 class="h3" id="ch17lev1sec02"><span class="violet"><strong>THE BUILD</strong></span></h3>&#13;
<ol>&#13;
<li><p class="noindenta">Connect the seven-segment serial display RX pin to Arduino pin 3, connect VCC to +5V, and connect GND to Arduino GND via the breadboard, as shown in <a href="ch17.xhtml#ch17fig1">Figure 17-1</a>. You might need to strip back some of the wire to make the connection.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>SEVEN-SEGMENT SERIAL DISPLAY</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">RX</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 3</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">VCC</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">+5V</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="figcaption"><a id="ch17fig1"/><strong>FIGURE 17-1:</strong><br/>Connecting the seven-segment display to the Arduino</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_146"/><img alt="image" src="../images/f17-01.jpg"/></div></li>&#13;
<li><p class="noindenta">Insert the potentiometer into the breadboard and connect the left pin to +5V, the center pin to Arduino pin A0, and the right pin to GND, as shown in <a href="ch17.xhtml#ch17fig2">Figure 17-2</a>.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>POTENTIOMETER</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Left pin</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">+5V</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Center pin</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">A0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Right pin</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="figcaption"><a id="ch17fig2"/><strong>FIGURE 17-2:</strong><br/>Placing the potentiometer into the breadboard</p>&#13;
<div class="image"><img alt="image" src="../images/f17-02.jpg"/></div></li>&#13;
<li><p class="noindenta"><span epub:type="pagebreak" id="page_147"/>Connect the red wire of the piezo buzzer to Arduino pin 4 and the black wire to GND, as shown in <a href="ch17.xhtml#ch17fig3">Figure 17-3</a>.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>PIEZO</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Red wire</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 4</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Black wire</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="figcaption"><a id="ch17fig3"/><strong>FIGURE 17-3:</strong><br/>Connecting the piezo buzzer</p>&#13;
<div class="image"><img alt="image" src="../images/f17-03.jpg"/></div></li>&#13;
<li><p class="noindenta">Insert the two pushbuttons into your breadboard, with pins A and B on one side of the center break and pins D and C on the other, following the configuration in <a href="ch17.xhtml#ch17fig4">Figure 17-4</a>.</p>&#13;
<p class="figcaption"><a id="ch17fig4"/><strong>FIGURE 17-4:</strong><br/>The pin connections of the pushbutton</p>&#13;
<div class="image"><img alt="image" src="../images/f17-04.jpg"/></div></li>&#13;
<li><p class="noindenta">Next, we’ll connect the pushbuttons, as shown in <a href="ch17.xhtml#ch17fig5">Figure 17-5</a>. To create the Arm button, connect pin C of the first pushbutton to GND and pin D to Arduino pin 5. To create the Launch button, connect pin C of the other pushbutton to GND and pin D to Arduino pin 6.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>PUSHBUTTONS</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Arm pin C</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Arm pin D</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 5</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Launch pin C</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Launch pin D</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 6</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="figcaption"><a id="ch17fig5"/><strong>FIGURE 17-5:</strong><br/>Connecting the pushbuttons and LEDs</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_148"/><img alt="image" src="../images/f17-05.jpg"/></div></li>&#13;
<li><p class="noindenta">Insert the red LED into the breadboard with the shorter, negative leg connected to pin B of the Arm button. Connect the other leg to a 220-ohm resistor, and connect the other side of the resistor to +5V. Then insert the green LED with the negative leg connected to pin B of the Launch button, and the positive leg connected to +5V via a 220-ohm resistor.</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>RESISTORS</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Negative legs</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Positive legs</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">+5V via 220-ohm resistor</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table></li>&#13;
<li><p class="noindenta">Connect the igniter. We’re using a yellow LED as our igniter indicator for now. Insert it into the breadboard with the negative leg connected to GND and the positive leg connected to Arduino pin 7 via a 220-ohm resistor. (See “<a href="ch17.xhtml#ch17lev1sec03">Create a Working Fuse</a>” on <a href="ch17.xhtml#page_149">page 149</a> to learn how to make your own fuse igniter.)</p>&#13;
<table class="all">&#13;
<thead>&#13;
<tr>&#13;
<td class="tableth1a-v" style="vertical-align: middle;"><p class="tablec"><strong>IGNITER</strong></p></td>&#13;
<td class="tableth2" style="vertical-align: middle;"><p class="tablec"><strong>ARDUINO</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table1a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Negative leg</span></p></td>&#13;
<td class="table2" style="vertical-align: middle;"><p class="tablec"><span class="violet">GND</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table3a-v" style="vertical-align: middle;"><p class="tablec"><span class="violet">Positive leg</span></p></td>&#13;
<td class="table3l" style="vertical-align: middle;"><p class="tablec"><span class="violet">Pin 7 via 220-ohm resistor</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="indent">When the countdown reaches 0, pin 7 is set to <code>HIGH</code> and triggers the igniter. Instead of actually igniting a fuse, we light the yellow LED to represent the ignition.</p></li>&#13;
<li><p class="noindenta">Confirm that your setup matches the circuit diagram in <a href="ch17.xhtml#ch17fig6">Figure 17-6</a>, and upload the code in “<a href="ch17.xhtml#ch17lev1sec04">The Sketch</a>” on <a href="ch17.xhtml#page_151">page 151</a>.</p>&#13;
<p class="figcaption"><a id="ch17fig6"/><strong>FIGURE 17-6:</strong><br/>The circuit diagram for the rocket launcher</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_149"/><img alt="image" src="../images/f17-06.jpg"/></div></li>&#13;
</ol>&#13;
<h3 class="h3" id="ch17lev1sec03"><span class="violet"><strong>CREATE A WORKING FUSE</strong></span></h3>&#13;
<p class="noindent">Instead of using an LED to indicate ignition, you can create a working fuse using a simple Christmas tree light. Be sure to wear eye protection when creating your fuse. These instructions are for entertainment purposes and should be carried out only by an adult.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong>WARNING</strong></p>&#13;
<p class="notep"><em>There may be restrictions to launching a hobby rocket or firework in your country or state, so please check beforehand. It is your responsibility to keep project use within the law.</em></p>&#13;
</div>&#13;
<ol>&#13;
<li><p class="noindenta"><span epub:type="pagebreak" id="page_150"/>Using a hobby drill, apply light pressure to the top of the glass casing on a Christmas light to cut it off (see <a href="ch17.xhtml#ch17fig7">Figure 17-7</a>).</p>&#13;
<p class="figcaption"><a id="ch17fig7"/><strong>FIGURE 17-7:</strong><br/>Cutting the tip with a hobby drill</p>&#13;
<div class="image"><img alt="image" src="../images/f17-07.jpg"/></div></li>&#13;
<li><p class="noindenta">Cut near the tip of the glass casing and the top should pop off easily (<a href="ch17.xhtml#ch17fig8">Figure 17-8</a>).</p>&#13;
<p class="figcaption"><a id="ch17fig8"/><strong>FIGURE 17-8:</strong><br/>Popping off the tip</p>&#13;
<div class="image"><img alt="image" src="../images/f17-08.jpg"/></div></li>&#13;
<li><p class="noindenta">Now cut off the head of a wooden match (make sure you don’t ignite it!) and gently insert the match head into the open bulb, taking care not to damage the filament (<a href="ch17.xhtml#ch17fig9">Figure 17-9</a>).</p>&#13;
<p class="figcaption"><a id="ch17fig9"/><strong>FIGURE 17-9:</strong><br/>Inserting a match head into the bottom half of the bulb</p>&#13;
<div class="image"><img alt="image" src="../images/f17-09.jpg"/></div></li>&#13;
<li><p class="noindenta">Finally, connect the bulb wires to your ignition wires. When power is sent to the bulb, the filament will heat up and ignite the match head (<a href="ch17.xhtml#ch17fig10">Figure 17-10</a>), creating enough energy to ignite a fuse.</p>&#13;
<p class="figcaption"><a id="ch17fig10"/><strong>FIGURE 17-10:</strong><br/>After the fuse has been lit</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_151"/><img alt="image" src="../images/f17-10.jpg"/></div></li>&#13;
</ol>&#13;
<h3 class="h3" id="ch17lev1sec04"><span class="violet"><strong>THE SKETCH</strong></span></h3>&#13;
<p class="noindent">The sketch first defines each component and its connection to the Arduino. The SoftwareSerial library controls the four-digit, seven-segment serial LED display, while the analog input from the potentiometer changes the time displayed from 5 to 60 seconds. When pressed, the Arm button acts as a digital switch and safety feature to allow the Launch button to be pressed. If the Arm button is pushed during countdown, the countdown aborts and the display resets.</p>&#13;
<p class="indent">The <code>tone</code> commands in the sketch pulse the piezo buzzer in time to the countdown to create a beep. When the countdown reaches 0, the igniter pin (in this case, connected to an LED) is set to <code>HIGH</code> and turns on the LED.</p>&#13;
<pre><span class="ash">// Ardunaut Arduining.com, reproduced with kind permission</span><br/><br/>#define FuseTIME      1500   <span class="ash">// Duration of fuse current in ms</span><br/>#include &lt;<span class="orange1">SoftwareSerial</span>.h&gt;  <span class="ash">// Call the SoftwareSerial library</span><br/><br/>#define Fuse     7     <span class="ash">// Pin connected to fuse (your LED or igniter)</span><br/>#define GoButt   6     <span class="ash">// Pin connected to Launch button</span><br/>#define ArmButt  5     <span class="ash">// Pin connected to Arm button</span><br/>#define BuzzPin  4     <span class="ash">// Pin connected to piezo buzzer</span><br/>#define TXdata   3     <span class="ash">// Pin connected to RX of display</span><br/>#define RXdata   2     <span class="ash">// Not used</span><br/>#define SetPot   0     <span class="ash">// Analog pin connected to potentiometer</span><br/><br/><span class="orange1">SoftwareSerial</span> mySerialPort(RXdata, TXdata);<br/><br/><span epub:type="pagebreak" id="page_152"/><span class="green2">void</span> <span class="green3">setup</span>() {<br/>  <span class="orange1">pinMode</span>(TXdata, <span class="green2">OUTPUT</span>);<br/>  <span class="orange1">pinMode</span>(RXdata, <span class="green2">INPUT</span>);<br/>  <span class="orange1">pinMode</span>(Fuse, <span class="green2">OUTPUT</span>);<br/>  <span class="orange1">pinMode</span>(ArmButt, <span class="green2">INPUT</span>);       <span class="ash">// Set Arm button pin to input</span><br/>  <span class="orange1">pinMode</span>(GoButt, <span class="green2">INPUT</span>);        <span class="ash">// Set Launch button pin to input</span><br/>  <span class="orange1">digitalWrite</span>(Fuse, <span class="green2">LOW</span>);       <span class="ash">// Open igniter circuit</span><br/>  <span class="orange1">digitalWrite</span>(ArmButt, <span class="green2">HIGH</span>);   <span class="ash">// Turn on resistor</span><br/>  <span class="orange1">digitalWrite</span>(GoButt, <span class="green2">HIGH</span>);    <span class="ash">// Turn on resistor</span><br/>  mySerialPort.<span class="orange1">begin</span>(9600);<br/>  <span class="orange1">delay</span>(10);                     <span class="ash">// Wait for serial display startup</span><br/>  mySerialPort.<span class="orange1">print</span>(<span class="green2">"v"</span>);       <span class="ash">// Reset the serial display</span><br/>  mySerialPort.<span class="orange1">print</span>(<span class="green2">"z"</span>);       <span class="ash">// Brightness</span><br/>  mySerialPort.<span class="orange1">write</span>(0x40);      <span class="ash">// 3/4 intensity</span><br/>  mySerialPort.<span class="orange1">print</span>(<span class="green2">"w"</span>);       <span class="ash">// Decimal point control</span><br/>  mySerialPort.<span class="orange1">write</span>(0x10);      <span class="ash">// Turn on colon in serial display</span><br/>}<br/><br/><span class="green2">int</span> DownCntr;   <span class="ash">// Countdown (1/10 seconds)</span><br/><span class="green2">int</span> Go = 0;     <span class="ash">// Stopped</span><br/><br/><span class="green2">void</span> <span class="green3">loop</span>() {<br/>  <span class="green3">if</span> (!<span class="orange1">digitalRead</span>(GoButt) || !<span class="orange1">digitalRead</span>(ArmButt)) {<br/>    Go = 0;   <span class="ash">// Abort the countdown</span><br/>    <span class="orange1">tone</span>(BuzzPin, 440, 1500);<br/>    <span class="orange1">delay</span>(1500);<br/>  }<br/><br/>  <span class="green3">if</span> (Go == 0) {<br/>    WaitARM();<br/>    WaitGO();<br/>  }<br/>  ShowTimer();<br/>  <span class="green3">if</span> (DownCntr &gt; 50) {<br/>    <span class="green3">if</span> (DownCntr % 10 == 0)<span class="orange1">tone</span>(BuzzPin, 1000, 50); <span class="ash">// One beep/sec</span><br/>  }<br/>  <span class="green3">else if</span> (DownCntr % 2 == 0)<span class="orange1">tone</span>(BuzzPin, 1000, 50); <span class="ash">// Beep faster</span><br/><br/>  <span class="green3">if</span> (DownCntr == 0) {<br/>    <span class="orange1">tone</span>(BuzzPin, 440, FuseTIME);  <span class="ash">// Launch tone</span><br/>    <span class="orange1">digitalWrite</span>(Fuse, <span class="green2">HIGH</span>);      <span class="ash">// Close the fuse circuit</span><br/>    <span class="orange1">delay</span>(FuseTIME);<br/>    <span class="orange1">digitalWrite</span>(Fuse, <span class="green2">LOW</span>);       <span class="ash">// Open the fuse circuit</span><br/>    Go = 0;<br/>  }<br/>  <span class="green3">while</span> (<span class="orange1">millis</span>() % 100);          <span class="ash">// Wait 50 ms</span><br/>  <span class="orange1">delay</span>(50);<br/>  DownCntr--;<br/>}<br/><br/><span class="green2">void</span> WaitGO() {<br/>  ShowTimer();<br/>  <span class="green3">while</span> (<span class="orange1">digitalRead</span>(GoButt));<br/>  Go = 1;<br/>  <span epub:type="pagebreak" id="page_153"/><span class="orange1">delay</span>(20);<br/>  <span class="green3">while</span> (!<span class="orange1">digitalRead</span>(GoButt)); <span class="ash">// Debounce Launch button</span><br/>}<br/><br/><span class="green2">void</span> ReadTimer() {<br/>  DownCntr = <span class="orange1">map</span>(<span class="orange1">analogRead</span>(SetPot), 0, 1023, 5, 60);<br/>  DownCntr *= 10;<br/>}<br/><br/><span class="green2">void</span> ShowTimer() {<br/>  <span class="green2">String</span> seconds = <span class="green2">String</span> (DownCntr, <span class="green2">DEC</span>);<br/>  <span class="green3">while</span> (seconds.<span class="orange1">length</span>() &lt; 3)seconds = <span class="green2">"0"</span> + seconds; <span class="ash">// Format to</span><br/>                                                       <span class="ash">// 3 numbers</span><br/>  mySerialPort.<span class="orange1">print</span>(seconds); <span class="ash">// Write to serial display</span><br/>  mySerialPort.<span class="orange1">print</span>(<span class="green2">" "</span>);     <span class="ash">// Last digit off</span><br/>}<br/><br/><span class="green2">void</span> WaitARM() {<br/>  <span class="green3">while</span> (<span class="orange1">digitalRead</span>(ArmButt) == 1) {<br/>    ReadTimer();<br/>    <span class="orange1">delay</span>(50);<br/>    ReadTimer();<br/>    ShowTimer();<br/>    <span class="orange1">delay</span>(150);<br/>  }<br/><br/>  Go = 0;<br/>  ShowTimer();<br/>  <span class="orange1">tone</span>(BuzzPin, 2000, 150);<br/>  <span class="orange1">delay</span>(200);<br/>  <span class="orange1">tone</span>(BuzzPin, 2000, 150);<br/>  <span class="orange1">delay</span>(200);<br/>  <span class="orange1">tone</span>(BuzzPin, 2000, 150);<br/><br/>  <span class="orange1">delay</span>(20);<br/>  <span class="green3">while</span> (!<span class="orange1">digitalRead</span>(ArmButt)); <span class="ash">// Debounce Arm button</span><br/>}<span epub:type="pagebreak" id="page_154"/></pre>&#13;
</body></html>