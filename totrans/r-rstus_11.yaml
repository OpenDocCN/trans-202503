- en: <hgroup>
  prefs: []
  type: TYPE_NORMAL
- en: 9 WEBSITES
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: </hgroup>
  prefs: []
  type: TYPE_NORMAL
- en: '![](../images/chapter.jpg)'
  prefs: []
  type: TYPE_IMG
- en: During the summer of 2020, Matt Herman’s family moved from Brooklyn to Westchester
    County, New York. It was still early in the COVID-19 pandemic, and Herman was
    shocked that the county published little data about infection rates. Vaccines
    weren’t yet available, and daily choices like whether to go to the park depended
    on access to good data.
  prefs: []
  type: TYPE_NORMAL
- en: 'At the time, Herman was deputy director of the ChildStat Data Unit in the Office
    of Research and Analytics at the New York City Administration for Children’s Services.
    This mouthful of a title meant he was skilled at working with data, enabling him
    to create the COVID resource he needed: the Westchester COVID-19 Tracking website.'
  prefs: []
  type: TYPE_NORMAL
- en: Built entirely in R, this website uses charts, maps, tables, and text to summarize
    the latest COVID data for Westchester County. The website is no longer updated
    daily, but you can still view it at *[https://westchester-covid.mattherman.info](https://westchester-covid.mattherman.info)*.
  prefs: []
  type: TYPE_NORMAL
- en: To make this website, Herman wrote a set of R Markdown files and strung them
    together with the distill package. This chapter explains the basics of the package
    by walking through the creation of a simple website. You’ll learn how to produce
    different page layouts, navigation menus, and interactive graphics, then explore
    strategies for hosting your website.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a New distill Project
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: A website is merely a collection of HTML files like the one you produced in
    [Chapter 8](chapter8.xhtml) when you created a slideshow presentation. The distill
    package uses multiple R Markdown documents to create several HTML files, then
    connects them with a navigation menu and more.
  prefs: []
  type: TYPE_NORMAL
- en: To create a distill website, install the package using install.packages ("distill").
    Then start a project in RStudio by navigating to **File****New Project****New
    Directory** and selecting **Distill Website** as the project type.
  prefs: []
  type: TYPE_NORMAL
- en: Specify the directory and subdirectory where your project will live on your
    computer, then give your website a title. Check the Configure for GitHub Pages
    option, which provides an easy way to post your website online (you’ll learn how
    it works in “GitHub Hosting” on [page 154](#pg_154)). Select it if you’d like
    to use this deployment option.
  prefs: []
  type: TYPE_NORMAL
- en: The Project Files
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You should now have a project with several files. In addition to the *covid-website.Rproj*
    file indicating that you’re working in an RStudio project, you should have two
    R Markdown documents, a *_site.yml* file, and a *docs* folder, where the rendered
    HTML files will go. Let’s take a look at these website files.
  prefs: []
  type: TYPE_NORMAL
- en: R Markdown Documents
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Each R Markdown file represents a page of the website. By default, distill creates
    a home page (*index.Rmd*) and an About page (*about.Rmd*) containing placeholder
    content. If you wanted to generate additional pages, you would simply add new
    R Markdown files, then list them in the *_site.yml* file discussed in the next
    section.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you open the *index.Rmd* file, you’ll notice that the YAML contains two
    arguments, description and site, that didn’t appear in the R Markdown documents
    from previous chapters:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The description argument specifies the text that should go below the title of
    each page, as shown in [Figure 9-1](chapter9.xhtml#fig9-1).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../images/fig9-1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-1: The default website description'
  prefs: []
  type: TYPE_NORMAL
- en: 'The site: distill::distill_website line identifies the root page of a distill
    website. This means that when you knit the document, R Markdown knows to create
    a website rather than an individual HTML file and that the website should display
    this page first. The other pages of the website don’t require this line. As long
    as they’re listed in the *_site.yml* file, they’ll be added to the site.'
  prefs: []
  type: TYPE_NORMAL
- en: 'You’ll also notice the absence of an argument you’ve seen in other R Markdown
    documents: output, which specifies the output format R should use while knitting.
    The reason output is missing here is that you’ll specify the output for the entire
    website in the *_site.yml* file.'
  prefs: []
  type: TYPE_NORMAL
- en: The _site.yml File
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The *_site.yml* file tells R which R Markdown documents make up the website,
    what the knitted files should look like, what the website should be called, and
    more. When you open it, you should see the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: The name argument determines the URL for your website. By default, this should
    be the name of the directory where your distill project lives; in my case, that’s
    the *covid-website* directory. The title argument creates the title for the entire
    website and shows up in the top left of the navigation bar by default. The description
    argument provides what’s known as a *meta description*, which will show up as
    a couple of lines in Google search results to give users an overview of the website
    content.
  prefs: []
  type: TYPE_NORMAL
- en: The output_dir argument determines where the rendered HTML files live when you
    generate the website. You should see the *docs* directory listed here. However,
    you can change the output directory to any folder you choose.
  prefs: []
  type: TYPE_NORMAL
- en: Next, the navbar section defines the website’s navigation. Here it appears on
    the right side of the header, but swapping the right parameter for left would
    switch its position. The navigation bar includes links to the site’s two pages,
    Home and About, as shown in [Figure 9-2](chapter9.xhtml#fig9-2).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../images/fig9-2.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-2: The website navigation bar'
  prefs: []
  type: TYPE_NORMAL
- en: Within the navbar code, the text argument specifies what text shows up in the
    menu. (Try, for example, changing About to **About This Website**, and then change
    it back.) The href argument determines which HTML file the text in the navigation
    bar links to. If you want to include additional pages on your menu, you’ll need
    to add both the text and href parameters.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, the output argument specifies that all R Markdown documents should
    be rendered using the distill_article format. This format allows for layouts of
    different widths, *asides* (parenthetical items that live in a sidebar next to
    the main content), easily customizable CSS, and more.
  prefs: []
  type: TYPE_NORMAL
- en: Building the Site
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We’ve explored the project’s files but haven’t yet used them to create the website.
    To do this, click **Build Website** in the Build tab of RStudio’s top-right pane.
    (You could also run rmarkdown::render_site() in the console or in an R script
    file.)
  prefs: []
  type: TYPE_NORMAL
- en: This should render all R Markdown documents and add the top navigation bar to
    them with the options specified in the *_site.yml* file. To find the rendered
    files, look in *docs* (or whatever output directory you specified). Open the *index.xhtml*
    file and you’ll find your website, which should look like [Figure 9-3](chapter9.xhtml#fig9-3).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../images/fig9-3.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-3: The COVID website with default content'
  prefs: []
  type: TYPE_NORMAL
- en: You can open any other HTML file as well to see its rendered version.
  prefs: []
  type: TYPE_NORMAL
- en: Applying Custom CSS
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Websites made with distill tend to look similar, but you can change their design
    using custom CSS. The distill package even provides a function to simplify this
    process. Run distill::create_theme() in the console to create a file called *theme.css*,
    shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Within this file is a set of CSS variables that allow you to customize the
    design of your website. Most of them have names that clearly show their purpose,
    and you can alter their default values to whatever you’d like. For example, the
    following edits to the site’s header make the title and text size larger and change
    the background color to a light blue:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Before you can see these changes, however, you need to add a line to the *_site.yml*
    file to tell distill to use this custom CSS when rendering:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Now you can generate the site again, and you should see your changes reflected.
  prefs: []
  type: TYPE_NORMAL
- en: There are a lot of other CSS variables in *theme.css* that you can change to
    tweak the appearance of your website. Playing around with them and regenerating
    your site is a great way to figure out what each one does.
  prefs: []
  type: TYPE_NORMAL
- en: NOTE
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*To learn more about customizing the look and feel of your website, check out
    the distill websites made by others at* [https://distillery.rbind.io](https://distillery.rbind.io)*.*'
  prefs: []
  type: TYPE_NORMAL
- en: Working with Website Content
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'You can add content to a page on your website by creating Markdown text and
    code chunks in the page’s R Markdown document. For example, to highlight rates
    of COVID cases over time, you’ll replace the contents of *index.Rmd* with code
    that displays a table, a map, and a chart on the website’s home page. Here’s the
    start of the file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]{r setup, include=FALSE}'
  prefs: []
  type: TYPE_NORMAL
- en: knitr::opts_chunk$set(echo = FALSE,
  prefs: []
  type: TYPE_NORMAL
- en: warning = FALSE,
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: message = FALSE)
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE6]{r}'
  prefs: []
  type: TYPE_NORMAL
- en: Load packages
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: library(tidyverse)
  prefs: []
  type: TYPE_NORMAL
- en: library(janitor)
  prefs: []
  type: TYPE_NORMAL
- en: library(tigris)
  prefs: []
  type: TYPE_NORMAL
- en: library(gt)
  prefs: []
  type: TYPE_NORMAL
- en: library(lubridate)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'After the YAML and setup code chunk, this code loads several packages, most
    of which you’ve seen in previous chapters: the tidyverse for data import, manipulation,
    and plotting (with ggplot); janitor for its clean_names() function, which makes
    the variable names easier to work with; tigris to import geospatial data about
    states; gt for making nice tables; and lubridate to work with dates.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, to import and clean the data, add this new code chunk:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]{r}'
  prefs: []
  type: TYPE_NORMAL
- en: Import data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: us_states <- states(
  prefs: []
  type: TYPE_NORMAL
- en: cb = TRUE,
  prefs: []
  type: TYPE_NORMAL
- en: resolution = "20m",
  prefs: []
  type: TYPE_NORMAL
- en: progress_bar = FALSE
  prefs: []
  type: TYPE_NORMAL
- en: ) %>%
  prefs: []
  type: TYPE_NORMAL
- en: shift_geometry() %>%
  prefs: []
  type: TYPE_NORMAL
- en: clean_names() %>%
  prefs: []
  type: TYPE_NORMAL
- en: select(geoid, name) %>%
  prefs: []
  type: TYPE_NORMAL
- en: rename(state = name) %>%
  prefs: []
  type: TYPE_NORMAL
- en: filter(state %in% state.name)
  prefs: []
  type: TYPE_NORMAL
- en: covid_data <- read_csv("https://raw.githubusercontent.com/nytimes/covid-19-data/master/rolling-averages/us-states.csv")
    %>%
  prefs: []
  type: TYPE_NORMAL
- en: filter(state %in% state.name) %>%
  prefs: []
  type: TYPE_NORMAL
- en: mutate(geoid = str_remove(geoid, "USA-"))
  prefs: []
  type: TYPE_NORMAL
- en: last_day <- covid_data %>%  ❶
  prefs: []
  type: TYPE_NORMAL
- en: slice_max(
  prefs: []
  type: TYPE_NORMAL
- en: order_by = date,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: n = 1
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ) %>%
  prefs: []
  type: TYPE_NORMAL
- en: distinct(date) %>%
  prefs: []
  type: TYPE_NORMAL
- en: mutate(date_nice_format = str_glue("{month(date, label = TRUE, abbr = FALSE)}
    {day(date)},   {year(date)}")) %>%
  prefs: []
  type: TYPE_NORMAL
- en: pull(date_nice_format)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: This code uses the slice_max() function to get the latest date in the covid_data
    data frame. (Data was added until March 23, 2023, so that date is the most recent
    one.) From there, it uses distinct() to get a single observation of the most recent
    date (each date shows up multiple times in the covid_data data frame). The code
    then creates a date_nice_format variable using the str_glue() function to combine
    easy-to-read versions of the month, day, and year. Finally, the pull() function
    turns the data frame into a single variable called last_day ❶, which is referenced
    later in a text section. Using inline R code, this header now displays the current
    date ❷.
  prefs: []
  type: TYPE_NORMAL
- en: 'Include the following code to make a table showing the death rates per 100,000
    people in four states (using all states would create too large a table):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]{r}'
  prefs: []
  type: TYPE_NORMAL
- en: covid_data %>%
  prefs: []
  type: TYPE_NORMAL
- en: filter(state %in% c(
  prefs: []
  type: TYPE_NORMAL
- en: '"Alabama",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Alaska",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arizona",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arkansas"'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) %>%
  prefs: []
  type: TYPE_NORMAL
- en: slice_max(
  prefs: []
  type: TYPE_NORMAL
- en: order_by = date,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: n = 1
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ) %>%
  prefs: []
  type: TYPE_NORMAL
- en: select(state, deaths_avg_per_100k) %>%
  prefs: []
  type: TYPE_NORMAL
- en: arrange(state) %>%
  prefs: []
  type: TYPE_NORMAL
- en: set_names("State", "Death rate") %>%
  prefs: []
  type: TYPE_NORMAL
- en: gt() %>%
  prefs: []
  type: TYPE_NORMAL
- en: tab_style(
  prefs: []
  type: TYPE_NORMAL
- en: style = cell_text(weight = "bold"),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: locations = cells_column_labels()
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: This table resembles the code you saw in [Chapter 5](chapter5.xhtml). First,
    the filter() function filters the data down to four states, and the slice_max()
    function gets the latest date. The code then selects the relevant variables (state
    and deaths_avg_per_100k), arranges the data in alphabetical order by state, sets
    the variable names, and pipes this output into a table made with the gt package.
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the following code, which uses techniques covered in [Chapter 4](chapter4.xhtml),
    to make a map of this data for all states:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]{r}'
  prefs: []
  type: TYPE_NORMAL
- en: most_recent <- us_states %>%
  prefs: []
  type: TYPE_NORMAL
- en: left_join(covid_data, by = "state") %>%
  prefs: []
  type: TYPE_NORMAL
- en: slice_max(order_by = date,
  prefs: []
  type: TYPE_NORMAL
- en: n = 1)
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: most_recent %>%
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(aes(fill = deaths_avg_per_100k)) +
  prefs: []
  type: TYPE_NORMAL
- en: geom_sf() +
  prefs: []
  type: TYPE_NORMAL
- en: scale_fill_viridis_c(option = "rocket") +
  prefs: []
  type: TYPE_NORMAL
- en: labs(fill = "Deaths per\n100,000 people") +
  prefs: []
  type: TYPE_NORMAL
- en: theme_void()
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: This code creates a most_recent data frame by joining the us_states geospatial
    data with the covid_data data frame before filtering to include only the most
    recent date. Then, it uses most_recent to create a map that shows deaths per 100,000
    people.
  prefs: []
  type: TYPE_NORMAL
- en: 'Finally, to make a chart that shows COVID death rates over time in the four
    states from the table, add the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]{r}'
  prefs: []
  type: TYPE_NORMAL
- en: covid_data %>%
  prefs: []
  type: TYPE_NORMAL
- en: filter(state %in% c(
  prefs: []
  type: TYPE_NORMAL
- en: '"Alabama",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Alaska",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arizona",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arkansas"'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) %>%
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(aes(
  prefs: []
  type: TYPE_NORMAL
- en: x = date,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: y = deaths_avg_per_100k,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: group = state,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: fill = deaths_avg_per_100k
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) +
  prefs: []
  type: TYPE_NORMAL
- en: geom_col() +
  prefs: []
  type: TYPE_NORMAL
- en: scale_fill_viridis_c(option = "rocket") +
  prefs: []
  type: TYPE_NORMAL
- en: theme_minimal() +
  prefs: []
  type: TYPE_NORMAL
- en: labs(title = "Deaths per 100,000 people over time") +
  prefs: []
  type: TYPE_NORMAL
- en: theme(
  prefs: []
  type: TYPE_NORMAL
- en: legend.position = "none",
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: plot.title.position = "plot",
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: plot.title = element_text(face = "bold"),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: panel.grid.minor = element_blank(),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: axis.title = element_blank()
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ) +
  prefs: []
  type: TYPE_NORMAL
- en: facet_wrap(
  prefs: []
  type: TYPE_NORMAL
- en: ~state,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: nrow = 2
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Using the geom_col() function, this code creates a faceted set of bar charts
    that show change over time by state (faceting was discussed in [Chapter 2](chapter2.xhtml)).
    Finally, it applies the rocket color palette, applies theme_minimal(), and makes
    a few tweaks to that theme. [Figure 9-4](chapter9.xhtml#fig9-4) shows what the
    website’s home page looks like three years after the start of the pandemic.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../images/fig9-4.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-4: The COVID website with a table, map, and chart'
  prefs: []
  type: TYPE_NORMAL
- en: Now that you have some content in place, you can tweak it. For example, because
    many states are quite small, especially in the Northeast, it’s a bit challenging
    to see them. Let’s look at how to make the entire map bigger.
  prefs: []
  type: TYPE_NORMAL
- en: Applying distill Layouts
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'One nice feature of distill is that it includes four layouts you can apply
    to a code chunk to widen its output: l-body-outset (creates output that is a bit
    wider than the default), l-page (creates output that is wider still), l-screen
    (creates full-screen output), and l-screen-inset (creates full-screen output with
    a bit of a buffer).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Apply l-screen-inset to the map by modifying the first line of its code chunk
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]{r **layout = "l-screen-inset"**}'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: library(reactable)
  prefs: []
  type: TYPE_NORMAL
- en: covid_data %>%
  prefs: []
  type: TYPE_NORMAL
- en: slice_max(
  prefs: []
  type: TYPE_NORMAL
- en: order_by = date,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: n = 1
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ) %>%
  prefs: []
  type: TYPE_NORMAL
- en: select(state, deaths_avg_per_100k) %>%
  prefs: []
  type: TYPE_NORMAL
- en: arrange(state) %>%
  prefs: []
  type: TYPE_NORMAL
- en: set_names("State", "Death rate") %>%
  prefs: []
  type: TYPE_NORMAL
- en: reactable()
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: '**library(plotly)**'
  prefs: []
  type: TYPE_NORMAL
- en: '**covid_chart <- covid_data %>%**'
  prefs: []
  type: TYPE_NORMAL
- en: filter(state %in% c(
  prefs: []
  type: TYPE_NORMAL
- en: '"Alabama",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Alaska",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arizona",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arkansas"'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) %>%
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(aes(
  prefs: []
  type: TYPE_NORMAL
- en: x = date,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: y = deaths_avg_per_100k,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: group = state,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: fill = deaths_avg_per_100k
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) +
  prefs: []
  type: TYPE_NORMAL
- en: geom_col() +
  prefs: []
  type: TYPE_NORMAL
- en: scale_fill_viridis_c(option = "rocket") +
  prefs: []
  type: TYPE_NORMAL
- en: theme_minimal() +
  prefs: []
  type: TYPE_NORMAL
- en: labs(title = "Deaths per 100,000 people over time") +
  prefs: []
  type: TYPE_NORMAL
- en: theme(
  prefs: []
  type: TYPE_NORMAL
- en: legend.position = "none",
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: plot.title.position = "plot",
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: plot.title = element_text(face = "bold"),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: panel.grid.minor = element_blank(),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: axis.title = element_blank()
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ) +
  prefs: []
  type: TYPE_NORMAL
- en: facet_wrap(
  prefs: []
  type: TYPE_NORMAL
- en: ~state,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: nrow = 2
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: '**ggplotly(covid_chart)**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: covid_chart <- covid_data %>%
  prefs: []
  type: TYPE_NORMAL
- en: filter(state %in% c(
  prefs: []
  type: TYPE_NORMAL
- en: '"Alabama",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Alaska",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arizona",'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '"Arkansas"'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) %>%
  prefs: []
  type: TYPE_NORMAL
- en: mutate(date_nice_format = str_glue("{month(date, label = TRUE, abbr = FALSE)}
    {day(date)},   {year(date)}")) %>%  ❶
  prefs: []
  type: TYPE_NORMAL
- en: mutate(tooltip_text = str_glue("{state}<br>{date_nice_format}<br>{deaths_avg_per_100k}   per
    100,000 people")) %>%  ❷
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(aes(
  prefs: []
  type: TYPE_NORMAL
- en: x = date,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: y = deaths_avg_per_100k,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: group = state,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: text = tooltip_text, ❸
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: fill = deaths_avg_per_100k
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )) +
  prefs: []
  type: TYPE_NORMAL
- en: geom_col() +
  prefs: []
  type: TYPE_NORMAL
- en: scale_fill_viridis_c(option = "rocket") +
  prefs: []
  type: TYPE_NORMAL
- en: theme_minimal() +
  prefs: []
  type: TYPE_NORMAL
- en: labs(title = "Deaths per 100,000 people over time") +
  prefs: []
  type: TYPE_NORMAL
- en: theme(
  prefs: []
  type: TYPE_NORMAL
- en: legend.position = "none",
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: plot.title.position = "plot",
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: plot.title = element_text(face = "bold"),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: panel.grid.minor = element_blank(),
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: axis.title = element_blank()
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ) +
  prefs: []
  type: TYPE_NORMAL
- en: facet_wrap(
  prefs: []
  type: TYPE_NORMAL
- en: ~state,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: nrow = 2
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: ggplotly(
  prefs: []
  type: TYPE_NORMAL
- en: covid_chart,
  prefs: []
  type: TYPE_NORMAL
- en: tooltip = "tooltip_text" ❹
  prefs: []
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: library(tidyverse)
  prefs: []
  type: TYPE_NORMAL
- en: library(rmarkdown)
  prefs: []
  type: TYPE_NORMAL
- en: library(fs)
  prefs: []
  type: TYPE_NORMAL
- en: library(rdrop2)
  prefs: []
  type: TYPE_NORMAL
- en: Render the website
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: render_site()
  prefs: []
  type: TYPE_NORMAL
- en: Upload to Dropbox
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: website_files <- dir_ls(
  prefs: []
  type: TYPE_NORMAL
- en: path = "docs",
  prefs: []
  type: TYPE_NORMAL
- en: type = "file",
  prefs: []
  type: TYPE_NORMAL
- en: recurse = TRUE
  prefs: []
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: walk(website_files, drop_upload, path = "COVID Website")
  prefs: []
  type: TYPE_NORMAL
- en: '```'
  prefs: []
  type: TYPE_NORMAL
- en: This code, which I typically add to a separate file called *render.R*, renders
    the site, uses the dir_ls() function from the fs package to identify all files
    in the *docs* directory, and then uploads these files to Dropbox. Now you can
    run your entire file to generate and upload your website in one go.
  prefs: []
  type: TYPE_NORMAL
- en: GitHub Hosting
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: A more complicated yet powerful alternative to cloud hosting is to use a static
    hosting service like GitHub Pages. Each time you *commit* (take a snapshot of)
    your code and *push* (sync) it to GitHub, this service deploys the website to
    a URL you’ve set up. Learning to use GitHub is an investment of time and effort
    (the self-published book *Happy Git and GitHub for the useR* by Jenny Bryan at
    *[https://happygitwithr.com](https://happygitwithr.com)* is a great resource),
    but being able to host your website for free makes it worthwhile.
  prefs: []
  type: TYPE_NORMAL
- en: Here’s how GitHub Pages works. Most of the time, when you look at a file on
    GitHub, you see its underlying source code, so if you looked at an HTML file,
    you’d see only the HTML code. GitHub Pages, on the other hand, shows you the rendered
    HTML files. To host your website on GitHub Pages, you’ll need to first push your
    code to GitHub. Once you have a repository set up there, go to it, then go to
    the **Settings** tab, which should look like [Figure 9-10](chapter9.xhtml#fig9-10).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../images/fig9-10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 9-10: Setting up GitHub Pages'
  prefs: []
  type: TYPE_NORMAL
- en: Now choose how you want GitHub to deploy the raw HTML. The easiest approach
    is to keep the default source. To do so, select **Deploy** from a branch and then
    select your default branch (usually *main* or *master*). Next, select the directory
    containing the HTML files you want to be rendered. If you configured your website
    for GitHub Pages at the beginning of this chapter, the files should be in *docs*.
    Click **Save** and wait a few minutes, and GitHub should show the URL where your
    website now lives.
  prefs: []
  type: TYPE_NORMAL
- en: The best part about hosting your website on GitHub Pages is that any time you
    update your code or data, the website will update as well. R Markdown, distill,
    and GitHub Pages make building and maintaining websites a snap.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this chapter, you learned to use the distill package to make websites in
    R. This package provides a simple way to get a website up and running with the
    tool you’re already using for working with data. You’ve seen how to:'
  prefs: []
  type: TYPE_NORMAL
- en: Create new pages and add them to your top navigation bar
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customize the look and feel of your website with tweaks to the CSS
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use wider layouts to make content fit better on individual pages
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Convert static data visualization and tables into interactive versions
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use GitHub Pages to host an always-up-to-date version of your website
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matt Herman has continued building websites with R. He and his colleagues at
    the Council of State Governments Justice Center have made a great website using
    Quarto, the language-agnostic version of R Markdown. This website, found at *[https://projects.csgjusticecenter.org/tools-for-states-to-address-crime/](https://projects.csgjusticecenter.org/tools-for-states-to-address-crime/)*,
    highlights crime trends throughout the United States using many of the same techniques
    you saw in this chapter.
  prefs: []
  type: TYPE_NORMAL
- en: Whether you prefer distill or Quarto, using R is a quick way to develop complex
    websites without having to be a sophisticated frontend web developer. The websites
    look good and communicate well. They are one more example of how R can help you
    efficiently share your work with the world.
  prefs: []
  type: TYPE_NORMAL
- en: Additional Resources
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The Distillery, “Welcome to the Distillery!,” accessed November 30, 2023, *[https://distillery.rbind.io](https://distillery.rbind.io)*.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Mock, “Building a Blog with distill,” *The MockUp*, August 1, 2020, *[https://themockup.blog/posts/2020-08-01-building-a-blog-with-distill/](https://themockup.blog/posts/2020-08-01-building-a-blog-with-distill/)*.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
