<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><section epub:type="chapter" role="doc-chapter" aria-labelledby="ch11">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_621" aria-label="621"/>&#13;
<hgroup>&#13;
&#13;
<h2 class="CHAPTER" id="ch11">&#13;
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11</span></span>&#13;
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">NEON AND SIMD PROGRAMMING</span></span>&#13;
</h2>&#13;
</hgroup>&#13;
<figure class="opener"><img class="opener" src="../images/opener.jpg" alt="" width="378" height="378"/>&#13;
</figure>&#13;
<p class="ChapterIntro">This chapter discusses the vector instructions on the ARM. This special class of instructions provides parallel processing, traditionally known as <i>single-instruction, multiple-data (SIMD)</i> instructions because, quite literally, a single instruction operates on several pieces of data concurrently. As a result of this concurrency, SIMD instructions can often execute several times faster (in theory, as much as 32 to 64 times faster) than the comparable <i>single-instruction, single-data (SISD)</i> instructions that compose the standard ARM instruction set.</p>&#13;
<p class="TX">Vector instructions, also known as the <i>Neon instruction set</i> or <i>ARM Advanced SIMD</i>, provide an extension to the standard scalar instructions. While a <i>scalar instruction</i> operates on a single piece of data at a time, the Neon instructions simultaneously operate on a <i>vector</i> (a fancy name for an array) of data objects.</p>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_622" aria-label="622"/>This chapter covers a brief history of SIMD instructions, then discusses the ARM Neon architecture (including the vector registers) and Neon data types. The majority of this chapter then covers the Neon instruction set. A complete treatise on SIMD programming is beyond the scope of this book; however, it wouldn’t do to write this chapter without at least a few SIMD programming examples in order to demonstrate the benefits of SIMD programming, so this chapter concludes with examples that show a bitonic sort and a numeric-to-hex-string conversion.</p>&#13;
<section epub:type="division" aria-labelledby="sec1">&#13;
&#13;
<h3 class="H1" id="sec1"><span id="h1-115"/><span class="SANS_Futura_Std_Bold_B_11">11.1 The History of SIMD Instruction Extensions</span></h3>&#13;
<p class="TNI1">The Neon instruction set extensions were added to the ARM instruction set long after the ARM was created. Arm created Neon to counter competition from the Intel x86 CPU family. To understand why the Neon instruction set is so radically different from the standard instruction set, you have to understand the history of SIMD (vector) instruction sets.</p>&#13;
<p class="TX">The first vector computers were supercomputers such as the CDC Star-100, Texas Instruments Advanced Scientific Computer (ASC), and Cray computers, which could operate on a vector of data with a single instruction. These vector computers were the precursor to the early SIMD computers such as the Thinking Machines CM-1 and CM-2. Ultimately, supercomputers moved away from the SIMD approach when Intel introduced SIMD features on its low-cost i860 (and, later, Pentium processors).</p>&#13;
<p class="TX">The Intel Multimedia Extensions (MMX) instruction set was the first widely adopted desktop SIMD architecture. Intel added parallel integer arithmetic instructions to the venerable x86 instruction set to accelerate digital audio processing and other digital signal processing applications. The PowerPC followed this with the much more capable AltiVec architecture (which included support for single-precision floating-point values). Intel then produced the SSE2 and SSE3, AVX, AVX2, and AVX-512 SIMD instruction architectures (which now include full double-precision floating-point support).</p>&#13;
<p class="TX">Intel’s approach to adding vector instructions to its x86 series CPUs was a bit hackneyed. Given the limited transistor budgets on CPUs in the middle 1990s, Intel added a few vector instructions (MMX) in its early Pentium processors and then extended the SIMD instruction set as its CPUs became larger and had more transistors available to implement advanced features. This evolution produced a bit of a kludge, with new sets of instructions replicating and obsoleting older instructions (with the newer instruction set’s ability to handle more data or handle data differently).</p>&#13;
<p class="TX">By the time ARM added SIMD instructions via its <i>Neon Advanced SIMD</i> instructions, Intel had gone through multiple generations of SIMD instructions; Arm was able to cherry-pick the more interesting and useful instructions from Intel’s set, leaving behind all the kruft and legacy instructions. For this reason, the Neon instruction set is considerably more compact and much easier to understand than Intel’s MMX/SSE/AVX instruction sets.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec2">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_623" aria-label="623"/>&#13;
<h3 class="H1" id="sec2"><span id="h1-116"/><span class="SANS_Futura_Std_Bold_B_11">11.2 Vector Registers</span></h3>&#13;
<p class="TNI1">The ARM provides 32 main FP/Neon registers that are 128 bits each, broken into five groups based on their size:</p>&#13;
<ul class="ul">&#13;
<li class="BL">V0 to V31, the 128-bit vector registers (for Neon instructions), also referenced as Q0 to Q31, the qword registers; the V<i>n</i> names support special syntax for vector operations</li>&#13;
<li class="BL">D0 to D31, the 64-bit double-precision floating-point registers</li>&#13;
<li class="BL">S0 to S31, the 32-bit single-precision floating-point registers</li>&#13;
<li class="BL">H0 to H31, the 16-bit half-precision floating-point registers</li>&#13;
<li class="BL">B0 to B31, the 8-bit byte registers</li>&#13;
</ul>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-1">Figure 11-1</a> shows the vector register layout.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-1" src="../images/Figure11-1.jpg" alt="" width="630" height="1641"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-1: The FP/Neon registers</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_624" aria-label="624"/>The B<i>n</i>, H<i>n</i>, S<i>n</i>, D<i>n</i>, and V<i>n</i> registers overlay one another, as shown in <a href="chapter11.xhtml#fig11-2">Figure 11-2</a>.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-2" src="../images/Figure11-2.jpg" alt="" width="1005" height="268"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-2: Byte, half-word, single, double, and vector register overlays</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">See <span class="Xref"><a href="chapter6.xhtml">Chapter 6</a></span> for more information about the scalar floating-point D<i>n</i>, S<i>n</i>, and H<i>n</i> registers. Keep in mind, however, that if you mix vector and floating-point operations in your code, the instructions share the same register set.</p>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-1">Figures 11-1</a> and <a href="chapter11.xhtml#fig11-2">11-2</a> give the impression that the V<i>n</i> registers are 128-bit registers (which, presumably, you can manipulate as a single 128-bit value). In fact, the V<i>n</i> registers are vectors containing sixteen 8-bit, eight 16-bit, four 32-bit, two 64-bit, or (single) 128-bit values, as <a href="chapter11.xhtml#fig11-3">Figure 11-3</a> shows.</p>&#13;
<figure class="IMG"><img class="img1" id="fig11-3" src="../images/Figure11-3.jpg" alt="" width="1219" height="269"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-3: Vector register overlays</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">When an instruction operates on a particular element of a vector register, you reference that element by using one of the following register names (in all cases, <i>n</i> represents a vector register number in the range 0 to 31):</p>&#13;
<ul class="ul">&#13;
<li class="BL">V<i>n</i> or Q<i>n</i> when referencing the whole 128-bit register</li>&#13;
<li class="BL">V<i>n</i>.B when treating the whole register as an array of 16 bytes</li>&#13;
<li class="BL">V<i>n</i>.H when treating the whole register as an array of eight half words</li>&#13;
<li class="BL">V<i>n</i>.S when treating the whole register as an array of four words (single-precision values)</li>&#13;
<li class="BL">V<i>n</i>.D when treating the whole register as an array of two dwords (double-precision values)</li>&#13;
<li class="BL">V<i>n</i>.2D[0] or V<i>n</i>.2D[1] when referencing 64-bit double-precision in bit positions 0 to 63 or 64 to 127, respectively</li>&#13;
<li class="BL">V<i>n</i>.4S[0], V<i>n</i>.4S[1], V<i>n</i>.4S[2], V<i>n</i>.4S[3] when accessing a 32-bit single-precision value in bit positions 0 to 31, 32 to 63, 64 to 95, or 96 to 127, respectively</li>&#13;
<li class="BL"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_625" aria-label="625"/>V<i>n</i>.8H[0], V<i>n</i>.8H[1], ..., V<i>n</i>.8H[7] when accessing a 16-bit half-word value in bit positions 0 to 15, 16 to 31, ..., 112 to 127, respectively</li>&#13;
<li class="BL">V<i>n</i>.16B[0], V<i>n</i>.16B[1], ..., V<i>n</i>.16B[15] when accessing an 8-bit byte in bit positions 0 to 7, 8 to 16, ..., 120 to 127</li>&#13;
</ul>&#13;
<p class="TX">The exact name to choose will depend on the instruction and situation. You’ll see examples of these registers in use in the next section, <span class="Xref">“Vector Data Movement Instructions,”</span> particularly section 11.3.4, <span class="Xref">“Vector Load and Store,”</span> on <span class="Xref"><a href="chapter11.xhtml#pg_632">page 632</a></span>.</p>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-2">Figures 11-2</a> and <a href="chapter11.xhtml#fig11-3">11-3</a> showed the five basic types associated with the data in a vector register: bytes, half words, single-precision values, double-precision values, and 128-bit qwords. In fact, the 32-bit (single) and 64-bit (double) fields support both floating-point (single and double) and integer (word and dword) types, bringing the total number of types to seven.</p>&#13;
<p class="TX">Except for the special 128-bit case, the vector registers contain arrays of bytes, half words, words, and qwords. For reasons you’ll learn when this chapter discusses vector operations, each element of the array is known as a <i>lane</i>. When performing operations using two vector registers, the CPU generally computes results by using the operands in corresponding lanes in the two source registers and stores the result in the corresponding lane in a destination register. For example, suppose that V1 contains 2.0 in the HO 64 bits (lane 1) and 1.0 in the LO 64 bits (lane 0), and that V2 contains 20.0 in lane 1 and 10.0 in lane 0. Summing these two vector registers and storing the result in V3 produces 22.0 in lane 1 and 11.0 in lane 0.</p>&#13;
<p class="TX">Although the vector registers generally contain arrays of data (when performing SIMD operations), don’t forget that the floating-point registers (D<i>n</i> and S<i>n</i>) overlay the vector registers as well. When doing normal floating-point operations (see <span class="Xref"><a href="chapter6.xhtml">Chapter 6</a></span>), these registers contain a single value rather than an array of values. These single values are known as <i>scalars</i>.</p>&#13;
<p class="TX">Very few operations treat an entire 128-bit Neon register as a scalar value. Those that do (mainly load and store instructions) use the name Q<i>n</i> to denote a scalar value rather than V<i>n</i> (a vector value).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec3">&#13;
&#13;
<h3 class="H1" id="sec3"><span id="h1-117"/><span class="SANS_Futura_Std_Bold_B_11">11.3 Vector Data Movement Instructions</span></h3>&#13;
<p class="TNI1">Move instructions are the most common integer and floating-point instructions you’ll use in the Neon instruction set. In this section, you’ll learn how to use these instructions to move data between registers, load constants into Neon registers, and load and store vector registers to and from memory.</p>&#13;
<section epub:type="division" aria-labelledby="sec4">&#13;
&#13;
<h4 class="H2" id="sec4"><span id="h2-184"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.1 Data Movement Between Registers</span></h4>&#13;
<p class="TNI1">You can use the <span class="SANS_TheSansMonoCd_W5Regular_11">mov</span> instruction to move data between vector registers. Unfortunately, the obvious syntax won’t work:</p>&#13;
<pre id="pre-805"><code>mov v0, v1  // Generates a syntax error</code></pre>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_626" aria-label="626"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">mov</span> instruction copies elements of a vector into a vector register. It can copy data between two vector registers or data between a general-purpose (X<i>n</i> or W<i>n</i>) register and a vector register. The exact syntax depends on how much data you’re copying and the location of the source and destination registers (vector or general-purpose).</p>&#13;
<p class="TX">Moving data from a 32-bit general-purpose register (W<i>m</i>) into a vector register (V<i>n</i>) uses one of the following syntaxes:</p>&#13;
<pre id="pre-806"><code>mov V<var>n</var>.B[<var>i</var>], W<var>m</var>  // Inserts LO byte of W<var>m</var> into V<var>n</var>[<var>i</var>] (<var>i </var>= 0 to 15)&#13;
mov V<var>n</var>.H[<var>i</var>], W<var>m</var>  // Inserts LO hword of W<var>m</var> into V<var>n</var>[<var>i</var>] (<var>i </var>= 0 to 7)&#13;
mov V<var>n</var>.S[<var>i</var>], W<var>m</var>  // Inserts W<var>m</var> into V<var>n</var>[<var>i</var>] (<var>i </var>= 0 to 3)</code></pre>&#13;
<p class="TX">The index <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span> must be a literal integer constant, as demonstrated in the following examples:</p>&#13;
<pre id="pre-807"><code>mov v0.b[15], w0  // Copy LO byte of W0 into lane 15 of V0.&#13;
mov v1.h[0], w2   // Copy LO hword of W2 into lane 0 of W1.&#13;
mov v2.s[2], w1   // Copy W1 into lane 2 of V2.</code></pre>&#13;
<p class="TX">Moving data from a 64-bit general-purpose register (X<i>m</i>) into a vector register (V<i>n</i>) uses the following syntax:</p>&#13;
<pre id="pre-808"><code>mov V<var>n</var>.D[<var>i</var>], X<var>m</var>   // Inserts X<var>m</var> into V<var>n</var>[<var>i</var>] (<var>i </var>= 0 to 1)</code></pre>&#13;
<p class="TX">I’ve used the word <i>inserts</i> in these examples because the <span class="SANS_TheSansMonoCd_W5Regular_11">mov</span> instruction copies only the byte, hword, word, or dword into the vector register at the index that <i>i</i> specifies. It does not affect the other data in V<i>n</i>. For example</p>&#13;
<pre id="pre-809"><code>mov v0.b[4], w0</code></pre>&#13;
<p class="Continued1">inserts only the LO byte from W0 into lane 4 in the V0 register; it leaves all other bytes in V0 unchanged. Moving bytes, hwords, and words is possible only when using the W<i>m</i> register; if you use X<i>m</i> in the instruction, you can move only 64 bits. The type specification for the vector register is S (single-precision) for 32 bits and D (double-precision) for 64 bits. You use this designation even when copying 32-bit and 64-bit integers.</p>&#13;
<blockquote>&#13;
<p class="Note"><span class="NoteHead"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></span></p>&#13;
</blockquote>&#13;
<p class="NOTE-TXT"><i>The ARM instruction</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">ins</span> <i>(insert) is a synonym for</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">mov</span> <i>when copying data from a general-purpose register to a vector register—yet another reason for saying these instructions</i> <span class="note_Italic">insert</span> <i>data rather than saying they</i> <span class="note_Italic">copy</span> <i>data.</i></p>&#13;
<p class="TX">The previous examples copy the value from a 32- or 64-bit general-purpose register into a vector register. You can also copy data from one vector register (V<i>n</i>) to another (V<i>m</i>) by using the following syntax:</p>&#13;
<pre id="pre-810"><code>mov V<var>m</var>.8B, V<var>n</var>.8B    // Copy 64 bits.&#13;
mov V<var>m</var>.16B, V<var>n</var>.16B  // Copy 128 bits.</code></pre>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_627" aria-label="627"/>These instructions copy 64 bits (8 bytes, four half words, two words, or a single dword) or 128 bits (16 bytes, eight half words, four words / single-precision values, or two dwords / double-precision values) from one vector register to another. In theory, you should be able to enter something like <span class="SANS_TheSansMonoCd_W5Regular_11">mov v1, v0</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">mov q1, q0</span> to move the contents of the 128-bit vector register V0 (Q0) into V1 (Q1). Sadly, Gas does not accept this syntax, so you’ll have to use one of the previous four instructions, as in the following example:</p>&#13;
<pre id="pre-811"><code>mov v0.16b, v1.16b  // Copies V1 to V2</code></pre>&#13;
<p class="TX">You can also extract a single byte from one vector register and insert it in an arbitrary lane in another vector register, using the following syntax</p>&#13;
<pre id="pre-812"><code>mov V<var>m</var>.B[<var>i1</var>], V<var>n</var>.B[<var>i2</var>]</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i2</span> is the index of a byte in the source vector and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i1</span> is the destination index. Both indices must be in the range 0 to 15.</p>&#13;
<p class="TX">You can also extract a half word from one vector and insert that into another:</p>&#13;
<pre id="pre-813"><code>mov V<var>m</var>.H[<var>i1</var>], V<var>n</var>.H[<var>i2</var>]</code></pre>&#13;
<p class="TX">The rules are the same for bytes, except that the two index values must be in the range 0 to 7.</p>&#13;
<p class="TX">You can copy words (single-precision values) and dwords (double-precision values) by using the following syntax:</p>&#13;
<pre id="pre-814"><code>mov V<var>m</var>.S[<var>i1</var>], V<var>n</var>.S[<var>i2</var>]  // i1 and i2 must be in range 0 to 3.&#13;
mov V<var>m</var>.D[<var>i3</var>], V<var>n</var>.D[<var>i4</var>]  // i3 and i4 must be in range 0 to 1.</code></pre>&#13;
<p class="TX">Here’s an example that copies the LO dwords of V0 and V1 merges them into the two dwords in V2:</p>&#13;
<pre id="pre-815"><code>mov v2.d[0], v0.d[0]&#13;
mov v2.d[1], v1.d[0]</code></pre>&#13;
<p class="TX">Thus far, I’ve described how to move data from a general-purpose register to a vector register and between two vector registers. The only missing combination is moving data from a vector register to a general-purpose register, handled by the following <span class="SANS_TheSansMonoCd_W5Regular_11">mov</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">umov</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">smov</span> instructions:</p>&#13;
<pre id="pre-816"><code>mov  W<var>n</var>, V<var>m</var>.S[<var>i0</var>]  // Copies 32 bits&#13;
mov  X<var>n</var>, V<var>m</var>.D[<var>i1</var>]  // Copies 64 bits&#13;
&#13;
umov W<var>n</var>, V<var>m</var>.B[<var>i1</var>]  // Zero-extends byte to 32 bits&#13;
umov W<var>n</var>, V<var>m</var>.H[<var>i2</var>]  // Zero-extends hword to 32 bits&#13;
umov X<var>n</var>, V<var>m</var>.D[<var>i3</var>]  // Copies 64 bits&#13;
&#13;
smov W<var>n</var>, V<var>m</var>.B[<var>i5</var>]  // Sign-extends byte to 32 bits&#13;
smov W<var>n</var>, V<var>m</var>.H[<var>i6</var>]  // Sign-extends hword to 32 bits&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_628" aria-label="628"/>smov X<var>n</var>, V<var>m</var>.B[<var>i5</var>]  // Sign-extends byte to 64 bits&#13;
smov X<var>n</var>, V<var>m</var>.H[<var>i6</var>]  // Sign-extends hword to 64 bits&#13;
smov X<var>n</var>, V<var>m</var>.S[<var>i7</var>]  // Sign-extends word to 64 bits</code></pre>&#13;
<p class="TX">There are no 8- or 16-bit zero extensions to 64 bits. Zero-extending into W<i>n</i> automatically zero-extends all the way through the upper 32 bits of X<i>n</i>. Here are some examples of these instructions:</p>&#13;
<pre id="pre-817"><code>mov  w0, v0.s[0]  // Copy lane 0 (word) of V0 to W0.&#13;
mov  x1, v7.d[1]  // Copy lane 1 (dword) of V7 to X1.&#13;
umov w0, v1.b[2]  // Copy and zero-extend V1[2] byte to W0.&#13;
smov x1, v0.s[3]  // Copy and sign-extend V0[3] (word) to X1.</code></pre>&#13;
<p class="TX">Remember that <span class="SANS_TheSansMonoCd_W5Regular_11">smov x1, v0.s[3]</span> is moving an integer value, even though the specified type is S (single-precision).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec5">&#13;
&#13;
<h4 class="H2" id="sec5"><span id="h2-185"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.2 Vector Load Immediate Instructions</span></h4>&#13;
<p class="TNI1">The ARM CPU provides a limited set of instructions that allow you to load certain immediate constants into a vector register. The integer versions of these instructions allow only an unsigned 8-bit immediate operand that can be used as is or shifted to the left 1, 2, or 3 bytes (filling vacated positions with 0s or 1s). Furthermore, these immediate instructions copy the data into every lane of a byte array, half-word array, or word array. The floating-point versions of these instructions allow a limited set of floating-point constants (the same limitations as for scalar floating-point constants; see section 6.9.1.4, <span class="Xref">“</span><span class="SANS_TheSansMonoCd_W5Regular_11">fmov</span> <span class="Xref">with Immediate Operand,”</span> on <span class="Xref"><a href="chapter6.xhtml#pg_334">page 334</a></span>).</p>&#13;
<p class="TX">The standard <i>move immediate</i> instruction is <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span></p>&#13;
<pre id="pre-818"><code>movi V<var>n</var>.<var>size</var>, #<var>uimm8</var>&#13;
movi V<var>n</var>.<var>size</var>, #<var>uimm8</var>, lsl #<var>c  </var>// <var>size</var> = 4H, 8H, 2S, or 4S&#13;
movi V<var>n</var>.<var>size</var>, #<var>uimm8</var>, msl #<var>c  </var>// <var>size</var> = 2S or 4S&#13;
movi V<var>n</var>.2D, #<var>uimm64</var>&#13;
movi D<var>n</var>, #<var>uimm64</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">size</span> is 16B, 8B, 4H, 8H, 2S, or 4S; <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> is an 8-bit constant; and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm64</span> is either <span class="SANS_TheSansMonoCd_W5Regular_11">0</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">0xFFFFffffFFFFffff</span>. The <span class="SANS_TheSansMonoCd_W5Regular_11">lsl #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> component is optional for instructions with 4H, 8H, 2S, and 4S sizes. The <span class="SANS_TheSansMonoCd_W5Regular_11">msl #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> option is optional for 2S and 4S sizes. The <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span> instructions initialize all lanes in the vector register, or just the lanes in the LO 64 bits, with the specified immediate constant. The following paragraphs describe the specific variants of each of these instructions.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8B, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> instruction fills each of the LO 8 bytes of V<i>n</i> with the specified constant and the HO 64 bits of the register with 0s. For example</p>&#13;
<pre id="pre-819"><code>movi v0.8b, #0x80</code></pre>&#13;
<p class="Continued1">loads 0x80808080 into V0.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.16B, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> instruction fills all 16 bytes of V<i>n</i> with the specified constant. Each lane receives a copy of the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> value.</p>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_629" aria-label="629"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.4H, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> instruction fills the four hword lanes in the LO 64 bits of V<i>n</i> with a copy of the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> constant, and fills the HO 64 bits of V<i>n</i> with 0. Because this instruction accepts only 8-bit immediate constants, the HO 8 bits of each half-word lane will contain 0s. For example</p>&#13;
<pre id="pre-820"><code>movi v1.4h, #1</code></pre>&#13;
<p class="Continued1">loads 0x0001000100010001 into V1.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.4H, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, lsl #0</span> instruction is identical to <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.4H, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span><i>.</i> If the shift constant is <span class="SANS_TheSansMonoCd_W5Regular_11">#8</span>, this instruction shifts the immediate constant to the left eight positions before storing it into the four half-word lanes (in the LO 64 bits of V<i>n</i>). In this case, the LO 8 bits of each of these lanes will contain 0s. For example</p>&#13;
<pre id="pre-821"><code>movi v1.4h, #1, lsl #8</code></pre>&#13;
<p class="Continued1">loads 0x0100010001000100 into V1.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8H, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8H, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, lsl #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> instructions do the same thing as the 4H instructions, except that they store the immediate constant (shifted by 0 or 8 bits) into all eight lanes of the V<i>n</i> register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2S, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> instruction fills the two word (single-precision) lanes in the LO 64 bits of V<i>n</i> with a copy of the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> constant, and fills the HO 64 bits of V<i>n</i> with 0. Because this instruction accepts only 8-bit immediate constants, the HO 24 bits of each word lane will contain 0s. Although the type specification is S, this instruction assigns integer constants, not floating-point constants, to the lanes. If the optional shift clause is present (<span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2S, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, lsl #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span>, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> is 0, 8, 16, or 24), this instruction will shift the 8-bit constant by the specified number of bits before storing the constant into the two lanes. Here are a few examples:</p>&#13;
<pre id="pre-822"><code>movi v3.2s, #1          // Loads 0x0000000100000001 into V3&#13;
movi v4.2s, #1, lsl #8  // Loads 0x0000010000000100 into V4&#13;
movi v5.2s, #1, lsl #16 // Loads 0x0001000000010000 into V5&#13;
movi v6.2s, #1, lsl #24 // Loads 0x0100000001000000 into V6</code></pre>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2S, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, msl #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> instruction is almost identical to its <span class="SANS_TheSansMonoCd_W5Regular_11">lsl</span> counterpart, except it shifts 1 bits rather than 0 bits into the vacated positions during the shift-left operation. The shift count is limited to 8 or 16 rather than 0, 8, 16, and 24 (an annoying inconsistency). For example</p>&#13;
<pre id="pre-823"><code>movi v5.2s, #1, msl #16</code></pre>&#13;
<p class="Continued1">loads 0x0001FFFF0001FFFF into V5.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.4S, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> instruction fills the four word (single-precision) lanes in V<i>n</i> with a copy of the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> constant. Otherwise, this instruction (and the variant with shifting) behaves identically to the 2S version.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">movi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2D, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm64</span> instruction loads one of two constants (0 or –1) into the two dword lanes of the V<i>n</i> register. Once again, keep in mind that <span role="doc-pagebreak" epub:type="pagebreak" id="pg_630" aria-label="630"/>these are integer constants, not floating-point constants, despite the use of the 2D type specifier.</p>&#13;
<p class="TX">The second move immediate instruction is <span class="SANS_TheSansMonoCd_W5Regular_11">mvni</span> (move and <i>not</i> immediate). It supports the following syntax</p>&#13;
<pre id="pre-824"><code>mvni V<var>n</var>.<var>size</var>, #<var>uimm8</var> {, (lsl | msl) #<var>c</var>}</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">size</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm8</span> have the same meanings as given for <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span>.</p>&#13;
<p class="TX">The operations are the same as for <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span>, except that <span class="SANS_TheSansMonoCd_W5Regular_11">mvni</span> inverts all the bits before storing them into the lanes of the V<i>n</i> destination register. The HO 64 bits of V<i>n</i> still receive 0s for the 4H and 2S type specifiers, as shown in the following examples:</p>&#13;
<pre id="pre-825"><code>mvni v2.4h, #1, lsl #8  // Loads 0xFEFFfeffFEFFfeff into V2&#13;
mvni v4.2s, #2, msl #8  // Loads 0xFFFFFD00fffffd00 into V4</code></pre>&#13;
<p class="TX">Note the absence of the 2D types for the <span class="SANS_TheSansMonoCd_W5Regular_11">mvni</span> instruction. These instructions are unnecessary because the two allowable <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm64</span> constants are already the inverse of each other. If you want inverted bits, just use the other <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uimm64</span> constant (0 versus –1) with the <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span> instruction.</p>&#13;
<p class="TX">The third form of the move immediate instruction, <span class="SANS_TheSansMonoCd_W5Regular_11">fmov</span>, allows you to load certain floating-point constants into the lanes of a vector register. The allowable syntax is the following:</p>&#13;
<pre id="pre-826"><code>fmov V<var>n</var>.2S, #<var>fimm</var>&#13;
fmov V<var>n</var>.4S, #<var>fimm</var>&#13;
fmov V<var>n</var>.2D, #<var>fimm</var></code></pre>&#13;
<p class="TX">The floating-point immediate constant (<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">fimm</span>) must be a value defined by</p>&#13;
<p class="Equation">±<i>n</i> ÷ 16 × 2<i>r</i></p>&#13;
<p class="Continued1">where 16 ≤ <i>n</i> ≤ 31 and –3 ≤ <i>r</i> ≤ 4. You cannot represent 0.0 with this formula; if you need to load 0.0 into the lanes of a vector register, just load the integer constant 0 into those lanes by using the <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span> instruction (all 0 bits is 0.0):</p>&#13;
<pre id="pre-827"><code>fmov v0.2s, #1.0  // Loads [0.0, 0.0, 1.0, 1.0] into V0&#13;
fmov v0.2d, #2.0  // Loads [2.0, 2.0] into V0</code></pre>&#13;
<p class="TX">The move immediate instructions load only certain constant values into the vector registers. The following are the exact values you can load as immediate floating-point constants (Gas will accept only these values):</p>&#13;
<pre id="pre-828"><code> 0.1250000  0.1328125   0.1406250   0.1484375&#13;
 0.1562500  0.1640625   0.1718750   0.1796875&#13;
 0.1875000  0.1953125   0.2031250   0.2109375&#13;
 0.2187500  0.2265625   0.2343750   0.2421875&#13;
 0.2500000  0.2656250   0.2812500   0.2968750&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_631" aria-label="631"/> 0.3125000  0.3281250   0.3437500   0.3593750&#13;
 0.3750000  0.3906250   0.4062500   0.4218750&#13;
 0.4375000  0.4531250   0.4687500   0.4843750&#13;
 0.5000000  0.5312500   0.5625000   0.5937500&#13;
 0.6250000  0.6562500   0.6875000   0.7187500&#13;
 0.7500000  0.7812500   0.8125000   0.8437500&#13;
 0.8750000  0.9062500   0.9375000   0.9687500&#13;
 1.00       1.0625      1.125       1.1875&#13;
 1.25       1.3125      1.375       1.4375&#13;
 1.50       1.5625      1.625       1.6875&#13;
 1.75       1.8125      1.875       1.9375&#13;
 2.00       2.1250      2.250       2.3750&#13;
 2.50       2.6250      2.750       2.8750&#13;
 3.00       3.1250      3.250       3.3750&#13;
 3.50       3.6250      3.750       3.8750&#13;
 4.00       4.2500      4.500       4.7500&#13;
 5.00       5.2500      5.500       5.7500&#13;
 6.00       6.2500      6.500       6.7500&#13;
 7.00       7.2500      7.500       7.7500&#13;
 8.0        8.5         9.0         9.5&#13;
10.0       10.5        11.0        11.5&#13;
12.0       12.5        13.0        13.5&#13;
14.0       14.5        15.0        15.5&#13;
16.0       17.0        18.0        19.0&#13;
20.0       21.0        22.0        23.0&#13;
24.0       25.0        26.0        27.0&#13;
28.0       29.0        30.0        31.0</code></pre>&#13;
<p class="TX">Based on the way programs typically use the Neon registers, this is a reasonable set of values, which can be encoded into a 32-bit instruction opcode. To load larger or different constants, see section 11.3.4, <span class="Xref">“Vector Load and Store,”</span> on <span class="Xref">the next page</span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec6">&#13;
&#13;
<h4 class="H2" id="sec6"><span id="h2-186"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.3 Register or Lane Value Duplication</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">dup</span> instruction allows you to duplicate a value held in a general-purpose register or in a single lane of a vector register, throughout all the lanes in a vector register. This instruction supports the following forms:</p>&#13;
<pre id="pre-829"><code>dup V<var>n</var>.2D, X<var>m</var>        // Copy X<var>m</var> into lanes 0-1 (64 bits each) in V<var>n</var>.&#13;
&#13;
dup V<var>n</var>.8B, W<var>m</var>        // LO 8 bits of W<var>m</var> to lanes 0-7 in V<var>n</var>&#13;
dup V<var>n</var>.16B, W<var>m</var>       // LO 8 bits of W<var>m</var> to lanes 0-15 in V<var>n</var>&#13;
&#13;
dup V<var>n</var>.4H, W<var>m</var>        // LO 16 bits of W<var>m</var> to lanes 0-3 in V<var>n</var>&#13;
dup V<var>n</var>.8H, W<var>m</var>        // LO 16 bits of W<var>m</var> to lanes 0-7 in V<var>n</var>&#13;
&#13;
dup V<var>n</var>.2S, W<var>m</var>        // W<var>m</var> to lanes 0-1 in V<var>n</var>&#13;
dup V<var>n</var>.4S, W<var>m</var>        // W<var>m</var> to lanes 0-3 in V<var>n</var>&#13;
&#13;
dup V<var>n</var>.8B, V<var>m</var>.B[<var>i1</var>]  // Dup V<var>m</var> lane <var>i1</var> through lanes 0-7 in V<var>n</var>.&#13;
dup V<var>n</var>.16B, V<var>m</var>.B[<var>i2</var>] // Dup V<var>m</var> lane <var>i2</var> through lanes 0-15 in V<var>n</var>.&#13;
&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_632" aria-label="632"/>dup V<var>n</var>.4H, V<var>m</var>.H[<var>i3</var>]  // Dup V<var>m</var> lane <var>i3</var> through lanes 0-3 in V<var>n</var>.&#13;
dup V<var>n</var>.8H, V<var>m</var>.H[<var>i4</var>]  // Dup V<var>m</var> lane <var>i4</var> through lanes 0-7 in V<var>n</var>.&#13;
&#13;
dup V<var>n</var>.2S, V<var>m</var>.S[<var>i5</var>]  // Dup V<var>m</var> lane <var>i5</var> through lanes 0-1 in V<var>n</var>.&#13;
dup V<var>n</var>.4S, V<var>m</var>.S[<var>i6</var>]  // Dup V<var>m</var> lane <var>i6</var> through lanes 0-3 in V<var>n</var>.&#13;
&#13;
dup V<var>n</var>.2D, V<var>m</var>.D[<var>i7</var>]  // Dup V<var>m</var> lane <var>i7</var> through lanes 0-1 in V<var>n</var>.</code></pre>&#13;
<p class="TX">The first instruction in each pair duplicates only data in the LO 64 bits of V<i>n</i>; the second instruction of each pair copies a full 128 bits. The two single instructions copy 128 bits.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec7">&#13;
&#13;
<h4 class="H2" id="sec7"><span id="h2-187"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.4 Vector Load and Store</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">mov</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">movi</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">mvni</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">fmov</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">dup</span> instructions can move data between vector registers and between general-purpose and vector registers, and can load constants into vector registers. However, they don’t allow you to load a register from memory or store the value held in a vector register to memory. The Neon instruction set provides several load and store instructions to handle these tasks.</p>&#13;
<p class="TX">Because the load and store instructions are the most fundamental, this section considers them first. To load or store an entire 128-bit vector register, use the following syntax</p>&#13;
<pre id="pre-830"><code>ldr Q<var>n</var>, <var>memory</var>&#13;
str Q<var>n</var>, <var>memory</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span> is one of the usual ARM memory addressing modes (same as for the scalar <span class="SANS_TheSansMonoCd_W5Regular_11">ldr</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">str</span> instructions). Note the use of Q<i>n</i> to denote the register (rather than V<i>n</i>). This is one of the few places the Q<i>n</i> register is legal (one wonders why they didn’t just use V<i>n</i>). These instructions will load or store a full 16 bytes, that is, 128 bits.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">stp</span> instructions also allow vector register (Q<i>n</i>) operands:</p>&#13;
<pre id="pre-831"><code>ldp Q<var>n</var>, Q<var>m</var>, <var>memory</var>&#13;
stp Q<var>n</var>, Q<var>m</var>, <var>memory</var></code></pre>&#13;
<p class="TX">Note that <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span> in these instructions don’t have to be consecutive numbers but can be any arbitrary value in the range 0 to 31.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec8">&#13;
&#13;
<h4 class="H2" id="sec8"><span id="h2-188"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.5 Interleaved Load and Store</span></h4>&#13;
<p class="TNI1">The Neon instruction set provides load and store instructions that load data into a single lane across multiple vector registers. These instructions load interleaved data from memory into one, two, three, or four vector registers. The load (<span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ld3</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">ld4</span>) and store (<span class="SANS_TheSansMonoCd_W5Regular_11">st1</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">st2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">st3</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">st4</span>) instructions support non-interleaved data, pairs of interleaved data, triplets of interleaved data, and quad-interleaved data, respectively. The following subsections describe these types of interleaved load and store instructions.</p>&#13;
<section epub:type="division" aria-labelledby="sec9">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_633" aria-label="633"/>&#13;
<h5 class="H3" id="sec9"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.5.1 Interleaved Load and Store Addressing Modes</span></h5>&#13;
<p class="TNI1">The interleaved load and store instructions access memory, but they do not support the full set of ARM memory addressing modes, just three</p>&#13;
<pre id="pre-832"><code><var>instr</var>  {<var>register_list</var>}, [X<var>n</var>]&#13;
<var>instr</var>  {<var>register_list</var>}, [X<var>n</var>], X<var>m</var>&#13;
<var>instr</var>  {<var>register_list</var>}, [X<var>n</var>], #<var>imm</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">instr</span> is one of <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">register_list</span> is a comma-separated set of Q<i>n</i> registers that the load and store instructions will use when loading data from, or storing data to, memory. (The following sections discuss <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">register _list</span> at greater length.)</p>&#13;
<p class="TX">The standard register-indirect addressing mode is<span class="SANS_TheSansMonoCd_W5Regular_11">[X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>]. The <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> instructions will access the data at the memory address held in general-purpose register X<i>n</i>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">[X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">], X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span> addressing mode computes its effective address as the sum of the values in X<i>n</i> and X<i>m</i>. This is a post-increment addressing mode; immediately after accessing the specified memory address, this mode adds the value of X<i>m</i> to X<i>n</i>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">[X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">], #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> addressing mode is also a post-increment addressing mode, which computes its effective address as the sum of <span class="SANS_TheSansMonoCd_W5Regular_11">X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> <span class="SANS_TheSansMonoCd_W5Regular_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span>, then adds the immediate constant to X<i>n</i> after referencing the address. The immediate value is limited to the constants 1, 2, 4, 8, 16, 32, 48, or 64, where the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">register_list</span> operand(s) determines the value you must use. The following sections describe the allowable immediate constants for each version of the instruction.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec10">&#13;
&#13;
<h5 class="H3" id="sec10"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.5.2 ld1/st1</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction loads one to four registers with data from sequential (non-interleaved) memory locations. With a single vector register, the syntax for this instruction is the following</p>&#13;
<pre id="pre-833"><code>ld1 {V<var>n.</var>8B}, <var>memory</var>&#13;
ld1 {V<var>n.</var>16B}, <var>memory</var>&#13;
ld1 {V<var>n.</var>B}[<var>index</var>], <var>memory</var>&#13;
&#13;
ld1 {V<var>n.</var>4H}, <var>memory</var>&#13;
ld1 {V<var>n.</var>8H}, <var>memory</var>&#13;
ld1 {V<var>n.</var>H}[<var>index</var>], <var>memory</var>&#13;
&#13;
ld1 {V<var>n.</var>2S}, <var>memory</var>&#13;
ld1 {V<var>n.</var>4S}, <var>memory</var>&#13;
ld1 {V<var>n.</var>S}[<var>index</var>], <var>memory</var>&#13;
&#13;
ld1 {V<var>n.</var>2D}, <var>memory</var>&#13;
ld1 {V<var>n.</var>D}[<var>index</var>], <var>memory</var></code></pre>&#13;
<p class="Continued1"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_634" aria-label="634"/>where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span> is one of the following:</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">[X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>]</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">[X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">], X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span></p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">[X</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">], #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> operand, if present, must match the size of the register operand. That is, for B it must be 1; for 8B, 8; for 16B, 16; for H, 2; and so on.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction with the <span class="SANS_TheSansMonoCd_W5Regular_11">{V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8B}</span> register list operand loads 8 bytes into the LO 64 bits of V<i>n</i>, while the <span class="SANS_TheSansMonoCd_W5Regular_11">{V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.16B}</span> register list operand loads 16 bytes.</p>&#13;
<p class="TX">With a 4H or 2S type specification, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> register also loads 64 bits (four hwords or two words) into the LO 64 bits of V<i>n</i>. With an 8H or 4S type, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction loads 128 bits into V<i>n</i>. Although the 8B, 4H, and 2S types and the 16B, 8H, 4S, and 2D types seem to be interchangeable (they load the same amount of data into V<i>n</i>), you should aim to pick the most appropriate type for the data you’re manipulating. Not only does this improve your documentation, but also the internal microarchitecture of the ARM CPU might be able to optimize its operations better based on the type of data you are using.</p>&#13;
<p class="TX">With the bare B, H, S, or D type specification, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction loads a single lane in V<i>n</i> with data from memory. This operation does not affect the data in the other lanes in V<i>n</i>. This is the most important variant of the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction because it allows you to build up data in a vector register one lane at a time from different locations in memory.</p>&#13;
<p class="TX">Why does the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction require braces around the vector register specification? The destination operand of this instruction is actually a register <i>list</i>. You can specify one to four registers in this list, as shown in the following examples:</p>&#13;
<pre id="pre-834"><code>ld1 {v1.8b}, [x0]&#13;
ld1 {v1.8b, v2.8b}, [x0]&#13;
ld1 {v1.8b, v2.8b, v3.8b}, [x0]&#13;
ld1 {v1.8b, v2.8b, v3.8b, v4.8b}, [x0]</code></pre>&#13;
<p class="TX">The registers that may appear in this list have two restrictions:</p>&#13;
<ul class="ul">&#13;
<li class="BL">They must be consecutively numbered registers (with V0 being the successor to V31).</li>&#13;
<li class="BL">The type specifications must be identical for all registers in the list.</li>&#13;
</ul>&#13;
<p class="TX">If you have two or more consecutively numbered registers in a list, you can use the shorthand</p>&#13;
<pre id="pre-835"><code>{V<var>n</var>.<var>t </var>- V(<var>n </var>+ <var>m</var>).t}</code></pre>&#13;
<p class="Continued1"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_635" aria-label="635"/>where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span> is 1, 2, or 3, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is one of the usual vector types, as shown in the following examples:</p>&#13;
<pre id="pre-836"><code>ld1 {v1.8b}, [x0]&#13;
ld1 {v1.8b - v2.8b}, [x0]&#13;
ld1 {v1.8b - v3.8b}, [x0]&#13;
ld1 {v1.8b - v4.8b}, [x0]</code></pre>&#13;
<p class="TX">When you specify more than one register in the list, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span> instruction will load values from consecutive locations into the register. For example, the following code will load V0 from the 16 bytes at the address held in X0, V1 from the 16 bytes at X0 + 16, and V2 from the 16 bytes at X0 + 32:</p>&#13;
<pre id="pre-837"><code>ld1 {v0.16b, v1.16b, v2.16b}, [x0]</code></pre>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">st1</span> instruction supports an identical instruction syntax (except, of course, you substitute the <span class="SANS_TheSansMonoCd_W5Regular_11">st1</span> mnemonic for <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span>). It stores the contents of the register(s) or lanes from those registers into the specified memory location. Here is an example that demonstrates storing the values in V0 and V1 to the location specified by X0:</p>&#13;
<pre id="pre-838"><code>st1 {v0.16b, v1.16b}, [x0]</code></pre>&#13;
<p class="TX">This instruction stores the value in V0 at the address held in X0, and the value in V1 to address X0 + 16.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec11">&#13;
&#13;
<h5 class="H3" id="sec11"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.5.3 ld2/st2</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">st2</span> instructions load and store interleaved data. These two instructions use the following syntax</p>&#13;
<pre id="pre-839"><code>ld2 {V<var>n</var>.<var>t1</var>, V<var>(n + 1)</var>.<var>t1</var>}, <var>memory</var>&#13;
ld2 {V<var>n</var>.<var>t2</var>, V<var>(n + 1)</var>.<var>t2</var>}[<var>index</var>], <var>memory</var>&#13;
st2 {V<var>n</var>.<var>t1</var>, V<var>(n + 1)</var>.<var>t1</var>}, <var>memory</var>&#13;
st2 {V<var>n</var>.<var>t2</var>, V<var>(n + 1)</var>.<var>t2</var>}[<var>index</var>], <var>memory</var></code></pre>&#13;
<p class="Continued1">where the register list must contain exactly two registers, and their register numbers must be consecutive. The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> size is 8B, 16B, 4H, 8H, 2S, 4S, or 2D, while <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> is B, H, S, or D. The literal constant <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">index</span> is an appropriate lane number for the type’s size (0 to 15 for B, 0 to 7 for H, 0 to 3 for S, and 0 to 1 for D). Finally, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span> is one of the addressing modes described in section 11.3.5.1, <span class="Xref">“Interleaved Load and Store Addressing Modes,”</span> on <span class="Xref"><a href="chapter11.xhtml#pg_633">page 633</a></span>.</p>&#13;
<p class="TX">The variants with <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">index</span> (which load a single lane into the two registers) load the first register’s lane from the specified memory address and load the second register’s lane <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes later (where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> is the size of the lane, in bytes).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span> instruction with the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> type specification (8B, 16B, 4H, 8H, and so on), meanwhile, loads the two registers one value at a time (of the <span role="doc-pagebreak" epub:type="pagebreak" id="pg_636" aria-label="636"/>specified type: B, H, S, or D), alternating destination lanes between the two registers. For example</p>&#13;
<pre id="pre-840"><code>ld2 {v0.8b, v1.8b}, [x0]</code></pre>&#13;
<p class="Continued1">loads the LO 8 bytes of V0 from memory locations X0, X0 + 2, X0 + 4, X0 + 6, X0 + 8, X0 + 10, X0 + 12, and X0 + 14. It loads the LO 8 bytes of V1 from locations X0 + 1, X0 + 3, X0 + 5, X0 + 7, X0 + 9, X0 + 11, X0 + 13, and X0 + 15. This deinterleaves the data in memory, loading the even bytes into V0 and the odd bytes into V1. <a href="chapter11.xhtml#fig11-4">Figure 11-4</a> shows how <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span> extracts interleaved data from X0 and stores the deinterleaved results in V0 and V1.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-4" src="../images/Figure11-4.jpg" alt="" width="1006" height="493"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-4: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">ld2</span> <span class="SANS_Futura_Std_Book_Oblique_11">deinterleaving operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">If you specify the half-word type (4H or 8H), the <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span> instruction deinterleaves 16-bit values (even and odd half words). This is particularly useful for deinterleaving digital audio tracks that interleave left and right channels (16 bits per sample).</p>&#13;
<p class="TX">If you specify 2S/4S or 2D, this instruction will deinterleave words or dwords. For example, if you have an array of floating-point complex numbers, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span> instruction can deinterleave the real and imaginary components.</p>&#13;
<p class="TX">Because <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span> deinterleaves pairs of objects, the register list must contain exactly two registers. The assembler will reject any other number of registers in the list.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">st2</span> instruction uses the same syntax (except, of course, substituting <span class="SANS_TheSansMonoCd_W5Regular_11">st2</span> for <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span>). This instruction stores data lanes of the specified type from two registers into memory, interleaving the data between the two registers. The store operation is basically reversing the arrows in <a href="chapter11.xhtml#fig11-4">Figure 11-4</a> (that is, copying the data from V0 and V1 into X0, interleaving the two data sets).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec12">&#13;
&#13;
<h5 class="H3" id="sec12"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.5.4 ld3/st3</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld3</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">st3</span> instructions behave in a similar fashion to <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st2</span>, except that they (de)interleave three objects in memory rather than two, and the register list must contain exactly three registers.</p>&#13;
<p class="TX">A common example of using the <span class="SANS_TheSansMonoCd_W5Regular_11">ld3</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st3</span> instructions is to (de)interleave red, green, blue (RGB) values consisting of 3 bytes—an 8-bit red, 8-bit green, and 8-bit blue value—in memory. Using the <span class="SANS_TheSansMonoCd_W5Regular_11">ld3</span> instruction, you can <span role="doc-pagebreak" epub:type="pagebreak" id="pg_637" aria-label="637"/>deinterleave an array of 3-byte RGB values into separate red, green, and blue byte arrays. You can use the <span class="SANS_TheSansMonoCd_W5Regular_11">st3</span> instruction to interleave red, green, and blue values into an RGB array.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec13">&#13;
&#13;
<h5 class="H3" id="sec13"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.5.5 ld4/st4</span></h5>&#13;
<p class="TNI1">Finally, as you’ve probably figured out by now, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld4</span> instruction copies four consecutive values from memory and stores those values into the same lane of the four registers specified by the four-element register list:</p>&#13;
<pre id="pre-841"><code>ld4 {v4.d, v5.d, v6.d, v7.d}[0], [x0]</code></pre>&#13;
<p class="TX">This instruction copies the four dwords starting at the address held in X0 into lane 0 of V4, V5, V6, and V7, respectively. <a href="chapter11.xhtml#fig11-5">Figure 11-5</a> diagrams how this <span class="SANS_TheSansMonoCd_W5Regular_11">ld4</span> instruction operates.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-5" src="../images/Figure11-5.jpg" alt="" width="980" height="1018"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-5: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">ld4</span> <span class="SANS_Futura_Std_Book_Oblique_11">instruction operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld4</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st4</span> instructions are useful for (de)interleaving data in memory that consists of an array of four objects. For example, suppose that you have an array of CMYK (cyan-magenta-yellow-black) color pixels in memory, arranged as shown in <a href="chapter11.xhtml#fig11-6">Figure 11-6</a>.</p>&#13;
<figure class="IMG"><img class="img5" id="fig11-6" src="../images/Figure11-6.jpg" alt="" width="679" height="100"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-6: CMYK pixel layout in memory</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_638" aria-label="638"/>When submitting an image to a printing service, you generally need to provide color separations—that is, four separate images consisting only of the cyan pixels, magenta pixels, yellow pixels, and black pixels. Therefore, you’ll need to extract all the cyan pixels from the full-color image and create a separate image for that; likewise for the magenta, yellow, and black pixels.</p>&#13;
<p class="TX">You can use the <span class="SANS_TheSansMonoCd_W5Regular_11">ld4</span> instruction to extract the cyan, magenta, yellow, and black values from the original image and place those pixels in four separate vector registers. For example, assuming X0 points at the first CMYK pixel (32 bits) in memory</p>&#13;
<pre id="pre-842"><code>ld4 {v0.b - v3.b}[0], [x0]</code></pre>&#13;
<p class="Continued1">will extract the 4 bytes pointed at by X0 and distribute them into lane 0 of V0 (cyan), V1 (magenta), V2 (yellow), and V3 (black). If you add 4 to X0 and repeat this instruction, specifying lane 1 instead of lane 0, this will separate the second pixel into lane 1 of V0–V4. Repeat this 14 more times and you’ll have 16 cyan pixels in V0, 16 magenta pixels in V1, 16 yellow pixels in V2, and 16 black pixels in V3. You can then store away these four registers into the graphic image area that will hold the four-color separations. Repeat this process for all the pixels in the four-color image and you’ll have your color separations.</p>&#13;
<p class="TX">Of course, you can use the 8B and 16B types to process 8 or 16 pixels concurrently:</p>&#13;
<pre id="pre-843"><code>ld4 {v0.16b - v3.16b}, [x0]</code></pre>&#13;
<p class="TX">This instruction copies 64 bytes into V0, V1, V2, and V3, with every fourth byte going into successive lanes in the four registers: V0 gets bytes at offsets <i>i</i> % 4, V1 gets bytes at offsets (<i>i</i> % 4) + 1, and so on, where <i>i</i> is the byte index into memory.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec14">&#13;
&#13;
<h5 class="H3" id="sec14"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.5.6 ldnr</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld1</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ld2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ld3</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">ld4</span> instructions load the lanes of one to four registers with successive values in memory, deinterleaving an array of interleaved objects (bytes, hwords, words, or dwords). The <span class="SANS_TheSansMonoCd_W5Regular_11">ld1r</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ld2r</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ld3r</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">ld4r</span> instructions also deinterleave an interleaved object, but the memory object is a single object that the instruction replicates through all lanes in the vector register(s).</p>&#13;
<p class="TX">The syntax for these instructions is the same as for the <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> instructions with the addition of the <span class="SANS_TheSansMonoCd_W5Regular_11">r</span> suffix on the mnemonic:</p>&#13;
<pre id="pre-844"><code>ld1r {V<var>n</var>.<var>t</var>}, <var>memory</var>&#13;
ld2r {V<var>n</var>.<var>t, </var>V<var>(n + 1)</var>.<var>t</var>}, <var>memory</var>&#13;
ld3r {V<var>n</var>.<var>t, </var>V<var>(n + 1)</var>.<var>t, </var>V<var>(n + 2)</var>.<var>t</var>}, <var>memory</var>&#13;
ld4r {V<var>n</var>.<var>t, </var>V<var>(n + 1)</var>.<var>t, </var>V<var>(n + 2)</var>.<var>t, </var>V<var>(n + 3)</var>.<var>t</var>}, <var>memory</var></code></pre>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_639" aria-label="639"/>The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.t</span> represents a lane type (more on this in a moment), and memory is the usual <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> addressing modes. You can also use the range syntax</p>&#13;
<pre id="pre-845"><code>V<var>n</var>.<var>t - </var>V(<var>n </var>+ <var>m</var>).<var>t</var></code></pre>&#13;
<p class="Continued1">when specifying two or more registers in the list.</p>&#13;
<p class="TX">For these instructions, allowable types are 8B, 16B, 4H, 8H, 2S, 4S, and 2D. These type specifications do the following when used with the <span class="SANS_TheSansMonoCd_W5Regular_11">ld1r</span> instruction:</p>&#13;
<ul class="ul">&#13;
<li class="BL">8B loads the first 8 lanes of V<i>n</i> with a copy of the byte found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>, replicating that byte in each lane.</li>&#13;
<li class="BL">16B loads all 16 lanes of V<i>n</i> with a copy of the byte found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>, replicating that byte in each lane.</li>&#13;
<li class="BL">4H loads the first 4 lanes of V<i>n</i>, replicating the hword found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>.</li>&#13;
<li class="BL">8H loads all 8 lanes of V<i>n</i>, replicating the hword found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>.</li>&#13;
<li class="BL">2S loads the first 2 lanes of V<i>n</i>, replicating the word found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>.</li>&#13;
<li class="BL">4S loads all 4 lanes of V<i>n</i>, replicating the word found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>.</li>&#13;
<li class="BL">2D loads the 2 dword lanes of V<i>n</i>, replicating the dword found at <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">memory</span>.</li>&#13;
</ul>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld1r</span> instruction fetches only a single lane value from memory and writes it to all the lanes of the destination register. The <span class="SANS_TheSansMonoCd_W5Regular_11">ld2r</span> instruction fetches two lane objects from successive memory locations and replicates the first value throughout the first register and the second value throughout the second. The <span class="SANS_TheSansMonoCd_W5Regular_11">ld3r</span> instruction fetches three lane objects from memory and replicates them through the first, second, and third registers, respectively. Finally, the <span class="SANS_TheSansMonoCd_W5Regular_11">ld4r</span> instruction fetches four lane objects from memory and uses them to initialize the lanes of the four registers.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec15">&#13;
&#13;
<h4 class="H2" id="sec15"><span id="h2-189"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.6 Register Interleaving and Deinterleaving</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">r</span> instructions operate between memory and the vector registers. When you want the ability to interleave and deinterleave data appearing in vector registers, leaving the result in a vector register, use the <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">zip1</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">zip2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uzip1</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uzip2</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">ext</span> instructions.</p>&#13;
<section epub:type="division" aria-labelledby="sec16">&#13;
&#13;
<h5 class="H3" id="sec16"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.6.1 trn1 and trn2</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span> (transpose) instructions—so called because you can use them to transpose the elements of a 2 × 2 matrix (or larger arrays with a little effort)—extract data from two source registers and interleave that data into a destination register. These instructions use the following syntax</p>&#13;
<pre id="pre-846"><code>trn1 V<var>d</var>.<var>t</var>, V<var>a</var>.<var>t</var>, V<var>b</var>.<var>t</var>&#13;
trn2 V<var>d</var>.<var>t</var>, V<var>a</var>.<var>t</var>, V<var>b</var>.<var>t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> can be 8B, 16B, 4H, 8H, 2S, 4S, or 2D. The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> (destination), <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">a</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">b</span> items are register numbers in the range 0 to 31. These register numbers are <span role="doc-pagebreak" epub:type="pagebreak" id="pg_640" aria-label="640"/>arbitrary (they don’t have to be consecutive values, as is the case for the <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">st</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">ld</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">r</span> instructions).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span> instruction copies the data from even-numbered lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">a</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> into the corresponding lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>, and data from even-numbered lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">b</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> into the odd lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>, while ignoring the odd-numbered lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">a</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">b</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>. For example, consider the following instruction:</p>&#13;
<pre id="pre-847"><code>trn1 v0.4s, v2.4s, v4.4s</code></pre>&#13;
<p class="TX">This instruction interleaves the alternate bytes in V2 and V4, leaving the result in V0, as shown in <a href="chapter11.xhtml#fig11-7">Figure 11-7</a>.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-7" src="../images/Figure11-7.jpg" alt="" width="854" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-7: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">trn1 v0.4s, v2.4s, v4.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span> instruction copies the values in the odd lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">a</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">b</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> into alternating lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>, as shown in <a href="chapter11.xhtml#fig11-8">Figure 11-8</a> (similar to <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span> except that it swaps the source locations).</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-8" src="../images/Figure11-8.jpg" alt="" width="887" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-8: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">trn2 v0.4s, v2.4s, v4.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">Consider the 2×2 matrix of double-precision values held in V2 and V3 as shown in <a href="chapter11.xhtml#fig11-9">Figure 11-9</a> (note the positions of the array elements, which is different from what you would normally expect).</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_641" aria-label="641"/>&#13;
<figure class="IMG"><img class="img7" id="fig11-9" src="../images/Figure11-9.jpg" alt="" width="722" height="234"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-9: A 2×2 matrix held in V2 and V3</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The following two instructions will transpose this matrix, leaving the result in V0 and V1:</p>&#13;
<pre id="pre-848"><code>trn1 v0.2d, v2.2d, v3.2d&#13;
trn2 v1.2d, v2.2d, v3.2d</code></pre>&#13;
<p class="TX">Of course, <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span> are generally useful for rearranging and interleaving values in the vector registers, even if you aren’t transposing 2×2 matrices.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec17">&#13;
&#13;
<h5 class="H3" id="sec17"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.6.2 zip1 and zip2</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">zip1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">zip2</span> instructions are similar to <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span> insofar as they produce an interleaved result from data taken from two source registers. The name <i>zip</i> comes from <i>zipper</i>: the instruction interleaves lanes just like a zipper interleaves the two halves of the connector. Except for the mnemonics, the syntax is identical to <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span></p>&#13;
<pre id="pre-849"><code>zip1 V<var>d</var>.<var>t</var>, V<var>a</var>.<var>t</var>, V<var>b</var>.<var>t</var>&#13;
zip2 V<var>d</var>.<var>t</var>, V<var>a</var>.<var>t</var>, V<var>b</var>.<var>t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> can be 8B, 16B, 4H, 8H, 2S, 4S, or 2D (all types must be the same in the instruction).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">zip</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">trn</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> instructions differ in the way they select the source lanes to interleave. The <span class="SANS_TheSansMonoCd_W5Regular_11">zip1</span> instruction interleaves lane values taken from the beginning of the source registers (consuming half the lanes of each source register and ignoring the remaining lanes). See <a href="chapter11.xhtml#fig11-10">Figure 11-10</a> for an example.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-10" src="../images/Figure11-10.jpg" alt="" width="892" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-10: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">zip1 v0.4s, v1.4s, v2.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_642" aria-label="642"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">zip2</span> instruction works similarly except that it processes the second half of the lanes in the source registers. <a href="chapter11.xhtml#fig11-11">Figure 11-11</a> shows an example.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-11" src="../images/Figure11-11.jpg" alt="" width="854" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-11: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">zip2 v0.4s, v1.4s, v2.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">As you can see from these figures, the <span class="SANS_TheSansMonoCd_W5Regular_11">zip1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">zip2</span> instructions are typically what you would use to create interleaved data using only registers.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec18">&#13;
&#13;
<h5 class="H3" id="sec18"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.6.3 uzp1 and uzp2</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">uzp1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uzp2</span> (unzip1 and unzip2) instructions are the inverse of <span class="SANS_TheSansMonoCd_W5Regular_11">zip1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">zip2</span>. They take interleaved data in two source registers and produce deinterleaved data in the destination register. Their syntax is the same as that of the <span class="SANS_TheSansMonoCd_W5Regular_11">trn</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">zip</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> instructions:</p>&#13;
<pre id="pre-850"><code>uzp1 V<var>d</var>.<var>t</var>, V<var>a</var>.<var>t</var>, V<var>b</var>.<var>t</var>&#13;
uzp2 V<var>d</var>.<var>t</var>, V<var>a</var>.<var>t</var>, V<var>b</var>.<var>t</var></code></pre>&#13;
<p class="TX">As usual, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> can be 8B, 16B, 4H, 8H, 2S, 4S, or 2D.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">uzp1</span> instruction copies the even lanes from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">a</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> into the first half of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>, then appends the even lanes of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">b</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> to the end of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>. See <a href="chapter11.xhtml#fig11-12">Figure 11-12</a> for an example.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-12" src="../images/Figure11-12.jpg" alt="" width="858" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-12: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uzp1 v0.4s, v1.4s, v2.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_643" aria-label="643"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">uzp2</span> instruction copies the odd lanes from the source registers. <a href="chapter11.xhtml#fig11-13">Figure 11-13</a> shows an example of the <span class="SANS_TheSansMonoCd_W5Regular_11">uzp2</span> instruction in action.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-13" src="../images/Figure11-13.jpg" alt="" width="854" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-13: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uzp2 v0.4s, v1.4s, v2.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">If the type specifier is 64 bits (8B, 4H, or 2S), the <span class="SANS_TheSansMonoCd_W5Regular_11">uzp1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uzp2</span> instructions leave 0s in the HO lanes of the destination register.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec19">&#13;
&#13;
<h5 class="H3" id="sec19"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.3.6.4 ext</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ext</span> (extract) instruction creates an 8- or 16-byte vector from <i>n</i> bytes in one vector and 8-<i>n</i> (or 16-<i>n</i>) bytes from a second vector. This instruction allows you to extract an 8- or 16-byte vector from across two vectors. The syntax for this instruction is as follows</p>&#13;
<pre id="pre-851"><code>ext V<var>d</var>.8B, V<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>.8B, V<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">2</span>.8B, #<var>n</var>&#13;
ext V<var>d</var>.16B, V<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>.16B, V<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">2</span>.16B, #<var>n</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> is a starting index, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination register, and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> are the source registers.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ext V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8B, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8B, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.8B, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> instruction fetches the LO <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> and copies them to the HO <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes of the LO 64 bits in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><i>.</i> It also extracts the LO 8-<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> and copies them to the LO 8-<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>. For an example of <span class="SANS_TheSansMonoCd_W5Regular_11">ext</span>, see <a href="chapter11.xhtml#fig11-14">Figure 11-14</a>.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-14" src="../images/Figure11-14.jpg" alt="" width="769" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-14: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">ext v0.8B, v1.8B, v2.8B, #2</span> <span class="SANS_Futura_Std_Book_Oblique_11">instruction</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_644" aria-label="644"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">ext V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.16B, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.16B, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.16B, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> instruction fetches the LO <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> and copies them to the HO <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><i>.</i> It also extracts the LO 16-<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> and copies them to the LO 16-<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> bytes of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> (see <a href="chapter11.xhtml#fig11-15">Figure 11-15</a> for an example).</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-15" src="../images/Figure11-15.jpg" alt="" width="792" height="517"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-15: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">ext v0.16B, v1.16B, v2.16B, #5</span> <span class="SANS_Futura_Std_Book_Oblique_11">instruction</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">This instruction supports only the 8B and 16B types. You can easily extract hwords, words, or dwords by choosing an appropriate index value (<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>) that includes all the objects you want to extract.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec20">&#13;
&#13;
<h4 class="H2" id="sec20"><span id="h2-190"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.7 Table Lookups with tbl and tbx</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span> (table lookup) instructions allow you to exchange all the byte values in one register with values taken from a lookup table containing up to 64 entries. The syntax for these instructions is</p>&#13;
<pre id="pre-852"><code>tbl V<var>d</var>.8B, {<var>table_list</var>}, V<var>s</var>.8B&#13;
tbl V<var>d</var>.16B, {<var>table_list</var>}, V<var>s</var>.16B&#13;
tbx V<var>d</var>.8B, {<var>table_list</var>}, V<var>s</var>.8B&#13;
tbl V<var>d</var>.16B, {<var>table_list</var>}, V<var>s</var>.16B</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">table_list</span> is a list of one to four (consecutively numbered) registers, all of which must have a 16B type attached to them. (You can also use the <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> <span class="SANS_TheSansMonoCd_W5Regular_11">- V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> syntax, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span> &gt; <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">m</span> &lt; (<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> + 4).) This list of registers provides a lookup table that contains 16, 32, 48, or 64 entries. The LO byte of the first register is index 0 in the table; the HO byte of the last register is index 15, 31, 47, or 63 into the table.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> instruction fetches each byte from the source register (<span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>) and uses its value as an index into the lookup table. It fetches the byte at that index from the table and copies it to the corresponding location in the destination register—that is, the same byte index from which the source byte was taken; so this is equivalent to <span class="SANS_TheSansMonoCd_W5Regular_11">Vd[i] = table[Vs[i]]</span>. If the value is out of range (greater than 15, 31, 47, or 63, depending on the size of the table), the <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> instruction stores a 0 into the corresponding location in the destination register. The <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span> instruction works similarly to <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span>, except that it <span role="doc-pagebreak" epub:type="pagebreak" id="pg_645" aria-label="645"/>leaves the destination location unchanged if the source value is out of range.</p>&#13;
<p class="TX">For very small tables (64 entries or fewer), you can use <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span> to implement lookup tables as described in <span class="Xref"><a href="chapter10.xhtml">Chapter 10</a></span>. However, the main purpose of these two instructions is to provide arbitrary vector permutations like the <span class="SANS_TheSansMonoCd_W5Regular_11">trn1</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">trn2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">zip1</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">zip2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uzp1</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">uzp2</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">ext</span> instructions. Suppose, for example, that you want to reverse the positions of all 16 bytes in a vector register (swapping indices 0 and 15, 1 and 14, 2 and 13, 3 and 12, and so on). <a href="chapter11.xhtml#fig11-16">Figure 11-16</a> shows a 16-byte endian swap operation, where the double-ended arrows point to the two locations where the bytes are exchanged.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-16" src="../images/Figure11-16.jpg" alt="" width="792" height="300"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-16: A 16-byte endian swap</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">If you load a vector register with the following 16-byte value</p>&#13;
<pre id="pre-853"><code>0x000102030405060708090a0b0c0d0e0f</code></pre>&#13;
<p class="Continued1">and then use this value in the source register for the <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> (or <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span>) instruction, <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> (or <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span>) will swap the bytes in a single 16-byte register supplied as the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">table_list</span>, storing the reversed bytes in the destination register. Assuming you’ve loaded this value into V0, the following instruction will swap the bytes in <span class="SANS_TheSansMonoCd_W5Regular_11">{V1}</span>, placing the results in V2:</p>&#13;
<pre id="pre-854"><code>tbl v2.16b, {v1.16b}, v0.16b</code></pre>&#13;
<p class="TX">After you load V1 with the bytes to be swapped and execute this instruction, V2 will contain the swapped values.</p>&#13;
<p class="TX">To use <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span> as a vector permutation instruction, load the permutation indexes into the source register (V0 in this example). The indices will always be values in the range 0 to 15, to select specific entries in <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">table_list</span>. For a true permutation, each of the values (0 to 15) will appear exactly once in the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">source</span> register, and there will always be a single register in the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">table _list</span>. Because you’re limiting the values in the source register to the range 0 to 15, the table index values are always in range, so you can use either <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span>. Both work exactly the same when the values are not out of range.</p>&#13;
<p class="TX">Of course, you can use any permutation you like by specifying different values in the source register. As with the <span class="SANS_TheSansMonoCd_W5Regular_11">ext</span> instruction, <span class="SANS_TheSansMonoCd_W5Regular_11">tbl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">tbx</span> support only the 8B and 16B lane types. However, it’s easy enough to synthesize other types (for permutations, anyway) by choosing the positions of the source register lane values to permute hwords, words, and dwords. Obviously, for table lookup operations (rather than permutations), you’re <span role="doc-pagebreak" epub:type="pagebreak" id="pg_646" aria-label="646"/>limited to 8-bit values, so hword, word, and dword types don’t make any sense.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec21">&#13;
&#13;
<h4 class="H2" id="sec21"><span id="h2-191"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.3.8 Endian Swaps with rev16, rev32, and rev64</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">rev16</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">rev32</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">rev64</span> instructions are similar to their scalar counterparts <span class="SANS_TheSansMonoCd_W5Regular_11">rev16</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">rev32</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">rev</span> (see section 3.3, <span class="Xref">“Little-Endian and Big-Endian Data Organization,”</span> on <span class="Xref"><a href="chapter3.xhtml#pg_133">page 133</a></span>), except, of course, they operate on the lanes in a vector source register rather than on a general-purpose integer register. Here is their syntax:</p>&#13;
<pre id="pre-855"><code>rev16 V<var>d.t1</var>, V<var>s.t1</var>  // Swap the bytes in the half-word lanes.&#13;
rev32 V<var>d.t2</var>, V<var>s.</var><var>t2</var>  // Swap the bytes in the word lanes.&#13;
rev64 V<var>d.t1</var>, V<var>s.t3</var>  // Swap the bytes in the double-word lanes.</code></pre>&#13;
<p class="TX">The legal types and lane counts for these instructions appear in <a href="chapter11.xhtml#tab11-1">Table 11-1</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-1"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-1:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types and Lane Counts for</span> <span class="SANS_TheSansMonoCd_W5Regular_11">rev</span><span class="SANS_Futura_Std_Book_11">* Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Type and lane count</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B, 4H, or 8H</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B, 4H, 8H, 2S, or 4S</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">If the lane count and type is 8B, 4H, or 2S, the instruction operates only on the LO 64 bits of the source register (and clears the HO 64 bits of the destination register). If the lane count and type is 16B, 8H, or 4S, these instructions operate on the full 128 bits of the source register.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec22">&#13;
&#13;
<h3 class="H1" id="sec22"><span id="h1-118"/><span class="SANS_Futura_Std_Bold_B_11">11.4 Vertical and Horizontal Operations</span></h3>&#13;
<p class="TNI1">Up to this point, vector operations have been <i>vertical</i>, meaning they’ve operated on the same lane across multiple registers (which, when stacked as appearing in most figures thus far, show a vertical operational direction). Consider the following vector addition instruction:</p>&#13;
<pre id="pre-856"><code>add v0.16b, v1.16b, v2.16b</code></pre>&#13;
<p class="TX">As for the scalar addition operation (for example, <span class="SANS_TheSansMonoCd_W5Regular_11">add w0, w1, w2</span>), this instruction adds the values of two source registers (V1.16B and V2.16B), producing a sum in the destination register. However, this is not a 128-bit addition operation, but rather an 8-bit operation repeated 16 times. Vector operations typically operate on a lane-by-lane basis, performing multiple small operations in parallel. For this particular instruction, the CPU adds together 16 byte values, producing 16 independent byte results. This is the <span role="doc-pagebreak" epub:type="pagebreak" id="pg_647" aria-label="647"/>magic behind SIMD programming: the ability to do 16 times as much work with a single instruction (so it should run about 16 times faster than running these 16-byte additions individually).</p>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-17">Figure 11-17</a> shows the lane-by-lane operation of the <span class="SANS_TheSansMonoCd_W5Regular_11">add</span> instruction with the lane-by-lane addition following the arrow directions.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-17" src="../images/Figure11-17.jpg" alt="" width="801" height="372"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-17: Lane-by-lane operations</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">Lane-by-lane operations are independent of one another, meaning that if any carries, overflows, or other exceptional conditions occur, such anomalies are limited in scope to a single lane. Because there is only a single set of NVZC condition code flags, vector instructions cannot (and do not) affect these flags. If an unsigned carry out of one lane occurs (such as when adding 255 + 1 in a byte lane), the sum wraps around with no indication of overflow or underflow. In general, you must handle overflows completely differently from the way you’d handle them when doing scalar arithmetic. This chapter covers some strategies for doing so when discussing saturation in later sections.</p>&#13;
<p class="TX">Certain vector instructions provide <i>horizontal operations</i>, also known as <i>reducing operations</i>. Rather than operating lane by lane between two registers, these operations operate on all the lanes within a single vector register, producing a scalar result. For example, the <span class="SANS_TheSansMonoCd_W5Regular_11">addv</span> instruction will produce the sum of all the lanes in a single vector register.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec23">&#13;
&#13;
<h3 class="H1" id="sec23"><span id="h1-119"/><span class="SANS_Futura_Std_Bold_B_11">11.5 SIMD Logical Operations</span></h3>&#13;
<p class="TNI1">Because logical (Boolean) operations are computed on a bitwise basis, vector logical operations are unique insofar as you can use them to perform 128 individual bit operations. Whether you treat the source operands as sixteen 1-byte values or as one 128-byte value, the result is the same. For that reason, the vector logical operations support only two types: 8B (for 64-bit operands) and 16B (for 128-bit operands). If you really want to operate on 4H or 2S operands, just specify 8B; you’ll get the same result. Likewise, for 8H, 4S, or 2D operands, specifying 16B produces the same result.</p>&#13;
<p class="TX">The Neon instruction set supports eight logical instructions, as shown in <a href="chapter11.xhtml#tab11-2">Table 11-2</a>. Here, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 8B or 16B, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination register, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> is the left source register, and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> is the right source register (<span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> is the only source register for the <span class="SANS_TheSansMonoCd_W5Regular_11">not</span> instruction).</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_648" aria-label="648"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-2"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-2:</span></span> <span class="SANS_Futura_Std_Book_11">Neon Logical Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">and</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">and V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> <span class="SANS_TheSansMonoCd_W5Regular_11">&amp; V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">orr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">orr V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> <span class="SANS_TheSansMonoCd_W5Regular_11">| V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">orn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">orn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> <span class="SANS_TheSansMonoCd_W5Regular_11">| ~(V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">eor</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">eor V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> <span class="SANS_TheSansMonoCd_W5Regular_11">^ V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bic</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bic V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> <span class="SANS_TheSansMonoCd_W5Regular_11">&amp; ~(V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">)</span> <span class="SANS_Futura_Std_Book_11">(bit clear)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bif</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bif V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Bit insert if false</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bit</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bit V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Bit insert if true</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">bsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Bitwise select</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">not</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">not V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= ~V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">and</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">orr</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">eor</span> instructions do the usual logical operations (same as scalar) and require no further explanation. The <span class="SANS_TheSansMonoCd_W5Regular_11">orn</span> instruction is similar to <span class="SANS_TheSansMonoCd_W5Regular_11">bic</span> insofar as it inverts the second source operand prior to the OR operation.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">bic</span> (bit clear) instruction clears all the bits in the value of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> in the positions containing 1s in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span>. It stores the result in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>. Note that there is no need for a <span class="SANS_TheSansMonoCd_W5Regular_11">bis</span> (bit set) instruction, because <span class="SANS_TheSansMonoCd_W5Regular_11">orr</span> will set bits in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">bif</span> (bit insert if false) and <span class="SANS_TheSansMonoCd_W5Regular_11">bit</span> (bit insert if true) instructions are unusual insofar as they use three operands in their computation (rather than using a function of two inputs and storing the result in a third operand). The <span class="SANS_TheSansMonoCd_W5Regular_11">bif</span> instruction copies the bits from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> to <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> wherever the corresponding bit in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> contains a 0. In the bit positions where <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> contains a 1, this instruction leaves the corresponding bit in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> unchanged. The <span class="SANS_TheSansMonoCd_W5Regular_11">bit</span> instruction works similarly, except it copies the bits when the corresponding bit in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> contains a 1 (rather than 0).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">bsl</span> (bit select) instruction selects bits from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span> (and copies them to <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>) based on the original contents of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>. If <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> originally contained a 1 in a particular bit position, <span class="SANS_TheSansMonoCd_W5Regular_11">bsl</span> selects the corresponding bit from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>. Otherwise, it selects the bit from <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_SUB_11">2</span>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">not</span> instruction inverts all the bits in the source register and stores the result into the destination register. This instruction is different from the other logical instructions, having only a single source operand.</p>&#13;
<p class="TX">The Neon instruction set supports a few special immediate versions of the <span class="SANS_TheSansMonoCd_W5Regular_11">orr</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">bic</span> instructions</p>&#13;
<pre id="pre-857"><code>orr V<var>d.t</var>, #<var>imm</var>&#13;
orr V<var>d.t</var>, #<var>imm, </var>lsl<var> </var>#<var>shift</var>&#13;
bic V<var>d.t</var>, #<var>imm</var>&#13;
bic V<var>d.t</var>, #<var>imm,</var> lsl #<var>shift</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> is an unsigned 8-bit immediate value; the type (<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>) is 2S, 4S, 4H, or 8H; and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">shift</span> is 0 or 8 if <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 4H/8H and 0, 8, 16, or 24 if <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S or 4S. If <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">shift</span> is not specified, it is assumed to be 0. These instructions require the H and S types rather than the B types, since they replicate the immediate value through the bytes in the lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec24">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_649" aria-label="649"/>&#13;
<h3 class="H1" id="sec24"><span id="h1-120"/><span class="SANS_Futura_Std_Bold_B_11">11.6 SIMD Shift Operations</span></h3>&#13;
<p class="TNI1">Shift instructions are generally considered to be logical operations. However, from a vector point of view, they are more correctly thought of as arithmetic operations because shift operations can produce overflows. Vector shift operations handle overflows in one of four ways:</p>&#13;
<ul class="ul">&#13;
<li class="BL">Ignoring any carry out of the shift operation (truncation)</li>&#13;
<li class="BL">Saturating the shift result</li>&#13;
<li class="BL">Rounding the result</li>&#13;
<li class="BL">Providing an extended shift operation whose destination operand is larger than the source register</li>&#13;
</ul>&#13;
<p class="TX">This section describes these various shift operations.</p>&#13;
<blockquote>&#13;
<p class="Note"><span class="NoteHead"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></span></p>&#13;
</blockquote>&#13;
<p class="NOTE-TXT"><i>The Neon instruction set uses mnemonics based on</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">shr</span> <i>and</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">shl</span> <i>for shift left and shift right. This is in contrast to the</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">lsl</span><i>,</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">lsr</span><i>, and</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">asr</span> <i>instructions that the scalar integer instruction set uses. I cannot think of a good reason they did it this way; it would have made the instruction set easier to learn had they stuck to a consistent naming convention.</i></p>&#13;
<section epub:type="division" aria-labelledby="sec25">&#13;
&#13;
<h4 class="H2" id="sec25"><span id="h2-192"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.1 Shift-Left Instruction</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span> instruction shifts each lane of a vector register to the left the specified number of bits. This instruction shifts 0s into the (vacated) LO bits. Any carry out of the HO bit of the lane is lost. The syntax is as follows</p>&#13;
<pre id="pre-858"><code>shl V<var>d</var>.8B, V<var>s</var>.8B, #<var>imm</var>&#13;
shl V<var>d</var>.16B, V<var>s</var>.16B, #<var>imm</var>&#13;
shl V<var>d</var>.4H, V<var>s</var>.4H, #<var>imm</var>&#13;
shl V<var>d</var>.8H, V<var>s</var>.8H, #<var>imm</var>&#13;
shl V<var>d</var>.2S, V<var>s</var>.2S, #<var>imm</var>&#13;
shl V<var>d</var>.4S, V<var>s</var>.4S, #<var>imm</var>&#13;
shl V<var>d</var>.2D, V<var>s</var>.2D, #<var>imm</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination register and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> is the source register. The immediate count value must be in the ranges appearing in <a href="chapter11.xhtml#tab11-3">Table 11-3</a> (based on the specified type). The assembler will report an error if an immediate shift value is outside these ranges.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-3"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-3:</span></span> <span class="SANS_Futura_Std_Book_11">Valid</span> <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span> <span class="SANS_Futura_Std_Book_11">Shift Values</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Type</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Shift range</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B/16B</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 7</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4H/8H</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 15</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2S/4S</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 31</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2D</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 63</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_650" aria-label="650"/>There is also a scalar <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span> instruction that operates on the LO dword of a vector register, with the following syntax</p>&#13;
<pre id="pre-859"><code>shl D<var>d</var>, D<var>s</var>, #<var>imm</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination scalar register and <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> is the source register (corresponding to the LO 64 bits of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span>). The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> shift count must be in the range 0 to 63. Note that this instruction will zero out the HO 64 bits of <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>.</p>&#13;
<p class="TX">To shift the lanes by a variable number of bits, see section 11.6.9, <span class="Xref">“Shift by a Variable Number of Bits,”</span> on <span class="Xref"><a href="chapter11.xhtml#pg_657">page 657</a></span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec26">&#13;
&#13;
<h4 class="H2" id="sec26"><span id="h2-193"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.2 Saturating Shift Left</span></h4>&#13;
<p class="TNI1">The saturating shift-left instructions <span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">sqshlu</span> shift the lanes in a vector to the left the specified number of bit positions. If an overflow (whether signed or unsigned) occurs, these instructions saturate the result to the largest (signed or unsigned) value depending on the instruction. The syntax for these instructions is as follows</p>&#13;
<pre id="pre-860"><code>uqshl  V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
uqshl  V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
sqshl  V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
sqshl  V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
sqshlu V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
sqshlu V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination register, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> is the source register, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> is an appropriate immediate shift constant or <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> contains a shift count in the LO byte, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is type 8B, 16B, 4H, 8H, 2S, 4S, or 2D. The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> specification must be the same for <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span>.</p>&#13;
<p class="TX">The shift value’s range depends on the lane type; see <a href="chapter11.xhtml#tab11-3">Table 11-3</a> in the previous section for the legal immediate values. For immediate values, the assembler will report an error if the shift constant is out of range. For the register shift count variants, if the LO byte contains an out-of-range value, then the instruction will always saturate the result if a lane contains a nonzero value (see the discussion of saturation that follows). The <span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span> instruction shifts values to the left one bit position, storing the result in the corresponding lane in the destination register. If the HO bit is set (before the shift), this instruction stores all 1 bits (the maximum unsigned value) in the destination lane. For example, if a lane contains 0x7F in V1, the corresponding lane will contain 0xFE (0x7F shifted left one position) after the execution of the following:</p>&#13;
<pre id="pre-861"><code>uqshl v0.16b, v1.16b, #1</code></pre>&#13;
<p class="TX">However, if a source lane contains the value 0x80 through 0xFF, then shifting it to the left one position produces 0xFF in the destination lane. In general, if anything other than 0 bits are shifted out of a source lane, the corresponding destination lane will contain 0xFF.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span> instruction is a signed saturation shift-left operation. For signed values, an overflow will occur during a left shift if the H two bits of a <span role="doc-pagebreak" epub:type="pagebreak" id="pg_651" aria-label="651"/>lane contain different values. For negative source values (the HO bit is set), overflow saturates to a result with the HO bit set and all other bits containing 0s (for example, with hword types, 0xa000 will saturate to 0x8000).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqshlu</span> instruction is similar to <span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span>, except that it treats the destination as an unsigned value. Positive (and 0) source values will shift to the left exactly like the <span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span> instruction, while negative source values (with the HO bit set) will saturate to 0.</p>&#13;
<p class="TX">There are also scalar versions of the <span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">sqshlu</span> instructions</p>&#13;
<pre id="pre-862"><code>uqshl  R<var>d</var>, R<var>s</var>, #<var>imm</var>&#13;
sqshl  R<var>d</var>, R<var>s</var>, #<var>imm</var>&#13;
sqshlu R<var>d</var>, R<var>s</var>, #<var>imm</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> (<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> = <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> or <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span>) is one of the registers B<i>n</i>, H<i>n</i>, S<i>n</i>, or D<i>n</i>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> have the usual meanings and limitations. Unlike the plain <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span> instruction, these instructions allow byte, hword, and word registers, as well as dword registers.</p>&#13;
<p class="TX">As for the vector instructions, the <span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span> instructions do an unsigned saturation. If any bits are shifted out of the HO bit of the source register, these instructions set the destination (B<i>n</i>, H<i>n</i>, S<i>n</i>, or D<i>n</i>) to all 1 bits. These instructions zero-extend the result through the rest of the vector register containing R<i>d</i>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span> instruction does a signed saturation, leaving the result in the destination (scalar) register. This instruction zeros out the remaining HO bits of the corresponding vector register (that is, all the HO bits beyond the size of the scalar register).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqshlu</span> instruction does a shift on a signed source value but saturates it to an unsigned value (negative results saturate to 0, just as with the vector register versions of this instruction).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec27">&#13;
&#13;
<h4 class="H2" id="sec27"><span id="h2-194"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.3 Shift-Left Long</span></h4>&#13;
<p class="TNI1">The <i>shift-left long</i> instructions <span class="SANS_TheSansMonoCd_W5Regular_11">sshll</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">sshll2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ushll</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">ushll2</span> provide a mechanism to handle overflow during a shift operation. These instructions sign- or zero-extend the value in a lane to twice its size and then perform the left shift on the double-sized source, storing the result into the (double-sized) destination lane. The syntax for these instructions is</p>&#13;
<pre id="pre-863"><code>ushll  V<var>d.t2</var>, V<var>s</var>.<var>t</var>, #<var>imm</var>&#13;
sshll  V<var>d.t2</var>, V<var>s</var>.<var>t</var>, #<var>imm</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> is the double-sized type and can be 8H, 4S, or 2D; <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is the original type and can be 8B, 4H, or 2S. <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> is the shift count and should be in the range 0 to <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n –</span> 1, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> is the number of bits in the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> type.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ushll</span> instruction zero-extends the values in the source lanes to twice their size, shifts the zero-extended result by the specified number of bits, and stores the result into the corresponding (double-sized) destination lanes. The <span class="SANS_TheSansMonoCd_W5Regular_11">sshll</span> instruction sign-extends the source lane values to twice their size, then shifts the results and stores them in the double-sized destination lanes.</p>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_652" aria-label="652"/>Because these instructions double the size of their values, they operate only on the LO 64 bits of the source register (lanes 0 to 7 for bytes, 0 to 3 for hwords, and 0 to 1 for words). These instructions ignore the HO 64 bits of the source register.</p>&#13;
<p class="TX">To handle the upper 64 bits of the source register, the ARM provides the <span class="SANS_TheSansMonoCd_W5Regular_11">ushll2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sshll2</span> instructions:</p>&#13;
<pre id="pre-864"><code>ushll2 V<var>d.t4</var>, V<var>s.t3</var>, #<var>imm</var>&#13;
sshll2 V<var>d.t4</var>, V<var>s.t3</var>, #<var>imm</var></code></pre>&#13;
<p class="TX">These accomplish the same operations as the <span class="SANS_TheSansMonoCd_W5Regular_11">ushll</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sshll</span> instructions, except that they take their source operands from the HO 64 bits rather than the LO 64 bits. To indicate this, the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span>/<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span> type pairs must be 8H/16B, 4S/8H, or 2D/4S. The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> shift values must match the source lane size in bits (0 to 15 for 8H/16B, 0 to 31 for 4S/8H, and 0 to 63 for 2D/4S).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">ushll</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ushll2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">sshll</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">sshll2</span> instructions have no scalar versions. Just use the vector versions and zero out the HO bits yourself if you need this operation.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec28">&#13;
&#13;
<h4 class="H2" id="sec28"><span id="h2-195"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.4 Shift and Insert</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">sli</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sri</span> instructions allow you to shift a source operand a certain number of bits and then (using other instructions) insert other bits into the locations (0 bits) vacated by the shift operation. Here’s the syntax for these instructions</p>&#13;
<pre id="pre-865"><code>sli V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
sri V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var></code></pre>&#13;
<p class="Continued1">where <i>t</i> is the usual set of types: 8B, 16B, 4H, 8H, 2S, 4S, or 2D. For <span class="SANS_TheSansMonoCd_W5Regular_11">sli</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> is the shift count, which must be in the range 0 to <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n –</span> 1, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> is bit size of a lane. For <span class="SANS_TheSansMonoCd_W5Regular_11">sri</span>, the immediate value is a count in the range 1 to <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sli</span> instruction shifts each lane in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> to the left the specified number of bits. It then logically ORs the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n - imm</span> LO bits of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> into the result (replacing the 0s that were shifted in) and stores the result back into <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>, as shown in <a href="chapter11.xhtml#fig11-18">Figure 11-18</a>.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-18" src="../images/Figure11-18.jpg" alt="" width="883" height="541"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-18: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">sli</span> <span class="SANS_Futura_Std_Book_Oblique_11">instruction operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_653" aria-label="653"/>For example, to shift in 1 bits rather than 0 bits, you could load the destination register with all 1 bits, then execute the <span class="SANS_TheSansMonoCd_W5Regular_11">sli</span> instruction, as shown in the following code:</p>&#13;
<pre id="pre-866"><code>movi    v0.16b, #0xff&#13;
movi    v1.4s, #0x1&#13;
sli     v0.4s, v1.4s, #4</code></pre>&#13;
<p class="Continued1">This produces 0x0000001f0000001f0000001f0000001f in V0.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sri</span> instruction shifts each lane in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> to the right the specified number of bits, then logically ORs the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n - imm</span> HO bits of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> into the result (replacing the 0s that were shifted in), then stores the result back into <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span>, as shown in <a href="chapter11.xhtml#fig11-19">Figure 11-19</a>.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-19" src="../images/Figure11-19.jpg" alt="" width="918" height="541"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-19: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">sri</span> <span class="SANS_Futura_Std_Book_Oblique_11">instruction operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The scalar versions of the <span class="SANS_TheSansMonoCd_W5Regular_11">sli</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sri</span> instructions have the following syntax:</p>&#13;
<pre id="pre-867"><code>sli D<var>d</var>, D<var>s</var>, #<var>imm</var>  // <var>imm</var> = 0 to 63&#13;
sri D<var>d</var>, D<var>s</var>, #<var>imm</var>  // <var>imm</var> = 1 to 64</code></pre>&#13;
<p class="TX">These instructions operate on the LO 64 bits of the specified vector register (<span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>) and zero out the HO 64 bits of the destination register.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec29">&#13;
&#13;
<h4 class="H2" id="sec29"><span id="h2-196"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.5 Signed and Unsigned Shift Right</span></h4>&#13;
<p class="TNI1">Because an arithmetic shift left and a logical shift left are essentially the same operation, the ARM uses a single instruction for both operations: <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span>. However, the logical and arithmetic shifts are different for right shifts. Therefore, the Neon instruction set provides two instructions, <span class="SANS_TheSansMonoCd_W5Regular_11">sshr</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">ushr</span>, for signed and unsigned shift right (respectively, arithmetic shift right and logical shift right).</p>&#13;
<p class="TX">As noted in <span class="Xref"><a href="chapter2.xhtml">Chapter 2</a></span>, a shift-left operation is the same as a multiplication by 2. Shift-right operations are approximately the same as a division by 2. I say <i>approximately</i> because the behaviors of signed and unsigned numbers are somewhat different. For example, when you shift the value 1 <span role="doc-pagebreak" epub:type="pagebreak" id="pg_654" aria-label="654"/>to the right one position, you get a 0 result. If you shift the signed value –1 (all 1 bits) to the right by using an arithmetic shift right, however, the result is –1. In one case, the shift rounds toward 0, while in the other it rounds away from 0. Neither case is particularly correct or incorrect, but not being able to choose the rounding direction can be a problem.</p>&#13;
<p class="TX">With scalar instructions, you can reverse this rounding effect by adding the carry flag to the result after the shift:</p>&#13;
<pre id="pre-868"><code>asr  x0, x0, #1&#13;
adc  x0, x0, xzr // -1 -&gt; 0 and 1 -&gt; 1</code></pre>&#13;
<p class="TX">Because the vector operations don’t track carries out of a shift in the carry flag, you don’t have the option of correcting for this. The Neon instruction set therefore provides the rounding shift instructions <span class="SANS_TheSansMonoCd_W5Regular_11">srshr</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">urshr</span>, which will add in the carry for you.</p>&#13;
<p class="TX">The syntax for the Neon shift-right instructions is shown here:</p>&#13;
<pre id="pre-869"><code>ushr  V<var>d</var>.<var>t</var>, V<var>s</var>.<var>t</var>, #<var>imm</var>  // Unsigned (logical) shift right&#13;
urshr V<var>d</var>.<var>t</var>, V<var>s</var>.<var>t</var>, #<var>imm</var>  // Unsigned rounding shift right&#13;
sshr  V<var>d</var>.<var>t</var>, V<var>s</var>.<var>t</var>, #<var>imm</var>  // Signed (arithmetic) shift right&#13;
srshr V<var>d</var>.<var>t</var>, V<var>s</var>.<var>t</var>, #<var>imm</var>  // Signed rounding shift right</code></pre>&#13;
<p class="TX">The allowable types for the vector registers are the usual 8B, 16B, 4H, 8H, 2S, 4S, or 2D. The rounding variants (with the <span class="SANS_TheSansMonoCd_W5Regular_11">r</span> as the second character in the mnemonic) add the carry flag back into the destination lane after the shift operation.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sshr</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">srshr</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">ushr</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">urshr</span> instructions also have scalar versions:</p>&#13;
<pre id="pre-870"><code>sshr  D<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
srshr D<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
ushr  D<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
urshr D<var>d</var>, D<var>s</var>, #<var>imm</var></code></pre>&#13;
<p class="TX">These instructions operate on the LO 64 bits of the vector registers specified by <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> (destination) and <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> (source). The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> shift operand must be a value in the range 1 to 64. They will zero out the HO 64 bits of the corresponding <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> register. Otherwise, they are identical to their vector components.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec30">&#13;
&#13;
<h4 class="H2" id="sec30"><span id="h2-197"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.6 Accumulating Shift Right</span></h4>&#13;
<p class="TNI1">The accumulating shift-right instructions have the following syntax:</p>&#13;
<pre id="pre-871"><code>usra  V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
ursra V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
ssra  V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
srsra V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var></code></pre>&#13;
<p class="TX">These instructions are largely the same as the shift-right instructions, but they add their shifted values to the corresponding destination lanes (rather than just storing the shift lane values).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec31">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_655" aria-label="655"/>&#13;
<h4 class="H2" id="sec31"><span id="h2-198"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.7 Narrowing Shift Right</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">shrn</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">shrn2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">rshrn</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">rshrn2</span> instructions provide the converse operations to the <span class="SANS_TheSansMonoCd_W5Regular_11">shll</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">shll2</span> instructions. Rather than double the size of the operands when shifting, they halve (“narrow”) the size. The syntax for these instructions is as follows</p>&#13;
<pre id="pre-872"><code>shrn   V<var>d.t1</var>, V<var>s.t2</var>, #<var>imm</var>&#13;
shrn2  V<var>d.t3</var>, V<var>s.t4</var>, #<var>imm</var>&#13;
rshrn  V<var>d.t1</var>, V<var>s.t2</var>, #<var>imm</var>&#13;
rshrn2 V<var>d.t3</var>, V<var>s.t4</var>, #<var>imm</var></code></pre>&#13;
<p class="Continued1">where:</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> is 8B, 4H, or 2S</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> is 8H, 4S, or 2D</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span> is 8B, 16B, 4H, 8H, 2S, or 4S</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span> is 8H, 4S, or 2D</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">shrn</span> instruction shifts each lane right the specified number of bits (shifting 0s in from the left); extracts the LO 8, 16, or 32 bits (depending on size of <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span>); and stores the result into the same lane number in the destination register. The <span class="SANS_TheSansMonoCd_W5Regular_11">shrn</span> instruction ignores (truncates) any HO bits left in the shift operation that don’t fit in the destination lane (which, recall, is half the size of the source lane). This instruction zeros out the HO 64 bits of the destination register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">shrn2</span> instruction performs the exact same operation but stores the results in the HO 64 bits.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">rshrn</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">rshrn2</span> instructions do the same thing as <span class="SANS_TheSansMonoCd_W5Regular_11">shrn</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">shrn2</span>, respectively, but round the shifted result before narrowing it. The <span class="SANS_TheSansMonoCd_W5Regular_11">rshrn</span> instruction also clears the upper half of the destination register.</p>&#13;
<p class="TX">Because the narrowing shift-right instructions throw away all but the LO bits that fit in the destination lane, you might think a separate set of instructions must extract the HO bits after the shift operation. There’s no need for such instructions, though; just add 8, 16, or 32 to your <span class="SANS_TheSansMonoCd_W5Regular_11">shrn</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">shrn2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">rshurn</span>, or <span class="SANS_TheSansMonoCd_W5Regular_11">rshrn2</span> shift count to extract the HO bits.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec32">&#13;
&#13;
<h4 class="H2" id="sec32"><span id="h2-199"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.8 Saturating Shift Right with Narrowing</span></h4>&#13;
<p class="TNI1">The standard narrowing shift instructions truncate any HO bits when narrowing the result to half the source lane size. The saturating shift-right instructions will saturate the shifted value if it does not fit in the destination lane. <a href="chapter11.xhtml#tab11-4">Table 11-4</a> gives the syntax for these instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_656" aria-label="656"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-4"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-4:</span></span> <span class="SANS_Futura_Std_Book_11">Lane-by-Lane Saturating Shift Right with Narrowing Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqshrn</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqshrn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing. Stores data into LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqrshrn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqrshrn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing and rounding. Stores data into LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing. Stores data into LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing and rounding. Stores data into LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrun</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrun V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing and saturation to an unsigned number. Stores data into LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing, rounding, and saturation to an unsigned number. Stores data into LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqshrn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqshrn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing. Stores data into HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqrshrn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqrshrn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing and rounding. Stores data into HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing. Stores data into HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing and rounding. Stores data into HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrun2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshrun2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing and saturation to an unsigned number. Stores data into HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun2</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed shift right by</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> <span class="SANS_Futura_Std_Book_11">bits with narrowing, rounding, and saturation to an unsigned number. Stores data into HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><a href="chapter11.xhtml#tab11-5">Table 11-5</a> lists the legal types and lane counts for the saturating shift-right instructions appearing in <a href="chapter11.xhtml#tab11-4">Table 11-4</a>.</p>&#13;
<table class="Basic-Table1">&#13;
<caption><p class="TT" id="tab11-5"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-5:</span></span> <span class="SANS_Futura_Std_Book_11">Saturating Shift-Right Types and Lane Counts</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Legal types and lane counts</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B/8H, 4H/4S, or 2S/2D</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">16B/8H, 8H/4S, or 4S/2D</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The instructions with the <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> suffix store their narrowed results into the HO 64 bits of the destination register. Those without this suffix will zero out the HO 64 bits of the destination register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">uqrshrn</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrn</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uqrshrn2</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrn2</span> instructions round the shifted result before saturating the value (if saturation is necessary). Rounding consists of adding the last bit shifted out of the source lane back into the value.</p>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_657" aria-label="657"/>The instructions with the <span class="SANS_TheSansMonoCd_W5Regular_11">s</span> prefix operate on signed values, while those with the <span class="SANS_TheSansMonoCd_W5Regular_11">u</span> prefix operate on unsigned values. Unsigned values saturate to all 1 bits (if the unsigned value will not fit in the destination lane size), but signed values will saturate to either a HO bit of 1 with other bits 0s, or a HO bit of 0 with all other bits containing 1s.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun2</span> instructions do the following:</p>&#13;
<ul class="ul">&#13;
<li class="BL">Perform an arithmetic shift-right operation by the specified number of bits</li>&#13;
<li class="BL">Round the result by adding the last bit shifted out back into the result</li>&#13;
<li class="BL">Saturate the result to the maximum unsigned value (all 1 bits) if the result will not fit into the destination lane; negative values saturate to 0</li>&#13;
<li class="BL">Store the saturated result into the destination lane</li>&#13;
</ul>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun</span> instruction stores the results in the LO 64 bits of the destination register; <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshrun2</span> stores the results in the HO 64 bits of the destination register.</p>&#13;
<p class="TX">These instructions also have scalar versions:</p>&#13;
<pre id="pre-873"><code>sqshrn B<var>d</var>, H<var>s</var>, #<var>imm</var>&#13;
sqshrn H<var>d</var>, S<var>s</var>, #<var>imm</var>&#13;
sqshrn S<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
&#13;
uqshrn B<var>d</var>, H<var>s</var>, #<var>imm</var>&#13;
uqshrn H<var>d</var>, S<var>s</var>, #<var>imm</var>&#13;
uqshrn S<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
&#13;
sqrshrn B<var>d</var>, H<var>s</var>, #<var>imm</var>&#13;
sqrshrn H<var>d</var>, S<var>s</var>, #<var>imm</var>&#13;
sqrshrn S<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
&#13;
uqrshrn B<var>d</var>, H<var>s</var>, #<var>imm</var>&#13;
uqrshrn H<var>d</var>, S<var>s</var>, #<var>imm</var>&#13;
uqrshrn S<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
&#13;
sqshrun B<var>d</var>, H<var>s</var>, #<var>imm</var>&#13;
sqshrun H<var>d</var>, S<var>s</var>, #<var>imm</var>&#13;
sqshrun S<var>d</var>, D<var>s</var>, #<var>imm</var>&#13;
&#13;
sqrshrun B<var>d</var>, H<var>s</var>, #<var>imm</var>&#13;
sqrshrun H<var>d</var>, S<var>s</var>, #<var>imm</var>&#13;
sqrshrun S<var>d</var>, D<var>s</var>, #<var>imm</var></code></pre>&#13;
<p class="TX">Note that these instructions clear the upper bits (beyond the specified scalar register) of the underlying vector register.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec33">&#13;
&#13;
<h4 class="H2" id="sec33"><span id="h2-200"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.6.9 Shift by a Variable Number of Bits</span></h4>&#13;
<p class="TNI1">To shift a lane by a variable number of bits, use one of the following instructions</p>&#13;
<pre id="pre-874"><code>sshl   V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
ushl   V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_658" aria-label="658"/>sqshl  V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
uqshl  V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
srshl  V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
urshl  V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
sqrshl V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var>&#13;
uqrshl V<var>d.t</var>, V<var>s.t</var>, V<var>c.t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is the usual 8B, 16B, 4H, 8H, 2S, 4S, or 2D.</p>&#13;
<p class="TX"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> holds the signed shift count in the LO byte. For positive values (in the range 0 to 0x7F), the instruction shifts the bits in a lane the number of bit positions to the left. For negative values (0xFF to 0x80; –1 to –128), the instruction shifts the bits to the right, despite using a <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span> mnemonic. See <a href="chapter11.xhtml#tab11-6">Table 11-6</a> for legal ranges when specifying the shift count by using a register.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-6"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-6:</span></span> <span class="SANS_Futura_Std_Book_11">Legal</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> <span class="SANS_Futura_Std_Book_11">Shift Ranges</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Type</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Unsigned (SHL)</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Signed (SHR)</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B/16B</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 7</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 to –7</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4H/8H</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 15</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 to –15</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2S/4S</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 31</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 to –31</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2D</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 to 63</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 to –63</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">Values outside the ranges listed in <a href="chapter11.xhtml#tab11-6">Table 11-6</a> will produce the results shown in <a href="chapter11.xhtml#tab11-7">Table 11-7</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-7"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-7:</span></span> <span class="SANS_Futura_Std_Book_11">Result of Shift If Count Exceeds Allowable Range</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Shift instruction</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Positive count, positive overflow</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Positive count, negative overflow</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Negative count, positive value</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Negative count, negative value</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sshl</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ushl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">HO bit 0, all others 1 (for example, 0x7F)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">HO bit 1, all others 0 (for example, 0x80)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">All 1 bits (for example, 0xff)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">All 1 bits (for example, 0xff)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">srshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 (–1 + carry)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">urshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">1 (0 + carry)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">HO bit 0, all others 1 (for example, 0x7F)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">HO bit 1, all others 0 (for example, 0x80)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrshl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">HO bit 0, all others 1 (for example, 0x7F)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">HO bit 1, all others 0 (for example, 0x80)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0 (–1 + carry)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqrshl</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">–1 (all 1 bits)</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">0</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">1 (0 + carry)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_659" aria-label="659"/>Using <span class="SANS_TheSansMonoCd_W5Regular_11">shf</span> (for shift) in these instructions would probably have been a better choice then <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span>, since that name better matches the operation. Just keep in mind that the value in the LO byte of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is a signed integer and negative values indicate a right shift.</p>&#13;
<p class="TX">The Neon <span class="SANS_TheSansMonoCd_W5Regular_11">shl</span> instruction also has some scalar saturating versions</p>&#13;
<pre id="pre-875"><code>sqshl    R<var>d</var>, R<var>s</var>, R<var>c</var>&#13;
uqshl    R<var>d</var>, R<var>s</var>, R<var>c</var>&#13;
sqrshl   R<var>d</var>, R<var>s</var>, R<var>c</var>&#13;
uqrshl   R<var>d</var>, R<var>s</var>, R<var>c</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">R</span> represents one of the scalar register names (B, H, S, or D). These instructions shift the value in the scalar register <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> the number of bit positions specified by the LO byte of <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> and store the shifted result in <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>. <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> is treated as a signed number; positive values shift <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> left, while negative values shift <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> right. If an overflow (signed or unsigned, as appropriate) occurs during the shift, these instructions set <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> to the maximum positive signed or unsigned value.</p>&#13;
<p class="TX">If the shift count is negative for the <span class="SANS_TheSansMonoCd_W5Regular_11">sqshl</span> instruction, the CPU performs an arithmetic shift-right operation, which will replicate the HO bit when shifting to the right. Positive (and 0) source values will saturate to 0, and negative source values will saturate to –1 (all 1 bits).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqrshl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uqrshl</span> instructions are special rounding versions of the saturating shift instructions. During a shift-right operation (that is, when <span class="SANS_TheSansMonoCd_W5Regular_11">R</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">c</span> is negative), these instructions round the result by adding 1 if the last bit shifted out was a 1 bit.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec34">&#13;
&#13;
<h3 class="H1" id="sec34"><span id="h1-121"/><span class="SANS_Futura_Std_Bold_B_11">11.7 SIMD Arithmetic Operations</span></h3>&#13;
<p class="TNI1">The Neon instruction set includes several common arithmetic operations, including addition, subtraction, and multiplication. The only surprise is that there is no division operation; instead, you’ll have to compute the reciprocal and multiply by that value (using the instructions provided to estimate reciprocals).</p>&#13;
<section epub:type="division" aria-labelledby="sec35">&#13;
&#13;
<h4 class="H2" id="sec35"><span id="h2-201"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.1 SIMD Addition</span></h4>&#13;
<p class="TNI1">Neon provides a wide set of instructions that add lanes (ignoring overflow), add and saturate (when overflow occurs), or perform horizontal additions.</p>&#13;
<section epub:type="division" aria-labelledby="sec36">&#13;
&#13;
<h5 class="H3" id="sec36"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.1.1 Vector Addition</span></h5>&#13;
<p class="TNI1">The Neon instruction set provides several instructions you can use to add integer and floating-point values in lanes within the vector registers, as listed in <a href="chapter11.xhtml#tab11-8">Table 11-8</a>. These instructions compute <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_TheSansMonoCd_W5Regular_11">= V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_TheSansMonoCd_W5Regular_11">+ V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>, where <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> is the left operand, and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> is the right operand.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_660" aria-label="660"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-8"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-8:</span></span> <span class="SANS_Futura_Std_Book_11">Neon Addition Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Instruction mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">add</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">add V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane integer sum</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane floating-point sum</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed integer sum, with saturation</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned integer sum, with saturation</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_Oblique_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed integer sum, with long extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned integer sum, with long extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed integer sum, with long extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned integer sum, with long extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddw</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddw V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed integer sum, with wide extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddw</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddw V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned integer sum, with wide extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddw2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddw2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed integer sum, with wide extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddw2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddw2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned integer sum, with wide extension</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">addhn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">addhn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane addition with narrowing</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">raddhn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">raddhn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane addition with rounding and narrowing</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">addhn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">addhn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane addition with narrowing (uses HO bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">raddhn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">raddhn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane addition with rounding and narrowing (uses HO bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">shadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">shadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed addition with halving</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uhadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uhadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned addition with halving</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">srhadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">srhadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed addition with rounding and halving</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">urhadd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">urhadd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned addition with rounding and halving</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">addp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">addp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Adds vector pairwise</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">faddp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">faddp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Adds vector floating-point pairwise</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddlp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddlp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Adds vector pairwise, signed long integer</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddlp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddlp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Adds vector pairwise, unsigned long integer</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddalp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saddalp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Adds vector pairwise and accumulates, signed long integer</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddalp</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaddalp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Adds vector pairwise and accumulates, unsigned long integer</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_661" aria-label="661"/><a href="chapter11.xhtml#tab11-9">Table 11-9</a> lists the legal types for the addition and subtraction instructions.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-9"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-9:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types for Vector Addition and Subtraction</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Legal types</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B, 4H, 8H, 2S, 4S, or 2D</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2S, 4S, or 2D</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/8B, 4S/4H, or 2D/2S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/16B, 4S/8H, or 2D/4S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B, 4H, 8H, 2S, or 4S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4H/8B, 8H/16B, 2S/4H, 4S/8H, 1D/2S, or 2D/4S</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The remainder of this section describes each of the addition instructions in <a href="chapter11.xhtml#tab11-8">Table 11-8</a> in greater detail.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">add</span> instruction, with vector register operands, does a lane-by-lane addition. Any overflow (signed or unsigned) is ignored, with the sum holding the LO bits of the result. If the type is 8B, 4H, or 2S, the <span class="SANS_TheSansMonoCd_W5Regular_11">add</span> instruction adds only the lanes in the LO 64 bits of the registers, zeroing out the HO 64 bits of the destination register. <a href="chapter11.xhtml#fig11-20">Figure 11-20</a> provides an example of a 16B lane-by-lane addition.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-20" src="../images/Figure11-20.jpg" alt="" width="839" height="456"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-20: 16B lane-by-lane addition using</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">add V</span><span class="SANS_TheSansMonoCd_W5Regular_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.16b, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.16b, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.16b</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">fadd</span> instruction, with vector register operands, adds two- or four-lane single-precision values together, or a pair of double-precision floating-point values. With 2S types, the <span class="SANS_TheSansMonoCd_W5Regular_11">fadd</span> instruction clears the HO 64 bits of the destination register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqadd</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uqadd</span> instructions do a lane-by-lane addition (signed and unsigned, respectively), except they saturate their results in the case of overflow (or underflow, when adding signed numbers). As with <span class="SANS_TheSansMonoCd_W5Regular_11">add</span>, those instructions that take 64-bit source operands produce a 64-bit result and zero out the HO 64 bits of the destination register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">saddl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddl</span> instructions take the lanes in the LO 64 bits of the source registers, sign- or zero-extend these values to twice their size, <span role="doc-pagebreak" epub:type="pagebreak" id="pg_662" aria-label="662"/>compute the sum, and store the results in the full destination register (with double-sized lanes). The destination register type must be specified as twice the size of the source register types (see <a href="chapter11.xhtml#fig11-21">Figure 11-21</a>). Because the sum of two <i>n</i>-bit numbers requires no more than <i>n</i> + 1 bits, these instructions will produce the correct result without any possibility of overflow or underflow.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-21" src="../images/Figure11-21.jpg" alt="" width="848" height="462"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-21: A</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uaddl</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uaddl V</span><span class="SANS_TheSansMonoCd_W5Regular_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4s, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4h, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4h</span><span class="SANS_Futura_Std_Book_Oblique_11">)</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">saddl2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddl2</span> instructions also sign- or zero-extend the values in the lanes in one-half of the source register and produce a sum in the full 128 bits of the destination register. However, the <span class="SANS_TheSansMonoCd_W5Regular_11">saddl2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddl2</span> instructions compute the sum of the lanes in the HO 64 bits of the source registers (see <a href="chapter11.xhtml#fig11-22">Figure 11-22</a>).</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-22" src="../images/Figure11-22.jpg" alt="" width="850" height="463"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-22: A</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">saddl2</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">saddl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4s, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.8h, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.8h</span><span class="SANS_Futura_Std_Book_Oblique_11">)</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">Although the <span class="SANS_TheSansMonoCd_W5Regular_11">saddl2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddl2</span> instructions’ source operands are only 64 bits, you must specify the 128-bit types (16B, 8H, 4S) as the source type because the instruction retrieves the data from the upper 64 bits of a 128-bit value.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">saddw</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uaddw</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">saddw2</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddw2</span> instructions allow you to produce the sum of two operands whose sizes are different. The <span class="SANS_TheSansMonoCd_W5Regular_11">saddw</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddw</span> instructions expect the second source operand’s type to be half the size of the first source and the destination operands’ types, though you specify the same number of lanes for all three operands. These instructions will sign- or <span role="doc-pagebreak" epub:type="pagebreak" id="pg_663" aria-label="663"/>zero-extend (respectively) the lanes in the second source operand to the size of the other two, compute the sum, and then store the data into the destination lanes (see <a href="chapter11.xhtml#fig11-23">Figure 11-23</a>).</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-23" src="../images/Figure11-23.jpg" alt="" width="853" height="474"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-23: A</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uaddw</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">uaddw Vd.4s, Vs</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4s, Vs</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4h</span><span class="SANS_Futura_Std_Book_Oblique_11">)</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">saddw2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddw2</span> instructions also sign- or zero-extend the second source operand, but they operate on the HO 64 bits rather than the LO 64 bits (see <a href="chapter11.xhtml#fig11-24">Figure 11-24</a>). You must specify double the number of lanes for the second operand so that the instruction will operate on the full 128 bits of the second source operand.</p>&#13;
<figure class="IMG"><img class="img7" id="fig11-24" src="../images/Figure11-24.jpg" alt="" width="858" height="463"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-24: A</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">saddw2</span> <span class="SANS_Futura_Std_Book_Oblique_11">operation (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">saddw2 V</span><span class="SANS_TheSansMonoCd_W5Regular_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4s, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">1</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4s, V</span><span class="SANS_TheSansMonoCd_W5Regular_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_SUB_11">2</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">.4h</span><span class="SANS_Futura_Std_Book_Oblique_11">)</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">Overflow (underflow) is possible when using the <span class="SANS_TheSansMonoCd_W5Regular_11">saddw</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uaddw</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">saddw2</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddw2</span> instructions (for example, when adding 0xFFFF with 0x01). These instructions will ignore the overflow and keep the LO bits of the result.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">addhn</span> (vector add with narrowing) and <span class="SANS_TheSansMonoCd_W5Regular_11">raddhn</span> (vector add, round, and narrow) instructions add the specified lanes together, then <i>narrow</i> the result by keeping only the HO bits. These instructions’ destination type is half the size of the source types. For example, if you add half-word lanes together, the narrowing additions will keep only the HO byte of the results.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">raddhn</span> instruction rounds the result before storing it into the destination register. If the LO half of the result contains a 1 in its HO bit <span role="doc-pagebreak" epub:type="pagebreak" id="pg_664" aria-label="664"/>position, <span class="SANS_TheSansMonoCd_W5Regular_11">raddhn</span> increments the HO byte by 1; otherwise, it returns the same result as <span class="SANS_TheSansMonoCd_W5Regular_11">addhn</span>. Consider the following instruction:</p>&#13;
<pre id="pre-876"><code>raddhn  v0.8b, v1.8h, v2.8h</code></pre>&#13;
<p class="Continued1">If V2 contained 0x00010001 and V1 contained 0xFE7FFE7F, then V0 would contain 0xFFFF after execution of this instruction. Had V1 contained 0xFE7EFE7E, though, V0 would contain 0xFEFE afterward.</p>&#13;
<p class="TX">Overflow can still occur during the execution of <span class="SANS_TheSansMonoCd_W5Regular_11">addhn</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">raddhn</span>. Adding half words 0xFFFF and 0x0001 together will produce 0x00 in the corresponding destination byte lane.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">addhn2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">raddhn2</span> instructions also compute <i>add and narrowing</i> (with rounding, if specified); however, they store their results in the HO 64 bits of the destination register and leave the LO 64 bits of the destination unchanged. Because these instructions operate on the HO 64 bits of the destination, the destination’s lane count must be twice that of the source registers. For example</p>&#13;
<pre id="pre-877"><code>addhn2  v0.16b, v1.8h, v2.8h</code></pre>&#13;
<p class="Continued1">adds the LO 8 half words of V1 and V2 and stores the HO 8-bit result of each lane addition into the HO 8 bytes of V0 (leaving the LO 8 bytes untouched). You must specify the destination register’s type as 16B, even though this instruction stores only 8 bytes into the register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">shadd</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">uhadd</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">srhadd</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">urhadd</span> instructions add a pair of lanes together, shift right by 1 (with optional rounding, for those instructions containing an <span class="SANS_TheSansMonoCd_W5Regular_11">r</span>), and store the result into the destination lane. As usual, the instructions beginning with an <span class="SANS_TheSansMonoCd_W5Regular_11">s</span> handle signed values, while the instructions beginning with a <span class="SANS_TheSansMonoCd_W5Regular_11">u</span> handle unsigned values. Because an addition of <i>n</i> bits never produces more than <i>n</i> + 1 bits, and a division by 2 is the same as a shift right by 1 bit, these instructions never produce an overflow. Consider the addition of the two largest single-byte values, 0xFF + 0xFF = 0x1FE. Shifting this sum to the right 1 bit gives you 0xFF, which fits just fine into 8 bits. Even with rounding, overflow will not occur.</p>&#13;
<p class="TX">These instructions are especially handy for processing digital audio. For example, suppose you want to mix together two 16-bit audio tracks. Simply summing the hwords from the two tracks will boost the volume by 3 decibels (dB) (equivalent to doubling the digital value). Halving the result after the sum reduces this volume increase by 3 dB. The <span class="SANS_TheSansMonoCd_W5Regular_11">urhadd</span> instruction would be ideal for mixing these tracks as it would divide the result by 2, averaging the values of the two tracks.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec37">&#13;
&#13;
<h5 class="H3" id="sec37"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.1.2 Pairwise Addition</span></h5>&#13;
<p class="TNI1">Thus far, all the addition operations have operated on corresponding lanes in the source operands, producing a result that the instructions store in the same lane in the destination register. This is known as a <i>vertical addition</i> because the data flows vertically from register to register, as shown previously <span role="doc-pagebreak" epub:type="pagebreak" id="pg_665" aria-label="665"/>in <a href="chapter11.xhtml#fig11-20">Figure 11-20</a>. On occasion, you may want to produce the sum of adjacent elements within a vector rather than the elements in corresponding lanes of two vectors (horizontal addition). You can accomplish this with the <i>pairwise addition</i> instructions from <a href="chapter11.xhtml#tab11-8">Table 11-8</a>.</p>&#13;
<p class="TX">The pairwise addition instructions, as their name suggests, add adjacent pairs of lanes in vectors. Because the result requires half the number of lanes that are present in the source, the pairwise additions produce a single vector result from two source registers. Consider the following example that pairwise-adds the half words in V1 and V2, producing the pairwise sum in V0:</p>&#13;
<pre id="pre-878"><code>addp  v0.4s, v2.4s, v1.4s</code></pre>&#13;
<p class="TX">This instruction computes the following results:</p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">V0[0] = V2[0] + V2[1]</span></p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">V0[1] = V2[2] + V2[3]</span></p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">V0[2] = V1[0] + V1[1]</span></p>&#13;
<p class="ListPlain"><span class="SANS_TheSansMonoCd_W5Regular_11">V0[3] = V1[2] + V1[3]</span></p>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-25">Figure 11-25</a> diagrams this operation.</p>&#13;
<figure class="IMG"><img class="img1" id="fig11-25" src="../images/Figure11-25.jpg" alt="" width="1545" height="360"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-25: The</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">addp v0.4s, v2.4s, v1.4s</span> <span class="SANS_Futura_Std_Book_Oblique_11">instruction</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">This instruction also has a floating-point version that adds adjacent single- or double-precision values in a pair of vectors: <span class="SANS_TheSansMonoCd_W5Regular_11">faddp</span>. For example, the following instruction performs the same operation as the previous <span class="SANS_TheSansMonoCd_W5Regular_11">addp</span> integer example but adds adjacent single-precision floating-point values rather than 32-bit integer values:</p>&#13;
<pre id="pre-879"><code>faddp  v0.4s, v1.4s, v2.4s</code></pre>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">addp</span> instruction ignores any overflow during the addition. To produce a correct result, use the <span class="SANS_TheSansMonoCd_W5Regular_11">saddlp</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">uaddlp</span> instruction (signed and unsigned pairwise add long) to sign- or zero-extend the lane values prior to the addition. The syntax for these two instructions is different from that of the other addition instructions: there are only two register operands (a source and a destination register). For example, because the following instruction doubles the size of the result to place in the destination <span role="doc-pagebreak" epub:type="pagebreak" id="pg_666" aria-label="666"/>operand and sums adjacent elements of the source operand, there is no need for a second register operand:</p>&#13;
<pre id="pre-880"><code>saddlp  v0.2d, v1.4s</code></pre>&#13;
<p class="TX">Note that the destination register type size must be twice that of the source, and the number of lanes must be half that of the source.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">uaddalp</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">saddalp</span> instructions are functionally similar to <span class="SANS_TheSansMonoCd_W5Regular_11">uaddlp</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">saddlp</span>, but rather than simply storing the pairwise sum into the destination lanes, they add the sum to the value already present in the destination lanes.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec38">&#13;
&#13;
<h5 class="H3" id="sec38"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.1.3 Vector Saturating Accumulate</span></h5>&#13;
<p class="TNI1">The Neon instruction set includes two instructions that sum the lanes of a source vector into the corresponding lanes of a destination vector. The instructions are</p>&#13;
<pre id="pre-881"><code>usqadd  V<var>d</var>.t, V<var>s</var>.t  // Add lanes of V<var>s</var> to V<var>d</var>.&#13;
suqadd  V<var>d</var>.t, V<var>s</var>.t  // Add lanes of V<var>s</var> to V<var>d</var>.</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 8B, 4H, or 2S when operating on the LO 64 bits of the registers, or 16B, 8H, 4S, or 2D when operating on all 128 bits. The 64-bit variants will clear the HO 64 bits of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span>.</p>&#13;
<p class="TX">These instructions are unusual in that they allow you to add (with saturation) an unsigned input into a signed value or add a signed number into an unsigned value (usually instructions operate on only one type of data).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">usqadd</span> instruction adds a signed value in the source lanes to the unsigned value in the corresponding destination lanes. Should the sum exceed the maximum (unsigned) value for the destination lane’s size, this instruction will saturate the lane to the maximum value. Should the sum go negative, this instruction saturates the destination lane to 0. For example, if a half-word destination lane contains 0xFFF0 and the corresponding source lane contains 0xFF, the <span class="SANS_TheSansMonoCd_W5Regular_11">usqadd</span> instruction (with a 4H or 8H type) will produce 0xFFFF in the destination lane. On the other hand, if the destination lane contains 0x08 and the source lane contains 0xFFF0 (–16), then their sum will produce 0 in the destination lane.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">suqadd</span> instruction is the converse operation: it adds an unsigned source operand to a signed destination operand, saturating to the maximum signed value. For example, if a destination half-word lane contains 0x7FF0 and the corresponding source lane contains 0x00FF, their sum will produce 0x7FFF, the maximum signed value. Note that if the destination operand contains 0xFFFF (–1) and the source operand is 0x0002, you wind up with 0x0001 in the destination lane (–1 + 2 = 1).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">usqadd</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">suqadd</span> instructions also have scalar variants</p>&#13;
<pre id="pre-882"><code>usqadd  <var>Rd</var>, <var>Rs</var>   // Add <var>Rs</var> to <var>Rd</var>.&#13;
suqadd  <var>Rd</var>, <var>Rs</var>   // Add <var>Rs</var> to <var>Rd</var>.</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span> are one of the scalar registers <span class="SANS_TheSansMonoCd_W5Regular_11">B</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">H</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>, or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>.</p>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_667" aria-label="667"/>The <span class="SANS_TheSansMonoCd_W5Regular_11">suqadd</span> instruction will always produce the maximum signed value when overflowing, as you can’t reduce the value by adding an unsigned number to it.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec39">&#13;
&#13;
<h5 class="H3" id="sec39"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.1.4 Horizontal Add</span></h5>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">addv</span> (add across vector) instruction produces the sum of all the lanes in a single source vector register and leaves the result in a scalar element of another vector register (this is known as <i>reduction</i>). The syntax for this instruction is as follows</p>&#13;
<pre id="pre-883"><code>addv <var>Rd</var>, V<var>s.t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">R</span> is the destination register and is one of B<i>n</i>, H<i>n</i>, or S<i>n</i>. The legal vector register type and lane count depend on the scalar register; <a href="chapter11.xhtml#tab11-10">Table 11-10</a> lists the valid types.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-10"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-10:</span></span> <span class="SANS_Futura_Std_Book_11">Valid Vector Register Types for</span> <span class="SANS_TheSansMonoCd_W5Regular_11">addv</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Scalar register (R</span><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">d</span><span class="SANS_Futura_Std_Heavy_11">)</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Valid lane count and types</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">B</span><span class="SANS_Futura_Std_Book_Oblique_11">d</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B or 16B</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">H</span><span class="SANS_Futura_Std_Book_Oblique_11">d</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4H or 8H</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">S</span><span class="SANS_Futura_Std_Book_Oblique_11">d</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">This instruction is useful for summing up the elements of an array. Unfortunately, the destination scalar type must be the same as the source lanes’ type, and any overflow is ignored. There is no instruction that will zero- or sign-extend the sum to a double-sized result. Therefore, it’s advisable to zero- or sign-extend the vector elements to the next larger size prior to executing <span class="SANS_TheSansMonoCd_W5Regular_11">addv</span> if overflow is possible. You can accomplish this by using the <span class="SANS_TheSansMonoCd_W5Regular_11">saddlp</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">uaddlp</span> instruction to add adjacent pairs and sign- or zero-extend (respectively), then use the <span class="SANS_TheSansMonoCd_W5Regular_11">addv</span> instruction to sum the resulting double-sized lanes.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">addvl</span> instruction is part of the ARM <i>scalable vector extensions (SVE)</i>, which are beyond the scope of this book. While you might expect <span class="SANS_TheSansMonoCd_W5Regular_11">addvl</span> to be a long version of the <span class="SANS_TheSansMonoCd_W5Regular_11">addv</span> instruction, it actually does something completely different. See the ARM SVE documentation for more details.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec40">&#13;
&#13;
<h5 class="H3" id="sec40"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.1.5 Scalar Saturating and Scalar Pairwise Addition</span></h5>&#13;
<p class="TNI1">The Neon instruction set also provides a couple of saturating scalar addition instructions</p>&#13;
<pre id="pre-884"><code>sqadd  <var>Rd</var>, <var>Rs</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>, <var>Rs</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">2</span>&#13;
uqadd  <var>Rd</var>, <var>Rs</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>, <var>Rs</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">2</span></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">R</span> represents one of the scalar register names B, H, S, or D. These instructions operate on the 8-, 16-, 32-, or 64-bit signed or unsigned integer <span role="doc-pagebreak" epub:type="pagebreak" id="pg_668" aria-label="668"/>values found in the LO bits of the specified V register (see <a href="chapter11.xhtml#fig11-2">Figure 11-2</a> for the correspondence between the V<i>n</i>, B<i>n</i>, H<i>n</i>, S<i>n</i>, and D<i>n</i> registers). These instructions do the same thing as their vector counterparts, except, of course, they operate only on a scalar value rather than doing a lane-by-lane vector operation.</p>&#13;
<p class="TX">The following are the scalar variants of the <span class="SANS_TheSansMonoCd_W5Regular_11">addp</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">faddp</span> instructions:</p>&#13;
<pre id="pre-885"><code>addp   D<var>d</var>, V<var>s</var>.2D&#13;
faddp  S<var>d</var>, V<var>s</var>.2S&#13;
faddp  D<var>d</var>, V<var>s</var>.2D</code></pre>&#13;
<p class="Continued1">Note the limited lane count and type support of these instructions.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">addp</span> instruction ignores (discards) any overflow from the addition of the two dword elements from the source vector. The <span class="SANS_TheSansMonoCd_W5Regular_11">addpl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">addpl2</span> instructions have no scalar versions. Use the actual <span class="SANS_TheSansMonoCd_W5Regular_11">addpl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">addpl2</span> instructions (with a second vector containing 0s) if you need an extended-precision version of this instruction.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec41">&#13;
&#13;
<h4 class="H2" id="sec41"><span id="h2-202"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.2 Subtraction</span></h4>&#13;
<p class="TNI1">While there aren’t quite as many Neon instructions for subtraction as there are for addition, most of the addition instructions have a subtraction complement. <a href="chapter11.xhtml#tab11-11">Table 11-11</a> provides the syntax for the various vector subtraction instructions and associated data types; these instructions generally compute <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> = <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <i>–</i> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> (exceptions as noted), where <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> = destination, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> = left operand, and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> = right operand.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_669" aria-label="669"/>&#13;
&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-11"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-11:</span></span> <span class="SANS_Futura_Std_Book_11">Neon Subtraction Instructions</span></p>&#13;
</caption>&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Instruction mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sub</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sub V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane integer difference</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fsub</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fsub V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane floating-point difference</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqsub</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uqsub V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned integer subtraction with saturation</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqsub</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqsub V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed integer subtraction with saturation</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned long integer subtraction</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed long integer subtraction</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned long integer subtraction of the HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed long integer subtraction of the HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubw</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubw V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned wide integer subtraction</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubw</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubw V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed wide integer subtraction</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubw2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">usubw2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned wide integer subtraction involving the upper half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubw2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">ssubw2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed wide integer subtraction involving the upper half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">subhn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">subhn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane subtraction with narrowing</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">rsubhn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">rsubhn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane subtraction with rounding and narrowing</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">subhn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">subhn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane subtraction with narrowing (uses HO bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">rsubhn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">rsubhn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane subtraction with rounding and narrowing (uses HO bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uhsub</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uhsub V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane unsigned subtraction with halving</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">shsub</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">shsub V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Computes lane-by-lane signed subtraction with halving</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The behavior of these instructions is very similar to their addition counterparts, except, of course, that they subtract the values in the lanes rather than adding them. See the previous section for more details.</p>&#13;
<p class="TX">There is also a saturating scalar subtraction instruction:</p>&#13;
<pre id="pre-886"><code>sqsub  R<var>d</var>, R<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>, R<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">2</span>&#13;
uqsub  R<var>d</var>, R<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">1</span>, R<var>s</var><span class="TheSansMonoCd_W5Regular_Italic_SUB_11">2</span></code></pre>&#13;
<p class="TX">That subtracts the two source scalar registers (B<i>n</i>, H<i>n</i>, S<i>n</i>, or D<i>n</i>), producing a scalar result.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec42">&#13;
&#13;
<h4 class="H2" id="sec42"><span id="h2-203"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.3 Absolute Difference</span></h4>&#13;
<p class="TNI1">In addition to the normal subtraction instructions, the Neon instruction set includes several instructions that compute the difference of the values in corresponding lanes and then compute the absolute value of this difference. These instructions are handy for computing distances and other vector (as in physics) calculations.</p>&#13;
<p class="TX"><a href="chapter11.xhtml#tab11-12">Table 11-12</a> lists the available absolute difference instructions. In the Syntax column, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> = destination, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> = left operand, and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> = right operand. Each instruction generally computes <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> = <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span>(<span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <i>–</i> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>), unless otherwise noted.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_670" aria-label="670"/>&#13;
&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-12"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-12:</span></span> <span class="SANS_Futura_Std_Book_11">Neon Absolute Difference Instructions</span></p>&#13;
</caption>&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Instruction mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabd</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector unsigned absolute difference; lanes contain unsigned values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector signed absolute difference; lanes contain signed values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaba</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uaba V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector unsigned absolute difference and accumulate;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">), where lanes contain unsigned values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saba</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">saba V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector signed absolute difference and accumulate;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">), where lanes contain signed values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabdl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabdl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector unsigned absolute difference long; lanes contain unsigned values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabdl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabdl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector signed absolute difference long; lanes contain signed values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector unsigned absolute difference long and accumulate;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">), where lanes contain unsigned values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector signed absolute difference long and accumulate;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">), where lanes contain signed values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabdl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabdl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector unsigned absolute difference long; lanes contain unsigned values. Uses HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabdl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabdl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector signed absolute difference long; lanes contain signed values. Uses HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uabal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector unsigned absolute difference long and accumulate;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">), where lanes contain unsigned values. Uses HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sabal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector signed absolute difference long and accumulate;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">), where lanes contain signed values. Uses HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fabd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fabd V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Vector floating-point absolute difference; lanes contain floating-point values.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fabd</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fabd S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">, S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Scalar single-precision floating-point absolute difference;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fabd</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fabd D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">, D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Scalar double-precision floating-point absolute difference;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">).</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><a href="chapter11.xhtml#tab11-13">Table 11-13</a> lists the legal types for the absolute difference instructions.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-13"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-13:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types for Absolute Difference Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Legal types</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B, 4H, 8H, 2S, or 4S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/8B, 4S/4H, or 2D/2S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/16B, 4S/8H, or 2D/4S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2S, 4S, or 2D</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">uabd</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sabd</span> instructions compute the difference of each lane, take the absolute value of the difference, and store the result into the destination lane. Although the two instructions operate on unsigned and <span role="doc-pagebreak" epub:type="pagebreak" id="pg_671" aria-label="671"/>signed source operands (respectively), the result is always an unsigned value. Effectively, these are just variants of the <span class="SANS_TheSansMonoCd_W5Regular_11">sub</span> instruction that take the absolute value of the result. As long as you treat the result as an unsigned number (particularly in the case of the <span class="SANS_TheSansMonoCd_W5Regular_11">sabd</span> instruction), these instructions will not produce an overflow (underflow).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">uaba</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">saba</span> instructions add the absolute value of the difference to the corresponding lane in the destination register. If an overflow occurs (on the addition), these instructions store the LO bits (the lane size) into the corresponding destination lane. For signed operations, if <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> contains the most negative value (for example, 0x80 for a byte) and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> contains 0, overflow occurs and the instruction winds up adding that most negative value to the destination lane.</p>&#13;
<p class="TX">The suffix-<span class="SANS_TheSansMonoCd_W5Regular_11">l</span> and suffix-<span class="SANS_TheSansMonoCd_W5Regular_11">l2</span> variants of these instructions compute a long calculation. The <span class="SANS_TheSansMonoCd_W5Regular_11">uabdl</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sabdl</span> instructions first zero- or sign-extend (respectively) the lane values to twice the lanes’ size, then compute the absolute value of the difference and store the result into the corresponding double-sized lane. The <span class="SANS_TheSansMonoCd_W5Regular_11">uabdl2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sabdl2</span> instructions do the same thing but grab the lane data from the HO 64 bits of the source operands (refer back to <a href="chapter11.xhtml#fig11-21">Figures 11-21</a> and <a href="chapter11.xhtml#fig11-22">11-22</a> and substitute the appropriate instruction to see how this works).</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">fabd</span> instruction computes the absolute difference of two floating-point values. With vector register operands, it processes two double-precision or four single-precision floating-point values at a time. This instruction also supports scalar operations (single- or double-precision) by specifying the D<i>n</i> or S<i>n</i> registers as operands. Unfortunately, there is no floating-point absolute difference and accumulate instruction. You can simulate this instruction by following an <span class="SANS_TheSansMonoCd_W5Regular_11">fabd</span> instruction with an <span class="SANS_TheSansMonoCd_W5Regular_11">fadd</span> instruction (using a spare vector register to hold the temporary result from <span class="SANS_TheSansMonoCd_W5Regular_11">fabd</span>).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec43">&#13;
&#13;
<h4 class="H2" id="sec43"><span id="h2-204"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.4 Vector Multiplication</span></h4>&#13;
<p class="TNI1">The Neon instruction set includes several instructions that compute the product of corresponding lanes in the vector register (both integer and floating-point products). The standard vector multiply instructions appear in <a href="chapter11.xhtml#tab11-14">Table 11-14</a>. Note that <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> is the left source operand and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> is the right source operand.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_672" aria-label="672"/>&#13;
&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-14"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-14:</span></span> <span class="SANS_Futura_Std_Book_11">Neon Vector Multiply Instructions</span></p>&#13;
</caption>&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mul</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mul V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiplication:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Ignores overflow, keeps LO bits of result (lane by lane).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mla</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mla V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply and accumulate:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Ignores overflow, keeps LO bits of result (lane by lane).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mls</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mls V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply and subtract:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">−</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Ignores overflow, keeps LO bits of result (lane by lane).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed extended multiplication:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies LO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and stores extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_673" aria-label="673"/><span class="SANS_TheSansMonoCd_W5Regular_11">umull</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned extended multiplication:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies LO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and stores extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed extended multiplication:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and stores extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned extended multiplication:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and stores extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed extended multiply and accumulate:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies LO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and adds extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned extended multiply and accumulate:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies LO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and adds extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed extended multiply and accumulate:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and adds extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned extended multiply and accumulate:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and adds extended-precision result in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed extended multiply and subtract:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies LO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and subtracts this from the extended-precision value in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned extended multiply and subtract:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies LO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and subtracts this from the extended-precision value in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed extended multiply and subtract:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and subtracts this from the extended-precision value in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned extended multiply and subtract:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies HO half of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">and subtracts this from the extended-precision value in the lanes of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(double lane size, lane-by-lane result).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmul</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmul V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point multiply:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies the floating-point values in the</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">lanes and stores the product into the corresponding</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">lanes (lane by lane).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmulx</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmulx V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point multiply:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">. Multiplies the floating-point values in the</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">lanes and stores the product into the corresponding</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">lanes (lane by lane). This variant handles the case where one source operand is 0 and the other is ±∞, producing the value ±2 (–2 if –∞, +2 otherwise).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmla</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmla V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point multiply and accumulate:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">(lane by lane).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmls</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmls V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point multiply and subtract:</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> <span class="SANS_Futura_Std_Book_11">(lane by lane).</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><a href="chapter11.xhtml#tab11-15">Table 11-15</a> lists the legal types for the instructions appearing in <a href="chapter11.xhtml#tab11-14">Table 11-14</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-15"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-15:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types for Vector Multiply Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Types</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Notes</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 16B, 4H, 8H, 2S, or 4S</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8B, 4S, and 2S operate only on LO 64 bits.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/8B, 4S/4H, or 2D/2S</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span> <span class="SANS_Futura_Std_Book_11">lanes are taken from the LO 64 bits.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/16B, 4S/8H, or 2D/4S</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span> <span class="SANS_Futura_Std_Book_11">lanes are taken from the HO 64 bits.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2S, 4S, or 2D</span></p></td>&#13;
<td class="TBL"/>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">There are also <span class="SANS_TheSansMonoCd_W5Regular_11">pmul</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">pmull</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">pmull2</span> (polynomial multiplication) instructions. However, polynomial multiplication isn’t a traditional multiply operation, and a discussion of this is beyond the scope of this book. See the Arm documentation for more details on these instructions.</p>&#13;
<section epub:type="division" aria-labelledby="sec44">&#13;
&#13;
<h5 class="H3" id="sec44"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.4.1 Vector Saturating Multiplication and Double</span></h5>&#13;
<p class="TNI1">The vector saturating multiplication and double instructions build on the standard multiply, multiply and accumulate, and multiply and subtract instructions to produce an extended precision (long) result that doubles the product and saturates the result. The instructions in this set appear in <a href="chapter11.xhtml#tab11-16">Table 11-16</a> and compute <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> = saturate({<span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> ±}(<span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> × <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>) × 2), where <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> is the destination operand, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> is the left operand, and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> is the right operand; {<span class="SANS_TheSansMonoCd_W5Regular_11">Vd</span> ±} indicates that <span class="SANS_TheSansMonoCd_W5Regular_11">Vd</span> ± is an optional source operand.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_674" aria-label="674"/>&#13;
&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-16"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-16:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Multiply and Double with Saturation Instructions</span></p>&#13;
</caption>&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">= (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (lane by lane)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+ (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (lane by lane)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">− (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (lane by lane)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">= (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (lane by lane, HO 64 bits of source)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+ (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (lane by lane, HO 64 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">– (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (lane by lane, HO 64 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">= (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">lanes ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] scalar)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+ (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">lanes ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] scalar)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">– (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">lanes ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] scalar)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmull2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">= (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">lanes ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] scalar, HO 64 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+ (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">lanes ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] scalar, HO 64 bits)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl2</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmlsl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">– (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) × 2 (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">lanes ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] scalar, HO 64 bits)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The legal types and lane counts appear in <a href="chapter11.xhtml#tab11-17">Table 11-17</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-17"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-17:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types and Lane Counts for Vector Multiply and Double with Saturation</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Types and lane counts</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/4H, or 2D/2S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/8H, or 2D/4S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/4H/H, or 2D/2S/S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/8H/H, or 2D/4S/S</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">These instructions all sign-extend their source operands to twice their size and multiply them to produce a product. They then multiply this product by 2. The standard multiply variants saturate and store this product into the corresponding destination lane. The multiply and accumulate variants add the product (multiplied by 2) to the destination and saturate the result. The multiply and subtract variants subtract the product (multiplied by 2) from the destination and saturate the result.</p>&#13;
<p class="TX">The instructions without a <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> suffix extract their lanes from the LO 64 bits of the first source register, while those with a <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> suffix extract their lanes from the HO 64 bits of the second source register.</p>&#13;
<p class="TX">The last six instructions in <a href="chapter11.xhtml#tab11-16">Table 11-16</a> multiply the lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> by a scalar value selected from one of the lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> (selected by the [<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span>] index operator). Here, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span> must be an appropriate value for the source type (0 to 7 for bytes, 0 to 3 for half words, or 0 to 1 for words). For the last six forms, if <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span> is H, then the <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> register number (<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>) must be in the range 0 to 15.</p>&#13;
<p class="TX">A couple of “short” versions of the <span class="SANS_TheSansMonoCd_W5Regular_11">sqdmul*</span> instructions don’t double the type size in the destination register: <span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh</span>. These instructions also multiply their source operands, double the result, and saturate it. However, they store only the HO 64 bits of the result into the destination lane (with saturation and possible rounding). <a href="chapter11.xhtml#tab11-18">Table 11-18</a> lists these instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_675" aria-label="675"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-18"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-18:</span></span> <span class="SANS_Futura_Std_Book_11">Saturating Multiply and Double Instructions, HO Bits</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Lane-by-lane multiply, double, saturate, and keep HO half of product.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Lane-by-lane multiply, double, round, saturate, and keep HO half of product.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply the lanes in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by the scalar selected by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">Vr[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]; double the result, saturate, and keep the HO half of the product.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply the lanes in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by the scalar selected by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">Vr[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]; double the result, round, saturate, and keep the HO half of the product.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Scalar version of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">sqdmulh</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Scalar version of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">sqrdmulh</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In this table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> is 4H, 8H, 2S, or 4S. For the 4H and 2S types, the instruction works only with the LO 64 bits of the registers; the 8H and 4S types use all 128 bits.</p>&#13;
<p class="TX">The type specification <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span>/<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span>/<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span> is 4H/4H/H, 8H/8H/H, 2S/2S/S, or 4S/S; the 4H and 2S types work with the LO 64 bits of the registers, and the 8H and 4S types work on all 128 bits of the registers. If the type is H, <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>’s register number must be in the range 0 to 15.</p>&#13;
<p class="TX">If the [<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span>] index appears after <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><i>.</i><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span>, the instruction multiplies the lanes in <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> by the scalar value extracted from lane <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span> of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>, which must be an appropriate value for the source type (0 to 7 for bytes, 0 to 3 for half words, or 0 to 1 for words).</p>&#13;
<p class="TX">These instructions have two scalar variants. <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">R</span> (in <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span>) must be H or S. For example</p>&#13;
<pre id="pre-887"><code>sqdmulh h0, h1, h2</code></pre>&#13;
<p class="Continued1">computes H0 = saturate(H1 × H2 × 2).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec45">&#13;
&#13;
<h5 class="H3" id="sec45"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.4.2 Vector Multiplication by a Scalar Element</span></h5>&#13;
<p class="TNI1">The Neon instruction set provides several instructions that multiply all the elements of a vector by a single scalar value, as listed in <a href="chapter11.xhtml#tab11-19">Table 11-19</a>.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_676" aria-label="676"/>&#13;
&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-19"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-19:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Multiply by Scalar Instructions</span></p>&#13;
</caption>&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mul</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mul V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply integer vector element by scalar value. Multiply each lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] (scalar value) and store the product into the corresponding lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(that is, for each lane</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] =</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mla</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mla V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply vector elements by a scalar and accumulate. For each lane</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] =</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] +</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">].</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mls</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">mls V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Multiply vector elements by a scalar and subtract. For each Iane</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] = –</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] –</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">].</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed vector multiply by scalar, long. Sign-extend the (LO) lanes in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">to twice their size, multiply by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">], and store the result into the double-sized lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">. Uses only the LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed vector multiply by scalar and accumulate, long. Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">smull</span><span class="SANS_Futura_Std_Book_11">, but sums the product into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed vector multiply by scalar and subtract, long. Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">smull</span><span class="SANS_Futura_Std_Book_11">, but subtracts the product from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smull2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed vector multiply by scalar, long. Sign-extend the (HO) lanes in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">to twice their size, multiply by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">], and store the result into the double-sized lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">. Uses only the HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed vector multiply by scalar and accumulate, long (HO source). Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">smull2</span><span class="SANS_Futura_Std_Book_11">, but sums the product into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_677" aria-label="677"/><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smlsl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed vector multiply by scalar and subtract, long (HO source). Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">smull2</span><span class="SANS_Futura_Std_Book_11">, but subtracts the product from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned vector multiply by scalar, long. Zero-extend the (LO) lanes in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">to twice their size, multiply by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">], and store the result into the double-sized lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">. Uses only the LO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned vector multiply by scalar and accumulate, long. Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">umull</span><span class="SANS_Futura_Std_Book_11">, but sums the product into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned vector multiply by scalar and subtract, long. Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">umull</span><span class="SANS_Futura_Std_Book_11">, but subtracts the product from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umull2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned vector multiply by scalar, long. Zero-extend the (HO) lanes in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">to twice their size, multiply by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">], and store the result into the double-sized lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">. Uses only the HO 64 bits of</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlal2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned vector multiply by scalar and accumulate, long (HO source). Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">umull2</span><span class="SANS_Futura_Std_Book_11">, but sums the product into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umlsl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned vector multiply by scalar and subtract, long (HO source). Similar to</span> <span class="SANS_TheSansMonoCd_W5Regular_11">umull2</span><span class="SANS_Futura_Std_Book_11">, but subtracts the product from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">rather than just storing it into</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmul</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmul V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t11</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point vector multiply by scalar. Multiply each lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] (scalar value) and store the product into the corresponding lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(that is, for each lane</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] =</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmulx</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmulx V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t11</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Like</span> <span class="SANS_TheSansMonoCd_W5Regular_11">fmul</span><span class="SANS_Futura_Std_Book_11">, except it’s a special variant that handles the case where one source operand is 0 and the other is ±∞. This produces the value ±2 (–2 if –∞, +2 otherwise).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmla</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmla V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t11</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point vector multiply by scalar and accumulate. Multiply each lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] (scalar value) and add the product into the corresponding lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(that is, for each lane</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] =</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] +</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmls</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmls V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t11</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point vector multiply by scalar and subtract. Multiply each lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">by</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">] (scalar value) and subtract the product from the corresponding lane in</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">(that is, for each lane</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] =</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] –</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">i</span><span class="SANS_Futura_Std_Book_11">] ×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]).</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><a href="chapter11.xhtml#tab11-20">Table 11-20</a> lists the legal types and lane counts for the instructions in <a href="chapter11.xhtml#tab11-19">Table 11-19</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-20"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-20:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types and Lane Counts for Vector Multiply by Scalar</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Legal types and lane counts</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4H/H, 8H/H, 2S/S, or 4S/S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/4H/H or 2D/2S/S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/8H/H, or 2D/4S/S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t9</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t10</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t11</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">2S/2S/S, 4S/S, or 2D/D</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-26">Figure 11-26</a> shows the basic operation of the <span class="SANS_TheSansMonoCd_W5Regular_11">mul</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">mla</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">mls</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">fmul</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">fmla</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">fmls</span> instructions.</p>&#13;
<figure class="IMG"><img class="img1" id="fig11-26" src="../images/Figure11-26.jpg" alt="" width="1553" height="508"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-26: Vector multiply by scalar operation</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-27">Figure 11-27</a> shows the basic operation of the <span class="SANS_TheSansMonoCd_W5Regular_11">smull</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">umull</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">smlal</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">umlal</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">smlsl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">umlsl</span> instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_678" aria-label="678"/>&#13;
<figure class="IMG"><img class="img1" id="fig11-27" src="../images/Figure11-27.jpg" alt="" width="1217" height="436"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-27: Vector multiply by scalar, long (LO bits)</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX"><a href="chapter11.xhtml#fig11-28">Figure 11-28</a> shows the basic operation of the <span class="SANS_TheSansMonoCd_W5Regular_11">smull2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">umull2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">smlal2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">umlal2</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">smlsl2</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">umlsl2</span> instructions.</p>&#13;
<figure class="IMG"><img class="img1" id="fig11-28" src="../images/Figure11-28.jpg" alt="" width="1219" height="426"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-28: Vector multiply by scalar, long (HO bits)</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">Because the product of two <i>n</i>-bit numbers fits into 2<i>n</i> bits, the <span class="SANS_TheSansMonoCd_W5Regular_11">smul</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">smul2</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">umul</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">umul2</span> instructions will not produce an overflow. However, keep in mind that an addition or subtraction after the multiplication could require an additional bit (2<i>n</i> + 1 bits). Should that occur, these instructions will ignore the overflow and keep the LO bits.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec46">&#13;
&#13;
<h5 class="H3" id="sec46"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.4.3 Scalar Multiplication by a Vector Element</span></h5>&#13;
<p class="TNI1">The Neon instruction set provides variants of the <span class="SANS_TheSansMonoCd_W5Regular_11">fmul</span> instructions that multiply a scalar register (<span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>) by a vector element (<span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>[<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span>]), storing the result back into a scalar register. <a href="chapter11.xhtml#tab11-21">Table 11-21</a> lists the syntax for these instructions, where <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> is the left source operand and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> is the right source operand.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-21"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-21:</span></span> <span class="SANS_Futura_Std_Book_11">Floating-Point Scalar Multiplication by Vector Element Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmul</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmul F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmulx</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmulx F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]. Handles case where</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">= 0.0 and</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> <span class="SANS_Futura_Std_Book_11">is ±∞, which produces ±2.0.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmla</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmla F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">+</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmls</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmls F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">–</span> <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">×</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_Futura_Std_Book_11">[</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span><span class="SANS_Futura_Std_Book_11">]</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_679" aria-label="679"/>Registers <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">F</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> are each one of the scalar floating-point registers (<span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>). Type <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> must be a matching size (S or D). If the type is single-precision (<span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>), then <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span> must be a register in the range V0 to V15.</p>&#13;
<p class="TX">These multiplication instructions have no integer equivalents.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec47">&#13;
&#13;
<h4 class="H2" id="sec47"><span id="h2-205"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.5 Vector Division</span></h4>&#13;
<p class="TNI1">The Neon instruction set does not provide any instructions to perform integer division on vectors. It does, however, provide an instruction to perform floating-point division on lanes in a pair of vectors</p>&#13;
<pre id="pre-888"><code>fdiv V<var>d.t</var>, V<var>l.t</var>, V<var>r.t</var>  // Computes V<var>d</var> = V<var>l</var> / V<var>r</var> (lane by lane)</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S, 4S, or 2D. (A division by zero produces NaN in the destination lane.)</p>&#13;
<p class="TX">Because floating-point division is rather slow, especially when iterated over all the lanes, the Neon instruction set includes a pair of instructions that will compute the reciprocal of a floating-point value. Multiplication by a reciprocal is usually much faster than division. If you’re dividing by a constant, you can precompute the reciprocal value at assembly time and use that (no runtime cost). If the value is a variable that you cannot compute at assembly time, you can use the <span class="SANS_TheSansMonoCd_W5Regular_11">frecpe</span> instruction to <i>approximate</i> the reciprocals of all the lanes in a vector register</p>&#13;
<pre id="pre-889"><code>frecpe V<var>d.t</var>, V<var>s.t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S, 4S, or 2D (2S operates on the LO 64 bits of the registers).</p>&#13;
<p class="TX">There is a scalar version of <span class="SANS_TheSansMonoCd_W5Regular_11">frecpe</span></p>&#13;
<pre id="pre-890"><code>frecpe <var>Rd</var>, <var>Rs</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span> are either S<i>n</i> or D<i>n</i>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">frecpe</span> instruction produces a reciprocal approximation that is within 8 bits of the correct value—not great, but good enough for quick-and-dirty calculations. If you need better accuracy, use the <span class="SANS_TheSansMonoCd_W5Regular_11">frecps</span> instruction (same syntax except for the mnemonic) to compute another step in the Newton-Raphson reciprocal approximation algorithm, using code like the following:</p>&#13;
<pre id="pre-891"><code>// Compute V0.4S = V1.4S / V2.4S by computing the reciprocal&#13;
// of V2 and multiplying V1 by this reciprocal value:&#13;
&#13;
    frecpe  v3.4s, v2.4s         // Get first approximation.&#13;
    frecps  v0.4s, v1.4s, v3.4s  // *** Refinement step&#13;
    fmul    v3.4s, v3.4s, v0.4s  // *** Refinement step (cont.)&#13;
&#13;
// Repeat "Refinement step" as many times as desired here.&#13;
&#13;
    fmul    v0.4s, v1.4s, v3.4s  // Compute quotient.</code></pre>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_680" aria-label="680"/>The more times you repeat the refinement step, the more accurate your result will be. However, at some point, the cost of executing all these floating-point instructions will exceed the time consumed by a single <span class="SANS_TheSansMonoCd_W5Regular_11">fdiv</span> instruction, so take care because using <span class="SANS_TheSansMonoCd_W5Regular_11">frecps</span> has diminishing returns.</p>&#13;
<p class="TX">There is a <span class="SANS_TheSansMonoCd_W5Regular_11">urecpe</span> instruction for estimating fixed-point reciprocals, but fixed-point arithmetic is beyond this scope of this book. To learn more, see the ARM Architecture Reference Manual, linked in section 11.15, <span class="Xref">“For More Information,”</span> on <span class="Xref"><a href="chapter11.xhtml#pg_700">page 700</a></span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec48">&#13;
&#13;
<h4 class="H2" id="sec48"><span id="h2-206"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.6 Sign Operations</span></h4>&#13;
<p class="TNI1">The Neon instruction set includes four instructions that allow you to negate or take the absolute values of the lanes in a vector register</p>&#13;
<pre id="pre-892"><code>abs   V<var>d.t1</var>, V<var>s.t1</var>&#13;
neg   V<var>d.t1</var>, V<var>s.t1</var>&#13;
sqabs V<var>d.t1</var>, V<var>s.t1</var>&#13;
sqneg V<var>d.t1</var>, V<var>s.t1</var>&#13;
fabs  V<var>d.t2</var>, V<var>s.t2</var>&#13;
fneg  V<var>d.t2</var>, V<var>s.t2</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> represents the usual integer types (8B, 16B, 4H, 8H, 2S, 4S, or 2D) and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> represents the usual floating-point types (2S, 4S, and 2D). The 8B, 4H, and 2S types reference only the LO 64 bits of the vector register.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fabs</span> instructions compute the absolute values of each of the lanes in the source register, storing the result into the destination register. Obviously, <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span> works on (signed) integer values, while <span class="SANS_TheSansMonoCd_W5Regular_11">fabs</span> works on floating-point values.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">neg</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fneg</span> instruction negate (change the sign of) the source lanes, leaving the negated result in the corresponding destination lane. As expected, <span class="SANS_TheSansMonoCd_W5Regular_11">neg</span> works on signed integers, and <span class="SANS_TheSansMonoCd_W5Regular_11">fneg</span> works on floating-point values.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">sqabs</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sqneg</span> instructions are special saturating variants of the <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">neg</span> instructions that never overflow. The most negative value (for example, 0x80 for byte values) will overflow when you take its absolute value or negate it; in both cases, you wind up with the same value. The <span class="SANS_TheSansMonoCd_W5Regular_11">sqabs</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sqneg</span> instruction will produce the maximum positive value (for example, 0x7F for byte values) if you attempt to negate it or take its absolute value.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">neg</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">sqabs</span>, and <span class="SANS_TheSansMonoCd_W5Regular_11">sqneg</span> instructions also have scalar versions, as shown in <a href="chapter11.xhtml#tab11-22">Table 11-22</a>. For <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">neg</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span> can be only <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Dn</span>; for <span class="SANS_TheSansMonoCd_W5Regular_11">sqabs</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">sqneg</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span> are one of the scalar registers <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Bn</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Hn</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Sn</span>, or <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Dn</span>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-22"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-22:</span></span> <span class="SANS_Futura_Std_Book_11">Scalar Sign Operations</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">abs</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">abs</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">neg</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">neg</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= –</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqabs</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqabs</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">abs</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span><span class="SANS_Futura_Std_Book_11">), saturated to maximum signed value</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqneg</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sqneg</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= –</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span><span class="SANS_Futura_Std_Book_11">, saturated to signed range</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_681" aria-label="681"/>The instructions in <a href="chapter11.xhtml#tab11-22">Table 11-22</a> operate on the scalar value in the specified register.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec49">&#13;
&#13;
<h4 class="H2" id="sec49"><span id="h2-207"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.7.7 Minimum and Maximum</span></h4>&#13;
<p class="TNI1">The Neon instruction set provides several instructions that will select the minimum or maximum value from corresponding lanes in two vector registers and store that value into the corresponding lane of a destination register, as shown in <a href="chapter11.xhtml#tab11-23">Table 11-23</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-23"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-23:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Min and Max Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smin</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smin V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (signed integer values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smax</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smax V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (signed integer values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umin</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umin V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (unsigned integer values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umax</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umax V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (unsigned integer values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmin</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmin V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (floating-point values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmax</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmax V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (floating-point values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnm V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (floating-point values)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnm</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnm V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">) (floating-point values)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In this table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> must be 8B, 16B, 4H, 8H, 2S, or 4S. If <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> is 8B, 4H, or 2S, the instructions operate only on the lanes in the LO 64 bits of the vector registers; if it is 16B, 8H, or 4S, the instructions operate on all 128 bits of the vector registers.</p>&#13;
<p class="TX">The type <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> must be 2S, 4S, or 2D. If it is 2S, the instructions operate only on the LO 64 bits of the vector registers; otherwise, they operate on the entire 128 bits.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">fmin</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fmax</span> instructions return NaN if either (or both) of the corresponding source lanes contain a NaN. The <span class="SANS_TheSansMonoCd_W5Regular_11">fminnm</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnm</span> instructions, on the other hand, return the numeric value if one lane contains a valid number and the other contains a NaN. If both lanes contain a valid floating-point value, all four instructions behave the same and return the minimum or maximum value (as appropriate).</p>&#13;
<section epub:type="division" aria-labelledby="sec50">&#13;
&#13;
<h5 class="H3" id="sec50"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.7.1 Pairwise Minimum and Maximum</span></h5>&#13;
<p class="TNI1">The minimum and maximum instructions also have pairwise variants, as shown in <a href="chapter11.xhtml#tab11-24">Table 11-24</a>, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> are the same as for the lane-by- lane instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_682" aria-label="682"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-24"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-24:</span></span> <span class="SANS_Futura_Std_Book_11">Pairwise Minimum and Maximum Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Operates on</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sminp</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sminp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed integers</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smaxp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smaxp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed integers</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uminp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uminp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned integers</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umaxp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umaxp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned integers</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point values</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point values</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnmp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnmp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_min</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point values</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnmp</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnmp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">pairwise_max</span><span class="SANS_Futura_Std_Book_11">(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point values</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The pairwise topology is the same as for the <span class="SANS_TheSansMonoCd_W5Regular_11">addp</span> instruction (see <a href="chapter11.xhtml#fig11-29">Figure 11-29</a> for a <span class="SANS_TheSansMonoCd_W5Regular_11">uminp</span> example).</p>&#13;
<figure class="IMG"><img class="img1" id="fig11-29" src="../images/Figure11-29.jpg" alt="" width="1544" height="434"/>&#13;
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure 11-29: Pairwise minimum and maximum operations</span></p></figcaption>&#13;
</figure>&#13;
<p class="TX">There are also a set of pairwise-scalar floating-point minimum and maximum instructions, as shown in <a href="chapter11.xhtml#tab11-25">Table 11-25</a>, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>/<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> must be <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">2S</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">2D</span>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-25"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-25:</span></span> <span class="SANS_Futura_Std_Book_11">Pairwise-Scalar Floating-Point Minimum and Maximum Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxp</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxp</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= max(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnmp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnmp</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= max(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_Futura_Std_Book_11">) (choose number over NaN)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminp</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= min(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnmp</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnmp</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= min(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_Futura_Std_Book_11">) (choose number over NaN)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">These instructions have no integer versions.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec51">&#13;
&#13;
<h5 class="H3" id="sec51"><span class="SANS_Futura_Std_Bold_Condensed_B_11">11.7.7.2 Horizontal Minimum and Maximum</span></h5>&#13;
<p class="TNI1">The horizontal minimum and maximum instructions select the minimum or maximum value within a single vector, as shown in <a href="chapter11.xhtml#tab11-26">Table 11-26</a>.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_683" aria-label="683"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-26"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-26:</span></span> <span class="SANS_Futura_Std_Book_11">Horizontal (Across Vector) Minimum and Maximum Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sminv</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">sminv</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract minimum signed lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smaxv</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">smaxv</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract maximum signed lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uminv</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">uminv</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract minimum unsigned lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umaxv</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">umaxv</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract maximum unsigned lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminv</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminv S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract minimum real lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Sd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxv</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxv S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract maximum real lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnmv</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fminnmv S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract minimum real lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Sd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnmv</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fmaxnmv S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Extract maximum real lane value from</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span> <span class="SANS_Futura_Std_Book_11">and store into</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_Futura_Std_Book_11">.</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In this table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>/<span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> is B/8B, B/16B, H/4H, H/8H, or S/4S. If <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span> is 8B, or 4H, the instruction operates only on the lanes in the LO 64 bits of <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span>. For floating-point minimum and maximum, only single-precision operands are legal; <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span> must be 2S or 4S (operating on the LO 64 bits or the full 128 bits of the source register). As for the standard <span class="SANS_TheSansMonoCd_W5Regular_11">fmin</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fmax</span> instructions, the <span class="SANS_TheSansMonoCd_W5Regular_11">nm</span> variants differ insofar as they return the numeric value if one of the operands is NaN.</p>&#13;
</section>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec52">&#13;
&#13;
<h3 class="H1" id="sec52"><span id="h1-122"/><span class="SANS_Futura_Std_Bold_B_11">11.8 Floating-Point and Integer Conversions</span></h3>&#13;
<p class="TNI1">The Neon instruction set provides several instructions to convert between floating-point and integer (or fixed-point) formats. Section 6.9.4, <span class="Xref">“Floating-Point Conversion Instructions,”</span> on <span class="Xref"><a href="chapter6.xhtml#pg_343">page 343</a></span> provided examples of these conversion instructions when operating on scalar registers; the following subsections present the vector equivalents.</p>&#13;
<section epub:type="division" aria-labelledby="sec53">&#13;
&#13;
<h4 class="H2" id="sec53"><span id="h2-208"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.8.1 Floating-Point to Integer</span></h4>&#13;
<p class="TNI1">The Neon instruction set provides vector equivalents of the <span class="SANS_TheSansMonoCd_W5Regular_11">fcvt</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instructions that convert floating-point values to their integer equivalents, as shown in <a href="chapter11.xhtml#tab11-27">Table 11-27</a>.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_684" aria-label="684"/>&#13;
&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-27"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-27:</span></span> <span class="SANS_Futura_Std_Book_11">Floating-Point to Integer Conversion Instructions</span></p>&#13;
</caption>&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtns</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtns V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round to nearest signed integer. Exactly one-half rounds to nearest even integer.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtas</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtas V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round to nearest signed integer. Exactly one-half rounds away from zero.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtps</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtps V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward +∞ (signed integer).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtms</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtms V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward –∞ (signed integer).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtzs</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtzs V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward 0 (signed integer).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtnu</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtnu V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round to nearest unsigned integer. Exactly one-half rounds to nearest even integer.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtau</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtau V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round to nearest unsigned integer. Exactly one-half rounds away from 0.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtpu</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtpu V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward +∞ (unsigned integer).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtmu</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtmu V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward –∞ (unsigned integer).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtzu</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtzu V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward 0 (unsigned integer).</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In this table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S (which uses only the LO 64 bits of the vector registers), 4S, or 2D. The source operand is always assumed to contain floating-point values (single- or double-precision), and the destination lanes will receive signed or unsigned integer values (words or dwords). Note that when converting negative floating-point values to unsigned integers, the conversion saturates the conversion to 0.0.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtz</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instruction also has some fixed-point variants:</p>&#13;
<pre id="pre-893"><code>fcvtzs V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var>&#13;
fcvtzu V<var>d.t</var>, V<var>s.t</var>, #<var>imm</var></code></pre>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">imm</span> operand specifies the number of fractional bits to maintain in the fixed-point value (this must be 1 to 31 for single-precision or word types and 1 to 63 for double-precision or dword types). Because integer operations are somewhat faster than floating-point calculations, sometimes it is faster to convert operands to fixed-point, do a chain of calculations, then convert the result back to floating-point. However, this book doesn’t cover fixed-point arithmetic in depth, so I won’t discuss this technique any further. See section 11.15, <span class="Xref">“For More Information,”</span> on <span class="Xref"><a href="chapter11.xhtml#pg_700">page 700</a></span> for additional information.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec54">&#13;
&#13;
<h4 class="H2" id="sec54"><span id="h2-209"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.8.2 Integer to Floating-Point</span></h4>&#13;
<p class="TNI1">The <span class="SANS_TheSansMonoCd_W5Regular_11">ucvtf</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">scvtf</span> instructions convert 32- and 64-bit integers to single- and double-precision values, respectively. Their syntax is roughly the same as that of <span class="SANS_TheSansMonoCd_W5Regular_11">fcvt</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span>:</p>&#13;
<pre id="pre-894"><code>scvtf V<var>d.t</var>, V<var>s.t</var>&#13;
ucvtf V<var>d.t</var>, V<var>s.t</var></code></pre>&#13;
<p class="TX">As with <span class="SANS_TheSansMonoCd_W5Regular_11">fcvt</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> must be 2S, 4S, or 2D (2S converts only the LO 64 bits).</p>&#13;
<p class="TX">Because double-precision values have only a 56-bit mantissa and single-precision values have only a 24-bit mantissa, you cannot exactly represent certain 32- and 64-bit integers as single- or double-precision floating-point values. In those cases, the <span class="SANS_TheSansMonoCd_W5Regular_11">scvtf</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">ucvtf</span> instructions produce the closest approximation. However, keep in mind that executing <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span><span class="SANS_TheSansMonoCd_W5Regular_11">cvtf</span> followed by an <span class="SANS_TheSansMonoCd_W5Regular_11">fcvt</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instruction may not return the exact same integer.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec55">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_685" aria-label="685"/>&#13;
<h4 class="H2" id="sec55"><span id="h2-210"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.8.3 Conversion Between Floating-Point Formats</span></h4>&#13;
<p class="TNI1">The Neon instruction set provides three instructions that will convert a small floating-point format to a larger form, or a larger form to a smaller form. This is one of the few instructions in the ARM instruction set that supports half-precision (16-bit) floating-point numbers. <a href="chapter11.xhtml#tab11-28">Table 11-28</a> shows the available instructions.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-28"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-28:</span></span> <span class="SANS_Futura_Std_Book_11">Floating-Point Conversion Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane conversion</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtl</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtl V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Convert from a smaller size to the next larger size by using the LO 64 bits of the source register.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtl2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtl2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Convert from a smaller size to the next larger size by using the upper 64 bits of the source register (does not affect the LO bits of the destination register).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Convert from a larger size to a smaller size by using the LO 64 bits of the destination register.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn2</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Convert from a larger size to a smaller size by using the HO 64 bits of the destination register (does not affect the LO bits of the destination register).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtxn</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtxn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2S, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2D</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Like</span> <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn</span><span class="SANS_Futura_Std_Book_11">, except rounding is different (see text).</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtxn2</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcvtxn2 V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.4S, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.2D</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Like</span> <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn2</span><span class="SANS_Futura_Std_Book_11">, except rounding is different (see text).</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The legal types and lane counts for the instructions in <a href="chapter11.xhtml#tab11-28">Table 11-28</a> appear in <a href="chapter11.xhtml#tab11-29">Table 11-29</a>, where H = 16-bit half-precision floating-point, S = 32-bit single-precision floating-point, and D = 64-bit double-precision floating-point.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-29"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-29:</span></span> <span class="SANS_Futura_Std_Book_11">Legal Types and Lane Counts for Floating-Point Conversions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_TheSansMonoCd_W7Bold_Italic_11">t</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Types and lane counts</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t1</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t2</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/4H or 2D/2S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t3</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t4</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4S/8H or 2D/4S</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t5</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t6</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">4H/4S or 2S/2D</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t7</span><span class="SANS_Futura_Std_Book_11">/</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t8</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">8H/4S or 4S/2D</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">Conversion from a smaller size to a larger size always produces an exact result. Conversion from a larger size down to a smaller size may require rounding the result to fit in the smaller size (worst case, overflow or underflow will occur if the larger value cannot be represented at all in the smaller floating-point format).</p>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_686" aria-label="686"/>When rounding larger values to fit into a smaller format, the <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtn2</span> instructions use the standard IEEE-754 round-to-nearest-even algorithm. In some cases, this may not produce the best result. For example, it is generally better to round to the nearest odd when converting a half-precision value to a double-precision value (which requires two steps: convert half-precision to single-precision, then convert single-precision to double-precision). The <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtxn</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">fcvtxn2</span> instructions employ this non-IEEE rounding scheme to produce better results.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec56">&#13;
&#13;
<h4 class="H2" id="sec56"><span id="h2-211"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.8.4 Floating-Point Values Rounded to the Nearest Integral</span></h4>&#13;
<p class="TNI1">Certain algorithms require rounding a floating-point value to an integer but require the result to be maintained in the floating-point format. The <span class="SANS_TheSansMonoCd_W5Regular_11">frint</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instructions listed in <a href="chapter11.xhtml#tab11-30">Table 11-30</a> provide this capability.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-30"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-30:</span></span> <span class="SANS_Futura_Std_Book_11">Rounding a Floating-Point Value to an Integral Value</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane rounding operation</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintn</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintn V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round to nearest integer. Exactly one-half rounds to nearest even integer.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frinta</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frinta V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round to nearest integer. Exactly one-half rounds away from 0.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintp</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintp V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward +∞.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintm</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintm V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward –∞.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintz</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintz V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round toward 0.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frinti</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frinti V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round using FPCR rounding mode.</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintx</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frintx V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Round using FPCR rounding mode with exactness test.</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In this table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> must be 2S, 4S, or 2D. If it is 2S, these instructions use only the LO 64 bits of the registers.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">frintx</span> instruction generates a floating-point inexact result exception if the rounded result is not equal to the original source value. You won’t normally use this instruction unless you have an appropriate exception handler in place.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec57">&#13;
&#13;
<h3 class="H1" id="sec57"><span id="h1-123"/><span class="SANS_Futura_Std_Bold_B_11">11.9 Vector Square-Root Instructions</span></h3>&#13;
<p class="TNI1">The Neon instruction set provides two instructions for computing the square root of a floating-point value and computing (and refining) an estimate of the reciprocal of the square root of a floating-point value. <a href="chapter11.xhtml#tab11-31">Table 11-31</a> lists these instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_687" aria-label="687"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-31"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-31:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Square Root Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane operation</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fsqrt</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fsqrt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Compute square root of source and store into destination</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frsqrte</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frsqrte V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">First step of Newton-Raphson approximation of the reciprocal of the square root</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frsqrts</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">frsqrts V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">s1</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t, Vs2.t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Additional steps of the Newton-Raphson approximation</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In the table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> must be 2S, 4S, or 2D. If it’s 2S, these instructions operate on the lanes in the LO 64 bits of the vector registers.</p>&#13;
<p class="TX">These three instructions also have scalar versions</p>&#13;
<pre id="pre-895"><code>fsqrt   R<var>d</var>, R<var>s</var>&#13;
frsqrte R<var>d</var>, R<var>s</var>&#13;
frsqrts R<var>d</var>, R<var>s1, </var>R<var>s2</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rs</span> are one of the floating-point scalar registers <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>.</p>&#13;
<p class="TX">Note that the <span class="SANS_TheSansMonoCd_W5Regular_11">frsqrts</span> instruction multiplies corresponding floating-point values in the lanes of the two source registers, subtracts each of the products from 3.0, divides these results by 2.0, and places the results into the destination register.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec58">&#13;
&#13;
<h3 class="H1" id="sec58"><span id="h1-124"/><span class="SANS_Futura_Std_Bold_B_11">11.10 Vector Comparisons</span></h3>&#13;
<p class="TNI1">Vector comparisons are fundamentally different from normal (general-purpose register) comparisons. When comparing general-purpose registers (or even individual floating-point scalar values), the ARM CPU sets the condition codes based on the result of the comparison; the code following the comparison then tests those condition codes, using a conditional branch, for example. This scheme doesn’t work when comparing vector elements because the CPU always performs multiple comparisons in parallel. There’s only one set of condition codes, so the CPU cannot put the results of multiple comparisons into the condition codes, meaning vector comparisons require a different mechanism to make the comparison results available to the program.</p>&#13;
<p class="TX">Rather than a generic comparison that produces less than, greater than, or equal results simultaneously (in the condition codes), a vector comparison asks for a specific comparison, such as, “Are the elements of this vector greater than the elements of another vector?” The result is true or false for each lane-by-lane comparison. A vector comparison will store the true or false result into the corresponding lanes of a destination vector. Vector comparisons use all 0 bits in a lane to represent false and all 1 bits in a lane to represent true.</p>&#13;
<p class="TX">Neon has two general sets of vector comparison instructions: one for integer comparisons and another for floating-point comparisons. The following subsections discuss each of these forms.</p>&#13;
<section epub:type="division" aria-labelledby="sec59">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_688" aria-label="688"/>&#13;
<h4 class="H2" id="sec59"><span id="h2-212"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.10.1 Vector Integer Comparisons</span></h4>&#13;
<p class="TNI1"><a href="chapter11.xhtml#tab11-32">Table 11-32</a> lists the generic vector integer compare instructions, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 8B, 16B, 4H, 8H, 2S, 4S, or 2D. For the 8B, 4H, and 2S types, these instructions operate only on the LO 64 bits of the registers and clear the HO 64 bits of the destination register.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-32"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-32:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Integer Comparison Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane comparison</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed or unsigned comparison for equality</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhs</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhs V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned comparison for greater than or equal (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">≥</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhi</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhi V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned comparison for greater than (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">&gt;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for greater than or equal (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">≥</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for greater than (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">&gt;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">There is no <span class="SANS_TheSansMonoCd_W5Regular_11">cmne</span> instruction. You can invert all the bits in the destination register (using the <span class="SANS_TheSansMonoCd_W5Regular_11">not</span> instruction) if you need this comparison, or you can use 0 bits to imply true and 1 bits to imply false. Likewise, there are no <span class="SANS_TheSansMonoCd_W5Regular_11">cmls</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">cmlo</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">cmle</span>, or <span class="SANS_TheSansMonoCd_W5Regular_11">cmlt</span> instructions; you can derive these from <span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span>, <span class="SANS_TheSansMonoCd_W5Regular_11">cmhs</span>, or <span class="SANS_TheSansMonoCd_W5Regular_11">cmhi</span> by reversing the operands.</p>&#13;
<p class="TX">These instructions have scalar variants, as shown in <a href="chapter11.xhtml#tab11-33">Table 11-33</a>, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span> must be <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-33"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-33:</span></span> <span class="SANS_Futura_Std_Book_11">Scalar Integer Comparison Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Scalar register comparison</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed or unsigned comparison for equality</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhs</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhs</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned comparison for greater than or equal (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span> <span class="SANS_Futura_Std_Book_11">≥</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhi</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmhi</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Unsigned comparison for greater than (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span> <span class="SANS_Futura_Std_Book_11">&gt;</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for greater than or equal (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span> <span class="SANS_Futura_Std_Book_11">≥</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for greater than (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span> <span class="SANS_Futura_Std_Book_11">&gt;</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">A special set of vector comparison instructions exists to compare the lanes of a single vector against 0. This saves setting up a register to contain all 0s for this common case. The available instructions perform only signed comparisons (it doesn’t make much sense to compare unsigned values against 0). <a href="chapter11.xhtml#tab11-34">Table 11-34</a> lists these instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_689" aria-label="689"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-34"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-34:</span></span> <span class="SANS_Futura_Std_Book_11">Signed Vector Comparisons Against 0</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane comparison against 0</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for lanes equal to 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for lanes greater than or equal to 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for lanes greater than 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmle</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmle V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for lanes less than or equal to 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmlt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmlt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for lanes less than 0</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">The type <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> must be 8B, 16B, 4H, 8H, 2S, 4S, or 2D. For the 8B, 4H, and 2S types, these instructions operate only on the LO 64 bits of the registers and clear the HO 64 bits of the destination register. The only legal immediate constant is 0 with these instructions.</p>&#13;
<p class="TX"><a href="chapter11.xhtml#tab11-35">Table 11-35</a> lists the scalar versions of these instructions.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-35"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-35:</span></span> <span class="SANS_Futura_Std_Book_11">Scalar Vector Comparisons Against 0</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Scalar register comparison against 0</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmeq</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for register equal to 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmge</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for register greater than or equal to 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmgt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for register greater than 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmle</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmle</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for register less than or equal to 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmlt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">cmlt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Signed comparison for register less than 0</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">In this table, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span> must be <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec60">&#13;
&#13;
<h4 class="H2" id="sec60"><span id="h2-213"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.10.2 Vector Floating-Point Comparisons</span></h4>&#13;
<p class="TNI1">You can also compare floating-point values in the vector registers’ lanes. <a href="chapter11.xhtml#tab11-36">Table 11-36</a> lists the various <span class="SANS_TheSansMonoCd_W5Regular_11">fcm</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instructions available for this purpose, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S, 4S, or 2D. If <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S, these instructions use only the LO 64 bits of the registers.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-36"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-36:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Floating-Point Comparison Instructions</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane comparison</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for equality</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">≥</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> <span class="SANS_Futura_Std_Book_11">&gt;</span> <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_690" aria-label="690"/><a href="chapter11.xhtml#tab11-37">Table 11-37</a> lists variants of the <span class="SANS_TheSansMonoCd_W5Regular_11">fcm</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instructions that compare the lanes in a vector register against 0.0, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S, 4S, or 2D. If <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 2S, these instructions use only the LO 64 bits of the registers.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-37"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-37:</span></span> <span class="SANS_Futura_Std_Book_11">Vector Floating-Point Comparison Against 0.0</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Lane-by-lane comparison against 0.0</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register equal to 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register greater than or equal to 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register greater than 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmle</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmle V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register less than or equal to 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmlt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmlt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register less than 0.0</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">Note that the immediate constant is 0 (versus 0.0), even though this is a floating-point comparison. The only legal operand for this instruction is <span class="SANS_TheSansMonoCd_W5Regular_11">#0</span>.</p>&#13;
<p class="TX">As for the integer comparisons, the <span class="SANS_TheSansMonoCd_W5Regular_11">fcm</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instructions provide a set of scalar instructions that also store true (all 1 bits) or false (all 0 bits) into the destination register (in contrast to the <span class="SANS_TheSansMonoCd_W5Regular_11">fcmp</span> instructions that set the condition code flags). <a href="chapter11.xhtml#tab11-38">Table 11-38</a> lists the scalar versions of these instructions, where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span> must be <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span><i>.</i></p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-38"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-38:</span></span> <span class="SANS_Futura_Std_Book_11">Scalar Variants of the Vector Floating-Point Comparisons</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description Scalar register comparison (including against 0.0)</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for equality</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span> <span class="SANS_Futura_Std_Book_11">≥</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">=</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span> <span class="SANS_Futura_Std_Book_11">&gt;</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register equal to 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmge</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register greater than or equal to 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmgt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register greater than 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmle</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmle</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TB"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register less than or equal to 0.0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmlt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">fcmlt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">, #0</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison for register less than 0.0</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">Neon has a couple of additional floating-point comparisons: <span class="SANS_TheSansMonoCd_W5Regular_11">fac</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> (vector floating-point absolute value compare). These instructions compare the absolute values of corresponding lanes in the source vector register and set the destination register accordingly. <a href="chapter11.xhtml#tab11-39">Table 11-39</a> lists these instructions.</p>&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_691" aria-label="691"/>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-39"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-39:</span></span> <span class="SANS_Futura_Std_Book_11">Floating-Point Absolute-Value Comparisons</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facge</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facge V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">= abs(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">) ≥ abs(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">))</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facgt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facgt V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span><span class="SANS_TheSansMonoCd_W5Regular_11">, V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_TheSansMonoCd_W5Regular_11">.</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">d</span> <span class="SANS_Futura_Std_Book_11">= abs(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span><span class="SANS_Futura_Std_Book_11">) &gt; abs(</span><span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span><span class="SANS_Futura_Std_Book_11">))</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">There is no <span class="SANS_TheSansMonoCd_W5Regular_11">faceq</span> instruction, since there’s no need for one; just use <span class="SANS_TheSansMonoCd_W5Regular_11">fcmeq</span>.</p>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">fac</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">*</span> instructions also have scalar versions, listed in <a href="chapter11.xhtml#tab11-40">Table 11-40</a>.</p>&#13;
<table class="Basic-Table">&#13;
<caption><p class="TT" id="tab11-40"><span class="Heavy"><span class="SANS_Futura_Std_Heavy_11">Table 11-40:</span></span> <span class="SANS_Futura_Std_Book_11">Scalar Floating-Point Absolute-Value Comparisons</span></p>&#13;
</caption>&#13;
&#13;
<thead>&#13;
<tr>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Mnemonic</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Syntax</span></p></th>&#13;
<th class="TCH" scope="col"><p class="TableHeader"><span class="SANS_Futura_Std_Heavy_11">Description</span></p></th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facge</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facge</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TBF"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= abs(</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_Futura_Std_Book_11">) ≥ abs(</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">))</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facgt</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_TheSansMonoCd_W5Regular_11">facgt</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_TheSansMonoCd_W5Regular_11">,</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span></p></td>&#13;
<td class="TBL"><p class="TB1"><span class="SANS_Futura_Std_Book_11">Floating-point comparison (</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span> <span class="SANS_Futura_Std_Book_11">= abs(</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span><span class="SANS_Futura_Std_Book_11">) &gt; abs(</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span><span class="SANS_Futura_Std_Book_11">))</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p class="TX">Note that <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rd</span>, <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rl</span>, and <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">Rr</span> must be <span class="SANS_TheSansMonoCd_W5Regular_11">S</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span> or <span class="SANS_TheSansMonoCd_W5Regular_11">D</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">n</span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec61">&#13;
&#13;
<h4 class="H2" id="sec61"><span id="h2-214"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.10.3 Vector Bit Test Instructions</span></h4>&#13;
<p class="TNI1">The Neon instruction set provides a vector version of the <span class="SANS_TheSansMonoCd_W5Regular_11">tst</span> instruction, <span class="SANS_TheSansMonoCd_W5Regular_11">cmtst</span>, which has the following syntax</p>&#13;
<pre id="pre-896"><code>cmtst V<var>d.t</var>, V<var>l.t</var>, V<var>r.t</var></code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> can be 8B, 16B, 4H, 8H, 2S, 4S, or 2D. If <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">t</span> is 8B, 4H, or 2S, this instruction operates only on the LO 64 bits of the source registers and clears the HO 64 bits of the destination register.</p>&#13;
<p class="TX">This instruction does a lane-by-lane logical AND operation between <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">l</span> and <span class="SANS_TheSansMonoCd_W5Regular_11">V</span><span class="SANS_TheSansMonoCd_W5Regular_Italic_11">r</span>. If the result is nonzero, it stores all 1 bits into the corresponding destination lane. Otherwise, it stores all 0s into the destination lane.</p>&#13;
<p class="TX">This instruction also has a scalar version:</p>&#13;
<pre id="pre-897"><code>cmtst D<var>d, </var>D<var>l, </var>D<var>r</var></code></pre>&#13;
<p class="TX">This form supports only 64-bit register operands (D<i>n</i>).</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec62">&#13;
&#13;
<h4 class="H2" id="sec62"><span id="h2-215"/><span class="SANS_Futura_Std_Bold_Condensed_Oblique_11">11.10.4 Vector Comparison Results</span></h4>&#13;
<p class="TNI1">Throughout your programming experience, including with HLLs, you’ve probably become accustomed to using the result of comparisons (such as Boolean expressions) to divert control flow (such as with an <span class="SANS_TheSansMonoCd_W5Regular_11">if</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">then</span>/<span class="SANS_TheSansMonoCd_W5Regular_11">else</span> statement). Vector comparisons present a completely different paradigm because the lanes in a comparison could all produce different results. What’s the best way to deal with this?</p>&#13;
<p class="TX">First, consider the easy stuff: complex Boolean expressions involving ANDs, ORs, and other logical operators. Because the vector comparisons <span role="doc-pagebreak" epub:type="pagebreak" id="pg_692" aria-label="692"/>compute convenient results (all 1s or all 0s), it’s easy to compute something like this:</p>&#13;
<pre id="pre-898"><code>(V1 &gt; V2) AND (V3 &lt; V4)  // Assume unsigned 8H lanes.</code></pre>&#13;
<p class="TX">Consider the following code:</p>&#13;
<pre id="pre-899"><code>cmhi v0.4h, v1.4h, v2.4h&#13;
cmhi v5.4h, v4.4h, v3.4h  // Same as cmlo v5.4h, v3.4h, v4.4h&#13;
and  v0.8b, v0.8b, v5.8b  // (assuming cmlo existed)</code></pre>&#13;
<p class="Continued1">This leaves the result of the previous Boolean calculation (0x0000 or 0xFFFF) in the LO 64 bits of the V0 register (lanes 0 to 3; remember that the <span class="SANS_TheSansMonoCd_W5Regular_11">and</span> instruction allows only 8B and 16B types, but they produce the same result as 4H would if it were a legal type).</p>&#13;
<p class="TX">You can use similar instruction sequences for OR, NOT, and any of the other logical vector operations (see <a href="chapter11.xhtml#tab11-2">Table 11-2</a>). Such calculations will use complete Boolean evaluation.</p>&#13;
<blockquote>&#13;
<p class="Note"><span class="NoteHead"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></span></p>&#13;
</blockquote>&#13;
<p class="NOTE-TXT"><i>Short-circuit evaluation doesn’t make sense for vector operations; see section 7.6.3, “Complex</i> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">if</span> <i>Statements Using Complete Boolean Evaluation,” on <a href="chapter7.xhtml#pg_378">page 378</a> for more information on complete Boolean evaluation.</i></p>&#13;
<p class="TX">If you absolutely, positively must branch to some locations based on the result of all the vector comparisons, keep in mind that the number of branch locations increases exponentially with the number of lanes (specifically, its 2<i><sup>n</sup></i> different possibilities, where <i>n</i> is the number of lanes). For example, if you execute the following instruction</p>&#13;
<pre id="pre-900"><code>cmeq v0.4h, v1.4h, v2.4h</code></pre>&#13;
<p class="Continued1">then the LO 64 bits of V0 will contain four Boolean values, yielding 16 combinations of the four comparisons. It’s ugly, but you could create a jump table (see section 7.6.7.3, <span class="Xref">“Indirect Jump</span> <span class="SANS_TheSansMonoCd_W5Regular_11">switch</span> <span class="Xref">Implementation,”</span> on <span class="Xref"><a href="chapter7.xhtml#pg_391">page 391</a></span>) with 16 entries and then transfer control by using code like the following</p>&#13;
<pre id="pre-901"><code>ldr     q3, mask             // mask: .hword 0b1000, 0b100, 0b10, 0b1&#13;
cmeq    v0.4h, v1.4h, v2.4h&#13;
and     v0.8b, v0.8b, v3.8b  // Keep 1 bit of each lane.&#13;
addv    h0, v0.4h            // Merge the bits into H0.&#13;
umov    w0, v0.h[0]&#13;
adr     x1, JmpTbl&#13;
ldr     x0, [x1, x0, lsl #3]&#13;
add     x0, x0, x1&#13;
br      x0</code></pre>&#13;
<p class="Continued1">where <span class="SANS_TheSansMonoCd_W5Regular_11">mask</span> is</p>&#13;
<pre id="pre-902"><code>mask:   .dword  0x0008000400020001</code></pre>&#13;
<p class="Continued1"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_693" aria-label="693"/>and <span class="SANS_TheSansMonoCd_W5Regular_11">JmpTbl</span> is a 16-entry <span class="SANS_TheSansMonoCd_W5Regular_11">.dword</span> table with the offset to the labels to jump to, based on all the combinations of true and false for four lane comparisons. This code moves bit 0 of lane 0 into bit 0 of X0, bit 0 of lane 1 into bit 1 of X0, bit 0 of lane 2 into bit 2 of X0, and bit 0 of lane 3 into bit 3 of X0. This forms a 4-bit index (16 possible values) into <span class="SANS_TheSansMonoCd_W5Regular_11">JmpTbl</span>.</p>&#13;
<p class="TX">Theoretically, you could create a jump table with 16 entries and write code to transfer control, but this would be so ugly it’s not an option worth seriously considering.</p>&#13;
<p class="TX">Sometimes you don’t need to know the particular configuration of matches in a vector comparison, only whether any matches exist at all. For example, suppose you were looking for a 0 byte in a string of characters (such as when computing the length of a zero-terminating string). You could load 16 characters at a time from the string and search for a 0 byte by comparing all of them against 0:</p>&#13;
<pre id="pre-903"><code>cmeq  v0.16b, v1.16b, #0  // Assume V1 contains 16 chars.</code></pre>&#13;
<p class="TX">This instruction sets the particular lane in V0 to 0xFF, corresponding to any lane in V1 that contains a 0 byte. You can use the following sequence to check whether there were any 0 bytes at all:</p>&#13;
<pre id="pre-904"><code>cmeq v0.16b, v1.16b, #0  // Check for a 0 byte.&#13;
addv b0, v0.16b          // Sum comparison bytes.&#13;
umov w0, v0.b[0]         // Put sum where you can compare it.&#13;
cmp  w0, #0              // See if there were any 0 bytes.&#13;
beq  noZeroBytes         // No 0s, go fetch 16 more bytes.</code></pre>&#13;
<p class="TX">In the SIMD paradigm, an ideal solution would be to do calculations in parallel and use masks to disable certain calculations. For example, suppose you have a vector of 32-bit integers to which you would like to add another vector’s lanes, with the caveat that you don’t want to add anything if a particular lane contains a value greater than 16 bits (0xFFFF). Consider the following code:</p>&#13;
<pre id="pre-905"><code>// Add V1.S to V0.S, but don't add a value to a particular&#13;
// lane in V0 if its value exceeds 0xFFFF.&#13;
//&#13;
// Note: Assume V2 contains 0x0000FFFF0000ffff0000FFFF0000ffff.&#13;
&#13;
        // no cmls v3.4s, v0.4s, v2.4s, so use the following:&#13;
&#13;
        cmhi    v3.4s, v2.4s, v0.4s&#13;
&#13;
        and     v4.16b, v1.16b, v3.16b&#13;
        add     v0.4s, v0.4s, v4.4s</code></pre>&#13;
<p class="TX">The <span class="SANS_TheSansMonoCd_W5Regular_11">and</span> instruction sets dword lanes greater than 0xFFFF to 0 so that they will have no impact on the final lane sums.</p>&#13;
</section>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec63">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_694" aria-label="694"/>&#13;
<h3 class="H1" id="sec63"><span id="h1-125"/><span class="SANS_Futura_Std_Bold_B_11">11.11 A Sorting Example Using SIMD Code</span></h3>&#13;
<p class="TNI1">Sorting data is a common vector solution. Listing 11-1 demonstrates a simple sort of eight elements by using a vectorized bitonic sorting algorithm.</p>&#13;
<pre id="pre-906"><code>// Listing11-1.S&#13;
//&#13;
// Demonstrates a simple bitonic sort&#13;
// of eight elements, using vector instructions&#13;
&#13;
        #include    "aoaa.inc"&#13;
        .text&#13;
&#13;
        .pool&#13;
ttlStr: wastr  "Listing 11-1"&#13;
&#13;
// Format strings for printf:&#13;
&#13;
fmtPV:  wastr   " %016llx %016llx"&#13;
nl:     wastr   "\n"&#13;
&#13;
// Sample data to sort&#13;
// (eight unsigned 32-bit integers&#13;
// to be loaded into vector&#13;
// registers):&#13;
&#13;
qval1:  .word   8, 7, 6, 4&#13;
qval2:  .word   3, 2, 1, 0&#13;
&#13;
// Lookup tables for TBL instruction,&#13;
// used to move around integers&#13;
// within the vector registers&#13;
//&#13;
// TBL works with bytes; the following&#13;
// constants map 32-bit integers to&#13;
// a block of 4 bytes in the&#13;
// vector registers:&#13;
&#13;
_a = 0x03020100&#13;
_b = 0x07060504&#13;
_c = 0x0b0a0908&#13;
_d = 0x0f0e0d0c&#13;
&#13;
_e = 0x13121110&#13;
_f = 0x17161514&#13;
_g = 0x1b1a1918&#13;
_h = 0x1f1e1d1c&#13;
&#13;
_e1 = 0x03020100    // Special case&#13;
_f1 = 0x07060504    // for single-&#13;
_g1 = 0x0b0a0908    // register lists&#13;
_h1 = 0x0f0e0d0c&#13;
&#13;
lut1:   .word   _f1, _e1, _h1, _g1&#13;
lut2:   .word   _a, _f, _c, _h&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_695" aria-label="695"/>lut3:   .word   _b, _e, _d, _g&#13;
lut4:   .word   _h1, _g1, _f1, _e1&#13;
lut5:   .word   _a, _b, _g, _h&#13;
lut6:   .word   _c, _d, _f, _e&#13;
lut7:   .word   _a, _e, _b, _f&#13;
lut8:   .word   _c, _g, _d, _h&#13;
lut9:   .word   _a, _e, _b, _f&#13;
lut10:  .word   _c, _g, _d, _h&#13;
&#13;
// Usual function that returns&#13;
// a pointer to the name of this&#13;
// program in the X0 register:&#13;
&#13;
        proc    getTitle, public&#13;
        lea     x0, ttlStr&#13;
        ret&#13;
        endp    getTitle&#13;
&#13;
// printV&#13;
//&#13;
// Prints the two 128-bit values sitting&#13;
// on the top of the stack (prior to call)&#13;
// as hexadecimal values:&#13;
&#13;
        proc    printV&#13;
&#13;
        locals  p&#13;
        qword   p.v0&#13;
        qword   p.v1&#13;
        qword   p.v2&#13;
        qword   p.v3&#13;
        qword   p.v4&#13;
        byte    p.stk, 64&#13;
        endl    p&#13;
&#13;
        enter   p.size&#13;
&#13;
        // Preserve vector registers&#13;
        // (this program uses them):&#13;
&#13;
        str     q0, [fp, #p.v0]&#13;
        str     q1, [fp, #p.v1]&#13;
        str     q2, [fp, #p.v2]&#13;
        str     q3, [fp, #p.v3]&#13;
        str     q4, [fp, #p.v4]&#13;
&#13;
        // Print the first value on&#13;
        // the stack:&#13;
&#13;
        ldr     w1, [fp, #16]&#13;
        ldr     w2, [fp, #20]&#13;
        ldr     w3, [fp, #24]&#13;
        ldr     w4, [fp, #28]&#13;
        lea     x0, fmtPV&#13;
        mstr    x1, [sp]&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_696" aria-label="696"/>        mstr    x2, [sp, #8]&#13;
        mstr    x3, [sp, #16]&#13;
        mstr    x4, [sp, #24]&#13;
        bl      printf&#13;
&#13;
        // Print the second value on&#13;
        // the stack:&#13;
&#13;
        ldr     w1, [fp, #32]&#13;
        ldr     w2, [fp, #36]&#13;
        ldr     w3, [fp, #40]&#13;
        ldr     w4, [fp, #44]&#13;
        lea     x0, fmtPV&#13;
        mstr    x1, [sp]&#13;
        mstr    x2, [sp, #8]&#13;
        mstr    x3, [sp, #16]&#13;
        mstr    x4, [sp, #24]&#13;
        bl      printf&#13;
&#13;
        lea     x0, nl&#13;
        bl      printf&#13;
&#13;
        ldr     q0, [fp, #p.v0]&#13;
        ldr     q1, [fp, #p.v1]&#13;
        ldr     q2, [fp, #p.v2]&#13;
        ldr     q3, [fp, #p.v3]&#13;
        ldr     q4, [fp, #p.v4]&#13;
        leave&#13;
        endp    printV&#13;
&#13;
// Here's the main program:&#13;
&#13;
        proc    asmMain, public&#13;
&#13;
        // Reserve stack space for parameters:&#13;
&#13;
        locals  am&#13;
        byte    am.stk, 64&#13;
        endl    am&#13;
&#13;
        enter   am.size&#13;
&#13;
        // Load the values to sort&#13;
        // into V0 and V1:&#13;
&#13;
        ldr     q0, qval1&#13;
        ldr     q1, qval2&#13;
&#13;
        // Bitonic sort of eight&#13;
        // elements:&#13;
&#13;
        // Step 1:&#13;
&#13;
        umin    v2.4s, v0.4s, v1.4s&#13;
        umax    v3.4s, v0.4s, v1.4s&#13;
&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_697" aria-label="697"/>        // Step 2:&#13;
&#13;
        ldr     q4, lut1&#13;
        tbl     v3.16b, {v3.16b}, v4.16b&#13;
&#13;
        umin    v0.4s, v2.4s, v3.4s&#13;
        umax    v1.4s, v2.4s, v3.4s&#13;
        ldr     q4, lut2&#13;
        tbl     v2.16b, {v0.16b, v1.16b}, v4.16b&#13;
        ldr     q4, lut3&#13;
        tbl     v3.16b, {v0.16b, v1.16b}, v4.16b&#13;
&#13;
        // Step 3:&#13;
&#13;
        umin    v0.4s, v2.4s, v3.4s&#13;
        umax    v1.4s, v2.4s, v3.4s&#13;
&#13;
        // Step 4:&#13;
&#13;
        ldr     q4, lut4&#13;
        tbl     v1.16b, {v1.16b}, v4.16b&#13;
&#13;
        umin    v2.4s, v0.4s, v1.4s&#13;
        umax    v3.4s, v0.4s, v1.4s&#13;
&#13;
        ldr     q4, lut5&#13;
        tbl     v0.16b, {v2.16b, v3.16b}, v4.16b&#13;
        ldr     q4, lut6&#13;
        tbl     v1.16b, {v2.16b, v3.16b}, v4.16b&#13;
&#13;
        uminp   v2.4s, v0.4s, v1.4s&#13;
        umaxp   v3.4s, v0.4s, v1.4s&#13;
&#13;
        ldr     q4, lut7&#13;
        tbl     v0.16b, {v2.16b, v3.16b}, v4.16b&#13;
        ldr     q4, lut8&#13;
        tbl     v1.16b, {v2.16b, v3.16b}, v4.16b&#13;
&#13;
        umin    v2.4s, v0.4s, v1.4s&#13;
        umax    v3.4s, v0.4s, v1.4s&#13;
&#13;
        // Merge results:&#13;
&#13;
        ldr     q4, lut9&#13;
        tbl     v0.16b, {v2.16b, v3.16b}, v4.16b&#13;
        ldr     q4, lut10&#13;
        tbl     v1.16b, {v2.16b, v3.16b}, v4.16b&#13;
&#13;
        str     q0, [sp]&#13;
        str     q1, [sp, #16]&#13;
        bl      printV&#13;
&#13;
        leave                       // Return to caller.&#13;
        endp    asmMain</code></pre>&#13;
<p class="TX"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_698" aria-label="698"/>Here’s the <span class="SANS_TheSansMonoCd_W5Regular_11">build</span> command and the sample output for Listing 11-1:</p>&#13;
<pre id="pre-907"><code>% <span class="SANS_TheSansMonoCd_W7Bold_11">./build Listing11-1</span>&#13;
% <span class="SANS_TheSansMonoCd_W7Bold_11">./Listing11-1</span>&#13;
Calling Listing11-1:&#13;
00000000 00000001 00000002 00000003 00000004 00000006 00000007 00000008&#13;
Listing11-1 terminated</code></pre>&#13;
<p class="Continued1">As you can see, this code properly sorted the data.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec64">&#13;
&#13;
<h3 class="H1" id="sec64"><span id="h1-126"/><span class="SANS_Futura_Std_Bold_B_11">11.12 A Numeric-to-Hex-String Example Using SIMD Code</span></h3>&#13;
<p class="TNI1">Listing 11-2 is a Neon example of something you should be familiar with: <span class="Xref"><a href="chapter9.xhtml">Chapter 9</a></span>’s <span class="SANS_TheSansMonoCd_W5Regular_11">dtoStr</span> function that converts a dword into a hexadecimal string. It’s a practical example of converting existing code to SIMD.</p>&#13;
<pre id="pre-908"><code>// Listing11-2.S&#13;
&#13;
<var>Usual source file information at the beginning of the file,</var>&#13;
<var>deleted for brevity</var>&#13;
&#13;
// dtoStr&#13;
//&#13;
//  Converts the dword passed in X1 to 16&#13;
//  hexadecimal digits (stored into buffer pointed&#13;
//  at by X0; buffer must have at least 24 bytes&#13;
//  available)&#13;
&#13;
    .equ    convert0toA, 'A' - ('0' + 10)    // val + '0' to val + 'A'&#13;
    .equ    invert0ToA,  ~convert0toA &amp; 0xFF // Invert the bits for BIC.&#13;
&#13;
    proc    dtoStr&#13;
    stp     q0, q1, [sp, #-32]!     // Preserve registers.&#13;
&#13;
    rev     x1, x1                  // Reverse bytes (for output).&#13;
    mov     v0.d[0], x1             // Set V0 to the LO nibbles&#13;
    rev     x1, x1                  // and V1 to the HO nibbles,&#13;
    ushr    v1.8b, v0.8b, #4        // also, restore X1.&#13;
    bic     v0.4h, #0xf0&#13;
    bic     v0.4h, #0xf0, lsl #8&#13;
&#13;
    zip1    v0.16b, v1.16b, v0.16b  // Interleave the HO and LO nibbles.&#13;
&#13;
    orr     v0.8h, #0x30            // Convert binary to ASCII,&#13;
    orr     v0.8h, #0x30, lsl #8    // note only 0-9 will be correct.&#13;
&#13;
    movi    v1.16b, #'9'            // Determine which bytes&#13;
    cmgt    v1.16b, v0.16b, v1.16b  // should be A-F.&#13;
&#13;
    bic     v1.8h, #invert0ToA      // Update bytes that should be A-F.&#13;
    bic     v1.8h, #invert0ToA, lsl #8&#13;
    add     v0.16b, v0.16b, v1.16b&#13;
&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_699" aria-label="699"/>    str     q0, [x0]                // Output the string.&#13;
    strb    wzr, [x0, #16]&#13;
&#13;
    ldp     q0, q1, [sp], #32       // Restore registers.&#13;
    ret&#13;
    endp    dtoStr</code></pre>&#13;
<p class="TX">Here’s the <span class="SANS_TheSansMonoCd_W5Regular_11">build</span> command and the sample output for Listing 11-2:</p>&#13;
<pre id="pre-909"><code>% <span class="SANS_TheSansMonoCd_W7Bold_11">./build Listing11-2</span>&#13;
% <span class="SANS_TheSansMonoCd_W7Bold_11">./Listing11-2</span>&#13;
Calling Listing11-2:&#13;
Value(fedcba9876543210) = string(FEDCBA9876543210)&#13;
Listing11-2 terminated</code></pre>&#13;
<p class="TX">If you were to time this code, you’d find that it runs significantly faster than the scalar code in <span class="Xref"><a href="chapter9.xhtml">Chapter 9</a></span>.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec65">&#13;
&#13;
<h3 class="H1" id="sec65"><span id="h1-127"/><span class="SANS_Futura_Std_Bold_B_11">11.13 Use of SIMD Instructions in Real Programs</span></h3>&#13;
<p class="TNI1">If you’ve read through this chapter but aren’t sure how to apply SIMD instructions in real programs, don’t feel like you’re missing something. <i>SIMD</i> might as well stand for “<i>S</i>IMD <i>I</i>nstruction sets are <i>M</i>assively <i>D</i>ifficult to use.” Although ARM’s Neon instruction set is a bit more general-purpose than, say, Intel’s SSE/AVX extensions, SIMD instructions were created to accelerate the execution of very specific algorithms. I like to paraphrase a line from this book’s technical reviewer, Tony Tribelli, with respect to SIMD instructions’ applicability: “I look at a particular SIMD instruction and ask myself, ‘What benchmark was this instruction created for?’ ” That is, it often seems like SIMD instructions were added to the instruction set to make one benchmark program run faster and make the ARM CPU look better, though the instruction probably isn’t useful outside the context of that benchmark.</p>&#13;
<p class="TX">In many respects, this statement is dead on: many SIMD instructions were created to solve one particular problem, and their applicability beyond that solution is merely coincidental. If you can’t figure out how to use a given instruction, you probably haven’t yet discovered the problem it was originally created to address.</p>&#13;
<p class="TX">If nothing else, the vector registers’ lanes are a good place to store temporary values when you’re already using all the general-purpose registers. You can use the <span class="SANS_TheSansMonoCd_W5Regular_11">mov</span> instruction to copy data between a general-purpose register and a lane in a vector register; this is much faster than spilling the register to memory.</p>&#13;
<p class="TX">If you really want to use the Neon instruction set for high-performance computing, see section 11.15, <span class="Xref">“For More Information,”</span> on <span class="Xref">the next page</span>, or search “SIMD parallel algorithms” or “SIMD vector algorithms” on the internet.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec66">&#13;
<span role="doc-pagebreak" epub:type="pagebreak" id="pg_700" aria-label="700"/>&#13;
<h3 class="H1" id="sec66"><span id="h1-128"/><span class="SANS_Futura_Std_Bold_B_11">11.14 Moving On</span></h3>&#13;
<p class="TNI1">This lengthy chapter covered many instructions. It began with a brief history of SIMD instruction sets; covered the vector registers on the ARM; discussed SIMD data types, lanes, and scalar operations; and then presented the Neon instruction set. This chapter ended with a pair of short examples that demonstrated bitonic sorting and numeric-to-hexadecimal-string conversion using the vector registers. These constitute useful ways to use the SIMD instructions on the ARM. Although SIMD instructions aren’t often applicable in general programs, with a little thought you should be able to use them to speed up your code in certain situations.</p>&#13;
<p class="TX">A couple of the remaining chapters will employ SIMD instructions to improve performance. <span class="Xref"><a href="chapter12.xhtml">Chapter 12</a></span> uses Neon instructions to improve the performance of various bit operations, while <span class="Xref"><a href="chapter14.xhtml">Chapter 14</a></span> uses Neon instructions to implement fast memory move operations. You can apply what you’ve learned in this chapter to algorithms you’ve learned in previous chapters that could benefit from using SIMD instructions, such as the numeric-to-hex-string code. I’ll leave it to you to implement these changes.</p>&#13;
</section>&#13;
<section epub:type="division" aria-labelledby="sec67">&#13;
&#13;
<h3 class="H1" id="sec67"><span id="h1-129"/><span class="SANS_Futura_Std_Bold_B_11">11.15 For More Information</span></h3>&#13;
<ul class="ul">&#13;
<li class="BL">For more information on fixed-point arithmetic and other Neon instructions and data types, consult the ARM Architecture Reference Manual at <i><a href="https://developer.arm.com/documentation/ddi0487/latest">https://<wbr/>developer<wbr/>.arm<wbr/>.com<wbr/>/documentation<wbr/>/ddi0487<wbr/>/latest</a></i>.</li>&#13;
<li class="BL">For more on ARM scalable vector extensions (SVEs), see the documentation at <i><a href="https://developer.arm.com/documentation/102476/0001/SVE-architecture-fundamentals">https://<wbr/>developer<wbr/>.arm<wbr/>.com<wbr/>/documentation<wbr/>/102476<wbr/>/0001<wbr/>/SVE<wbr/>-architecture<wbr/>-fundamentals</a></i>.</li>&#13;
<li class="BL">ARM offers a guide on implementing fixed-point arithmetic on 32-bit CPUs at <i><a href="https://developer.arm.com/documentation/dai0033/a">https://<wbr/>developer<wbr/>.arm<wbr/>.com<wbr/>/documentation<wbr/>/dai0033<wbr/>/a</a></i>.</li>&#13;
<li class="BL">Those interested in vector sorting with ARM SVE can reference “A Fast Vectorized Sorting Implementation Based on the ARM Scalable Vector Extension (SVE)” by B<span class="listplain_accent">é</span>renger Bramas for one implementation: <i><a href="https://arxiv.org/pdf/2105.07782.pdf">https://<wbr/>arxiv<wbr/>.org<wbr/>/pdf<wbr/>/2105<wbr/>.07782<wbr/>.pdf</a></i>.</li>&#13;
<li class="BL">See the Vector Sorting Algorithms page of the CMSIS DSP Software Library for more on vector sorting with ARM: <i><a href="https://arm-software.github.io/CMSIS_5/DSP/html/group__Sorting.html">https://<wbr/>arm<wbr/>-software<wbr/>.github<wbr/>.io<wbr/>/CMSIS<wbr/>_5<wbr/>/DSP<wbr/>/html<wbr/>/group<wbr/>_<wbr/>_Sorting<wbr/>.html</a></i>.</li>&#13;
<li class="BL">The ARM documentation also provides more detail on vector sorting on Neon at <i><a href="https://developer.arm.com/documentation/den0018/a/NEON-Code-Examples-with-Optimization/Median-filter/Basic-principles-and-bitonic-sorting">https://<wbr/>developer<wbr/>.arm<wbr/>.com<wbr/>/documentation<wbr/>/den0018<wbr/>/a<wbr/>/NEON<wbr/>-Code<wbr/>-Examples<wbr/>-with<wbr/>-Optimization<wbr/>/Median<wbr/>-filter<wbr/>/Basic<wbr/>-principles<wbr/>-and<wbr/>-bitonic<wbr/>-sorting</a></i>.</li>&#13;
<li class="BL">“Fast and Robust Vectorized In-Place Sorting of Primitive Types” by Mark Blacher, Joachim Giesen, and Lars K<span class="listplain_accent">ü</span>hne at <i><a href="https://drops.dagstuhl.de/opus/volltexte/2021/13775/pdf/LIPIcs-SEA-2021-3.pdf">https://<wbr/>drops<wbr/>.dagstuhl<wbr/>.de<wbr/>/opus<wbr/>/volltexte<wbr/>/2021<wbr/>/13775<wbr/>/pdf<wbr/>/LIPIcs<wbr/>-SEA<wbr/>-2021<wbr/>-3<wbr/>.pdf</a></i> covers quick sorting with vector instructions (written for AVX2, but easily translatable to Neon) using the bitonic sorting algorithm.</li>&#13;
<li class="BL"><span role="doc-pagebreak" epub:type="pagebreak" id="pg_701" aria-label="701"/>See the master’s thesis “A Study of the Use of SIMD Instructions for Two Image Processing Algorithms” by Eric Welch at <i><a href="https://scholarworks.rit.edu/cgi/viewcontent.cgi?article=3686&amp;context=theses">https://<wbr/>scholarworks<wbr/>.rit<wbr/>.edu<wbr/>/cgi<wbr/>/viewcontent<wbr/>.cgi<wbr/>?article<wbr/>=3686&amp;context<wbr/>=theses</a></i> for a discussion of SIMD image processing algorithms.</li>&#13;
<li class="BL">Another master’s thesis on SIMD signal processing algorithms is “Performance Optimization of Signal Processing Algorithms for SIMD Architectures” by Sharan Yagneswar, which can be found at <i><a href="https://www.diva-portal.org/smash/get/diva2:1138490/FULLTEXT01.pdf">https://<wbr/>www<wbr/>.diva<wbr/>-portal<wbr/>.org<wbr/>/smash<wbr/>/get<wbr/>/diva2:1138490<wbr/>/FULLTEXT01<wbr/>.pdf</a></i>.</li>&#13;
</ul>&#13;
<aside class="box" aria-label="box-29">&#13;
<p class="BH" id="box-29"><span class="SANS_Dogma_OT_Bold_B_11">TEST YOURSELF</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  1.  What is a lane?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  2.  What is the difference between a scalar instruction and a vector instruction?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  3.  What instruction would you use to move the data from a 32-bit general-purpose integer register into the LO 32 bits of a vector register?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  4.  What instruction would you use to move the data from a 64-bit general-purpose integer register into the LO 64 bits of a vector register?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  5.  What instruction would you use to arbitrarily rearrange the bytes in a vector register?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  6.  What instruction would you use to take a byte, word, dword, or qword in a general-purpose register and insert it somewhere in a vector register?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  7.  If you want to shift the two qwords in a vector register</span> <span class="SANS_Futura_Std_Book_Oblique_11">n</span> <span class="SANS_Futura_Std_Book_11">bit positions to the left, what instruction would you use?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  8.  What is the difference between a vertical addition and a horizontal addition?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">  9.  How can you set all the bits in the V0 register to 0?</span></p>&#13;
<p class="BoxListNumber"><span class="SANS_Futura_Std_Book_11">10.  How can you set all the bits in the V0 register to 1?</span></p>&#13;
</aside>&#13;
</section>&#13;
</section>&#13;
</div>
</div>
</body></html>