<html><head></head><body><div class="chapter" title="Chapter&#xA0;14.&#xA0;Masks"><div class="titlepage"><div><div><h1 class="title"><a id="masks"/>Chapter 14. Masks</h1></div></div></div><p><a id="iddle1619" class="indexterm"/><a id="iddle1630" class="indexterm"/><a id="iddle2243" class="indexterm"/><a id="iddle3121" class="indexterm"/><a id="iddle3131" class="indexterm"/><a id="iddle3519" class="indexterm"/><a id="iddle3778" class="indexterm"/><a id="iddle3802" class="indexterm"/><a id="iddle3886" class="indexterm"/><a id="iddle4519" class="indexterm"/><a id="iddle4912" class="indexterm"/><a id="iddle4936" class="indexterm"/><a id="iddle5034" class="indexterm"/><a id="iddle5545" class="indexterm"/><a id="iddle5755" class="indexterm"/><a id="iddle6033" class="indexterm"/>A <span class="emphasis"><em>mask</em></span> is a grayscale image that is used to represent either a selection within an image (called a <span class="emphasis"><em>selection mask</em></span>) or the transparency of a layer (called a <span class="emphasis"><em>layer mask</em></span>).</p><p>You use a selection mask to save a particular selection. This way you can maintain a collection of selections that you’ve built, ready to use when you need them. In a selection mask, pixels that are completely selected in the image are represented as white, pixels that are not selected at all are represented as black, and pixels that are partially selected are represented as intermediate shades.</p><p>Although a selection mask is an independent object, a layer mask is part of a specific layer used to specify the transparency of the layer’s pixels. The pixels themselves don’t change—in other words, their RGB components remain intact. With layer masks, you can manipulate a layer’s transparency independent of its colors.</p><div class="figure"><a id="selection_made_with_the_select_by_color"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00963"/><img src="httpatomoreillycomsourcenostarchimages1455940.png.jpg" alt="A selection made with the Select by Color tool"/></div></div><p class="title">Figure 14-1. A selection made with the Select by Color tool</p></div><p>You can use all GIMP tools on a mask: drawing tools, transformation tools, and even selection tools. This makes doing very precise work on a mask possible—and creating a selection much more complex than what you saw in <a class="xref" href="ch13.html" title="Chapter 13. Selections">Chapter 13</a>.</p></div>
<div class="sect1" title="14.1 Selection Masks"><div class="titlepage"><div><div><h1 class="title"><a id="one4dot1_selection_masks"/>14.1 Selection Masks</h1></div></div></div><p><a class="xref" href="ch14.html#selection_made_with_the_select_by_color" title="Figure 14-1. A selection made with the Select by Color tool">Figure 14-1</a> shows a photograph where we made a selection with the Select by Color tool (<span class="inlinemediaobject"><a id="inline_id00403"/><img src="httpatomoreillycomsourcenostarchimages1453942.png.jpg" alt=""/></span>). In the tool options, we increased the Threshold value to 20.0 to select the entire sky. Then we applied <span class="strong"><strong>Image: Select &gt; Save to Channel</strong></span>.</p><div class="sect2" title="The Channels Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="channels_dialog"/>The Channels Dialog</h2></div></div></div><p><a class="xref" href="ch14s01.html#channels_dialog-id00112" title="Figure 14-2. The Channels dialog">Figure 14-2</a> shows the Channels dialog, which is a dockable dialog initially located in the multi-dialog window. The first three rows correspond to the image’s Red, Green, and Blue channels. These channels are grayscale images; each of their pixel values corresponds to the value of that color component in the image itself. That’s why the thumbnail appears as a grayscale image. <a id="iddle1070" class="indexterm"/><a id="iddle1605" class="indexterm"/><a id="iddle1612" class="indexterm"/><a id="iddle1614" class="indexterm"/><a id="iddle1621" class="indexterm"/><a id="iddle2184" class="indexterm"/><a id="iddle2291" class="indexterm"/><a id="iddle3142" class="indexterm"/><a id="iddle3720" class="indexterm"/><a id="iddle3950" class="indexterm"/><a id="iddle4554" class="indexterm"/><a id="iddle4557" class="indexterm"/><a id="iddle5347" class="indexterm"/>Click and hold the thumbnail to see a somewhat larger, color thumbnail (see <a class="xref" href="ch14s01.html#looking_at_the_thumbnail" title="Figure 14-3. Looking at the thumbnail">Figure 14-3</a>).</p><div class="figure"><a id="channels_dialog-id00112"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00964"/><img src="httpatomoreillycomsourcenostarchimages1455942.png.jpg" alt="The Channels dialog"/></div></div><p class="title">Figure 14-2. The Channels dialog</p></div><div class="figure"><a id="looking_at_the_thumbnail"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00965"/><img src="httpatomoreillycomsourcenostarchimages1455944.png.jpg" alt="Looking at the thumbnail"/></div></div><p class="title">Figure 14-3. Looking at the thumbnail</p></div><p>Click and drag the Red channel thumbnail to the Toolbox to create a new grayscale image, as shown in <a class="xref" href="ch14s01.html#extracting_the_red_channel" title="Figure 14-4. Extracting the Red channel">Figure 14-4</a>. Or drag the thumbnail to the Image window to add the channel as a new layer of the image.</p><p>Clicking a channel toggles it on and off. If a channel is deactivated, none of the changes made to the image affects that particular channel. Use this to your advantage, for example, by selecting only the Red channel when removing red eye in a photograph. If no channels are active, you won’t be able to change the image at all, leading to confusion and frustration. We recommend always keeping the Channels dialog open and checking it if the adjustments you make don’t yield the results you expect.</p><p>Clicking the eye next to a channel toggles that channel’s visibility. For example, <a class="xref" href="ch14s01.html#hiding_the_green_channel" title="Figure 14-5. Hiding the Green channel">Figure 14-5</a> shows the result of hiding the Green channel. Note that visibility and activating a channel are two different things: You can blindly alter a channel that’s not visible and vainly attempt to edit a channel that’s visible but inactive.</p><div class="figure"><a id="extracting_the_red_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00966"/><img src="httpatomoreillycomsourcenostarchimages1455946.png.jpg" alt="Extracting the Red channel"/></div></div><p class="title">Figure 14-4. Extracting the Red channel</p></div><div class="figure"><a id="hiding_the_green_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00967"/><img src="httpatomoreillycomsourcenostarchimages1455948.png.jpg" alt="Hiding the Green channel"/></div></div><p class="title">Figure 14-5. Hiding the Green channel</p></div><p>As soon as you add an Alpha channel or a second layer to an image, the global Alpha channel, which represents the transparency of the whole image, appears in the Channels dialog.</p><p>Below the rows for the three or four actual channels, a horizontal strip separates the dialog into two parts. You find the layer pixels lock icon (which you saw in <a class="xref" href="ch11.html" title="Chapter 11. Layers">Chapter 11</a>) in this strip. Activating the lock prevents changes to the mask. The lower part of the dialog holds the selection masks. <a class="xref" href="ch14s01.html#channels_dialog-id00112" title="Figure 14-2. The Channels dialog">Figure 14-2</a> has only one, and its name was chosen by GIMP. Change this name the same way you do with layers: by double-clicking the name itself, selecting <span class="strong"><strong>Channels: right-click &gt; Edit Channel Attributes</strong></span>, or clicking the leftmost icon at the bottom of the Channels dialog, which brings up the dialog shown in <a class="xref" href="ch14s01.html#editing_the_channel_attributes" title="Figure 14-6. Editing the channel attributes">Figure 14-6</a>. Here, change the channel name and adjust its <a id="iddle1597" class="indexterm"/><a id="iddle1601" class="indexterm"/><a id="iddle1604" class="indexterm"/><a id="iddle1606" class="indexterm"/><a id="iddle1609" class="indexterm"/><a id="iddle1616" class="indexterm"/><a id="iddle1618" class="indexterm"/><a id="iddle1711" class="indexterm"/><a id="iddle2258" class="indexterm"/><a id="iddle3918" class="indexterm"/><a id="iddle4014" class="indexterm"/><a id="iddle4032" class="indexterm"/>opacity and color to make it temporarily visible in the image.</p><div class="figure"><a id="editing_the_channel_attributes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00968"/><img src="httpatomoreillycomsourcenostarchimages1455950.png.jpg" alt="Editing the channel attributes"/></div></div><p class="title">Figure 14-6. Editing the channel attributes</p></div><div class="figure"><a id="making_the_mask_visible"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00969"/><img src="httpatomoreillycomsourcenostarchimages1455952.png.jpg" alt="Making the mask visible"/></div></div><p class="title">Figure 14-7. Making the mask visible</p></div><div class="figure"><a id="after_changing_the_channel_attributes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00970"/><img src="httpatomoreillycomsourcenostarchimages1455954.png.jpg" alt="After changing the channel attributes"/></div></div><p class="title">Figure 14-8. After changing the channel attributes</p></div><p>These last two attributes are used when you click the eye icon for the Red, Green, or Blue channel. If you use the settings shown in <a class="xref" href="ch14s01.html#editing_the_channel_attributes" title="Figure 14-6. Editing the channel attributes">Figure 14-6</a>, you get the result shown in <a class="xref" href="ch14s01.html#making_the_mask_visible" title="Figure 14-7. Making the mask visible">Figure 14-7</a>: The mask is 50% opaque and is shown in black. In <a class="xref" href="ch14s01.html#after_changing_the_channel_attributes" title="Figure 14-8. After changing the channel attributes">Figure 14-8</a>, you see the result when the opacity is set to 37% and the color is set to a bright green. Note that the Color chooser dialog, which pops up when you click the box on the right of the Edit Channel Attributes dialog, has more components than usual. As shown in <a class="xref" href="ch14s01.html#editing_the_channel_color" title="Figure 14-9. Editing the channel color">Figure 14-9</a>, you can change the Alpha value by using the bottom slider.</p><div class="figure"><a id="editing_the_channel_color"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00971"/><img src="httpatomoreillycomsourcenostarchimages1455956.png.jpg" alt="Editing the channel color"/></div></div><p class="title">Figure 14-9. Editing the channel color</p></div><p>Between each channel’s eye icon and thumbnail, notice room available for an additional icon: the chain. The chain links selection masks together. If you have several selection channels and link some of them together by selecting the chain icons, any changes applied to one of them also affect the others.</p><p>To access the Channels menu, either click the configuration button in the top-right corner of the Channels dialog or right-click one of the rows. This menu has the same options as the seven buttons in the dialog’s bottom row (see <a class="xref" href="ch14s01.html#channels_dialog-id00112" title="Figure 14-2. The Channels dialog">Figure 14-2</a>). These buttons allow you to do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Edit the channel attributes.</p></li><li class="listitem"><p>Create a new channel. This option brings up the dialog shown in <a class="xref" href="ch14s01.html#creating_a_new_channel" title="Figure 14-10. Creating a new channel">Figure 14-10</a>, which is identical to the one shown in <a class="xref" href="ch14s01.html#editing_the_channel_attributes" title="Figure 14-6. Editing the channel attributes">Figure 14-6</a> except for the additional I<span class="smaller">NITIALIZE FROM SELECTION</span> checkbox. Checking this box saves the current selection to a channel. Press <span class="inlinemediaobject"><a id="inline_id00404"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> while clicking C<span class="smaller">REATE A NEW CHANNEL</span> to use the last parameter values.</p></li><li class="listitem"><p>Move the current channel up or down. This option has no effect on the image itself.</p></li><li class="listitem"><p>Duplicate the current channel.</p></li><li class="listitem"><p>Create a selection with the current channel. The <span class="inlinemediaobject"><a id="inline_id00405"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span> and <span class="inlinemediaobject"><a id="inline_id00406"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> keys work the same way as they do when using the selection tools.</p><div class="figure"><a id="creating_a_new_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00972"/><img src="httpatomoreillycomsourcenostarchimages1455958.png.jpg" alt="Creating a new channel"/></div></div><p class="title">Figure 14-10. Creating a new channel</p></div><p><a id="iddle1011" class="indexterm"/><a id="iddle1404" class="indexterm"/><a id="iddle1602" class="indexterm"/><a id="iddle2244" class="indexterm"/><a id="iddle3546" class="indexterm"/><a id="iddle4913" class="indexterm"/><a id="iddle4926" class="indexterm"/><a id="iddle5035" class="indexterm"/><a id="iddle5451" class="indexterm"/><a id="iddle5546" class="indexterm"/><a id="iddle5756" class="indexterm"/>In the Channels dialog menu are four entries that create a selection from the channel, each corresponding to the different selection modes.</p></li><li class="listitem"><p>Delete the current channel.</p></li></ul></div><p>All of these menu options, except New Channel, are available only when a selection mask is active.</p><p>Only one selection mask can be active at a given time, and when a mask is active, GIMP’s various drawing and transformation tools work on the mask, not on the image itself. In fact, if you switch to the Layers dialog, you can see there is no active layer. Conversely, if you activate a layer in the Layers dialog, the selection mask deactivates. If you’re trying to change the current image and nothing is happening, make sure a layer is actually selected in the Layers dialog. You could be inadvertently changing a mask!</p></div><div class="sect2" title="Creating a Selection Mask"><div class="titlepage"><div><div><h2 class="title"><a id="creating_a_selection_mask"/>Creating a Selection Mask</h2></div></div></div><p>You can create a selection mask using one of two methods, each with several possible pitfalls. The first method is to use the selection tools (covered in <a class="xref" href="ch13.html" title="Chapter 13. Selections">Chapter 13</a>) and then to save the selection to a channel. After doing this, no layer is active, the image mask is active but might not be visible in the image, and the selection used for creating the mask is still active.</p><p>As a result, if you try to paint on the image, you’re actually painting on the mask. When you create the mask, the Channels dialog appears, even if it was previously hidden. This should alert you that the mask is active. But the selection also remains active—even if it’s hidden—so if you try to paint on the mask, you’re only able to alter areas that fall within the selection.</p><div class="figure"><a id="another_photograph"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00973"/><img src="httpatomoreillycomsourcenostarchimages1455960.png.jpg" alt="Another photograph"/></div></div><p class="title">Figure 14-11. Another photograph</p></div><div class="figure"><a id="mask_that_needs_to_be_cleaned_up"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00974"/><img src="httpatomoreillycomsourcenostarchimages1455962.png.jpg" alt="A mask that needs to be cleaned up"/></div></div><p class="title">Figure 14-12. A mask that needs to be cleaned up</p></div><p>The second method for creating a selection mask is to use the Channels dialog directly. Create a new channel by clicking the appropriate button, and it immediately appears in the image. Then use the drawing tools to edit it. Painting white on the mask selects pixels, and painting black deselects pixels. Use the Blend tool and paint with various shades of gray to partially select pixels. You can also use colors other than gray, although only the color’s value component is used.</p><p>For example, we took the photograph shown in <a class="xref" href="ch14s01.html#another_photograph" title="Figure 14-11. Another photograph">Figure 14-11</a> and made a selection with the Select by Color tool. But we set the T<span class="smaller">HRESHOLD</span> cursor to 15.0, which is too low for a clean selection. <a class="xref" href="ch14s01.html#mask_that_needs_to_be_cleaned_up" title="Figure 14-12. A mask that needs to be cleaned up">Figure 14-12</a> shows a part of the image after saving the selection to a channel and making this channel visible.</p><div class="figure"><a id="resetting_the_foreground_and_background"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00975"/><img src="httpatomoreillycomsourcenostarchimages1455964.png.jpg" alt="Resetting the foreground and background colors"/></div></div><p class="title">Figure 14-13. Resetting the foreground and background colors</p></div><div class="figure"><a id="quick_mask_button"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00976"/><img src="httpatomoreillycomsourcenostarchimages1455966.png.jpg" alt="The Quick Mask button"/></div></div><p class="title">Figure 14-14. The Quick Mask button</p></div><p><a id="iddle1231" class="indexterm"/><a id="iddle2734" class="indexterm"/><a id="iddle2743" class="indexterm"/><a id="iddle4042" class="indexterm"/><a id="iddle4079" class="indexterm"/><a id="iddle4124" class="indexterm"/><a id="iddle5263" class="indexterm"/><a id="iddle5331" class="indexterm"/><a id="iddle5665" class="indexterm"/>The mask needs to be cleaned up, which you can do with the Paintbrush tool. First set the foreground and background colors to their default values of black and white. The simplest way to do this is to click the small buttons in the lower-left corner of the Toolbox (see <a class="xref" href="ch14s01.html#resetting_the_foreground_and_background" title="Figure 14-13. Resetting the foreground and background colors">Figure 14-13</a>) or to press <span class="inlinemediaobject"><a id="inline_id00407"/><img src="httpatomoreillycomsourcenostarchimages1454550.png" alt=""/></span>. Then select the Paintbrush tool (<span class="inlinemediaobject"><a id="inline_id00408"/><img src="httpatomoreillycomsourcenostarchimages1454224.png.jpg" alt=""/></span>) and an appropriate brush. Paint the parts that shouldn’t be selected black and the parts that should be selected white. Switch between the foreground and background color by pressing <span class="inlinemediaobject"><a id="inline_id00409"/><img src="httpatomoreillycomsourcenostarchimages1454054.png" alt=""/></span>.</p><p>You want either full selection or no selection at all, so if you’re using a tablet pen, set the Paint Dynamics so that pressure changes the brush size, rather than the opacity. This dynamic allows you to press down to fill large areas quickly or zoom in and press gently to touch up the mask’s finer details.</p></div><div class="sect2" title="The Quick Mask Tool"><div class="titlepage"><div><div><h2 class="title"><a id="quick_mask_tool"/>The Quick Mask Tool</h2></div></div></div><p>If you want to create a complicated selection, but don’t need to save it for later, use the Quick Mask tool. Toggle it via <span class="strong"><strong>Image: Select &gt; Toggle Quick Mask</strong></span>, by clicking the button in the bottom-left corner of the Image window (see <a class="xref" href="ch14s01.html#quick_mask_button" title="Figure 14-14. The Quick Mask button">Figure 14-14</a>), or by pressing <span class="inlinemediaobject"><a id="inline_id00410"/><img src="httpatomoreillycomsourcenostarchimages1455738.png.jpg" alt=""/></span>.</p><p>When the Quick Mask is active, it appears in the Channels dialog as an active and visible red selection mask. <a class="xref" href="ch14s01.html#part_of_a_quick_mask" title="Figure 14-15. A part of a Quick Mask">Figure 14-15</a> shows a part of our photograph after making a selection with the Select by Color tool, using a T<span class="smaller">HRESHOLD</span> of 20.0. To edit the selection, paint the mask with black or white. When satisfied, toggle the Quick Mask again, which has the following effects:</p><div class="figure"><a id="part_of_a_quick_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00977"/><img src="httpatomoreillycomsourcenostarchimages1455968.png.jpg" alt="A part of a Quick Mask"/></div></div><p class="title">Figure 14-15. A part of a Quick Mask</p></div><div class="figure"><a id="quick_mask_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00978"/><img src="httpatomoreillycomsourcenostarchimages1455970.png.jpg" alt="The Quick Mask menu"/></div></div><p class="title">Figure 14-16. The Quick Mask menu</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The mask is converted to a selection.</p></li><li class="listitem"><p>The selection mask is removed from the Channels dialog.</p></li><li class="listitem"><p>The current layer is reactivated.</p></li></ul></div><p>This is a very simple and convenient way to make changes to a selection without formally creating a selection mask. Also note that using a Quick Mask doesn’t prevent saving the final selection to a channel.</p><p>Right-clicking the Quick Mask button brings up the menu shown in <a class="xref" href="ch14s01.html#quick_mask_menu" title="Figure 14-16. The Quick Mask menu">Figure 14-16</a>. This menu allows us to toggle the mask, change its color and opacity, and invert the coloration, as shown in <a class="xref" href="ch14s01.html#inverting_the_mask_coloration" title="Figure 14-17. Inverting the mask coloration">Figure 14-17</a>. The color inversion reveals that quite a bit of blue sky in the top-left portion of the photograph remains unselected. Painting in black still adds red pixels to the mask, but now the red pixels are selected. If you toggle Quick Mask off, you see the selection wasn’t inverted. The sky is still selected.</p><div class="figure"><a id="inverting_the_mask_coloration"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00979"/><img src="httpatomoreillycomsourcenostarchimages1455972.png.jpg" alt="Inverting the mask coloration"/></div></div><p class="title">Figure 14-17. Inverting the mask coloration</p></div><div class="figure"><a id="initial_image-id00113"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00980"/><img src="httpatomoreillycomsourcenostarchimages1455974.png.jpg" alt="The initial image"/></div></div><p class="title">Figure 14-18. The initial image</p></div></div></div>
<div class="sect1" title="14.2 Layer Masks"><div class="titlepage"><div><div><h1 class="title"><a id="one4dot2_layer_masks"/>14.2 Layer Masks</h1></div></div></div><p><a id="iddle1039" class="indexterm"/><a id="iddle3129" class="indexterm"/><a id="iddle3529" class="indexterm"/><a id="iddle3533" class="indexterm"/><a id="iddle3538" class="indexterm"/><a id="iddle3641" class="indexterm"/><a id="iddle3788" class="indexterm"/><a id="iddle3792" class="indexterm"/><a id="iddle3797" class="indexterm"/><a id="iddle4035" class="indexterm"/>A layer mask is a grayscale image attached to a specific layer; it is the same size as that layer. The mask’s pixels set the transparency of the corresponding pixels in the layer. A white pixel in the mask specifies that the corresponding pixel in the image is completely opaque, and a black pixel specifies full transparency. A gray pixel specifies partial opacity. The pixel’s color components are unchanged, so a pixel can be strongly colored and completely transparent at the same time. This means that in a layer with a layer mask, every pixel requires 4 bytes.</p><div class="figure"><a id="mask_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00981"/><img src="httpatomoreillycomsourcenostarchimages1455976.png.jpg" alt="The Mask menu"/></div></div><p class="title">Figure 14-19. The Mask menu</p></div><div class="figure"><a id="adding_a_mask_to_the_layer"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00982"/><img src="httpatomoreillycomsourcenostarchimages1455978.png.jpg" alt="Adding a mask to the layer"/></div></div><p class="title">Figure 14-20. Adding a mask to the layer</p></div><div class="sect2" title="Building a Layer Mask"><div class="titlepage"><div><div><h2 class="title"><a id="building_a_layer_mask"/>Building a Layer Mask</h2></div></div></div><p>Start with the image shown in <a class="xref" href="ch14s01.html#initial_image-id00113" title="Figure 14-18. The initial image">Figure 14-18</a>. Select <span class="strong"><strong>Image: Layer &gt; Mask</strong></span>, and the menu shown in <a class="xref" href="ch14s02.html#mask_menu" title="Figure 14-19. The Mask menu">Figure 14-19</a> appears. The same menu, minus the last three entries, can also be selected via <span class="strong"><strong>Layers: right-click</strong></span>.</p><p>Select Add Layer Mask, and the dialog shown in <a class="xref" href="ch14s02.html#adding_a_mask_to_the_layer" title="Figure 14-20. Adding a mask to the layer">Figure 14-20</a> appears. Several options are available for the layer mask’s initial contents:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>W<span class="smaller">HITE</span> (<span class="smaller">FULL OPACITY</span>): The mask appears as a white thumbnail in the Layers dialog just beside the layer thumbnail. Because all its pixels are white, the layer is completely opaque, and the image looks no different. Note that this does not prevent us from manipulating the O<span class="smaller">PACITY</span> slider in the Layers dialog, which <a id="iddle1081" class="indexterm"/><a id="iddle1610" class="indexterm"/><a id="iddle2770" class="indexterm"/><a id="iddle2927" class="indexterm"/><a id="iddle3139" class="indexterm"/><a id="iddle3653" class="indexterm"/><a id="iddle4007" class="indexterm"/><a id="iddle4330" class="indexterm"/><a id="iddle4917" class="indexterm"/><a id="iddle5193" class="indexterm"/>is independent of the mask. This slider operates in combination with the layer’s M<span class="smaller">ODE</span> to specify how its pixels are combined with the underlying layers. This opacity is a characteristic of the layer, not of the individual pixels.</p><div class="figure"><a id="two_layers_and_a_layer_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00983"/><img src="httpatomoreillycomsourcenostarchimages1455980.png.jpg" alt="Two layers and a layer mask"/></div></div><p class="title">Figure 14-21. Two layers and a layer mask</p></div><div class="figure"><a id="painting_in_white_on_the_layer_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00984"/><img src="httpatomoreillycomsourcenostarchimages1455982.png.jpg" alt="Painting in white on the layer mask"/></div></div><p class="title">Figure 14-22. Painting in white on the layer mask</p></div></li><li class="listitem"><p>B<span class="smaller">LACK</span> (<span class="smaller">FULL TRANSPARENCY</span>): The mask appears as a black thumbnail, and the layer becomes fully transparent. Now wherever you paint on the mask with white, areas of the layer reappear. <a class="xref" href="ch14s02.html#two_layers_and_a_layer_mask" title="Figure 14-21. Two layers and a layer mask">Figure 14-21</a> shows the Layers dialog of an image we created to demonstrate this. We loaded a photograph, added a new white layer, moved it down in the layer stack, and added a black layer mask to the top layer. Then we painted in white on the mask with the Paintbrush tool, using the <code class="literal">Hardness 075</code> brush in a large size. In the resulting image, shown in <a class="xref" href="ch14s02.html#painting_in_white_on_the_layer_mask" title="Figure 14-22. Painting in white on the layer mask">Figure 14-22</a>, the transparent areas of the top layer appear white because of the white background layer, whereas the areas where we painted on the layer mask are filled with the contents of the top layer.</p></li><li class="listitem"><p>L<span class="smaller">AYER</span>’<span class="smaller">S ALPHA CHANNEL</span>: If the layer already has an Alpha channel, its contents are copied to the layer mask. Note that the Alpha channel remains intact.</p></li><li class="listitem"><p>T<span class="smaller">RANSFER LAYER</span>’<span class="smaller">S ALPHA CHANNEL</span>: This does the same thing as the previous entry, but the Alpha channel is reset to full opacity.</p></li><li class="listitem"><p>S<span class="smaller">ELECTION</span>: As stated previously, a selection is a grayscale image. This image is copied to the layer mask. The selected pixels are opaque; the unselected pixels are transparent.</p></li><li class="listitem"><p>G<span class="smaller">RAYSCALE COPY OF LAYER</span>: The current contents of the layer are converted to a grayscale image and used for initializing the layer mask. Most of the pixels in the image are partially selected, and the level of selection is proportional to the pixel’s value. White pixels are fully selected, and darker pixels are selected to a lesser degree.</p></li><li class="listitem"><p>C<span class="smaller">HANNEL</span>: If at least one channel exists, use it to initialize the layer mask. Select a channel from the menu that appears.</p></li></ul></div><p>I<span class="smaller">NVERT MASK</span> inverts the mask. The transparent parts become opaque, and vice versa.</p></div><div class="sect2" title="Manipulating a Layer Mask"><div class="titlepage"><div><div><h2 class="title"><a id="manipulating_a_layer_mask"/>Manipulating a Layer Mask</h2></div></div></div><p>When the layer mask is created, the Layers dialog changes, as shown in <a class="xref" href="ch14s02.html#layer_mask_has_been_addeddot" title="Figure 14-23. A layer mask has been added.">Figure 14-23</a>. A thumbnail of the mask appears to the right of the layer thumbnail. It’s enclosed in a white frame to show that it’s active, whereas the layer thumbnail is enclosed in a black frame.</p><p>Here, choose a grayscale copy of the layer as a mask and invert it. The result, shown in <a class="xref" href="ch14s02.html#result_of_using_the_layer_mask" title="Figure 14-24. The result of using the layer mask">Figure 14-24</a>, is that the parts of the image that <a id="iddle2771" class="indexterm"/><a id="iddle3132" class="indexterm"/><a id="iddle3640" class="indexterm"/>were very dark are now much more visible because they are highly selected and thus opaque. But the sea landscape is now pale and dull because the layer’s light pixels are now almost transparent and reveal the white layer underneath.</p><div class="figure"><a id="layer_mask_has_been_addeddot"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00985"/><img src="httpatomoreillycomsourcenostarchimages1455984.png.jpg" alt="A layer mask has been added."/></div></div><p class="title">Figure 14-23. A layer mask has been added.</p></div><div class="figure"><a id="result_of_using_the_layer_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00986"/><img src="httpatomoreillycomsourcenostarchimages1455986.png.jpg" alt="The result of using the layer mask"/></div></div><p class="title">Figure 14-24. The result of using the layer mask</p></div><div class="figure"><a id="activating_the_layer_itself"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00987"/><img src="httpatomoreillycomsourcenostarchimages1455988.png.jpg" alt="Activating the layer itself"/></div></div><p class="title">Figure 14-25. Activating the layer itself</p></div><p>When the layer mask is active, all tools operate only on it, not on the layer itself. To toggle between the mask and the layer, click the corresponding thumbnail in the Layers dialog. The white frame always shows whether the layer or the mask is active. In <a class="xref" href="ch14s02.html#activating_the_layer_itself" title="Figure 14-25. Activating the layer itself">Figure 14-25</a>, the layer is active.</p><div class="figure"><a id="inactive_layer_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00988"/><img src="httpatomoreillycomsourcenostarchimages1455990.png.jpg" alt="An inactive layer mask"/></div></div><p class="title">Figure 14-26. An inactive layer mask</p></div><div class="figure"><a id="layers_dialog_when_only_the_layer_mask_i"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00989"/><img src="httpatomoreillycomsourcenostarchimages1455992.png.jpg" alt="The Layers dialog when only the layer mask is visible"/></div></div><p class="title">Figure 14-27. The Layers dialog when only the layer mask is visible</p></div><div class="figure"><a id="image_window_when_only_the_layer_mask_is"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00990"/><img src="httpatomoreillycomsourcenostarchimages1455994.png.jpg" alt="The Image window when only the layer mask is visible"/></div></div><p class="title">Figure 14-28. The Image window when only the layer mask is visible</p></div><p>To hide the effect of the layer mask without deleting it, <span class="inlinemediaobject"><a id="inline_id00411"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-click the mask thumbnail. Its frame is now red, as shown in <a class="xref" href="ch14s02.html#inactive_layer_mask" title="Figure 14-26. An inactive layer mask">Figure 14-26</a>, and the mask effect is temporarily canceled. If you <span class="inlinemediaobject"><a id="inline_id00412"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-click again, the mask is activated.</p><p>To see the mask itself, <span class="inlinemediaobject"><a id="inline_id00413"/><img src="httpatomoreillycomsourcenostarchimages1454752.png.jpg" alt=""/></span>-click the mask thumbnail. Its frame is now green, as shown in <a class="xref" href="ch14s02.html#layers_dialog_when_only_the_layer_mask_i" title="Figure 14-27. The Layers dialog when only the layer mask is visible">Figure 14-27</a>, and the Image window displays the mask as a grayscale image, as shown in <a class="xref" href="ch14s02.html#image_window_when_only_the_layer_mask_is" title="Figure 14-28. The Image window when only the layer mask is visible">Figure 14-28</a>. Notice the green dotted line framing <a id="iddle1054" class="indexterm"/><a id="iddle1237" class="indexterm"/><a id="iddle1881" class="indexterm"/><a id="iddle4323" class="indexterm"/>the image; this tells you a layer mask is active. If you <span class="inlinemediaobject"><a id="inline_id00414"/><img src="httpatomoreillycomsourcenostarchimages1454752.png.jpg" alt=""/></span>-click again, the layer reappears.</p><div class="figure"><a id="mask_menu_after_the_layer_mask_is_create"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00991"/><img src="httpatomoreillycomsourcenostarchimages1455996.png.jpg" alt="The Mask menu after the layer mask is created"/></div></div><p class="title">Figure 14-29. The Mask menu after the layer mask is created</p></div><p>You can also create, edit, or activate a layer mask via the <span class="strong"><strong>Image: Layer &gt; Mask</strong></span> menu, as shown in <a class="xref" href="ch14s02.html#mask_menu_after_the_layer_mask_is_create" title="Figure 14-29. The Mask menu after the layer mask is created">Figure 14-29</a>. The checkboxes give you simple tools to display and manipulate a layer mask, and the remaining entries in this menu (and in the <span class="strong"><strong>Layers: right-click</strong></span> menu) relate to the ways you can use a layer mask:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A<span class="smaller">PPLY</span> L<span class="smaller">AYER</span> M<span class="smaller">ASK</span>: Save the effect of the layer mask in the layer’s Alpha channel, and delete the layer mask. This change should be the last one you make to a layer. Prior to applying the mask, the layer itself is unchanged—regardless of what you do to the layer mask.</p></li><li class="listitem"><p>D<span class="smaller">ELETE</span> L<span class="smaller">AYER</span> M<span class="smaller">ASK</span>: Discard the layer mask; this has no effect on the layer itself.</p></li><li class="listitem"><p>M<span class="smaller">ASK TO</span> S<span class="smaller">ELECTION</span>: Convert the layer mask to the current selection. Where the mask’s pixels are white, the associated layer’s pixels are selected; where they are black, the layer’s pixels are deselected. But mask pixels with intermediate values lead to partially selected pixels in the associated layer. A selection is thus initiated, but the layer and the mask remain unchanged.</p></li><li class="listitem"><p>A<span class="smaller">DD TO</span> S<span class="smaller">ELECTION</span>, S<span class="smaller">UBTRACT FROM</span> S<span class="smaller">ELECTION</span>, and I<span class="smaller">NTERSECT WITH</span> S<span class="smaller">ELECTION</span> also convert the mask to a selection. Whereas Mask to Selection replaces the current selection, these three entries allow you to combine the new selection with the previous selection in various ways. These entries do not appear on the <span class="strong"><strong>Layers: right-click</strong></span> menu.</p><div class="figure"><a id="final_image-id00114"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00992"/><img src="httpatomoreillycomsourcenostarchimages1455998.png.jpg" alt="The final image"/></div></div><p class="title">Figure 14-30. The final image</p></div></li></ul></div></div><div class="sect2" title="Using a Layer Mask"><div class="titlepage"><div><div><h2 class="title"><a id="using_a_layer_mask"/>Using a Layer Mask</h2></div></div></div><p>The following example uses two layers with layer masks and two ordinary layers to create the composite image shown in <a class="xref" href="ch14s02.html#final_image-id00114" title="Figure 14-30. The final image">Figure 14-30</a>. Take the following steps to transform the image:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Open the photograph shown in <a class="xref" href="ch14s01.html#initial_image-id00113" title="Figure 14-18. The initial image">Figure 14-18</a>, and choose the Select by Color tool. Click the sky and then the sea and foam while pressing the <span class="inlinemediaobject"><a id="inline_id00415"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> key to select all of the landscape behind the window—except the rocks in the lower right. To select them as well, use Quick Mask, and this time use the Pencil tool to paint the rocks white. The Pencil tool works like the Paintbrush but without feathering or antialiasing.</p></li><li class="listitem"><p>When the selection is complete, add a layer mask to the background layer and initialize it with the inverted selection. Now the full window opening is transparent (<a class="xref" href="ch14s02.html#making_the_opening_transparent" title="Figure 14-31. Making the opening transparent">Figure 14-31</a>).</p><div class="figure"><a id="making_the_opening_transparent"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00993"/><img src="httpatomoreillycomsourcenostarchimages1456000.png.jpg" alt="Making the opening transparent"/></div></div><p class="title">Figure 14-31. Making the opening transparent</p></div><div class="figure"><a id="portrait_to_add_to_the_image"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00994"/><img src="httpatomoreillycomsourcenostarchimages1456002.png.jpg" alt="A portrait to add to the image"/></div></div><p class="title">Figure 14-32. A portrait to add to the image</p></div></li><li class="listitem"><p><a id="iddle1576" class="indexterm"/><a id="iddle2938" class="indexterm"/><a id="iddle4992" class="indexterm"/><a id="iddle5600" class="indexterm"/><a id="iddle5792" class="indexterm"/>Add a new layer to the image using the photograph shown in <a class="xref" href="ch14s02.html#portrait_to_add_to_the_image" title="Figure 14-32. A portrait to add to the image">Figure 14-32</a>. Because this image is much larger than the previous one, scale this new layer to the canvas size with <span class="strong"><strong>Image: Layer &gt; Scale Layer</strong></span>.</p></li><li class="listitem"><p>Using the Fuzzy Select tool, click several times while pressing <span class="inlinemediaobject"><a id="inline_id00416"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to select the portrait’s background. Then add a layer mask to this layer, and initialize it with the selection (not inverted). The result is shown in <a class="xref" href="ch14s02.html#removing_the_background" title="Figure 14-33. Removing the background">Figure 14-33</a>.</p><div class="figure"><a id="removing_the_background"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00995"/><img src="httpatomoreillycomsourcenostarchimages1456004.png.jpg" alt="Removing the background"/></div></div><p class="title">Figure 14-33. Removing the background</p></div><div class="figure"><a id="layers_dialog_when_the_image_is_finished"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00996"/><img src="httpatomoreillycomsourcenostarchimages1456006.png.jpg" alt="The Layers dialog when the image is finished"/></div></div><p class="title">Figure 14-34. The Layers dialog when the image is finished</p></div></li><li class="listitem"><p>Duplicate the layer containing the window, and delete its layer mask. You can see the scenery behind the subject has been retained. Reorder the layers as shown in <a class="xref" href="ch14s02.html#layers_dialog_when_the_image_is_finished" title="Figure 14-34. The Layers dialog when the image is finished">Figure 14-34</a>, and discard the white background layer.</p></li></ol></div><div class="figure"><a id="initial_photograph-id00115"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00997"/><img src="httpatomoreillycomsourcenostarchimages1456008.png.jpg" alt="The initial photograph"/></div></div><p class="title">Figure 14-35. The initial photograph</p></div><div class="figure"><a id="new_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00998"/><img src="httpatomoreillycomsourcenostarchimages1456010.png.jpg" alt="The new channel"/></div></div><p class="title">Figure 14-36. The new channel</p></div></div></div>
<div class="sect1" title="14.3 Using Masks and Channels"><div class="titlepage"><div><div><h1 class="title"><a id="one4dot3_using_masks_and_channels"/>14.3 Using Masks and Channels</h1></div></div></div><p><a id="iddle1603" class="indexterm"/><a id="iddle1622" class="indexterm"/><a id="iddle1631" class="indexterm"/><a id="iddle3799" class="indexterm"/><a id="iddle3910" class="indexterm"/><a id="iddle5299" class="indexterm"/><a id="iddle5839" class="indexterm"/>In this section, we show you two specific uses for masks and channels that cannot be accomplished by other means.</p><div class="sect2" title="Building a Natural Mask"><div class="titlepage"><div><div><h2 class="title"><a id="building_a_natural_mask"/>Building a Natural Mask</h2></div></div></div><p>The <span class="emphasis"><em>natural mask</em></span> of an image is a quick way to generate a mask that selects the subject of an image. This particular mask is not always accurate, but, in many cases, it yields good results. This concept is the brainchild of Carey Bunks, author of an excellent, early book about GIMP, <span class="emphasis"><em>Grokking the GIMP</em></span> (New Riders, 2000).</p><div class="figure"><a id="channels_dialog-id00116"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00999"/><img src="httpatomoreillycomsourcenostarchimages1456012.png.jpg" alt="The Channels dialog"/></div></div><p class="title">Figure 14-37. The Channels dialog</p></div><div class="figure"><a id="threshold_tool_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01000"/><img src="httpatomoreillycomsourcenostarchimages1456014.png.jpg" alt="The Threshold tool dialog"/></div></div><p class="title">Figure 14-38. The Threshold tool dialog</p></div><p>Start with the photograph shown in <a class="xref" href="ch14s02.html#initial_photograph-id00115" title="Figure 14-35. The initial photograph">Figure 14-35</a>. You want to select only the girl. First, select the whole image (<span class="inlinemediaobject"><a id="inline_id00417"/><img src="httpatomoreillycomsourcenostarchimages1454180.png.jpg" alt=""/></span>) and copy it (<span class="inlinemediaobject"><a id="inline_id00418"/><img src="httpatomoreillycomsourcenostarchimages1454144.png.jpg" alt=""/></span>). Then go to the Channels dialog and create a new channel by clicking the proper button (the second icon from the left at the bottom of the Channels dialog).</p><p>Paste the copied data (<span class="inlinemediaobject"><a id="inline_id00419"/><img src="httpatomoreillycomsourcenostarchimages1454184.png.jpg" alt=""/></span>), and anchor the floating layer to the new channel (<span class="inlinemediaobject"><a id="inline_id00420"/><img src="httpatomoreillycomsourcenostarchimages1454186.png.jpg" alt=""/></span>). If you leave the visibility on in the new channel and turn it off in the layer, you see a grayscale image of the photograph, as shown in <a class="xref" href="ch14s02.html#new_channel" title="Figure 14-36. The new channel">Figure 14-36</a>. The Channels dialog for this image is shown in <a class="xref" href="ch14s03.html#channels_dialog-id00116" title="Figure 14-37. The Channels dialog">Figure 14-37</a>.</p><p>The values of the pixels in this image are used to build the selection. To do this, choose the <span class="strong"><strong>Image: Colors &gt; Threshold</strong></span> tool. The dialog shown in <a class="xref" href="ch14s03.html#threshold_tool_dialog" title="Figure 14-38. The Threshold tool dialog">Figure 14-38</a> appears, and the image changes <a id="iddle1103" class="indexterm"/><a id="iddle1607" class="indexterm"/><a id="iddle2292" class="indexterm"/><a id="iddle3619" class="indexterm"/><a id="iddle3800" class="indexterm"/><a id="iddle3803" class="indexterm"/><a id="iddle3911" class="indexterm"/><a id="iddle4043" class="indexterm"/><a id="iddle4087" class="indexterm"/><a id="iddle5673" class="indexterm"/>to black and white. The positions of the small triangles in the Threshold dialog determine which pixels are white and which are black.</p><div class="figure"><a id="selection_mask_transformed_by_the_thresh"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01001"/><img src="httpatomoreillycomsourcenostarchimages1456016.png.jpg" alt="The selection mask transformed by the Threshold tool"/></div></div><p class="title">Figure 14-39. The selection mask transformed by the Threshold tool</p></div><div class="figure"><a id="making_the_mask_more_visible"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01002"/><img src="httpatomoreillycomsourcenostarchimages1456018.png.jpg" alt="Making the mask more visible"/></div></div><p class="title">Figure 14-40. Making the mask more visible</p></div><p>Adjust the triangles as shown in <a class="xref" href="ch14s03.html#threshold_tool_dialog" title="Figure 14-38. The Threshold tool dialog">Figure 14-38</a>, and you get the image shown in <a class="xref" href="ch14s03.html#selection_mask_transformed_by_the_thresh" title="Figure 14-39. The selection mask transformed by the Threshold tool">Figure 14-39</a>. This mask selects only the lightest parts of the image.</p><p>To see what the mask actually selected, click the eye icon for the image layer, but be careful not to activate the layer. As you can see, the mask is black and doesn’t contrast well with the image. Change its color using the Edit channel button, and choose yellow and 50% opacity. The result is shown in <a class="xref" href="ch14s03.html#making_the_mask_more_visible" title="Figure 14-40. Making the mask more visible">Figure 14-40</a>.</p><div class="figure"><a id="improving_the_mask"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01003"/><img src="httpatomoreillycomsourcenostarchimages1456020.png.jpg" alt="Improving the mask"/></div></div><p class="title">Figure 14-41. Improving the mask</p></div><p>Touch up the mask under the chin, in the corners of the mouth, on the nostrils, and on the eyes. You can do this easily by painting directly on the mask. Choose the Paintbrush tool and a large brush, and paint the selected facial features with white. <a class="xref" href="ch14s03.html#improving_the_mask" title="Figure 14-41. Improving the mask">Figure 14-41</a> shows the improved mask. Then convert the mask to a selection, and remove the mask’s visibility. The result is the selection shown in <a class="xref" href="ch14s03.html#resulting_selection-id00117" title="Figure 14-42. The resulting selection">Figure 14-42</a>.</p></div><div class="sect2" title="Transparency and the Alpha Channel"><div class="titlepage"><div><div><h2 class="title"><a id="transparency_and_the_alpha_channel"/>Transparency and the Alpha Channel</h2></div></div></div><p>The Alpha channel is necessary when an image contains transparency. When an image has more than one layer, it always has a global Alpha channel. Individual layers may or may not have Alpha channels, but when they don’t, you can see the pixels in the underlying layers unless you use certain blend modes or set the layer opacity to a value less than 100%. But if a given layer does not have an Alpha channel, its name appears in boldface in the Layers dialog.</p><p>A single layer image can also use transparency. Images displayed on a website, for example, often have transparent backgrounds, <a id="iddle1061" class="indexterm"/><a id="iddle1725" class="indexterm"/><a id="iddle1807" class="indexterm"/><a id="iddle1838" class="indexterm"/><a id="iddle3253" class="indexterm"/>which allow them to blend naturally with other design elements on the page.</p><div class="figure"><a id="resulting_selection-id00117"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01004"/><img src="httpatomoreillycomsourcenostarchimages1456022.png.jpg" alt="The resulting selection"/></div></div><p class="title">Figure 14-42. The resulting selection</p></div><div class="figure"><a id="transparency_menu_without_an_alpha_chann"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01005"/><img src="httpatomoreillycomsourcenostarchimages1456024.png.jpg" alt="The Transparency menu without an Alpha channel"/></div></div><p class="title">Figure 14-43. The Transparency menu without an Alpha channel</p></div><p><a class="xref" href="ch14s03.html#transparency_menu_without_an_alpha_chann" title="Figure 14-43. The Transparency menu without an Alpha channel">Figure 14-43</a> shows the <span class="strong"><strong>Image: Layer &gt; Transparency</strong></span> menu when the corresponding layer has no Alpha channel, and <a class="xref" href="ch14s03.html#transparency_menu_with_an_alpha_channel" title="Figure 14-44. The Transparency menu with an Alpha channel">Figure 14-44</a> shows the same menu when there is an Alpha channel. A few of these entries also appear in the <span class="strong"><strong>Layers: right-click</strong></span> menu.</p><p>Let’s discuss what these menu entries do.</p><p>The first two entries, A<span class="smaller">DD</span> A<span class="smaller">LPHA</span> C<span class="smaller">HANNEL</span> and R<span class="smaller">EMOVE</span> A<span class="smaller">LPHA</span> C<span class="smaller">HANNEL</span>, add and remove Alpha channels, respectively.</p><p>C<span class="smaller">OLOR TO</span> A<span class="smaller">LPHA</span> also appears in the <span class="strong"><strong>Image: Colors</strong></span> menu. Select it to make the dialog shown in <a class="xref" href="ch14s03.html#color_to_alpha_dialog-id00118" title="Figure 14-45. The Color to Alpha dialog">Figure 14-45</a> appear. Check P<span class="smaller">REVIEW</span>, and select the color that will be made transparent. Initially this color is white, as the figure shows.</p><div class="figure"><a id="transparency_menu_with_an_alpha_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01006"/><img src="httpatomoreillycomsourcenostarchimages1456026.png.jpg" alt="The Transparency menu with an Alpha channel"/></div></div><p class="title">Figure 14-44. The Transparency menu with an Alpha channel</p></div><div class="figure"><a id="color_to_alpha_dialog-id00118"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01007"/><img src="httpatomoreillycomsourcenostarchimages1456028.png.jpg" alt="The Color to Alpha dialog"/></div></div><p class="title">Figure 14-45. The Color to Alpha dialog</p></div><p>Clicking the F<span class="smaller">ROM</span>: button brings up a simplified version of the Color chooser, shown in <a class="xref" href="ch14s03.html#color_to_alpha_color_chooser" title="Figure 14-46. The Color to Alpha Color chooser">Figure 14-46</a>. If you click the small button to the right of the HTML <span class="smaller">NOTATION</span> field, you can choose the exact color from the image that you want to make transparent and see the resulting effect in the Preview window.</p><p><a class="xref" href="ch14s03.html#initial_image-id00119" title="Figure 14-47. The initial image">Figure 14-47</a> shows a photographic portrait. To get the image shown in <a class="xref" href="ch14s03.html#making_the_skin_tone_transparent" title="Figure 14-49. Making the skin tone transparent">Figure 14-49</a>, choose <span class="strong"><strong>Image: Layer &gt; Transparency &gt; Color to Alpha</strong></span> and select a flesh-tone pixel near the woman’s necklace. Because all similar pixels become transparent, add a white layer under the image layer. Note that because the chosen color appears in the woman’s hair, parts of her hair will also be altered. You could avoid this if you first selected the face and then used Color to Alpha.</p><div class="figure"><a id="color_to_alpha_color_chooser"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01008"/><img src="httpatomoreillycomsourcenostarchimages1456030.png.jpg" alt="The Color to Alpha Color chooser"/></div></div><p class="title">Figure 14-46. The Color to Alpha Color chooser</p></div><div class="figure"><a id="initial_image-id00119"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01009"/><img src="httpatomoreillycomsourcenostarchimages1456032.png.jpg" alt="The initial image"/></div></div><p class="title">Figure 14-47. The initial image</p></div><p><a id="iddle1111" class="indexterm"/><a id="iddle1224" class="indexterm"/><a id="iddle1776" class="indexterm"/><a id="iddle2584" class="indexterm"/><a id="iddle3228" class="indexterm"/><a id="iddle3265" class="indexterm"/><a id="iddle5016" class="indexterm"/><a id="iddle5295" class="indexterm"/><a id="iddle5841" class="indexterm"/><a id="iddle5917" class="indexterm"/>If you paint the underlying layer in the color you made transparent, the image looks exactly like the original portrait. This makes changing a specific color in the active layer easy. For example, <a class="xref" href="ch14s03.html#altering_the_skin_color" title="Figure 14-48. Altering the skin color">Figure 14-48</a> shows the result when we slightly alter the underlying layer color by decreasing the hue and increasing the value in the HSV color model.</p><p>S<span class="smaller">EMI</span>-F<span class="smaller">LATTEN</span> is also found in the <span class="strong"><strong>Image: Filters &gt; Web</strong></span> menu. We discuss it in depth in <a class="xref" href="ch17.html" title="Chapter 17. Filters">Chapter 17</a>, but in brief, it replaces partial transparency with the current background color. If you apply it to the image layer shown in <a class="xref" href="ch14s03.html#making_the_skin_tone_transparent" title="Figure 14-49. Making the skin tone transparent">Figure 14-49</a> and choose the skin tone as the background color, you get the result shown in <a class="xref" href="ch14s03.html#altering_the_skin_color" title="Figure 14-48. Altering the skin color">Figure 14-48</a>.</p><div class="figure"><a id="altering_the_skin_color"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01010"/><img src="httpatomoreillycomsourcenostarchimages1456034.png.jpg" alt="Altering the skin color"/></div></div><p class="title">Figure 14-48. Altering the skin color</p></div><div class="figure"><a id="making_the_skin_tone_transparent"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01011"/><img src="httpatomoreillycomsourcenostarchimages1456036.png.jpg" alt="Making the skin tone transparent"/></div></div><p class="title">Figure 14-49. Making the skin tone transparent</p></div><p>T<span class="smaller">HRESHOLD</span> A<span class="smaller">LPHA</span> applies a threshold filter to the Alpha channel. Clicking this entry brings up the dialog shown in <a class="xref" href="ch14s03.html#threshold_alpha_dialog" title="Figure 14-50. The Threshold Alpha dialog">Figure 14-50</a>. If you choose the value shown for the threshold, apply it, and add another layer filled with the initial skin color under the original layer, you get the result shown in <a class="xref" href="ch14s03.html#after_thresholding_the_alpha_channel" title="Figure 14-51. After thresholding the Alpha channel">Figure 14-51</a>.</p><div class="figure"><a id="threshold_alpha_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01012"/><img src="httpatomoreillycomsourcenostarchimages1456038.png.jpg" alt="The Threshold Alpha dialog"/></div></div><p class="title">Figure 14-50. The Threshold Alpha dialog</p></div><div class="figure"><a id="after_thresholding_the_alpha_channel"/><div class="figure-contents"><div class="mediaobject"><a id="med_id01013"/><img src="httpatomoreillycomsourcenostarchimages1456040.png.jpg" alt="After thresholding the Alpha channel"/></div></div><p class="title">Figure 14-51. After thresholding the Alpha channel</p></div><p><a id="iddle1040" class="indexterm"/><a id="iddle1082" class="indexterm"/><a id="iddle1110" class="indexterm"/><a id="iddle1646" class="indexterm"/><a id="iddle3530" class="indexterm"/><a id="iddle3531" class="indexterm"/><a id="iddle3789" class="indexterm"/><a id="iddle3790" class="indexterm"/><a id="iddle3804" class="indexterm"/><a id="iddle4922" class="indexterm"/><a id="iddle4937" class="indexterm"/>A<span class="smaller">LPHA TO</span> S<span class="smaller">ELECTION</span> transforms the Alpha channel of the layer into a selection. Because both are represented as grayscale images, this transformation is very simple, and the new selection replaces any existing one.</p><p>The final three entries in the Transparency menu allow you to choose a different selection mode when creating a selection from the Alpha channel. You can then transform the selection into a channel, but you can’t transform an Alpha channel into a channel directly.</p></div><div class="sect2" title="Converting Masks, Selections, and Channels"><div class="titlepage"><div><div><h2 class="title"><a id="converting_maskscomma_selectionscomma_an"/>Converting Masks, Selections, and Channels</h2></div></div></div><p>As you’ve seen, selections, channels, masks, and layer transparencies are strongly related. Let’s review how to convert back and forth among these.</p><p>To convert a selection to</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>a selection mask (channel): <span class="strong"><strong>Image: Select &gt; Save to Channel</strong></span>.</p></li><li class="listitem"><p>a layer mask: <span class="strong"><strong>Layers: right-click &gt; Add Layer Mask</strong></span> and choose S<span class="smaller">ELECTION</span>.</p></li><li class="listitem"><p>an <span class="inlinemediaobject"><a id="inline_id00421"/><img src="httpatomoreillycomsourcenostarchimages1454122.png.jpg" alt=""/></span>. As a side effect, the contents of the selection are placed on the clipboard.</p></li></ul></div><p>To convert a selection mask to</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>a selection: <span class="strong"><strong>Channels: right-click &gt; Channel to Selection</strong></span>.</p></li><li class="listitem"><p>a layer mask: <span class="strong"><strong>Layers: right-click &gt; Add Layer Mask</strong></span> and choose C<span class="smaller">HANNEL</span>.</p></li><li class="listitem"><p>an Alpha channel: <span class="strong"><strong>Channels: right-click &gt; Channel to Selection</strong></span> and then press <span class="inlinemediaobject"><a id="inline_id00422"/><img src="httpatomoreillycomsourcenostarchimages1454122.png.jpg" alt=""/></span>. As a side effect, the contents of the selection are placed on the clipboard.</p></li></ul></div><p>To convert a layer mask to</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>a selection: <span class="strong"><strong>Layers: right-click &gt; Mask to Selection</strong></span>.</p></li><li class="listitem"><p>a selection mask: <span class="strong"><strong>Layers: right-click &gt; Mask to Selection</strong></span> and then <span class="strong"><strong>Image: Select &gt; Save to Channel</strong></span>.</p></li><li class="listitem"><p>an Alpha channel: <span class="strong"><strong>Layers: right-click &gt; Apply Layer Mask</strong></span>.</p></li></ul></div><p>To convert an Alpha channel to</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>a selection: <span class="strong"><strong>Layers: right-click &gt; Alpha to Selection</strong></span>.</p></li><li class="listitem"><p>a selection mask: <span class="strong"><strong>Layers: right-click &gt; Alpha to Selection</strong></span> and then <span class="strong"><strong>Image: Select &gt; Save to Channel</strong></span>.</p></li><li class="listitem"><p>a layer mask: <span class="strong"><strong>Layers: right-click &gt; Add Layer Mask</strong></span> and choose L<span class="smaller">AYER</span>’<span class="smaller">S ALPHA CHANNEL</span>.</p></li></ul></div></div></div></body></html>