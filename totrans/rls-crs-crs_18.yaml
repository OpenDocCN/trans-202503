- en: Appendix A. Solutions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Chapter 1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Exercise 1 is about learning to read a file and exploring the array methods
    using the contents of the file. I’d expect to see something like this in the console
    after completing the exercise:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The output depends on the text you used.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The second exercise requires writing a little code. The following sample solves
    the problem using only methods covered so far:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This solution should print something like this:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The word “Call” appears once in the paragraph; the word “me” appears three times;
    and so on.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Using the sample code provided in Exercise 3, the complete solution looks like
    this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This combines the solutions to the first two exercises, wrapping them in a Ruby
    class.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The first exercise is about familiarizing yourself with a simple Rails application
    and the functionality provided by default. The address of the home page is *http://localhost:3000/posts*.
    As you move around the application, that address changes. The new post form is
    at */posts/new*; the first post is at */posts/1*; and the form for editing the
    first post is at */posts/1/edit*. These paths and their meaning are covered in
    [Chapter 4](ch04.html "Chapter 4. Controllers").
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you’ve never worked on a large application before, the number of files in
    a typical Rails application can seem daunting. Most editors contain some type
    of project list for opening files, as well as keyboard shortcuts for quickly searching
    for files by name. These features are invaluable when working on larger projects.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Chapter 3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The following commands generate and run the migration to add an email address
    to comments:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: You can then launch a Rails console with `bin/rails console` and create a new
    comment with an email address.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Open *app/models/comment.rb* and add the validation as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Note that I added the validation for both fields on a single line. You could
    do this, however, with two separate calls to the `validates` method.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'You can’t write a single query to determine the number of comments for each
    post, but you can iterate over all posts and count the comments. Enter something
    like this in the Rails console:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This code first finds all of the posts and then makes a count query on the comments
    table for each one.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Open the file *app/controllers/comments_controller.rb*, and find the `create`
    method.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Note that it currently uses @post.comments.create(comment_params) ➊ to initialize
    and save the new comment as part of the if statement. You need to store the new
    comment in a variable so you can use the errors method to get a list of errors
    when the save fails. Update the create method as shown here:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This code adds the errors to the existing alert. Notice I used the to_sentence
    method ➊ to convert the array of error messages to a sentence like this: “Author
    can’t be blank and Body can’t be blank.”'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Edit *app/controllers/comments_controller.rb*, and find the comment_params
    method. Add :email to the call to the permit method:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now if a user enters an email address when adding a new comment, the address
    should be stored in the database. Without this change, the `email` field is simply
    ignored.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Remove the `h1` element from *app/views/posts/index.html.erb* and update *app/views/layouts/application.html.erb,*
    as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Also change the headings in *app/views/posts/new.html.erb* and *app/ views/posts/edit.html.erb*
    to `h2` headings:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'First, add a label and text field for `:author` to the *app/views/posts/ _form.html.erb*
    partial:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Then add `:author` to the list of permitted parameters in the `post_ params`
    method at the bottom of *app/controllers/posts_controller.rb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Make the changes to *config/routes.rb* and *app/views/comments/_comment.html.erb*
    as described in the question. Here is how I would write the `destroy` action in
    *app/controllers/comments_controller.rb*:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Chapter 6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: After editing files in your application, stage your changes in Git with **`git
    add .`**, then commit these changes with **`git commit -m "`** ***`Commit Message"`***,
    and finally push the changes to Heroku with **`git push heroku master`**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you don’t already have a GitHub account, go to *[https://github.com/](https://github.com/)*
    and complete the sign-up form. Next you’ll need to choose a plan. The free plan
    includes unlimited public repositories. Once you finish the sign-up process, you
    should see the GitHub Bootcamp screen. Follow the instructions there to create
    a repository and upload your application.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Create your new application in the *code* directory you created in [Chapter 2](ch02.html
    "Chapter 2. Rails Fundamentals"), not inside the *blog* directory. Use the `rails
    new` command followed by the name of your new application. For example, to create
    an application to track your record collection, type this command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Next think about the models your application needs. In this case, you probably
    need a `Record` or `Album` model. The model needs fields such as `title`, `artist`,
    and `release_date`. Move to the *vinyl* directory, and use the `rails scaffold`
    command to generate some code to get started:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now start the Rails server and work with your new application.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In my version of Rails, the `Post` class has 58 ancestors.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Using the Ruby pretty-print method (`pp)`, you can list each ancestor on a
    separate line:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: As you scroll through the list of ancestors, you should see some names you recognize,
    such as `ActiveRecord::Associations` and `ActiveRecord::Validations`. Also, notice
    that `Post` inherits from `BasicObject`, just like every other class in Ruby.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The `cannot_`*`feature`*`!` method should be the same as the `can_`*`feature`*`!`
    method except it assigns `false` to the `@features[f]` instead of `true`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'After adding this method, create another instance of the `User` class and make
    sure the new method works as expected:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'First, look at the instance methods defined by the `Element` class:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The methods `name` and `name=` are defined as expected. Now reopen the `Element`
    class and add a call to `accessor :symbol:`
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This should create two new methods named `symbol` and `symbol=`. You can verify
    that the methods were created by calling `instance_methods` again:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: You can verify that the methods work as expected by creating an instance of
    the `Element` class and assigning a symbol with `e.symbol = "Au"`.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Specifying `dependent: :destroy` on the `belongs_to` side of the association
    causes the parent model to be destroyed when any child model is destroyed. In
    this example, destroying any `Post` also destroys the associated `User`. This
    mistake is fairly common.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The completed `Comment` model should look like this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The Rails generator adds `belongs_to` associations automatically, but it does
    not add validations.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Launch the Rails console with **`bin/rails console`**. Create a new `User`,
    `TextPost`, and `Comment`. Verify that all of the models were created. Then call
    `destroy` on the new `User` and verify that the associated `TextPost` and `Comment`
    records are also destroyed.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Note that calling `destroy` on the model does not remove it from memory ➊. The
    variable `carol` still refers to the model even though it has been deleted from
    the database. Attempting to reload the model from the database raises an `ActiveRecord::RecordNotFound`
    exception because the record for carol has been deleted ➋.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'First, edit the text post partial at *app/views/text_posts/_text_post.html.erb,*
    as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This creates a link to the text_post with the time in words such as “5 days
    ago.” Edit the image post partial at *app/views/image_posts/ _image_post.html.erb*
    with a similar change.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The only difference here is the word text_post is replaced with image_post.
    Now load the posts index page and make sure the links work correctly.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The most important part of this exercise is restricting access to the controller
    to authenticated users. Add `before_action :authenticate_user!` in *app/controllers/comments_controller.rb,*
    as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The comment partial at *app/views/comments/_comment.html.erb* shows the `name`
    of the user that created the comment and the `body` of the comment.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This partial is rendered once for each comment by `render @post.comments` in
    the post `show` view.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: First, start a Rails console with **`bin/rails console`** to see the **`password_digest`**
    for a user.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The value of `alice.password_digest` that you see will be different. Bcrypt
    automatically adds a salt to the password before generating the hash digest. I
    can’t tell the password for `alice` by looking at that value. Bcrypt seems pretty
    secure!
  prefs: []
  type: TYPE_NORMAL
- en: You can see the cookies for a site by looking at resources in your browser’s
    Developer Tools or Page Info. According to the Chrome developer tools, my current
    `_social_session` cookie is 465 bytes of alphanumeric digits like this `"M2xkVmNTaGpVaFd..."`.
    Again, I’m not able to decipher that information.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Open the `TextPost` partial at *app/views/text_posts/_text_post.html.erb*.
    It already displays the user’s `name`. Add a call to the `link_to` helper method
    before the `text_post.user.name` and also pass the `text_post.user` to the helper:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Then update the `ImagePost` partial at *app/views/image_posts/_image _post.html.erb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Finally, update the application layout at *app/views/layouts/application.html.erb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The application layout already has a check for `current_user`. Add the *Profile*
    link inside this conditional.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Open `UsersController` at *app/controllers/users_controller.rb*. Requiring authentication
    before the follow action is a one-line change using the authenticate_user! method
    you wrote in [Chapter 9](ch09.html "Chapter 9. Authentication").
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'The only: `:follow` option means anonymous users can still access the `show,
    new`, and `create` actions. Now update the user `show` view at *app/ views/users/show.html.erb*.
    I used two if statements to first verify that `current_user` is not nil, and then
    to verify that `current_user` is not equal to or already following the user being
    displayed.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: You could have also done this with a single if combining all three of the conditional
    statements.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: First, open *app/controllers/image_posts_controller.rb*, and add methods for
    the new and create actions and the private image_post_params method. These are
    similar to the corresponding methods in TextPostsController.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Next, add the new view at *app/views/image_posts/new.html.erb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Then add the form partial at *app/views/image_posts/_form.html.erb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Finally, add a button to the home page at *app/views/posts/index.html. erb*
    that links to the New Image Post form:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Refer back to [Create Post](ch10.html#create_post "Create Post") if you have
    any questions about these actions or views.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'First, add methods for the `edit` and `update` actions to the `ImagePostsController`
    at *app/controllers/image_posts_controller.rb,* as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Next, create the `edit` view at *app/views/image_posts/edit.html.erb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE41]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This view uses the form partial you created in [Chapter 10](ch10.html "Chapter 10. Testing").
    Finally, add a link to the `edit` action in the `ImagePost` partial at *app/views/image
    _posts/_image_post.html.erb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This link is wrapped in a conditional so it only appears if this image post
    was created by the current user.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Update the `PostsController` at *app/controllers/posts_controller.rb,* as shown
    in the question.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE43]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Now edit the comment partial at *app/views/comments/_comment.html.erb* and
    add a link to destroy the comment when the `@can_moderate` instance variable is
    `true`:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Be sure to add `method: :delete` to the link so the `destroy` action is called.
    Finally, add the `destroy` action to the `CommentsController` at *app/ controllers/comments_controller.rb*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE45]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This method finds the comment, calls `destroy`, and redirects back to the post
    with a message indicating success or failure.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Open the routes file at *config/routes.rb* and edit at the `logout` route:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Edit the application layout at *app/views/layouts/application.html.erb* and
    add `method: :delete` to the *Log Out* link.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE47]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now the link issues a DELETE request to log out of the application.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The show page loads the collection of comments to render and then loads the
    owner of each comment individually as the comments are rendered. You can eager
    load the comments and the owners for a post by adding `includes(comments: [:user])`
    in the `show` method in the `PostsController` at *app/controllers/posts_controller.rb:*'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Adding `includes(comments: [:user])` tells Rails to eager load the comments
    for this post and all users associated with those comments.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Open the `Comment` partial at *app/views/comments/_comment.html.erb* and add
    the cache block:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE49]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Passing an array to the `cache` method creates a cache key that combines the
    elements in the array ➊. In this case, the cache key contains the values of the
    comment’s `id` and `updated_at` fields and the value of `@can_moderate`, either
    true or false.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Open the show page at *app/views/posts/show.html.erb* and add the `cache` block.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE50]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This creates a cache key that is a combination of the cache key for `@post`,
    the word “comments,” and the value of `@can_moderate` ➊. Now the comments collection
    is displayed after a single read from the cache.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Chapter 13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You need to update the view partials for both types of posts for this exercise.
    First, edit the file *app/views/text_posts/_text_post.html.erb* and add a `debug`
    call near the bottom, as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE51]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Then edit *app/views/link_posts/_link_post.html.erb* and add a `debug` call
    near the bottom:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE52]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The easiest way to add the id and type of each post to the log is by iterating
    over the contents of the `@posts` instance variable. Edit *app/controllers/ posts_controller.rb*
    and update the `index` action.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE53]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now when you refresh the posts index page, you should see five lines similar
    to “Post 5 is a TextPost” in the log.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'To debug what happens when a user logs in to the application, you need to add
    a `debugger` call to the create action in *app/controllers/ sessions_controller.rb*:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE54]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: With this line in place, you can examine the `params` sent to this action, the
    current contents of the `session`, and the value of `user` as you move through
    this action.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This `curl` command is the same one you used earlier to create a new post, except
    I replaced the *token* with the word `fake`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE55]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Note that the status code is *401 Unauthorized* and the body contains the text
    `"HTTP Token: Access denied."`'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Text posts validate the presence of a body, so use `curl` to attempt to create
    a text post without specifying a body.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE56]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Note that the status code is *422 Unprocessable Entity* and the body contains
    a JSON representation of the errors.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Add the `show` method to *app/controllers/api/posts_controller.rb*:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE57]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This method finds the requested post and assigns it to the `@post` instance
    variable and then responds with that post. The following `curl` command verifies
    that this action is working:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE58]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Because you didn’t create a jbuilder view for this action, the default JSON
    representation for posts is returned.
  prefs: []
  type: TYPE_NORMAL
- en: Chapter 15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Edit the file *app/views/layouts/application.html.erb* to change the title
    of each page:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE59]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: After you save this change, add it to your local Git repositories staging area,
    and then commit the change with an appropriate `commit` message.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE60]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now deploy your change by entering **`bin/cap production deploy`** in your terminal.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The Ruby Toolbox at *[https://www.ruby-toolbox.com/](https://www.ruby-toolbox.com/)*
    lists hundreds of gems you can use to add features to your application. For example,
    you can let users upload files to your application. Check the Rails File Uploads
    category to find several choices, including Paperclip and CarrierWave. From there,
    you can visit the website, read the documentation, and see the source code for
    each project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to *[https://github.com/rails/rails/](https://github.com/rails/rails/)* to
    join the discussion on open issues and pull requests, and see previous commits.
    Ruby on Rails has a page at *[http://rubyonrails.org/community/](http://rubyonrails.org/community/)*
    for those looking to get involved online. You can learn about upcoming Ruby and
    Rails conferences at *[http://rubyconf.org/](http://rubyconf.org/)* and *[http://railsconf.com,/](http://railsconf.com,/)*
    respectively. I hope to see you there!
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
