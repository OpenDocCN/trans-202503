<html><head></head><body>
<h2 class="h2" id="ch18"><span epub:type="pagebreak" id="page_263"/><span class="big"><span class="blue"><strong>18</strong></span></span><br/><strong>ADVANCED TEXT MAGIC</strong></h2>&#13;
<div class="imagec"><img alt="image" src="graphics/common01.jpg"/></div>&#13;
<p class="noindent">Although pictures of blue skies and green fields are prettier to look at than a screen full of words, many useful programs, such as Facebook, Twitter, and Words with Friends, work with text. That’s why Small Basic provides the <code>Text</code> object for working with text. In this chapter, you’ll learn how to use the <code>Text</code> object to find the length of a string, extract a small portion of a string, and perform many other advanced string-processing tasks. You’ll also write your own string-processing subroutines and apply what you learn to create some interesting applications, like a pig latin translator and a word scramble game!</p>&#13;
<h3 class="h3" id="ch18lev1sec01"><span class="blue"><strong>The Text Object</strong></span></h3>&#13;
<p class="noindent">You’ve been working with strings throughout this book. To recap, a <em>string</em> is a sequence of characters that is enclosed between double quotes, such as <code>"stringY strinGy striNg strIng stRing"</code>. These characters can include letters <span epub:type="pagebreak" id="page_264"/>(both uppercase and lowercase), digits (0 to 9), and other symbols on your keyboard (such as +, –, &amp;, @, and so on). You can use strings in your programs to store names, addresses, phone numbers, book titles, names of <em>Star Trek</em> episodes, and more. The <code>Text</code> object contains many useful methods for working with strings.</p>&#13;
<p class="indent"><a href="ch18.html#ch18fig1">Figure 18-1</a> shows the complete list of the <code>Text</code> object’s methods. We’ve divided these methods into four groups that we’ll discuss in the following sections.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-01.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig1"/><em>Figure 18-1: The</em> <code><span class="codeitalic">Text</code></span> <em>object’s methods</em></p>&#13;
<h4 class="h4" id="ch18lev2sec01"><em><strong>Appending Strings and Getting Their Length</strong></em></h4>&#13;
<p class="noindent">Combining strings and finding their length is a common task in programming. Let’s look at how the <code>Text</code> object can help you out.</p>&#13;
<h5 class="h5" id="ch18lev3sec01"><strong>Appending Strings</strong></h5>&#13;
<p class="noindent">The <code>Append()</code> method can join (or <em>append</em>) two strings together, as shown in the following example:</p>&#13;
<p class="programs">str <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.Append(</span><span class="red">"He-"</span><span class="brown">,</span> <span class="red">"Man"</span><span class="brown">)</span><br/><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>str<span class="brown">)</span> <span class="green"><span class="codeitalic">' Displays: He-Man</span></span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_265"/>Earlier in the book, you learned how to join strings using the + sign. But the <code>Append()</code> method is useful when you have text that the + sign treats as numbers, as shown in the following example:</p>&#13;
<p class="programs">res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.Append(</span><span class="red">"1"</span><span class="brown">,</span> <span class="red">"5"</span><span class="brown">)</span><br/><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>res<span class="brown">)</span>       <span class="green"><span class="codeitalic">' Output: 15 (1 followed by 5)</span></span><br/><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"1"</span> <span class="brown">+</span> <span class="red">"5"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' Output: 6</span></span></p>&#13;
<p class="indent">The first statement appends the two strings (<code>"1"</code> and <code>"5"</code>) and assigns the result to the variable <code>res</code> (short for <em>result</em>). The output of the second statement shows that the string <code>"5"</code> was appended to the string <code>"1"</code>, resulting in a new string <code>"15"</code>. The third statement shows that you can’t do this concatenation using the + sign. The + operator interprets its two operands as numbers (1 and 5) and adds these numbers together, which is why the third statement displays <code>6</code>.</p>&#13;
<p class="indent">Using <code>Append()</code> is the only way to concatenate numbers in Small Basic.</p>&#13;
<h5 class="h5" id="ch18lev3sec02"><strong>Getting the Length of a String</strong></h5>&#13;
<p class="noindent">The number of characters in a string makes up its length. To find the length of a string, you can use the <code>GetLength()</code> method, as in the following example:</p>&#13;
<p class="programs">1 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetLength(</span><span class="red">""</span><span class="brown">)</span>               <span class="green"><span class="codeitalic">' res = 0 (empty string)</span></span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetLength(</span><span class="red">"Careless Bears"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = 14 (the space counts!)</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetLength(</span><span class="red">1023</span><span class="brown">)</span>             <span class="green"><span class="codeitalic">' res = 4</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetLength(</span><span class="red">-101.5</span><span class="brown">)</span>           <span class="green"><span class="codeitalic">' res = 6</span></span></p>&#13;
<p class="indent"><code>GetLength()</code> treats its argument as a string and returns the number of characters in that string. Line 1 shows that an empty string has zero length. Line 2 shows that the length of the string <code>"Careless Bears"</code> is 14, because this string contains 14 characters (spaces are characters too). Line 3 calls <code>GetLength()</code> using the number 1023 as an argument. <code>GetLength()</code> treats this number as a string (<code>"1023"</code>) and returns <code>4</code> as the length of this string. A similar process happens in line 4 for the number –101.5, where <code>GetLength()</code> returns <code>6</code> (four digits, the minus sign, and the decimal point).</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb01"><strong>TRY IT OUT 18-1</strong></p>&#13;
<p class="noindent">Write a program that prompts the user to enter an adjective. Have the program display the corresponding adverb by appending <em>ly</em> to the input. For example, if the user enters <em>mad</em>, the program displays <em>madly</em>. Will this program work for all adjectives? (Hint: consider adjectives ending in <em>y</em>, such as <em>happy</em>, or adjectives ending in <em>ic</em>, such as <em>heroic</em>.)</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec02"><span epub:type="pagebreak" id="page_266"/><em><strong>Taking Strings Apart: Substrings</strong></em></h4>&#13;
<p class="noindent">Just as you can join strings to create longer ones, you can also separate strings into smaller strings, which are called <em>substrings</em>. A substring is just a portion of a larger string. The <code>Text</code> object has six methods that let you work with substrings. Let’s look at these methods.</p>&#13;
<h5 class="h5" id="ch18lev3sec03"><strong>The IsSubText() Method</strong></h5>&#13;
<p class="noindent">You can use <code>IsSubText()</code> to find out if one string is part of another. This method takes two arguments: the string you want to search through and the substring you want to search for. It returns <code>"True"</code> or <code>"False"</code> depending on whether the substring is in the source string. Here are some examples:</p>&#13;
<p class="programs">1 myString <span class="brown">=</span> <span class="red">"The quick brown fox"</span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.IsSubText(</span>myString<span class="brown">,</span> <span class="red">"brown"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "True"</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.IsSubText(</span>myString<span class="brown">,</span> <span class="red">"BROWN"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "False"</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.IsSubText(</span>myString<span class="brown">,</span> <span class="red">"dog"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' res = "False"</span></span></p>&#13;
<p class="indent">As these examples show, <code>IsSubText()</code> is case sensitive when it searches for substrings. This is why searching for <code>"BROWN"</code> in line 3 returns <code>"False"</code>.</p>&#13;
<h5 class="h5" id="ch18lev3sec04"><strong>The EndsWith() Method</strong></h5>&#13;
<p class="noindent">Use <code>EndsWith()</code> to find out if a string ends with a given substring. Here are some examples:</p>&#13;
<p class="programs">1 myString <span class="brown">=</span> <span class="red">"The quick brown fox"</span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.EndsWith(</span>myString<span class="brown">,</span> <span class="red">"fox"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "True"</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.EndsWith(</span>myString<span class="brown">,</span> <span class="red">"x"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' res = "True"</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.EndsWith(</span>myString<span class="brown">,</span> <span class="red">"FOX"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "False"</span></span><br/>5 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.EndsWith(</span>myString<span class="brown">,</span> <span class="red">"dog"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "False"</span></span></p>&#13;
<p class="indent">Again, the string’s case matters: the search for <code>"FOX"</code> in line 4 returns <code>"False"</code>.</p>&#13;
<h5 class="h5" id="ch18lev3sec05"><strong>The StartsWith() Method</strong></h5>&#13;
<p class="noindent">Use <code>StartsWith()</code> to find out if a string starts with a given substring. Here are some examples:</p>&#13;
<p class="programs">1 myString <span class="brown">=</span> <span class="red">"The quick brown fox"</span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.StartsWith(</span>myString<span class="brown">,</span> <span class="red">"The"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "True"</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.StartsWith(</span>myString<span class="brown">,</span> <span class="red">"T"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' res = "True"</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.StartsWith(</span>myString<span class="brown">,</span> <span class="red">"the"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "False"</span></span></p>&#13;
<p class="indent">Similarly, the search for <code>"the"</code> in line 4 returns <code>"False"</code>.</p>&#13;
<h5 class="h5" id="ch18lev3sec06"><span epub:type="pagebreak" id="page_267"/><strong>The GetSubText() Method</strong></h5>&#13;
<p class="noindent">To extract text from any position in a string, you can use <code>GetSubText()</code>. This method takes three arguments: the source string to get your substring from, the starting position of the substring, and the length of the substring you want. To understand how this method works, look at <a href="ch18.html#ch18fig2">Figure 18-2</a>.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-02.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig2"/><em>Figure 18-2: Illustrating character positions in strings</em></p>&#13;
<p class="indent">The first character has a position of 1, the second character has a position of 2, and so on. Now consider the following examples:</p>&#13;
<p class="programs">1 myString <span class="brown">=</span> <span class="red">"The quick brown fox"</span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>myString<span class="brown">,</span> <span class="red">1</span><span class="brown">,</span> <span class="red">3</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' res = "The"</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>myString<span class="brown">,</span> <span class="red">0</span><span class="brown">,</span> <span class="red">3</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' res = ""</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>myString<span class="brown">,</span> <span class="red">17</span><span class="brown">,</span> <span class="red">3</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "fox"</span></span><br/>5 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>myString<span class="brown">,</span> <span class="red">17</span><span class="brown">,</span> <span class="red">4</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "fox"</span></span></p>&#13;
<p class="indent">Line 2 gets a substring of length 3 starting at position 1, which returns the string <code>"The"</code>. Line 3 fails to get a substring that starts at position 0, because the first valid position is 1. Instead, it returns an empty string. Line 4 gets the three-letter substring that starts at position 17, which returns <code>"fox"</code>. Line 5 requests a substring of length 4 starting at position 17. Because that substring extends beyond the end of the string, the length is cut short, and the method returns <code>"fox"</code>, whose length is 3.</p>&#13;
<p class="indent">You can use <code>GetSubText()</code> inside a <code>For</code> loop to access the individual characters of a string. For example, the following code writes each character of <code>strIn</code> on a new line. Enter and run this code to make sure you understand how it works:</p>&#13;
<p class="programs">strIn <span class="brown">=</span> <span class="red">"Pirate squids hate hot dogs."</span><br/><span class="purple"><span class="codestrong">For</span></span> N <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> <span class="blue1">Text</span><span class="brown">.GetLength(</span>strIn<span class="brown">)</span>  <span class="green"><span class="codeitalic">' For each character</span></span><br/>  ch <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>strIn<span class="brown">,</span> N<span class="brown">,</span> <span class="red">1</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' Gets the character at position N</span></span><br/>  <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>ch<span class="brown">)</span>          <span class="green"><span class="codeitalic">' Displays it on a new line</span></span><br/><span class="purple"><span class="codestrong">EndFor</span></span></p>&#13;
<p class="indent">The loop counter, <code>N</code>, runs from 1 to the end of the string. Each iteration requests a substring of length 1 (a single character) that starts at position <code>N</code> and displays that character.</p>&#13;
<h5 class="h5" id="ch18lev3sec07"><strong>The GetSubTextToEnd() Method</strong></h5>&#13;
<p class="noindent">The <code>GetSubTextToEnd()</code> method is similar to <code>GetSubText()</code>, except it returns a substring from one position all the way to the end of the string. It takes <span epub:type="pagebreak" id="page_268"/>two arguments: the source string that you want to get your substrings from and the starting position of the substring. Here are some examples (refer to <a href="ch18.html#ch18fig2">Figure 18-2</a> for context):</p>&#13;
<p class="programs">1 myString <span class="brown">=</span> <span class="red">"The quick brown fox"</span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubTextToEnd(</span>myString<span class="brown">,</span> <span class="red">13</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "own fox"</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubTextToEnd(</span>myString<span class="brown">,</span> <span class="red">19</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = "x"</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubTextToEnd(</span>myString<span class="brown">,</span> <span class="red">20</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = ""</span></span></p>&#13;
<p class="indent">Line 2 gets the substring starting at position 17, which returns <code>"own fox"</code>. Line 3 gets the substring starting at position 19, which returns <code>"x"</code>. Line 4 requests the substring starting at position 20. Because the source string contains only 19 characters, this method returns an empty string.</p>&#13;
<h5 class="h5" id="ch18lev3sec08"><strong>The GetIndexOf() Method</strong></h5>&#13;
<p class="noindent">You pass the <code>GetIndexOf()</code> method the substring you want to search for, and it returns the index position of that substring in the source text. Here are some examples:</p>&#13;
<p class="programs">1 myString <span class="brown">=</span> <span class="red">"The quick brown fox"</span><br/>2 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetIndexOf(</span>myString<span class="brown">,</span> <span class="red">"The"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' res = 1</span></span><br/>3 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetIndexOf(</span>myString<span class="brown">,</span> <span class="red">"quick"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = 5</span></span><br/>4 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetIndexOf(</span>myString<span class="brown">,</span> <span class="red">"QUICK"</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' res = 0</span></span><br/>5 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetIndexOf(</span>myString<span class="brown">,</span> <span class="red">"o"</span><span class="brown">)</span>     <span class="green"><span class="codeitalic">' res = 13</span></span><br/>6 res <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetIndexOf(</span>myString<span class="brown">,</span> <span class="red">"dog"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' res = 0</span></span></p>&#13;
<p class="indent">The search is case sensitive, so line 4 returns <code>0</code> because <code>"QUICK"</code> isn’t found in the source string. Line 5 requests the index of the letter <em>o</em>, but because there are two, it gives you the index of the first one it finds. The last line returns <code>0</code> because it doesn’t find <code>"dog"</code> in the source string.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb02"><strong>TRY IT OUT 18-2</strong></p>&#13;
<p class="noindent">A young boy named Franklin Roosevelt once signed letters to his mother backward: <em>Tlevesoor Nilknarf</em>. Write a program that displays the characters of an input string in reverse order. (Hint: start a loop that counts from the string’s length down to 1, and use <code>GetSubText()</code> to extract each character.)</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec03"><em><strong>Changing Case</strong></em></h4>&#13;
<p class="noindent">Sometimes you might want to display strings in uppercase or lowercase letters. The <code>ConvertToLowerCase()</code> and <code>ConvertToUpperCase()</code> methods can do that for you. Run the example in <a href="ch18.html#ch18ex1">Listing 18-1</a>.</p>&#13;
<p class="programs">1 <span class="green"><span class="codeitalic">' ChangeCase.sb</span></span><br/>2 var1 <span class="brown">=</span> <span class="red">"Ewok"</span><br/>3 lwrCase <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToLowerCase(</span>var1<span class="brown">)</span>   <span class="green"><span class="codeitalic">' lwrCase = "ewok"</span></span><br/>4 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>lwrCase<span class="brown">)</span>             <span class="green"><span class="codeitalic">' Displays: ewok</span></span><br/>5 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>var1<span class="brown">)</span>                <span class="green"><span class="codeitalic">' Displays: Ewok</span></span><br/>6 uprCase <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToUpperCase(</span>var1<span class="brown">)</span>   <span class="green"><span class="codeitalic">' uprCase = "EWOK"</span></span><br/>7 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>uprCase<span class="brown">)</span>             <span class="green"><span class="codeitalic">' Displays: EWOK</span></span><br/>8 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>var1<span class="brown">)</span>                <span class="green"><span class="codeitalic">' Displays: Ewok</span></span></p>&#13;
<p class="listcap"><a id="ch18ex1"/><em>Listing 18-1: Changing the case of a string</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_269"/>The call to <code>ConvertToLowerCase()</code> on line 3 returns the lowercase string <code>"ewok"</code>, which is displayed on line 4. The statement on line 5 shows that the original string isn’t affected by the lowercase conversion; calling <code>ConvertToLowerCase()</code> returns a brand-new string whose characters are lowercase. The <code>ConvertToUpperCase()</code> method on line 6 returns the uppercase version of <code>"EWOK"</code>, which is displayed on line 7. And line 8 also shows that the original string isn’t affected by the conversion.</p>&#13;
<p class="indent">You can use these methods to make case-insensitive string comparisons. For example, let’s say your program asks a user about their favorite <em>Shrek</em> character. If the user likes Donkey, they win 200 points; otherwise, they win 100 points. The user can enter <code>donkey</code>, <code>DONKEY</code>, <code>Donkey</code>, <code>DOnkey</code>, or any other combination of cases in response to the question. Rather than checking for all the possible combinations, you can convert the user’s response to uppercase (or lowercase) and compare the result with that new string <code>"DONKEY"</code> (or <code>"donkey"</code> if you’re using lowercase). Run the program in <a href="ch18.html#ch18ex2">Listing 18-2</a>.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' StringMatch.sb</span></span><br/> 2 <span class="purple"><span class="codestrong">While</span></span> <span class="brown">(</span><span class="red">"True"</span><span class="brown">)</span><br/> 3   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Who's your favorite Shrek character? "</span><span class="brown">)</span><br/> 4   name <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToUpperCase(</span><span class="blue1">TextWindow</span><span class="brown">.Read())</span><br/> 5   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>name <span class="brown">=</span> <span class="red">"DONKEY"</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/> 6     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"You won 200 ogre points!"</span><span class="brown">)</span><br/> 7   <span class="purple"><span class="codestrong">Else</span></span><br/> 8     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"You won 100 ogre points!"</span><span class="brown">)</span><br/> 9   <span class="purple"><span class="codestrong">EndIf</span></span><br/>10 <span class="purple"><span class="codestrong">EndWhile</span></span></p>&#13;
<p class="listcap"><a id="ch18ex2"/><em>Listing 18-2: Case-insensitive string matching</em></p>&#13;
<p class="indent">The <code>Read()</code> method on line 4 reads the text entered by the user. The user’s text is then converted to uppercase, and the result is stored in the <code>name</code> variable. Note how we used the <code>Read()</code> method directly as an argument to <code>ConvertToUpperCase()</code>; this is equivalent to the following two statements:</p>&#13;
<p class="programs">name <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.Read()</span><br/>name <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToUpperCase(</span>name<span class="brown">)</span></p>&#13;
<p class="indent">The <code>If</code> statement on line 5 compares the uppercase version of the user’s input with the literal string <code>"DONKEY"</code> and awards the user accordingly.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_270"/>Here’s an output example:</p>&#13;
<p class="programs">Who's your favorite Shrek character? <span class="codestrong">dOnkey</span><br/>You won 200 ogre points!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb03"><strong>TRY IT OUT 18-3</strong></p>&#13;
<p class="noindent">Write a program that prompts the user with a yes/no question, such as “Can you paint with all the colors of the wind?” Create a program that accepts <em>y</em>, <em>yes</em>, <em>n</em>, or <em>no</em> using any casing as valid answers. If the answer is invalid, ask the user to re-enter their answer.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec04"><em><strong>Character Coding with Unicode</strong></em></h4>&#13;
<p class="noindent">All computer data (including text) is stored as <em>binary</em> sequences of 0s and 1s. The letter <em>A</em> for example is 01000001. The mapping between a character and its binary representation is called <em>encoding</em>.</p>&#13;
<p class="indent"><em>Unicode</em> is a universal encoding scheme that lets you encode more than a million characters from many languages. Each character is assigned a unique number (called a <em>code point</em>). For example, the code point for the character <code>A</code> is 65, and the code point for the dollar sign (<code>$</code>) is 36. The <code>GetCharacterCode()</code> method returns a character’s code point. But the <code>GetCharacter()</code> method does the opposite; when you give it a character’s code point, it returns the corresponding character.</p>&#13;
<p class="indent">Run the program in <a href="ch18.html#ch18ex3">Listing 18-3</a>.</p>&#13;
<p class="programs">1 <span class="green"><span class="codeitalic">' CharCode.sb</span></span><br/>2 str <span class="brown">=</span> <span class="red">"ABab12"</span><br/>3 <span class="purple"><span class="codestrong">For</span></span> N <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> <span class="blue1">Text</span><span class="brown">.GetLength(</span>str<span class="brown">)</span><br/>4   ch <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>str<span class="brown">,</span> N<span class="brown">,</span> <span class="red">1</span><span class="brown">)</span>         <span class="green"><span class="codeitalic">' Gets the Nth character</span></span><br/>5   code <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacterCode(</span>ch<span class="brown">)</span>        <span class="green"><span class="codeitalic">' Gets its code point</span></span><br/>6   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>ch <span class="brown">+</span> <span class="red">": "</span> <span class="brown">+</span> code<span class="brown">)</span>  <span class="green"><span class="codeitalic">' Displays ch and its code point</span></span><br/>7 <span class="purple"><span class="codestrong">EndFor</span></span></p>&#13;
<p class="listcap"><a id="ch18ex3"/><em>Listing 18-3: Demonstrating the</em> <code><span class="codeitalic">GetCharacterCode()</code></span> <em>method</em></p>&#13;
<p class="indent">Line 2 defines a string that contains six characters. Line 3 starts a <code>For</code> loop that accesses each of these characters; <code>GetLength()</code> sets the upper limit of the loop. Each iteration of the loop reads one character from the string and saves it in a variable named <code>ch</code> (line 4). Then the loop gets the Unicode code point for that character and saves it in the <code>code</code> variable (line 5). Line 6 displays the character and its code point. When you run this program, you’ll see the following output:</p>&#13;
<p class="programs">A: 65<br/>B: 66<br/>a: 97<br/>b: 98<br/>1: 49<br/>2: 50</p>&#13;
<h5 class="h5" id="ch18lev3sec09"><span epub:type="pagebreak" id="page_271"/><strong>Fancy Characters</strong></h5>&#13;
<p class="noindent">Let’s explore some characters not used in English. <a href="ch18.html#ch18ex4">Listing 18-4</a> shows a simple program that displays the symbols for 140 Unicode characters, starting with the character whose code point is 9728. You can change this number to explore other Unicode symbols.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' UnicodeDemo.sb</span></span><br/> 2 <span class="blue1">GraphicsWindow</span><span class="brown">.BrushColor =</span> <span class="red">"Black"</span><br/> 3 <span class="blue1">GraphicsWindow</span><span class="brown">.FontSize =</span> <span class="red">30</span>  <span class="green"><span class="codeitalic">' Makes the font larger</span></span><br/> 4<br/> 5 code <span class="brown">=</span> <span class="red">9728</span>           <span class="green"><span class="codeitalic">' Code point for the first symbol</span></span><br/> 6 xPos <span class="brown">=</span> <span class="red">0</span>              <span class="green"><span class="codeitalic">' Horizontal position for drawing a symbol</span></span><br/> 7 yPos <span class="brown">=</span> <span class="red">0</span>              <span class="green"><span class="codeitalic">' Vertical position for drawing a symbol</span></span><br/> 8 <span class="purple"><span class="codestrong">For</span></span> row <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> <span class="red">7</span>      <span class="green"><span class="codeitalic">' Draws 7 rows</span></span><br/> 9   xPos <span class="brown">=</span> <span class="red">0</span>            <span class="green"><span class="codeitalic">' For each new row, start at the left edge</span></span><br/>10   <span class="purple"><span class="codestrong">For</span></span> col <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> <span class="red">20</span>   <span class="green"><span class="codeitalic">' 20 columns for each row</span></span><br/>11     ch <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacter(</span>code<span class="brown">)</span>              <span class="green"><span class="codeitalic">' Gets a character</span></span><br/>12     <span class="blue1">GraphicsWindow</span><span class="brown">.DrawText(</span>xPos<span class="brown">,</span> yPos<span class="brown">,</span> ch<span class="brown">)</span>   <span class="green"><span class="codeitalic">' Draws it</span></span><br/>13     code <span class="brown">=</span> code <span class="brown">+</span> <span class="red">1</span>                           <span class="green"><span class="codeitalic">' Sets to next code point</span></span><br/>14     xPos <span class="brown">=</span> xPos <span class="brown">+</span> <span class="red">30</span>                          <span class="green"><span class="codeitalic">' Leaves a horizontal space</span></span><br/>15   <span class="purple"><span class="codestrong">EndFor</span></span><br/>16   yPos <span class="brown">=</span> yPos <span class="brown">+</span> <span class="red">30</span>                            <span class="green"><span class="codeitalic">' Moves to the next row</span></span><br/>17 <span class="purple"><span class="codestrong">EndFor</span></span></p>&#13;
<p class="listcap"><a id="ch18ex4"/><em>Listing 18-4: Demonstrating Unicode characters</em></p>&#13;
<p class="indent">The outer <code>For</code> loop runs seven times (line 8). Each time the outer loop runs, the inner loop displays 20 symbols that are placed 30 pixels apart (lines 10–15). After drawing a complete row of symbols, we move the vertical drawing position down 30 pixels to draw the next row (line 16). <a href="ch18.html#ch18fig3">Figure 18-3</a> shows the output of this program.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-03.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig3"/><em>Figure 18-3: The output of</em> UnicodeDemo.sb</p>&#13;
<h5 class="h5" id="ch18lev3sec10"><span epub:type="pagebreak" id="page_272"/><strong>More on Code Points</strong></h5>&#13;
<p class="noindent">The Unicode code points for lowercase letters are consecutive integers from 97 (<em>a</em>) to 122 (<em>z</em>). Similarly, the code points for uppercase letters range from 65 (<em>A</em>) to 90 (<em>Z</em>). The code point for a lowercase <em>a</em> is greater than the code point for an uppercase <em>A</em>, and the difference between the code points for <em>a</em> and <em>A</em> (97 – 65 = 32) is the same as the difference between the code points for <em>b</em> and <em>B</em> (98 – 66 = 32), and so on. When given the code point for a lowercase letter, which we’ll represent as <code>ch</code>, the code point for its corresponding uppercase letter is 65 + (<code>ch</code> – 97). Here’s the formula:</p>&#13;
<p class="programs">code for uppercase ch = code(A) + (code for lowercase ch – code(a))</p>&#13;
<p class="indent">Now that you know that each character in a string is identified by a code point, you can perform many useful operations on strings. The following examples show what you can do.</p>&#13;
<h5 class="h5" id="ch18lev3sec11"><strong>Displaying a Quotation Mark</strong></h5>&#13;
<p class="noindent">Let’s say you want to display the string <code>"Bazinga"</code> with the double quotes included in the output. If you write <code>TextWindow.WriteLine("Bazinga")</code>, Small Basic displays <code>Bazinga</code> without the quotation marks because the quotation marks identify the start and end of a string. But Small Basic returns a syntax error if you write <code>TextWindow.WriteLine(""Bazinga"")</code>. So how do you display the quotation marks? By using the quotation mark’s code point, you can append the quotation mark characters to the string, as shown in the following code snippet:</p>&#13;
<p class="programs">QUO <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacter(</span><span class="red">34</span><span class="brown">)</span>                 <span class="green"><span class="codeitalic">' Gets the double quotation mark</span></span><br/><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>QUO <span class="brown">+</span> <span class="red">"Bazinga"</span> <span class="brown">+</span> QUO<span class="brown">)</span> <span class="green"><span class="codeitalic">' Output: "Bazinga"</span></span></p>&#13;
<p class="indent">The first statement gets the quotation mark character from its Unicode code point (34) and assigns it to the variable <code>QUO</code>. The second statement inserts the string <code>"Bazinga"</code> between two <code>QUO</code> characters to output the desired result.</p>&#13;
<h5 class="h5" id="ch18lev3sec12"><strong>Creating a Multiline String</strong></h5>&#13;
<p class="noindent">You can create a multiline string by embedding the <em>line feed</em> character (code point 10) into a string. Enter the following code snippet as an example:</p>&#13;
<p class="programs">LF <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacter(</span><span class="red">10</span><span class="brown">)</span>                     <span class="green"><span class="codeitalic">' Code for line feed</span></span><br/><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Line1"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"Line2"</span><span class="brown">)</span>   <span class="green"><span class="codeitalic">' Displays two lines</span></span></p>&#13;
<p class="indent">When you run this code, the two strings, <code>"Line1"</code> and <code>"Line2"</code>, are displayed on two lines. The result is identical to what you get when you use the following two statements:</p>&#13;
<p class="programs"><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Line1"</span><span class="brown">)</span><br/><span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Line2"</span><span class="brown">)</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_273"/>Armed with the knowledge you’ve gained so far, you’re ready to create full-sized programs that use strings in all kinds of fancy ways!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb04"><strong>TRY IT OUT 18-4</strong></p>&#13;
<p class="noindent">The following program displays the letters of the English alphabet. Explain how the program works.</p>&#13;
<p class="programs"><span class="purple"><span class="codestrong">For</span></span> code <span class="brown">=</span> <span class="red">65</span> <span class="purple"><span class="codestrong">To</span></span> <span class="red">90</span><br/>  ch <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacter(</span>code<span class="brown">)</span><br/>  <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>ch<span class="brown">)</span><br/><span class="purple"><span class="codestrong">EndFor</span></span></p>&#13;
</div>&#13;
<h3 class="h3" id="ch18lev1sec02"><span class="blue"><strong>Practical Examples with Strings</strong></span></h3>&#13;
<p class="noindent">Earlier you learned how to use <code>GetLength()</code> to get a string’s length and <code>GetSubText()</code> to access individual characters in a string. When you use these two methods with a <code>For</code> loop, you can count special characters, examine multiple characters, and do several other useful tasks with strings. Let’s explore some examples!</p>&#13;
<h4 class="h4" id="ch18lev2sec05"><em><strong>Counting Special Characters</strong></em></h4>&#13;
<p class="noindent"><a href="ch18.html#ch18ex5">Listing 18-5</a> shows a program that counts the number of vowels in a string. It asks the user to enter a string and then counts and displays the number of vowels in that string.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' VowelCount.sb</span></span><br/> 2 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Enter a sentence: "</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Prompts the user for text</span></span><br/> 3 str <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.Read()</span> <span class="green"><span class="codeitalic">' Reads text entered by the user</span></span><br/> 4<br/> 5 count <span class="brown">=</span> <span class="red">0</span>               <span class="green"><span class="codeitalic">' Sets vowel count to 0 (so far)</span></span><br/> 6 <span class="purple"><span class="codestrong">For</span></span> N <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> <span class="blue1">Text</span><span class="brown">.GetLength(</span>str<span class="brown">)</span>        <span class="green"><span class="codeitalic">' Checks all characters</span></span><br/> 7   ch <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>str<span class="brown">,</span> N<span class="brown">,</span> <span class="red">1</span><span class="brown">)</span>       <span class="green"><span class="codeitalic">' Gets Nth character</span></span><br/> 8   ch <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToUpperCase(</span>ch<span class="brown">)</span>      <span class="green"><span class="codeitalic">' Makes it uppercase</span></span><br/> 9   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">((</span>ch <span class="brown">=</span> <span class="red">"A"</span><span class="brown">) Or (</span>ch <span class="brown">=</span> <span class="red">"E"</span><span class="brown">) Or (</span>ch <span class="brown">=</span> <span class="red">"I"</span><span class="brown">) Or (</span>ch <span class="brown">=</span> <span class="red">"O"</span><span class="brown">) Or (</span>ch <span class="brown">=</span> <span class="red">"U"</span><span class="brown">))</span> <span class="purple"><span class="codestrong">Then</span></span><br/>10     count <span class="brown">=</span> count <span class="brown">+</span> <span class="red">1</span>  <span class="green"><span class="codeitalic">' If it finds a vowel, increments count</span></span><br/>11   <span class="purple"><span class="codestrong">EndIf</span></span><br/>12 <span class="purple"><span class="codestrong">EndFor</span></span><br/>13 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Your sentence contains ["</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' Shows result</span></span><br/>14 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>count <span class="brown">+</span> <span class="red">"] vowels."</span><span class="brown">)</span></p>&#13;
<p class="listcap"><a id="ch18ex5"/><em>Listing 18-5: Counting the number of vowels in a string</em></p>&#13;
<p class="indent">After getting the user’s input (lines 2–3), the program initializes the <code>count</code> variable to 0, because no vowels have been found so far (line 5). Then a loop starts to check the characters of the input string one by one (line 6). The loop counter <code>N</code> points to the <em>N</em>th character of the string.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_274"/>Line 7 gets the <em>N</em>th character of the input string using <code>GetSubText()</code> and assigns it to the variable <code>ch</code> (short for character). The code then converts the character to uppercase (line 8) and compares that uppercase letter with the vowel characters (line 9). If the character is a vowel, <code>count</code> increases by 1 (line 10). When the loop ends, the program displays the number of vowels counted (lines 13–14). Here’s a sample output from this program:</p>&#13;
<p class="programs">Enter a sentence: <span class="codestrong">Small Basic is fun</span><br/>Your sentence contains [5] vowels.<br/><br/>Enter a sentence: <span class="codestrong">Giants leave nasty diapers.</span><br/>Your sentence contains [9] vowels.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb05"><strong>TRY IT OUT 18-5</strong></p>&#13;
<p class="noindent">Convert the code in <a href="ch18.html#ch18ex5">Listing 18-5</a> into a game for two players. The first player enters a word, and the second player has to guess the number of vowels in the word. Then the players alternate turns. A player scores one point for each correct guess. End the game after 10 rounds and display the winner.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec06"><em><strong>Palindrome Number Checker</strong></em></h4>&#13;
<p class="noindent">In this section, we’ll write a program that checks whether an integer entered by a user is a <em>palindrome</em>. A palindrome is a number, word, or phrase that reads the same backward and forward. For example, <em>1234321</em> and <em>1122332211</em> are palindromes. Likewise, <em>racecar</em>, <em>Hannah</em>, and <em>Bob</em> are also palindromes.</p>&#13;
<p class="indent">Let’s look at the input number <code>12344321</code> shown in <a href="ch18.html#ch18fig4">Figure 18-4</a>.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-04.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig4"/><em>Figure 18-4: Using two variables to check whether a number is a palindrome</em></p>&#13;
<p class="indent">To check whether this number is a palindrome, you need to compare the first and eighth digits, the second and seventh digits, the third and <span epub:type="pagebreak" id="page_275"/>sixth digits, and so on. If any two digits in the comparison aren’t equal, the number isn’t a palindrome. As the figure illustrates, you can access the digits you want to compare by using two variables (<code>pos1</code> and <code>pos2</code>), which move in opposite directions. The first variable (<code>pos1</code>) starts at the first digit and moves forward, and the second variable (<code>pos2</code>) starts at the last digit and moves backward. The number of required comparisons is at most one-half the number of digits in the input number. In this example, you need at most four comparisons because the input number has eight digits. The same logic applies if the input integer has an odd number of digits, because the digit in the middle of the number doesn’t need to be compared.</p>&#13;
<p class="indent"><a href="ch18.html#ch18ex6">Listing 18-6</a> shows the complete program. The comments should help you understand how the program works.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' Palindrome.sb</span></span><br/> 2 Again<span class="brown">:</span><br/> 3 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">""</span><span class="brown">)</span><br/> 4 <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Enter a number: "</span><span class="brown">)</span><br/> 5 ans <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.ReadNumber()</span>          <span class="green"><span class="codeitalic">' Saves user's input in ans</span></span><br/> 6<br/> 7 length <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetLength(</span>ans<span class="brown">)</span>           <span class="green"><span class="codeitalic">' Number of digits of input number</span></span><br/> 8 pos1 <span class="brown">=</span> <span class="red">1</span>                               <span class="green"><span class="codeitalic">' Sets pos1 to read first digit</span></span><br/> 9 pos2 <span class="brown">=</span> length                          <span class="green"><span class="codeitalic">' Sets pos2 to read last digit</span></span><br/>10 <span class="purple"><span class="codestrong">For</span></span> N <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> <span class="brown">(</span>length <span class="brown">/</span> <span class="red">2</span><span class="brown">)</span>              <span class="green"><span class="codeitalic">' Performs (length/2) comparisons</span></span><br/>11   ch1 <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>ans<span class="brown">,</span> pos1<span class="brown">,</span> <span class="red">1</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Reads digit at position pos1</span></span><br/>12   ch2 <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>ans<span class="brown">,</span> pos2<span class="brown">,</span> <span class="red">1</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Reads digit at position pos2</span></span><br/>13   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>ch1 <span class="brown">&lt;&gt;</span> ch2<span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span>                 <span class="green"><span class="codeitalic">' If not equal, no need to continue</span></span><br/>14     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>ans <span class="brown">+</span> <span class="red">" isn't a palindrome."</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Shows result</span></span><br/>15     <span class="purple"><span class="codestrong">Goto</span></span> Again<br/>16   <span class="purple"><span class="codestrong">EndIf</span></span><br/>17 <span class="purple"><span class="codestrong">EndFor</span></span><br/>18<br/>19 <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>ans <span class="brown">+</span> <span class="red">" is a palindrome."</span><span class="brown">)</span><br/>20 <span class="purple"><span class="codestrong">Goto</span></span> Again</p>&#13;
<p class="listcap"><a id="ch18ex6"/><em>Listing 18-6: Testing whether a number input by the user is a palindrome</em></p>&#13;
<p class="indent">Here’s a sample run of this program:</p>&#13;
<p class="programs">Enter a number: <span class="codestrong">1234321</span><br/>1234321 is a palindrome.<br/><br/>Enter a number: <span class="codestrong">12345678</span><br/>12345678 isn't a palindrome.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb06"><strong>TRY IT OUT 18-6</strong></p>&#13;
<p class="noindent">Another way to create the program in <a href="ch18.html#ch18ex6">Listing 18-6</a> is to reverse the input string and then compare the reversed string with the original. Create a new palindromechecker program using this method.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec07"><span epub:type="pagebreak" id="page_276"/><em><strong>Igpay Atinlay</strong></em></h4>&#13;
<p class="noindent">Let’s teach the computer a language game called <em>pig latin</em>. The rules for creating pig latin words are simple. To convert a word into pig latin, move the first letter to the end and add the letters <em>ay</em> after it. So, the word <em>talk</em> becomes <em>alktay</em>, <em>fun</em> becomes <em>unfay</em>, and so on. Can you decipher the original title of this section?</p>&#13;
<p class="indent"><a href="ch18.html#ch18fig5">Figure 18-5</a> shows the strategy you’ll use to convert a word into pig latin, using the word <em>basic</em>.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-05.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig5"/><em>Figure 18-5: Translating an English word into pig latin</em></p>&#13;
<p class="indent">You first extract the substring from the second character to the end and assign it to the output string. You then add the first letter in the input string to the output, followed by <em>ay</em>. Enter the code in <a href="ch18.html#ch18ex7">Listing 18-7</a> to implement these steps.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' PigLatin.sb</span></span><br/> 2 <span class="blue1">TextWindow</span><span class="brown">.Title =</span> <span class="red">"Pig Latin"</span><br/> 3<br/> 4 <span class="purple"><span class="codestrong">While</span></span> <span class="brown">(</span><span class="red">"True"</span><span class="brown">)</span><br/> 5   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Enter a word: "</span><span class="brown">)</span><br/> 6   word <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.Read()</span><br/> 7<br/> 8   pigLatin <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubTextToEnd(</span>word<span class="brown">,</span> <span class="red">2</span><span class="brown">)</span>          <span class="green"><span class="codeitalic">' Gets characters 2 to end</span></span><br/> 9   pigLatin <span class="brown">=</span> pigLatin <span class="brown">+</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>word<span class="brown">,</span> <span class="red">1</span><span class="brown">,</span> <span class="red">1</span><span class="brown">)</span> <span class="green"><span class="codeitalic">' Appends first character</span></span><br/>10   pigLatin <span class="brown">=</span> pigLatin <span class="brown">+</span> <span class="red">"ay"</span>                        <span class="green"><span class="codeitalic">' Appends "ay"</span></span><br/>11   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span>pigLatin<span class="brown">)</span>                    <span class="green"><span class="codeitalic">' Displays the output</span></span><br/>12   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">""</span><span class="brown">)</span><br/>13 <span class="purple"><span class="codestrong">EndWhile</span></span></p>&#13;
<p class="listcap"><a id="ch18ex7"/><em>Listing 18-7: Converting a word entered by the user into pig latin</em></p>&#13;
<p class="indent">The program runs an infinite loop to allow the user to try different words (line 4). After reading the input word from the user (line 6), we extract the substring that starts at position 2 (that is, from the second character to the end of the input word) and assign it to <code>pigLatin</code>. Then we extract the first letter from <code>word</code> and append it to <code>pigLatin</code> (line 9), followed by <code>ay</code> (line 10). We display the pig latin word (line 11), followed by an empty line (line 12) and go for another round. <em>Ongratulationscay! Ouyay inishedfay ouryay rogrampay!</em></p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb07"><span epub:type="pagebreak" id="page_277"/><strong>TRY IT OUT 18-7</strong></p>&#13;
<p class="noindent">Write a program that takes a pig latin word as input and shows its original English word.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec08"><em><strong>Fix My Spelling</strong></em></h4>&#13;
<p class="noindent">Now we’ll develop a game that displays misspelled words and asks the player to enter the correct spelling. The game creates misspelled words by inserting a random letter at a random position in an English word. There could be more than one correct spelling of misspelled simple words. For example, if the game displays <em>mwall</em>, either <em>mall</em> or <em>wall</em> could be correct. To keep the game simple, we’ll ignore that possibility and insist on a particular spelling for the correct answer.</p>&#13;
<p class="indent">First, we select the word to be misspelled from a predefined array of words and save the selected word in a variable named <code>strIn</code>. We then pick a random character <code>randChar</code> to insert into <code>strIn</code>. The insertion position <code>charPos</code> is a random number between 1 and the length of <code>strIn</code>. <a href="ch18.html#ch18fig6">Figure 18-6</a> shows the process of generating the misspelled word <code>hewlp</code>.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-06.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig6"/><em>Figure 18-6: Illustrating the process of generating misspelled words</em></p>&#13;
<p class="indent">We first extract the substring from letter 1 to the letter at position <code>charPos – 1</code> and assign it to <code>strOut</code> (because <code>charPos</code> is <code>3</code>, this makes <code>strOut = "he"</code>). We then append <code>randChar</code> to <code>strOut</code> (this makes <code>strOut = "hew"</code>). We extract the substring from position <code>charPos</code> to the end (<code>"lp"</code> in this case) and append it to <code>strOut</code> (this makes <code>strOut = "hewlp"</code>). <a href="ch18.html#ch18ex8">Listing 18-8</a> shows the complete program. Make sure you download and open <em>FixMySpelling.sb</em> from this chapter’s folder to get the full list of the words we wrote for this program.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' FixMySpelling.sb</span></span><br/> 2 words <span class="brown">=</span> <span class="red">"1=mountain;2=valley;...;22=animation;"</span> <span class="green"><span class="codeitalic">' See file for full list</span></span><br/> 3<br/> 4 <span class="purple"><span class="codestrong">While</span></span> <span class="brown">(</span><span class="red">"True"</span><span class="brown">)</span>      <span class="green"><span class="codeitalic">' Runs forever</span></span><br/> 5   strIn <span class="brown">=</span> words[<span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="blue1">Array</span><span class="brown">.GetItemCount(</span>words<span class="brown">))</span>]<br/> 6   randChar <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacter(</span><span class="red">96</span> <span class="brown">+</span> <span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="red">26</span><span class="brown">))</span><br/> 7   charPos <span class="brown">=</span> <span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="blue1">Text</span><span class="brown">.GetLength(</span>strIn<span class="brown">))</span><br/> 8<br/> 9   strOut <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>strIn<span class="brown">,</span> <span class="red">1</span><span class="brown">,</span> charPos <span class="brown">-</span> <span class="red">1</span><span class="brown">)</span><br/>10   strOut <span class="brown">=</span> strOut <span class="brown">+</span> randChar<br/>11   strOut <span class="brown">=</span> strOut <span class="brown">+</span> <span class="blue1">Text</span><span class="brown">.GetSubTextToEnd(</span>strIn<span class="brown">,</span> charPos<span class="brown">)</span><br/>12<br/>13   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Enter correct spelling for ["</span> <span class="brown">+</span> strOut <span class="brown">+</span> <span class="red">"]: "</span><span class="brown">)</span><br/>14   ans <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.Read()</span><br/>15   ans <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToLowerCase(</span>ans<span class="brown">)</span><br/>16   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>ans <span class="brown">=</span> strIn<span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>17     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Good Job!"</span><span class="brown">)</span><br/>18   <span class="purple"><span class="codestrong">Else</span></span><br/>19     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Incorrect. It is "</span> <span class="brown">+</span> strIn <span class="brown">+</span> <span class="red">"."</span><span class="brown">)</span><br/>20   <span class="purple"><span class="codestrong">EndIf</span></span><br/>21   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">""</span><span class="brown">)</span><br/>22 <span class="purple"><span class="codestrong">EndWhile</span></span></p>&#13;
<p class="listcap"><a id="ch18ex8"/><em>Listing 18-8: Creating misspelled words and asking the player to fix them</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_278"/>The <code>words</code> array contains the words for this game (line 2). The program randomly picks a word from the <code>words</code> array and saves that word as <code>strIn</code> (line 5). Note how we used the array’s item count to set the upper limit of the random number. The program then selects a random letter, <code>randChar</code>, from the alphabet (line 6). It does that by getting a random number from 1 to 26 and adding 96 to it; this gives you a random number between 97 (the code point for letter <em>a</em>) and 122 (the code point for letter <em>z</em>). Next, the program picks a random position, <code>charPos</code>, in <code>strIn</code> (line 7): this is the position where the random character is inserted. Then the program creates the misspelled word and stores it in <code>strOut</code> (lines 9–11).</p>&#13;
<p class="indent">In line 13, the program asks the player to enter the correct spelling. It reads the user’s answer (line 14) and converts it to lowercase (line 15). It then compares the answer with the correct word (line 16). If the player’s answer matches the original word, the game displays <code>Good Job!</code> (line 17). Otherwise, the game displays an error message and shows the correct spelling (line 19). In both cases, the program ends by displaying an empty line (line 21), and the loop repeats to give the user a new misspelled word.</p>&#13;
<p class="indent">Here’s a sample run of this program:</p>&#13;
<p class="programs">Enter correct spelling for [mairror]: <span class="codestrong">miror</span><br/>Incorrect. It is mirror.<br/><br/>Enter correct spelling for [inteorface]: <span class="codestrong">interface</span><br/>Good Job!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb08"><strong>TRY IT OUT 18-8</strong></p>&#13;
<p class="noindent">Update the program in <a href="ch18.html#ch18ex8">Listing 18-8</a> so the misspelled word contains two additional random letters instead of just one random letter. Also, add more words to the list for more variety.</p>&#13;
</div>&#13;
<h4 class="h4" id="ch18lev2sec09"><em><strong>Unscramble</strong></em></h4>&#13;
<p class="noindent">Now we’ll create a word scramble game. The program starts with an English word, scrambles the letters, displays the scrambled word to the player, and asks them to guess the original word.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_279"/><a href="ch18.html#ch18ex9">Listing 18-9</a> shows the main part of the program. Open <em>Unscramble.sb</em> from this chapter’s folder for the full list of words.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' Unscramble.sb</span></span><br/> 2 words <span class="brown">=</span> <span class="red">"1=mountain;2=valley;...;22=animation;"</span> <span class="green"><span class="codeitalic">' See file for full list</span></span><br/> 3<br/> 4 <span class="purple"><span class="codestrong">While</span></span> <span class="brown">(</span><span class="red">"True"</span><span class="brown">)</span><br/> 5   strIn <span class="brown">=</span> words[<span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span><span class="blue1">Array</span><span class="brown">.GetItemCount(</span>words<span class="brown">))</span>]<br/> 6   Scramble<span class="brown">()</span>  <span class="green"><span class="codeitalic">' Returns strOut (a scrambled version of strIn)</span></span><br/> 7<br/> 8   <span class="blue1">TextWindow</span><span class="brown">.Write(</span><span class="red">"Unscramble ["</span> <span class="brown">+</span> strOut <span class="brown">+</span> <span class="red">"]: "</span><span class="brown">)</span><br/> 9   ans <span class="brown">=</span> <span class="blue1">TextWindow</span><span class="brown">.Read()</span><br/>10   ans <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.ConvertToLowerCase(</span>ans<span class="brown">)</span><br/>11<br/>12   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>ans <span class="brown">=</span> strIn<span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>13     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"Good Job!"</span><span class="brown">)</span><br/>14   <span class="purple"><span class="codestrong">Else</span></span><br/>15     <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">"No. It is "</span> <span class="brown">+</span> strIn <span class="brown">+</span> <span class="red">"."</span><span class="brown">)</span><br/>16   <span class="purple"><span class="codestrong">EndIf</span></span><br/>17   <span class="blue1">TextWindow</span><span class="brown">.WriteLine(</span><span class="red">""</span><span class="brown">)</span><br/>18 <span class="purple"><span class="codestrong">EndWhile</span></span></p>&#13;
<p class="listcap"><a id="ch18ex9"/><em>Listing 18-9: Scrambling words and asking the player to unscramble them</em></p>&#13;
<p class="indent">The <code>words</code> array contains the words for this game (line 2). The program randomly picks a word from this array and saves that word as <code>strIn</code> (line 5). It then makes a call to <code>Scramble()</code> to produce <code>strOut</code>, a scrambled version of <code>strIn</code> (line 6): we’ll add the <code>Scramble()</code> subroutine in a moment. Next, the program asks the player to unscramble <code>strOut</code> (line 8). It reads their answer (line 9) and converts it to lowercase (line 10). It then compares the player’s answer with the correct word (line 12). If the player’s answer matches the original word, the game displays <code>Good Job!</code> (line 13). Otherwise, the game displays the correct word (line 15). In both cases, the program ends by displaying an empty line (line 17) to separate the rounds and the loop repeats.</p>&#13;
<p class="indent">Now let’s look at the <code>Scramble()</code> subroutine, which shuffles the characters of a string into a random order. The caller sets the input string (<code>strIn</code>), and the subroutine returns a new string (<code>strOut</code>) that contains the characters of <code>strIn</code> shuffled around. <a href="ch18.html#ch18ex10">Listing 18-10</a> shows this subroutine.</p>&#13;
<p class="programs"> 1 <span class="purple"><span class="codestrong">Sub</span></span> Scramble                                <span class="green"><span class="codeitalic">' Scramble subroutine</span></span><br/> 2   len <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetLength(</span>strIn<span class="brown">)</span><br/> 3   <span class="purple"><span class="codestrong">For</span></span> N <span class="brown">=</span> <span class="red">1</span> <span class="purple"><span class="codestrong">To</span></span> len                          <span class="green"><span class="codeitalic">' Loops up to length of word</span></span><br/> 4     char[N] <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetSubText(</span>strIn<span class="brown">,</span> N<span class="brown">,</span> <span class="red">1</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Saves each letter into an array</span></span><br/> 5   <span class="purple"><span class="codestrong">EndFor</span></span><br/> 6<br/> 7   strout <span class="brown">=</span> <span class="red">""</span>                               <span class="green"><span class="codeitalic">' Empties the output string</span></span><br/> 8   <span class="purple"><span class="codestrong">While</span></span> <span class="brown">(</span><span class="blue1">Text</span><span class="brown">.GetLength(</span>strout<span class="brown">)&lt;</span> len<span class="brown">)</span><br/> 9     pos <span class="brown">=</span> <span class="blue1">Math</span><span class="brown">.GetRandomNumber(</span>len<span class="brown">)</span>         <span class="green"><span class="codeitalic">' Picks where to place the letter</span></span><br/>10     <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>char[pos] <span class="brown">&lt;&gt;</span> <span class="red">""</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>11       strout <span class="brown">=</span> strout <span class="brown">+</span> char[pos]           <span class="green"><span class="codeitalic">' Adds in the extra letter</span></span><br/>12       char[pos] <span class="brown">=</span> <span class="red">""</span>                        <span class="green"><span class="codeitalic">' Empties the element</span></span><br/>13     <span class="purple"><span class="codestrong">EndIf</span></span><br/>14   <span class="purple"><span class="codestrong">EndWhile</span></span><br/>15 <span class="purple"><span class="codestrong">EndSub</span></span></p>&#13;
<p class="listcap"><a id="ch18ex10"/><em>Listing 18-10: Word-scrambling subroutine</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_280"/>The subroutine saves the length of the input string into <code>len</code> (line 2). It then uses a <code>For</code> loop to save the individual letters of <code>strIn</code> into an array named <code>char</code> (lines 3–5). It empties the output string, <code>strOut</code>, and starts a <code>While</code> loop to assemble <code>strOut</code> letter by letter (lines 7–14). The <code>While</code> loop runs until <code>strOut</code> has the same length as <code>strIn</code> (which means that we’ve added all the letters of <code>strIn</code>). Each iteration of the loop picks a random element from the <code>char</code> array (line 9). If that element is empty, we loop again to pick another one. Otherwise, we append the selected letter to <code>strOut</code> (line 11) and empty that element to indicate that we’ve used it (to prevent using it again) in line 12. <em>Ouy fishendi eth egma!</em></p>&#13;
<p class="indent">Here’s a sample run of this program:</p>&#13;
<p class="programs">Unscramble [lalvey]: <span class="codestrong">lovely</span><br/>No. It is valley.</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb09"><strong>TRY IT OUT 18-9</strong></p>&#13;
<p class="noindent">Try to update the word-scrambling game using the skills you learned in previous chapters. Make the game last 10 rounds and then display the user’s score: how many words were unscrambled correctly out of the 10? Next, add 28 more words to unscramble so you have a total of 50. Then show the game to your friends and see who can get the best score!</p>&#13;
</div>&#13;
<h3 class="h3" id="ch18lev1sec03"><span class="blue"><strong>Rhyme Time: The House That Jack Built</strong></span></h3>&#13;
<p class="noindent">Let’s finish this chapter with a program that displays a popular British nursery rhyme and cumulative tale. In a <em>cumulative tale</em>, an action repeats and builds up as the tale progresses. <a href="ch18.html#ch18fig7">Figure 18-7</a> shows this program in progress; more rhyme lines appear each time a user clicks the Next button.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_281"/><img alt="image" src="graphics/f18-07.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig7"/><em>Figure 18-7: The House That Jack Built rhyme</em></p>&#13;
<p class="indent">Examine this rhyme closely, and you’ll notice the common strings among the story pages. Study <a href="ch18.html#ch18fig8">Figure 18-8</a> to understand how to create this rhyme by appending short strings at each stage.</p>&#13;
<div class="image"><img alt="image" src="graphics/f18-08.jpg"/></div>&#13;
<p class="figcap"><a id="ch18fig8"/><em>Figure 18-8: The strings that make up the rhyme</em></p>&#13;
<p class="indent">For example, let’s trace the third row in this figure. Following the third arrow, you’ll get the following:</p>&#13;
<p class="programs">This is the Rat,<br/>That ate</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_282"/>When you continue with the second arrow, you’ll get the following:</p>&#13;
<p class="programs">This is the Rat,<br/>That ate the Malt,<br/>That lay in</p>&#13;
<p class="indent">And, when you follow the first arrow, you’ll get the full rhyme that will appear on the third page:</p>&#13;
<p class="programs">This is the Rat,<br/>That ate the Malt,<br/>That lay in the House that Jack built.</p>&#13;
<p class="indent">Open the file <em>JackHouse_Incomplete.sb</em> from this chapter’s folder. The file contains the main program in <a href="ch18.html#ch18ex11">Listing 18-11</a> and a placeholder for the <code>OnButtonClicked()</code> subroutine, which we’ll add in a moment. The folder also contains the 11 background images (<em>Page1.png</em>, <em>Page2.png</em>, ..., <em>Page11.png</em>) that we’ll display for each page of the rhyme.</p>&#13;
<p class="programs"> 1 <span class="green"><span class="codeitalic">' JackHouse.sb</span></span><br/> 2 <span class="blue1">GraphicsWindow</span><span class="brown">.Title =</span> <span class="red">"The House That Jack Built"</span><br/> 3 <span class="blue1">GraphicsWindow</span><span class="brown">.CanResize =</span> <span class="red">"False"</span><br/> 4 <span class="blue1">GraphicsWindow</span><span class="brown">.Width =</span> <span class="red">480</span><br/> 5 <span class="blue1">GraphicsWindow</span><span class="brown">.Height =</span> <span class="red">360</span><br/> 6 <span class="blue1">GraphicsWindow</span><span class="brown">.FontBold =</span> <span class="red">"False"</span><br/> 7 <span class="blue1">GraphicsWindow</span><span class="brown">.FontSize =</span> <span class="red">20</span><br/> 8 <span class="blue1">GraphicsWindow</span><span class="brown">.FontName =</span> <span class="red">"Times New Roman"</span><br/> 9<br/>10 LF <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.GetCharacter(</span><span class="red">10</span><span class="brown">)</span>  <span class="green"><span class="codeitalic">' Code for line feed</span></span><br/>11<br/>12 rhyme[<span class="red">1</span>] <span class="brown">=</span> <span class="red">"the Farmer who sowed the corn,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That fed "</span><br/>13 rhyme[<span class="red">2</span>] <span class="brown">=</span> <span class="red">"the Cock that crowed in the morn,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That waked "</span><br/>14 rhyme[<span class="red">3</span>] <span class="brown">=</span> <span class="red">"the Priest all shaven and shorn,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That married "</span><br/>15 rhyme[<span class="red">4</span>] <span class="brown">=</span> <span class="red">"the Man all tattered and torn,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That kissed "</span><br/>16 rhyme[<span class="red">5</span>] <span class="brown">=</span> <span class="red">"the Maiden all forlorn,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That milked "</span><br/>17 rhyme[<span class="red">6</span>] <span class="brown">=</span> <span class="red">"the Cow with the crumpled horn,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That tossed "</span><br/>18 rhyme[<span class="red">7</span>] <span class="brown">=</span> <span class="red">"the Dog,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That worried "</span><br/>19 rhyme[<span class="red">8</span>] <span class="brown">=</span> <span class="red">"the Cat,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That killed "</span><br/>20 rhyme[<span class="red">9</span>] <span class="brown">=</span> <span class="red">"the Rat,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That ate "</span><br/>21 rhyme[<span class="red">10</span>] <span class="brown">=</span> <span class="red">"the Malt,"</span> <span class="brown">+</span> LF <span class="brown">+</span> <span class="red">"That lay in "</span><br/>22 rhyme[<span class="red">11</span>] <span class="brown">=</span> <span class="red">"the House that Jack built."</span><br/>23<br/>24 <span class="blue1">Controls</span><span class="brown">.AddButton(</span><span class="red">"Next"</span><span class="brown">,</span> <span class="red">420</span><span class="brown">,</span> <span class="red">320</span><span class="brown">)</span><br/>25 <span class="blue1">Controls</span><span class="brown">.ButtonClicked =</span> OnButtonClicked<br/>26 nextLine <span class="brown">=</span> <span class="red">11</span><br/>27 OnButtonClicked<span class="brown">()</span></p>&#13;
<p class="listcap"><a id="ch18ex11"/><em>Listing 18-11: The main part of the House That Jack Built program</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_283"/>Lines 2–8 set up the <code>GraphicsWindow</code> object. Line 10 defines the line feed character (for appending new lines to the strings). Lines 12–22 define the <code>rhyme</code> array, which contains the strings for this rhyme. Note how the elements of this array relate to the boxes in <a href="ch18.html#ch18fig8">Figure 18-8</a>. Line 24 creates the Next button, and line 25 registers the handler for the <code>ButtonClicked</code> event. Then the <code>nextLine</code> variable is set to 11 to point to the 11th element of the rhyme array, which is the first page of the story (line 26), and <code>OnButtonClicked()</code> is called to show the first page of the rhyme (line 27).</p>&#13;
<p class="indent">Now we’ll add the <code>OnButtonClicked()</code> subroutine in <a href="ch18.html#ch18ex12">Listing 18-12</a>. This subroutine is called when the user clicks the Next button.</p>&#13;
<p class="programs"> 1 <span class="purple"><span class="codestrong">Sub</span></span> OnButtonClicked<br/> 2   img <span class="brown">=</span> <span class="blue1">Program</span><span class="brown">.Directory +</span> <span class="red">"\Page"</span> <span class="brown">+ (</span><span class="red">12</span> <span class="brown">-</span> nextLine<span class="brown">) +</span> <span class="red">".png"</span><br/> 3   <span class="blue1">GraphicsWindow</span><span class="brown">.DrawImage(</span>img<span class="brown">,</span> <span class="red">0</span><span class="brown">,</span> <span class="red">0</span><span class="brown">)</span><br/> 4<br/> 5   strOut <span class="brown">=</span> <span class="red">"This is "</span><br/> 6   <span class="purple"><span class="codestrong">For</span></span> N <span class="brown">=</span> nextLine <span class="purple"><span class="codestrong">To</span></span> <span class="red">11</span><br/> 7     strOut <span class="brown">=</span> <span class="blue1">Text</span><span class="brown">.Append(</span>strOut<span class="brown">,</span> rhyme[N]<span class="brown">)</span><br/> 8   <span class="purple"><span class="codestrong">EndFor</span></span><br/> 9   <span class="blue1">GraphicsWindow</span><span class="brown">.DrawText(</span><span class="red">10</span><span class="brown">,</span> <span class="red">10</span><span class="brown">,</span> strOut<span class="brown">)</span><br/>10<br/>11   nextLine <span class="brown">=</span> nextLine <span class="brown">-</span> <span class="red">1</span><br/>12   <span class="purple"><span class="codestrong">If</span></span> <span class="brown">(</span>nextLine <span class="brown">=</span> <span class="red">0</span><span class="brown">)</span> <span class="purple"><span class="codestrong">Then</span></span><br/>13     nextLine <span class="brown">=</span> <span class="red">11</span><br/>14   <span class="purple"><span class="codestrong">EndIf</span></span><br/>15 <span class="purple"><span class="codestrong">EndSub</span></span></p>&#13;
<p class="listcap"><a id="ch18ex12"/><em>Listing 18-12: The</em> <code><span class="codeitalic">OnButtonClicked()</code></span> <em>subroutine</em></p>&#13;
<p class="indent">Line 2 fills <code>img</code> with the name of the image for the current page of the rhyme. When <code>nextLine</code> is 11, we’ll show <em>Page1.png</em> (which is 12 minus 11). When <code>nextLine</code> is 10, we’ll show <em>Page2.png</em> (12 minus 10), and when <code>nextLine</code> is 9, we’ll show <em>Page3.png</em> (12 minus 9), and so on. Line 3 draws the image on the graphics window. We then build up the output string (lines 5–8). We set <code>strOut</code> to <code>"This is "</code> (line 5) and then start a loop that goes from <code>nextLine</code> to 11 (lines 6–8). When <code>nextLine</code> is 11, the loop runs one time and appends <code>rhyme[11]</code> to <code>strOut</code>. When <code>nextLine</code> is 10, the loop runs from 10 to 11 and appends <code>rhyme[10]</code> and then <code>rhyme[11]</code> to <code>strOut</code>. Similarly, when <code>nextLine</code> is 9, the loop runs from 9 to 11 and appends <code>rhyme[9]</code>, <code>rhyme[10]</code>, and then <code>rhyme[11]</code> to <code>strOut</code>.</p>&#13;
<p class="indent">When the loop ends, <code>strOut</code> contains the entire string for the rhyme at this stage of the story. We display this string using <code>DrawText()</code> in line 9.</p>&#13;
<p class="indent">Then we decrease <code>nextLine</code> by 1 to point to the previous element in the <code>rhyme</code> array (line 11). If <code>nextLine</code> becomes 0 (line 12), the story is done, so we set it back to 11 to start over (line 13). As a result, when the user clicks the Next button at the last page of the story, the program goes back to displaying the first page. We’ve finished the tale before it got stale!</p>&#13;
<div class="sidebar">&#13;
<p class="sidebart" id="ch18sb10"><span epub:type="pagebreak" id="page_284"/><strong>TRY IT OUT 18-10</strong></p>&#13;
<p class="noindent">Use the techniques you learned in the House That Jack Built example to write a program that tells your favorite story. Don’t have one? Make one about an alien rat trapped in a tower with nothing but JELL-O, a slingshot, and an advanced chemistry set. Explain how the rat got there and how it escapes!</p>&#13;
</div>&#13;
<h3 class="h3a" id="ch18lev1sec04"><span class="blues"><strong>Programming Challenges</strong></span></h3>&#13;
<p class="noindent">If you get stuck, check out <em><a href="http://nostarch.com/smallbasic/">http://nostarch.com/smallbasic/</a></em> for the solutions and for more resources and review questions for teachers and students.</p>&#13;
<ol>&#13;
<li><p class="noindenta">Open the file <em>Shoot_Incomplete.sb</em> from this chapter’s folder. Run the program to see the following interface.</p>&#13;
<div class="image1"><img alt="image" src="graphics/f0284-01.jpg"/></div>&#13;
<p class="indent">The goal of this game is to estimate the turn angle and moving distance between the turtle and the target. When a player enters their input, it is saved in a variable named <code>strIn</code>. Your task is to split <code>strIn</code> into two parts: assign the substring before the comma to <code>angle</code>, and assign the substring after the comma to <code>dist</code>. The comments in the file tell you where to add your code. If you get stuck, see the file <em>Shoot.sb</em>, which contains the completed program.</p></li>&#13;
<li><p class="noindenta">Open the file <em>BinaryToDecimal_Incomplete.sb</em> from this chapter’s folder. This program converts binary numbers to decimal numbers and then asks the user to input an 8-bit binary number. It then shows the input number in the graphics window, computes its decimal number, and displays the result of the conversion, as shown in the following figure.</p>&#13;
<div class="image1"><span epub:type="pagebreak" id="page_285"/><img alt="image" src="graphics/f0285-01.jpg"/></div>&#13;
<p class="indent">Complete the <code>GetInput()</code> subroutine, which prompts the user to enter an 8-bit binary number. You need to verify that the user’s input isn’t empty and has at most eight binary digits (so it contains only 1s and 0s). When the user enters a valid input, save it in <code>strIn</code> and return from the subroutine. The comments in the file tell you what to do. If you get stuck, see the file <em>BinaryToDecimal.sb</em>, which contains the completed code.<span epub:type="pagebreak" id="page_286"/></p></li>&#13;
</ol>&#13;
</body></html>