- en: '8'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '8'
- en: Optical Screwdriver by John Baichtal
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: John Baichtal的光学螺丝刀
- en: This project is a light-based beatbox in wand form, used with a light-sensor-equipped
    synth to create cool audio effects.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目是一个基于光的打击乐器，呈魔杖形状，与配有光传感器的合成器一起使用，创造酷炫的音效。
- en: '![image](../images/f0147-01.jpg)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0147-01.jpg)'
- en: In this project, you’ll make an optical screwdriver that flashes an LED at a
    light sensor, which then tells the synth what beats to play depending on the input
    it receives. You can modify the rate and length of beats, creating complicated
    synthesized music.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个项目中，你将制作一个光学螺丝刀，通过LED闪烁向光传感器发送信号，传感器根据接收到的输入告知合成器播放哪些节奏。你可以修改节奏的速率和时长，创造复杂的合成音乐。
- en: I’ll show you how to make three different variants of the screwdriver, ranging
    from simple to advanced. You don’t have to make all three; just choose the level
    of awesomeness you’re prepared to handle.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我将向你展示如何制作三种不同的螺丝刀，从简单到高级。你不必做全部三种，只需选择你准备好处理的“酷度”级别。
- en: 'The first version is a super-basic Arduino project easy enough for anyone to
    build. You’ll also need to assemble a test rig—an elementary synth consisting
    of an Arduino, a speaker, and a light sensor—to make sure it works. After that
    I’ll show you how to level up your screwdriver with a couple of improvements:
    a simplified microcontroller and a wand-shaped printed circuit board (PCB).'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个版本是一个超级基础的Arduino项目，任何人都可以轻松构建。你还需要组装一个测试装置——一个基本的合成器，由Arduino、扬声器和光传感器组成——以确保它能正常工作。之后，我将向你展示如何通过几个改进来升级你的螺丝刀：简化的微控制器和一块棒状的印刷电路板（PCB）。
- en: '**BUILD THE BASIC SCREWDRIVER**'
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**构建基础螺丝刀**'
- en: 'Let’s begin with the easiest possible configuration for the optical screwdriver:
    a plain-jane Arduino with an LED and three potentiometers, as shown in [Figure
    8-1](ch08.xhtml#ch08fig1). While not particularly wand-like, it gives you an unsexy
    equivalent that works identically—it makes optical LED flashes that interact with
    a sensor-equipped synthesizer. The three pots will be used to control the speed,
    duration, and pauses of the flashing LED.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从最简单的光学螺丝刀配置开始：一个普通的Arduino，配备LED和三个可调电位器，如[图 8-1](ch08.xhtml#ch08fig1)所示。虽然它看起来不特别像魔杖，但它给你一个不那么华丽但同样有效的等效物——它使得光学LED闪烁，与配有传感器的合成器互动。三个电位器将用于控制LED闪烁的速度、持续时间和暂停。
- en: '![image](../images/f0148-01.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0148-01.jpg)'
- en: '**FIGURE 8-1:** A basic version of the screwdriver'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 8-1：** 螺丝刀的基础版本'
- en: '**Get the Parts**'
  id: totrans-11
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**获取零件**'
- en: You’ll need just a few parts to complete the first stage of this project. I’m
    also including the parts for the test rig you’ll need to build in order to hear
    anything. The test rig is simply a light sensor, Arduino, and speaker.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这个项目的第一阶段，你只需要一些零件。我还包括了你需要构建的测试装置的零件，只有通过它才能听到任何声音。测试装置只是一个光传感器、Arduino和扬声器。
- en: '**NOTE**'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*See “[Getting Started with the Arduino and the Arduino IDE](intro.xhtml#lev17)”
    on [page 15](intro.xhtml#page_15) for setup instructions.*'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '*参见 “[Arduino和Arduino IDE入门](intro.xhtml#lev17)” 在 [第15页](intro.xhtml#page_15)
    获取设置说明。*'
- en: Two Arduino Uno boards or similar (Adafruit P/N 50)
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两块Arduino Uno板或类似的（Adafruit P/N 50）
- en: Half-sized breadboard (Adafruit P/N 64)
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 半尺寸面包板（Adafruit P/N 64）
- en: Jumper assortment (Adafruit P/N 153)
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跳线套件（Adafruit P/N 153）
- en: Wall wart or 9 V battery clip (Adafruit P/N 63 or Adafruit P/N 80)
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电池适配器或9V电池夹（Adafruit P/N 63 或 Adafruit P/N 80）
- en: Super-bright LED (for example, SparkFun P/N 531)
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 超亮LED（例如，SparkFun P/N 531）
- en: Three 10 kΩ potentiometers (I used SparkFun P/N 9939, but P/N 9288 also works;
    I used slim knobs from Adafruit, P/N 2057)
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 三个10 kΩ电位器（我使用了SparkFun P/N 9939，但P/N 9288也可以使用；我使用了Adafruit的细旋钮，P/N 2057）
- en: Light sensor (Adafruit P/N 161)
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光传感器（Adafruit P/N 161）
- en: 8 Ω speaker (for example, Adafruit P/N 1313; you’ll need to solder on your own
    wires)
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8 Ω 扬声器（例如，Adafruit P/N 1313；你需要自己焊接电线）
- en: 220 Ω and 10 kΩ resistors (SparkFun P/N 10969 is a good multipack)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 220 Ω 和 10 kΩ 电阻（SparkFun P/N 10969 是一个不错的多包装）
- en: '**Assemble the Circuit**'
  id: totrans-24
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**组装电路**'
- en: 'The bare-bones screwdriver probably won’t challenge you, but never fear—this
    project levels up quick! Let’s begin:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 最基础的螺丝刀可能不会给你带来太大挑战，但不用担心——这个项目升级得很快！我们开始吧：
- en: '**Plug in the LED.** Connect the long lead of the LED to pin 9 with a 220 Ω
    resistor in between, then connect the short lead to GND right next to it. [Figure
    8-2](ch08.xhtml#ch08fig2) shows how it should look.'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**插入LED。** 将LED的长脚连接到9号引脚，中间加上一个220 Ω电阻，然后将短脚连接到GND旁边。[图 8-2](ch08.xhtml#ch08fig2)显示了它应该是什么样子。'
- en: '![image](../images/f0149-01.jpg)'
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0149-01.jpg)'
- en: '**FIGURE 8-2:** Adding the LED and resistor to the breadboard'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-2：** 将LED和电阻添加到面包板上'
- en: '**Wire up the potentiometers.** Add the three pots. For each pot, connect the
    leftmost lead to GND and the rightmost to 5V. The center lead is the data connection,
    as shown in [Figure 8-3](ch08.xhtml#ch08fig3). It doesn’t matter which lead is
    GND and which is 5V, as long as the center lead goes to data. Connect one of each
    wire to pins A0, A1, and A2, shown as purple wires in [Figure 8-3](ch08.xhtml#ch08fig3).'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接电位器。** 添加三个电位器。对于每个电位器，将最左侧的引脚连接到GND，最右侧的引脚连接到5V。中间的引脚是数据连接，如[图 8-3](ch08.xhtml#ch08fig3)所示。哪一个是GND，哪一个是5V并不重要，只要中间引脚连接到数据即可。将每根线的一端连接到A0、A1和A2引脚，如[图
    8-3](ch08.xhtml#ch08fig3)中的紫色线所示。'
- en: '![image](../images/f0150-01.jpg)'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0150-01.jpg)'
- en: '**FIGURE 8-3:** Connecting the pots to the appropriate analog pins'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-3：** 将电位器连接到适当的模拟引脚'
- en: '**Add power.** Connect the Arduino to power by plugging it into either a wall
    wart or a 9 V battery. You’ll also need to power the prototyping board, so connect
    the 5V and GND pins on the Arduino to the power and ground buses on both sides
    of the board. These new wires are shown in red (power) and black (ground) in [Figure
    8-4](ch08.xhtml#ch08fig4).'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加电源。** 通过将Arduino连接到墙壁电源或9V电池来为其供电。你还需要为原型板供电，因此将Arduino的5V和GND引脚连接到板两侧的电源和接地总线。这些新线用红色（电源）和黑色（接地）表示，如[图
    8-4](ch08.xhtml#ch08fig4)所示。'
- en: '![image](../images/f0150-02.jpg)'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0150-02.jpg)'
- en: '**FIGURE 8-4:** Connecting the breadboard to the Arduino’s 5V and GND pins'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-4：** 将面包板连接到Arduino的5V和GND引脚'
- en: '**Code It**'
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**编写代码**'
- en: The sketch is essentially the Blink example sketch, to which I’ve added potentiometers
    to modify the beat. You can download it along with the other project files for
    this book at *[https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这个草图基本上是Blink示例草图，我在其中添加了电位器来修改节奏。你可以在* [https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*
    下载它以及本书的其他项目文件。
- en: 'Let’s go through the code part by part:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们逐部分了解代码：
- en: '[PRE0]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '**NOTE**'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*Remember to change all instances of pin 9 to pin 0 if you employ the ATtiny85
    microcontroller—more on this later!*'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果你使用ATtiny85微控制器，请记得将所有pin 9的实例更改为pin 0——稍后会详细介绍！*'
- en: The `void setup()` function runs once when the Arduino is powered on or reset.
    In this case the setup is telling the Arduino which pins will be for input and
    which for output.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '`void setup()` 函数在Arduino通电或重置时运行一次。在本例中，setup函数告诉Arduino哪些引脚用作输入，哪些用作输出。'
- en: Next is the loop.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是循环部分。
- en: '[PRE1]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The first part of `void loop()` declares a series of variables corresponding
    with the three pots—speed, duration, and skip. For the sake of writing code, I’ve
    labeled time between beats as *speed*, the length of each beat as *duration*,
    and the brightness level of the LED in the “off” state as *skip*. This gives us
    the option of “bright to dim” rather than “on or off,” for a smoother flow.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '`void loop()`的第一部分声明了一系列变量，与三个电位器对应——速度、时长和跳过。为了方便编写代码，我将节奏之间的时间标记为*speed*，每个节拍的时长标记为*duration*，LED在“关闭”状态下的亮度级别标记为*skip*。这样，我们就有了“从亮到暗”的选项，而不是“开或关”，使得流畅度更高。'
- en: Finally, the code maps out the readings from the three pots and changes their
    values to something we can use—data comes in from the pots at a range of 0–1023,
    so the code translates that value into seconds. Feel free to change these values
    to make the screwdriver work better for you!
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，代码将三个电位器的读数映射出来，并将其值转换为我们可以使用的内容——电位器的输出范围是0–1023，因此代码将该值转换为秒数。你可以随意更改这些值，以便使螺丝刀更好地为你工作！
- en: '[PRE2]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The final part of the code governs the actual work of the sketch: turning on
    and off an LED. The LED turns on for a number of microseconds equal to the value
    of `currentDuration`, or between 100 and 800\. When the synth’s light sensor detects
    those beats, it responds with sound. Holding the screwdriver closer makes louder
    beats, while pulling it back yields more subtle sounds.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 代码的最后部分控制草图的实际工作：打开和关闭LED。LED的亮灭时间等于`currentDuration`的值，或者在100到800微秒之间。当合成器的光传感器检测到这些节拍时，它会发出声音。将螺丝刀靠得更近会产生更大的节拍声音，而拉远它则会发出更微妙的声音。
- en: '**Build the Test Rig**'
  id: totrans-48
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**搭建测试设备**'
- en: Unless you have a light-detecting synth handy, you’ll have to build one. This
    rig emits a beat that is modified by data sent via the light sensor, so it can
    interact with the screwdriver. You’ll need the extra Arduino from the parts list,
    as well as the speaker. You can see the ultra-simple test rig I built in [Figure
    8-5](ch08.xhtml#ch08fig5).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 除非你手头有一个光感合成器，否则你需要自己制作一个。这个平台发出一个节拍，节拍通过光传感器传送的数据进行修改，因此它能够与螺丝刀互动。你需要从零件清单中获取额外的
    Arduino 以及扬声器。你可以在 [图 8-5](ch08.xhtml#ch08fig5) 中看到我制作的超级简单的测试平台。
- en: '![image](../images/f0152-01.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0152-01.jpg)'
- en: '**FIGURE 8-5:** The test rig helps you ensure the screwdriver works.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 8-5：** 测试平台帮助你确保螺丝刀正常工作。'
- en: '**Wire up the speaker.** Plug the speaker’s positive lead into pin 9 of the
    second Arduino, and the negative lead into GND. [Figure 8-6](ch08.xhtml#ch08fig6)
    shows how it connects.'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**接线扬声器。** 将扬声器的正极引脚插入第二个 Arduino 的 9 号引脚，负极引脚插入 GND。[图 8-6](ch08.xhtml#ch08fig6)
    显示了它的连接方式。'
- en: '![image](../images/f0152-02.jpg)'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0152-02.jpg)'
- en: '**FIGURE 8-6:** Connecting the speaker to the Arduino'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-6：** 将扬声器连接到 Arduino'
- en: '**Attach the light sensor and resistor.** Connect one lead of the light sensor
    to pin A0 and the other to 5V. Slide a 10 kΩ resistor into the same A0 pin, or
    wrap the light sensor lead and resistor together. Connect the other lead of the
    resistor to GND, as shown in [Figure 8-7](ch08.xhtml#ch08fig7).'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接光传感器和电阻。** 将光传感器的一端连接到 A0 引脚，另一端连接到 5V。将一个 10 kΩ 电阻插入同一个 A0 引脚，或者将光传感器的引脚和电阻连接在一起。将电阻的另一端连接到
    GND，如 [图 8-7](ch08.xhtml#ch08fig7) 所示。'
- en: '![image](../images/f0153-01.jpg)'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0153-01.jpg)'
- en: '**FIGURE 8-7:** Attaching the light sensor and resistor'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-7：** 连接光传感器和电阻'
- en: '**Code it.** The test rig’s code is a variant of the `tonePitchFollower` example
    sketch, which changes a tone based on the level detected by the light sensor.
    I’ve added a bit more pizzazz by tying the beat length and pause length to the
    same light sensor, allowing the optical screwdriver to simultaneously modify the
    beat’s tone, its length, and the time between beats via the light sensor.'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**编写代码。** 测试平台的代码是 `tonePitchFollower` 示例草图的一个变种，根据光传感器检测到的级别来改变音调。我通过将节拍长度和暂停长度与同一个光传感器绑定，加入了一些额外的创意，使光学螺丝刀能够同时通过光传感器修改节拍的音调、长度和节拍间的时间。'
- en: '[PRE3]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '**Test it.** The test rig creates a looping series of tones, 100 per second,
    with a frequency equal to the light sensor reading, and determines the duration
    of tone by remapping the sensor reading. Even without the screwdriver, you can
    play with the test rig by putting your finger over the light sensor and changing
    its reading.'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**测试。** 测试平台创建一个循环的音调序列，每秒 100 个音调，频率等于光传感器的读数，并通过重新映射传感器读数来确定音调的持续时间。即使没有螺丝刀，你也可以通过把手指放在光传感器上并改变其读数来玩这个测试平台。'
- en: When you add the screwdriver’s weirdly flashing light into the mix, even more
    complicated patterns emerge as the fluctuations in light create complex sonic
    structures.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 当你将螺丝刀那闪烁的怪异光线加入其中时，随着光的波动产生复杂的声音结构，更加复杂的模式也随之出现。
- en: '**BUILD THE WAND VERSION WITH AN ATTINY85**'
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**使用 ATtiny85 构建魔杖版**'
- en: Next I’ll show you how to swap in an ATtiny85, a smaller microcontroller than
    the ATmega328p featured in the Arduino. This is a simpler chip, without the extra
    bells and whistles of the Arduino board, but it’s also more compact, which allows
    you to move the screwdriver circuit off the prototyping board and onto a more
    portable wand.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我将向你展示如何换上 ATtiny85，这是一款比 Arduino 中的 ATmega328p 更小的微控制器。它是一个更简单的芯片，没有 Arduino
    板的额外功能，但它也更紧凑，这使得你能够将螺丝刀电路从原型板上移到一个更便于携带的魔杖上。
- en: '**Get the Parts**'
  id: totrans-64
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**获取零件**'
- en: Grab the following parts to build a soldered version of the basic screwdriver
    using the ATtiny85\. If you want to, reuse the parts from the earlier prototype
    build.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 获取以下零件，使用 ATtiny85 构建一个焊接版的基础螺丝刀。如果你愿意，可以重新使用之前原型构建中的零件。
- en: '**Components**'
  id: totrans-66
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**组件**'
- en: Arduino Uno (reuse the one from “[Build the Test Rig](ch08.xhtml#lev103)” on
    [page 152](ch08.xhtml#page_152))
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino Uno（重新使用 [“构建测试平台”](ch08.xhtml#lev103) 中的那个，[第 152 页](ch08.xhtml#page_152)）
- en: ATtiny85 microcontroller (for example, SparkFun P/N 9378)
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ATtiny85 微控制器（例如，SparkFun P/N 9378）
- en: Super-bright LED (for example, SparkFun P/N 531)
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 超亮 LED（例如，SparkFun P/N 531）
- en: Two 220 Ω resistors
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个 220 Ω 电阻
- en: 10 μF capacitor (SparkFun P/N 523)
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10 μF 电容（SparkFun P/N 523）
- en: Perma-Proto board (Adafruit P/N 571; these boards require you to solder the
    components)
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Perma-Proto 板（Adafruit P/N 571；这些板需要你焊接组件）
- en: 8-pin IC socket (Adafruit P/N 2202)
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8 针 IC 插座（Adafruit P/N 2202）
- en: Three potentiometers (I suggest SparkFun P/N 9288 because they can be soldered
    in place)
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 三个可调电阻（我建议使用SparkFun P/N 9288，因为它们可以焊接到位）
- en: 5 V power supply (for example, SparkFun P/N 12889)
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5V电源（例如，SparkFun P/N 12889）
- en: Barrel jack for the power supply (Adafruit P/N 373 or SparkFun P/N 10811)
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电源的桶形插座（Adafruit P/N 373或SparkFun P/N 10811）
- en: '**NOTE**'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*You shouldn’t use a 9 V battery because the ATtiny85 lacks the power management
    features of the Uno, which allows input voltage to be converted to 5 V. If you
    use a 9 V battery, your chip will overload.*'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '*你不应该使用9V电池，因为ATtiny85缺乏Uno的电源管理功能，Uno可以将输入电压转换为5V。如果使用9V电池，芯片将过载。*'
- en: '**Tools**'
  id: totrans-79
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**工具**'
- en: Soldering iron
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 焊接铁
- en: Solder
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 焊接
- en: '**NOTE**'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*See the appendix for soldering instructions.*'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '*请参见附录中的焊接说明。*'
- en: Let’s take a look at the technical details of the ATtiny85\. It has eight pins,
    consisting of power, ground, and a variety of analog and digital data pins. [Figure
    8-8](ch08.xhtml#ch08fig8) breaks down the pin layout.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下ATtiny85的技术细节。它有八个引脚，包括电源、接地以及各种模拟和数字数据引脚。[图8-8](ch08.xhtml#ch08fig8)展示了引脚布局。
- en: '![image](../images/f0155-01.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0155-01.jpg)'
- en: '**FIGURE 8-8:** The ATtiny85’s eight pins control a surprising amount of computing
    power.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '**图8-8：** ATtiny85的八个引脚控制了惊人的计算能力。'
- en: '**Flashing the ATtiny85**'
  id: totrans-87
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**烧录ATtiny85**'
- en: One downside to using the ATtiny85 is that we lose some of that ease of programming
    we have with the Arduino. The Arduino has a lovely USB-based bootloader, but its
    smaller cousin does not, so you’ll have to use a separate Arduino to program the
    ATtiny85\. Since the pins of the chip are needed to program it, we can’t assemble
    the project before programming it. With this version of the optical screwdriver,
    you won’t be able to reflash the chip once it’s installed on the circuit board.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ATtiny85的一个缺点是，我们失去了一些在使用Arduino时所拥有的编程便利性。Arduino具有一个非常方便的基于USB的引导加载程序，但它的较小版本没有，因此你需要使用另一块Arduino来编程ATtiny85。由于芯片的引脚需要用于编程，我们不能在编程之前组装项目。使用这个版本的光学螺丝刀，当芯片安装到电路板上后，你将无法重新烧录芯片。
- en: 'Here’s how to do so:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 操作方法如下：
- en: '**Wire up the ATtiny85.** Use the Arduino from “[Build the Test Rig](ch08.xhtml#lev103)”
    on [page 152](ch08.xhtml#page_152) as shown in [Figure 8-9](ch08.xhtml#ch08fig9).
    The pinout shown in [Figure 8-8](ch08.xhtml#ch08fig8) becomes important in this
    step as you wire it up. Connect pin 1 to digital pin 10, shown as a blue wire
    in [Figure 8-9](ch08.xhtml#ch08fig9). Connect pin 4 to GND via a black wire. Plug
    a red wire from pin 5 into a power bus. Plug pins 6, 7, and 8 into 13, 12, and
    11 on the Arduino, shown as yellow, white, and green wires, respectively.'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接ATtiny85。** 按照[第152页](ch08.xhtml#page_152)中的[“构建测试平台”](ch08.xhtml#lev103)使用Arduino，如[图8-9](ch08.xhtml#ch08fig9)所示。在这一步中，[图8-8](ch08.xhtml#ch08fig8)中显示的引脚分配变得非常重要。将引脚1连接到数字引脚10，图8-9中的蓝色线表示。将引脚4通过黑线连接到GND。将一根红线从引脚5插入电源总线。将引脚6、7和8分别连接到Arduino的13、12和11引脚，图8-9中的黄色、白色和绿色线表示。'
- en: '**Connect the LED and capacitor.** You’ll also need to connect an LED, with
    a 220 Ω resistor protecting it, to pin 8 on the ATtiny85; this LED will flash
    to show that it’s working. Next, you’ll need to connect the short pin of a 10
    µF capacitor to the Arduino’s Reset pin (shown as a burgundy wire) and the long
    pin to GND.'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接LED和电容器。** 你还需要连接一个LED，并为其配上一个220Ω的电阻来保护它，连接到ATtiny85的引脚8；这个LED会闪烁，显示它正在工作。接下来，你需要将一个10µF电容器的短引脚连接到Arduino的复位引脚（用紫红色线表示），长引脚连接到GND。'
- en: '**Connect the power and ground.** Finally, connect the breadboard’s power and
    GND buses to their respective Arduino pins.'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接电源和接地。** 最后，将面包板的电源和接地总线连接到各自的Arduino引脚。'
- en: '**Install the ArduinoISP sketch on the Uno.** Find this in the Tools menu of
    the Arduino program, then set the Uno’s programmer to “ArduinoISP” by choosing
    **ArduinoISP** from the list of programmers. Go to **Tools** ▸ **Board** and choose
    the correct ATtiny model. Then upload the sketch!'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**在Uno上安装ArduinoISP草图。** 在Arduino程序的工具菜单中找到这个选项，然后将Uno的程序器设置为“ArduinoISP”，从程序员列表中选择**ArduinoISP**。然后转到**工具**
    ▸ **板子**，选择正确的ATtiny型号。接着上传草图！'
- en: You can also buy products that allow you to program your ATtiny85 without needing
    a second Arduino—for example, the Tiny AVR Programmer from SparkFun (P/N 11801)
    and the ISP Shield from Evil Mad Scientist (*[http://emsl.us/253](http://emsl.us/253)*).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以购买一些产品，让你无需第二块Arduino即可编程ATtiny85——例如，SparkFun的Tiny AVR Programmer（P/N 11801）和Evil
    Mad Scientist的ISP Shield（* [http://emsl.us/253](http://emsl.us/253) *）。
- en: This is a necessarily stripped-down description of the process. For a more thorough
    guide to programming an ATtiny, go to MIT’s High-Low Tech page at *[http://highlowtech.org/](http://highlowtech.org/)*,
    click **Tutorials**, then click the link for **Programming an ATtiny w/ Arduino
    1.6 (or 1.0)**. David Caminati also has a good tutorial at *[http://fritzing.org/projects/programmer-for-attiny85-with-arduino-uno-as-interf/](http://fritzing.org/projects/programmer-for-attiny85-with-arduino-uno-as-interf/)*.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个简化版的过程描述。若要获取更全面的 ATtiny 编程指南，请访问 MIT 的 High-Low Tech 页面，点击 *[http://highlowtech.org/](http://highlowtech.org/)*，然后点击
    **教程**，再点击 **使用 Arduino 1.6（或 1.0）编程 ATtiny** 的链接。David Caminati 也提供了一个很好的教程，网址是
    *[http://fritzing.org/projects/programmer-for-attiny85-with-arduino-uno-as-interf/](http://fritzing.org/projects/programmer-for-attiny85-with-arduino-uno-as-interf/)*。
- en: '![image](../images/f0156-01.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0156-01.jpg)'
- en: '**FIGURE 8-9:** Programming the ATtiny85 with another Arduino'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 8-9：** 使用另一块 Arduino 编程 ATtiny85'
- en: '**Build the ATtiny85 Screwdriver**'
  id: totrans-98
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**制作 ATtiny85 螺丝刀**'
- en: The next challenge involves turning that loose jumble of wires into something
    a little more solid. You’ll use a credit card–sized prototyping board from Adafruit
    and design it so that, besides a power supply wire, you can hold the entire screwdriver
    in one hand.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的挑战是将那一团凌乱的电线变得更加稳固。你将使用 Adafruit 的一块信用卡大小的原型板，并将其设计成，除了电源线之外，你可以一手持有整个螺丝刀。
- en: '**Solder in the pots.** Solder the three potentiometers to the prototyping
    board, as shown in [Figure 8-10](ch08.xhtml#ch08fig10). Connect the outer two
    leads of each pot to power and ground.'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**焊接电位器。** 如 [图 8-10](ch08.xhtml#ch08fig10) 所示，将三个电位器焊接到原型板上。将每个电位器的外部两个引脚连接到电源和地面。'
- en: '![image](../images/f0156-02.jpg)'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0156-02.jpg)'
- en: '**FIGURE 8-10:** Attaching the potentiometers'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-10：** 安装电位器'
- en: '**Attach the IC socket.** Next, solder in the IC socket as shown in [Figure
    8-11](ch08.xhtml#ch08fig11). The top of the ATtiny85 has a notch that should be
    pointed toward the star, as shown in the figure. Connect pins 2, 3, and 7 to the
    center leads of each pot, from right to left, respectively, and connect pin 8
    to power and pin 4 to ground (refer back to [Figure 8-8](ch08.xhtml#ch08fig8)
    for the ATtiny85 pinout). If you get these in the wrong order, you might get unexpected
    results, so make sure to take note of which pot is connected to which pin.'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**安装 IC 插座。** 接下来，如 [图 8-11](ch08.xhtml#ch08fig11) 所示，焊接 IC 插座。ATtiny85 顶部有一个缺口，应该朝向星标，正如图中所示。将第
    2、3 和 7 引脚分别连接到每个电位器的中间引脚（从右到左），并将第 8 引脚连接到电源，第 4 引脚连接到地面（有关 ATtiny85 引脚配置，请参阅
    [图 8-8](ch08.xhtml#ch08fig8)）。如果这些连接顺序错误，可能会出现意外结果，因此一定要注意每个电位器连接到哪个引脚。'
- en: '![image](../images/f0157-01.jpg)'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0157-01.jpg)'
- en: '**FIGURE 8-11:** Soldering in the IC socket'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-11：** 焊接 IC 插座'
- en: '**Wire up the LED.** Connect the long lead of the LED to pin 5 of the ATtiny85
    via a 220 Ω resistor, and connect the short lead of the LED to ground. [Figure
    8-12](ch08.xhtml#ch08fig12) shows how it should look.'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接 LED。** 将 LED 的长引脚通过一个 220 Ω 电阻器连接到 ATtiny85 的第 5 引脚，将 LED 的短引脚连接到地面。[图
    8-12](ch08.xhtml#ch08fig12) 展示了该如何连接。'
- en: '![image](../images/f0157-02.jpg)'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0157-02.jpg)'
- en: '**FIGURE 8-12:** Adding the LED and resistor'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-12：** 添加 LED 和电阻器'
- en: '**Add power.** Solder in the barrel jack (shown in [Figure 8-13](ch08.xhtml#ch08fig13)),
    connecting the center lead to power and either of the two side leads to ground.'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加电源。** 焊接圆形插口（如 [图 8-13](ch08.xhtml#ch08fig13) 所示），将中间引脚连接到电源，任意一个侧边引脚连接到地面。'
- en: As long as you’ve already flashed the ATtiny85 with the sketch, you should be
    able to plug it in right away.
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 只要你已经将 ATtiny85 刷写了草图，应该就可以立刻插入使用了。
- en: '![image](../images/f0158-01.jpg)'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0158-01.jpg)'
- en: '**FIGURE 8-13:** Soldering in the power jack'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-13：** 焊接电源插口'
- en: That’s your circuit all soldered!
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是你已经焊接好的电路！
- en: '**Code It**'
  id: totrans-114
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**编写代码**'
- en: The code from the initial build works with this version too! You do, however,
    have to make one critical change. There is no pin 9 on an ATtiny85, so you have
    to change that to a `0`. Remember this line from the original code?
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 初始构建中的代码在这个版本中也适用！不过，你需要做一个关键的修改。ATtiny85 上没有第 9 引脚，所以你需要将其改为 `0`。还记得原始代码中的这一行吗？
- en: '[PRE4]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You need to change that `9` and the following `9`s to `0`s.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要将那个 `9` 和接下来的所有 `9` 改为 `0`。
- en: '[PRE5]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: When you’ve made the changes, upload the sketch using the programming rig mentioned
    earlier in the chapter—that is, by wiring the ATtiny85 to the Arduino and then
    loading the code to the Arduino. Once the ATtiny85 is programmed, it can be placed
    in the socket and you’ll be ready to go.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当你做完修改后，使用本章前面提到的编程设备上传草图——也就是将ATtiny85连接到Arduino，然后将代码加载到Arduino上。一旦ATtiny85被编程，它可以插入插座中，你就可以开始使用了。
- en: '**MAKE A PCB WAND**'
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**制作PCB魔杖**'
- en: Without the need for a full-sized Arduino, you can make the optical screwdriver
    much smaller and, well, sexier. In fact, you can make it small enough to fit on
    a wand-shaped printed circuit board (PCB), shown in [Figure 8-14](ch08.xhtml#ch08fig14).
    The previous version of the screwdriver was for folks who didn’t want to buy or
    mill their own circuit boards. If you’re up to that challenge, however, this variant
    of the project is for you!
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 不需要完整的Arduino，你就可以将光学螺丝刀做得更小巧、更有吸引力。事实上，你可以把它做得足够小，以适应一个魔杖形状的印刷电路板（PCB），如[图8-14](ch08.xhtml#ch08fig14)所示。之前版本的螺丝刀是为那些不想购买或加工自己电路板的人设计的。如果你愿意接受挑战，这个版本的项目就适合你了！
- en: '![image](../images/f0159-01.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0159-01.jpg)'
- en: '**FIGURE 8-14:** This wand-shaped PCB accommodates the screwdriver’s components.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '**图8-14：** 这种魔杖形状的PCB容纳了螺丝刀的组件。'
- en: '**ABOUT FRITZING**'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '**关于Fritzing**'
- en: Fritzing is a simple circuit design program that allows you to build circuits
    either through traditional schematic symbols, breadboarded components, or PCB
    design. To create a design, you simply drag components out of a palette and draw
    traces between them. I use the program all the time, and you’ll probably find
    it useful as well. Download it at *[http://www.fritzing.org/](http://www.fritzing.org/)*.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: Fritzing是一款简单的电路设计程序，允许你通过传统的电路符号、面包板组件或PCB设计来构建电路。要创建设计，你只需要从调色板中拖动组件并在它们之间绘制连线。我一直在使用这款程序，你可能也会觉得它很有用。你可以从
    *[http://www.fritzing.org/](http://www.fritzing.org/)* 下载它。
- en: '![image](../images/f0159-02.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0159-02.jpg)'
- en: '**Get the Parts**'
  id: totrans-127
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**获取零件**'
- en: Most of these parts are the same as the components we used in the previous version
    of the project. You’ll need the following to complete this version.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 这些部件大多数与我们在项目的前一版本中使用的组件相同。你将需要以下零件来完成这个版本。
- en: '**Components**'
  id: totrans-129
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**组件**'
- en: Super-bright LED (for example, SparkFun P/N 531)
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 超亮LED（例如，SparkFun P/N 531）
- en: ATtiny85 (SparkFun P/N 9378)
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ATtiny85 (SparkFun P/N 9378)
- en: 8-pin IC socket (Adafruit P/N 2202)
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8脚IC插座（Adafruit P/N 2202）
- en: Three 10 kΩ potentiometers (SparkFun P/N 9939 or P/N 9288)
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 三个10 kΩ电位器（SparkFun P/N 9939或P/N 9288）
- en: Mini power switch (SparkFun P/N 102)
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微型电源开关（SparkFun P/N 102）
- en: Battery clips (SparkFun P/N 7949)
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电池夹（SparkFun P/N 7949）
- en: Surface-mount LED (SparkFun P/N 12619)
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表面贴装LED（SparkFun P/N 12619）
- en: Two surface-mount resistors (Jameco P/N 2008882)
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个表面贴装电阻（Jameco P/N 2008882）
- en: Two AA batteries
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两节AA电池
- en: '**Tools**'
  id: totrans-139
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**工具**'
- en: Soldering iron
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 焊接铁
- en: Solder
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 焊锡
- en: '**NOTE**'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*See the appendix for soldering instructions.*'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '*请参见附录中的焊接说明。*'
- en: '**Build It**'
  id: totrans-144
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**制作它**'
- en: Follow these steps to build your optical screwdriver wand, shown in [Figure
    8-15](ch08.xhtml#ch08fig15).
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤构建你的光学螺丝刀魔杖，见[图8-15](ch08.xhtml#ch08fig15)。
- en: '![image](../images/f0160-01.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0160-01.jpg)'
- en: '**FIGURE 8-15:** The completed optical screwdriver in use'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '**图8-15：** 完成的光学螺丝刀在使用中'
- en: '**Design the PCB outline.** I used Inkscape (*[https://inkscape.org/](https://inkscape.org/)*)
    to draw a vector shape corresponding with the shape I wanted the PCB to be. [Figure
    8-16](ch08.xhtml#ch08fig16) shows what I came up with: a pencil shape about 8
    inches long and 3/4 inches wide. The Inkscape file is available with all the other
    resources for this book (*[https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*).
    You can make your circuit board any shape you want. In the Inkscape file, the
    PCB can be any color, but this won’t affect how it looks in the end; what the
    program looks for are the vectors. Fritzing offers a tutorial on how to make a
    shape that will work with the program at *[http://fritzing.org/pcb-custom-shape/](http://fritzing.org/pcb-custom-shape/)*.'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**设计PCB轮廓。** 我使用了Inkscape（*[https://inkscape.org/](https://inkscape.org/)）来绘制一个与我想要的PCB形状相对应的矢量图。[图8-16](ch08.xhtml#ch08fig16)展示了我绘制的形状：一个大约8英寸长、3/4英寸宽的铅笔形状。Inkscape文件与本书的其他资源一起提供（*[https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*）。你可以将电路板做成任何你想要的形状。在Inkscape文件中，PCB可以是任何颜色，但这不会影响最终效果；程序关注的是矢量图形。Fritzing提供了一个关于如何制作适用于该程序的形状的教程，地址是
    *[http://fritzing.org/pcb-custom-shape/](http://fritzing.org/pcb-custom-shape/)*。'
- en: '![image](../images/f0161-01.jpg)'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0161-01.jpg)'
- en: '**FIGURE 8-16:** I designed a pencil shape in Inkscape for the wand.'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-16：** 我在 Inkscape 中设计了一个铅笔形状，用于魔杖。'
- en: '**Make the circuit in Fritzing.** Add the circuit to the board shape, as shown
    in [Figure 8-17](ch08.xhtml#ch08fig17). Don’t worry—I’ll describe how to do each
    substep!'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**在 Fritzing 中制作电路。** 将电路添加到电路板形状中，如[图 8-17](ch08.xhtml#ch08fig17)所示。别担心——我会逐步说明如何进行每个子步骤！'
- en: '![image](../images/f0161-02.jpg)'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0161-02.jpg)'
- en: '**FIGURE 8-17:** The optical screwdriver added to the circuit board design'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-17：** 添加到电路板设计中的光学螺丝刀'
- en: '**Add the PCB outline.** To add the circuit board outline you made in Inkscape,
    click once on the default PCB, then click the **Load Image File** button in the
    Inspector to replace it with your own. [Figure 8-18](ch08.xhtml#ch08fig18) shows
    the PCB outline, ready to be loaded with components. Remember that the blue color
    doesn’t mean anything; it’s just a placeholder. The real decision on color is
    made when you pay for the PCB to be milled.'
  id: totrans-154
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加 PCB 轮廓。** 若要添加在 Inkscape 中制作的电路板轮廓，单击一次默认的 PCB，然后在检查器中单击**加载图像文件**按钮，用自己的图像替换它。[图
    8-18](ch08.xhtml#ch08fig18)显示了准备加载组件的 PCB 轮廓。记住，蓝色并没有特殊含义，它只是一个占位符。真正的颜色决策是在你支付
    PCB 加工费用时作出的。'
- en: '![image](../images/f0161-03.jpg)'
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0161-03.jpg)'
- en: '**FIGURE 8-18:** The PCB file has been loaded.'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-18：** PCB 文件已加载。'
- en: '**Add batteries.** Drag battery clips out of the parts palette and add them
    to the circuit board. Connect the two batteries in series as you see in [Figure
    8-19](ch08.xhtml#ch08fig19). The black lines in the figure represent screen printing
    that will appear on the PCB, while the circles represent holes drilled in the
    PCB, with green representing populated terminals and red signifying unpopulated
    terminals.'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加电池。** 从零件面板中拖动电池夹并将其添加到电路板上。按照[图 8-19](ch08.xhtml#ch08fig19)中的示意图，将两块电池串联连接。图中的黑色线条代表将在
    PCB 上出现的丝印，而圆圈则表示 PCB 上的孔位，绿色表示已焊接的端子，红色表示未焊接的端子。'
- en: '![image](../images/f0161-04.jpg)'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0161-04.jpg)'
- en: '**FIGURE 8-19:** Adding the battery clips'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-19：** 添加电池夹'
- en: '**Add the switch.** The switch has three mounting holes (see [Figure 8-20](ch08.xhtml#ch08fig20));
    you should connect the battery to the middle one.'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加开关。** 开关有三个安装孔（参见[图 8-20](ch08.xhtml#ch08fig20)）；你应该将电池连接到中间的孔。'
- en: '![image](../images/f0162-01.jpg)'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0162-01.jpg)'
- en: '**FIGURE 8-20:** Adding the switch'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-20：** 添加开关'
- en: '**Add the surface-mount LED and resistor.** You can see from [Figure 8-21](ch08.xhtml#ch08fig21)
    that the LED and resistor don’t have mounting holes, but rather mounting pads.
    That means these components are surface-mount rather than through-hole. Connect
    the top lead of the switch to the first pad of the LED, connect the LED and resistor
    in series, and then ground the resistor to the negative terminal of the battery
    assembly. This resistor serves as a power indicator, so no matter what happens
    with the screwdriver you’ll know if the batteries are working!'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加表面贴装 LED 和电阻。** 从[图 8-21](ch08.xhtml#ch08fig21)可以看到，LED 和电阻没有安装孔，而是安装焊盘。这意味着这些组件是表面贴装的，而不是穿孔安装的。将开关的顶部引脚连接到
    LED 的第一个焊盘，将 LED 和电阻串联连接，然后将电阻接地到电池组的负端。这种电阻作为电源指示器，因此无论螺丝刀发生什么，你都能知道电池是否正常工作！'
- en: '![image](../images/f0162-02.jpg)'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0162-02.jpg)'
- en: '**FIGURE 8-21:** Adding the LED and resistor'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-21：** 添加 LED 和电阻'
- en: '**Add the three pots.** Drag the three pots from the palette and add them as
    shown in [Figure 8-22](ch08.xhtml#ch08fig22). The left-hand pin connects to power
    via the switch, and the right-hand pin connects to GND. The center (data) pins
    remain unpopulated for now.'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加三个电位器。** 从面板中拖动三个电位器，并按[图 8-22](ch08.xhtml#ch08fig22)中的示意图添加。左侧引脚通过开关连接到电源，右侧引脚连接到接地。中间（数据）引脚暂时不接线。'
- en: '![image](../images/f0162-03.jpg)'
  id: totrans-167
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0162-03.jpg)'
- en: '**FIGURE 8-22:** Connecting the three pots'
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-22：** 连接三个电位器'
- en: '**Add the ATtiny85.** Add the ATtiny85 socket by connecting the pins as you
    did in the previous project: pins 2, 6, and 7 connect to the pots, while pin 4
    connects to ground and pin 8 to power. [Figure 8-23](ch08.xhtml#ch08fig23) shows
    how it should be wired up.'
  id: totrans-169
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加 ATtiny85。** 通过将引脚连接到与前一个项目相同的方式，添加 ATtiny85 插座：引脚 2、6 和 7 连接到电位器，而引脚 4
    连接到接地，8 引脚连接到电源。[图 8-23](ch08.xhtml#ch08fig23)显示了正确的接线方式。'
- en: '![image](../images/f0162-04.jpg)'
  id: totrans-170
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0162-04.jpg)'
- en: '**FIGURE 8-23:** Adding the ATtiny85 socket'
  id: totrans-171
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-23：** 添加 ATtiny85 插座'
- en: '**Add the resistor and super-bright LED.** The final piece involves the LED
    and the resistor that protects it. Add the components in series, with the resistor
    attached to pin 5 of the ATtiny85 and the negative lead of the LED connecting
    to ground. [Figure 8-24](ch08.xhtml#ch08fig24) shows the completed PCB.'
  id: totrans-172
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**添加电阻和超亮LED。** 最后一步是添加LED和保护它的电阻。将这两个元件串联，电阻连接到ATtiny85的第5针脚，LED的负极引脚连接到地线。[图
    8-24](ch08.xhtml#ch08fig24)展示了完成的电路板。'
- en: '![image](../images/f0163-01.jpg)'
  id: totrans-173
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0163-01.jpg)'
- en: '**FIGURE 8-24:** The PCB is complete.'
  id: totrans-174
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-24：** 电路板已完成。'
- en: '**Output the Gerbers.** Export the Gerbers, the design files used by the fabrication
    staff to mill the boards. Go to **File** ▸ **Export** ▸ **For Production** and
    select **Extended Gerbers**. You will be asked to save the files to a folder.'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**输出Gerber文件。** 导出Gerber文件，这是生产人员用来铣削电路板的设计文件。进入**文件** ▸ **导出** ▸ **用于生产**，然后选择**扩展Gerber文件**。系统会提示您将文件保存到文件夹中。'
- en: When the Gerber files are output, check them on a Gerber checker like MCN ([Figure
    8-25](ch08.xhtml#ch08fig25)), available from *[http://mcn-audio.com/](http://mcn-audio.com/)*.
    This tool lets you inspect the traces visible on the PCB to ensure they are wired
    as expected. I’ve had many PCBs ruined by foolishly trusting that the software
    got it right, so I definitely recommend it.
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当输出Gerber文件时，请使用Gerber检查工具如MCN（[图 8-25](ch08.xhtml#ch08fig25)），该工具可以从 *[http://mcn-audio.com/](http://mcn-audio.com/)*
    获取。该工具允许您检查电路板上的痕迹，确保它们按预期布线。我曾因为盲目相信软件能够正确处理而导致许多电路板损坏，因此我强烈推荐使用此工具。
- en: '![image](../images/f0163-02.jpg)'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0163-02.jpg)'
- en: '**FIGURE 8-25:** Check your Gerbers with MCN or a similar application.'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-25：** 使用MCN或类似应用检查您的Gerber文件。'
- en: '**Get the PCB milled.** Chose one of a thousand PCB milling services. I use
    OSHPark (*[http://www.oshpark.com/](http://www.oshpark.com/)*) because they’re
    easy and inexpensive. [Figure 8-26](ch08.xhtml#ch08fig26) shows my milled circuit
    boards, back from the service.'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**铣削电路板。** 选择其中一种PCB铣削服务。我使用OSHPark（*[http://www.oshpark.com/](http://www.oshpark.com/)）](http://www.oshpark.com/)，因为它们简单且价格便宜。[图
    8-26](ch08.xhtml#ch08fig26)展示了我从服务商那里返回的铣削电路板。'
- en: '![image](../images/f0164-01.jpg)'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0164-01.jpg)'
- en: '**FIGURE 8-26:** The circuit boards are done. Now to add components!'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-26：** 电路板已完成，现在可以开始添加元件！'
- en: '**Solder in the components.** Solder in the components as you would expect.
    Of particular importance is the ATtiny85, which is susceptible to damage. Rather
    than soldering the IC directly into the circuit board, solder in the socket and
    place the IC in the socket. This also allows you to refresh the ATtiny85 at a
    future date.'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**焊接元件。** 按照预期焊接元件。特别需要注意的是ATtiny85，它容易受到损坏。与其将IC直接焊接到电路板上，不如先焊接座子，再将IC放入座子中。这样还可以在未来的某个时间刷新ATtiny85。'
- en: '**Code it.** Upload the optical screwdriver sketch to the ATtiny85 as described
    earlier in the chapter. It should work the same! Your completed project should
    look like [Figure 8-27](ch08.xhtml#ch08fig27).'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**编写代码。** 按照本章前面描述的方法，将光学螺丝刀的代码上传到ATtiny85上。它应该能够正常工作！您完成的项目应类似于[图 8-27](ch08.xhtml#ch08fig27)。'
- en: '![image](../images/f0164-02.jpg)'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0164-02.jpg)'
- en: '**FIGURE 8-27:** The completed screwdriver flashing out a beat with the help
    of a home-built synth'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 8-27：** 完成的螺丝刀，通过自制合成器闪烁出节拍'
- en: '**SUMMARY**'
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**总结**'
- en: Considered by many to be the simplest form of electronics project, a blinking
    LED nevertheless can offer some cool challenges and opportunities. This project
    shows how combining digital and analog makes for an intriguing tool that you can
    make yourself.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然被许多人认为是最简单的电子项目，闪烁的LED仍然能提供一些很酷的挑战和机会。本项目展示了如何将数字和模拟结合，制作一个有趣的工具，您可以自己动手制作。
