<html><head></head><body>
<section>
<header>
<h1 class="chapter">
<span class="ChapterNumber"><span epub:type="pagebreak" title="61" id="Page_61"/>4</span><br/>
<span class="ChapterTitle">Using Loops and Variables</span></h1>
</header>
<figure class="opener">
<img src="image_fi/book_art/chapterart.png" alt=""/>
</figure>
<p class="ChapterIntro">Starting with this chapter, you’ll learn ways to use OpenSCAD to work smarter, not harder. First, you’ll learn to use a very useful programming tool called a <em>loop</em>. Loops let you draw many similar shapes with only a few lines of code. </p>
<p>This is particularly useful when your designs have repeated features. For instance, if you’re creating a model of the Empire State Building, typing one individual statement for each window in the building would consume a lot of time. With a loop, you can repeat a single window along a fixed pattern so OpenSCAD can take care of the tedious work of copying and pasting the same window many times. You’ll also learn how to use variables to keep track of important data related to your designs. Because these new OpenSCAD tools will allow you to create more complicated designs, you’ll also learn how to use comments to leave notes for yourself and other collaborators on your design. </p>
<h2 id="h1-279547c04-0001"><span epub:type="pagebreak" title="62" id="Page_62"/>Leaving Notes with Comments</h2>
<p class="BodyFirst">In this chapter, the designs are a bit more complex than in previous chapters, so we’ll use comments in the coding examples to explain important details in our designs. <em>Comments</em> provide a way for you to leave notes to yourself and others who might read your code. OpenSCAD ignores comment statements, as they are meant only as notes for the humans who read them rather than as instructions for OpenSCAD to draw a particular shape. </p>
<h3 id="h2-279547c04-0001">Writing Single-Line Comments with //</h3>
<p class="BodyFirst">Single-line comments start with <code>//</code> and continue until the end of the line. They are useful for leaving short notes so you can remember later what your thought process was when you were creating your OpenSCAD design.</p>
<h3 id="h2-279547c04-0002">Writing Multiline Comments with /* */</h3>
<p class="BodyFirst">Multiline comments begin with <code>/*</code> and end with <code>*/</code>. OpenSCAD ignores everything inside a multiline comment. Multiline comments are useful for temporarily ignoring parts of your design when you want to focus on a particular element. Multiline comments make it easy to ignore multiple statements at once.</p>
<p>The following code shows single-line and multiline comments, which results in exactly one shape being drawn (a cuboid, <a href="#figure4-1" id="figureanchor4-1">Figure 4-1</a>), as the other OpenSCAD statements are enclosed in comments and ignored:</p>
<pre><code>cube([5, 10, 20]);

//sphere(5);

/*
cylinder(h=5, r1=10, r2=10);
cube([50, 50, 50]);
*/</code></pre>
<figure>
<img src="image_fi/279547c04/f04001.png" alt="f04001"/>
<figcaption><p><a id="figure4-1">Figure 4-1</a>: A single cube among a collection of comments</p></figcaption>
</figure>
<h2 id="h1-279547c04-0002"><span epub:type="pagebreak" title="63" id="Page_63"/>Repeating Code with a for Loop</h2>
<p class="BodyFirst">The main focus of this chapter is on getting OpenSCAD to take care of the tedious and error prone “copy-and-paste” approach to typing very similar statements in order to draw a collection of similar shapes. If, for example, you want to draw 10 identical cylinders on a straight line, you could write 10 statements—one for each cylinder—changing only the vector parameter in the <code>translate</code> operation to prevent overlap, as in the following design (<a href="#figure4-2" id="figureanchor4-2">Figure 4-2</a>): </p>
<pre><code>translate([10, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([20, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([30, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([40, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([50, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([60, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([70, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([80, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([90, 30, 0]) cylinder(h=4, r1=4, r2=4);
translate([100, 30, 0]) cylinder(h=4, r1=4, r2=4);</code></pre>
<figure>
<img src="image_fi/279547c04/f04002.png" alt="f04002"/>
<figcaption><p><a id="figure4-2">Figure 4-2</a>: A row of cylinders drawn with 10 separate statements or drawn with a single <span class="LiteralInCaption"><code>for</code></span> loop</p></figcaption>
</figure>
<p>Notice that the only change from one cylinder to the next is the increased position along the x-axis: the x position of the first cylinder is 10, the x position of the second cylinder is 20, and so on, until the last cylinder is drawn at an x position of 100. </p>
<p>Instead of using 10 separate statements, you can use a single <code>for</code> loop to generate this collection of cylinders. You just need to write a loop that draws the first cylinder 10 units from the x-axis, then increases the x position by 10 units every time a new cylinder is drawn, until drawing the last cylinder 100 units from the axis.</p>
<p>The following pseudocode shows the <code>for</code> loop syntax:</p>
<pre><code>for (<var>variable </var>= [<var>start</var>: <var>increment</var>: <var>end</var>]) {
  // one or more statements to be repeated
}</code></pre>
<p><span epub:type="pagebreak" title="64" id="Page_64"/>The <code>for</code> keyword indicates that you want to repeat OpenSCAD statements. Then you create a <var>variable</var> to keep track of the changing value after each repetition. The <var>variable</var> has a <var>start</var> value, an <var>increment</var> value, and an <var>end</var> value. Similar to grouping multiple shapes together in order to apply a single transformation, use curly brackets (<code>{ }</code>) to enclose all of the statements you want to repeat. </p>
<p>The following example uses a single <code>for</code> loop to draw 10 cylinders instead of using 10 separate statements:</p>
<pre><code>for (<span class="CodeAnnotation" aria-label="annotation1">1</span>x_position = [10:10:100]) {
    translate([x_position, 30, 0]) cylinder(h=4, r1=4, r2=4); 
}</code></pre>
<p>A variable called <code>x_position</code> <span class="CodeAnnotation" aria-label="annotation1">1</span> keeps track of the position of each cylinder. This variable has an initial value of 10; then every time the <code>for</code> loop repeats, the value of <code>x_position</code> increases by 10 so that the next cylinder is drawn 10 units farther along the x-axis. Once <code>x_position</code> is equal to 100, the last cylinder is drawn and the loop stops repeating. The resulting drawing will look the same as using 10 separate statements, as shown in <a href="#figure4-2">Figure 4-2</a>.</p>
<p>You can use loops to repeat shapes along many types of patterns. <a href="#figure4-3" id="figureanchor4-3">Figure 4-3</a> shows a cone repeating in a rotational pattern around the z-axis, and here’s the corresponding <code>for</code> loop:</p>
<pre><code>for (angle=[0:45:315]) {
    <span class="CodeAnnotation" aria-label="annotation1">1</span>rotate([0, 0, angle]) <span class="CodeAnnotation" aria-label="annotation2">2</span>translate([10, 0, 0]) <span class="CodeAnnotation" aria-label="annotation3">3</span>cylinder(h=5, r1=2, r2=0);
}</code></pre>
<figure>
<img src="image_fi/279547c04/f04003.png" alt="f04003"/>
<figcaption><p><a id="figure4-3">Figure 4-3</a>: Ten cones, rotated around the z-axis, generated with a<em> </em><span class="LiteralInCaption"><code>for</code></span><em> </em>loop</p></figcaption>
</figure>
<p><span epub:type="pagebreak" title="65" id="Page_65"/>Inside the curly brackets, the loop creates a cone <span class="CodeAnnotation" aria-label="annotation3">3</span>, translates it 10 units along the x-axis <span class="CodeAnnotation" aria-label="annotation2">2</span>, and then rotates it by <code>angle</code> degrees <span class="CodeAnnotation" aria-label="annotation1">1</span>. The first cone is drawn when the value of the <code>angle</code> variable is 0, so it is not rotated at all. The value of the <code>angle</code> variable increases by 45 each time the loop is repeated, rotating each cone accordingly. The last value of the <code>angle</code> variable is 315, so the last cone drawn by the loop is rotated by 315 degrees around the z-axis.</p>
<h2 id="h1-279547c04-0003">Debugging for Loops with echo</h2>
<p class="BodyFirst">Sometimes it’s useful to examine the value of a variable as it changes during the repetition of a <code>for</code> loop. For instance, if you want to double-check your mental math, it can be easier to see the exact values being generated by the <code>for</code> loop. Use the <code>echo</code> function to print each successive value of a variable to the console window, and check the console window (<a href="#figure4-4" id="figureanchor4-4">Figure 4-4</a>) to gather feedback about the execution of your OpenSCAD code:</p>
<pre><code>for (x_position = [10:10:100]) {
    translate([x_position, 30, 0]) cylinder(h=4, r1=4, r2=4); 
    echo("x:", x_position); //a good way to check your mental math
}</code></pre>
<figure>
<img src="image_fi/279547c04/f04004.png" alt="f04004"/>
<figcaption><p><a id="figure4-4">Figure 4-4</a>: Console output generated with <span class="LiteralInCaption"><code>echo</code></span></p></figcaption>
</figure>
<p>The <code>echo</code> function is helpful for debugging your programs. For example, you can use it to visualize all the values of a variable that controls the number of times a <code>for</code> loop repeats. The <code>echo</code> function provides a useful way to gather feedback about your <code>for</code> loops, because it will print out every value generated by the <code>for</code> loop. Adding string labels (like <code>"x:"</code>) to your console statements can help organize the console window output. Labels and variables in <code>echo</code> functions should be separated with commas (<code>,</code>).</p>
<h2 id="h1-279547c04-0004"><span epub:type="pagebreak" title="66" id="Page_66"/>Using Variables and Arithmetic</h2>
<p class="BodyFirst">Variables are used in conjunction with <code>for</code> loops to keep track of a pattern created by the looping. You can either use the generated values directly, or you can perform arithmetic on them to produce more sophisticated repetitions. </p>
<p>In this section, you’ll learn variable naming best practices, mathematical operations to perform on variables, and applications of variables within loops. </p>
<h3 id="h2-279547c04-0003">Naming Variables</h3>
<p class="BodyFirst">Neither the <code>x_position</code> variable from the preceding <code>for</code> loop example nor the <code>angle</code> variable from <a href="#figure4-3">Figure 4-3</a> is built into OpenSCAD. Those names were chosen to describe how the values are used in the design. The <code>x_position</code> variable describes the x-position of the cylinder, while <code>angle</code> describes the angle of rotation of the cone.</p>
<p>OpenSCAD allows you to name your variables however you want, as long as you don’t include spaces or use any symbols other than letters, underscores, or numbers. Be sure to select a name that helps you remember a variable’s purpose. This allows you to keep track of multiple variables in a design more easily, which can help tremendously when debugging errors or sharing your design.</p>
<h3 id="h2-279547c04-0004">Applying Mathematical Operations on Variables</h3>
<p class="BodyFirst">To start exploring how OpenSCAD applies mathematical operations on variables, say you assign the values 10 and 3 to the following variables: </p>
<pre><code>value1 = 10;
value2 = 3;</code></pre>
<p>To perform mathematical operations like finding the sum, difference, product, quotient, or remainder of these values, OpenSCAD lets you use standard symbols.</p>
<p>OpenSCAD also respects the conventional order of operations that you are probably familiar with from math class. Assigning the result of each of these arithmetic operations to a variable will help you separate your calculation statements from your output statements:</p>
<pre><code>sum = value1 + value2;
difference = value1 - value2;
product = value1 * value2;
quotient = value1 / value2;
remainder = value1 % value2;</code></pre>
<p>Now, use the <code>echo</code> function to display the result of each mathematical operation (<a href="#figure4-5" id="figureanchor4-5">Figure 4-5</a>). Each <code>echo</code> function uses a label to help identify which number is which in the console window.</p>
<pre><code><span epub:type="pagebreak" title="67" id="Page_67"/>echo("Addition:", sum);
echo("Subtraction:", difference);
echo("Multiplication:", product);
echo("Division:", quotient);
echo("Modulo:", remainder);</code></pre>
<figure>
<img src="image_fi/279547c04/f04005.png" alt="f04005"/>
<figcaption><p><a id="figure4-5">Figure 4-5</a>: Console output of the five arithmetic operators</p></figcaption>
</figure>
<h3 id="h2-279547c04-0005">Using Math and Variables Inside for Loops</h3>
<p class="BodyFirst">You can use arithmetic inside a <code>for</code> loop to make a single variable represent two patterns. The following design creates 13 spheres that are all generated by the same <code>for</code> loop (<a href="#figure4-6" id="figureanchor4-6">Figure 4-6</a>): </p>
<pre><code>for (faces=[3:<span class="CodeAnnotation" aria-label="annotation1">1</span>1:15]) {
    <span class="CodeAnnotationCode" aria-label="annotation2">2</span> $fn = faces;
    x_position = faces*10;
    translate([<span class="CodeAnnotation" aria-label="annotation3">3</span>x_position, 0, 0]) sphere(r=5);
    <span class="CodeAnnotationCode" aria-label="annotation4">4</span> echo("faces:", faces, "x-position:", x_position);
}</code></pre>
<figure>
<img src="image_fi/279547c04/f04006.png" alt="f04006"/>
<figcaption><p><a id="figure4-6">Figure 4-6</a>: A succession of increasingly smoother spheres</p></figcaption>
</figure>
<p><span epub:type="pagebreak" title="68" id="Page_68"/>Notice how the <code>faces</code> variable created by the <code>for</code> loop specifies both the number of faces used to render the sphere <span class="CodeAnnotation" aria-label="annotation2">2</span> and the position of the sphere along the x-axis <span class="CodeAnnotation" aria-label="annotation3">3</span>. With each repetition of the <code>for</code> loop, the value of <code>faces</code> increases by one <span class="CodeAnnotation" aria-label="annotation1">1</span>, while the value of<span class="ColorText" style="color:#004586"> </span><code>x_position</code> is updated by multiplying the new value of the <code>faces</code> variable by 10. The <code>echo</code> function <span class="CodeAnnotation" aria-label="annotation4">4</span> displays the changing values of <code>faces</code> and <code>x_position</code>. <a href="#figure4-7" id="figureanchor4-7">Figure 4-7</a> shows the console output.</p>
<figure>
<img src="image_fi/279547c04/f04007.png" alt="f04007"/>
<figcaption><p><a id="figure4-7">Figure 4-7</a>: The console output of a succession of increasingly smoother spheres </p></figcaption>
</figure>
<h3 id="h2-279547c04-0006">Using Arithmetic to Create Unique Patterns</h3>
<p class="BodyFirst">In addition to using arithmetic to leverage the power of a <code>for</code> loop to progressively change characteristics of a shape, you can also use arithmetic to create interesting patterns. The following code generates a sequence of cylinders of increasing heights by using a quadratic pattern to increase the height of each cylinder (<a href="#figure4-8" id="figureanchor4-8">Figure 4-8</a>):</p>
<pre><code>for (<span class="CodeAnnotation" aria-label="annotation1">1</span>x=<span class="CodeAnnotation" aria-label="annotation2">2</span>[1:1:10]) {
    height = <span class="CodeAnnotation" aria-label="annotation3">3</span>x*x;
    x_position = <span class="CodeAnnotation" aria-label="annotation4">4</span>5*x;
    translate([x_position, 0, 0]) cylinder(h=height, r1=2, r2=2);
}</code></pre>
<p>The preceding design uses a <code>for</code> loop to increase one variable, called <code>x</code> <span class="CodeAnnotation" aria-label="annotation1">1</span>, from 1 to 10 <span class="CodeAnnotation" aria-label="annotation2">2</span>. The <code>x</code> variable increases by one each time the loop repeats, so this loop repeats 10 times. This variable controls both the position along the x-axis and height of a series of cylinders. By creatively using arithmetic, you change the x position of the cylinder by 5 <span class="CodeAnnotation" aria-label="annotation4">4</span> every time the loop repeats. The height of the cylinder grows at a different rate, by squaring the value of <code>x</code> every time the loop repeats <span class="CodeAnnotation" aria-label="annotation3">3</span>; this is known as <em>quadratic growth</em>.</p>
<span epub:type="pagebreak" title="69" id="Page_69"/><figure>
<img src="image_fi/279547c04/f04008.png" alt="f04008"/>
<figcaption><p><a id="figure4-8">Figure 4-8</a>: A succession of cylinders following a quadratic pattern to increase height </p></figcaption>
</figure>
<h2 id="h1-279547c04-0005">Using Nested Loops to Draw 2D and 3D Grids</h2>
<p class="BodyFirst">OpenSCAD even lets you repeat a loop, so you can put a <code>for</code> loop inside another <code>for</code> loop. Whereas you can use one <code>for</code> loop to create a line of shapes, you can use a <code>for</code> loop inside another <code>for</code> loop to repeat that line of shapes to create a grid of shapes with only a few lines of code. This is called <em>nesting</em> the loops. The following design uses nested <code>for</code> loops to draw a grid of cylinders (<a href="#figure4-9" id="figureanchor4-9">Figure 4-9</a>):</p>
<pre><code><span class="CodeAnnotationHang" aria-label="annotation1">1</span> for (y_pos = [10:10:50]) { 
<span class="CodeAnnotationCode" aria-label="annotation2">2</span> for (x_pos = [10:10:100]) {
     translate([x_pos, y_pos, 0]) cylinder(h=4, r1=4, r2=4); 
  <span class="CodeAnnotation" aria-label="annotation3">3</span> echo("x:", x_pos, "y:", y_pos);
   } // x_pos loop
} // y_pos loop</code></pre>
<p>The preceding code uses one loop to draw a line of 10 cylinders <span class="CodeAnnotation" aria-label="annotation2">2</span>. That <code>for</code> loop is repeated by the first <code>for</code> loop <span class="CodeAnnotation" aria-label="annotation1">1</span>, so the line of cylinders repeats. Two variables—that is, the <code>x_pos</code> and <code>y_pos</code> variables—work together to change both the x position and y position of the repeated cylinder. The inner loop repeats 10 times, while the outer loop repeats 5 times. This generates a total of 50 cylinders. The <code>echo</code> function is used to keep track of the changing values of both variables in the console window <span class="CodeAnnotation" aria-label="annotation3">3</span>. Notice that comments are used to indicate which bracket belongs to which loop. Commenting brackets isn’t necessary but can be helpful when you have many curly brackets next to each other. </p>
<span epub:type="pagebreak" title="70" id="Page_70"/><figure>
<img src="image_fi/279547c04/f04009.png" alt="f04009"/>
<figcaption><p><a id="figure4-9">Figure 4-9</a>: A grid of cylinders drawn with nested <span class="LiteralInCaption"><code>for</code></span> loops</p></figcaption>
</figure>
<p>You now know how to generate 50 cylinders with four lines of code, which certainly beats writing a long list of 50 statements to generate each cylinder individually. This would be the perfect technique for drawing the many windows in a skyscraper.</p>
<h3 id="h2-279547c04-0007">Generating the Windows in a Skyscraper with Nested Loops</h3>
<p class="BodyFirst"><a href="#listing4-1" id="listinganchor4-1">Listing 4-1</a> draws a building with 60 windows (<a href="#figure4-10" id="figureanchor4-10">Figure 4-10</a>) by using nested <code>for</code> loops:</p>
<pre><code>num_rows = 10;
num_cols = 6;

building_width = num_cols*5;
building_height = num_rows*6;

<span class="CodeAnnotationHang" aria-label="annotation1">1</span> difference() {
<span class="CodeAnnotationCode" aria-label="annotation2">2</span> cube([building_width, 10, building_height]);

  <span class="CodeAnnotationHang" aria-label="annotation3">3</span> for (z = [1:1:num_rows]) {
  for (x = [0:1:num_cols-1]) {
  <span class="CodeAnnotationCode" aria-label="annotation4">4</span> x_pos = x*5+1;
    z_pos = z*5;
    translate([x_pos, -1, z_pos]) cube([3, 3, 4]);
  } // x loop
  } // z loop
} // difference</code></pre>
<p class="CodeListingCaption"><a id="listing4-1">Listing 4-1</a>: Drawing a skyscraper with 60 windows by using nested <code>for</code> loops</p>
<span epub:type="pagebreak" title="71" id="Page_71"/><figure>
<img src="image_fi/279547c04/f04010.png" alt="f04010"/>
<figcaption><p><a id="figure4-10">Figure 4-10</a>: A window grid on a skyscraper</p></figcaption>
</figure>
<p><a href="#listing4-1">Listing 4-1</a> uses variables (named <code>num_rows</code> and <code>num_cols</code>) to control not only the number of windows, but also the width and height of the building. First, it draws a large cuboid to represent the building <span class="CodeAnnotation" aria-label="annotation2">2</span>. Next, it uses nested <code>for</code> loops to draw a grid of 60 cuboids <span class="CodeAnnotation" aria-label="annotation3">3</span>. Finally, the <code>difference</code> operation subtracts the cuboids from the larger building to create recessed windows <span class="CodeAnnotation" aria-label="annotation1">1</span>. Two variables (<code>x_pos</code> and <code>z_pos</code>) are used to calculate the specific x position and z position of each window prior to drawing the cuboid <span class="CodeAnnotation" aria-label="annotation4">4</span>. </p>
<p>Our organization of the code in <a href="#listing4-1">Listing 4-1</a> makes it easy to change the skyscraper’s characteristics. The variables <code>num_rows</code> and <code>num_cols</code> not only control the number of times the two loops repeat, but also set the width and height of the building, because the values of the <code>building_width</code><span class="ColorText" style="color:#004586"> </span>and <code>building_height</code> variables are dependent on the values of <code>num_rows</code> and <code>num_cols. </code>Making one change to either <code>num_rows </code>or <code>num_cols</code> will completely change the skyscraper’s look. You’ll learn more about the advantages of this sort of organization in the next chapter. </p>
<h3 id="h2-279547c04-0008">Triple Nesting to Create a 3D Grid of Shapes</h3>
<p class="BodyFirst">You can also draw a 3D grid of shapes by adding another layer of nesting—that is, by putting a loop inside a loop, inside a loop—although this might take a while to render since it will generate a large number of shapes (<a href="#figure4-11" id="figureanchor4-11">Figure 4-11</a>):</p>
<pre><code>for (r = [0:15:255]) {
  for (g = [0:15:255]) {
    for (b = [0:15:255]) {
<span epub:type="pagebreak" title="72" id="Page_72"/>      translate([r, g, b]) color([r/255, g/255, b/255]) cube(5);
    } // b loop
  } // g loop
} // r loop</code></pre>
<figure>
<img src="image_fi/279547c04/f04011.png" alt="f04011"/>
<figcaption><p><a id="figure4-11">Figure 4-11</a>: A nested <span class="LiteralInCaption"><code>for</code></span> loop representing the RGB color space</p></figcaption>
</figure>
<p>This <em>triple nesting</em> essentially uses a third loop to repeat a grid of shapes. The preceding design uses three nested loops to draw a cube representing the RGB (red, green, blue) color space. The <code>color</code> transformation takes a 3D vector indicating the percentage of red, green, and blue light that should be represented in the color of the shape. Since RGB uses 255 as the maximum value, dividing by 255 results in a decimal between 0 and 1. The <code>color</code> transformation can be useful for debugging and organizing your designs, but it is not very useful for 3D printing, since the color of a 3D print depends entirely on the type of filament used. Thus, the <code>color</code> transformation is effective only in Preview mode and will not display in Render mode.</p>
<h2 id="h1-279547c04-0006">Summary </h2>
<p class="BodyFirst">This chapter introduced the concept of looping, which lets you repeat statements without rewriting the same code. Looping lets you tell the computer to do all of the work of rewriting a statement over and over again. Variables are an important part of looping in OpenSCAD, although they are not exclusive to looping. Variables can also help you keep track of important <span epub:type="pagebreak" title="73" id="Page_73"/>values. Through the use of arithmetic operators, variables can act as important starting points for other variables, which is useful when you want to make changes to your design.</p>
<p>The following are some important tips for using loops:</p>
<ul>
<li>If you find yourself copying, pasting, and making minor changes to a repeating statement, consider generating the repetition with a loop.</li>
<li>Use arithmetic to create sophisticated repetitions based on the pattern created by a loop.</li>
<li>Give variables names that describe their purpose.</li>
<li>Organizing all of your variables at the top of your program makes it easy to change your design.</li>
<li>Use the <code>echo</code> function to output the value of a variable as a loop repeats. This can help you keep track of variables that are the result of complicated arithmetic.</li>
<li>Label all <code>echo</code> function output so you can output several variables when you have nested loops. </li>
<li>If you want to use variable values generated by a <code>for</code> loop in a <code>text</code> shape, remember to convert the number to a string with <code>str</code> (as mentioned in <span class="xref" itemid="xref_target_Chapter 3).">Chapter 3).</span></li>
<li>The <code>color</code> transformation is useful for debugging in Preview mode, but it does not translate to Render mode or 3D printing.</li>
<li>Comments are notes programmers leave to help explain their coding choices. </li>
<li>OpenSCAD ignores comments, but humans use comments to help figure out what coding statements are trying to accomplish.</li>
</ul>
<aside epub:type="sidebar">
<div class="dottedTop hr"><hr/></div>
<section class="boxcustom2">
<h2 id="h1-279547c04-0007"><span epub:type="pagebreak" title="74" id="Page_74"/>Design Time: Loops and Variables</h2>
<p class="BoxBodyFirst">Before reading further, practice the skills you learned in this chapter by building each of the complex designs in <a href="#figure4-12" id="figureanchor4-12">Figure 4-12</a>.</p>
<figure>
<img src="image_fi/279547c04/f04012.png" alt="f04012"/>
<figcaption><p><a id="figure4-12">Figure 4-12</a>: Practice drawing these complex designs.</p></figcaption></figure><div class="dottedBottom hr"><hr/></div>
</section>
</aside>
<aside epub:type="sidebar">
<div class="dottedTop hr"><hr/></div>
<section class="boxcustom2">
<h2 id="h1-279547c04-0008"><span epub:type="pagebreak" title="75" id="Page_75"/>Big Projects: Loops</h2>
<p class="BoxBodyFirst">Practice the skills you learned in Chapters<span class="xref" itemid="xref_target_ 1"> 1</span> to <span class="xref" itemid="xref_target_4">4</span> with the following three projects.</p>
<h3>Detail Test</h3>
<p class="BoxBodyFirst">Use loops to generate this detail test (<a href="#figure4-13" id="figureanchor4-13">Figure 4-13</a>) for your 3D printer. This design helps you understand the lower limits of the printability of the smallest details on your designs. OpenSCAD will always render a virtual model with all of the details you’ve specified, but just because you can render fine details virtually doesn’t mean every detail will be visible when you 3D-print your design. Some details are just too small to print.</p>
<figure>
<img src="image_fi/279547c04/f04013.png" alt="f04013"/>
<figcaption><p><a id="figure4-13">Figure 4-13</a>: Detail test</p></figcaption></figure>
<p class="BoxListHead"><b>3D-Printing Tip for the Detail Test</b></p>
<ol class="none">
<li>In <span class="xref" itemid="xref_target_Chapter 1">Chapter 1</span>, you played around with varying the resolution of your 3D print by selecting High, Medium, or Low quality default settings. Print this detail test a few times, each time using your 3D printing preparation software to manually select a different layer height. Try to determine the smallest (close to 0.1 mm) and largest (close to 0.34 mm) layer heights for your printer; then make two prints of this design to see the effect of each layer height on the fine detail resolution of your prints. </li>
</ol>
<h3>Towers of Hanoi Puzzle</h3>
<p class="BoxBodyFirst">Create a Towers of Hanoi puzzle using two loops (<a href="#figure4-14" id="figureanchor4-14">Figure 4-14</a>). One loop should create the pegs, and one loop should create the discs. Remember to create holes in each disc that are slightly larger than the peg.</p>
<figure>
<img src="image_fi/279547c04/f04014.png" alt="f04014"/>
<figcaption><p><span epub:type="pagebreak" title="76" id="Page_76"/><a id="figure4-14">Figure 4-14</a>: Towers of Hanoi puzzle</p></figcaption></figure>
<p class="BoxListHead"><b>3D-Printing Tip for the Towers of Hanoi Puzzle</b></p>
<ol class="none">
<li>This design uses two loops: one for the discs and one for the bars. The picture represents how you might play the Towers of Hanoi game (which requires you to move all discs to the opposite bar by only stacking smaller discs on top of larger discs). The game begins in this configuration, with each disc stacked on a larger disc beneath it.</li>
<li>However, if you try to print your Towers of Hanoi game in this configuration, you won’t be able to play! The discs would print as one solid unit. Once you have created your design, try to modify the loop that creates the discs so that they appear horizontally behind the game board. This will allow you to print the individual discs as separate units.</li>
</ol>
<h3>Tic-Tac-Toe Game</h3>
<p class="BoxBodyFirst">Use loops to create a tic-tac-toe game (<a href="#figure4-15" id="figureanchor4-15">Figure 4-15</a>).</p>
<figure>
<img src="image_fi/279547c04/f04015.png" alt="f04015"/>
<figcaption><p><a id="figure4-15">Figure 4-15</a>: Tic-tac-toe game</p></figcaption></figure>
<p class="BoxListHead"><b><span epub:type="pagebreak" title="77" id="Page_77"/>3D-Printing Tip for the Tic-Tac-Toe Game</b></p>
<ol class="none">
<li>Don’t forget that holes should have slightly larger diameters than pins; otherwise, the pieces of this tic-tac-toe game won’t fit together. Also, notice how the game pieces are arranged relative to the game board. This arrangement will print just fine. However, you might want to use three different colors to print the Xs, Os, and game board. In that case, you can successively comment out sections of your code to render and download three different <em>.stl</em> files for printing with different filaments.</li>
</ol><div class="dottedBottom hr"><hr/></div>
</section>
</aside>
</section>
</body></html>