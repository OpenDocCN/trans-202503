- en: '**8'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**8'
- en: TWO BALLISTIC CHRONOGRAPHS**
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 两种弹道测速仪**
- en: '![image](../images/common-01.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/common-01.jpg)'
- en: This project is a device for measuring the velocity of a projectile. It originally
    measured the velocity of pellets from air-soft and paintball guns, and it evolved
    to be capable of measuring projectile velocities from BB and pellet guns before
    finally measuring velocities of over 3,000 feet per second (fps) from higher-powered
    weapons. The main intention of this project is not to measure the velocities of
    traditional fire-arms, but this project does have that capability, and the end
    of this chapter describes how to use it to measure the velocity of a 9 mm bullet.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 这个项目是用来测量弹丸速度的设备。最初它是用来测量气枪和彩弹枪的子弹速度，后来它发展为能够测量BB枪和弹丸枪的弹丸速度，最终能测量高达每秒3,000英尺（fps）以上的高功率武器的速度。这个项目的主要目标不是测量传统火器的速度，但它确实具备这个能力，本章的最后部分将介绍如何使用它来测量9毫米子弹的速度。
- en: 'The Ballistic Chronograph was meant to be simple, but it turned out a little
    more complex than originally planned. The result is two projects: the Full Ballistic
    Chronograph and a more diminutive and simpler device I call the Chronograph Lite
    (see [Figure 8-1](ch08.xhtml#ch08fig8-1)).'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 弹道测速仪本来设计得很简单，但结果比原计划稍微复杂了一些。最终产生了两个项目：完整的弹道测速仪和一个更小巧、更简单的设备，我称之为Chronograph
    Lite（见[图8-1](ch08.xhtml#ch08fig8-1)）。
- en: '![image](../images/fig8_1.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_1.jpg)'
- en: '*Figure 8-1: The Chronograph Lite with a projectile-acceleration channel attached
    to a 0.177 caliber pellet gun*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*图8-1：附有弹丸加速度通道的Chronograph Lite，连接到0.177口径的弹丸枪*'
- en: I’ve attempted to make each Ballistic Chronograph system both flexible and accurate.
    The flexibility comes from separating the sensor elements from the readout and
    permitting different types of sensors to measure different devices—and producing
    different readouts with the same acceleration channel.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我尽力让每个弹道测速仪系统既灵活又精确。灵活性来自于将传感器元素与读数分开，并允许不同类型的传感器用于测量不同设备——并且使用相同的加速度通道产生不同的读数。
- en: In this project, you will use some components not too frequently encountered
    in Arduino projects, such as a crystal oscillator to provide precise timing (outside
    of the crystal oscillator used in the Nano), infrared LEDs, phototransistors,
    logic gates, a 12-stage digital counter, and a digital-to-analog converter (DAC)
    to help perform the counting function.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个项目中，你将使用一些在Arduino项目中不常见的元件，如晶体振荡器来提供精确的定时（与Nano中使用的晶体振荡器不同）、红外LED、光电晶体管、逻辑门、12级数字计数器和数字-模拟转换器（DAC）来帮助执行计数功能。
- en: '**A WORD OF WARNING**'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告提示**'
- en: With deference to Jean Shepherd’s *A Christmas Story* (in which everyone warns
    Ralphie, “You’re going to shoot your eye out!”), remember that any firearm is
    inherently dangerous, and many air-powered weapons can fire at lethal force. Whether
    you test an air-powered device or a weapon using high-powered bullets, use extreme
    caution. The Full Ballistic Chronograph and the Lite version were developed, tested,
    and made primarily for lower-powered weapons using CO[2] and air power to accelerate
    projectiles. Though the device is capable of measuring bullets from traditional
    firearms, such as the 9 mm pistol mentioned earlier, it was not developed or tested
    for that application. I strongly recommend that you not attempt to use the device
    you build in this chapter in such applications.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本着对Jean Shepherd的*《圣诞故事》*的敬意（在其中每个人都警告Ralphie，“你会把眼睛射瞎！”），请记住，任何火器本身都具有危险性，许多气动武器也能发射致命力量。无论你测试的是气动设备还是使用高能子弹的武器，都要格外小心。完整的弹道测速仪和Lite版本主要是为使用CO[2]和气动装置加速弹丸的低功率武器开发、测试并制造的。虽然该设备能够测量传统火器的子弹速度，比如前面提到的9毫米手枪，但它并未为此应用进行开发或测试。我强烈建议你不要尝试将本章中构建的设备用于此类应用。
- en: '**What Is a Ballistic Chronograph?**'
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**什么是弹道测速仪？**'
- en: A device for measuring the velocity of a high-speed projectile exiting a firearm
    is generally known as a *ballistic chronograph*. The term *chronograph* was co-opted
    from the horological community and is now widely used to describe instruments
    for measuring the speed of bullets, arrows, darts, and so on.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 用于测量从火器中发射的高速弹丸速度的设备通常被称为*弹道测速仪*。术语*测速仪*是从钟表学领域借用过来的，现在广泛用于描述用于测量子弹、箭、飞镖等速度的仪器。
- en: 'This chapter proposes two versions of the Ballistic Chronograph: one offering
    the ability to accurately measure very high-speed projectiles and a Lite version
    offering a little less precision but a far simpler implementation. Though I refer
    to the simpler build as the “Lite” version, it is by no means unsophisticated.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了两种版本的弹道计：一种能够准确测量高速弹丸的版本，以及一种提供稍低精度但实现更加简便的轻量版。尽管我将较简单的版本称为“轻量版”，但它绝不是不成熟的设计。
- en: '***Commercial Chronographs***'
  id: totrans-14
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***商业弹道计***'
- en: There are several commercially available chronographs, most of which are intended
    for high-powered pistols and rifles. Chronographs are usually placed on the ground
    or a table in front of the shooter. Most of the popular commercial devices depend
    on ambient sunlight for operation and, therefore, don’t work indoors or on overcast
    days. And while they are modestly priced, they are not really cheap.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 市面上有多种商业弹道计，大多数是为高功率手枪和步枪设计的。弹道计通常被放置在射手前方的地面或桌面上。大多数流行的商业设备依赖于环境光照进行工作，因此它们无法在室内或阴天使用。虽然这些设备价格适中，但并不算便宜。
- en: Chronographs vary from simple two-wire devices (still in use and believed by
    some to be the most accurate) to relatively elaborate units with digital memory,
    average velocity calculations, and other features. The two-wire approach simply
    uses two thin strands of wire (36- or 40-gauge wire will do) stretched between
    two pairs of contacts accurately spaced apart. The projectile is shot and breaks
    the first wire to start a timer, and then, if you have good aim, breaks the second
    wire to stop the timer. The time between breakages is calculated to provide a
    speed value in feet or meters per second. The very early chronographs were built
    with a clock, which had readouts of ones and zeros displayed in a bank of LEDs.
    The binary number had to be translated to a decimal number and then calculated
    with the distance between the wires to get the velocity.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 弹道计的种类从简单的双线设备（至今仍在使用，并且被一些人认为是最准确的）到相对复杂的设备，这些设备具有数字存储、平均速度计算及其他功能。双线方法仅使用两根细线（36号或40号线即可），将它们拉伸并精确地放置在两组接触点之间。弹丸发射后，首先打断第一根线，启动计时器；然后，如果瞄准准确，打断第二根线，停止计时器。根据两次线断裂之间的时间，计算出以英尺或米为单位的速度。最早的弹道计是用时钟构建的，通过一排LED显示的数字1和0进行读数。这个二进制数需要转换为十进制数，然后与线之间的距离一起计算出速度。
- en: '***Measuring Muzzle Velocity***'
  id: totrans-17
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***测量枪口速度***'
- en: Now that you know what types of prebuilt chronographs are out there, let’s take
    a look at the physics of the device. A projectile leaving the muzzle of a weapon
    has a velocity imparted to it by some propellant, such as air, CO[2], or the gas
    created by the rapid oxidation of the fuel in gunpowder. The projectile travels
    down the barrel and exits the muzzle. The speed of the projectile as it exits
    is called *muzzle velocity*.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你知道了市面上有哪些现成的弹道计，我们来看看该设备的物理原理。离开武器枪口的弹丸由某种推进剂（如空气、CO[2]，或是火药快速氧化产生的气体）赋予它速度。弹丸沿枪管前进并离开枪口。弹丸离开枪口时的速度称为*枪口速度*。
- en: The muzzle velocity of air-powered guns tends to vary depending on several factors,
    including the charge of the propellant, cleanliness of the barrel, and projectile-to-barrel
    matchup. Some air rifles can be pumped to almost 3,000 psi (pounds per square
    inch) to fire larger projectiles at relatively significant velocities. These larger
    air guns have relatively low muzzle velocities in the sub-1,000 fps range, but
    they pack a real punch. Compared to conventional air rifles, which shoot 0.177-inch
    pellets that pack between 15 and 25 ft-lbs (foot-pounds) of power, these larger-bore
    rifles offer between 500 and 700 ft-lbs of power.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 空气动力枪的枪口速度会因多个因素而有所不同，包括推进剂的装药量、枪管的清洁度和弹丸与枪管的匹配。某些空气步枪的压力可以被充至近3000 psi（每平方英寸磅），以便发射较大的弹丸，且射速相对较高。这些大口径空气枪的枪口速度相对较低，通常在1000
    fps以下，但威力十足。与常规空气步枪（通常发射直径为0.177英寸的弹丸，提供15到25英尺磅（ft-lbs）动能）相比，这些大口径步枪提供500到700英尺磅的动能。
- en: Ideally, you would want to measure the velocity as close to the end of the barrel
    as possible. However, this can be difficult, and some chronograph makers claim
    that the velocity is not attenuated much in the first several feet (or even yards)
    of travel. On the other hand, there is little doubt that air resistance is a significant
    factor, and the projectile will slow at least somewhat in the first few feet—especially
    in the case of larger projectiles.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，你希望尽可能靠近枪管的末端测量速度。然而，这可能比较困难，一些计速器制造商声称，在前几英尺（甚至几码）的飞行中，速度变化不大。另一方面，毫无疑问空气阻力是一个显著的因素，飞行物在前几英尺内会至少有一定的减速，特别是对于较大的飞行物来说。
- en: '***This Project’s Approach***'
  id: totrans-21
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***本项目的做法***'
- en: As in the two-wire ballistic chronograph systems, we’re trying to measure the
    time it takes for a projectile to travel a fixed distance. But instead of breaking
    thin wires, this project takes advantage of an infrared light source and light-sensitive
    receiver, as illustrated in [Figure 8-2](ch08.xhtml#ch08fig8-2).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 就像两线式弹道计速器系统一样，我们尝试测量飞行物穿越固定距离所需的时间。但与打断细线不同，该项目利用了红外光源和光敏接收器，如[图8-2](ch08.xhtml#ch08fig8-2)所示。
- en: '![image](../images/fig8_2.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_2.jpg)'
- en: '*Figure 8-2: The basic principle in measuring the speed of the projectile is
    to have it break a beam of light to start a clock and then break another beam
    of light to stop the clock*.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '*图8-2：测量飞行物速度的基本原理是让飞行物打断光束启动计时器，然后打断另一个光束停止计时器*。'
- en: Two pairs of LEDs and IR sensors are arranged so that the IR sensor normally
    detects the light source. But when the projectile breaks the light beam of the
    first pair, the sensor goes dark and changes its electrical state. The processor
    senses this change and starts a timer. When the projectile interrupts a second
    source/receiver pair, the timer stops. The two sets of light sources and receivers
    are set an accurate distance apart so the time of travel can be relatively easily
    calculated into projectile speed.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 两对LED和红外传感器被布置成红外传感器通常能够检测光源。但是当飞行物穿过第一对传感器的光束时，传感器会变暗并改变其电气状态。处理器检测到这一变化并启动定时器。当飞行物中断第二对源/接收器的光束时，定时器停止。这两组光源和接收器之间的距离被精确设置，因此可以相对容易地计算出飞行物的速度。
- en: For a simple example, say the beams of light are set a foot apart. A projectile
    interrupts a beam of light and starts the clock; when the projectile interrupts
    the second beam of light, the clock stops. If the microcontroller’s timer measured
    1 second, the velocity would be 1 foot in 1 second, or 1 fps.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 举个简单的例子，假设光束的间距是1英尺。当飞行物打断第一个光束时，计时器开始；当飞行物打断第二个光束时，计时器停止。如果微控制器的计时器测得是1秒，那么速度就是1英尺每秒，或1
    fps。
- en: This system can be used with a variety of projectiles and provide a digital
    readout on an LCD. Unlike other approaches, this device separates out the sensor
    bank from the electronics such that, if desired, different sensors can be swapped
    in and out for different firearms or even different applications. For instance,
    you could set up a sensor channel and do some basic physics experiments by dropping
    small objects through it and recording their velocity.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 该系统可以用于各种飞行物，并在LCD上提供数字读数。与其他方法不同，该设备将传感器组与电子设备分离开来，因此，如果需要，可以为不同的枪械或甚至不同的应用场景更换不同的传感器。例如，你可以设置一个传感器通道，通过它做一些基础的物理实验，记录小物体掉落的速度。
- en: '**The Chronograph Lite**'
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**Chronograph Lite**'
- en: First, we’ll take a look at the Chronograph Lite, which is simple to construct
    and has only a handful of parts.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们来看一下Chronograph Lite，它非常容易构建，并且只有少量部件。
- en: '***Required Tools***'
  id: totrans-30
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***所需工具***'
- en: Soldering iron and solder
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 焊接铁和焊料
- en: Drill and drill bits (1/2, 1/4, and 1/8 inches)
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 电钻和钻头（1/2、1/4 和 1/8 英寸）
- en: Philips head and slotted screwdrivers
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 十字螺丝刀和平头螺丝刀
- en: Saw (keyhole or saber saw)
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 锯子（钥孔锯或伐木锯）
- en: '***Parts List***'
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***零件清单***'
- en: One Arduino Pro Mini or clone
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 一块 Arduino Pro Mini 或其克隆版
- en: Two IR LEDs, about 650–850 nm Two IR photosensors (I used the Honeywell Optoschmitt
    SA5600.)
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 两个红外LED，波长约为650–850纳米；两个红外光电传感器（我使用了霍尼韦尔Optoschmitt SA5600型）。
- en: '**NOTE**'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*Some users have had trouble matching the IR LEDs with the Optoschmitt photosensors.
    If you run into this problem, try the Honeywell SE3450/5450 or equivalent. Another
    option is to use two Adafruit IR Break Beams (part #2167) instead of the separate
    LEDs and sensors. The IR Break Beams will work for the Chronograph Lite, but the
    output must be inverted for the full version.)*'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '*有些用户在将红外LED与Optoschmitt光传感器匹配时遇到了问题。如果你碰到这个问题，可以尝试使用霍尼韦尔 SE3450/5450 或同等产品。另一种选择是使用两个
    Adafruit IR Break Beams（零件号 #2167），而不是单独的LED和传感器。IR Break Beams适用于Chronograph
    Lite，但需要对输出进行反向处理，以便适配完整版。）*'
- en: One 270-ohm, 1/8 W resistor (Optional) Two 10-kilohm, 1/8 W resistors (if using
    phototransistors rather than Optoschmitt photosensors)
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 270 欧姆、1/8 W 电阻（可选）两个 10 千欧姆、1/8 W 电阻（如果使用光电晶体管而非 Optoschmitt 光传感器）
- en: One channel holding two LED/sensor pairs One 16×2 LCD
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 一个包含两对 LED/传感器的通道 一个 16×2 LCD 屏幕
- en: One I²C adapter, if not included with the LCD One x4 adapter housing (see “[Connectors
    Used in This Book](ch00.xhtml#ch00lev1sec6)” on [page 18](ch00.xhtml#page_18))
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 I²C 适配器，如果 LCD 没有包含的话 一个 x4 适配器外壳（见“[本书使用的连接器](ch00.xhtml#ch00lev1sec6)”
    在 [第18页](ch00.xhtml#page_18)）
- en: Four female pins for housing (see “[Connectors Used in This Book](ch00.xhtml#ch00lev1sec6)”
    on [page 18](ch00.xhtml#page_18))
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 四个母头插针（见“[本书使用的连接器](ch00.xhtml#ch00lev1sec6)” 在 [第18页](ch00.xhtml#page_18)）
- en: One SPST switch One momentary NO switch
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 SPST 开关 一个瞬时 NO 开关
- en: One 9V battery connector
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 9V 电池连接器
- en: One 9V battery
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 9V 电池
- en: One Hammond 1591 BTCL enclosure or equivalent
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 Hammond 1591 BTCL 外壳或同等产品
- en: Two 7 1/2 × 1 1/2 × 0.06–inch aluminum pieces
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 两个 7 1/2 × 1 1/2 × 0.06 英寸铝片
- en: One 1 3/8 × 7 1/2–inch piece of 1 3/8-inch acrylic sheet
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 一块 1 3/8 × 7 1/2 英寸的 1 3/8 英寸丙烯酸板
- en: 'Two #10-24×1-inch nylon screws'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '两个 #10-24×1 英寸尼龙螺钉'
- en: 'Two #10×24 nylon nuts'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '两个 #10×24 尼龙螺母'
- en: Four 4-40×1/2-inch screws
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 四个 4-40×1/2 英寸螺钉
- en: Eight 4-40 nuts
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 八个 4-40 螺母
- en: Four 4-40 washers
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 四个 4-40 螺母垫圈
- en: Assorted 28-gauge hookup wire
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 各种 28 号连接线
- en: '***Downloads***'
  id: totrans-56
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***下载链接***'
- en: '**Sketch** *ChronographLite.ino*'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**草图** *ChronographLite.ino*'
- en: '**Templates** *PanelCutoutLite.pdf, PanelCutout.pdf, AccelerationChannel.pdf*'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**模板** *PanelCutoutLite.pdf, PanelCutout.pdf, AccelerationChannel.pdf*'
- en: '***The Schematic***'
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***原理图***'
- en: Outside the Arduino board, the circuitry for this project is not very complex.
    The schematic in [Figure 8-3](ch08.xhtml#ch08fig8-3) uses the I²C bus to power
    the LCD, two connections for the photosensors, and two connections for the clear
    switch.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Arduino 主板外，项目的电路并不复杂。[图 8-3](ch08.xhtml#ch08fig8-3) 中的原理图使用 I²C 总线为 LCD 提供电源，两个光电传感器的连接以及两个清除开关的连接。
- en: '![image](../images/fig8_3.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_3.jpg)'
- en: '*Figure 8-3: The schematic of the Chronograph Lite. The primary schematic shows
    the phototransistors and the alternate section shows the Honeywell Optoschmitt
    sensors (bottom left)*.'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 8-3：Chronograph Lite 的原理图。主原理图显示了光电晶体管，而备用部分则显示了霍尼韦尔 Optoschmitt 传感器（左下角）*。'
- en: '***Building a Test Bed***'
  id: totrans-63
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***构建测试平台***'
- en: '[Figure 8-4](ch08.xhtml#ch08fig8-4) shows the test bed that was used to prove
    the concept and develop the sketch. I suggest you build your own and install your
    LEDs and photosensors into it before building the breadboard.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 8-4](ch08.xhtml#ch08fig8-4)展示了用于验证概念并开发草图的测试平台。我建议你先自己动手制作一个，并将LED和光电传感器安装进去，然后再搭建面包板。'
- en: For this test bed, I cut two pieces of cardboard approximately 2×6 inches and
    punched them to fit two pairs of IR LEDs and phototransistors that were spaced
    3 inches apart. I then screwed the cardboard to a 1-inch-thick piece of wood,
    though you could glue or staple it if you prefer. When you build yours, be sure
    that each phototransistor is directly opposite an IR LED in the channel.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个测试平台，我剪切了两块约 2×6 英寸的纸板，并打孔使其适配两个红外LED和光电晶体管的对接位置，两个传感器之间间隔为 3 英寸。然后，我将纸板用螺丝固定到一块
    1 英寸厚的木板上，你也可以选择用胶水或钉书钉固定。制作时，确保每个光电晶体管与红外LED在通道中直接对面。
- en: 'After installing the IR LEDs and phototransistors into the test bed, I recommend
    preparing them for the breadboard as follows:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 安装红外LED和光电晶体管到测试平台后，我建议按照以下方式为面包板做准备：
- en: Connect the two IR LED anodes with a piece of wire by soldering or wire-wrapping.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用一根电线将两个红外LED的正极连接起来，可以通过焊接或绕线方式进行连接。
- en: Solder one 24-inch length of wire to the combined LED anodes. If you’re using
    solid-core wire that fits in a breadboard, you can just strip the other end of
    the 24-inch wire. If you’re using stranded-core wire, attach a male crimp pin
    to the end of the wire.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一根 24 英寸长的电线焊接到组合的 LED 正极。如果你使用的是适合面包板的实心线，只需将 24 英寸电线的另一端剥皮即可。如果你使用的是绞线芯电缆，则需要将一个男性压接针连接到电线的末端。
- en: Connect the two IR LED cathodes with a piece of wire by soldering or wire-wrapping.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用电线将两个红外LED的阴极连接起来，可以通过焊接或包线方式连接。
- en: Connect the two phototransistor emitters with a wire by soldering or wire-wrapping.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用电线将两个光电晶体管发射极连接起来，可以通过焊接或包线方式连接。
- en: Connect the combined IR LED cathodes to the combined phototransistor emitters;
    I suggest soldering a long wire.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将合并后的红外LED阴极连接到合并后的光电晶体管发射极；我建议焊接一根长线。
- en: Solder a 24-inch length of wire to the combined LED cathodes and phototransistor
    emitters, and finish the other end of the wire with a male crimp pin, as you did
    in step 2.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一根24英寸的电线焊接到合并的LED阴极和光电晶体管发射极上，并像第2步那样在电线的另一端做上公端压接针。
- en: Solder a 24-inch length of wire to each phototransistor’s collector, and finish
    the other end of the wire with a male crimp pin, as you did in step 2.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一根24英寸的电线焊接到每个光电晶体管的集电极上，并像第2步那样在电线的另一端做上公端压接针。
- en: In [Figure 8-4](ch08.xhtml#ch08fig8-4), the LEDs and light sensors (these will
    be phototransistors or Honeywell Optoschmitt sensors depending on your choice)
    are placed in holes punched in the cardboard of the acceleration channel.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图8-4](ch08.xhtml#ch08fig8-4)中，LED和光传感器（根据选择，这些将是光电晶体管或Honeywell Optoschmitt传感器）被放置在加速通道纸板上打的孔中。
- en: '![image](../images/fig8_4.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_4.jpg)'
- en: '*Figure 8-4: The test bed I initially used to check out the chronograph concept*'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '*图8-4：我最初用来验证测速仪概念的测试台*'
- en: I used a relatively small hole punch so that friction would hold them in place.
    You could instead glue them with hot glue or contact cement. I used a 24-inch
    length of four-conductor telephone wire to connect the channel to the breadboard,
    but any wire will do. In the completed version and in other prototypes, I just
    used four lengths of 30-gauge twisted wire because it was more flexible. Alternatively,
    you could build the final sensor channel now.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 我使用了一个相对较小的打孔器，以便利用摩擦力将它们固定到位。你也可以使用热熔胶或接触胶将它们粘在一起。我使用了一根24英寸长的四导线电话线来连接通道和面包板，但任何电线都可以。在完成的版本和其他原型中，我只用了四根30号铜线，因为它们更灵活。或者，你现在也可以构建最终的传感器通道。
- en: The LEDs and phototransistors will need to be wired to the Arduino, as indicated
    in the schematic diagram in [Figure 8-3](ch08.xhtml#ch08fig8-3). I wired the LED
    anodes to the power supply through a 270-ohm resistor (R3). In the case of the
    phototransistors, I set them up so that the emitters were grounded and each collector
    went through a 10-kilohm resistor (R1 and R2) to the positive of the power supply
    for an open-collector configuration. Thus, if the beam of light were interrupted,
    the phototransistor would conduct, and the voltage at the collector would drop.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: LED和光电晶体管需要按照[图8-3](ch08.xhtml#ch08fig8-3)中的电路图连接到Arduino上。我将LED的正极通过一个270欧姆电阻（R3）连接到电源上。对于光电晶体管，我将它们设置为发射极接地，每个集电极通过10千欧电阻（R1和R2）连接到电源的正极，以实现开集电极配置。因此，如果光束被中断，光电晶体管将导通，集电极的电压会下降。
- en: '****NOTE****'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '****注意****'
- en: '*If you use the Honeywell Optoschmitt SA5600/5610, the 10-kilohm resistors
    (R1 and R2) are not required, as they are included in the SA5600/5610 chip. The
    wiring of the Optoschmitt sensors is shown in the lower left of the schematic
    in [Figure 8-3](ch08.xhtml#ch08fig8-3)*.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果使用Honeywell Optoschmitt SA5600/5610，则不需要10千欧电阻（R1和R2），因为它们已经包含在SA5600/5610芯片中。Optoschmitt传感器的接线如[图8-3](ch08.xhtml#ch08fig8-3)所示，位于电路图的左下方。*'
- en: Rather than shooting up the office with live paintballs, BBs, or pellets, I
    set up the gig vertically so a projectile could be dropped through the light beams
    to test the system. This method meant that the velocities measured didn’t approach
    those of a projectile leaving a weapon’s barrel, but it was good enough for an
    initial proof-of-concept experiment. The higher the target was dropped from, the
    higher the recorded velocity—that is, if your aim is good. (Remember *s* = (1/2)*at*²,
    where *s* is displacement or distance, *a* is acceleration due to gravity, *t*
    is time, and initial velocity is zero.)
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我并没有用活弹丸、BB弹或子弹把办公室弄得一团糟，而是将设备垂直设置，这样可以让一个飞行物穿过光束来测试系统。这种方法意味着所测得的速度不会接近武器枪管发射物体的速度，但对于初步的概念验证实验已经足够。目标从更高处掉落时，记录的速度会更高——当然，前提是你的瞄准准确。（记住，*s*
    = (1/2)*at*²，其中*s*是位移或距离，*a*是重力加速度，*t*是时间，初始速度为零。）
- en: If ambient light causes problems in testing, an additional piece of cardboard
    can be taped to the top (side) of the two pieces of cardboard to shade the sensor,
    though I didn’t find this was a problem in any of the experiments I conducted.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 如果环境光在测试中造成问题，可以将额外的纸板粘贴到两个纸板的顶部（侧面）以遮挡传感器，尽管在我进行的所有实验中我没有发现这是个问题。
- en: '***The Breadboard***'
  id: totrans-83
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***面包板***'
- en: The next step is to build a breadboard, as shown in [Figure 8-5](ch08.xhtml#ch08fig8-5).
    For this, we’ll use the Chronograph Lite schematic in [Figure 8-3](ch08.xhtml#ch08fig8-3).
    The most complicated part of the circuit is wiring up the photosensors and LEDs,
    which are not plugged directly into the breadboard but rather need to be installed
    in the sensor channel, as described in the previous section.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是构建一个面包板，如[图8-5](ch08.xhtml#ch08fig8-5)所示。为此，我们将使用[图8-3](ch08.xhtml#ch08fig8-3)中的Chronograph
    Lite电路图。电路中最复杂的部分是连接光传感器和LED，这些组件并没有直接插入面包板，而是需要安装在传感器通道中，正如前一部分所描述的。
- en: '![image](../images/fig8_5.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_5.jpg)'
- en: '*Figure 8-5: Photosensors and LEDs in the early prototype attached to the breadboard
    via discrete wires. To test the unit, a coin was dropped through the channel*.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '*图8-5：早期原型中，光传感器和LED通过离散电线连接到面包板。为了测试该单元，将一枚硬币掉入通道中*。'
- en: 'Whether you have already made the finished channel or are using the cardboard
    prototype, you will need to connect the sensors and LEDs in the channel to the
    breadboard—or, for that matter, to the completed unit—with four wires: positive,
    ground, first sensor, and second sensor.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您是否已经制作完成了通道，还是正在使用纸板原型，您都需要将通道中的传感器和LED连接到面包板上——或者，实际上，连接到已完成的单元——使用四根电线：正极、地线、第一传感器和第二传感器。
- en: 'Here’s how to wire the breadboard:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何接线面包板：
- en: Connect the red positive rails together and the blue negative rails together.
    Do not connect the red positive rail and blue negative rail to each other under
    any circumstances—it will result in a short circuit and damage to components.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将红色正极轨道和蓝色负极轨道分别连接起来。绝对不要将红色正极轨道和蓝色负极轨道连接在一起——这样会导致短路并损坏组件。
- en: Insert the Arduino Pro Mini or clone in the breadboard, leaving a fair amount
    of room—about four or five rows—at one end.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Arduino Pro Mini或其克隆板插入面包板，留出一定的空间——大约四五行——在一端。
- en: Connect the VCC pin on the Mini to the red positive rail.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Mini上的VCC引脚连接到红色正极轨道。
- en: Connect the GND pin on the Mini to the blue negative rail.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Mini上的GND引脚连接到蓝色负极轨道。
- en: Take two 10-kilohm resistors (R1 and R2) and connect one end of each to the
    red positive rail. (Note that these are not required if you are using the Optoschmitt
    SA5600 photosensor.)
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 取两个10千欧电阻（R1和R2），将每个电阻的一端连接到红色正极轨道。（注意，如果您使用的是Optoschmitt SA5600光传感器，则无需使用这两个电阻。）
- en: Connect the other end of resistor R1 to pin D4 on the Mini via a jumper wire.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用跳线将电阻R1的另一端连接到Mini的D4引脚。
- en: Connect the other end of resistor R2 to pin D2 on the Mini via a jumper wire.
    (If you use the Optoschmitt photosensor, you can connect pins D2 and D4 directly
    to the output pins on the photosensors, as shown in the bottom left of [Figure
    8-3](ch08.xhtml#ch08fig8-3).)
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用跳线将电阻R2的另一端连接到Mini的D2引脚。（如果您使用Optoschmitt光传感器，可以直接将D2和D4引脚连接到光传感器的输出引脚，如[图8-3](ch08.xhtml#ch08fig8-3)左下角所示。）
- en: Connect the collector pin of phototransistor Q1 to pin D2 on the Nano using
    the attached 24-inch wire.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用附带的24英寸电线，将光电晶体管Q1的集电极引脚连接到Nano的D2引脚。
- en: Connect the collector pin of phototransistor Q2 to pin D4 on the Nano using
    the attached 24-inch wire.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用附带的24英寸电线，将光电晶体管Q2的集电极引脚连接到Nano的D4引脚。
- en: Connect one end of the 270-ohm resistor R3 to the red positive rail.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将一个270欧电阻R3的一端连接到红色正极轨道。
- en: Connect the other end of resistor R3 through one of the 24-inch lengths of wire
    to an empty row on the breadboard.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用其中一根24英寸的电线，将电阻R3的另一端连接到面包板上的一个空行。
- en: Connect the combined anodes of LED 1 and LED 2 to the row where you connected
    resistor R3 in step 9 via the attached 24-inch wire. Refer to [Figure 8-3](ch08.xhtml#ch08fig8-3)
    to see how the LEDs are wired together and to the breadboard.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LED 1和LED 2的共同阳极通过附带的24英寸电线连接到第9步中连接电阻R3的行。请参考[图8-3](ch08.xhtml#ch08fig8-3)查看LED是如何连接在一起并接入面包板的。
- en: Connect the 5V pin and the GND pin on the Mini to VCC and GND on the LCD, respectively.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Mini上的5V引脚和GND引脚分别连接到LCD上的VCC和GND引脚。
- en: Connect pin A4 on the Mini to the SDA connection on the LCD.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Mini上的A4引脚连接到LCD的SDA引脚。
- en: Connect pin A5 on the Mini to the SCL connection on the LCD.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Mini的A5引脚连接到LCD的SCL连接端口。
- en: Now you’re ready to enter the sketch.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经准备好输入草图了。
- en: '***The Sketch***'
  id: totrans-105
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***草图***'
- en: 'Now to write the sketch to make things work. Here is the sketch for the Chronograph
    Lite:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 现在编写草图使其正常工作。以下是Chronograph Lite的草图：
- en: '[PRE0]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The sketch is pretty straightforward. After setting up the variables and inputs,
    a `while` loop waits for the first sensor to be interrupted by checking the condition
    `digitalRead(2) == 1` ➊. When tripped, the clock is started with `start_time =
    micros();` ➋, and another `while` loop counts until the second sensor is activated
    (because the second sensor is plugged into pin D4, this `while` loop checks whether
    `digitalRead(4) == 1` ➌). When the second sensor is activated, the clock is stopped
    with `stop_time = micros()` ➍.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 草图非常直观。在设置了变量和输入后，一个`while`循环会等待第一个传感器被中断，通过检查条件`digitalRead(2) == 1` ➊。触发时，时钟通过`start_time
    = micros();` ➋开始，另一个`while`循环会继续，直到第二个传感器被激活（由于第二个传感器插入了D4引脚，这个`while`循环检查是否`digitalRead(4)
    == 1` ➌）。当第二个传感器激活时，时钟通过`stop_time = micros()` ➍停止。
- en: The sketch then calculates the time that lapsed between the first sensor and
    the second with `time_of_flight = stop_time – start_time` at ➎. Once the sketch
    makes its calculations, it provides instructions to display the results on the
    LCD screen.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 草图会计算从第一个传感器到第二个传感器之间的时间，通过`time_of_flight = stop_time – start_time`公式在➎位置计算。一旦草图完成计算，它会提供指示，显示结果在LCD屏幕上。
- en: All you need to do now is load the sketch, stand the test channel up as in [Figure
    8-4](ch08.xhtml#ch08fig8-4), and drop a projectile like a marble through the cardboard
    channel. To begin, power the Mini with the programmer. Alternatively, you can
    use a separate regulated 5V power supply connected to the 5V terminal on the Mini,
    or you can connect a battery to the VIN port of the Mini and use the Mini’s on-board
    regulator. Do *not* connect a 9V battery to the 5V supply rails—it could burn
    everything out.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你需要做的就是加载草图，将测试通道竖立起来，如同在[图8-4](ch08.xhtml#ch08fig8-4)中所示，并通过纸板通道掉落像弹珠这样的投射物。首先，用编程器为Mini供电。或者，你可以使用一个单独的调节后的5V电源，连接到Mini的5V端口，或者你可以连接一个电池到Mini的VIN端口，并使用Mini的板载调节器。*不要*将9V电池连接到5V电源轨道——这可能会烧毁所有电路。
- en: When you’re satisfied that the sensors are working, you can attach your temporary
    sensor channel to a real air pistol if you’d like to test the circuit further
    (see [Figure 8-6](ch08.xhtml#ch08fig8-6)).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 当你确认传感器正常工作后，如果想进一步测试电路，你可以将临时传感器通道连接到真正的气手枪上（参见[图8-6](ch08.xhtml#ch08fig8-6)）。
- en: '![image](../images/fig8_6.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_6.jpg)'
- en: '*Figure 8-6: Photoelectric sensors in an early prototype, attached to a Crossman
    0.177 caliber air pistol. The setup was obviously primitive, using a C-clamp to
    hold the channel to the weapon. Because the test channel was so simple, I set
    it up on my desk*.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '*图8-6：早期原型中的光电传感器，安装在Crossman 0.177口径气手枪上。设置显然是原始的，使用C夹将通道固定在武器上。由于测试通道非常简单，我将其设置在了我的桌子上*。'
- en: If this is enough for your needs, you can package this up and skip everything
    in “[The Full Ballistic Chronograph](ch08.xhtml#ch08lev1sec3)” on [page 233](ch08.xhtml#page_233).
    The Chronograph Lite should work well for games and low- and medium-velocity weapons
    (less than 600 fps), such as pellet guns, BB guns, airsoft weapons, and so on.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这已经足够满足你的需求，你可以将其打包，并跳过[第233页](ch08.xhtml#page_233)中“[完整弹道测速仪](ch08.xhtml#ch08lev1sec3)”的内容。Chronograph
    Lite 应该适用于游戏以及低速和中速武器（低于600 fps），如气枪、BB枪、气软枪等。
- en: Despite satisfactory performance, however, I was bothered by the fact that,
    while the Arduino can count microseconds, it can deliver results only as multiples
    of four, so in reality the resolution is only 4 microseconds. That is why I developed
    the Full Ballistic Chronograph project. If this bothers you, too, and you don’t
    plan to package up the Chronograph Lite, you can skip to “[The Full Ballistic
    Chronograph](ch08.xhtml#ch08lev1sec3)” on [page 233](ch08.xhtml#page_233) now.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管表现令人满意，但我仍然困扰于这样一个事实：虽然Arduino可以计算微秒，但它只能提供四的倍数结果，因此实际上分辨率只有4微秒。这就是我开发完整弹道测速仪项目的原因。如果这也让你感到困扰，并且你不打算将Chronograph
    Lite打包，你可以现在跳到[第233页](ch08.xhtml#page_233)的“[完整弹道测速仪](ch08.xhtml#ch08lev1sec3)”章节。
- en: '**TESTING THE CHRONOGR APH LITE WITH A PROJECTILE SIMUL ATOR**'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '**使用投射物模拟器测试Chronograph Lite**'
- en: To test the Chronograph Lite or Full Ballistic Chronograph for errors, I made
    a simulator to simulate the effect of a projectile traveling through the two sensors
    rather than shooting up my work area with pellets or paintballs. I primarily used
    the simulator in development—it is not necessary for the completion or use of
    either chronograph in this chapter—but it provides some insight into how to turn
    on and off relatively high-speed signals.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试Chronograph Lite或Full Ballistic Chronograph是否有误，我做了一个模拟器来模拟投射物穿过两个传感器的效果，而不是用子弹或彩弹射击我的工作区。在开发过程中，我主要使用了这个模拟器——它对于本章中任何计时器的完成或使用都不是必需的——但是它提供了如何开关相对高速信号的一些见解。
- en: I used a square-wave generator (see [Chapter 9](ch09.xhtml#ch09) if you want
    to create your own) and made a very simple breadboard simulator. The schematic
    of the simulator, shown in [Figure 8-7](ch08.xhtml#ch08fig8-7), includes only
    the turn-on and turn-off functions and is driven by the square-wave generator.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我使用了一个方波发生器（如果你想自己制作，见[第9章](ch09.xhtml#ch09)），并制作了一个非常简单的面包板模拟器。模拟器的电路图，显示在[图
    8-7](ch08.xhtml#ch08fig8-7)中，仅包括开关功能，并由方波发生器驱动。
- en: '![image](../images/fig8_7.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_7.jpg)'
- en: '*Figure 8-7: Schematic of the simulator used to simulate the sequential firing
    of the Optoschmitt sensors. It is used in conjunction with a square-wave generator.
    Resistor R1 and capacitor C1 can be adjusted for satisfactory debounce, but the
    values shown worked well. (continued)*'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 8-7：用于模拟Optoschmitt传感器顺序触发的模拟器示意图。它与方波发生器一起使用。电阻R1和电容C1可以调节以达到满意的去抖效果，但所示的数值已经很好。（续）*'
- en: The simulator receives a clock signal from the square-wave generator. On initiation,
    depressing the switch (labeled SW in [Figure 8-7](ch08.xhtml#ch08fig8-7)) on the
    simulator begins the sequence of start and stop signals from the CD4017 decade
    counter. A manual switch (SW) fires the simulator after a debounce from a NE 555
    timer. The function of the simulator is to turn the connections to the photosensors
    on and off just as if a projectile were traveling through the start and stop LED/photosensor
    pair. [Figure 8-8](ch08.xhtml#ch08fig8-8) shows a breadboard for the simulator
    with the finished board and square-wave generator.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟器从方波发生器接收时钟信号。启动时，按下模拟器上的开关（在[图 8-7](ch08.xhtml#ch08fig8-7)中标为SW）开始从CD4017十进制计数器发出的起停信号序列。一个手动开关（SW）在NE
    555定时器的去抖作用后触发模拟器。模拟器的功能是像投射物穿过起始和停止LED/光传感器对一样，打开和关闭连接到光传感器的电路。[图 8-8](ch08.xhtml#ch08fig8-8)显示了一个用于模拟器的面包板，展示了完成的电路板和方波发生器。
- en: '![image](../images/fig8_8.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_8.jpg)'
- en: '*Figure 8-8: The simulator breadboard and the square-wave generator hooked
    up to the finished prototype board for the Full Ballistic Chronograph. The simulator
    works equally well with either the Chronograph Lite or the Full Ballistic Chronograph*.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 8-8：模拟器面包板和方波发生器连接到完成的Full Ballistic Chronograph原型板上。模拟器与Chronograph Lite或Full
    Ballistic Chronograph一样工作良好。*'
- en: '***Construction***'
  id: totrans-124
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***构建***'
- en: To complete the Chronograph Lite project, all you have left to do is to package
    the Mini, display, battery, and appropriate switches in an enclosure, leaving
    a connector exposed to connect the unit to the sensor channel. Unlike most of
    the other projects in this book, I did not use a shield for the Chronograph Lite,
    because the wiring to the Mini was sufficiently
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成Chronograph Lite项目，你需要做的就是将Mini、显示屏、电池和适当的开关安装到一个外壳中，并留出一个连接器，以便将设备连接到传感器通道。与本书中大多数其他项目不同，我没有为Chronograph
    Lite使用保护板，因为Mini的接线已经足够。
- en: straightforward that it did not require one. I used a Hammond ABS plastic enclosure
    1591 BTCL, as indicated in the parts list. See [Figure 8-9](ch08.xhtml#ch08fig8-9)
    for the completed Chronograph Lite.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 它简单到不需要额外说明。我使用了Hammond ABS塑料外壳1591 BTCL，正如部件清单中所示。见[图 8-9](ch08.xhtml#ch08fig8-9)了解完整的Chronograph
    Lite。
- en: '![image](../images/fig8_9.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/fig8_9.jpg)'
- en: '*Figure 8-9: Front view of completed Chronograph Lite. A hole is cut into the
    enclosure to the right of the screen to allow space for the backlight protrusion*.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 8-9：完成的Chronograph Lite的正视图。外壳右侧切了一个孔，以便为背光突起提供空间*。'
- en: '[Figure 8-10](ch08.xhtml#ch08fig8-10) shows the template for the enclosure.
    You can download a PDF of this drawing from *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*
    and use it to mark and center punch the enclosure for the holes.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_10.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-10: Template for holes and display for the Chronograph Lite*'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: 'I prepared the enclosure for the Chronograph Lite as follows:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: Carefully mark, center punch, and drill 1/2-inch holes for the corners of the
    display (A), 1/8-inch holes for the mounting holes for the display (B), 1/4-inch
    holes for the on/off switch (C), and 1/4-inch holes for the clear switch (D).
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the LCD screen, mark the edges of the 1/2-inch holes (A). Draw lines connecting
    the edges so you have a rectangle to cut out. (You can use a Sharpie marker and
    clean excess markings later with alcohol.) Drill the holes and cut the opening
    along those lines using a keyhole or saber saw.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There’s a slight protrusion in the middle of the LCD on the right-hand side
    (facing up); this is part of the backlight assembly. You can cut a hole to accommodate
    for this, as I did in [Figure 8-10](ch08.xhtml#ch08fig8-10), or you can leave
    the edge straight and use spacers to keep the protrusion from hitting the enclosure.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mount the display and fasten it in with 1/2-inch-long 4-40 mounting screws and
    nuts. If you made a cut out for the LCD backlight protrusion, you can mount the
    display directly. If you did not, use extra 4-40 nuts to space the display back
    from the face of the enclosure. If needed, add additional washers; 4-40 nuts can
    vary in thickness.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mount the *on* and *clr* switches as indicated in [Figure 8-9](ch08.xhtml#ch08fig8-9).
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now to wire up the Pro Mini. There is no shield, so we will solder directly
    to the Pro Mini board as follows:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: Solder the wires for the I²C connection. To make your life easier, use colored
    wire and create a code for yourself. Solder connections to the 5V (some clone
    boards may say VCC) and GND pins on the Nano. Then, solder 3-inch wires to pins
    A4 and A5 on the Nano. Connect the other end of these wires to a four-pin female
    connector. (See “[Connectors Used in This Book](ch00.xhtml#ch00lev1sec6)” on [page
    18](ch00.xhtml#page_18) for details on making Pololu connectors.) Connect the
    5V and GND pins on the Nano to 5V and GND on the LCD. Connect pin A4 on the Nano
    to SDA on the I²C board, and A5 on the Nano to SDL on the I²C.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Connect the positive (red) wire of the battery connector to one side of the
    SPST switch. Connect the other side of the switch to the VIN terminal on the Nano
    (some clone boards may say RAW).
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Solder the black (negative) wire from the battery connector to the GND pin on
    the Nano.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, connect the Nano to the sensor channel as follows:'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Prepare a four-conductor female Pololu connector with four color-coded wires
    approximately 3.5 inches long. Attach two wires (I suggest red and black) from
    this connector to the VCC and GND pins on the Nano.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Connect the remaining two connectors to pins 2 (D2) and 4 (D4) on the Nano.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Make a slot or hole in the side of the enclosure, and run the Pololu connector
    with the sensor channel connections through it (see [Figure 8-11](ch08.xhtml#ch08fig8-11)).
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/fig8_11.jpg)'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '*Figure 8-11: A slot in the enclosure for threading the four-pin sensor channel
    connector through. The connector is mounted with double-sided adhesive*'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Connect one side of the *clr* pushbutton to GND and the other side to the RST
    (reset) pin on the Nano.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, connect the battery, screw on the top of the enclosure, plug in the
    sensor channel, and flip the switch to turn on the device.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You should be all set to use your Chronograph Lite. Go to “[Final Setup and
    Operation](ch08.xhtml#ch08lev1sec5)” on [page 252](ch08.xhtml#page_252) for instructions
    on using the Chronograph Lite.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
- en: '**The Full Ballistic Chronograph**'
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: While the Chronograph Lite worked well and I used it to successfully measure
    projectile speeds, I had a nagging feeling that it could be better. If you’re
    using the device for slow-speed projectiles—that is, 600 fps or less—the accuracy
    of the Chronograph Lite is more than enough. But the restriction to 4 microseconds
    of resolution resulted in what I perceived to be a fair amount of error in feet-per-second
    (fps) at higher speeds, so I decided to construct the Full Ballistic Chronograph.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: '***Required Tools***'
  id: totrans-153
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Soldering iron and solder
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: Drill and drill bits (1/2, 1/4, and 1/8 inches) Philips head and slotted screwdrivers
    Saw (keyhole or saber saw)
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: '***Parts List***'
  id: totrans-156
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Assembling the Full Ballistic Chronograph is relatively simple. Here’s what
    you’ll need:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: One Arduino Nano or clone
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: One 16×4 LCD
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: One I²C adapter, if not included with the LCD One PCB shield
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: One enclosure (Hammond 1591 BTCL)
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
- en: Four 1/2-inch×4-40 screws Four 4-40 nuts
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: One 3PDT toggle switch
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: Two momentary pushbutton switches Four 0.100×4 female headers
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Four female X4 shells
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: Sixteen (eight male, eight female) adapter pins One 4 MHz crystal
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
- en: One TI SN 74LVC1GX04 crystal-oscillator driver One SOT23 adapter board
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: One HCT 4011 4-input NAND gate One CD4013 dual D flip-flop
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: One CD4040 12-stage binary counter One ADC DAC8562 digital-to-analog converter
    One LM7805 voltage regulator
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: One NPN transistor 2N5172 (or equivalent) Four 5-kilohm, 1/8 W resistors
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: One 1-megaohm, 1/8 W resistor
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: One 1-kilohm, 1/8 W resistor
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: One 1.5-kilohm, 1/8 W resistor
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: One 270-kilohm, 1/8 W resistor
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: One 4.7 MFD tantalum capacitor Two 33 pF capacitors
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: One 0.01 μF capacitor
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: One 5 mm LED
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: Two IR detectors (I used the Honeywell Optoschmitt SD5610.) Two IR LEDS, about
    850–950 nm 28- or 30-gauge hookup wire
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: '*For the Full Ballistic Chronograph, you will have to use the inverted version
    of the chip, the SA5610, or externally invert the signals. See the note at the
    bottom of [Figure 8-3](ch08.xhtml#ch08fig8-3)*.'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '*对于完整的弹道计时器，你需要使用芯片的反向版本 SA5610，或者外部反转信号。请参见 [图 8-3](ch08.xhtml#ch08fig8-3)
    底部的说明*。'
- en: '***Downloads***'
  id: totrans-181
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***下载***'
- en: '**Sketch** *FullBallisticChronograph.ino*'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '**草图** *FullBallisticChronograph.ino*'
- en: '**Templates** *ChronoCover.pdf, AccelerationChannel.pdf*'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '**模板** *ChronoCover.pdf, AccelerationChannel.pdf*'
- en: '**PCBs** *ChronoPCB.pcb, LEDHolder.pcb, SensorHolder.pcb*'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '**PCB** *ChronoPCB.pcb, LEDHolder.pcb, SensorHolder.pcb*'
- en: '***Improving the Accuracy***'
  id: totrans-185
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '***提高准确性***'
- en: There are several possible solutions for improving the accuracy of the chronograph.
    The Arduino Nano uses a 16 MHz clock, yet when configured using the Arduino Nano
    platform and IDE, it results in a 1 microsecond resolution (±2 microseconds),
    even though the period—the time between cycles—of a 16 MHz clock is 1/16,000,000
    of a second, or 0.063 micro seconds. While a processor could never resolve down
    to its own clock speed, it’s probably capable of much better than 1 microsecond.
    Clearly there is some overhead in the current project—perhaps part hardware (the
    components in the Arduino board) and part software (the compiler and firmware
    part of the IDE)—that limits performance. Here are some ideas I had to improve
    accuracy, starting with one that didn’t make it into the final project but that
    I think is educational.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 改进计时器准确性有几种可能的解决方案。Arduino Nano 使用的是 16 MHz 时钟，但在使用 Arduino Nano 平台和 IDE 配置时，其分辨率为
    1 微秒（±2 微秒），尽管 16 MHz 时钟的周期——即周期之间的时间——是 1/16,000,000 秒，或 0.063 微秒。虽然处理器无法精确到自身时钟速度，但它可能远超
    1 微秒的精度。显然，目前项目中存在一些开销——可能部分来自硬件（Arduino 板上的组件）和部分来自软件（IDE 的编译器和固件部分）——这些都限制了性能。以下是我提出的一些提高准确性的想法，从一个未能进入最终项目但我认为具有教育意义的想法开始。
- en: '**Digging into Machine Code**'
  id: totrans-187
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**深入研究机器代码**'
- en: One possible solution is to dig into the basic Atmel machine and AVR code. Without
    going into excruciating detail, AVR assembly is the functional language of the
    Atmel chip. The Arduino community has surrounded that with special code that lets
    the AVR run in the Arduino environment.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 一种可能的解决方案是深入研究基础的 Atmel 机器和 AVR 代码。不必详细讲解，AVR 汇编语言是 Atmel 芯片的功能性语言。Arduino 社区为其提供了特定的代码，使
    AVR 能够在 Arduino 环境中运行。
- en: According to the ATmega328 data sheets, it’s possible to directly address the
    individual timers on the ATmega328 and get the resolution required. However, looking
    into it, I saw that this method could prove overly complex and figured there had
    to be another way.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 根据 ATmega328 的数据手册，可以直接访问 ATmega328 上的各个定时器，以获得所需的分辨率。然而，经过研究，我发现这种方法可能会过于复杂，认为一定还有其他方式。
- en: '**Creating a High-Speed Window**'
  id: totrans-190
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**创建高速窗口**'
- en: The time of flight of a projectile that we want to look at covers a range of
    roughly 90 microseconds (about 3,000 fps in a 3-inch distance) to 950 microseconds
    (about 260 fps in the same 3-inch distance) from fastest to slowest. Relative
    to the higher frequencies of some clocks, such as the 16 MHz clock of the processor,
    90 microseconds is a fair amount of time.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望查看的弹丸飞行时间范围大约是 90 微秒（在 3 英寸距离内约为 3000 fps）到 950 微秒（在相同的 3 英寸距离内约为 260 fps），从最快到最慢。与一些时钟的高频率（如处理器的
    16 MHz 时钟）相比，90 微秒已经算是相当长的时间。
- en: One method for measuring the velocity is to open a timing window when the first
    beam of light is interrupted that lets a stream of high-speed signal through until
    the second beam is interrupted. While the window is open, the pulses in that signal
    will be counted; when the window is closed, the count will represent the time
    the window was open.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 测量速度的一种方法是在第一个光束被中断时打开一个定时窗口，允许高速信号通过，直到第二个光束被中断。在窗口打开时，信号中的脉冲将被计数；当窗口关闭时，计数值将表示窗口打开的时间。
- en: 'As an example, say the window opens and a signal of 10 cycles per second (cps)
    passes through until the window closes; 100 cycles are counted. For this illustration,
    the Arduino’s clock is the high-speed signal. When you know the distance the projectile
    traveled, you can use some simple arithmetic to determine the time of travel and
    the speed: 100 cycles at 10 cps gives us 10 seconds. If the distance were 1 meter
    and 100 cycles were counted while the window was open, the speed would be 1 meter
    per 10 seconds or 0.1 m/s.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: A single NAND logic gate can be used to make a window that can be opened and
    closed. A *logic gate* is simply an electronically controlled switch that outputs
    a voltage only under certain conditions, corresponding to a Boolean logic equation.
    *NAND* is the Boolean expression for “not AND,” and a *NAND gate* outputs a voltage
    when its two inputs are not the same.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: I sampled both a 74HC00 high-speed NAND gate and a standard CD4011BC gate, and
    the standard part works fine. There are several other parts that will work, too—what
    you’re looking for is a part with a propagation delay (T[PD]) under 100 nanoseconds.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: '**Selecting a Counter**'
  id: totrans-196
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: After deciding to take the window approach, the next thing to consider is how
    high you need to count. If you were to count in integers from 1 to 100, for example,
    you would need a counter that could count to 100, which would provide a resolution
    of 100\. If you scaled that up, the counter could provide a range from 10 to 1,000
    or from 100 to 10,000\. If that range were the result of the calculation for fps,
    you would then have a resolution of only 1,000 fps (each increment would equal
    100 fps) plus any included error, which we’ll go into later.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
- en: So where should you go from here? To the parts bin, of course, to see what counters
    are available to count the signal passing through that window. When selecting
    a counter, you need to consider how fast it needs to be and how many pulses you
    want it to count. The tried-and-true CD4040, 12-bit, serial-in, parallel-out,
    digital counter seemed capable of doing the job. (The CD4040 worked at the 4 MHz
    frequency, but you could always use a faster one, like the 74HC4040 or 74HCT4040.)
    The CD4040 will provide a digital count from 0 to 4095, or 2^(12).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '**Selecting a Clock Speed**'
  id: totrans-199
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Next, consider what signal frequency is needed in order to suit the range of
    projectile speeds. I started with the assumption that I wanted to achieve a
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: range of roughly 300 fps to 2,500 fps with as much latitude on both ends as
    possible.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: Further, while the counter will ideally count from zero to the maximum 4,095
    counts, there is the possibility of some error. So rather arbitrarily, I chose
    to look at the total digital count between 400 and 4,000 to account for the possibility
    of error.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: 'Given the number of cycles counted, the signal frequency, and the distance
    traveled, the velocity of a projectile can be found with the following calculations:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0237-01.jpg)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
- en: 'Let’s go through the arithmetic for a projectile that travels 0.25 feet (3
    inches) within 4,000 cycles of a 2 MHz signal:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0237-02.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
- en: For a 4 MHz clock, a full 4,000 cycle count will amount to about 281 fps for
    the low end of the speed range. At the high end, given 400 cycles counted and
    a 2 MHz clock signal, you will measure 1,250 fps, and at 4 MHz, you can measure
    up to 2,500 fps.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: You can be creative with your frequency. If you elect to use a 2 MHz clock,
    it will provide maximum resolution in the very low-speed range. If, on the other
    hand, you select a 4 MHz clock, you will be in the middle of the resolution range.
    An 8 MHz clock will provide a very good resolution in the fast range (faster than
    any conventional weapon) but will curtail performance at the lower-speed range.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: Because I anticipated that the bulk of speeds I needed to measure would fall
    in the middle of the counting range, a clock around 4 MHz sounded good. I was
    not anticipating many occasions when velocities would be in the sub-300 fps range,
    and at the high end, it looked like accuracy could be maintained to well over
    5,000 fps (a digital count of just under 200, which might be stretching it a little
    but seemed to work well in simulations).
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: If your projectiles remain in the sub-300 fps range, I suggest revisiting the
    Chronograph Lite. If, for some reason, you want to stay in the lower fps range
    but require maximum accuracy with perhaps multiple digits, build the Full Ballistic
    Chronograph with the slower clock rate. You can simply swap out the 4 MHz crystal
    for a 2 MHz crystal and adjust the sketch to slide the range down to the lower
    area.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: '**Adjusting the Clock Speed**'
  id: totrans-211
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: To address the speed of the clock (the signal that is gated to the counter),
    the most accurate method by far is to use a crystal-controlled oscillator, which
    generally has errors only in the sub-50 parts per million range. I configured
    a 4 MHz crystal with the TI SN 74LVC1GX04 crystal-oscillator driver experimentally
    and it worked well, so I used one in the final project.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: While I did look at, review, and test single-chip oscillators, such as the Maximum
    stand-alone oscillator (7375), it was not quite as stable as the crystal-controlled
    version.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
- en: '***Designing the Full Ballistic Chronograph***'
  id: totrans-214
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Now, we have the means to clock the signal into the 4040 counter, but we need
    to figure out how to display the velocity on the LCD. One method would be to use
    a different counter with a serial output that would be clocked directly into the
    Nano. Another possibility would be to take the parallel data from the CD4040,
    serialize it with a shift register, and feed the result to the Nano.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: However, I took a different direction, as illustrated in the block diagram in
    [Figure 8-12](ch08.xhtml#ch08fig8-12). I decided to use a 12-bit digital-to-analog
    converter (DAC) to accept the parallel digital signals and convert them to a single
    analog value. DACs and their counterpart, analog-to-digital converters (ADCs),
    are used in digital music, TVs, and a host of other areas where an analog input
    needs to be digitized, manipulated, transferred, stored, and eventually output
    to return an analog signal. I thought this would be a good opportunity to introduce
    the capabilities of digital-to-analog converters.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_12.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-12: Block diagram of the Full Ballistic Chronograph*'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
- en: The process in [Figure 8-12](ch08.xhtml#ch08fig8-12) depicts the operation of
    the chronograph using a simulator. In actual operation, the simulator would be
    replaced with the two LED-sensor pairs. The simulator, under control of the firing
    switch, initiates a start signal that remains active until the second stop switch
    is activated after a period determined by the square-wave generator. This essentially
    simulates the projectile passing through the first and then the second pair of
    sensors.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: When the start switch is activated initially, it turns on the *flip-flop*—a
    bistate device that turns on with the activation of the start switch and remains
    on until the stop switch is activated. The flip-flop feeds the trigger of the
    gate. When the trigger (T) is inactive—that is, when it’s set to a logical 0—the
    signal from the oscillator at input (A) cannot go through the gate to output (B).
    When the trigger is activated (set to a logical 1), the gate allows the signal
    from the oscillator (A) to travel through the gate to output (B) and eventually
    to the input of the binary counter. The binary counter counts the number of pulses
    that pass from the oscillator through the gate and stops counting when the gate
    closes.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
- en: The outputs of the binary counter are fed to the DAC. They represent binary
    numbers from 0 through 4,095—that is, 0 through 2^(12) – 1\. The DAC converts
    these digital values to a single analog value. The technique of this conversion
    depends on the type of DAC used; for example, in the DAC8562 used here, an R-2R
    resistor ladder is switched, and a transistor is used to yield the output. (For
    complete information, look up the data sheet from Analog Devices on the DAC8562.)
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
- en: The output of the DAC has a scale of 0V to 4.095V corresponding to the digital
    inputs. This output is then directed to one of the analog inputs on the Arduino
    Nano, which provides the inverse function of the DAC and converts the analog signal
    back into a digital format that the Nano can handle. The Nano takes that signal
    and, following instruction from the sketch, adjusts the value to represent the
    velocity in fps for the time it takes the projectile to travel the 3 inches. The
    Nano finally sends that data to the LCD, which displays the velocity of the projectile
    and travel time.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
- en: '***The Schematic***'
  id: totrans-223
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Figures 8-13 and 8-14 show the schematic diagrams for the completed Full Ballistic
    Chronograph. Note the extra gates at the bottom. I included these in the schematic
    because they are available to you in the NAND gate and flip-flop IC packages suggested
    for this project, but my design does not use them. If you want to add functionality,
    they are available.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_13.jpg)'
  id: totrans-225
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-13: Schematic of the Full Ballistic Chronograph*'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
- en: Another thing included in the schematic that we haven’t covered is the reset
    button. In the Full Ballistic Chronograph, I included a button to trigger the
    reset rather than having it reset automatically. I could have set it so that the
    result was displayed on the LCD for a fixed period of time before the system reset,
    but it might have turned out that the number was erased before users had time
    to record it, or users may have found themselves sitting idle while it timed out.
    I decided a reset button would be more convenient.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
- en: Because resetting the microcontroller wasn’t going to upset the sequence of
    things, I chose to use a hard reset on the controller through transistor Q1\.
    To reset the CD4040 and the DAC, I used the reset signal and then inverted it
    using one of the CD4011’s four NAND gates with the two inputs tied together. SW2
    manually closes the second set of sensors in case the first pair of sensors fires
    and not the second, and SW3 is the power and battery switch.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_14.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-14: Inverters for Optoschmitt or Adafruit sensors if you use the
    SA5600 instead of the SA5610\. This circuit uses the previously unused gates of
    the CD4011 NAND gate as logic inverters. They are not accommodated for in the
    PCB, so you will have to wire them by hand*.'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
- en: '***The Sketch***'
  id: totrans-231
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The sketch for the Full Ballistic Chronograph is relatively straightforward:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: In this sketch, the software receives an analog signal from the DAC at X and
    converts it to a digital value. It then goes through a couple of quick mathematical
    operations to come up with the time of flight (`Time`), calculates the speed in
    feet per second (`FPS`), and finally exports those values to the LCD.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
- en: In designing electronic circuits, there are always tradeoffs between hardware
    and software. Many of these have to do with timing issues and built-in latencies
    in software-based approaches. In this instance, the tradeoff is the need for greater
    accuracy not available with the straight Arduino IDE approach without dropping
    to some level of native code. To avoid native code, the Full Ballistic Chronograph
    has more complex hardware than the Chronograph Lite.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
- en: '***The Shield***'
  id: totrans-236
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Unlike the Chronograph Lite, the Full Ballistic Chronograph is best built on
    a shield. The shield is a little more involved than some of the others in this
    book, but don’t be intimidated. [Figure 8-15](ch08.xhtml#ch08fig8-15) shows the
    actual traces of the shield, while [Figure 8-16](ch08.xhtml#ch08fig8-16) shows
    the silkscreen image with the part placements and hole configuration. For this
    project, I opted for a double-sided board because the circuit was a little more
    complex than some of the others and because it allowed me to minimize the space
    required. The complete PCB file is available for download at *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_15.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-15: Trace patterns for the shield. The darker gray is the upper copper
    layer, and lighter gray is the lower layer*.'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_16.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-16: The component placement on the shield*'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
- en: I attempted to keep the shield footprint to a minimum to make it possible for
    the user to squeeze the system into a small portable enclosure. As is, the finished
    Full Ballistic Chronograph fits easily in a 11×8×4 cm box.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
- en: This is another case where I opted to outsource the PCB construction after I
    had made and refined the first sample myself and made sure all critical connections
    could be soldered on both sides of the board. [Figure 8-17](ch08.xhtml#ch08fig8-17)
    shows the raw board as it was received from the service bureau.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_17.jpg)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-17: The Full Ballistic Chronograph circuit board before population*'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
- en: '***Soldering the Full Ballistic Chronograph***'
  id: totrans-246
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Once you have all your parts, follow this guide to build the Full Ballistic
    Chronograph:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: Prepare the oscillator adapter board by soldering the headers in place. Solder
    the chip to the adapter using one of the approaches suggested in “[Using SOICs](ch00.xhtml#ch00lev1sec7)”
    on [page 20](ch00.xhtml#page_20).
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Begin populating the PCB. I usually like to start with the components that go
    under the Nano—in this case, the oscillator adapter board, resistors, crystal,
    and CD4011\. Place them in the PCB, as indicated in [Figure 8-15](ch08.xhtml#ch08fig8-15).
    Next, I like to include the headers that the Nano plugs into. Once again, it’s
    not necessary to fully populate all the headers for the Nano. While on occasion
    I do use a full complement of headers, I tend to populate only those with connections,
    as well as a pair at the very top, in order to simplify alignment when plugging
    in the Nano. Additionally, there should be enough to mechanically support the
    Nano. Solder these headers in place now.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Populate the balance of the board, including the headers for the I²C display
    and the sensor channel. Solder wire pigtails to the connections on the board for
    the reset and clear switches, LED, and positive and negative power supply. The
    lead sensor—the one that is interrupted by the projectile first—should be the
    one wired to pin 6 of the 4013, with or without the inverter circuit; the other
    sensor should be connected to pin 4.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '***Construction***'
  id: totrans-251
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[Figure 8-18](ch08.xhtml#ch08fig8-18) shows the positions for the holes and
    cutout in the enclosure. You can download a copy of [Figure 8-18](ch08.xhtml#ch08fig8-18)
    from *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*
    and use it as a template.'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_18.jpg)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-18: The holes and LCD cutout on the cover of the enclosure*'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
- en: 'Prepare the enclosure for the Full Ballistic Chronograph as follows:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
- en: Prepare the cover of the enclosure, as shown in [Figure 8-18](ch08.xhtml#ch08fig8-18),
    by drilling 1/2-inch holes for cutting out the LCD (A); 1/8-inch holes for mounting
    the LCD (B); 1/8-inch holes enlarged with a reamer for a tight fit for the 5 mm
    LED (F); and 1/4-inch holes for the momentary clear switch (D), momentary reset
    switch (E), and on/off switch (C).
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mark the edges of the 1/2-inch holes (A) and connect lines tangent to the holes—you
    can use a Sharpie marker and clean excess marks later with alcohol.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Cut the opening for the display using a keyhole or saber saw.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There’s a slight protrusion in the middle of the LCD on the right-hand side
    (facing up). This is part of the backlight assembly. You can cut a hole to accommodate
    this, as I did on both the Full Ballistic Chronograph and Chronograph Lite, or
    you can leave the edge straight and use spacers to keep the protrusion from hitting
    the enclosure. Even though I cut a space for the protrusion, I used a one-nut
    spacer anyway to space the connections on the top of the screen away from the
    front of the enclosure (see [Figure 8-19](ch08.xhtml#ch08fig8-19)).
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/fig8_19.jpg)'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '*Figure 8-19: The four-conductor female connector is mounted to the side of
    the enclosure using double-sided adhesive*.'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Mount the LCD’s I²C assembly to the front of the enclosure.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mount the switches to the enclosure. Connect the switches and LED as shown in
    the schematic in [Figure 8-13](ch08.xhtml#ch08fig8-13). Use pigtailed wires as
    indicated in step 3 of “[Soldering the Full Ballistic Chronograph](ch08.xhtml#ch08lev2sec20)”
    on [page 244](ch08.xhtml#page_244).
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Prepare cable assemblies to connect the shield to the I²C adapter and the 4-pin
    female connector that connects the Full Ballistic Chronograph to the sensor channel.
    (See “[Connectors Used in This Book](ch00.xhtml#ch00lev1sec6)” on [page 18](ch00.xhtml#page_18)
    if you’ve never built a connector yourself.)
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Stick the shield to the bottom of the enclosure using double-sided adhesive.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mount the battery holder using a 4-40 flathead screw or double-sided adhesive.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Make a cut in the side of the enclosure to feed the wires through to the connector
    for the sensor channel connection. The width of a single hacksaw blade is sufficient
    for 28-gauge wire.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mount the connector for the sensor channel to the enclosure with double-sided
    adhesive, as shown in [Figure 8-19](ch08.xhtml#ch08fig8-19).
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**The Sensor Channel**'
  id: totrans-269
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We built a sensor channel test bed earlier in the chapter, but now we’ll build
    a more permanent sensor channel and look at the sensor and LED pair we’ll use
    inside.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
- en: '***Building the Sensor Channel***'
  id: totrans-271
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The sensor channel is a U-shaped tunnel that fastens to the muzzle of a weapon
    and holds the photo detector/LED pairs that handle the switching. This channel
    can be constructed out of a variety of materials. I used a 3/8-inch section of
    acrylic and two pieces of 0.060-inch thick aluminum (see [Figure 8-20](ch08.xhtml#ch08fig8-20)).
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_20.jpg)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-20: The completed sensor channel shown from the top (right side up).
    Note the feed-through holes in the acrylic for the positive and negative power
    supply connections to the LEDs (boxed). Also note the current-limiting resistor
    on the PCB holding the LEDs (circled). The cross-hatch area is foam taped to protect
    the weapon’s slide from being scratched*.'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
- en: You could just as easily use mild sheet steel for the side pieces. The top piece,
    shown in [Figure 8-20](ch08.xhtml#ch08fig8-20), could be any lightweight material,
    such as phenolic, Lexan, or another plastic to support the side pieces. I chose
    clear acrylic because it allowed me to see the gun without having to look down
    the barrel. You can get a wider look at the whole channel, including the sensor
    cable, in [Figure 8-21](ch08.xhtml#ch08fig8-21).
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_21.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-21: The channel with the cable attached and the PCB mounted so that
    the connector faces toward the back (where the weapon attaches)*'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
- en: There are two PCBs, attached to either side of the channel with double-sided
    tape, to hold the LEDs and photosensors. These PCBs are slightly different from
    each other, as shown in [Figures 8-22](ch08.xhtml#ch08fig8-22) and [8-23](ch08.xhtml#ch08fig8-23).
    PCB files for these boards are available to download at *[https://www.nostarch.com/arduinoplayground/](https://www.nostarch.com/arduinoplayground/)*.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_22.jpg)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-22: The pattern for the PCB that holds the LEDs and mounts to the
    sensor channel. Note the current-limiting resistor*.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_23.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-23: The PCB pattern for the phototransistor side of the sensor channel.
    Note the three pins for each phototransistor. The edge fingers are for soldering
    to headers that connect to the main processing and display board via an umbilical
    cable*.'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
- en: The acrylic top of the sensor channel measured 1 3/8 × 7 5/8 inches. I used
    a straight wooden dowel to line the barrel up with the sensors/LEDs. Note that
    there is a slight indentation, made with a 1/2-inch drill bit, in the top of the
    acrylic to allow for the optical sight of the Crossman T4 air pistol.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
- en: 'The aluminum sheets used for the sides measured 1 3/8 × 7 5/8 inches. I drilled
    the holes to fasten the aluminum sides to the acrylic top with a #30 drill bit
    and spaced the holes 1 inch apart. The acrylic was drilled with a #43 drill bit
    and tapped for 4-40 screws. See [Figure 8-24](ch08.xhtml#ch08fig8-24) for drilling
    specifications for both the acrylic and aluminum pieces. The holes for the acrylic
    are drilled through the width.'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_24.jpg)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-24: Dimensions for holes in the acrylic top and aluminum sides of
    the sensor channel. This template can be downloaded and used as a stencil for
    marking and center-punching holes*.'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
- en: 'In addition, as a feed-through for the wires from the LED side to the photo
    detector side, I drilled two #43 holes on either side of the fourth mounting holes
    on both the acrylic and aluminum pieces. The exact location of these holes is
    not critical.'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
- en: 'In addition to the holes for fastening the acrylic, the aluminum required two
    holes on each side for the LEDs and photo detector pairs, and another two holes
    on one side for mounting to the barrel (slide) of the gun (A and B in [Figure
    8-24](ch08.xhtml#ch08fig8-24)), drilled with a #25 drill and tapped for a 10-24
    screw. Check out how big the IR LEDs are. Most are 5 mm, and a 3/16-inch hole
    is generally a close fit. The Optoschmitt sensor also fits snugly in a 3/16-inch
    hole. The holes for the LEDs and photosensors can be measured exactly 3 inches
    apart, or you can measure them yourself to match with the PCBs mounted on the
    side.'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
- en: Depending on the weapon(s) you intend to use, you may want to adjust the positioning
    of holes A and B in [Figure 8-24](ch08.xhtml#ch08fig8-24). The sensor channel
    can also accommodate more tapped holes for multiple weapons. To mount the sensor
    channel to the top of the gun, I used nylon screws with locking nuts. The nylon
    screws were able to tighten against the blued-steel finish of the pistol without
    marring it.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
- en: The screws for mounting the gun worked well with the Crossman T4 as well as
    on an older Crossman pellet gun (see [Figure 8-25](ch08.xhtml#ch08fig8-25)).
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_25.jpg)'
  id: totrans-291
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-25: The sensor channel mounted on an older Crossman pellet gun. This
    angle shows the top (acrylic) side of the channel*.'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
- en: On the inside of the channel, I placed some double-sided adhesive foam tape
    (if you can find a single-sided adhesive foam tape, all the better) to give it
    a more snug fit and protect the weapon from damage. I left the protective covering
    on the other side of the foam so it would not adhere to the weapon or mar the
    finish.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
- en: Depending on the weapon you are using, you might want to add an extra layer
    of foam to pad the channel so the center of the barrel is closer to the center
    of the channel. But as long as the barrel is not so far on either side that the
    projectile could strike either the LED or photo detector, centering the barrel
    perfectly is not critical.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
- en: It is critical, however, to center the vertical adjustment so the LED/detector
    pairs line up with the trajectory of the projectile. To set this alignment, I
    used a straight wooden dowel of the same diameter as the bore of the barrel, inserted
    it partially into the barrel of the weapon, and then adjusted the position so
    it lined up with the LED/detector pairs. Once it’s aligned, tighten the nylon
    screws to secure the channel to the weapon.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
- en: '***Optoschmitt Light Sensors and UV LEDs***'
  id: totrans-296
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: In preparing the sensor channel, I sampled several different types of LEDs and
    detectors to see which offered the best price and performance. Units purchased
    on eBay (UV LED and phototransistor pairs) worked well, and I used them in early
    prototype versions. However, I continued to search for a sensor that I was sure
    would be fast enough and provide good sensitivity in a narrow field, which helps
    to exclude ambient light. After reviewing several samples, I chose the Optoschmitt
    SD5610 detector from Honeywell—so named, I guess, because it includes Schmitt-trigger
    circuitry (see [Figure 8-26](ch08.xhtml#ch08fig8-26)).
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_26.jpg)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-26: Schematic for the Optoschmitt SD5610 detector I used in the chronograph.
    Note that the 10-kilohm pull-up resistor is included, but the inverter function
    is not included in the schematic*.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
- en: The Optoschmitt SD5610 sensor is a little pricey, but it features a 6-degree
    acceptance angle, which worked well for projectiles of all sizes, including very
    small and large ones. It also reduced the effects of ambient light.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
- en: 'According to the manufacturer, the photodetector consists of a photodiode,
    amplifier, voltage regulator, Schmitt trigger, and an NPN output transistor with
    a 10-kilohm (nominal) pull-up resistor (see [Figure 8-26](ch08.xhtml#ch08fig8-26)).
    The internal pull-up resistor eliminates the need for an external resistor in
    the circuit. Note that there are two versions of this device: the SD5600 and the
    SD5610\. The SD5610 includes an inverter so that the output is low when the ambient
    light is above the turn-on threshold. Because I required the inverted output,
    I used the SD5610\. The spectral sensitivity is greatest in the 800 to 850 nm
    wavelength—the area of most common IR LEDs. Additional information on the SD5600
    series can be obtained at Honeywell’s website.'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
- en: For the LEDs, I just used regular IR LEDs that claimed output in the 850–950
    nm range. I simply bought a bag of 50 units on eBay, and they work fine. Alternatively,
    SparkFun offers single units very cheaply.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
- en: The LEDs and photosensors should be soldered on the PCBs made for them and should
    fit snuggly into the holes. I fastened the PCB to the sides of the acceleration
    channel using some standard 3M double-sided adhesive tape.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
- en: '***Sensor Umbilical Cable***'
  id: totrans-304
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The cable I used to connect the sensor channel to the Full Ballistic Chronograph’s
    PCB is made from four lengths of 30-gauge wire twisted together, fastened with
    masking tape, and connected to a female four-conductor Pololu connector at each
    end. These connectors are not polarized and do not have a detent, so they can
    be relatively easily unplugged or plugged in the other way. Before you plug them
    in, make sure to line up the color-coded wire.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
- en: '*I initially attempted to use a length of four-conductor telephone cable, but
    it was too stiff and caused problems*.'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
- en: The channel and completed chronograph can be connected easily. If you used colored
    wire, you’ll know that the plug is connected correctly because it is not polarized.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
- en: '**Final Setup and Operation**'
  id: totrans-309
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once you’ve finished assembling the unit and sensor channel, it’s time to take
    it out on the range and give it a try. Both the Chronograph Lite and the Full
    Ballistic Chronograph have been designed to operate from battery power, so you
    don’t need to plug them in. Set up the umbilical cable to connect the sensor channel
    to the chronograph unit, and then mount the channel to the weapon securely (see
    [Figure 8-27](ch08.xhtml#ch08fig8-27)).
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_27.jpg)'
  id: totrans-311
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-27: The completed Full Ballistic Chronograph with the acceleration
    channel mounted to a Crossman 0.177 caliber pellet gun*'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
- en: Once the channel is attached to the weapon, carefully align the barrel of the
    weapon with the LED/detectors in the channel by using a straight dowel the same
    diameter as the bore of the barrel or by making a simple adapter that uses a straight
    length of tubing (see [Figure 8-28](ch08.xhtml#ch08fig8-28)).
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_28.jpg)'
  id: totrans-314
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-28: Using a small diameter brass rod with a Teflon end to set up
    proper alignment between the barrel of a Crossman T-4 CO[2] pistol and the sensor/detectors
    in the sensor channel*'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
- en: '**WARNING**'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
- en: Always use caution when handling a weapon. *Do not look down the length of the
    barrel to align it. Look through the clear acrylic top of the sensor channel*.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
- en: '***Using the Full Ballistic Chronograph***'
  id: totrans-318
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: After aligning the barrel as best as possible, turn on the Full Ballistic Chronograph
    and press the reset button. Aim carefully at your target and fire the weapon.
    The velocity of the projectile in feet per second and the time it took to travel
    the 3 inches between sensors should appear on the LCD screen. To make another
    measurement, simply press the reset switch and fire again.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
- en: If by any chance you fail to align the weapon in the channel correctly, there
    is a possibility that the projectile will interrupt the first set of photosensors
    and not the second. In this case, you can press the clear switch and then the
    reset switch to try again. The clear switch simply closes the connection for the
    second photosensor set.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
- en: The Full Ballistic Chronograph should give accurate readings from about 300
    fps to well over 2,000 fps.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
- en: '***Using the Chronograph Lite***'
  id: totrans-322
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The Chronograph Lite operates in much the same way, only it automatically resets
    so no reset button is required. However, should the projectile fail to interrupt
    the second set of sensors/detectors, it will be necessary to clear the display
    by pressing the clear button. Essentially, this does the same thing as interrupting
    the second sensor/LED pair, but you should always use the clear button and never
    attempt to interrupt the second sensor/detector pair with an external object—especially
    your finger. Should the weapon accidentally fire, you could sustain a severe injury.
    The Chronograph Lite will provide accurate measurements from about 200 fps to
    well over 1,000 fps, but its accuracy tends to roll off as it approaches 700 fps.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
- en: '**HIGH-POWERED WEAPON TESTING**'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
- en: Unless you are experienced with firearms, I strongly recommend against using
    the Chronograph to measure high-powered weapons. That said, I did test the Full
    Ballistic Chronograph on a few of them.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 8-29](ch08.xhtml#ch08fig8-29) shows the sensor channel mounted to a
    Smithfield XP/M 9 mm semiautomatic pistol. I tested the Chronograph with a number
    of cartridges, and the measurements came within a couple fps of the manufacturer’s
    specification of the bullet. For example, the Remington JHP claims the bullet
    travels at 1,155 fps, and I measured about 1,152 fps. Other weapons also measured
    close to the published velocities.'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/fig8_29.jpg)'
  id: totrans-327
  prefs: []
  type: TYPE_IMG
- en: '*Figure 8-29: A Smithfield XP/M 9 mm pistol set up with the sensor channel
    for the Full Ballistic Chronograph. The magazine is intentionally inserted backward
    for safety reasons*.'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
