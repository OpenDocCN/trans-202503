<html><head></head><body>
<div class="imagec"><span epub:type="pagebreak" id="page_183"/><img alt="Image" src="../images/common1.jpg"/></div>
<h2 class="h2" id="ch08"><strong>8</strong><br/><strong>MAD SCIENTIST MIND GAMES</strong></h2>
<p class="noindent">In this chapter, the Mad Scientist turns their attention to the source of their genius—the mind! First, you’ll learn about your nervous system by testing how long it takes to react to stimuli. You’ll then build a lie detector that measures galvanic skin resistance, one of the factors used in polygraph tests. Use it on your friends. If they get warm and sweaty when you question them, they might be lying to you!</p>
<h3 class="h3" id="ch00lev1sec191"><span epub:type="pagebreak" id="page_184"/><strong>EXPERIMENT 10: HOW FAST ARE YOUR NERVES?</strong></h3>
<div class="image"><img alt="Image" src="../images/common2.jpg"/></div>
<p class="difficulty"><em>Difficulty: Medium</em></p>
<p class="noindent">People process stimuli with nerve cells, or neurons. <em>Nerves</em> are the wiring of the human body, carrying signals from the brain to the rest of the body and back. When you touch a hot stove, you seem to feel the pain right away. But compared to the copper wires in most electronics, nerves actually work pretty slowly.</p>
<p class="indent">By measuring the time it takes your brain to respond to a signal, you can estimate how fast that signal travels through your nerves. In this experiment, you’ll press button A with either your hand or your foot whenever the micro:bit screen goes blank, and the micro:bit will measure the time it takes you to react.</p>
<p class="indent">We’ll make a cardboard pedal to go around the micro:bit so you can press the button without hiding the display (<a href="ch08.xhtml#ch8fig1">Figure 8-1</a>).</p>
<div class="image" id="ch8fig1"><img alt="Image" src="../images/08fig01.jpg"/></div>
<p class="figcap"><em>Figure 8-1: Turning a micro:bit into a foot-operated switch</em></p>
<div class="imagec"><span epub:type="pagebreak" id="page_185"/><img alt="Image" src="../images/f0185-01.jpg"/></div>
<h4 class="h4" id="ch00lev1sec192"><strong>What You’ll Need</strong></h4>
<p class="noindent">For this project, you’ll need:</p>
<p class="noindentint"><strong><span class="blue">Micro:bit</span></strong></p>
<p class="noindentin"><strong><span class="blue">Piece of cardboard about 8 inches × 4 inches (20 cm × 10 cm)</span></strong> Thick, strong cardboard works best. It doesn’t need to be exactly these dimensions.</p>
<p class="noindentin"><strong><span class="blue">Craft knife</span></strong> To cut and score the cardboard</p>
<p class="noindentin"><strong><span class="blue">Blu-Tack adhesive putty</span></strong> To attach the micro:bit to the cardboard</p>
<h4 class="h4" id="ch00lev1sec193"><strong>Construction</strong></h4>
<p class="noindent">We’ll start by creating a cardboard pedal that will fold in half around the micro:bit.</p>
<ol>
<li class="noindent">Draw two parallel lines roughly halfway down the cardboard and about 1/4 inches (5 mm) apart, as shown in <a href="ch08.xhtml#ch8fig2">Figure 8-2</a>. You’ll fold the cardboard along these lines. Also, mark the rectangular part of the cardboard you want to cut out. Make sure the hole you’ll make is big enough for the micro:bit’s screen.</li>
<li class="noindent"><span epub:type="pagebreak" id="page_186"/>Draw your knife along the lines for the hinges, cutting only about halfway through the cardboard. This is called <em>scoring</em> the cardboard. Be careful not to cut all the way through. Then cut out the rectangle you marked.
<div class="image" id="ch8fig2"><img alt="Image" src="../images/08fig02.jpg"/></div>
<p class="figcap"><em>Figure 8-2: Making the hinge and cutting out a place for the micro:bit display</em></p>
<div class="note">
<p class="notep"><span class="red"><strong>WARNING</strong></span> Using a craft knife can be dangerous! For this part of the project, a responsible adult should use the craft knife or at least supervise.</p>
</div></li>
<li class="noindent">Place the micro:bit inside the folded cardboard so you can see its screen. Stick small pieces of Blu-Tack to the center of the micro:bit and then stick the micro:bit to the cardboard. When you gently press the top of the hinge, you should be able to feel button A click (see <a href="ch08.xhtml#ch8fig1">Figure 8-1</a>). Check that when the switch is pressed, it doesn’t also accidentally press the Reset button on the back of the micro:bit. If it does, try using larger pieces of Blu-Tack.</li>
<li class="noindent">This experiment uses MicroPython only. Find the code at <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em> The Python file for this experiment is <em>Experiment_10.py</em>. Open the file in Mu and load it onto the micro:bit.</li>
</ol>
<h4 class="h4" id="ch00lev1sec194"><strong>Testing Your Nervous System</strong></h4>
<p class="noindent">The program that controls this experiment uses Mu’s REPL to report results and give you instructions. (Revisit <a href="ch01.xhtml#ch01">Chapter 1</a> if <span epub:type="pagebreak" id="page_187"/>you need a refresher on how the REPL works.) Because it uses the REPL, this is one experiment where you’ll need to keep your micro:bit connected to your computer using the USB cable. We’ll use the micro:bit’s display and button A to measure reaction times.</p>
<p class="indent">Open Mu’s REPL. The instructions in the REPL area of the window will ask you to hold down button A whenever the micro:bit’s display shows a cross and release it as fast as you can when the display goes blank.</p>
<p class="indent">Here is what you might see in the REPL on a typical run. The instructions are broken into sections for clarity.</p>
<div class="programs1">TEST 1 - USING your hand<br/>Hold the switch down while the cross is showing.<br/>Release momentarily when the display blanks.<br/>Repeat 5 times.<br/>Press ENTER when ready to start the test</div>
<p class="indent">To start the first test run, hold down the switch with your dominant hand and press <small>ENTER</small> once on your computer. A cross should appear on the screen. After a random delay of between 3 and 7 seconds, the display will go blank. When it does, release the button as fast as you can. The REPL should show you the number of milliseconds between when the display went blank and when you released the switch. For example:</p>
<div class="programs1">252</div>
<p class="indent">The cross should then light for another random period, so hold down the switch to try the test again. The experiment should repeat a total of five times.</p>
<p class="indent">If you let go of the switch <em>before</em> the display has blanked, the REPL should display the message <span class="literal">You let go too soon</span>. This will record a time of 0, invalidating the experiment, and you’ll have to restart the whole process. If this happens, reset the micro:bit by unplugging its USB cable and plugging it back in.</p>
<p class="indent">After you’ve completed the five tests, the micro:bit’s display should remain blank, and the REPL will show your <span epub:type="pagebreak" id="page_188"/>individual reaction times as well as the average of all your times. For example:</p>
<div class="programs1">252<br/>264<br/>264<br/>282<br/>The average time using your hand was 262.7999 ms</div>
<p class="indent">You should then be prompted to repeat the experiment using your foot. Move the micro:bit pedal onto the floor. This time, position your foot over the micro:bit and gently use it to press the switch. Getting this right may take a little practice.</p>
<p class="indent">Now repeat the test for your foot. Once you’ve captured five reaction times, the REPL should display the average, and you’ll be prompted to enter the following two measurements, as in this example:</p>
<div class="programs1">The average time using your foot was 368.3999 ms<br/>Enter the distance from the back of your neck to your fingers in cm: 107<br/>Enter the distance from the back of your neck to your toes in cm: 188</div>
<p class="indent">The program will use these measurements to calculate how long it took your brain to realize that the display had blanked in milliseconds—this is the thinking time. And it will calculate the speed at which the signal traveled to your hand or foot in meters per second—this is the transmission speed.</p>
<div class="programs1">Thinking time (ms): 123.3036<br/>Transmission speed (m/s): 13.03703</div>
<p class="indent">“How It Works: Measuring Your Reaction Time” on <a href="ch08.xhtml#page_191">page 191</a> will explain how these calculations are made and just how meaningful they are (or aren’t).</p>
<h4 class="h4" id="ch00lev1sec195"><strong>Code</strong></h4>
<p class="noindent">We use a variable <span class="literal">n</span> to hold the number of reaction time readings to take for each test. In this case, five readings are taken.</p>
<div class="programs1"><span class="green">from</span> microbit <span class="green">import</span> <span class="purple">*</span><br/><span class="green">import</span> random<br/><span epub:type="pagebreak" id="page_189"/>n <span class="purple">=</span> <span class="blue1">5</span><br/><br/><span class="green">def</span> <span class="blue1">run_full_test</span><span class="purple">():</span><br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"TEST 1 - USING your hand"</span><span class="purple">)</span><br/>    t_hand <span class="purple">=</span> run_test<span class="purple">()</span><br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"The average time using your hand was "</span> <span class="purple">+</span> <span class="blue1">str</span><span class="purple">(</span>t_hand<span class="purple">)</span><br/>         <span class="purple">+</span> <span class="red1">" ms"</span><span class="purple">)</span><br/>    print<span class="purple">(</span><span class="red1">"Now repeat the test for your foot"</span><span class="purple">)</span><br/>    t_foot <span class="purple">=</span> run_test<span class="purple">()</span><br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"The average time using your foot was "</span> <span class="purple">+</span> <span class="blue1">str</span><span class="purple">(</span>t_foot<span class="purple">)</span><br/>         <span class="purple">+</span> <span class="red1">" ms"</span><span class="purple">)</span><br/><span class="blue"><span class="ent">➊</span></span>  d_hand <span class="purple">=</span> <span class="blue1">int</span><span class="purple">(</span>input<span class="purple">(</span><span class="red1">"Enter the distance from the back of</span><br/>                        <span class="red1">your neck to your fingers in cm: "</span><span class="purple">))</span><br/><span class="blue"><span class="ent">➋</span></span>  d_foot <span class="purple">=</span> <span class="blue1">int</span><span class="purple">(</span>input<span class="purple">(</span><span class="red1">"Enter the distance from the back of</span><br/>                        <span class="red1">your neck to your toes in cm: "</span><span class="purple">))</span><br/>    thinking_time <span class="purple">= (</span>d_foot <span class="purple">*</span> t_hand <span class="purple">-</span> d_hand <span class="purple">*</span> t_foot<span class="purple">)<br/>                  / (</span>d_foot <span class="purple">-</span> d_hand<span class="purple">)</span><br/>    transmission_speed <span class="purple">=</span> <span class="blue1">10</span> <span class="purple">* (</span>t_foot <span class="purple">-</span> thinking_time<span class="purple">) /</span> d_foot<br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"Thinking time (ms): "</span> <span class="purple">+</span> <span class="blue1">str</span><span class="purple">(</span>thinking_time<span class="purple">))</span><br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"Transmission speed (m/s): "</span> <span class="purple">+</span> <span class="blue1">str</span><span class="purple">(</span>transmission_speed<span class="purple">))</span></div>
<p class="indent">The function <span class="literal">run_full_test</span> runs both the hand and foot test in turn. (We’ll define the code for both those tests in a bit.) The last four lines of the code are the calculations for the thinking time and transmission speed, explained in “How It Works: Measuring Your Reaction Time” on <a href="ch08.xhtml#page_191">page 191</a>.</p>
<p class="indent">This function also prompts you to enter the neck-to-hand and neck-to-foot distances using the <span class="literal">input</span> function. The program will be able to use that information because it stores the input in variables. We store the input for the neck-to-hand distance in <span class="literal">d_hand</span> <span class="blue"><span class="ent">➊</span></span> and the input for the neck-to-foot distance in <span class="literal">d_foot</span> <span class="blue"><span class="ent">➋</span></span>.</p>
<p class="indent">The <span class="literal">input</span> function displays the string of text that you supplied as its parameter and then waits for you to enter some text. It returns whatever you type as a string, and the <span class="literal">int</span> function converts that string into an integer so we can use it in the calculation.</p>
<p class="indent">Here’s the code for the <span class="literal">run_test</span> function:</p>
<div class="programs1"><span class="green">def</span> <span class="blue1">run_test</span><span class="purple">():</span><br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"Hold the switch down while cross is showing and</span><br/>            <span class="red1">release momentarily when the display blanks"</span><span class="purple">)</span><br/>    <span class="blue1">print</span><span class="purple">(</span><span class="red1">"Repeat "</span> + <span class="blue1">str</span><span class="purple">(</span>n<span class="purple">) +</span> <span class="red1">" times."</span><span class="purple">)</span><br/><span epub:type="pagebreak" id="page_190"/>    <span class="blue1">input</span><span class="purple">(</span><span class="red1">"Press ENTER when ready to start the test"</span><span class="purple">)</span><br/>    total <span class="purple">=</span> <span class="blue1">0</span><br/>    <span class="green">for</span> i <span class="green">in</span> <span class="blue1">range</span><span class="purple">(</span><span class="blue1">0</span><span class="purple">,</span> n<span class="purple">):</span><br/>        t <span class="purple">=</span> get_reaction_time<span class="purple">()</span><br/>        <span class="green">if</span> t <span class="purple">&gt;</span> <span class="blue1">10</span>:<br/>            <span class="blue1">print</span><span class="purple">(</span>t<span class="purple">)</span><br/>            total <span class="purple">+=</span> t<br/>        <span class="green">else</span><span class="purple">:</span><br/>            <span class="blue1">print</span><span class="purple">(</span><span class="red1">"You let go too soon"</span><span class="purple">)</span><br/>    <span class="green">return</span> total <span class="purple">/</span> n</div>
<p class="indent">The <span class="literal">run_test</span> function runs a single test, providing the necessary instructions and collecting the required number of reaction time readings by calling <span class="literal">get_reaction_time</span>. If the reaction time is less than 10 milliseconds, which would mean superhuman reflexes, the program tells you that you let go too soon. Otherwise, it displays your reaction time.</p>
<div class="programs1"><span class="green">def</span> <span class="blue1">get_reaction_time</span><span class="purple">():</span><br/>    display<span class="purple">.</span>show<span class="purple">(</span>Image<span class="purple">.</span>NO<span class="purple">)</span><br/>    sleep<span class="purple">(</span>random<span class="purple">.</span>randint<span class="purple">(</span><span class="blue1">3000</span><span class="purple">,</span> <span class="blue1">7000</span><span class="purple">))</span><br/>    display<span class="purple">.</span>clear<span class="purple">()</span><br/>    t0 <span class="purple">=</span> running_time<span class="purple">()</span><br/>    <span class="green">while</span> pin5<span class="purple">.</span>read_digital<span class="purple">() ==</span> <span class="green">False</span><span class="purple">:</span> <span class="ash"># Button A down</span><br/>        <span class="green">pass</span><br/>    t1 <span class="purple">=</span> running_time<span class="purple">()</span><br/>    t <span class="purple">=</span> t1 <span class="purple">-</span> t0<br/>    <span class="green">return</span> t<br/><br/>run_full_test<span class="purple">()</span></div>
<p class="indent">The <span class="literal">get_reaction_time</span> function displays the cross image and then sleeps for a random period between 3 and 7 seconds. It then clears the screen and sets the variable <span class="literal">t0</span> to the current running time so that the program knows when to start timing the reaction test.</p>
<p class="indent">When you release button A, the program exits the <span class="literal">while</span> loop and records the time at which it stops in <span class="literal">t1</span>. We calculate the reaction time by subtracting <span class="literal">t0</span> from <span class="literal">t1</span>.</p>
<p class="indent">You might be wondering why the code checks for button A being pressed using <span class="literal">pin5.read_digital</span> rather than <span class="literal">button_a.is_pressed</span>. The answer is that the <span class="literal">is_pressed</span> function does not operate as quickly as <span class="literal">read_digital</span> and so would add some unwanted extra time to the reaction time measurement. We use <span epub:type="pagebreak" id="page_191"/><span class="literal">pin5</span> because the micro:bit’s wiring connects pin 5 directly to button A. The micro:bit actually has a whole load of other pins than the pins 0 to 3 that we use with alligator clips. However, in this book we concentrate on the pins that are easy to access.</p>
<h4 class="h4" id="ch00lev1sec196"><strong>Things to Try</strong></h4>
<p class="noindent">To perform further investigations into the human nervous system, try comparing different people’s results or conducting the test at different times of day.</p>
<h4 class="h4" id="ch00lev1sec197"><strong>How It Works: Measuring Your Reaction Time</strong></h4>
<p class="noindent">When you see the cross vanish, two things happen in your body, each of which takes a certain amount of time:</p>
<ol>
<li class="noindent">Your eyes and brain notice the change and decide to act on it.</li>
<li class="noindent">A signal passes from your brain, through your nerves, to the muscles that control your hand or foot, and the hand or foot comes off the switch.</li>
</ol>
<p class="indent">For this experiment, we assumed that the thinking time, or the time it takes you to register the change, is the same whether you’re moving your hand or your foot.</p>
<p class="indent">We also assume that the nerve signal speed between brain and hand and brain and foot is the same. In reality, neither of these assumptions is exactly right, but the Mad Scientist can sort out those issues some other time.</p>
<p class="indent">Given those assumptions, the speed that the signal travels through your nerves is equal to the total reaction time minus the thinking time, divided by the distance the signal has to travel.</p>
<p class="indent">Taking the two distance measurements allows us to crudely calculate both the thinking time and the signal speed. Here are the variables we’ll use in the calculations:</p>
<p class="noindentint"><span class="blue"><span class="literal"><span class="codestrong1">t_hand</span></span></span> The total reaction time (thinking + acting) for the hand</p>
<p class="noindentin"><span class="blue"><span class="literal"><span class="codestrong1">t_foot</span></span></span> The total reaction time for the foot</p>
<p class="noindentin"><span class="blue"><span class="literal"><span class="codestrong1">d_hand</span></span></span> The distance the signal has to travel along the nerve from the brain to the hand</p>
<p class="noindentin"><span class="blue"><span class="literal"><span class="codestrong1">d_foot</span></span></span> The brain-to-foot distance</p>
<p class="noindentin"><span epub:type="pagebreak" id="page_192"/><span class="blue"><span class="literal"><span class="codestrong1">thinking_time</span></span></span> The time it takes to register the event and start the message to the hand or foot</p>
<p class="noindentinb"><span class="blue"><span class="literal"><span class="codestrong1">transmission_speed</span></span></span> The speed of the signal through the brain to the hand or foot</p>
<p class="indent">Now for the math. For the hand, we can use this equation:</p>
<div class="imagec"><img alt="Image" src="../images/f0192-01.jpg"/></div>
<p class="indent">Similarly, for the foot, we can use this:</p>
<div class="imagec"><img alt="Image" src="../images/f0192-02.jpg"/></div>
<p class="indent">This means that we also know the following:</p>
<div class="imagec"><img alt="Image" src="../images/f0192-03.jpg"/></div>
<p class="indent">Now we can use algebra to rearrange things so that we can calculate the thinking time and transmission speed. We can multiply both sides by this:</p>
<p class="center">(t_hand – thinking_time)</p>
<p class="noindent">And we get this:</p>
<div class="imagec"><img alt="Image" src="../images/f0192-04.jpg"/></div>
<p class="indent">If we multiply both sides by the following:</p>
<p class="center">(t_foot – thinking_time)</p>
<p class="noindent">we get this:</p>
<p class="center">d_hand (t_foot – thinking_time) = d_foot (t_hand – thinking_time)</p>
<p class="indentb">Multiplying across the parentheses gives this:</p>
<p class="center1">d_hand × t_foot – d_hand × thinking_time</p>
<p class="center1">= d_foot × t_hand – d_foot × thinking_time</p>
<p class="indentb">So:</p>
<p class="center1">d_hand × t_foot – d_foot × t_hand</p>
<p class="center1">= d_hand × thinking_time – d_foot × thinking_time</p>
<p class="center1"><span epub:type="pagebreak" id="page_193"/>d_hand × t_foot – d_foot × t_hand</p>
<p class="center1">= thinking_time (d_hand – d_foot)</p>
<p class="indent">Finally, we can calculate the thinking time as the following:</p>
<div class="imagec"><img alt="Image" src="../images/f0192-05.jpg"/></div>
<p class="indent">Now that we have the thinking time, we can use it to calculate the speed the message travels along the nerves, like this:</p>
<div class="imagec"><img alt="Image" src="../images/f0192-06.jpg"/></div>
<p class="indent">This result will be in centimeters per millisecond. To convert the value into meters per second, we multiply by 1,000 and divide by 100. In other words, multiply by 10, and you’ve got the transmission speed.</p>
<h3 class="h3" id="ch00lev1sec198"><strong>PROJECT: LIE DETECTOR</strong></h3>
<div class="image"><img alt="Image" src="../images/common3.jpg"/></div>
<p class="difficulty"><em>Difficulty: Medium</em></p>
<p class="noindent">The Mad Scientist doesn’t like surprise parties, and they want to figure out whether their lab assistants are planning one for their birthday. They’ll have to use their lie detector (<a href="ch08.xhtml#ch8fig3">Figure 8-3</a>) to figure it out!</p>
<div class="image" id="ch8fig3"><img alt="Image" src="../images/08fig03.jpg"/></div>
<p class="figcap"><em>Figure 8-3: Lie detector</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_194"/>This project measures <em>galvanic skin resistance (GSR)</em>, which is the resistance of the skin to the flow of electricity. To measure GSR, we’ll use a micro:bit, and a pair of metal spoons.</p>
<h4 class="h4" id="ch00lev1sec199"><strong>What You’ll Need</strong></h4>
<p class="noindent">For this project, you’ll need the following:</p>
<p class="noindentint"><strong><span class="blue">Micro:bit</span></strong></p>
<p class="noindentin"><strong><span class="blue">2 × Alligator clip cables</span></strong> To connect the spoons to the micro:bit</p>
<p class="noindentinb"><strong><span class="blue">2 × Spoons</span></strong></p>
<p class="indent">You’ll use the spoons to make contact with the palms of your hands. The alligator clips will attach to the spoons’ handles and might scratch them, so don’t use your best spoons!</p>
<h4 class="h4" id="ch00lev1sec200"><strong>Construction</strong></h4>
<ol>
<li class="noindent">Go to <em><a href="https://github.com/simonmonk/mbms/">https://github.com/simonmonk/mbms/</a></em> to access the book’s code repository and click the link for <strong>Lie Detector</strong>. Once the program has opened, click <strong>Download</strong> and then copy the hex file onto your micro:bit. If you get stuck, head back to <a href="ch01.xhtml#ch01">Chapter 1</a> for a refresher on loading programs onto your micro:bit.
<p class="indent">If you prefer to use Python, then download the code from the same website. For instructions for downloading and using the book’s examples, see “Downloading the Code” on <a href="ch01.xhtml#page_34">page 34</a>. The Python file for this experiment is <em>ch_08_Lie_Detector.py</em>.</p></li>
<li class="noindent">Use one alligator clip to connect the handle of one of the spoons to pin 2 and the other alligator clip to connect the other spoon to GND, as shown in <a href="ch08.xhtml#ch8fig3">Figure 8-3</a>.</li>
</ol>
<p class="indent">To use the lie detector, you need two people: an operator to ask the tricky questions and a subject to answer them. The subject needs to hold the spoons so that the curved side makes full contact with the palms of their hands.</p>
<p class="indent">When the operator presses button A, the dot on the micro:bit’s display should move to the center of the LED. If skin resistance falls because the subject gets sweaty, the dot will move up the screen. If skin resistance rises, the dot will move down.</p>
<p class="indent"><span epub:type="pagebreak" id="page_195"/>If the dot seems to be stuck at the top or bottom, the operator needs to press button A to center the display. The readings will gradually drift, even without any difficult questions.</p>
<p class="indent">After asking a question, the operator should wait three or four seconds before checking the reading on the display.</p>
<h4 class="h4" id="ch00lev1sec201"><strong>Code</strong></h4>
<p class="noindent">This project has both Blocks and Python code. The full explanation follows the Blocks code, so if you skip to the Python code now, make sure to return to read the explanation.</p>
<h5 class="h5" id="ch00lev1sec202"><strong>Blocks Code</strong></h5>
<p class="noindent">Here is the Blocks code for this project.</p>
<div class="image"><img alt="Image" src="../images/f0195-01.jpg"/></div>
<p class="indent"><span epub:type="pagebreak" id="page_196"/>In the <span class="literal">on start</span> block, we place the block <span class="literal">set pull pin</span>, which enables the built-in 12kΩ pullup resistor. (The pullup resistor is disabled by default.)</p>
<p class="indent">Also in the <span class="literal">on start</span> block, we take a reading from pin 2, connected to one of the spoons, and store the result in the <span class="literal">baseline</span> variable. The program will compare any new readings against this baseline to see how much the subject’s skin resistance has changed.</p>
<p class="indent">We then use the <span class="literal">forever</span> loop to take a new analog reading from pin 2 that represents your subject’s GSR after answering a question you’ve asked. The loop subtracts the <span class="literal">baseline</span> reading from the new <span class="literal">reading</span> and divides the result by 10 to reduce it by about the right amount.</p>
<p class="indent">It uses this number to determine which of the five LEDs should light up. The number must fall within the range of –2 to 2 or an error will occur. Once this is done (using a couple of <span class="literal">if</span> blocks), the display is cleared, and the middle-column LED on the row <span class="literal">2 + change</span> is lit using the <span class="literal">plot</span> block.</p>
<p class="indent">Pressing button A resets the <span class="literal">baseline</span>.</p>
<div class="imagec"><img alt="Image" src="../images/f0196-01.jpg"/></div>
<h5 class="h5" id="ch00lev1sec203"><strong>MicroPython Code</strong></h5>
<p class="noindent">The MicroPython version of the code is shown here:</p>
<div class="programs1"><span class="green">from</span> microbit <span class="green">import</span> <span class="purple">*</span><br/><br/>pin2<span class="purple">.</span>set_pull<span class="purple">(</span>pin2<span class="purple">.</span>PULL_UP<span class="purple">)</span><br/>baseline <span class="purple">=</span> pin2<span class="purple">.</span>read_analog<span class="purple">()</span><br/><span class="green"><span epub:type="pagebreak" id="page_197"/>while True</span><span class="purple">:</span><br/>    <span class="green">if</span> button_a<span class="purple">.</span>was_pressed<span class="purple">():</span><br/>        baseline <span class="purple">=</span> pin2<span class="purple">.</span>read_analog<span class="purple">()</span><br/>    reading <span class="purple">=</span> pin2<span class="purple">.</span>read_analog<span class="purple">()</span><br/>    change <span class="purple">=</span> <span class="blue1">int</span><span class="purple">((</span>reading <span class="purple">-</span> baseline<span class="purple">) /</span> <span class="blue1">10</span><span class="purple">)</span><br/>    <span class="green">if</span> <span class="purple">(</span>change <span class="purple">&gt;</span> <span class="blue1">2</span><span class="purple">):</span><br/>        change <span class="purple">=</span> <span class="blue1">2</span><br/>    <span class="green">if</span> <span class="purple">(</span>change <span class="purple">&lt; -</span><span class="blue1">2</span><span class="purple">):</span><br/>        change <span class="purple">= -</span><span class="blue1">2</span><br/>    display<span class="purple">.</span>clear<span class="purple">()</span><br/>    display<span class="purple">.</span>set_pixel<span class="purple">(</span><span class="blue1">2</span><span class="purple">,</span> <span class="blue1">2</span> <span class="purple">+</span> change<span class="purple">,</span> <span class="blue1">9</span><span class="purple">)</span></div>
<p class="indent">This works in much the same way as the Blocks code, with just a few differences. Here, we use the <span class="literal">int</span> function to convert the change in the reading values into an integer.</p>
<p class="indent">We then use the <span class="literal">set_pixel</span> method to tell the micro:bit display which LED to light up. This method is different from the <span class="literal">plot</span> block because it not only asks for the x and y coordinates but also requires you to provide a brightness level between 0 and 9. We choose 9 to make it as bright and visible as possible.</p>
<h4 class="h4" id="ch00lev1sec204"><strong>How It Works: Detecting Lies Through Sweat, Voltage, and Resistance</strong></h4>
<p class="noindent">Skin resistance is one of the measurements used by polygraph lie detectors so often seen in movies.</p>
<p class="indent">If you flush or start to sweat, as you might when under pressure, your skin’s resistance to electricity changes. But testing for GSR might not always work. The questions you ask and how you ask them can influence a person’s reactions or make them feel nervous, and GSRs will differ from person to person. Conversely, people who are more detached from their feelings can learn how to defeat the polygraph. But for the Mad Scientist’s investigation into a possible surprise party, this lie detector is just the ticket.</p>
<p class="indent">This project converts readings of GSR into a voltage. Most metals have low resistance because metal conducts electricity well, whereas something like plastic has a high resistance because electricity does not generally flow well through plastic. We measure resistance using a micro:bit’s pin, which works as an analog input (see <a href="ch01.xhtml#ch01">Chapter 1</a>) and an arrangement of two resistors called a <em>voltage divider</em> (<a href="ch08.xhtml#ch8fig4">Figure 8-4</a>).</p>
<div class="image" id="ch8fig4"><span epub:type="pagebreak" id="page_198"/><img alt="Image" src="../images/08fig04.jpg"/></div>
<p class="figcap"><em>Figure 8-4: Schematic of a voltage divider</em></p>
<p class="indent">The unit of resistance is the <em>ohm</em> (Ω), and we normally abbreviate 1,000Ω to 1kΩ. In <a href="ch08.xhtml#ch8fig4">Figure 8-4</a>, the 12kΩ resistor connected to pin 2 is a resistor built into the micro:bit’s processor. This resistor pulls the voltage at pin 2 toward 3V (think of the resistors in this diagram as springs); if you weren’t holding onto the spoons, this pull would be the only force acting on the pin, and the pin would register a maximum reading of 1023, or 3V.</p>
<p class="indent">However, as soon as the subject grasps the spoons, another resistor—the subject’s skin—comes into play. This counters the 12kΩ resistor by pulling the voltage at pin 2 back toward 0V. If your skin resistance was exactly 12kΩ, then the two resistances would be pulling equally, and the voltage at pin 2 would be 1.5V.</p>
<p class="indent">If the subject sweats, their skin resistance falls, pulling the voltage lower. Conversely, when they recover, their skin resistance increases, allowing the 12kΩ resistor to pull the voltage up.</p>
<h3 class="h3" id="ch00lev1sec205"><strong>SUMMARY</strong></h3>
<p class="noindent">In this chapter, we conducted a few experiments on the human nervous system. The experiment and project we completed may have dubious scientific rigor, but hopefully you enjoyed yourself along the way.</p>
<p class="indent">In the next chapter, we’ll take measurements of the environment. Specifically, we’ll work with light and temperature, which are important to the Mad Scientist’s comfort.</p>
</body></html>