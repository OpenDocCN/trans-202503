<html><head></head><body>
<div class="image1"><img alt="image" src="../images/f059-01.jpg"/></div>&#13;
<h2 class="h2" id="ch03"><span epub:type="pagebreak" id="page_35"/><strong><span class="big">3</span><br/>Ghost Burgers: Adding Special Effects with Scripting</strong></h2>&#13;
<p class="noindent">In this chapter, you’ll learn more advanced Twine features and become a Twine virtuoso. You’ll learn <em>scripting</em>, which allows you to add special effects to your story’s text, and to make your game remember and respond to player choices. Now you can keep track of whether they went to one room or another or whether they’re carrying a flashlight or a hamburger. You’ll also learn how to change your story’s background colors, font colors, and font styles. We’ll use a Twine game called <em>Ghost Burgers</em> as our starting point. Play it at <a href="https://nostarch.com/twinegames"><em>https://nostarch.com/twinegames</em></a><em>/.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_36"/>Here is what the spooky <em>Ghost Burgers</em> start screen looks like.</p>&#13;
<div class="image"><img alt="image" src="../images/f060-01.jpg"/></div>&#13;
<p class="indent">In <em>Ghost Burgers</em>, you explore a spooky old house to find proof of the supernatural so you and your friend Astrid can become world-famous ghost hunters. As you explore the house, you’ll perform actions, like flipping a weird switch and exploring a spooky attic, to progress through the story and meet some ghosts.</p>&#13;
<p class="indent">Take a few minutes to play <em>Ghost Burgers</em>, and then I’ll show you how to make it.</p>&#13;
<h3 class="h3" id="lev33">Mapping Out a Space</h3>&#13;
<p class="noindent">Unlike <em>Interview with a Cat!</em>, which simulates a conversation, <em>Ghost Burgers</em> simulates a place: a mansion. The player can move from one part of the mansion to the other and even retrace their steps to see if anything has changed in a particular room.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_37"/>But before building a mansion, it’s a good idea to map it out. For this game, the first step was to think about the rooms I wanted, where they were, and what events should happen in which rooms. For example, I decided the parlor would always lead to either the maintenance room or the library, and the dining room would always lead to the kitchen. This should make intuitive sense to most players. Then I drew a map like this one to help me keep track of the paths.</p>&#13;
<div class="image"><img alt="image" src="../images/f061-01.jpg"/></div>&#13;
<h3 class="h3" id="lev34"><span epub:type="pagebreak" id="page_38"/>Planning Events and Controlling Play</h3>&#13;
<p class="noindent">With my map in hand and a basic idea of what the <em>Ghost Burgers</em> mansion would look like, I made a list of major events I wanted to happen in the game. The list looked something like this, in the general order in which the events would take place:</p>&#13;
<ul class="numlist">&#13;
<li class="noindent"><span class="listnum">•</span>Find a key under the doormat and use it to get into the mansion</li>&#13;
<li class="noindent"><span class="listnum">•</span>Discover the trapdoor that leads to the attic</li>&#13;
<li class="noindent"><span class="listnum">•</span>Turn on the ghost switch to make ghosts appear</li>&#13;
<li class="noindent"><span class="listnum">•</span>Use the ghost stepladder to reach the attic trapdoor</li>&#13;
<li class="noindent"><span class="listnum">•</span>Meet Burger Ghost in the attic</li>&#13;
<li class="noindent"><span class="listnum">•</span>Find the ghost burger in the fridge</li>&#13;
<li class="noindent"><span class="listnum">•</span>Find a plate of ghost china for the burger</li>&#13;
<li class="noindent"><span class="listnum">•</span>Feed the ghost burger to Burger Ghost</li>&#13;
</ul>&#13;
<p class="indent"><em>Ghost Burgers</em> isn’t super strict about the order in which these events happen. For example, the player can find the burger before meeting the Burger Ghost, or they can find the plate before finding the burger that goes on the plate. The reason to make a list of events is to have a general idea of the flow of the game.</p>&#13;
<div class="image"><img alt="image" src="../images/f062-01.jpg"/></div>&#13;
<p class="indent">To make your games a bit more challenging and interesting, you can make the player do things in a specific order. For example, I can make <span epub:type="pagebreak" id="page_39"/>sure the player sees the trapdoor that leads to the attic <em>before</em> the ghost stepladder appears. When the player sees the trapdoor and can’t find a way up to it, they’ll have to keep exploring to find out how to get up there. Later, when they flip a ghost switch, the ghostly stepladder appears, which shows the player how to access a different dimension of the game.</p>&#13;
<p class="indent">To ensure that the player sees the trapdoor before the ghost switch, I made it impossible for the player to get to the ghost switch without passing through the library where the trapdoor is. As you can see on the map on <a href="#page_37">page 37</a>, the player <em>must</em> pass through the library to get to the maintenance room and flip the switch. This works both ways: after the player flips the switch, they <em>must</em> pass through the library again where they’ll see the ghostly stepladder.</p>&#13;
<p class="indent">Flipping the switch also reveals many new items for the player to explore. For example, the player can examine the fridge and the china cabinet before flipping the ghost switch, but they won’t see the burger and plate until the ghost switch is on. This technique adds to the experience because the player must look around to get a sense of what’s going on and anticipate changes to the game environment.</p>&#13;
<p class="indent">I also decided to make two of the most important moments in the game—finding the ghost burger and finding the plate to put it on—happen on opposite sides of the mansion. That way, the player has to explore the entire mansion before they can finish the game.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep">Not all Twine games will have the kind of organization that <em>Ghost Burgers</em> does. Some Twine stories only move forward. But even in those stories, it’s best to think about the order in which the player discovers things, what they learn and when, and where important moments in the game are in relation to each other so you can space out the game’s components.</p>&#13;
</div>&#13;
<h3 class="h3" id="lev35">Adding Text Effects Using Hooks</h3>&#13;
<p class="noindent">The rooms in <em>Ghost Burgers</em> change from one visit to the next, but only after the player flips the switch. After the player flips the ghost switch, ghosts (like Archibald Prancibald, the talkative gentleman ghost, or the ghostly stepladder or ghost burger) appear in places that were previously ghost free! And the text looks ghostly, too!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_40"/>How do you create spooky ghost text? How do you make a passage in your story look different each time the player returns to it? How do you change passages depending on what the player has already done or seen?</p>&#13;
<p class="indent">The answer to all these questions is to use hooks. In this chapter, I will sometimes refer to writing hooks as “script” or “code.” Those are just different names for instructions that are given to a computer.</p>&#13;
<p class="indent">For our first hook, let’s add <em>s p o o k y</em> text to our game!</p>&#13;
<h4 class="h4" id="lev36">Ghostly Text Style</h4>&#13;
<p class="noindent">Did you notice while playing <em>Ghost Burgers</em> that the names of ghostly objects appear ghostly, like the blurry word <em>stepladder</em> shown here?</p>&#13;
<div class="image"><img alt="image" src="../images/f064-01.jpg"/></div>&#13;
<p class="indent">Blurring the word makes the text stand out, which helps players notice that the stepladder wasn’t there the first time they traveled through this room: they would have remembered a blurry ladder! The blurry text identifies what has changed in each room.</p>&#13;
<p class="indent">To create these effects, you can use hooks, which are built into Twine. To see how they work, open a new passage in Twine and enter the following line into the editor:</p>&#13;
<p class="programs">A glowing blue <span class="codepink"><span class="codestrong1">(</span></span><span class="codeitalic1"><span class="codepink">text-style:</span></span> <span class="codegreen">"blur"</span><span class="codepink"><span class="codestrong1">)</span></span><span class="codestrong1">[</span>stepladder<span class="codestrong1">]</span> is standing<br/>in the middle of the library.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_41"/>Test-play this passage, and you should see that the word <em>stepladder</em> looks blurry.</p>&#13;
<p class="indent">In this example, the text enclosed inside parentheses <span class="literal">(text-style: "blur")</span> is the <em>hook</em>, which is a label you can use to tell Twine how to style a passage. The text in square brackets <span class="literal">[stepladder]</span> is the tagged word. Here, the <span class="literal">text-style</span> tag changes the style of the text in the square brackets from the default to the <span class="literal">"blur"</span> style. You can apply a range of styles using the <span class="literal">text-style</span> tag: for example, you can create upside-down text with <span class="literal">(text-style: "upside-down")</span> and create text that casts a shadow with <span class="literal">(text-style: "shadow")</span>. As long as you enclose the text within the square brackets, you can apply the style change to as much text as you like. (A complete list of text effects is at the Twine 2 reference site at <a href="http://twine2.neocities.org/"><em>http://twine2.neocities.org/</em></a>.)</p>&#13;
<h4 class="h4" id="lev37">Displaying Random Text with either</h4>&#13;
<p class="noindent">In addition to using hooks to apply different text effects, you can also use them to display different text each time the player revisits a passage. For example, in <em>Ghost Burgers</em>, if the player looks at a book in the library more than once, they’ll see a different book each time.</p>&#13;
<div class="image"><img alt="image" src="../images/f065-01.jpg"/></div>&#13;
<p class="indent">Displaying random books creates the impression of a library full of books. Almost every time the player pulls a book off the shelf, they’ll see a different title. In fact, only 10 book title options are available, but that’s enough to make it seem like the library has so many books the player will never be able to look at them all.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_42"/><img alt="image" src="../images/f066-01.jpg"/></div>&#13;
<p class="indent">You can use Twine’s <span class="literal">either</span> tag to pick from a list of options at random. For example, open a passage in Twine and enter the following:</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">either:</span> <span class="codegreen">"red"</span>,<span class="codegreen">"blue"</span>,<span class="codegreen">"green"</span><span class="codestrong1">)</span></span></p>&#13;
<p class="indent">Now test-play the passage a couple of times. The passage should read <em>red</em>, <em>blue</em>, or <em>green</em> each time you play it.</p>&#13;
<p class="indent">Each option can be as long or short as you like, but you must enclose it in quotation marks with commas between the options.</p>&#13;
<p class="indent">Here’s how we use <span class="literal">either</span> in the <em>Library</em> passage:</p>&#13;
<p class="programs">You pull a book off the shelf at random. The cover says:<br/><span class="codeyellow">=&gt;&lt;=</span><br/><span class="codestrong1">*</span><span class="codeitalic1"><span class="codepink"><span class="codestrong1">(</span>either:</span> <span class="codegreen">"Rotwither's Potions for Beginners"<span class="codepink">,</span> "Dead but<br/>Not Silent: Know Your Rights"<span class="codepink">,</span> "Beyond Lydia Deetz: Can the<br/>Living and the Dead Coexist?"<span class="codepink">,</span> "1001 New Uses for Ectoplasm"<span class="codepink">,</span><br/>"No More White Sheets: Fashion for the Post-Living"<span class="codepink">,</span> "This<br/>Really Old House: Secret Passages for Cheap"<span class="codepink">,</span> "A Specter<br/>Haunting Europe: A Travel Guide for Spirits"<span class="codepink">,</span> "Nightfallow's<br/>Abridged Magical Grimoire"<span class="codepink">,</span> "Haunted: Learning to Let Go of<br/>Your Past"<span class="codepink">,</span> "On Poltergeisting"<span class="codepink">,</span> "Fudgewallow's Cookbook for<br/>the Incorporeal"</span></span><span class="codestrong1"><span class="codepink">)</span></span><span class="codestrong1">*</span><br/><span class="codeyellow">&lt;==</span><br/>You put it back on the shelf.<br/><span class="codelghtblue">[[</span>Back<span class="codelghtblue">-&gt;Library]]</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_43"/>The symbols <span class="literal">=&gt;&lt;=</span> center the book titles, and <span class="literal">&lt;==</span> moves the text back to the left afterward. To use these directional characters to format your text, enter them into Twine, and then insert the text you want to adjust on the line that follows. To move text to the right, use <span class="literal">==&gt;</span>.</p>&#13;
<p class="indent">The asterisks (<span class="literal">*</span>) at either end of the list of book title options italicize the text, as you learned in <a href="ch02.xhtml">Chapter 2</a>. When you test-run this passage, you should see something like this.</p>&#13;
<div class="image"><img alt="image" src="../images/f067-01.jpg"/></div>&#13;
<p class="indent">Next, let’s explore how to place hooks inside other hooks.</p>&#13;
<h4 class="h4" id="lev38">Nesting Hooks</h4>&#13;
<p class="noindent">You can combine the effects of different hooks by placing one inside the other, which is called <em>nesting</em>. Enter the following to see how nesting works:</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">text-style:</span> <span class="codestrong1">(</span><span class="codeitalic1">either:</span></span><span class="codegreen">"italic"<span class="codepink">,</span>"shadow"<span class="codepink">,</span>"blur"<span class="codepink">,</span>"upside-down"<span class="codepink">,</span><br/>"rumble"</span><span class="codepink"><span class="codestrong1">))</span></span><span class="codestrong1">[</span>What am I?<span class="codestrong1">]</span></p>&#13;
<p class="indent">Here, the words “What am I?” would randomly appear italicized, with a shadow, blurry, upside-down, or rumbling (shaking up and down). Each hook starts with text that shows what it does (<span class="literal">text-style</span>, <span class="literal">either</span>), a colon, and then a “how do I do it” part. The “how do I do it” part for the <span class="literal">text-style</span> tag is the <span class="literal">either</span> hook. We’re telling Twine to <span epub:type="pagebreak" id="page_44"/>print this text using either italicized, shadowed, blurry, upside-down, or rumbling style. Try it! Just make sure each hook has its own opening parenthesis and closing parenthesis!</p>&#13;
<div class="image"><img alt="image" src="../images/f068-01.jpg"/></div>&#13;
<p class="indent">Think of nesting hooks like nesting dolls. When you open the “text-style” doll, you’ll find the “either” doll nested neatly inside it. As long as every doll has a top and a bottom—the “what do I do” and “how do I do it” with the correct punctuation—you can nest as many hooks inside other hooks as you like.</p>&#13;
<p class="indent">This nested tag sends the player to a random room in the mansion:</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">display:</span> <span class="codestrong1">(</span><span class="codeitalic1">either:</span></span><span class="codegreen">"Foyer"<span class="codepink">,</span>"DiningRoom"<span class="codepink">,</span>"Kitchen"<span class="codepink">,</span>"Library"<span class="codepink">,</span><br/>"Parlor"<span class="codepink">,</span>"Maintenance"</span><span class="codepink"><span class="codestrong1">))</span></span></p>&#13;
<p class="indent">Each item inside the <span class="literal">either</span> hook is the name of a passage in the game. The <span class="literal">either</span> hook is nested inside a <span class="literal">display</span> hook, which allows you to show the contents of one passage inside another. (It’s more useful than you might realize!)</p>&#13;
<h4 class="h4" id="lev39">Using display to Avoid Retyping Text</h4>&#13;
<p class="noindent">The <span class="literal">display</span> hook can be very handy because it lets you show any passage inside any other passage. For example, say you want to display the same text (like a description of a gorgeous sunset) in a few different places. The player can see the sunset from any room in the house: through the bedroom windows or out the window in the front door. Instead of writing the description of the sunset twice, you write it once, save it as the <em>Sunset</em> passage, and then use <span class="literal">display</span> to show that passage in several rooms.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_45"/><img alt="image" src="../images/f069-01.jpg"/></div>&#13;
<p class="indent">As another example, when the player talks to Archibald in <em>Ghost Burgers</em>, they’ll see the same list of questions no matter which order they ask them in. After they ask a question, Archibald will answer it. Then the player can ask another one. We show the same list of questions at the end of every one of Archibald’s answers, so the player can pick the next one.</p>&#13;
<p class="indent">We <em>could</em> retype the five questions in every passage, but if we later decide to change one of the questions or add a new one, we’d have to make the same change five times. To avoid this, we just put the questions in their own passage and use <span class="literal">display</span> to show that passage whenever Archibald is done talking, like so:</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">display:</span> <span class="codegreen">"Archibald-Questions"</span><span class="codestrong1">)</span></span></p>&#13;
<p class="indent">Now the contents of the displayed passage should appear wherever you put the <span class="literal">display</span> hook. The text of the <em>Archibald-Questions</em> passage looks like this:</p>&#13;
<p class="programs"><span class="codeitalic1">//You say://</span><br/><span class="codelghtblue">[["</span><span class="codegreen">What are you reading?</span><span class="codelghtblue">"-&gt;Archibald-Reading]]</span><br/><span class="codelghtblue">[["</span><span class="codegreen">What's it like being dead?</span><span class="codelghtblue">"-&gt;Archibald-Dead]]</span><br/><span class="codelghtblue">[["</span><span class="codegreen">How did you die?"</span><span class="codelghtblue">-&gt;Archibald-How]]</span><br/><span class="codelghtblue">[["</span><span class="codegreen">Are there any other ghosts here?</span><span class="codelghtblue">"-&gt;Archibald-Others]]</span><br/><span class="codelghtblue">[["</span><span class="codegreen">Goodbye for now.</span><span class="codelghtblue">"-&gt;Archibald-Bye]]</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_46"/>We’re writing these questions in their own passage called <em>Archibald-Questions.</em> Then we’re using a hook to display the text from that passage inside another passage.</p>&#13;
<p class="indent">The following is what the passage looks like in the editor after the player asks Archibald how he died:</p>&#13;
<p class="programs">"I lost a staring contest against my rival," he says<br/>seriously. "It was a very intense staring contest."<br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">display:</span> <span class="codegreen">"Archibald-Questions"</span><span class="codestrong1">)</span></span></p>&#13;
<p class="indent">And this is what the player sees.</p>&#13;
<div class="image"><img alt="image" src="../images/f070-01.jpg"/></div>&#13;
<p class="indent">The <span class="literal">display</span> hook lets you reuse passages in more than one place so you don’t have to do a lot of retyping.</p>&#13;
<h3 class="h3" id="lev40">Using Variables to Store Information</h3>&#13;
<p class="noindent">Some rooms in <em>Ghost Burgers</em> appear differently the second time a player visits them. One reason is that I use <span class="literal">display</span> to skip some of the messages in <em>Ghost Burgers</em> the second time a player visits a room. For example, the first time the player climbs the ghost stepladder, they see the <em>Climbing the Stepladder</em> passage and a message saying how weird <span epub:type="pagebreak" id="page_47"/>it is that a stepladder could be a ghost. But the next time they use the stepladder, I just use <span class="literal">display</span> on the <em>Attic</em> passage so the player can skip straight to the attic.</p>&#13;
<p class="indent">Whether or not the player sees the <em>Climbing the Stepladder</em> passage depends on whether or not the player has already climbed the stepladder. To determine whether the player has already used the stepladder, you can use a <em>variable</em> to store information about the game play. Variables <em>vary</em>, which means the information they store can change.</p>&#13;
<p class="indent"><em>Ghost Burgers</em> uses 12 different variables. One variable keeps track of whether the front door to the mansion is locked. Other variables track whether Archibald has introduced himself to the player, whether the player is carrying the ghost burger, whether they’ve cleared away the cobwebs in the attic, whether their flashlight is on, and so on.</p>&#13;
<p class="indent">Let's look at the flashlight variable. The first time the player enters the mansion, they see a couple of sentences about turning on their flashlight.</p>&#13;
<div class="image"><img alt="image" src="../images/f071-01.jpg"/></div>&#13;
<p class="indent">But clearly they shouldn’t see this message every time they walk through the foyer, because after the player has entered the mansion, we can assume their flashlight is still on. That’s why I use the variable <span class="literal">$flashlight_on</span> to help Twine remember that the player’s flashlight is on. In <span epub:type="pagebreak" id="page_48"/>Twine, variable names always start with a dollar sign (<span class="literal">$</span>), but you can include as many as you want for free.</p>&#13;
<h4 class="h4" id="lev41">Boolean Variables</h4>&#13;
<p class="noindent">There are several different variable types. For example, <span class="literal">$flashlight_on</span> is a <em>Boolean</em> type. (It’s named after a mathematician named George Boole.) A Boolean variable has a value of either <span class="literal">true</span> or <span class="literal">false</span>, like the switch on a flashlight. If <span class="literal">$flashlight_on</span> is <span class="literal">true</span>, the flashlight is on. If <span class="literal">$flashlight_on</span> is <span class="literal">false</span>, the flashlight is off.</p>&#13;
<p class="indent">After you create a Boolean variable, you can use Twine hooks to check your variables and display different text depending on the variable’s value or condition. For example, when the player enters the foyer and turns on their flashlight, they shouldn’t see a message about turning it on again. So, I wrote a hook to display a different message depending on the condition of the flashlight—whether it’s on or off. This is called a <em>conditional</em> statement because different conditions determine which message is shown.</p>&#13;
<p class="indent">Conditional statements use two major hooks: <span class="literal">set</span> and <span class="literal">if</span>. You use <span class="literal">set</span> to set a variable to a value. For example, to turn on the flashlight, you set the <span class="literal">$flashlight_on</span> variable to <span class="literal">true:</span></p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$flashlight_on</span> to <span class="codegrey">true</span><span class="codestrong1">)</span></span></p>&#13;
<p class="indent">Then you can use <span class="literal">if</span> to check the variable’s value.</p>&#13;
<div class="image"><img alt="image" src="../images/f072-01.jpg"/></div>&#13;
<h4 class="h4" id="lev42"><span epub:type="pagebreak" id="page_49"/>Using if to Check a Variable’s Value</h4>&#13;
<p class="noindent">In <em>Ghost Burgers</em>, we use variables to track whether the front door to the mansion is locked (<span class="literal">true</span> for yes, <span class="literal">false</span> for no), whether the player is carrying a hamburger (<span class="literal">true</span> for hamburger, <span class="literal">false</span> for no hamburger), or whether the player has turned on their flashlight.</p>&#13;
<h5 class="h5">Checking Whether the Flashlight Is On</h5>&#13;
<p class="noindent">To see if the flashlight is on, you can use <span class="literal">if</span> to check whether the <span class="literal">$flashlight_on</span> variable is <span class="literal">true</span> or <span class="literal">false:</span></p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span></span> <span class="programblue">$flashlight_on</span> <span class="codepink">is</span> <span class="codegrey">true</span><span class="codestrong1"><span class="codepink">)</span></span></p>&#13;
<p class="indent">The following is the full code for the <em>Foyer</em> passage. It uses <span class="literal">set</span> and <span class="literal">if</span> to keep track of whether or not the flashlight is on.</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span></span> <span class="programblue">$flashlight_on</span> <span class="codepink">is</span> <span class="codegrey">false</span><span class="codestrong1"><span class="codepink">)</span></span><span class="codestrong1">[</span>It's pitch dark in here! You<br/>almost make up your mind to quit and leave this scary house<br/>behind forever - when you remember the flashlight in your<br/>pocket. Oh yeah.<br/>You turn it on. <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$flashlight_on</span> to <span class="codegrey">true</span><span class="codestrong1">)</span></span><br/><span class="codestrong1">]</span>You are in a creepy cobwebbed FOYER. A huge doorway leads<br/>left to a <span class="codelghtblue">[[</span>DINING ROOM<span class="codelghtblue">-&gt;Dining-Room]]</span>, while a much smaller<br/>one leads right to what looks like a <span class="codelghtblue">[[</span>LIBRARY<span class="codelghtblue">-&gt;Library]]</span>.<br/>Moonlight streaks through the open door, leading back outside<br/>to the <span class="codelghtblue">[[</span>FRONT STOOP<span class="codelghtblue">-&gt;Doorstep]]</span>.</p>&#13;
<p class="indent">First, we use a Boolean to check whether the flashlight is off using <span class="literal">(if: $flashlight_on is false)</span>. If it’s <span class="literal">false</span>, the <span class="literal">if</span> tag displays everything in the square brackets after it—the part where the player turns their flashlight on.</p>&#13;
<p class="indent">Then we use the conditional <span class="literal">set</span> to change the <span class="literal">$flashlight_on</span> variable from <span class="literal">false</span> to <span class="literal">true</span> using <span class="literal">(set: $flashlight_on to true)</span>, which keeps track of having shown that message. So the next time the player comes through the room, the message won’t display again, because <span class="literal">(if: $flashlight is false)</span> will no longer be true.</p>&#13;
<h5 class="h5"><span epub:type="pagebreak" id="page_50"/>Triggering Different Messages Based on Flashlight Condition</h5>&#13;
<p class="noindent">But let’s say you want to show one message when the flashlight is on and a different message when it’s off. To do so, you can use <span class="literal">else</span>:</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$flashlight_on</span> is <span class="codegrey">true</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>Thank goodness your flashlight is<br/>on!<span class="codestrong1">]</span><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">else:</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>It's pitch dark! If only your flashlight was on!<span class="codestrong1">]</span></p>&#13;
<p class="indent">To use <span class="literal">else</span>, just add <span class="literal">(else:)</span> and text in square brackets to the end of an <span class="literal">if</span> statement. If the <span class="literal">if</span> statement isn’t <span class="literal">true</span>, the text inside the <span class="literal">else</span> statement displays.</p>&#13;
<p class="indent">Note that both hooks are on the same line because Twine detects <em>whitespace</em>—the empty spaces between paragraphs. In fact, sometimes you can accidentally introduce empty spaces into your story by pressing <span class="smallcaps">enter</span> in the middle of your hooks. One solution to avoid accidentally adding whitespace is to use braces <span class="literal">{}</span> to tell Twine to display everything between the braces on one line, like this:</p>&#13;
<p class="programs"><span class="programblue">{</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$flashlight_on</span> is <span class="codegrey">false</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>It's pitch dark in here!<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">else:</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>It would be pitch dark without your flashlight on!<span class="codestrong1">]</span><br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">Now, everything between <span class="literal">{</span> and <span class="literal">}</span> will display in your story as though it’s all on one line, even though it spans several lines of code. This syntax is particularly useful when you’re writing lots of hooks in your passages, because you can use whitespace to make the hooks easier for you to read without displaying the whitespace to the player.</p>&#13;
<h5 class="h5">Making Ghosts Appear Conditionally</h5>&#13;
<p class="noindent">In <em>Ghost Burgers</em>, we use <span class="literal">if</span> and <span class="literal">else</span> to determine whether ghosts should appear as shown in the Library code:</p>&#13;
<p class="programs">You're standing in what appears to be a small LIBRARY.<br/>The bookshelves are filled with old, old, yellowed<br/><span class="codelghtblue">[[</span>books<span class="codelghtblue">-&gt;Read-Book]]</span>.<br/>A door in the back of the room leads to some kind of<br/>[[PARLOR-&gt;Parlor]], and a door to the left leads back to the<br/><span class="codelghtblue">[[</span>FOYER<span class="codelghtblue">-&gt;Foyer]]</span>.<br/><span epub:type="pagebreak" id="page_51"/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$ghosts_visible</span> is <span class="codegrey">false</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>It seems like there's a<br/>trapdoor in the ceiling, too! But it's way too high to<br/>reach.<span class="codestrong1">]</span><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">else:</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>A glowing blue <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">text-style:</span> <span class="codegreen">"blur"</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>stepladder<span class="codestrong1">]</span> <br/>is standing in the middle of the library. It leads up to the<br/><span class="codelghtblue">[[</span>TRAPDOOR<span class="codelghtblue">-&gt;Climb-Ladder]]</span> in the ceiling.<span class="codestrong1">]</span></p>&#13;
<p class="indent">If ghosts aren’t visible <span class="literal">(if: $ghosts_visible is false)</span>, the player only sees the trapdoor. If ghosts are visible, we use <span class="literal">(else:)</span> to display the ghost ladder leading up to the trapdoor so the player can climb it.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep">A link can be part of a hook, too. Just make sure you use two square brackets on either side of a link or one on either side of the hook.</p>&#13;
</div>&#13;
<p class="indent">Now you know how to show items based on certain conditions.</p>&#13;
<h4 class="h4" id="lev43">Integer Variables</h4>&#13;
<p class="noindent">To keep track of more than two items or events, you can use an integer variable. An <em>integer</em> is a whole number that isn’t a fraction, such as 1, 10, 33, 5000, or 0.</p>&#13;
<p class="indent">For example, in <em>Ghost Burgers</em>, the player can talk to their friend Astrid if they don’t know what to do next or can’t figure out something, and Astrid will give them a hint. The following figure shows an example.</p>&#13;
<div class="image"><img alt="image" src="../images/f075-01.jpg"/></div>&#13;
<p class="indent">If the player talks to Astrid when they’re looking for a burger, she’ll give them one piece of advice. If the player already has the burger and hasn’t fed it to the Burger Ghost, she’ll give them a different piece of advice. In fact, the game has eight different pieces of advice. Astrid also <span epub:type="pagebreak" id="page_52"/>has something special to say the first time the player consults her after turning on the ghost switch.</p>&#13;
<p class="indent">We use an integer variable to keep track of which piece of advice Astrid should give the player. Each number in the variable matches a different piece of advice. Here’s a sample of what that code looks like:</p>&#13;
<p class="programs"><span class="codeitalic1"><span class="programblue">{</span></span><br/><span class="codepink"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$advice</span> is <span class="codeorange">0</span><span class="codestrong1">)</span></span></span><span class="codestrong1">[</span>"Oh, go on, it's not <span class="codeitalic1">*that*</span> scary. Just<br/>try the door."<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$advice</span> is <span class="codeorange">1</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>"Door's locked, huh? Sometimes people<br/>leave a spare key under their doormats. They used to, anyway.<br/>It's a pretty old house."<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$advice</span> is <span class="codeorange">2</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>"Try looking around the mansion! There's<br/><span class="codeitalic1">*got*</span> to be something ghostly in there!"<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$advice</span> is <span class="codeorange">3</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>"Wait, you found a cool glowing switch and<br/>you <span class="codeitalic1">*didn't try switching it on?*</span> What's the worst that could<br/>happen?"<span class="codestrong1">]</span><br/><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">if:</span> <span class="programblue">$advice</span> is <span class="codeorange">4</span><span class="codestrong1">)</span></span><span class="codestrong1">[</span>"Did you try looking around the attic?<br/>Attics in creepy old houses are <span class="codeitalic1">*always*</span> haunted."<span class="codestrong1">]</span><br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">The integer variable <span class="literal">$advice</span> starts at 0. When the player discovers that the door is locked, the game sets <span class="literal">$advice</span> to 1. When the player unlocks the door, the game sets <span class="literal">$advice</span> to 2. If the player finds the ghost switch but doesn’t switch it on, <span class="literal">$advice</span> is set to 3. When the player flips the switch, <span class="literal">$advice</span> is set to 4. Whenever the player talks to Astrid, the game checks all possible numbers for the <span class="literal">$advice</span> variable and shows the message that matches the number that <span class="literal">$advice</span> is currently set to.</p>&#13;
<p class="indent">You can set your variables to whatever you want them to start with in the first passage of your game; however, make sure the player can’t return to this passage, or the game will reset all those variables to their starting positions! I set up all my variables once in the starting passage of my game. Think of it like a title screen in a movie: once the player clicks <strong>Start</strong>, they’ll never come back to this passage.</p>&#13;
<p class="programs"><span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$advice</span> to <span class="codeorange">0</span><span class="codestrong1">)</span></span></p>&#13;
<p class="indent">By putting this line of code in my starting passage, I make sure that the <span class="literal">$advice</span> variable is set to <span class="literal">0</span> when a player starts the game.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_53"/>Ghost Burgers has 12 variables in total. Here’s what the entire first passage in <em>Ghost Burgers</em> looks like. I put braces around all the variables because otherwise Twine would print an entire blank line for each one:</p>&#13;
<p class="programs"><span class="codeyellow">=&gt;&lt;=</span><br/>&#13;
<span class="codeitalic1"><span class="programblue">{</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$advice</span> to <span class="codeorange">0</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$door_locked</span> to <span class="codegrey">true</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$found_key</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$flashlight_on</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$ghosts_visible</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$climbed_ladder</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$ghost_lecture</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$archibald_intro</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$checked_fridge</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$got_china</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$got_burger</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
    <span class="codepink"><span class="codestrong1">(</span><span class="codeitalic1">set:</span> <span class="programblue">$cleared_cobwebs</span> to <span class="codegrey">false</span><span class="codestrong1">)</span></span><br/>&#13;
<span class="codeitalic1"><span class="programblue">}</span></span><span class="codelghtblue">&lt;img src="<span class="codelghtblue">http://auntiepixelante.com/ghostburgers/<br/>ghost_burgers.png</span>"&gt;</span><br/>&#13;
<span class="codelghtblue">[[</span>START<span class="codelghtblue">-&gt;Astrid-1]]</span></p>&#13;
<p class="indent">When the player starts the game, the door should be locked, the ladder should be unclimbed, the mysterious burger not yet collected. Because the player hasn’t done anything at the beginning of the game, most of the variables start as <em>false</em>. When the player clicks <strong>START</strong>, all the variables should be reset, and the player should be able to play a new game!</p>&#13;
<h3 class="h3" id="lev44">Editing Your Story’s Stylesheet</h3>&#13;
<p class="noindent">Little changes in your story’s appearance can have a big effect on how a player feels while playing your game. Does <em>Ghost Burgers</em> feel spookier than <em>Interview with a Cat!</em> because it’s on a black background (representing nighttime) instead of a bright white one? Do the blurry words in the story feel ghostlier than the solid words around them? Experiment with <span epub:type="pagebreak" id="page_54"/>changing the appearance of your story and see if its new style changes your perspective. Your story can be as stylish as you want it to be.</p>&#13;
<p class="indent">Most websites use <em>Cascading Style Sheets (CSS)</em> to determine what the site looks like. Twine also uses CSS, and it’s easy to change Twine’s stylesheet using CSS. A <em>stylesheet</em> in Twine describes how elements on a web page should look. Twine comes with its own stylesheet that describes how Twine games should look, but you could change it to make the text blue and the background pink.</p>&#13;
<p class="indent">To find your story’s stylesheet, click the name of your story (below the blue story grid), and then click <strong>Edit Story Stylesheet</strong>, as shown here.</p>&#13;
<div class="image"><img alt="image" src="../images/f078-01.jpg"/></div>&#13;
<p class="indent">The <em>Ghost Burgers</em> stylesheet looks like this.</p>&#13;
<div class="image"><img alt="image" src="../images/f078-02.jpg"/></div>&#13;
<p class="indent">This is where you change your story’s appearance. If you don’t make any changes, Twine will just use the existing stylesheet. Let’s look at how to make some changes.</p>&#13;
<h4 class="h4" id="lev45"><span epub:type="pagebreak" id="page_55"/>Changing the Background Color</h4>&#13;
<p class="noindent">When you make a new Twine game, its stylesheet is blank. The first change I like to make is to modify the background color. Add this code to your Twine game’s stylesheet:</p>&#13;
<p class="programs">body, tw-story<br/><span class="codeitalic1"><span class="programblue">{</span></span><br/>  background-color: black;<br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">This code sets the page’s background color to black. The <span class="literal">body</span> refers to the web page itself, and <span class="literal">tw-story</span> is short for “Twine story” and affects how your story looks. Everything between the braces, <span class="literal">{ }</span>, describes your Twine game’s <span class="literal">body</span>.</p>&#13;
<p class="indent">When you copy this code into your story’s stylesheet, make sure you enter everything precisely as you see it here. CSS needs to use this specific format, or it won’t work. The background in Twine stories is black by default, but you could change it to any color you want: <span class="literal">blue</span>, <span class="literal">green</span>, <span class="literal">purple</span>, <span class="literal">hotpink</span>, or <span class="literal">indigo</span>. (You’ll find a more extensive list of HTML color names at <a href="http://html-color-names.com/color-chart.php/"><em>http://html-color-names.com/color-chart.php/</em></a>). Test-play your story to see the new background color.</p>&#13;
<div class="image"><img alt="image" src="../images/f079-01.jpg"/></div>&#13;
<h4 class="h4" id="lev46"><span epub:type="pagebreak" id="page_56"/>Stylizing Your Text</h4>&#13;
<p class="noindent">Next, I changed the passage color in the <em>Ghost Burgers</em> stylesheet to white using this code:</p>&#13;
<p class="programs">tw-passage<br/><span class="codeitalic1"><span class="programblue">{</span></span><br/>      color: white;<br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">The code <span class="literal">tw-passage</span> is short for “Twine passage,” and it contains information about how your story’s passages will look.</p>&#13;
<p class="indent">You can change more than just the color. For example, you can change the font family and size by adding something like this:</p>&#13;
<p class="programs">tw-passage<br/><span class="codeitalic1"><span class="programblue">{</span></span><br/>      font-family: Courier New;<br/>      font-size: 40px;<br/>      color: hotpink;<br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">This code changes the font to Courier New, the font size to 40, and the color of all the text in all the passages to hot pink, which looks like this.</p>&#13;
<div class="image"><img alt="image" src="../images/f080-01.jpg"/></div>&#13;
<h4 class="h4" id="lev47">Adding Fancy Touches</h4>&#13;
<p class="noindent">You can also change the width of your text display, which is like an invisible box that contains your story’s words, and add a fancy border. Try adding the following to <span class="literal">tw-passage</span>:</p>&#13;
<p class="programs">  width: 500px;<br/>  border: dashed blue;</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_57"/> Your display should show a dashed blue border 500 pixels wide.</p>&#13;
<div class="image"><img alt="image" src="../images/f081-01.jpg"/></div>&#13;
<div class="note">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>Pixels</em> are the tiny dots that make up the image on your computer screen. The word <em>pixel</em> comes from picture elements, and it’s abbreviated as px (for example, 500px means 500 pixels).</p>&#13;
</div>&#13;
<p class="indent">You can change the color of the links in your game, too. For example, if you wanted to make your links crimson, you would enter this code</p>&#13;
<p class="programs">tw-link<br/><span class="codeitalic1"><span class="programblue">{</span></span><br/>    color: crimson;<br/><span class="codeitalic1"><span class="programblue">}</span></span></p>&#13;
<p class="indent">To learn more about what you can change on the stylesheet, see the Twine <strong>Help</strong> page. (Click <strong>Help</strong> on the Twine Stories page, and then click <strong>Change the Font, Colors, or Appearance</strong>.)</p>&#13;
<h3 class="h3" id="lev48">Opening Ghost Burgers’ Source Files</h3>&#13;
<p class="noindent">If you’re not sure how I created some of the features in this game, you can look at the game’s <em>source code</em>. To do that, open <em>Ghost Burgers</em> in your web browser by navigating to <a href="https://nostarch.com/twinegames/"><em>https://nostarch.com/twinegames/</em></a>, right-click on the background of the web page (or <span class="smallcaps">Control</span>-click if you’re using a Mac), and click <strong>Save as</strong>. Make sure you right-click the actual page and then save it to your computer. Then, on your Twine Stories <span epub:type="pagebreak" id="page_58"/>page at <a href="http://twinery.org/2/#!/stories/"><em>http://twinery.org/2/#!/stories/</em></a>, click <strong>Import From File</strong> to open the <em>Ghost Burgers.html</em> file you saved in Twine.</p>&#13;
<div class="image"><img alt="image" src="../images/f082-01.jpg"/></div>&#13;
<p class="indent">Now you can look at the guts of <em>Ghost Burgers</em>, as shown here.</p>&#13;
<div class="image"><img alt="image" src="../images/f082-02.jpg"/></div>&#13;
<p class="indent">Double-click the passages to see how I made them work and which hooks I used. You can do this for any of the example games in this book. In fact, you can do this for most Twine games. Just remember that although it’s perfectly okay to look inside someone’s Twine game to see how they made something, it’s not okay to copy someone’s work without asking them! Be respectful when you’re having a look-see at other peoples’ creations!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_59"/>As you dig through the <em>Ghost Burgers</em> code, you’ll find a few techniques I haven’t explained, like how I made the cobwebs in the attic. I made those using the <span class="literal">Click-replace</span> hook and named hooks. A <em>named hook</em> is just a name that you give to a specific hook so <em>another</em> hook can do something to it. For example, clicking a link at the bottom of the page can change a piece of text near the top of the page. Look inside the <em>Attic</em> passage and see if you can figure out how they work. (You’ll find information on named hooks and all other hooks in Twine at <em><a href="http://twine2.neocities.org/">http://twine2.neocities.org/</a>)</em>.</p>&#13;
<p class="indent">Don’t be afraid to try hooks in your own stories!</p>&#13;
<h3 class="h3" id="lev49">What You Learned</h3>&#13;
<p class="noindent">Now you know how to make more sophisticated Twine games. You can keep track of what the player has read so that you can change what the player sees, and you know how to change your story’s appearance. You’re a programmer now—congratulations! From now on, your Twine games can be as simple or complicated as you want them to be.</p>&#13;
<p class="indent">In <a href="ch04.xhtml">Chapter 4</a>, we’ll work with more advanced techniques. If the information is more complicated than you’re comfortable with, feel free to skip to the game challenges in <a href="ch05.xhtml">Chapter 5</a>! Programming is not for everyone, and that’s fine!<span epub:type="pagebreak" id="page_60"/></p>&#13;
</body></html>