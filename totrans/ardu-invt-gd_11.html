<html><head></head><body>
<h2 class="h2" id="ch10"><span epub:type="pagebreak" id="page_276"/><span class="num">10</span> Tiny Electric Piano</h2>&#13;
<p class="noindent1"><span epub:type="pagebreak" id="page_277"/><span class="red">In this project, you’ll use a special touch sensor and a piezo buzzer to create an Arduino piano (</span><a class="red" href="ch10.xhtml#ch10fig01">Figure 10-1</a><span class="red">). Regardless of whether you have any musical talent, this will be a fun project!</span></p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_278"/><a id="ch10fig01"/><strong>FIGURE 10-1:</strong> A completed Tiny Electric Piano</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_1.jpg"/></div>&#13;
<h3 class="h3" id="ch10lev1sec1"><strong>MATERIALS TO GATHER</strong></h3>&#13;
<p class="noindent">There are only a couple new parts in this project. One is the <em>soft potentiometer (SoftPot)</em>, which will act as your keyboard, and the other is the <em>piezo buzzer</em>, which will provide the sound. The supplies you’ll need are shown in <a href="ch10.xhtml#ch10fig02">Figures 10-2</a> and <a href="ch10.xhtml#ch10fig03">10-3</a>. Grab your materials, and let’s get started.</p>&#13;
<h4 class="h4" id="ch10lev2sec1"><strong>Electronic Parts</strong></h4>&#13;
<p class="bull">• One SparkFun RedBoard (DEV-13975), Arduino Uno (DEV-11021), or any other Arduino-compatible board</p>&#13;
<p class="bull">• One USB Mini-B cable (CAB-11301 or your board’s USB cable)</p>&#13;
<p class="bull">• One solderless breadboard (PRT-12002)</p>&#13;
<p class="bull">• One 10 kΩ resistor (COM-08374, or COM-11508 for a pack of 20)</p>&#13;
<p class="bull">• One 50 mm SoftPot membrane potentiometer (SEN-08680)</p>&#13;
<p class="bull">• One piezo buzzer (COM-07950)</p>&#13;
<p class="bull">• Male-to-male jumper wires (PRT-11026)</p>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>All of the parts used in this project are standard in the SparkFun Inventor’s Kit.</em></p>&#13;
</div>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_279"/><a id="ch10fig02"/><strong>FIGURE 10-2:</strong> Components for the Tiny Electric Piano</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_2.jpg"/></div>&#13;
<h4 class="h4" id="ch10lev2sec2"><strong>Other Materials and Tools</strong></h4>&#13;
<p class="bull">• Pencil</p>&#13;
<p class="bull">• Craft knife</p>&#13;
<p class="bull">• Metal ruler</p>&#13;
<p class="bull">• (Optional) Soldering iron</p>&#13;
<p class="bull">• Masking tape</p>&#13;
<p class="bull">• Cardboard or cardstock (about 4 × 5 inches) or a small cardboard box</p>&#13;
<p class="figuret"><a id="ch10fig03"/><strong>FIGURE 10-3:</strong> Additional supplies</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_3.jpg"/></div>&#13;
<h3 class="h3" id="ch10lev1sec2"><span epub:type="pagebreak" id="page_280"/><strong>NEW COMPONENTS</strong></h3>&#13;
<p class="noindent">As we mentioned, this project will introduce just two new parts. The first is a SoftPot touch sensor: a special kind of potentiometer that is similar to the one used in <a href="ch06.xhtml#ch06">Project 6</a> but reacts to pressure. The second new part is a piezo buzzer. Let’s take a look at these two parts in more detail.</p>&#13;
<h4 class="h4" id="ch10lev2sec3"><strong>The SoftPot Membrane Potentiometer</strong></h4>&#13;
<p class="noindent">In <a href="ch06.xhtml#ch06">Project 6</a>, we introduced a simple potentiometer with a knob that you could turn to control the Balance Beam. The SoftPot, shown in <a href="ch10.xhtml#ch10fig04">Figure 10-4</a>, works similarly but reacts to pressure instead of knob rotation.</p>&#13;
<p class="figuret"><a id="ch10fig04"/><strong>FIGURE 10-4:</strong> A 50 mm SoftPot</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_4.jpg"/></div>&#13;
<p class="indent">The SoftPot is a thin and flexible sensor that can detect where along its length pressure is applied. When you press down, the resistance between the middle pin and the closest end pin varies between 0 Ω and 10 kΩ, depending on how much pressure is detected. The SoftPot sensor has a thin membrane that separates the center pin connection from the outer ones. This sensor is very accurate and has a nearly infinite resolution. In industrial applications, the SoftPot is often used to identify the position of sliding parts, robot arms, and other components that make precision movements.</p>&#13;
<p class="indent">In this project, you’re going to use this sensor as your piano keyboard. You’ll divide the length of the strip into eight sections or “keys” that you can use to play various notes. The SoftPot is effectively the same as a knob potentiometer used in earlier projects. In schematics and circuit diagrams, you may recognize the symbol as pictured in <a href="ch10.xhtml#ch10fig05">Figure 10-5</a>.</p>&#13;
<p class="figuret"><a id="ch10fig05"/><strong>FIGURE 10-5:</strong> The schematic diagram for the SoftPot is identical to that of the regular potentiometer.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_5.jpg"/></div>&#13;
<h4 class="h4" id="ch10lev2sec4"><span epub:type="pagebreak" id="page_281"/><strong>The Piezo Buzzer</strong></h4>&#13;
<p class="noindent">The piezo buzzer (<a href="ch10.xhtml#ch10fig06">Figure 10-6</a>) is similar to a speaker and produces an audible click when you apply a voltage to the two leads; these clicks happen very fast, several hundreds or even thousands of times per second, and their frequency creates a tone. Inside a typical piezo buzzer is a special crystal called a <em>piezo element</em> that deforms when voltage is applied. The crystal is connected to a round metal disc, and when the crystal deforms, the disc vibrates the air inside a small cylinder, producing the clicking sound.</p>&#13;
<p class="figuret"><a id="ch10fig06"/><strong>FIGURE 10-6:</strong> Piezo buzzer</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_6.jpg"/></div>&#13;
<div class="noter">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>The buzzer that’s included in the SparkFun Inventor’s Kit actually uses a small magnetic coil instead of a piezo element, but it works the same. We still refer to it as a piezo buzzer.</em></p>&#13;
</div>&#13;
<p class="indent">You’ve already seen how you can blink an LED at various rates with the Arduino. Now, if you “blink” the buzzer at a rate of hundreds of times per second, we can convert these clicks into tones! There are several different electrical symbols used to represent buzzers, speakers, and similar elements. The symbol we’ll use in this chapter is shown in <a href="ch10.xhtml#ch10fig07">Figure 10-7</a>.</p>&#13;
<p class="figuret"><a id="ch10fig07"/><strong>FIGURE 10-7:</strong> Electrical symbol for a piezo buzzer</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_7.jpg"/></div>&#13;
<h3 class="h3" id="ch10lev1sec3"><strong>BUILD THE CIRCUIT</strong></h3>&#13;
<p class="noindent">This circuit uses only two electronic elements: the buzzer and the SoftPot, shown in <a href="ch10.xhtml#ch10fig08">Figures 10-8</a> and <a href="ch10.xhtml#ch10fig09">10-9</a>. When inserting the buzzer into the breadboard, you may notice that the legs are slightly closer together than the holes of the board. Just gently bend the legs apart so that the pins line up with the holes and insert the buzzer. The legs should be three holes apart.</p>&#13;
<p class="indent">The SoftPot has three legs like the potentiometer you used in <a href="ch06.xhtml#ch06">Project 6</a>. But unlike a regular potentiometer, the SoftPot requires a <span epub:type="pagebreak" id="page_282"/>pull-down resistor to ensure that, when there is no input or pressure on the sensor, the SoftPot defaults to a nominal state of 0. This will prevent the buzzer from making noise when you aren’t pressing on the sensor.</p>&#13;
<p class="figuret"><a id="ch10fig08"/><strong>FIGURE 10-8:</strong> Schematic diagram of the Tiny Electric Piano circuit</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_8.jpg"/></div>&#13;
<p class="figuret"><a id="ch10fig09"/><strong>FIGURE 10-9:</strong> Prototype of the Tiny Electric Piano circuit on the breadboard</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_9.jpg"/></div>&#13;
<p class="indent">Assemble the circuit as shown in the diagram. The circuit is fairly simple. First, connect 5 V and GND to the power and ground rails on the left side of the breadboard. Next, add the buzzer roughly 10 rows down from the top of the breadboard. Connect one leg of the buzzer to pin 9 of the Arduino and the other leg of the buzzer to the ground rail. Then, insert the SoftPot near the bottom of the breadboard. Connect the top pin of the SoftPot to the 5 V power rail, the lower pin to the ground rail, and the middle pin to the analog input pin A0 on the Arduino. Remember that the SoftPot requires a pull-down resistor between the wiper pin (middle pin) and the ground rail. Finally, add a 10 kΩ resistor between the middle pin and the ground rail.</p>&#13;
<p class="indent">Once you have it built, it’s time to try a couple of code examples.</p>&#13;
<h3 class="h3" id="ch10lev1sec4"><span epub:type="pagebreak" id="page_283"/><strong>PROGRAM THE TINY ELECTRIC PIANO</strong></h3>&#13;
<p class="noindent">First, you’ll test the build by having the buzzer make noises and recognizable tones, and then you’ll map those noises and tones to the SoftPot. Once you know how to get your code making sounds, we’ll show you how to add functionality so that you can play up to eight distinct notes, like a small piano.</p>&#13;
<p class="indent">You’ve already seen that the Arduino can generate really fast pulses and react to split-second button presses. With your circuit wired up, you’ll use these capabilities to make some fun sounds and test the frequency response of the buzzer.</p>&#13;
<h4 class="h4" id="ch10lev2sec5"><strong>Test the Buzzer</strong></h4>&#13;
<p class="noindent">Arduino has a few commands that make playing notes really simple. There are two functions that control making sounds with Arduino: <span class="literal">tone()</span>, which tells the buzzer to play a frequency you specify, and <span class="literal">noTone()</span>, which tells the buzzer to stop the sound so you can control the length of the note. Here’s how you use these two functions.</p>&#13;
<div class="pre">&#13;
<p class="programs"><span class="ash">//creates a tone of <em>frequency</em> on <em>pin</em> for a <em>duration</em> in ms</span><br/><span class="orange">tone</span>(<em>pin</em>, <em>frequency</em>, <em>duration</em>);<br/><br/><span class="ash">//stops the playing of a tone on the given pin</span><br/><span class="orange">noTone</span>(<em>pin</em>);</p>&#13;
</div>&#13;
<p class="indent">The <span class="literal">tone()</span> function needs to be called with three parameters: the pin number the buzzer is connected to, a frequency you want to play, and the duration to play the note. When called, <span class="literal">tone()</span> creates a square wave at the frequency you provided on the defined pin for a specific duration. This square wave triggers the vibration of the disc inside the buzzer connected to this pin, creating a sound at that frequency. Once started, <span class="literal">tone()</span> continues for the duration specified or until you call either another <span class="literal">tone()</span> command with a different frequency or the <span class="literal">noTone()</span> command to stop the Arduino from playing.</p>&#13;
<p class="indent">Copy the code from <a href="ch10.xhtml#ch10ex01">Listing 10-1</a> into the Arduino IDE or download the sketch from <em><a href="https://www.nostarch.com/arduinoinventor/">https://www.nostarch.com/arduinoinventor/</a></em>. In this example, you’ll use the Serial Monitor to choose a frequency, and the buzzer will play that tone for half a second.</p>&#13;
<p class="ex-caption"><span epub:type="pagebreak" id="page_284"/><a id="ch10ex01"/><strong>LISTING 10-1:</strong> Serial tone test code</p>&#13;
<div class="pre">&#13;
<p class="programs">  <span class="ash">//Serial Tone Test Example</span><br/>  <span class="ash">//Upload this example and then open the Serial Monitor</span><br/>  <span class="green">int</span> freq;<br/>  <span class="green">void</span> <span class="green1">setup</span>()<br/>  {<br/><span class="ent">➊</span>   <span class="orange">pinMode</span>(9, <span class="green">OUTPUT</span>);<br/>    <span class="orange"><strong>Serial</strong></span>.<span class="orange">begin</span>(9600);<br/>    <span class="orange"><strong>Serial</strong></span>.<span class="orange">println</span>(<span class="blue1">"Type in a frequency to play."</span>);<br/>  }<br/><br/>  <span class="green">void</span> <span class="green1">loop</span>()<br/>  {<br/><span class="ent">➋</span>   if(<span class="orange"><strong>Serial</strong></span>.<span class="orange">available</span>() &gt; 0)  <span class="ash">//wait for a serial</span><br/>                                <span class="ash">//input string</span><br/>    {<br/><span class="ent">➌</span>    freq = <span class="orange"><strong>Serial</strong></span>.<span class="orange">parseInt</span>();  <span class="ash">//parse out integer value</span><br/>      <span class="orange"><strong>Serial</strong></span>.<span class="orange">print</span>(<span class="blue1">"Playing note: "</span>);  <span class="ash">//user feedback</span><br/>      <span class="orange"><strong>Serial</strong></span>.<span class="orange">println</span>(freq);<br/><span class="ent">➍</span>    <span class="orange">tone</span>(9, freq, 500);  <span class="ash">//play the note for 500 ms</span><br/><span class="ent">➎</span>    <span class="orange">delay</span>(500);  <span class="ash">//delay for the note duration</span><br/>    }<br/>    <span class="green1">else</span><br/>    {<br/>      <span class="orange">noTone</span>(9);<br/>    }<br/>  }</p>&#13;
</div>&#13;
<p class="indent">Let’s take a look at how this all works. In the <span class="literal">setup()</span>, the sketch sets the <span class="literal">pinMode</span> <span class="ent">➊</span> for the GPIO pin on the buzzer, initializes the serial communication on the Arduino, and prints a short message instructing the player on what to do.</p>&#13;
<p class="indent">Next, inside the <span class="literal">loop()</span>, the <span class="literal">if(Serial.available() &gt; 0)</span> statement <span class="ent">➋</span> checks for data sent over serial communication like so: <span class="literal">Serial.available()</span> returns the number of bytes received from the Serial Monitor, and the <span class="literal">if()</span> statement compares that value to zero; if the number of bytes is greater than zero, it means data was received, and the script reads the data <span class="ent">➌</span>. The <span class="literal">Serial.parseInt()</span> function converts the data into an integer, which is then stored in the variable <span class="literal">freq</span>.</p>&#13;
<p class="indent">The code plays the frequency stored in <span class="literal">freq</span> for 500 ms using the <span class="literal">tone()</span> function <span class="ent">➍</span> and then has a short <span class="literal">delay()</span> <span class="ent">➎</span>. The <span class="literal">delay()</span> ensures that the note plays for the full 500 ms before starting another note. The <span class="literal">tone()</span> command is a <em>nonblocking function</em>: it executes and then continues to the next instruction without waiting.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_285"/>After uploading this sketch to your device, open the Serial Monitor (<small>CTRL</small>-<small>SHIFT</small>-M or <strong>Tools <span class="ent">▸</span> Serial Monitor</strong>). Then, click the line-ending-character drop-down list (<a href="ch10.xhtml#ch10fig10">Figure 10-10</a>), and select <strong>No line ending</strong>. When you send data between digital devices, an invisible <em>end-of-line (EOL)</em> character is sometimes used to indicate the end of a message. The two most commonly used EOL characters are the <em>new line (NL)</em> and <em>carriage return (CR)</em>. While the character may appear to be invisible, to the Arduino this character still reads in as a value. Selecting this option makes sure that it doesn’t send any extra characters.</p>&#13;
<p class="indent">Now, in the box at the very top, you can type any number and press <small>ENTER</small>, and the buzzer will play that note for half a second (500 ms). The range of human hearing is about 20 Hz to 20,000 Hz, so play around with some different frequencies, but keep them within that range.</p>&#13;
<p class="figuret"><a id="ch10fig10"/><strong>FIGURE 10-10:</strong> Open the Serial Monitor, and change this option to <strong>No line ending</strong>.</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_10.jpg"/></div>&#13;
<p class="indent">The serial communication on the Arduino has a buffer 64 bytes long. A <em>buffer</em> is like a waiting line for the data as it goes into the device, and in this case it allows you to send several notes at a time using the Serial Monitor. For example, you can play the song “Twinkle, Twinkle, Little Star” by typing in the following numbers, separated by commas without spaces. The last comma is important, too. The <span class="literal">Serial.parseInt()</span> command looks for numeric characters that are separated by non-numeric characters like commas. The Arduino needs to see that last token (the final comma) to parse out the final note.</p>&#13;
<div class="pre">&#13;
<p class="programs">262,262,392,392,440,440,392,392,349,349,330,330,294,294,262,262,</p>&#13;
</div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_286"/>Make sure to omit the spaces here. Each character is equal to 1 byte of data, and if you try to send more than the maximum 64 bytes at a time, the last few pieces of data will get cut off.</p>&#13;
<p class="indent">Lastly, the buzzer is optimized at 2,047 Hz. You may notice that when you try this frequency the buzzer is very, <em>very</em> loud and can be annoying, so be warned: people around you may not appreciate the high-pitched tones that come out of this buzzer at 2,047 Hz!</p>&#13;
<h4 class="h4" id="ch10lev2sec6"><strong>Create Specific Notes</strong></h4>&#13;
<p class="noindent">If you want to try something more traditional, you can correlate actual musical notes to frequencies. Many instruments use a reference point of middle C, which has a frequency of about 262 Hz. <a href="ch10.xhtml#ch10tab01">Table 10-1</a> shows a short table of frequencies for an octave of the C major scale.</p>&#13;
<p class="tabcapt"><a id="ch10tab01"/><strong>TABLE 10-1:</strong> Notes and frequencies of the C major scale</p>&#13;
<table class="all">&#13;
<tr>&#13;
<td class="pink"><p class="center"><strong>NOTE</strong></p></td>&#13;
<td class="tablec"><p class="center"><strong>APPROXIMATE FREQUENCY</strong></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">C</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">262</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">D</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">294</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">E</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">330</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">F</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">349</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">G</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">392</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">A</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">440</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">B</span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">494</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink2"><p class="center"><span class="red1">C</span></p></td>&#13;
<td class="tablec1"><p class="center"><span class="red1">524</span></p></td>&#13;
</tr>&#13;
</table>&#13;
<p class="indent">Experiment and see if you can play a song. To start you off, “Twinkle, Twinkle, Little Star” begins with the notes CC, GG, AA, GG, FF, EE, DD, CC. You may notice that the sounds the Arduino makes aren’t the most melodic. This is because the Arduino can only turn the pin either <span class="literal">HIGH</span> (on) or <span class="literal">LOW</span> (off). This creates a square wave, which has a tinny pitch. There are some tricks you can do using capacitors to create a noise filter to soften this sound, but that’s a topic for another book!</p>&#13;
<h4 class="h4" id="ch10lev2sec7"><strong>Generate Sound with the SoftPot</strong></h4>&#13;
<p class="noindent">Making music with frequencies is fun, but typing them over and over gets really tedious. Instead, you can use the SoftPot as a sensor whose values will correspond to frequencies for the buzzer.</p>&#13;
<p class="indent">The SoftPot is wired up with a simple voltage divider so that a pressure on the length of the strip will be translated into a voltage <span epub:type="pagebreak" id="page_287"/>from 0 to 5 V. Remember that the Arduino can translate an analog voltage from 0 to 5 V to a value of <span class="literal">0</span> to <span class="literal">1023</span> using the <span class="literal">analogRead()</span> function. Using the simple sketch in <a href="ch10.xhtml#ch10ex02">Listing 10-2</a>, you can send frequencies to the buzzer by pressing the SoftPot. When the SoftPot is not pressed, the value defaults to <span class="literal">0</span> because of the pull-down resistor, so no sound is produced.</p>&#13;
<p class="indent">Start a new Arduino sketch, copy the code example from Listing 10-2, and upload it to your device.</p>&#13;
<p class="ex-caption"><a id="ch10ex02"/><strong>LISTING 10-2:</strong> Noisemaker example code</p>&#13;
<div class="pre">&#13;
<p class="programs">  <span class="ash">//Noisemaker Example</span><br/>  <span class="ash">//upload this example, open the Serial Monitor,</span><br/>  <span class="ash">//and then squeeze the SoftPot</span><br/><span class="ent">➊</span> <span class="green">int</span> sensorValue;<br/>  <span class="green">void</span> <span class="green1">setup</span>()<br/>  {<br/>    <span class="orange">pinMode</span>(9, OUTPUT);<br/>    <span class="orange"><strong>Serial</strong></span>.<span class="orange">begin</span>(9600);<br/>  }<br/><br/>  <span class="green">void</span> <span class="green1">loop</span>()<br/>  {<br/><span class="ent">➋</span>   sensorValue = <span class="orange">analogRead</span>(A0);<br/><span class="ent">➌</span>   <span class="orange">if</span> (sensorValue &gt; 0)    <span class="ash">//if there's a press on sensor,</span><br/>                            <span class="ash">//play note</span><br/>    {<br/><span class="ent">➍</span>    <span class="orange"><strong>Serial</strong></span>.<span class="orange">print</span>(<span class="blue1">"Raw sensor reading: "</span>);<br/>     <span class="orange"><strong>Serial</strong></span>.<span class="orange">println</span>(sensorValue);<br/><span class="ent">➎</span>    <span class="orange">tone</span>(9, sensorValue, <span class="ent">➏</span>50);<br/>     <span class="orange">delay</span>(<span class="ent">➐</span>50);<br/>    }<br/><span class="ent">➑</span>    <span class="green1">else</span><br/>    {<br/>      <span class="orange">noTone</span>(9);<br/>    }<br/>  }</p>&#13;
</div>&#13;
<p class="indent">Let’s take a look at what’s going on in this sketch. You again start by declaring a variable to store the raw sensor reading <span class="ent">➊</span>. In the loop, the <span class="literal">analogRead()</span> function reads the voltage on pin A0 <span class="ent">➋</span> and assigns this value to the variable <span class="literal">sensorValue</span>. This value will be 0 V when no pressure is applied. You use an <span class="literal">if()</span> statement <span class="ent">➌</span> to check if the input value is greater than <span class="literal">0</span>, and if it is, the sketch prints the raw sensor value <span class="ent">➍</span> and uses the <span class="literal">tone()</span> command <span class="ent">➎</span> to play the value stored in <span class="literal">sensorValue</span>. If the sketch is getting stuck playing a note, try changing the <span class="literal">0</span> in the <span class="literal">if()</span> statement to a larger number <span epub:type="pagebreak" id="page_288"/>like <span class="literal">10</span> or <span class="literal">20</span> <span class="ent">➌</span>. This is a technique called <em>setting a deadband range</em>. Some sensors don’t always go back to a zero value, so this deadband sets a range of values that the program can still consider to be zero. Each sensor may be slightly different.</p>&#13;
<p class="indent">Notice that in this example we changed the duration the <span class="literal">tone()</span> is played <span class="ent">➏</span> and the <span class="literal">delay()</span> <span class="ent">➐</span> to <span class="literal">50</span> ms. This will allow you to create faster changes in notes. Otherwise, you would only be able to play notes that were half a second long! Finally, you want to make sure that the Arduino only plays a tone when the SoftPot is pressed. To do this, you use the <span class="literal">else()</span> statement to detect when the SoftPot is not being pressed <span class="ent">➑</span> and the <span class="literal">noTone()</span> command to turn the buzzer off.</p>&#13;
<p class="indent">Now, instead of using a frequency sent from the Serial Monitor, the Arduino uses the raw sensor value from the SoftPot. To play around, simply squeeze the SoftPot between your thumb and index finger, applying pressure at different points along the sensor. As you slide your fingers up and down the SoftPot, you can generate tones from 1 Hz to 1,023 Hz. What do you hear? Does it sound like aliens are landing? Pretty cool—now you have your very own special effects generator! Can you play anything that resembles a song? If not, take a look at the next example.</p>&#13;
<h4 class="h4" id="ch10lev2sec8"><strong>Play a Song</strong></h4>&#13;
<p class="noindent">Now that you have a feel for how the Arduino can make sounds, it’s time to map the sensor readings of the SoftPot to real notes so you can make actual music. You’ll break the sensor up into eight distinct sections (or keys) and map these to an index that you can use to play notes.</p>&#13;
<p class="indent">Copy the sketch in <a href="ch10.xhtml#ch10ex03">Listing 10-3</a> into the Arduino IDE, and upload it to your device.</p>&#13;
<p class="ex-caption"><a id="ch10ex03"/><strong>LISTING 10-3:</strong> Tiny Electric Piano sketch</p>&#13;
<div class="pre">&#13;
<p class="programs">  <span class="ash">//Tiny Electric Piano Example Code</span><br/><span class="ent">➊</span> <span class="green">int</span> frequencies[] = {262, 294, 330, 349, 392, 440, 494, 524};<br/>  <span class="green">int</span> sensorValue;<br/><span class="ent">➋</span> byte note;<br/><br/>  <span class="green">void</span> <span class="green1">setup</span>()<br/>  {<br/>    <span class="orange">pinMode</span>(9, <span class="green">OUTPUT</span>);<br/>    <span class="orange"><strong>Serial</strong></span>.<span class="orange">begin</span>(9600);<br/>  }<br/><span epub:type="pagebreak" id="page_289"/><br/>  <span class="green">void</span> <span class="green1">loop</span>()<br/>  {<br/>    sensorValue = <span class="orange">analogRead</span>(A0);<br/>    <span class="green1">if</span> (sensorValue &gt; 0)   <span class="ash">//if it's a note, play it!</span><br/>    {<br/>      <span class="ash">//map the key pressed to a note</span><br/>    <span class="ent">➌</span> note = <span class="orange">map</span>(sensorValue, 0, 1023, 0, 8);<br/>    <span class="ent">➍</span> note = <span class="orange">constrain</span>(note, 0, 7);<br/>      <span class="orange"><strong>Serial</strong></span>.<span class="orange">print</span>(sensorValue);<br/>      <span class="orange"><strong>Serial</strong></span>.<span class="orange">print</span>(<span class="blue1">"\t"</span>);<br/>      <span class="orange"><strong>Serial</strong></span>.<span class="orange">println</span>(<span class="ent">➎</span>frequencies[note]);<br/>      <span class="orange">tone</span>(9, <span class="ent">➏</span>frequencies[note], 50);<br/>      <span class="orange">delay</span>(50);<br/>    }<br/>    <span class="green1">else</span><br/>    {<br/>      <span class="orange">noTone</span>(9);<br/>    }<br/>  }</p>&#13;
</div>&#13;
<p class="indent">Let’s look at the code. First, you declare a data structure referred to as an array. An <em>array</em> is a kind of variable that represents a list of values rather than just a single value. Arrays can be of any standard data type, including bytes, ints, longs, and floats, and you declare the data type before the array name.</p>&#13;
<p class="indent">Declaring an array is similar to declaring a variable except that the array name is followed by two square brackets, <span class="literal">[ ]</span>. When you initialize an array, you define the list inside two curly brackets, <span class="literal">{ }</span>, and use commas to separate each value:</p>&#13;
<div class="pre">&#13;
<p class="programs"><em>dataType arrayName</em>[] = {<em>val0</em>, <em>val1, val2, val3, val4</em>... };</p>&#13;
</div>&#13;
<p class="indent"><a href="ch10.xhtml#ch10ex03">Listing 10-3</a> declares an integer (<span class="literal">int</span>) array named <span class="literal">frequencies[]</span> that stores a list of eight values for the frequencies of the musical notes <span class="ent">➊</span>. You can access the values in the array using the index number of the value, placed between square brackets. The first value is referenced as <span class="literal">frequencies[0]</span>, the second is referenced as <span class="literal">frequencies[1]</span>, and so on. Notice, as usual, that the index starts at 0 rather than 1, as shown in <a href="ch10.xhtml#ch10fig11">Figure 10-11</a>.</p>&#13;
<p class="figuret"><a id="ch10fig11"/><strong>FIGURE 10-11:</strong> The <span class="literal">frequencies[]</span> array elements</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_11.jpg"/></div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_290"/>The sketch then declares an index variable named <span class="literal">note</span> <span class="ent">➋</span>. The array has only eight values, so you can declare this variable as a <span class="literal">byte</span> since it uses less memory space than an integer. Next, the sketch uses the <span class="literal">map()</span> function <span class="ent">➌</span> to translate the raw <span class="literal">sensorValue</span> reading in the range 0–1,023 to a 0–8 scale.</p>&#13;
<p class="indent">The <span class="literal">map()</span> function is a great tool for converting from one range of values to another. You pass it the input value, the range of the input, and the desired range, and it will scale your input value to the desired range, like so:</p>&#13;
<div class="pre">&#13;
<p class="programs"><span class="orange">map</span>(<em>inValue</em>, <em>inMin</em>, <em>inMax</em>, <em>outMin</em>, <em>outMax</em>);</p>&#13;
</div>&#13;
<p class="indent">The sketch assigns this scaled value to the variable <span class="literal">note</span>. This will be the index to reference the array. But while the <span class="literal">map()</span> function scales the 0–1,023 range to a range of 0–8, the <span class="literal">frequencies[]</span> array actually has only eight values and is indexed from 0 to 7.</p>&#13;
<p class="indent">We do this because <span class="literal">map()</span> rounds down when it scales from one range to another range, so to get eight equally spaced values, we actually need to give it nine values. Value 8 is produced only when the input is equal to 1,023. Because value 8 (the ninth value) is not a valid index for the array, we correct this using another command, <span class="literal">constrain()</span> <span class="ent">➍</span>. This function constrains the value to a range of 0 to 7. Any value that is below 0 is constrained to a minimum value of 0, and any value greater than 7 is constrained to a maximum value of 7. The <span class="literal">constrain()</span> function is often used in conjunction with <span class="literal">map()</span> to scale and limit a value.</p>&#13;
<p class="indent">The <span class="literal">constrain()</span> function is used like so:</p>&#13;
<div class="pre">&#13;
<p class="programs"><span class="orange">constrain</span>(<em>value</em>, <em>minValue</em>, <em>maxValue</em>);</p>&#13;
</div>&#13;
<p class="indent">Finally, the sketch prints the frequency of the current note being triggered to the Serial Monitor <span class="ent">➎</span> and uses the <span class="literal">tone()</span> function <span class="ent">➏</span> to play the note.</p>&#13;
<p class="indent">To test it out, press or squeeze the SoftPot. As you move your finger up and down the length of the sensor, you’ll hear the different notes. See what songs you can play.</p>&#13;
<p class="indent">Now, let’s turn this prototype into a finished piano!</p>&#13;
<h3 class="h3" id="ch10lev1sec5"><span epub:type="pagebreak" id="page_291"/><strong>BUILD THE PIANO</strong></h3>&#13;
<p class="noindent">To convert the prototype into a more functional piano, you just need to apply it to a flat surface and mark out the eight keys.</p>&#13;
<p class="indent">Unfortunately, the pins on this sensor are not long enough or thick enough to simply insert into the male-to-female jumper wires, so if you want to remove it from the breadboard, we suggest that you solder three male-to-male jumper wires from the Inventor’s Kit to the ends of the SoftPot, as shown in <a href="ch10.xhtml#ch10fig12">Figure 10-12</a>. Alternatively, you <em>can</em> use male-to-female jumpers, but you’ll need to crimp the ends using a set of needle-nose pliers. If you do this, insert the sensor pins into a set of male-to-female jumper wires and crush the plastic casing around the sensor pins. Make sure that the wires are in contact with the pins of the sensor.</p>&#13;
<p class="figuret"><a id="ch10fig12"/><strong>FIGURE 10-12:</strong> Soldering wires to the SoftPot</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_12.jpg"/></div>&#13;
<p class="indent">The SoftPot has adhesive backing designed to be placed flat on a hard surface, so with the wires attached, apply the sensor to any portable hard surface (<a href="ch10.xhtml#ch10fig13">Figure 10-13</a>), like a small piece of cardboard or even the breadboard holder itself.</p>&#13;
<p class="figuret"><a id="ch10fig13"/><strong>FIGURE 10-13:</strong> Options for mounting the SoftPot</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_13.jpg"/></div>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_292"/>The SoftPot sensor is 50 mm long (approximately 2 inches). You need to divide the length of the sensor into eight keys, which means each key should be roughly a quarter inch wide. Using a piece of masking tape or a sheet of paper, mark off eight quarter-inch keys, as shown in <a href="ch10.xhtml#ch10fig14">Figure 10-14</a>.</p>&#13;
<p class="figuret"><a id="ch10fig14"/><strong>FIGURE 10-14:</strong> Marking off the keys</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_14.jpg"/></div>&#13;
<p class="indent">Next, position the masking tape or paper on top of the SoftPot to give you a guide for playing the notes. The completed keyboard should look like <a href="ch10.xhtml#ch10fig15">Figure 10-15</a>. If you like, you can label the keys with the notes matching the frequencies in your code to help you play from sheet music.</p>&#13;
<p class="figuret"><a id="ch10fig15"/><strong>FIGURE 10-15:</strong> The finished Tiny Electric Piano keyboard</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_15.jpg"/></div>&#13;
<h3 class="h3" id="ch10lev1sec6"><strong>GOING FURTHER</strong></h3>&#13;
<p class="noindent">In this project, we introduced you to the piezo buzzer and SoftPot. Now that you know how to make some fun sounds, here are a few ideas for taking this project further.</p>&#13;
<h4 class="h4" id="ch10lev2sec9"><span epub:type="pagebreak" id="page_293"/><strong>Hack</strong></h4>&#13;
<p class="noindent">Play around with the code and see what other fun tones you can create. If you want to play a song in a different key or using a different scale, for example, you could change the frequencies in the array. <a href="ch10.xhtml#ch10tab02">Table 10-2</a> shows frequencies you can use to change the key of your piano. C major and G major are the two most common scales used in music. Find some sheet music online or just mess around. Can you play “Twinkle, Twinkle, Little Star” on your new SoftPot piano?</p>&#13;
<p class="tabcapt"><a id="ch10tab02"/><strong>TABLE 10-2:</strong> Selected approximate frequencies for notes across three octaves</p>&#13;
<table class="all">&#13;
<tr>&#13;
<td class="pink"><p class="center"><strong>NOTE</strong></p></td>&#13;
<td class="tablecr"><p class="center"><strong>APPROX. FREQ.</strong></p></td>&#13;
<td class="pink"><p class="center"><strong>NOTE</strong></p></td>&#13;
<td class="tablecr"><p class="center"><strong>APPROX. FREQ.</strong></p></td>&#13;
<td class="pink"><p class="center"><strong>NOTE</strong></p></td>&#13;
<td class="tablec"><p class="center"><strong>APPROX. FREQ.</strong></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">C<sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">131</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">C<sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">262</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">C<sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">524</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">C<sup><span class="ent">♯</span></sup><sub>3</sub>/D<sup><span class="ent">♭</span></sup><sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">139</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">C<sup><span class="ent">♯</span></sup><sub>4</sub>/D<sup><span class="ent">♭</span></sup><sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">277</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">C<sup><span class="ent">♯</span></sup><sub>5</sub>/D<sup><span class="ent">♭</span></sup><sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">554</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">D<sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">147</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">D<sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">294</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">D<sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">587</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">D<sup><span class="ent">♯</span></sup><sub>3</sub>/E<sup><span class="ent">♭</span></sup><sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">156</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">D<sup><span class="ent">♯</span></sup><sub>4</sub>/E<sup><span class="ent">♭</span></sup><sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">311</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">D<sup><span class="ent">♯</span></sup><sub>5</sub>/E<sup><span class="ent">♭</span></sup><sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">622</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">E<sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">165</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">E<sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">330</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">E<sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">659</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">F<sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">175</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">F<sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">349</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">F<sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">698</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">F<sup><span class="ent">♯</span></sup><sub>3</sub>/G<sup><span class="ent">♭</span></sup><sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">185</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">F<sup><span class="ent">♯</span></sup><sub>4</sub>/G<sup><span class="ent">♭</span></sup><sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">370</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">F<sup><span class="ent">♯</span></sup><sub>5</sub>/G<sup><span class="ent">♭</span></sup><sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">740</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">G<sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">196</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">G<sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">392</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">G<sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">784</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">G<sup><span class="ent">♯</span></sup><sub>3</sub>/A<sup><span class="ent">♭</span></sup><sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">208</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">G<sup><span class="ent">♯</span></sup><sub>4</sub>/A<sup><span class="ent">♭</span></sup><sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">415</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">G<sup><span class="ent">♯</span></sup><sub>5</sub>/A<sup><span class="ent">♭</span></sup><sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">831</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">A<sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">220</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">A<sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">440</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">A<sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">880</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink"><p class="center"><span class="red1">A<sup><span class="ent">♯</span></sup><sub>3</sub>/B<sup><span class="ent">♭</span></sup><sub>3</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">233</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">A<sup><span class="ent">♯</span></sup><sub>4</sub>/B<sup><span class="ent">♭</span></sup><sub>4</sub></span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">466</span></p></td>&#13;
<td class="pink"><p class="center"><span class="red1">A<sup><span class="ent">♯</span></sup><sub>5</sub>/B<sup><span class="ent">♭</span></sup><sub>5</sub></span></p></td>&#13;
<td class="tablec"><p class="center"><span class="red1">932</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="pink2"><p class="center"><span class="red1">B<sub>3</sub></span></p></td>&#13;
<td class="tablecr1"><p class="center"><span class="red1">247</span></p></td>&#13;
<td class="pink2"><p class="center"><span class="red1">B<sub>4</sub></span></p></td>&#13;
<td class="tablecr1"><p class="center"><span class="red1">494</span></p></td>&#13;
<td class="pink2"><p class="center"><span class="red1">B<sub>5</sub></span></p></td>&#13;
<td class="tablec1"><p class="center"><span class="red1">988</span></p></td>&#13;
</tr>&#13;
</table>&#13;
<h4 class="h4" id="ch10lev2sec10"><strong>Modify</strong></h4>&#13;
<p class="noindent">To make things more interesting, add a <em>distortion pedal</em> to this piano project. This button will switch up octaves to give you 16 notes for the price of 8. Connect a button to pin 2 on your Arduino as shown in <a href="ch10.xhtml#ch10fig16">Figure 10-16</a>.</p>&#13;
<p class="indent">The sketch needs just few extra lines of code for the pedal, which will cycle a multiplier variable each time the button is pressed. This is known as a <em>state machine</em>, because each time the button is pressed, the state of a variable is changed. The code for this modification is in the book’s resources at <em><a href="https://www.nostarch.com/arduinoinventor/">https://www.nostarch.com/arduinoinventor/</a></em> in the file <em>P10_TinyPiano_v2.ino</em>.</p>&#13;
<p class="figuret"><span epub:type="pagebreak" id="page_294"/><a id="ch10fig16"/><strong>FIGURE 10-16:</strong> Adding a button to pin 2 for octave control</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_16.jpg"/></div>&#13;
<p class="indent">The new code lines declare a state variable, <span class="literal">octaveMultiplier</span>, and then add a <span class="literal">pinMode()</span> command to set up pin 2 as an <span class="literal">INPUT</span>. When the button is pressed, the state variable, <span class="literal">octaveMultiplier</span>, is incremented, altering the frequency so that the note goes up.</p>&#13;
<p class="indent">Try it out. When you press the button, the notes should all go up by an octave. You now can play up to 16 notes with this simple Arduino instrument!</p>&#13;
<h4 class="h4" id="ch10lev2sec11"><strong>Bonus Project: Binary Trumpet</strong></h4>&#13;
<p class="noindent">The SoftPot is a nice touch, but as a bonus we’ve built an Arduino instrument that uses actual buttons as keys instead of the SoftPot. This last project is called the Binary Trumpet. It uses three buttons to specify which note to play and the fourth button to play the note, like blowing on a trumpet. With three buttons, you can specify up to eight different combinations using the keypresses shown in <a href="ch10.xhtml#ch10tab03">Table 10-3</a>.</p>&#13;
<p class="tabcapt"><a id="ch10tab03"/><strong>TABLE 10-3:</strong> Binary trumpet button sequences</p>&#13;
<table class="all">&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><strong>BUTTON 1</strong></p></td>&#13;
<td class="tablecr"><p class="center"><strong>BUTTON 2</strong></p></td>&#13;
<td class="tablecr"><p class="center"><strong>BUTTON 3</strong></p></td>&#13;
<td class="pink1"><p class="center"><strong>NOTE TO PLAY</strong></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">C (262 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">D (294 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">E (330 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">F (349 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">G (392 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">A (440 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr"><p class="center"><span class="red1">Up</span></p></td>&#13;
<td class="pink1"><p class="center"><span class="red1">B (494 Hz)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="tablecr1"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr1"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="tablecr1"><p class="center"><span class="red1">Down</span></p></td>&#13;
<td class="pink3"><p class="center"><span class="red1">C (524 Hz)</span></p></td>&#13;
</tr>&#13;
</table>&#13;
<p class="indent">You may recognize this pattern as a binary sequence. It counts in the order 000, 001, 010, 011, 100, 101, 110, and 111.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_295"/>To make room for the four buttons on the breadboard, move the buzzer up a little and then add those buttons, as shown in <a href="ch10.xhtml#ch10fig17">Figure 10-17</a>.</p>&#13;
<p class="figuret"><a id="ch10fig17"/><strong>FIGURE 10-17:</strong> Binary Trumpet wiring diagram</p>&#13;
<div class="image"><img alt="Image" src="../images/fig10_17.jpg"/></div>&#13;
<p class="indent">The complete code for this modification is in the book’s resources at <em><a href="https://www.nostarch.com/arduinoinventor/">https://www.nostarch.com/arduinoinventor/</a></em> in the file <em>P10_TinyBinaryTrumpet.ino</em>. Playing notes using the Binary Trumpet will take a bit of getting used to, but the sequence of presses in <a href="ch10.xhtml#ch10tab03">Table 10-3</a> should help you as you pick it up.</p>&#13;
<p class="indent">As it turns out, with four buttons, you can actually play up to 16 different notes. Can you figure out how to modify the example to do this? Take a look at the book’s resources to see how.</p>&#13;
<p class="indent">Whether you use the Tiny Electric Piano or the Binary Trumpet, we hope this helps you on your way to a future career in making music. Now go forth and find an audience to show off your newest skills!<span epub:type="pagebreak" id="page_296"/></p>&#13;
</body></html>