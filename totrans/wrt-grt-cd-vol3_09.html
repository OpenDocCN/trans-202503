<html><head></head><body><div id="sbo-rt-content"><h2 class="h2" id="ch07"><span epub:type="pagebreak" id="page_127"/><strong><span class="big">7</span><br/>UML INTERACTION DIAGRAMS</strong></h2>
<div class="image1"><img src="Images/com.jpg" alt="Image" width="204" height="204"/></div>
<p class="noindents">Interaction diagrams model the operations that occur between different objects (participants) in a system. There are three main types of interaction diagrams in UML: sequence, collaboration (communication), and timing. The majority of this chapter will focus on sequence diagrams, followed by a very brief discussion of collaboration diagrams.</p>
<h3 class="h3" id="lev-7.1"><span epub:type="pagebreak" id="page_128"/><strong>7.1 Sequence Diagrams</strong></h3>
<p class="noindent">Sequence diagrams show the interaction between participants (actors, objects) in the order in which it takes place. Whereas activity diagrams describe the particulars of one operation on an object, sequence diagrams tie activity diagrams together to show the order in which multiple operations occur. From a design perspective, sequence diagrams are more informative than activity diagrams as they illustrate the overall architecture of the system; at the (lower) level of an activity diagram, however, a system architect can usually safely assume that the software engineer implementing the system can figure out the activities required by the design.</p>
<h4 class="h4" id="lev-7.1.1"><strong><em>7.1.1 Lifelines</em></strong></h4>
<p class="noindent">At the top of a sequence diagram you draw the set of participants, using rectangles or stick figures (see <a href="ch07.xhtml#ch7fig1">Figure 7-1</a>), and then draw a dashed line from each participant to the bottom of the diagram to indicate that object’s lifeline. <em>Lifelines</em> show the flow of time from the earliest (topmost) point of execution to the latest (bottommost) point. However, lifelines by themselves do not indicate the <em>amount</em> of time that passes, only the passage of time from the top to the bottom of the diagram, and equal line lengths need not correspond to the same amount of time—a 1 cm section at one point could be days, while a 1 cm section elsewhere could be microseconds.</p>
<div class="image"><a id="ch7fig1"/><img src="Images/fig7-1.jpg" alt="image" width="494" height="438"/></div>
<p class="figcap"><em>Figure 7-1: A basic sequence diagram</em></p>
<h4 class="h4" id="lev-7.1.2"><span epub:type="pagebreak" id="page_129"/><strong><em>7.1.2 Message Types</em></strong></h4>
<p class="noindent">Communication between participants takes the form of <em>messages</em> (which I will sometimes call <em>operations</em>), which consist of an arrow drawn between lifelines, or even from one lifeline to itself.</p>
<p class="indent">There are four types of message arrows you can use, as shown in <a href="ch07.xhtml#ch7fig2">Figure 7-2</a>.</p>
<div class="image"><a id="ch7fig2"/><img src="Images/fig7-2.jpg" alt="image" width="264" height="177"/></div>
<p class="figcap"><em>Figure 7-2: Message types in sequence diagrams</em></p>
<p class="indent"><em>Synchronous</em> messages are the typical call/return operation that most programs use (to execute object methods, functions, and procedures). The sender suspends execution until the receiver returns control.</p>
<p class="indent"><em>Return</em> messages indicate that control returns from a synchronous message back to the message sender, but they are purely optional in a sequence diagram. An object cannot continue execution until a synchronous message completes, so the presence of some other message (received or sent) on the same timeline inherently implies a return operation. Because a large number of return arrows can obfuscate a sequence diagram, it’s best to leave them off if the diagram starts to get cluttered. If the sequence diagram is relatively clean, however, a return arrow can help show exactly what is happening.</p>
<p class="indent"><em>Asynchronous</em> messages trigger an invocation of some code in the receiver, but the message sender does not have to wait for a return message before continuing execution. For this reason, there’s no need to draw an explicit return arrow for an asynchronous call in your sequence diagrams.</p>
<p class="indent"><em>Flat</em> messages can be either synchronous or asynchronous. Use a flat message when the type doesn’t matter for the design and you want to leave the choice up to the engineer implementing the code. As a general rule, you do not draw return arrows for flat messages because that would imply that the implementer must use a synchronous call.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>Flat messages are UML 1.</em>x <em>entities only. In UML 2.0, asynchronous messages use the full open arrowhead instead.</em></p>
</div>
<h4 class="h4" id="lev-7.1.3"><span epub:type="pagebreak" id="page_130"/><strong><em>7.1.3 Message Labels</em></strong></h4>
<p class="noindent">When you draw a message, you must attach a label to the message’s arrow. This label could simply be a description of the message, as in <a href="ch07.xhtml#ch7fig3">Figure 7-3</a>.</p>
<div class="image"><a id="ch7fig3"/><img src="Images/fig7-3.jpg" alt="image" width="482" height="286"/></div>
<p class="figcap"><em>Figure 7-3: Message labels</em></p>
<p class="indent">The sequence of messages is indicated by their vertical placement. In <a href="ch07.xhtml#ch7fig3">Figure 7-3</a>, the “Select immediate pool clean” label is the first message line in the diagram, meaning it is the first operation to execute. Moving downward, “Turn on pump” is the second message line, so it executes next. The return from “Turn on pump” is the third operation and the return from “Select immediate pool clean” is the fourth.</p>
<h4 class="h4" id="lev-7.1.4"><strong><em>7.1.4 Message Numbers</em></strong></h4>
<p class="noindent">As your sequence diagrams become more complex, it may be difficult to determine the execution order from the message position alone, so it can be helpful to attach additional indicators like numbers to each message label. <a href="ch07.xhtml#ch7fig4">Figure 7-4</a> uses sequential integers, though UML doesn’t require this. You could use numbers like 3.2.4 or even non-numeric indicators (for example, A, B, C). However, the goal is to make it easy to determine the message sequence, so if you get too carried away here you might defeat that purpose.</p>
<div class="image"><a id="ch7fig4"/><img src="Images/fig7-4.jpg" alt="image" width="482" height="285"/></div>
<p class="figcap"><em>Figure 7-4: Message numbers</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_131"/>Although the message labels you’ve seen thus far are relatively straightforward descriptions, it’s not uncommon to use the actual operation names, parameters, and return values as labels on message arrows, as in <a href="ch07.xhtml#ch7fig5">Figure 7-5</a>.</p>
<div class="image"><a id="ch7fig5"/><img src="Images/fig7-5.jpg" alt="image" width="525" height="305"/></div>
<p class="figcap"><em>Figure 7-5: Message arguments and return values</em></p>
<h4 class="h4" id="lev-7.1.5"><strong><em>7.1.5 Guard Conditions</em></strong></h4>
<p class="noindent">Your message labels can also include guard conditions: Boolean expressions enclosed in brackets (see <a href="ch07.xhtml#ch7fig6">Figure 7-6</a>). If the guard expression evaluates to <span class="literal">true</span>, the system sends the message; if it evaluates to <span class="literal">false</span>, the system does not send the message.</p>
<div class="image"><a id="ch7fig6"/><img src="Images/fig7-6.jpg" alt="image" width="482" height="284"/></div>
<p class="figcap"><em>Figure 7-6: Message guard conditions</em></p>
<p class="indent">In <a href="ch07.xhtml#ch7fig6">Figure 7-6</a>, the <span class="literal">pMon</span> object sends a <span class="literal">pump(100)</span> message to <span class="literal">pump</span> only if <span class="literal">pumpPower</span> is <span class="literal">on</span> (<span class="literal">true</span>). If <span class="literal">pumpPower</span> is <span class="literal">off</span> (<span class="literal">false</span>) and the <span class="literal">pump(100)</span> message does not execute, the corresponding return operation (sequence item 3) will not execute either, and control will move to the next outgoing arrow item in the <span class="literal">pMon</span> lifeline (sequence item 4, returning control to the user object).</p>
<h4 class="h4" id="lev-7.1.6"><span epub:type="pagebreak" id="page_132"/><strong><em>7.1.6 Iterations</em></strong></h4>
<p class="noindent">You can also specify the number of times a message executes by providing an iteration count in a sequence diagram. To specify an iteration, you use an asterisk symbol (<span class="literal">*</span>) followed by a guard condition or <span class="literal">for</span> loop iteration count (see <a href="ch07.xhtml#ch7fig7">Figure 7-7</a>). The system will repeatedly send the message as long as the guard condition is <span class="literal">true</span>.</p>
<div class="image"><a id="ch7fig7"/><img src="Images/fig7-7.jpg" alt="image" width="220" height="132"/></div>
<p class="figcap"><em>Figure 7-7: Partial sequence diagram with iteration</em></p>
<p class="indent">In <a href="ch07.xhtml#ch7fig7">Figure 7-7</a>, the message executes 100 times, with the variable <span class="literal">i</span> taking on the value <span class="literal">1</span> through <span class="literal">100</span>, incrementing on each iteration. If the <span class="literal">pumpPwrAndDelay</span> function applies the percent power specified as the argument and delays for 1 second, then in about 1 minute, 40 seconds, the pump will be running at full speed (increasing by 1 percent of the total speed each second).</p>
<h4 class="h4" id="lev-7.1.7"><strong><em>7.1.7 Long Delays and Time Constraints</em></strong></h4>
<p class="noindent">Sequence diagrams typically describe only the order of messages, not the amount of time each message takes to execute. Sometimes, however, a designer might want to indicate that a particular operation might take a long time relative to others. This is particularly common when one object sends a message to another object located outside the bounds of the current system (for example, when a software component sends a message to some object on a remote server across the internet), which we’ll discuss shortly. You indicate that an operation will take longer by pointing the message arrow slightly downward. In <a href="ch07.xhtml#ch7fig8">Figure 7-8</a>, for example, you would expect the <span class="literal">scheduledClean()</span> operation to take more time than a typical operation.</p>
<div class="image"><a id="ch7fig8"/><img src="Images/fig7-8.jpg" alt="image" width="583" height="263"/></div>
<p class="figcap"><em>Figure 7-8: Timed messages with timing constraints</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_133"/>You must also specify the expected amount of time for each message by adding some sort of constraint to the diagram. <a href="ch07.xhtml#ch7fig8">Figure 7-8</a> demonstrates this with a dashed vertical arrow from the start of the <span class="literal">scheduledClean()</span> operation to the point on the lifeline where the system returns control to the Timer Module actor (probably the physical timer on the pool monitor system). The required time constraint appears inside braces next to the dashed arrow.</p>
<h4 class="h4" id="lev-7.1.8"><strong><em>7.1.8 External Objects</em></strong></h4>
<p class="noindent">Occasionally a component of a sequence diagram must communicate with some object <em>external</em> to the system. For example, some code in the pool monitor might check the salinity level and send an SMS message to the owner’s cell phone if it drops too low. The code to actually transmit the SMS message is probably handled by an Internet of Things (IoT) device and thus outside the scope of the pool monitor software; hence, the SMS code is an external object.</p>
<p class="indent">You draw a heavy border around external objects and use a solid line for their lifelines rather than a dashed line (see <a href="ch07.xhtml#ch7fig9">Figure 7-9</a>).</p>
<div class="image"><a id="ch7fig9"/><img src="Images/fig7-9.jpg" alt="image" width="603" height="263"/></div>
<p class="figcap"><em>Figure 7-9: External objects in a sequence diagram</em></p>
<p class="indent">In <a href="ch07.xhtml#ch7fig9">Figure 7-9</a>, the Timer Module makes an asynchronous call to the <span class="literal">salinity</span> object, and there is no return from the <span class="literal">salinityCheck()</span> operation. After that call, the Timer Module can perform other tasks (not shown in this simple diagram). Ten minutes later, as noted by the time constraint, the <span class="literal">salinity</span> object makes an asynchronous call to the Timer Module actor and has it update the salinity value on the display.</p>
<p class="indent">Because there isn’t an explicit time constraint on the <span class="literal">sendMsg()</span> operation, it could occur any time after the <span class="literal">salinityCheck()</span> operation and before the <span class="literal">updateSalinityDisp()</span> operation; this is indicated by the <span class="literal">sendMsg()</span> message arrow’s position between the other two messages.</p>
<h4 class="h4" id="lev-7.1.9"><strong><em>7.1.9 Activation Bars</em></strong></h4>
<p class="noindent">Activation bars indicate that an object is instantiated and active, and appear as open rectangles across a lifeline (see <a href="ch07.xhtml#ch7fig10">Figure 7-10</a>). They are optional, as you can generally infer the lifetime of an object simply by looking at the messages traveling to and from it.</p>
<div class="image"><a id="ch7fig10"/><span epub:type="pagebreak" id="page_134"/><img src="Images/fig7-10.jpg" alt="image" width="334" height="262"/></div>
<p class="figcap"><em>Figure 7-10: Activation bars</em></p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>For the most part, activation bars clutter up sequence diagrams, so this book will not use them. They’re described here just in case you encounter them in sequence diagrams from other sources.</em></p>
</div>
<h4 class="h4" id="lev-7.1.10"><strong><em>7.1.10 Branching</em></strong></h4>
<p class="noindent">As noted in “Guard Conditions” on <a href="ch07.xhtml#page_131">page 131</a>, you can apply guard conditions to a message that say, effectively, “if <span class="literal">true</span>, then execute message; else, continue along this lifeline.” Another handy tool is branching—the equivalent of the C-style <span class="literal">switch</span>/<span class="literal">case</span> statement where you can select one of several messages to execute based on a set of guard conditions, one guard for each message. In order to execute different messages based on whether a pool uses chlorine or bromine as a sanitizer, you might be tempted to draw branching logic as shown in <a href="ch07.xhtml#ch7fig11">Figure 7-11</a>.</p>
<div class="image"><a id="ch7fig11"/><img src="Images/fig7-11.jpg" alt="image" width="495" height="222"/></div>
<p class="figcap"><em>Figure 7-11: Bad implementation of branching logic</em></p>
<p class="indent">In one aspect, this diagram makes perfect sense. If the sanitizer for this particular pool is bromine rather than chlorine, the first message does not execute and control flows down to the second message, which does execute. The problem with this diagram is that the two messages appear at different points on the lifeline and, therefore, could execute at completely different times. Particularly as your sequence diagrams get more complex, some other message invocation could wind up between these two—and thus would execute prior to the <span class="literal">getBromine()</span> message. Instead, if the sanitizer is not <span class="literal">chlorine</span> you’d want to immediately check <span epub:type="pagebreak" id="page_135"/>to see if it is <span class="literal">bromine</span>, with no possibility of intervening messages. <a href="ch07.xhtml#ch7fig12">Figure 7-12</a> shows the proper way to draw this logic.</p>
<div class="image"><a id="ch7fig12"/><img src="Images/fig7-12.jpg" alt="image" width="495" height="222"/></div>
<p class="figcap"><em>Figure 7-12: Good implementation of branching logic</em></p>
<p class="indent">Drawing branching logic with the arrow tails that start from the same vertical position and the arrowheads that end at the same vertical position avoids any ambiguity with the sequence of execution (assuming that the guard conditions are mutually exclusive—that is, it is not possible for both conditions to be simultaneously <span class="literal">true</span>).</p>
<p class="indent">Branching uses slanted message arrows similar to long delays, but a long delay item will have an associated time constraint.<sup><a href="ch19_footnote.xhtml#ch07fn1" id="ch07fn1a">1</a></sup></p>
<h4 class="h4" id="lev-7.1.11"><strong><em>7.1.11 Alternative Flows</em></strong></h4>
<p class="noindent">There’s another potential issue with branching: what happens when you need to send one of two different messages to the same destination object? Because the arrow tails and heads must start and end, respectively, at the same vertical positions for both arrows, the two arrows would overlay each other and there would be no indication that branching takes place at all. The solution to this problem is to use an <em>alternative flow</em>.</p>
<p class="indent">In an alternative flow, a single lifeline splits into two separate lifelines at some point (see <a href="ch07.xhtml#ch7fig13">Figure 7-13</a>).</p>
<div class="image"><a id="ch7fig13"/><img src="Images/fig7-13.jpg" alt="image" width="361" height="222"/></div>
<p class="figcap"><em>Figure 7-13: Alternative flows</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_136"/>In this example, the Timer Module has to choose between retrieving the current level of salinity (NaCl) or sodium hydroxide (NaOH). The <span class="literal">getSalinity()</span> and <span class="literal">getNaOH()</span> operations are methods within the same class; therefore, their message arrows will both point at the same spot in the <span class="literal">ClGen</span> lifeline. To avoid overlapping the message arrows, <a href="ch07.xhtml#ch7fig13">Figure 7-13</a> splits the <span class="literal">ClGen</span> lifeline into two lifelines: the original and an alternative flow.</p>
<p class="indent">After the message invocation, you can merge the two flows back together if desired.</p>
<h4 class="h4" id="lev-7.1.12"><strong><em>7.1.12 Object Creation and Destruction</em></strong></h4>
<p class="noindent">So far in the examples, the objects have existed throughout the lifetime of the sequence diagram; that is, all objects existed prior to the execution of the first message (operation) and persist after the execution of the last message. In real-world designs, you’ll need to create and destroy objects that don’t exist for the full duration of the program’s execution.</p>
<p class="indent">Object creation and destruction are messages just like any other. The common convention in UML is to use the special messages «create» and «destroy» (see <a href="ch07.xhtml#ch7fig14">Figure 7-14</a>) to show object lifetimes within the sequence diagram; however, you can use any message name you like. The X at the end of the <span class="literal">cleanProcess</span> lifeline, immediately below the «destroy» operation, denotes the end of the lifeline, because the object no longer exists.</p>
<div class="image"><a id="ch7fig14"/><img src="Images/fig7-14.jpg" alt="image" width="435" height="265"/></div>
<p class="figcap"><em>Figure 7-14: Object creation and destruction</em></p>
<p class="indent">This example uses a <em>dropped title box</em> to indicate the beginning of the lifeline for a newly created object. As Russ Miles and Kim Hamilton point out in <em>Learning UML 2.0</em> (O’Reilly, 2003), many standardized UML tools don’t support using dropped title boxes, allowing you to place the object title boxes only at the top of the diagram. There are a couple of solutions to this problem that should work with most standard UML tools.</p>
<p class="indent"><span epub:type="pagebreak" id="page_137"/>You can put the object at the top of the diagram and add a comment to explicitly indicate object creation and destruction at the points where they occur (see <a href="ch07.xhtml#ch7fig15">Figure 7-15</a>).</p>
<div class="image"><a id="ch7fig15"/><img src="Images/fig7-15.jpg" alt="image" width="467" height="258"/></div>
<p class="figcap"><em>Figure 7-15: Using notes to indicate object lifetime</em></p>
<p class="indent">You can also use an alternative flow to indicate the lifetime of the object (see <a href="ch07.xhtml#ch7fig16">Figure 7-16</a>).</p>
<div class="image"><a id="ch7fig16"/><img src="Images/fig7-16.jpg" alt="image" width="435" height="261"/></div>
<p class="figcap"><em>Figure 7-16: Using alternative flows to indicate object lifetime</em></p>
<p class="indent">Activation bars provide a third alternative that might be clearer here.</p>
<h4 class="h4" id="lev-7.1.13"><strong><em>7.1.13 Sequence Fragments</em></strong></h4>
<p class="noindent">UML 2.0 added <em>sequence fragments</em> to show loops, branches, and other alternatives, enabling you to better manage sequence diagrams. UML defines several standard sequence fragment types you can use, defined briefly in <a href="ch07.xhtml#ch7tab1">Table 7-1</a> (full descriptions appear later in this section).</p>
<p class="tabcap" id="ch7tab1"><span epub:type="pagebreak" id="page_138"/><strong>Table 7-1:</strong> Brief Descriptions of Sequence Fragment Types</p>
<table class="topbot-d">
<colgroup>
<col style="width:30%"/>
<col style="width:70%"/>
</colgroup>
<tbody>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">alt</span></p></td>
<td style="vertical-align: top;"><p class="taba">Executes only the alternative fragment that is <span class="literal">true</span> (think of an <span class="literal">if</span>/<span class="literal">else</span> or <span class="literal">switch</span> statement).</p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-v"><p class="taba"><span class="literal">assert</span></p></td>
<td style="vertical-align: top;" class="table-v"><p class="taba">Notes that operations within the fragment are valid if a guard condition is <span class="literal">true</span>.</p></td>
</tr>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">break</span></p></td>
<td style="vertical-align: top;"><p class="taba">Exits a loop fragment (based on some guard condition).</p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-v"><p class="taba"><span class="literal">consider</span></p></td>
<td style="vertical-align: top;" class="table-v"><p class="taba">Provides a list of valid messages in a sequence fragment.</p></td>
</tr>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">ignore</span></p></td>
<td style="vertical-align: top;"><p class="taba">Provides a list of invalid messages in a sequence fragment.</p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-v"><p class="taba"><span class="literal">loop</span></p></td>
<td style="vertical-align: top;" class="table-v"><p class="taba">Runs multiple times and the guard condition determines whether the fragment repeats.</p></td>
</tr>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">neg</span></p></td>
<td style="vertical-align: top;"><p class="taba">Never executes.</p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-v"><p class="taba"><span class="literal">opt</span></p></td>
<td style="vertical-align: top;" class="table-v"><p class="taba">Executes only if the associated condition is <span class="literal">true</span>. Comparable to <span class="literal">alt</span> with only one alternative fragment.</p></td>
</tr>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">par</span></p></td>
<td style="vertical-align: top;"><p class="taba">Runs multiple fragments in parallel.</p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-v"><p class="taba"><span class="literal">ref</span></p></td>
<td style="vertical-align: top;" class="table-v"><p class="taba">Indicates a call to another sequence diagram.</p></td>
</tr>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">region</span></p></td>
<td style="vertical-align: top;"><p class="taba">(Also known as <span class="literal">critical</span>.) Defines a critical region in which only one thread of execution is possible.</p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-v"><p class="taba"><span class="literal">seq</span></p></td>
<td style="vertical-align: top;" class="table-v"><p class="taba">Indicates that operations (in a multitasking environment) must occur in a specific sequence.</p></td>
</tr>
<tr>
<td style="vertical-align: top;"><p class="taba"><span class="literal">strict</span></p></td>
<td style="vertical-align: top;"><p class="taba">A stricter version of <span class="literal">seq</span>.</p></td>
</tr>
</tbody>
</table>
<p class="indent">In general, you draw sequence fragments as a rectangle surrounding the messages, with a special penta-rectangle symbol (a rectangle with the lower-right corner cropped) in its upper-left corner that contains the UML fragment name/type (see <a href="ch07.xhtml#ch7fig17">Figure 7-17</a>; substitute any actual fragment type for <span class="codeitalic">typ</span> in this diagram).</p>
<div class="image"><a id="ch7fig17"/><img src="Images/fig7-17.jpg" alt="image" width="377" height="274"/></div>
<p class="figcap"><em>Figure 7-17: Generic sequence fragment form</em></p>
<p class="indent">For example, if you wanted to repeat a sequence of messages several times, you would enclose those messages in a <span class="literal">loop</span> sequence fragment. This tells the engineer implementing the program to repeat those messages the number of times specified by the <span class="literal">loop</span> fragment.</p>
<p class="indent"><span epub:type="pagebreak" id="page_139"/>You can also include an optional <em>additional info</em> item, which is typically a guard condition or iteration count. The following subsections describe the sequence fragment types from <a href="ch07.xhtml#ch7tab1">Table 7-1</a> in detail, as well as any additional information they may require.</p>
<h5 class="h5" id="lev-7.1.13.1"><strong>7.1.13.1 ref</strong></h5>
<p class="noindent">There are two components to a <span class="literal">ref</span> sequence fragment: the UML interaction occurrence and the reference itself. An <em>interaction occurrence</em> is a stand-alone sequence diagram corresponding to a subroutine (procedure or function) in code. It is surrounded by a sequence fragment box. The penta-rectangle in the upper-left corner of the box contains <span class="literal">sd</span> (for <em>sequence diagram</em>) followed by the name of the <span class="literal">ref</span> fragment and any arguments you want to assign to it (see <a href="ch07.xhtml#ch7fig18">Figure 7-18</a>).</p>
<div class="image"><a id="ch7fig18"/><img src="Images/fig7-18.jpg" alt="image" width="349" height="212"/></div>
<p class="figcap"><em>Figure 7-18: An interaction occurrence example</em></p>
<p class="indent">The leftmost incoming arrow corresponds to the <em>subroutine entry point</em>. If this isn’t present, you can assume that control flows to the leftmost participant at the top of its lifeline.</p>
<p class="indent">Now we come to the second component of the <span class="literal">ref</span> sequence fragment: referencing the interaction occurrence within a different sequence diagram (see <a href="ch07.xhtml#ch7fig19">Figure 7-19</a>).</p>
<div class="image"><a id="ch7fig19"/><img src="Images/fig7-19.jpg" alt="image" width="377" height="191"/></div>
<p class="figcap"><em>Figure 7-19: A <span class="codeitalic">ref</span> sequence fragment example</em></p>
<p class="indent">This corresponds to a call to a subroutine (procedure or function) in code.</p>
<h5 class="h5" id="lev-7.1.13.2"><span epub:type="pagebreak" id="page_140"/><strong>7.1.13.2 consider and ignore</strong></h5>
<p class="noindent">The <span class="literal">consider</span> sequence fragment lists all messages that are valid within a section of the sequence diagram; all other messages/operators are illegal. The <span class="literal">ignore</span> operator lists names of messages that are invalid within a section of the sequence diagram; all other operators/messages are legal.</p>
<p class="indent"><span class="literal">consider</span> and <span class="literal">ignore</span> work either as operators in conjunction with an existing sequence fragment or as sequence fragments by themselves. A <span class="literal">consider</span> or <span class="literal">ignore</span> operator takes the following form:</p>
<p class="programs">consider{ <span class="codeitalic1">comma-separated-list-of-operators</span> }<br/>
ignore{ <span class="codeitalic1">comma-separated-list-of-operators</span> }</p>
<p class="indent">The <span class="literal">consider</span> and <span class="literal">ignore</span> operators may appear after the <span class="literal">sd</span> <em>name</em> title in an interaction occurrence (see <a href="ch07.xhtml#ch7fig20">Figure 7-20</a>), in which case they apply to the entire diagram.</p>
<div class="image"><a id="ch7fig20"/><img src="Images/fig7-20.jpg" alt="image" width="349" height="231"/></div>
<p class="figcap"><em>Figure 7-20: A <span class="codeitalic">consider</span> operator example</em></p>
<p class="indent">You may also create a sequence fragment within another sequence diagram and label that fragment with a <span class="literal">consider</span> or <span class="literal">ignore</span> operation. In that case, <span class="literal">consider</span> or <span class="literal">ignore</span> applies only to the messages within the specific sequence fragment (see <a href="ch07.xhtml#ch7fig21">Figure 7-21</a>).</p>
<div class="image"><a id="ch7fig21"/><img src="Images/fig7-21.jpg" alt="image" width="349" height="232"/></div>
<p class="figcap"><em>Figure 7-21: An <span class="codeitalic">ignore</span> sequence fragment example</em></p>
<p class="indent">If these fragment types seem strange, consider creating a very generic <span class="literal">ref</span> fragment that handles only certain messages, but then referencing that <span class="literal">ref</span> from several different places that might pass along unhandled messages <span epub:type="pagebreak" id="page_141"/>along with the handled ones. By adding a <span class="literal">consider</span> or <span class="literal">ignore</span> operator to the <span class="literal">ref</span>, you can have the fragment simply ignore the messages it doesn’t explicitly handle, which allows you to use that <span class="literal">ref</span> without having to add any extra design to the system.</p>
<h5 class="h5" id="lev-7.1.13.3"><strong>7.1.13.3 assert</strong></h5>
<p class="noindent">The <span class="literal">assert</span> sequence fragment tells the system implementer that the messages within it are valid only if some guard condition evaluates to <span class="literal">true</span>. At the end of the <span class="literal">assert</span> fragment, you typically provide some sort of Boolean condition (the guard condition) that must be <span class="literal">true</span> once the sequence is complete (see <a href="ch07.xhtml#ch7fig22">Figure 7-22</a>). If the condition isn’t <span class="literal">true</span> after the <span class="literal">assert</span> fragment has finished executing, the design can’t guarantee correct results. The <span class="literal">assert</span> reminds the engineer to verify that this condition is indeed <span class="literal">true</span> by, for example, using a C++ <span class="literal">assert</span> macro invocation (or something similar in other languages, or even just an <span class="literal">if</span> statement).</p>
<div class="image"><a id="ch7fig22"/><img src="Images/fig7-22.jpg" alt="image" width="450" height="325"/></div>
<p class="figcap"><em>Figure 7-22: An <span class="codeitalic">assert</span> sequence fragment example</em></p>
<p class="indent">In C/C++ you’d probably implement the sequence in <a href="ch07.xhtml#ch7fig22">Figure 7-22</a> using code like this:</p>
<p class="programs">Object3-&gt;msg1();                  // Inside example<br/>
Object4-&gt;msg2();                  // Inside Object3::msg1<br/>
assert( condition == TRUE );      // Inside Object3::msg1</p>
<h5 class="h5" id="lev-7.1.13.4"><strong>7.1.13.4 loop</strong></h5>
<p class="noindent">The <span class="literal">loop</span> sequence fragment indicates iteration. You place the <span class="literal">loop</span> operator in the penta-rectangle associated with the sequence fragment, and may also include a guard condition enclosed in brackets at the top of the sequence fragment. The combination of the <span class="literal">loop</span> operator and guard condition controls the number of iterations.</p>
<p class="indent">The simplest form of this sequence fragment is the <em>infinite</em> loop, consisting of the <span class="literal">loop</span> operator without any arguments and without a guard condition (see <a href="ch07.xhtml#ch7fig23">Figure 7-23</a>). Most “infinite” loops actually aren’t infinite, but terminate with a <span class="literal">break</span> sequence fragment when some condition is true (we’ll discuss the <span class="literal">break</span> sequence in the next section).</p>
<div class="image"><a id="ch7fig23"/><span epub:type="pagebreak" id="page_142"/><img src="Images/fig7-23.jpg" alt="image" width="349" height="233"/></div>
<p class="figcap"><em>Figure 7-23: An infinite loop</em></p>
<p class="indent">The loop in <a href="ch07.xhtml#ch7fig23">Figure 7-23</a> is roughly equivalent to the following C/C++ code:</p>
<p class="programs">// This loop appears inside Object3::msg1<br/>
for(;;)<br/>
{<br/>
      Object4-&gt;msg2();<br/>
} // endfor</p>
<p class="indent">Or, alternatively:</p>
<p class="programs">while(1)<br/>
{<br/>
      Object4-&gt;msg2()<br/>
} // end while</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>Personally, I prefer the following:</em></p>
<p class="programs1">#define ever ;;<br/>
 .<br/>
 .<br/>
 .<br/>
for(ever)<br/>
{<br/>
      Object4-&gt;msg2();<br/>
} // endfor</p>
<p class="notep"><em>I feel this is the most readable solution. Of course, if you’re “anti-macro at all costs,” you would probably disagree with my choice for an infinite loop!</em></p>
</div>
<p class="indent"><em>Definite</em> loops execute a fixed number of times and can appear in two forms. The first is <span class="literal">loop(</span><em>integer</em><span class="literal">)</span>, which is shorthand for <span class="literal">loop(0,</span> <em>integer</em><span class="literal">)</span>; that is, it will execute a minimum of zero times and a maximum of <em>integer</em> times. The second is <span class="literal">loop(</span><em>minInt</em><span class="literal">,</span> <em>maxInt</em><span class="literal">)</span>, which indicates that the loop will execute a minimum of <em>minInt</em> times and a maximum of <em>maxInt</em> times. Without a <span epub:type="pagebreak" id="page_143"/>guard condition, the minimum count is irrelevant; the loop will always execute <em>maxInt</em> times. Therefore, most definite loops use the form <span class="literal">loop(</span><em>integer</em><span class="literal">)</span> where <em>integer</em> is the number of iterations to perform (see <a href="ch07.xhtml#ch7fig24">Figure 7-24</a>).</p>
<div class="image"><a id="ch7fig24"/><img src="Images/fig7-24.jpg" alt="image" width="497" height="233"/></div>
<p class="figcap"><em>Figure 7-24: A definite loop</em></p>
<p class="indent">The loop in <a href="ch07.xhtml#ch7fig24">Figure 7-24</a> is roughly equivalent to the following C/C++ code:</p>
<p class="programs">// This code appears inside Object3::msg1<br/>
for( i = 1; i&lt;=10; ++i )<br/>
{<br/>
      Object4-&gt;msg2();<br/>
} // end for</p>
<p class="indent">You can also use the multiplicity symbol <span class="literal">*</span> to denote infinity. Therefore, <span class="literal">loop(*)</span> is equivalent to <span class="literal">loop(0, *)</span> which is equivalent to <span class="literal">loop</span> (in other words, you get an infinite loop).</p>
<p class="indent">An <em>indefinite</em> loop executes an indeterminate<sup><a href="ch19_footnote.xhtml#ch07fn2" id="ch07fn2a">2</a></sup> number of times (corresponding to <span class="literal">while</span>, <span class="literal">do/while</span>, <span class="literal">repeat/until</span>, and other loop forms in programming languages). Indefinite loops include a guard condition as part of the <span class="literal">loop</span> sequence fragment,<sup><a href="ch19_footnote.xhtml#ch07fn3" id="ch07fn3a">3</a></sup> meaning the <span class="literal">loop</span> sequence fragment will always execute the loop <em>minInt</em> times (zero times if <em>minInt</em> is not present). After <em>minInt</em> iterations, the loop sequence fragment will begin testing the guard condition and continue iterating only while the guard condition is <span class="literal">true</span>. The loop sequence fragment will execute at most <em>maxInt</em> iterations (total, not in addition to the <em>minInt</em> iterations). <a href="ch07.xhtml#ch7fig25">Figure 7-25</a> shows a traditional <span class="literal">while</span>-type loop that executes a minimum of zero times and a maximum of infinity times, as long as the guard condition (<span class="literal">[cond == true]</span>) evaluates to <span class="literal">true</span>.</p>
<div class="image"><a id="ch7fig25"/><span epub:type="pagebreak" id="page_144"/><img src="Images/fig7-25.jpg" alt="image" width="349" height="271"/></div>
<p class="figcap"><em>Figure 7-25: An indefinite <span class="codeitalic">while</span> loop</em></p>
<p class="indent">The loop in <a href="ch07.xhtml#ch7fig25">Figure 7-25</a> is roughly equivalent to the following C/C++ code:</p>
<p class="programs">// This code appears inside Object3::msg1<br/>
while( cond == TRUE )<br/>
{<br/>
      Object4-&gt;msg2();<br/>
} // end while</p>
<p class="indent">You can create a <span class="literal">do..while</span> loop by setting the <em>minInt</em> value to <span class="literal">1</span> and the <em>maxInt</em> value to <span class="literal">*</span>, and then specifying the Boolean expression to continue loop execution (see <a href="ch07.xhtml#ch7fig26">Figure 7-26</a>).</p>
<div class="image"><a id="ch7fig26"/><img src="Images/fig7-26.jpg" alt="image" width="349" height="270"/></div>
<p class="figcap"><em>Figure 7-26: An indefinite <span class="codeitalic">do..while</span> loop</em></p>
<p class="indent">The loop in <a href="ch07.xhtml#ch7fig26">Figure 7-26</a> is roughly equivalent to the following C/C++ code:</p>
<p class="programs">// This code appears inside Object3::msg1<br/>
do<br/>
{<br/>
      Object4-&gt;msg2();<br/>
} while( cond == TRUE );</p>
<p class="indent"><span epub:type="pagebreak" id="page_145"/>It’s possible to create many other complex loop types, but I’ll leave that as an exercise for interested readers.</p>
<h5 class="h5" id="lev-7.1.13.5"><strong>7.1.13.5 break</strong></h5>
<p class="noindent">The <span class="literal">break</span> sequence fragment consists of the word <span class="literal">break</span> in a penta-rectangle along with a guard condition. If the guard condition evaluates to <span class="literal">true</span>, then the system executes the sequence inside the <span class="literal">break</span> sequence fragment, after which control immediately exits the enclosing sequence fragment. If the enclosing sequence fragment is a <span class="literal">loop</span>, control immediately executes to the first message past the <span class="literal">loop</span> (like a <span class="literal">break</span> statement in languages like Swift, C/C++, and Java). <a href="ch07.xhtml#ch7fig27">Figure 7-27</a> provides an example of such a loop.</p>
<div class="image"><a id="ch7fig27"/><img src="Images/fig7-27.jpg" alt="image" width="349" height="398"/></div>
<p class="figcap"><em>Figure 7-27: An example of the <span class="codeitalic">break</span> sequence fragment</em></p>
<p class="indent">The loop in <a href="ch07.xhtml#ch7fig27">Figure 7-27</a> is roughly equivalent to the following C++ code fragment:</p>
<p class="programs">// This code appears inside Object3::msg1<br/>
while( cond == TRUE )<br/>
{<br/>
     Object4-&gt;msg2();<br/>
     if( bcnt &gt;= 10 )<br/>
     {<br/>
          Object4-&gt;msg3();<br/>
          break;<br/>
     } // end if<br/>
     Object4-&gt;msg4();<br/>
} // end while loop</p>
<p class="indent">If the most recent <span class="literal">break</span>-compatible enclosing sequence is a subroutine, not a loop, the <span class="literal">break</span> sequence fragment behaves like a return from a subroutine operation.</p>
<h5 class="h5" id="lev-7.1.13.6"><span epub:type="pagebreak" id="page_146"/><strong>7.1.13.6 opt and alt</strong></h5>
<p class="noindent">The <span class="literal">opt</span> and <span class="literal">alt</span> sequence fragments allow you to control the execution of a set of messages with a single guard condition—particularly if the values of the components making up the guard condition could change over the execution of the sequence.</p>
<p class="indent">The <span class="literal">opt</span> sequence fragment is like a simple <span class="literal">if</span> statement without an <span class="literal">else</span> clause. You attach a guard condition and the system will execute the sequence contained within the <span class="literal">opt</span> fragment only if the guard condition evaluates to <span class="literal">true</span> (see <a href="ch07.xhtml#ch7fig28">Figure 7-28</a>).</p>
<div class="image"><a id="ch7fig28"/><img src="Images/fig7-28.jpg" alt="image" width="450" height="347"/></div>
<p class="figcap"><em>Figure 7-28: An example of the <span class="literal">opt</span> sequence fragment</em></p>
<p class="indent">The example in <a href="ch07.xhtml#ch7fig28">Figure 7-28</a> is roughly equivalent to the following C/C++ code:</p>
<p class="programs">// Assumption: Class2 is Object2's data type. Because control<br/>
// transfers into the Object2 sequence at the top of its <br/>
// lifeline, example must be a member function of Object2/Class2<br/>
<br/>
void Class2::example( void )<br/>
{<br/>
      Object3-&gt;msg1();<br/>
} // end example<br/>
<span class="codeitalic1">--snip--</span><br/>
//    This code appears in Object3::msg1 <br/>
if( cond == TRUE )<br/>
{<br/>
      Object4-&gt;msg2();<br/>
} // end if</p>
<p class="indent">For more complex logic, use the <span class="literal">alt</span> sequence fragment, which acts like an <span class="literal">if</span>/<span class="literal">else</span> or <span class="literal">switch</span>/<span class="literal">case</span>. To create an <span class="literal">alt</span> sequence fragment, you combine several rectangles, each with its own guard condition and an optional <span class="literal">else</span>, to form a multiway decision (see <a href="ch07.xhtml#ch7fig29">Figure 7-29</a>).</p>
<div class="image"><a id="ch7fig29"/><span epub:type="pagebreak" id="page_147"/><img src="Images/fig7-29.jpg" alt="image" width="349" height="441"/></div>
<p class="figcap"><em>Figure 7-29: An <span class="codeitalic">alt</span> sequence fragment</em></p>
<p class="indent">The interaction occurrence in <a href="ch07.xhtml#ch7fig29">Figure 7-29</a> is roughly equivalent to the following code:</p>
<p class="programs">// Assumption: Class2 is Object2's data type. Because control<br/>
// transfers into the Object2 sequence at the top of its<br/>
// lifeline, example must be a member function of Object2/Class2<br/>
<br/>
void Class2::example( void )<br/>
{<br/>
      Object3-&gt;msg1();<br/>
} // end example<br/>
<br/>
<span class="codeitalic1">--snip--</span><br/>
//    This code appears in Object3::msg1 <br/>
if( cond1 == TRUE )<br/>
{<br/>
      Object4-&gt;msg2a();<br/>
}<br/>
else if( cond2 == TRUE )<br/>
{<br/>
      Object4-&gt;msg2b();<br/>
}<br/>
else if( cond3 == TRUE )<br/>
{<br/>
      Object3-&gt;msg2c();<br/>
}<br/>
else<br/>
{<br/>
      Object4-&gt;msg2d();<br/>
} // end if</p>
<h5 class="h5" id="lev-7.1.13.7"><span epub:type="pagebreak" id="page_148"/><strong>7.1.13.7 neg</strong></h5>
<p class="noindent">You use a <span class="literal">neg</span> sequence fragment to enclose a sequence that will not be part of the final design. Effectively, using <span class="literal">neg</span> comments out the enclosed sequence. Why even include a sequence if it’s not going to be part of the design? There are at least two good reasons: code generation and future features.</p>
<p class="indent">Although, for the most part, UML is a diagramming language intended to help with system design prior to implementation in a programming language like Java or Swift, there are certain UML tools that will convert UML diagrams directly into code. During development, you might want to include some diagrams that illustrate something but are not yet complete (certainly not to the point of producing executable code). In this scenario, you could use the <span class="literal">neg</span> sequence fragment to turn off the code generation for those sequences that aren’t quite yet ready for prime time.</p>
<p class="indent">Even if you don’t intend to generate code directly from a UML diagram, you might want to use the <span class="literal">neg</span> for future features. When you hand your UML diagrams off to an engineer to implement the design, they represent a contract that says, “This is how the code is to be written.” Sometimes, though, you’ll want your diagrams to show features that you plan to include in a future version of the software, but not in the first (or current) version. The <span class="literal">neg</span> sequence fragment is a clean way to tell the engineer to ignore that part of the design. <a href="ch07.xhtml#ch7fig30">Figure 7-30</a> shows a simple example of the <span class="literal">neg</span> sequence fragment.</p>
<div class="image"><a id="ch7fig30"/><img src="Images/fig7-30.jpg" alt="image" width="349" height="233"/></div>
<p class="figcap"><em>Figure 7-30: An example of the <span class="codeitalic">neg</span> sequence fragment</em></p>
<p class="indent">The example in <a href="ch07.xhtml#ch7fig30">Figure 7-30</a> is roughly equivalent to the following C/C++ code:</p>
<p class="programs">// Assumption: Class2 is Object2's data type. Because control<br/>
// transfers into the Object2 sequence at the top of its<br/>
// lifeline, example must be a member function of Object2/Class2<br/>
<br/>
void Class2::example( void )<br/>
{<br/>
      Object3-&gt;msg1();<br/>
} // end example</p>
<h5 class="h5" id="lev-7.1.13.8"><span epub:type="pagebreak" id="page_149"/><strong>7.1.13.8 par</strong></h5>
<p class="noindent">The <span class="literal">par</span> sequence fragment, an example of which is shown in <a href="ch07.xhtml#ch7fig31">Figure 7-31</a>, states that the enclosed sequences<sup><a href="ch19_footnote.xhtml#ch07fn4" id="ch07fn4a">4</a></sup> (operations) can be executed in parallel with each other.</p>
<div class="image"><a id="ch7fig31"/><img src="Images/fig7-31.jpg" alt="image" width="472" height="481"/></div>
<p class="figcap"><em>Figure 7-31: An example of the <span class="codeitalic">par</span> sequence fragment</em></p>
<p class="indent"><a href="ch07.xhtml#ch7fig31">Figure 7-31</a> shows three operands: the sequence with {<span class="literal">msg2a</span>, <span class="literal">msg2b</span>, <span class="literal">msg2c</span>}, the sequence with {<span class="literal">msg3a</span>, <span class="literal">msg3b</span>, <span class="literal">msg3c</span>}, and the sequence with {<span class="literal">msg4a</span>, <span class="literal">msg4b</span>, <span class="literal">msg4c</span>}. The <span class="literal">par</span> sequence fragment requires that the operations within a given sequence must execute in the order in which they appear (for example, <span class="literal">msg2a</span>, then <span class="literal">msg2b</span>, then <span class="literal">msg2c</span>). However, the system is free to interleave operations from different operands as long as it maintains the internal order of those operands. So, in <a href="ch07.xhtml#ch7fig31">Figure 7-31</a>, the order {<span class="literal">msg2a</span>, <span class="literal">msg3a</span>, <span class="literal">msg3b</span>, <span class="literal">msg4a</span>, <span class="literal">msg2b</span>, <span class="literal">msg2c</span>, <span class="literal">msg4b</span>, <span class="literal">msg4c</span>, <span class="literal">msg3c</span>} is legitimate, as is {<span class="literal">msg4a</span>, <span class="literal">msg4b</span>, <span class="literal">msg4c</span>, <span class="literal">msg3a</span>, <span class="literal">msg3b</span>, <span class="literal">msg3c</span>, <span class="literal">msg2a</span>, <span class="literal">msg2b</span>, <span class="literal">msg2c</span>}, because the ordering of the enclosed sequences matches. However, {<span class="literal">msg2a</span>, <span class="literal">msg2c</span>, <span class="literal">msg4a</span>, <span class="literal">msg4b</span>, <span class="literal">msg4c</span>, <span class="literal">msg3a</span>, <span class="literal">msg3b</span>, <span class="literal">msg3c</span>, <span class="literal">msg2b</span>} is not legitimate because <span class="literal">msg2c</span> occurs before <span class="literal">msg2b</span> (which is contrary to the ordering specified in <a href="ch07.xhtml#ch7fig31">Figure 7-31</a>).</p>
<h5 class="h5" id="lev-7.1.13.9"><span epub:type="pagebreak" id="page_150"/><strong>7.1.13.9 seq</strong></h5>
<p class="noindent">The <span class="literal">par</span> sequence fragment enforces the following restrictions:</p>
<ul>
<li class="noindent">The system maintains the ordering of the operations within an operand.</li>
<li class="noindent">The system allows operations on different lifelines from different operands to execute in any order.</li>
</ul>
<p class="noindent">And the <span class="literal">seq</span> sequence adds another:</p>
<ul>
<li class="noindent">Operations on the same lifeline in different operands must execute in the order in which they appear in the diagram (from top to bottom).</li>
</ul>
<p class="indent">In <a href="ch07.xhtml#ch7fig32">Figure 7-32</a>, for example, <span class="literal">Operand1</span> and <span class="literal">Operand3</span> have messages that are sent to the same object (lifeline). Therefore, in a <span class="literal">seq</span> sequence fragment, <span class="literal">msg2a</span>, <span class="literal">msg2b</span>, and <span class="literal">msg2c</span> must all execute before <span class="literal">msg4a</span>.</p>
<div class="image"><a id="ch7fig32"/><img src="Images/fig7-32.jpg" alt="image" width="587" height="481"/></div>
<p class="figcap"><em>Figure 7-32: An example of the <span class="codeitalic">seq</span> sequence fragment</em></p>
<p class="indent"><a href="ch07.xhtml#ch7fig32">Figure 7-32</a> shows a stand-alone <span class="literal">seq</span> sequence fragment. In typical usage, however, a <span class="literal">seq</span> sequence fragment will appear inside a <span class="literal">par</span> to control the execution sequence of a portion of the <span class="literal">par</span>’s operands.</p>
<h5 class="h5" id="lev-7.1.13.10"><strong>7.1.13.10 strict</strong></h5>
<p class="noindent">The <span class="literal">strict</span> sequence fragment forces the operations to occur in the sequence they appear in each operand; interleaving of operations between operands is not allowed. The format for a <span class="literal">strict</span> sequence fragment is similar to that of <span class="literal">par</span> and <span class="literal">seq</span> (see <a href="ch07.xhtml#ch7fig33">Figure 7-33</a>).</p>
<div class="image"><a id="ch7fig33"/><span epub:type="pagebreak" id="page_151"/><img src="Images/fig7-33.jpg" alt="image" width="468" height="478"/></div>
<p class="figcap"><em>Figure 7-33: An example of the <span class="codeitalic">strict</span> sequence fragment</em></p>
<p class="indent">The <span class="literal">strict</span> parallel operation allows the operands to execute in any order, but once a given operand begins execution, all the operations within it must complete in the sequence specified before any other operand can begin executing.</p>
<p class="indent">In <a href="ch07.xhtml#ch7fig33">Figure 7-33</a>, there are six different operation sequences possible: {<span class="literal">Operand1</span>, <span class="literal">Operand2</span>, <span class="literal">Operand3</span>}; {<span class="literal">Operand1</span>, <span class="literal">Operand3</span>, <span class="literal">Operand2</span>}; {<span class="literal">Operand2</span>, <span class="literal">Operand1</span>, <span class="literal">Operand3</span>}; {<span class="literal">Operand2</span>, <span class="literal">Operand3</span>, <span class="literal">Operand1</span>}; {<span class="literal">Operand3</span>, <span class="literal">Operand1</span>, <span class="literal">Operand2</span>}; and {<span class="literal">Operand3</span>, <span class="literal">Operand2</span>, <span class="literal">Operand1</span>}.</p>
<p class="indent">However, operations internal to the operands cannot interleave, and must execute from top to bottom.</p>
<h5 class="h5" id="lev-7.1.13.11"><strong>7.1.13.11 region</strong></h5>
<p class="noindent">In the section “<a href="ch05.xhtml#lev-5.2">Extending UML Activity Diagrams</a>” on <a href="ch05.xhtml#page_99">page 99</a>, I used the example of a home-brew critical section in an activity diagram to demonstrate how to extend UML for your own purposes. I pointed out why this is a bad idea (reread that section for the details), and mentioned there is another way to achieve what you want to do using standard UML: the <span class="literal">region</span> sequence fragment. UML activity diagrams don’t support critical sections, but sequence diagrams do.</p>
<p class="indent">The <span class="literal">region</span> sequence fragment specifies that once execution enters the region, no other operations in the same parallel execution context can be interleaved until it completes execution. The <span class="literal">region</span> sequence fragment must always appear within some other parallel sequence fragment (generally <span class="literal">par</span> or <span class="literal">seq</span>; technically it could appear inside <span class="literal">strict</span>, though ultimately this would serve no purpose).</p>
<p class="indent"><span epub:type="pagebreak" id="page_152"/>As an example, consider <a href="ch07.xhtml#ch7fig34">Figure 7-34</a>—the system is free to interleave the execution of any operand’s messages, subject to the rules given for the <span class="literal">par</span> sequence fragment, but once the system enters the critical region (with the execution of the <span class="literal">msg4a</span> operation), no other threads in the <span class="literal">par</span> sequence fragment can execute.</p>
<div class="image"><a id="ch7fig34"/><img src="Images/fig7-34.jpg" alt="image" width="349" height="477"/></div>
<p class="figcap"><em>Figure 7-34: The <span class="codeitalic">region</span> sequence fragment</em></p>
<h3 class="h3" id="lev-7.2"><strong>7.2 Collaboration Diagrams</strong></h3>
<p class="noindent">Collaboration (or communication) diagrams provide the same information as sequence diagrams but in a slightly more compact form. Rather than drawing arrows between lifelines, in collaboration diagrams we draw message arrows directly between objects, and attach numbers to each message to indicate the sequence (see <a href="ch07.xhtml#ch7fig35">Figure 7-35</a>).</p>
<div class="image"><a id="ch7fig35"/><img src="Images/fig7-35.jpg" alt="image" width="537" height="243"/></div>
<p class="figcap"><em>Figure 7-35: A collaboration diagram</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_153"/>The diagram in <a href="ch07.xhtml#ch7fig35">Figure 7-35</a> is roughly equivalent to the sequence diagram in <a href="ch07.xhtml#ch7fig9">Figure 7-9</a> (without the time constraint of 10 minutes). In <a href="ch07.xhtml#ch7fig35">Figure 7-35</a> the <span class="literal">salinityCheck</span> message executes first, <span class="literal">sendMsg</span> executes second, and <span class="literal">updateSalinityDisplay</span> executes last.</p>
<p class="indent"><a href="ch07.xhtml#ch7fig36">Figure 7-36</a> shows a more complex collaboration diagram that better demonstrates the compactness of this option. The six messages sent in this example would require six lines in a sequence diagram but here require only three communication links.</p>
<div class="image"><a id="ch7fig36"/><img src="Images/fig7-36.jpg" alt="image" width="372" height="249"/></div>
<p class="figcap"><em>Figure 7-36: A more complex collaboration diagram</em></p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>Having both collaboration and sequence diagrams is probably an artifact of merging different systems together when UML was created. Which one you use is really just a matter of personal preference. Keep in mind, however, that as the diagrams become more complex, collaboration diagrams become harder to follow.</em></p>
</div>
<h3 class="h3" id="lev-7.3"><strong>7.3 For More Information</strong></h3>
<p class="ref">Bremer, Michael. <em>The User Manual Manual: How to Research, Write, Test, Edit, and Produce a Software Manual</em>. Grass Valley, CA: UnTechnical Press, 1999. A sample chapter is available at <em><a href="http://www.untechnicalpress.com/Downloads/UMM%20sample%20doc.pdf">http://www.untechnicalpress.com/Downloads/UMM%20sample%20doc.pdf</a></em>.</p>
<p class="ref">Larman, Craig. <em>Applying UML and Patterns: An Introduction to Object-Oriented Analysis and Design and Iterative Development</em>. 3rd ed. Upper Saddle River, NJ: Prentice Hall, 2004.</p>
<p class="ref">Miles, Russ, and Kim Hamilton. <em>Learning UML 2.0: A Pragmatic Introduction to UML</em>. Sebastopol, CA: O’Reilly Media, 2003.</p>
<p class="ref">Pender, Tom. <em>UML Bible</em>. Indianapolis: Wiley, 2003.</p>
<p class="ref">Pilone, Dan, and Neil Pitman. <em>UML 2.0 in a Nutshell: A Desktop Quick Reference</em>. 2nd ed. Sebastopol, CA: O’Reilly Media, 2005.</p>
<p class="ref">Roff, Jason T. <em>UML: A Beginner’s Guide</em>. Berkeley, CA: McGraw-Hill Education, 2003.</p>
<p class="ref">Tutorials Point. “UML Tutorial.” <a href="https://www.tutorialspoint.com/uml/"><em>https://www.tutorialspoint.com/uml/</em></a>.<span epub:type="pagebreak" id="page_154"/></p>
</div>



  </body></html>