<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="z3998: http://www.daisy.org/z3998/2012/vocab/structure/#" lang="en" xml:lang="en">
  <head>
    <title>Project 16: Connecting your Electronics to the Web</title>
    <link href="../styles/9781593278717.css" rel="stylesheet" type="text/css"/>
    <link href="../68851547a55f.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="sbo-rt-content"><h2 class="h2" id="ch16"><span epub:type="pagebreak" id="page_195"/><strong>16<br/>Connecting your Electronics to the Web</strong></h2>
<p class="noindent"><span class="blue1">In this project you’ll create your own Internet of Things web server you can use to control a lamp remotely from your phone. The simple web server you’ll build can then be added to other projects so you can control other electronic appliances.</span></p>
<div class="image"><span epub:type="pagebreak" id="page_196"/><img src="../images/f0196-01.jpg" alt="image"/></div>
<p class="cap"><span class="blue1"><strong>PARTS REQUIRED</strong></span></p>
<p class="cap1">Raspberry Pi</p>
<p class="cap1">Relay module HL-52S</p>
<p class="cap1">12 V lamp and holder</p>
<p class="cap1">12 V power adapter</p>
<p class="cap1">Male DC bar rel power jack</p>
<p class="cap1">Plastic box enclosure</p>
<p class="cap1">Jumper wires</p>
<p class="cap"><span class="blue1"><strong>SOFTWARE REQUIRED</strong></span></p>
<p class="cap1">Flask framework</p>
<p class="noindentt"><span epub:type="pagebreak" id="page_197"/>In this project you’re going to create your own web server to control your electronics through a browser. You’ll control a 12 V lamp using a dynamic web page with buttons.</p>
<h3 class="h3" id="lev159"><span class="blue1"><strong>INTRODUCING WEB SERVERS</strong></span></h3>
<p class="noindent">A web server is a computer that provides web pages. It stores the website’s files, including all HTML documents and related assets like images, CSS style sheets, fonts, and video. It also brings those files to the user’s device web browser when the user makes a request to the server’s URL.</p>
<p class="indent">When you access a web page in your browser, you’re actually sending a request via <em>Hypertext Transfer Protocol (HTTP)</em> to a server. This is simply a process for requesting and returning information on the internet. The server sends back the web page you requested—also through HTTP.</p>
<p class="indent">In this project you’ll use your Raspberry Pi to host a web server on the local network, as illustrated in <a href="ch16.xhtml#ch16fig1">Figure 16-1</a>.</p>
<div class="image"><a id="ch16fig1"/><img src="../images/f0197-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-1:</strong> Your Raspberry Pi running a web server</p>
<p class="indent">As a server, your Raspberry Pi can provide some output through its GPIO pins. In other words, using a browser on your local network, you can access the Pi web server to remotely control the GPIOs and turn something on.</p>
<p class="indent">Web servers can serve <em>static</em> or <em>dynamic</em> content. The content of a static website doesn’t change unless you edit its HTML file. The website built in <a href="ch15.xhtml#ch15">Project 15</a> is an example of a static website. With a dynamic website, the content changes based on user interactions. In this project, you’ll create a dynamic website that controls and shows the current state of a 12 V lamp connected to a relay, which we’ll look at more closely in a second.</p>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>Only devices that are connected to the same router as your Pi can access a web page hosted in your Pi through a browser. Accessing your web server from</em> outside <em>your network is more difficult. You can make your Raspberry Pi web server accessible from any computer anywhere by using a technique called</em> router port forwarding, <em>but that subject is beyond the book’s scope.</em></p>
</div>
<h3 class="h3" id="lev160"><span epub:type="pagebreak" id="page_198"/><span class="blue1"><strong>INTRODUCING THE RELAY MODULE</strong></span></h3>
<p class="noindent">A <em>relay</em> is an electrically operated switch that can be turned on or off, letting the current go through or not, and can be controlled with low voltages, like the 3.3 V provided by the Raspberry Pi. The relay module you’ll use in this project has two relays—the two blue cubes shown in <a href="ch16.xhtml#ch16fig2">Figure 16-2</a>.</p>
<div class="image"><a id="ch16fig2"/><img src="../images/f0198-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-2:</strong> Relay module with two channels</p>
<p class="indent">The six pins on the left side of the relay module connect high voltage, and the pins on the right side connect the component that requires low voltage—the Raspberry Pi GPIOs.</p>
<h4 class="h4" id="lev161"><span class="blue1"><strong>Relay Pinout</strong></span></h4>
<p class="noindent">The high-voltage side has two connectors, each with three sockets: <em>common (COM)</em>, <em>normally closed (NC)</em>, and <em>normally open (NO)</em>. The normally closed configuration is used when you want the relay to be closed by default, meaning the current is flowing unless you send a signal from the Pi to the relay module to open the circuit and stop the current. The normally open configuration works the other way around: the relay is always open, so the circuit is broken unless you send a signal from the Pi to close it.</p>
<p class="indent">The low-voltage side has a set of four pins and a set of three pins. The first set consists of VCC and GND to power up the module, and input 1 (IN1) and input 2 (IN2) to control the bottom and top relays, respectively. The second set of pins consists of GND, VCC, and JD-VCC pins. The JD-VCC pin powers the electromagnet of the relay. Notice that the module has a jumper cap connecting the VCC and JD-VCC pins; the one shown here is blue, but yours may be a different color.</p>
<p class="indent">The jumper cap allows you to choose whether the circuit is physically connected to the Pi circuit or not, and you can choose to have it on or not. With the jumper cap on, the VCC and JD-VCC pins are connected. That means the relay electromagnet is directly powered from the Pi’s power pin, so the relay module and the Raspberry Pi circuits are not physically isolated from each other. This is the configuration we’ll use. Without the jumper cap, you need to provide an independent power source to power up the relay’s electromagnet through the JD-VCC pin. That configuration physically isolates the relays from the Raspberry Pi with the module’s built-in optocoupler, which prevents damage to the Pi in case of electrical spikes.</p>
<div class="box4">
<p class="box-title"><span epub:type="pagebreak" id="page_199"/><span class="blue1"><strong>THE OPTOCOUPLER</strong></span></p>
<p class="box-p">We won’t go into too much detail about the optocoupler. It is basically a component that allows you to send signals between two isolated circuits so that you can control high voltages with low voltages without actually having a physical connection between those two circuits. The optocoupler makes the “connection” between the circuits using an LED that emits light and a phototransistor that receives the light and then activates or deactivates the relay.</p>
</div>
<h4 class="h4" id="lev162"><span class="blue1"><strong>Relay Usage</strong></span></h4>
<p class="noindent">You’ll use a normally open configuration for this project. You want to light the lamp only when you choose to, so the circuit should be broken until you say otherwise. For this, you use the COM and NO sockets.</p>
<p class="indent">In a normally open configuration, there is no contact between the COM and NO sockets unless you trigger the relay. The relay is triggered when the input goes below about 2 V. That means if you send a LOW signal from the Pi, the relay turns on, and if you send a HIGH signal, the relay turns off; this is called <em>inverted logic</em>. You’ll control just one relay, so you’ll connect IN1 to one of the Pi’s GPIO pins.</p>
<div class="note">
<p class="notet"><span class="red"><strong>WARNING</strong></span></p>
<p class="notep"><em>If you’re not comfortable dealing with higher voltages like 12 V, but you want to do the project, you can replace the relay module with an LED. You’ll also need to make some minor changes to the Python script, since the relay works with inverted logic and the LED doesn’t.</em></p>
</div>
<p class="indent">The hardware for the project involves connecting an AC 12 V power adapter that can provide 1 A to a relay module to control a 12 V lamp. We’ll use a DC barrel power jack to make the connections between the adapter and the relay easier. The barrel jack connects perfectly to the power adapter terminal, as shown in <a href="ch16.xhtml#ch16fig3">Figure 16-3</a>.</p>
<div class="image"><a id="ch16fig3"/><img src="../images/f0199-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-3:</strong> Power adapter terminal and DC barrel power jack</p>
<h3 class="h3" id="lev163"><span epub:type="pagebreak" id="page_200"/><span class="blue1"><strong>PROJECT OVERVIEW</strong></span></h3>
<p class="noindent">Before getting into building this project, let’s go through a quick overview so you better understand each step (see <a href="ch16.xhtml#ch16fig4">Figure 16-4</a>). You should also know the basics of HTML and CSS, so we recommend that you complete <a href="ch15.xhtml#ch15">Project 15</a> if you haven’t already before moving on.</p>
<div class="image"><a id="ch16fig4"/><img src="../images/f0200-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-4:</strong> Project overview</p>
<p class="indent">You’ll create your web server with Flask, a Python web framework, by creating a file called <em>app.py</em>. When you access the Raspberry Pi IP address, port 80, your web browser requests the web page files stored in your Raspberry Pi—<em>index.html</em> and <em>style.css</em>—and then displays the web page. Your web page will have ON and OFF buttons that trigger an event that turns the lamp on and off, respectively.</p>
<h3 class="h3" id="lev164"><span class="blue1"><strong>WIRING THE CIRCUIT</strong></span></h3>
<p class="noindent">For safety reasons, you’ll want to place your relay inside a plastic box enclosure. You may need to drill some holes in the plastic box for the wires—one hole for the Pi wires, another for the lamp wires, and one for the power adapter. <a href="ch16.xhtml#ch16fig5">Figure 16-5</a> shows how the enclosure looks without the lid. The Raspberry Pi wires will go through a hole on the lid.</p>
<div class="image"><a id="ch16fig5"/><img src="../images/f0200-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-5:</strong> Circuit with the relay in a plastic box enclosure</p>
<div class="note">
<p class="notet"><span epub:type="pagebreak" id="page_201"/><strong>NOTE</strong></p>
<p class="notep"><em>Make sure you have the jumper cap on the JD-VCC and VCC pins.</em></p>
</div>
<p class="indent">With your Pi powered <em>off</em>, follow these instructions to build the circuit:</p>
<ol>
<li class="noindent"><p class="list">Connect one of the lamp holder terminals to the negative (–) terminal on the DC barrel power jack.</p></li>
<li class="noindent"><p class="list">Connect the DC barrel power jack positive (+) terminal to the relay COM socket.</p></li>
<li class="noindent"><p class="list">Connect the other lamp terminal to the relay NO socket. You need a screwdriver to connect the relay sockets tightly.</p></li>
<li class="noindent"><p class="list">Follow the table to wire the Raspberry Pi to the relay, and make sure your completed setup matches <a href="ch16.xhtml#ch16fig6">Figure 16-6</a>.</p>
<table class="topbot-d">
<thead>
<tr>
<td style="vertical-align: top;" class="border_th-o"><p class="tab_th"><strong>RELAY</strong></p></td>
<td style="vertical-align: top;" class="border_tha"><p class="tab_th"><strong>RASPBERRY PI</strong></p>
</td>
</tr>
</thead>
<tbody>
<tr>
<td style="vertical-align: top;" class="table-o"><p class="tabc"><span class="blue1">VCC</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="blue1">5 V</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-o"><p class="tabc"><span class="blue1">IN2</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="blue1">Don’t connect</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-o"><p class="tabc"><span class="blue1">IN1</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="blue1">GPIO 17</span></p></td>
</tr>
<tr>
<td style="vertical-align: top;" class="table-o"><p class="tabc"><span class="blue1">GND</span></p></td>
<td style="vertical-align: top;" class="table-a"><p class="tabc"><span class="blue1">GND</span></p></td>
</tr>
</tbody>
</table>
<div class="image"><a id="ch16fig6"/><img src="../images/f0201-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-6:</strong> Controlling a 12 V lamp with the Raspberry Pi using a relay</p></li>
</ol>
<div class="note">
<p class="notet"><span class="red"><strong>WARNING</strong></span></p>
<p class="notep"><em>Do not touch the relay or any live wires while they are connected to 12 V. If something isn’t working and you decide to make changes to the circuit, remove the 12 V power adapter plug from the socket before touching anything.</em></p>
</div>
<p class="indent">After completing the circuit and double-checking all the connections, apply power to the Raspberry Pi, connect a 12 V power adapter to the DC barrel power jack, and apply power by plugging the 12 V power adapter into a wall socket.</p>
<p class="indent"><span epub:type="pagebreak" id="page_202"/>If you want to control an LED instead, use the <a href="ch01.xhtml#ch01">Project 1</a> schematic diagram on <a href="ch01.xhtml#page_41">page 41</a> as a reference, connecting the LED to GPIO 17.</p>
<h3 class="h3" id="lev165"><span class="blue1"><strong>PREPARING YOUR PI TO RUN A WEB SERVER</strong></span></h3>
<p class="noindent">The Raspberry Pi supports a number of web servers, but we’re going to use Flask, a Python web framework, to turn the Pi into a dynamic web server.</p>
<h4 class="h4" id="lev166"><span class="blue1"><strong>Installing Flask</strong></span></h4>
<p class="noindent">To install Flask, you need to have pip, a tool to install libraries from the Python Package Index. Open the terminal and run the following commands to update your Pi and install pip:</p>
<div class="box">
<p class="programs">pi@raspberrypi:~ $ <span class="codestrong">sudo apt update &amp;&amp; sudo apt upgrade</span><br/>pi@raspberrypi:~ $ <span class="codestrong">sudo apt install python3-pip</span></p>
</div>
<p class="indent">Then use pip to install Flask and its dependencies by entering the following:</p>
<div class="box">
<p class="programs">pi@raspberrypi:~ $ <span class="codestrong">sudo pip3 install flask</span></p>
</div>
<p class="indent">If Flask installs correctly, the terminal will display the message <span class="literal">successfully installed Flask</span>.</p>
<h4 class="h4" id="lev167"><span class="blue1"><strong>Organizing Your Files</strong></span></h4>
<p class="noindent">Keeping your files organized is essential in this project because Flask needs your files structured in a particular way to work correctly. Create a folder specifically for this project called <em>Project_16</em> inside the <em>Web_Applications</em> folder. Then create the folders and files you’ll need by following the structure shown in <a href="ch16.xhtml#ch16fig7">Figure 16-7</a>.</p>
<div class="image"><a id="ch16fig7"/><img src="../images/f0202-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-7:</strong> Files and folders structure</p>
<p class="indent"><span epub:type="pagebreak" id="page_203"/>Create the <em>index.html</em> and <em>style.css</em> files using the Text Editor and the <em>app.py</em> file using Python 3 (IDLE). The <em>static</em> folder will store static files like the CSS file. The <em>templates</em> folder will store files that can be changed; for example, the <em>index.html</em> file is a template that dynamically changes the relay status label according to user input.</p>
<h3 class="h3" id="lev168"><span class="blue1"><strong>WRITING THE SCRIPTS</strong></span></h3>
<p class="noindent">You’ll need to write three scripts for this project: a Python script that will create your Pi web server, an HTML file that builds your web page, and a CSS file to style your web page.</p>
<h4 class="h4" id="lev169"><span class="blue1"><strong>Creating the Web Server</strong></span></h4>
<p class="noindent">To create the web server, open your <em>app.py</em> file, currently empty, and enter the code in <a href="ch16.xhtml#ch16list1">Listing 16-1</a>. This code creates the web server on Raspberry Pi port 80 and generates a web page that you can access on the local network, from any web browser. You can download all the code used throughout this project at <em><a href="https://www.nostarch.com/RaspberryPiProject/">https://www.nostarch.com/RaspberryPiProject/</a></em>.</p>
<p class="listing" id="ch16list1"><strong>LISTING 16-1:</strong> Creating a web server with Flask</p>
<div class="box">
<p class="programs">  <span class="red1">#import necessary libraries</span><br/><span class="ent">➊</span> <span class="orange">from</span> gpiozero <span class="orange">import</span> LED<br/>  <span class="orange">from</span> flask <span class="orange">import</span> Flask, render_template, request<br/><br/>  <span class="red1">#create a Flask object</span><br/><span class="ent">➋</span> app = Flask(__name__)<br/><br/>  <span class="red1">#create an object that refers to a relay</span><br/><span class="ent">➌</span> relay = LED(17)<br/>  <span class="red1">#set the relay off; remember the relay works with inverted logic</span><br/>  relay.on()<br/>  <span class="red1">#save current relay state</span><br/>  relay_state = <span class="green">'Relay is off'</span><br/><br/>  <span class="red1">#display the main web page</span><br/><span class="ent">➍</span> @app.route(<span class="green">'/'</span>)<br/>  <span class="orange">def</span> <span class="blue">main</span>():<br/>     <span class="orange">global</span> relay_state<br/>     <span class="red1">#pass the relay state to index.html and return it to the user</span><br/>   <span class="ent">➎</span> <span class="orange">return</span> render_template(<span class="green">'index.html'</span>, relay_state=relay_state)<br/><br/>  <span class="red1">#execute control() when someone presses the on/off buttons</span><br/><span class="ent">➏</span> @app.route(<span class="green">'/&lt;action&gt;'</span>)<br/>  <span class="orange">def</span> <span class="blue">control</span>(action):<br/>     <span class="orange">global</span> relay_state<br/>     <span class="red1">#if the action part of the URL is 'on', turn the relay on</span><br/>   <span class="ent">➐</span> <span class="orange">if</span> action == <span class="green">'on'</span>:<br/>        <span class="red1">#set the relay on</span><br/>        relay.off()<br/><span epub:type="pagebreak" id="page_204"/>        <span class="red1">#save the relay state</span><br/>        relay_state = <span class="green">'Relay is on'</span><br/>     <span class="orange">if</span> action == <span class="green">'off'</span>:<br/>        relay.on()<br/>        relay_state = <span class="green">'Relay is off'</span><br/><br/>     <span class="red1">#pass the relay state to index.html and return it to the user</span><br/>     <span class="orange">return</span> render_template(<span class="green">'index.html'</span>, relay_state=relay_state)<br/>  <span class="red1">#start the web server at localhost on port 80</span><br/>  <span class="orange">if</span> __name__ == <span class="green">'__main__'</span>:<br/>  <span class="ent">➑</span> app.run(host=<span class="green">'0.0.0.0'</span>, port=80, debug=<span class="orange">True</span>)</p>
</div>
<p class="indent">First you import the needed libraries <span class="ent">➊</span>, and then you create a Flask object called <span class="literal">app</span> <span class="ent">➋</span>. You initialize the relay on GPIO 17 <span class="ent">➌</span> and set the relay as <em>off</em> by default. The relay works with inverted logic, so you use <span class="literal">relay.on()</span> to turn it off.</p>
<p class="indent">The <span class="literal">@app.route('/')</span> decorator <span class="ent">➍</span> runs the <span class="literal">main()</span> function when someone accesses the root URL—the main Pi IP address of the server. In Python, a <em>decorator</em> starts with the <span class="literal">@</span> symbol and goes above a function definition. A decorator is basically a function that takes in another function, but you don’t need to worry about this for the moment.</p>
<p class="indent">You render the <em>index.html</em> file to the web browser and print the current relay state, using the <span class="literal">relay_state</span> variable value on the HTML file <span class="ent">➎</span>. Then you add a dynamic route with <span class="literal">action</span> as a variable <span class="ent">➏</span>. This runs the <span class="literal">control()</span> function when someone accesses the dynamic route. If the action from the URL is <span class="literal">on</span>, the program turns the relay on and saves the current relay state <span class="ent">➐</span>. This means when you access your Raspberry Pi IP address followed by <span class="literal">/on</span> (for example, <span class="literal">http://192.168.1.112/on</span>), the relay turns on. You’ll fetch your own IP address shortly.</p>
<p class="indent">If the action from the URL is <span class="literal">off</span>, the program turns the relay off and saves the current relay state. The server is listening on port 80 and the debug is set to <span class="literal">True</span> to report any errors <span class="ent">➑</span>.</p>
<h4 class="h4" id="lev170"><span class="blue1"><strong>Writing the HTML File</strong></span></h4>
<p class="noindent"><a href="ch16.xhtml#ch16list2">Listing 16-2</a> is a simple HTML document that structures the web page. Feel free to add more paragraphs and headings to personalize it using what you learned in <a href="ch15.xhtml#ch15">Project 15</a>. Copy this code to your <em>index.html</em> file, which should be located in the <em>templates</em> folder as shown earlier in <a href="ch16.xhtml#ch16fig7">Figure 16-7</a>.</p>
<p class="listing" id="ch16list2"><span epub:type="pagebreak" id="page_205"/><strong>LISTING 16-2:</strong> Writing the HTML file for your web page</p>
<div class="box">
<p class="programs">  &lt;!DOCTYPE html&gt;<br/>  &lt;head&gt;<br/>  &lt;title&gt;RPi Web Server&lt;/title&gt;<br/>  &lt;link rel="stylesheet" type="text/css" href="{{ url_for('static',<br/>  filename='style.css') }}"&gt;<br/><span class="ent">➊</span> &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;<br/>  &lt;/head&gt;<br/><br/>  &lt;body&gt;<br/>      &lt;h2&gt;RPi Web Server&lt;/h2&gt;<br/>   <span class="ent">➋</span> &lt;p&gt;{{relay_state}}&lt;/p&gt;<br/>   <span class="ent">➌</span> &lt;a href="/on"&gt;&lt;button&gt;ON&lt;/button&gt;&lt;/a&gt;<br/>   <span class="ent">➍</span> &lt;a href="/off"&gt;&lt;button class="off"&gt;OFF&lt;/button&gt;&lt;/a&gt;<br/>  &lt;/body&gt;<br/>  &lt;/html&gt;</p>
</div>
<p class="indent">This is a simple HTML structure, and we won’t go into too much detail in this HTML code, because you should already be familiar with most of it from <a href="ch15.xhtml#ch15">Project 15</a>. You can always refer back to that project for a refresher.</p>
<p class="indent">The <span class="literal">&lt;meta&gt;</span> tag and the given attributes make your web page responsive in any mobile browser <span class="ent">➊</span>. With this tag, the browser will render the width of the page to the width of the mobile screen. At line <span class="ent">➋</span>, between double curly brackets <span class="literal">{{ }}</span>, is <span class="literal">relay_state</span>, the variable we’re using in <em>app.py</em> to save the current relay state. This paragraph displays the state saved in the <span class="literal">relay_state</span> variable. When you click the ON button, you are redirected to <span class="literal">/on</span> root <span class="ent">➌</span>, which turns the relay on, as seen in <em>app.py</em>. When you click the OFF button, you are redirected to the <span class="literal">/off</span> root <span class="ent">➍</span>, which turns the relay off.</p>
<h4 class="h4" id="lev171"><span class="blue1"><strong>Writing the CSS File</strong></span></h4>
<p class="noindent"><a href="ch16.xhtml#ch16list3">Listing 16-3</a> styles your web page. This is just an example of how you can style your page; you can edit the properties as you like. Your <em>style.css</em> file should be inside the <em>static</em> folder, as you saw earlier in <a href="ch16.xhtml#ch16fig7">Figure 16-7</a>.</p>
<p class="listing" id="ch16list3"><strong>LISTING 16-3:</strong> Styling the web page with CSS</p>
<div class="box">
<p class="programs"><span class="ent">➊</span> h2 {<br/>    font-size: 2.5rem;<br/>  }<br/>  p {<br/>    font-size: 1.8rem;<br/>  }<br/><span class="ent">➋</span> body {<br/>    display: inline-block;<br/>    margin: 0px auto;<br/>    text-align: center;<br/>  }<br/><span epub:type="pagebreak" id="page_206"/><span class="ent">➌</span> button {<br/>    display: inline-block;<br/>    margin: 0 auto;<br/>    padding: 15px 25px;<br/>    font-size: 3rem;<br/>    border-radius: 4px;<br/>    color: #fff;<br/>    background-color: #009933;<br/>    border: none;<br/>  }<br/>  .off {<br/>    color: #fff;<br/>    background-color: #604f43;<br/>  }<br/>  a {<br/>    text-decoration: none;<br/>  }</p>
</div>
<p class="indent">In summary, we’ve set font sizes for the heading 2 and the paragraph <span class="ent">➊</span>. Then, we’ve aligned all our page body <span class="ent">➋</span>. Finally, we’ve edited the appearance of the ON and OFF buttons <span class="ent">➌</span>.</p>
<h4 class="h4" id="lev172"><span class="blue1"><strong>Launching Your Web Server</strong></span></h4>
<p class="noindent">With the Python script, HTML file, and CSS file completed, it’s time to run your web server. Open the terminal window and navigate to the <em>Project_16</em> folder by entering this command:</p>
<div class="box">
<p class="programs">pi@raspberrypi:~ $ <span class="codestrong">cd ~/Desktop/Projects/Web_Applications/Project_16</span></p>
</div>
<p class="indent">Then, run <em>app.py</em> with the following line:</p>
<div class="box">
<p class="programs">pi@raspberrypi:~Desktop/Projects/Web_Applications/Project_16 $ <span class="codestrong">sudo</span><br/><span class="codestrong">python3 app.py</span></p>
</div>
<p class="indent">Your web server is now running. Open any browser on the local network and enter your Raspberry Pi IP address.</p>
<p class="indent">To find your Pi’s IP address, go to the terminal and enter the following:</p>
<div class="box">
<p class="programs">pi@raspberrypi:~ $ <span class="codestrong">hostname -I</span></p>
</div>
<p class="indent">This prints the Pi’s IP address.</p>
<p class="indent">With your circuit ready and your server running, open a browser and navigate to your Raspberry Pi IP address. Your browser will display the web server page. Now click the buttons to remotely control the lamp! <a href="ch16.xhtml#ch16fig8">Figure 16-8</a> shows the web page in a smartphone’s browser.</p>
<div class="image"><span epub:type="pagebreak" id="page_207"/><a id="ch16fig8"/><img src="../images/f0207-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 16-8:</strong> Raspberry Pi web server page on a smartphone’s browser</p>
<p class="indent">To stop the web server, simply press <small>CTRL</small>-C.</p>
<h3 class="h3" id="lev173"><span class="blue1"><strong>TAKING IT FURTHER</strong></span></h3>
<p class="noindent">In this project, you learned how to use a relay and how to set up a web server to serve a web page, as well as put your HTML and CSS skills into practice. Here are some ideas for taking these concepts further:</p>
<ul>
<li class="noindent">Edit this project to control more than one output.</li>
<li class="noindent">Edit the CSS and HTML files to suit your own tastes.</li>
<li class="noindent">Control other electronic appliances.</li>
<li class="noindent">Edit previous projects to control lamps connected to relays instead of LEDs.</li>
</ul>
</div>
  </body>
</html>
