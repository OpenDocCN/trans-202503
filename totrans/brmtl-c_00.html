<html><head></head><body>
<section>
<header><h1 class="FrontmatterTitle" id="fm-501621f04-0001"><span epub:type="pagebreak" title="xvii" id="Page_xvii"/>Introduction</h1></header>
<figure class="opener">
<img src="image_fi/book_art/chapterart.png" alt=""/>
</figure>
<p class="ChapterIntro">This book is called <em>Bare Metal C</em> because it’s for people who get close to the hardware. It’s not for people who buy their computer in a box and never see the inside. The computer used in this book doesn’t even have a box. If you want to use it, you’re going to have to connect something to the “bare metal” of the board.</p>
<p>This book teaches embedded programming. An <em>embedded computer</em> is one that sits inside the machine and you never know it’s there. It’s the device that runs your garage door opener, your microwave, your car, or even your greeting card. But before it can do any of those things, it needs to be programmed. And that is what this book teaches you: how to program an embedded system.</p>
<p><span epub:type="pagebreak" title="xviii" id="Page_xviii"/>Why C? C gives you precise control over what your program is doing, whereas other languages, such as C++, can do a great deal of things behind your back. Consider the following statement:</p>
<pre><code>a = b;</code></pre>
<p>In C++, this could call a class’s assignment operator function, which might result in heap memory being allocated and freed as well as an exception being thrown. What all that means is unimportant right now; the point is that you don’t know exactly what’s going to happen.</p>
<p>In C, this statement assigns the value <code>b</code> to the variable <code>a</code> with no side effects; it’s just an assignment, nothing more. This example is simple, but you’ll see other ways that C does exactly what you tell it throughout the book.</p>
<p>Precise control is important because we are using C to program a low-end <em>system on a chip (SOC)</em> system based on the STM32F030x4 processor (a cheap ARM Cortex-M0-based system) that has 8KB of RAM. Memory management is very important with limited RAM, so we can’t afford to have a high-level language like C++ play with memory behind our backs. Precise control is also important because an embedded system doesn’t have an operating system and you need to tell the hardware what to do directly. High-level languages don’t always let you talk to the hardware, but C does.</p>
<p>The book is designed for people who have a basic knowledge of computers and hardware, but have a limited knowledge of programming. It is for the hardware designer who wants to connect a new piece of hardware to a microcontroller and use it for the first time. It is for the programmer who is interested in low-level programming and wants to get the most out of a 38¢ chip.</p>
<aside epub:type="sidebar">
<div class="top hr"><hr/></div>
<section class="note">
<h2><span class="NoteHead">NOTE</span></h2>
<p>	The ARM Cortex-M0 is very popular with low-end products because it costs 38¢ in quantities of 10,000 at the time of writing. Given that we hope to sell millions of whatever embedded system we are making, the difference between a 38¢ chip and a 56¢ chip is significant.</p>
<div class="bottom hr"><hr/></div>
</section>
</aside>
<p>To get the most out of your programs, you’ll need to know what goes on under the hood. The book shows you not only how to write a program, but also how your program is translated into machine code that’s used by the ARM chip. That’s important for maximum efficiency. For example, you’ll learn how much of a performance hit you’ll get if you change your program from using 16-bit integers to using 32-bit integers. The answer, surprisingly, is that 32-bit integers are <em>more efficient</em> and <em>faster </em>(32 bits is the natural number size for the ARM, and if it’s forced to do 16-bit arithmetic, it does 32-bit calculations and then throws away 16 bits).</p>
<p>To program and debug an ARM chip, you’ll need some extra tools: a flash memory programmer (to get your code into the machine), a USB-to-serial converter (because we use the serial line for debugging), and a JTAG debugger. Since almost all developers need this combination of tools, STMicroelectronics makes a board that provides all the hardware you’ll need, called the NUCLEO-F030R8. As of this writing, a chip shortage has <span epub:type="pagebreak" title="xix" id="Page_xix"/>made some boards hard to find. See <a href="https://nostarch.com/bare-metal-c" class="LinkURL">https://nostarch.com/bare-metal-c</a> for alternate boards. You’ll also need a mini USB cable (the one that doesn’t fit your phone) so you can plug the board into your computer.</p>
<p>Your first task is to order a NUCLEO-F030R8. Then start reading <span class="xref" itemid="xref_target_Chapter 1">Chapter 1</span>. By the time the board arrives, you will be ready for it.</p>
</section>
</body></html>