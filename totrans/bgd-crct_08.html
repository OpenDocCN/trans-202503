<html><head></head><body>
<h2 class="h2" id="ch07"><span epub:type="pagebreak" id="page_48"/><span class="big">7</span><br/>THE PARTY LIGHTS</h2>&#13;
<p class="ch-sub">THIS CIRCUIT CONNECTS MULTIPLE BLINKING LEDS TO MAKE STRING LIGHTS.</p>&#13;
<div class="image"><img alt="image" src="../images/f0048-01.jpg"/></div>&#13;
<h3 class="h3" id="lev60"><span epub:type="pagebreak" id="page_49"/><strong>THE CIRCUIT DIAGRAM</strong></h3>&#13;
<div class="image"><img alt="image" src="../images/f0049-01.jpg"/></div>&#13;
<h3 class="h3" id="lev61"><strong>THE PARTS LIST</strong></h3>&#13;
<table class="topbot-d">&#13;
<thead>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="tab_th"><strong>PART</strong></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="tab_th"><strong>VALUE</strong></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="tab_th"><strong>DESCRIPTION</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">R1</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">10 kΩ</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard resistor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">R2</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">100 kΩ</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard resistor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">R3</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">100 Ω</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard resistor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">C1</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">4.7 μF</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Polarized capacitor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">L1 to L6</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Red, yellow, or green</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard LEDs; all must have about the same forward voltage (Vf)</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">U1</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">NE555</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">555 timer IC</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<h3 class="h3" id="lev62"><strong>ABOUT THE CIRCUIT</strong></h3>&#13;
<p class="noindent">If you want to make something cool for a party, this is the circuit for you. It’s a simple way to make several LEDs blink at the same time. By roping all the lights together on a single long wire, you can hang them in a window or use them to decorate a tree.</p>&#13;
<p class="indent">The circuit uses a <em>555 timer</em>, which is a classic integrated circuit that makes things turn on and off repeatedly; you can see the timer’s pinout in <a href="ch07.xhtml#ch07fig1">Figure 7-1</a>.</p>&#13;
<div class="image"><a id="ch07fig1"/><img alt="image" src="../images/f0049-02.jpg"/></div>&#13;
<p class="figcap"><strong>FIGURE 7-1</strong> 555 timer pinout</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_50"/>Two resistors (R1 and R2) and a polarized capacitor (C1) set the blinking speed, while a third resistor (R3) determines the current that goes out to the LEDs.</p>&#13;
<h3 class="h3" id="lev63"><strong>COMMON MISTAKES</strong></h3>&#13;
<p class="noindent">If your circuit isn’t working correctly, you might have made one of these common mistakes:</p>&#13;
<ul>&#13;
<li class="noindent">Connecting one or more of the LEDs the wrong way</li>&#13;
<li class="noindent">Connecting the 555 timer the wrong way</li>&#13;
<li class="noindent">Connecting the capacitor the wrong way around</li>&#13;
<li class="noindent">Mixing up the pin numbers of the IC and connecting components to the wrong pin</li>&#13;
</ul>&#13;
<p class="indent">You can add or remove LEDs by changing the value of the resistor (R3). If each LED needs 10 mA and you want to use five LEDs, you need 5 × 10 mA, or 50 mA, through the resistor. You can use <em>Ohm’s law</em> to figure out the correct resistor value:</p>&#13;
<div class="image1"><img alt="image" src="../images/f0050-01.jpg"/></div>&#13;
<p class="indent">Ohm’s law states that the resistance is equal to the voltage across the resistor divided by the current flowing through it. In your five-LED example, that translates to the following equation:</p>&#13;
<div class="image1"><img alt="image" src="../images/f0050-02.jpg"/></div>&#13;
<p class="indent">In this case, you are working with a 9 V battery and there’s about 2 V across the LEDs, so you get 7 V as the numerator. You divide that by the 50 mA calculated earlier to get 140 Ω of resistance. Note that your circuit will require less resistance as you add more LEDs and more resistance as you remove LEDs.</p>&#13;
<p class="indent">If you’re struggling with this circuit, you can ask questions and make comments through the book’s website at <em><a href="https://nostarch.com/circuits/">https://nostarch.com/circuits/</a></em>.</p>&#13;
<div class="note">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>A 555 timer can give out only 100 to 200 mA in total. Check your chip’s datasheet for the exact value.</em></p>&#13;
</div>&#13;
<h3 class="h3" id="lev64"><strong>HOW THE CIRCUIT WORKS</strong></h3>&#13;
<p class="noindent"><a href="ch07.xhtml#ch07fig2">Figure 7-2</a> shows the inside of the 555 timer. The green box marked “flip-flop” is a simple memory device with two states: output high (flip) and output low (flop). It has two inputs, set (S) and reset (R), which <span epub:type="pagebreak" id="page_51"/>either set the output (Q) to high or reset it to low. Q is always the opposite of <img alt="image" src="../images/qbar.jpg"/>.</p>&#13;
<p class="indent">The two triangles you see are <em>comparators</em>. If the comparator input marked with + has a higher voltage than the one marked with –, the output is high; otherwise, the output is low.</p>&#13;
<div class="image"><a id="ch07fig2"/><img alt="image" src="../images/f0051-01.jpg"/></div>&#13;
<p class="figcap"><strong>FIGURE 7-2</strong> The inside of a 555 timer</p>&#13;
<p class="indent">The three 5 kΩ resistors between V<sub>CC</sub> and Gnd are the reason for the name “555.” They divide the V<sub>CC</sub> voltage by three and set fixed voltages for each of the comparators: one-third of the V<sub>CC</sub> voltage goes to the positive (+) input of comparator 1, and two-thirds of the V<sub>CC</sub> voltage goes to the negative (–) input of comparator 2.</p>&#13;
<p class="indent">If you look at the output (pin 3) in <a href="ch07.xhtml#ch07fig2">Figure 7-2</a>, you’ll see that it’s connected to the output of the flip-flop. This means that if the flip-flop is “set,” the output is high; otherwise, it is low. If you look at the input to the flip-flop, you’ll see that the two comparators handle setting and resetting the flip-flop. This means that the pins responsible for making the output turn on and off are pins 2 and 6.</p>&#13;
<p class="indent">Pin 2 is labeled <em>Trigger</em> and is responsible for setting the output high. When the voltage on pin 2 goes lower than one-third of V<sub>CC</sub>, comparator 1 outputs high and sets the flip-flop, which in turn sets the output high. Pin 6 is labeled <em>Threshold</em>; when its voltage exceeds two-thirds of the V<sub>CC</sub>, it is responsible for resetting the output to low.</p>&#13;
<p class="indent">Refer back to the circuit diagram at the beginning of this project. For this project’s circuit, pins 2 and 6 are connected to each other, so when the voltage on these pins goes high, the output goes low. When the voltage on these pins goes low, the output goes high. That <span epub:type="pagebreak" id="page_52"/>means you need to switch the voltage on these pins between high and low in order to switch the output between low and high.</p>&#13;
<p class="indent">Pin 7 is very important for making this happen. It is labeled <em>Discharge</em>. Inside the chip, pin 7 is connected to a transistor, as shown in the figure. The transistor is controlled by <img alt="image" src="../images/qbar.jpg"/>, the opposite value of the output. This means that when the output is low, the transistor gets a high value and turns on, connecting pin 7 to ground. Otherwise, the transistor is off and leaves pin 7 unconnected.</p>&#13;
<p class="indent">The moment we apply power to our circuit, capacitor C1 is completely discharged. That means pin 2 (Trigger) is low, which means pin 3 (the output) is high. This also means that pin 7 (Discharge) is not connected to anything internally.</p>&#13;
<p class="indent">Since C1 is connected to 9 V through R1 and R2, C1 will start to charge, and the voltage on its positive pin will begin to rise. This means the voltage on pin 6 (Threshold) is increasing, too. When the voltage becomes high enough on Threshold, the output changes from high to low, and pin 7 (Discharge) is connected internally to ground.</p>&#13;
<p class="indent">In this situation, when pin 7 is connected to ground, the capacitor will start to discharge (hence the pin name Discharge) through R2, down to ground at pin 7. So the voltage across the capacitor decreases and continues to do so until the voltage on pin 2 is so low that it “triggers.” When it triggers, the output switches from low to high, and pin 7 is disconnected from ground again.</p>&#13;
<p class="indent">Now we’re in the same situation as when we started, where the capacitor is charging so that the voltage over the capacitor increases. This process repeats indefinitely.</p>&#13;
<p class="indent">The following is a brief overview of each pin on the 555 timer:</p>&#13;
<ul>&#13;
<li class="noindent"><strong>Pin 1 Ground</strong> This pin is connected to the negative side of the battery.</li>&#13;
<li class="noindent"><strong>Pin 2 Trigger</strong> When this pin goes low (less than one-third of V<sub>CC</sub>), the output goes high.</li>&#13;
<li class="noindent"><strong>Pin 3 Output</strong> The output voltage from the chip is around 1.5 V lower than V<sub>CC</sub> when high and around 0 V when low.</li>&#13;
<li class="noindent"><strong>Pin 4 Reset</strong> This pin resets the whole circuit. It’s an “inverted” pin, which means it resets when the pin goes low. This means the pin must be high normally so that the chip isn’t in a “reset” state.</li>&#13;
<li class="noindent"><span epub:type="pagebreak" id="page_53"/><strong>Pin 5 Control Voltage</strong> This pin is used to control the threshold voltage of the Threshold pin. This can be useful when you want to adjust the frequency of the circuit without changing the values of R1, R2, and C1. For this circuit, you can leave it unconnected. Sometimes you’ll see this pin connected with a capacitor to ground; this is a way to keep any noise on it from influencing the frequency.</li>&#13;
<li class="noindent"><strong>Pin 6 Threshold</strong> This pin sets the output back to low when the voltage goes high (above two-thirds of V<sub>CC</sub>).</li>&#13;
<li class="noindent"><strong>Pin 7 Discharge</strong> This pin is unconnected when output is high, and it’s connected to ground when output is low.</li>&#13;
<li class="noindent"><strong>Pin 8 V<sub>CC</sub> Supply</strong> This is the positive power supply pin and can take a voltage between 5 and 15 V.</li>&#13;
</ul>&#13;
</body></html>